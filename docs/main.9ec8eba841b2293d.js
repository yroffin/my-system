(self.webpackChunkfront=self.webpackChunkfront||[]).push([[179],{429:(Be,Ce,V)=>{"use strict";function Y(i){return"function"==typeof i}function D(i){const e=i(n=>{Error.call(n),n.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const H=D(i=>function(e){i(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((n,r)=>`${r+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function B(i,t){if(i){const e=i.indexOf(t);0<=e&&i.splice(e,1)}}class W{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const s of e)s.remove(this);else e.remove(this);const{initialTeardown:n}=this;if(Y(n))try{n()}catch(s){t=s instanceof H?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{q(s)}catch(o){t=t??[],o instanceof H?t=[...t,...o.errors]:t.push(o)}}if(t)throw new H(t)}}add(t){var e;if(t&&t!==this)if(this.closed)q(t);else{if(t instanceof W){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(t)}}_hasParent(t){const{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){const{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&B(e,t)}remove(t){const{_finalizers:e}=this;e&&B(e,t),t instanceof W&&t._removeParent(this)}}W.EMPTY=(()=>{const i=new W;return i.closed=!0,i})();const P=W.EMPTY;function O(i){return i instanceof W||i&&"closed"in i&&Y(i.remove)&&Y(i.add)&&Y(i.unsubscribe)}function q(i){Y(i)?i():i.unsubscribe()}const te={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},J={setTimeout(i,t,...e){const{delegate:n}=J;return n?.setTimeout?n.setTimeout(i,t,...e):setTimeout(i,t,...e)},clearTimeout(i){const{delegate:t}=J;return(t?.clearTimeout||clearTimeout)(i)},delegate:void 0};function oe(i){J.setTimeout(()=>{const{onUnhandledError:t}=te;if(!t)throw i;t(i)})}function se(){}const Q=xe("C",void 0,void 0);function xe(i,t,e){return{kind:i,value:t,error:e}}let Oe=null;function re(i){if(te.useDeprecatedSynchronousErrorHandling){const t=!Oe;if(t&&(Oe={errorThrown:!1,error:null}),i(),t){const{errorThrown:e,error:n}=Oe;if(Oe=null,e)throw n}}else i()}class z extends W{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,O(t)&&t.add(this)):this.destination=at}static create(t,e,n){return new Ue(t,e,n)}next(t){this.isStopped?Pe(function ae(i){return xe("N",i,void 0)}(t),this):this._next(t)}error(t){this.isStopped?Pe(function U(i){return xe("E",void 0,i)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Pe(Q,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const $=Function.prototype.bind;function ne(i,t){return $.call(i,t)}class ge{constructor(t){this.partialObserver=t}next(t){const{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(n){Re(n)}}error(t){const{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(n){Re(n)}else Re(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){Re(e)}}}class Ue extends z{constructor(t,e,n){let r;if(super(),Y(t)||!t)r={next:t??void 0,error:e??void 0,complete:n??void 0};else{let s;this&&te.useDeprecatedNextContext?(s=Object.create(t),s.unsubscribe=()=>this.unsubscribe(),r={next:t.next&&ne(t.next,s),error:t.error&&ne(t.error,s),complete:t.complete&&ne(t.complete,s)}):r=t}this.destination=new ge(r)}}function Re(i){te.useDeprecatedSynchronousErrorHandling?function ue(i){te.useDeprecatedSynchronousErrorHandling&&Oe&&(Oe.errorThrown=!0,Oe.error=i)}(i):oe(i)}function Pe(i,t){const{onStoppedNotification:e}=te;e&&J.setTimeout(()=>e(i,t))}const at={closed:!0,next:se,error:function rt(i){throw i},complete:se},xt="function"==typeof Symbol&&Symbol.observable||"@@observable";function He(i){return i}function gt(i){return 0===i.length?He:1===i.length?i[0]:function(e){return i.reduce((n,r)=>r(n),e)}}let bt=(()=>{class i{constructor(e){e&&(this._subscribe=e)}lift(e){const n=new i;return n.source=this,n.operator=e,n}subscribe(e,n,r){const s=function Dn(i){return i&&i instanceof z||function Ut(i){return i&&Y(i.next)&&Y(i.error)&&Y(i.complete)}(i)&&O(i)}(e)?e:new Ue(e,n,r);return re(()=>{const{operator:o,source:l}=this;s.add(o?o.call(s,l):l?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(e){try{return this._subscribe(e)}catch(n){e.error(n)}}forEach(e,n){return new(n=kn(n))((r,s)=>{const o=new Ue({next:l=>{try{e(l)}catch(u){s(u),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(e){var n;return null===(n=this.source)||void 0===n?void 0:n.subscribe(e)}[xt](){return this}pipe(...e){return gt(e)(this)}toPromise(e){return new(e=kn(e))((n,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>n(s))})}}return i.create=t=>new i(t),i})();function kn(i){var t;return null!==(t=i??te.Promise)&&void 0!==t?t:Promise}const Jt=D(i=>function(){i(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let nn=(()=>{class i extends bt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const n=new Ln(this,this);return n.operator=e,n}_throwIfClosed(){if(this.closed)throw new Jt}next(e){re(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const n of this.currentObservers)n.next(e)}})}error(e){re(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:n}=this;for(;n.length;)n.shift().error(e)}})}complete(){re(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:n,isStopped:r,observers:s}=this;return n||r?P:(this.currentObservers=null,s.push(e),new W(()=>{this.currentObservers=null,B(s,e)}))}_checkFinalizedStatuses(e){const{hasError:n,thrownError:r,isStopped:s}=this;n?e.error(r):s&&e.complete()}asObservable(){const e=new bt;return e.source=this,e}}return i.create=(t,e)=>new Ln(t,e),i})();class Ln extends nn{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===n||n.call(e,t)}error(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===n||n.call(e,t)}complete(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)}_subscribe(t){var e,n;return null!==(n=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==n?n:P}}function xn(i){return Y(i?.lift)}function Cn(i){return t=>{if(xn(t))return t.lift(function(e){try{return i(e,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function yn(i,t,e,n,r){return new je(i,t,e,n,r)}class je extends z{constructor(t,e,n,r,s,o){super(t),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=e?function(l){try{e(l)}catch(u){t.error(u)}}:super._next,this._error=r?function(l){try{r(l)}catch(u){t.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=n?function(){try{n()}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function be(i,t){return Cn((e,n)=>{let r=0;e.subscribe(yn(n,s=>{n.next(i.call(t,s,r++))}))})}function Cs(i){return this instanceof Cs?(this.v=i,this):new Cs(i)}function ua(i,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,n=e.apply(i,t||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(I){n[I]&&(r[I]=function(T){return new Promise(function(F,j){s.push([I,T,F,j])>1||l(I,T)})})}function l(I,T){try{!function u(I){I.value instanceof Cs?Promise.resolve(I.value.v).then(p,v):x(s[0][2],I)}(n[I](T))}catch(F){x(s[0][3],F)}}function p(I){l("next",I)}function v(I){l("throw",I)}function x(I,T){I(T),s.shift(),s.length&&l(s[0][0],s[0][1])}}function el(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=i[Symbol.asyncIterator];return t?t.call(i):(i=function vn(i){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&i[t],n=0;if(e)return e.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(i),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(s){e[s]=i[s]&&function(o){return new Promise(function(l,u){!function r(s,o,l,u){Promise.resolve(u).then(function(p){s({value:p,done:l})},o)}(l,u,(o=i[s](o)).done,o.value)})}}}const Lu=i=>i&&"number"==typeof i.length&&"function"!=typeof i;function $a(i){return Y(i?.then)}function Lh(i){return Y(i[xt])}function au(i){return Symbol.asyncIterator&&Y(i?.[Symbol.asyncIterator])}function Ia(i){return new TypeError(`You provided ${null!==i&&"object"==typeof i?"an invalid object":`'${i}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Pu=function Sd(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function th(i){return Y(i?.[Pu])}function df(i){return ua(this,arguments,function*(){const e=i.getReader();try{for(;;){const{value:n,done:r}=yield Cs(e.read());if(r)return yield Cs(void 0);yield yield Cs(n)}}finally{e.releaseLock()}})}function nh(i){return Y(i?.getReader)}function hl(i){if(i instanceof bt)return i;if(null!=i){if(Lh(i))return function hf(i){return new bt(t=>{const e=i[xt]();if(Y(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(i);if(Lu(i))return function nd(i){return new bt(t=>{for(let e=0;e<i.length&&!t.closed;e++)t.next(i[e]);t.complete()})}(i);if($a(i))return function ff(i){return new bt(t=>{i.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,oe)})}(i);if(au(i))return wc(i);if(th(i))return function Ph(i){return new bt(t=>{for(const e of i)if(t.next(e),t.closed)return;t.complete()})}(i);if(nh(i))return function Tg(i){return wc(df(i))}(i)}throw Ia(i)}function wc(i){return new bt(t=>{(function Ed(i,t){var e,n,r,s;return function Je(i,t,e,n){return new(e||(e=Promise))(function(s,o){function l(v){try{p(n.next(v))}catch(x){o(x)}}function u(v){try{p(n.throw(v))}catch(x){o(x)}}function p(v){v.done?s(v.value):function r(s){return s instanceof e?s:new e(function(o){o(s)})}(v.value).then(l,u)}p((n=n.apply(i,t||[])).next())})}(this,void 0,void 0,function*(){try{for(e=el(i);!(n=yield e.next()).done;)if(t.next(n.value),t.closed)return}catch(o){r={error:o}}finally{try{n&&!n.done&&(s=e.return)&&(yield s.call(e))}finally{if(r)throw r.error}}t.complete()})})(i,t).catch(e=>t.error(e))})}function to(i,t,e,n=0,r=!1){const s=t.schedule(function(){e(),r?i.add(this.schedule(null,n)):this.unsubscribe()},n);if(i.add(s),!r)return s}function fl(i,t,e=1/0){return Y(t)?fl((n,r)=>be((s,o)=>t(n,s,r,o))(hl(i(n,r))),e):("number"==typeof t&&(e=t),Cn((n,r)=>function pf(i,t,e,n,r,s,o,l){const u=[];let p=0,v=0,x=!1;const I=()=>{x&&!u.length&&!p&&t.complete()},T=j=>p<n?F(j):u.push(j),F=j=>{s&&t.next(j),p++;let X=!1;hl(e(j,v++)).subscribe(yn(t,ce=>{r?.(ce),s?T(ce):t.next(ce)},()=>{X=!0},void 0,()=>{if(X)try{for(p--;u.length&&p<n;){const ce=u.shift();o?to(t,o,()=>F(ce)):F(ce)}I()}catch(ce){t.error(ce)}}))};return i.subscribe(yn(t,T,()=>{x=!0,I()})),()=>{l?.()}}(n,r,i,e)))}function Ac(i=1/0){return fl(He,i)}const tl=new bt(i=>i.complete());function Ge(i){return i&&Y(i.schedule)}function it(i){return i[i.length-1]}function Ye(i){return Y(it(i))?i.pop():void 0}function de(i){return Ge(it(i))?i.pop():void 0}function $e(i,t=0){return Cn((e,n)=>{e.subscribe(yn(n,r=>to(n,i,()=>n.next(r),t),()=>to(n,i,()=>n.complete(),t),r=>to(n,i,()=>n.error(r),t)))})}function _t(i,t=0){return Cn((e,n)=>{n.add(i.schedule(()=>e.subscribe(n),t))})}function hi(i,t){if(!i)throw new Error("Iterable cannot be null");return new bt(e=>{to(e,t,()=>{const n=i[Symbol.asyncIterator]();to(e,t,()=>{n.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function or(i,t){return t?function ur(i,t){if(null!=i){if(Lh(i))return function zt(i,t){return hl(i).pipe(_t(t),$e(t))}(i,t);if(Lu(i))return function yi(i,t){return new bt(e=>{let n=0;return t.schedule(function(){n===i.length?e.complete():(e.next(i[n++]),e.closed||this.schedule())})})}(i,t);if($a(i))return function In(i,t){return hl(i).pipe(_t(t),$e(t))}(i,t);if(au(i))return hi(i,t);if(th(i))return function ti(i,t){return new bt(e=>{let n;return to(e,t,()=>{n=i[Pu](),to(e,t,()=>{let r,s;try{({value:r,done:s}=n.next())}catch(o){return void e.error(o)}s?e.complete():e.next(r)},0,!0)}),()=>Y(n?.return)&&n.return()})}(i,t);if(nh(i))return function pr(i,t){return hi(df(i),t)}(i,t)}throw Ia(i)}(i,t):hl(i)}function xo(i={}){const{connector:t=(()=>new nn),resetOnError:e=!0,resetOnComplete:n=!0,resetOnRefCountZero:r=!0}=i;return s=>{let o,l,u,p=0,v=!1,x=!1;const I=()=>{l?.unsubscribe(),l=void 0},T=()=>{I(),o=u=void 0,v=x=!1},F=()=>{const j=o;T(),j?.unsubscribe()};return Cn((j,X)=>{p++,!x&&!v&&I();const ce=u=u??t();X.add(()=>{p--,0===p&&!x&&!v&&(l=wo(F,r))}),ce.subscribe(X),!o&&p>0&&(o=new Ue({next:we=>ce.next(we),error:we=>{x=!0,I(),l=wo(T,e,we),ce.error(we)},complete:()=>{v=!0,I(),l=wo(T,n),ce.complete()}}),hl(j).subscribe(o))})(s)}}function wo(i,t,...e){if(!0===t)return void i();if(!1===t)return;const n=new Ue({next:()=>{n.unsubscribe(),i()}});return t(...e).subscribe(n)}function cs(i){for(let t in i)if(i[t]===cs)return t;throw Error("Could not find renamed property on target object.")}function Sa(i,t){for(const e in t)t.hasOwnProperty(e)&&!i.hasOwnProperty(e)&&(i[e]=t[e])}function us(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(us).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const t=i.toString();if(null==t)return""+t;const e=t.indexOf("\n");return-1===e?t:t.substring(0,e)}function qa(i,t){return null==i||""===i?null===t?"":t:null==t||""===t?i:i+" "+t}const Ru=cs({__forward_ref__:cs});function ds(i){return i.__forward_ref__=ds,i.toString=function(){return us(this())},i}function ts(i){return Mg(i)?i():i}function Mg(i){return"function"==typeof i&&i.hasOwnProperty(Ru)&&i.__forward_ref__===ds}class gi extends Error{constructor(t,e){super(function Dg(i,t){return`NG0${Math.abs(i)}${t?": "+t.trim():""}`}(t,e)),this.code=t}}function Ls(i){return"string"==typeof i?i:null==i?"":String(i)}function xs(i,t){throw new gi(-201,!1)}function Sc(i,t){null==i&&function no(i,t,e,n){throw new Error(`ASSERTION ERROR: ${i}`+(null==n?"":` [Expected=> ${e} ${n} ${t} <=Actual]`))}(t,i,null,"!=")}function Yi(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Tr(i){return{providers:i.providers||[],imports:i.imports||[]}}function Ec(i){return Ty(i,jf)||Ty(i,xm)}function Ty(i,t){return i.hasOwnProperty(t)?i[t]:null}function da(i){return i&&(i.hasOwnProperty(Vp)||i.hasOwnProperty(wm))?i[Vp]:null}const jf=cs({\u0275prov:cs}),Vp=cs({\u0275inj:cs}),xm=cs({ngInjectableDef:cs}),wm=cs({ngInjectorDef:cs});var ns=(()=>((ns=ns||{})[ns.Default=0]="Default",ns[ns.Host=1]="Host",ns[ns.Self=2]="Self",ns[ns.SkipSelf=4]="SkipSelf",ns[ns.Optional=8]="Optional",ns))();let yv;function ku(i){const t=yv;return yv=i,t}function ql(i,t,e){const n=Ec(i);return n&&"root"==n.providedIn?void 0===n.value?n.value=n.factory():n.value:e&ns.Optional?null:void 0!==t?t:void xs(us(i))}function id(i){return{toString:i}.toString()}var rd=(()=>((rd=rd||{})[rd.OnPush=0]="OnPush",rd[rd.Default=1]="Default",rd))(),Ta=(()=>{return(i=Ta||(Ta={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Ta;var i})();const io=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),kh={},mo=[],Xa=cs({\u0275cmp:cs}),$f=cs({\u0275dir:cs}),Ya=cs({\u0275pipe:cs}),nl=cs({\u0275mod:cs}),lu=cs({\u0275fac:cs}),sd=cs({__NG_ELEMENT_ID__:cs});let qf=0;function Ir(i){return id(()=>{const e=!0===i.standalone,n={},r={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:n,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===rd.OnPush,directiveDefs:null,pipeDefs:null,standalone:e,dependencies:e&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||mo,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Ta.Emulated,id:"c"+qf++,styles:i.styles||mo,_:null,setInput:null,schemas:i.schemas||null,tView:null},s=i.dependencies,o=i.features;return r.inputs=Ly(i.inputs,n),r.outputs=Ly(i.outputs),o&&o.forEach(l=>l(r)),r.directiveDefs=s?()=>("function"==typeof s?s():s).map(Dd).filter(gf):null,r.pipeDefs=s?()=>("function"==typeof s?s():s).map(Da).filter(gf):null,r})}function Dd(i){return qo(i)||kl(i)}function gf(i){return null!==i}function Pr(i){return id(()=>({type:i.type,bootstrap:i.bootstrap||mo,declarations:i.declarations||mo,imports:i.imports||mo,exports:i.exports||mo,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function Ly(i,t){if(null==i)return kh;const e={};for(const n in i)if(i.hasOwnProperty(n)){let r=i[n],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),e[r]=n,t&&(t[r]=s)}return e}const $r=Ir;function cu(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function qo(i){return i[Xa]||null}function kl(i){return i[$f]||null}function Da(i){return i[Ya]||null}function uu(i,t){const e=i[nl]||null;if(!e&&!0===t)throw new Error(`Type ${us(i)} does not have '\u0275mod' property.`);return e}function Zc(i){return Array.isArray(i)&&"object"==typeof i[1]}function Ld(i){return Array.isArray(i)&&!0===i[1]}function bv(i){return 0!=(8&i.flags)}function Rg(i){return 2==(2&i.flags)}function kg(i){return 1==(1&i.flags)}function Pd(i){return null!==i.template}function Sm(i){return 0!=(256&i[2])}function tp(i,t){return i.hasOwnProperty(lu)?i[lu]:null}class Mm{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function _a(){return yf}function yf(i){return i.type.prototype.ngOnChanges&&(i.setInput=np),ky}function ky(){const i=Dm(this),t=i?.current;if(t){const e=i.previous;if(e===kh)i.previous=t;else for(let n in t)e[n]=t[n];i.current=null,this.ngOnChanges(t)}}function np(i,t,e,n){const r=Dm(i)||function Fg(i,t){return i[Sv]=t}(i,{previous:kh,current:null}),s=r.current||(r.current={}),o=r.previous,l=this.declaredInputs[e],u=o[l];s[l]=new Mm(u&&u.currentValue,t,o===kh),i[n]=t}_a.ngInherit=!0;const Sv="__ngSimpleChanges__";function Dm(i){return i[Sv]||null}function ra(i){for(;Array.isArray(i);)i=i[0];return i}function zg(i,t){return ra(t[i])}function cd(i,t){return ra(t[i.index])}function ms(i,t){return i.data[t]}function pl(i,t){return i[t]}function Mc(i,t){const e=t[i];return Zc(e)?e:e[0]}function vo(i){return 4==(4&i[2])}function Ro(i){return 64==(64&i[2])}function $s(i,t){return null==t?null:i[t]}function Wr(i){i[18]=0}function Vg(i,t){i[5]+=t;let e=i,n=i[3];for(;null!==n&&(1===t&&1===e[5]||-1===t&&0===e[5]);)n[5]+=t,e=n,n=n[3]}const es={lFrame:xa(null),bindingsEnabled:!0};function Ny(){return es.bindingsEnabled}function mi(){return es.lFrame.lView}function Es(){return es.lFrame.tView}function wt(i){return es.lFrame.contextLView=i,i[8]}function At(i){return es.lFrame.contextLView=null,i}function dt(){let i=ko();for(;null!==i&&64===i.type;)i=i.parent;return i}function ko(){return es.lFrame.currentTNode}function sa(i,t){const e=es.lFrame;e.currentTNode=i,e.isParent=t}function Ps(){return es.lFrame.isParent}function $p(){es.lFrame.isParent=!1}function Oo(){const i=es.lFrame;let t=i.bindingRootIndex;return-1===t&&(t=i.bindingRootIndex=i.tView.bindingStartIndex),t}function kd(){return es.lFrame.bindingIndex++}function gl(i){const t=es.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+i,e}function Nh(i,t){const e=es.lFrame;e.bindingIndex=e.bindingRootIndex=i,Ou(t)}function Ou(i){es.lFrame.currentDirectiveIndex=i}function Lc(){return es.lFrame.currentQueryIndex}function Ug(i){es.lFrame.currentQueryIndex=i}function Ts(i){const t=i[1];return 2===t.type?t.declTNode:1===t.type?i[6]:null}function Tv(i,t,e){if(e&ns.SkipSelf){let r=t,s=i;for(;!(r=r.parent,null!==r||e&ns.Host||(r=Ts(s),null===r||(s=s[15],10&r.type))););if(null===r)return!1;t=r,i=s}const n=es.lFrame=Mr();return n.currentTNode=t,n.lView=i,!0}function Hg(i){const t=Mr(),e=i[1];es.lFrame=t,t.currentTNode=e.firstChild,t.lView=i,t.tView=e,t.contextLView=i,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function Mr(){const i=es.lFrame,t=null===i?null:i.child;return null===t?xa(i):t}function xa(i){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=t),t}function Fl(){const i=es.lFrame;return es.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const oa=Fl;function za(){const i=Fl();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function uc(){return es.lFrame.selectedIndex}function bf(i){es.lFrame.selectedIndex=i}function Va(){const i=es.lFrame;return ms(i.tView,i.selectedIndex)}function xf(i,t){for(let e=t.directiveStart,n=t.directiveEnd;e<n;e++){const s=i.data[e].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:l,ngAfterViewInit:u,ngAfterViewChecked:p,ngOnDestroy:v}=s;o&&(i.contentHooks||(i.contentHooks=[])).push(-e,o),l&&((i.contentHooks||(i.contentHooks=[])).push(e,l),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(e,l)),u&&(i.viewHooks||(i.viewHooks=[])).push(-e,u),p&&((i.viewHooks||(i.viewHooks=[])).push(e,p),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(e,p)),null!=v&&(i.destroyHooks||(i.destroyHooks=[])).push(e,v)}}function zh(i,t,e){wf(i,t,3,e)}function jg(i,t,e,n){(3&i[2])===e&&wf(i,t,e,n)}function Od(i,t){let e=i[2];(3&e)===t&&(e&=2047,e+=1,i[2]=e)}function wf(i,t,e,n){const s=n??-1,o=t.length-1;let l=0;for(let u=void 0!==n?65535&i[18]:0;u<o;u++)if("number"==typeof t[u+1]){if(l=t[u],null!=n&&l>=n)break}else t[u]<0&&(i[18]+=65536),(l<s||-1==s)&&(Af(i,e,t,u),i[18]=(4294901760&i[18])+u+2),u++}function Af(i,t,e,n){const r=e[n]<0,s=e[n+1],l=i[r?-e[n]:e[n]];if(r){if(i[2]>>11<i[18]>>16&&(3&i[2])===t){i[2]+=2048;try{s.call(l)}finally{}}}else try{s.call(l)}finally{}}class qp{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Xp(i,t,e){let n=0;for(;n<e.length;){const r=e[n];if("number"==typeof r){if(0!==r)break;n++;const s=e[n++],o=e[n++],l=e[n++];i.setAttribute(t,o,l,s)}else{const s=r,o=e[++n];Uh(s)?i.setProperty(t,s,o):i.setAttribute(t,s,o),n++}}return n}function sl(i){return 3===i||4===i||6===i}function Uh(i){return 64===i.charCodeAt(0)}function Fd(i,t){if(null!==t&&0!==t.length)if(null===i||0===i.length)i=t.slice();else{let e=-1;for(let n=0;n<t.length;n++){const r=t[n];"number"==typeof r?e=r:0===e||Pc(i,e,r,null,-1===e||2===e?t[++n]:null)}}return i}function Pc(i,t,e,n,r){let s=0,o=i.length;if(-1===t)o=-1;else for(;s<i.length;){const l=i[s++];if("number"==typeof l){if(l===t){o=-1;break}if(l>t){o=s-1;break}}}for(;s<i.length;){const l=i[s];if("number"==typeof l)break;if(l===e){if(null===n)return void(null!==r&&(i[s+1]=r));if(n===i[s+1])return void(i[s+2]=r)}s++,null!==n&&s++,null!==r&&s++}-1!==o&&(i.splice(o,0,t),s=o+1),i.splice(s++,0,e),null!==n&&i.splice(s++,0,n),null!==r&&i.splice(s++,0,r)}function Nd(i){return-1!==i}function ud(i){return 32767&i}function fu(i,t){let e=function Fu(i){return i>>16}(i),n=t;for(;e>0;)n=n[15],e--;return n}let aa=!0;function lh(i){const t=aa;return aa=i,t}let pu=0;const yo={};function js(i,t){const e=ap(i,t);if(-1!==e)return e;const n=t[1];n.firstCreatePass&&(i.injectorIndex=t.length,op(n.data,i),op(t,null),op(n.blueprint,null));const r=kc(i,t),s=i.injectorIndex;if(Nd(r)){const o=ud(r),l=fu(r,t),u=l[1].data;for(let p=0;p<8;p++)t[s+p]=l[o+p]|u[o+p]}return t[s+8]=r,s}function op(i,t){i.push(0,0,0,0,0,0,0,0,t)}function ap(i,t){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===t[i.injectorIndex+8]?-1:i.injectorIndex}function kc(i,t){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let e=0,n=null,r=t;for(;null!==r;){if(n=Ka(r),null===n)return-1;if(e++,r=r[15],-1!==n.injectorIndex)return n.injectorIndex|e<<16}return-1}function lp(i,t,e){!function Rc(i,t,e){let n;"string"==typeof e?n=e.charCodeAt(0)||0:e.hasOwnProperty(sd)&&(n=e[sd]),null==n&&(n=e[sd]=pu++);const r=255&n;t.data[i+(r>>5)]|=1<<r}(i,t,e)}function dd(i,t,e){if(e&ns.Optional)return i;xs()}function Hh(i,t,e,n){if(e&ns.Optional&&void 0===n&&(n=null),0==(e&(ns.Self|ns.Host))){const r=i[9],s=ku(void 0);try{return r?r.get(t,n,e&ns.Optional):ql(t,n,e&ns.Optional)}finally{ku(s)}}return dd(n,0,e)}function Gh(i,t,e,n=ns.Default,r){if(null!==i){if(1024&t[2]){const o=function zd(i,t,e,n,r){let s=i,o=t;for(;null!==s&&null!==o&&1024&o[2]&&!(256&o[2]);){const l=Zl(s,o,e,n|ns.Self,yo);if(l!==yo)return l;let u=s.parent;if(!u){const p=o[21];if(p){const v=p.get(e,yo,n);if(v!==yo)return v}u=Ka(o),o=o[15]}s=u}return r}(i,t,e,n,yo);if(o!==yo)return o}const s=Zl(i,t,e,n,yo);if(s!==yo)return s}return Hh(t,e,n,r)}function Zl(i,t,e,n,r){const s=function ch(i){if("string"==typeof i)return i.charCodeAt(0)||0;const t=i.hasOwnProperty(sd)?i[sd]:void 0;return"number"==typeof t?t>=0?255&t:Yp:t}(e);if("function"==typeof s){if(!Tv(t,i,n))return n&ns.Host?dd(r,0,n):Hh(t,e,n,r);try{const o=s(n);if(null!=o||n&ns.Optional)return o;xs()}finally{oa()}}else if("number"==typeof s){let o=null,l=ap(i,t),u=-1,p=n&ns.Host?t[16][6]:null;for((-1===l||n&ns.SkipSelf)&&(u=-1===l?kc(i,t):t[l+8],-1!==u&&cp(n,!1)?(o=t[1],l=ud(u),t=fu(u,t)):l=-1);-1!==l;){const v=t[1];if(Wh(s,l,v.data)){const x=al(l,t,e,o,n,p);if(x!==yo)return x}u=t[l+8],-1!==u&&cp(n,t[1].data[l+8]===p)&&Wh(s,l,t)?(o=v,l=ud(u),t=fu(u,t)):l=-1}}return r}function al(i,t,e,n,r,s){const o=t[1],l=o.data[i+8],v=Bd(l,o,e,null==n?Rg(l)&&aa:n!=o&&0!=(3&l.type),r&ns.Host&&s===l);return null!==v?Jc(t,o,v,l):yo}function Bd(i,t,e,n,r){const s=i.providerIndexes,o=t.data,l=1048575&s,u=i.directiveStart,v=s>>20,I=r?l+v:i.directiveEnd;for(let T=n?l:l+v;T<I;T++){const F=o[T];if(T<u&&e===F||T>=u&&F.type===e)return T}if(r){const T=o[u];if(T&&Pd(T)&&T.type===e)return u}return null}function Jc(i,t,e,n){let r=i[e];const s=t.data;if(function By(i){return i instanceof qp}(r)){const o=r;o.resolving&&function gv(i,t){const e=t?`. Dependency path: ${t.join(" > ")} > ${i}`:"";throw new gi(-200,`Circular dependency in DI detected for ${i}${e}`)}(function Ao(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():Ls(i)}(s[e]));const l=lh(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?ku(o.injectImpl):null;Tv(i,n,ns.Default);try{r=i[e]=o.factory(void 0,s,i,n),t.firstCreatePass&&e>=n.directiveStart&&function Pm(i,t,e){const{ngOnChanges:n,ngOnInit:r,ngDoCheck:s}=t.type.prototype;if(n){const o=yf(t);(e.preOrderHooks||(e.preOrderHooks=[])).push(i,o),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(i,o)}r&&(e.preOrderHooks||(e.preOrderHooks=[])).push(0-i,r),s&&((e.preOrderHooks||(e.preOrderHooks=[])).push(i,s),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(i,s))}(e,s[e],t)}finally{null!==u&&ku(u),lh(l),o.resolving=!1,oa()}}return r}function Wh(i,t,e){return!!(e[t+(i>>5)]&1<<i)}function cp(i,t){return!(i&ns.Self||i&ns.Host&&t)}class hd{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,n){return Gh(this._tNode,this._lView,t,n,e)}}function Yp(){return new hd(dt(),mi())}function Vo(i){return id(()=>{const t=i.prototype.constructor,e=t[lu]||jh(t),n=Object.prototype;let r=Object.getPrototypeOf(i.prototype).constructor;for(;r&&r!==n;){const s=r[lu]||jh(r);if(s&&s!==e)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function jh(i){return Mg(i)?()=>{const t=jh(ts(i));return t&&t()}:tp(i)}function Ka(i){const t=i[1],e=t.type;return 2===e?t.declTNode:1===e?i[6]:null}function uh(i){return function qg(i,t){if("class"===t)return i.classes;if("style"===t)return i.styles;const e=i.attrs;if(e){const n=e.length;let r=0;for(;r<n;){const s=e[r];if(sl(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<n&&"string"==typeof e[r];)r++;else{if(s===t)return e[r+1];r+=2}}}return null}(dt(),i)}const Vd="__parameters__";function la(i,t,e){return id(()=>{const n=function dh(i){return function(...e){if(i){const n=i(...e);for(const r in n)this[r]=n[r]}}}(t);function r(...s){if(this instanceof r)return n.apply(this,s),this;const o=new r(...s);return l.annotation=o,l;function l(u,p,v){const x=u.hasOwnProperty(Vd)?u[Vd]:Object.defineProperty(u,Vd,{value:[]})[Vd];for(;x.length<=v;)x.push(null);return(x[v]=x[v]||[]).push(o),u}}return e&&(r.prototype=Object.create(e.prototype)),r.prototype.ngMetadataName=i,r.annotationCls=r,r})}class Ji{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=Yi({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ua(i,t){void 0===t&&(t=i);for(let e=0;e<i.length;e++){let n=i[e];Array.isArray(n)?(t===i&&(t=i.slice(0,e)),Ua(n,t)):t!==i&&t.push(n)}return t}function gu(i,t){i.forEach(e=>Array.isArray(e)?gu(e,t):t(e))}function zu(i,t,e){t>=i.length?i.push(e):i.splice(t,0,e)}function Vu(i,t){return t>=i.length-1?i.pop():i.splice(t,1)[0]}function Il(i,t){const e=[];for(let n=0;n<i;n++)e.push(t);return e}function Sl(i,t,e){let n=So(i,t);return n>=0?i[1|n]=e:(n=~n,function up(i,t,e,n){let r=i.length;if(r==t)i.push(e,n);else if(1===r)i.push(n,i[0]),i[0]=e;else{for(r--,i.push(i[r-1],i[r]);r>t;)i[r]=i[r-2],r--;i[t]=e,i[t+1]=n}}(i,n,t,e)),n}function hc(i,t){const e=So(i,t);if(e>=0)return i[1|e]}function So(i,t){return function ec(i,t,e){let n=0,r=i.length>>e;for(;r!==n;){const s=n+(r-n>>1),o=i[s<<e];if(t===o)return s<<e;o>t?r=s:n=s+1}return~(r<<e)}(i,t,1)}const vu={},Ef="__NG_DI_FLAG__",Tf="ngTempTokenPath",pc=/\n/gm,Gd="__source";let qh;function Uu(i){const t=qh;return qh=i,t}function hh(i,t=ns.Default){if(void 0===qh)throw new gi(-203,!1);return null===qh?ql(i,void 0,t):qh.get(i,t&ns.Optional?null:void 0,t)}function jn(i,t=ns.Default){return(function _v(){return yv}()||hh)(ts(i),t)}function ha(i,t=ns.Default){return"number"!=typeof t&&(t=0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)),jn(i,t)}function Xh(i){const t=[];for(let e=0;e<i.length;e++){const n=ts(i[e]);if(Array.isArray(n)){if(0===n.length)throw new gi(900,!1);let r,s=ns.Default;for(let o=0;o<n.length;o++){const l=n[o],u=Nm(l);"number"==typeof u?-1===u?r=l.token:s|=u:r=l}t.push(jn(r,s))}else t.push(jn(n))}return t}function yu(i,t){return i[Ef]=t,i.prototype[Ef]=t,i}function Nm(i){return i[Ef]}const Hu=yu(la("Inject",i=>({token:i})),-1),Tl=yu(la("Optional"),8),pd=yu(la("SkipSelf"),4);let md,Oc,Wu;function gc(i){return function Oa(){if(void 0===Oc&&(Oc=null,io.trustedTypes))try{Oc=io.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return Oc}()?.createHTML(i)||i}function gh(i){return function Lf(){if(void 0===Wu&&(Wu=null,io.trustedTypes))try{Wu=io.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return Wu}()?.createHTML(i)||i}class nu{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class mh extends nu{getTypeName(){return"HTML"}}class vp extends nu{getTypeName(){return"Style"}}class Hm extends nu{getTypeName(){return"Script"}}class G_ extends nu{getTypeName(){return"URL"}}class tm extends nu{getTypeName(){return"ResourceURL"}}function yl(i){return i instanceof nu?i.changingThisBreaksApplicationSecurity:i}function ca(i,t){const e=function Pf(i){return i instanceof nu&&i.getTypeName()||null}(i);if(null!=e&&e!==t){if("ResourceURL"===e&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${e} (see https://g.co/ng/security#xss)`)}return e===t}class rg{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(gc(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch{return null}}}class ju{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const n=this.inertDocument.createElement("body");e.appendChild(n)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=gc(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=gc(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const o=e.item(r).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&t.removeAttribute(o)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const sg=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,og=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function ag(i){return(i=String(i)).match(sg)||i.match(og)?i:"unsafe:"+i}function Fc(i){const t={};for(const e of i.split(","))t[e]=!0;return t}function Rf(...i){const t={};for(const e of i)for(const n in e)e.hasOwnProperty(n)&&(t[n]=!0);return t}const Gm=Fc("area,br,col,hr,img,wbr"),Vy=Fc("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Uy=Fc("rp,rt"),ll=Rf(Gm,Rf(Vy,Fc("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Rf(Uy,Fc("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Rf(Uy,Vy)),Wm=Fc("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),kf=Fc("srcset"),Hy=Rf(Wm,kf,Fc("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Fc("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Gy=Fc("script,style,template");class W_{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let r=this.checkClobberedElement(e,e.nextSibling);if(r){e=r;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!ll.hasOwnProperty(e))return this.sanitizedSomething=!0,!Gy.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let r=0;r<n.length;r++){const s=n.item(r),o=s.name,l=o.toLowerCase();if(!Hy.hasOwnProperty(l)){this.sanitizedSomething=!0;continue}let u=s.value;Wm[l]&&(u=ag(u)),kf[l]&&(i=u,u=(i=String(i)).split(",").map(t=>ag(t.trim())).join(", ")),this.buf.push(" ",o,'="',Wy(u),'"')}var i;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();ll.hasOwnProperty(e)&&!Gm.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(Wy(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const j_=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,$_=/([^\#-~ |!])/g;function Wy(i){return i.replace(/&/g,"&amp;").replace(j_,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace($_,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let jm;function Fv(i,t){let e=null;try{jm=jm||function yh(i){const t=new ju(i);return function $d(){try{return!!(new window.DOMParser).parseFromString(gc(""),"text/html")}catch{return!1}}()?new rg(t):t}(i);let n=t?String(t):"";e=jm.getInertBodyElement(n);let r=5,s=n;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,n=s,s=e.innerHTML,e=jm.getInertBodyElement(n)}while(n!==s);return gc((new W_).sanitizeChildren(bu(e)||e))}finally{if(e){const n=bu(e)||e;for(;n.firstChild;)n.removeChild(n.firstChild)}}}function bu(i){return"content"in i&&function q_(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var fa=(()=>((fa=fa||{})[fa.NONE=0]="NONE",fa[fa.HTML=1]="HTML",fa[fa.STYLE=2]="STYLE",fa[fa.SCRIPT=3]="SCRIPT",fa[fa.URL=4]="URL",fa[fa.RESOURCE_URL=5]="RESOURCE_URL",fa))();function wa(i){const t=rm();return t?gh(t.sanitize(fa.HTML,i)||""):ca(i,"HTML")?gh(yl(i)):Fv(function Vm(){return void 0!==md?md:typeof document<"u"?document:void 0}(),Ls(i))}function qd(i){const t=rm();return t?t.sanitize(fa.URL,i)||"":ca(i,"URL")?yl(i):ag(Ls(i))}function rm(){const i=mi();return i&&i[12]}const zv=new Ji("ENVIRONMENT_INITIALIZER"),qy=new Ji("INJECTOR",-1),Xy=new Ji("INJECTOR_DEF_TYPES");class a{get(t,e=vu){if(e===vu){const n=new Error(`NullInjectorError: No provider for ${us(t)}!`);throw n.name="NullInjectorError",n}return e}}function d(...i){return{\u0275providers:g(0,i)}}function g(i,...t){const e=[],n=new Set;let r;return gu(t,s=>{const o=s;A(o,e,[],n)&&(r||(r=[]),r.push(o))}),void 0!==r&&y(r,e),e}function y(i,t){for(let e=0;e<i.length;e++){const{providers:r}=i[e];gu(r,s=>{t.push(s)})}}function A(i,t,e,n){if(!(i=ts(i)))return!1;let r=null,s=da(i);const o=!s&&qo(i);if(s||o){if(o&&!o.standalone)return!1;r=i}else{const u=i.ngModule;if(s=da(u),!s)return!1;r=u}const l=n.has(r);if(o){if(l)return!1;if(n.add(r),o.dependencies){const u="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const p of u)A(p,t,e,n)}}else{if(!s)return!1;{if(null!=s.imports&&!l){let p;n.add(r);try{gu(s.imports,v=>{A(v,t,e,n)&&(p||(p=[]),p.push(v))})}finally{}void 0!==p&&y(p,t)}if(!l){const p=tp(r)||(()=>new r);t.push({provide:r,useFactory:p,deps:mo},{provide:Xy,useValue:r,multi:!0},{provide:zv,useValue:()=>jn(r),multi:!0})}const u=s.providers;null==u||l||gu(u,v=>{t.push(v)})}}return r!==i&&void 0!==i.providers}const R=cs({provide:String,useValue:cs});function N(i){return null!==i&&"object"==typeof i&&R in i}function fe(i){return"function"==typeof i}const Le=new Ji("Set Injector scope."),ke={},Fe={};let nt;function tt(){return void 0===nt&&(nt=new a),nt}class Ke{}class pt extends Ke{constructor(t,e,n,r){super(),this.parent=e,this.source=n,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ui(t,o=>this.processProvider(o)),this.records.set(qy,sn(void 0,this)),r.has("environment")&&this.records.set(Ke,sn(void 0,this));const s=this.records.get(Le);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Xy.multi,mo,ns.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();for(const t of this._onDestroyHooks)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(t){this._onDestroyHooks.push(t)}runInContext(t){this.assertNotDestroyed();const e=Uu(this),n=ku(void 0);try{return t()}finally{Uu(e),ku(n)}}get(t,e=vu,n=ns.Default){this.assertNotDestroyed();const r=Uu(this),s=ku(void 0);try{if(!(n&ns.SkipSelf)){let l=this.records.get(t);if(void 0===l){const u=function On(i){return"function"==typeof i||"object"==typeof i&&i instanceof Ji}(t)&&Ec(t);l=u&&this.injectableDefInScope(u)?sn(vt(t),ke):null,this.records.set(t,l)}if(null!=l)return this.hydrate(t,l)}return(n&ns.Self?tt():this.parent).get(t,e=n&ns.Optional&&e===vu?null:e)}catch(o){if("NullInjectorError"===o.name){if((o[Tf]=o[Tf]||[]).unshift(us(t)),r)throw o;return function Kg(i,t,e,n){const r=i[Tf];throw t[Gd]&&r.unshift(t[Gd]),i.message=function hp(i,t,e,n=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let r=us(t);if(Array.isArray(t))r=t.map(us).join(" -> ");else if("object"==typeof t){let s=[];for(let o in t)if(t.hasOwnProperty(o)){let l=t[o];s.push(o+":"+("string"==typeof l?JSON.stringify(l):us(l)))}r=`{${s.join(", ")}}`}return`${e}${n?"("+n+")":""}[${r}]: ${i.replace(pc,"\n  ")}`}("\n"+i.message,r,e,n),i.ngTokenPath=r,i[Tf]=null,i}(o,t,"R3InjectorError",this.source)}throw o}finally{ku(s),Uu(r)}}resolveInjectorInitializers(){const t=Uu(this),e=ku(void 0);try{const n=this.get(zv.multi,mo,ns.Self);for(const r of n)r()}finally{Uu(t),ku(e)}}toString(){const t=[],e=this.records;for(const n of e.keys())t.push(us(n));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new gi(205,!1)}processProvider(t){let e=fe(t=ts(t))?t:ts(t&&t.provide);const n=function Bt(i){return N(i)?sn(void 0,i.useValue):sn(cn(i),ke)}(t);if(fe(t)||!0!==t.multi)this.records.get(e);else{let r=this.records.get(e);r||(r=sn(void 0,ke,!0),r.factory=()=>Xh(r.multi),this.records.set(e,r)),e=t,r.multi.push(t)}this.records.set(e,n)}hydrate(t,e){return e.value===ke&&(e.value=Fe,e.value=e.factory()),"object"==typeof e.value&&e.value&&function dn(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=ts(t.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}}function vt(i){const t=Ec(i),e=null!==t?t.factory:tp(i);if(null!==e)return e;if(i instanceof Ji)throw new gi(204,!1);if(i instanceof Function)return function qt(i){const t=i.length;if(t>0)throw Il(t,"?"),new gi(204,!1);const e=function O_(i){const t=i&&(i[jf]||i[xm]);if(t){const e=function Ea(i){if(i.hasOwnProperty("name"))return i.name;const t=(""+i).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${e}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${e}" class.`),t}return null}(i);return null!==e?()=>e.factory(i):()=>new i}(i);throw new gi(204,!1)}function cn(i,t,e){let n;if(fe(i)){const r=ts(i);return tp(r)||vt(r)}if(N(i))n=()=>ts(i.useValue);else if(function ee(i){return!(!i||!i.useFactory)}(i))n=()=>i.useFactory(...Xh(i.deps||[]));else if(function ie(i){return!(!i||!i.useExisting)}(i))n=()=>jn(ts(i.useExisting));else{const r=ts(i&&(i.useClass||i.provide));if(!function en(i){return!!i.deps}(i))return tp(r)||vt(r);n=()=>new r(...Xh(i.deps))}return n}function sn(i,t,e=!1){return{factory:i,value:t,multi:e?[]:void 0}}function Ai(i){return!!i.\u0275providers}function ui(i,t){for(const e of i)Array.isArray(e)?ui(e,t):Ai(e)?ui(e.\u0275providers,t):t(e)}class $t{}class _i{resolveComponentFactory(t){throw function Wn(i){const t=Error(`No component factory found for ${us(i)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=i,t}(t)}}let fi=(()=>{class i{}return i.NULL=new _i,i})();function ir(){return zi(dt(),mi())}function zi(i,t){return new Xn(cd(i,t))}let Xn=(()=>{class i{constructor(e){this.nativeElement=e}}return i.__NG_ELEMENT_ID__=ir,i})();function Hn(i){return i instanceof Xn?i.nativeElement:i}class c{}let h=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function m(){const i=mi(),e=Mc(dt().index,i);return(Zc(e)?e:i)[11]}(),i})(),_=(()=>{class i{}return i.\u0275prov=Yi({token:i,providedIn:"root",factory:()=>null}),i})();class C{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const w=new C("14.1.3"),E={};function Vt(i){return i.ngOriginalError}class et{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t);this._console.error("ERROR",t),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&Vt(t);for(;e&&Vt(e);)e=Vt(e);return e||null}}const En=new Map;let Yn=0;const rr="__ngContext__";function Br(i,t){Zc(t)?(i[rr]=t[20],function bi(i){En.set(i[20],i)}(t)):i[rr]=t}function Kr(i){const t=i[rr];return"number"==typeof t?function pi(i){return En.get(i)||null}(t):t||null}function hr(i){const t=Kr(i);return t?Zc(t)?t:t.lView:null}const St=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind(io))();function $n(i){return i.ownerDocument.defaultView}function an(i){return i instanceof Function?i():i}var Oi=(()=>((Oi=Oi||{})[Oi.Important=1]="Important",Oi[Oi.DashCase=2]="DashCase",Oi))();function Zi(i,t){return undefined(i,t)}function Ho(i){const t=i[3];return Ld(t)?t[3]:t}function Sr(i){return Ul(i[13])}function Ha(i){return Ul(i[4])}function Ul(i){for(;null!==i&&!Ld(i);)i=i[4];return i}function Nc(i,t,e,n,r){if(null!=n){let s,o=!1;Ld(n)?s=n:Zc(n)&&(o=!0,n=n[0]);const l=ra(n);0===i&&null!==e?null==r?J_(t,e,l):cg(t,e,l,r||null,!0):1===i&&null!==e?cg(t,e,l,r||null,!0):2===i?function LA(i,t,e){const n=Uv(i,t);n&&function ef(i,t,e,n){i.removeChild(t,e,n)}(i,n,t,e)}(t,l,o):3===i&&t.destroyNode(l),null!=s&&function lT(i,t,e,n,r){const s=e[7];s!==ra(e)&&Nc(t,i,n,s,r);for(let l=10;l<e.length;l++){const u=e[l];Cu(u[1],u,i,t,n,s)}}(t,i,s,e,r)}}function nc(i,t,e){return i.createElement(t,e)}function K_(i,t){const e=i[9],n=e.indexOf(t),r=t[3];512&t[2]&&(t[2]&=-513,Vg(r,-1)),e.splice(n,1)}function Z_(i,t){if(i.length<=10)return;const e=10+t,n=i[e];if(n){const r=n[17];null!==r&&r!==i&&K_(r,n),t>0&&(i[e-1][4]=n[4]);const s=Vu(i,10+t);!function zc(i,t){Cu(i,t,t[11],2,null,null),t[0]=null,t[6]=null}(n[1],n);const o=s[19];null!==o&&o.detachView(s[1]),n[3]=null,n[4]=null,n[2]&=-65}return n}function ta(i,t){if(!(128&t[2])){const e=t[11];e.destroyNode&&Cu(i,t,e,3,null,null),function Zs(i){let t=i[13];if(!t)return Q_(i[1],i);for(;t;){let e=null;if(Zc(t))e=t[13];else{const n=t[10];n&&(e=n)}if(!e){for(;t&&!t[4]&&t!==i;)Zc(t)&&Q_(t[1],t),t=t[3];null===t&&(t=i),Zc(t)&&Q_(t[1],t),e=t&&t[4]}t=e}}(t)}}function Q_(i,t){if(!(128&t[2])){t[2]&=-65,t[2]|=128,function lg(i,t){let e;if(null!=i&&null!=(e=i.destroyHooks))for(let n=0;n<e.length;n+=2){const r=t[e[n]];if(!(r instanceof qp)){const s=e[n+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const l=r[s[o]],u=s[o+1];try{u.call(l)}finally{}}else try{s.call(r)}finally{}}}}(i,t),function mb(i,t){const e=i.cleanup,n=t[7];let r=-1;if(null!==e)for(let s=0;s<e.length-1;s+=2)if("string"==typeof e[s]){const o=e[s+1],l="function"==typeof o?o(t):ra(t[o]),u=n[r=e[s+2]],p=e[s+3];"boolean"==typeof p?l.removeEventListener(e[s],u,p):p>=0?n[r=p]():n[r=-p].unsubscribe(),s+=2}else{const o=n[r=e[s+1]];e[s].call(o)}if(null!==n){for(let s=r+1;s<n.length;s++)(0,n[s])();t[7]=null}}(i,t),1===t[1].type&&t[11].destroy();const e=t[17];if(null!==e&&Ld(t[3])){e!==t[3]&&K_(e,t);const n=t[19];null!==n&&n.detachView(i)}!function di(i){En.delete(i[20])}(t)}}function Yy(i,t,e){return function Vv(i,t,e){let n=t;for(;null!==n&&40&n.type;)n=(t=n).parent;if(null===n)return e[0];if(2&n.flags){const r=i.data[n.directiveStart].encapsulation;if(r===Ta.None||r===Ta.Emulated)return null}return cd(n,e)}(i,t.parent,e)}function cg(i,t,e,n,r){i.insertBefore(t,e,n,r)}function J_(i,t,e){i.appendChild(t,e)}function vb(i,t,e,n,r){null!==n?cg(i,t,e,n,r):J_(i,t,e)}function Uv(i,t){return i.parentNode(t)}function bh(i,t,e){return MA(i,t,e)}let MA=function _b(i,t,e){return 40&i.type?cd(i,e):null};function Cb(i,t,e,n){const r=Yy(i,n,t),s=t[11],l=bh(n.parent||t[6],n,t);if(null!=r)if(Array.isArray(e))for(let u=0;u<e.length;u++)vb(s,r,e[u],l,!1);else vb(s,r,e,l,!1)}function Ky(i,t){if(null!==t){const e=t.type;if(3&e)return cd(t,i);if(4&e)return lx(-1,i[t.index]);if(8&e){const n=t.child;if(null!==n)return Ky(i,n);{const r=i[t.index];return Ld(r)?lx(-1,r):ra(r)}}if(32&e)return Zi(t,i)()||ra(i[t.index]);{const n=DA(i,t);return null!==n?Array.isArray(n)?n[0]:Ky(Ho(i[16]),n):Ky(i,t.next)}}return null}function DA(i,t){return null!==t?i[16][6].projection[t.projection]:null}function lx(i,t){const e=10+i+1;if(e<t.length){const n=t[e],r=n[1].firstChild;if(null!==r)return Ky(n,r)}return t[7]}function Uc(i,t,e,n,r,s,o){for(;null!=e;){const l=n[e.index],u=e.type;if(o&&0===t&&(l&&Br(ra(l),n),e.flags|=4),64!=(64&e.flags))if(8&u)Uc(i,t,e.child,n,r,s,!1),Nc(t,i,r,l,s);else if(32&u){const p=Zi(e,n);let v;for(;v=p();)Nc(t,i,r,v,s);Nc(t,i,r,l,s)}else 16&u?PA(i,t,n,e,r,s):Nc(t,i,r,l,s);e=o?e.projectionNext:e.next}}function Cu(i,t,e,n,r,s){Uc(e,n,i.firstChild,t,r,s,!1)}function PA(i,t,e,n,r,s){const o=e[16],u=o[6].projection[n.projection];if(Array.isArray(u))for(let p=0;p<u.length;p++)Nc(t,i,r,u[p],s);else Uc(i,t,u,o[3],r,s,!0)}function kA(i,t,e){i.setAttribute(t,"style",e)}function cx(i,t,e){""===e?i.removeAttribute(t,"class"):i.setAttribute(t,"class",e)}function OA(i,t,e){let n=i.length;for(;;){const r=i.indexOf(t,e);if(-1===r)return r;if(0===r||i.charCodeAt(r-1)<=32){const s=t.length;if(r+s===n||i.charCodeAt(r+s)<=32)return r}e=r+1}}const FA="ng-template";function uT(i,t,e){let n=0;for(;n<i.length;){let r=i[n++];if(e&&"class"===r){if(r=i[n],-1!==OA(r.toLowerCase(),t,0))return!0}else if(1===r){for(;n<i.length&&"string"==typeof(r=i[n++]);)if(r.toLowerCase()===t)return!0;return!1}}return!1}function NA(i){return 4===i.type&&i.value!==FA}function BA(i,t,e){return t===(4!==i.type||e?i.value:FA)}function zA(i,t,e){let n=4;const r=i.attrs||[],s=function Zy(i){for(let t=0;t<i.length;t++)if(sl(i[t]))return t;return i.length}(r);let o=!1;for(let l=0;l<t.length;l++){const u=t[l];if("number"!=typeof u){if(!o)if(4&n){if(n=2|1&n,""!==u&&!BA(i,u,e)||""===u&&1===t.length){if(Cp(n))return!1;o=!0}}else{const p=8&n?u:t[++l];if(8&n&&null!==i.attrs){if(!uT(i.attrs,p,e)){if(Cp(n))return!1;o=!0}continue}const x=dT(8&n?"class":u,r,NA(i),e);if(-1===x){if(Cp(n))return!1;o=!0;continue}if(""!==p){let I;I=x>s?"":r[x+1].toLowerCase();const T=8&n?I:null;if(T&&-1!==OA(T,p,0)||2&n&&p!==I){if(Cp(n))return!1;o=!0}}}}else{if(!o&&!Cp(n)&&!Cp(u))return!1;if(o&&Cp(u))continue;o=!1,n=u|1&n}}return Cp(n)||o}function Cp(i){return 0==(1&i)}function dT(i,t,e,n){if(null===t)return-1;let r=0;if(n||!e){let s=!1;for(;r<t.length;){const o=t[r];if(o===i)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let l=t[++r];for(;"string"==typeof l;)l=t[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function fT(i,t){let e=i.indexOf(4);if(e>-1)for(e++;e<i.length;){const n=i[e];if("number"==typeof n)return-1;if(n===t)return e;e++}return-1}(t,i)}function VA(i,t,e=!1){for(let n=0;n<t.length;n++)if(zA(i,t[n],e))return!0;return!1}function pT(i,t){e:for(let e=0;e<t.length;e++){const n=t[e];if(i.length===n.length){for(let r=0;r<i.length;r++)if(i[r]!==n[r])continue e;return!0}}return!1}function UA(i,t){return i?":not("+t.trim()+")":t}function gT(i){let t=i[0],e=1,n=2,r="",s=!1;for(;e<i.length;){let o=i[e];if("string"==typeof o)if(2&n){const l=i[++e];r+="["+o+(l.length>0?'="'+l+'"':"")+"]"}else 8&n?r+="."+o:4&n&&(r+=" "+o);else""!==r&&!Cp(o)&&(t+=UA(s,r),r=""),n=o,s=s||!Cp(n);e++}return""!==r&&(t+=UA(s,r)),t}const qs={};function Me(i){GA(Es(),mi(),uc()+i,!1)}function GA(i,t,e,n){if(!n)if(3==(3&t[2])){const s=i.preOrderCheckHooks;null!==s&&zh(t,s,e)}else{const s=i.preOrderHooks;null!==s&&jg(t,s,0,e)}bf(e)}function qA(i,t=null,e=null,n){const r=XA(i,t,e,n);return r.resolveInjectorInitializers(),r}function XA(i,t=null,e=null,n,r=new Set){const s=[e||mo,d(i)];return n=n||("object"==typeof i?void 0:us(i)),new pt(s,t||tt(),n||null,r)}let xu=(()=>{class i{static create(e,n){if(Array.isArray(e))return qA({name:""},n,e,"");{const r=e.name??"";return qA({name:r},e.parent,e.providers,r)}}}return i.THROW_IF_NOT_FOUND=vu,i.NULL=new a,i.\u0275prov=Yi({token:i,providedIn:"any",factory:()=>jn(qy)}),i.__NG_ELEMENT_ID__=-1,i})();function Zt(i,t=ns.Default){const e=mi();return null===e?jn(i,t):Gh(dt(),e,ts(i),t)}function vx(){throw new Error("invalid")}function e0(i,t){return i<<17|t<<2}function xp(i){return i>>17&32767}function t0(i){return 2|i}function wp(i){return(131068&i)>>2}function yx(i,t){return-131069&i|t<<2}function _x(i){return 1|i}function KR(i,t){const e=i.contentQueries;if(null!==e)for(let n=0;n<e.length;n+=2){const r=e[n],s=e[n+1];if(-1!==s){const o=i.data[s];Ug(r),o.contentQueries(2,t[s],s)}}}function lI(i,t,e,n,r,s,o,l,u,p,v){const x=t.blueprint.slice();return x[0]=r,x[2]=76|n,(null!==v||i&&1024&i[2])&&(x[2]|=1024),Wr(x),x[3]=x[15]=i,x[8]=e,x[10]=o||i&&i[10],x[11]=l||i&&i[11],x[12]=u||i&&i[12]||null,x[9]=p||i&&i[9]||null,x[6]=s,x[20]=function li(){return Yn++}(),x[21]=v,x[16]=2==t.type?i[16]:x,x}function Sb(i,t,e,n,r){let s=i.data[t];if(null===s)s=function NT(i,t,e,n,r){const s=ko(),o=Ps(),u=i.data[t]=function V6(i,t,e,n,r,s){return{type:e,index:n,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,e,t,n,r);return null===i.firstChild&&(i.firstChild=u),null!==s&&(o?null==s.child&&null!==u.parent&&(s.child=u):null===s.next&&(s.next=u)),u}(i,t,e,n,r),function Fh(){return es.lFrame.inI18n}()&&(s.flags|=64);else if(64&s.type){s.type=e,s.value=n,s.attrs=r;const o=function Io(){const i=es.lFrame,t=i.currentTNode;return i.isParent?t:t.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return sa(s,!0),s}function Eb(i,t,e,n){if(0===e)return-1;const r=t.length;for(let s=0;s<e;s++)t.push(n),i.blueprint.push(n),i.data.push(null);return r}function cI(i,t,e){Hg(t);try{const n=i.viewQuery;null!==n&&$T(1,n,e);const r=i.template;null!==r&&ZR(i,t,r,1,e),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&KR(i,t),i.staticViewQueries&&$T(2,i.viewQuery,e);const s=i.components;null!==s&&function F6(i,t){for(let e=0;e<t.length;e++)nW(i,t[e])}(t,s)}catch(n){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),n}finally{t[2]&=-5,za()}}function wx(i,t,e,n){const r=t[2];if(128!=(128&r)){Hg(t);try{Wr(t),function dr(i){return es.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==e&&ZR(i,t,e,2,n);const o=3==(3&r);if(o){const p=i.preOrderCheckHooks;null!==p&&zh(t,p,null)}else{const p=i.preOrderHooks;null!==p&&jg(t,p,0,null),Od(t,0)}if(function eW(i){for(let t=Sr(i);null!==t;t=Ha(t)){if(!t[2])continue;const e=t[9];for(let n=0;n<e.length;n++){const r=e[n],s=r[3];0==(512&r[2])&&Vg(s,1),r[2]|=512}}}(t),function J6(i){for(let t=Sr(i);null!==t;t=Ha(t))for(let e=10;e<t.length;e++){const n=t[e],r=n[1];Ro(n)&&wx(r,n,r.template,n[8])}}(t),null!==i.contentQueries&&KR(i,t),o){const p=i.contentCheckHooks;null!==p&&zh(t,p)}else{const p=i.contentHooks;null!==p&&jg(t,p,1),Od(t,1)}!function aI(i,t){const e=i.hostBindingOpCodes;if(null!==e)try{for(let n=0;n<e.length;n++){const r=e[n];if(r<0)bf(~r);else{const s=r,o=e[++n],l=e[++n];Nh(o,s),l(2,t[s])}}}finally{bf(-1)}}(i,t);const l=i.components;null!==l&&function O6(i,t){for(let e=0;e<t.length;e++)tW(i,t[e])}(t,l);const u=i.viewQuery;if(null!==u&&$T(2,u,n),o){const p=i.viewCheckHooks;null!==p&&zh(t,p)}else{const p=i.viewHooks;null!==p&&jg(t,p,2),Od(t,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),t[2]&=-41,512&t[2]&&(t[2]&=-513,Vg(t[3],-1))}finally{za()}}}function N6(i,t,e,n){const r=t[10],o=vo(t);try{!o&&r.begin&&r.begin(),o&&cI(i,t,n),wx(i,t,e,n)}finally{!o&&r.end&&r.end()}}function ZR(i,t,e,n,r){const s=uc(),o=2&n;try{bf(-1),o&&t.length>22&&GA(i,t,22,!1),e(n,r)}finally{bf(s)}}function QR(i,t,e){if(bv(t)){const r=t.directiveEnd;for(let s=t.directiveStart;s<r;s++){const o=i.data[s];o.contentQueries&&o.contentQueries(1,e[s],s)}}}function BT(i,t,e){!Ny()||(function j6(i,t,e,n){const r=e.directiveStart,s=e.directiveEnd;i.firstCreatePass||js(e,t),Br(n,t);const o=e.initialInputs;for(let l=r;l<s;l++){const u=i.data[l],p=Pd(u);p&&K6(t,e,u);const v=Jc(t,i,l,e);Br(v,t),null!==o&&Z6(0,l-r,v,u,0,o),p&&(Mc(e.index,t)[8]=v)}}(i,t,e,cd(e,t)),128==(128&e.flags)&&function $6(i,t,e){const n=e.directiveStart,r=e.directiveEnd,s=e.index,o=function _f(){return es.lFrame.currentDirectiveIndex}();try{bf(s);for(let l=n;l<r;l++){const u=i.data[l],p=t[l];Ou(l),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&sk(u,p)}}finally{bf(-1),Ou(o)}}(i,t,e))}function zT(i,t,e=cd){const n=t.localNames;if(null!==n){let r=t.index+1;for(let s=0;s<n.length;s+=2){const o=n[s+1],l=-1===o?e(t,i):i[o];i[r++]=l}}}function JR(i){const t=i.tView;return null===t||t.incompleteFirstPass?i.tView=VT(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):t}function VT(i,t,e,n,r,s,o,l,u,p){const v=22+n,x=v+r,I=function B6(i,t){const e=[];for(let n=0;n<t;n++)e.push(n<i?null:qs);return e}(v,x),T="function"==typeof p?p():p;return I[1]={type:i,blueprint:I,template:e,queries:null,viewQuery:l,declTNode:t,data:I.slice().fill(null,v),bindingStartIndex:v,expandoStartIndex:x,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:T,incompleteFirstPass:!1}}function ek(i,t,e,n){const r=hk(t);null===e?r.push(n):(r.push(e),i.firstCreatePass&&fk(i).push(n,r.length-1))}function tk(i,t,e){for(let n in i)if(i.hasOwnProperty(n)){const r=i[n];(e=null===e?{}:e).hasOwnProperty(n)?e[n].push(t,r):e[n]=[t,r]}return e}function nk(i,t){const n=t.directiveEnd,r=i.data,s=t.attrs,o=[];let l=null,u=null;for(let p=t.directiveStart;p<n;p++){const v=r[p],x=v.inputs,I=null===s||NA(t)?null:Q6(x,s);o.push(I),l=tk(x,p,l),u=tk(v.outputs,p,u)}null!==l&&(l.hasOwnProperty("class")&&(t.flags|=16),l.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=o,t.inputs=l,t.outputs=u}function Sp(i,t,e,n,r,s,o,l){const u=cd(t,e);let v,p=t.inputs;!l&&null!=p&&(v=p[n])?(qT(i,e,v,n,r),Rg(t)&&ik(e,t.index)):3&t.type&&(n=function U6(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(n),r=null!=o?o(r,t.value||"",n):r,s.setProperty(u,n,r))}function ik(i,t){const e=Mc(t,i);16&e[2]||(e[2]|=32)}function UT(i,t,e,n){let r=!1;if(Ny()){const s=function q6(i,t,e){const n=i.directiveRegistry;let r=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];VA(e,o.selectors,!1)&&(r||(r=[]),lp(js(e,t),i,o.type),Pd(o)?(ok(i,e),r.unshift(o)):r.push(o))}return r}(i,t,e),o=null===n?null:{"":-1};if(null!==s){r=!0,ak(e,i.data.length,s.length);for(let v=0;v<s.length;v++){const x=s[v];x.providersResolver&&x.providersResolver(x)}let l=!1,u=!1,p=Eb(i,t,s.length,null);for(let v=0;v<s.length;v++){const x=s[v];e.mergedAttrs=Fd(e.mergedAttrs,x.hostAttrs),lk(i,e,t,p,x),Y6(p,x,o),null!==x.contentQueries&&(e.flags|=8),(null!==x.hostBindings||null!==x.hostAttrs||0!==x.hostVars)&&(e.flags|=128);const I=x.type.prototype;!l&&(I.ngOnChanges||I.ngOnInit||I.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(e.index),l=!0),!u&&(I.ngOnChanges||I.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(e.index),u=!0),p++}nk(i,e)}o&&function X6(i,t,e){if(t){const n=i.localNames=[];for(let r=0;r<t.length;r+=2){const s=e[t[r+1]];if(null==s)throw new gi(-301,!1);n.push(t[r],s)}}}(e,n,o)}return e.mergedAttrs=Fd(e.mergedAttrs,e.attrs),r}function rk(i,t,e,n,r,s){const o=s.hostBindings;if(o){let l=i.hostBindingOpCodes;null===l&&(l=i.hostBindingOpCodes=[]);const u=~t.index;(function W6(i){let t=i.length;for(;t>0;){const e=i[--t];if("number"==typeof e&&e<0)return e}return 0})(l)!=u&&l.push(u),l.push(n,r,o)}}function sk(i,t){null!==i.hostBindings&&i.hostBindings(1,t)}function ok(i,t){t.flags|=2,(i.components||(i.components=[])).push(t.index)}function Y6(i,t,e){if(e){if(t.exportAs)for(let n=0;n<t.exportAs.length;n++)e[t.exportAs[n]]=i;Pd(t)&&(e[""]=i)}}function ak(i,t,e){i.flags|=1,i.directiveStart=t,i.directiveEnd=t+e,i.providerIndexes=t}function lk(i,t,e,n,r){i.data[n]=r;const s=r.factory||(r.factory=tp(r.type)),o=new qp(s,Pd(r),Zt);i.blueprint[n]=o,e[n]=o,rk(i,t,0,n,Eb(i,e,r.hostVars,qs),r)}function K6(i,t,e){const n=cd(t,i),r=JR(e),s=i[10],o=uI(i,lI(i,r,null,e.onPush?32:16,n,t,s,s.createRenderer(n,e),null,null,null));i[t.index]=o}function Xm(i,t,e,n,r,s){const o=cd(i,t);!function HT(i,t,e,n,r,s,o){if(null==s)i.removeAttribute(t,r,e);else{const l=null==o?Ls(s):o(s,n||"",r);i.setAttribute(t,r,l,e)}}(t[11],o,s,i.value,e,n,r)}function Z6(i,t,e,n,r,s){const o=s[t];if(null!==o){const l=n.setInput;for(let u=0;u<o.length;){const p=o[u++],v=o[u++],x=o[u++];null!==l?n.setInput(e,x,p,v):e[v]=x}}}function Q6(i,t){let e=null,n=0;for(;n<t.length;){const r=t[n];if(0!==r)if(5!==r){if("number"==typeof r)break;i.hasOwnProperty(r)&&(null===e&&(e=[]),e.push(r,i[r],t[n+1])),n+=2}else n+=2;else n+=4}return e}function ck(i,t,e,n){return new Array(i,!0,!1,t,null,0,n,e,null,null)}function tW(i,t){const e=Mc(t,i);if(Ro(e)){const n=e[1];48&e[2]?wx(n,e,n.template,e[8]):e[5]>0&&GT(e)}}function GT(i){for(let n=Sr(i);null!==n;n=Ha(n))for(let r=10;r<n.length;r++){const s=n[r];if(Ro(s))if(512&s[2]){const o=s[1];wx(o,s,o.template,s[8])}else s[5]>0&&GT(s)}const e=i[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Mc(e[n],i);Ro(r)&&r[5]>0&&GT(r)}}function nW(i,t){const e=Mc(t,i),n=e[1];(function iW(i,t){for(let e=t.length;e<i.blueprint.length;e++)t.push(i.blueprint[e])})(n,e),cI(n,e,e[8])}function uI(i,t){return i[13]?i[14][4]=t:i[13]=t,i[14]=t,t}function WT(i){for(;i;){i[2]|=32;const t=Ho(i);if(Sm(i)&&!t)return i;i=t}return null}function dk(i){!function uk(i){for(let t=0;t<i.components.length;t++){const e=i.components[t],n=hr(e);if(null!==n){const r=n[1];N6(r,n,r.template,e)}}}(i[8])}function $T(i,t,e){Ug(0),t(i,e)}const sW=(()=>Promise.resolve(null))();function hk(i){return i[7]||(i[7]=[])}function fk(i){return i.cleanup||(i.cleanup=[])}function gk(i,t){const e=i[9],n=e?e.get(et,null):null;n&&n.handleError(t)}function qT(i,t,e,n,r){for(let s=0;s<e.length;){const o=e[s++],l=e[s++],u=t[o],p=i.data[o];null!==p.setInput?p.setInput(u,r,n,l):u[l]=r}}function Gv(i,t,e){const n=zg(t,i);!function Of(i,t,e){i.setValue(t,e)}(i[11],n,e)}function dI(i,t,e){let n=e?i.styles:null,r=e?i.classes:null,s=0;if(null!==t)for(let o=0;o<t.length;o++){const l=t[o];"number"==typeof l?s=l:1==s?r=qa(r,l):2==s&&(n=qa(n,l+": "+t[++o]+";"))}e?i.styles=n:i.stylesWithoutHost=n,e?i.classes=r:i.classesWithoutHost=r}function hI(i,t,e,n,r=!1){for(;null!==e;){const s=t[e.index];if(null!==s&&n.push(ra(s)),Ld(s))for(let l=10;l<s.length;l++){const u=s[l],p=u[1].firstChild;null!==p&&hI(u[1],u,p,n)}const o=e.type;if(8&o)hI(i,t,e.child,n);else if(32&o){const l=Zi(e,t);let u;for(;u=l();)n.push(u)}else if(16&o){const l=DA(t,e);if(Array.isArray(l))n.push(...l);else{const u=Ho(t[16]);hI(u[1],u,l,n,!0)}}e=r?e.projectionNext:e.next}return n}class Ax{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return hI(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(Ld(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Z_(t,n),Vu(e,n))}this._attachedToViewContainer=!1}ta(this._lView[1],this._lView)}onDestroy(t){ek(this._lView[1],this._lView,null,t)}markForCheck(){WT(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function jT(i,t,e){const n=t[10];n.begin&&n.begin();try{wx(i,t,i.template,e)}catch(r){throw gk(t,r),r}finally{n.end&&n.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new gi(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Vc(i,t){Cu(i,t,t[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new gi(902,!1);this._appRef=t}}class oW extends Ax{constructor(t){super(t),this._view=t}detectChanges(){dk(this._view)}checkNoChanges(){}get context(){return null}}class XT extends fi{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=qo(t);return new Ix(e,this.ngModule)}}function mk(i){const t=[];for(let e in i)i.hasOwnProperty(e)&&t.push({propName:i[e],templateName:e});return t}class lW{constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,n){const r=this.injector.get(t,E,n);return r!==E||e===E?r:this.parentInjector.get(t,e,n)}}class Ix extends $t{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=function mT(i){return i.map(gT).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return mk(this.componentDef.inputs)}get outputs(){return mk(this.componentDef.outputs)}create(t,e,n,r){let s=(r=r||this.ngModule)instanceof Ke?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new lW(t,s):t,l=o.get(c,null);if(null===l)throw new gi(407,!1);const u=o.get(_,null),p=l.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",x=n?function z6(i,t,e){return i.selectRootElement(t,e===Ta.ShadowDom)}(p,n,this.componentDef.encapsulation):nc(l.createRenderer(null,this.componentDef),v,function aW(i){const t=i.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(v)),I=this.componentDef.onPush?288:272,T=function fW(i,t){return{components:[],scheduler:i||St,clean:sW,playerHandler:t||null,flags:0}}(),F=VT(0,null,null,1,0,null,null,null,null,null),j=lI(null,F,T,I,null,null,l,p,u,o,null);let X,ce;Hg(j);try{const we=function dW(i,t,e,n,r,s){const o=e[1];e[22]=i;const u=Sb(o,22,2,"#host",null),p=u.mergedAttrs=t.hostAttrs;null!==p&&(dI(u,p,!0),null!==i&&(Xp(r,i,p),null!==u.classes&&cx(r,i,u.classes),null!==u.styles&&kA(r,i,u.styles)));const v=n.createRenderer(i,t),x=lI(e,JR(t),null,t.onPush?32:16,e[22],u,n,v,s||null,null,null);return o.firstCreatePass&&(lp(js(u,e),o,t.type),ok(o,u),ak(u,e.length,1)),uI(e,x),e[22]=x}(x,this.componentDef,j,l,p);if(x)if(n)Xp(p,x,["ng-version",w.full]);else{const{attrs:ye,classes:Ae}=function HA(i){const t=[],e=[];let n=1,r=2;for(;n<i.length;){let s=i[n];if("string"==typeof s)2===r?""!==s&&t.push(s,i[++n]):8===r&&e.push(s);else{if(!Cp(r))break;r=s}n++}return{attrs:t,classes:e}}(this.componentDef.selectors[0]);ye&&Xp(p,x,ye),Ae&&Ae.length>0&&cx(p,x,Ae.join(" "))}if(ce=ms(F,22),void 0!==e){const ye=ce.projection=[];for(let Ae=0;Ae<this.ngContentSelectors.length;Ae++){const We=e[Ae];ye.push(null!=We?Array.from(We):null)}}X=function hW(i,t,e,n,r){const s=e[1],o=function G6(i,t,e){const n=dt();i.firstCreatePass&&(e.providersResolver&&e.providersResolver(e),lk(i,n,t,Eb(i,t,1,null),e),nk(i,n));const r=Jc(t,i,n.directiveStart,n);Br(r,t);const s=cd(n,t);return s&&Br(s,t),r}(s,e,t);if(n.components.push(o),i[8]=o,null!==r)for(const u of r)u(o,t);if(t.contentQueries){const u=dt();t.contentQueries(1,o,u.directiveStart)}const l=dt();return!s.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(bf(l.index),rk(e[1],l,0,l.directiveStart,l.directiveEnd,t),sk(t,o)),o}(we,this.componentDef,j,T,[pW]),cI(F,j,null)}finally{za()}return new uW(this.componentType,X,zi(ce,j),j,ce)}}class uW extends class Wt{}{constructor(t,e,n,r,s){super(),this.location=n,this._rootLView=r,this._tNode=s,this.instance=e,this.hostView=this.changeDetectorRef=new oW(r),this.componentType=t}setInput(t,e){const n=this._tNode.inputs;let r;if(null!==n&&(r=n[t])){const s=this._rootLView;qT(s[1],s,r,t,e),ik(s,this._tNode.index)}}get injector(){return new hd(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function pW(){const i=dt();xf(mi()[1],i)}function Za(i){let t=function vk(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),e=!0;const n=[i];for(;t;){let r;if(Pd(i))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new gi(903,!1);r=t.\u0275dir}if(r){if(e){n.push(r);const o=i;o.inputs=YT(i.inputs),o.declaredInputs=YT(i.declaredInputs),o.outputs=YT(i.outputs);const l=r.hostBindings;l&&yW(i,l);const u=r.viewQuery,p=r.contentQueries;if(u&&mW(i,u),p&&vW(i,p),Sa(i.inputs,r.inputs),Sa(i.declaredInputs,r.declaredInputs),Sa(i.outputs,r.outputs),Pd(r)&&r.data.animation){const v=i.data;v.animation=(v.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const l=s[o];l&&l.ngInherit&&l(i),l===Za&&(e=!1)}}t=Object.getPrototypeOf(t)}!function gW(i){let t=0,e=null;for(let n=i.length-1;n>=0;n--){const r=i[n];r.hostVars=t+=r.hostVars,r.hostAttrs=Fd(r.hostAttrs,e=Fd(e,r.hostAttrs))}}(n)}function YT(i){return i===kh?{}:i===mo?[]:i}function mW(i,t){const e=i.viewQuery;i.viewQuery=e?(n,r)=>{t(n,r),e(n,r)}:t}function vW(i,t){const e=i.contentQueries;i.contentQueries=e?(n,r,s)=>{t(n,r,s),e(n,r,s)}:t}function yW(i,t){const e=i.hostBindings;i.hostBindings=e?(n,r)=>{t(n,r),e(n,r)}:t}let fI=null;function n0(){if(!fI){const i=io.Symbol;if(i&&i.iterator)fI=i.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(fI=n)}}}return fI}function Sx(i){return!!KT(i)&&(Array.isArray(i)||!(i instanceof Map)&&n0()in i)}function KT(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Ym(i,t,e){return i[t]=e}function Ex(i,t){return i[t]}function xh(i,t,e){return!Object.is(i[t],e)&&(i[t]=e,!0)}function r0(i,t,e,n){const r=xh(i,t,e);return xh(i,t+1,n)||r}function pI(i,t,e,n,r){const s=r0(i,t,e,n);return xh(i,t+2,r)||s}function ug(i,t,e,n,r,s){const o=r0(i,t,e,n);return r0(i,t+2,r,s)||o}function mr(i,t,e,n){const r=mi();return xh(r,kd(),t)&&(Es(),Xm(Va(),r,i,t,e,n)),mr}function Mb(i,t,e,n){return xh(i,kd(),e)?t+Ls(e)+n:qs}function Db(i,t,e,n,r,s){const l=r0(i,function Ba(){return es.lFrame.bindingIndex}(),e,r);return gl(2),l?t+Ls(e)+n+Ls(r)+s:qs}function Ze(i,t,e,n,r,s,o,l){const u=mi(),p=Es(),v=i+22,x=p.firstCreatePass?function EW(i,t,e,n,r,s,o,l,u){const p=t.consts,v=Sb(t,i,4,o||null,$s(p,l));UT(t,e,v,$s(p,u)),xf(t,v);const x=v.tViews=VT(2,v,n,r,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,p);return null!==t.queries&&(t.queries.template(t,v),x.queries=t.queries.embeddedTView(v)),v}(v,p,u,t,e,n,r,s,o):p.data[v];sa(x,!1);const I=u[11].createComment("");Cb(p,u,I,x),Br(I,u),uI(u,u[v]=ck(I,u,I,x)),kg(x)&&BT(p,u,x),null!=o&&zT(u,x,l)}function co(i){return pl(function br(){return es.lFrame.contextLView}(),22+i)}function ve(i,t,e){const n=mi();return xh(n,kd(),t)&&Sp(Es(),Va(),n,i,t,n[11],e,!1),ve}function ZT(i,t,e,n,r){const o=r?"class":"style";qT(i,e,t.inputs[o],o,n)}function lt(i,t,e,n){const r=mi(),s=Es(),o=22+i,l=r[11],u=r[o]=nc(l,t,function Cf(){return es.lFrame.currentNamespace}()),p=s.firstCreatePass?function MW(i,t,e,n,r,s,o){const l=t.consts,p=Sb(t,i,2,r,$s(l,s));return UT(t,e,p,$s(l,o)),null!==p.attrs&&dI(p,p.attrs,!1),null!==p.mergedAttrs&&dI(p,p.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,p),p}(o,s,r,0,t,e,n):s.data[o];sa(p,!0);const v=p.mergedAttrs;null!==v&&Xp(l,u,v);const x=p.classes;null!==x&&cx(l,u,x);const I=p.styles;return null!==I&&kA(l,u,I),64!=(64&p.flags)&&Cb(s,r,u,p),0===function oh(){return es.lFrame.elementDepthCount}()&&Br(u,r),function jp(){es.lFrame.elementDepthCount++}(),kg(p)&&(BT(s,r,p),QR(s,p,r)),null!==n&&zT(r,p),lt}function ct(){let i=dt();Ps()?$p():(i=i.parent,sa(i,!1));const t=i;!function U_(){es.lFrame.elementDepthCount--}();const e=Es();return e.firstCreatePass&&(xf(e,i),bv(i)&&e.queries.elementEnd(i)),null!=t.classesWithoutHost&&function Lv(i){return 0!=(16&i.flags)}(t)&&ZT(e,t,mi(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function H_(i){return 0!=(32&i.flags)}(t)&&ZT(e,t,mi(),t.stylesWithoutHost,!1),ct}function ii(i,t,e,n){return lt(i,t,e,n),ct(),ii}function qr(i,t,e){const n=mi(),r=Es(),s=i+22,o=r.firstCreatePass?function DW(i,t,e,n,r){const s=t.consts,o=$s(s,n),l=Sb(t,i,8,"ng-container",o);return null!==o&&dI(l,o,!0),UT(t,e,l,$s(s,r)),null!==t.queries&&t.queries.elementStart(t,l),l}(s,r,n,t,e):r.data[s];sa(o,!0);const l=n[s]=n[11].createComment("");return Cb(r,n,l,o),Br(l,n),kg(o)&&(BT(r,n,o),QR(r,o,n)),null!=e&&zT(n,o),qr}function Xr(){let i=dt();const t=Es();return Ps()?$p():(i=i.parent,sa(i,!1)),t.firstCreatePass&&(xf(t,i),bv(i)&&t.queries.elementEnd(i)),Xr}function Ki(i,t,e){return qr(i,t,e),Xr(),Ki}function Pi(){return mi()}function Tx(i){return!!i&&"function"==typeof i.then}const QT=function Ek(i){return!!i&&"function"==typeof i.subscribe};function fn(i,t,e,n){const r=mi(),s=Es(),o=dt();return function Mk(i,t,e,n,r,s,o,l){const u=kg(n),v=i.firstCreatePass&&fk(i),x=t[8],I=hk(t);let T=!0;if(3&n.type||l){const X=cd(n,t),ce=l?l(X):X,we=I.length,ye=l?We=>l(ra(We[n.index])):n.index;let Ae=null;if(!l&&u&&(Ae=function LW(i,t,e,n){const r=i.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===e&&r[s+1]===n){const l=t[7],u=r[s+2];return l.length>u?l[u]:null}"string"==typeof o&&(s+=2)}return null}(i,t,r,n.index)),null!==Ae)(Ae.__ngLastListenerFn__||Ae).__ngNextListenerFn__=s,Ae.__ngLastListenerFn__=s,T=!1;else{s=Lk(n,t,x,s,!1);const We=e.listen(ce,r,s);I.push(s,We),v&&v.push(r,ye,we,we+1)}}else s=Lk(n,t,x,s,!1);const F=n.outputs;let j;if(T&&null!==F&&(j=F[r])){const X=j.length;if(X)for(let ce=0;ce<X;ce+=2){const ot=t[j[ce]][j[ce+1]].subscribe(s),Mt=I.length;I.push(s,ot),v&&v.push(r,n.index,Mt,-(Mt+1))}}}(s,r,r[11],o,i,t,0,n),fn}function Dk(i,t,e,n){try{return!1!==e(n)}catch(r){return gk(i,r),!1}}function Lk(i,t,e,n,r){return function s(o){if(o===Function)return n;WT(2&i.flags?Mc(i.index,t):t);let u=Dk(t,0,n,o),p=s.__ngNextListenerFn__;for(;p;)u=Dk(t,0,p,o)&&u,p=p.__ngNextListenerFn__;return r&&!1===u&&(o.preventDefault(),o.returnValue=!1),u}}function _e(i=1){return function wl(i){return(es.lFrame.contextLView=function Bh(i,t){for(;i>0;)t=t[15],i--;return t}(i,es.lFrame.contextLView))[8]}(i)}function PW(i,t){let e=null;const n=function hT(i){const t=i.attrs;if(null!=t){const e=t.indexOf(5);if(0==(1&e))return t[e+1]}return null}(i);for(let r=0;r<t.length;r++){const s=t[r];if("*"!==s){if(null===n?VA(i,s,!0):pT(n,s))return r}else e=r}return e}function dg(i){const t=mi()[16][6];if(!t.projection){const n=t.projection=Il(i?i.length:1,null),r=n.slice();let s=t.child;for(;null!==s;){const o=i?PW(s,i):0;null!==o&&(r[o]?r[o].projectionNext=s:n[o]=s,r[o]=s),s=s.next}}}function $u(i,t=0,e){const n=mi(),r=Es(),s=Sb(r,22+i,16,null,e||null);null===s.projection&&(s.projection=t),$p(),64!=(64&s.flags)&&function aT(i,t,e){PA(t[11],0,t,e,Yy(i,e,t),bh(e.parent||t[6],e,t))}(r,n,s)}function gI(i,t,e,n,r){const s=mi(),o=Mb(s,t,e,n);return o!==qs&&Sp(Es(),Va(),s,i,o,s[11],r,!1),gI}function Uk(i,t,e,n,r){const s=i[e+1],o=null===t;let l=n?xp(s):wp(s),u=!1;for(;0!==l&&(!1===u||o);){const v=i[l+1];OW(i[l],t)&&(u=!0,i[l+1]=n?_x(v):t0(v)),l=n?xp(v):wp(v)}u&&(i[e+1]=n?t0(s):_x(s))}function OW(i,t){return null===i||null==t||(Array.isArray(i)?i[1]:i)===t||!(!Array.isArray(i)||"string"!=typeof t)&&So(i,t)>=0}const qu={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Hk(i){return i.substring(qu.key,qu.keyEnd)}function FW(i){return i.substring(qu.value,qu.valueEnd)}function Gk(i,t){const e=qu.textEnd;return e===t?-1:(t=qu.keyEnd=function zW(i,t,e){for(;t<e&&i.charCodeAt(t)>32;)t++;return t}(i,qu.key=t,e),Nb(i,t,e))}function Wk(i,t){const e=qu.textEnd;let n=qu.key=Nb(i,t,e);return e===n?-1:(n=qu.keyEnd=function VW(i,t,e){let n;for(;t<e&&(45===(n=i.charCodeAt(t))||95===n||(-33&n)>=65&&(-33&n)<=90||n>=48&&n<=57);)t++;return t}(i,n,e),n=$k(i,n,e),n=qu.value=Nb(i,n,e),n=qu.valueEnd=function UW(i,t,e){let n=-1,r=-1,s=-1,o=t,l=o;for(;o<e;){const u=i.charCodeAt(o++);if(59===u)return l;34===u||39===u?l=o=qk(i,u,o,e):t===o-4&&85===s&&82===r&&76===n&&40===u?l=o=qk(i,41,o,e):u>32&&(l=o),s=r,r=n,n=-33&u}return l}(i,n,e),$k(i,n,e))}function jk(i){qu.key=0,qu.keyEnd=0,qu.value=0,qu.valueEnd=0,qu.textEnd=i.length}function Nb(i,t,e){for(;t<e&&i.charCodeAt(t)<=32;)t++;return t}function $k(i,t,e,n){return(t=Nb(i,t,e))<e&&t++,t}function qk(i,t,e,n){let r=-1,s=e;for(;s<n;){const o=i.charCodeAt(s++);if(o==t&&92!==r)return s;r=92==o&&92===r?0:o}throw new Error}function tf(i,t,e){return sm(i,t,e,!1),tf}function Ep(i,t){return sm(i,t,null,!0),Ep}function uo(i){om(Kk,HW,i,!1)}function HW(i,t){for(let e=function BW(i){return jk(i),Wk(i,Nb(i,0,qu.textEnd))}(t);e>=0;e=Wk(t,e))Kk(i,Hk(t),FW(t))}function Ur(i){om(Sl,Km,i,!0)}function Km(i,t){for(let e=function NW(i){return jk(i),Gk(i,Nb(i,0,qu.textEnd))}(t);e>=0;e=Gk(t,e))Sl(i,Hk(t),!0)}function sm(i,t,e,n){const r=mi(),s=Es(),o=gl(2);s.firstUpdatePass&&Yk(s,i,o,n),t!==qs&&xh(r,o,t)&&Zk(s,s.data[uc()],r,r[11],i,r[o+1]=function YW(i,t){return null==i||("string"==typeof t?i+=t:"object"==typeof i&&(i=us(yl(i)))),i}(t,e),n,o)}function om(i,t,e,n){const r=Es(),s=gl(2);r.firstUpdatePass&&Yk(r,null,s,n);const o=mi();if(e!==qs&&xh(o,s,e)){const l=r.data[uc()];if(Jk(l,n)&&!Xk(r,s)){let u=n?l.classesWithoutHost:l.stylesWithoutHost;null!==u&&(e=qa(u,e||"")),ZT(r,l,o,e,n)}else!function XW(i,t,e,n,r,s,o,l){r===qs&&(r=mo);let u=0,p=0,v=0<r.length?r[0]:null,x=0<s.length?s[0]:null;for(;null!==v||null!==x;){const I=u<r.length?r[u+1]:void 0,T=p<s.length?s[p+1]:void 0;let j,F=null;v===x?(u+=2,p+=2,I!==T&&(F=x,j=T)):null===x||null!==v&&v<x?(u+=2,F=v):(p+=2,F=x,j=T),null!==F&&Zk(i,t,e,n,F,j,o,l),v=u<r.length?r[u]:null,x=p<s.length?s[p]:null}}(r,l,o,o[11],o[s+1],o[s+1]=function qW(i,t,e){if(null==e||""===e)return mo;const n=[],r=yl(e);if(Array.isArray(r))for(let s=0;s<r.length;s++)i(n,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&i(n,s,r[s]);else"string"==typeof r&&t(n,r);return n}(i,t,e),n,s)}}function Xk(i,t){return t>=i.expandoStartIndex}function Yk(i,t,e,n){const r=i.data;if(null===r[e+1]){const s=r[uc()],o=Xk(i,e);Jk(s,n)&&null===t&&!o&&(t=!1),t=function GW(i,t,e,n){const r=function is(i){const t=es.lFrame.currentDirectiveIndex;return-1===t?null:i[t]}(i);let s=n?t.residualClasses:t.residualStyles;if(null===r)0===(n?t.classBindings:t.styleBindings)&&(e=Mx(e=JT(null,i,t,e,n),t.attrs,n),s=null);else{const o=t.directiveStylingLast;if(-1===o||i[o]!==r)if(e=JT(r,i,t,e,n),null===s){let u=function WW(i,t,e){const n=e?t.classBindings:t.styleBindings;if(0!==wp(n))return i[xp(n)]}(i,t,n);void 0!==u&&Array.isArray(u)&&(u=JT(null,i,t,u[1],n),u=Mx(u,t.attrs,n),function jW(i,t,e,n){i[xp(e?t.classBindings:t.styleBindings)]=n}(i,t,n,u))}else s=function $W(i,t,e){let n;const r=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<r;s++)n=Mx(n,i[s].hostAttrs,e);return Mx(n,t.attrs,e)}(i,t,n)}return void 0!==s&&(n?t.residualClasses=s:t.residualStyles=s),e}(r,s,t,n),function RW(i,t,e,n,r,s){let o=s?t.classBindings:t.styleBindings,l=xp(o),u=wp(o);i[n]=e;let v,p=!1;if(Array.isArray(e)){const x=e;v=x[1],(null===v||So(x,v)>0)&&(p=!0)}else v=e;if(r)if(0!==u){const I=xp(i[l+1]);i[n+1]=e0(I,l),0!==I&&(i[I+1]=yx(i[I+1],n)),i[l+1]=function LT(i,t){return 131071&i|t<<17}(i[l+1],n)}else i[n+1]=e0(l,0),0!==l&&(i[l+1]=yx(i[l+1],n)),l=n;else i[n+1]=e0(u,0),0===l?l=n:i[u+1]=yx(i[u+1],n),u=n;p&&(i[n+1]=t0(i[n+1])),Uk(i,v,n,!0),Uk(i,v,n,!1),function kW(i,t,e,n,r){const s=r?i.residualClasses:i.residualStyles;null!=s&&"string"==typeof t&&So(s,t)>=0&&(e[n+1]=_x(e[n+1]))}(t,v,i,n,s),o=e0(l,u),s?t.classBindings=o:t.styleBindings=o}(r,s,t,e,o,n)}}function JT(i,t,e,n,r){let s=null;const o=e.directiveEnd;let l=e.directiveStylingLast;for(-1===l?l=e.directiveStart:l++;l<o&&(s=t[l],n=Mx(n,s.hostAttrs,r),s!==i);)l++;return null!==i&&(e.directiveStylingLast=l),n}function Mx(i,t,e){const n=e?1:2;let r=-1;if(null!==t)for(let s=0;s<t.length;s++){const o=t[s];"number"==typeof o?r=o:r===n&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Sl(i,o,!!e||t[++s]))}return void 0===i?null:i}function Kk(i,t,e){Sl(i,t,yl(e))}function Zk(i,t,e,n,r,s,o,l){if(!(3&t.type))return;const u=i.data,p=u[l+1];mI(function iI(i){return 1==(1&i)}(p)?Qk(u,t,e,r,wp(p),o):void 0)||(mI(s)||function nI(i){return 2==(2&i)}(p)&&(s=Qk(u,null,e,r,l,o)),function RA(i,t,e,n,r){if(t)r?i.addClass(e,n):i.removeClass(e,n);else{let s=-1===n.indexOf("-")?void 0:Oi.DashCase;null==r?i.removeStyle(e,n,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=Oi.Important),i.setStyle(e,n,r,s))}}(n,o,zg(uc(),e),r,s))}function Qk(i,t,e,n,r,s){const o=null===t;let l;for(;r>0;){const u=i[r],p=Array.isArray(u),v=p?u[1]:u,x=null===v;let I=e[r+1];I===qs&&(I=x?mo:void 0);let T=x?hc(I,n):v===n?I:void 0;if(p&&!mI(T)&&(T=hc(u,n)),mI(T)&&(l=T,o))return l;const F=i[r+1];r=o?xp(F):wp(F)}if(null!==t){let u=s?t.residualClasses:t.residualStyles;null!=u&&(l=hc(u,n))}return l}function mI(i){return void 0!==i}function Jk(i,t){return 0!=(i.flags&(t?16:32))}function qi(i,t=""){const e=mi(),n=Es(),r=i+22,s=n.firstCreatePass?Sb(n,r,1,t,null):n.data[r],o=e[r]=function _p(i,t){return i.createText(t)}(e[11],t);Cb(n,e,o,s),sa(s,!1)}function as(i){return yd("",i,""),as}function yd(i,t,e){const n=mi(),r=Mb(n,i,t,e);return r!==qs&&Gv(n,uc(),r),yd}function vI(i,t,e,n,r){const s=mi(),o=Db(s,i,t,e,n,r);return o!==qs&&Gv(s,uc(),o),vI}const s0=void 0;var m9=["en",[["a","p"],["AM","PM"],s0],[["AM","PM"],s0,s0],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],s0,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],s0,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",s0,"{1} 'at' {0}",s0],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function g9(i){const e=Math.floor(Math.abs(i)),n=i.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let Bb={};function nf(i){const t=function v9(i){return i.toLowerCase().replace(/_/g,"-")}(i);let e=_O(t);if(e)return e;const n=t.split("-")[0];if(e=_O(n),e)return e;if("en"===n)return m9;throw new gi(701,!1)}function _O(i){return i in Bb||(Bb[i]=io.ng&&io.ng.common&&io.ng.common.locales&&io.ng.common.locales[i]),Bb[i]}var Nr=(()=>((Nr=Nr||{})[Nr.LocaleId=0]="LocaleId",Nr[Nr.DayPeriodsFormat=1]="DayPeriodsFormat",Nr[Nr.DayPeriodsStandalone=2]="DayPeriodsStandalone",Nr[Nr.DaysFormat=3]="DaysFormat",Nr[Nr.DaysStandalone=4]="DaysStandalone",Nr[Nr.MonthsFormat=5]="MonthsFormat",Nr[Nr.MonthsStandalone=6]="MonthsStandalone",Nr[Nr.Eras=7]="Eras",Nr[Nr.FirstDayOfWeek=8]="FirstDayOfWeek",Nr[Nr.WeekendRange=9]="WeekendRange",Nr[Nr.DateFormat=10]="DateFormat",Nr[Nr.TimeFormat=11]="TimeFormat",Nr[Nr.DateTimeFormat=12]="DateTimeFormat",Nr[Nr.NumberSymbols=13]="NumberSymbols",Nr[Nr.NumberFormats=14]="NumberFormats",Nr[Nr.CurrencyCode=15]="CurrencyCode",Nr[Nr.CurrencySymbol=16]="CurrencySymbol",Nr[Nr.CurrencyName=17]="CurrencyName",Nr[Nr.Currencies=18]="Currencies",Nr[Nr.Directionality=19]="Directionality",Nr[Nr.PluralCase=20]="PluralCase",Nr[Nr.ExtraData=21]="ExtraData",Nr))();const zb="en-US";let bO=zb;function nM(i,t,e,n,r){if(i=ts(i),Array.isArray(i))for(let s=0;s<i.length;s++)nM(i[s],t,e,n,r);else{const s=Es(),o=mi();let l=fe(i)?i:ts(i.provide),u=cn(i);const p=dt(),v=1048575&p.providerIndexes,x=p.directiveStart,I=p.providerIndexes>>20;if(fe(i)||!i.multi){const T=new qp(u,r,Zt),F=rM(l,t,r?v:v+I,x);-1===F?(lp(js(p,o),s,l),iM(s,i,t.length),t.push(l),p.directiveStart++,p.directiveEnd++,r&&(p.providerIndexes+=1048576),e.push(T),o.push(T)):(e[F]=T,o[F]=T)}else{const T=rM(l,t,v+I,x),F=rM(l,t,v,v+I),j=T>=0&&e[T],X=F>=0&&e[F];if(r&&!X||!r&&!j){lp(js(p,o),s,l);const ce=function pj(i,t,e,n,r){const s=new qp(i,e,Zt);return s.multi=[],s.index=t,s.componentProviders=0,jO(s,r,n&&!e),s}(r?fj:hj,e.length,r,n,u);!r&&X&&(e[F].providerFactory=ce),iM(s,i,t.length,0),t.push(l),p.directiveStart++,p.directiveEnd++,r&&(p.providerIndexes+=1048576),e.push(ce),o.push(ce)}else iM(s,i,T>-1?T:F,jO(e[r?F:T],u,!r&&n));!r&&n&&X&&e[F].componentProviders++}}}function iM(i,t,e,n){const r=fe(t),s=function me(i){return!!i.useClass}(t);if(r||s){const u=(s?ts(t.useClass):t).prototype.ngOnDestroy;if(u){const p=i.destroyHooks||(i.destroyHooks=[]);if(!r&&t.multi){const v=p.indexOf(e);-1===v?p.push(e,[n,u]):p[v+1].push(n,u)}else p.push(e,u)}}}function jO(i,t,e){return e&&i.componentProviders++,i.multi.push(t)-1}function rM(i,t,e,n){for(let r=e;r<n;r++)if(t[r]===i)return r;return-1}function hj(i,t,e,n){return sM(this.multi,[])}function fj(i,t,e,n){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,l=Jc(e,e[1],this.providerFactory.index,n);s=l.slice(0,o),sM(r,s);for(let u=o;u<l.length;u++)s.push(l[u])}else s=[],sM(r,s);return s}function sM(i,t){for(let e=0;e<i.length;e++)t.push((0,i[e])());return t}function To(i,t=[]){return e=>{e.providersResolver=(n,r)=>function dj(i,t,e){const n=Es();if(n.firstCreatePass){const r=Pd(i);nM(e,n.data,n.blueprint,r,!0),nM(t,n.data,n.blueprint,r,!1)}}(n,r?r(i):i,t)}}class o0{}class $O{}class qO extends o0{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new XT(this);const n=uu(t);this._bootstrapComponents=an(n.bootstrap),this._r3Injector=XA(t,e,[{provide:o0,useValue:this},{provide:fi,useValue:this.componentFactoryResolver}],us(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class oM extends $O{constructor(t){super(),this.moduleType=t}create(t){return new qO(this.moduleType,t)}}class mj extends o0{constructor(t,e,n){super(),this.componentFactoryResolver=new XT(this),this.instance=null;const r=new pt([...t,{provide:o0,useValue:this},{provide:fi,useValue:this.componentFactoryResolver}],e||tt(),n,new Set(["environment"]));this.injector=r,r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function xI(i,t,e=null){return new mj(i,t,e).injector}function Mo(i,t,e){const n=Oo()+i,r=mi();return r[n]===qs?Ym(r,n,e?t.call(e):t()):Ex(r,n)}function Bi(i,t,e,n){return tF(mi(),Oo(),i,t,e,n)}function ys(i,t,e,n,r){return function nF(i,t,e,n,r,s,o){const l=t+e;return r0(i,l,r,s)?Ym(i,l+2,o?n.call(o,r,s):n(r,s)):kx(i,l+2)}(mi(),Oo(),i,t,e,n,r)}function wu(i,t,e,n,r,s){return function iF(i,t,e,n,r,s,o,l){const u=t+e;return pI(i,u,r,s,o)?Ym(i,u+3,l?n.call(l,r,s,o):n(r,s,o)):kx(i,u+3)}(mi(),Oo(),i,t,e,n,r,s)}function Ff(i,t,e,n,r,s,o){return function rF(i,t,e,n,r,s,o,l,u){const p=t+e;return ug(i,p,r,s,o,l)?Ym(i,p+4,u?n.call(u,r,s,o,l):n(r,s,o,l)):kx(i,p+4)}(mi(),Oo(),i,t,e,n,r,s,o)}function Ub(i,t,e,n,r,s,o,l){const u=Oo()+i,p=mi(),v=ug(p,u,e,n,r,s);return xh(p,u+4,o)||v?Ym(p,u+5,l?t.call(l,e,n,r,s,o):t(e,n,r,s,o)):Ex(p,u+5)}function Hb(i,t,e,n,r,s,o,l,u){const p=Oo()+i,v=mi(),x=ug(v,p,e,n,r,s);return r0(v,p+4,o,l)||x?Ym(v,p+6,u?t.call(u,e,n,r,s,o,l):t(e,n,r,s,o,l)):Ex(v,p+6)}function lM(i,t,e,n){return function sF(i,t,e,n,r,s){let o=t+e,l=!1;for(let u=0;u<r.length;u++)xh(i,o++,r[u])&&(l=!0);return l?Ym(i,o,n.apply(s,r)):kx(i,o)}(mi(),Oo(),i,t,e,n)}function kx(i,t){const e=i[t];return e===qs?void 0:e}function tF(i,t,e,n,r,s){const o=t+e;return xh(i,o,r)?Ym(i,o+1,s?n.call(s,r):n(r)):kx(i,o+1)}function cM(i){return t=>{setTimeout(i,void 0,t)}}const qn=class Rj extends nn{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r=t,s=e||(()=>null),o=n;if(t&&"object"==typeof t){const u=t;r=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=cM(s),r&&(r=cM(r)),o&&(o=cM(o)));const l=super.subscribe({next:r,error:s,complete:o});return t instanceof W&&t.add(l),l}};function kj(){return this._results[n0()]()}class uM{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=n0(),n=uM.prototype;n[e]||(n[e]=kj)}get changes(){return this._changes||(this._changes=new qn)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=Ua(t);(this._changesDetected=!function $h(i,t,e){if(i.length!==t.length)return!1;for(let n=0;n<i.length;n++){let r=i[n],s=t[n];if(e&&(r=e(r),s=e(s)),s!==r)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let am=(()=>{class i{}return i.__NG_ELEMENT_ID__=Nj,i})();const Oj=am,Fj=class extends Oj{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t,e){const n=this._declarationTContainer.tViews,r=lI(this._declarationLView,n,t,16,null,n.declTNode,null,null,null,null,e||null);r[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(r[19]=o.createEmbeddedView(n)),cI(n,r,t),new Ax(r)}};function Nj(){return wI(dt(),mi())}function wI(i,t){return 4&i.type?new Fj(t,i,zi(i,t)):null}let lm=(()=>{class i{}return i.__NG_ELEMENT_ID__=Bj,i})();function Bj(){return uF(dt(),mi())}const zj=lm,lF=class extends zj{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return zi(this._hostTNode,this._hostLView)}get injector(){return new hd(this._hostTNode,this._hostLView)}get parentInjector(){const t=kc(this._hostTNode,this._hostLView);if(Nd(t)){const e=fu(t,this._hostLView),n=ud(t);return new hd(e[1].data[n+8],e)}return new hd(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=cF(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,e,n){let r,s;"number"==typeof n?r=n:null!=n&&(r=n.index,s=n.injector);const o=t.createEmbeddedView(e||{},s);return this.insert(o,r),o}createComponent(t,e,n,r,s){const o=t&&!function Al(i){return"function"==typeof i}(t);let l;if(o)l=e;else{const x=e||{};l=x.index,n=x.injector,r=x.projectableNodes,s=x.environmentInjector||x.ngModuleRef}const u=o?t:new Ix(qo(t)),p=n||this.parentInjector;if(!s&&null==u.ngModule){const I=(o?p:this.parentInjector).get(Ke,null);I&&(s=I)}const v=u.create(p,r,void 0,s);return this.insert(v.hostView,l),v}insert(t,e){const n=t._lView,r=n[1];if(function Or(i){return Ld(i[3])}(n)){const v=this.indexOf(t);if(-1!==v)this.detach(v);else{const x=n[3],I=new lF(x,x[6],x[3]);I.detach(I.indexOf(t))}}const s=this._adjustIndex(e),o=this._lContainer;!function gb(i,t,e,n){const r=10+n,s=e.length;n>0&&(e[r-1][4]=t),n<s-10?(t[4]=e[r],zu(e,10+n,t)):(e.push(t),t[4]=null),t[3]=e;const o=t[17];null!==o&&e!==o&&function _h(i,t){const e=i[9];t[16]!==t[3][3][16]&&(i[2]=!0),null===e?i[9]=[t]:e.push(t)}(o,t);const l=t[19];null!==l&&l.insertView(i),t[2]|=64}(r,n,o,s);const l=lx(s,o),u=n[11],p=Uv(u,o[7]);return null!==p&&function bp(i,t,e,n,r,s){n[0]=r,n[6]=t,Cu(i,n,e,1,r,s)}(r,o[6],u,n,p,l),t.attachToViewContainerRef(),zu(dM(o),s,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=cF(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Z_(this._lContainer,e);n&&(Vu(dM(this._lContainer),e),ta(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Z_(this._lContainer,e);return n&&null!=Vu(dM(this._lContainer),e)?new Ax(n):null}_adjustIndex(t,e=0){return t??this.length+e}};function cF(i){return i[8]}function dM(i){return i[8]||(i[8]=[])}function uF(i,t){let e;const n=t[i.index];if(Ld(n))e=n;else{let r;if(8&i.type)r=ra(n);else{const s=t[11];r=s.createComment("");const o=cd(i,t);cg(s,Uv(s,o),r,function Hv(i,t){return i.nextSibling(t)}(s,o),!1)}t[i.index]=e=ck(n,t,r,i),uI(t,e)}return new lF(e,i,t)}class hM{constructor(t){this.queryList=t,this.matches=null}clone(){return new hM(this.queryList)}setDirty(){this.queryList.setDirty()}}class fM{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let s=0;s<n;s++){const o=e.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new fM(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==gF(t,e).matches&&this.queries[e].setDirty()}}class dF{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class pM{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,s=this.getByIndex(n).embeddedTView(t,r);s&&(s.indexInDeclarationView=n,null!==e?e.push(s):e=[s])}return null!==e?new pM(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class gM{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new gM(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const s=n[r];this.matchTNodeWithReadOption(t,e,Hj(e,s)),this.matchTNodeWithReadOption(t,e,Bd(e,t,s,!1,!1))}else n===am?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Bd(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Xn||r===lm||r===am&&4&e.type)this.addMatch(e.index,-2);else{const s=Bd(e,t,r,!1,!1);null!==s&&this.addMatch(e.index,s)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Hj(i,t){const e=i.localNames;if(null!==e)for(let n=0;n<e.length;n+=2)if(e[n]===t)return e[n+1];return null}function Wj(i,t,e,n){return-1===e?function Gj(i,t){return 11&i.type?zi(i,t):4&i.type?wI(i,t):null}(t,i):-2===e?function jj(i,t,e){return e===Xn?zi(t,i):e===am?wI(t,i):e===lm?uF(t,i):void 0}(i,t,n):Jc(i,i[1],e,t)}function hF(i,t,e,n){const r=t[19].queries[n];if(null===r.matches){const s=i.data,o=e.matches,l=[];for(let u=0;u<o.length;u+=2){const p=o[u];l.push(p<0?null:Wj(t,s[p],o[u+1],e.metadata.read))}r.matches=l}return r.matches}function mM(i,t,e,n){const r=i.queries.getByIndex(e),s=r.matches;if(null!==s){const o=hF(i,t,r,e);for(let l=0;l<s.length;l+=2){const u=s[l];if(u>0)n.push(o[l/2]);else{const p=s[l+1],v=t[-u];for(let x=10;x<v.length;x++){const I=v[x];I[17]===I[3]&&mM(I[1],I,p,n)}if(null!==v[9]){const x=v[9];for(let I=0;I<x.length;I++){const T=x[I];mM(T[1],T,p,n)}}}}}return n}function vr(i){const t=mi(),e=Es(),n=Lc();Ug(n+1);const r=gF(e,n);if(i.dirty&&vo(t)===(2==(2&r.metadata.flags))){if(null===r.matches)i.reset([]);else{const s=r.crossesNgTemplate?mM(e,t,n,[]):hF(e,t,r,n);i.reset(s,Hn),i.notifyOnChanges()}return!0}return!1}function vs(i,t,e){const n=Es();n.firstCreatePass&&(pF(n,new dF(i,t,e),-1),2==(2&t)&&(n.staticViewQueries=!0)),fF(n,mi(),t)}function cl(i,t,e,n){const r=Es();if(r.firstCreatePass){const s=dt();pF(r,new dF(t,e,n),s.index),function qj(i,t){const e=i.contentQueries||(i.contentQueries=[]);t!==(e.length?e[e.length-1]:-1)&&e.push(i.queries.length-1,t)}(r,i),2==(2&e)&&(r.staticContentQueries=!0)}fF(r,mi(),e)}function yr(){return function $j(i,t){return i[19].queries[t].queryList}(mi(),Lc())}function fF(i,t,e){const n=new uM(4==(4&e));ek(i,t,n,n.destroy),null===t[19]&&(t[19]=new fM),t[19].queries.push(new hM(n))}function pF(i,t,e){null===i.queries&&(i.queries=new pM),i.queries.track(new gM(t,e))}function gF(i,t){return i.queries.getByIndex(t)}function vc(i,t){return wI(i,t)}function II(...i){}const Nx=new Ji("Application Initializer");let SI=(()=>{class i{constructor(e){this.appInits=e,this.resolve=II,this.reject=II,this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r})}runInitializers(){if(this.initialized)return;const e=[],n=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(Tx(s))e.push(s);else if(QT(s)){const o=new Promise((l,u)=>{s.subscribe({complete:l,error:u})});e.push(o)}}Promise.all(e).then(()=>{n()}).catch(r=>{this.reject(r)}),0===e.length&&n(),this.initialized=!0}}return i.\u0275fac=function(e){return new(e||i)(jn(Nx,8))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Bx=new Ji("AppId",{providedIn:"root",factory:function kF(){return`${CM()}${CM()}${CM()}`}});function CM(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const OF=new Ji("Platform Initializer"),$b=new Ji("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),FF=new Ji("appBootstrapListener"),NF=new Ji("AnimationModuleType");let p7=(()=>{class i{log(e){console.log(e)}warn(e){console.warn(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Yi({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Wv=new Ji("LocaleId",{providedIn:"root",factory:()=>ha(Wv,ns.Optional|ns.SkipSelf)||function g7(){return typeof $localize<"u"&&$localize.locale||zb}()});class v7{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}let xM=(()=>{class i{compileModuleSync(e){return new oM(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const n=this.compileModuleSync(e),s=an(uu(e).declarations).reduce((o,l)=>{const u=qo(l);return u&&o.push(new Ix(u)),o},[]);return new v7(n,s)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Yi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const b7=(()=>Promise.resolve(0))();function wM(i){typeof Zone>"u"?b7.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Ko{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new qn(!1),this.onMicrotaskEmpty=new qn(!1),this.onStable=new qn(!1),this.onError=new qn(!1),typeof Zone>"u")throw new gi(908,!1);Zone.assertZonePatched();const r=this;if(r._nesting=0,r._outer=r._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const s=Zone.AsyncStackTaggingZoneSpec;r._inner=r._inner.fork(new s("Angular"))}Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function C7(){let i=io.requestAnimationFrame,t=io.cancelAnimationFrame;if(typeof Zone<"u"&&i&&t){const e=i[Zone.__symbol__("OriginalDelegate")];e&&(i=e);const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function A7(i){const t=()=>{!function w7(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(io,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,IM(i),i.isCheckStableRunning=!0,AM(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),IM(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,n,r,s,o,l)=>{try{return VF(i),e.invokeTask(r,s,o,l)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||i.shouldCoalesceRunChangeDetection)&&t(),UF(i)}},onInvoke:(e,n,r,s,o,l,u)=>{try{return VF(i),e.invoke(r,s,o,l,u)}finally{i.shouldCoalesceRunChangeDetection&&t(),UF(i)}},onHasTask:(e,n,r,s)=>{e.hasTask(r,s),n===r&&("microTask"==s.change?(i._hasPendingMicrotasks=s.microTask,IM(i),AM(i)):"macroTask"==s.change&&(i.hasPendingMacrotasks=s.macroTask))},onHandleError:(e,n,r,s)=>(e.handleError(r,s),i.runOutsideAngular(()=>i.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ko.isInAngularZone())throw new gi(909,!1)}static assertNotInAngularZone(){if(Ko.isInAngularZone())throw new gi(909,!1)}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,t,x7,II,II);try{return s.runTask(o,e,n)}finally{s.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const x7={};function AM(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function IM(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function VF(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function UF(i){i._nesting--,AM(i)}class I7{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new qn,this.onMicrotaskEmpty=new qn,this.onStable=new qn,this.onError=new qn}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}const HF=new Ji(""),EI=new Ji("");let TM,SM=(()=>{class i{constructor(e,n,r){this._ngZone=e,this.registry=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,TM||(function S7(i){TM=i}(r),r.addToWindow(n)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ko.assertNotInAngularZone(),wM(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())wM(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(n=>!n.updateCb||!n.updateCb(e)||(clearTimeout(n.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,n,r){let s=-1;n&&n>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),e(this._didWork,this.getPendingTasks())},n)),this._callbacks.push({doneCb:e,timeoutId:s,updateCb:r})}whenStable(e,n,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,n,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,n,r){return[]}}return i.\u0275fac=function(e){return new(e||i)(jn(Ko),jn(EM),jn(EI))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})(),EM=(()=>{class i{constructor(){this._applications=new Map}registerApplication(e,n){this._applications.set(e,n)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,n=!0){return TM?.findTestabilityInTree(this,e,n)??null}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Yi({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),Qy=null;const GF=new Ji("AllowMultipleToken"),MM=new Ji("PlatformDestroyListeners");class WF{constructor(t,e){this.name=t,this.token=e}}function $F(i,t,e=[]){const n=`Platform: ${t}`,r=new Ji(n);return(s=[])=>{let o=DM();if(!o||o.injector.get(GF,!1)){const l=[...e,...s,{provide:r,useValue:!0}];i?i(l):function M7(i){if(Qy&&!Qy.get(GF,!1))throw new gi(400,!1);Qy=i;const t=i.get(XF);(function jF(i){const t=i.get(OF,null);t&&t.forEach(e=>e())})(i)}(function qF(i=[],t){return xu.create({name:t,providers:[{provide:Le,useValue:"platform"},{provide:MM,useValue:new Set([()=>Qy=null])},...i]})}(l,n))}return function L7(i){const t=DM();if(!t)throw new gi(401,!1);return t}()}}function DM(){return Qy?.get(XF)??null}let XF=(()=>{class i{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,n){const r=function P7(i,t){let e;return e="noop"===i?new I7:("zone.js"===i?void 0:i)||new Ko(t),e}(n?.ngZone,function YF(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(n)),s=[{provide:Ko,useValue:r}];return r.run(()=>{const o=xu.create({providers:s,parent:this.injector,name:e.moduleType.name}),l=e.create(o),u=l.injector.get(et,null);if(!u)throw new gi(402,!1);return r.runOutsideAngular(()=>{const p=r.onError.subscribe({next:v=>{u.handleError(v)}});l.onDestroy(()=>{TI(this._modules,l),p.unsubscribe()})}),function KF(i,t,e){try{const n=e();return Tx(n)?n.catch(r=>{throw t.runOutsideAngular(()=>i.handleError(r)),r}):n}catch(n){throw t.runOutsideAngular(()=>i.handleError(n)),n}}(u,r,()=>{const p=l.injector.get(SI);return p.runInitializers(),p.donePromise.then(()=>(function CO(i){Sc(i,"Expected localeId to be defined"),"string"==typeof i&&(bO=i.toLowerCase().replace(/_/g,"-"))}(l.injector.get(Wv,zb)||zb),this._moduleDoBootstrap(l),l))})})}bootstrapModule(e,n=[]){const r=ZF({},n);return function E7(i,t,e){const n=new oM(e);return Promise.resolve(n)}(0,0,e).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(e){const n=e.injector.get(zx);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>n.bootstrap(r));else{if(!e.instance.ngDoBootstrap)throw new gi(403,!1);e.instance.ngDoBootstrap(n)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new gi(404,!1);this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n());const e=this._injector.get(MM,null);e&&(e.forEach(n=>n()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(e){return new(e||i)(jn(xu))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function ZF(i,t){return Array.isArray(t)?t.reduce(ZF,i):{...i,...t}}let zx=(()=>{class i{constructor(e,n,r){this._zone=e,this._injector=n,this._exceptionHandler=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new bt(l=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{l.next(this._stable),l.complete()})}),o=new bt(l=>{let u;this._zone.runOutsideAngular(()=>{u=this._zone.onStable.subscribe(()=>{Ko.assertNotInAngularZone(),wM(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,l.next(!0))})})});const p=this._zone.onUnstable.subscribe(()=>{Ko.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{l.next(!1)}))});return()=>{u.unsubscribe(),p.unsubscribe()}});this.isStable=function Gs(...i){const t=de(i),e=function Se(i,t){return"number"==typeof it(i)?i.pop():t}(i,1/0),n=i;return n.length?1===n.length?hl(n[0]):Ac(e)(or(n,t)):tl}(s,o.pipe(xo()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(e,n){const r=e instanceof $t;if(!this._injector.get(SI).done)throw!r&&function Wb(i){const t=qo(i)||kl(i)||Da(i);return null!==t&&t.standalone}(e),new gi(405,false);let o;o=r?e:this._injector.get(fi).resolveComponentFactory(e),this.componentTypes.push(o.componentType);const l=function T7(i){return i.isBoundToModule}(o)?void 0:this._injector.get(o0),p=o.create(xu.NULL,[],n||o.selector,l),v=p.location.nativeElement,x=p.injector.get(HF,null);return x?.registerApplication(v),p.onDestroy(()=>{this.detachView(p.hostView),TI(this.components,p),x?.unregisterApplication(v)}),this._loadComponent(p),p}tick(){if(this._runningTick)throw new gi(101,!1);try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const n=e;this._views.push(n),n.attachToAppRef(this)}detachView(e){const n=e;TI(this._views,n),n.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(FF,[]).concat(this._bootstrapListeners).forEach(r=>r(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>TI(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new gi(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(e){return new(e||i)(jn(Ko),jn(Ke),jn(et))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function TI(i,t){const e=i.indexOf(t);e>-1&&i.splice(e,1)}let JF=!0,eN=!1;function tN(){return eN=!0,JF}let Zo=(()=>{class i{}return i.__NG_ELEMENT_ID__=O7,i})();function O7(i){return function F7(i,t,e){if(Rg(i)&&!e){const n=Mc(i.index,t);return new Ax(n,n)}return 47&i.type?new Ax(t[16],t):null}(dt(),mi(),16==(16&i))}class sN{constructor(){}supports(t){return Sx(t)}create(t){return new H7(t)}}const U7=(i,t)=>t;class H7{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||U7}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,s=null;for(;e||n;){const o=!n||e&&e.currentIndex<aN(n,r,s)?e:n,l=aN(o,r,s),u=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{s||(s=[]);const p=l-r,v=u-r;if(p!=v){for(let I=0;I<p;I++){const T=I<s.length?s[I]:s[I]=0,F=T+I;v<=F&&F<p&&(s[I]=T+1)}s[o.previousIndex]=v-p}}l!==u&&t(o,l,u)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Sx(t))throw new gi(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let r,s,o,e=this._itHead,n=!1;if(Array.isArray(t)){this.length=t.length;for(let l=0;l<this.length;l++)s=t[l],o=this._trackByFn(l,s),null!==e&&Object.is(e.trackById,o)?(n&&(e=this._verifyReinsertion(e,s,o,l)),Object.is(e.item,s)||this._addIdentityChange(e,s)):(e=this._mismatch(e,s,o,l),n=!0),e=e._next}else r=0,function wW(i,t){if(Array.isArray(i))for(let e=0;e<i.length;e++)t(i[e]);else{const e=i[n0()]();let n;for(;!(n=e.next()).done;)t(n.value)}}(t,l=>{o=this._trackByFn(r,l),null!==e&&Object.is(e.trackById,o)?(n&&(e=this._verifyReinsertion(e,l,o,r)),Object.is(e.item,l)||this._addIdentityChange(e,l)):(e=this._mismatch(e,l,o,r),n=!0),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let s;return null===t?s=this._itTail:(s=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,s,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,s,r)):t=this._addAfter(new G7(e,n),s,r),t}_verifyReinsertion(t,e,n,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==s?t=this._reinsertAfter(s,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,s=t._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new oN),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new oN),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class G7{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class W7{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class oN{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new W7,this.map.set(e,n)),n.add(t)}get(t,e){const r=this.map.get(t);return r?r.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function aN(i,t,e){const n=i.previousIndex;if(null===n)return n;let r=0;return e&&n<e.length&&(r=e[n]),n+t+r}class lN{constructor(){}supports(t){return t instanceof Map||KT(t)}create(){return new j7}}class j7{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||KT(t)))throw new gi(900,!1)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(n,r)=>{if(e&&e.key===r)this._maybeAddToChanges(e,n),this._appendAfter=e,e=e._next;else{const s=this._getOrCreateRecordForKey(r,n);e=this._insertBeforeOrAppend(e,s)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let n=e;null!==n;n=n._nextRemoved)n===this._mapHead&&(this._mapHead=null),this._records.delete(n.key),n._nextRemoved=n._next,n.previousValue=n.currentValue,n.currentValue=null,n._prev=null,n._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const r=this._records.get(t);this._maybeAddToChanges(r,e);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const n=new $7(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class $7{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function cN(){return new LI([new sN])}let LI=(()=>{class i{constructor(e){this.factories=e}static create(e,n){if(null!=n){const r=n.factories.slice();e=e.concat(r)}return new i(e)}static extend(e){return{provide:i,useFactory:n=>i.create(e,n||cN()),deps:[[i,new pd,new Tl]]}}find(e){const n=this.factories.find(r=>r.supports(e));if(null!=n)return n;throw new gi(901,!1)}}return i.\u0275prov=Yi({token:i,providedIn:"root",factory:cN}),i})();function uN(){return new Vx([new lN])}let Vx=(()=>{class i{constructor(e){this.factories=e}static create(e,n){if(n){const r=n.factories.slice();e=e.concat(r)}return new i(e)}static extend(e){return{provide:i,useFactory:n=>i.create(e,n||uN()),deps:[[i,new pd,new Tl]]}}find(e){const n=this.factories.find(r=>r.supports(e));if(n)return n;throw new gi(901,!1)}}return i.\u0275prov=Yi({token:i,providedIn:"root",factory:uN}),i})();const Y7=$F(null,"core",[]);let K7=(()=>{class i{constructor(e){}}return i.\u0275fac=function(e){return new(e||i)(jn(zx))},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({}),i})();function $v(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}let PI=null;function Zm(){return PI}const Xu=new Ji("DocumentToken");let OM=(()=>{class i{historyGo(e){throw new Error("Not implemented")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Yi({token:i,factory:function(){return function e$(){return jn(dN)}()},providedIn:"platform"}),i})();const t$=new Ji("Location Initialized");let dN=(()=>{class i extends OM{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Zm().getBaseHref(this._doc)}onPopState(e){const n=Zm().getGlobalEventTarget(this._doc,"window");return n.addEventListener("popstate",e,!1),()=>n.removeEventListener("popstate",e)}onHashChange(e){const n=Zm().getGlobalEventTarget(this._doc,"window");return n.addEventListener("hashchange",e,!1),()=>n.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,n,r){hN()?this._history.pushState(e,n,r):this.location.hash=r}replaceState(e,n,r){hN()?this._history.replaceState(e,n,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return i.\u0275fac=function(e){return new(e||i)(jn(Xu))},i.\u0275prov=Yi({token:i,factory:function(){return function n$(){return new dN(jn(Xu))}()},providedIn:"platform"}),i})();function hN(){return!!window.history.pushState}function FM(i,t){if(0==i.length)return t;if(0==t.length)return i;let e=0;return i.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?i+t.substring(1):1==e?i+t:i+"/"+t}function fN(i){const t=i.match(/#|\?|$/),e=t&&t.index||i.length;return i.slice(0,e-("/"===i[e-1]?1:0))+i.slice(e)}function qv(i){return i&&"?"!==i[0]?"?"+i:i}let l0=(()=>{class i{historyGo(e){throw new Error("Not implemented")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Yi({token:i,factory:function(){return ha(gN)},providedIn:"root"}),i})();const pN=new Ji("appBaseHref");let gN=(()=>{class i extends l0{constructor(e,n){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=n??this._platformLocation.getBaseHrefFromDOM()??ha(Xu).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return FM(this._baseHref,e)}path(e=!1){const n=this._platformLocation.pathname+qv(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${n}${r}`:n}pushState(e,n,r,s){const o=this.prepareExternalUrl(r+qv(s));this._platformLocation.pushState(e,n,o)}replaceState(e,n,r,s){const o=this.prepareExternalUrl(r+qv(s));this._platformLocation.replaceState(e,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return i.\u0275fac=function(e){return new(e||i)(jn(OM),jn(pN,8))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),i$=(()=>{class i extends l0{constructor(e,n){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=n&&(this._baseHref=n)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let n=this._platformLocation.hash;return null==n&&(n="#"),n.length>0?n.substring(1):n}prepareExternalUrl(e){const n=FM(this._baseHref,e);return n.length>0?"#"+n:n}pushState(e,n,r,s){let o=this.prepareExternalUrl(r+qv(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(e,n,o)}replaceState(e,n,r,s){let o=this.prepareExternalUrl(r+qv(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(e,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return i.\u0275fac=function(e){return new(e||i)(jn(OM),jn(pN,8))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})(),NM=(()=>{class i{constructor(e){this._subject=new qn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const n=this._locationStrategy.getBaseHref();this._baseHref=fN(mN(n)),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,n=""){return this.path()==this.normalize(e+qv(n))}normalize(e){return i.stripTrailingSlash(function s$(i,t){return i&&t.startsWith(i)?t.substring(i.length):t}(this._baseHref,mN(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,n="",r=null){this._locationStrategy.pushState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+qv(n)),r)}replaceState(e,n="",r=null){this._locationStrategy.replaceState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+qv(n)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(n=>{this._notifyUrlChangeListeners(n.url,n.state)})),()=>{const n=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(n,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",n){this._urlChangeListeners.forEach(r=>r(e,n))}subscribe(e,n,r){return this._subject.subscribe({next:e,error:n,complete:r})}}return i.normalizeQueryParams=qv,i.joinWithSlash=FM,i.stripTrailingSlash=fN,i.\u0275fac=function(e){return new(e||i)(jn(l0))},i.\u0275prov=Yi({token:i,factory:function(){return function r$(){return new NM(jn(l0))}()},providedIn:"root"}),i})();function mN(i){return i.replace(/\/index.html$/,"")}var iu=(()=>((iu=iu||{})[iu.Format=0]="Format",iu[iu.Standalone=1]="Standalone",iu))(),Go=(()=>((Go=Go||{})[Go.Narrow=0]="Narrow",Go[Go.Abbreviated=1]="Abbreviated",Go[Go.Wide=2]="Wide",Go[Go.Short=3]="Short",Go))(),yc=(()=>((yc=yc||{})[yc.Short=0]="Short",yc[yc.Medium=1]="Medium",yc[yc.Long=2]="Long",yc[yc.Full=3]="Full",yc))(),Rs=(()=>((Rs=Rs||{})[Rs.Decimal=0]="Decimal",Rs[Rs.Group=1]="Group",Rs[Rs.List=2]="List",Rs[Rs.PercentSign=3]="PercentSign",Rs[Rs.PlusSign=4]="PlusSign",Rs[Rs.MinusSign=5]="MinusSign",Rs[Rs.Exponential=6]="Exponential",Rs[Rs.SuperscriptingExponent=7]="SuperscriptingExponent",Rs[Rs.PerMille=8]="PerMille",Rs[Rs.Infinity=9]="Infinity",Rs[Rs.NaN=10]="NaN",Rs[Rs.TimeSeparator=11]="TimeSeparator",Rs[Rs.CurrencyDecimal=12]="CurrencyDecimal",Rs[Rs.CurrencyGroup=13]="CurrencyGroup",Rs))();function RI(i,t){return fg(nf(i)[Nr.DateFormat],t)}function kI(i,t){return fg(nf(i)[Nr.TimeFormat],t)}function OI(i,t){return fg(nf(i)[Nr.DateTimeFormat],t)}function hg(i,t){const e=nf(i),n=e[Nr.NumberSymbols][t];if(typeof n>"u"){if(t===Rs.CurrencyDecimal)return e[Nr.NumberSymbols][Rs.Decimal];if(t===Rs.CurrencyGroup)return e[Nr.NumberSymbols][Rs.Group]}return n}function yN(i){if(!i[Nr.ExtraData])throw new Error(`Missing extra locale data for the locale "${i[Nr.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function fg(i,t){for(let e=t;e>-1;e--)if(typeof i[e]<"u")return i[e];throw new Error("Locale data API: locale data undefined")}function zM(i){const[t,e]=i.split(":");return{hours:+t,minutes:+e}}const y$=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Ux={},_$=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Yu=(()=>((Yu=Yu||{})[Yu.Short=0]="Short",Yu[Yu.ShortGMT=1]="ShortGMT",Yu[Yu.Long=2]="Long",Yu[Yu.Extended=3]="Extended",Yu))(),Vs=(()=>((Vs=Vs||{})[Vs.FullYear=0]="FullYear",Vs[Vs.Month=1]="Month",Vs[Vs.Date=2]="Date",Vs[Vs.Hours=3]="Hours",Vs[Vs.Minutes=4]="Minutes",Vs[Vs.Seconds=5]="Seconds",Vs[Vs.FractionalSeconds=6]="FractionalSeconds",Vs[Vs.Day=7]="Day",Vs))(),ho=(()=>((ho=ho||{})[ho.DayPeriods=0]="DayPeriods",ho[ho.Days=1]="Days",ho[ho.Months=2]="Months",ho[ho.Eras=3]="Eras",ho))();function b$(i,t,e,n){let r=function M$(i){if(CN(i))return i;if("number"==typeof i&&!isNaN(i))return new Date(i);if("string"==typeof i){if(i=i.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(i)){const[r,s=1,o=1]=i.split("-").map(l=>+l);return FI(r,s-1,o)}const e=parseFloat(i);if(!isNaN(i-e))return new Date(e);let n;if(n=i.match(y$))return function D$(i){const t=new Date(0);let e=0,n=0;const r=i[8]?t.setUTCFullYear:t.setFullYear,s=i[8]?t.setUTCHours:t.setHours;i[9]&&(e=Number(i[9]+i[10]),n=Number(i[9]+i[11])),r.call(t,Number(i[1]),Number(i[2])-1,Number(i[3]));const o=Number(i[4]||0)-e,l=Number(i[5]||0)-n,u=Number(i[6]||0),p=Math.floor(1e3*parseFloat("0."+(i[7]||0)));return s.call(t,o,l,u,p),t}(n)}const t=new Date(i);if(!CN(t))throw new Error(`Unable to convert "${i}" into a date`);return t}(i);t=Xv(e,t)||t;let l,o=[];for(;t;){if(l=_$.exec(t),!l){o.push(t);break}{o=o.concat(l.slice(1));const v=o.pop();if(!v)break;t=v}}let u=r.getTimezoneOffset();n&&(u=bN(n,u),r=function T$(i,t,e){const n=e?-1:1,r=i.getTimezoneOffset();return function E$(i,t){return(i=new Date(i.getTime())).setMinutes(i.getMinutes()+t),i}(i,n*(bN(t,r)-r))}(r,n,!0));let p="";return o.forEach(v=>{const x=function S$(i){if(UM[i])return UM[i];let t;switch(i){case"G":case"GG":case"GGG":t=Ml(ho.Eras,Go.Abbreviated);break;case"GGGG":t=Ml(ho.Eras,Go.Wide);break;case"GGGGG":t=Ml(ho.Eras,Go.Narrow);break;case"y":t=Iu(Vs.FullYear,1,0,!1,!0);break;case"yy":t=Iu(Vs.FullYear,2,0,!0,!0);break;case"yyy":t=Iu(Vs.FullYear,3,0,!1,!0);break;case"yyyy":t=Iu(Vs.FullYear,4,0,!1,!0);break;case"Y":t=VI(1);break;case"YY":t=VI(2,!0);break;case"YYY":t=VI(3);break;case"YYYY":t=VI(4);break;case"M":case"L":t=Iu(Vs.Month,1,1);break;case"MM":case"LL":t=Iu(Vs.Month,2,1);break;case"MMM":t=Ml(ho.Months,Go.Abbreviated);break;case"MMMM":t=Ml(ho.Months,Go.Wide);break;case"MMMMM":t=Ml(ho.Months,Go.Narrow);break;case"LLL":t=Ml(ho.Months,Go.Abbreviated,iu.Standalone);break;case"LLLL":t=Ml(ho.Months,Go.Wide,iu.Standalone);break;case"LLLLL":t=Ml(ho.Months,Go.Narrow,iu.Standalone);break;case"w":t=VM(1);break;case"ww":t=VM(2);break;case"W":t=VM(1,!0);break;case"d":t=Iu(Vs.Date,1);break;case"dd":t=Iu(Vs.Date,2);break;case"c":case"cc":t=Iu(Vs.Day,1);break;case"ccc":t=Ml(ho.Days,Go.Abbreviated,iu.Standalone);break;case"cccc":t=Ml(ho.Days,Go.Wide,iu.Standalone);break;case"ccccc":t=Ml(ho.Days,Go.Narrow,iu.Standalone);break;case"cccccc":t=Ml(ho.Days,Go.Short,iu.Standalone);break;case"E":case"EE":case"EEE":t=Ml(ho.Days,Go.Abbreviated);break;case"EEEE":t=Ml(ho.Days,Go.Wide);break;case"EEEEE":t=Ml(ho.Days,Go.Narrow);break;case"EEEEEE":t=Ml(ho.Days,Go.Short);break;case"a":case"aa":case"aaa":t=Ml(ho.DayPeriods,Go.Abbreviated);break;case"aaaa":t=Ml(ho.DayPeriods,Go.Wide);break;case"aaaaa":t=Ml(ho.DayPeriods,Go.Narrow);break;case"b":case"bb":case"bbb":t=Ml(ho.DayPeriods,Go.Abbreviated,iu.Standalone,!0);break;case"bbbb":t=Ml(ho.DayPeriods,Go.Wide,iu.Standalone,!0);break;case"bbbbb":t=Ml(ho.DayPeriods,Go.Narrow,iu.Standalone,!0);break;case"B":case"BB":case"BBB":t=Ml(ho.DayPeriods,Go.Abbreviated,iu.Format,!0);break;case"BBBB":t=Ml(ho.DayPeriods,Go.Wide,iu.Format,!0);break;case"BBBBB":t=Ml(ho.DayPeriods,Go.Narrow,iu.Format,!0);break;case"h":t=Iu(Vs.Hours,1,-12);break;case"hh":t=Iu(Vs.Hours,2,-12);break;case"H":t=Iu(Vs.Hours,1);break;case"HH":t=Iu(Vs.Hours,2);break;case"m":t=Iu(Vs.Minutes,1);break;case"mm":t=Iu(Vs.Minutes,2);break;case"s":t=Iu(Vs.Seconds,1);break;case"ss":t=Iu(Vs.Seconds,2);break;case"S":t=Iu(Vs.FractionalSeconds,1);break;case"SS":t=Iu(Vs.FractionalSeconds,2);break;case"SSS":t=Iu(Vs.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=BI(Yu.Short);break;case"ZZZZZ":t=BI(Yu.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=BI(Yu.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=BI(Yu.Long);break;default:return null}return UM[i]=t,t}(v);p+=x?x(r,e,u):"''"===v?"'":v.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),p}function FI(i,t,e){const n=new Date(0);return n.setFullYear(i,t,e),n.setHours(0,0,0),n}function Xv(i,t){const e=function o$(i){return nf(i)[Nr.LocaleId]}(i);if(Ux[e]=Ux[e]||{},Ux[e][t])return Ux[e][t];let n="";switch(t){case"shortDate":n=RI(i,yc.Short);break;case"mediumDate":n=RI(i,yc.Medium);break;case"longDate":n=RI(i,yc.Long);break;case"fullDate":n=RI(i,yc.Full);break;case"shortTime":n=kI(i,yc.Short);break;case"mediumTime":n=kI(i,yc.Medium);break;case"longTime":n=kI(i,yc.Long);break;case"fullTime":n=kI(i,yc.Full);break;case"short":const r=Xv(i,"shortTime"),s=Xv(i,"shortDate");n=NI(OI(i,yc.Short),[r,s]);break;case"medium":const o=Xv(i,"mediumTime"),l=Xv(i,"mediumDate");n=NI(OI(i,yc.Medium),[o,l]);break;case"long":const u=Xv(i,"longTime"),p=Xv(i,"longDate");n=NI(OI(i,yc.Long),[u,p]);break;case"full":const v=Xv(i,"fullTime"),x=Xv(i,"fullDate");n=NI(OI(i,yc.Full),[v,x])}return n&&(Ux[e][t]=n),n}function NI(i,t){return t&&(i=i.replace(/\{([^}]+)}/g,function(e,n){return null!=t&&n in t?t[n]:e})),i}function um(i,t,e="-",n,r){let s="";(i<0||r&&i<=0)&&(r?i=1-i:(i=-i,s=e));let o=String(i);for(;o.length<t;)o="0"+o;return n&&(o=o.slice(o.length-t)),s+o}function Iu(i,t,e=0,n=!1,r=!1){return function(s,o){let l=function x$(i,t){switch(i){case Vs.FullYear:return t.getFullYear();case Vs.Month:return t.getMonth();case Vs.Date:return t.getDate();case Vs.Hours:return t.getHours();case Vs.Minutes:return t.getMinutes();case Vs.Seconds:return t.getSeconds();case Vs.FractionalSeconds:return t.getMilliseconds();case Vs.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${i}".`)}}(i,s);if((e>0||l>-e)&&(l+=e),i===Vs.Hours)0===l&&-12===e&&(l=12);else if(i===Vs.FractionalSeconds)return function C$(i,t){return um(i,3).substring(0,t)}(l,t);const u=hg(o,Rs.MinusSign);return um(l,t,u,n,r)}}function Ml(i,t,e=iu.Format,n=!1){return function(r,s){return function w$(i,t,e,n,r,s){switch(e){case ho.Months:return function c$(i,t,e){const n=nf(i),s=fg([n[Nr.MonthsFormat],n[Nr.MonthsStandalone]],t);return fg(s,e)}(t,r,n)[i.getMonth()];case ho.Days:return function l$(i,t,e){const n=nf(i),s=fg([n[Nr.DaysFormat],n[Nr.DaysStandalone]],t);return fg(s,e)}(t,r,n)[i.getDay()];case ho.DayPeriods:const o=i.getHours(),l=i.getMinutes();if(s){const p=function f$(i){const t=nf(i);return yN(t),(t[Nr.ExtraData][2]||[]).map(n=>"string"==typeof n?zM(n):[zM(n[0]),zM(n[1])])}(t),v=function p$(i,t,e){const n=nf(i);yN(n);const s=fg([n[Nr.ExtraData][0],n[Nr.ExtraData][1]],t)||[];return fg(s,e)||[]}(t,r,n),x=p.findIndex(I=>{if(Array.isArray(I)){const[T,F]=I,j=o>=T.hours&&l>=T.minutes,X=o<F.hours||o===F.hours&&l<F.minutes;if(T.hours<F.hours){if(j&&X)return!0}else if(j||X)return!0}else if(I.hours===o&&I.minutes===l)return!0;return!1});if(-1!==x)return v[x]}return function a$(i,t,e){const n=nf(i),s=fg([n[Nr.DayPeriodsFormat],n[Nr.DayPeriodsStandalone]],t);return fg(s,e)}(t,r,n)[o<12?0:1];case ho.Eras:return function u$(i,t){return fg(nf(i)[Nr.Eras],t)}(t,n)[i.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${e}`)}}(r,s,i,t,e,n)}}function BI(i){return function(t,e,n){const r=-1*n,s=hg(e,Rs.MinusSign),o=r>0?Math.floor(r/60):Math.ceil(r/60);switch(i){case Yu.Short:return(r>=0?"+":"")+um(o,2,s)+um(Math.abs(r%60),2,s);case Yu.ShortGMT:return"GMT"+(r>=0?"+":"")+um(o,1,s);case Yu.Long:return"GMT"+(r>=0?"+":"")+um(o,2,s)+":"+um(Math.abs(r%60),2,s);case Yu.Extended:return 0===n?"Z":(r>=0?"+":"")+um(o,2,s)+":"+um(Math.abs(r%60),2,s);default:throw new Error(`Unknown zone width "${i}"`)}}}function _N(i){return FI(i.getFullYear(),i.getMonth(),i.getDate()+(4-i.getDay()))}function VM(i,t=!1){return function(e,n){let r;if(t){const s=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,o=e.getDate();r=1+Math.floor((o+s)/7)}else{const s=_N(e),o=function I$(i){const t=FI(i,0,1).getDay();return FI(i,0,1+(t<=4?4:11)-t)}(s.getFullYear()),l=s.getTime()-o.getTime();r=1+Math.round(l/6048e5)}return um(r,i,hg(n,Rs.MinusSign))}}function VI(i,t=!1){return function(e,n){return um(_N(e).getFullYear(),i,hg(n,Rs.MinusSign),t)}}const UM={};function bN(i,t){i=i.replace(/:/g,"");const e=Date.parse("Jan 01, 1970 00:00:00 "+i)/6e4;return isNaN(e)?t:e}function CN(i){return i instanceof Date&&!isNaN(i.valueOf())}function IN(i,t){t=encodeURIComponent(t);for(const e of i.split(";")){const n=e.indexOf("="),[r,s]=-1==n?[e,""]:[e.slice(0,n),e.slice(n+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}let bo=(()=>{class i{constructor(e,n,r,s){this._iterableDiffers=e,this._keyValueDiffers=n,this._ngEl=r,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(Sx(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(n=>this._toggleClass(n.key,n.currentValue)),e.forEachChangedItem(n=>this._toggleClass(n.key,n.currentValue)),e.forEachRemovedItem(n=>{n.previousValue&&this._toggleClass(n.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(n=>{if("string"!=typeof n.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${us(n.item)}`);this._toggleClass(n.item,!0)}),e.forEachRemovedItem(n=>this._toggleClass(n.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(n=>this._toggleClass(n,!0)):Object.keys(e).forEach(n=>this._toggleClass(n,!!e[n])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(n=>this._toggleClass(n,!1)):Object.keys(e).forEach(n=>this._toggleClass(n,!1)))}_toggleClass(e,n){(e=e.trim())&&e.split(/\s+/g).forEach(r=>{n?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return i.\u0275fac=function(e){return new(e||i)(Zt(LI),Zt(Vx),Zt(Xn),Zt(h))},i.\u0275dir=$r({type:i,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),i})();class G${constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Su=(()=>{class i{constructor(e,n,r){this._viewContainer=e,this._template=n,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const n=this._viewContainer;e.forEachOperation((r,s,o)=>{if(null==r.previousIndex)n.createEmbeddedView(this._template,new G$(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)n.remove(null===s?void 0:s);else if(null!==s){const l=n.get(s);n.move(l,o),TN(l,r)}});for(let r=0,s=n.length;r<s;r++){const l=n.get(r).context;l.index=r,l.count=s,l.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{TN(n.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,n){return!0}}return i.\u0275fac=function(e){return new(e||i)(Zt(lm),Zt(am),Zt(LI))},i.\u0275dir=$r({type:i,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),i})();function TN(i,t){i.context.$implicit=t.item}let Wo=(()=>{class i{constructor(e,n){this._viewContainer=e,this._context=new j$,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){MN("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){MN("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,n){return!0}}return i.\u0275fac=function(e){return new(e||i)(Zt(lm),Zt(am))},i.\u0275dir=$r({type:i,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),i})();class j${constructor(){this.$implicit=null,this.ngIf=null}}function MN(i,t){if(t&&!t.createEmbeddedView)throw new Error(`${i} must be a TemplateRef, but received '${us(t)}'.`)}let Qo=(()=>{class i{constructor(e,n,r){this._ngEl=e,this._differs=n,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,n){const[r,s]=e.split("."),o=-1===r.indexOf("-")?void 0:Oi.DashCase;null!=n?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${n}${s}`:n,o):this._renderer.removeStyle(this._ngEl.nativeElement,r,o)}_applyChanges(e){e.forEachRemovedItem(n=>this._setStyle(n.key,null)),e.forEachAddedItem(n=>this._setStyle(n.key,n.currentValue)),e.forEachChangedItem(n=>this._setStyle(n.key,n.currentValue))}}return i.\u0275fac=function(e){return new(e||i)(Zt(Xn),Zt(Vx),Zt(h))},i.\u0275dir=$r({type:i,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),i})(),rc=(()=>{class i{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(e.ngTemplateOutlet||e.ngTemplateOutletInjector){const n=this._viewContainerRef;if(this._viewRef&&n.remove(n.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:s,ngTemplateOutletInjector:o}=this;this._viewRef=n.createEmbeddedView(r,s,o?{injector:o}:void 0)}else this._viewRef=null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return i.\u0275fac=function(e){return new(e||i)(Zt(lm))},i.\u0275dir=$r({type:i,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[_a]}),i})();const rq=new Ji("DATE_PIPE_DEFAULT_TIMEZONE");let LN=(()=>{class i{constructor(e,n){this.locale=e,this.defaultTimezone=n}transform(e,n="mediumDate",r,s){if(null==e||""===e||e!=e)return null;try{return b$(e,n,s||this.locale,r??this.defaultTimezone??void 0)}catch(o){throw function dm(i,t){return new gi(2100,!1)}()}}}return i.\u0275fac=function(e){return new(e||i)(Zt(Wv,16),Zt(rq,24))},i.\u0275pipe=cu({name:"date",type:i,pure:!0,standalone:!0}),i})(),PN=(()=>{class i{transform(e){return JSON.stringify(e,null,2)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275pipe=cu({name:"json",type:i,pure:!1,standalone:!0}),i})(),Ns=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({}),i})();const kN="browser";function ZM(i){return i===kN}let vq=(()=>{class i{}return i.\u0275prov=Yi({token:i,providedIn:"root",factory:()=>new yq(jn(Xu),window)}),i})();class yq{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function _q(i,t){const e=i.getElementById(t)||i.getElementsByName(t)[0];if(e)return e;if("function"==typeof i.createTreeWalker&&i.body&&(i.body.createShadowRoot||i.body.attachShadow)){const n=i.createTreeWalker(i.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(o)return o}r=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(n-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=ON(this.window.history)||ON(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function ON(i){return Object.getOwnPropertyDescriptor(i,"scrollRestoration")}class FN{}class QM extends class bq extends class J7{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function Q7(i){PI||(PI=i)}(new QM)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function Cq(){return Gx=Gx||document.querySelector("base"),Gx?Gx.getAttribute("href"):null}();return null==e?null:function xq(i){HI=HI||document.createElement("a"),HI.setAttribute("href",i);const t=HI.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){Gx=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return IN(document.cookie,t)}}let HI,Gx=null;const NN=new Ji("TRANSITION_ID"),Aq=[{provide:Nx,useFactory:function wq(i,t,e){return()=>{e.get(SI).donePromise.then(()=>{const n=Zm(),r=t.querySelectorAll(`style[ng-transition="${i}"]`);for(let s=0;s<r.length;s++)n.remove(r[s])})}},deps:[NN,Xu,xu],multi:!0}];let Sq=(()=>{class i{build(){return new XMLHttpRequest}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})();const GI=new Ji("EventManagerPlugins");let WI=(()=>{class i{constructor(e,n){this._zone=n,this._eventNameToPlugin=new Map,e.forEach(r=>r.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,n,r){return this._findPluginFor(n).addEventListener(e,n,r)}addGlobalEventListener(e,n,r){return this._findPluginFor(n).addGlobalEventListener(e,n,r)}getZone(){return this._zone}_findPluginFor(e){const n=this._eventNameToPlugin.get(e);if(n)return n;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(e))return this._eventNameToPlugin.set(e,o),o}throw new Error(`No event manager plugin found for event ${e}`)}}return i.\u0275fac=function(e){return new(e||i)(jn(GI),jn(Ko))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})();class BN{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=Zm().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let zN=(()=>{class i{constructor(){this._stylesSet=new Set}addStyles(e){const n=new Set;e.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),n.add(r))}),this.onStylesAdded(n)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})(),Wx=(()=>{class i extends zN{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,n,r){e.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,r.push(n.appendChild(o))})}addHost(e){const n=[];this._addStylesToHost(this._stylesSet,e,n),this._hostNodes.set(e,n)}removeHost(e){const n=this._hostNodes.get(e);n&&n.forEach(VN),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((n,r)=>{this._addStylesToHost(e,r,n)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(VN))}}return i.\u0275fac=function(e){return new(e||i)(jn(Xu))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})();function VN(i){Zm().remove(i)}const JM={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},eD=/%COMP%/g;function jI(i,t,e){for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?jI(i,r,e):(r=r.replace(eD,i),e.push(r))}return e}function GN(i){return t=>{if("__ngUnwrap__"===t)return i;!1===i(t)&&(t.preventDefault(),t.returnValue=!1)}}let $I=(()=>{class i{constructor(e,n,r){this.eventManager=e,this.sharedStylesHost=n,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new tD(e)}createRenderer(e,n){if(!e||!n)return this.defaultRenderer;switch(n.encapsulation){case Ta.Emulated:{let r=this.rendererByCompId.get(n.id);return r||(r=new Pq(this.eventManager,this.sharedStylesHost,n,this.appId),this.rendererByCompId.set(n.id,r)),r.applyToHost(e),r}case 1:case Ta.ShadowDom:return new Rq(this.eventManager,this.sharedStylesHost,e,n);default:if(!this.rendererByCompId.has(n.id)){const r=jI(n.id,n.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(n.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return i.\u0275fac=function(e){return new(e||i)(jn(WI),jn(Wx),jn(Bx))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})();class tD{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(JM[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){(jN(t)?t.content:t).appendChild(e)}insertBefore(t,e,n){t&&(jN(t)?t.content:t).insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const s=JM[r];s?t.setAttributeNS(s,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=JM[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&(Oi.DashCase|Oi.Important)?t.style.setProperty(e,n,r&Oi.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&Oi.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,GN(n)):this.eventManager.addEventListener(t,e,GN(n))}}function jN(i){return"TEMPLATE"===i.tagName&&void 0!==i.content}class Pq extends tD{constructor(t,e,n,r){super(t),this.component=n;const s=jI(r+"-"+n.id,n.styles,[]);e.addStyles(s),this.contentAttr=function Mq(i){return"_ngcontent-%COMP%".replace(eD,i)}(r+"-"+n.id),this.hostAttr=function Dq(i){return"_nghost-%COMP%".replace(eD,i)}(r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class Rq extends tD{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=jI(r.id,r.styles,[]);for(let o=0;o<s.length;o++){const l=document.createElement("style");l.textContent=s[o],this.shadowRoot.appendChild(l)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let kq=(()=>{class i extends BN{constructor(e){super(e)}supports(e){return!0}addEventListener(e,n,r){return e.addEventListener(n,r,!1),()=>this.removeEventListener(e,n,r)}removeEventListener(e,n,r){return e.removeEventListener(n,r)}}return i.\u0275fac=function(e){return new(e||i)(jn(Xu))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})();const $N=["alt","control","meta","shift"],Fq={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},qN={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Nq={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey};let Bq=(()=>{class i extends BN{constructor(e){super(e)}supports(e){return null!=i.parseEventName(e)}addEventListener(e,n,r){const s=i.parseEventName(n),o=i.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Zm().onAndCancel(e,s.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const s=i._normalizeKey(n.pop());let o="";if($N.forEach(u=>{const p=n.indexOf(u);p>-1&&(n.splice(p,1),o+=u+".")}),o+=s,0!=n.length||0===s.length)return null;const l={};return l.domEventName=r,l.fullKey=o,l}static getEventFullKey(e){let n="",r=function zq(i){let t=i.key;if(null==t){if(t=i.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===i.location&&qN.hasOwnProperty(t)&&(t=qN[t]))}return Fq[t]||t}(e);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),$N.forEach(s=>{s!=r&&(0,Nq[s])(e)&&(n+=s+".")}),n+=r,n}static eventCallback(e,n,r){return s=>{i.getEventFullKey(s)===e&&r.runGuarded(()=>n(s))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return i.\u0275fac=function(e){return new(e||i)(jn(Xu))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})();const Gq=$F(Y7,"browser",[{provide:$b,useValue:kN},{provide:OF,useValue:function Vq(){QM.makeCurrent()},multi:!0},{provide:Xu,useFactory:function Hq(){return function tg(i){md=i}(document),document},deps:[]}]),YN=new Ji(""),KN=[{provide:EI,useClass:class Iq{addToWindow(t){io.getAngularTestability=(n,r=!0)=>{const s=t.findTestabilityInTree(n,r);if(null==s)throw new Error("Could not find testability for element.");return s},io.getAllAngularTestabilities=()=>t.getAllTestabilities(),io.getAllAngularRootElements=()=>t.getAllRootElements(),io.frameworkStabilizers||(io.frameworkStabilizers=[]),io.frameworkStabilizers.push(n=>{const r=io.getAllAngularTestabilities();let s=r.length,o=!1;const l=function(u){o=o||u,s--,0==s&&n(o)};r.forEach(function(u){u.whenStable(l)})})}findTestabilityInTree(t,e,n){return null==e?null:t.getTestability(e)??(n?Zm().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:HF,useClass:SM,deps:[Ko,EM,EI]},{provide:SM,useClass:SM,deps:[Ko,EM,EI]}],ZN=[{provide:Le,useValue:"root"},{provide:et,useFactory:function Uq(){return new et},deps:[]},{provide:GI,useClass:kq,multi:!0,deps:[Xu,Ko,$b]},{provide:GI,useClass:Bq,multi:!0,deps:[Xu]},{provide:$I,useClass:$I,deps:[WI,Wx,Bx]},{provide:c,useExisting:$I},{provide:zN,useExisting:Wx},{provide:Wx,useClass:Wx,deps:[Xu]},{provide:WI,useClass:WI,deps:[GI,Ko]},{provide:FN,useClass:Sq,deps:[]},[]];let QN=(()=>{class i{constructor(e){}static withServerTransition(e){return{ngModule:i,providers:[{provide:Bx,useValue:e.appId},{provide:NN,useExisting:Bx},Aq]}}}return i.\u0275fac=function(e){return new(e||i)(jn(YN,12))},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({providers:[...ZN,...KN],imports:[Ns,K7]}),i})(),iD=(()=>{class i{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return i.\u0275fac=function(e){return new(e||i)(jn(Xu))},i.\u0275prov=Yi({token:i,factory:function(e){let n=null;return n=e?new e:function jq(){return new iD(jn(Xu))}(),n},providedIn:"root"}),i})();typeof window<"u"&&window;let t3=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Yi({token:i,factory:function(e){let n=null;return n=e?new(e||i):jn(n3),n},providedIn:"root"}),i})(),n3=(()=>{class i extends t3{constructor(e){super(),this._doc=e}sanitize(e,n){if(null==n)return null;switch(e){case fa.NONE:return n;case fa.HTML:return ca(n,"HTML")?yl(n):Fv(this._doc,String(n)).toString();case fa.STYLE:return ca(n,"Style")?yl(n):n;case fa.SCRIPT:if(ca(n,"Script"))return yl(n);throw new Error("unsafe value used in a script context");case fa.URL:return ca(n,"URL")?yl(n):ag(String(n));case fa.RESOURCE_URL:if(ca(n,"ResourceURL"))return yl(n);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return function ig(i){return new mh(i)}(e)}bypassSecurityTrustStyle(e){return function Wd(i){return new vp(i)}(e)}bypassSecurityTrustScript(e){return function jd(i){return new Hm(i)}(e)}bypassSecurityTrustUrl(e){return function vh(i){return new G_(i)}(e)}bypassSecurityTrustResourceUrl(e){return function Qh(i){return new tm(i)}(e)}}return i.\u0275fac=function(e){return new(e||i)(jn(Xu))},i.\u0275prov=Yi({token:i,factory:function(e){let n=null;return n=e?new e:function Qq(i){return new n3(i.get(Xu))}(jn(xu)),n},providedIn:"root"}),i})();function Gr(...i){return or(i,de(i))}function Yv(i,t){return Y(t)?fl(i,t,1):fl(i,1)}function pg(i,t){return Cn((e,n)=>{let r=0;e.subscribe(yn(n,s=>i.call(t,s,r++)&&n.next(s)))})}class r3{}class qI{}class Qm{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const n=e.indexOf(":");if(n>0){const r=e.slice(0,n),s=r.toLowerCase(),o=e.slice(n+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Qm?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Qm;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Qm?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const s=t.value;if(s){let o=this.headers.get(e);if(!o)return;o=o.filter(l=>-1===s.indexOf(l)),0===o.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class Jq{encodeKey(t){return s3(t)}encodeValue(t){return s3(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const tX=/%(\d[a-f0-9])/gi,nX={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function s3(i){return encodeURIComponent(i).replace(tX,(t,e)=>nX[e]??t)}function XI(i){return`${i}`}class Kv{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Jq,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function eX(i,t){const e=new Map;return i.length>0&&i.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,l]=-1==s?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,s)),t.decodeValue(r.slice(s+1))],u=e.get(o)||[];u.push(l),e.set(o,u)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e],r=Array.isArray(n)?n.map(XI):[XI(n)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(n=>{const r=t[n];Array.isArray(r)?r.forEach(s=>{e.push({param:n,value:s,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(n=>e+"="+this.encoder.encodeValue(n)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Kv({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(XI(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let n=this.map.get(t.param)||[];const r=n.indexOf(XI(t.value));-1!==r&&n.splice(r,1),n.length>0?this.map.set(t.param,n):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class iX{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function o3(i){return typeof ArrayBuffer<"u"&&i instanceof ArrayBuffer}function a3(i){return typeof Blob<"u"&&i instanceof Blob}function l3(i){return typeof FormData<"u"&&i instanceof FormData}class c0{constructor(t,e,n,r){let s;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function rX(i){switch(i){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,s=r):s=n,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Qm),this.context||(this.context=new iX),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=e;else{const l=e.indexOf("?");this.urlWithParams=e+(-1===l?"?":l<e.length-1?"&":"")+o}}else this.params=new Kv,this.urlWithParams=e}serializeBody(){return null===this.body?null:o3(this.body)||a3(this.body)||l3(this.body)||function sX(i){return typeof URLSearchParams<"u"&&i instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Kv?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||l3(this.body)?null:a3(this.body)?this.body.type||null:o3(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Kv?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,s=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,l=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let u=t.headers||this.headers,p=t.params||this.params;const v=t.context??this.context;return void 0!==t.setHeaders&&(u=Object.keys(t.setHeaders).reduce((x,I)=>x.set(I,t.setHeaders[I]),u)),t.setParams&&(p=Object.keys(t.setParams).reduce((x,I)=>x.set(I,t.setParams[I]),p)),new c0(e,n,s,{params:p,headers:u,context:v,reportProgress:l,responseType:r,withCredentials:o})}}var _c=(()=>((_c=_c||{})[_c.Sent=0]="Sent",_c[_c.UploadProgress=1]="UploadProgress",_c[_c.ResponseHeader=2]="ResponseHeader",_c[_c.DownloadProgress=3]="DownloadProgress",_c[_c.Response=4]="Response",_c[_c.User=5]="User",_c))();class sD{constructor(t,e=200,n="OK"){this.headers=t.headers||new Qm,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class oD extends sD{constructor(t={}){super(t),this.type=_c.ResponseHeader}clone(t={}){return new oD({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class qb extends sD{constructor(t={}){super(t),this.type=_c.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new qb({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class c3 extends sD{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function aD(i,t){return{body:t,headers:i.headers,context:i.context,observe:i.observe,params:i.params,reportProgress:i.reportProgress,responseType:i.responseType,withCredentials:i.withCredentials}}let lD=(()=>{class i{constructor(e){this.handler=e}request(e,n,r={}){let s;if(e instanceof c0)s=e;else{let u,p;u=r.headers instanceof Qm?r.headers:new Qm(r.headers),r.params&&(p=r.params instanceof Kv?r.params:new Kv({fromObject:r.params})),s=new c0(e,n,void 0!==r.body?r.body:null,{headers:u,context:r.context,params:p,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const o=Gr(s).pipe(Yv(u=>this.handler.handle(u)));if(e instanceof c0||"events"===r.observe)return o;const l=o.pipe(pg(u=>u instanceof qb));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return l.pipe(be(u=>{if(null!==u.body&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return l.pipe(be(u=>{if(null!==u.body&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return l.pipe(be(u=>{if(null!==u.body&&"string"!=typeof u.body)throw new Error("Response is not a string.");return u.body}));default:return l.pipe(be(u=>u.body))}case"response":return l;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,n={}){return this.request("DELETE",e,n)}get(e,n={}){return this.request("GET",e,n)}head(e,n={}){return this.request("HEAD",e,n)}jsonp(e,n){return this.request("JSONP",e,{params:(new Kv).append(n,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,n={}){return this.request("OPTIONS",e,n)}patch(e,n,r={}){return this.request("PATCH",e,aD(r,n))}post(e,n,r={}){return this.request("POST",e,aD(r,n))}put(e,n,r={}){return this.request("PUT",e,aD(r,n))}}return i.\u0275fac=function(e){return new(e||i)(jn(r3))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})();class u3{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const d3=new Ji("HTTP_INTERCEPTORS");let oX=(()=>{class i{intercept(e,n){return n.handle(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})();const aX=/^\)\]\}',?\n/;let h3=(()=>{class i{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new bt(n=>{const r=this.xhrFactory.build();if(r.open(e.method,e.urlWithParams),e.withCredentials&&(r.withCredentials=!0),e.headers.forEach((T,F)=>r.setRequestHeader(T,F.join(","))),e.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const T=e.detectContentTypeHeader();null!==T&&r.setRequestHeader("Content-Type",T)}if(e.responseType){const T=e.responseType.toLowerCase();r.responseType="json"!==T?T:"text"}const s=e.serializeBody();let o=null;const l=()=>{if(null!==o)return o;const T=r.statusText||"OK",F=new Qm(r.getAllResponseHeaders()),j=function lX(i){return"responseURL"in i&&i.responseURL?i.responseURL:/^X-Request-URL:/m.test(i.getAllResponseHeaders())?i.getResponseHeader("X-Request-URL"):null}(r)||e.url;return o=new oD({headers:F,status:r.status,statusText:T,url:j}),o},u=()=>{let{headers:T,status:F,statusText:j,url:X}=l(),ce=null;204!==F&&(ce=typeof r.response>"u"?r.responseText:r.response),0===F&&(F=ce?200:0);let we=F>=200&&F<300;if("json"===e.responseType&&"string"==typeof ce){const ye=ce;ce=ce.replace(aX,"");try{ce=""!==ce?JSON.parse(ce):null}catch(Ae){ce=ye,we&&(we=!1,ce={error:Ae,text:ce})}}we?(n.next(new qb({body:ce,headers:T,status:F,statusText:j,url:X||void 0})),n.complete()):n.error(new c3({error:ce,headers:T,status:F,statusText:j,url:X||void 0}))},p=T=>{const{url:F}=l(),j=new c3({error:T,status:r.status||0,statusText:r.statusText||"Unknown Error",url:F||void 0});n.error(j)};let v=!1;const x=T=>{v||(n.next(l()),v=!0);let F={type:_c.DownloadProgress,loaded:T.loaded};T.lengthComputable&&(F.total=T.total),"text"===e.responseType&&!!r.responseText&&(F.partialText=r.responseText),n.next(F)},I=T=>{let F={type:_c.UploadProgress,loaded:T.loaded};T.lengthComputable&&(F.total=T.total),n.next(F)};return r.addEventListener("load",u),r.addEventListener("error",p),r.addEventListener("timeout",p),r.addEventListener("abort",p),e.reportProgress&&(r.addEventListener("progress",x),null!==s&&r.upload&&r.upload.addEventListener("progress",I)),r.send(s),n.next({type:_c.Sent}),()=>{r.removeEventListener("error",p),r.removeEventListener("abort",p),r.removeEventListener("load",u),r.removeEventListener("timeout",p),e.reportProgress&&(r.removeEventListener("progress",x),null!==s&&r.upload&&r.upload.removeEventListener("progress",I)),r.readyState!==r.DONE&&r.abort()}})}}return i.\u0275fac=function(e){return new(e||i)(jn(FN))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})();const cD=new Ji("XSRF_COOKIE_NAME"),uD=new Ji("XSRF_HEADER_NAME");class f3{}let cX=(()=>{class i{constructor(e,n,r){this.doc=e,this.platform=n,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=IN(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return i.\u0275fac=function(e){return new(e||i)(jn(Xu),jn($b),jn(cD))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})(),dD=(()=>{class i{constructor(e,n){this.tokenService=e,this.headerName=n}intercept(e,n){const r=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||r.startsWith("http://")||r.startsWith("https://"))return n.handle(e);const s=this.tokenService.getToken();return null!==s&&!e.headers.has(this.headerName)&&(e=e.clone({headers:e.headers.set(this.headerName,s)})),n.handle(e)}}return i.\u0275fac=function(e){return new(e||i)(jn(f3),jn(uD))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})(),uX=(()=>{class i{constructor(e,n){this.backend=e,this.injector=n,this.chain=null}handle(e){if(null===this.chain){const n=this.injector.get(d3,[]);this.chain=n.reduceRight((r,s)=>new u3(r,s),this.backend)}return this.chain.handle(e)}}return i.\u0275fac=function(e){return new(e||i)(jn(qI),jn(xu))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})(),dX=(()=>{class i{static disable(){return{ngModule:i,providers:[{provide:dD,useClass:oX}]}}static withOptions(e={}){return{ngModule:i,providers:[e.cookieName?{provide:cD,useValue:e.cookieName}:[],e.headerName?{provide:uD,useValue:e.headerName}:[]]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({providers:[dD,{provide:d3,useExisting:dD,multi:!0},{provide:f3,useClass:cX},{provide:cD,useValue:"XSRF-TOKEN"},{provide:uD,useValue:"X-XSRF-TOKEN"}]}),i})(),p3=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({providers:[lD,{provide:r3,useClass:uX},h3,{provide:qI,useExisting:h3}],imports:[dX.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),i})();class Bf extends nn{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:n}=this;if(t)throw e;return this._throwIfClosed(),n}next(t){super.next(this._value=t)}}const YI=D(i=>function(){i(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:hX}=Array,{getPrototypeOf:fX,prototype:pX,keys:gX}=Object;function g3(i){if(1===i.length){const t=i[0];if(hX(t))return{args:t,keys:null};if(function mX(i){return i&&"object"==typeof i&&fX(i)===pX}(t)){const e=gX(t);return{args:e.map(n=>t[n]),keys:e}}}return{args:i,keys:null}}const{isArray:vX}=Array;function m3(i){return be(t=>function yX(i,t){return vX(t)?i(...t):i(t)}(i,t))}function v3(i,t){return i.reduce((e,n,r)=>(e[n]=t[r],e),{})}function y3(...i){const t=de(i),e=Ye(i),{args:n,keys:r}=g3(i);if(0===n.length)return or([],t);const s=new bt(function _X(i,t,e=He){return n=>{_3(t,()=>{const{length:r}=i,s=new Array(r);let o=r,l=r;for(let u=0;u<r;u++)_3(t,()=>{const p=or(i[u],t);let v=!1;p.subscribe(yn(n,x=>{s[u]=x,v||(v=!0,l--),l||n.next(e(s.slice()))},()=>{--o||n.complete()}))},n)},n)}}(n,t,r?o=>v3(r,o):He));return e?s.pipe(m3(e)):s}function _3(i,t,e){i?to(e,i,t):t()}function hD(...i){return function bX(){return Ac(1)}()(or(i,de(i)))}function b3(i){return new bt(t=>{hl(i()).subscribe(t)})}function Xb(i,t){const e=Y(i)?i:()=>i,n=r=>r.error(e());return new bt(t?r=>t.schedule(n,0,r):n)}function fD(){return Cn((i,t)=>{let e=null;i._refCount++;const n=yn(t,void 0,void 0,void 0,()=>{if(!i||i._refCount<=0||0<--i._refCount)return void(e=null);const r=i._connection,s=e;e=null,r&&(!s||r===s)&&r.unsubscribe(),t.unsubscribe()});i.subscribe(n),n.closed||(e=i.connect())})}class C3 extends bt{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,xn(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new W;const e=this.getSubject();t.add(this.source.subscribe(yn(e,void 0,()=>{this._teardown(),e.complete()},n=>{this._teardown(),e.error(n)},()=>this._teardown()))),t.closed&&(this._connection=null,t=W.EMPTY)}return t}refCount(){return fD()(this)}}function hm(i,t){return Cn((e,n)=>{let r=null,s=0,o=!1;const l=()=>o&&!r&&n.complete();e.subscribe(yn(n,u=>{r?.unsubscribe();let p=0;const v=s++;hl(i(u,v)).subscribe(r=yn(n,x=>n.next(t?t(u,x,v,p++):x),()=>{r=null,l()}))},()=>{o=!0,l()}))})}function Yb(i){return i<=0?()=>tl:Cn((t,e)=>{let n=0;t.subscribe(yn(e,r=>{++n<=i&&(e.next(r),i<=n&&e.complete())}))})}function KI(i){return Cn((t,e)=>{let n=!1;t.subscribe(yn(e,r=>{n=!0,e.next(r)},()=>{n||e.next(i),e.complete()}))})}function x3(i=xX){return Cn((t,e)=>{let n=!1;t.subscribe(yn(e,r=>{n=!0,e.next(r)},()=>n?e.complete():e.error(i())))})}function xX(){return new YI}function e_(i,t){const e=arguments.length>=2;return n=>n.pipe(i?pg((r,s)=>i(r,s,n)):He,Yb(1),e?KI(t):x3(()=>new YI))}function wh(i,t,e){const n=Y(i)||t||e?{next:i,error:t,complete:e}:i;return n?Cn((r,s)=>{var o;null===(o=n.subscribe)||void 0===o||o.call(n);let l=!0;r.subscribe(yn(s,u=>{var p;null===(p=n.next)||void 0===p||p.call(n,u),s.next(u)},()=>{var u;l=!1,null===(u=n.complete)||void 0===u||u.call(n),s.complete()},u=>{var p;l=!1,null===(p=n.error)||void 0===p||p.call(n,u),s.error(u)},()=>{var u,p;l&&(null===(u=n.unsubscribe)||void 0===u||u.call(n)),null===(p=n.finalize)||void 0===p||p.call(n)}))}):He}function Jm(i){return Cn((t,e)=>{let s,n=null,r=!1;n=t.subscribe(yn(e,void 0,void 0,o=>{s=hl(i(o,Jm(i)(t))),n?(n.unsubscribe(),n=null,s.subscribe(e)):r=!0})),r&&(n.unsubscribe(),n=null,s.subscribe(e))})}function wX(i,t,e,n,r){return(s,o)=>{let l=e,u=t,p=0;s.subscribe(yn(o,v=>{const x=p++;u=l?i(u,v,x):(l=!0,v),n&&o.next(u)},r&&(()=>{l&&o.next(u),o.complete()})))}}function pD(i,t){return Cn(wX(i,t,arguments.length>=2,!0))}function gD(i){return i<=0?()=>tl:Cn((t,e)=>{let n=[];t.subscribe(yn(e,r=>{n.push(r),i<n.length&&n.shift()},()=>{for(const r of n)e.next(r);e.complete()},void 0,()=>{n=null}))})}function w3(i,t){const e=arguments.length>=2;return n=>n.pipe(i?pg((r,s)=>i(r,s,n)):He,gD(1),e?KI(t):x3(()=>new YI))}function mD(i){return Cn((t,e)=>{try{t.subscribe(e)}finally{e.add(i)}})}const Do="primary";class SX{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Kb(i){return new SX(i)}function EX(i,t,e){const n=e.path.split("/");if(n.length>i.length||"full"===e.pathMatch&&(t.hasChildren()||n.length<i.length))return null;const r={};for(let s=0;s<n.length;s++){const o=n[s],l=i[s];if(o.startsWith(":"))r[o.substring(1)]=l;else if(o!==l.path)return null}return{consumed:i.slice(0,n.length),posParams:r}}function ev(i,t){const e=i?Object.keys(i):void 0,n=t?Object.keys(t):void 0;if(!e||!n||e.length!=n.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!A3(i[r],t[r]))return!1;return!0}function A3(i,t){if(Array.isArray(i)&&Array.isArray(t)){if(i.length!==t.length)return!1;const e=[...i].sort(),n=[...t].sort();return e.every((r,s)=>n[s]===r)}return i===t}function I3(i){return Array.prototype.concat.apply([],i)}function S3(i){return i.length>0?i[i.length-1]:null}function Kd(i,t){for(const e in i)i.hasOwnProperty(e)&&t(i[e],e)}function Zv(i){return QT(i)?i:Tx(i)?or(Promise.resolve(i)):Gr(i)}const DX={exact:function M3(i,t,e){if(!d0(i.segments,t.segments)||!ZI(i.segments,t.segments,e)||i.numberOfChildren!==t.numberOfChildren)return!1;for(const n in t.children)if(!i.children[n]||!M3(i.children[n],t.children[n],e))return!1;return!0},subset:D3},E3={exact:function LX(i,t){return ev(i,t)},subset:function PX(i,t){return Object.keys(t).length<=Object.keys(i).length&&Object.keys(t).every(e=>A3(i[e],t[e]))},ignored:()=>!0};function T3(i,t,e){return DX[e.paths](i.root,t.root,e.matrixParams)&&E3[e.queryParams](i.queryParams,t.queryParams)&&!("exact"===e.fragment&&i.fragment!==t.fragment)}function D3(i,t,e){return L3(i,t,t.segments,e)}function L3(i,t,e,n){if(i.segments.length>e.length){const r=i.segments.slice(0,e.length);return!(!d0(r,e)||t.hasChildren()||!ZI(r,e,n))}if(i.segments.length===e.length){if(!d0(i.segments,e)||!ZI(i.segments,e,n))return!1;for(const r in t.children)if(!i.children[r]||!D3(i.children[r],t.children[r],n))return!1;return!0}{const r=e.slice(0,i.segments.length),s=e.slice(i.segments.length);return!!(d0(i.segments,r)&&ZI(i.segments,r,n)&&i.children[Do])&&L3(i.children[Do],t,s,n)}}function ZI(i,t,e){return t.every((n,r)=>E3[e](i[r].parameters,n.parameters))}class u0{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Kb(this.queryParams)),this._queryParamMap}toString(){return OX.serialize(this)}}class No{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Kd(e,(n,r)=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return QI(this)}}class jx{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Kb(this.parameters)),this._parameterMap}toString(){return O3(this)}}function d0(i,t){return i.length===t.length&&i.every((e,n)=>e.path===t[n].path)}let P3=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Yi({token:i,factory:function(){return new yD},providedIn:"root"}),i})();class yD{parse(t){const e=new WX(t);return new u0(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${$x(t.root,!0)}`,n=function BX(i){const t=Object.keys(i).map(e=>{const n=i[e];return Array.isArray(n)?n.map(r=>`${JI(e)}=${JI(r)}`).join("&"):`${JI(e)}=${JI(n)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${n}${"string"==typeof t.fragment?`#${function FX(i){return encodeURI(i)}(t.fragment)}`:""}`}}const OX=new yD;function QI(i){return i.segments.map(t=>O3(t)).join("/")}function $x(i,t){if(!i.hasChildren())return QI(i);if(t){const e=i.children[Do]?$x(i.children[Do],!1):"",n=[];return Kd(i.children,(r,s)=>{s!==Do&&n.push(`${s}:${$x(r,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function kX(i,t){let e=[];return Kd(i.children,(n,r)=>{r===Do&&(e=e.concat(t(n,r)))}),Kd(i.children,(n,r)=>{r!==Do&&(e=e.concat(t(n,r)))}),e}(i,(n,r)=>r===Do?[$x(i.children[Do],!1)]:[`${r}:${$x(n,!1)}`]);return 1===Object.keys(i.children).length&&null!=i.children[Do]?`${QI(i)}/${e[0]}`:`${QI(i)}/(${e.join("//")})`}}function R3(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function JI(i){return R3(i).replace(/%3B/gi,";")}function _D(i){return R3(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function e1(i){return decodeURIComponent(i)}function k3(i){return e1(i.replace(/\+/g,"%20"))}function O3(i){return`${_D(i.path)}${function NX(i){return Object.keys(i).map(t=>`;${_D(t)}=${_D(i[t])}`).join("")}(i.parameters)}`}const zX=/^[^\/()?;=#]+/;function t1(i){const t=i.match(zX);return t?t[0]:""}const VX=/^[^=?&#]+/,HX=/^[^&#]+/;class WX{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new No([],{}):new No([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n[Do]=new No(t,e)),n}parseSegment(){const t=t1(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new gi(4009,!1);return this.capture(t),new jx(e1(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=t1(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const r=t1(this.remaining);r&&(n=r,this.capture(n))}t[e1(e)]=e1(n)}parseQueryParam(t){const e=function UX(i){const t=i.match(VX);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const o=function GX(i){const t=i.match(HX);return t?t[0]:""}(this.remaining);o&&(n=o,this.capture(n))}const r=k3(e),s=k3(n);if(t.hasOwnProperty(r)){let o=t[r];Array.isArray(o)||(o=[o],t[r]=o),o.push(s)}else t[r]=s}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=t1(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new gi(4010,!1);let s;n.indexOf(":")>-1?(s=n.slice(0,n.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=Do);const o=this.parseChildren();e[s]=1===Object.keys(o).length?o[Do]:new No([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new gi(4011,!1)}}function bD(i){return i.segments.length>0?new No([],{[Do]:i}):i}function n1(i){const t={};for(const n of Object.keys(i.children)){const s=n1(i.children[n]);(s.segments.length>0||s.hasChildren())&&(t[n]=s)}return function jX(i){if(1===i.numberOfChildren&&i.children[Do]){const t=i.children[Do];return new No(i.segments.concat(t.segments),t.children)}return i}(new No(i.segments,t))}function h0(i){return i instanceof u0}function XX(i,t,e,n,r){if(0===e.length)return Zb(t.root,t.root,t.root,n,r);const s=function B3(i){if("string"==typeof i[0]&&1===i.length&&"/"===i[0])return new N3(!0,0,i);let t=0,e=!1;const n=i.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const l={};return Kd(s.outlets,(u,p)=>{l[p]="string"==typeof u?u.split("/"):u}),[...r,{outlets:l}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((l,u)=>{0==u&&"."===l||(0==u&&""===l?e=!0:".."===l?t++:""!=l&&r.push(l))}),r):[...r,s]},[]);return new N3(e,t,n)}(e);return s.toRoot()?Zb(t.root,t.root,new No([],{}),n,r):function o(u){const p=function KX(i,t,e,n){if(i.isAbsolute)return new Qb(t.root,!0,0);if(-1===n)return new Qb(e,e===t.root,0);return function z3(i,t,e){let n=i,r=t,s=e;for(;s>r;){if(s-=r,n=n.parent,!n)throw new gi(4005,!1);r=n.segments.length}return new Qb(n,!1,r-s)}(e,n+(qx(i.commands[0])?0:1),i.numberOfDoubleDots)}(s,t,i.snapshot?._urlSegment,u),v=p.processChildren?Yx(p.segmentGroup,p.index,s.commands):xD(p.segmentGroup,p.index,s.commands);return Zb(t.root,p.segmentGroup,v,n,r)}(i.snapshot?._lastPathIndex)}function qx(i){return"object"==typeof i&&null!=i&&!i.outlets&&!i.segmentPath}function Xx(i){return"object"==typeof i&&null!=i&&i.outlets}function Zb(i,t,e,n,r){let o,s={};n&&Kd(n,(u,p)=>{s[p]=Array.isArray(u)?u.map(v=>`${v}`):`${u}`}),o=i===t?e:F3(i,t,e);const l=bD(n1(o));return new u0(l,s,r)}function F3(i,t,e){const n={};return Kd(i.children,(r,s)=>{n[s]=r===t?e:F3(r,t,e)}),new No(i.segments,n)}class N3{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&qx(n[0]))throw new gi(4003,!1);const r=n.find(Xx);if(r&&r!==S3(n))throw new gi(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Qb{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function xD(i,t,e){if(i||(i=new No([],{})),0===i.segments.length&&i.hasChildren())return Yx(i,t,e);const n=function QX(i,t,e){let n=0,r=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<i.segments.length;){if(n>=e.length)return s;const o=i.segments[r],l=e[n];if(Xx(l))break;const u=`${l}`,p=n<e.length-1?e[n+1]:null;if(r>0&&void 0===u)break;if(u&&p&&"object"==typeof p&&void 0===p.outlets){if(!U3(u,p,o))return s;n+=2}else{if(!U3(u,{},o))return s;n++}r++}return{match:!0,pathIndex:r,commandIndex:n}}(i,t,e),r=e.slice(n.commandIndex);if(n.match&&n.pathIndex<i.segments.length){const s=new No(i.segments.slice(0,n.pathIndex),{});return s.children[Do]=new No(i.segments.slice(n.pathIndex),i.children),Yx(s,0,r)}return n.match&&0===r.length?new No(i.segments,{}):n.match&&!i.hasChildren()?wD(i,t,e):n.match?Yx(i,0,r):wD(i,t,e)}function Yx(i,t,e){if(0===e.length)return new No(i.segments,{});{const n=function ZX(i){return Xx(i[0])?i[0].outlets:{[Do]:i}}(e),r={};return Kd(n,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=xD(i.children[o],t,s))}),Kd(i.children,(s,o)=>{void 0===n[o]&&(r[o]=s)}),new No(i.segments,r)}}function wD(i,t,e){const n=i.segments.slice(0,t);let r=0;for(;r<e.length;){const s=e[r];if(Xx(s)){const u=JX(s.outlets);return new No(n,u)}if(0===r&&qx(e[0])){n.push(new jx(i.segments[t].path,V3(e[0]))),r++;continue}const o=Xx(s)?s.outlets[Do]:`${s}`,l=r<e.length-1?e[r+1]:null;o&&l&&qx(l)?(n.push(new jx(o,V3(l))),r+=2):(n.push(new jx(o,{})),r++)}return new No(n,{})}function JX(i){const t={};return Kd(i,(e,n)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[n]=wD(new No([],{}),0,e))}),t}function V3(i){const t={};return Kd(i,(e,n)=>t[n]=`${e}`),t}function U3(i,t,e){return i==e.path&&ev(t,e.parameters)}class Qv{constructor(t,e){this.id=t,this.url=e}}class AD extends Qv{constructor(t,e,n="imperative",r=null){super(t,e),this.type=0,this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class f0 extends Qv{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class r1 extends Qv{constructor(t,e,n,r){super(t,e),this.reason=n,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class H3 extends Qv{constructor(t,e,n,r){super(t,e),this.error=n,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class eY extends Qv{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tY extends Qv{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nY extends Qv{constructor(t,e,n,r,s){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class iY extends Qv{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rY extends Qv{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sY{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class oY{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class aY{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lY{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cY{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class uY{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class G3{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class W3{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=ID(t,this._root);return e?e.children.map(n=>n.value):[]}firstChild(t){const e=ID(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=SD(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return SD(t,this._root).map(e=>e.value)}}function ID(i,t){if(i===t.value)return t;for(const e of t.children){const n=ID(i,e);if(n)return n}return null}function SD(i,t){if(i===t.value)return[t];for(const e of t.children){const n=SD(i,e);if(n.length)return n.unshift(t),n}return[]}class Jv{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Jb(i){const t={};return i&&i.children.forEach(e=>t[e.value.outlet]=e),t}class j3 extends W3{constructor(t,e){super(t),this.snapshot=e,ED(this,t)}toString(){return this.snapshot.toString()}}function $3(i,t){const e=function hY(i,t){const o=new s1([],{},{},"",{},Do,t,null,i.root,-1,{});return new X3("",new Jv(o,[]))}(i,t),n=new Bf([new jx("",{})]),r=new Bf({}),s=new Bf({}),o=new Bf({}),l=new Bf(""),u=new t_(n,r,o,l,s,Do,t,e.root);return u.snapshot=e.root,new j3(new Jv(u,[]),e)}class t_{constructor(t,e,n,r,s,o,l,u){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=o,this.component=l,this._futureSnapshot=u}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(be(t=>Kb(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(be(t=>Kb(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function q3(i,t="emptyOnly"){const e=i.pathFromRoot;let n=0;if("always"!==t)for(n=e.length-1;n>=1;){const r=e[n],s=e[n-1];if(r.routeConfig&&""===r.routeConfig.path)n--;else{if(s.component)break;n--}}return function fY(i){return i.reduce((t,e)=>({params:{...t.params,...e.params},data:{...t.data,...e.data},resolve:{...e.data,...t.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(n))}class s1{constructor(t,e,n,r,s,o,l,u,p,v,x,I){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=o,this.component=l,this.routeConfig=u,this._urlSegment=p,this._lastPathIndex=v,this._correctedLastPathIndex=I??v,this._resolve=x}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Kb(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Kb(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(n=>n.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class X3 extends W3{constructor(t,e){super(e),this.url=t,ED(this,e)}toString(){return Y3(this._root)}}function ED(i,t){t.value._routerState=i,t.children.forEach(e=>ED(i,e))}function Y3(i){const t=i.children.length>0?` { ${i.children.map(Y3).join(", ")} } `:"";return`${i.value}${t}`}function TD(i){if(i.snapshot){const t=i.snapshot,e=i._futureSnapshot;i.snapshot=e,ev(t.queryParams,e.queryParams)||i.queryParams.next(e.queryParams),t.fragment!==e.fragment&&i.fragment.next(e.fragment),ev(t.params,e.params)||i.params.next(e.params),function TX(i,t){if(i.length!==t.length)return!1;for(let e=0;e<i.length;++e)if(!ev(i[e],t[e]))return!1;return!0}(t.url,e.url)||i.url.next(e.url),ev(t.data,e.data)||i.data.next(e.data)}else i.snapshot=i._futureSnapshot,i.data.next(i._futureSnapshot.data)}function MD(i,t){const e=ev(i.params,t.params)&&function RX(i,t){return d0(i,t)&&i.every((e,n)=>ev(e.parameters,t[n].parameters))}(i.url,t.url);return e&&!(!i.parent!=!t.parent)&&(!i.parent||MD(i.parent,t.parent))}function Kx(i,t,e){if(e&&i.shouldReuseRoute(t.value,e.value.snapshot)){const n=e.value;n._futureSnapshot=t.value;const r=function gY(i,t,e){return t.children.map(n=>{for(const r of e.children)if(i.shouldReuseRoute(n.value,r.value.snapshot))return Kx(i,n,r);return Kx(i,n)})}(i,t,e);return new Jv(n,r)}{if(i.shouldAttach(t.value)){const s=i.retrieve(t.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(l=>Kx(i,l)),o}}const n=function mY(i){return new t_(new Bf(i.url),new Bf(i.params),new Bf(i.queryParams),new Bf(i.fragment),new Bf(i.data),i.outlet,i.component,i)}(t.value),r=t.children.map(s=>Kx(i,s));return new Jv(n,r)}}const DD="ngNavigationCancelingError";function K3(i,t){const{redirectTo:e,navigationBehaviorOptions:n}=h0(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=Z3(!1,0,t);return r.url=e,r.navigationBehaviorOptions=n,r}function Z3(i,t,e){const n=new Error("NavigationCancelingError: "+(i||""));return n[DD]=!0,n.cancellationCode=t,e&&(n.url=e),n}function Q3(i){return J3(i)&&h0(i.url)}function J3(i){return i&&i[DD]}class vY{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Zx,this.attachRef=null}}let Zx=(()=>{class i{constructor(){this.contexts=new Map}onChildOutletCreated(e,n){const r=this.getOrCreateContext(e);r.outlet=n,this.contexts.set(e,r)}onChildOutletDestroyed(e){const n=this.getContext(e);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let n=this.getContext(e);return n||(n=new vY,this.contexts.set(e,n)),n}getContext(e){return this.contexts.get(e)||null}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Yi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const o1=!1;let LD=(()=>{class i{constructor(e,n,r,s,o){this.parentContexts=e,this.location=n,this.changeDetector=s,this.environmentInjector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new qn,this.deactivateEvents=new qn,this.attachEvents=new qn,this.detachEvents=new qn,this.name=r||Do,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new gi(4012,o1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new gi(4012,o1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new gi(4012,o1);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,n){this.activated=e,this._activatedRoute=n,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,n){if(this.isActivated)throw new gi(4013,o1);this._activatedRoute=e;const r=this.location,o=e._futureSnapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,u=new yY(e,l,r.injector);if(n&&function _Y(i){return!!i.resolveComponentFactory}(n)){const p=n.resolveComponentFactory(o);this.activated=r.createComponent(p,r.length,u)}else this.activated=r.createComponent(o,{index:r.length,injector:u,environmentInjector:n??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return i.\u0275fac=function(e){return new(e||i)(Zt(Zx),Zt(lm),uh("name"),Zt(Zo),Zt(Ke))},i.\u0275dir=$r({type:i,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),i})();class yY{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===t_?this.route:t===Zx?this.childContexts:this.parent.get(t,e)}}let eB=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=Ir({type:i,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,n){1&e&&ii(0,"router-outlet")},dependencies:[LD],encapsulation:2}),i})();function tB(i,t){return i.providers&&!i._injector&&(i._injector=xI(i.providers,t,`Route: ${i.path}`)),i._injector??t}function RD(i){const t=i.children&&i.children.map(RD),e=t?{...i,children:t}:{...i};return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==Do&&(e.component=eB),e}function gg(i){return i.outlet||Do}function nB(i,t){const e=i.filter(n=>gg(n)===t);return e.push(...i.filter(n=>gg(n)!==t)),e}function iB(i){if(!i)return null;if(i.routeConfig?._injector)return i.routeConfig._injector;for(let t=i.parent;t;t=t.parent){const e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class AY{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),TD(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=Jb(e);t.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],n),delete r[o]}),Kd(r,(s,o)=>{this.deactivateRouteAndItsChildren(s,n)})}deactivateRoutes(t,e,n){const r=t.value,s=e?e.value:null;if(r===s)if(r.component){const o=n.getContext(r.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,n);else s&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,s=Jb(t);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(n&&n.outlet){const o=n.outlet.detach(),l=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:l})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,s=Jb(t);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=Jb(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],n),this.forwardEvent(new uY(s.value.snapshot))}),t.children.length&&this.forwardEvent(new lY(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,s=e?e.value:null;if(TD(r),r===s)if(r.component){const o=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const o=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const l=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(l.contexts),o.attachRef=l.componentRef,o.route=l.route.value,o.outlet&&o.outlet.attach(l.componentRef,l.route.value),TD(l.route.value),this.activateChildRoutes(t,null,o.children)}else{const l=iB(r.snapshot),u=l?.get(fi)??null;o.attachRef=null,o.route=r,o.resolver=u,o.injector=l,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(t,null,o.children)}}else this.activateChildRoutes(t,null,n)}}class rB{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class a1{constructor(t,e){this.component=t,this.route=e}}function IY(i,t,e){const n=i._root;return Qx(n,t?t._root:null,e,[n.value])}function l1(i,t,e){return(iB(t)??e).get(i)}function Qx(i,t,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=Jb(t);return i.children.forEach(o=>{(function EY(i,t,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=i.value,o=t?t.value:null,l=e?e.getContext(i.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function TY(i,t,e){if("function"==typeof e)return e(i,t);switch(e){case"pathParamsChange":return!d0(i.url,t.url);case"pathParamsOrQueryParamsChange":return!d0(i.url,t.url)||!ev(i.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!MD(i,t)||!ev(i.queryParams,t.queryParams);default:return!MD(i,t)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?r.canActivateChecks.push(new rB(n)):(s.data=o.data,s._resolvedData=o._resolvedData),Qx(i,t,s.component?l?l.children:null:e,n,r),u&&l&&l.outlet&&l.outlet.isActivated&&r.canDeactivateChecks.push(new a1(l.outlet.component,o))}else o&&Jx(t,l,r),r.canActivateChecks.push(new rB(n)),Qx(i,null,s.component?l?l.children:null:e,n,r)})(o,s[o.value.outlet],e,n.concat([o.value]),r),delete s[o.value.outlet]}),Kd(s,(o,l)=>Jx(o,e.getContext(l),r)),r}function Jx(i,t,e){const n=Jb(i),r=i.value;Kd(n,(s,o)=>{Jx(s,r.component?t?t.children.getContext(o):null:t,e)}),e.canDeactivateChecks.push(new a1(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}function ew(i){return"function"==typeof i}function kD(i){return i instanceof YI||"EmptyError"===i?.name}const c1=Symbol("INITIAL_VALUE");function eC(){return hm(i=>y3(i.map(t=>t.pipe(Yb(1),function CX(...i){const t=de(i);return Cn((e,n)=>{(t?hD(i,e,t):hD(i,e)).subscribe(n)})}(c1)))).pipe(be(t=>{for(const e of t)if(!0!==e){if(e===c1)return c1;if(!1===e||e instanceof u0)return e}return!0}),pg(t=>t!==c1),Yb(1)))}function sB(i){return function ft(...i){return gt(i)}(wh(t=>{if(h0(t))throw K3(0,t)}),be(t=>!0===t))}const OD={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function oB(i,t,e,n,r){const s=FD(i,t,e);return s.matched?function jY(i,t,e,n){const r=t.canMatch;return r&&0!==r.length?Gr(r.map(o=>{const l=i.get(o),u=function kY(i){return i&&ew(i.canMatch)}(l)?l.canMatch(t,e):l(t,e);return Zv(u)})).pipe(eC(),sB()):Gr(!0)}(n=tB(t,n),t,e).pipe(be(o=>!0===o?s:{...OD})):Gr(s)}function FD(i,t,e){if(""===t.path)return"full"===t.pathMatch&&(i.hasChildren()||e.length>0)?{...OD}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const r=(t.matcher||EX)(e,i,t);if(!r)return{...OD};const s={};Kd(r.posParams,(l,u)=>{s[u]=l.path});const o=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function u1(i,t,e,n,r="corrected"){if(e.length>0&&function XY(i,t,e){return e.some(n=>d1(i,t,n)&&gg(n)!==Do)}(i,e,n)){const o=new No(t,function qY(i,t,e,n){const r={};r[Do]=n,n._sourceSegment=i,n._segmentIndexShift=t.length;for(const s of e)if(""===s.path&&gg(s)!==Do){const o=new No([],{});o._sourceSegment=i,o._segmentIndexShift=t.length,r[gg(s)]=o}return r}(i,t,n,new No(e,i.children)));return o._sourceSegment=i,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:[]}}if(0===e.length&&function YY(i,t,e){return e.some(n=>d1(i,t,n))}(i,e,n)){const o=new No(i.segments,function $Y(i,t,e,n,r,s){const o={};for(const l of n)if(d1(i,e,l)&&!r[gg(l)]){const u=new No([],{});u._sourceSegment=i,u._segmentIndexShift="legacy"===s?i.segments.length:t.length,o[gg(l)]=u}return{...r,...o}}(i,t,e,n,i.children,r));return o._sourceSegment=i,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:e}}const s=new No(i.segments,i.children);return s._sourceSegment=i,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:e}}function d1(i,t,e){return(!(i.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function aB(i,t,e,n){return!!(gg(i)===n||n!==Do&&d1(t,e,i))&&("**"===i.path||FD(t,i,e).matched)}function lB(i,t,e){return 0===t.length&&!i.children[e]}const h1=!1;class f1{constructor(t){this.segmentGroup=t||null}}class cB{constructor(t){this.urlTree=t}}function tw(i){return Xb(new f1(i))}function uB(i){return Xb(new cB(i))}class JY{constructor(t,e,n,r,s){this.injector=t,this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const t=u1(this.urlTree.root,[],[],this.config).segmentGroup,e=new No(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,e,Do).pipe(be(s=>this.createUrlTree(n1(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Jm(s=>{if(s instanceof cB)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof f1?this.noMatchError(s):s}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,Do).pipe(be(r=>this.createUrlTree(n1(r),t.queryParams,t.fragment))).pipe(Jm(r=>{throw r instanceof f1?this.noMatchError(r):r}))}noMatchError(t){return new gi(4002,h1)}createUrlTree(t,e,n){const r=bD(t);return new u0(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(be(s=>new No([],s))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const s of Object.keys(n.children))"primary"===s?r.unshift(s):r.push(s);return or(r).pipe(Yv(s=>{const o=n.children[s],l=nB(e,s);return this.expandSegmentGroup(t,l,o,s).pipe(be(u=>({segment:u,outlet:s})))}),pD((s,o)=>(s[o.outlet]=o.segment,s),{}),w3())}expandSegment(t,e,n,r,s,o){return or(n).pipe(Yv(l=>this.expandSegmentAgainstRoute(t,e,n,l,r,s,o).pipe(Jm(p=>{if(p instanceof f1)return Gr(null);throw p}))),e_(l=>!!l),Jm((l,u)=>{if(kD(l))return lB(e,r,s)?Gr(new No([],{})):tw(e);throw l}))}expandSegmentAgainstRoute(t,e,n,r,s,o,l){return aB(r,e,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,s,o):l&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,s,o):tw(e):tw(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const s=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?uB(s):this.lineralizeSegments(n,s).pipe(fl(o=>{const l=new No(o,{});return this.expandSegment(t,l,e,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,s,o){const{matched:l,consumedSegments:u,remainingSegments:p,positionalParamSegments:v}=FD(e,r,s);if(!l)return tw(e);const x=this.applyRedirectCommands(u,r.redirectTo,v);return r.redirectTo.startsWith("/")?uB(x):this.lineralizeSegments(r,x).pipe(fl(I=>this.expandSegment(t,e,n,I.concat(p),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,s){return"**"===n.path?(t=tB(n,t),n.loadChildren?(n._loadedRoutes?Gr({routes:n._loadedRoutes,injector:n._loadedInjector}):this.configLoader.loadChildren(t,n)).pipe(be(l=>(n._loadedRoutes=l.routes,n._loadedInjector=l.injector,new No(r,{})))):Gr(new No(r,{}))):oB(e,n,r,t).pipe(hm(({matched:o,consumedSegments:l,remainingSegments:u})=>o?this.getChildConfig(t=n._injector??t,n,r).pipe(fl(v=>{const x=v.injector??t,I=v.routes,{segmentGroup:T,slicedSegments:F}=u1(e,l,u,I),j=new No(T.segments,T.children);if(0===F.length&&j.hasChildren())return this.expandChildren(x,I,j).pipe(be(ye=>new No(l,ye)));if(0===I.length&&0===F.length)return Gr(new No(l,{}));const X=gg(n)===s;return this.expandSegment(x,j,I,F,X?Do:s,!0).pipe(be(we=>new No(l.concat(we.segments),we.children)))})):tw(e)))}getChildConfig(t,e,n){return e.children?Gr({routes:e.children,injector:t}):e.loadChildren?void 0!==e._loadedRoutes?Gr({routes:e._loadedRoutes,injector:e._loadedInjector}):function WY(i,t,e,n){const r=t.canLoad;return void 0===r||0===r.length?Gr(!0):Gr(r.map(o=>{const l=i.get(o),u=function DY(i){return i&&ew(i.canLoad)}(l)?l.canLoad(t,e):l(t,e);return Zv(u)})).pipe(eC(),sB())}(t,e,n).pipe(fl(r=>r?this.configLoader.loadChildren(t,e).pipe(wh(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):function ZY(i){return Xb(Z3(h1,3))}())):Gr({routes:[],injector:t})}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Gr(n);if(r.numberOfChildren>1||!r.children[Do])return Xb(new gi(4e3,h1));r=r.children[Do]}}applyRedirectCommands(t,e,n){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreateUrlTree(t,e,n,r){const s=this.createSegmentGroup(t,e.root,n,r);return new u0(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return Kd(t,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const l=r.substring(1);n[s]=e[l]}else n[s]=r}),n}createSegmentGroup(t,e,n,r){const s=this.createSegments(t,e.segments,n,r);let o={};return Kd(e.children,(l,u)=>{o[u]=this.createSegmentGroup(t,l,n,r)}),new No(s,o)}createSegments(t,e,n,r){return e.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,r):this.findOrReturn(s,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new gi(4001,h1);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}class tK{}class rK{constructor(t,e,n,r,s,o,l,u){this.injector=t,this.rootComponentType=e,this.config=n,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=l,this.urlSerializer=u}recognize(){const t=u1(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,Do).pipe(be(e=>{if(null===e)return null;const n=new s1([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Do,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Jv(n,e),s=new X3(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(t){const e=t.value,n=q3(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.processChildren(t,e,n):this.processSegment(t,e,n,n.segments,r)}processChildren(t,e,n){return or(Object.keys(n.children)).pipe(Yv(r=>{const s=n.children[r],o=nB(e,r);return this.processSegmentGroup(t,o,s,r)}),pD((r,s)=>r&&s?(r.push(...s),r):null),function AX(i,t=!1){return Cn((e,n)=>{let r=0;e.subscribe(yn(n,s=>{const o=i(s,r++);(o||t)&&n.next(s),!o&&n.complete()}))})}(r=>null!==r),KI(null),w3(),be(r=>{if(null===r)return null;const s=dB(r);return function sK(i){i.sort((t,e)=>t.value.outlet===Do?-1:e.value.outlet===Do?1:t.value.outlet.localeCompare(e.value.outlet))}(s),s}))}processSegment(t,e,n,r,s){return or(e).pipe(Yv(o=>this.processSegmentAgainstRoute(o._injector??t,o,n,r,s)),e_(o=>!!o),Jm(o=>{if(kD(o))return lB(n,r,s)?Gr([]):Gr(null);throw o}))}processSegmentAgainstRoute(t,e,n,r,s){if(e.redirectTo||!aB(e,n,r,s))return Gr(null);let o;if("**"===e.path){const l=r.length>0?S3(r).parameters:{},u=fB(n)+r.length;o=Gr({snapshot:new s1(r,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,gB(e),gg(e),e.component??e._loadedComponent??null,e,hB(n),u,mB(e),u),consumedSegments:[],remainingSegments:[]})}else o=oB(n,e,r,t).pipe(be(({matched:l,consumedSegments:u,remainingSegments:p,parameters:v})=>{if(!l)return null;const x=fB(n)+u.length;return{snapshot:new s1(u,v,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,gB(e),gg(e),e.component??e._loadedComponent??null,e,hB(n),x,mB(e),x),consumedSegments:u,remainingSegments:p}}));return o.pipe(hm(l=>{if(null===l)return Gr(null);const{snapshot:u,consumedSegments:p,remainingSegments:v}=l;t=e._injector??t;const x=e._loadedInjector??t,I=function oK(i){return i.children?i.children:i.loadChildren?i._loadedRoutes:[]}(e),{segmentGroup:T,slicedSegments:F}=u1(n,p,v,I.filter(X=>void 0===X.redirectTo),this.relativeLinkResolution);if(0===F.length&&T.hasChildren())return this.processChildren(x,I,T).pipe(be(X=>null===X?null:[new Jv(u,X)]));if(0===I.length&&0===F.length)return Gr([new Jv(u,[])]);const j=gg(e)===s;return this.processSegment(x,I,T,F,j?Do:s).pipe(be(X=>null===X?null:[new Jv(u,X)]))}))}}function aK(i){const t=i.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function dB(i){const t=[],e=new Set;for(const n of i){if(!aK(n)){t.push(n);continue}const r=t.find(s=>n.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...n.children),e.add(r)):t.push(n)}for(const n of e){const r=dB(n.children);t.push(new Jv(n.value,r))}return t.filter(n=>!e.has(n))}function hB(i){let t=i;for(;t._sourceSegment;)t=t._sourceSegment;return t}function fB(i){let t=i,e=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift??0;return e-1}function gB(i){return i.data||{}}function mB(i){return i.resolve||{}}const ND=Symbol("RouteTitle");function vB(i){return"string"==typeof i.title||null===i.title}function BD(i){return hm(t=>{const e=i(t);return e?or(e).pipe(be(()=>t)):Gr(t)})}let yB=(()=>{class i{buildTitle(e){let n,r=e.root;for(;void 0!==r;)n=this.getResolvedTitleForRoute(r)??n,r=r.children.find(s=>s.outlet===Do);return n}getResolvedTitleForRoute(e){return e.data[ND]}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Yi({token:i,factory:function(){return ha(_B)},providedIn:"root"}),i})(),_B=(()=>{class i extends yB{constructor(e){super(),this.title=e}updateTitle(e){const n=this.buildTitle(e);void 0!==n&&this.title.setTitle(n)}}return i.\u0275fac=function(e){return new(e||i)(jn(iD))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class gK{}class vK extends class mK{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const zD=new Ji("",{providedIn:"root",factory:()=>({})}),VD=new Ji("ROUTES");let UD=(()=>{class i{constructor(e,n){this.injector=e,this.compiler=n,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return Gr(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const n=Zv(e.loadComponent()).pipe(wh(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),mD(()=>{this.componentLoaders.delete(e)})),r=new C3(n,()=>new nn).pipe(fD());return this.componentLoaders.set(e,r),r}loadChildren(e,n){if(this.childrenLoaders.get(n))return this.childrenLoaders.get(n);if(n._loadedRoutes)return Gr({routes:n._loadedRoutes,injector:n._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(n);const s=this.loadModuleFactoryOrRoutes(n.loadChildren).pipe(be(l=>{this.onLoadEndListener&&this.onLoadEndListener(n);let u,p,v=!1;Array.isArray(l)?p=l:(u=l.create(e).injector,p=I3(u.get(VD,[],ns.Self|ns.Optional)));return{routes:p.map(RD),injector:u}}),mD(()=>{this.childrenLoaders.delete(n)})),o=new C3(s,()=>new nn).pipe(fD());return this.childrenLoaders.set(n,o),o}loadModuleFactoryOrRoutes(e){return Zv(e()).pipe(fl(n=>n instanceof $O||Array.isArray(n)?Gr(n):or(this.compiler.compileModuleAsync(n))))}}return i.\u0275fac=function(e){return new(e||i)(jn(xu),jn(xM))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class _K{}class bK{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function CK(i){throw i}function xK(i,t,e){return t.parse("/")}const wK={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},AK={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function CB(){const i=ha(P3),t=ha(Zx),e=ha(NM),n=ha(xu),r=ha(xM),s=ha(VD,{optional:!0})??[],o=ha(zD,{optional:!0})??{},l=ha(_B),u=ha(yB,{optional:!0}),p=ha(_K,{optional:!0}),v=ha(gK,{optional:!0}),x=new Zd(null,i,t,e,n,r,I3(s));return p&&(x.urlHandlingStrategy=p),v&&(x.routeReuseStrategy=v),x.titleStrategy=u??l,function IK(i,t){i.errorHandler&&(t.errorHandler=i.errorHandler),i.malformedUriErrorHandler&&(t.malformedUriErrorHandler=i.malformedUriErrorHandler),i.onSameUrlNavigation&&(t.onSameUrlNavigation=i.onSameUrlNavigation),i.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=i.paramsInheritanceStrategy),i.relativeLinkResolution&&(t.relativeLinkResolution=i.relativeLinkResolution),i.urlUpdateStrategy&&(t.urlUpdateStrategy=i.urlUpdateStrategy),i.canceledNavigationResolution&&(t.canceledNavigationResolution=i.canceledNavigationResolution)}(o,x),x}let Zd=(()=>{class i{constructor(e,n,r,s,o,l,u){this.rootComponentType=e,this.urlSerializer=n,this.rootContexts=r,this.location=s,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new nn,this.errorHandler=CK,this.malformedUriErrorHandler=xK,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Gr(void 0),this.urlHandlingStrategy=new bK,this.routeReuseStrategy=new vK,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=o.get(UD),this.configLoader.onLoadEndListener=I=>this.triggerEvent(new oY(I)),this.configLoader.onLoadStartListener=I=>this.triggerEvent(new sY(I)),this.ngModule=o.get(o0),this.console=o.get(p7);const x=o.get(Ko);this.isNgZoneEnabled=x instanceof Ko&&Ko.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=function MX(){return new u0(new No([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=$3(this.currentUrlTree,this.rootComponentType),this.transitions=new Bf({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(e){const n=this.events;return e.pipe(pg(r=>0!==r.id),be(r=>({...r,extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),hm(r=>{let s=!1,o=!1;return Gr(r).pipe(wh(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),hm(l=>{const u=this.browserUrlTree.toString(),p=!this.navigated||l.extractedUrl.toString()!==u||u!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||p)&&this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return xB(l.source)&&(this.browserUrlTree=l.extractedUrl),Gr(l).pipe(hm(x=>{const I=this.transitions.getValue();return n.next(new AD(x.id,this.serializeUrl(x.extractedUrl),x.source,x.restoredState)),I!==this.transitions.getValue()?tl:Promise.resolve(x)}),function eK(i,t,e,n){return hm(r=>function QY(i,t,e,n,r){return new JY(i,t,e,n,r).apply()}(i,t,e,r.extractedUrl,n).pipe(be(s=>({...r,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),wh(x=>{this.currentNavigation={...this.currentNavigation,finalUrl:x.urlAfterRedirects},r.urlAfterRedirects=x.urlAfterRedirects}),function cK(i,t,e,n,r,s){return fl(o=>function iK(i,t,e,n,r,s,o="emptyOnly",l="legacy"){return new rK(i,t,e,n,r,o,l,s).recognize().pipe(hm(u=>null===u?function nK(i){return new bt(t=>t.error(i))}(new tK):Gr(u)))}(i,t,e,o.urlAfterRedirects,n.serialize(o.urlAfterRedirects),n,r,s).pipe(be(l=>({...o,targetSnapshot:l}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),wh(x=>{if(r.targetSnapshot=x.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!x.extras.skipLocationChange){const T=this.urlHandlingStrategy.merge(x.urlAfterRedirects,x.rawUrl);this.setBrowserUrl(T,x)}this.browserUrlTree=x.urlAfterRedirects}const I=new eY(x.id,this.serializeUrl(x.extractedUrl),this.serializeUrl(x.urlAfterRedirects),x.targetSnapshot);n.next(I)}));if(p&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:I,extractedUrl:T,source:F,restoredState:j,extras:X}=l,ce=new AD(I,this.serializeUrl(T),F,j);n.next(ce);const we=$3(T,this.rootComponentType).snapshot;return Gr(r={...l,targetSnapshot:we,urlAfterRedirects:T,extras:{...X,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=l.rawUrl,l.resolve(null),tl}),wh(l=>{const u=new tY(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(u)}),be(l=>r={...l,guards:IY(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function FY(i,t){return fl(e=>{const{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=e;return 0===o.length&&0===s.length?Gr({...e,guardsResult:!0}):function NY(i,t,e,n){return or(i).pipe(fl(r=>function GY(i,t,e,n,r){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?Gr(s.map(l=>{const u=l1(l,t,r);return Zv(function RY(i){return i&&ew(i.canDeactivate)}(u)?u.canDeactivate(i,t,e,n):u(i,t,e,n)).pipe(e_())})).pipe(eC()):Gr(!0)}(r.component,r.route,e,t,n)),e_(r=>!0!==r,!0))}(o,n,r,i).pipe(fl(l=>l&&function MY(i){return"boolean"==typeof i}(l)?function BY(i,t,e,n){return or(t).pipe(Yv(r=>hD(function VY(i,t){return null!==i&&t&&t(new aY(i)),Gr(!0)}(r.route.parent,n),function zY(i,t){return null!==i&&t&&t(new cY(i)),Gr(!0)}(r.route,n),function HY(i,t,e){const n=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(o=>function SY(i){const t=i.routeConfig?i.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:i,guards:t}:null}(o)).filter(o=>null!==o).map(o=>b3(()=>Gr(o.guards.map(u=>{const p=l1(u,o.node,e);return Zv(function PY(i){return i&&ew(i.canActivateChild)}(p)?p.canActivateChild(n,i):p(n,i)).pipe(e_())})).pipe(eC())));return Gr(s).pipe(eC())}(i,r.path,e),function UY(i,t,e){const n=t.routeConfig?t.routeConfig.canActivate:null;if(!n||0===n.length)return Gr(!0);const r=n.map(s=>b3(()=>{const o=l1(s,t,e);return Zv(function LY(i){return i&&ew(i.canActivate)}(o)?o.canActivate(t,i):o(t,i)).pipe(e_())}));return Gr(r).pipe(eC())}(i,r.route,e))),e_(r=>!0!==r,!0))}(n,s,i,t):Gr(l)),be(l=>({...e,guardsResult:l})))})}(this.ngModule.injector,l=>this.triggerEvent(l)),wh(l=>{if(r.guardsResult=l.guardsResult,h0(l.guardsResult))throw K3(0,l.guardsResult);const u=new nY(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.triggerEvent(u)}),pg(l=>!!l.guardsResult||(this.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),BD(l=>{if(l.guards.canActivateChecks.length)return Gr(l).pipe(wh(u=>{const p=new iY(u.id,this.serializeUrl(u.extractedUrl),this.serializeUrl(u.urlAfterRedirects),u.targetSnapshot);this.triggerEvent(p)}),hm(u=>{let p=!1;return Gr(u).pipe(function uK(i,t){return fl(e=>{const{targetSnapshot:n,guards:{canActivateChecks:r}}=e;if(!r.length)return Gr(e);let s=0;return or(r).pipe(Yv(o=>function dK(i,t,e,n){const r=i.routeConfig,s=i._resolve;return void 0!==r?.title&&!vB(r)&&(s[ND]=r.title),function hK(i,t,e,n){const r=function fK(i){return[...Object.keys(i),...Object.getOwnPropertySymbols(i)]}(i);if(0===r.length)return Gr({});const s={};return or(r).pipe(fl(o=>function pK(i,t,e,n){const r=l1(i,t,n);return Zv(r.resolve?r.resolve(t,e):r(t,e))}(i[o],t,e,n).pipe(e_(),wh(l=>{s[o]=l}))),gD(1),function IX(i){return be(()=>i)}(s),Jm(o=>kD(o)?tl:Xb(o)))}(s,i,t,n).pipe(be(o=>(i._resolvedData=o,i.data=q3(i,e).resolve,r&&vB(r)&&(i.data[ND]=r.title),null)))}(o.route,n,i,t)),wh(()=>s++),gD(1),fl(o=>s===r.length?Gr(e):tl))})}(this.paramsInheritanceStrategy,this.ngModule.injector),wh({next:()=>p=!0,complete:()=>{p||(this.restoreHistory(u),this.cancelNavigationTransition(u,"",2))}}))}),wh(u=>{const p=new rY(u.id,this.serializeUrl(u.extractedUrl),this.serializeUrl(u.urlAfterRedirects),u.targetSnapshot);this.triggerEvent(p)}))}),BD(l=>{const u=p=>{const v=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&v.push(this.configLoader.loadComponent(p.routeConfig).pipe(wh(x=>{p.component=x}),be(()=>{})));for(const x of p.children)v.push(...u(x));return v};return y3(u(l.targetSnapshot.root)).pipe(KI(),Yb(1))}),BD(()=>this.afterPreactivation()),be(l=>{const u=function pY(i,t,e){const n=Kx(i,t._root,e?e._root:void 0);return new j3(n,t)}(this.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:u}}),wh(l=>{this.currentUrlTree=l.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),this.routerState=l.targetRouterState,"deferred"===this.urlUpdateStrategy&&(l.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,l),this.browserUrlTree=l.urlAfterRedirects)}),((i,t,e)=>be(n=>(new AY(t,n.targetRouterState,n.currentRouterState,e).activate(i),n)))(this.rootContexts,this.routeReuseStrategy,l=>this.triggerEvent(l)),wh({next(){s=!0},complete(){s=!0}}),mD(()=>{s||o||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Jm(l=>{if(o=!0,J3(l)){Q3(l)||(this.navigated=!0,this.restoreHistory(r,!0));const u=new r1(r.id,this.serializeUrl(r.extractedUrl),l.message,l.cancellationCode);if(n.next(u),Q3(l)){const p=this.urlHandlingStrategy.merge(l.url,this.rawUrlTree),v={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||xB(r.source)};this.scheduleNavigation(p,"imperative",null,v,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{this.restoreHistory(r,!0);const u=new H3(r.id,this.serializeUrl(r.extractedUrl),l,r.targetSnapshot??void 0);n.next(u);try{r.resolve(this.errorHandler(l))}catch(p){r.reject(p)}}return tl}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next({...this.transitions.value,...e})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const n="popstate"===e.type?"popstate":"hashchange";"popstate"===n&&setTimeout(()=>{const r={replaceUrl:!0},s=e.state?.navigationId?e.state:null;if(s){const l={...s};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(r.state=l)}const o=this.parseUrl(e.url);this.scheduleNavigation(o,n,s,r)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){this.config=e.map(RD),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,n={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:l,preserveFragment:u}=n,p=r||this.routerState.root,v=u?this.currentUrlTree.fragment:o;let x=null;switch(l){case"merge":x={...this.currentUrlTree.queryParams,...s};break;case"preserve":x=this.currentUrlTree.queryParams;break;default:x=s||null}return null!==x&&(x=this.removeEmptyProps(x)),XX(p,this.currentUrlTree,e,x,v??null)}navigateByUrl(e,n={skipLocationChange:!1}){const r=h0(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,n)}navigate(e,n={skipLocationChange:!1}){return function SK(i){for(let t=0;t<i.length;t++){if(null==i[t])throw new gi(4008,false)}}(e),this.navigateByUrl(this.createUrlTree(e,n),n)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let n;try{n=this.urlSerializer.parse(e)}catch(r){n=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return n}isActive(e,n){let r;if(r=!0===n?{...wK}:!1===n?{...AK}:n,h0(e))return T3(this.currentUrlTree,e,r);const s=this.parseUrl(e);return T3(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.keys(e).reduce((n,r)=>{const s=e[r];return null!=s&&(n[r]=s),n},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new f0(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,n,r,s,o){if(this.disposed)return Promise.resolve(!1);let l,u,p;o?(l=o.resolve,u=o.reject,p=o.promise):p=new Promise((I,T)=>{l=I,u=T});const v=++this.navigationId;let x;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),x=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):x=0,this.setTransition({id:v,targetPageId:x,source:n,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:s,resolve:l,reject:u,promise:p,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),p.catch(I=>Promise.reject(I))}setBrowserUrl(e,n){const r=this.urlSerializer.serialize(e),s={...n.extras.state,...this.generateNgRouterState(n.id,n.targetPageId)};this.location.isCurrentPathEqualTo(r)||n.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(e,n=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===r?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===r&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(n&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,n,r){const s=new r1(e.id,this.serializeUrl(e.extractedUrl),n,r);this.triggerEvent(s),e.resolve(!1)}generateNgRouterState(e,n){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:n}:{navigationId:e}}}return i.\u0275fac=function(e){vx()},i.\u0275prov=Yi({token:i,factory:function(){return CB()},providedIn:"root"}),i})();function xB(i){return"imperative"!==i}let HD=(()=>{class i{constructor(e,n,r,s,o){this.router=e,this.route=n,this.tabIndexAttribute=r,this.renderer=s,this.el=o,this.commands=null,this.onChanges=new nn,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(e){if(null!=this.tabIndexAttribute)return;const n=this.renderer,r=this.el.nativeElement;null!==e?n.setAttribute(r,"tabindex",e):n.removeAttribute(r,"tabindex")}ngOnChanges(e){this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const e={skipLocationChange:$v(this.skipLocationChange),replaceUrl:$v(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,e),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:$v(this.preserveFragment)})}}return i.\u0275fac=function(e){return new(e||i)(Zt(Zd),Zt(t_),uh("tabindex"),Zt(h),Zt(Xn))},i.\u0275dir=$r({type:i,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,n){1&e&&fn("click",function(){return n.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[_a]}),i})(),tC=(()=>{class i{constructor(e,n,r){this.router=e,this.route=n,this.locationStrategy=r,this.commands=null,this.href=null,this.onChanges=new nn,this.subscription=e.events.subscribe(s=>{s instanceof f0&&this.updateTargetUrlAndHref()})}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:null}ngOnChanges(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,n,r,s,o){if(0!==e||n||r||s||o||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const l={skipLocationChange:$v(this.skipLocationChange),replaceUrl:$v(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,l),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:$v(this.preserveFragment)})}}return i.\u0275fac=function(e){return new(e||i)(Zt(Zd),Zt(t_),Zt(l0))},i.\u0275dir=$r({type:i,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,n){1&e&&fn("click",function(s){return n.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&e&&mr("target",n.target)("href",n.href,qd)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[_a]}),i})(),GD=(()=>{class i{constructor(e,n,r,s,o,l){this.router=e,this.element=n,this.renderer=r,this.cdr=s,this.link=o,this.linkWithHref=l,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new qn,this.routerEventsSubscription=e.events.subscribe(u=>{u instanceof f0&&this.update()})}ngAfterContentInit(){Gr(this.links.changes,this.linksWithHrefs.changes,Gr(null)).pipe(Ac()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const e=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(n=>!!n).map(n=>n.onChanges);this.linkInputChangesSubscription=or(e).pipe(Ac()).subscribe(n=>{this.isActive!==this.isLinkActive(this.router)(n)&&this.update()})}set routerLinkActive(e){const n=Array.isArray(e)?e:e.split(" ");this.classes=n.filter(r=>!!r)}ngOnChanges(e){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const e=this.hasActiveLinks();this.isActive!==e&&(this.isActive=e,this.cdr.markForCheck(),this.classes.forEach(n=>{e?this.renderer.addClass(this.element.nativeElement,n):this.renderer.removeClass(this.element.nativeElement,n)}),e&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(e))})}isLinkActive(e){const n=function EK(i){return!!i.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return r=>!!r.urlTree&&e.isActive(r.urlTree,n)}hasActiveLinks(){const e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.linkWithHref&&e(this.linkWithHref)||this.links.some(e)||this.linksWithHrefs.some(e)}}return i.\u0275fac=function(e){return new(e||i)(Zt(Zd),Zt(Xn),Zt(h),Zt(Zo),Zt(HD,8),Zt(tC,8))},i.\u0275dir=$r({type:i,selectors:[["","routerLinkActive",""]],contentQueries:function(e,n,r){if(1&e&&(cl(r,HD,5),cl(r,tC,5)),2&e){let s;vr(s=yr())&&(n.links=s),vr(s=yr())&&(n.linksWithHrefs=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[_a]}),i})();class wB{}let AB=(()=>{class i{constructor(e,n,r,s,o){this.router=e,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(pg(e=>e instanceof f0),Yv(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,n){const r=[];for(const s of n){s.providers&&!s._injector&&(s._injector=xI(s.providers,e,`Route: ${s.path}`));const o=s._injector??e,l=s._loadedInjector??o;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?r.push(this.preloadConfig(o,s)):(s.children||s._loadedRoutes)&&r.push(this.processRoutes(l,s.children??s._loadedRoutes))}return or(r).pipe(Ac())}preloadConfig(e,n){return this.preloadingStrategy.preload(n,()=>{let r;r=n.loadChildren&&void 0===n.canLoad?this.loader.loadChildren(e,n):Gr(null);const s=r.pipe(fl(o=>null===o?Gr(void 0):(n._loadedRoutes=o.routes,n._loadedInjector=o.injector,this.processRoutes(o.injector??e,o.routes))));return n.loadComponent&&!n._loadedComponent?or([s,this.loader.loadComponent(n)]).pipe(Ac()):s})}}return i.\u0275fac=function(e){return new(e||i)(jn(Zd),jn(xM),jn(Ke),jn(wB),jn(UD))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})();const IB=new Ji("");let TK=(()=>{class i{constructor(e,n,r={}){this.router=e,this.viewportScroller=n,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof AD?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof f0&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof G3&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,n){this.router.triggerEvent(new G3(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,n))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return i.\u0275fac=function(e){vx()},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})();const SB=new Ji("ROUTER_FORROOT_GUARD"),EB=new Ji(""),MK=[NM,{provide:P3,useClass:yD},{provide:Zd,useFactory:CB},Zx,{provide:t_,useFactory:function DK(i){return i.routerState.root},deps:[Zd]},UD];function LK(){return new WF("Router",Zd)}let i_=(()=>{class i{constructor(e){}static forRoot(e,n){return{ngModule:i,providers:[MK,[],TB(e),{provide:SB,useFactory:OK,deps:[[Zd,new Tl,new pd]]},{provide:zD,useValue:n||{}},n?.useHash?{provide:l0,useClass:i$}:{provide:l0,useClass:gN},{provide:IB,useFactory:()=>{const i=ha(Zd),t=ha(vq),e=ha(zD);return e.scrollOffset&&t.setOffset(e.scrollOffset),new TK(i,t,e)}},n?.preloadingStrategy?HK(n.preloadingStrategy):[],{provide:WF,multi:!0,useFactory:LK},n?.initialNavigation?NK(n):[],[{provide:MB,useFactory:FK},{provide:FF,multi:!0,useExisting:MB}]]}}static forChild(e){return{ngModule:i,providers:[TB(e)]}}}return i.\u0275fac=function(e){return new(e||i)(jn(SB,8))},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({}),i})();function OK(i){return"guarded"}function TB(i){return[{provide:VD,multi:!0,useValue:i}]}function FK(){const i=ha(xu);return t=>{const e=i.get(zx);if(t!==e.components[0])return;const n=i.get(Zd),r=i.get(DB);1===i.get(WD)&&n.initialNavigation(),i.get(EB,null,ns.Optional)?.setUpPreloading(),i.get(IB,null,ns.Optional)?.init(),n.resetRootComponentType(e.componentTypes[0]),r.next(),r.complete()}}const MB=new Ji("");function NK(i){return["disabled"===i.initialNavigation?[{provide:Nx,multi:!0,useFactory:()=>{const i=ha(Zd);return()=>{i.setUpLocationChangeListener()}}},{provide:WD,useValue:2}]:[],"enabledBlocking"===i.initialNavigation?[{provide:WD,useValue:0},{provide:Nx,multi:!0,deps:[xu],useFactory:i=>{const t=i.get(t$,Promise.resolve(null));let e=!1;return()=>t.then(()=>new Promise(r=>{const s=i.get(Zd),o=i.get(DB);(function n(r){i.get(Zd).events.pipe(pg(o=>o instanceof f0||o instanceof r1||o instanceof H3),be(o=>o instanceof f0||o instanceof r1&&(0===o.code||1===o.code)&&null),pg(o=>null!==o),Yb(1)).subscribe(()=>{r()})})(()=>{r(!0),e=!0}),s.afterPreactivation=()=>(r(!0),e||o.closed?Gr(void 0):o),s.initialNavigation()}))}}]:[]]}const DB=new Ji("",{factory:()=>new nn}),WD=new Ji("",{providedIn:"root",factory:()=>1});function HK(i){return[AB,{provide:EB,useExisting:AB},{provide:wB,useExisting:i}]}var _r=V(7489);class fr{static equals(t,e,n){return n?this.resolveFieldData(t,n)===this.resolveFieldData(e,n):this.equalsByValue(t,e)}static equalsByValue(t,e){if(t===e)return!0;if(t&&e&&"object"==typeof t&&"object"==typeof e){var s,o,l,n=Array.isArray(t),r=Array.isArray(e);if(n&&r){if((o=t.length)!=e.length)return!1;for(s=o;0!=s--;)if(!this.equalsByValue(t[s],e[s]))return!1;return!0}if(n!=r)return!1;var u=t instanceof Date,p=e instanceof Date;if(u!=p)return!1;if(u&&p)return t.getTime()==e.getTime();var v=t instanceof RegExp,x=e instanceof RegExp;if(v!=x)return!1;if(v&&x)return t.toString()==e.toString();var I=Object.keys(t);if((o=I.length)!==Object.keys(e).length)return!1;for(s=o;0!=s--;)if(!Object.prototype.hasOwnProperty.call(e,I[s]))return!1;for(s=o;0!=s--;)if(!this.equalsByValue(t[l=I[s]],e[l]))return!1;return!0}return t!=t&&e!=e}static resolveFieldData(t,e){if(t&&e){if(this.isFunction(e))return e(t);if(-1==e.indexOf("."))return t[e];{let n=e.split("."),r=t;for(let s=0,o=n.length;s<o;++s){if(null==r)return null;r=r[n[s]]}return r}}return null}static isFunction(t){return!!(t&&t.constructor&&t.call&&t.apply)}static reorderArray(t,e,n){t&&e!==n&&(n>=t.length&&(n%=t.length,e%=t.length),t.splice(n,0,t.splice(e,1)[0]))}static insertIntoOrderedArray(t,e,n,r){if(n.length>0){let s=!1;for(let o=0;o<n.length;o++)if(this.findIndexInList(n[o],r)>e){n.splice(o,0,t),s=!0;break}s||n.push(t)}else n.push(t)}static findIndexInList(t,e){let n=-1;if(e)for(let r=0;r<e.length;r++)if(e[r]==t){n=r;break}return n}static contains(t,e){if(null!=t&&e&&e.length)for(let n of e)if(this.equals(t,n))return!0;return!1}static removeAccents(t){return t&&t.search(/[\xC0-\xFF]/g)>-1&&(t=t.replace(/[\xC0-\xC5]/g,"A").replace(/[\xC6]/g,"AE").replace(/[\xC7]/g,"C").replace(/[\xC8-\xCB]/g,"E").replace(/[\xCC-\xCF]/g,"I").replace(/[\xD0]/g,"D").replace(/[\xD1]/g,"N").replace(/[\xD2-\xD6\xD8]/g,"O").replace(/[\xD9-\xDC]/g,"U").replace(/[\xDD]/g,"Y").replace(/[\xDE]/g,"P").replace(/[\xE0-\xE5]/g,"a").replace(/[\xE6]/g,"ae").replace(/[\xE7]/g,"c").replace(/[\xE8-\xEB]/g,"e").replace(/[\xEC-\xEF]/g,"i").replace(/[\xF1]/g,"n").replace(/[\xF2-\xF6\xF8]/g,"o").replace(/[\xF9-\xFC]/g,"u").replace(/[\xFE]/g,"p").replace(/[\xFD\xFF]/g,"y")),t}static isEmpty(t){return null==t||""===t||Array.isArray(t)&&0===t.length||!(t instanceof Date)&&"object"==typeof t&&0===Object.keys(t).length}static isNotEmpty(t){return!this.isEmpty(t)}}var LB=0;function nw(){return"pr_id_"+ ++LB}var Dl=function GK(){let i=[];const r=s=>s&&parseInt(s.style.zIndex,10)||0;return{get:r,set:(s,o,l)=>{o&&(o.style.zIndex=String(((s,o)=>{let l=i.length>0?i[i.length-1]:{key:s,value:o},u=l.value+(l.key===s?0:o)+1;return i.push({key:s,value:u}),u})(s,l)))},clear:s=>{s&&((s=>{i=i.filter(o=>o.value!==s)})(r(s)),s.style.zIndex="")},getCurrent:()=>i.length>0?i[i.length-1].value:0}}();const PB=["*"];let Qd=(()=>{class i{}return i.STARTS_WITH="startsWith",i.CONTAINS="contains",i.NOT_CONTAINS="notContains",i.ENDS_WITH="endsWith",i.EQUALS="equals",i.NOT_EQUALS="notEquals",i.IN="in",i.LESS_THAN="lt",i.LESS_THAN_OR_EQUAL_TO="lte",i.GREATER_THAN="gt",i.GREATER_THAN_OR_EQUAL_TO="gte",i.BETWEEN="between",i.IS="is",i.IS_NOT="isNot",i.BEFORE="before",i.AFTER="after",i.DATE_IS="dateIs",i.DATE_IS_NOT="dateIsNot",i.DATE_BEFORE="dateBefore",i.DATE_AFTER="dateAfter",i})(),Tp=(()=>{class i{constructor(){this.ripple=!1,this.filterMatchModeOptions={text:[Qd.STARTS_WITH,Qd.CONTAINS,Qd.NOT_CONTAINS,Qd.ENDS_WITH,Qd.EQUALS,Qd.NOT_EQUALS],numeric:[Qd.EQUALS,Qd.NOT_EQUALS,Qd.LESS_THAN,Qd.LESS_THAN_OR_EQUAL_TO,Qd.GREATER_THAN,Qd.GREATER_THAN_OR_EQUAL_TO],date:[Qd.DATE_IS,Qd.DATE_IS_NOT,Qd.DATE_BEFORE,Qd.DATE_AFTER]},this.translation={startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",is:"Is",isNot:"Is not",before:"Before",after:"After",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dateFormat:"mm/dd/yy",firstDayOfWeek:0,today:"Today",weekHeader:"Wk",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyMessage:"No results found",emptyFilterMessage:"No results found"},this.zIndex={modal:1100,overlay:1e3,menu:1e3,tooltip:1100},this.translationSource=new nn,this.translationObserver=this.translationSource.asObservable()}getTranslation(e){return this.translation[e]}setTranslation(e){this.translation={...this.translation,...e},this.translationSource.next(this.translation)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Yi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Wc=(()=>{class i{}return i.STARTS_WITH="startsWith",i.CONTAINS="contains",i.NOT_CONTAINS="notContains",i.ENDS_WITH="endsWith",i.EQUALS="equals",i.NOT_EQUALS="notEquals",i.NO_FILTER="noFilter",i.LT="lt",i.LTE="lte",i.GT="gt",i.GTE="gte",i.IS="is",i.IS_NOT="isNot",i.BEFORE="before",i.AFTER="after",i.CLEAR="clear",i.APPLY="apply",i.MATCH_ALL="matchAll",i.MATCH_ANY="matchAny",i.ADD_RULE="addRule",i.REMOVE_RULE="removeRule",i.ACCEPT="accept",i.REJECT="reject",i.CHOOSE="choose",i.UPLOAD="upload",i.CANCEL="cancel",i.DAY_NAMES="dayNames",i.DAY_NAMES_SHORT="dayNamesShort",i.DAY_NAMES_MIN="dayNamesMin",i.MONTH_NAMES="monthNames",i.MONTH_NAMES_SHORT="monthNamesShort",i.FIRST_DAY_OF_WEEK="firstDayOfWeek",i.TODAY="today",i.WEEK_HEADER="weekHeader",i.WEAK="weak",i.MEDIUM="medium",i.STRONG="strong",i.PASSWORD_PROMPT="passwordPrompt",i.EMPTY_MESSAGE="emptyMessage",i.EMPTY_FILTER_MESSAGE="emptyFilterMessage",i})(),m1=(()=>{class i{constructor(){this.requireConfirmationSource=new nn,this.acceptConfirmationSource=new nn,this.requireConfirmation$=this.requireConfirmationSource.asObservable(),this.accept=this.acceptConfirmationSource.asObservable()}confirm(e){return this.requireConfirmationSource.next(e),this}close(){return this.requireConfirmationSource.next(null),this}onAccept(){this.acceptConfirmationSource.next(null)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})(),v1=(()=>{class i{constructor(){this.filters={startsWith:(e,n,r)=>{if(null==n||""===n.trim())return!0;if(null==e)return!1;let s=fr.removeAccents(n.toString()).toLocaleLowerCase(r);return fr.removeAccents(e.toString()).toLocaleLowerCase(r).slice(0,s.length)===s},contains:(e,n,r)=>{if(null==n||"string"==typeof n&&""===n.trim())return!0;if(null==e)return!1;let s=fr.removeAccents(n.toString()).toLocaleLowerCase(r);return-1!==fr.removeAccents(e.toString()).toLocaleLowerCase(r).indexOf(s)},notContains:(e,n,r)=>{if(null==n||"string"==typeof n&&""===n.trim())return!0;if(null==e)return!1;let s=fr.removeAccents(n.toString()).toLocaleLowerCase(r);return-1===fr.removeAccents(e.toString()).toLocaleLowerCase(r).indexOf(s)},endsWith:(e,n,r)=>{if(null==n||""===n.trim())return!0;if(null==e)return!1;let s=fr.removeAccents(n.toString()).toLocaleLowerCase(r),o=fr.removeAccents(e.toString()).toLocaleLowerCase(r);return-1!==o.indexOf(s,o.length-s.length)},equals:(e,n,r)=>null==n||"string"==typeof n&&""===n.trim()||null!=e&&(e.getTime&&n.getTime?e.getTime()===n.getTime():fr.removeAccents(e.toString()).toLocaleLowerCase(r)==fr.removeAccents(n.toString()).toLocaleLowerCase(r)),notEquals:(e,n,r)=>!(null==n||"string"==typeof n&&""===n.trim()||null!=e&&(e.getTime&&n.getTime?e.getTime()===n.getTime():fr.removeAccents(e.toString()).toLocaleLowerCase(r)==fr.removeAccents(n.toString()).toLocaleLowerCase(r))),in:(e,n)=>{if(null==n||0===n.length)return!0;for(let r=0;r<n.length;r++)if(fr.equals(e,n[r]))return!0;return!1},between:(e,n)=>null==n||null==n[0]||null==n[1]||null!=e&&(e.getTime?n[0].getTime()<=e.getTime()&&e.getTime()<=n[1].getTime():n[0]<=e&&e<=n[1]),lt:(e,n,r)=>null==n||null!=e&&(e.getTime&&n.getTime?e.getTime()<n.getTime():e<n),lte:(e,n,r)=>null==n||null!=e&&(e.getTime&&n.getTime?e.getTime()<=n.getTime():e<=n),gt:(e,n,r)=>null==n||null!=e&&(e.getTime&&n.getTime?e.getTime()>n.getTime():e>n),gte:(e,n,r)=>null==n||null!=e&&(e.getTime&&n.getTime?e.getTime()>=n.getTime():e>=n),is:(e,n,r)=>this.filters.equals(e,n,r),isNot:(e,n,r)=>this.filters.notEquals(e,n,r),before:(e,n,r)=>this.filters.lt(e,n,r),after:(e,n,r)=>this.filters.gt(e,n,r),dateIs:(e,n)=>null==n||null!=e&&e.toDateString()===n.toDateString(),dateIsNot:(e,n)=>null==n||null!=e&&e.toDateString()!==n.toDateString(),dateBefore:(e,n)=>null==n||null!=e&&e.getTime()<n.getTime(),dateAfter:(e,n)=>null==n||null!=e&&e.getTime()>n.getTime()}}filter(e,n,r,s,o){let l=[];if(e)for(let u of e)for(let p of n){let v=fr.resolveFieldData(u,p);if(this.filters[s](v,r,o)){l.push(u);break}}return l}register(e,n){this.filters[e]=n}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Yi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),RB=(()=>{class i{constructor(){this.activeItemKeyChange=new nn,this.activeItemKeyChange$=this.activeItemKeyChange.asObservable()}changeKey(e){this.activeItemKey=e,this.activeItemKeyChange.next(this.activeItemKey)}reset(){this.activeItemKey=null,this.activeItemKeyChange.next(this.activeItemKey)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})(),fm=(()=>{class i{constructor(){this.messageSource=new nn,this.clearSource=new nn,this.messageObserver=this.messageSource.asObservable(),this.clearObserver=this.clearSource.asObservable()}add(e){e&&this.messageSource.next(e)}addAll(e){e&&e.length&&this.messageSource.next(e)}clear(e){this.clearSource.next(e||null)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})(),iw=(()=>{class i{constructor(){this.clickSource=new nn,this.clickObservable=this.clickSource.asObservable()}add(e){e&&this.clickSource.next(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Yi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),kB=(()=>{class i{}return i.AND="and",i.OR="or",i})(),jD=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=Ir({type:i,selectors:[["p-header"]],ngContentSelectors:PB,decls:1,vars:0,template:function(e,n){1&e&&(dg(),$u(0))},encapsulation:2}),i})(),y1=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=Ir({type:i,selectors:[["p-footer"]],ngContentSelectors:PB,decls:1,vars:0,template:function(e,n){1&e&&(dg(),$u(0))},encapsulation:2}),i})(),_l=(()=>{class i{constructor(e){this.template=e}getType(){return this.name}}return i.\u0275fac=function(e){return new(e||i)(Zt(am))},i.\u0275dir=$r({type:i,selectors:[["","pTemplate",""]],inputs:{type:"type",name:["pTemplate","name"]}}),i})(),Na=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({imports:[Ns]}),i})(),WK=(()=>{class i{constructor(){this.dragStartSource=new nn,this.dragStopSource=new nn,this.dragStart$=this.dragStartSource.asObservable(),this.dragStop$=this.dragStopSource.asObservable()}startDrag(e){this.dragStartSource.next(e)}stopDrag(e){this.dragStopSource.next(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})();class jK extends W{constructor(t,e){super()}schedule(t,e=0){return this}}const _1={setInterval(i,t,...e){const{delegate:n}=_1;return n?.setInterval?n.setInterval(i,t,...e):setInterval(i,t,...e)},clearInterval(i){const{delegate:t}=_1;return(t?.clearInterval||clearInterval)(i)},delegate:void 0};class OB extends jK{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return _1.setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!=n&&this.delay===n&&!1===this.pending)return e;_1.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let r,n=!1;try{this.work(t)}catch(s){n=!0,r=s||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:t,scheduler:e}=this,{actions:n}=e;this.work=this.state=this.scheduler=null,this.pending=!1,B(n,this),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}}const $D={now:()=>($D.delegate||Date).now(),delegate:void 0};class rw{constructor(t,e=rw.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,n){return new this.schedulerActionCtor(this,t).schedule(n,e)}}rw.now=$D.now;class FB extends rw{constructor(t,e=rw.now){super(t,e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(t){const{actions:e}=this;if(this._active)return void e.push(t);let n;this._active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}const XK=new class qK extends FB{}(class $K extends OB{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!=n&&n>0||null==n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}});function NB(i,t=He){return i=i??ZK,Cn((e,n)=>{let r,s=!0;e.subscribe(yn(n,o=>{const l=t(o);(s||!i(r,l))&&(s=!1,r=l,n.next(o))}))})}function ZK(i,t){return i===t}const sw={};function nC(i,t){if(sw[i]=(sw[i]||0)+1,"function"==typeof t)return qD(i,(...n)=>({...t(...n),type:i}));switch(t?t._as:"empty"){case"empty":return qD(i,()=>({type:i}));case"props":return qD(i,n=>({...n,type:i}));default:throw new Error("Unexpected config.")}}function qD(i,t){return Object.defineProperty(t,"type",{value:i,writable:!1})}const BB="@ngrx/store/init";let rC=(()=>{class i extends Bf{constructor(){super({type:BB})}next(e){if("function"==typeof e)throw new TypeError("\n        Dispatch expected an object, instead it received a function.\n        If you're using the createAction function, make sure to invoke the function\n        before dispatching the action. For example, someAction should be someAction().");if(typeof e>"u")throw new TypeError("Actions must be objects");if(typeof e.type>"u")throw new TypeError("Actions must have a type property");super.next(e)}complete(){}ngOnDestroy(){super.complete()}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})();const eZ=[rC],zB=new Ji("@ngrx/store Internal Root Guard"),VB=new Ji("@ngrx/store Internal Initial State"),YD=new Ji("@ngrx/store Initial State"),UB=new Ji("@ngrx/store Reducer Factory"),HB=new Ji("@ngrx/store Internal Reducer Factory Provider"),GB=new Ji("@ngrx/store Initial Reducers"),KD=new Ji("@ngrx/store Internal Initial Reducers"),WB=new Ji("@ngrx/store Store Features"),jB=new Ji("@ngrx/store Internal Store Reducers"),ZD=new Ji("@ngrx/store Internal Feature Reducers"),$B=new Ji("@ngrx/store Internal Feature Configs"),qB=new Ji("@ngrx/store Internal Store Features"),XB=new Ji("@ngrx/store Internal Feature Reducers Token"),YB=new Ji("@ngrx/store Feature Reducers"),KB=new Ji("@ngrx/store User Provided Meta Reducers"),b1=new Ji("@ngrx/store Meta Reducers"),ZB=new Ji("@ngrx/store Internal Resolved Meta Reducers"),QB=new Ji("@ngrx/store User Runtime Checks Config"),JB=new Ji("@ngrx/store Internal User Runtime Checks Config"),ow=new Ji("@ngrx/store Internal Runtime Checks"),QD=new Ji("@ngrx/store Check if Action types are unique");function JD(i,t={}){const e=Object.keys(i),n={};for(let s=0;s<e.length;s++){const o=e[s];"function"==typeof i[o]&&(n[o]=i[o])}const r=Object.keys(n);return function(o,l){o=void 0===o?t:o;let u=!1;const p={};for(let v=0;v<r.length;v++){const x=r[v],T=o[x],F=(0,n[x])(T,l);p[x]=F,u=u||F!==T}return u?p:o}}function ez(...i){return function(t){if(0===i.length)return t;const e=i[i.length-1];return i.slice(0,-1).reduceRight((r,s)=>s(r),e(t))}}function tz(i,t){return Array.isArray(t)&&t.length>0&&(i=ez.apply(null,[...t,i])),(e,n)=>{const r=i(e);return(s,o)=>r(s=void 0===s?n:s,o)}}class e2 extends bt{}class nz extends rC{}let C1=(()=>{class i extends Bf{constructor(e,n,r,s){super(s(r,n)),this.dispatcher=e,this.initialState=n,this.reducers=r,this.reducerFactory=s}get currentReducers(){return this.reducers}addFeature(e){this.addFeatures([e])}addFeatures(e){const n=e.reduce((r,{reducers:s,reducerFactory:o,metaReducers:l,initialState:u,key:p})=>{const v="function"==typeof s?function nZ(i){const t=Array.isArray(i)&&i.length>0?ez(...i):e=>e;return(e,n)=>(e=t(e),(r,s)=>e(r=void 0===r?n:r,s))}(l)(s,u):tz(o,l)(s,u);return r[p]=v,r},{});this.addReducers(n)}removeFeature(e){this.removeFeatures([e])}removeFeatures(e){this.removeReducers(e.map(n=>n.key))}addReducer(e,n){this.addReducers({[e]:n})}addReducers(e){this.reducers={...this.reducers,...e},this.updateReducers(Object.keys(e))}removeReducer(e){this.removeReducers([e])}removeReducers(e){e.forEach(n=>{this.reducers=function tZ(i,t){return Object.keys(i).filter(e=>e!==t).reduce((e,n)=>Object.assign(e,{[n]:i[n]}),{})}(this.reducers,n)}),this.updateReducers(e)}updateReducers(e){this.next(this.reducerFactory(this.reducers,this.initialState)),this.dispatcher.next({type:"@ngrx/store/update-reducers",features:e})}ngOnDestroy(){this.complete()}}return i.\u0275fac=function(e){return new(e||i)(jn(nz),jn(YD),jn(GB),jn(UB))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})();const rZ=[C1,{provide:e2,useExisting:C1},{provide:nz,useExisting:rC}];let t2=(()=>{class i extends nn{ngOnDestroy(){this.complete()}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=Vo(i)))(n||i)}}(),i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})();const sZ=[t2];class iz extends bt{}let rz=(()=>{class i extends Bf{constructor(e,n,r,s){super(s);const l=e.pipe($e(XK)).pipe(function YK(...i){const t=Ye(i);return Cn((e,n)=>{const r=i.length,s=new Array(r);let o=i.map(()=>!1),l=!1;for(let u=0;u<r;u++)hl(i[u]).subscribe(yn(n,p=>{s[u]=p,!l&&!o[u]&&(o[u]=!0,(l=o.every(He))&&(o=null))},se));e.subscribe(yn(n,u=>{if(l){const p=[u,...s];n.next(t?t(...p):p)}}))})}(n)),p=l.pipe(pD(oZ,{state:s}));this.stateSubscription=p.subscribe(({state:v,action:x})=>{this.next(v),r.next(x)})}ngOnDestroy(){this.stateSubscription.unsubscribe(),this.complete()}}return i.INIT=BB,i.\u0275fac=function(e){return new(e||i)(jn(rC),jn(e2),jn(t2),jn(YD))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})();function oZ(i={state:void 0},[t,e]){const{state:n}=i;return{state:e(n,t),action:t}}const aZ=[rz,{provide:iz,useExisting:rz}];let ey=(()=>{class i extends bt{constructor(e,n,r){super(),this.actionsObserver=n,this.reducerManager=r,this.source=e}select(e,...n){return cZ.call(null,e,...n)(this)}lift(e){const n=new i(this,this.actionsObserver,this.reducerManager);return n.operator=e,n}dispatch(e){this.actionsObserver.next(e)}next(e){this.actionsObserver.next(e)}error(e){this.actionsObserver.error(e)}complete(){this.actionsObserver.complete()}addReducer(e,n){this.reducerManager.addReducer(e,n)}removeReducer(e){this.reducerManager.removeReducer(e)}}return i.\u0275fac=function(e){return new(e||i)(jn(iz),jn(rC),jn(C1))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})();const lZ=[ey];function cZ(i,t,...e){return function(r){let s;if("string"==typeof i){const o=[t,...e].filter(Boolean);s=r.pipe(function KK(...i){const t=i.length;if(0===t)throw new Error("list of properties cannot be empty.");return be(e=>{let n=e;for(let r=0;r<t;r++){const s=n?.[i[r]];if(!(typeof s<"u"))return;n=s}return n})}(i,...o))}else{if("function"!=typeof i)throw new TypeError(`Unexpected type '${typeof i}' in select operator, expected 'string' or 'function'`);s=r.pipe(be(o=>i(o,t)))}return s.pipe(NB())}}const n2="https://ngrx.io/guide/store/configuration/runtime-checks";function sz(i){return void 0===i}function oz(i){return null===i}function az(i){return Array.isArray(i)}function lz(i){return"object"==typeof i&&null!==i}function r2(i){return"function"==typeof i}function s2(i,t){return i===t}function vZ(i,t,e){for(let n=0;n<i.length;n++)if(!e(i[n],t[n]))return!0;return!1}function o2(i,t=s2,e=s2){let s,n=null,r=null;return{memoized:function p(){if(void 0!==s)return s.result;if(!n)return r=i.apply(null,arguments),n=arguments,r;if(!vZ(arguments,n,t))return r;const v=i.apply(null,arguments);return n=arguments,e(r,v)?r:(r=v,v)},reset:function o(){n=null,r=null},setResult:function l(v){s={result:v}},clearResult:function u(){s=void 0}}}function yZ(i,t,e,n){if(void 0===e){const s=t.map(o=>o(i));return n.memoized.apply(null,s)}const r=t.map(s=>s(i,e));return n.memoized.apply(null,[...r,e])}function aw(i){return function dz(...i){return function _Z(i,t={stateFn:yZ}){return function(...e){let n=e;if(Array.isArray(n[0])){const[v,...x]=n;n=[...v,...x]}const r=n.slice(0,n.length-1),s=n[n.length-1],o=r.filter(v=>v.release&&"function"==typeof v.release),l=i(function(...v){return s.apply(null,v)}),u=o2(function(v,x){return t.stateFn.apply(null,[v,r,x,l])});return Object.assign(u.memoized,{release:function p(){u.reset(),l.reset(),o.forEach(v=>v.release())},projector:l.memoized,setResult:u.setResult,clearResult:u.clearResult})}}(o2)(...i)}(t=>{const e=t[i];return tN()&&!(i in t)&&console.warn(`@ngrx/store: The feature name "${i}" does not exist in the state, therefore createFeatureSelector cannot access it.  Be sure it is imported in a loaded module using StoreModule.forRoot('${i}', ...) or StoreModule.forFeature('${i}', ...).  If the default state is intended to be undefined, as is the case with router state, this development-only warning message can be ignored.`),e},t=>t)}function a2(i){Object.freeze(i);const t=r2(i);return Object.getOwnPropertyNames(i).forEach(e=>{if(!e.startsWith("\u0275")&&function gZ(i,t){return Object.prototype.hasOwnProperty.call(i,t)}(i,e)&&(!t||"caller"!==e&&"callee"!==e&&"arguments"!==e)){const n=i[e];(lz(n)||r2(n))&&!Object.isFrozen(n)&&a2(n)}}),i}function l2(i,t=[]){return(sz(i)||oz(i))&&0===t.length?{path:["root"],value:i}:Object.keys(i).reduce((n,r)=>{if(n)return n;const s=i[r];return function pZ(i){return r2(i)&&i.hasOwnProperty("\u0275cmp")}(s)?n:!(sz(s)||oz(s)||function hZ(i){return"number"==typeof i}(s)||function dZ(i){return"boolean"==typeof i}(s)||function uZ(i){return"string"==typeof i}(s)||az(s))&&(function cz(i){if(!function fZ(i){return lz(i)&&!az(i)}(i))return!1;const t=Object.getPrototypeOf(i);return t===Object.prototype||null===t}(s)?l2(s,[...t,r]):{path:[...t,r],value:s})},!1)}function hz(i,t){if(!1===i)return;const e=i.path.join("."),n=new Error(`Detected unserializable ${t} at "${e}". ${n2}#strict${t}serializability`);throw n.value=i.value,n.unserializablePath=e,n}function IZ(i){return tN()?{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!0,strictActionImmutability:!0,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1,...i}:{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!1,strictActionImmutability:!1,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1}}function SZ({strictActionSerializability:i,strictStateSerializability:t}){return e=>i||t?function wZ(i,t){return function(e,n){t.action(n)&&hz(l2(n),"action");const r=i(e,n);return t.state()&&hz(l2(r),"state"),r}}(e,{action:n=>i&&!c2(n),state:()=>t}):e}function EZ({strictActionImmutability:i,strictStateImmutability:t}){return e=>i||t?function xZ(i,t){return function(e,n){const r=t.action(n)?a2(n):n,s=i(e,r);return t.state()?a2(s):s}}(e,{action:n=>i&&!c2(n),state:()=>t}):e}function c2(i){return i.type.startsWith("@ngrx")}function TZ({strictActionWithinNgZone:i}){return t=>i?function AZ(i,t){return function(e,n){if(t.action(n)&&!Ko.isInAngularZone())throw new Error(`Action '${n.type}' running outside NgZone. ${n2}#strictactionwithinngzone`);return i(e,n)}}(t,{action:e=>i&&!c2(e)}):t}function MZ(i){return[{provide:JB,useValue:i},{provide:QB,useFactory:DZ,deps:[JB]},{provide:ow,deps:[QB],useFactory:IZ},{provide:b1,multi:!0,deps:[ow],useFactory:EZ},{provide:b1,multi:!0,deps:[ow],useFactory:SZ},{provide:b1,multi:!0,deps:[ow],useFactory:TZ}]}function fz(){return[{provide:QD,multi:!0,deps:[ow],useFactory:LZ}]}function DZ(i){return i}function LZ(i){if(!i.strictActionTypeUniqueness)return;const t=Object.entries(sw).filter(([,e])=>e>1).map(([e])=>e);if(t.length)throw new Error(`Action types are registered more than once, ${t.map(e=>`"${e}"`).join(", ")}. ${n2}#strictactiontypeuniqueness`)}let pz=(()=>{class i{constructor(e,n,r,s,o,l){}}return i.\u0275fac=function(e){return new(e||i)(jn(rC),jn(e2),jn(t2),jn(ey),jn(zB,8),jn(QD,8))},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({}),i})(),PZ=(()=>{class i{constructor(e,n,r,s,o){this.features=e,this.featureReducers=n,this.reducerManager=r;const l=e.map((u,p)=>{const x=n.shift()[p];return{...u,reducers:x,initialState:gz(u.initialState)}});r.addFeatures(l)}ngOnDestroy(){this.reducerManager.removeFeatures(this.features)}}return i.\u0275fac=function(e){return new(e||i)(jn(qB),jn(YB),jn(C1),jn(pz),jn(QD,8))},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({}),i})(),RZ=(()=>{class i{static forRoot(e,n={}){return{ngModule:pz,providers:[{provide:zB,useFactory:BZ,deps:[[ey,new Tl,new pd]]},{provide:VB,useValue:n.initialState},{provide:YD,useFactory:gz,deps:[VB]},{provide:KD,useValue:e},{provide:jB,useExisting:e instanceof Ji?e:KD},{provide:GB,deps:[xu,KD,[new Hu(jB)]],useFactory:kZ},{provide:KB,useValue:n.metaReducers?n.metaReducers:[]},{provide:ZB,deps:[b1,KB],useFactory:NZ},{provide:HB,useValue:n.reducerFactory?n.reducerFactory:JD},{provide:UB,deps:[HB,ZB],useFactory:tz},eZ,rZ,sZ,aZ,lZ,MZ(n.runtimeChecks),fz()]}}static forFeature(e,n,r={}){return{ngModule:PZ,providers:[{provide:$B,multi:!0,useValue:e instanceof Object?{}:r},{provide:WB,multi:!0,useValue:{key:e instanceof Object?e.name:e,reducerFactory:r instanceof Ji||!r.reducerFactory?JD:r.reducerFactory,metaReducers:r instanceof Ji||!r.metaReducers?[]:r.metaReducers,initialState:r instanceof Ji||!r.initialState?void 0:r.initialState}},{provide:qB,deps:[xu,$B,WB],useFactory:OZ},{provide:ZD,multi:!0,useValue:e instanceof Object?e.reducer:n},{provide:XB,multi:!0,useExisting:n instanceof Ji?n:ZD},{provide:YB,multi:!0,deps:[xu,ZD,[new Hu(XB)]],useFactory:FZ},fz()]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({}),i})();function kZ(i,t){return t instanceof Ji?i.get(t):t}function OZ(i,t,e){return e.map((n,r)=>{if(t[r]instanceof Ji){const s=i.get(t[r]);return{key:n.key,reducerFactory:s.reducerFactory?s.reducerFactory:JD,metaReducers:s.metaReducers?s.metaReducers:[],initialState:s.initialState}}return n})}function FZ(i,t){return t.map(n=>n instanceof Ji?i.get(n):n)}function gz(i){return"function"==typeof i?i():i}function NZ(i,t){return i.concat(t)}function BZ(i){if(i)throw new TypeError("StoreModule.forRoot() called twice. Feature modules should use StoreModule.forFeature() instead.");return"guarded"}function lw(...i){return{reducer:i.pop(),types:i.map(n=>n.type)}}function cw(i,...t){const e=new Map;for(const n of t)for(const r of n.types){const s=e.get(r);e.set(r,s?(l,u)=>n.reducer(s(l,u),u):n.reducer)}return function(n=i,r){const s=e.get(r.type);return s?s(n,r):n}}const uw=nC("[SysGraph List/API] Retrieve Graphs Success",{_as:"props",_p:void 0}),x1=nC("[SysGraph List/API] Retrieve Graph Success",{_as:"props",_p:void 0}),u2=aw("graphs"),d2=aw("graph"),VZ=new FB(OB);class WZ extends nn{constructor(t=1/0,e=1/0,n=$D){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=n,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:n,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:o}=this;e||(n.push(t),!r&&n.push(s.now()+o)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:n,_buffer:r}=this,s=r.slice();for(let o=0;o<s.length&&!t.closed;o+=n?1:2)t.next(s[o]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:n,_infiniteTimeWindow:r}=this,s=(r?1:2)*t;if(t<1/0&&s<n.length&&n.splice(0,n.length-s),!r){const o=e.now();let l=0;for(let u=1;u<n.length&&n[u]<=o;u+=2)l=u;l&&n.splice(0,l+1)}}}function h2(i,t,e){let n,r=!1;return i&&"object"==typeof i?({bufferSize:n=1/0,windowTime:t=1/0,refCount:r=!1,scheduler:e}=i):n=i??1/0,xo({connector:()=>new WZ(n,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}var mz={},vz={};function jZ(i){for(var t=[],e=0,n=0,r=0;r<i.length;r+=1){var s=mz[i[r]];if(void 0===s)throw new Error("Invalid character ("+i[r]+")");var o=32&s;if(n+=(s&=31)<<e,o)e+=5;else{var l=1&n;n>>>=1,t.push(l?0===n?-2147483648:-n:n),n=e=0}}return t}"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split("").forEach(function(i,t){mz[i]=t,vz[t]=i});const w1="TOKEN_LOGGER_CONFIG";class $Z{constructor(t){this.config=this._clone(t)}get level(){return this.config.level}get serverLogLevel(){return this.config.serverLogLevel}updateConfig(t){this.config=this._clone(t)}partialUpdateConfig(t){!t||Object.keys(t).forEach(e=>{this.config[e]=t[e]})}getConfig(){return this._clone(this.config)}_clone(t){const e={level:null};return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}}const dw="TOKEN_LOGGER_CONFIG_ENGINE_FACTORY";class qZ{provideConfigEngine(t){return new $Z(t)}}const hw="TOKEN_LOGGER_MAPPER_SERVICE";let XZ=(()=>{class i{constructor(e){this.httpBackend=e,this.sourceMapCache=new Map,this.logPositionCache=new Map}getLogPosition(e,n){const r=this.getStackLine(e);if(!r)return Gr({fileName:"",lineNumber:0,columnNumber:0});const s=this.getLocalPosition(r);if(!e.enableSourceMaps)return Gr(s);const o=this.getSourceMapLocation(r);return this.getSourceMap(o,s)}getStackLine(e){const n=new Error;try{throw n}catch{try{let s=4;return n.stack.split("\n")[0].includes(".js:")||(s+=1),n.stack.split("\n")[s+(e.proxiedSteps||0)]}catch{return null}}}getLocalPosition(e){const n=e.lastIndexOf("/");let r=e.indexOf(")");r<0&&(r=void 0);const o=e.substring(n+1,r).split(":");return 3===o.length?{fileName:o[0],lineNumber:+o[1],columnNumber:+o[2]}:{fileName:"unknown",lineNumber:0,columnNumber:0}}getTranspileLocation(e){let n=e.indexOf("(");n<0&&(n=e.lastIndexOf("@"),n<0&&(n=e.lastIndexOf(" ")));let r=e.indexOf(")");return r<0&&(r=void 0),e.substring(n+1,r)}getSourceMapLocation(e){const n=this.getTranspileLocation(e),r=n.substring(0,n.lastIndexOf(":"));return r.substring(0,r.lastIndexOf(":"))+".map"}getMapping(e,n){let r=0,s=0,o=0;const l=e.mappings.split(";");for(let u=0;u<l.length;u++){let p=0;const v=l[u].split(",");for(let x=0;x<v.length;x++){const I=jZ(v[x]);if(I.length>=4&&(p+=I[0],r+=I[1],s+=I[2],o+=I[3]),u===n.lineNumber){if(p===n.columnNumber)return{fileName:e.sources[r],lineNumber:s,columnNumber:o};if(x+1===v.length)return{fileName:e.sources[r],lineNumber:s,columnNumber:0}}}}return{fileName:"unknown",lineNumber:0,columnNumber:0}}getSourceMap(e,n){const r=new c0("GET",e),s=`${n.fileName}:${n.lineNumber}:${n.columnNumber}`;if(this.logPositionCache.has(s))return this.logPositionCache.get(s);this.sourceMapCache.has(e)||(this.httpBackend?this.sourceMapCache.set(e,this.httpBackend.handle(r).pipe(pg(l=>l instanceof qb),be(l=>l.body),function GZ(i=1/0){let t;t=i&&"object"==typeof i?i:{count:i};const{count:e=1/0,delay:n,resetOnSuccess:r=!1}=t;return e<=0?He:Cn((s,o)=>{let u,l=0;const p=()=>{let v=!1;u=s.subscribe(yn(o,x=>{r&&(l=0),o.next(x)},void 0,x=>{if(l++<e){const I=()=>{u?(u.unsubscribe(),u=null,p()):v=!0};if(null!=n){const T="number"==typeof n?function HZ(i=0,t,e=VZ){let n=-1;return null!=t&&(Ge(t)?e=t:n=t),new bt(r=>{let s=function UZ(i){return i instanceof Date&&!isNaN(i)}(i)?+i-e.now():i;s<0&&(s=0);let o=0;return e.schedule(function(){r.closed||(r.next(o++),0<=n?this.schedule(void 0,n):r.complete())},s)})}(n):hl(n(x,l)),F=yn(o,()=>{F.unsubscribe(),I()},()=>{o.complete()});T.subscribe(F)}else I()}else o.error(x)})),v&&(u.unsubscribe(),u=null,p())};p()})}(3),h2(1))):(console.error("NGXLogger : Can't get sourcemap because HttpBackend is not provided. You need to import HttpClientModule"),this.sourceMapCache.set(e,Gr(null))));const o=this.sourceMapCache.get(e).pipe(be(l=>l?this.getMapping(l,n):n),Jm(()=>Gr(n)),h2(1));return this.logPositionCache.set(s,o),o}}return i.\u0275fac=function(e){return new(e||i)(jn(qI,8))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})();const fw="TOKEN_LOGGER_METADATA_SERVICE";let YZ=(()=>{class i{constructor(e){this.datePipe=e}computeTimestamp(e){const n=()=>(new Date).toISOString();return e.timestampFormat?this.datePipe?this.datePipe.transform(new Date,e.timestampFormat):(console.error("NGXLogger : Can't use timeStampFormat because DatePipe is not provided. You need to provide DatePipe"),n()):n()}getMetadata(e,n,r,s){const o={level:e,additional:s};return o.message=r&&"function"==typeof r?r():r,o.timestamp=this.computeTimestamp(n),o}}return i.\u0275fac=function(e){return new(e||i)(jn(LN,8))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})();const pw="TOKEN_LOGGER_RULES_SERVICE";let KZ=(()=>{class i{shouldCallWriter(e,n,r,s){return!n.disableConsoleLogging&&e>=n.level}shouldCallServer(e,n,r,s){return!!n.serverLoggingUrl&&e>=n.serverLogLevel}shouldCallMonitor(e,n,r,s){return this.shouldCallWriter(e,n,r,s)||this.shouldCallServer(e,n,r,s)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})();const gw="TOKEN_LOGGER_SERVER_SERVICE";let ZZ=(()=>{class i{constructor(e){this.httpBackend=e}secureErrorObject(e){return e?.stack}secureAdditionalParameters(e){return null==e?null:e.map((n,r)=>{try{return n instanceof Error?this.secureErrorObject(n):("object"==typeof n&&JSON.stringify(n),n)}catch{return`The additional[${r}] value could not be parsed using JSON.stringify().`}})}secureMessage(e){try{if(e instanceof Error)return this.secureErrorObject(e);"string"!=typeof e&&(e=JSON.stringify(e,null,2))}catch{e='The provided "message" value could not be parsed with JSON.stringify().'}return e}alterHttpRequest(e){return e}logOnServer(e,n,r){if(!this.httpBackend)return console.error("NGXLogger : Can't log on server because HttpBackend is not provided. You need to import HttpClientModule"),Gr(null);let s=new c0("POST",e,n,r||{}),o=Gr(s);const l=this.alterHttpRequest(s);return function zZ(i){return!!i&&(i instanceof bt||Y(i.lift)&&Y(i.subscribe))}(l)?o=l:l?o=Gr(l):console.warn("NGXLogger : alterHttpRequest returned an invalid request. Using default one instead"),o.pipe(Yv(u=>u?this.httpBackend.handle(u):(console.warn("NGXLogger : alterHttpRequest returned an invalid request (observable). Using default one instead"),this.httpBackend.handle(s))),pg(u=>u instanceof qb),be(u=>u.body))}customiseRequestBody(e){return e}sendToServer(e,n){const r={...e};r.additional=this.secureAdditionalParameters(r.additional),r.message=this.secureMessage(r.message);const s=this.customiseRequestBody(r),o=n.customHttpHeaders||new Qm;o.has("Content-Type")||o.set("Content-Type","application/json"),this.logOnServer(n.serverLoggingUrl,s,{headers:o,params:n.customHttpParams||new Kv,responseType:n.httpResponseType||"json",withCredentials:n.withCredentials||!1}).pipe(Jm(l=>(console.error("NGXLogger: Failed to log on server",l),Xb(l)))).subscribe()}}return i.\u0275fac=function(e){return new(e||i)(jn(qI,8))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})();const mw="TOKEN_LOGGER_WRITER_SERVICE";var jc=(()=>{return(i=jc||(jc={}))[i.TRACE=0]="TRACE",i[i.DEBUG=1]="DEBUG",i[i.INFO=2]="INFO",i[i.LOG=3]="LOG",i[i.WARN=4]="WARN",i[i.ERROR=5]="ERROR",i[i.FATAL=6]="FATAL",i[i.OFF=7]="OFF",jc;var i})();const QZ=["purple","teal","gray","gray","red","red","red"];let JZ=(()=>{class i{constructor(e){this.platformId=e,this.prepareMetaStringFuncs=[this.getTimestampToWrite,this.getLevelToWrite,this.getFileDetailsToWrite,this.getContextToWrite],this.isIE=ZM(e)&&navigator&&navigator.userAgent&&!(-1===navigator.userAgent.indexOf("MSIE")&&!navigator.userAgent.match(/Trident\//)&&!navigator.userAgent.match(/Edge\//)),this.logFunc=this.isIE?this.logIE.bind(this):this.logModern.bind(this)}getTimestampToWrite(e,n){return e.timestamp}getLevelToWrite(e,n){return jc[e.level]}getFileDetailsToWrite(e,n){return!0===n.disableFileDetails?"":`[${e.fileName}:${e.lineNumber}:${e.columnNumber}]`}getContextToWrite(e,n){return n.context?`{${n.context}}`:""}prepareMetaString(e,n){let r="";return this.prepareMetaStringFuncs.forEach(s=>{const o=s(e,n);o&&(r=r+" "+o)}),r.trim()}getColor(e,n){if(e.level!==jc.OFF)return(n.colorScheme??QZ)[e.level]}logIE(e,n,r){const s=e.additional||[];switch(e.level){case jc.WARN:console.warn(`${r} `,e.message,...s);break;case jc.ERROR:case jc.FATAL:console.error(`${r} `,e.message,...s);break;case jc.INFO:console.info(`${r} `,e.message,...s);break;default:console.log(`${r} `,e.message,...s)}}logModern(e,n,r){const s=this.getColor(e,n),o=e.additional||[];switch(e.level){case jc.WARN:console.warn(`%c${r}`,`color:${s}`,e.message,...o);break;case jc.ERROR:case jc.FATAL:console.error(`%c${r}`,`color:${s}`,e.message,...o);break;case jc.INFO:console.info(`%c${r}`,`color:${s}`,e.message,...o);break;case jc.DEBUG:console.debug(`%c${r}`,`color:${s}`,e.message,...o);break;default:console.log(`%c${r}`,`color:${s}`,e.message,...o)}}writeMessage(e,n){const r=this.prepareMetaString(e,n);this.logFunc(e,n,r)}}return i.\u0275fac=function(e){return new(e||i)(jn($b))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})(),Mp=(()=>{class i{constructor(e,n,r,s,o,l,u){this.metadataService=r,this.ruleService=s,this.mapperService=o,this.writerService=l,this.serverService=u,this.configEngine=n.provideConfigEngine(e)}get level(){return this.configEngine.level}get serverLogLevel(){return this.configEngine.serverLogLevel}trace(e,...n){this._log(jc.TRACE,e,n)}debug(e,...n){this._log(jc.DEBUG,e,n)}info(e,...n){this._log(jc.INFO,e,n)}log(e,...n){this._log(jc.LOG,e,n)}warn(e,...n){this._log(jc.WARN,e,n)}error(e,...n){this._log(jc.ERROR,e,n)}fatal(e,...n){this._log(jc.FATAL,e,n)}setCustomHttpHeaders(e){const n=this.getConfigSnapshot();n.customHttpHeaders=e,this.updateConfig(n)}setCustomParams(e){const n=this.getConfigSnapshot();n.customHttpParams=e,this.updateConfig(n)}setWithCredentialsOptionValue(e){const n=this.getConfigSnapshot();n.withCredentials=e,this.updateConfig(n)}registerMonitor(e){this._loggerMonitor=e}updateConfig(e){this.configEngine.updateConfig(e)}partialUpdateConfig(e){this.configEngine.partialUpdateConfig(e)}getConfigSnapshot(){return this.configEngine.getConfig()}_log(e,n,r=[]){const s=this.configEngine.getConfig(),o=this.ruleService.shouldCallWriter(e,s,n,r),l=this.ruleService.shouldCallServer(e,s,n,r),u=this.ruleService.shouldCallMonitor(e,s,n,r);if(!o&&!l&&!u)return;const p=this.metadataService.getMetadata(e,s,n,r);this.mapperService.getLogPosition(s,p).pipe(Yb(1)).subscribe(v=>{v&&(p.fileName=v.fileName,p.lineNumber=v.lineNumber,p.columnNumber=v.columnNumber),u&&this._loggerMonitor&&this._loggerMonitor.onLog(p,s),o&&this.writerService.writeMessage(p,s),l&&this.serverService.sendToServer(p,s)})}}return i.\u0275fac=function(e){return new(e||i)(jn(w1),jn(dw),jn(fw),jn(pw),jn(hw),jn(mw),jn(gw))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),eQ=(()=>{class i{constructor(e,n,r,s,o,l,u){this.logger=e,this.configEngineFactory=n,this.metadataService=r,this.ruleService=s,this.mapperService=o,this.writerService=l,this.serverService=u}create(e,n,r,s){return this.getNewInstance({config:e,serverService:n,logMonitor:r,mapperService:s})}getNewInstance(e){const n=new Mp(e?.config??this.logger.getConfigSnapshot(),e?.configEngineFactory??this.configEngineFactory,e?.metadataService??this.metadataService,e?.ruleService??this.ruleService,e?.mapperService??this.mapperService,e?.writerService??this.writerService,e?.serverService??this.serverService);return e?.partialConfig&&n.partialUpdateConfig(e.partialConfig),e?.logMonitor&&n.registerMonitor(e.logMonitor),n}}return i.\u0275fac=function(e){return new(e||i)(jn(Mp),jn(dw),jn(fw),jn(pw),jn(hw),jn(mw),jn(gw))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),tQ=(()=>{class i{static forRoot(e,n){if(n||(n={}),n.configProvider){if(n.configProvider.provide!==w1)throw new Error(`Wrong injection token for configProvider, it should be ${w1} and you used ${n.configProvider.provide}`)}else n.configProvider={provide:w1,useValue:e||{}};if(n.configEngineFactoryProvider){if(n.configEngineFactoryProvider.provide!==dw)throw new Error(`Wrong injection token for configEngineFactoryProvider, it should be '${dw}' and you used '${n.configEngineFactoryProvider.provide}'`)}else n.configEngineFactoryProvider={provide:dw,useClass:qZ};if(n.metadataProvider){if(n.metadataProvider.provide!==fw)throw new Error(`Wrong injection token for metadataProvider, it should be '${fw}' and you used '${n.metadataProvider.provide}'`)}else n.metadataProvider={provide:fw,useClass:YZ};if(n.ruleProvider){if(n.ruleProvider.provide!==pw)throw new Error(`Wrong injection token for ruleProvider, it should be '${pw}' and you used '${n.ruleProvider.provide}'`)}else n.ruleProvider={provide:pw,useClass:KZ};if(n.mapperProvider){if(n.mapperProvider.provide!==hw)throw new Error(`Wrong injection token for mapperProvider, it should be '${hw}' and you used '${n.mapperProvider.provide}'`)}else n.mapperProvider={provide:hw,useClass:XZ};if(n.writerProvider){if(n.writerProvider.provide!==mw)throw new Error(`Wrong injection token for writerProvider, it should be '${mw}' and you used '${n.writerProvider.provide}'`)}else n.writerProvider={provide:mw,useClass:JZ};if(n.serverProvider){if(n.serverProvider.provide!==gw)throw new Error(`Wrong injection token for serverProvider, it should be '${gw}' and you used '${n.writerProvider.provide}'`)}else n.serverProvider={provide:gw,useClass:ZZ};return{ngModule:i,providers:[Mp,n.configProvider,n.configEngineFactoryProvider,n.metadataProvider,n.ruleProvider,n.mapperProvider,n.writerProvider,n.serverProvider,eQ]}}static forChild(){return{ngModule:i}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({imports:[[Ns]]}),i})();function _z(i,t,e,n,r,s,o){try{var l=i[s](o),u=l.value}catch(p){return void e(p)}l.done?t(u):Promise.resolve(u).then(n,r)}function p0(i){return function(){var t=this,e=arguments;return new Promise(function(n,r){var s=i.apply(t,e);function o(u){_z(s,n,r,o,l,"next",u)}function l(u){_z(s,n,r,o,l,"throw",u)}o(void 0)})}}var bz=V(5452),pm=(()=>{return(i=pm||(pm={})).Local="local_strategy",i.Session="session_strategy",i.InMemory="in_memory_strategy",pm;var i})();function A1(){}let tv=(()=>{class i{static normalize(e){return e=i.isCaseSensitive?e:e.toLowerCase(),`${i.prefix}${i.separator}${e}`}static isNormalizedKey(e){return 0===e.indexOf(i.prefix+i.separator)}static setPrefix(e){i.prefix=e}static setSeparator(e){i.separator=e}static setCaseSensitive(e){i.isCaseSensitive=e}static consumeConfiguration(e){"prefix"in e&&this.setPrefix(e.prefix),"separator"in e&&this.setSeparator(e.separator),"caseSensitive"in e&&this.setCaseSensitive(e.caseSensitive)}}return i.prefix="ngx-webstorage",i.separator="|",i.isCaseSensitive=!1,i})();class I1{constructor(t){this.strategy=t}retrieve(t){let e;return this.strategy.get(tv.normalize(t)).subscribe(n=>e=typeof n>"u"?null:n),e}store(t,e){return this.strategy.set(tv.normalize(t),e).subscribe(A1),e}clear(t){void 0!==t?this.strategy.del(tv.normalize(t)).subscribe(A1):this.strategy.clear().subscribe(A1)}getStrategyName(){return this.strategy.name}observe(t){return t=tv.normalize(t),this.strategy.keyChanges.pipe(pg(e=>null===e||e===t),hm(()=>this.strategy.get(t)),NB(),h2({refCount:!0,bufferSize:1}))}}let f2=(()=>{class i{constructor(){this.caches={}}get(e,n){return this.getCacheStore(e)[n]}set(e,n,r){this.getCacheStore(e)[n]=r}del(e,n){delete this.getCacheStore(e)[n]}clear(e){this.caches[e]={}}getCacheStore(e){return e in this.caches?this.caches[e]:this.caches[e]={}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Yi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Cz=new Ji("window_local_storage"),aQ={provide:Cz,useFactory:function oQ(){return typeof window<"u"?window.localStorage:null}},xz=new Ji("window_session_storage"),cQ={provide:xz,useFactory:function lQ(){return typeof window<"u"?window.sessionStorage:null}};class wz{constructor(t,e){this.storage=t,this.cache=e,this.keyChanges=new nn}get isAvailable(){return void 0===this._isAvailable&&(this._isAvailable=class nQ{static isStorageAvailable(t){let e=!0;try{"object"==typeof t?(t.setItem("test-storage","foobar"),t.removeItem("test-storage")):e=!1}catch{e=!1}return e}}.isStorageAvailable(this.storage)),this._isAvailable}get(t){let e=this.cache.get(this.name,t);if(void 0!==e)return Gr(e);try{const n=this.storage.getItem(t);null!==n&&(e=JSON.parse(n),this.cache.set(this.name,t,e))}catch(n){console.warn(n)}return Gr(e)}set(t,e){const n=JSON.stringify(e);return this.storage.setItem(t,n),this.cache.set(this.name,t,e),this.keyChanges.next(t),Gr(e)}del(t){return this.storage.removeItem(t),this.cache.del(this.name,t),this.keyChanges.next(t),Gr(null)}clear(){return this.storage.clear(),this.cache.clear(this.name),this.keyChanges.next(null),Gr(null)}}class ty extends wz{constructor(t,e,n,r){super(t,e),this.storage=t,this.cache=e,this.platformId=n,this.zone=r,this.name=ty.strategyName,ZM(this.platformId)&&this.listenExternalChanges()}listenExternalChanges(){window.addEventListener("storage",t=>this.zone.run(()=>{if(t.storageArea!==this.storage)return;const e=t.key;null!==e?this.cache.del(this.name,t.key):this.cache.clear(this.name),this.keyChanges.next(e)}))}}ty.strategyName=pm.Local,ty.\u0275fac=function(t){return new(t||ty)(jn(Cz),jn(f2),jn($b),jn(Ko))},ty.\u0275prov=Yi({token:ty,factory:ty.\u0275fac});class ny extends wz{constructor(t,e,n,r){super(t,e),this.storage=t,this.cache=e,this.platformId=n,this.zone=r,this.name=ny.strategyName,ZM(this.platformId)&&this.listenExternalChanges()}listenExternalChanges(){window.addEventListener("storage",t=>this.zone.run(()=>{if(t.storageArea!==this.storage)return;const e=t.key;null!==t.key?this.cache.del(this.name,t.key):this.cache.clear(this.name),this.keyChanges.next(e)}))}}ny.strategyName=pm.Session,ny.\u0275fac=function(t){return new(t||ny)(jn(xz),jn(f2),jn($b),jn(Ko))},ny.\u0275prov=Yi({token:ny,factory:ny.\u0275fac});class iy{constructor(t){this.cache=t,this.keyChanges=new nn,this.isAvailable=!0,this.name=iy.strategyName}get(t){return Gr(this.cache.get(this.name,t))}set(t,e){return this.cache.set(this.name,t,e),this.keyChanges.next(t),Gr(e)}del(t){return this.cache.del(this.name,t),this.keyChanges.next(t),Gr(null)}clear(){return this.cache.clear(this.name),this.keyChanges.next(null),Gr(null)}}iy.strategyName=pm.InMemory,iy.\u0275fac=function(t){return new(t||iy)(jn(f2))},iy.\u0275prov=Yi({token:iy,factory:iy.\u0275fac});const S1=new Ji("STORAGE_STRATEGIES"),uQ=[{provide:S1,useClass:iy,multi:!0},{provide:S1,useClass:ty,multi:!0},{provide:S1,useClass:ny,multi:!0}],Az="invalid_strategy";let g0=(()=>{class i{constructor(e){this.strategies=e,this.registration$=new nn,e||(e=[]),this.strategies=e.reverse().map((n,r,s)=>n.name).map((n,r,s)=>s.indexOf(n)===r?r:null).filter(n=>null!==n).map(n=>e[n])}static get(e){if(!this.isStrategyRegistered(e))throw Error(Az);let n=this.index[e];return n.isAvailable||(n=this.index[pm.InMemory]),n}static set(e,n){this.index[e]=n}static clear(e){void 0!==e?delete this.index[e]:this.index={}}static isStrategyRegistered(e){return e in this.index}static hasRegistredStrategies(){return Object.keys(this.index).length>0}getStrategy(e){return i.get(e)}indexStrategies(){this.strategies.forEach(e=>this.register(e.name,e))}indexStrategy(e,n=!1){if(i.isStrategyRegistered(e)&&!n)return i.get(e);const r=this.strategies.find(s=>s.name===e);if(!r)throw new Error(Az);return this.register(e,r,n),r}register(e,n,r=!1){(!i.isStrategyRegistered(e)||r)&&(i.set(e,n),this.registration$.next(e))}}return i.index={},i.\u0275fac=function(e){return new(e||i)(jn(S1,8))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class Iz extends I1{}const vQ=[{provide:Iz,useFactory:function hQ(i){const t=i.indexStrategy(pm.Local);return new I1(t)},deps:[g0]},{provide:class pQ extends I1{},useFactory:function gQ(i){const t=i.indexStrategy(pm.Session);return new I1(t)},deps:[g0]}],Ez=new Ji("ngx_webstorage_config");function yQ(i){return i.indexStrategies(),()=>g0.index}let _Q=(()=>{class i{constructor(e,n){n?tv.consumeConfiguration(n):console.error("NgxWebstorage : Possible misconfiguration (The forRoot method usage is mandatory since the 3.0.0)")}static forRoot(e={}){return{ngModule:i,providers:[{provide:Ez,useValue:e},aQ,cQ,...vQ,...uQ,{provide:Nx,useFactory:yQ,deps:[g0],multi:!0}]}}}return i.\u0275fac=function(e){return new(e||i)(jn(g0),jn(Ez,8))},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({}),i})(),sC=(()=>{class i{constructor(e){this.storage=e,this.retrieveGraphs()||this.storage.store("graphs",[]),this.findAllStyles()||this.storage.store("styles",[]),this.retrievePreferences()||this.storage.store("preferences",{grid:!1})}retrievePreferences(){return JSON.parse(JSON.stringify(this.storage.retrieve("preferences")))}findAllStyles(){return this.retrieveStyles()}findStyle(e){let n=this.retrieveStyles(),r=_r.find(n,s=>e===s.id);if(r)return r}deleteStyle(e){let n=this.retrieveStyles();return _r.remove(n,r=>e===r.id),this.storage.store("styles",n),n}storeStyle(e){let n=this.retrieveStyles(),r=_r.find(n,s=>e.id===s.id);r?(r.id=e.id,r.tags=e.tags):n.push(e),this.storage.store("styles",n)}retrieveStyles(){return JSON.parse(JSON.stringify(this.storage.retrieve("styles")))}retrieveGraphs(){return JSON.parse(JSON.stringify(this.storage.retrieve("graphs")))}deleteGraph(e){let n=this.retrieveGraphs();return _r.remove(n,r=>r.id===e.id),this.storage.store("graphs",n),n}findAllGraphs(){return this.retrieveGraphs()}findGraph(e){let n=this.retrieveGraphs(),r=_r.find(n,s=>e===s.id);if(r)return r}storeGraph(e){let n=this.retrieveGraphs(),r=_r.find(n,s=>e.id===s.id);r?(r.id=e.id,r.style=e.style,r.label=e.label,r.edges=e.edges,r.nodes=e.nodes):n.push(e),this.storage.store("graphs",n)}storePreferences(e){this.storage.store("preferences",e)}}return i.\u0275fac=function(e){return new(e||i)(jn(Iz))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),p2=(()=>{class i{constructor(){}ascii_to_u8a(e){return new Uint8Array(e.length).map((r,s)=>e.codePointAt(s)??0)}u8a_to_hex(e){let n="";for(const r of e)n+=r.toString(16).padStart(2,"0");return n}hex_to_u8a(e){if(e.length%2)throw new Error("odd string length");const n=new Uint8Array(e.length/2);for(let r=0;r<n.length;r++){const s=e.slice(2*r,2*r+2);n[r]=parseInt(s,16)}return n}u8a_to_ascii(e){let n="";for(const r of e)n+=String.fromCharCode(r);return n}encode(e){return this.u8a_to_hex(this.ascii_to_u8a(e))}decode(e){return this.u8a_to_ascii(this.hex_to_u8a(e))}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Yi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Tz=new bz.Parser;let E1=(()=>{class i{constructor(e,n,r,s){this.messageService=e,this.databaseService=n,this.base16=r,this.logger=s}getGraphs(e){let n=this.databaseService.findAllGraphs(),r=new Array;return _r.each(n,s=>{r.push(s)}),r}getGraph(e){return this.databaseService.findGraph(e)}saveGraph(e){this.databaseService.storeGraph(e)}outputNodes(e){return _r.map(_r.sortBy(e?.nodes,n=>n.id),n=>{let r={uid:this.base16.decode(n.id),label:n.label,x:n.x,y:n.y,group:void 0===n.group?null:n.group,tag:void 0===n.tag?null:n.tag};return n.parent&&(r.parent=this.base16.decode(n.parent)),n.cdata&&(r.cdata=n.cdata),n.alias&&(r.alias=n.alias),r})}outputEdges(e){return _r.map(_r.sortBy(e?.edges,n=>n.id),n=>{let r={uid:this.base16.decode(n.id),label:n.label,source:this.base16.decode(n.source),target:this.base16.decode(n.target),tag:void 0===n.tag?null:n.tag};return n.cdata&&(r.cdata=n.cdata),r})}computeInstance(e,n){return e[n]?e[n].count++:e[n]={count:1},e[n]}buildId(e,n){let r=this.computeInstance(e,`${n.source}:${n.target}`),s="";return r.count>1&&(s="@"+(r.count-1)),`${n.source}:${n.target}${s}`}toGexf(e){this.logger.info("alias",e);let n=[];n.push('<?xml version="1.0" encoding="UTF-8"?>'),n.push('<gexf xmlns="http://gexf.net/1.2" version="1.2">'),n.push('<meta lastmodifieddate="2009-03-20">'),n.push("<creator>Gexf.net</creator>"),n.push("<description>A hello world! file</description>"),n.push("</meta>"),n.push(`<graph mode="static" defaultedgetype="directed" style="${e?.style}">`),n.push("<nodes>"),_r.each(_r.sortBy(this.outputNodes(e),"uid"),o=>{let l=" />";o.cdata&&(l=">"),null==o.alias&&(o.alias=""),n.push(null===o.tag?o.parent?`<node id="${o.uid}" parent="${parent}" label="${o.label}" alias="${o.alias}" group="${o.group}" x="${o.x}" y="${o.y}"${l}`:`<node id="${o.uid}" label="${o.label}" alias="${o.alias}" group="${o.group}" x="${o.x}" y="${o.y}"${l}`:o.parent?`<node id="${o.uid}" parent="${o.parent}" label="${o.label}" alias="${o.alias}" group="${o.group}" x="${o.x}" y="${o.y}" tag="${o.tag}"${l}`:`<node id="${o.uid}" label="${o.label}" alias="${o.alias}" group="${o.group}" x="${o.x}" y="${o.y}" tag="${o.tag}"${l}`),o.cdata&&(n.push(`<![CDATA[${o.cdata}]]>`),n.push("</node>"))}),n.push("</nodes>"),n.push("<edges>");let r=_r.map(this.outputEdges(e),o=>(o.uid=`${o.source}:${o.target}`,o)),s={};return _r.each(_r.sortBy(r,"uid"),o=>{let l=" />";o.cdata&&(l=">"),n.push(null===o.tag?`<edge id="${this.buildId(s,o)}" source="${o.source}" target="${o.target}" label="${o.label}"${l}`:`<edge id="${this.buildId(s,o)}" source="${o.source}" target="${o.target}" label="${o.label}" tag="${o.tag}"${l}`),o.cdata&&(n.push(`<![CDATA[${o.cdata}]]>`),n.push("</edge>"))}),n.push("</edges>"),n.push("</graph>"),n.push("</gexf>"),n}toGraphml(e){let n=[];n.push('<?xml version="1.0" encoding="UTF-8"?>'),n.push('<graphml xmlns="http://graphml.graphdrawing.org/xmlns" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://graphml.graphdrawing.org/xmlns/1.0/graphml.xsd">'),n.push(`<graph id="G" edgedefault="undirected" style="${e?.style}">`),_r.each(this.outputNodes(e),s=>{let o=" />";s.cdata&&(o=">"),n.push(null===s.tag?s.parent?`<node id="${s.uid}" parent="${parent}" label="${s.label}" group="${s.group}" x="${s.x}" y="${s.y}"${o}`:`<node id="${s.uid}" label="${s.label}" group="${s.group}" x="${s.x}" y="${s.y}"${o}`:s.parent?`<node id="${s.uid}" parent="${s.parent}" label="${s.label}" group="${s.group}" x="${s.x}" y="${s.y}" tag="${s.tag}"${o}`:`<node id="${s.uid}" label="${s.label}" group="${s.group}" x="${s.x}" y="${s.y}" tag="${s.tag}"${o}`),s.cdata&&(n.push(`<![CDATA[${s.cdata}]]>`),n.push("</node>"))});let r={};return _r.each(this.outputEdges(e),s=>{let o=" />";s.cdata&&(o=">"),n.push(null===s.tag?`<edge id="${this.buildId(r,s)}" source="${s.source}" target="${s.target}" label="${s.label}"${o}`:`<edge id="${this.buildId(r,s)}" source="${s.source}" target="${s.target}" label="${s.label}" tag="${s.tag}"${o}`),s.cdata&&(n.push(`<![CDATA[${s.cdata}]]>`),n.push("</edge>"))}),n.push("</graph>"),n.push("</graphml>"),n}filterCDATA(e){if(e){let n="";for(let r=1;r<e.length-1;r++)n+=e.charAt(r);return n}}loadGraphGexf(e,n,r){var s=this;return p0(function*(){return s.logger.info(`loadGraphGexf: ${e}`),new Promise(o=>{Tz.parseString(r,(l,u)=>{if(l)throw s.logger.error(l),l;let p={id:e,style:"default",label:n,nodes:[],edges:[]};_r.each(u.gexf.graph,v=>{p.style=v.$.style;let x={};s.logger.info("loading nodes",v.nodes),_r.each(v.nodes,I=>{_r.each(I.node,T=>{let F={id:s.base16.encode(T.$.id),x:parseFloat(T.$.x),y:parseFloat(T.$.y),cdata:s.filterCDATA(T._),alias:T.$.alias?T.$.alias:"",label:T.$.label?T.$.label:"",group:T.$.group?T.$.group:"",tag:T.$.tag?T.$.tag:""};x[F.id]=!0,T.$.parent&&(F.parent=s.base16.encode(T.$.parent)),p.nodes.push(F)})}),s.logger.info("loading edges",v.edges),_r.each(v.edges,I=>{_r.each(I.edge,T=>{let F={id:s.base16.encode(T.$.id),source:s.base16.encode(T.$.source),target:s.base16.encode(T.$.target),cdata:s.filterCDATA(T._),label:T.$.label?T.$.label:"",tag:T.$.tag?T.$.tag:""};if(!x[F.source])throw s.logger.error("source unkown",T.$),new Error(`source unkown ${T.$.source}`);if(!x[F.target])throw s.logger.error("target unkown",T.$),new Error(`target unkown ${T.$.target}`);p.edges.push(F)})})}),s.logger.info(p),o(p)})})})()}extractMlData(e,n){let r=_r.find(e.data,s=>{if(s.$.key===n)return s});return r?r._:0}loadGraphMl(e,n,r){var s=this;return p0(function*(){return s.logger.info(`loadGraphMl: ${e}`),new Promise(o=>{Tz.parseString(r,(l,u)=>{if(l)throw l;let p={id:e,style:"default",label:n,nodes:[],edges:[]},v=[];_r.each(u.graphml.graph.key,x=>{v.push({label:x.id,type:x["attr.type"]})}),_r.each(u.graphml.graph,x=>{_r.each(x.node,I=>{let T={id:I.$.id,label:s.extractMlData(I,"tooltip"),x:parseFloat(s.extractMlData(I,"x")),y:parseFloat(s.extractMlData(I,"y"))};p.nodes.push(T)}),_r.each(x.edge,I=>{p.edges.push({id:I.$.id,label:"default",source:I.$.source,target:I.$.target})})}),o(p)})})})()}uploadHandler(e,n,r){var s=this;return new Promise(o=>{let l=new FileReader;l.addEventListener("loadend",p0(function*(){let u=new String(l.result),p={id:n,style:"default",label:r,nodes:[],edges:[]};u.includes('xmlns="http://gexf')&&(s.messageService.add({severity:"info",summary:"Info",detail:`Load GEXF file to ${r}`}),p=yield s.loadGraphGexf(n,r,u.toString())),u.includes("http://graphml.graphdrawing.org")&&(s.messageService.add({severity:"info",summary:"Info",detail:`Load GRAPHML file to ${r}`}),p=yield s.loadGraphMl(n,r,u.toString())),0==p.nodes.length&&s.messageService.add({severity:"warn",summary:"warn",detail:`No node for ${r}`}),o(p)})),l.readAsText(e)})}}return i.\u0275fac=function(e){return new(e||i)(jn(fm),jn(sC),jn(p2),jn(Mp))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),T1=(()=>{class i{constructor(e){this.logger=e}fallbackCopyTextToClipboard(e){var n=document.createElement("textarea");n.value=e,n.style.top="0",n.style.left="0",n.style.position="fixed",document.body.appendChild(n),n.focus(),n.select();try{var r=document.execCommand("copy");this.logger.info("Fallback: Copying text command was "+(r?"successful":"unsuccessful"))}catch(o){this.logger.error("Fallback: Oops, unable to copy",o)}document.body.removeChild(n)}copyTextToClipboard(e){navigator.clipboard?navigator.clipboard.writeText(e).then(()=>{this.logger.info("Async: Copying to clipboard was successful!")},n=>{this.logger.error("Async: Could not copy text: ",n)}):this.fallbackCopyTextToClipboard(e)}}return i.\u0275fac=function(e){return new(e||i)(jn(Mp))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Mz=(()=>{class i{constructor(e,n){this._renderer=e,this._elementRef=n,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,n){this._renderer.setProperty(this._elementRef.nativeElement,e,n)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return i.\u0275fac=function(e){return new(e||i)(Zt(h),Zt(Xn))},i.\u0275dir=$r({type:i}),i})(),m0=(()=>{class i extends Mz{}return i.\u0275fac=function(){let t;return function(n){return(t||(t=Vo(i)))(n||i)}}(),i.\u0275dir=$r({type:i,features:[Za]}),i})();const bc=new Ji("NgValueAccessor"),xQ={provide:bc,useExisting:ds(()=>v0),multi:!0},AQ=new Ji("CompositionEventMode");let v0=(()=>{class i extends Mz{constructor(e,n,r){super(e,n),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function wQ(){const i=Zm()?Zm().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return i.\u0275fac=function(e){return new(e||i)(Zt(h),Zt(Xn),Zt(AQ,8))},i.\u0275dir=$r({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,n){1&e&&fn("input",function(s){return n._handleInput(s.target.value)})("blur",function(){return n.onTouched()})("compositionstart",function(){return n._compositionStart()})("compositionend",function(s){return n._compositionEnd(s.target.value)})},features:[To([xQ]),Za]}),i})();const Ah=new Ji("NgValidators"),s_=new Ji("NgAsyncValidators");function Vz(i){return null!=i}function Uz(i){return Tx(i)?or(i):i}function Hz(i){let t={};return i.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function Gz(i,t){return t.map(e=>e(i))}function Wz(i){return i.map(t=>function EQ(i){return!i.validate}(t)?t:e=>t.validate(e))}function g2(i){return null!=i?function jz(i){if(!i)return null;const t=i.filter(Vz);return 0==t.length?null:function(e){return Hz(Gz(e,t))}}(Wz(i)):null}function m2(i){return null!=i?function $z(i){if(!i)return null;const t=i.filter(Vz);return 0==t.length?null:function(e){return function bQ(...i){const t=Ye(i),{args:e,keys:n}=g3(i),r=new bt(s=>{const{length:o}=e;if(!o)return void s.complete();const l=new Array(o);let u=o,p=o;for(let v=0;v<o;v++){let x=!1;hl(e[v]).subscribe(yn(s,I=>{x||(x=!0,p--),l[v]=I},()=>u--,void 0,()=>{(!u||!x)&&(p||s.next(n?v3(n,l):l),s.complete())}))}});return t?r.pipe(m3(t)):r}(Gz(e,t).map(Uz)).pipe(be(Hz))}}(Wz(i)):null}function qz(i,t){return null===i?[t]:Array.isArray(i)?[...i,t]:[i,t]}function v2(i){return i?Array.isArray(i)?i:[i]:[]}function D1(i,t){return Array.isArray(i)?i.includes(t):i===t}function Kz(i,t){const e=v2(t);return v2(i).forEach(r=>{D1(e,r)||e.push(r)}),e}function Zz(i,t){return v2(t).filter(e=>!D1(i,e))}class Qz{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=g2(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=m2(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class sf extends Qz{get formDirective(){return null}get path(){return null}}class nv extends Qz{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let oC=(()=>{class i extends class Jz{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}{constructor(e){super(e)}}return i.\u0275fac=function(e){return new(e||i)(Zt(nv,2))},i.\u0275dir=$r({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,n){2&e&&Ep("ng-untouched",n.isUntouched)("ng-touched",n.isTouched)("ng-pristine",n.isPristine)("ng-dirty",n.isDirty)("ng-valid",n.isValid)("ng-invalid",n.isInvalid)("ng-pending",n.isPending)},features:[Za]}),i})();const vw="VALID",P1="INVALID",aC="PENDING",yw="DISABLED";function tV(i){return Array.isArray(i)?g2(i):i||null}function nV(i){return Array.isArray(i)?m2(i):i||null}function R1(i){return null!=i&&!Array.isArray(i)&&"object"==typeof i}function _w(i,t){(function A2(i,t){const e=function Xz(i){return i._rawValidators}(i);null!==t.validator?i.setValidators(qz(e,t.validator)):"function"==typeof e&&i.setValidators([e]);const n=function Yz(i){return i._rawAsyncValidators}(i);null!==t.asyncValidator?i.setAsyncValidators(qz(n,t.asyncValidator)):"function"==typeof n&&i.setAsyncValidators([n]);const r=()=>i.updateValueAndValidity();F1(t._rawValidators,r),F1(t._rawAsyncValidators,r)})(i,t),t.valueAccessor.writeValue(i.value),i.disabled&&t.valueAccessor.setDisabledState?.(!0),function NQ(i,t){t.valueAccessor.registerOnChange(e=>{i._pendingValue=e,i._pendingChange=!0,i._pendingDirty=!0,"change"===i.updateOn&&oV(i,t)})}(i,t),function zQ(i,t){const e=(n,r)=>{t.valueAccessor.writeValue(n),r&&t.viewToModelUpdate(n)};i.registerOnChange(e),t._registerOnDestroy(()=>{i._unregisterOnChange(e)})}(i,t),function BQ(i,t){t.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,"blur"===i.updateOn&&i._pendingChange&&oV(i,t),"submit"!==i.updateOn&&i.markAsTouched()})}(i,t),function FQ(i,t){if(t.valueAccessor.setDisabledState){const e=n=>{t.valueAccessor.setDisabledState(n)};i.registerOnDisabledChange(e),t._registerOnDestroy(()=>{i._unregisterOnDisabledChange(e)})}}(i,t)}function F1(i,t){i.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function oV(i,t){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function uV(i,t){const e=i.indexOf(t);e>-1&&i.splice(e,1)}function dV(i){return"object"==typeof i&&null!==i&&2===Object.keys(i).length&&"value"in i&&"disabled"in i}const qQ={provide:nv,useExisting:ds(()=>ry)},gV=(()=>Promise.resolve(null))();let ry=(()=>{class i extends nv{constructor(e,n,r,s,o){super(),this._changeDetectorRef=o,this.control=new class extends class sV{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=tV(this._rawValidators),this._composedAsyncValidatorFn=nV(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===vw}get invalid(){return this.status===P1}get pending(){return this.status==aC}get disabled(){return this.status===yw}get enabled(){return this.status!==yw}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=tV(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=nV(t)}addValidators(t){this.setValidators(Kz(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Kz(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(Zz(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(Zz(t,this._rawAsyncValidators))}hasValidator(t){return D1(this._rawValidators,t)}hasAsyncValidator(t){return D1(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=aC,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=yw,this.errors=null,this._forEachChild(n=>{n.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(n=>n(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=vw,this._forEachChild(n=>{n.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===vw||this.status===aC)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?yw:vw}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=aC,this._hasOwnPendingAsyncValidator=!0;const e=Uz(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(n=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(n,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((n,r)=>n&&n._find(r),this)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new qn,this.statusChanges=new qn}_calculateStatus(){return this._allControlsDisabled()?yw:this.errors?P1:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(aC)?aC:this._anyControlsHaveStatus(P1)?P1:vw}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){R1(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}}{constructor(t=null,e,n){super(function C2(i){return(R1(i)?i.validators:i)||null}(e),function x2(i,t){return(R1(t)?t.asyncValidators:i)||null}(n,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),R1(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=dV(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(n=>n(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){uV(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){uV(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){dV(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},this._registered=!1,this.update=new qn,this._parent=e,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=function S2(i,t){if(!t)return null;let e,n,r;return Array.isArray(t),t.forEach(s=>{s.constructor===v0?e=s:function HQ(i){return Object.getPrototypeOf(i.constructor)===m0}(s)?n=s:r=s}),r||n||e||null}(0,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const n=e.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),function I2(i,t){if(!i.hasOwnProperty("model"))return!1;const e=i.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){_w(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){gV.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const n=e.isDisabled.currentValue,r=0!==n&&$v(n);gV.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?function k1(i,t){return[...t.path,i]}(e,this._parent):[e]}}return i.\u0275fac=function(e){return new(e||i)(Zt(sf,9),Zt(Ah,10),Zt(s_,10),Zt(bc,10),Zt(Zo,8))},i.\u0275dir=$r({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[To([qQ]),Za,_a]}),i})(),vV=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({}),i})(),yJ=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({imports:[vV]}),i})(),B1=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({imports:[yJ]}),i})();class OV{}const sy="*";function oy(i,t){return{type:7,name:i,definitions:t,options:{}}}function Cc(i,t=null){return{type:4,styles:t,timings:i}}function FV(i,t=null){return{type:2,steps:i,options:t}}function Qa(i){return{type:6,styles:i,offset:null}}function _0(i,t,e){return{type:0,name:i,styles:t,options:e}}function Eu(i,t,e=null){return{type:1,expr:i,animation:t,options:e}}function lC(i,t=null){return{type:8,animation:i,options:t}}function CJ(i=null){return{type:9,options:i}}function NV(i,t=null){return{type:10,animation:i,options:t}}function xJ(i,t,e=null){return{type:11,selector:i,animation:t,options:e}}function BV(i){Promise.resolve(null).then(i)}class Cw{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){BV(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}class zV{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const s=this.players.length;0==s?BV(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++e==s&&this._onFinish()}),o.onDestroy(()=>{++n==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,l)=>Math.max(o,l.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(n=>{const r=n.totalTime?Math.min(1,e/n.totalTime):1;n.setPosition(r)})}getPosition(){const t=this.players.reduce((e,n)=>null===e||n.totalTime>e.totalTime?n:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}let Kt=(()=>{class i{static addClass(e,n){e.classList?e.classList.add(n):e.className+=" "+n}static addMultipleClasses(e,n){if(e.classList){let r=n.trim().split(" ");for(let s=0;s<r.length;s++)e.classList.add(r[s])}else{let r=n.split(" ");for(let s=0;s<r.length;s++)e.className+=" "+r[s]}}static removeClass(e,n){e.classList?e.classList.remove(n):e.className=e.className.replace(new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi")," ")}static hasClass(e,n){return e.classList?e.classList.contains(n):new RegExp("(^| )"+n+"( |$)","gi").test(e.className)}static siblings(e){return Array.prototype.filter.call(e.parentNode.children,function(n){return n!==e})}static find(e,n){return Array.from(e.querySelectorAll(n))}static findSingle(e,n){return e?e.querySelector(n):null}static index(e){let n=e.parentNode.childNodes,r=0;for(var s=0;s<n.length;s++){if(n[s]==e)return r;1==n[s].nodeType&&r++}return-1}static indexWithinGroup(e,n){let r=e.parentNode?e.parentNode.childNodes:[],s=0;for(var o=0;o<r.length;o++){if(r[o]==e)return s;r[o].attributes&&r[o].attributes[n]&&1==r[o].nodeType&&s++}return-1}static relativePosition(e,n){let r=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:this.getHiddenElementDimensions(e);const s=n.offsetHeight,o=n.getBoundingClientRect(),l=this.getViewport();let u,p;o.top+s+r.height>l.height?(u=-1*r.height,e.style.transformOrigin="bottom",o.top+u<0&&(u=-1*o.top)):(u=s,e.style.transformOrigin="top"),p=r.width>l.width?-1*o.left:o.left+r.width>l.width?-1*(o.left+r.width-l.width):0,e.style.top=u+"px",e.style.left=p+"px"}static absolutePosition(e,n){let T,F,r=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:this.getHiddenElementDimensions(e),s=r.height,o=r.width,l=n.offsetHeight,u=n.offsetWidth,p=n.getBoundingClientRect(),v=this.getWindowScrollTop(),x=this.getWindowScrollLeft(),I=this.getViewport();p.top+l+s>I.height?(T=p.top+v-s,e.style.transformOrigin="bottom",T<0&&(T=v)):(T=l+p.top+v,e.style.transformOrigin="top"),F=p.left+o>I.width?Math.max(0,p.left+x+u-o):p.left+x,e.style.top=T+"px",e.style.left=F+"px"}static getParents(e,n=[]){return null===e.parentNode?n:this.getParents(e.parentNode,n.concat([e.parentNode]))}static getScrollableParents(e){let n=[];if(e){let r=this.getParents(e);const s=/(auto|scroll)/,o=l=>{let u=window.getComputedStyle(l,null);return s.test(u.getPropertyValue("overflow"))||s.test(u.getPropertyValue("overflowX"))||s.test(u.getPropertyValue("overflowY"))};for(let l of r){let u=1===l.nodeType&&l.dataset.scrollselectors;if(u){let p=u.split(",");for(let v of p){let x=this.findSingle(l,v);x&&o(x)&&n.push(x)}}9!==l.nodeType&&o(l)&&n.push(l)}}return n}static getHiddenElementOuterHeight(e){e.style.visibility="hidden",e.style.display="block";let n=e.offsetHeight;return e.style.display="none",e.style.visibility="visible",n}static getHiddenElementOuterWidth(e){e.style.visibility="hidden",e.style.display="block";let n=e.offsetWidth;return e.style.display="none",e.style.visibility="visible",n}static getHiddenElementDimensions(e){let n={};return e.style.visibility="hidden",e.style.display="block",n.width=e.offsetWidth,n.height=e.offsetHeight,e.style.display="none",e.style.visibility="visible",n}static scrollInView(e,n){let r=getComputedStyle(e).getPropertyValue("borderTopWidth"),s=r?parseFloat(r):0,o=getComputedStyle(e).getPropertyValue("paddingTop"),l=o?parseFloat(o):0,u=e.getBoundingClientRect(),v=n.getBoundingClientRect().top+document.body.scrollTop-(u.top+document.body.scrollTop)-s-l,x=e.scrollTop,I=e.clientHeight,T=this.getOuterHeight(n);v<0?e.scrollTop=x+v:v+T>I&&(e.scrollTop=x+v-I+T)}static fadeIn(e,n){e.style.opacity=0;let r=+new Date,s=0,o=function(){s=+e.style.opacity.replace(",",".")+((new Date).getTime()-r)/n,e.style.opacity=s,r=+new Date,+s<1&&(window.requestAnimationFrame&&requestAnimationFrame(o)||setTimeout(o,16))};o()}static fadeOut(e,n){var r=1,l=50/n;let u=setInterval(()=>{(r-=l)<=0&&(r=0,clearInterval(u)),e.style.opacity=r},50)}static getWindowScrollTop(){let e=document.documentElement;return(window.pageYOffset||e.scrollTop)-(e.clientTop||0)}static getWindowScrollLeft(){let e=document.documentElement;return(window.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}static matches(e,n){var r=Element.prototype;return(r.matches||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||function(o){return-1!==[].indexOf.call(document.querySelectorAll(o),this)}).call(e,n)}static getOuterWidth(e,n){let r=e.offsetWidth;if(n){let s=getComputedStyle(e);r+=parseFloat(s.marginLeft)+parseFloat(s.marginRight)}return r}static getHorizontalPadding(e){let n=getComputedStyle(e);return parseFloat(n.paddingLeft)+parseFloat(n.paddingRight)}static getHorizontalMargin(e){let n=getComputedStyle(e);return parseFloat(n.marginLeft)+parseFloat(n.marginRight)}static innerWidth(e){let n=e.offsetWidth,r=getComputedStyle(e);return n+=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),n}static width(e){let n=e.offsetWidth,r=getComputedStyle(e);return n-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),n}static getInnerHeight(e){let n=e.offsetHeight,r=getComputedStyle(e);return n+=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom),n}static getOuterHeight(e,n){let r=e.offsetHeight;if(n){let s=getComputedStyle(e);r+=parseFloat(s.marginTop)+parseFloat(s.marginBottom)}return r}static getHeight(e){let n=e.offsetHeight,r=getComputedStyle(e);return n-=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom)+parseFloat(r.borderTopWidth)+parseFloat(r.borderBottomWidth),n}static getWidth(e){let n=e.offsetWidth,r=getComputedStyle(e);return n-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight)+parseFloat(r.borderLeftWidth)+parseFloat(r.borderRightWidth),n}static getViewport(){let e=window,n=document,r=n.documentElement,s=n.getElementsByTagName("body")[0];return{width:e.innerWidth||r.clientWidth||s.clientWidth,height:e.innerHeight||r.clientHeight||s.clientHeight}}static getOffset(e){var n=e.getBoundingClientRect();return{top:n.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:n.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)}}static replaceElementWith(e,n){let r=e.parentNode;if(!r)throw"Can't replace element";return r.replaceChild(n,e)}static getUserAgent(){return navigator.userAgent}static isIE(){var e=window.navigator.userAgent;return e.indexOf("MSIE ")>0||(e.indexOf("Trident/")>0?(e.indexOf("rv:"),!0):e.indexOf("Edge/")>0)}static isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}static isAndroid(){return/(android)/i.test(navigator.userAgent)}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}static appendChild(e,n){if(this.isElement(n))n.appendChild(e);else{if(!n.el||!n.el.nativeElement)throw"Cannot append "+n+" to "+e;n.el.nativeElement.appendChild(e)}}static removeChild(e,n){if(this.isElement(n))n.removeChild(e);else{if(!n.el||!n.el.nativeElement)throw"Cannot remove "+e+" from "+n;n.el.nativeElement.removeChild(e)}}static removeElement(e){"remove"in Element.prototype?e.remove():e.parentNode.removeChild(e)}static isElement(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}static calculateScrollbarWidth(e){if(e){let n=getComputedStyle(e);return e.offsetWidth-e.clientWidth-parseFloat(n.borderLeftWidth)-parseFloat(n.borderRightWidth)}{if(null!==this.calculatedScrollbarWidth)return this.calculatedScrollbarWidth;let n=document.createElement("div");n.className="p-scrollbar-measure",document.body.appendChild(n);let r=n.offsetWidth-n.clientWidth;return document.body.removeChild(n),this.calculatedScrollbarWidth=r,r}}static calculateScrollbarHeight(){if(null!==this.calculatedScrollbarHeight)return this.calculatedScrollbarHeight;let e=document.createElement("div");e.className="p-scrollbar-measure",document.body.appendChild(e);let n=e.offsetHeight-e.clientHeight;return document.body.removeChild(e),this.calculatedScrollbarWidth=n,n}static invokeElementMethod(e,n,r){e[n].apply(e,r)}static clearSelection(){if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().rangeCount>0&&window.getSelection().getRangeAt(0).getClientRects().length>0&&window.getSelection().removeAllRanges();else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch{}}static getBrowser(){if(!this.browser){let e=this.resolveUserAgent();this.browser={},e.browser&&(this.browser[e.browser]=!0,this.browser.version=e.version),this.browser.chrome?this.browser.webkit=!0:this.browser.webkit&&(this.browser.safari=!0)}return this.browser}static resolveUserAgent(){let e=navigator.userAgent.toLowerCase(),n=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:n[1]||"",version:n[2]||"0"}}static isInteger(e){return Number.isInteger?Number.isInteger(e):"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}static isHidden(e){return null===e.offsetParent}static getFocusableElements(e){let n=i.find(e,'button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]):not(.p-disabled)'),r=[];for(let s of n)"none"!=getComputedStyle(s).display&&"hidden"!=getComputedStyle(s).visibility&&r.push(s);return r}static generateZIndex(){return this.zindex=this.zindex||999,++this.zindex}}return i.zindex=1e3,i.calculatedScrollbarWidth=null,i.calculatedScrollbarHeight=null,i})();class xw{constructor(t,e=(()=>{})){this.element=t,this.listener=e}bindScrollListener(){this.scrollableParents=Kt.getScrollableParents(this.element);for(let t=0;t<this.scrollableParents.length;t++)this.scrollableParents[t].addEventListener("scroll",this.listener)}unbindScrollListener(){if(this.scrollableParents)for(let t=0;t<this.scrollableParents.length;t++)this.scrollableParents[t].removeEventListener("scroll",this.listener)}destroy(){this.unbindScrollListener(),this.element=null,this.listener=null,this.scrollableParents=null}}let o_=(()=>{class i{constructor(e,n,r){this.el=e,this.zone=n,this.config=r,this.escape=!0,this.fitContent=!0,this._tooltipOptions={tooltipPosition:"right",tooltipEvent:"hover",appendTo:"body",tooltipZIndex:"auto",escape:!0,positionTop:0,positionLeft:0}}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this.deactivate()}ngAfterViewInit(){this.zone.runOutsideAngular(()=>{if("hover"===this.getOption("tooltipEvent"))this.mouseEnterListener=this.onMouseEnter.bind(this),this.mouseLeaveListener=this.onMouseLeave.bind(this),this.clickListener=this.onClick.bind(this),this.el.nativeElement.addEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.addEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.addEventListener("click",this.clickListener);else if("focus"===this.getOption("tooltipEvent")){this.focusListener=this.onFocus.bind(this),this.blurListener=this.onBlur.bind(this);let e=this.getTarget(this.el.nativeElement);e.addEventListener("focus",this.focusListener),e.addEventListener("blur",this.blurListener)}})}ngOnChanges(e){e.tooltipPosition&&this.setOption({tooltipPosition:e.tooltipPosition.currentValue}),e.tooltipEvent&&this.setOption({tooltipEvent:e.tooltipEvent.currentValue}),e.appendTo&&this.setOption({appendTo:e.appendTo.currentValue}),e.positionStyle&&this.setOption({positionStyle:e.positionStyle.currentValue}),e.tooltipStyleClass&&this.setOption({tooltipStyleClass:e.tooltipStyleClass.currentValue}),e.tooltipZIndex&&this.setOption({tooltipZIndex:e.tooltipZIndex.currentValue}),e.escape&&this.setOption({escape:e.escape.currentValue}),e.showDelay&&this.setOption({showDelay:e.showDelay.currentValue}),e.hideDelay&&this.setOption({hideDelay:e.hideDelay.currentValue}),e.life&&this.setOption({life:e.life.currentValue}),e.positionTop&&this.setOption({positionTop:e.positionTop.currentValue}),e.positionLeft&&this.setOption({positionLeft:e.positionLeft.currentValue}),e.disabled&&this.setOption({disabled:e.disabled.currentValue}),e.text&&(this.setOption({tooltipLabel:e.text.currentValue}),this.active&&(e.text.currentValue?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide())),e.tooltipOptions&&(this._tooltipOptions={...this._tooltipOptions,...e.tooltipOptions.currentValue},this.deactivate(),this.active&&(this.getOption("tooltipLabel")?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide()))}onMouseEnter(e){!this.container&&!this.showTimeout&&this.activate()}onMouseLeave(e){this.deactivate()}onFocus(e){this.activate()}onBlur(e){this.deactivate()}onClick(e){this.deactivate()}activate(){if(this.active=!0,this.clearHideTimeout(),this.getOption("showDelay")?this.showTimeout=setTimeout(()=>{this.show()},this.getOption("showDelay")):this.show(),this.getOption("life")){let e=this.getOption("showDelay")?this.getOption("life")+this.getOption("showDelay"):this.getOption("life");this.hideTimeout=setTimeout(()=>{this.hide()},e)}}deactivate(){this.active=!1,this.clearShowTimeout(),this.getOption("hideDelay")?(this.clearHideTimeout(),this.hideTimeout=setTimeout(()=>{this.hide()},this.getOption("hideDelay"))):this.hide()}create(){this.container&&(this.clearHideTimeout(),this.remove()),this.container=document.createElement("div");let e=document.createElement("div");e.className="p-tooltip-arrow",this.container.appendChild(e),this.tooltipText=document.createElement("div"),this.tooltipText.className="p-tooltip-text",this.updateText(),this.getOption("positionStyle")&&(this.container.style.position=this.getOption("positionStyle")),this.container.appendChild(this.tooltipText),"body"===this.getOption("appendTo")?document.body.appendChild(this.container):"target"===this.getOption("appendTo")?Kt.appendChild(this.container,this.el.nativeElement):Kt.appendChild(this.container,this.getOption("appendTo")),this.container.style.display="inline-block",this.fitContent&&(this.container.style.width="fit-content")}show(){!this.getOption("tooltipLabel")||this.getOption("disabled")||(this.create(),this.align(),Kt.fadeIn(this.container,250),"auto"===this.getOption("tooltipZIndex")?Dl.set("tooltip",this.container,this.config.zIndex.tooltip):this.container.style.zIndex=this.getOption("tooltipZIndex"),this.bindDocumentResizeListener(),this.bindScrollListener())}hide(){"auto"===this.getOption("tooltipZIndex")&&Dl.clear(this.container),this.remove()}updateText(){this.getOption("escape")?(this.tooltipText.innerHTML="",this.tooltipText.appendChild(document.createTextNode(this.getOption("tooltipLabel")))):this.tooltipText.innerHTML=this.getOption("tooltipLabel")}align(){switch(this.getOption("tooltipPosition")){case"top":this.alignTop(),this.isOutOfBounds()&&(this.alignBottom(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"bottom":this.alignBottom(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"left":this.alignLeft(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()));break;case"right":this.alignRight(),this.isOutOfBounds()&&(this.alignLeft(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()))}}getHostOffset(){if("body"===this.getOption("appendTo")||"target"===this.getOption("appendTo")){let e=this.el.nativeElement.getBoundingClientRect();return{left:e.left+Kt.getWindowScrollLeft(),top:e.top+Kt.getWindowScrollTop()}}return{left:0,top:0}}alignRight(){this.preAlign("right");let e=this.getHostOffset(),n=e.left+Kt.getOuterWidth(this.el.nativeElement),r=e.top+(Kt.getOuterHeight(this.el.nativeElement)-Kt.getOuterHeight(this.container))/2;this.container.style.left=n+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignLeft(){this.preAlign("left");let e=this.getHostOffset(),n=e.left-Kt.getOuterWidth(this.container),r=e.top+(Kt.getOuterHeight(this.el.nativeElement)-Kt.getOuterHeight(this.container))/2;this.container.style.left=n+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignTop(){this.preAlign("top");let e=this.getHostOffset(),n=e.left+(Kt.getOuterWidth(this.el.nativeElement)-Kt.getOuterWidth(this.container))/2,r=e.top-Kt.getOuterHeight(this.container);this.container.style.left=n+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignBottom(){this.preAlign("bottom");let e=this.getHostOffset(),n=e.left+(Kt.getOuterWidth(this.el.nativeElement)-Kt.getOuterWidth(this.container))/2,r=e.top+Kt.getOuterHeight(this.el.nativeElement);this.container.style.left=n+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}setOption(e){this._tooltipOptions={...this._tooltipOptions,...e}}getOption(e){return this._tooltipOptions[e]}getTarget(e){return Kt.hasClass(e,"p-inputwrapper")?Kt.findSingle(e,"input"):e}preAlign(e){this.container.style.left="-999px",this.container.style.top="-999px";let n="p-tooltip p-component p-tooltip-"+e;this.container.className=this.getOption("tooltipStyleClass")?n+" "+this.getOption("tooltipStyleClass"):n}isOutOfBounds(){let e=this.container.getBoundingClientRect(),n=e.top,r=e.left,s=Kt.getOuterWidth(this.container),o=Kt.getOuterHeight(this.container),l=Kt.getViewport();return r+s>l.width||r<0||n<0||n+o>l.height}onWindowResize(e){this.hide()}bindDocumentResizeListener(){this.zone.runOutsideAngular(()=>{this.resizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.resizeListener)})}unbindDocumentResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new xw(this.el.nativeElement,()=>{this.container&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}unbindEvents(){if("hover"===this.getOption("tooltipEvent"))this.el.nativeElement.removeEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.removeEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.removeEventListener("click",this.clickListener);else if("focus"===this.getOption("tooltipEvent")){let e=this.getTarget(this.el.nativeElement);e.removeEventListener("focus",this.focusListener),e.removeEventListener("blur",this.blurListener)}this.unbindDocumentResizeListener()}remove(){this.container&&this.container.parentElement&&("body"===this.getOption("appendTo")?document.body.removeChild(this.container):"target"===this.getOption("appendTo")?this.el.nativeElement.removeChild(this.container):Kt.removeChild(this.container,this.getOption("appendTo"))),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.clearTimeouts(),this.container=null,this.scrollHandler=null}clearShowTimeout(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=null)}clearHideTimeout(){this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout()}ngOnDestroy(){this.unbindEvents(),this.container&&Dl.clear(this.container),this.remove(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null)}}return i.\u0275fac=function(e){return new(e||i)(Zt(Xn),Zt(Ko),Zt(Tp))},i.\u0275dir=$r({type:i,selectors:[["","pTooltip",""]],hostAttrs:[1,"p-element"],inputs:{tooltipPosition:"tooltipPosition",tooltipEvent:"tooltipEvent",appendTo:"appendTo",positionStyle:"positionStyle",tooltipStyleClass:"tooltipStyleClass",tooltipZIndex:"tooltipZIndex",escape:"escape",showDelay:"showDelay",hideDelay:"hideDelay",life:"life",positionTop:"positionTop",positionLeft:"positionLeft",fitContent:"fitContent",text:["pTooltip","text"],disabled:["tooltipDisabled","disabled"],tooltipOptions:"tooltipOptions"},features:[_a]}),i})(),iv=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({imports:[Ns]}),i})();const wJ=["element"],AJ=["content"];function IJ(i,t){1&i&&Ki(0)}const O2=function(i,t){return{$implicit:i,options:t}};function SJ(i,t){if(1&i&&(qr(0),Ze(1,IJ,1,0,"ng-container",7),Xr()),2&i){const e=_e(2);Me(1),ve("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",ys(2,O2,e.loadedItems,e.getContentOptions()))}}function EJ(i,t){1&i&&Ki(0)}function TJ(i,t){if(1&i&&(qr(0),Ze(1,EJ,1,0,"ng-container",7),Xr()),2&i){const e=t.$implicit,n=t.index,r=_e(3);Me(1),ve("ngTemplateOutlet",r.itemTemplate)("ngTemplateOutletContext",ys(2,O2,e,r.getOptions(n)))}}const MJ=function(i){return{"p-scroller-loading":i}};function DJ(i,t){if(1&i&&(lt(0,"div",8,9),Ze(2,TJ,2,5,"ng-container",10),ct()),2&i){const e=_e(2);ve("ngClass",Bi(4,MJ,e.d_loading))("ngStyle",e.contentStyle),Me(2),ve("ngForOf",e.loadedItems)("ngForTrackBy",e._trackBy||e.index)}}function LJ(i,t){1&i&&ii(0,"div",11),2&i&&ve("ngStyle",_e(2).spacerStyle)}function PJ(i,t){1&i&&Ki(0)}const RJ=function(i){return{numCols:i}},VV=function(i){return{options:i}};function kJ(i,t){if(1&i&&(qr(0),Ze(1,PJ,1,0,"ng-container",7),Xr()),2&i){const e=t.index,n=_e(4);Me(1),ve("ngTemplateOutlet",n.loaderTemplate)("ngTemplateOutletContext",Bi(4,VV,n.getLoaderOptions(e,n.both&&Bi(2,RJ,n._numItemsInViewport.cols))))}}function OJ(i,t){if(1&i&&(qr(0),Ze(1,kJ,2,6,"ng-container",14),Xr()),2&i){const e=_e(3);Me(1),ve("ngForOf",e.loaderArr)}}function FJ(i,t){1&i&&Ki(0)}const NJ=function(){return{styleClass:"p-scroller-loading-icon"}};function BJ(i,t){if(1&i&&(qr(0),Ze(1,FJ,1,0,"ng-container",7),Xr()),2&i){const e=_e(4);Me(1),ve("ngTemplateOutlet",e.loaderIconTemplate)("ngTemplateOutletContext",Bi(3,VV,Mo(2,NJ)))}}function zJ(i,t){1&i&&ii(0,"i",16)}function VJ(i,t){if(1&i&&(Ze(0,BJ,2,5,"ng-container",0),Ze(1,zJ,1,0,"ng-template",null,15,vc)),2&i){const e=co(2);ve("ngIf",_e(3).loaderIconTemplate)("ngIfElse",e)}}const UJ=function(i){return{"p-component-overlay":i}};function HJ(i,t){if(1&i&&(lt(0,"div",12),Ze(1,OJ,2,1,"ng-container",0),Ze(2,VJ,3,2,"ng-template",null,13,vc),ct()),2&i){const e=co(3),n=_e(2);ve("ngClass",Bi(3,UJ,!n.loaderTemplate)),Me(1),ve("ngIf",n.loaderTemplate)("ngIfElse",e)}}const GJ=function(i,t){return{"p-scroller":!0,"p-both-scroll":i,"p-horizontal-scroll":t}};function WJ(i,t){if(1&i){const e=Pi();qr(0),lt(1,"div",2,3),fn("scroll",function(r){return wt(e),At(_e().onContainerScroll(r))}),Ze(3,SJ,2,5,"ng-container",0),Ze(4,DJ,3,6,"ng-template",null,4,vc),Ze(6,LJ,1,1,"div",5),Ze(7,HJ,4,5,"div",6),ct(),Xr()}if(2&i){const e=co(5),n=_e();Me(1),Ur(n._styleClass),ve("ngStyle",n._style)("ngClass",ys(10,GJ,n.both,n.horizontal)),mr("id",n._id)("tabindex",n.tabindex),Me(2),ve("ngIf",n.contentTemplate)("ngIfElse",e),Me(3),ve("ngIf",n._showSpacer),Me(1),ve("ngIf",!n.loaderDisabled&&n._showLoader&&n.d_loading)}}function jJ(i,t){1&i&&Ki(0)}const $J=function(i,t){return{rows:i,columns:t}};function qJ(i,t){if(1&i&&(qr(0),Ze(1,jJ,1,0,"ng-container",7),Xr()),2&i){const e=_e(2);Me(1),ve("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",ys(5,O2,e.items,ys(2,$J,e._items,e.loadedColumns)))}}function XJ(i,t){if(1&i&&($u(0),Ze(1,qJ,2,8,"ng-container",17)),2&i){const e=_e();Me(1),ve("ngIf",e.contentTemplate)}}const YJ=["*"];let z1=(()=>{class i{constructor(e,n){this.cd=e,this.zone=n,this.onLazyLoad=new qn,this.onScroll=new qn,this.onScrollIndexChange=new qn,this._tabindex=0,this._itemSize=0,this._orientation="vertical",this._delay=0,this._resizeDelay=10,this._lazy=!1,this._disabled=!1,this._loaderDisabled=!1,this._showSpacer=!0,this._showLoader=!1,this._autoSize=!1,this.d_loading=!1,this.first=0,this.last=0,this.numItemsInViewport=0,this.lastScrollPos=0,this.loaderArr=[],this.spacerStyle={},this.contentStyle={},this.initialized=!1,this._disabled||this.zone.runOutsideAngular(()=>{this.windowResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.windowResizeListener),window.addEventListener("orientationchange",this.windowResizeListener)})}get id(){return this._id}set id(e){this._id=e}get style(){return this._style}set style(e){this._style=e}get styleClass(){return this._styleClass}set styleClass(e){this._styleClass=e}get tabindex(){return this._tabindex}set tabindex(e){this._tabindex=e}get items(){return this._items}set items(e){this._items=e}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=e}get scrollHeight(){return this._scrollHeight}set scrollHeight(e){this._scrollHeight=e}get scrollWidth(){return this._scrollWidth}set scrollWidth(e){this._scrollWidth=e}get orientation(){return this._orientation}set orientation(e){this._orientation=e}get delay(){return this._delay}set delay(e){this._delay=e}get resizeDelay(){return this._resizeDelay}set resizeDelay(e){this._resizeDelay=e}get lazy(){return this._lazy}set lazy(e){this._lazy=e}get disabled(){return this._disabled}set disabled(e){this._disabled=e}get loaderDisabled(){return this._loaderDisabled}set loaderDisabled(e){this._loaderDisabled=e}get columns(){return this._columns}set columns(e){this._columns=e}get showSpacer(){return this._showSpacer}set showSpacer(e){this._showSpacer=e}get showLoader(){return this._showLoader}set showLoader(e){this._showLoader=e}get numToleratedItems(){return this._numToleratedItems}set numToleratedItems(e){this._numToleratedItems=e}get loading(){return this._loading}set loading(e){this._loading=e}get autoSize(){return this._autoSize}set autoSize(e){this._autoSize=e}get trackBy(){return this._trackBy}set trackBy(e){this._trackBy=e}get options(){return this._options}set options(e){this._options=e,e&&"object"==typeof e&&Object.entries(e).forEach(([n,r])=>this[`_${n}`]!==r&&(this[`_${n}`]=r))}get vertical(){return"vertical"===this._orientation}get horizontal(){return"horizontal"===this._orientation}get both(){return"both"===this._orientation}get loadedItems(){return this._items&&!this.d_loading?this.both?this._items.slice(this.first.rows,this.last.rows).map(e=>this._columns?e:e.slice(this.first.cols,this.last.cols)):this.horizontal&&this._columns?this._items:this._items.slice(this.first,this.last):[]}get loadedRows(){return this.d_loading?this._loaderDisabled?this.loaderArr:[]:this.loadedItems}get loadedColumns(){return this._columns&&(this.both||this.horizontal)?this.d_loading&&this._loaderDisabled?this.both?this.loaderArr[0]:this.loaderArr:this._columns.slice(this.both?this.first.cols:this.first,this.both?this.last.cols:this.last):this._columns}ngOnInit(){this.setInitialState()}ngOnChanges(e){let n=!1;if(e.loading){const{previousValue:r,currentValue:s}=e.loading;this.lazy&&r!==s&&s!==this.d_loading&&(this.d_loading=s,n=!0)}if(this.initialized&&!n&&(e.items||e.itemSize||e.scrollHeight||e.scrollWidth)&&this.init(),e.orientation&&(this.lastScrollPos=this.both?{top:0,left:0}:0),e.numToleratedItems){const{previousValue:r,currentValue:s}=e.numToleratedItems;r!==s&&s!==this.d_numToleratedItems&&(this.d_numToleratedItems=s)}if(e.options){const{previousValue:r,currentValue:s}=e.options;this.lazy&&r?.loading!==s?.loading&&s?.loading!==this.d_loading&&(this.d_loading=s.loading),r?.numToleratedItems!==s?.numToleratedItems&&s?.numToleratedItems!==this.d_numToleratedItems&&(this.d_numToleratedItems=s.numToleratedItems)}}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"content":this.contentTemplate=e.template;break;case"item":default:this.itemTemplate=e.template;break;case"loader":this.loaderTemplate=e.template;break;case"loadericon":this.loaderIconTemplate=e.template}})}ngAfterViewInit(){this.setContentEl(this.contentEl),this.init(),this.defaultWidth=Kt.getWidth(this.elementViewChild.nativeElement),this.defaultHeight=Kt.getHeight(this.elementViewChild.nativeElement),this.initialized=!0}ngAfterViewChecked(){this.calculateAutoSize()}ngOnDestroy(){this.windowResizeListener&&(window.removeEventListener("resize",this.windowResizeListener),window.removeEventListener("orientationchange",this.windowResizeListener),this.windowResizeListener=null)}init(){this._disabled||(this.setSize(),this.calculateOptions(),this.setSpacerSize(),this.cd.detectChanges())}setContentEl(e){this.contentEl=e||this.contentViewChild?.nativeElement||Kt.findSingle(this.elementViewChild?.nativeElement,".p-scroller-content")}setInitialState(){this.first=this.both?{rows:0,cols:0}:0,this.last=this.both?{rows:0,cols:0}:0,this.numItemsInViewport=this.both?{rows:0,cols:0}:0,this.lastScrollPos=this.both?{top:0,left:0}:0,this.d_loading=this._loading||!1,this.d_numToleratedItems=this._numToleratedItems}getElementRef(){return this.elementViewChild}scrollTo(e){this.lastScrollPos=this.both?{top:0,left:0}:0,this.elementViewChild?.nativeElement?.scrollTo(e)}scrollToIndex(e,n="auto"){const{numToleratedItems:r}=this.calculateNumItems(),s=this.getContentPosition(),o=(p=0,v)=>p<=v?0:p,l=(p,v,x)=>p*v+x,u=(p=0,v=0)=>this.scrollTo({left:p,top:v,behavior:n});if(this.both){const p={rows:o(e[0],r[0]),cols:o(e[1],r[1])};(p.rows!==this.first.rows||p.cols!==this.first.cols)&&u(l(p.cols,this._itemSize[1],s.left),l(p.rows,this._itemSize[0],s.top))}else{const p=o(e,r);p!==this.first&&(this.horizontal?u(l(p,this._itemSize,s.left),0):u(0,l(p,this._itemSize,s.top)))}}scrollInView(e,n,r="auto"){if(n){const{first:s,viewport:o}=this.getRenderedRange(),l=(v=0,x=0)=>this.scrollTo({left:v,top:x,behavior:r}),p="to-end"===n;if("to-start"===n){if(this.both)o.first.rows-s.rows>e[0]?l(o.first.cols*this._itemSize[1],(o.first.rows-1)*this._itemSize[0]):o.first.cols-s.cols>e[1]&&l((o.first.cols-1)*this._itemSize[1],o.first.rows*this._itemSize[0]);else if(o.first-s>e){const v=(o.first-1)*this._itemSize;this.horizontal?l(v,0):l(0,v)}}else if(p)if(this.both)o.last.rows-s.rows<=e[0]+1?l(o.first.cols*this._itemSize[1],(o.first.rows+1)*this._itemSize[0]):o.last.cols-s.cols<=e[1]+1&&l((o.first.cols+1)*this._itemSize[1],o.first.rows*this._itemSize[0]);else if(o.last-s<=e+1){const v=(o.first+1)*this._itemSize;this.horizontal?l(v,0):l(0,v)}}else this.scrollToIndex(e,r)}getRenderedRange(){const e=(s,o)=>Math.floor(s/(o||s));let n=this.first,r=0;if(this.elementViewChild?.nativeElement){const{scrollTop:s,scrollLeft:o}=this.elementViewChild.nativeElement;this.both?(n={rows:e(s,this._itemSize[0]),cols:e(o,this._itemSize[1])},r={rows:n.rows+this.numItemsInViewport.rows,cols:n.cols+this.numItemsInViewport.cols}):(n=e(this.horizontal?o:s,this._itemSize),r=n+this.numItemsInViewport)}return{first:this.first,last:this.last,viewport:{first:n,last:r}}}calculateNumItems(){const e=this.getContentPosition(),n=this.elementViewChild?.nativeElement?this.elementViewChild.nativeElement.offsetWidth-e.left:0,r=this.elementViewChild?.nativeElement?this.elementViewChild.nativeElement.offsetHeight-e.top:0,s=(p,v)=>Math.ceil(p/(v||p)),o=p=>Math.ceil(p/2),l=this.both?{rows:s(r,this._itemSize[0]),cols:s(n,this._itemSize[1])}:s(this.horizontal?n:r,this._itemSize);return{numItemsInViewport:l,numToleratedItems:this.d_numToleratedItems||(this.both?[o(l.rows),o(l.cols)]:o(l))}}calculateOptions(){const{numItemsInViewport:e,numToleratedItems:n}=this.calculateNumItems(),r=(l,u,p,v=!1)=>this.getLast(l+u+(l<p?2:3)*p,v),s=this.first,o=this.both?{rows:r(this.first.rows,e.rows,n[0]),cols:r(this.first.cols,e.cols,n[1],!0)}:r(this.first,e,n);this.last=o,this.numItemsInViewport=e,this.d_numToleratedItems=n,this.showLoader&&(this.loaderArr=this.both?Array.from({length:e.rows}).map(()=>Array.from({length:e.cols})):Array.from({length:e})),this._lazy&&this.handleEvents("onLazyLoad",{first:s,last:o})}calculateAutoSize(){this._autoSize&&!this.d_loading&&Promise.resolve().then(()=>{if(this.contentEl){this.contentEl.style.minHeight=this.contentEl.style.minWidth="auto";const{offsetWidth:e,offsetHeight:n}=this.contentEl;(this.both||this.horizontal)&&(this.elementViewChild.nativeElement.style.width=(e<this.defaultWidth?e:this.defaultWidth)+"px"),(this.both||this.vertical)&&(this.elementViewChild.nativeElement.style.height=(n<this.defaultHeight?n:this.defaultHeight)+"px"),this.contentEl.style.minHeight=this.contentEl.style.minWidth=""}})}getLast(e=0,n=!1){return this._items?Math.min(n?(this._columns||this._items[0]).length:this._items.length,e):0}getContentPosition(){if(this.contentEl){const e=getComputedStyle(this.contentEl),n=parseInt(e.paddingLeft,10)+Math.max(parseInt(e.left,10),0),r=parseInt(e.paddingRight,10)+Math.max(parseInt(e.right,10),0),s=parseInt(e.paddingTop,10)+Math.max(parseInt(e.top,10),0),o=parseInt(e.paddingBottom,10)+Math.max(parseInt(e.bottom,10),0);return{left:n,right:r,top:s,bottom:o,x:n+r,y:s+o}}return{left:0,right:0,top:0,bottom:0,x:0,y:0}}setSize(){if(this.elementViewChild?.nativeElement){const e=this.elementViewChild.nativeElement.parentElement.parentElement,n=this._scrollWidth||`${this.elementViewChild.nativeElement.offsetWidth||e.offsetWidth}px`,r=this._scrollHeight||`${this.elementViewChild.nativeElement.offsetHeight||e.offsetHeight}px`,s=(o,l)=>this.elementViewChild.nativeElement.style[o]=l;this.both||this.horizontal?(s("height",r),s("width",n)):s("height",r)}}setSpacerSize(){if(this._items){const e=this.getContentPosition(),n=(r,s,o,l=0)=>this.spacerStyle={...this.spacerStyle,[`${r}`]:(s||[]).length*o+l+"px"};this.both?(n("height",this._items,this._itemSize[0],e.y),n("width",this._columns||this._items[1],this._itemSize[1],e.x)):this.horizontal?n("width",this._columns||this._items,this._itemSize,e.x):n("height",this._items,this._itemSize,e.y)}}setContentPosition(e){if(this.contentEl){const n=e?e.first:this.first,r=(o,l)=>o*l,s=(o=0,l=0)=>this.contentStyle={...this.contentStyle,transform:`translate3d(${o}px, ${l}px, 0)`};if(this.both)s(r(n.cols,this._itemSize[1]),r(n.rows,this._itemSize[0]));else{const o=r(n,this._itemSize);this.horizontal?s(o,0):s(0,o)}}}onScrollPositionChange(e){const n=e.target,r=this.getContentPosition(),s=(X,ce)=>X?X>ce?X-ce:X:0,o=(X,ce)=>Math.floor(X/(ce||X)),l=(X,ce,we,ye,Ae,We)=>X<=Ae?Ae:We?we-ye-Ae:ce+Ae-1,u=(X,ce,we,ye,Ae,We,ot)=>X<=We?0:Math.max(0,ot?X<ce?we:X-We:X>ce?we:X-2*We),p=(X,ce,we,ye,Ae,We=!1)=>{let ot=ce+ye+2*Ae;return X>=Ae&&(ot+=Ae+1),this.getLast(ot,We)},v=s(n.scrollTop,r.top),x=s(n.scrollLeft,r.left);let I=this.both?{rows:0,cols:0}:0,T=this.last,F=!1,j=this.lastScrollPos;if(this.both){const X=this.lastScrollPos.top<=v,ce=this.lastScrollPos.left<=x,we={rows:o(v,this._itemSize[0]),cols:o(x,this._itemSize[1])},ye={rows:l(we.rows,this.first.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0],X),cols:l(we.cols,this.first.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],ce)};I={rows:u(we.rows,ye.rows,this.first.rows,0,0,this.d_numToleratedItems[0],X),cols:u(we.cols,ye.cols,this.first.cols,0,0,this.d_numToleratedItems[1],ce)},T={rows:p(we.rows,I.rows,0,this.numItemsInViewport.rows,this.d_numToleratedItems[0]),cols:p(we.cols,I.cols,0,this.numItemsInViewport.cols,this.d_numToleratedItems[1],!0)},F=I.rows!==this.first.rows||T.rows!==this.last.rows||I.cols!==this.first.cols||T.cols!==this.last.cols,j={top:v,left:x}}else{const X=this.horizontal?x:v,ce=this.lastScrollPos<=X,we=o(X,this._itemSize);I=u(we,l(we,this.first,this.last,this.numItemsInViewport,this.d_numToleratedItems,ce),this.first,0,0,this.d_numToleratedItems,ce),T=p(we,I,0,this.numItemsInViewport,this.d_numToleratedItems),F=I!==this.first||T!==this.last,j=X}return{first:I,last:T,isRangeChanged:F,scrollPos:j}}onScrollChange(e){const{first:n,last:r,isRangeChanged:s,scrollPos:o}=this.onScrollPositionChange(e);if(s){const l={first:n,last:r};this.setContentPosition(l),this.first=n,this.last=r,this.lastScrollPos=o,this.handleEvents("onScrollIndexChange",l),this._lazy&&this.handleEvents("onLazyLoad",l)}}onContainerScroll(e){if(this.handleEvents("onScroll",{originalEvent:e}),this._delay){if(this.scrollTimeout&&clearTimeout(this.scrollTimeout),!this.d_loading&&this.showLoader){const{isRangeChanged:n}=this.onScrollPositionChange(e);n&&(this.d_loading=!0,this.cd.detectChanges())}this.scrollTimeout=setTimeout(()=>{this.onScrollChange(e),this.d_loading&&this.showLoader&&(!this._lazy||void 0===this._loading)&&(this.d_loading=!1,this.cd.detectChanges())},this._delay)}else this.onScrollChange(e)}onWindowResize(){this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{if(this.elementViewChild){const[e,n]=[Kt.getWidth(this.elementViewChild.nativeElement),Kt.getHeight(this.elementViewChild.nativeElement)],[r,s]=[e!==this.defaultWidth,n!==this.defaultHeight];(this.both?r||s:this.horizontal?r:this.vertical&&s)&&this.zone.run(()=>{this.d_numToleratedItems=this._numToleratedItems,this.defaultWidth=e,this.defaultHeight=n,this.init()})}},this._resizeDelay)}handleEvents(e,n){return this.options&&this.options[e]?this.options[e](n):this[e].emit(n)}getContentOptions(){return{contentStyleClass:"p-scroller-content "+(this.d_loading?"p-scroller-loading":""),items:this.loadedItems,getItemOptions:e=>this.getOptions(e),loading:this.d_loading,getLoaderOptions:(e,n)=>this.getLoaderOptions(e,n),itemSize:this._itemSize,rows:this.loadedRows,columns:this.loadedColumns,spacerStyle:this.spacerStyle,contentStyle:this.contentStyle,vertical:this.vertical,horizontal:this.horizontal,both:this.both}}getOptions(e){const n=(this._items||[]).length,r=this.both?this.first.rows+e:this.first+e;return{index:r,count:n,first:0===r,last:r===n-1,even:r%2==0,odd:r%2!=0}}getLoaderOptions(e,n){const r=this.loaderArr.length;return{index:e,count:r,first:0===e,last:e===r-1,even:e%2==0,odd:e%2!=0,...n}}}return i.\u0275fac=function(e){return new(e||i)(Zt(Zo),Zt(Ko))},i.\u0275cmp=Ir({type:i,selectors:[["p-scroller"]],contentQueries:function(e,n,r){if(1&e&&cl(r,_l,4),2&e){let s;vr(s=yr())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(vs(wJ,5),vs(AJ,5)),2&e){let r;vr(r=yr())&&(n.elementViewChild=r.first),vr(r=yr())&&(n.contentViewChild=r.first)}},hostAttrs:[1,"p-scroller-viewport","p-element"],inputs:{id:"id",style:"style",styleClass:"styleClass",tabindex:"tabindex",items:"items",itemSize:"itemSize",scrollHeight:"scrollHeight",scrollWidth:"scrollWidth",orientation:"orientation",delay:"delay",resizeDelay:"resizeDelay",lazy:"lazy",disabled:"disabled",loaderDisabled:"loaderDisabled",columns:"columns",showSpacer:"showSpacer",showLoader:"showLoader",numToleratedItems:"numToleratedItems",loading:"loading",autoSize:"autoSize",trackBy:"trackBy",options:"options"},outputs:{onLazyLoad:"onLazyLoad",onScroll:"onScroll",onScrollIndexChange:"onScrollIndexChange"},features:[_a],ngContentSelectors:YJ,decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["disabledContainer",""],[3,"ngStyle","ngClass","scroll"],["element",""],["buildInContent",""],["class","p-scroller-spacer",3,"ngStyle",4,"ngIf"],["class","p-scroller-loader",3,"ngClass",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-scroller-content",3,"ngClass","ngStyle"],["content",""],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"p-scroller-spacer",3,"ngStyle"],[1,"p-scroller-loader",3,"ngClass"],["buildInLoader",""],[4,"ngFor","ngForOf"],["buildInLoaderIcon",""],[1,"p-scroller-loading-icon","pi","pi-spinner","pi-spin"],[4,"ngIf"]],template:function(e,n){if(1&e&&(dg(),Ze(0,WJ,8,13,"ng-container",0),Ze(1,XJ,2,1,"ng-template",null,1,vc)),2&e){const r=co(2);ve("ngIf",!n._disabled)("ngIfElse",r)}},dependencies:[bo,Su,Wo,rc,Qo],styles:["p-scroller{flex:1;outline:0 none}.p-scroller{position:relative;overflow:auto;contain:strict;transform:translateZ(0);will-change:scroll-position;outline:0 none}.p-scroller-content{position:absolute;top:0;left:0;min-height:100%;min-width:100%;will-change:transform}.p-scroller-spacer{position:absolute;top:0;left:0;height:1px;width:1px;transform-origin:0 0;pointer-events:none}.p-scroller-loader{position:sticky;top:0;left:0;width:100%;height:100%}.p-scroller-loader.p-component-overlay{display:flex;align-items:center;justify-content:center}.p-scroller-loading-icon{font-size:2rem}\n"],encapsulation:2}),i})(),rv=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({imports:[Ns]}),i})(),_d=(()=>{class i{constructor(e,n,r){this.el=e,this.zone=n,this.config=r}ngAfterViewInit(){this.config&&this.config.ripple&&this.zone.runOutsideAngular(()=>{this.create(),this.mouseDownListener=this.onMouseDown.bind(this),this.el.nativeElement.addEventListener("mousedown",this.mouseDownListener)})}onMouseDown(e){let n=this.getInk();if(!n||"none"===getComputedStyle(n,null).display)return;if(Kt.removeClass(n,"p-ink-active"),!Kt.getHeight(n)&&!Kt.getWidth(n)){let l=Math.max(Kt.getOuterWidth(this.el.nativeElement),Kt.getOuterHeight(this.el.nativeElement));n.style.height=l+"px",n.style.width=l+"px"}let r=Kt.getOffset(this.el.nativeElement),s=e.pageX-r.left+document.body.scrollTop-Kt.getWidth(n)/2,o=e.pageY-r.top+document.body.scrollLeft-Kt.getHeight(n)/2;n.style.top=o+"px",n.style.left=s+"px",Kt.addClass(n,"p-ink-active")}getInk(){for(let e=0;e<this.el.nativeElement.children.length;e++)if(-1!==this.el.nativeElement.children[e].className.indexOf("p-ink"))return this.el.nativeElement.children[e];return null}resetInk(){let e=this.getInk();e&&Kt.removeClass(e,"p-ink-active")}onAnimationEnd(e){Kt.removeClass(e.currentTarget,"p-ink-active")}create(){let e=document.createElement("span");e.className="p-ink",this.el.nativeElement.appendChild(e),this.animationListener=this.onAnimationEnd.bind(this),e.addEventListener("animationend",this.animationListener)}remove(){let e=this.getInk();e&&(this.el.nativeElement.removeEventListener("mousedown",this.mouseDownListener),e.removeEventListener("animationend",this.animationListener),Kt.removeElement(e))}ngOnDestroy(){this.config&&this.config.ripple&&this.remove()}}return i.\u0275fac=function(e){return new(e||i)(Zt(Xn),Zt(Ko),Zt(Tp,8))},i.\u0275dir=$r({type:i,selectors:[["","pRipple",""]],hostAttrs:[1,"p-ripple","p-element"]}),i})(),$c=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({imports:[Ns]}),i})(),KJ=(()=>{class i{constructor(e){this.host=e,this.focused=!1}ngAfterContentChecked(){if(!this.focused&&this.autofocus){const e=Kt.getFocusableElements(this.host.nativeElement);0===e.length&&this.host.nativeElement.focus(),e.length>0&&e[0].focus(),this.focused=!0}}}return i.\u0275fac=function(e){return new(e||i)(Zt(Xn))},i.\u0275dir=$r({type:i,selectors:[["","pAutoFocus",""]],hostAttrs:[1,"p-element"],inputs:{autofocus:["pAutoFocus","autofocus"]}}),i})(),ZJ=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({imports:[Ns]}),i})();function QJ(i,t){if(1&i&&(lt(0,"span"),qi(1),ct()),2&i){const e=_e();Me(1),as(e.label||"empty")}}function JJ(i,t){1&i&&Ki(0)}const ww=function(i){return{height:i}},eee=function(i,t){return{"p-dropdown-item":!0,"p-highlight":i,"p-disabled":t}},F2=function(i){return{$implicit:i}},tee=["container"],nee=["filter"],iee=["in"],ree=["editableInput"],see=["items"],oee=["scroller"];function aee(i,t){if(1&i&&(qr(0),qi(1),Xr()),2&i){const e=_e(2);Me(1),as(e.label||"empty")}}function lee(i,t){1&i&&Ki(0)}const cee=function(i){return{"p-dropdown-label p-inputtext":!0,"p-dropdown-label-empty":i}};function uee(i,t){if(1&i&&(lt(0,"span",12),Ze(1,aee,2,1,"ng-container",13),Ze(2,lee,1,0,"ng-container",14),ct()),2&i){const e=_e();ve("ngClass",Bi(9,cee,null==e.label||0===e.label.length))("pTooltip",e.tooltip)("tooltipPosition",e.tooltipPosition)("positionStyle",e.tooltipPositionStyle)("tooltipStyleClass",e.tooltipStyleClass),mr("id",e.labelId),Me(1),ve("ngIf",!e.selectedItemTemplate),Me(1),ve("ngTemplateOutlet",e.selectedItemTemplate)("ngTemplateOutletContext",Bi(11,F2,e.selectedOption))}}const dee=function(i){return{"p-dropdown-label p-inputtext p-placeholder":!0,"p-dropdown-label-empty":i}};function hee(i,t){if(1&i&&(lt(0,"span",15),qi(1),ct()),2&i){const e=_e();ve("ngClass",Bi(2,dee,null==e.placeholder||0===e.placeholder.length)),Me(1),as(e.placeholder||"empty")}}function fee(i,t){if(1&i){const e=Pi();lt(0,"input",16,17),fn("click",function(){return wt(e),At(_e().onEditableInputClick())})("input",function(r){return wt(e),At(_e().onEditableInputChange(r))})("focus",function(r){return wt(e),At(_e().onEditableInputFocus(r))})("blur",function(r){return wt(e),At(_e().onInputBlur(r))}),ct()}if(2&i){const e=_e();ve("disabled",e.disabled),mr("maxlength",e.maxlength)("placeholder",e.placeholder)("aria-expanded",e.overlayVisible)}}function pee(i,t){if(1&i){const e=Pi();lt(0,"i",18),fn("click",function(r){return wt(e),At(_e().clear(r))}),ct()}}function gee(i,t){1&i&&Ki(0)}function mee(i,t){1&i&&Ki(0)}const UV=function(i){return{options:i}};function vee(i,t){if(1&i&&(qr(0),Ze(1,mee,1,0,"ng-container",14),Xr()),2&i){const e=_e(3);Me(1),ve("ngTemplateOutlet",e.filterTemplate)("ngTemplateOutletContext",Bi(2,UV,e.filterOptions))}}function yee(i,t){if(1&i){const e=Pi();lt(0,"div",27)(1,"input",28,29),fn("keydown.enter",function(r){return r.preventDefault()})("keydown",function(r){return wt(e),At(_e(3).onKeydown(r,!1))})("input",function(r){return wt(e),At(_e(3).onFilterInputChange(r))}),ct(),ii(3,"span",30),ct()}if(2&i){const e=_e(3);Me(1),ve("value",e.filterValue||""),mr("placeholder",e.filterPlaceholder)("aria-label",e.ariaFilterLabel)("aria-activedescendant",e.overlayVisible?"p-highlighted-option":e.labelId)}}function _ee(i,t){if(1&i&&(lt(0,"div",24),fn("click",function(n){return n.stopPropagation()}),Ze(1,vee,2,4,"ng-container",25),Ze(2,yee,4,4,"ng-template",null,26,vc),ct()),2&i){const e=co(3),n=_e(2);Me(1),ve("ngIf",n.filterTemplate)("ngIfElse",e)}}function bee(i,t){1&i&&Ki(0)}const HV=function(i,t){return{$implicit:i,options:t}};function Cee(i,t){if(1&i&&Ze(0,bee,1,0,"ng-container",14),2&i){const e=t.$implicit,n=t.options;_e(2),ve("ngTemplateOutlet",co(7))("ngTemplateOutletContext",ys(2,HV,e,n))}}function xee(i,t){1&i&&Ki(0)}function wee(i,t){if(1&i&&Ze(0,xee,1,0,"ng-container",14),2&i){const e=t.options;ve("ngTemplateOutlet",_e(4).loaderTemplate)("ngTemplateOutletContext",Bi(2,UV,e))}}function Aee(i,t){1&i&&(qr(0),Ze(1,wee,1,4,"ng-template",34),Xr())}function Iee(i,t){if(1&i){const e=Pi();lt(0,"p-scroller",31,32),fn("onLazyLoad",function(r){return wt(e),At(_e(2).onLazyLoad.emit(r))}),Ze(2,Cee,1,5,"ng-template",33),Ze(3,Aee,2,0,"ng-container",13),ct()}if(2&i){const e=_e(2);uo(Bi(8,ww,e.scrollHeight)),ve("items",e.optionsToDisplay)("itemSize",e.virtualScrollItemSize||e._itemSize)("autoSize",!0)("lazy",e.lazy)("options",e.virtualScrollOptions),Me(3),ve("ngIf",e.loaderTemplate)}}function See(i,t){1&i&&Ki(0)}const Eee=function(){return{}};function Tee(i,t){if(1&i&&(qr(0),Ze(1,See,1,0,"ng-container",14),Xr()),2&i){_e();const e=co(7),n=_e();Me(1),ve("ngTemplateOutlet",e)("ngTemplateOutletContext",ys(3,HV,n.optionsToDisplay,Mo(2,Eee)))}}function Mee(i,t){if(1&i&&(lt(0,"span"),qi(1),ct()),2&i){const e=_e().$implicit,n=_e(4);Me(1),as(n.getOptionGroupLabel(e)||"empty")}}function Dee(i,t){1&i&&Ki(0)}function Lee(i,t){1&i&&Ki(0)}const GV=function(i,t){return{$implicit:i,selectedOption:t}};function Pee(i,t){if(1&i&&(lt(0,"li",40),Ze(1,Mee,2,1,"span",13),Ze(2,Dee,1,0,"ng-container",14),ct(),Ze(3,Lee,1,0,"ng-container",14)),2&i){const e=t.$implicit,n=_e(2).options,r=co(5),s=_e(2);ve("ngStyle",Bi(6,ww,n.itemSize+"px")),Me(1),ve("ngIf",!s.groupTemplate),Me(1),ve("ngTemplateOutlet",s.groupTemplate)("ngTemplateOutletContext",Bi(8,F2,e)),Me(1),ve("ngTemplateOutlet",r)("ngTemplateOutletContext",ys(10,GV,s.getOptionGroupChildren(e),s.selectedOption))}}function Ree(i,t){if(1&i&&(qr(0),Ze(1,Pee,4,13,"ng-template",39),Xr()),2&i){const e=_e().$implicit;Me(1),ve("ngForOf",e)}}function kee(i,t){1&i&&Ki(0)}function Oee(i,t){if(1&i&&(qr(0),Ze(1,kee,1,0,"ng-container",14),Xr()),2&i){const e=_e().$implicit,n=co(5),r=_e(2);Me(1),ve("ngTemplateOutlet",n)("ngTemplateOutletContext",ys(2,GV,e,r.selectedOption))}}function Fee(i,t){if(1&i){const e=Pi();lt(0,"p-dropdownItem",41),fn("onClick",function(r){return wt(e),At(_e(4).onItemClick(r))}),ct()}if(2&i){const e=t.$implicit,n=_e().selectedOption,r=_e(3);ve("option",e)("selected",n==e)("label",r.getOptionLabel(e))("disabled",r.isOptionDisabled(e))("template",r.itemTemplate)}}function Nee(i,t){1&i&&Ze(0,Fee,1,5,"ng-template",39),2&i&&ve("ngForOf",t.$implicit)}function Bee(i,t){if(1&i&&(qr(0),qi(1),Xr()),2&i){const e=_e(4);Me(1),yd(" ",e.emptyFilterMessageLabel," ")}}function zee(i,t){1&i&&Ki(0,null,43)}function Vee(i,t){if(1&i&&(lt(0,"li",42),Ze(1,Bee,2,1,"ng-container",25),Ze(2,zee,2,0,"ng-container",19),ct()),2&i){const e=_e().options,n=_e(2);ve("ngStyle",Bi(4,ww,e.itemSize+"px")),Me(1),ve("ngIf",!n.emptyFilterTemplate&&!n.emptyTemplate)("ngIfElse",n.emptyFilter),Me(1),ve("ngTemplateOutlet",n.emptyFilterTemplate||n.emptyTemplate)}}function Uee(i,t){if(1&i&&(qr(0),qi(1),Xr()),2&i){const e=_e(4);Me(1),yd(" ",e.emptyMessageLabel," ")}}function Hee(i,t){1&i&&Ki(0,null,44)}function Gee(i,t){if(1&i&&(lt(0,"li",42),Ze(1,Uee,2,1,"ng-container",25),Ze(2,Hee,2,0,"ng-container",19),ct()),2&i){const e=_e().options,n=_e(2);ve("ngStyle",Bi(4,ww,e.itemSize+"px")),Me(1),ve("ngIf",!n.emptyTemplate)("ngIfElse",n.empty),Me(1),ve("ngTemplateOutlet",n.emptyTemplate)}}function Wee(i,t){if(1&i&&(lt(0,"ul",35,36),Ze(2,Ree,2,1,"ng-container",13),Ze(3,Oee,2,5,"ng-container",13),Ze(4,Nee,1,1,"ng-template",null,37,vc),Ze(6,Vee,3,6,"li",38),Ze(7,Gee,3,6,"li",38),ct()),2&i){const e=t.options,n=_e(2);uo(e.contentStyle),ve("ngClass",e.contentStyleClass),mr("id",n.listId),Me(2),ve("ngIf",n.group),Me(1),ve("ngIf",!n.group),Me(3),ve("ngIf",n.filterValue&&n.isEmpty()),Me(1),ve("ngIf",!n.filterValue&&n.isEmpty())}}function jee(i,t){1&i&&Ki(0)}const $ee=function(i,t){return{showTransitionParams:i,hideTransitionParams:t}},qee=function(i){return{value:"visible",params:i}};function Xee(i,t){if(1&i){const e=Pi();lt(0,"div",0),fn("click",function(r){return wt(e),At(_e().onOverlayClick(r))})("@overlayAnimation.start",function(r){return wt(e),At(_e().onOverlayAnimationStart(r))})("@overlayAnimation.done",function(r){return wt(e),At(_e().onOverlayAnimationEnd(r))}),Ze(1,gee,1,0,"ng-container",19),Ze(2,_ee,4,2,"div",20),lt(3,"div",21),Ze(4,Iee,4,10,"p-scroller",22),Ze(5,Tee,2,6,"ng-container",13),Ze(6,Wee,8,8,"ng-template",null,23,vc),ct(),Ze(8,jee,1,0,"ng-container",19),ct()}if(2&i){const e=_e();Ur(e.panelStyleClass),ve("ngClass","p-dropdown-panel p-component")("@overlayAnimation",Bi(15,qee,ys(12,$ee,e.showTransitionOptions,e.hideTransitionOptions)))("ngStyle",e.panelStyle),Me(1),ve("ngTemplateOutlet",e.headerTemplate),Me(1),ve("ngIf",e.filter),Me(1),tf("max-height",e.virtualScroll?"auto":e.scrollHeight||"auto"),Me(1),ve("ngIf",e.virtualScroll),Me(1),ve("ngIf",!e.virtualScroll),Me(3),ve("ngTemplateOutlet",e.footerTemplate)}}const Yee=function(i,t,e,n){return{"p-dropdown p-component":!0,"p-disabled":i,"p-dropdown-open":t,"p-focus":e,"p-dropdown-clearable":n}},Kee={provide:bc,useExisting:ds(()=>N2),multi:!0};let Zee=(()=>{class i{constructor(){this.onClick=new qn}onOptionClick(e){this.onClick.emit({originalEvent:e,option:this.option})}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=Ir({type:i,selectors:[["p-dropdownItem"]],hostAttrs:[1,"p-element"],inputs:{option:"option",selected:"selected",label:"label",disabled:"disabled",visible:"visible",itemSize:"itemSize",template:"template"},outputs:{onClick:"onClick"},decls:3,vars:15,consts:[["role","option","pRipple","",3,"ngStyle","id","ngClass","click"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,n){1&e&&(lt(0,"li",0),fn("click",function(s){return n.onOptionClick(s)}),Ze(1,QJ,2,1,"span",1),Ze(2,JJ,1,0,"ng-container",2),ct()),2&e&&(ve("ngStyle",Bi(8,ww,n.itemSize+"px"))("id",n.selected?"p-highlighted-option":"")("ngClass",ys(10,eee,n.selected,n.disabled)),mr("aria-label",n.label)("aria-selected",n.selected),Me(1),ve("ngIf",!n.template),Me(1),ve("ngTemplateOutlet",n.template)("ngTemplateOutletContext",Bi(13,F2,n.option)))},dependencies:[bo,Wo,rc,Qo,_d],encapsulation:2}),i})(),N2=(()=>{class i{constructor(e,n,r,s,o,l,u){this.el=e,this.renderer=n,this.cd=r,this.zone=s,this.filterService=o,this.config=l,this.overlayService=u,this.scrollHeight="200px",this.resetFilterOnHide=!1,this.dropdownIcon="pi pi-chevron-down",this.optionGroupChildren="items",this.autoDisplayFirst=!0,this.emptyFilterMessage="",this.emptyMessage="",this.lazy=!1,this.autoZIndex=!0,this.baseZIndex=0,this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.filterMatchMode="contains",this.tooltip="",this.tooltipPosition="right",this.tooltipPositionStyle="absolute",this.autofocusFilter=!0,this.onChange=new qn,this.onFilter=new qn,this.onFocus=new qn,this.onBlur=new qn,this.onClick=new qn,this.onShow=new qn,this.onHide=new qn,this.onClear=new qn,this.onLazyLoad=new qn,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.id=nw()}get disabled(){return this._disabled}set disabled(e){e&&(this.focused=!1,this.overlayVisible&&this.hide()),this._disabled=e,this.cd.destroyed||this.cd.detectChanges()}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=e,console.warn("The itemSize property is deprecated, use virtualScrollItemSize property instead.")}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"item":default:this.itemTemplate=e.template;break;case"selectedItem":this.selectedItemTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"filter":this.filterTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"emptyfilter":this.emptyFilterTemplate=e.template;break;case"empty":this.emptyTemplate=e.template;break;case"group":this.groupTemplate=e.template;break;case"loader":this.loaderTemplate=e.template}})}ngOnInit(){this.optionsToDisplay=this.options,this.updateSelectedOption(null),this.labelId=this.id+"_label",this.listId=this.id+"_list",this.filterBy&&(this.filterOptions={filter:e=>this.onFilterInputChange(e),reset:()=>this.resetFilter()})}get options(){return this._options}set options(e){this._options=e,this.optionsToDisplay=this._options,this.updateSelectedOption(this.value),this.selectedOption=this.findOption(this.value,this.optionsToDisplay),!this.selectedOption&&fr.isNotEmpty(this.value)&&(this.value=null,this.onModelChange(this.value)),this.optionsChanged=!0,this._filterValue&&this._filterValue.length&&this.activateFilter()}get filterValue(){return this._filterValue}set filterValue(e){this._filterValue=e,this.activateFilter()}ngAfterViewInit(){this.editable&&this.updateEditableLabel()}get label(){return this.selectedOption?this.getOptionLabel(this.selectedOption):null}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(Wc.EMPTY_MESSAGE)}get emptyFilterMessageLabel(){return this.emptyFilterMessage||this.config.getTranslation(Wc.EMPTY_FILTER_MESSAGE)}get filled(){return this.value||null!=this.value||null!=this.value}updateEditableLabel(){this.editableInputViewChild&&this.editableInputViewChild.nativeElement&&(this.editableInputViewChild.nativeElement.value=this.selectedOption?this.getOptionLabel(this.selectedOption):this.value||"")}getOptionLabel(e){return this.optionLabel?fr.resolveFieldData(e,this.optionLabel):e&&void 0!==e.label?e.label:e}getOptionValue(e){return this.optionValue?fr.resolveFieldData(e,this.optionValue):!this.optionLabel&&e&&void 0!==e.value?e.value:e}isOptionDisabled(e){return this.optionDisabled?fr.resolveFieldData(e,this.optionDisabled):!(!e||void 0===e.disabled)&&e.disabled}getOptionGroupLabel(e){return this.optionGroupLabel?fr.resolveFieldData(e,this.optionGroupLabel):e&&void 0!==e.label?e.label:e}getOptionGroupChildren(e){return this.optionGroupChildren?fr.resolveFieldData(e,this.optionGroupChildren):e.items}onItemClick(e){const n=e.option;this.isOptionDisabled(n)||(this.selectItem(e.originalEvent,n),this.accessibleViewChild.nativeElement.focus({preventScroll:!0})),setTimeout(()=>{this.hide()},150)}selectItem(e,n){this.selectedOption!=n&&(this.selectedOption=n,this.value=this.getOptionValue(n),this.onModelChange(this.value),this.updateEditableLabel(),this.onChange.emit({originalEvent:e,value:this.value}))}ngAfterViewChecked(){this.optionsChanged&&this.overlayVisible&&(this.optionsChanged=!1,this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.alignOverlay()},1)})),this.selectedOptionUpdated&&this.itemsWrapper&&(Kt.findSingle(this.overlay,"li.p-highlight")&&Kt.scrollInView(this.itemsWrapper,Kt.findSingle(this.overlay,"li.p-highlight")),this.selectedOptionUpdated=!1)}writeValue(e){this.filter&&this.resetFilter(),this.value=e,this.updateSelectedOption(e),this.updateEditableLabel(),this.cd.markForCheck()}resetFilter(){this._filterValue=null,this.filterViewChild&&this.filterViewChild.nativeElement&&(this.filterViewChild.nativeElement.value=""),this.optionsToDisplay=this.options}updateSelectedOption(e){this.selectedOption=this.findOption(e,this.optionsToDisplay),this.autoDisplayFirst&&!this.placeholder&&!this.selectedOption&&this.optionsToDisplay&&this.optionsToDisplay.length&&!this.editable&&(this.selectedOption=this.group?this.optionsToDisplay[0].items[0]:this.optionsToDisplay[0],this.value=this.getOptionValue(this.selectedOption),this.onModelChange(this.value)),this.selectedOptionUpdated=!0}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onMouseclick(e){this.disabled||this.readonly||this.isInputClick(e)||(this.onClick.emit(e),this.accessibleViewChild.nativeElement.focus({preventScroll:!0}),this.overlayVisible?this.hide():this.show(),this.cd.detectChanges())}onOverlayClick(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement})}isInputClick(e){return Kt.hasClass(e.target,"p-dropdown-clear-icon")||e.target.isSameNode(this.accessibleViewChild.nativeElement)||this.editableInputViewChild&&e.target.isSameNode(this.editableInputViewChild.nativeElement)}isOutsideClicked(e){return!(this.el.nativeElement.isSameNode(e.target)||this.el.nativeElement.contains(e.target)||this.overlay&&this.overlay.contains(e.target))}isEmpty(){return!this.optionsToDisplay||this.optionsToDisplay&&0===this.optionsToDisplay.length}onEditableInputClick(){this.bindDocumentClickListener()}onEditableInputFocus(e){this.focused=!0,this.hide(),this.onFocus.emit(e)}onEditableInputChange(e){this.value=e.target.value,this.updateSelectedOption(this.value),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value})}show(){this.overlayVisible=!0,this.preventDocumentDefault=!0,this.cd.markForCheck()}onOverlayAnimationStart(e){switch(e.toState){case"visible":if(this.overlay=e.element,this.itemsWrapper=Kt.findSingle(this.overlay,this.virtualScroll?".p-scroller":".p-dropdown-items-wrapper"),this.virtualScroll&&this.scroller.setContentEl(this.itemsViewChild.nativeElement),this.appendOverlay(),this.autoZIndex&&Dl.set("overlay",this.overlay,this.baseZIndex+this.config.zIndex.overlay),this.alignOverlay(),this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener(),this.options&&this.options.length)if(this.virtualScroll){const n=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;-1!==n&&this.scroller.scrollToIndex(n)}else{let n=Kt.findSingle(this.itemsWrapper,".p-dropdown-item.p-highlight");n&&n.scrollIntoView({block:"nearest",inline:"center"})}this.filterViewChild&&this.filterViewChild.nativeElement&&(this.preventModelTouched=!0,this.autofocusFilter&&this.filterViewChild.nativeElement.focus()),this.onShow.emit(e);break;case"void":this.onOverlayHide(),this.onHide.emit(e)}}onOverlayAnimationEnd(e){"void"===e.toState&&Dl.clear(e.element)}appendOverlay(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.overlay):Kt.appendChild(this.overlay,this.appendTo),this.overlay.style.minWidth||(this.overlay.style.minWidth=Kt.getWidth(this.containerViewChild.nativeElement)+"px"))}restoreOverlayAppend(){this.overlay&&this.appendTo&&this.el.nativeElement.appendChild(this.overlay)}hide(){this.overlayVisible=!1,this.filter&&this.resetFilterOnHide&&this.resetFilter(),this.cd.markForCheck()}alignOverlay(){this.overlay&&(this.appendTo?Kt.absolutePosition(this.overlay,this.containerViewChild.nativeElement):Kt.relativePosition(this.overlay,this.containerViewChild.nativeElement))}onInputFocus(e){this.focused=!0,this.onFocus.emit(e)}onInputBlur(e){this.focused=!1,this.onBlur.emit(e),this.preventModelTouched||this.onModelTouched(),this.preventModelTouched=!1}findPrevEnabledOption(e){let n;if(this.optionsToDisplay&&this.optionsToDisplay.length){for(let r=e-1;0<=r;r--){let s=this.optionsToDisplay[r];if(!this.isOptionDisabled(s)){n=s;break}}if(!n)for(let r=this.optionsToDisplay.length-1;r>=e;r--){let s=this.optionsToDisplay[r];if(!this.isOptionDisabled(s)){n=s;break}}}return n}findNextEnabledOption(e){let n;if(this.optionsToDisplay&&this.optionsToDisplay.length){for(let r=e+1;r<this.optionsToDisplay.length;r++){let s=this.optionsToDisplay[r];if(!this.isOptionDisabled(s)){n=s;break}}if(!n)for(let r=0;r<e;r++){let s=this.optionsToDisplay[r];if(!this.isOptionDisabled(s)){n=s;break}}}return n}onKeydown(e,n){if(!this.readonly&&this.optionsToDisplay&&null!==this.optionsToDisplay.length)switch(e.which){case 40:if(!this.overlayVisible&&e.altKey)this.show();else if(this.group){let r=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;if(-1!==r){let s=r.itemIndex+1;s<this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex]).length?(this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex])[s]),this.selectedOptionUpdated=!0):this.optionsToDisplay[r.groupIndex+1]&&(this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex+1])[0]),this.selectedOptionUpdated=!0)}else this.optionsToDisplay&&this.optionsToDisplay.length>0&&this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[0])[0])}else{let r=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1,s=this.findNextEnabledOption(r);s&&(this.selectItem(e,s),this.selectedOptionUpdated=!0)}e.preventDefault();break;case 38:if(this.group){let r=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;if(-1!==r){let s=r.itemIndex-1;if(s>=0)this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex])[s]),this.selectedOptionUpdated=!0;else if(s<0){let o=this.optionsToDisplay[r.groupIndex-1];o&&(this.selectItem(e,this.getOptionGroupChildren(o)[this.getOptionGroupChildren(o).length-1]),this.selectedOptionUpdated=!0)}}}else{let r=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1,s=this.findPrevEnabledOption(r);s&&(this.selectItem(e,s),this.selectedOptionUpdated=!0)}e.preventDefault();break;case 32:n&&(this.overlayVisible?this.hide():this.show(),e.preventDefault());break;case 13:this.overlayVisible&&(!this.filter||this.optionsToDisplay&&this.optionsToDisplay.length>0)?this.hide():this.overlayVisible||this.show(),e.preventDefault();break;case 27:case 9:this.hide();break;default:n&&!e.metaKey&&this.search(e)}}search(e){this.searchTimeout&&clearTimeout(this.searchTimeout);const n=e.key;let r;if(this.previousSearchChar=this.currentSearchChar,this.currentSearchChar=n,this.searchValue=this.previousSearchChar===this.currentSearchChar?this.currentSearchChar:this.searchValue?this.searchValue+n:n,this.group){let s=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):{groupIndex:0,itemIndex:0};r=this.searchOptionWithinGroup(s)}else{let s=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;r=this.searchOption(++s)}r&&!this.isOptionDisabled(r)&&(this.selectItem(e,r),this.selectedOptionUpdated=!0),this.searchTimeout=setTimeout(()=>{this.searchValue=null},250)}searchOption(e){let n;return this.searchValue&&(n=this.searchOptionInRange(e,this.optionsToDisplay.length),n||(n=this.searchOptionInRange(0,e))),n}searchOptionInRange(e,n){for(let r=e;r<n;r++){let s=this.optionsToDisplay[r];if(this.getOptionLabel(s).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(s))return s}return null}searchOptionWithinGroup(e){if(this.searchValue){for(let r=e.groupIndex;r<this.optionsToDisplay.length;r++)for(let s=e.groupIndex===r?e.itemIndex+1:0;s<this.getOptionGroupChildren(this.optionsToDisplay[r]).length;s++){let o=this.getOptionGroupChildren(this.optionsToDisplay[r])[s];if(this.getOptionLabel(o).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(o))return o}for(let r=0;r<=e.groupIndex;r++)for(let s=0;s<(e.groupIndex===r?e.itemIndex:this.getOptionGroupChildren(this.optionsToDisplay[r]).length);s++){let o=this.getOptionGroupChildren(this.optionsToDisplay[r])[s];if(this.getOptionLabel(o).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(o))return o}}return null}findOptionIndex(e,n){let r=-1;if(n)for(let s=0;s<n.length;s++)if(null==e&&null==this.getOptionValue(n[s])||fr.equals(e,this.getOptionValue(n[s]),this.dataKey)){r=s;break}return r}findOptionGroupIndex(e,n){let r,s;if(n)for(let o=0;o<n.length&&(r=o,s=this.findOptionIndex(e,this.getOptionGroupChildren(n[o])),-1===s);o++);return-1!==s?{groupIndex:r,itemIndex:s}:-1}findOption(e,n,r){if(this.group&&!r){let s;if(n&&n.length)for(let o of n)if(s=this.findOption(e,this.getOptionGroupChildren(o),!0),s)break;return s}{let s=this.findOptionIndex(e,n);return-1!=s?n[s]:null}}onFilterInputChange(e){let n=e.target.value;n&&n.length?(this._filterValue=n,this.activateFilter()):(this._filterValue=null,this.optionsToDisplay=this.options),this.virtualScroll&&this.scroller.scrollToIndex(0),this.optionsChanged=!0,this.onFilter.emit({originalEvent:e,filter:this._filterValue})}activateFilter(){let e=(this.filterBy||this.optionLabel||"label").split(",");if(this.options&&this.options.length){if(this.group){let n=[];for(let r of this.options){let s=this.filterService.filter(this.getOptionGroupChildren(r),e,this.filterValue,this.filterMatchMode,this.filterLocale);s&&s.length&&n.push({...r,[this.optionGroupChildren]:s})}this.optionsToDisplay=n}else this.optionsToDisplay=this.filterService.filter(this.options,e,this.filterValue,this.filterMatchMode,this.filterLocale);this.optionsChanged=!0}}applyFocus(){this.editable?Kt.findSingle(this.el.nativeElement,".p-dropdown-label.p-inputtext").focus():Kt.findSingle(this.el.nativeElement,"input[readonly]").focus()}focus(){this.applyFocus()}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","click",n=>{!this.preventDocumentDefault&&this.isOutsideClicked(n)&&(this.hide(),this.unbindDocumentClickListener()),this.preventDocumentDefault=!1}))}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener)}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}onWindowResize(){this.overlayVisible&&!Kt.isTouchDevice()&&this.hide()}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new xw(this.containerViewChild.nativeElement,e=>{this.overlayVisible&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}clear(e){this.value=null,this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}),this.updateSelectedOption(this.value),this.updateEditableLabel(),this.onClear.emit(e)}onOverlayHide(){this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.overlay=null,this.itemsWrapper=null,this.onModelTouched()}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.overlay&&Dl.clear(this.overlay),this.restoreOverlayAppend(),this.onOverlayHide()}}return i.\u0275fac=function(e){return new(e||i)(Zt(Xn),Zt(h),Zt(Zo),Zt(Ko),Zt(v1),Zt(Tp),Zt(iw))},i.\u0275cmp=Ir({type:i,selectors:[["p-dropdown"]],contentQueries:function(e,n,r){if(1&e&&cl(r,_l,4),2&e){let s;vr(s=yr())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(vs(tee,5),vs(nee,5),vs(iee,5),vs(ree,5),vs(see,5),vs(oee,5)),2&e){let r;vr(r=yr())&&(n.containerViewChild=r.first),vr(r=yr())&&(n.filterViewChild=r.first),vr(r=yr())&&(n.accessibleViewChild=r.first),vr(r=yr())&&(n.editableInputViewChild=r.first),vr(r=yr())&&(n.itemsViewChild=r.first),vr(r=yr())&&(n.scroller=r.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:4,hostBindings:function(e,n){2&e&&Ep("p-inputwrapper-filled",n.filled)("p-inputwrapper-focus",n.focused||n.overlayVisible)},inputs:{scrollHeight:"scrollHeight",filter:"filter",name:"name",style:"style",panelStyle:"panelStyle",styleClass:"styleClass",panelStyleClass:"panelStyleClass",readonly:"readonly",required:"required",editable:"editable",appendTo:"appendTo",tabindex:"tabindex",placeholder:"placeholder",filterPlaceholder:"filterPlaceholder",filterLocale:"filterLocale",inputId:"inputId",selectId:"selectId",dataKey:"dataKey",filterBy:"filterBy",autofocus:"autofocus",resetFilterOnHide:"resetFilterOnHide",dropdownIcon:"dropdownIcon",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",optionGroupLabel:"optionGroupLabel",optionGroupChildren:"optionGroupChildren",autoDisplayFirst:"autoDisplayFirst",group:"group",showClear:"showClear",emptyFilterMessage:"emptyFilterMessage",emptyMessage:"emptyMessage",lazy:"lazy",virtualScroll:"virtualScroll",virtualScrollItemSize:"virtualScrollItemSize",virtualScrollOptions:"virtualScrollOptions",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",ariaFilterLabel:"ariaFilterLabel",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",filterMatchMode:"filterMatchMode",maxlength:"maxlength",tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",autofocusFilter:"autofocusFilter",disabled:"disabled",itemSize:"itemSize",options:"options",filterValue:"filterValue"},outputs:{onChange:"onChange",onFilter:"onFilter",onFocus:"onFocus",onBlur:"onBlur",onClick:"onClick",onShow:"onShow",onHide:"onHide",onClear:"onClear",onLazyLoad:"onLazyLoad"},features:[To([Kee])],decls:12,vars:25,consts:[[3,"ngClass","ngStyle","click"],["container",""],[1,"p-hidden-accessible"],["type","text","readonly","","aria-haspopup","listbox","aria-haspopup","listbox","role","combobox",3,"disabled","pAutoFocus","focus","blur","keydown"],["in",""],[3,"ngClass","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass",4,"ngIf"],[3,"ngClass",4,"ngIf"],["type","text","class","p-dropdown-label p-inputtext","aria-haspopup","listbox",3,"disabled","click","input","focus","blur",4,"ngIf"],["class","p-dropdown-clear-icon pi pi-times",3,"click",4,"ngIf"],["role","button","aria-label","dropdown trigger","aria-haspopup","listbox",1,"p-dropdown-trigger"],[1,"p-dropdown-trigger-icon",3,"ngClass"],[3,"ngClass","ngStyle","class","click",4,"ngIf"],[3,"ngClass","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngClass"],["type","text","aria-haspopup","listbox",1,"p-dropdown-label","p-inputtext",3,"disabled","click","input","focus","blur"],["editableInput",""],[1,"p-dropdown-clear-icon","pi","pi-times",3,"click"],[4,"ngTemplateOutlet"],["class","p-dropdown-header",3,"click",4,"ngIf"],[1,"p-dropdown-items-wrapper"],[3,"items","style","itemSize","autoSize","lazy","options","onLazyLoad",4,"ngIf"],["buildInItems",""],[1,"p-dropdown-header",3,"click"],[4,"ngIf","ngIfElse"],["builtInFilterElement",""],[1,"p-dropdown-filter-container"],["type","text","autocomplete","off",1,"p-dropdown-filter","p-inputtext","p-component",3,"value","keydown.enter","keydown","input"],["filter",""],[1,"p-dropdown-filter-icon","pi","pi-search"],[3,"items","itemSize","autoSize","lazy","options","onLazyLoad"],["scroller",""],["pTemplate","content"],["pTemplate","loader"],["role","listbox",1,"p-dropdown-items",3,"ngClass"],["items",""],["itemslist",""],["class","p-dropdown-empty-message",3,"ngStyle",4,"ngIf"],["ngFor","",3,"ngForOf"],[1,"p-dropdown-item-group",3,"ngStyle"],[3,"option","selected","label","disabled","template","onClick"],[1,"p-dropdown-empty-message",3,"ngStyle"],["emptyFilter",""],["empty",""]],template:function(e,n){1&e&&(lt(0,"div",0,1),fn("click",function(s){return n.onMouseclick(s)}),lt(2,"div",2)(3,"input",3,4),fn("focus",function(s){return n.onInputFocus(s)})("blur",function(s){return n.onInputBlur(s)})("keydown",function(s){return n.onKeydown(s,!0)}),ct()(),Ze(5,uee,3,13,"span",5),Ze(6,hee,2,4,"span",6),Ze(7,fee,2,4,"input",7),Ze(8,pee,1,0,"i",8),lt(9,"div",9),ii(10,"span",10),ct(),Ze(11,Xee,9,17,"div",11),ct()),2&e&&(Ur(n.styleClass),ve("ngClass",Ff(20,Yee,n.disabled,n.overlayVisible,n.focused,n.showClear&&!n.disabled))("ngStyle",n.style),Me(3),ve("disabled",n.disabled)("pAutoFocus",n.autofocus),mr("id",n.inputId)("placeholder",n.placeholder)("aria-label",n.ariaLabel)("aria-expanded",!1)("aria-labelledby",n.ariaLabelledBy)("tabindex",n.tabindex)("aria-activedescendant",n.overlayVisible?n.labelId:null),Me(2),ve("ngIf",!n.editable&&null!=n.label),Me(1),ve("ngIf",!n.editable&&null==n.label),Me(1),ve("ngIf",n.editable),Me(1),ve("ngIf",null!=n.value&&n.showClear&&!n.disabled),Me(1),mr("aria-expanded",n.overlayVisible),Me(1),ve("ngClass",n.dropdownIcon),Me(1),ve("ngIf",n.overlayVisible))},dependencies:[bo,Su,Wo,rc,Qo,_l,o_,z1,KJ,Zee],styles:[".p-dropdown{display:inline-flex;cursor:pointer;position:relative;-webkit-user-select:none;user-select:none}.p-dropdown-clear-icon{position:absolute;top:50%;margin-top:-.5rem}.p-dropdown-trigger{display:flex;align-items:center;justify-content:center;flex-shrink:0}.p-dropdown-label{display:block;white-space:nowrap;overflow:hidden;flex:1 1 auto;width:1%;text-overflow:ellipsis;cursor:pointer}.p-dropdown-label-empty{overflow:hidden;visibility:hidden}input.p-dropdown-label{cursor:default}.p-dropdown .p-dropdown-panel{min-width:100%}.p-dropdown-panel{position:absolute;top:0;left:0}.p-dropdown-items-wrapper{overflow:auto}.p-dropdown-item{cursor:pointer;font-weight:400;white-space:nowrap;position:relative;overflow:hidden}.p-dropdown-items{margin:0;padding:0;list-style-type:none}.p-dropdown-filter{width:100%}.p-dropdown-filter-container{position:relative}.p-dropdown-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-fluid .p-dropdown{display:flex}.p-fluid .p-dropdown .p-dropdown-label{width:1%}\n"],encapsulation:2,data:{animation:[oy("overlayAnimation",[Eu(":enter",[Qa({opacity:0,transform:"scaleY(0.8)"}),Cc("{{showTransitionParams}}")]),Eu(":leave",[Cc("{{hideTransitionParams}}",Qa({opacity:0}))])])]},changeDetection:0}),i})(),V1=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({imports:[Ns,Na,iv,$c,rv,ZJ,Na,rv]}),i})(),Aw=(()=>{class i{constructor(e,n,r){this.el=e,this.ngModel=n,this.cd=r}ngAfterViewInit(){this.updateFilledState(),this.cd.detectChanges()}ngDoCheck(){this.updateFilledState()}onInput(e){this.updateFilledState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length||this.ngModel&&this.ngModel.model}}return i.\u0275fac=function(e){return new(e||i)(Zt(Xn),Zt(ry,8),Zt(Zo))},i.\u0275dir=$r({type:i,selectors:[["","pInputText",""]],hostAttrs:[1,"p-inputtext","p-component","p-element"],hostVars:2,hostBindings:function(e,n){1&e&&fn("input",function(s){return n.onInput(s)}),2&e&&Ep("p-filled",n.filled)}}),i})(),B2=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({imports:[Ns]}),i})();function Qee(i,t){1&i&&Ki(0)}const Jee=function(i,t,e,n){return{"p-button-icon":!0,"p-button-icon-left":i,"p-button-icon-right":t,"p-button-icon-top":e,"p-button-icon-bottom":n}};function ete(i,t){if(1&i&&ii(0,"span",4),2&i){const e=_e();Ur(e.loading?"p-button-loading-icon "+e.loadingIcon:e.icon),ve("ngClass",Ff(4,Jee,"left"===e.iconPos&&e.label,"right"===e.iconPos&&e.label,"top"===e.iconPos&&e.label,"bottom"===e.iconPos&&e.label)),mr("aria-hidden",!0)}}function tte(i,t){if(1&i&&(lt(0,"span",5),qi(1),ct()),2&i){const e=_e();mr("aria-hidden",e.icon&&!e.label),Me(1),as(e.label||"\xa0")}}function nte(i,t){if(1&i&&(lt(0,"span",4),qi(1),ct()),2&i){const e=_e();Ur(e.badgeClass),ve("ngClass",e.badgeStyleClass()),Me(1),as(e.badge)}}const ite=function(i,t,e,n,r){return{"p-button p-component":!0,"p-button-icon-only":i,"p-button-vertical":t,"p-disabled":e,"p-button-loading":n,"p-button-loading-label-only":r}},rte=["*"];let cC=(()=>{class i{constructor(e){this.el=e,this.iconPos="left",this.loadingIcon="pi pi-spinner pi-spin",this._loading=!1}ngAfterViewInit(){this._initialStyleClass=this.el.nativeElement.className,Kt.addMultipleClasses(this.el.nativeElement,this.getStyleClass()),(this.icon||this.loading)&&this.createIconEl();let e=document.createElement("span");this.icon&&!this.label&&e.setAttribute("aria-hidden","true"),e.className="p-button-label",this.label?e.appendChild(document.createTextNode(this.label)):e.innerHTML="&nbsp;",this.el.nativeElement.appendChild(e),this.initialized=!0}getStyleClass(){let e="p-button p-component";return this.icon&&!this.label&&(e+=" p-button-icon-only"),this.loading&&(e+=" p-disabled p-button-loading",!this.icon&&this.label&&(e+=" p-button-loading-label-only")),e}setStyleClass(){let e=this.getStyleClass();this.el.nativeElement.className=e+" "+this._initialStyleClass}createIconEl(){let e=document.createElement("span");e.className="p-button-icon",e.setAttribute("aria-hidden","true");let n=this.label?"p-button-icon-"+this.iconPos:null;n&&Kt.addClass(e,n);let r=this.getIconClass();r&&Kt.addMultipleClasses(e,r);let s=Kt.findSingle(this.el.nativeElement,".p-button-label");s?this.el.nativeElement.insertBefore(e,s):this.el.nativeElement.appendChild(e)}getIconClass(){return this.loading?"p-button-loading-icon "+this.loadingIcon:this._icon}setIconClass(){let e=Kt.findSingle(this.el.nativeElement,".p-button-icon");e?e.className=this.iconPos?"p-button-icon p-button-icon-"+this.iconPos+" "+this.getIconClass():"p-button-icon "+this.getIconClass():this.createIconEl()}removeIconElement(){let e=Kt.findSingle(this.el.nativeElement,".p-button-icon");this.el.nativeElement.removeChild(e)}get label(){return this._label}set label(e){this._label=e,this.initialized&&(Kt.findSingle(this.el.nativeElement,".p-button-label").textContent=this._label||"&nbsp;",(this.loading||this.icon)&&this.setIconClass(),this.setStyleClass())}get icon(){return this._icon}set icon(e){this._icon=e,this.initialized&&(this.setIconClass(),this.setStyleClass())}get loading(){return this._loading}set loading(e){this._loading=e,this.initialized&&(this.loading||this.icon?this.setIconClass():this.removeIconElement(),this.setStyleClass())}ngOnDestroy(){this.initialized=!1}}return i.\u0275fac=function(e){return new(e||i)(Zt(Xn))},i.\u0275dir=$r({type:i,selectors:[["","pButton",""]],hostAttrs:[1,"p-element"],inputs:{iconPos:"iconPos",loadingIcon:"loadingIcon",label:"label",icon:"icon",loading:"loading"}}),i})(),U1=(()=>{class i{constructor(){this.type="button",this.iconPos="left",this.loading=!1,this.loadingIcon="pi pi-spinner pi-spin",this.onClick=new qn,this.onFocus=new qn,this.onBlur=new qn}ngAfterContentInit(){this.templates.forEach(e=>{e.getType(),this.contentTemplate=e.template})}badgeStyleClass(){return{"p-badge p-component":!0,"p-badge-no-gutter":this.badge&&1===String(this.badge).length}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=Ir({type:i,selectors:[["p-button"]],contentQueries:function(e,n,r){if(1&e&&cl(r,_l,4),2&e){let s;vr(s=yr())&&(n.templates=s)}},hostAttrs:[1,"p-element"],inputs:{type:"type",iconPos:"iconPos",icon:"icon",badge:"badge",label:"label",disabled:"disabled",loading:"loading",loadingIcon:"loadingIcon",style:"style",styleClass:"styleClass",badgeClass:"badgeClass",ariaLabel:"ariaLabel"},outputs:{onClick:"onClick",onFocus:"onFocus",onBlur:"onBlur"},ngContentSelectors:rte,decls:6,vars:17,consts:[["pRipple","",3,"ngStyle","disabled","ngClass","click","focus","blur"],[4,"ngTemplateOutlet"],[3,"ngClass","class",4,"ngIf"],["class","p-button-label",4,"ngIf"],[3,"ngClass"],[1,"p-button-label"]],template:function(e,n){1&e&&(dg(),lt(0,"button",0),fn("click",function(s){return n.onClick.emit(s)})("focus",function(s){return n.onFocus.emit(s)})("blur",function(s){return n.onBlur.emit(s)}),$u(1),Ze(2,Qee,1,0,"ng-container",1),Ze(3,ete,1,9,"span",2),Ze(4,tte,2,2,"span",3),Ze(5,nte,2,4,"span",2),ct()),2&e&&(Ur(n.styleClass),ve("ngStyle",n.style)("disabled",n.disabled||n.loading)("ngClass",Ub(11,ite,n.icon&&!n.label,("top"===n.iconPos||"bottom"===n.iconPos)&&n.label,n.disabled||n.loading,n.loading,n.loading&&!n.icon&&n.label)),mr("type",n.type)("aria-label",n.ariaLabel),Me(2),ve("ngTemplateOutlet",n.contentTemplate),Me(1),ve("ngIf",!n.contentTemplate&&(n.icon||n.loading)),Me(1),ve("ngIf",!n.contentTemplate),Me(1),ve("ngIf",!n.contentTemplate&&n.badge))},dependencies:[bo,Wo,rc,Qo,_d],encapsulation:2,changeDetection:0}),i})(),sv=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({imports:[Ns,$c]}),i})();const ste=["input"];function ote(i,t){if(1&i){const e=Pi();lt(0,"i",6),fn("click",function(){return wt(e),At(_e().clear())}),ct()}}const WV=function(){return{"p-inputnumber-button p-inputnumber-button-up":!0}},jV=function(){return{"p-inputnumber-button p-inputnumber-button-down":!0}};function ate(i,t){if(1&i){const e=Pi();lt(0,"span",7)(1,"button",8),fn("mousedown",function(r){return wt(e),At(_e().onUpButtonMouseDown(r))})("mouseup",function(){return wt(e),At(_e().onUpButtonMouseUp())})("mouseleave",function(){return wt(e),At(_e().onUpButtonMouseLeave())})("keydown",function(r){return wt(e),At(_e().onUpButtonKeyDown(r))})("keyup",function(){return wt(e),At(_e().onUpButtonKeyUp())}),ct(),lt(2,"button",8),fn("mousedown",function(r){return wt(e),At(_e().onDownButtonMouseDown(r))})("mouseup",function(){return wt(e),At(_e().onDownButtonMouseUp())})("mouseleave",function(){return wt(e),At(_e().onDownButtonMouseLeave())})("keydown",function(r){return wt(e),At(_e().onDownButtonKeyDown(r))})("keyup",function(){return wt(e),At(_e().onDownButtonKeyUp())}),ct()()}if(2&i){const e=_e();Me(1),Ur(e.incrementButtonClass),ve("ngClass",Mo(10,WV))("icon",e.incrementButtonIcon)("disabled",e.disabled),Me(1),Ur(e.decrementButtonClass),ve("ngClass",Mo(11,jV))("icon",e.decrementButtonIcon)("disabled",e.disabled)}}function lte(i,t){if(1&i){const e=Pi();lt(0,"button",8),fn("mousedown",function(r){return wt(e),At(_e().onUpButtonMouseDown(r))})("mouseup",function(){return wt(e),At(_e().onUpButtonMouseUp())})("mouseleave",function(){return wt(e),At(_e().onUpButtonMouseLeave())})("keydown",function(r){return wt(e),At(_e().onUpButtonKeyDown(r))})("keyup",function(){return wt(e),At(_e().onUpButtonKeyUp())}),ct()}if(2&i){const e=_e();Ur(e.incrementButtonClass),ve("ngClass",Mo(5,WV))("icon",e.incrementButtonIcon)("disabled",e.disabled)}}function cte(i,t){if(1&i){const e=Pi();lt(0,"button",8),fn("mousedown",function(r){return wt(e),At(_e().onDownButtonMouseDown(r))})("mouseup",function(){return wt(e),At(_e().onDownButtonMouseUp())})("mouseleave",function(){return wt(e),At(_e().onDownButtonMouseLeave())})("keydown",function(r){return wt(e),At(_e().onDownButtonKeyDown(r))})("keyup",function(){return wt(e),At(_e().onDownButtonKeyUp())}),ct()}if(2&i){const e=_e();Ur(e.decrementButtonClass),ve("ngClass",Mo(5,jV))("icon",e.decrementButtonIcon)("disabled",e.disabled)}}const ute=function(i,t,e){return{"p-inputnumber p-component":!0,"p-inputnumber-buttons-stacked":i,"p-inputnumber-buttons-horizontal":t,"p-inputnumber-buttons-vertical":e}},dte={provide:bc,useExisting:ds(()=>$V),multi:!0};let $V=(()=>{class i{constructor(e,n){this.el=e,this.cd=n,this.showButtons=!1,this.format=!0,this.buttonLayout="stacked",this.incrementButtonIcon="pi pi-angle-up",this.decrementButtonIcon="pi pi-angle-down",this.readonly=!1,this.step=1,this.allowEmpty=!0,this.mode="decimal",this.useGrouping=!0,this.showClear=!1,this.onInput=new qn,this.onFocus=new qn,this.onBlur=new qn,this.onKeyDown=new qn,this.onClear=new qn,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.groupChar="",this.prefixChar="",this.suffixChar=""}get disabled(){return this._disabled}set disabled(e){e&&(this.focused=!1),this._disabled=e,this.timer&&this.clearTimer()}ngOnChanges(e){["locale","localeMatcher","mode","currency","currencyDisplay","useGrouping","minFractionDigits","maxFractionDigits","prefix","suffix"].some(r=>!!e[r])&&this.updateConstructParser()}ngOnInit(){this.constructParser(),this.initialized=!0}getOptions(){return{localeMatcher:this.localeMatcher,style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,useGrouping:this.useGrouping,minimumFractionDigits:this.minFractionDigits,maximumFractionDigits:this.maxFractionDigits}}constructParser(){this.numberFormat=new Intl.NumberFormat(this.locale,this.getOptions());const e=[...new Intl.NumberFormat(this.locale,{useGrouping:!1}).format(9876543210)].reverse(),n=new Map(e.map((r,s)=>[r,s]));this._numeral=new RegExp(`[${e.join("")}]`,"g"),this._group=this.getGroupingExpression(),this._minusSign=this.getMinusSignExpression(),this._currency=this.getCurrencyExpression(),this._decimal=this.getDecimalExpression(),this._suffix=this.getSuffixExpression(),this._prefix=this.getPrefixExpression(),this._index=r=>n.get(r)}updateConstructParser(){this.initialized&&this.constructParser()}escapeRegExp(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}getDecimalExpression(){const e=new Intl.NumberFormat(this.locale,{...this.getOptions(),useGrouping:!1});return new RegExp(`[${e.format(1.1).replace(this._currency,"").trim().replace(this._numeral,"")}]`,"g")}getGroupingExpression(){const e=new Intl.NumberFormat(this.locale,{useGrouping:!0});return this.groupChar=e.format(1e6).trim().replace(this._numeral,"").charAt(0),new RegExp(`[${this.groupChar}]`,"g")}getMinusSignExpression(){const e=new Intl.NumberFormat(this.locale,{useGrouping:!1});return new RegExp(`[${e.format(-1).trim().replace(this._numeral,"")}]`,"g")}getCurrencyExpression(){if(this.currency){const e=new Intl.NumberFormat(this.locale,{style:"currency",currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0});return new RegExp(`[${e.format(1).replace(/\s/g,"").replace(this._numeral,"").replace(this._group,"")}]`,"g")}return new RegExp("[]","g")}getPrefixExpression(){if(this.prefix)this.prefixChar=this.prefix;else{const e=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay});this.prefixChar=e.format(1).split("1")[0]}return new RegExp(`${this.escapeRegExp(this.prefixChar||"")}`,"g")}getSuffixExpression(){if(this.suffix)this.suffixChar=this.suffix;else{const e=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0});this.suffixChar=e.format(1).split("1")[1]}return new RegExp(`${this.escapeRegExp(this.suffixChar||"")}`,"g")}formatValue(e){if(null!=e){if("-"===e)return e;if(this.format){let r=new Intl.NumberFormat(this.locale,this.getOptions()).format(e);return this.prefix&&(r=this.prefix+r),this.suffix&&(r+=this.suffix),r}return e.toString()}return""}parseValue(e){let n=e.replace(this._suffix,"").replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").replace(this._group,"").replace(this._minusSign,"-").replace(this._decimal,".").replace(this._numeral,this._index);if(n){if("-"===n)return n;let r=+n;return isNaN(r)?null:r}return null}repeat(e,n,r){if(this.readonly)return;let s=n||500;this.clearTimer(),this.timer=setTimeout(()=>{this.repeat(e,40,r)},s),this.spin(e,r)}spin(e,n){let r=this.step*n,s=this.parseValue(this.input.nativeElement.value)||0,o=this.validateValue(s+r);this.maxlength&&this.maxlength<this.formatValue(o).length||(this.updateInput(o,null,"spin",null),this.updateModel(e,o),this.handleOnInput(e,s,o))}clear(){this.value=null,this.onModelChange(this.value),this.onClear.emit()}onUpButtonMouseDown(e){this.input.nativeElement.focus(),this.repeat(e,null,1),e.preventDefault()}onUpButtonMouseUp(){this.clearTimer()}onUpButtonMouseLeave(){this.clearTimer()}onUpButtonKeyDown(e){(32===e.keyCode||13===e.keyCode)&&this.repeat(e,null,1)}onUpButtonKeyUp(){this.clearTimer()}onDownButtonMouseDown(e){this.input.nativeElement.focus(),this.repeat(e,null,-1),e.preventDefault()}onDownButtonMouseUp(){this.clearTimer()}onDownButtonMouseLeave(){this.clearTimer()}onDownButtonKeyUp(){this.clearTimer()}onDownButtonKeyDown(e){(32===e.keyCode||13===e.keyCode)&&this.repeat(e,null,-1)}onUserInput(e){this.readonly||(this.isSpecialChar&&(e.target.value=this.lastValue),this.isSpecialChar=!1)}onInputKeyDown(e){if(this.readonly)return;if(this.lastValue=e.target.value,e.shiftKey||e.altKey)return void(this.isSpecialChar=!0);let n=e.target.selectionStart,r=e.target.selectionEnd,s=e.target.value,o=null;switch(e.altKey&&e.preventDefault(),e.which){case 38:this.spin(e,1),e.preventDefault();break;case 40:this.spin(e,-1),e.preventDefault();break;case 37:this.isNumeralChar(s.charAt(n-1))||e.preventDefault();break;case 39:this.isNumeralChar(s.charAt(n))||e.preventDefault();break;case 13:o=this.validateValue(this.parseValue(this.input.nativeElement.value)),this.input.nativeElement.value=this.formatValue(o),this.input.nativeElement.setAttribute("aria-valuenow",o),this.updateModel(e,o);break;case 8:if(e.preventDefault(),n===r){const l=s.charAt(n-1),{decimalCharIndex:u,decimalCharIndexWithoutPrefix:p}=this.getDecimalCharIndexes(s);if(this.isNumeralChar(l)){const v=this.getDecimalLength(s);if(this._group.test(l))this._group.lastIndex=0,o=s.slice(0,n-2)+s.slice(n-1);else if(this._decimal.test(l))this._decimal.lastIndex=0,v?this.input.nativeElement.setSelectionRange(n-1,n-1):o=s.slice(0,n-1)+s.slice(n);else if(u>0&&n>u){const x=this.isDecimalMode()&&(this.minFractionDigits||0)<v?"":"0";o=s.slice(0,n-1)+x+s.slice(n)}else 1===p?(o=s.slice(0,n-1)+"0"+s.slice(n),o=this.parseValue(o)>0?o:""):o=s.slice(0,n-1)+s.slice(n)}this.updateValue(e,o,null,"delete-single")}else o=this.deleteRange(s,n,r),this.updateValue(e,o,null,"delete-range");break;case 46:if(e.preventDefault(),n===r){const l=s.charAt(n),{decimalCharIndex:u,decimalCharIndexWithoutPrefix:p}=this.getDecimalCharIndexes(s);if(this.isNumeralChar(l)){const v=this.getDecimalLength(s);if(this._group.test(l))this._group.lastIndex=0,o=s.slice(0,n)+s.slice(n+2);else if(this._decimal.test(l))this._decimal.lastIndex=0,v?this.input.nativeElement.setSelectionRange(n+1,n+1):o=s.slice(0,n)+s.slice(n+1);else if(u>0&&n>u){const x=this.isDecimalMode()&&(this.minFractionDigits||0)<v?"":"0";o=s.slice(0,n)+x+s.slice(n+1)}else 1===p?(o=s.slice(0,n)+"0"+s.slice(n+1),o=this.parseValue(o)>0?o:""):o=s.slice(0,n)+s.slice(n+1)}this.updateValue(e,o,null,"delete-back-single")}else o=this.deleteRange(s,n,r),this.updateValue(e,o,null,"delete-range")}this.onKeyDown.emit(e)}onInputKeyPress(e){if(this.readonly)return;e.preventDefault();let n=e.which||e.keyCode,r=String.fromCharCode(n);const s=this.isDecimalSign(r),o=this.isMinusSign(r);(48<=n&&n<=57||o||s)&&this.insert(e,r,{isDecimalSign:s,isMinusSign:o})}onPaste(e){if(!this.disabled&&!this.readonly){e.preventDefault();let n=(e.clipboardData||window.clipboardData).getData("Text");if(n){let r=this.parseValue(n);null!=r&&this.insert(e,r.toString())}}}allowMinusSign(){return null==this.min||this.min<0}isMinusSign(e){return!(!this._minusSign.test(e)&&"-"!==e||(this._minusSign.lastIndex=0,0))}isDecimalSign(e){return!!this._decimal.test(e)&&(this._decimal.lastIndex=0,!0)}isDecimalMode(){return"decimal"===this.mode}getDecimalCharIndexes(e){let n=e.search(this._decimal);this._decimal.lastIndex=0;const s=e.replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").search(this._decimal);return this._decimal.lastIndex=0,{decimalCharIndex:n,decimalCharIndexWithoutPrefix:s}}getCharIndexes(e){const n=e.search(this._decimal);this._decimal.lastIndex=0;const r=e.search(this._minusSign);this._minusSign.lastIndex=0;const s=e.search(this._suffix);this._suffix.lastIndex=0;const o=e.search(this._currency);return this._currency.lastIndex=0,{decimalCharIndex:n,minusCharIndex:r,suffixCharIndex:s,currencyCharIndex:o}}insert(e,n,r={isDecimalSign:!1,isMinusSign:!1}){const s=n.search(this._minusSign);if(this._minusSign.lastIndex=0,!this.allowMinusSign()&&-1!==s)return;let o=this.input.nativeElement.selectionStart,l=this.input.nativeElement.selectionEnd,u=this.input.nativeElement.value.trim();const{decimalCharIndex:p,minusCharIndex:v,suffixCharIndex:x,currencyCharIndex:I}=this.getCharIndexes(u);let T;if(r.isMinusSign)0===o&&(T=u,(-1===v||0!==l)&&(T=this.insertText(u,n,0,l)),this.updateValue(e,T,n,"insert"));else if(r.isDecimalSign)p>0&&o===p?this.updateValue(e,u,n,"insert"):(p>o&&p<l||-1===p&&this.maxFractionDigits)&&(T=this.insertText(u,n,o,l),this.updateValue(e,T,n,"insert"));else{const F=this.numberFormat.resolvedOptions().maximumFractionDigits,j=o!==l?"range-insert":"insert";if(p>0&&o>p){if(o+n.length-(p+1)<=F){const X=I>=o?I-1:x>=o?x:u.length;T=u.slice(0,o)+n+u.slice(o+n.length,X)+u.slice(X),this.updateValue(e,T,n,j)}}else T=this.insertText(u,n,o,l),this.updateValue(e,T,n,j)}}insertText(e,n,r,s){if(2===("."===n?n:n.split(".")).length){const l=e.slice(r,s).search(this._decimal);return this._decimal.lastIndex=0,l>0?e.slice(0,r)+this.formatValue(n)+e.slice(s):e||this.formatValue(n)}return s-r===e.length?this.formatValue(n):0===r?n+e.slice(s):s===e.length?e.slice(0,r)+n:e.slice(0,r)+n+e.slice(s)}deleteRange(e,n,r){let s;return s=r-n===e.length?"":0===n?e.slice(r):r===e.length?e.slice(0,n):e.slice(0,n)+e.slice(r),s}initCursor(){let e=this.input.nativeElement.selectionStart,n=this.input.nativeElement.value,r=n.length,s=null,o=(this.prefixChar||"").length;n=n.replace(this._prefix,""),e-=o;let l=n.charAt(e);if(this.isNumeralChar(l))return e+o;let u=e-1;for(;u>=0;){if(l=n.charAt(u),this.isNumeralChar(l)){s=u+o;break}u--}if(null!==s)this.input.nativeElement.setSelectionRange(s+1,s+1);else{for(u=e;u<r;){if(l=n.charAt(u),this.isNumeralChar(l)){s=u+o;break}u++}null!==s&&this.input.nativeElement.setSelectionRange(s,s)}return s||0}onInputClick(){this.readonly||this.initCursor()}isNumeralChar(e){return!(1!==e.length||!(this._numeral.test(e)||this._decimal.test(e)||this._group.test(e)||this._minusSign.test(e))||(this.resetRegex(),0))}resetRegex(){this._numeral.lastIndex=0,this._decimal.lastIndex=0,this._group.lastIndex=0,this._minusSign.lastIndex=0}updateValue(e,n,r,s){let o=this.input.nativeElement.value,l=null;null!=n&&(l=this.parseValue(n),l=l||this.allowEmpty?l:0,this.updateInput(l,r,s,n),this.handleOnInput(e,o,l))}handleOnInput(e,n,r){this.isValueChanged(n,r)&&this.onInput.emit({originalEvent:e,value:r})}isValueChanged(e,n){return null===n&&null!==e||null!=n&&n!==("string"==typeof e?this.parseValue(e):e)}validateValue(e){return"-"===e||null==e?null:null!=this.min&&e<this.min?this.min:null!=this.max&&e>this.max?this.max:e}updateInput(e,n,r,s){n=n||"";let o=this.input.nativeElement.value,l=this.formatValue(e),u=o.length;if(l!==s&&(l=this.concatValues(l,s)),0===u){this.input.nativeElement.value=l,this.input.nativeElement.setSelectionRange(0,0);const v=this.initCursor()+n.length;this.input.nativeElement.setSelectionRange(v,v)}else{let p=this.input.nativeElement.selectionStart,v=this.input.nativeElement.selectionEnd;if(this.maxlength&&this.maxlength<l.length)return;this.input.nativeElement.value=l;let x=l.length;if("range-insert"===r){const I=this.parseValue((o||"").slice(0,p)),F=(null!==I?I.toString():"").split("").join(`(${this.groupChar})?`),j=new RegExp(F,"g");j.test(l);const X=n.split("").join(`(${this.groupChar})?`),ce=new RegExp(X,"g");ce.test(l.slice(j.lastIndex)),v=j.lastIndex+ce.lastIndex,this.input.nativeElement.setSelectionRange(v,v)}else if(x===u)"insert"===r||"delete-back-single"===r?this.input.nativeElement.setSelectionRange(v+1,v+1):"delete-single"===r?this.input.nativeElement.setSelectionRange(v-1,v-1):("delete-range"===r||"spin"===r)&&this.input.nativeElement.setSelectionRange(v,v);else if("delete-back-single"===r){let I=o.charAt(v-1),T=o.charAt(v),F=u-x,j=this._group.test(T);j&&1===F?v+=1:!j&&this.isNumeralChar(I)&&(v+=-1*F+1),this._group.lastIndex=0,this.input.nativeElement.setSelectionRange(v,v)}else if("-"===o&&"insert"===r){this.input.nativeElement.setSelectionRange(0,0);const T=this.initCursor()+n.length+1;this.input.nativeElement.setSelectionRange(T,T)}else v+=x-u,this.input.nativeElement.setSelectionRange(v,v)}this.input.nativeElement.setAttribute("aria-valuenow",e)}concatValues(e,n){if(e&&n){let r=n.search(this._decimal);return this._decimal.lastIndex=0,-1!==r?e.split(this._decimal)[0]+n.slice(r):e}return e}getDecimalLength(e){if(e){const n=e.split(this._decimal);if(2===n.length)return n[1].replace(this._suffix,"").trim().replace(/\s/g,"").replace(this._currency,"").length}return 0}onInputFocus(e){this.focused=!0,this.onFocus.emit(e)}onInputBlur(e){this.focused=!1;let n=this.validateValue(this.parseValue(this.input.nativeElement.value));this.input.nativeElement.value=this.formatValue(n),this.input.nativeElement.setAttribute("aria-valuenow",n),this.updateModel(e,n),this.onBlur.emit(e)}formattedValue(){return this.formatValue(this.value||this.allowEmpty?this.value:0)}updateModel(e,n){this.value!==n&&(this.value=n,this.onModelChange(n)),this.onModelTouched()}writeValue(e){this.value=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}get filled(){return null!=this.value&&this.value.toString().length>0}clearTimer(){this.timer&&clearInterval(this.timer)}getFormatter(){return this.numberFormat}}return i.\u0275fac=function(e){return new(e||i)(Zt(Xn),Zt(Zo))},i.\u0275cmp=Ir({type:i,selectors:[["p-inputNumber"]],viewQuery:function(e,n){if(1&e&&vs(ste,5),2&e){let r;vr(r=yr())&&(n.input=r.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(e,n){2&e&&Ep("p-inputwrapper-filled",n.filled)("p-inputwrapper-focus",n.focused)("p-inputnumber-clearable",n.showClear&&"vertical"!=n.buttonLayout)},inputs:{showButtons:"showButtons",format:"format",buttonLayout:"buttonLayout",inputId:"inputId",styleClass:"styleClass",style:"style",placeholder:"placeholder",size:"size",maxlength:"maxlength",tabindex:"tabindex",title:"title",ariaLabel:"ariaLabel",ariaRequired:"ariaRequired",name:"name",required:"required",autocomplete:"autocomplete",min:"min",max:"max",incrementButtonClass:"incrementButtonClass",decrementButtonClass:"decrementButtonClass",incrementButtonIcon:"incrementButtonIcon",decrementButtonIcon:"decrementButtonIcon",readonly:"readonly",step:"step",allowEmpty:"allowEmpty",locale:"locale",localeMatcher:"localeMatcher",mode:"mode",currency:"currency",currencyDisplay:"currencyDisplay",useGrouping:"useGrouping",minFractionDigits:"minFractionDigits",maxFractionDigits:"maxFractionDigits",prefix:"prefix",suffix:"suffix",inputStyle:"inputStyle",inputStyleClass:"inputStyleClass",showClear:"showClear",disabled:"disabled"},outputs:{onInput:"onInput",onFocus:"onFocus",onBlur:"onBlur",onKeyDown:"onKeyDown",onClear:"onClear"},features:[To([dte]),_a],decls:7,vars:32,consts:[[3,"ngClass","ngStyle"],["pInputText","","inputmode","decimal",3,"ngClass","ngStyle","value","disabled","readonly","input","keydown","keypress","paste","click","focus","blur"],["input",""],["class","p-inputnumber-clear-icon pi pi-times",3,"click",4,"ngIf"],["class","p-inputnumber-button-group",4,"ngIf"],["type","button","pButton","",3,"ngClass","class","icon","disabled","mousedown","mouseup","mouseleave","keydown","keyup",4,"ngIf"],[1,"p-inputnumber-clear-icon","pi","pi-times",3,"click"],[1,"p-inputnumber-button-group"],["type","button","pButton","",3,"ngClass","icon","disabled","mousedown","mouseup","mouseleave","keydown","keyup"]],template:function(e,n){1&e&&(lt(0,"span",0)(1,"input",1,2),fn("input",function(s){return n.onUserInput(s)})("keydown",function(s){return n.onInputKeyDown(s)})("keypress",function(s){return n.onInputKeyPress(s)})("paste",function(s){return n.onPaste(s)})("click",function(){return n.onInputClick()})("focus",function(s){return n.onInputFocus(s)})("blur",function(s){return n.onInputBlur(s)}),ct(),Ze(3,ote,1,0,"i",3),Ze(4,ate,3,12,"span",4),Ze(5,lte,1,6,"button",5),Ze(6,cte,1,6,"button",5),ct()),2&e&&(Ur(n.styleClass),ve("ngClass",wu(28,ute,n.showButtons&&"stacked"===n.buttonLayout,n.showButtons&&"horizontal"===n.buttonLayout,n.showButtons&&"vertical"===n.buttonLayout))("ngStyle",n.style),Me(1),Ur(n.inputStyleClass),ve("ngClass","p-inputnumber-input")("ngStyle",n.inputStyle)("value",n.formattedValue())("disabled",n.disabled)("readonly",n.readonly),mr("placeholder",n.placeholder)("title",n.title)("id",n.inputId)("size",n.size)("name",n.name)("autocomplete",n.autocomplete)("maxlength",n.maxlength)("tabindex",n.tabindex)("aria-label",n.ariaLabel)("aria-required",n.ariaRequired)("required",n.required)("min",n.min)("max",n.max),Me(2),ve("ngIf","vertical"!=n.buttonLayout&&n.showClear&&n.value),Me(1),ve("ngIf",n.showButtons&&"stacked"===n.buttonLayout),Me(1),ve("ngIf",n.showButtons&&"stacked"!==n.buttonLayout),Me(1),ve("ngIf",n.showButtons&&"stacked"!==n.buttonLayout))},dependencies:[bo,Wo,Qo,Aw,cC],styles:["p-inputnumber,.p-inputnumber{display:inline-flex}.p-inputnumber-button{display:flex;align-items:center;justify-content:center;flex:0 0 auto}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button .p-button-label,.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button .p-button-label{display:none}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-up{border-top-left-radius:0;border-bottom-left-radius:0;border-bottom-right-radius:0;padding:0}.p-inputnumber-buttons-stacked .p-inputnumber-input{border-top-right-radius:0;border-bottom-right-radius:0}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-down{border-top-left-radius:0;border-top-right-radius:0;border-bottom-left-radius:0;padding:0}.p-inputnumber-buttons-stacked .p-inputnumber-button-group{display:flex;flex-direction:column}.p-inputnumber-buttons-stacked .p-inputnumber-button-group .p-button.p-inputnumber-button{flex:1 1 auto}.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-up{order:3;border-top-left-radius:0;border-bottom-left-radius:0}.p-inputnumber-buttons-horizontal .p-inputnumber-input{order:2;border-radius:0}.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-down{order:1;border-top-right-radius:0;border-bottom-right-radius:0}.p-inputnumber-buttons-vertical{flex-direction:column}.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-up{order:1;border-bottom-left-radius:0;border-bottom-right-radius:0;width:100%}.p-inputnumber-buttons-vertical .p-inputnumber-input{order:2;border-radius:0;text-align:center}.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-down{order:3;border-top-left-radius:0;border-top-right-radius:0;width:100%}.p-inputnumber-input{flex:1 1 auto}.p-fluid p-inputnumber,.p-fluid .p-inputnumber{width:100%}.p-fluid .p-inputnumber .p-inputnumber-input{width:1%}.p-fluid .p-inputnumber-buttons-vertical .p-inputnumber-input{width:100%}.p-inputnumber-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-inputnumber-clearable{position:relative}\n"],encapsulation:2,changeDetection:0}),i})(),H1=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({imports:[Ns,B2,sv]}),i})();function hte(i,t){1&i&&Ki(0)}const z2=function(i){return{$implicit:i}};function fte(i,t){if(1&i&&(lt(0,"div",15),Ze(1,hte,1,0,"ng-container",16),ct()),2&i){const e=_e(2);Me(1),ve("ngTemplateOutlet",e.templateLeft)("ngTemplateOutletContext",Bi(2,z2,e.paginatorState))}}function pte(i,t){if(1&i&&(lt(0,"span",17),qi(1),ct()),2&i){const e=_e(2);Me(1),as(e.currentPageReport)}}const G1=function(i){return{"p-disabled":i}};function gte(i,t){if(1&i){const e=Pi();lt(0,"button",18),fn("click",function(r){return wt(e),At(_e(2).changePageToFirst(r))}),ii(1,"span",19),ct()}if(2&i){const e=_e(2);ve("disabled",e.isFirstPage()||e.empty())("ngClass",Bi(2,G1,e.isFirstPage()||e.empty()))}}const mte=function(i){return{"p-highlight":i}};function vte(i,t){if(1&i){const e=Pi();lt(0,"button",22),fn("click",function(r){const o=wt(e).$implicit;return At(_e(3).onPageLinkClick(r,o-1))}),qi(1),ct()}if(2&i){const e=t.$implicit,n=_e(3);ve("ngClass",Bi(2,mte,e-1==n.getPage())),Me(1),as(e)}}function yte(i,t){if(1&i&&(lt(0,"span",20),Ze(1,vte,2,4,"button",21),ct()),2&i){const e=_e(2);Me(1),ve("ngForOf",e.pageLinks)}}function _te(i,t){1&i&&qi(0),2&i&&as(_e(3).currentPageReport)}function bte(i,t){if(1&i){const e=Pi();lt(0,"p-dropdown",23),fn("onChange",function(r){return wt(e),At(_e(2).onPageDropdownChange(r))}),Ze(1,_te,1,1,"ng-template",24),ct()}if(2&i){const e=_e(2);ve("options",e.pageItems)("ngModel",e.getPage())("disabled",e.empty())("appendTo",e.dropdownAppendTo)("scrollHeight",e.dropdownScrollHeight)}}function Cte(i,t){if(1&i){const e=Pi();lt(0,"button",25),fn("click",function(r){return wt(e),At(_e(2).changePageToLast(r))}),ii(1,"span",26),ct()}if(2&i){const e=_e(2);ve("disabled",e.isLastPage()||e.empty())("ngClass",Bi(2,G1,e.isLastPage()||e.empty()))}}function xte(i,t){if(1&i){const e=Pi();lt(0,"p-inputNumber",27),fn("ngModelChange",function(r){return wt(e),At(_e(2).changePage(r-1))}),ct()}if(2&i){const e=_e(2);ve("ngModel",e.currentPage())("disabled",e.empty())}}function wte(i,t){1&i&&Ki(0)}function Ate(i,t){if(1&i&&Ze(0,wte,1,0,"ng-container",16),2&i){const e=t.$implicit;ve("ngTemplateOutlet",_e(4).dropdownItemTemplate)("ngTemplateOutletContext",Bi(2,z2,e))}}function Ite(i,t){1&i&&(qr(0),Ze(1,Ate,1,4,"ng-template",30),Xr())}function Ste(i,t){if(1&i){const e=Pi();lt(0,"p-dropdown",28),fn("ngModelChange",function(r){return wt(e),At(_e(2).rows=r)})("onChange",function(r){return wt(e),At(_e(2).onRppChange(r))}),Ze(1,Ite,2,0,"ng-container",29),ct()}if(2&i){const e=_e(2);ve("options",e.rowsPerPageItems)("ngModel",e.rows)("disabled",e.empty())("appendTo",e.dropdownAppendTo)("scrollHeight",e.dropdownScrollHeight),Me(1),ve("ngIf",e.dropdownItemTemplate)}}function Ete(i,t){1&i&&Ki(0)}function Tte(i,t){if(1&i&&(lt(0,"div",31),Ze(1,Ete,1,0,"ng-container",16),ct()),2&i){const e=_e(2);Me(1),ve("ngTemplateOutlet",e.templateRight)("ngTemplateOutletContext",Bi(2,z2,e.paginatorState))}}function Mte(i,t){if(1&i){const e=Pi();lt(0,"div",1),Ze(1,fte,2,4,"div",2),Ze(2,pte,2,1,"span",3),Ze(3,gte,2,4,"button",4),lt(4,"button",5),fn("click",function(r){return wt(e),At(_e().changePageToPrev(r))}),ii(5,"span",6),ct(),Ze(6,yte,2,1,"span",7),Ze(7,bte,2,5,"p-dropdown",8),lt(8,"button",9),fn("click",function(r){return wt(e),At(_e().changePageToNext(r))}),ii(9,"span",10),ct(),Ze(10,Cte,2,4,"button",11),Ze(11,xte,1,2,"p-inputNumber",12),Ze(12,Ste,2,6,"p-dropdown",13),Ze(13,Tte,2,4,"div",14),ct()}if(2&i){const e=_e();Ur(e.styleClass),ve("ngStyle",e.style)("ngClass","p-paginator p-component"),Me(1),ve("ngIf",e.templateLeft),Me(1),ve("ngIf",e.showCurrentPageReport),Me(1),ve("ngIf",e.showFirstLastIcon),Me(1),ve("disabled",e.isFirstPage()||e.empty())("ngClass",Bi(17,G1,e.isFirstPage()||e.empty())),Me(2),ve("ngIf",e.showPageLinks),Me(1),ve("ngIf",e.showJumpToPageDropdown),Me(1),ve("disabled",e.isLastPage()||e.empty())("ngClass",Bi(19,G1,e.isLastPage()||e.empty())),Me(2),ve("ngIf",e.showFirstLastIcon),Me(1),ve("ngIf",e.showJumpToPageInput),Me(1),ve("ngIf",e.rowsPerPageOptions),Me(1),ve("ngIf",e.templateRight)}}let Dte=(()=>{class i{constructor(e){this.cd=e,this.pageLinkSize=5,this.onPageChange=new qn,this.alwaysShow=!0,this.dropdownScrollHeight="200px",this.currentPageReportTemplate="{currentPage} of {totalPages}",this.showFirstLastIcon=!0,this.totalRecords=0,this.rows=0,this.showPageLinks=!0,this._first=0,this._page=0}ngOnInit(){this.updatePaginatorState()}ngOnChanges(e){e.totalRecords&&(this.updatePageLinks(),this.updatePaginatorState(),this.updateFirst(),this.updateRowsPerPageOptions()),e.first&&(this._first=e.first.currentValue,this.updatePageLinks(),this.updatePaginatorState()),e.rows&&(this.updatePageLinks(),this.updatePaginatorState()),e.rowsPerPageOptions&&this.updateRowsPerPageOptions()}get first(){return this._first}set first(e){this._first=e}updateRowsPerPageOptions(){if(this.rowsPerPageOptions){this.rowsPerPageItems=[];for(let e of this.rowsPerPageOptions)"object"==typeof e&&e.showAll?this.rowsPerPageItems.unshift({label:e.showAll,value:this.totalRecords}):this.rowsPerPageItems.push({label:String(e),value:e})}}isFirstPage(){return 0===this.getPage()}isLastPage(){return this.getPage()===this.getPageCount()-1}getPageCount(){return Math.ceil(this.totalRecords/this.rows)}calculatePageLinkBoundaries(){let e=this.getPageCount(),n=Math.min(this.pageLinkSize,e),r=Math.max(0,Math.ceil(this.getPage()-n/2)),s=Math.min(e-1,r+n-1);return r=Math.max(0,r-(this.pageLinkSize-(s-r+1))),[r,s]}updatePageLinks(){this.pageLinks=[];let e=this.calculatePageLinkBoundaries(),r=e[1];for(let s=e[0];s<=r;s++)this.pageLinks.push(s+1);if(this.showJumpToPageDropdown){this.pageItems=[];for(let s=0;s<this.getPageCount();s++)this.pageItems.push({label:String(s+1),value:s})}}changePage(e){var n=this.getPageCount();if(e>=0&&e<n){this._first=this.rows*e;var r={page:e,first:this.first,rows:this.rows,pageCount:n};this.updatePageLinks(),this.onPageChange.emit(r),this.updatePaginatorState()}}updateFirst(){const e=this.getPage();e>0&&this.totalRecords&&this.first>=this.totalRecords&&Promise.resolve(null).then(()=>this.changePage(e-1))}getPage(){return Math.floor(this.first/this.rows)}changePageToFirst(e){this.isFirstPage()||this.changePage(0),e.preventDefault()}changePageToPrev(e){this.changePage(this.getPage()-1),e.preventDefault()}changePageToNext(e){this.changePage(this.getPage()+1),e.preventDefault()}changePageToLast(e){this.isLastPage()||this.changePage(this.getPageCount()-1),e.preventDefault()}onPageLinkClick(e,n){this.changePage(n),e.preventDefault()}onRppChange(e){this.changePage(this.getPage())}onPageDropdownChange(e){this.changePage(e.value)}updatePaginatorState(){this.paginatorState={page:this.getPage(),pageCount:this.getPageCount(),rows:this.rows,first:this.first,totalRecords:this.totalRecords}}empty(){return 0===this.getPageCount()}currentPage(){return this.getPageCount()>0?this.getPage()+1:0}get currentPageReport(){return this.currentPageReportTemplate.replace("{currentPage}",String(this.currentPage())).replace("{totalPages}",String(this.getPageCount())).replace("{first}",String(this.totalRecords>0?this._first+1:0)).replace("{last}",String(Math.min(this._first+this.rows,this.totalRecords))).replace("{rows}",String(this.rows)).replace("{totalRecords}",String(this.totalRecords))}}return i.\u0275fac=function(e){return new(e||i)(Zt(Zo))},i.\u0275cmp=Ir({type:i,selectors:[["p-paginator"]],hostAttrs:[1,"p-element"],inputs:{pageLinkSize:"pageLinkSize",style:"style",styleClass:"styleClass",alwaysShow:"alwaysShow",templateLeft:"templateLeft",templateRight:"templateRight",dropdownAppendTo:"dropdownAppendTo",dropdownScrollHeight:"dropdownScrollHeight",currentPageReportTemplate:"currentPageReportTemplate",showCurrentPageReport:"showCurrentPageReport",showFirstLastIcon:"showFirstLastIcon",totalRecords:"totalRecords",rows:"rows",rowsPerPageOptions:"rowsPerPageOptions",showJumpToPageDropdown:"showJumpToPageDropdown",showJumpToPageInput:"showJumpToPageInput",showPageLinks:"showPageLinks",dropdownItemTemplate:"dropdownItemTemplate",first:"first"},outputs:{onPageChange:"onPageChange"},features:[_a],decls:1,vars:1,consts:[[3,"class","ngStyle","ngClass",4,"ngIf"],[3,"ngStyle","ngClass"],["class","p-paginator-left-content",4,"ngIf"],["class","p-paginator-current",4,"ngIf"],["type","button","pRipple","","class","p-paginator-first p-paginator-element p-link",3,"disabled","ngClass","click",4,"ngIf"],["type","button","pRipple","",1,"p-paginator-prev","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-left"],["class","p-paginator-pages",4,"ngIf"],["styleClass","p-paginator-page-options",3,"options","ngModel","disabled","appendTo","scrollHeight","onChange",4,"ngIf"],["type","button","pRipple","",1,"p-paginator-next","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-right"],["type","button","pRipple","","class","p-paginator-last p-paginator-element p-link",3,"disabled","ngClass","click",4,"ngIf"],["class","p-paginator-page-input",3,"ngModel","disabled","ngModelChange",4,"ngIf"],["styleClass","p-paginator-rpp-options",3,"options","ngModel","disabled","appendTo","scrollHeight","ngModelChange","onChange",4,"ngIf"],["class","p-paginator-right-content",4,"ngIf"],[1,"p-paginator-left-content"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-paginator-current"],["type","button","pRipple","",1,"p-paginator-first","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-double-left"],[1,"p-paginator-pages"],["type","button","class","p-paginator-page p-paginator-element p-link","pRipple","",3,"ngClass","click",4,"ngFor","ngForOf"],["type","button","pRipple","",1,"p-paginator-page","p-paginator-element","p-link",3,"ngClass","click"],["styleClass","p-paginator-page-options",3,"options","ngModel","disabled","appendTo","scrollHeight","onChange"],["pTemplate","selectedItem"],["type","button","pRipple","",1,"p-paginator-last","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-double-right"],[1,"p-paginator-page-input",3,"ngModel","disabled","ngModelChange"],["styleClass","p-paginator-rpp-options",3,"options","ngModel","disabled","appendTo","scrollHeight","ngModelChange","onChange"],[4,"ngIf"],["pTemplate","item"],[1,"p-paginator-right-content"]],template:function(e,n){1&e&&Ze(0,Mte,14,21,"div",0),2&e&&ve("ngIf",!!n.alwaysShow||n.pageLinks&&n.pageLinks.length>1)},dependencies:[bo,Su,Wo,rc,Qo,N2,_l,$V,oC,ry,_d],styles:[".p-paginator{display:flex;align-items:center;justify-content:center;flex-wrap:wrap}.p-paginator-left-content{margin-right:auto}.p-paginator-right-content{margin-left:auto}.p-paginator-page,.p-paginator-next,.p-paginator-last,.p-paginator-first,.p-paginator-prev,.p-paginator-current{cursor:pointer;display:inline-flex;align-items:center;justify-content:center;line-height:1;-webkit-user-select:none;user-select:none;overflow:hidden;position:relative}.p-paginator-element:focus{z-index:1;position:relative}\n"],encapsulation:2,changeDetection:0}),i})(),qV=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({imports:[Ns,V1,H1,B1,Na,$c,V1,H1,B1,Na]}),i})();function Lte(i,t){1&i&&ii(0,"span",8),2&i&&(Ur(_e(2).$implicit.icon),ve("ngClass","p-button-icon p-button-icon-left"))}function Pte(i,t){if(1&i&&(qr(0),Ze(1,Lte,1,3,"span",6),lt(2,"span",7),qi(3),ct(),Xr()),2&i){const e=_e().$implicit,n=_e();Me(1),ve("ngIf",e.icon),Me(2),as(n.getOptionLabel(e))}}function Rte(i,t){1&i&&Ki(0)}const kte=function(i,t){return{$implicit:i,index:t}};function Ote(i,t){if(1&i&&Ze(0,Rte,1,0,"ng-container",9),2&i){const e=_e(),n=e.$implicit,r=e.index;ve("ngTemplateOutlet",_e().itemTemplate)("ngTemplateOutletContext",ys(2,kte,n,r))}}const Fte=function(i,t,e){return{"p-highlight":i,"p-disabled":t,"p-button-icon-only":e}};function Nte(i,t){if(1&i){const e=Pi();lt(0,"div",2,3),fn("click",function(r){const s=wt(e),o=s.$implicit,l=s.index;return At(_e().onItemClick(r,o,l))})("keydown.enter",function(r){const s=wt(e),o=s.$implicit,l=s.index;return At(_e().onItemClick(r,o,l))})("blur",function(){return wt(e),At(_e().onBlur())}),Ze(2,Pte,4,2,"ng-container",4),Ze(3,Ote,1,5,"ng-template",null,5,vc),ct()}if(2&i){const e=t.$implicit,n=co(4),r=_e();Ur(e.styleClass),ve("ngClass",wu(10,Fte,r.isSelected(e),r.disabled||r.isOptionDisabled(e),e.icon&&!r.getOptionLabel(e))),mr("aria-pressed",r.isSelected(e))("title",e.title)("aria-label",e.label)("tabindex",r.disabled?null:r.tabindex)("aria-labelledby",r.getOptionLabel(e)),Me(2),ve("ngIf",!r.itemTemplate)("ngIfElse",n)}}const Bte={provide:bc,useExisting:ds(()=>zte),multi:!0};let zte=(()=>{class i{constructor(e){this.cd=e,this.tabindex=0,this.onOptionClick=new qn,this.onChange=new qn,this.onModelChange=()=>{},this.onModelTouched=()=>{}}getOptionLabel(e){return this.optionLabel?fr.resolveFieldData(e,this.optionLabel):null!=e.label?e.label:e}getOptionValue(e){return this.optionValue?fr.resolveFieldData(e,this.optionValue):this.optionLabel||void 0===e.value?e:e.value}isOptionDisabled(e){return this.optionDisabled?fr.resolveFieldData(e,this.optionDisabled):void 0!==e.disabled&&e.disabled}writeValue(e){this.value=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onItemClick(e,n,r){if(!this.disabled&&!this.isOptionDisabled(n)){if(this.multiple)this.isSelected(n)?this.removeOption(n):this.value=[...this.value||[],this.getOptionValue(n)],this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value});else{let s=this.getOptionValue(n);this.value!==s&&(this.value=this.getOptionValue(n),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}))}this.onOptionClick.emit({originalEvent:e,option:n,index:r})}}onBlur(){this.onModelTouched()}removeOption(e){this.value=this.value.filter(n=>!fr.equals(n,this.getOptionValue(e),this.dataKey))}isSelected(e){let n=!1,r=this.getOptionValue(e);if(this.multiple){if(this.value)for(let s of this.value)if(fr.equals(s,r,this.dataKey)){n=!0;break}}else n=fr.equals(this.getOptionValue(e),this.value,this.dataKey);return n}}return i.\u0275fac=function(e){return new(e||i)(Zt(Zo))},i.\u0275cmp=Ir({type:i,selectors:[["p-selectButton"]],contentQueries:function(e,n,r){if(1&e&&cl(r,am,5),2&e){let s;vr(s=yr())&&(n.itemTemplate=s.first)}},hostAttrs:[1,"p-element"],inputs:{options:"options",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",tabindex:"tabindex",multiple:"multiple",style:"style",styleClass:"styleClass",ariaLabelledBy:"ariaLabelledBy",disabled:"disabled",dataKey:"dataKey"},outputs:{onOptionClick:"onOptionClick",onChange:"onChange"},features:[To([Bte])],decls:2,vars:5,consts:[["role","group",3,"ngClass","ngStyle"],["class","p-button p-component","role","button","pRipple","",3,"class","ngClass","click","keydown.enter","blur",4,"ngFor","ngForOf"],["role","button","pRipple","",1,"p-button","p-component",3,"ngClass","click","keydown.enter","blur"],["btn",""],[4,"ngIf","ngIfElse"],["customcontent",""],[3,"ngClass","class",4,"ngIf"],[1,"p-button-label"],[3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,n){1&e&&(lt(0,"div",0),Ze(1,Nte,5,14,"div",1),ct()),2&e&&(Ur(n.styleClass),ve("ngClass","p-selectbutton p-buttonset p-component")("ngStyle",n.style),Me(1),ve("ngForOf",n.options))},dependencies:[bo,Su,Wo,rc,Qo,_d],styles:[".p-button{margin:0;display:inline-flex;cursor:pointer;-webkit-user-select:none;user-select:none;align-items:center;vertical-align:bottom;text-align:center;overflow:hidden;position:relative}.p-button-label{flex:1 1 auto}.p-button-icon-right{order:1}.p-button:disabled{cursor:default}.p-button-icon-only{justify-content:center}.p-button-icon-only .p-button-label{visibility:hidden;width:0;flex:0 0 auto}.p-button-vertical{flex-direction:column}.p-button-icon-bottom{order:2}.p-buttonset .p-button{margin:0}.p-buttonset .p-button:not(:last-child){border-right:0 none}.p-buttonset .p-button:not(:first-of-type):not(:last-of-type){border-radius:0}.p-buttonset .p-button:first-of-type{border-top-right-radius:0;border-bottom-right-radius:0}.p-buttonset .p-button:last-of-type{border-top-left-radius:0;border-bottom-left-radius:0}.p-buttonset .p-button:focus{position:relative;z-index:1}\n"],encapsulation:2,changeDetection:0}),i})(),Vte=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({imports:[Ns,$c]}),i})();const Ute=function(i,t,e){return{"p-checkbox-label-active":i,"p-disabled":t,"p-checkbox-label-focus":e}};function Hte(i,t){if(1&i){const e=Pi();lt(0,"label",7),fn("click",function(r){wt(e);const s=_e(),o=co(3);return At(s.onClick(r,o))}),qi(1),ct()}if(2&i){const e=_e();ve("ngClass",wu(3,Ute,null!=e.value,e.disabled,e.focused)),mr("for",e.inputId),Me(1),as(e.label)}}const Gte=function(i,t){return{"p-checkbox p-component":!0,"p-checkbox-disabled":i,"p-checkbox-focused":t}},Wte=function(i,t,e){return{"p-highlight":i,"p-disabled":t,"p-focus":e}},jte={provide:bc,useExisting:ds(()=>$te),multi:!0};let $te=(()=>{class i{constructor(e){this.cd=e,this.checkboxTrueIcon="pi pi-check",this.checkboxFalseIcon="pi pi-times",this.onChange=new qn,this.onModelChange=()=>{},this.onModelTouched=()=>{}}onClick(e,n){!this.disabled&&!this.readonly&&(this.toggle(e),this.focused=!0,n.focus())}onKeydown(e){32==e.keyCode&&e.preventDefault()}onKeyup(e){32==e.keyCode&&!this.readonly&&(this.toggle(e),e.preventDefault())}toggle(e){null==this.value||null==this.value?this.value=!0:1==this.value?this.value=!1:0==this.value&&(this.value=null),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value})}onFocus(){this.focused=!0}onBlur(){this.focused=!1,this.onModelTouched()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}writeValue(e){this.value=e,this.cd.markForCheck()}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}}return i.\u0275fac=function(e){return new(e||i)(Zt(Zo))},i.\u0275cmp=Ir({type:i,selectors:[["p-triStateCheckbox"]],hostAttrs:[1,"p-element"],inputs:{disabled:"disabled",name:"name",ariaLabelledBy:"ariaLabelledBy",tabindex:"tabindex",inputId:"inputId",style:"style",styleClass:"styleClass",label:"label",readonly:"readonly",checkboxTrueIcon:"checkboxTrueIcon",checkboxFalseIcon:"checkboxFalseIcon"},outputs:{onChange:"onChange"},features:[To([jte])],decls:7,vars:21,consts:[[3,"ngStyle","ngClass"],[1,"p-hidden-accessible"],["type","text","inputmode","none",3,"name","readonly","disabled","keyup","keydown","focus","blur"],["input",""],["role","checkbox",1,"p-checkbox-box",3,"ngClass","click"],[1,"p-checkbox-icon",3,"ngClass"],["class","p-checkbox-label",3,"ngClass","click",4,"ngIf"],[1,"p-checkbox-label",3,"ngClass","click"]],template:function(e,n){if(1&e){const r=Pi();lt(0,"div",0)(1,"div",1)(2,"input",2,3),fn("keyup",function(o){return n.onKeyup(o)})("keydown",function(o){return n.onKeydown(o)})("focus",function(){return n.onFocus()})("blur",function(){return n.onBlur()}),ct()(),lt(4,"div",4),fn("click",function(o){wt(r);const l=co(3);return At(n.onClick(o,l))}),ii(5,"span",5),ct()(),Ze(6,Hte,2,7,"label",6)}2&e&&(Ur(n.styleClass),ve("ngStyle",n.style)("ngClass",ys(14,Gte,n.disabled,n.focused)),Me(2),ve("name",n.name)("readonly",n.readonly)("disabled",n.disabled),mr("id",n.inputId)("tabindex",n.tabindex)("aria-labelledby",n.ariaLabelledBy),Me(2),ve("ngClass",wu(17,Wte,null!=n.value,n.disabled,n.focused)),mr("aria-checked",!0===n.value),Me(1),ve("ngClass",!0===n.value?n.checkboxTrueIcon:!1===n.value?n.checkboxFalseIcon:""),Me(1),ve("ngIf",n.label))},dependencies:[bo,Wo,Qo],encapsulation:2,changeDetection:0}),i})(),qte=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({imports:[Ns]}),i})();const Xte=["container"],Yte=["inputfield"],Kte=["contentWrapper"];function Zte(i,t){if(1&i){const e=Pi();lt(0,"i",8),fn("click",function(){return wt(e),At(_e(2).clear())}),ct()}}function Qte(i,t){if(1&i){const e=Pi();lt(0,"button",9),fn("click",function(r){wt(e),_e();const s=co(1);return At(_e().onButtonClick(r,s))}),ct()}if(2&i){const e=_e(2);ve("icon",e.icon)("disabled",e.disabled),mr("aria-label",e.iconAriaLabel)}}function Jte(i,t){if(1&i){const e=Pi();lt(0,"input",4,5),fn("focus",function(r){return wt(e),At(_e().onInputFocus(r))})("keydown",function(r){return wt(e),At(_e().onInputKeydown(r))})("click",function(){return wt(e),At(_e().onInputClick())})("blur",function(r){return wt(e),At(_e().onInputBlur(r))})("input",function(r){return wt(e),At(_e().onUserInput(r))}),ct(),Ze(2,Zte,1,0,"i",6),Ze(3,Qte,1,3,"button",7)}if(2&i){const e=_e();Ur(e.inputStyleClass),ve("value",e.inputFieldValue)("readonly",e.readonlyInput)("ngStyle",e.inputStyle)("placeholder",e.placeholder||"")("disabled",e.disabled)("ngClass","p-inputtext p-component"),mr("id",e.inputId)("name",e.name)("required",e.required)("aria-required",e.required)("tabindex",e.tabindex)("inputmode",e.touchUI?"off":null)("aria-labelledby",e.ariaLabelledBy),Me(2),ve("ngIf",e.showClear&&!e.disabled&&null!=e.value),Me(1),ve("ngIf",e.showIcon)}}function ene(i,t){1&i&&Ki(0)}function tne(i,t){if(1&i){const e=Pi();lt(0,"button",30),fn("keydown",function(r){return wt(e),At(_e(4).onContainerButtonKeydown(r))})("click",function(r){return wt(e),At(_e(4).onPrevButtonClick(r))}),ii(1,"span",31),ct()}}function nne(i,t){if(1&i){const e=Pi();lt(0,"button",32),fn("click",function(r){return wt(e),At(_e(4).switchToMonthView(r))})("keydown",function(r){return wt(e),At(_e(4).onContainerButtonKeydown(r))}),qi(1),ct()}if(2&i){const e=_e().$implicit,n=_e(3);ve("disabled",n.switchViewButtonDisabled()),Me(1),yd(" ",n.getMonthName(e.month)," ")}}function ine(i,t){if(1&i){const e=Pi();lt(0,"button",33),fn("click",function(r){return wt(e),At(_e(4).switchToYearView(r))})("keydown",function(r){return wt(e),At(_e(4).onContainerButtonKeydown(r))}),qi(1),ct()}if(2&i){const e=_e().$implicit,n=_e(3);ve("disabled",n.switchViewButtonDisabled()),Me(1),yd(" ",n.getYear(e)," ")}}function rne(i,t){if(1&i&&(qr(0),qi(1),Xr()),2&i){const e=_e(5);Me(1),vI("",e.yearPickerValues()[0]," - ",e.yearPickerValues()[e.yearPickerValues().length-1],"")}}function sne(i,t){1&i&&Ki(0)}const XV=function(i){return{$implicit:i}};function one(i,t){if(1&i&&(lt(0,"span",34),Ze(1,rne,2,2,"ng-container",13),Ze(2,sne,1,0,"ng-container",35),ct()),2&i){const e=_e(4);Me(1),ve("ngIf",!e.decadeTemplate),Me(1),ve("ngTemplateOutlet",e.decadeTemplate)("ngTemplateOutletContext",Bi(3,XV,e.yearPickerValues))}}function ane(i,t){if(1&i&&(lt(0,"th",41)(1,"span"),qi(2),ct()()),2&i){const e=_e(5);Me(2),as(e.getTranslation("weekHeader"))}}function lne(i,t){if(1&i&&(lt(0,"th",42)(1,"span"),qi(2),ct()()),2&i){const e=t.$implicit;Me(2),as(e)}}function cne(i,t){if(1&i&&(lt(0,"td",45)(1,"span",46),qi(2),ct()()),2&i){const e=_e().index,n=_e(2).$implicit;Me(2),yd(" ",n.weekNumbers[e]," ")}}function une(i,t){if(1&i&&(qr(0),qi(1),Xr()),2&i){const e=_e(2).$implicit;Me(1),as(e.day)}}function dne(i,t){1&i&&Ki(0)}const hne=function(i,t){return{"p-highlight":i,"p-disabled":t}};function fne(i,t){if(1&i){const e=Pi();qr(0),lt(1,"span",48),fn("click",function(r){wt(e);const s=_e().$implicit;return At(_e(6).onDateSelect(r,s))})("keydown",function(r){wt(e);const s=_e().$implicit,o=_e(3).index;return At(_e(3).onDateCellKeydown(r,s,o))}),Ze(2,une,2,1,"ng-container",13),Ze(3,dne,1,0,"ng-container",35),ct(),Xr()}if(2&i){const e=_e().$implicit,n=_e(6);Me(1),ve("ngClass",ys(4,hne,n.isSelected(e),!e.selectable)),Me(1),ve("ngIf",!n.dateTemplate),Me(1),ve("ngTemplateOutlet",n.dateTemplate)("ngTemplateOutletContext",Bi(7,XV,e))}}const pne=function(i,t){return{"p-datepicker-other-month":i,"p-datepicker-today":t}};function gne(i,t){if(1&i&&(lt(0,"td",47),Ze(1,fne,4,9,"ng-container",13),ct()),2&i){const e=t.$implicit,n=_e(6);ve("ngClass",ys(2,pne,e.otherMonth,e.today)),Me(1),ve("ngIf",!e.otherMonth||n.showOtherMonths)}}function mne(i,t){if(1&i&&(lt(0,"tr"),Ze(1,cne,3,1,"td",43),Ze(2,gne,2,5,"td",44),ct()),2&i){const e=t.$implicit,n=_e(5);Me(1),ve("ngIf",n.showWeek),Me(1),ve("ngForOf",e)}}function vne(i,t){if(1&i&&(lt(0,"div",36)(1,"table",37)(2,"thead")(3,"tr"),Ze(4,ane,3,1,"th",38),Ze(5,lne,3,1,"th",39),ct()(),lt(6,"tbody"),Ze(7,mne,3,2,"tr",40),ct()()()),2&i){const e=_e().$implicit,n=_e(3);Me(4),ve("ngIf",n.showWeek),Me(1),ve("ngForOf",n.weekDays),Me(2),ve("ngForOf",e.dates)}}function yne(i,t){if(1&i){const e=Pi();lt(0,"div",20)(1,"div",21),Ze(2,tne,2,0,"button",22),lt(3,"div",23),Ze(4,nne,2,2,"button",24),Ze(5,ine,2,2,"button",25),Ze(6,one,3,5,"span",26),ct(),lt(7,"button",27),fn("keydown",function(r){return wt(e),At(_e(3).onContainerButtonKeydown(r))})("click",function(r){return wt(e),At(_e(3).onNextButtonClick(r))}),ii(8,"span",28),ct()(),Ze(9,vne,8,3,"div",29),ct()}if(2&i){const e=t.index,n=_e(3);Me(2),ve("ngIf",0===e),Me(2),ve("ngIf","date"===n.currentView),Me(1),ve("ngIf","year"!==n.currentView),Me(1),ve("ngIf","year"===n.currentView),Me(1),tf("display",1===n.numberOfMonths||e===n.numberOfMonths-1?"inline-flex":"none"),Me(2),ve("ngIf","date"===n.currentView)}}const YV=function(i){return{"p-highlight":i}};function _ne(i,t){if(1&i){const e=Pi();lt(0,"span",51),fn("click",function(r){const o=wt(e).index;return At(_e(4).onMonthSelect(r,o))})("keydown",function(r){const o=wt(e).index;return At(_e(4).onMonthCellKeydown(r,o))}),qi(1),ct()}if(2&i){const e=t.$implicit,n=t.index,r=_e(4);ve("ngClass",Bi(2,YV,r.isMonthSelected(n))),Me(1),yd(" ",e," ")}}function bne(i,t){if(1&i&&(lt(0,"div",49),Ze(1,_ne,2,4,"span",50),ct()),2&i){const e=_e(3);Me(1),ve("ngForOf",e.monthPickerValues())}}function Cne(i,t){if(1&i){const e=Pi();lt(0,"span",54),fn("click",function(r){const o=wt(e).$implicit;return At(_e(4).onYearSelect(r,o))})("keydown",function(r){const o=wt(e).$implicit;return At(_e(4).onYearCellKeydown(r,o))}),qi(1),ct()}if(2&i){const e=t.$implicit,n=_e(4);ve("ngClass",Bi(2,YV,n.isYearSelected(e))),Me(1),yd(" ",e," ")}}function xne(i,t){if(1&i&&(lt(0,"div",52),Ze(1,Cne,2,4,"span",53),ct()),2&i){const e=_e(3);Me(1),ve("ngForOf",e.yearPickerValues())}}function wne(i,t){if(1&i&&(qr(0),lt(1,"div",16),Ze(2,yne,10,7,"div",17),ct(),Ze(3,bne,2,1,"div",18),Ze(4,xne,2,1,"div",19),Xr()),2&i){const e=_e(2);Me(2),ve("ngForOf",e.months),Me(1),ve("ngIf","month"===e.currentView),Me(1),ve("ngIf","year"===e.currentView)}}function Ane(i,t){1&i&&(qr(0),qi(1,"0"),Xr())}function Ine(i,t){1&i&&(qr(0),qi(1,"0"),Xr())}function Sne(i,t){if(1&i&&(lt(0,"div",60)(1,"span"),qi(2),ct()()),2&i){const e=_e(3);Me(2),as(e.timeSeparator)}}function Ene(i,t){1&i&&(qr(0),qi(1,"0"),Xr())}function Tne(i,t){if(1&i){const e=Pi();lt(0,"div",65)(1,"button",57),fn("keydown",function(r){return wt(e),At(_e(3).onContainerButtonKeydown(r))})("keydown.enter",function(r){return wt(e),At(_e(3).incrementSecond(r))})("keydown.space",function(r){return wt(e),At(_e(3).incrementSecond(r))})("mousedown",function(r){return wt(e),At(_e(3).onTimePickerElementMouseDown(r,2,1))})("mouseup",function(r){return wt(e),At(_e(3).onTimePickerElementMouseUp(r))})("keyup.enter",function(r){return wt(e),At(_e(3).onTimePickerElementMouseUp(r))})("keyup.space",function(r){return wt(e),At(_e(3).onTimePickerElementMouseUp(r))})("mouseleave",function(){return wt(e),At(_e(3).onTimePickerElementMouseLeave())}),ii(2,"span",58),ct(),lt(3,"span"),Ze(4,Ene,2,0,"ng-container",13),qi(5),ct(),lt(6,"button",57),fn("keydown",function(r){return wt(e),At(_e(3).onContainerButtonKeydown(r))})("keydown.enter",function(r){return wt(e),At(_e(3).decrementSecond(r))})("keydown.space",function(r){return wt(e),At(_e(3).decrementSecond(r))})("mousedown",function(r){return wt(e),At(_e(3).onTimePickerElementMouseDown(r,2,-1))})("mouseup",function(r){return wt(e),At(_e(3).onTimePickerElementMouseUp(r))})("keyup.enter",function(r){return wt(e),At(_e(3).onTimePickerElementMouseUp(r))})("keyup.space",function(r){return wt(e),At(_e(3).onTimePickerElementMouseUp(r))})("mouseleave",function(){return wt(e),At(_e(3).onTimePickerElementMouseLeave())}),ii(7,"span",59),ct()()}if(2&i){const e=_e(3);Me(4),ve("ngIf",e.currentSecond<10),Me(1),as(e.currentSecond)}}function Mne(i,t){if(1&i){const e=Pi();lt(0,"div",66)(1,"button",67),fn("keydown",function(r){return wt(e),At(_e(3).onContainerButtonKeydown(r))})("click",function(r){return wt(e),At(_e(3).toggleAMPM(r))})("keydown.enter",function(r){return wt(e),At(_e(3).toggleAMPM(r))}),ii(2,"span",58),ct(),lt(3,"span"),qi(4),ct(),lt(5,"button",67),fn("keydown",function(r){return wt(e),At(_e(3).onContainerButtonKeydown(r))})("click",function(r){return wt(e),At(_e(3).toggleAMPM(r))})("keydown.enter",function(r){return wt(e),At(_e(3).toggleAMPM(r))}),ii(6,"span",59),ct()()}if(2&i){const e=_e(3);Me(4),as(e.pm?"PM":"AM")}}function Dne(i,t){if(1&i){const e=Pi();lt(0,"div",55)(1,"div",56)(2,"button",57),fn("keydown",function(r){return wt(e),At(_e(2).onContainerButtonKeydown(r))})("keydown.enter",function(r){return wt(e),At(_e(2).incrementHour(r))})("keydown.space",function(r){return wt(e),At(_e(2).incrementHour(r))})("mousedown",function(r){return wt(e),At(_e(2).onTimePickerElementMouseDown(r,0,1))})("mouseup",function(r){return wt(e),At(_e(2).onTimePickerElementMouseUp(r))})("keyup.enter",function(r){return wt(e),At(_e(2).onTimePickerElementMouseUp(r))})("keyup.space",function(r){return wt(e),At(_e(2).onTimePickerElementMouseUp(r))})("mouseleave",function(){return wt(e),At(_e(2).onTimePickerElementMouseLeave())}),ii(3,"span",58),ct(),lt(4,"span"),Ze(5,Ane,2,0,"ng-container",13),qi(6),ct(),lt(7,"button",57),fn("keydown",function(r){return wt(e),At(_e(2).onContainerButtonKeydown(r))})("keydown.enter",function(r){return wt(e),At(_e(2).decrementHour(r))})("keydown.space",function(r){return wt(e),At(_e(2).decrementHour(r))})("mousedown",function(r){return wt(e),At(_e(2).onTimePickerElementMouseDown(r,0,-1))})("mouseup",function(r){return wt(e),At(_e(2).onTimePickerElementMouseUp(r))})("keyup.enter",function(r){return wt(e),At(_e(2).onTimePickerElementMouseUp(r))})("keyup.space",function(r){return wt(e),At(_e(2).onTimePickerElementMouseUp(r))})("mouseleave",function(){return wt(e),At(_e(2).onTimePickerElementMouseLeave())}),ii(8,"span",59),ct()(),lt(9,"div",60)(10,"span"),qi(11),ct()(),lt(12,"div",61)(13,"button",57),fn("keydown",function(r){return wt(e),At(_e(2).onContainerButtonKeydown(r))})("keydown.enter",function(r){return wt(e),At(_e(2).incrementMinute(r))})("keydown.space",function(r){return wt(e),At(_e(2).incrementMinute(r))})("mousedown",function(r){return wt(e),At(_e(2).onTimePickerElementMouseDown(r,1,1))})("mouseup",function(r){return wt(e),At(_e(2).onTimePickerElementMouseUp(r))})("keyup.enter",function(r){return wt(e),At(_e(2).onTimePickerElementMouseUp(r))})("keyup.space",function(r){return wt(e),At(_e(2).onTimePickerElementMouseUp(r))})("mouseleave",function(){return wt(e),At(_e(2).onTimePickerElementMouseLeave())}),ii(14,"span",58),ct(),lt(15,"span"),Ze(16,Ine,2,0,"ng-container",13),qi(17),ct(),lt(18,"button",57),fn("keydown",function(r){return wt(e),At(_e(2).onContainerButtonKeydown(r))})("keydown.enter",function(r){return wt(e),At(_e(2).decrementMinute(r))})("keydown.space",function(r){return wt(e),At(_e(2).decrementMinute(r))})("mousedown",function(r){return wt(e),At(_e(2).onTimePickerElementMouseDown(r,1,-1))})("mouseup",function(r){return wt(e),At(_e(2).onTimePickerElementMouseUp(r))})("keyup.enter",function(r){return wt(e),At(_e(2).onTimePickerElementMouseUp(r))})("keyup.space",function(r){return wt(e),At(_e(2).onTimePickerElementMouseUp(r))})("mouseleave",function(){return wt(e),At(_e(2).onTimePickerElementMouseLeave())}),ii(19,"span",59),ct()(),Ze(20,Sne,3,1,"div",62),Ze(21,Tne,8,2,"div",63),Ze(22,Mne,7,1,"div",64),ct()}if(2&i){const e=_e(2);Me(5),ve("ngIf",e.currentHour<10),Me(1),as(e.currentHour),Me(5),as(e.timeSeparator),Me(5),ve("ngIf",e.currentMinute<10),Me(1),as(e.currentMinute),Me(3),ve("ngIf",e.showSeconds),Me(1),ve("ngIf",e.showSeconds),Me(1),ve("ngIf","12"==e.hourFormat)}}const KV=function(i){return[i]};function Lne(i,t){if(1&i){const e=Pi();lt(0,"div",68)(1,"button",69),fn("keydown",function(r){return wt(e),At(_e(2).onContainerButtonKeydown(r))})("click",function(r){return wt(e),At(_e(2).onTodayButtonClick(r))}),ct(),lt(2,"button",69),fn("keydown",function(r){return wt(e),At(_e(2).onContainerButtonKeydown(r))})("click",function(r){return wt(e),At(_e(2).onClearButtonClick(r))}),ct()()}if(2&i){const e=_e(2);Me(1),ve("label",e.getTranslation("today"))("ngClass",Bi(4,KV,e.todayButtonStyleClass)),Me(1),ve("label",e.getTranslation("clear"))("ngClass",Bi(6,KV,e.clearButtonStyleClass))}}function Pne(i,t){1&i&&Ki(0)}const Rne=function(i,t,e,n,r,s){return{"p-datepicker p-component":!0,"p-datepicker-inline":i,"p-disabled":t,"p-datepicker-timeonly":e,"p-datepicker-multiple-month":n,"p-datepicker-monthpicker":r,"p-datepicker-touch-ui":s}},ZV=function(i,t){return{showTransitionParams:i,hideTransitionParams:t}},kne=function(i){return{value:"visibleTouchUI",params:i}},One=function(i){return{value:"visible",params:i}};function Fne(i,t){if(1&i){const e=Pi();lt(0,"div",10,11),fn("@overlayAnimation.start",function(r){return wt(e),At(_e().onOverlayAnimationStart(r))})("@overlayAnimation.done",function(r){return wt(e),At(_e().onOverlayAnimationDone(r))})("click",function(r){return wt(e),At(_e().onOverlayClick(r))}),$u(2),Ze(3,ene,1,0,"ng-container",12),Ze(4,wne,5,3,"ng-container",13),Ze(5,Dne,23,8,"div",14),Ze(6,Lne,3,8,"div",15),$u(7,1),Ze(8,Pne,1,0,"ng-container",12),ct()}if(2&i){const e=_e();Ur(e.panelStyleClass),ve("ngStyle",e.panelStyle)("ngClass",Hb(11,Rne,e.inline,e.disabled,e.timeOnly,e.numberOfMonths>1,"month"===e.view,e.touchUI))("@overlayAnimation",e.touchUI?Bi(21,kne,ys(18,ZV,e.showTransitionOptions,e.hideTransitionOptions)):Bi(26,One,ys(23,ZV,e.showTransitionOptions,e.hideTransitionOptions)))("@.disabled",!0===e.inline),Me(3),ve("ngTemplateOutlet",e.headerTemplate),Me(1),ve("ngIf",!e.timeOnly),Me(1),ve("ngIf",(e.showTime||e.timeOnly)&&"date"===e.currentView),Me(1),ve("ngIf",e.showButtonBar),Me(2),ve("ngTemplateOutlet",e.footerTemplate)}}const Nne=[[["p-header"]],[["p-footer"]]],Bne=function(i,t,e,n){return{"p-calendar":!0,"p-calendar-w-btn":i,"p-calendar-timeonly":t,"p-calendar-disabled":e,"p-focus":n}},zne=["p-header","p-footer"],Vne={provide:bc,useExisting:ds(()=>Une),multi:!0};let Une=(()=>{class i{constructor(e,n,r,s,o,l){this.el=e,this.renderer=n,this.cd=r,this.zone=s,this.config=o,this.overlayService=l,this.multipleSeparator=",",this.rangeSeparator="-",this.inline=!1,this.showOtherMonths=!0,this.icon="pi pi-calendar",this.shortYearCutoff="+10",this.hourFormat="24",this.stepHour=1,this.stepMinute=1,this.stepSecond=1,this.showSeconds=!1,this.showOnFocus=!0,this.showWeek=!1,this.showClear=!1,this.dataType="date",this.selectionMode="single",this.todayButtonStyleClass="p-button-text",this.clearButtonStyleClass="p-button-text",this.autoZIndex=!0,this.baseZIndex=0,this.keepInvalid=!1,this.hideOnDateTimeSelect=!0,this.timeSeparator=":",this.focusTrap=!0,this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.onFocus=new qn,this.onBlur=new qn,this.onClose=new qn,this.onSelect=new qn,this.onClear=new qn,this.onInput=new qn,this.onTodayClick=new qn,this.onClearClick=new qn,this.onMonthChange=new qn,this.onYearChange=new qn,this.onClickOutside=new qn,this.onShow=new qn,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.inputFieldValue=null,this.navigationState=null,this._numberOfMonths=1,this._view="date",this.convertTo24Hour=function(u,p){return"12"==this.hourFormat?12===u?p?12:0:p?u+12:u:u}}set content(e){this.contentViewChild=e,this.contentViewChild&&(this.isMonthNavigate?(Promise.resolve(null).then(()=>this.updateFocus()),this.isMonthNavigate=!1):this.focus||this.initFocusableCell())}get view(){return this._view}set view(e){this._view=e,this.currentView=this._view}get defaultDate(){return this._defaultDate}set defaultDate(e){if(this._defaultDate=e,this.initialized){const n=e||new Date;this.currentMonth=n.getMonth(),this.currentYear=n.getFullYear(),this.initTime(n),this.createMonths(this.currentMonth,this.currentYear)}}get minDate(){return this._minDate}set minDate(e){this._minDate=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get disabledDates(){return this._disabledDates}set disabledDates(e){this._disabledDates=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get disabledDays(){return this._disabledDays}set disabledDays(e){this._disabledDays=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get yearRange(){return this._yearRange}set yearRange(e){if(this._yearRange=e,e){const n=e.split(":"),r=parseInt(n[0]),s=parseInt(n[1]);this.populateYearOptions(r,s)}}get showTime(){return this._showTime}set showTime(e){this._showTime=e,void 0===this.currentHour&&this.initTime(this.value||new Date),this.updateInputfield()}get locale(){return this._locale}get responsiveOptions(){return this._responsiveOptions}set responsiveOptions(e){this._responsiveOptions=e,this.destroyResponsiveStyleElement(),this.createResponsiveStyle()}get numberOfMonths(){return this._numberOfMonths}set numberOfMonths(e){this._numberOfMonths=e,this.destroyResponsiveStyleElement(),this.createResponsiveStyle()}get firstDayOfWeek(){return this._firstDayOfWeek}set firstDayOfWeek(e){this._firstDayOfWeek=e,this.createWeekDays()}set locale(e){console.warn("Locale property has no effect, use new i18n API instead.")}ngOnInit(){this.attributeSelector=nw();const e=this.defaultDate||new Date;this.createResponsiveStyle(),this.currentMonth=e.getMonth(),this.currentYear=e.getFullYear(),this.currentView=this.view,"date"===this.view&&(this.createWeekDays(),this.initTime(e),this.createMonths(this.currentMonth,this.currentYear),this.ticksTo1970=24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7),this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.createWeekDays()}),this.initialized=!0}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"date":default:this.dateTemplate=e.template;break;case"decade":this.decadeTemplate=e.template;break;case"disabledDate":this.disabledDateTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"footer":this.footerTemplate=e.template}})}ngAfterViewInit(){this.inline&&(this.contentViewChild&&this.contentViewChild.nativeElement.setAttribute(this.attributeSelector,""),this.disabled||(this.initFocusableCell(),1===this.numberOfMonths&&(this.contentViewChild.nativeElement.style.width=Kt.getOuterWidth(this.containerViewChild.nativeElement)+"px")))}getTranslation(e){return this.config.getTranslation(e)}populateYearOptions(e,n){this.yearOptions=[];for(let r=e;r<=n;r++)this.yearOptions.push(r)}createWeekDays(){this.weekDays=[];let e=this.getFirstDateOfWeek(),n=this.getTranslation(Wc.DAY_NAMES_MIN);for(let r=0;r<7;r++)this.weekDays.push(n[e]),e=6==e?0:++e}monthPickerValues(){let e=[];for(let n=0;n<=11;n++)e.push(this.config.getTranslation("monthNamesShort")[n]);return e}yearPickerValues(){let e=[],n=this.currentYear-this.currentYear%10;for(let r=0;r<10;r++)e.push(n+r);return e}createMonths(e,n){this.months=this.months=[];for(let r=0;r<this.numberOfMonths;r++){let s=e+r,o=n;s>11&&(s=s%11-1,o=n+1),this.months.push(this.createMonth(s,o))}}getWeekNumber(e){let n=new Date(e.getTime());n.setDate(n.getDate()+4-(n.getDay()||7));let r=n.getTime();return n.setMonth(0),n.setDate(1),Math.floor(Math.round((r-n.getTime())/864e5)/7)+1}createMonth(e,n){let r=[],s=this.getFirstDayOfMonthIndex(e,n),o=this.getDaysCountInMonth(e,n),l=this.getDaysCountInPrevMonth(e,n),u=1,p=new Date,v=[],x=Math.ceil((o+s)/7);for(let I=0;I<x;I++){let T=[];if(0==I){for(let j=l-s+1;j<=l;j++){let X=this.getPreviousMonthAndYear(e,n);T.push({day:j,month:X.month,year:X.year,otherMonth:!0,today:this.isToday(p,j,X.month,X.year),selectable:this.isSelectable(j,X.month,X.year,!0)})}let F=7-T.length;for(let j=0;j<F;j++)T.push({day:u,month:e,year:n,today:this.isToday(p,u,e,n),selectable:this.isSelectable(u,e,n,!1)}),u++}else for(let F=0;F<7;F++){if(u>o){let j=this.getNextMonthAndYear(e,n);T.push({day:u-o,month:j.month,year:j.year,otherMonth:!0,today:this.isToday(p,u-o,j.month,j.year),selectable:this.isSelectable(u-o,j.month,j.year,!0)})}else T.push({day:u,month:e,year:n,today:this.isToday(p,u,e,n),selectable:this.isSelectable(u,e,n,!1)});u++}this.showWeek&&v.push(this.getWeekNumber(new Date(T[0].year,T[0].month,T[0].day))),r.push(T)}return{month:e,year:n,dates:r,weekNumbers:v}}initTime(e){this.pm=e.getHours()>11,this.showTime?(this.currentMinute=e.getMinutes(),this.currentSecond=e.getSeconds(),this.setCurrentHourPM(e.getHours())):this.timeOnly&&(this.currentMinute=0,this.currentHour=0,this.currentSecond=0)}navBackward(e){this.disabled?e.preventDefault():(this.isMonthNavigate=!0,"month"===this.currentView?(this.decrementYear(),setTimeout(()=>{this.updateFocus()},1)):"year"===this.currentView?(this.decrementDecade(),setTimeout(()=>{this.updateFocus()},1)):(0===this.currentMonth?(this.currentMonth=11,this.decrementYear()):this.currentMonth--,this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)))}navForward(e){this.disabled?e.preventDefault():(this.isMonthNavigate=!0,"month"===this.currentView?(this.incrementYear(),setTimeout(()=>{this.updateFocus()},1)):"year"===this.currentView?(this.incrementDecade(),setTimeout(()=>{this.updateFocus()},1)):(11===this.currentMonth?(this.currentMonth=0,this.incrementYear()):this.currentMonth++,this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)))}decrementYear(){if(this.currentYear--,this.yearNavigator&&this.currentYear<this.yearOptions[0]){let e=this.yearOptions[this.yearOptions.length-1]-this.yearOptions[0];this.populateYearOptions(this.yearOptions[0]-e,this.yearOptions[this.yearOptions.length-1]-e)}}decrementDecade(){this.currentYear=this.currentYear-10}incrementDecade(){this.currentYear=this.currentYear+10}incrementYear(){if(this.currentYear++,this.yearNavigator&&this.currentYear>this.yearOptions[this.yearOptions.length-1]){let e=this.yearOptions[this.yearOptions.length-1]-this.yearOptions[0];this.populateYearOptions(this.yearOptions[0]+e,this.yearOptions[this.yearOptions.length-1]+e)}}switchToMonthView(e){this.setCurrentView("month"),e.preventDefault()}switchToYearView(e){this.setCurrentView("year"),e.preventDefault()}onDateSelect(e,n){!this.disabled&&n.selectable?(this.isMultipleSelection()&&this.isSelected(n)?(this.value=this.value.filter((r,s)=>!this.isDateEquals(r,n)),0===this.value.length&&(this.value=null),this.updateModel(this.value)):this.shouldSelectDate(n)&&this.selectDate(n),this.isSingleSelection()&&this.hideOnDateTimeSelect&&setTimeout(()=>{e.preventDefault(),this.hideOverlay(),this.mask&&this.disableModality(),this.cd.markForCheck()},150),this.updateInputfield(),e.preventDefault()):e.preventDefault()}shouldSelectDate(e){return!this.isMultipleSelection()||null==this.maxDateCount||this.maxDateCount>(this.value?this.value.length:0)}onMonthSelect(e,n){"month"===this.view?this.onDateSelect(e,{year:this.currentYear,month:n,day:1,selectable:!0}):(this.currentMonth=n,this.createMonths(this.currentMonth,this.currentYear),this.setCurrentView("date"),this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}))}onYearSelect(e,n){"year"===this.view?this.onDateSelect(e,{year:n,month:0,day:1,selectable:!0}):(this.currentYear=n,this.setCurrentView("month"),this.onYearChange.emit({month:this.currentMonth+1,year:this.currentYear}))}updateInputfield(){let e="";if(this.value)if(this.isSingleSelection())e=this.formatDateTime(this.value);else if(this.isMultipleSelection())for(let n=0;n<this.value.length;n++)e+=this.formatDateTime(this.value[n]),n!==this.value.length-1&&(e+=this.multipleSeparator+" ");else if(this.isRangeSelection()&&this.value&&this.value.length){let r=this.value[1];e=this.formatDateTime(this.value[0]),r&&(e+=" "+this.rangeSeparator+" "+this.formatDateTime(r))}this.inputFieldValue=e,this.updateFilledState(),this.inputfieldViewChild&&this.inputfieldViewChild.nativeElement&&(this.inputfieldViewChild.nativeElement.value=this.inputFieldValue)}formatDateTime(e){let n=this.keepInvalid?e:null;return this.isValidDate(e)&&(this.timeOnly?n=this.formatTime(e):(n=this.formatDate(e,this.getDateFormat()),this.showTime&&(n+=" "+this.formatTime(e)))),n}setCurrentHourPM(e){"12"==this.hourFormat?(this.pm=e>11,this.currentHour=e>=12?12==e?12:e-12:0==e?12:e):this.currentHour=e}setCurrentView(e){this.currentView=e,this.cd.detectChanges(),this.alignOverlay()}selectDate(e){let n=new Date(e.year,e.month,e.day);if(this.showTime&&(n.setHours("12"==this.hourFormat?12===this.currentHour?this.pm?12:0:this.pm?this.currentHour+12:this.currentHour:this.currentHour),n.setMinutes(this.currentMinute),n.setSeconds(this.currentSecond)),this.minDate&&this.minDate>n&&(n=this.minDate,this.setCurrentHourPM(n.getHours()),this.currentMinute=n.getMinutes(),this.currentSecond=n.getSeconds()),this.maxDate&&this.maxDate<n&&(n=this.maxDate,this.setCurrentHourPM(n.getHours()),this.currentMinute=n.getMinutes(),this.currentSecond=n.getSeconds()),this.isSingleSelection())this.updateModel(n);else if(this.isMultipleSelection())this.updateModel(this.value?[...this.value,n]:[n]);else if(this.isRangeSelection())if(this.value&&this.value.length){let r=this.value[0],s=this.value[1];!s&&n.getTime()>=r.getTime()?s=n:(r=n,s=null),this.updateModel([r,s])}else this.updateModel([n,null]);this.onSelect.emit(n)}updateModel(e){if(this.value=e,"date"==this.dataType)this.onModelChange(this.value);else if("string"==this.dataType)if(this.isSingleSelection())this.onModelChange(this.formatDateTime(this.value));else{let n=null;this.value&&(n=this.value.map(r=>this.formatDateTime(r))),this.onModelChange(n)}}getFirstDayOfMonthIndex(e,n){let r=new Date;r.setDate(1),r.setMonth(e),r.setFullYear(n);let s=r.getDay()+this.getSundayIndex();return s>=7?s-7:s}getDaysCountInMonth(e,n){return 32-this.daylightSavingAdjust(new Date(n,e,32)).getDate()}getDaysCountInPrevMonth(e,n){let r=this.getPreviousMonthAndYear(e,n);return this.getDaysCountInMonth(r.month,r.year)}getPreviousMonthAndYear(e,n){let r,s;return 0===e?(r=11,s=n-1):(r=e-1,s=n),{month:r,year:s}}getNextMonthAndYear(e,n){let r,s;return 11===e?(r=0,s=n+1):(r=e+1,s=n),{month:r,year:s}}getSundayIndex(){let e=this.getFirstDateOfWeek();return e>0?7-e:0}isSelected(e){if(!this.value)return!1;if(this.isSingleSelection())return this.isDateEquals(this.value,e);if(this.isMultipleSelection()){let n=!1;for(let r of this.value)if(n=this.isDateEquals(r,e),n)break;return n}return this.isRangeSelection()?this.value[1]?this.isDateEquals(this.value[0],e)||this.isDateEquals(this.value[1],e)||this.isDateBetween(this.value[0],this.value[1],e):this.isDateEquals(this.value[0],e):void 0}isComparable(){return null!=this.value&&"string"!=typeof this.value}isMonthSelected(e){if(this.isComparable()){let n=this.isRangeSelection()?this.value[0]:this.value;return!this.isMultipleSelection()&&n.getMonth()===e&&n.getFullYear()===this.currentYear}return!1}isYearSelected(e){if(this.isComparable()){let n=this.isRangeSelection()?this.value[0]:this.value;return!this.isMultipleSelection()&&n.getFullYear()===e}return!1}isDateEquals(e,n){return!!(e&&e instanceof Date)&&e.getDate()===n.day&&e.getMonth()===n.month&&e.getFullYear()===n.year}isDateBetween(e,n,r){if(e&&n){let o=new Date(r.year,r.month,r.day);return e.getTime()<=o.getTime()&&n.getTime()>=o.getTime()}return!1}isSingleSelection(){return"single"===this.selectionMode}isRangeSelection(){return"range"===this.selectionMode}isMultipleSelection(){return"multiple"===this.selectionMode}isToday(e,n,r,s){return e.getDate()===n&&e.getMonth()===r&&e.getFullYear()===s}isSelectable(e,n,r,s){let o=!0,l=!0,u=!0,p=!0;return!(s&&!this.selectOtherMonths)&&(this.minDate&&(this.minDate.getFullYear()>r||this.minDate.getFullYear()===r&&(this.minDate.getMonth()>n||this.minDate.getMonth()===n&&this.minDate.getDate()>e))&&(o=!1),this.maxDate&&(this.maxDate.getFullYear()<r||this.maxDate.getFullYear()===r&&(this.maxDate.getMonth()<n||this.maxDate.getMonth()===n&&this.maxDate.getDate()<e))&&(l=!1),this.disabledDates&&(u=!this.isDateDisabled(e,n,r)),this.disabledDays&&(p=!this.isDayDisabled(e,n,r)),o&&l&&u&&p)}isDateDisabled(e,n,r){if(this.disabledDates)for(let s of this.disabledDates)if(s.getFullYear()===r&&s.getMonth()===n&&s.getDate()===e)return!0;return!1}isDayDisabled(e,n,r){if(this.disabledDays){let o=new Date(r,n,e).getDay();return-1!==this.disabledDays.indexOf(o)}return!1}onInputFocus(e){this.focus=!0,this.showOnFocus&&this.showOverlay(),this.onFocus.emit(e)}onInputClick(){this.showOnFocus&&!this.overlayVisible&&this.showOverlay()}onInputBlur(e){this.focus=!1,this.onBlur.emit(e),this.keepInvalid||this.updateInputfield(),this.onModelTouched()}onButtonClick(e,n){this.overlayVisible?this.hideOverlay():(n.focus(),this.showOverlay())}clear(){this.inputFieldValue=null,this.value=null,this.onModelChange(this.value),this.onClear.emit()}onOverlayClick(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement})}getMonthName(e){return this.config.getTranslation("monthNames")[e]}getYear(e){return"month"===this.currentView?this.currentYear:e.year}switchViewButtonDisabled(){return this.numberOfMonths>1||this.disabled}onPrevButtonClick(e){this.navigationState={backward:!0,button:!0},this.navBackward(e)}onNextButtonClick(e){this.navigationState={backward:!1,button:!0},this.navForward(e)}onContainerButtonKeydown(e){switch(e.which){case 9:this.inline||this.trapFocus(e);break;case 27:this.overlayVisible=!1,e.preventDefault()}}onInputKeydown(e){this.isKeydown=!0,40===e.keyCode&&this.contentViewChild?this.trapFocus(e):27===e.keyCode||13===e.keyCode?this.overlayVisible&&(this.overlayVisible=!1,e.preventDefault()):9===e.keyCode&&this.contentViewChild&&(Kt.getFocusableElements(this.contentViewChild.nativeElement).forEach(n=>n.tabIndex="-1"),this.overlayVisible&&(this.overlayVisible=!1))}onDateCellKeydown(e,n,r){const s=e.currentTarget,o=s.parentElement;switch(e.which){case 40:{s.tabIndex="-1";let l=Kt.index(o),u=o.parentElement.nextElementSibling;u?Kt.hasClass(u.children[l].children[0],"p-disabled")?(this.navigationState={backward:!1},this.navForward(e)):(u.children[l].children[0].tabIndex="0",u.children[l].children[0].focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case 38:{s.tabIndex="-1";let l=Kt.index(o),u=o.parentElement.previousElementSibling;if(u){let p=u.children[l].children[0];Kt.hasClass(p,"p-disabled")?(this.navigationState={backward:!0},this.navBackward(e)):(p.tabIndex="0",p.focus())}else this.navigationState={backward:!0},this.navBackward(e);e.preventDefault();break}case 37:{s.tabIndex="-1";let l=o.previousElementSibling;if(l){let u=l.children[0];Kt.hasClass(u,"p-disabled")||Kt.hasClass(u.parentElement,"p-datepicker-weeknumber")?this.navigateToMonth(!0,r):(u.tabIndex="0",u.focus())}else this.navigateToMonth(!0,r);e.preventDefault();break}case 39:{s.tabIndex="-1";let l=o.nextElementSibling;if(l){let u=l.children[0];Kt.hasClass(u,"p-disabled")?this.navigateToMonth(!1,r):(u.tabIndex="0",u.focus())}else this.navigateToMonth(!1,r);e.preventDefault();break}case 13:case 32:this.onDateSelect(e,n),e.preventDefault();break;case 27:this.overlayVisible=!1,e.preventDefault();break;case 9:this.inline||this.trapFocus(e)}}onMonthCellKeydown(e,n){const r=e.currentTarget;switch(e.which){case 38:case 40:{r.tabIndex="-1";var s=r.parentElement.children,o=Kt.index(r);let l=s[40===e.which?o+3:o-3];l&&(l.tabIndex="0",l.focus()),e.preventDefault();break}case 37:{r.tabIndex="-1";let l=r.previousElementSibling;l?(l.tabIndex="0",l.focus()):(this.navigationState={backward:!0},this.navBackward(e)),e.preventDefault();break}case 39:{r.tabIndex="-1";let l=r.nextElementSibling;l?(l.tabIndex="0",l.focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case 13:this.onMonthSelect(e,n),e.preventDefault();break;case 13:case 32:case 27:this.overlayVisible=!1,e.preventDefault();break;case 9:this.inline||this.trapFocus(e)}}onYearCellKeydown(e,n){const r=e.currentTarget;switch(e.which){case 38:case 40:{r.tabIndex="-1";var s=r.parentElement.children,o=Kt.index(r);let l=s[40===e.which?o+2:o-2];l&&(l.tabIndex="0",l.focus()),e.preventDefault();break}case 37:{r.tabIndex="-1";let l=r.previousElementSibling;l?(l.tabIndex="0",l.focus()):(this.navigationState={backward:!0},this.navBackward(e)),e.preventDefault();break}case 39:{r.tabIndex="-1";let l=r.nextElementSibling;l?(l.tabIndex="0",l.focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case 13:case 32:this.onYearSelect(e,n),e.preventDefault();break;case 27:this.overlayVisible=!1,e.preventDefault();break;case 9:this.trapFocus(e)}}navigateToMonth(e,n){if(e)if(1===this.numberOfMonths||0===n)this.navigationState={backward:!0},this.navBackward(event);else{let s=Kt.find(this.contentViewChild.nativeElement.children[n-1],".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)"),o=s[s.length-1];o.tabIndex="0",o.focus()}else if(1===this.numberOfMonths||n===this.numberOfMonths-1)this.navigationState={backward:!1},this.navForward(event);else{let s=Kt.findSingle(this.contentViewChild.nativeElement.children[n+1],".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)");s.tabIndex="0",s.focus()}}updateFocus(){let e;if(this.navigationState){if(this.navigationState.button)this.initFocusableCell(),this.navigationState.backward?Kt.findSingle(this.contentViewChild.nativeElement,".p-datepicker-prev").focus():Kt.findSingle(this.contentViewChild.nativeElement,".p-datepicker-next").focus();else{if(this.navigationState.backward){let n;n=Kt.find(this.contentViewChild.nativeElement,"month"===this.currentView?".p-monthpicker .p-monthpicker-month:not(.p-disabled)":"year"===this.currentView?".p-yearpicker .p-yearpicker-year:not(.p-disabled)":".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)"),n&&n.length>0&&(e=n[n.length-1])}else e=Kt.findSingle(this.contentViewChild.nativeElement,"month"===this.currentView?".p-monthpicker .p-monthpicker-month:not(.p-disabled)":"year"===this.currentView?".p-yearpicker .p-yearpicker-year:not(.p-disabled)":".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)");e&&(e.tabIndex="0",e.focus())}this.navigationState=null}else this.initFocusableCell()}initFocusableCell(){let e;if("month"===this.currentView){let n=Kt.find(this.contentViewChild.nativeElement,".p-monthpicker .p-monthpicker-month:not(.p-disabled)"),r=Kt.findSingle(this.contentViewChild.nativeElement,".p-monthpicker .p-monthpicker-month.p-highlight");n.forEach(s=>s.tabIndex=-1),e=r||n[0],0===n.length&&Kt.find(this.contentViewChild.nativeElement,'.p-monthpicker .p-monthpicker-month.p-disabled[tabindex = "0"]').forEach(o=>o.tabIndex=-1)}else if("year"===this.currentView){let n=Kt.find(this.contentViewChild.nativeElement,".p-yearpicker .p-yearpicker-year:not(.p-disabled)"),r=Kt.findSingle(this.contentViewChild.nativeElement,".p-yearpicker .p-yearpicker-year.p-highlight");n.forEach(s=>s.tabIndex=-1),e=r||n[0],0===n.length&&Kt.find(this.contentViewChild.nativeElement,'.p-yearpicker .p-yearpicker-year.p-disabled[tabindex = "0"]').forEach(o=>o.tabIndex=-1)}else if(e=Kt.findSingle(this.contentViewChild.nativeElement,"span.p-highlight"),!e){let n=Kt.findSingle(this.contentViewChild.nativeElement,"td.p-datepicker-today span:not(.p-disabled):not(.p-ink)");e=n||Kt.findSingle(this.contentViewChild.nativeElement,".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)")}e&&(e.tabIndex="0",!this.preventFocus&&(!this.navigationState||!this.navigationState.button)&&setTimeout(()=>{e.focus()},1),this.preventFocus=!1)}trapFocus(e){let n=Kt.getFocusableElements(this.contentViewChild.nativeElement);if(n&&n.length>0)if(n[0].ownerDocument.activeElement){let r=n.indexOf(n[0].ownerDocument.activeElement);if(e.shiftKey)if(-1==r||0===r)if(this.focusTrap)n[n.length-1].focus();else{if(-1===r)return this.hideOverlay();if(0===r)return}else n[r-1].focus();else if(-1==r||r===n.length-1){if(!this.focusTrap&&-1!=r)return this.hideOverlay();n[0].focus()}else n[r+1].focus()}else n[0].focus();e.preventDefault()}onMonthDropdownChange(e){this.currentMonth=parseInt(e),this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)}onYearDropdownChange(e){this.currentYear=parseInt(e),this.onYearChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)}validateTime(e,n,r,s){let o=this.value;const l=this.convertTo24Hour(e,s);this.isRangeSelection()&&(o=this.value[1]||this.value[0]),this.isMultipleSelection()&&(o=this.value[this.value.length-1]);const u=o?o.toDateString():null;return!(this.minDate&&u&&this.minDate.toDateString()===u&&(this.minDate.getHours()>l||this.minDate.getHours()===l&&(this.minDate.getMinutes()>n||this.minDate.getMinutes()===n&&this.minDate.getSeconds()>r))||this.maxDate&&u&&this.maxDate.toDateString()===u&&(this.maxDate.getHours()<l||this.maxDate.getHours()===l&&(this.maxDate.getMinutes()<n||this.maxDate.getMinutes()===n&&this.maxDate.getSeconds()<r)))}incrementHour(e){let r=this.currentHour+this.stepHour,s=this.pm;"24"==this.hourFormat?r=r>=24?r-24:r:"12"==this.hourFormat&&(this.currentHour<12&&r>11&&(s=!this.pm),r=r>=13?r-12:r),this.validateTime(r,this.currentMinute,this.currentSecond,s)&&(this.currentHour=r,this.pm=s),e.preventDefault()}onTimePickerElementMouseDown(e,n,r){this.disabled||(this.repeat(e,null,n,r),e.preventDefault())}onTimePickerElementMouseUp(e){this.disabled||(this.clearTimePickerTimer(),this.updateTime())}onTimePickerElementMouseLeave(){!this.disabled&&this.timePickerTimer&&(this.clearTimePickerTimer(),this.updateTime())}repeat(e,n,r,s){let o=n||500;switch(this.clearTimePickerTimer(),this.timePickerTimer=setTimeout(()=>{this.repeat(e,100,r,s),this.cd.markForCheck()},o),r){case 0:1===s?this.incrementHour(e):this.decrementHour(e);break;case 1:1===s?this.incrementMinute(e):this.decrementMinute(e);break;case 2:1===s?this.incrementSecond(e):this.decrementSecond(e)}this.updateInputfield()}clearTimePickerTimer(){this.timePickerTimer&&(clearTimeout(this.timePickerTimer),this.timePickerTimer=null)}decrementHour(e){let n=this.currentHour-this.stepHour,r=this.pm;"24"==this.hourFormat?n=n<0?24+n:n:"12"==this.hourFormat&&(12===this.currentHour&&(r=!this.pm),n=n<=0?12+n:n),this.validateTime(n,this.currentMinute,this.currentSecond,r)&&(this.currentHour=n,this.pm=r),e.preventDefault()}incrementMinute(e){let n=this.currentMinute+this.stepMinute;n=n>59?n-60:n,this.validateTime(this.currentHour,n,this.currentSecond,this.pm)&&(this.currentMinute=n),e.preventDefault()}decrementMinute(e){let n=this.currentMinute-this.stepMinute;n=n<0?60+n:n,this.validateTime(this.currentHour,n,this.currentSecond,this.pm)&&(this.currentMinute=n),e.preventDefault()}incrementSecond(e){let n=this.currentSecond+this.stepSecond;n=n>59?n-60:n,this.validateTime(this.currentHour,this.currentMinute,n,this.pm)&&(this.currentSecond=n),e.preventDefault()}decrementSecond(e){let n=this.currentSecond-this.stepSecond;n=n<0?60+n:n,this.validateTime(this.currentHour,this.currentMinute,n,this.pm)&&(this.currentSecond=n),e.preventDefault()}updateTime(){let e=this.value;this.isRangeSelection()&&(e=this.value[1]||this.value[0]),this.isMultipleSelection()&&(e=this.value[this.value.length-1]),e=e?new Date(e.getTime()):new Date,e.setHours("12"==this.hourFormat?12===this.currentHour?this.pm?12:0:this.pm?this.currentHour+12:this.currentHour:this.currentHour),e.setMinutes(this.currentMinute),e.setSeconds(this.currentSecond),this.isRangeSelection()&&(e=this.value[1]?[this.value[0],e]:[e,null]),this.isMultipleSelection()&&(e=[...this.value.slice(0,-1),e]),this.updateModel(e),this.onSelect.emit(e),this.updateInputfield()}toggleAMPM(e){const n=!this.pm;this.validateTime(this.currentHour,this.currentMinute,this.currentSecond,n)&&(this.pm=n,this.updateTime()),e.preventDefault()}onUserInput(e){if(!this.isKeydown)return;this.isKeydown=!1;let n=e.target.value;try{let r=this.parseValueFromString(n);this.isValidSelection(r)&&(this.updateModel(r),this.updateUI())}catch{this.updateModel(this.keepInvalid?n:null)}this.filled=null!=n&&n.length,this.onInput.emit(e)}isValidSelection(e){let n=!0;return this.isSingleSelection()?this.isSelectable(e.getDate(),e.getMonth(),e.getFullYear(),!1)||(n=!1):e.every(r=>this.isSelectable(r.getDate(),r.getMonth(),r.getFullYear(),!1))&&this.isRangeSelection()&&(n=e.length>1&&e[1]>e[0]),n}parseValueFromString(e){if(!e||0===e.trim().length)return null;let n;if(this.isSingleSelection())n=this.parseDateTime(e);else if(this.isMultipleSelection()){let r=e.split(this.multipleSeparator);n=[];for(let s of r)n.push(this.parseDateTime(s.trim()))}else if(this.isRangeSelection()){let r=e.split(" "+this.rangeSeparator+" ");n=[];for(let s=0;s<r.length;s++)n[s]=this.parseDateTime(r[s].trim())}return n}parseDateTime(e){let n,r=e.split(" ");if(this.timeOnly)n=new Date,this.populateTime(n,r[0],r[1]);else{const s=this.getDateFormat();if(this.showTime){let o="12"==this.hourFormat?r.pop():null,l=r.pop();n=this.parseDate(r.join(" "),s),this.populateTime(n,l,o)}else n=this.parseDate(e,s)}return n}populateTime(e,n,r){if("12"==this.hourFormat&&!r)throw"Invalid Time";this.pm="PM"===r||"pm"===r;let s=this.parseTime(n);e.setHours(s.hour),e.setMinutes(s.minute),e.setSeconds(s.second)}isValidDate(e){return e instanceof Date&&fr.isNotEmpty(e)}updateUI(){let e=this.value;Array.isArray(e)&&(e=e[0]);let n=this.defaultDate&&this.isValidDate(this.defaultDate)&&!this.value?this.defaultDate:e&&this.isValidDate(e)?e:new Date;this.currentMonth=n.getMonth(),this.currentYear=n.getFullYear(),this.createMonths(this.currentMonth,this.currentYear),(this.showTime||this.timeOnly)&&(this.setCurrentHourPM(n.getHours()),this.currentMinute=n.getMinutes(),this.currentSecond=n.getSeconds())}showOverlay(){this.overlayVisible||(this.updateUI(),this.touchUI||(this.preventFocus=!0),this.overlayVisible=!0)}hideOverlay(){this.overlayVisible=!1,this.clearTimePickerTimer(),this.touchUI&&this.disableModality(),this.cd.markForCheck()}toggle(){this.inline||(this.overlayVisible?this.hideOverlay():(this.showOverlay(),this.inputfieldViewChild.nativeElement.focus()))}onOverlayAnimationStart(e){switch(e.toState){case"visible":case"visibleTouchUI":this.inline||(this.overlay=e.element,this.overlay.setAttribute(this.attributeSelector,""),this.appendOverlay(),this.updateFocus(),this.autoZIndex&&(this.touchUI?Dl.set("modal",this.overlay,this.baseZIndex||this.config.zIndex.modal):Dl.set("overlay",this.overlay,this.baseZIndex||this.config.zIndex.overlay)),this.alignOverlay(),this.onShow.emit(e));break;case"void":this.onOverlayHide(),this.onClose.emit(e)}}onOverlayAnimationDone(e){switch(e.toState){case"visible":case"visibleTouchUI":this.inline||(this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener());break;case"void":this.autoZIndex&&Dl.clear(e.element)}}appendOverlay(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.overlay):Kt.appendChild(this.overlay,this.appendTo))}restoreOverlayAppend(){this.overlay&&this.appendTo&&this.el.nativeElement.appendChild(this.overlay)}alignOverlay(){this.touchUI?this.enableModality(this.overlay):this.overlay&&(this.appendTo?("date"===this.view?(this.overlay.style.width=Kt.getOuterWidth(this.overlay)+"px",this.overlay.style.minWidth=Kt.getOuterWidth(this.inputfieldViewChild.nativeElement)+"px"):this.overlay.style.width=Kt.getOuterWidth(this.inputfieldViewChild.nativeElement)+"px",Kt.absolutePosition(this.overlay,this.inputfieldViewChild.nativeElement)):Kt.relativePosition(this.overlay,this.inputfieldViewChild.nativeElement))}enableModality(e){this.mask||this.touchUI||(this.mask=document.createElement("div"),this.mask.style.zIndex=String(parseInt(e.style.zIndex)-1),Kt.addMultipleClasses(this.mask,"p-component-overlay p-datepicker-mask p-datepicker-mask-scrollblocker p-component-overlay p-component-overlay-enter"),this.maskClickListener=this.renderer.listen(this.mask,"click",r=>{this.disableModality()}),document.body.appendChild(this.mask),Kt.addClass(document.body,"p-overflow-hidden"))}disableModality(){this.mask&&(Kt.addClass(this.mask,"p-component-overlay-leave"),this.animationEndListener=this.destroyMask.bind(this),this.mask.addEventListener("animationend",this.animationEndListener))}destroyMask(){if(!this.mask)return;document.body.removeChild(this.mask);let n,e=document.body.children;for(let r=0;r<e.length;r++)if(Kt.hasClass(e[r],"p-datepicker-mask-scrollblocker")){n=!0;break}n||Kt.removeClass(document.body,"p-overflow-hidden"),this.unbindAnimationEndListener(),this.unbindMaskClickListener(),this.mask=null}unbindMaskClickListener(){this.maskClickListener&&(this.maskClickListener(),this.maskClickListener=null)}unbindAnimationEndListener(){this.animationEndListener&&this.mask&&(this.mask.removeEventListener("animationend",this.animationEndListener),this.animationEndListener=null)}writeValue(e){if(this.value=e,this.value&&"string"==typeof this.value)try{this.value=this.parseValueFromString(this.value)}catch{this.keepInvalid&&(this.value=e)}this.updateInputfield(),this.updateUI(),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}getDateFormat(){return this.dateFormat||this.getTranslation("dateFormat")}getFirstDateOfWeek(){return this._firstDayOfWeek||this.getTranslation(Wc.FIRST_DAY_OF_WEEK)}formatDate(e,n){if(!e)return"";let r;const s=v=>{const x=r+1<n.length&&n.charAt(r+1)===v;return x&&r++,x},o=(v,x,I)=>{let T=""+x;if(s(v))for(;T.length<I;)T="0"+T;return T},l=(v,x,I,T)=>s(v)?T[x]:I[x];let u="",p=!1;if(e)for(r=0;r<n.length;r++)if(p)"'"!==n.charAt(r)||s("'")?u+=n.charAt(r):p=!1;else switch(n.charAt(r)){case"d":u+=o("d",e.getDate(),2);break;case"D":u+=l("D",e.getDay(),this.getTranslation(Wc.DAY_NAMES_SHORT),this.getTranslation(Wc.DAY_NAMES));break;case"o":u+=o("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=o("m",e.getMonth()+1,2);break;case"M":u+=l("M",e.getMonth(),this.getTranslation(Wc.MONTH_NAMES_SHORT),this.getTranslation(Wc.MONTH_NAMES));break;case"y":u+=s("y")?e.getFullYear():(e.getFullYear()%100<10?"0":"")+e.getFullYear()%100;break;case"@":u+=e.getTime();break;case"!":u+=1e4*e.getTime()+this.ticksTo1970;break;case"'":s("'")?u+="'":p=!0;break;default:u+=n.charAt(r)}return u}formatTime(e){if(!e)return"";let n="",r=e.getHours(),s=e.getMinutes(),o=e.getSeconds();return"12"==this.hourFormat&&r>11&&12!=r&&(r-=12),n+="12"==this.hourFormat&&0===r?12:r<10?"0"+r:r,n+=":",n+=s<10?"0"+s:s,this.showSeconds&&(n+=":",n+=o<10?"0"+o:o),"12"==this.hourFormat&&(n+=e.getHours()>11?" PM":" AM"),n}parseTime(e){let n=e.split(":");if(n.length!==(this.showSeconds?3:2))throw"Invalid time";let s=parseInt(n[0]),o=parseInt(n[1]),l=this.showSeconds?parseInt(n[2]):null;if(isNaN(s)||isNaN(o)||s>23||o>59||"12"==this.hourFormat&&s>12||this.showSeconds&&(isNaN(l)||l>59))throw"Invalid time";return"12"==this.hourFormat&&(12!==s&&this.pm?s+=12:!this.pm&&12===s&&(s-=12)),{hour:s,minute:o,second:l}}parseDate(e,n){if(null==n||null==e)throw"Invalid arguments";if(""===(e="object"==typeof e?e.toString():e+""))return null;let r,s,o,F,l=0,u="string"!=typeof this.shortYearCutoff?this.shortYearCutoff:(new Date).getFullYear()%100+parseInt(this.shortYearCutoff,10),p=-1,v=-1,x=-1,I=-1,T=!1,j=ye=>{let Ae=r+1<n.length&&n.charAt(r+1)===ye;return Ae&&r++,Ae},X=ye=>{let Ae=j(ye),We="@"===ye?14:"!"===ye?20:"y"===ye&&Ae?4:"o"===ye?3:2,Mt=new RegExp("^\\d{"+("y"===ye?We:1)+","+We+"}"),Xe=e.substring(l).match(Mt);if(!Xe)throw"Missing number at position "+l;return l+=Xe[0].length,parseInt(Xe[0],10)},ce=(ye,Ae,We)=>{let ot=-1,Mt=j(ye)?We:Ae,Xe=[];for(let yt=0;yt<Mt.length;yt++)Xe.push([yt,Mt[yt]]);Xe.sort((yt,tn)=>-(yt[1].length-tn[1].length));for(let yt=0;yt<Xe.length;yt++){let tn=Xe[yt][1];if(e.substr(l,tn.length).toLowerCase()===tn.toLowerCase()){ot=Xe[yt][0],l+=tn.length;break}}if(-1!==ot)return ot+1;throw"Unknown name at position "+l},we=()=>{if(e.charAt(l)!==n.charAt(r))throw"Unexpected literal at position "+l;l++};for("month"===this.view&&(x=1),r=0;r<n.length;r++)if(T)"'"!==n.charAt(r)||j("'")?we():T=!1;else switch(n.charAt(r)){case"d":x=X("d");break;case"D":ce("D",this.getTranslation(Wc.DAY_NAMES_SHORT),this.getTranslation(Wc.DAY_NAMES));break;case"o":I=X("o");break;case"m":v=X("m");break;case"M":v=ce("M",this.getTranslation(Wc.MONTH_NAMES_SHORT),this.getTranslation(Wc.MONTH_NAMES));break;case"y":p=X("y");break;case"@":F=new Date(X("@")),p=F.getFullYear(),v=F.getMonth()+1,x=F.getDate();break;case"!":F=new Date((X("!")-this.ticksTo1970)/1e4),p=F.getFullYear(),v=F.getMonth()+1,x=F.getDate();break;case"'":j("'")?we():T=!0;break;default:we()}if(l<e.length&&(o=e.substr(l),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===p?p=(new Date).getFullYear():p<100&&(p+=(new Date).getFullYear()-(new Date).getFullYear()%100+(p<=u?0:-100)),I>-1)for(v=1,x=I;s=this.getDaysCountInMonth(p,v-1),!(x<=s);)v++,x-=s;if("year"===this.view&&(v=-1===v?1:v,x=-1===x?1:x),F=this.daylightSavingAdjust(new Date(p,v-1,x)),F.getFullYear()!==p||F.getMonth()+1!==v||F.getDate()!==x)throw"Invalid date";return F}daylightSavingAdjust(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null}updateFilledState(){this.filled=this.inputFieldValue&&""!=this.inputFieldValue}onTodayButtonClick(e){let n=new Date,r={day:n.getDate(),month:n.getMonth(),year:n.getFullYear(),otherMonth:n.getMonth()!==this.currentMonth||n.getFullYear()!==this.currentYear,today:!0,selectable:!0};this.onDateSelect(e,r),this.onTodayClick.emit(e)}onClearButtonClick(e){this.updateModel(null),this.updateInputfield(),this.hideOverlay(),this.onClearClick.emit(e)}createResponsiveStyle(){if(this.numberOfMonths>1&&this.responsiveOptions){this.responsiveStyleElement||(this.responsiveStyleElement=document.createElement("style"),this.responsiveStyleElement.type="text/css",document.body.appendChild(this.responsiveStyleElement));let e="";if(this.responsiveOptions){let n=[...this.responsiveOptions].filter(r=>!(!r.breakpoint||!r.numMonths)).sort((r,s)=>-1*r.breakpoint.localeCompare(s.breakpoint,void 0,{numeric:!0}));for(let r=0;r<n.length;r++){let{breakpoint:s,numMonths:o}=n[r],l=`\n                        .p-datepicker[${this.attributeSelector}] .p-datepicker-group:nth-child(${o}) .p-datepicker-next {\n                            display: inline-flex !important;\n                        }\n                    `;for(let u=o;u<this.numberOfMonths;u++)l+=`\n                            .p-datepicker[${this.attributeSelector}] .p-datepicker-group:nth-child(${u+1}) {\n                                display: none !important;\n                            }\n                        `;e+=`\n                        @media screen and (max-width: ${s}) {\n                            ${l}\n                        }\n                    `}}this.responsiveStyleElement.innerHTML=e}}destroyResponsiveStyleElement(){this.responsiveStyleElement&&(this.responsiveStyleElement.remove(),this.responsiveStyleElement=null)}bindDocumentClickListener(){this.documentClickListener||this.zone.runOutsideAngular(()=>{this.documentClickListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","mousedown",n=>{this.isOutsideClicked(n)&&this.overlayVisible&&this.zone.run(()=>{this.hideOverlay(),this.onClickOutside.emit(n),this.cd.markForCheck()})})})}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){!this.documentResizeListener&&!this.touchUI&&(this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener))}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new xw(this.containerViewChild.nativeElement,()=>{this.overlayVisible&&this.hideOverlay()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}isOutsideClicked(e){return!(this.el.nativeElement.isSameNode(e.target)||this.isNavIconClicked(e)||this.el.nativeElement.contains(e.target)||this.overlay&&this.overlay.contains(e.target))}isNavIconClicked(e){return Kt.hasClass(e.target,"p-datepicker-prev")||Kt.hasClass(e.target,"p-datepicker-prev-icon")||Kt.hasClass(e.target,"p-datepicker-next")||Kt.hasClass(e.target,"p-datepicker-next-icon")}onWindowResize(){this.overlayVisible&&!Kt.isTouchDevice()&&this.hideOverlay()}onOverlayHide(){this.currentView=this.view,this.mask&&this.destroyMask(),this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.overlay=null}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.translationSubscription&&this.translationSubscription.unsubscribe(),this.overlay&&this.autoZIndex&&Dl.clear(this.overlay),this.destroyResponsiveStyleElement(),this.clearTimePickerTimer(),this.restoreOverlayAppend(),this.onOverlayHide()}}return i.\u0275fac=function(e){return new(e||i)(Zt(Xn),Zt(h),Zt(Zo),Zt(Ko),Zt(Tp),Zt(iw))},i.\u0275cmp=Ir({type:i,selectors:[["p-calendar"]],contentQueries:function(e,n,r){if(1&e&&cl(r,_l,4),2&e){let s;vr(s=yr())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(vs(Xte,5),vs(Yte,5),vs(Kte,5)),2&e){let r;vr(r=yr())&&(n.containerViewChild=r.first),vr(r=yr())&&(n.inputfieldViewChild=r.first),vr(r=yr())&&(n.content=r.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(e,n){2&e&&Ep("p-inputwrapper-filled",n.filled)("p-inputwrapper-focus",n.focus)("p-calendar-clearable",n.showClear&&!n.disabled)},inputs:{style:"style",styleClass:"styleClass",inputStyle:"inputStyle",inputId:"inputId",name:"name",inputStyleClass:"inputStyleClass",placeholder:"placeholder",ariaLabelledBy:"ariaLabelledBy",iconAriaLabel:"iconAriaLabel",disabled:"disabled",dateFormat:"dateFormat",multipleSeparator:"multipleSeparator",rangeSeparator:"rangeSeparator",inline:"inline",showOtherMonths:"showOtherMonths",selectOtherMonths:"selectOtherMonths",showIcon:"showIcon",icon:"icon",appendTo:"appendTo",readonlyInput:"readonlyInput",shortYearCutoff:"shortYearCutoff",monthNavigator:"monthNavigator",yearNavigator:"yearNavigator",hourFormat:"hourFormat",timeOnly:"timeOnly",stepHour:"stepHour",stepMinute:"stepMinute",stepSecond:"stepSecond",showSeconds:"showSeconds",required:"required",showOnFocus:"showOnFocus",showWeek:"showWeek",showClear:"showClear",dataType:"dataType",selectionMode:"selectionMode",maxDateCount:"maxDateCount",showButtonBar:"showButtonBar",todayButtonStyleClass:"todayButtonStyleClass",clearButtonStyleClass:"clearButtonStyleClass",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",panelStyleClass:"panelStyleClass",panelStyle:"panelStyle",keepInvalid:"keepInvalid",hideOnDateTimeSelect:"hideOnDateTimeSelect",touchUI:"touchUI",timeSeparator:"timeSeparator",focusTrap:"focusTrap",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",tabindex:"tabindex",view:"view",defaultDate:"defaultDate",minDate:"minDate",maxDate:"maxDate",disabledDates:"disabledDates",disabledDays:"disabledDays",yearRange:"yearRange",showTime:"showTime",responsiveOptions:"responsiveOptions",numberOfMonths:"numberOfMonths",firstDayOfWeek:"firstDayOfWeek",locale:"locale"},outputs:{onFocus:"onFocus",onBlur:"onBlur",onClose:"onClose",onSelect:"onSelect",onClear:"onClear",onInput:"onInput",onTodayClick:"onTodayClick",onClearClick:"onClearClick",onMonthChange:"onMonthChange",onYearChange:"onYearChange",onClickOutside:"onClickOutside",onShow:"onShow"},features:[To([Vne])],ngContentSelectors:zne,decls:4,vars:11,consts:[[3,"ngClass","ngStyle"],["container",""],[3,"ngIf"],[3,"class","ngStyle","ngClass","click",4,"ngIf"],["type","text","autocomplete","off",3,"value","readonly","ngStyle","placeholder","disabled","ngClass","focus","keydown","click","blur","input"],["inputfield",""],["class","p-calendar-clear-icon pi pi-times",3,"click",4,"ngIf"],["type","button","pButton","","pRipple","","class","p-datepicker-trigger","tabindex","0",3,"icon","disabled","click",4,"ngIf"],[1,"p-calendar-clear-icon","pi","pi-times",3,"click"],["type","button","pButton","","pRipple","","tabindex","0",1,"p-datepicker-trigger",3,"icon","disabled","click"],[3,"ngStyle","ngClass","click"],["contentWrapper",""],[4,"ngTemplateOutlet"],[4,"ngIf"],["class","p-timepicker",4,"ngIf"],["class","p-datepicker-buttonbar",4,"ngIf"],[1,"p-datepicker-group-container"],["class","p-datepicker-group",4,"ngFor","ngForOf"],["class","p-monthpicker",4,"ngIf"],["class","p-yearpicker",4,"ngIf"],[1,"p-datepicker-group"],[1,"p-datepicker-header"],["class","p-datepicker-prev p-link","type","button","pRipple","",3,"keydown","click",4,"ngIf"],[1,"p-datepicker-title"],["type","button","class","p-datepicker-month p-link",3,"disabled","click","keydown",4,"ngIf"],["type","button","class","p-datepicker-year p-link",3,"disabled","click","keydown",4,"ngIf"],["class","p-datepicker-decade",4,"ngIf"],["type","button","pRipple","",1,"p-datepicker-next","p-link",3,"keydown","click"],[1,"p-datepicker-next-icon","pi","pi-chevron-right"],["class","p-datepicker-calendar-container",4,"ngIf"],["type","button","pRipple","",1,"p-datepicker-prev","p-link",3,"keydown","click"],[1,"p-datepicker-prev-icon","pi","pi-chevron-left"],["type","button",1,"p-datepicker-month","p-link",3,"disabled","click","keydown"],["type","button",1,"p-datepicker-year","p-link",3,"disabled","click","keydown"],[1,"p-datepicker-decade"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-datepicker-calendar-container"],[1,"p-datepicker-calendar"],["class","p-datepicker-weekheader p-disabled",4,"ngIf"],["scope","col",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"p-datepicker-weekheader","p-disabled"],["scope","col"],["class","p-datepicker-weeknumber",4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"p-datepicker-weeknumber"],[1,"p-disabled"],[3,"ngClass"],["draggable","false","pRipple","",3,"ngClass","click","keydown"],[1,"p-monthpicker"],["class","p-monthpicker-month","pRipple","",3,"ngClass","click","keydown",4,"ngFor","ngForOf"],["pRipple","",1,"p-monthpicker-month",3,"ngClass","click","keydown"],[1,"p-yearpicker"],["class","p-yearpicker-year","pRipple","",3,"ngClass","click","keydown",4,"ngFor","ngForOf"],["pRipple","",1,"p-yearpicker-year",3,"ngClass","click","keydown"],[1,"p-timepicker"],[1,"p-hour-picker"],["type","button","pRipple","",1,"p-link",3,"keydown","keydown.enter","keydown.space","mousedown","mouseup","keyup.enter","keyup.space","mouseleave"],[1,"pi","pi-chevron-up"],[1,"pi","pi-chevron-down"],[1,"p-separator"],[1,"p-minute-picker"],["class","p-separator",4,"ngIf"],["class","p-second-picker",4,"ngIf"],["class","p-ampm-picker",4,"ngIf"],[1,"p-second-picker"],[1,"p-ampm-picker"],["type","button","pRipple","",1,"p-link",3,"keydown","click","keydown.enter"],[1,"p-datepicker-buttonbar"],["type","button","pButton","","pRipple","",3,"label","ngClass","keydown","click"]],template:function(e,n){1&e&&(dg(Nne),lt(0,"span",0,1),Ze(2,Jte,4,17,"ng-template",2),Ze(3,Fne,9,28,"div",3),ct()),2&e&&(Ur(n.styleClass),ve("ngClass",Ff(6,Bne,n.showIcon,n.timeOnly,n.disabled,n.focus))("ngStyle",n.style),Me(2),ve("ngIf",!n.inline),Me(1),ve("ngIf",n.inline||n.overlayVisible))},dependencies:[bo,Su,Wo,rc,Qo,cC,_d],styles:[".p-calendar{position:relative;display:inline-flex;max-width:100%}.p-calendar .p-inputtext{flex:1 1 auto;width:1%}.p-calendar-w-btn .p-inputtext{border-top-right-radius:0;border-bottom-right-radius:0}.p-calendar-w-btn .p-datepicker-trigger{border-top-left-radius:0;border-bottom-left-radius:0}.p-fluid .p-calendar{display:flex}.p-fluid .p-calendar .p-inputtext{width:1%}.p-calendar .p-datepicker{min-width:100%}.p-datepicker{width:auto;position:absolute;top:0;left:0}.p-datepicker-inline{display:inline-block;position:static;overflow-x:auto}.p-datepicker-header{display:flex;align-items:center;justify-content:space-between}.p-datepicker-header .p-datepicker-title{margin:0 auto}.p-datepicker-prev,.p-datepicker-next{cursor:pointer;display:inline-flex;justify-content:center;align-items:center;overflow:hidden;position:relative}.p-datepicker-multiple-month .p-datepicker-group-container .p-datepicker-group{flex:1 1 auto}.p-datepicker-multiple-month .p-datepicker-group-container{display:flex}.p-datepicker table{width:100%;border-collapse:collapse}.p-datepicker td>span{display:flex;justify-content:center;align-items:center;cursor:pointer;margin:0 auto;overflow:hidden;position:relative}.p-monthpicker-month{width:33.3%;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-datepicker-buttonbar{display:flex;justify-content:space-between;align-items:center}.p-timepicker{display:flex;justify-content:center;align-items:center}.p-timepicker button{display:flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-timepicker>div{display:flex;align-items:center;flex-direction:column}.p-datepicker-touch-ui,.p-calendar .p-datepicker-touch-ui{position:fixed;top:50%;left:50%;min-width:80vw;transform:translate(-50%,-50%)}.p-yearpicker-year{width:50%;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-calendar-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-calendar-clearable{position:relative}\n"],encapsulation:2,data:{animation:[oy("overlayAnimation",[_0("visibleTouchUI",Qa({transform:"translate(-50%,-50%)",opacity:1})),Eu("void => visible",[Qa({opacity:0,transform:"scaleY(0.8)"}),Cc("{{showTransitionParams}}",Qa({opacity:1,transform:"*"}))]),Eu("visible => void",[Cc("{{hideTransitionParams}}",Qa({opacity:0}))]),Eu("void => visibleTouchUI",[Qa({opacity:0,transform:"translate3d(-50%, -40%, 0) scale(0.9)"}),Cc("{{showTransitionParams}}")]),Eu("visibleTouchUI => void",[Cc("{{hideTransitionParams}}",Qa({opacity:0,transform:"translate3d(-50%, -40%, 0) scale(0.9)"}))])])]},changeDetection:0}),i})(),QV=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({imports:[Ns,sv,Na,$c,sv,Na]}),i})();const Hne=["container"],Gne=["resizeHelper"],Wne=["reorderIndicatorUp"],jne=["reorderIndicatorDown"],$ne=["wrapper"],qne=["table"],Xne=["tableHeader"],Yne=["scroller"];function Kne(i,t){if(1&i&&(lt(0,"div",15),ii(1,"i"),ct()),2&i){const e=_e();Me(1),Ur("p-datatable-loading-icon pi-spin "+e.loadingIcon)}}function Zne(i,t){1&i&&Ki(0)}function Qne(i,t){if(1&i&&(lt(0,"div",16),Ze(1,Zne,1,0,"ng-container",17),ct()),2&i){const e=_e();Me(1),ve("ngTemplateOutlet",e.captionTemplate)}}function Jne(i,t){if(1&i){const e=Pi();lt(0,"p-paginator",18),fn("onPageChange",function(r){return wt(e),At(_e().onPageChange(r))}),ct()}if(2&i){const e=_e();ve("rows",e.rows)("first",e.first)("totalRecords",e.totalRecords)("pageLinkSize",e.pageLinks)("alwaysShow",e.alwaysShowPaginator)("rowsPerPageOptions",e.rowsPerPageOptions)("templateLeft",e.paginatorLeftTemplate)("templateRight",e.paginatorRightTemplate)("dropdownAppendTo",e.paginatorDropdownAppendTo)("dropdownScrollHeight",e.paginatorDropdownScrollHeight)("currentPageReportTemplate",e.currentPageReportTemplate)("showFirstLastIcon",e.showFirstLastIcon)("dropdownItemTemplate",e.paginatorDropdownItemTemplate)("showCurrentPageReport",e.showCurrentPageReport)("showJumpToPageDropdown",e.showJumpToPageDropdown)("showJumpToPageInput",e.showJumpToPageInput)("showPageLinks",e.showPageLinks)}}function eie(i,t){1&i&&Ki(0)}const JV=function(i,t){return{$implicit:i,options:t}};function tie(i,t){if(1&i&&Ze(0,eie,1,0,"ng-container",22),2&i){const e=t.$implicit,n=t.options;_e(2),ve("ngTemplateOutlet",co(10))("ngTemplateOutletContext",ys(2,JV,e,n))}}const nie=function(i){return{height:i}};function iie(i,t){if(1&i){const e=Pi();lt(0,"p-scroller",19,20),fn("onLazyLoad",function(r){return wt(e),At(_e().onLazyItemLoad(r))}),Ze(2,tie,1,5,"ng-template",21),ct()}if(2&i){const e=_e();uo(Bi(12,nie,"flex"!==e.scrollHeight?e.scrollHeight:void 0)),ve("items",e.processedData)("columns",e.columns)("scrollHeight","flex"!==e.scrollHeight?void 0:"100%")("itemSize",e.virtualScrollItemSize||e._virtualRowHeight)("delay",e.lazy?e.virtualScrollDelay:0)("lazy",e.lazy)("loaderDisabled",!0)("showSpacer",!1)("showLoader",e.loadingBodyTemplate)("options",e.virtualScrollOptions)}}function rie(i,t){1&i&&Ki(0)}const sie=function(i){return{columns:i}};function oie(i,t){if(1&i&&(qr(0),Ze(1,rie,1,0,"ng-container",22),Xr()),2&i){const e=_e(),n=co(10);Me(1),ve("ngTemplateOutlet",n)("ngTemplateOutletContext",ys(4,JV,e.processedData,Bi(2,sie,e.columns)))}}function aie(i,t){1&i&&Ki(0)}function lie(i,t){1&i&&Ki(0)}function cie(i,t){if(1&i&&ii(0,"tbody",29),2&i){const e=_e().options,n=_e();ve("value",n.frozenValue)("frozenRows",!0)("pTableBody",e.columns)("pTableBodyTemplate",n.frozenBodyTemplate)("frozen",!0)}}function uie(i,t){1&i&&Ki(0)}const Iw=function(i){return{$implicit:i}};function die(i,t){if(1&i&&(lt(0,"tfoot",30),Ze(1,uie,1,0,"ng-container",22),ct()),2&i){const e=_e().options,n=_e();Me(1),ve("ngTemplateOutlet",n.footerGroupedTemplate||n.footerTemplate)("ngTemplateOutletContext",Bi(2,Iw,e.columns))}}function hie(i,t){if(1&i&&(lt(0,"table",23,24),Ze(2,aie,1,0,"ng-container",22),lt(3,"thead",25),Ze(4,lie,1,0,"ng-container",22),ct(),Ze(5,cie,1,5,"tbody",26),ii(6,"tbody",27),Ze(7,die,2,4,"tfoot",28),ct()),2&i){const e=t.options,n=_e();uo(e.spacerStyle),ve("ngClass",n.tableStyleClass)("ngStyle",n.tableStyle),mr("id",n.id+"-table"),Me(2),ve("ngTemplateOutlet",n.colGroupTemplate)("ngTemplateOutletContext",Bi(18,Iw,e.columns)),Me(2),ve("ngTemplateOutlet",n.headerGroupedTemplate||n.headerTemplate)("ngTemplateOutletContext",Bi(20,Iw,e.columns)),Me(1),ve("ngIf",n.frozenValue||n.frozenBodyTemplate),Me(1),uo(e.contentStyle),ve("ngClass",e.contentStyleClass)("value",n.dataToRender(e.rows))("pTableBody",e.columns)("pTableBodyTemplate",n.bodyTemplate)("scrollerOptions",e),Me(1),ve("ngIf",n.footerGroupedTemplate||n.footerTemplate)}}function fie(i,t){if(1&i){const e=Pi();lt(0,"p-paginator",31),fn("onPageChange",function(r){return wt(e),At(_e().onPageChange(r))}),ct()}if(2&i){const e=_e();ve("rows",e.rows)("first",e.first)("totalRecords",e.totalRecords)("pageLinkSize",e.pageLinks)("alwaysShow",e.alwaysShowPaginator)("rowsPerPageOptions",e.rowsPerPageOptions)("templateLeft",e.paginatorLeftTemplate)("templateRight",e.paginatorRightTemplate)("dropdownAppendTo",e.paginatorDropdownAppendTo)("dropdownScrollHeight",e.paginatorDropdownScrollHeight)("currentPageReportTemplate",e.currentPageReportTemplate)("showFirstLastIcon",e.showFirstLastIcon)("dropdownItemTemplate",e.paginatorDropdownItemTemplate)("showCurrentPageReport",e.showCurrentPageReport)("showJumpToPageDropdown",e.showJumpToPageDropdown)("showJumpToPageInput",e.showJumpToPageInput)("showPageLinks",e.showPageLinks)}}function pie(i,t){1&i&&Ki(0)}function gie(i,t){if(1&i&&(lt(0,"div",32),Ze(1,pie,1,0,"ng-container",17),ct()),2&i){const e=_e();Me(1),ve("ngTemplateOutlet",e.summaryTemplate)}}function mie(i,t){1&i&&ii(0,"div",33,34)}function vie(i,t){1&i&&ii(0,"span",35,36)}function yie(i,t){1&i&&ii(0,"span",37,38)}const _ie=function(i,t,e,n,r,s,o,l,u,p,v,x,I,T){return{"p-datatable p-component":!0,"p-datatable-hoverable-rows":i,"p-datatable-auto-layout":t,"p-datatable-resizable":e,"p-datatable-resizable-fit":n,"p-datatable-scrollable":r,"p-datatable-scrollable-vertical":s,"p-datatable-scrollable-horizontal":o,"p-datatable-scrollable-both":l,"p-datatable-flex-scrollable":u,"p-datatable-responsive-stack":p,"p-datatable-responsive-scroll":v,"p-datatable-responsive":x,"p-datatable-grouped-header":I,"p-datatable-grouped-footer":T}},bie=function(i){return{maxHeight:i}},Cie=["pTableBody",""];function xie(i,t){1&i&&Ki(0)}const W1=function(i,t,e,n,r){return{$implicit:i,rowIndex:t,columns:e,editing:n,frozen:r}};function wie(i,t){if(1&i&&(qr(0,3),Ze(1,xie,1,0,"ng-container",4),Xr()),2&i){const e=_e(),n=e.$implicit,r=e.index,s=_e(2);Me(1),ve("ngTemplateOutlet",s.dt.groupHeaderTemplate)("ngTemplateOutletContext",Ub(2,W1,n,s.getRowIndex(r),s.columns,"row"===s.dt.editMode&&s.dt.isRowEditing(n),s.frozen))}}function Aie(i,t){1&i&&Ki(0)}function Iie(i,t){if(1&i&&(qr(0),Ze(1,Aie,1,0,"ng-container",4),Xr()),2&i){const e=_e(),n=e.$implicit,r=e.index,s=_e(2);Me(1),ve("ngTemplateOutlet",s.template)("ngTemplateOutletContext",Ub(2,W1,n,s.getRowIndex(r),s.columns,"row"===s.dt.editMode&&s.dt.isRowEditing(n),s.frozen))}}function Sie(i,t){1&i&&Ki(0)}const Eie=function(i,t,e,n,r,s,o){return{$implicit:i,rowIndex:t,columns:e,editing:n,frozen:r,rowgroup:s,rowspan:o}};function Tie(i,t){if(1&i&&(qr(0),Ze(1,Sie,1,0,"ng-container",4),Xr()),2&i){const e=_e(),n=e.$implicit,r=e.index,s=_e(2);Me(1),ve("ngTemplateOutlet",s.template)("ngTemplateOutletContext",function eF(i,t,e,n,r,s,o,l,u,p){const v=Oo()+i,x=mi();let I=ug(x,v,e,n,r,s);return pI(x,v+4,o,l,u)||I?Ym(x,v+7,p?t.call(p,e,n,r,s,o,l,u):t(e,n,r,s,o,l,u)):Ex(x,v+7)}(2,Eie,n,s.getRowIndex(r),s.columns,"row"===s.dt.editMode&&s.dt.isRowEditing(n),s.frozen,s.shouldRenderRowspan(s.value,n,s.getRowIndex(r)),s.calculateRowGroupSize(s.value,n,s.getRowIndex(r))))}}function Mie(i,t){1&i&&Ki(0)}function Die(i,t){if(1&i&&(qr(0,3),Ze(1,Mie,1,0,"ng-container",4),Xr()),2&i){const e=_e(),n=e.$implicit,r=e.index,s=_e(2);Me(1),ve("ngTemplateOutlet",s.dt.groupFooterTemplate)("ngTemplateOutletContext",Ub(2,W1,n,s.getRowIndex(r),s.columns,"row"===s.dt.editMode&&s.dt.isRowEditing(n),s.frozen))}}function Lie(i,t){if(1&i&&(Ze(0,wie,2,8,"ng-container",2),Ze(1,Iie,2,8,"ng-container",0),Ze(2,Tie,2,10,"ng-container",0),Ze(3,Die,2,8,"ng-container",2)),2&i){const e=t.$implicit,n=t.index,r=_e(2);ve("ngIf",r.dt.groupHeaderTemplate&&"subheader"===r.dt.rowGroupMode&&r.shouldRenderRowGroupHeader(r.value,e,r.getRowIndex(n))),Me(1),ve("ngIf","rowspan"!==r.dt.rowGroupMode),Me(1),ve("ngIf","rowspan"===r.dt.rowGroupMode),Me(1),ve("ngIf",r.dt.groupFooterTemplate&&"subheader"===r.dt.rowGroupMode&&r.shouldRenderRowGroupFooter(r.value,e,r.getRowIndex(n)))}}function Pie(i,t){if(1&i&&(qr(0),Ze(1,Lie,4,4,"ng-template",1),Xr()),2&i){const e=_e();Me(1),ve("ngForOf",e.value)("ngForTrackBy",e.dt.rowTrackBy)}}function Rie(i,t){1&i&&Ki(0)}function kie(i,t){if(1&i&&Ze(0,Rie,1,0,"ng-container",4),2&i){const e=t.$implicit,n=t.index,r=_e(2);ve("ngTemplateOutlet",e?r.template:r.dt.loadingBodyTemplate)("ngTemplateOutletContext",Ub(2,W1,e,r.getRowIndex(n),r.columns,"row"===r.dt.editMode&&r.dt.isRowEditing(e),r.frozen))}}function Oie(i,t){if(1&i&&(qr(0),Ze(1,kie,1,8,"ng-template",1),Xr()),2&i){const e=_e();Me(1),ve("ngForOf",e.value)("ngForTrackBy",e.dt.rowTrackBy)}}function Fie(i,t){1&i&&Ki(0)}const j1=function(i,t,e,n,r,s){return{$implicit:i,rowIndex:t,columns:e,expanded:n,editing:r,frozen:s}};function Nie(i,t){if(1&i&&(qr(0),Ze(1,Fie,1,0,"ng-container",4),Xr()),2&i){const e=_e(),n=e.$implicit,r=e.index,s=_e(2);Me(1),ve("ngTemplateOutlet",s.template)("ngTemplateOutletContext",Hb(2,j1,n,s.getRowIndex(r),s.columns,s.dt.isRowExpanded(n),"row"===s.dt.editMode&&s.dt.isRowEditing(n),s.frozen))}}function Bie(i,t){1&i&&Ki(0)}function zie(i,t){if(1&i&&(qr(0,3),Ze(1,Bie,1,0,"ng-container",4),Xr()),2&i){const e=_e(),n=e.$implicit,r=e.index,s=_e(2);Me(1),ve("ngTemplateOutlet",s.dt.groupHeaderTemplate)("ngTemplateOutletContext",Hb(2,j1,n,s.getRowIndex(r),s.columns,s.dt.isRowExpanded(n),"row"===s.dt.editMode&&s.dt.isRowEditing(n),s.frozen))}}function Vie(i,t){1&i&&Ki(0)}function Uie(i,t){1&i&&Ki(0)}function Hie(i,t){if(1&i&&(qr(0,3),Ze(1,Uie,1,0,"ng-container",4),Xr()),2&i){const e=_e(2),n=e.$implicit,r=e.index,s=_e(2);Me(1),ve("ngTemplateOutlet",s.dt.groupFooterTemplate)("ngTemplateOutletContext",Hb(2,j1,n,s.getRowIndex(r),s.columns,s.dt.isRowExpanded(n),"row"===s.dt.editMode&&s.dt.isRowEditing(n),s.frozen))}}const e4=function(i,t,e,n){return{$implicit:i,rowIndex:t,columns:e,frozen:n}};function Gie(i,t){if(1&i&&(qr(0),Ze(1,Vie,1,0,"ng-container",4),Ze(2,Hie,2,9,"ng-container",2),Xr()),2&i){const e=_e(),n=e.$implicit,r=e.index,s=_e(2);Me(1),ve("ngTemplateOutlet",s.dt.expandedRowTemplate)("ngTemplateOutletContext",Ff(3,e4,n,s.getRowIndex(r),s.columns,s.frozen)),Me(1),ve("ngIf",s.dt.groupFooterTemplate&&"subheader"===s.dt.rowGroupMode&&s.shouldRenderRowGroupFooter(s.value,n,s.getRowIndex(r)))}}function Wie(i,t){if(1&i&&(Ze(0,Nie,2,9,"ng-container",0),Ze(1,zie,2,9,"ng-container",2),Ze(2,Gie,3,8,"ng-container",0)),2&i){const e=t.$implicit,n=t.index,r=_e(2);ve("ngIf",!r.dt.groupHeaderTemplate),Me(1),ve("ngIf",r.dt.groupHeaderTemplate&&"subheader"===r.dt.rowGroupMode&&r.shouldRenderRowGroupHeader(r.value,e,r.getRowIndex(n))),Me(1),ve("ngIf",r.dt.isRowExpanded(e))}}function jie(i,t){if(1&i&&(qr(0),Ze(1,Wie,3,3,"ng-template",1),Xr()),2&i){const e=_e();Me(1),ve("ngForOf",e.value)("ngForTrackBy",e.dt.rowTrackBy)}}function $ie(i,t){1&i&&Ki(0)}function qie(i,t){1&i&&Ki(0)}function Xie(i,t){if(1&i&&(qr(0),Ze(1,qie,1,0,"ng-container",4),Xr()),2&i){const e=_e(),n=e.$implicit,r=e.index,s=_e(2);Me(1),ve("ngTemplateOutlet",s.dt.frozenExpandedRowTemplate)("ngTemplateOutletContext",Ff(2,e4,n,s.getRowIndex(r),s.columns,s.frozen))}}function Yie(i,t){if(1&i&&(Ze(0,$ie,1,0,"ng-container",4),Ze(1,Xie,2,7,"ng-container",0)),2&i){const e=t.$implicit,n=t.index,r=_e(2);ve("ngTemplateOutlet",r.template)("ngTemplateOutletContext",Hb(3,j1,e,r.getRowIndex(n),r.columns,r.dt.isRowExpanded(e),"row"===r.dt.editMode&&r.dt.isRowEditing(e),r.frozen)),Me(1),ve("ngIf",r.dt.isRowExpanded(e))}}function Kie(i,t){if(1&i&&(qr(0),Ze(1,Yie,2,10,"ng-template",1),Xr()),2&i){const e=_e();Me(1),ve("ngForOf",e.value)("ngForTrackBy",e.dt.rowTrackBy)}}function Zie(i,t){1&i&&Ki(0)}const t4=function(i,t){return{$implicit:i,frozen:t}};function Qie(i,t){if(1&i&&(qr(0),Ze(1,Zie,1,0,"ng-container",4),Xr()),2&i){const e=_e();Me(1),ve("ngTemplateOutlet",e.dt.loadingBodyTemplate)("ngTemplateOutletContext",ys(2,t4,e.columns,e.frozen))}}function Jie(i,t){1&i&&Ki(0)}function ere(i,t){if(1&i&&(qr(0),Ze(1,Jie,1,0,"ng-container",4),Xr()),2&i){const e=_e();Me(1),ve("ngTemplateOutlet",e.dt.emptyMessageTemplate)("ngTemplateOutletContext",ys(2,t4,e.columns,e.frozen))}}function tre(i,t){if(1&i&&(lt(0,"span",2),qi(1),ct()),2&i){const e=_e();Me(1),as(e.getBadgeValue())}}const nre=function(i,t,e){return{"pi-sort-amount-up-alt":i,"pi-sort-amount-down":t,"pi-sort-alt":e}},n4=function(i,t){return{"p-checkbox-focused":i,"p-checkbox-disabled":t}},sre=function(i,t,e){return{"p-checkbox-box p-component":!0,"p-highlight":i,"p-focus":t,"p-disabled":e}},r4=function(i){return{"pi pi-check":i}},ore=function(i,t,e){return{"p-checkbox-box":!0,"p-highlight":i,"p-focus":t,"p-disabled":e}};let Sw=(()=>{class i{constructor(){this.sortSource=new nn,this.selectionSource=new nn,this.contextMenuSource=new nn,this.valueSource=new nn,this.totalRecordsSource=new nn,this.columnsSource=new nn,this.resetSource=new nn,this.sortSource$=this.sortSource.asObservable(),this.selectionSource$=this.selectionSource.asObservable(),this.contextMenuSource$=this.contextMenuSource.asObservable(),this.valueSource$=this.valueSource.asObservable(),this.totalRecordsSource$=this.totalRecordsSource.asObservable(),this.columnsSource$=this.columnsSource.asObservable(),this.resetSource$=this.resetSource.asObservable()}onSort(e){this.sortSource.next(e)}onSelectionChange(){this.selectionSource.next(null)}onResetChange(){this.resetSource.next(null)}onContextMenu(e){this.contextMenuSource.next(e)}onValueChange(e){this.valueSource.next(e)}onTotalRecordsChange(e){this.totalRecordsSource.next(e)}onColumnsChange(e){this.columnsSource.next(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})(),b0=(()=>{class i{constructor(e,n,r,s,o,l){this.el=e,this.zone=n,this.tableService=r,this.cd=s,this.filterService=o,this.overlayService=l,this.pageLinks=5,this.alwaysShowPaginator=!0,this.paginatorPosition="bottom",this.paginatorDropdownScrollHeight="200px",this.currentPageReportTemplate="{currentPage} of {totalPages}",this.showFirstLastIcon=!0,this.showPageLinks=!0,this.defaultSortOrder=1,this.sortMode="single",this.resetPageOnSort=!0,this.selectAllChange=new qn,this.selectionChange=new qn,this.contextMenuSelectionChange=new qn,this.contextMenuSelectionMode="separate",this.rowTrackBy=(u,p)=>p,this.lazy=!1,this.lazyLoadOnInit=!0,this.compareSelectionBy="deepEquals",this.csvSeparator=",",this.exportFilename="download",this.filters={},this.filterDelay=300,this.expandedRowKeys={},this.editingRowKeys={},this.rowExpandMode="multiple",this.scrollDirection="vertical",this.virtualScrollDelay=250,this.columnResizeMode="fit",this.loadingIcon="pi pi-spinner",this.showLoader=!0,this.showInitialSortBadge=!0,this.stateStorage="session",this.editMode="cell",this.groupRowsByOrder=1,this.responsiveLayout="stack",this.breakpoint="960px",this.onRowSelect=new qn,this.onRowUnselect=new qn,this.onPage=new qn,this.onSort=new qn,this.onFilter=new qn,this.onLazyLoad=new qn,this.onRowExpand=new qn,this.onRowCollapse=new qn,this.onContextMenuSelect=new qn,this.onColResize=new qn,this.onColReorder=new qn,this.onRowReorder=new qn,this.onEditInit=new qn,this.onEditComplete=new qn,this.onEditCancel=new qn,this.onHeaderCheckboxToggle=new qn,this.sortFunction=new qn,this.firstChange=new qn,this.rowsChange=new qn,this.onStateSave=new qn,this.onStateRestore=new qn,this._virtualRowHeight=28,this._value=[],this._totalRecords=0,this._first=0,this.selectionKeys={},this._sortOrder=1,this._selectAll=null,this.columnResizing=!1,this.rowGroupHeaderStyleObject={},this.id=nw()}get virtualRowHeight(){return this._virtualRowHeight}set virtualRowHeight(e){this._virtualRowHeight=e,console.warn("The virtualRowHeight property is deprecated, use virtualScrollItemSize property instead.")}ngOnInit(){this.lazy&&this.lazyLoadOnInit&&(this.virtualScroll||this.onLazyLoad.emit(this.createLazyLoadMetadata()),this.restoringFilter&&(this.restoringFilter=!1)),"stack"===this.responsiveLayout&&!this.scrollable&&this.createResponsiveStyle(),this.initialized=!0}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"caption":this.captionTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"headergrouped":this.headerGroupedTemplate=e.template;break;case"body":this.bodyTemplate=e.template;break;case"loadingbody":this.loadingBodyTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"footergrouped":this.footerGroupedTemplate=e.template;break;case"summary":this.summaryTemplate=e.template;break;case"colgroup":this.colGroupTemplate=e.template;break;case"rowexpansion":this.expandedRowTemplate=e.template;break;case"groupheader":this.groupHeaderTemplate=e.template;break;case"rowspan":this.rowspanTemplate=e.template;break;case"groupfooter":this.groupFooterTemplate=e.template;break;case"frozenrows":this.frozenRowsTemplate=e.template;break;case"frozenheader":this.frozenHeaderTemplate=e.template;break;case"frozenbody":this.frozenBodyTemplate=e.template;break;case"frozenfooter":this.frozenFooterTemplate=e.template;break;case"frozencolgroup":this.frozenColGroupTemplate=e.template;break;case"frozenrowexpansion":this.frozenExpandedRowTemplate=e.template;break;case"emptymessage":this.emptyMessageTemplate=e.template;break;case"paginatorleft":this.paginatorLeftTemplate=e.template;break;case"paginatorright":this.paginatorRightTemplate=e.template;break;case"paginatordropdownitem":this.paginatorDropdownItemTemplate=e.template}})}ngAfterViewInit(){this.isStateful()&&this.resizableColumns&&this.restoreColumnWidths()}ngOnChanges(e){e.value&&(this.isStateful()&&!this.stateRestored&&this.restoreState(),this._value=e.value.currentValue,this.lazy||(this.totalRecords=this._value?this._value.length:0,"single"==this.sortMode&&(this.sortField||this.groupRowsBy)?this.sortSingle():"multiple"==this.sortMode&&(this.multiSortMeta||this.groupRowsBy)?this.sortMultiple():this.hasFilter()&&this._filter()),this.tableService.onValueChange(e.value.currentValue)),e.columns&&(this._columns=e.columns.currentValue,this.tableService.onColumnsChange(e.columns.currentValue),this._columns&&this.isStateful()&&this.reorderableColumns&&!this.columnOrderStateRestored&&this.restoreColumnOrder()),e.sortField&&(this._sortField=e.sortField.currentValue,(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle()),e.groupRowsBy&&(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle(),e.sortOrder&&(this._sortOrder=e.sortOrder.currentValue,(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle()),e.groupRowsByOrder&&(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle(),e.multiSortMeta&&(this._multiSortMeta=e.multiSortMeta.currentValue,"multiple"===this.sortMode&&(this.initialized||!this.lazy&&!this.virtualScroll)&&this.sortMultiple()),e.selection&&(this._selection=e.selection.currentValue,this.preventSelectionSetterPropagation||(this.updateSelectionKeys(),this.tableService.onSelectionChange()),this.preventSelectionSetterPropagation=!1),e.selectAll&&(this._selectAll=e.selectAll.currentValue,this.preventSelectionSetterPropagation||(this.updateSelectionKeys(),this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()),this.preventSelectionSetterPropagation=!1)}get value(){return this._value}set value(e){this._value=e}get columns(){return this._columns}set columns(e){this._columns=e}get first(){return this._first}set first(e){this._first=e}get rows(){return this._rows}set rows(e){this._rows=e}get totalRecords(){return this._totalRecords}set totalRecords(e){this._totalRecords=e,this.tableService.onTotalRecordsChange(this._totalRecords)}get sortField(){return this._sortField}set sortField(e){this._sortField=e}get sortOrder(){return this._sortOrder}set sortOrder(e){this._sortOrder=e}get multiSortMeta(){return this._multiSortMeta}set multiSortMeta(e){this._multiSortMeta=e}get selection(){return this._selection}set selection(e){this._selection=e}get selectAll(){return this._selection}set selectAll(e){this._selection=e}get processedData(){return this.filteredValue||this.value||[]}dataToRender(e){const n=e||this.processedData;if(n&&this.paginator){const r=this.lazy?0:this.first;return n.slice(r,r+this.rows)}return n}updateSelectionKeys(){if(this.dataKey&&this._selection)if(this.selectionKeys={},Array.isArray(this._selection))for(let e of this._selection)this.selectionKeys[String(fr.resolveFieldData(e,this.dataKey))]=1;else this.selectionKeys[String(fr.resolveFieldData(this._selection,this.dataKey))]=1}onPageChange(e){this.first=e.first,this.rows=e.rows,this.lazy&&this.onLazyLoad.emit(this.createLazyLoadMetadata()),this.onPage.emit({first:this.first,rows:this.rows}),this.firstChange.emit(this.first),this.rowsChange.emit(this.rows),this.tableService.onValueChange(this.value),this.isStateful()&&this.saveState(),this.anchorRowIndex=null,this.scrollable&&this.resetScrollTop()}sort(e){let n=e.originalEvent;if("single"===this.sortMode&&(this._sortOrder=this.sortField===e.field?-1*this.sortOrder:this.defaultSortOrder,this._sortField=e.field,this.resetPageOnSort&&(this._first=0,this.firstChange.emit(this._first),this.scrollable&&this.resetScrollTop()),this.sortSingle()),"multiple"===this.sortMode){let r=n.metaKey||n.ctrlKey,s=this.getSortMeta(e.field);s?r?s.order=-1*s.order:(this._multiSortMeta=[{field:e.field,order:-1*s.order}],this.resetPageOnSort&&(this._first=0,this.firstChange.emit(this._first),this.scrollable&&this.resetScrollTop())):((!r||!this.multiSortMeta)&&(this._multiSortMeta=[],this.resetPageOnSort&&(this._first=0,this.firstChange.emit(this._first))),this._multiSortMeta.push({field:e.field,order:this.defaultSortOrder})),this.sortMultiple()}this.isStateful()&&this.saveState(),this.anchorRowIndex=null}sortSingle(){let e=this.sortField||this.groupRowsBy,n=this.sortField?this.sortOrder:this.groupRowsByOrder;if(this.groupRowsBy&&this.sortField&&this.groupRowsBy!==this.sortField)return this._multiSortMeta=[this.getGroupRowsMeta(),{field:this.sortField,order:this.sortOrder}],void this.sortMultiple();if(e&&n){this.restoringSort&&(this.restoringSort=!1),this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.value&&(this.customSort?this.sortFunction.emit({data:this.value,mode:this.sortMode,field:e,order:n}):(this.value.sort((s,o)=>{let l=fr.resolveFieldData(s,e),u=fr.resolveFieldData(o,e),p=null;return p=null==l&&null!=u?-1:null!=l&&null==u?1:null==l&&null==u?0:"string"==typeof l&&"string"==typeof u?l.localeCompare(u):l<u?-1:l>u?1:0,n*p}),this._value=[...this.value]),this.hasFilter()&&this._filter());let r={field:e,order:n};this.onSort.emit(r),this.tableService.onSort(r)}}sortMultiple(){this.groupRowsBy&&(this._multiSortMeta?this.multiSortMeta[0].field!==this.groupRowsBy&&(this._multiSortMeta=[this.getGroupRowsMeta(),...this._multiSortMeta]):this._multiSortMeta=[this.getGroupRowsMeta()]),this.multiSortMeta&&(this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.value&&(this.customSort?this.sortFunction.emit({data:this.value,mode:this.sortMode,multiSortMeta:this.multiSortMeta}):(this.value.sort((e,n)=>this.multisortField(e,n,this.multiSortMeta,0)),this._value=[...this.value]),this.hasFilter()&&this._filter()),this.onSort.emit({multisortmeta:this.multiSortMeta}),this.tableService.onSort(this.multiSortMeta))}multisortField(e,n,r,s){let o=fr.resolveFieldData(e,r[s].field),l=fr.resolveFieldData(n,r[s].field),u=null;if(null==o&&null!=l)u=-1;else if(null!=o&&null==l)u=1;else if(null==o&&null==l)u=0;else if("string"==typeof o||o instanceof String){if(o.localeCompare&&o!=l)return r[s].order*o.localeCompare(l)}else u=o<l?-1:1;return o==l?r.length-1>s?this.multisortField(e,n,r,s+1):0:r[s].order*u}getSortMeta(e){if(this.multiSortMeta&&this.multiSortMeta.length)for(let n=0;n<this.multiSortMeta.length;n++)if(this.multiSortMeta[n].field===e)return this.multiSortMeta[n];return null}isSorted(e){if("single"===this.sortMode)return this.sortField&&this.sortField===e;if("multiple"===this.sortMode){let n=!1;if(this.multiSortMeta)for(let r=0;r<this.multiSortMeta.length;r++)if(this.multiSortMeta[r].field==e){n=!0;break}return n}}handleRowClick(e){let n=e.originalEvent.target,r=n.nodeName,s=n.parentElement&&n.parentElement.nodeName;if("INPUT"!=r&&"BUTTON"!=r&&"A"!=r&&"INPUT"!=s&&"BUTTON"!=s&&"A"!=s&&!Kt.hasClass(e.originalEvent.target,"p-clickable")){if(this.selectionMode){let o=e.rowData,l=e.rowIndex;if(this.preventSelectionSetterPropagation=!0,this.isMultipleSelectionMode()&&e.originalEvent.shiftKey&&null!=this.anchorRowIndex)Kt.clearSelection(),null!=this.rangeRowIndex&&this.clearSelectionRange(e.originalEvent),this.rangeRowIndex=l,this.selectRange(e.originalEvent,l);else{let u=this.isSelected(o);if(!u&&!this.isRowSelectable(o,l))return;let p=!this.rowTouched&&this.metaKeySelection,v=this.dataKey?String(fr.resolveFieldData(o,this.dataKey)):null;if(this.anchorRowIndex=l,this.rangeRowIndex=l,p){let x=e.originalEvent.metaKey||e.originalEvent.ctrlKey;if(u&&x){if(this.isSingleSelectionMode())this._selection=null,this.selectionKeys={},this.selectionChange.emit(null);else{let I=this.findIndexInSelection(o);this._selection=this.selection.filter((T,F)=>F!=I),this.selectionChange.emit(this.selection),v&&delete this.selectionKeys[v]}this.onRowUnselect.emit({originalEvent:e.originalEvent,data:o,type:"row"})}else this.isSingleSelectionMode()?(this._selection=o,this.selectionChange.emit(o),v&&(this.selectionKeys={},this.selectionKeys[v]=1)):this.isMultipleSelectionMode()&&(x?this._selection=this.selection||[]:(this._selection=[],this.selectionKeys={}),this._selection=[...this.selection,o],this.selectionChange.emit(this.selection),v&&(this.selectionKeys[v]=1)),this.onRowSelect.emit({originalEvent:e.originalEvent,data:o,type:"row",index:l})}else if("single"===this.selectionMode)u?(this._selection=null,this.selectionKeys={},this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,data:o,type:"row",index:l})):(this._selection=o,this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,data:o,type:"row",index:l}),v&&(this.selectionKeys={},this.selectionKeys[v]=1));else if("multiple"===this.selectionMode)if(u){let x=this.findIndexInSelection(o);this._selection=this.selection.filter((I,T)=>T!=x),this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,data:o,type:"row",index:l}),v&&delete this.selectionKeys[v]}else this._selection=this.selection?[...this.selection,o]:[o],this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,data:o,type:"row",index:l}),v&&(this.selectionKeys[v]=1)}this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()}this.rowTouched=!1}}handleRowTouchEnd(e){this.rowTouched=!0}handleRowRightClick(e){if(this.contextMenu){const n=e.rowData,r=e.rowIndex;if("separate"===this.contextMenuSelectionMode)this.contextMenuSelection=n,this.contextMenuSelectionChange.emit(n),this.onContextMenuSelect.emit({originalEvent:e.originalEvent,data:n,index:e.rowIndex}),this.contextMenu.show(e.originalEvent),this.tableService.onContextMenu(n);else if("joint"===this.contextMenuSelectionMode){this.preventSelectionSetterPropagation=!0;let s=this.isSelected(n),o=this.dataKey?String(fr.resolveFieldData(n,this.dataKey)):null;if(!s){if(!this.isRowSelectable(n,r))return;this.isSingleSelectionMode()?(this.selection=n,this.selectionChange.emit(n),o&&(this.selectionKeys={},this.selectionKeys[o]=1)):this.isMultipleSelectionMode()&&(this._selection=this.selection?[...this.selection,n]:[n],this.selectionChange.emit(this.selection),o&&(this.selectionKeys[o]=1))}this.tableService.onSelectionChange(),this.contextMenu.show(e.originalEvent),this.onContextMenuSelect.emit({originalEvent:e,data:n,index:e.rowIndex})}}}selectRange(e,n){let r,s;this.anchorRowIndex>n?(r=n,s=this.anchorRowIndex):this.anchorRowIndex<n?(r=this.anchorRowIndex,s=n):(r=n,s=n),this.lazy&&this.paginator&&(r-=this.first,s-=this.first);let o=[];for(let l=r;l<=s;l++){let u=this.filteredValue?this.filteredValue[l]:this.value[l];if(!this.isSelected(u)){if(!this.isRowSelectable(u,n))continue;o.push(u),this._selection=[...this.selection,u];let p=this.dataKey?String(fr.resolveFieldData(u,this.dataKey)):null;p&&(this.selectionKeys[p]=1)}}this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e,data:o,type:"row"})}clearSelectionRange(e){let n,r;this.rangeRowIndex>this.anchorRowIndex?(n=this.anchorRowIndex,r=this.rangeRowIndex):this.rangeRowIndex<this.anchorRowIndex?(n=this.rangeRowIndex,r=this.anchorRowIndex):(n=this.rangeRowIndex,r=this.rangeRowIndex);for(let s=n;s<=r;s++){let o=this.value[s],l=this.findIndexInSelection(o);this._selection=this.selection.filter((p,v)=>v!=l);let u=this.dataKey?String(fr.resolveFieldData(o,this.dataKey)):null;u&&delete this.selectionKeys[u],this.onRowUnselect.emit({originalEvent:e,data:o,type:"row"})}}isSelected(e){return!(!e||!this.selection)&&(this.dataKey?void 0!==this.selectionKeys[fr.resolveFieldData(e,this.dataKey)]:this.selection instanceof Array?this.findIndexInSelection(e)>-1:this.equals(e,this.selection))}findIndexInSelection(e){let n=-1;if(this.selection&&this.selection.length)for(let r=0;r<this.selection.length;r++)if(this.equals(e,this.selection[r])){n=r;break}return n}isRowSelectable(e,n){return!(this.rowSelectable&&!this.rowSelectable({data:e,index:n}))}toggleRowWithRadio(e,n){if(this.preventSelectionSetterPropagation=!0,this.selection!=n){if(!this.isRowSelectable(n,e.rowIndex))return;this._selection=n,this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:n,type:"radiobutton"}),this.dataKey&&(this.selectionKeys={},this.selectionKeys[String(fr.resolveFieldData(n,this.dataKey))]=1)}else this._selection=null,this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:n,type:"radiobutton"});this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()}toggleRowWithCheckbox(e,n){this.selection=this.selection||[];let r=this.isSelected(n),s=this.dataKey?String(fr.resolveFieldData(n,this.dataKey)):null;if(this.preventSelectionSetterPropagation=!0,r){let o=this.findIndexInSelection(n);this._selection=this.selection.filter((l,u)=>u!=o),this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:n,type:"checkbox"}),s&&delete this.selectionKeys[s]}else{if(!this.isRowSelectable(n,e.rowIndex))return;this._selection=this.selection?[...this.selection,n]:[n],this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:n,type:"checkbox"}),s&&(this.selectionKeys[s]=1)}this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()}toggleRowsWithCheckbox(e,n){if(null!==this._selectAll)this.selectAllChange.emit({originalEvent:e,checked:n});else{const r=this.selectionPageOnly?this.dataToRender(this.processedData):this.processedData;let s=this.selectionPageOnly&&this._selection?this._selection.filter(o=>!r.some(l=>this.equals(o,l))):[];n&&(s=this.frozenValue?[...s,...this.frozenValue,...r]:[...s,...r],s=this.rowSelectable?s.filter((o,l)=>this.rowSelectable({data:o,index:l})):s),this._selection=s,this.preventSelectionSetterPropagation=!0,this.updateSelectionKeys(),this.selectionChange.emit(this._selection),this.tableService.onSelectionChange(),this.onHeaderCheckboxToggle.emit({originalEvent:e,checked:n}),this.isStateful()&&this.saveState()}}equals(e,n){return"equals"===this.compareSelectionBy?e===n:fr.equals(e,n,this.dataKey)}filter(e,n,r){this.filterTimeout&&clearTimeout(this.filterTimeout),this.isFilterBlank(e)?this.filters[n]&&delete this.filters[n]:this.filters[n]={value:e,matchMode:r},this.filterTimeout=setTimeout(()=>{this._filter(),this.filterTimeout=null},this.filterDelay),this.anchorRowIndex=null}filterGlobal(e,n){this.filter(e,"global",n)}isFilterBlank(e){return null==e||"string"==typeof e&&0==e.trim().length||e instanceof Array&&0==e.length}_filter(){if(this.restoringFilter||(this.first=0,this.firstChange.emit(this.first)),this.lazy)this.onLazyLoad.emit(this.createLazyLoadMetadata());else{if(!this.value)return;if(this.hasFilter()){let e;if(this.filters.global){if(!this.columns&&!this.globalFilterFields)throw new Error("Global filtering requires dynamic columns or globalFilterFields to be defined.");e=this.globalFilterFields||this.columns}this.filteredValue=[];for(let n=0;n<this.value.length;n++){let l,r=!0,s=!1,o=!1;for(let u in this.filters)if(this.filters.hasOwnProperty(u)&&"global"!==u){o=!0;let p=u,v=this.filters[p];if(Array.isArray(v)){for(let x of v)if(r=this.executeLocalFilter(p,this.value[n],x),x.operator===kB.OR&&r||x.operator===kB.AND&&!r)break}else r=this.executeLocalFilter(p,this.value[n],v);if(!r)break}if(this.filters.global&&!s&&e)for(let u=0;u<e.length&&(s=this.filterService.filters[this.filters.global.matchMode](fr.resolveFieldData(this.value[n],e[u].field||e[u]),this.filters.global.value,this.filterLocale),!s);u++);l=this.filters.global?o?o&&r&&s:s:o&&r,l&&this.filteredValue.push(this.value[n])}this.filteredValue.length===this.value.length&&(this.filteredValue=null),this.paginator&&(this.totalRecords=this.filteredValue?this.filteredValue.length:this.value?this.value.length:0)}else this.filteredValue=null,this.paginator&&(this.totalRecords=this.value?this.value.length:0)}this.onFilter.emit({filters:this.filters,filteredValue:this.filteredValue||this.value}),this.tableService.onValueChange(this.value),this.isStateful()&&!this.restoringFilter&&this.saveState(),this.restoringFilter&&(this.restoringFilter=!1),this.cd.markForCheck(),this.scrollable&&this.resetScrollTop()}executeLocalFilter(e,n,r){let s=r.value,o=r.matchMode||Qd.STARTS_WITH,l=fr.resolveFieldData(n,e);return(0,this.filterService.filters[o])(l,s,this.filterLocale)}hasFilter(){let e=!0;for(let n in this.filters)if(this.filters.hasOwnProperty(n)){e=!1;break}return!e}createLazyLoadMetadata(){return{first:this.first,rows:this.rows,sortField:this.sortField,sortOrder:this.sortOrder,filters:this.filters,globalFilter:this.filters&&this.filters.global?this.filters.global.value:null,multiSortMeta:this.multiSortMeta,forceUpdate:()=>this.cd.detectChanges()}}clear(){this._sortField=null,this._sortOrder=this.defaultSortOrder,this._multiSortMeta=null,this.tableService.onSort(null),this.filters.global&&(this.filters.global.value=null),this.filteredValue=null,this.tableService.onResetChange(),this.first=0,this.firstChange.emit(this.first),this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.totalRecords=this._value?this._value.length:0}reset(){this.clear()}getExportHeader(e){return e[this.exportHeader]||e.header||e.field}exportCSV(e){let n,r="",s=this.columns;e&&e.selectionOnly?n=this.selection||[]:(n=this.filteredValue||this.value,this.frozenValue&&(n=n?[...this.frozenValue,...n]:this.frozenValue));for(let u=0;u<s.length;u++){let p=s[u];!1!==p.exportable&&p.field&&(r+='"'+this.getExportHeader(p)+'"',u<s.length-1&&(r+=this.csvSeparator))}n.forEach((u,p)=>{r+="\n";for(let v=0;v<s.length;v++){let x=s[v];if(!1!==x.exportable&&x.field){let I=fr.resolveFieldData(u,x.field);I=null!=I?this.exportFunction?this.exportFunction({data:I,field:x.field}):String(I).replace(/"/g,'""'):"",r+='"'+I+'"',v<s.length-1&&(r+=this.csvSeparator)}}});let o=new Blob([r],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a");l.style.display="none",document.body.appendChild(l),void 0!==l.download?(l.setAttribute("href",URL.createObjectURL(o)),l.setAttribute("download",this.exportFilename+".csv"),l.click()):(r="data:text/csv;charset=utf-8,"+r,window.open(encodeURI(r))),document.body.removeChild(l)}onLazyItemLoad(e){this.onLazyLoad.emit({...this.createLazyLoadMetadata(),...e,rows:e.last-e.first})}resetScrollTop(){this.virtualScroll?this.scrollToVirtualIndex(0):this.scrollTo({top:0})}scrollToVirtualIndex(e){this.virtualScroll&&this.scroller.scrollToIndex(e)}scrollTo(e){this.virtualScroll?this.scroller.scrollTo(e):this.wrapperViewChild&&this.wrapperViewChild.nativeElement&&(this.wrapperViewChild.nativeElement.scrollTo?this.wrapperViewChild.nativeElement.scrollTo(e):(this.wrapperViewChild.nativeElement.scrollLeft=e.left,this.wrapperViewChild.nativeElement.scrollTop=e.top))}updateEditingCell(e,n,r,s){this.editingCell=e,this.editingCellData=n,this.editingCellField=r,this.editingCellRowIndex=s,this.bindDocumentEditListener()}isEditingCellValid(){return this.editingCell&&0===Kt.find(this.editingCell,".ng-invalid.ng-dirty").length}bindDocumentEditListener(){this.documentEditListener||(this.documentEditListener=e=>{this.editingCell&&!this.selfClick&&this.isEditingCellValid()&&(Kt.removeClass(this.editingCell,"p-cell-editing"),this.editingCell=null,this.onEditComplete.emit({field:this.editingCellField,data:this.editingCellData,originalEvent:e,index:this.editingCellRowIndex}),this.editingCellField=null,this.editingCellData=null,this.editingCellRowIndex=null,this.unbindDocumentEditListener(),this.cd.markForCheck(),this.overlaySubscription&&this.overlaySubscription.unsubscribe()),this.selfClick=!1},document.addEventListener("click",this.documentEditListener))}unbindDocumentEditListener(){this.documentEditListener&&(document.removeEventListener("click",this.documentEditListener),this.documentEditListener=null)}initRowEdit(e){let n=String(fr.resolveFieldData(e,this.dataKey));this.editingRowKeys[n]=!0}saveRowEdit(e,n){if(0===Kt.find(n,".ng-invalid.ng-dirty").length){let r=String(fr.resolveFieldData(e,this.dataKey));delete this.editingRowKeys[r]}}cancelRowEdit(e){let n=String(fr.resolveFieldData(e,this.dataKey));delete this.editingRowKeys[n]}toggleRow(e,n){if(!this.dataKey)throw new Error("dataKey must be defined to use row expansion");let r=String(fr.resolveFieldData(e,this.dataKey));null!=this.expandedRowKeys[r]?(delete this.expandedRowKeys[r],this.onRowCollapse.emit({originalEvent:n,data:e})):("single"===this.rowExpandMode&&(this.expandedRowKeys={}),this.expandedRowKeys[r]=!0,this.onRowExpand.emit({originalEvent:n,data:e})),n&&n.preventDefault(),this.isStateful()&&this.saveState()}isRowExpanded(e){return!0===this.expandedRowKeys[String(fr.resolveFieldData(e,this.dataKey))]}isRowEditing(e){return!0===this.editingRowKeys[String(fr.resolveFieldData(e,this.dataKey))]}isSingleSelectionMode(){return"single"===this.selectionMode}isMultipleSelectionMode(){return"multiple"===this.selectionMode}onColumnResizeBegin(e){let n=Kt.getOffset(this.containerViewChild.nativeElement).left;this.resizeColumnElement=e.target.parentElement,this.columnResizing=!0,this.lastResizerHelperX=e.pageX-n+this.containerViewChild.nativeElement.scrollLeft,this.onColumnResize(e),e.preventDefault()}onColumnResize(e){let n=Kt.getOffset(this.containerViewChild.nativeElement).left;Kt.addClass(this.containerViewChild.nativeElement,"p-unselectable-text"),this.resizeHelperViewChild.nativeElement.style.height=this.containerViewChild.nativeElement.offsetHeight+"px",this.resizeHelperViewChild.nativeElement.style.top="0px",this.resizeHelperViewChild.nativeElement.style.left=e.pageX-n+this.containerViewChild.nativeElement.scrollLeft+"px",this.resizeHelperViewChild.nativeElement.style.display="block"}onColumnResizeEnd(){let e=this.resizeHelperViewChild.nativeElement.offsetLeft-this.lastResizerHelperX,r=this.resizeColumnElement.offsetWidth+e;if(r>=(this.resizeColumnElement.style.minWidth||15)){if("fit"===this.columnResizeMode){let l=this.resizeColumnElement.nextElementSibling.offsetWidth-e;r>15&&l>15&&this.resizeTableCells(r,l)}else"expand"===this.columnResizeMode&&(this.setResizeTableWidth(this.tableViewChild.nativeElement.offsetWidth+e+"px"),this.resizeTableCells(r,null));this.onColResize.emit({element:this.resizeColumnElement,delta:e}),this.isStateful()&&this.saveState()}this.resizeHelperViewChild.nativeElement.style.display="none",Kt.removeClass(this.containerViewChild.nativeElement,"p-unselectable-text")}resizeTableCells(e,n){let r=Kt.index(this.resizeColumnElement),s=[];const o=Kt.findSingle(this.containerViewChild.nativeElement,".p-datatable-thead");Kt.find(o,"tr > th").forEach(p=>s.push(Kt.getOuterWidth(p))),this.destroyStyleElement(),this.createStyleElement();let u="";s.forEach((p,v)=>{let x=v===r?e:n&&v===r+1?n:p;u+=`\n                #${this.id} .p-datatable-thead > tr > th:nth-child(${v+1}),\n                #${this.id} .p-datatable-tbody > tr > td:nth-child(${v+1}),\n                #${this.id} .p-datatable-tfoot > tr > td:nth-child(${v+1}) {\n                    ${this.scrollable?`flex: 1 1 ${x}px !important`:`width: ${x}px !important`}\n                }\n            `}),this.styleElement.innerHTML=u}onColumnDragStart(e,n){this.reorderIconWidth=Kt.getHiddenElementOuterWidth(this.reorderIndicatorUpViewChild.nativeElement),this.reorderIconHeight=Kt.getHiddenElementOuterHeight(this.reorderIndicatorDownViewChild.nativeElement),this.draggedColumn=n,e.dataTransfer.setData("text","b")}onColumnDragEnter(e,n){if(this.reorderableColumns&&this.draggedColumn&&n){e.preventDefault();let r=Kt.getOffset(this.containerViewChild.nativeElement),s=Kt.getOffset(n);if(this.draggedColumn!=n){let o=Kt.indexWithinGroup(this.draggedColumn,"preorderablecolumn"),l=Kt.indexWithinGroup(n,"preorderablecolumn"),u=s.left-r.left,v=s.left+n.offsetWidth/2;this.reorderIndicatorUpViewChild.nativeElement.style.top=s.top-r.top-(this.reorderIconHeight-1)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.top=s.top-r.top+n.offsetHeight+"px",e.pageX>v?(this.reorderIndicatorUpViewChild.nativeElement.style.left=u+n.offsetWidth-Math.ceil(this.reorderIconWidth/2)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.left=u+n.offsetWidth-Math.ceil(this.reorderIconWidth/2)+"px",this.dropPosition=1):(this.reorderIndicatorUpViewChild.nativeElement.style.left=u-Math.ceil(this.reorderIconWidth/2)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.left=u-Math.ceil(this.reorderIconWidth/2)+"px",this.dropPosition=-1),l-o==1&&-1===this.dropPosition||l-o==-1&&1===this.dropPosition?(this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none"):(this.reorderIndicatorUpViewChild.nativeElement.style.display="block",this.reorderIndicatorDownViewChild.nativeElement.style.display="block")}else e.dataTransfer.dropEffect="none"}}onColumnDragLeave(e){this.reorderableColumns&&this.draggedColumn&&(e.preventDefault(),this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none")}onColumnDrop(e,n){if(e.preventDefault(),this.draggedColumn){let r=Kt.indexWithinGroup(this.draggedColumn,"preorderablecolumn"),s=Kt.indexWithinGroup(n,"preorderablecolumn"),o=r!=s;o&&(s-r==1&&-1===this.dropPosition||r-s==1&&1===this.dropPosition)&&(o=!1),o&&s<r&&1===this.dropPosition&&(s+=1),o&&s>r&&-1===this.dropPosition&&(s-=1),o&&(fr.reorderArray(this.columns,r,s),this.onColReorder.emit({dragIndex:r,dropIndex:s,columns:this.columns}),this.isStateful()&&this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.saveState()})})),this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none",this.draggedColumn.draggable=!1,this.draggedColumn=null,this.dropPosition=null}}onRowDragStart(e,n){this.rowDragging=!0,this.draggedRowIndex=n,e.dataTransfer.setData("text","b")}onRowDragOver(e,n,r){if(this.rowDragging&&this.draggedRowIndex!==n){let s=Kt.getOffset(r).top+Kt.getWindowScrollTop(),o=e.pageY,l=s+Kt.getOuterHeight(r)/2,u=r.previousElementSibling;o<l?(Kt.removeClass(r,"p-datatable-dragpoint-bottom"),this.droppedRowIndex=n,u?Kt.addClass(u,"p-datatable-dragpoint-bottom"):Kt.addClass(r,"p-datatable-dragpoint-top")):(u?Kt.removeClass(u,"p-datatable-dragpoint-bottom"):Kt.addClass(r,"p-datatable-dragpoint-top"),this.droppedRowIndex=n+1,Kt.addClass(r,"p-datatable-dragpoint-bottom"))}}onRowDragLeave(e,n){let r=n.previousElementSibling;r&&Kt.removeClass(r,"p-datatable-dragpoint-bottom"),Kt.removeClass(n,"p-datatable-dragpoint-bottom"),Kt.removeClass(n,"p-datatable-dragpoint-top")}onRowDragEnd(e){this.rowDragging=!1,this.draggedRowIndex=null,this.droppedRowIndex=null}onRowDrop(e,n){if(null!=this.droppedRowIndex){let r=this.draggedRowIndex>this.droppedRowIndex?this.droppedRowIndex:0===this.droppedRowIndex?0:this.droppedRowIndex-1;fr.reorderArray(this.value,this.draggedRowIndex,r),this.virtualScroll&&(this._value=[...this._value]),this.onRowReorder.emit({dragIndex:this.draggedRowIndex,dropIndex:r})}this.onRowDragLeave(e,n),this.onRowDragEnd(e)}isEmpty(){let e=this.filteredValue||this.value;return null==e||0==e.length}getBlockableElement(){return this.el.nativeElement.children[0]}getStorage(){switch(this.stateStorage){case"local":return window.localStorage;case"session":return window.sessionStorage;default:throw new Error(this.stateStorage+' is not a valid value for the state storage, supported values are "local" and "session".')}}isStateful(){return null!=this.stateKey}saveState(){const e=this.getStorage();let n={};this.paginator&&(n.first=this.first,n.rows=this.rows),this.sortField&&(n.sortField=this.sortField,n.sortOrder=this.sortOrder),this.multiSortMeta&&(n.multiSortMeta=this.multiSortMeta),this.hasFilter()&&(n.filters=this.filters),this.resizableColumns&&this.saveColumnWidths(n),this.reorderableColumns&&this.saveColumnOrder(n),this.selection&&(n.selection=this.selection),Object.keys(this.expandedRowKeys).length&&(n.expandedRowKeys=this.expandedRowKeys),e.setItem(this.stateKey,JSON.stringify(n)),this.onStateSave.emit(n)}clearState(){const e=this.getStorage();this.stateKey&&e.removeItem(this.stateKey)}restoreState(){const n=this.getStorage().getItem(this.stateKey),r=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/;if(n){let o=JSON.parse(n,function(o,l){return"string"==typeof l&&r.test(l)?new Date(l):l});this.paginator&&(void 0!==this.first&&(this.first=o.first,this.firstChange.emit(this.first)),void 0!==this.rows&&(this.rows=o.rows,this.rowsChange.emit(this.rows))),o.sortField&&(this.restoringSort=!0,this._sortField=o.sortField,this._sortOrder=o.sortOrder),o.multiSortMeta&&(this.restoringSort=!0,this._multiSortMeta=o.multiSortMeta),o.filters&&(this.restoringFilter=!0,this.filters=o.filters),this.resizableColumns&&(this.columnWidthsState=o.columnWidths,this.tableWidthState=o.tableWidth),o.expandedRowKeys&&(this.expandedRowKeys=o.expandedRowKeys),o.selection&&Promise.resolve(null).then(()=>this.selectionChange.emit(o.selection)),this.stateRestored=!0,this.onStateRestore.emit(o)}}saveColumnWidths(e){let n=[];Kt.find(this.containerViewChild.nativeElement,".p-datatable-thead > tr > th").forEach(s=>n.push(Kt.getOuterWidth(s))),e.columnWidths=n.join(","),"expand"===this.columnResizeMode&&(e.tableWidth=Kt.getOuterWidth(this.tableViewChild.nativeElement)+"px")}setResizeTableWidth(e){if(this.virtualScroll){const n=Kt.findSingle(this.containerViewChild.nativeElement,".p-scroller > table > tbody");n.style.width=e,n.style.minWidth=e}this.tableViewChild.nativeElement.style.width=e,this.tableViewChild.nativeElement.style.minWidth=e}restoreColumnWidths(){if(this.columnWidthsState){let e=this.columnWidthsState.split(",");if("expand"===this.columnResizeMode&&this.tableWidthState&&this.setResizeTableWidth(this.tableWidthState+"px"),fr.isNotEmpty(e)){this.createStyleElement();let n="";e.forEach((r,s)=>{n+=`\n                        #${this.id} .p-datatable-thead > tr > th:nth-child(${s+1}),\n                        #${this.id} .p-datatable-tbody > tr > td:nth-child(${s+1}),\n                        #${this.id} .p-datatable-tfoot > tr > td:nth-child(${s+1}) {\n                            ${this.scrollable?`flex: 1 1 ${r}px !important`:`width: ${r}px !important`}\n                        }\n                    `}),this.styleElement.innerHTML=n}}}saveColumnOrder(e){if(this.columns){let n=[];this.columns.map(r=>{n.push(r.field||r.key)}),e.columnOrder=n}}restoreColumnOrder(){const n=this.getStorage().getItem(this.stateKey);if(n){let s=JSON.parse(n).columnOrder;if(s){let o=[];s.map(l=>{let u=this.findColumnByKey(l);u&&o.push(u)}),this.columnOrderStateRestored=!0,this.columns=o}}}findColumnByKey(e){if(!this.columns)return null;for(let n of this.columns)if(n.key===e||n.field===e)return n}createStyleElement(){this.styleElement=document.createElement("style"),this.styleElement.type="text/css",document.head.appendChild(this.styleElement)}getGroupRowsMeta(){return{field:this.groupRowsBy,order:this.groupRowsByOrder}}createResponsiveStyle(){this.responsiveStyleElement||(this.responsiveStyleElement=document.createElement("style"),this.responsiveStyleElement.type="text/css",document.head.appendChild(this.responsiveStyleElement),this.responsiveStyleElement.innerHTML=`\n@media screen and (max-width: ${this.breakpoint}) {\n    #${this.id} .p-datatable-thead > tr > th,\n    #${this.id} .p-datatable-tfoot > tr > td {\n        display: none !important;\n    }\n\n    #${this.id} .p-datatable-tbody > tr > td {\n        display: flex;\n        width: 100% !important;\n        align-items: center;\n        justify-content: space-between;\n    }\n\n    #${this.id} .p-datatable-tbody > tr > td:not(:last-child) {\n        border: 0 none;\n    }\n\n    #${this.id}.p-datatable-gridlines .p-datatable-tbody > tr > td:last-child {\n        border-top: 0;\n        border-right: 0;\n        border-left: 0;\n    }\n\n    #${this.id} .p-datatable-tbody > tr > td > .p-column-title {\n        display: block;\n    }\n}\n`)}destroyResponsiveStyle(){this.responsiveStyleElement&&(document.head.removeChild(this.responsiveStyleElement),this.responsiveStyleElement=null)}destroyStyleElement(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}ngOnDestroy(){this.unbindDocumentEditListener(),this.editingCell=null,this.initialized=null,this.destroyStyleElement(),this.destroyResponsiveStyle()}}return i.\u0275fac=function(e){return new(e||i)(Zt(Xn),Zt(Ko),Zt(Sw),Zt(Zo),Zt(v1),Zt(iw))},i.\u0275cmp=Ir({type:i,selectors:[["p-table"]],contentQueries:function(e,n,r){if(1&e&&cl(r,_l,4),2&e){let s;vr(s=yr())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(vs(Hne,5),vs(Gne,5),vs(Wne,5),vs(jne,5),vs($ne,5),vs(qne,5),vs(Xne,5),vs(Yne,5)),2&e){let r;vr(r=yr())&&(n.containerViewChild=r.first),vr(r=yr())&&(n.resizeHelperViewChild=r.first),vr(r=yr())&&(n.reorderIndicatorUpViewChild=r.first),vr(r=yr())&&(n.reorderIndicatorDownViewChild=r.first),vr(r=yr())&&(n.wrapperViewChild=r.first),vr(r=yr())&&(n.tableViewChild=r.first),vr(r=yr())&&(n.tableHeaderViewChild=r.first),vr(r=yr())&&(n.scroller=r.first)}},hostAttrs:[1,"p-element"],inputs:{frozenColumns:"frozenColumns",frozenValue:"frozenValue",style:"style",styleClass:"styleClass",tableStyle:"tableStyle",tableStyleClass:"tableStyleClass",paginator:"paginator",pageLinks:"pageLinks",rowsPerPageOptions:"rowsPerPageOptions",alwaysShowPaginator:"alwaysShowPaginator",paginatorPosition:"paginatorPosition",paginatorDropdownAppendTo:"paginatorDropdownAppendTo",paginatorDropdownScrollHeight:"paginatorDropdownScrollHeight",currentPageReportTemplate:"currentPageReportTemplate",showCurrentPageReport:"showCurrentPageReport",showJumpToPageDropdown:"showJumpToPageDropdown",showJumpToPageInput:"showJumpToPageInput",showFirstLastIcon:"showFirstLastIcon",showPageLinks:"showPageLinks",defaultSortOrder:"defaultSortOrder",sortMode:"sortMode",resetPageOnSort:"resetPageOnSort",selectionMode:"selectionMode",selectionPageOnly:"selectionPageOnly",contextMenuSelection:"contextMenuSelection",contextMenuSelectionMode:"contextMenuSelectionMode",dataKey:"dataKey",metaKeySelection:"metaKeySelection",rowSelectable:"rowSelectable",rowTrackBy:"rowTrackBy",lazy:"lazy",lazyLoadOnInit:"lazyLoadOnInit",compareSelectionBy:"compareSelectionBy",csvSeparator:"csvSeparator",exportFilename:"exportFilename",filters:"filters",globalFilterFields:"globalFilterFields",filterDelay:"filterDelay",filterLocale:"filterLocale",expandedRowKeys:"expandedRowKeys",editingRowKeys:"editingRowKeys",rowExpandMode:"rowExpandMode",scrollable:"scrollable",scrollDirection:"scrollDirection",rowGroupMode:"rowGroupMode",scrollHeight:"scrollHeight",virtualScroll:"virtualScroll",virtualScrollItemSize:"virtualScrollItemSize",virtualScrollOptions:"virtualScrollOptions",virtualScrollDelay:"virtualScrollDelay",frozenWidth:"frozenWidth",responsive:"responsive",contextMenu:"contextMenu",resizableColumns:"resizableColumns",columnResizeMode:"columnResizeMode",reorderableColumns:"reorderableColumns",loading:"loading",loadingIcon:"loadingIcon",showLoader:"showLoader",rowHover:"rowHover",customSort:"customSort",showInitialSortBadge:"showInitialSortBadge",autoLayout:"autoLayout",exportFunction:"exportFunction",exportHeader:"exportHeader",stateKey:"stateKey",stateStorage:"stateStorage",editMode:"editMode",groupRowsBy:"groupRowsBy",groupRowsByOrder:"groupRowsByOrder",responsiveLayout:"responsiveLayout",breakpoint:"breakpoint",virtualRowHeight:"virtualRowHeight",value:"value",columns:"columns",first:"first",rows:"rows",totalRecords:"totalRecords",sortField:"sortField",sortOrder:"sortOrder",multiSortMeta:"multiSortMeta",selection:"selection",selectAll:"selectAll"},outputs:{selectAllChange:"selectAllChange",selectionChange:"selectionChange",contextMenuSelectionChange:"contextMenuSelectionChange",onRowSelect:"onRowSelect",onRowUnselect:"onRowUnselect",onPage:"onPage",onSort:"onSort",onFilter:"onFilter",onLazyLoad:"onLazyLoad",onRowExpand:"onRowExpand",onRowCollapse:"onRowCollapse",onContextMenuSelect:"onContextMenuSelect",onColResize:"onColResize",onColReorder:"onColReorder",onRowReorder:"onRowReorder",onEditInit:"onEditInit",onEditComplete:"onEditComplete",onEditCancel:"onEditCancel",onHeaderCheckboxToggle:"onHeaderCheckboxToggle",sortFunction:"sortFunction",firstChange:"firstChange",rowsChange:"rowsChange",onStateSave:"onStateSave",onStateRestore:"onStateRestore"},features:[To([Sw]),_a],decls:16,vars:33,consts:[[3,"ngStyle","ngClass"],["container",""],["class","p-datatable-loading-overlay p-component-overlay",4,"ngIf"],["class","p-datatable-header",4,"ngIf"],["styleClass","p-paginator-top",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showJumpToPageInput","showPageLinks","onPageChange",4,"ngIf"],[1,"p-datatable-wrapper",3,"ngStyle"],["wrapper",""],[3,"items","columns","style","scrollHeight","itemSize","delay","lazy","loaderDisabled","showSpacer","showLoader","options","onLazyLoad",4,"ngIf"],[4,"ngIf"],["buildInTable",""],["styleClass","p-paginator-bottom",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showJumpToPageInput","showPageLinks","onPageChange",4,"ngIf"],["class","p-datatable-footer",4,"ngIf"],["class","p-column-resizer-helper","style","display:none",4,"ngIf"],["class","pi pi-arrow-down p-datatable-reorder-indicator-up","style","display:none",4,"ngIf"],["class","pi pi-arrow-up p-datatable-reorder-indicator-down","style","display:none",4,"ngIf"],[1,"p-datatable-loading-overlay","p-component-overlay"],[1,"p-datatable-header"],[4,"ngTemplateOutlet"],["styleClass","p-paginator-top",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showJumpToPageInput","showPageLinks","onPageChange"],[3,"items","columns","scrollHeight","itemSize","delay","lazy","loaderDisabled","showSpacer","showLoader","options","onLazyLoad"],["scroller",""],["pTemplate","content"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["role","table",1,"p-datatable-table",3,"ngClass","ngStyle"],["table",""],[1,"p-datatable-thead"],["class","p-datatable-tbody p-datatable-frozen-tbody",3,"value","frozenRows","pTableBody","pTableBodyTemplate","frozen",4,"ngIf"],[1,"p-datatable-tbody",3,"ngClass","value","pTableBody","pTableBodyTemplate","scrollerOptions"],["class","p-datatable-tfoot",4,"ngIf"],[1,"p-datatable-tbody","p-datatable-frozen-tbody",3,"value","frozenRows","pTableBody","pTableBodyTemplate","frozen"],[1,"p-datatable-tfoot"],["styleClass","p-paginator-bottom",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showJumpToPageInput","showPageLinks","onPageChange"],[1,"p-datatable-footer"],[1,"p-column-resizer-helper",2,"display","none"],["resizeHelper",""],[1,"pi","pi-arrow-down","p-datatable-reorder-indicator-up",2,"display","none"],["reorderIndicatorUp",""],[1,"pi","pi-arrow-up","p-datatable-reorder-indicator-down",2,"display","none"],["reorderIndicatorDown",""]],template:function(e,n){1&e&&(lt(0,"div",0,1),Ze(2,Kne,2,2,"div",2),Ze(3,Qne,2,1,"div",3),Ze(4,Jne,1,17,"p-paginator",4),lt(5,"div",5,6),Ze(7,iie,3,14,"p-scroller",7),Ze(8,oie,2,7,"ng-container",8),Ze(9,hie,8,22,"ng-template",null,9,vc),ct(),Ze(11,fie,1,17,"p-paginator",10),Ze(12,gie,2,1,"div",11),Ze(13,mie,2,0,"div",12),Ze(14,vie,2,0,"span",13),Ze(15,yie,2,0,"span",14),ct()),2&e&&(Ur(n.styleClass),ve("ngStyle",n.style)("ngClass",lM(16,_ie,[n.rowHover||n.selectionMode,n.autoLayout,n.resizableColumns,n.resizableColumns&&"fit"===n.columnResizeMode,n.scrollable,n.scrollable&&"vertical"===n.scrollDirection,n.scrollable&&"horizontal"===n.scrollDirection,n.scrollable&&"both"===n.scrollDirection,n.scrollable&&"flex"===n.scrollHeight,"stack"===n.responsiveLayout,"scroll"===n.responsiveLayout,n.responsive,null!=n.headerGroupedTemplate,null!=n.footerGroupedTemplate])),mr("id",n.id),Me(2),ve("ngIf",n.loading&&n.showLoader),Me(1),ve("ngIf",n.captionTemplate),Me(1),ve("ngIf",n.paginator&&("top"===n.paginatorPosition||"both"==n.paginatorPosition)),Me(1),ve("ngStyle",Bi(31,bie,n.virtualScroll?"":n.scrollHeight)),Me(2),ve("ngIf",n.virtualScroll),Me(1),ve("ngIf",!n.virtualScroll),Me(3),ve("ngIf",n.paginator&&("bottom"===n.paginatorPosition||"both"==n.paginatorPosition)),Me(1),ve("ngIf",n.summaryTemplate),Me(1),ve("ngIf",n.resizableColumns),Me(1),ve("ngIf",n.reorderableColumns),Me(1),ve("ngIf",n.reorderableColumns))},dependencies:function(){return[bo,Wo,rc,Qo,Dte,_l,z1,Mre]},styles:[".p-datatable{position:relative}.p-datatable table{border-collapse:collapse;min-width:100%;table-layout:fixed}.p-datatable .p-sortable-column{cursor:pointer;-webkit-user-select:none;user-select:none}.p-datatable .p-sortable-column .p-column-title,.p-datatable .p-sortable-column .p-sortable-column-icon,.p-datatable .p-sortable-column .p-sortable-column-badge{vertical-align:middle}.p-datatable .p-sortable-column .p-sortable-column-badge{display:inline-flex;align-items:center;justify-content:center}.p-datatable-auto-layout>.p-datatable-wrapper{overflow-x:auto}.p-datatable-auto-layout>.p-datatable-wrapper>table{table-layout:auto}.p-datatable-responsive-scroll>.p-datatable-wrapper{overflow-x:auto}.p-datatable-responsive-scroll>.p-datatable-wrapper>table,.p-datatable-auto-layout>.p-datatable-wrapper>table{table-layout:auto}.p-datatable-hoverable-rows .p-selectable-row{cursor:pointer}.p-datatable-scrollable .p-datatable-wrapper{position:relative;overflow:auto}.p-datatable-scrollable .p-datatable-thead,.p-datatable-scrollable .p-datatable-tbody,.p-datatable-scrollable .p-datatable-tfoot{display:block}.p-datatable-scrollable .p-datatable-thead>tr,.p-datatable-scrollable .p-datatable-tbody>tr,.p-datatable-scrollable .p-datatable-tfoot>tr{display:flex;flex-wrap:nowrap;width:100%}.p-datatable-scrollable .p-datatable-thead>tr>th,.p-datatable-scrollable .p-datatable-tbody>tr>td,.p-datatable-scrollable .p-datatable-tfoot>tr>td{display:flex;flex:1 1 0;align-items:center}.p-datatable-scrollable>.p-datatable-wrapper>.p-datatable-table>.p-datatable-thead,.p-datatable-scrollable>.p-datatable-wrapper>.p-scroller-viewport>.p-scroller>.p-datatable-table>.p-datatable-thead{position:sticky;top:0;z-index:1}.p-datatable-scrollable>.p-datatable-wrapper>.p-datatable-table>.p-datatable-frozen-tbody{position:sticky;z-index:1}.p-datatable-scrollable>.p-datatable-wrapper>.p-datatable-table>.p-datatable-tfoot{position:sticky;bottom:0;z-index:1}.p-datatable-scrollable .p-frozen-column{position:sticky;background:inherit}.p-datatable-scrollable th.p-frozen-column{z-index:1}.p-datatable-scrollable-both .p-datatable-thead>tr>th,.p-datatable-scrollable-both .p-datatable-tbody>tr>td,.p-datatable-scrollable-both .p-datatable-tfoot>tr>td,.p-datatable-scrollable-horizontal .p-datatable-thead>tr>th .p-datatable-scrollable-horizontal .p-datatable-tbody>tr>td,.p-datatable-scrollable-horizontal .p-datatable-tfoot>tr>td{flex:0 0 auto}.p-datatable-flex-scrollable{display:flex;flex-direction:column;height:100%}.p-datatable-flex-scrollable .p-datatable-wrapper{display:flex;flex-direction:column;flex:1;height:100%}.p-datatable-scrollable .p-rowgroup-header{position:sticky;z-index:1}.p-datatable-scrollable.p-datatable-grouped-header .p-datatable-thead,.p-datatable-scrollable.p-datatable-grouped-footer .p-datatable-tfoot{display:table;border-collapse:collapse;width:100%;table-layout:fixed}.p-datatable-scrollable.p-datatable-grouped-header .p-datatable-thead>tr,.p-datatable-scrollable.p-datatable-grouped-footer .p-datatable-tfoot>tr{display:table-row}.p-datatable-scrollable.p-datatable-grouped-header .p-datatable-thead>tr>th,.p-datatable-scrollable.p-datatable-grouped-footer .p-datatable-tfoot>tr>td{display:table-cell}.p-datatable-scrollable .p-scroller>.p-datatable-table{display:inline-block}.p-datatable-flex-scrollable{display:flex;flex-direction:column;flex:1;height:100%}.p-datatable-flex-scrollable .p-datatable-virtual-scrollable-body{flex:1}.p-datatable-resizable>.p-datatable-wrapper{overflow-x:auto}.p-datatable-resizable .p-datatable-thead>tr>th,.p-datatable-resizable .p-datatable-tfoot>tr>td,.p-datatable-resizable .p-datatable-tbody>tr>td{overflow:hidden;white-space:nowrap}.p-datatable-resizable .p-resizable-column:not(.p-frozen-column){background-clip:padding-box;position:relative}.p-datatable-resizable-fit .p-resizable-column:last-child .p-column-resizer{display:none}.p-datatable .p-column-resizer{display:block;position:absolute!important;top:0;right:0;margin:0;width:.5rem;height:100%;padding:0;cursor:col-resize;border:1px solid transparent}.p-datatable .p-column-resizer-helper{width:1px;position:absolute;z-index:10;display:none}.p-datatable .p-row-editor-init,.p-datatable .p-row-editor-save,.p-datatable .p-row-editor-cancel,.p-datatable .p-row-toggler{display:inline-flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-datatable-reorder-indicator-up,.p-datatable-reorder-indicator-down{position:absolute;display:none}.p-datatable-reorderablerow-handle,[pReorderableColumn]{cursor:move}.p-datatable .p-datatable-loading-overlay{position:absolute;display:flex;align-items:center;justify-content:center;z-index:2}.p-column-filter-row{display:flex;align-items:center;width:100%}.p-column-filter-menu{display:inline-flex}.p-column-filter-row p-columnfilterformelement{flex:1 1 auto;width:1%}.p-column-filter-menu-button,.p-column-filter-clear-button{display:inline-flex;justify-content:center;align-items:center;cursor:pointer;text-decoration:none;overflow:hidden;position:relative}.p-column-filter-overlay{position:absolute;top:0;left:0}.p-column-filter-row-items{margin:0;padding:0;list-style:none}.p-column-filter-row-item{cursor:pointer}.p-column-filter-add-button,.p-column-filter-remove-button{justify-content:center}.p-column-filter-add-button .p-button-label,.p-column-filter-remove-button .p-button-label{flex-grow:0}.p-column-filter-buttonbar{display:flex;align-items:center;justify-content:space-between}.p-column-filter-buttonbar .p-button{width:auto}.p-datatable .p-datatable-tbody>tr>td>.p-column-title{display:none}.p-datatable .p-scroller-loading{transform:none!important;min-height:0;position:sticky;top:0;left:0}\n"],encapsulation:2}),i})(),Mre=(()=>{class i{constructor(e,n,r,s){this.dt=e,this.tableService=n,this.cd=r,this.el=s,this.subscription=this.dt.tableService.valueSource$.subscribe(()=>{this.dt.virtualScroll&&this.cd.detectChanges()})}get value(){return this._value}set value(e){this._value=e,this.frozenRows&&this.updateFrozenRowStickyPosition(),this.dt.scrollable&&"subheader"===this.dt.rowGroupMode&&this.updateFrozenRowGroupHeaderStickyPosition()}ngAfterViewInit(){this.frozenRows&&this.updateFrozenRowStickyPosition(),this.dt.scrollable&&"subheader"===this.dt.rowGroupMode&&this.updateFrozenRowGroupHeaderStickyPosition(),this.dt.virtualScroll&&this.getScrollerOption("vertical")&&this.updateScrollerPosition()}ngOnChanges(e){if(e.scrollerOptions){const{previousValue:n,currentValue:r}=e.scrollerOptions;this.dt.virtualScroll&&this.getScrollerOption("vertical")&&this.getScrollerOption("itemSize",n)!==this.getScrollerOption("itemSize",r)&&this.updateScrollerPosition()}}shouldRenderRowGroupHeader(e,n,r){let s=fr.resolveFieldData(n,this.dt.groupRowsBy),o=e[r-1];return!o||s!==fr.resolveFieldData(o,this.dt.groupRowsBy)}shouldRenderRowGroupFooter(e,n,r){let s=fr.resolveFieldData(n,this.dt.groupRowsBy),o=e[r+1];return!o||s!==fr.resolveFieldData(o,this.dt.groupRowsBy)}shouldRenderRowspan(e,n,r){let s=fr.resolveFieldData(n,this.dt.groupRowsBy),o=e[r-1];return!o||s!==fr.resolveFieldData(o,this.dt.groupRowsBy)}calculateRowGroupSize(e,n,r){let s=fr.resolveFieldData(n,this.dt.groupRowsBy),o=s,l=0;for(;s===o;){l++;let u=e[++r];if(!u)break;o=fr.resolveFieldData(u,this.dt.groupRowsBy)}return 1===l?null:l}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}updateFrozenRowStickyPosition(){this.el.nativeElement.style.top=Kt.getOuterHeight(this.el.nativeElement.previousElementSibling)+"px"}updateFrozenRowGroupHeaderStickyPosition(){if(this.el.nativeElement.previousElementSibling){let e=Kt.getOuterHeight(this.el.nativeElement.previousElementSibling);this.dt.rowGroupHeaderStyleObject.top=e+"px"}}updateScrollerPosition(){const e=Kt.getOuterHeight(this.el.nativeElement.previousElementSibling);this.el.nativeElement.style.top=(this.el.nativeElement.style.top||0)+e+"px"}getScrollerOption(e,n){return this.dt.virtualScroll&&(n=n||this.scrollerOptions)?n[e]:null}getRowIndex(e){const n=this.dt.paginator?this.dt.first+e:e,r=this.getScrollerOption("getItemOptions");return r?r(n).index:n}}return i.\u0275fac=function(e){return new(e||i)(Zt(b0),Zt(Sw),Zt(Zo),Zt(Xn))},i.\u0275cmp=Ir({type:i,selectors:[["","pTableBody",""]],hostAttrs:[1,"p-element"],inputs:{columns:["pTableBody","columns"],template:["pTableBodyTemplate","template"],value:"value",frozen:"frozen",frozenRows:"frozenRows",scrollerOptions:"scrollerOptions"},features:[_a],attrs:Cie,decls:6,vars:6,consts:[[4,"ngIf"],["ngFor","",3,"ngForOf","ngForTrackBy"],["role","row",4,"ngIf"],["role","row"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,n){1&e&&(Ze(0,Pie,2,2,"ng-container",0),Ze(1,Oie,2,2,"ng-container",0),Ze(2,jie,2,2,"ng-container",0),Ze(3,Kie,2,2,"ng-container",0),Ze(4,Qie,2,5,"ng-container",0),Ze(5,ere,2,5,"ng-container",0)),2&e&&(ve("ngIf",!n.dt.expandedRowTemplate&&!n.dt.virtualScroll),Me(1),ve("ngIf",!n.dt.expandedRowTemplate&&n.dt.virtualScroll),Me(1),ve("ngIf",n.dt.expandedRowTemplate&&!(n.frozen&&n.dt.frozenExpandedRowTemplate)),Me(1),ve("ngIf",n.dt.frozenExpandedRowTemplate&&n.frozen),Me(1),ve("ngIf",n.dt.loading),Me(1),ve("ngIf",n.dt.isEmpty()&&!n.dt.loading))},dependencies:[Su,Wo,rc],encapsulation:2}),i})(),s4=(()=>{class i{constructor(e){this.dt=e,this.isEnabled()&&(this.subscription=this.dt.tableService.sortSource$.subscribe(n=>{this.updateSortState()}))}ngOnInit(){this.isEnabled()&&this.updateSortState()}updateSortState(){this.sorted=this.dt.isSorted(this.field),this.sortOrder=this.sorted?1===this.dt.sortOrder?"ascending":"descending":"none"}onClick(e){this.isEnabled()&&!this.isFilterElement(e.target)&&(this.updateSortState(),this.dt.sort({originalEvent:e,field:this.field}),Kt.clearSelection())}onEnterKey(e){this.onClick(e)}isEnabled(){return!0!==this.pSortableColumnDisabled}isFilterElement(e){return Kt.hasClass(e,"pi-filter-icon")||Kt.hasClass(e,"p-column-filter-menu-button")}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(Zt(b0))},i.\u0275dir=$r({type:i,selectors:[["","pSortableColumn",""]],hostAttrs:[1,"p-element"],hostVars:7,hostBindings:function(e,n){1&e&&fn("click",function(s){return n.onClick(s)})("keydown.enter",function(s){return n.onEnterKey(s)}),2&e&&(mr("tabindex",n.isEnabled()?"0":null)("role","columnheader")("aria-sort",n.sortOrder),Ep("p-sortable-column",n.isEnabled())("p-highlight",n.sorted))},inputs:{field:["pSortableColumn","field"],pSortableColumnDisabled:"pSortableColumnDisabled"}}),i})(),o4=(()=>{class i{constructor(e,n){this.dt=e,this.cd=n,this.subscription=this.dt.tableService.sortSource$.subscribe(r=>{this.updateSortState()})}ngOnInit(){this.updateSortState()}onClick(e){e.preventDefault()}updateSortState(){if("single"===this.dt.sortMode)this.sortOrder=this.dt.isSorted(this.field)?this.dt.sortOrder:0;else if("multiple"===this.dt.sortMode){let e=this.dt.getSortMeta(this.field);this.sortOrder=e?e.order:0}this.cd.markForCheck()}getMultiSortMetaIndex(){let e=this.dt._multiSortMeta,n=-1;if(e&&"multiple"===this.dt.sortMode&&(this.dt.showInitialSortBadge||e.length>1))for(let r=0;r<e.length;r++){let s=e[r];if(s.field===this.field||s.field===this.field){n=r;break}}return n}getBadgeValue(){let e=this.getMultiSortMetaIndex();return this.dt.groupRowsBy&&e>-1?e:e+1}isMultiSorted(){return"multiple"===this.dt.sortMode&&this.getMultiSortMetaIndex()>-1}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(Zt(b0),Zt(Zo))},i.\u0275cmp=Ir({type:i,selectors:[["p-sortIcon"]],hostAttrs:[1,"p-element"],inputs:{field:"field"},decls:2,vars:6,consts:[[1,"p-sortable-column-icon","pi","pi-fw",3,"ngClass"],["class","p-sortable-column-badge",4,"ngIf"],[1,"p-sortable-column-badge"]],template:function(e,n){1&e&&(ii(0,"i",0),Ze(1,tre,2,1,"span",1)),2&e&&(ve("ngClass",wu(2,nre,1===n.sortOrder,-1===n.sortOrder,0===n.sortOrder)),Me(1),ve("ngIf",n.isMultiSorted()))},dependencies:[bo,Wo],encapsulation:2,changeDetection:0}),i})(),a4=(()=>{class i{constructor(e,n,r){this.dt=e,this.tableService=n,this.cd=r,this.subscription=this.dt.tableService.selectionSource$.subscribe(()=>{this.checked=this.dt.isSelected(this.value),this.cd.markForCheck()})}ngOnInit(){this.checked=this.dt.isSelected(this.value)}onClick(e){this.disabled||this.dt.toggleRowWithCheckbox({originalEvent:e,rowIndex:this.index},this.value),Kt.clearSelection()}onFocus(){this.focused=!0}onBlur(){this.focused=!1}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(Zt(b0),Zt(Sw),Zt(Zo))},i.\u0275cmp=Ir({type:i,selectors:[["p-tableCheckbox"]],hostAttrs:[1,"p-element"],inputs:{disabled:"disabled",value:"value",index:"index",inputId:"inputId",name:"name",required:"required",ariaLabel:"ariaLabel"},decls:6,vars:19,consts:[[1,"p-checkbox","p-component",3,"ngClass","click"],[1,"p-hidden-accessible"],["type","checkbox",3,"checked","disabled","focus","blur"],["role","checkbox",3,"ngClass"],["box",""],[1,"p-checkbox-icon",3,"ngClass"]],template:function(e,n){1&e&&(lt(0,"div",0),fn("click",function(s){return n.onClick(s)}),lt(1,"div",1)(2,"input",2),fn("focus",function(){return n.onFocus()})("blur",function(){return n.onBlur()}),ct()(),lt(3,"div",3,4),ii(5,"span",5),ct()()),2&e&&(ve("ngClass",ys(10,n4,n.focused,n.disabled)),Me(2),ve("checked",n.checked)("disabled",n.disabled),mr("id",n.inputId)("name",n.name)("required",n.required)("aria-label",n.ariaLabel),Me(1),ve("ngClass",wu(13,sre,n.checked,n.focused,n.disabled)),mr("aria-checked",n.checked),Me(2),ve("ngClass",Bi(17,r4,n.checked)))},dependencies:[bo],encapsulation:2,changeDetection:0}),i})(),l4=(()=>{class i{constructor(e,n,r){this.dt=e,this.tableService=n,this.cd=r,this.valueChangeSubscription=this.dt.tableService.valueSource$.subscribe(()=>{this.checked=this.updateCheckedState()}),this.selectionChangeSubscription=this.dt.tableService.selectionSource$.subscribe(()=>{this.checked=this.updateCheckedState()})}ngOnInit(){this.checked=this.updateCheckedState()}onClick(e){this.disabled||this.dt.value&&this.dt.value.length>0&&this.dt.toggleRowsWithCheckbox(e,!this.checked),Kt.clearSelection()}onFocus(){this.focused=!0}onBlur(){this.focused=!1}isDisabled(){return this.disabled||!this.dt.value||!this.dt.value.length}ngOnDestroy(){this.selectionChangeSubscription&&this.selectionChangeSubscription.unsubscribe(),this.valueChangeSubscription&&this.valueChangeSubscription.unsubscribe()}updateCheckedState(){if(this.cd.markForCheck(),null!==this.dt._selectAll)return this.dt._selectAll;{const e=this.dt.selectionPageOnly?this.dt.dataToRender(this.dt.processedData):this.dt.processedData,n=this.dt.frozenValue?[...this.dt.frozenValue,...e]:e,r=this.dt.rowSelectable?n.filter((s,o)=>this.dt.rowSelectable({data:s,index:o})):n;return fr.isNotEmpty(r)&&fr.isNotEmpty(this.dt.selection)&&r.every(s=>this.dt.selection.some(o=>this.dt.equals(s,o)))}}}return i.\u0275fac=function(e){return new(e||i)(Zt(b0),Zt(Sw),Zt(Zo))},i.\u0275cmp=Ir({type:i,selectors:[["p-tableHeaderCheckbox"]],hostAttrs:[1,"p-element"],inputs:{disabled:"disabled",inputId:"inputId",name:"name",ariaLabel:"ariaLabel"},decls:7,vars:18,consts:[[1,"p-checkbox","p-component",3,"ngClass","click"],[1,"p-hidden-accessible"],["type","checkbox",3,"checked","disabled","focus","blur"],["cb",""],["role","checkbox",3,"ngClass"],["box",""],[1,"p-checkbox-icon",3,"ngClass"]],template:function(e,n){1&e&&(lt(0,"div",0),fn("click",function(s){return n.onClick(s)}),lt(1,"div",1)(2,"input",2,3),fn("focus",function(){return n.onFocus()})("blur",function(){return n.onBlur()}),ct()(),lt(4,"div",4,5),ii(6,"span",6),ct()()),2&e&&(ve("ngClass",ys(9,n4,n.focused,n.isDisabled())),Me(2),ve("checked",n.checked)("disabled",n.isDisabled()),mr("id",n.inputId)("name",n.name)("aria-label",n.ariaLabel),Me(2),ve("ngClass",wu(12,ore,n.checked,n.focused,n.isDisabled())),mr("aria-checked",n.checked),Me(2),ve("ngClass",Bi(16,r4,n.checked)))},dependencies:[bo],encapsulation:2,changeDetection:0}),i})(),Dre=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({imports:[Ns,qV,B2,V1,B1,sv,Vte,QV,H1,qte,rv,Na,rv]}),i})(),Lre=(()=>{class i{constructor(e){this.el=e}onkeydown(e){if(!0!==this.pFocusTrapDisabled){e.preventDefault();let n=Kt.getFocusableElements(this.el.nativeElement);if(n&&n.length>0)if(n[0].ownerDocument.activeElement){let r=n.indexOf(n[0].ownerDocument.activeElement);e.shiftKey?-1==r||0===r?n[n.length-1].focus():n[r-1].focus():-1==r||r===n.length-1?n[0].focus():n[r+1].focus()}else n[0].focus()}}}return i.\u0275fac=function(e){return new(e||i)(Zt(Xn))},i.\u0275dir=$r({type:i,selectors:[["","pFocusTrap",""]],hostAttrs:[1,"p-element"],hostBindings:function(e,n){1&e&&fn("keydown.tab",function(s){return n.onkeydown(s)})("keydown.shift.tab",function(s){return n.onkeydown(s)})},inputs:{pFocusTrapDisabled:"pFocusTrapDisabled"}}),i})(),Pre=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({imports:[Ns]}),i})();const Rre=["titlebar"],kre=["content"],Ore=["footer"];function Fre(i,t){if(1&i){const e=Pi();lt(0,"div",11),fn("mousedown",function(r){return wt(e),At(_e(3).initResize(r))}),ct()}}function Nre(i,t){if(1&i&&(lt(0,"span",18),qi(1),ct()),2&i){const e=_e(4);mr("id",e.id+"-label"),Me(1),as(e.header)}}function Bre(i,t){1&i&&(lt(0,"span",18),$u(1,1),ct()),2&i&&mr("id",_e(4).id+"-label")}function zre(i,t){1&i&&Ki(0)}const Vre=function(){return{"p-dialog-header-icon p-dialog-header-maximize p-link":!0}};function Ure(i,t){if(1&i){const e=Pi();lt(0,"button",19),fn("click",function(){return wt(e),At(_e(4).maximize())})("keydown.enter",function(){return wt(e),At(_e(4).maximize())}),ii(1,"span",20),ct()}if(2&i){const e=_e(4);ve("ngClass",Mo(2,Vre)),Me(1),ve("ngClass",e.maximized?e.minimizeIcon:e.maximizeIcon)}}const Hre=function(){return{"p-dialog-header-icon p-dialog-header-close p-link":!0}};function Gre(i,t){if(1&i){const e=Pi();lt(0,"button",21),fn("click",function(r){return wt(e),At(_e(4).close(r))})("keydown.enter",function(r){return wt(e),At(_e(4).close(r))}),ii(1,"span",22),ct()}if(2&i){const e=_e(4);ve("ngClass",Mo(4,Hre)),mr("aria-label",e.closeAriaLabel)("tabindex",e.closeTabindex),Me(1),ve("ngClass",e.closeIcon)}}function Wre(i,t){if(1&i){const e=Pi();lt(0,"div",12,13),fn("mousedown",function(r){return wt(e),At(_e(3).initDrag(r))}),Ze(2,Nre,2,2,"span",14),Ze(3,Bre,2,1,"span",14),Ze(4,zre,1,0,"ng-container",9),lt(5,"div",15),Ze(6,Ure,2,3,"button",16),Ze(7,Gre,2,5,"button",17),ct()()}if(2&i){const e=_e(3);Me(2),ve("ngIf",!e.headerFacet&&!e.headerTemplate),Me(1),ve("ngIf",e.headerFacet),Me(1),ve("ngTemplateOutlet",e.headerTemplate),Me(2),ve("ngIf",e.maximizable),Me(1),ve("ngIf",e.closable)}}function jre(i,t){1&i&&Ki(0)}function $re(i,t){1&i&&Ki(0)}function qre(i,t){if(1&i&&(lt(0,"div",23,24),$u(2,2),Ze(3,$re,1,0,"ng-container",9),ct()),2&i){const e=_e(3);Me(3),ve("ngTemplateOutlet",e.footerTemplate)}}const Xre=function(i,t,e,n){return{"p-dialog p-component":!0,"p-dialog-rtl":i,"p-dialog-draggable":t,"p-dialog-resizable":e,"p-dialog-maximized":n}},Yre=function(i,t){return{transform:i,transition:t}},Kre=function(i){return{value:"visible",params:i}};function Zre(i,t){if(1&i){const e=Pi();lt(0,"div",3,4),fn("@animation.start",function(r){return wt(e),At(_e(2).onAnimationStart(r))})("@animation.done",function(r){return wt(e),At(_e(2).onAnimationEnd(r))}),Ze(2,Fre,1,0,"div",5),Ze(3,Wre,8,5,"div",6),lt(4,"div",7,8),$u(6),Ze(7,jre,1,0,"ng-container",9),ct(),Ze(8,qre,4,1,"div",10),ct()}if(2&i){const e=_e(2);Ur(e.styleClass),ve("ngClass",Ff(15,Xre,e.rtl,e.draggable,e.resizable,e.maximized))("ngStyle",e.style)("pFocusTrapDisabled",!1===e.focusTrap)("@animation",Bi(23,Kre,ys(20,Yre,e.transformOptions,e.transitionOptions))),mr("aria-labelledby",e.id+"-label"),Me(2),ve("ngIf",e.resizable),Me(1),ve("ngIf",e.showHeader),Me(1),Ur(e.contentStyleClass),ve("ngClass","p-dialog-content")("ngStyle",e.contentStyle),Me(3),ve("ngTemplateOutlet",e.contentTemplate),Me(1),ve("ngIf",e.footerFacet||e.footerTemplate)}}const Qre=function(i,t,e,n,r,s,o,l,u,p){return{"p-dialog-mask":!0,"p-component-overlay p-component-overlay-enter":i,"p-dialog-mask-scrollblocker":t,"p-dialog-left":e,"p-dialog-right":n,"p-dialog-top":r,"p-dialog-top-left":s,"p-dialog-top-right":o,"p-dialog-bottom":l,"p-dialog-bottom-left":u,"p-dialog-bottom-right":p}};function Jre(i,t){if(1&i&&(lt(0,"div",1),Ze(1,Zre,9,25,"div",2),ct()),2&i){const e=_e();Ur(e.maskStyleClass),ve("ngClass",lM(4,Qre,[e.modal,e.modal||e.blockScroll,"left"===e.position,"right"===e.position,"top"===e.position,"topleft"===e.position||"top-left"===e.position,"topright"===e.position||"top-right"===e.position,"bottom"===e.position,"bottomleft"===e.position||"bottom-left"===e.position,"bottomright"===e.position||"bottom-right"===e.position])),Me(1),ve("ngIf",e.visible)}}const ese=["*",[["p-header"]],[["p-footer"]]],tse=["*","p-header","p-footer"],nse=lC([Qa({transform:"{{transform}}",opacity:0}),Cc("{{transition}}")]),ise=lC([Cc("{{transition}}",Qa({transform:"{{transform}}",opacity:0}))]);let $1=(()=>{class i{constructor(e,n,r,s,o){this.el=e,this.renderer=n,this.zone=r,this.cd=s,this.config=o,this.draggable=!0,this.resizable=!0,this.closeOnEscape=!0,this.closable=!0,this.showHeader=!0,this.blockScroll=!1,this.autoZIndex=!0,this.baseZIndex=0,this.minX=0,this.minY=0,this.focusOnShow=!0,this.keepInViewport=!0,this.focusTrap=!0,this.transitionOptions="150ms cubic-bezier(0, 0, 0.2, 1)",this.closeIcon="pi pi-times",this.closeTabindex="-1",this.minimizeIcon="pi pi-window-minimize",this.maximizeIcon="pi pi-window-maximize",this.onShow=new qn,this.onHide=new qn,this.visibleChange=new qn,this.onResizeInit=new qn,this.onResizeEnd=new qn,this.onDragEnd=new qn,this.onMaximize=new qn,this.id=nw(),this._style={},this._position="center",this.transformOptions="scale(0.7)"}get positionLeft(){return 0}set positionLeft(e){console.log("positionLeft property is deprecated.")}get positionTop(){return 0}set positionTop(e){console.log("positionTop property is deprecated.")}get responsive(){return!1}set responsive(e){console.log("Responsive property is deprecated.")}get breakpoint(){return 649}set breakpoint(e){console.log("Breakpoint property is not utilized and deprecated, use breakpoints or CSS media queries instead.")}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"header":this.headerTemplate=e.template;break;case"content":default:this.contentTemplate=e.template;break;case"footer":this.footerTemplate=e.template}})}ngOnInit(){this.breakpoints&&this.createStyle()}get visible(){return this._visible}set visible(e){this._visible=e,this._visible&&!this.maskVisible&&(this.maskVisible=!0)}get style(){return this._style}set style(e){e&&(this._style={...e},this.originalStyle=e)}get position(){return this._position}set position(e){switch(this._position=e,e){case"topleft":case"bottomleft":case"left":this.transformOptions="translate3d(-100%, 0px, 0px)";break;case"topright":case"bottomright":case"right":this.transformOptions="translate3d(100%, 0px, 0px)";break;case"bottom":this.transformOptions="translate3d(0px, 100%, 0px)";break;case"top":this.transformOptions="translate3d(0px, -100%, 0px)";break;default:this.transformOptions="scale(0.7)"}}focus(){let e=Kt.findSingle(this.container,"[autofocus]");e&&this.zone.runOutsideAngular(()=>{setTimeout(()=>e.focus(),5)})}close(e){this.visibleChange.emit(!1),e.preventDefault()}enableModality(){this.closable&&this.dismissableMask&&(this.maskClickListener=this.renderer.listen(this.wrapper,"mousedown",e=>{this.wrapper&&this.wrapper.isSameNode(e.target)&&this.close(e)})),this.modal&&Kt.addClass(document.body,"p-overflow-hidden")}disableModality(){this.wrapper&&(this.dismissableMask&&this.unbindMaskClickListener(),this.modal&&Kt.removeClass(document.body,"p-overflow-hidden"),this.cd.destroyed||this.cd.detectChanges())}maximize(){this.maximized=!this.maximized,!this.modal&&!this.blockScroll&&(this.maximized?Kt.addClass(document.body,"p-overflow-hidden"):Kt.removeClass(document.body,"p-overflow-hidden")),this.onMaximize.emit({maximized:this.maximized})}unbindMaskClickListener(){this.maskClickListener&&(this.maskClickListener(),this.maskClickListener=null)}moveOnTop(){this.autoZIndex&&(Dl.set("modal",this.container,this.baseZIndex+this.config.zIndex.modal),this.wrapper.style.zIndex=String(parseInt(this.container.style.zIndex,10)-1))}createStyle(){if(!this.styleElement){this.styleElement=document.createElement("style"),this.styleElement.type="text/css",document.head.appendChild(this.styleElement);let e="";for(let n in this.breakpoints)e+=`\n                    @media screen and (max-width: ${n}) {\n                        .p-dialog[${this.id}] {\n                            width: ${this.breakpoints[n]} !important;\n                        }\n                    }\n                `;this.styleElement.innerHTML=e}}initDrag(e){Kt.hasClass(e.target,"p-dialog-header-icon")||Kt.hasClass(e.target.parentElement,"p-dialog-header-icon")||this.draggable&&(this.dragging=!0,this.lastPageX=e.pageX,this.lastPageY=e.pageY,this.container.style.margin="0",Kt.addClass(document.body,"p-unselectable-text"))}onKeydown(e){if(this.focusTrap&&9===e.which){e.preventDefault();let n=Kt.getFocusableElements(this.container);if(n&&n.length>0)if(n[0].ownerDocument.activeElement){let r=n.indexOf(n[0].ownerDocument.activeElement);e.shiftKey?-1==r||0===r?n[n.length-1].focus():n[r-1].focus():-1==r||r===n.length-1?n[0].focus():n[r+1].focus()}else n[0].focus()}}onDrag(e){if(this.dragging){let n=Kt.getOuterWidth(this.container),r=Kt.getOuterHeight(this.container),s=e.pageX-this.lastPageX,o=e.pageY-this.lastPageY,l=this.container.getBoundingClientRect(),u=l.left+s,p=l.top+o,v=Kt.getViewport();this.container.style.position="fixed",this.keepInViewport?(u>=this.minX&&u+n<v.width&&(this._style.left=u+"px",this.lastPageX=e.pageX,this.container.style.left=u+"px"),p>=this.minY&&p+r<v.height&&(this._style.top=p+"px",this.lastPageY=e.pageY,this.container.style.top=p+"px")):(this.lastPageX=e.pageX,this.container.style.left=u+"px",this.lastPageY=e.pageY,this.container.style.top=p+"px")}}endDrag(e){this.dragging&&(this.dragging=!1,Kt.removeClass(document.body,"p-unselectable-text"),this.cd.detectChanges(),this.onDragEnd.emit(e))}resetPosition(){this.container.style.position="",this.container.style.left="",this.container.style.top="",this.container.style.margin=""}center(){this.resetPosition()}initResize(e){this.resizable&&(this.resizing=!0,this.lastPageX=e.pageX,this.lastPageY=e.pageY,Kt.addClass(document.body,"p-unselectable-text"),this.onResizeInit.emit(e))}onResize(e){if(this.resizing){let n=e.pageX-this.lastPageX,r=e.pageY-this.lastPageY,s=Kt.getOuterWidth(this.container),o=Kt.getOuterHeight(this.container),l=Kt.getOuterHeight(this.contentViewChild.nativeElement),u=s+n,p=o+r,v=this.container.style.minWidth,x=this.container.style.minHeight,I=this.container.getBoundingClientRect(),T=Kt.getViewport();(!parseInt(this.container.style.top)||!parseInt(this.container.style.left))&&(u+=n,p+=r),(!v||u>parseInt(v))&&I.left+u<T.width&&(this._style.width=u+"px",this.container.style.width=this._style.width),(!x||p>parseInt(x))&&I.top+p<T.height&&(this.contentViewChild.nativeElement.style.height=l+p-o+"px",this._style.height&&(this._style.height=p+"px",this.container.style.height=this._style.height)),this.lastPageX=e.pageX,this.lastPageY=e.pageY}}resizeEnd(e){this.resizing&&(this.resizing=!1,Kt.removeClass(document.body,"p-unselectable-text"),this.onResizeEnd.emit(e))}bindGlobalListeners(){this.draggable&&(this.bindDocumentDragListener(),this.bindDocumentDragEndListener()),this.resizable&&this.bindDocumentResizeListeners(),this.closeOnEscape&&this.closable&&this.bindDocumentEscapeListener()}unbindGlobalListeners(){this.unbindDocumentDragListener(),this.unbindDocumentDragEndListener(),this.unbindDocumentResizeListeners(),this.unbindDocumentEscapeListener()}bindDocumentDragListener(){this.zone.runOutsideAngular(()=>{this.documentDragListener=this.onDrag.bind(this),window.document.addEventListener("mousemove",this.documentDragListener)})}unbindDocumentDragListener(){this.documentDragListener&&(window.document.removeEventListener("mousemove",this.documentDragListener),this.documentDragListener=null)}bindDocumentDragEndListener(){this.zone.runOutsideAngular(()=>{this.documentDragEndListener=this.endDrag.bind(this),window.document.addEventListener("mouseup",this.documentDragEndListener)})}unbindDocumentDragEndListener(){this.documentDragEndListener&&(window.document.removeEventListener("mouseup",this.documentDragEndListener),this.documentDragEndListener=null)}bindDocumentResizeListeners(){this.zone.runOutsideAngular(()=>{this.documentResizeListener=this.onResize.bind(this),this.documentResizeEndListener=this.resizeEnd.bind(this),window.document.addEventListener("mousemove",this.documentResizeListener),window.document.addEventListener("mouseup",this.documentResizeEndListener)})}unbindDocumentResizeListeners(){this.documentResizeListener&&this.documentResizeEndListener&&(window.document.removeEventListener("mousemove",this.documentResizeListener),window.document.removeEventListener("mouseup",this.documentResizeEndListener),this.documentResizeListener=null,this.documentResizeEndListener=null)}bindDocumentEscapeListener(){this.documentEscapeListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","keydown",n=>{27==n.which&&this.close(n)})}unbindDocumentEscapeListener(){this.documentEscapeListener&&(this.documentEscapeListener(),this.documentEscapeListener=null)}appendContainer(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.wrapper):Kt.appendChild(this.wrapper,this.appendTo))}restoreAppend(){this.container&&this.appendTo&&this.el.nativeElement.appendChild(this.wrapper)}onAnimationStart(e){switch(e.toState){case"visible":this.container=e.element,this.wrapper=this.container.parentElement,this.appendContainer(),this.moveOnTop(),this.bindGlobalListeners(),this.container.setAttribute(this.id,""),this.modal&&this.enableModality(),!this.modal&&this.blockScroll&&Kt.addClass(document.body,"p-overflow-hidden"),this.focusOnShow&&this.focus();break;case"void":this.wrapper&&this.modal&&Kt.addClass(this.wrapper,"p-component-overlay-leave")}}onAnimationEnd(e){switch(e.toState){case"void":this.onContainerDestroy(),this.onHide.emit({});break;case"visible":this.onShow.emit({})}}onContainerDestroy(){this.unbindGlobalListeners(),this.dragging=!1,this.maskVisible=!1,this.maximized&&(Kt.removeClass(document.body,"p-overflow-hidden"),this.maximized=!1),this.modal&&this.disableModality(),this.blockScroll&&Kt.removeClass(document.body,"p-overflow-hidden"),this.container&&this.autoZIndex&&Dl.clear(this.container),this.container=null,this.wrapper=null,this._style=this.originalStyle?{...this.originalStyle}:{}}destroyStyle(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}ngOnDestroy(){this.container&&(this.restoreAppend(),this.onContainerDestroy()),this.destroyStyle()}}return i.\u0275fac=function(e){return new(e||i)(Zt(Xn),Zt(h),Zt(Ko),Zt(Zo),Zt(Tp))},i.\u0275cmp=Ir({type:i,selectors:[["p-dialog"]],contentQueries:function(e,n,r){if(1&e&&(cl(r,jD,5),cl(r,y1,5),cl(r,_l,4)),2&e){let s;vr(s=yr())&&(n.headerFacet=s.first),vr(s=yr())&&(n.footerFacet=s.first),vr(s=yr())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(vs(Rre,5),vs(kre,5),vs(Ore,5)),2&e){let r;vr(r=yr())&&(n.headerViewChild=r.first),vr(r=yr())&&(n.contentViewChild=r.first),vr(r=yr())&&(n.footerViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{header:"header",draggable:"draggable",resizable:"resizable",positionLeft:"positionLeft",positionTop:"positionTop",contentStyle:"contentStyle",contentStyleClass:"contentStyleClass",modal:"modal",closeOnEscape:"closeOnEscape",dismissableMask:"dismissableMask",rtl:"rtl",closable:"closable",responsive:"responsive",appendTo:"appendTo",breakpoints:"breakpoints",styleClass:"styleClass",maskStyleClass:"maskStyleClass",showHeader:"showHeader",breakpoint:"breakpoint",blockScroll:"blockScroll",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",minX:"minX",minY:"minY",focusOnShow:"focusOnShow",maximizable:"maximizable",keepInViewport:"keepInViewport",focusTrap:"focusTrap",transitionOptions:"transitionOptions",closeIcon:"closeIcon",closeAriaLabel:"closeAriaLabel",closeTabindex:"closeTabindex",minimizeIcon:"minimizeIcon",maximizeIcon:"maximizeIcon",visible:"visible",style:"style",position:"position"},outputs:{onShow:"onShow",onHide:"onHide",visibleChange:"visibleChange",onResizeInit:"onResizeInit",onResizeEnd:"onResizeEnd",onDragEnd:"onDragEnd",onMaximize:"onMaximize"},ngContentSelectors:tse,decls:1,vars:1,consts:[[3,"class","ngClass",4,"ngIf"],[3,"ngClass"],["pFocusTrap","","role","dialog",3,"ngClass","ngStyle","class","pFocusTrapDisabled",4,"ngIf"],["pFocusTrap","","role","dialog",3,"ngClass","ngStyle","pFocusTrapDisabled"],["container",""],["class","p-resizable-handle","style","z-index: 90;",3,"mousedown",4,"ngIf"],["class","p-dialog-header",3,"mousedown",4,"ngIf"],[3,"ngClass","ngStyle"],["content",""],[4,"ngTemplateOutlet"],["class","p-dialog-footer",4,"ngIf"],[1,"p-resizable-handle",2,"z-index","90",3,"mousedown"],[1,"p-dialog-header",3,"mousedown"],["titlebar",""],["class","p-dialog-title",4,"ngIf"],[1,"p-dialog-header-icons"],["type","button","tabindex","-1","pRipple","",3,"ngClass","click","keydown.enter",4,"ngIf"],["type","button","pRipple","",3,"ngClass","click","keydown.enter",4,"ngIf"],[1,"p-dialog-title"],["type","button","tabindex","-1","pRipple","",3,"ngClass","click","keydown.enter"],[1,"p-dialog-header-maximize-icon",3,"ngClass"],["type","button","pRipple","",3,"ngClass","click","keydown.enter"],[1,"p-dialog-header-close-icon",3,"ngClass"],[1,"p-dialog-footer"],["footer",""]],template:function(e,n){1&e&&(dg(ese),Ze(0,Jre,2,15,"div",0)),2&e&&ve("ngIf",n.maskVisible)},dependencies:[bo,Wo,rc,Qo,Lre,_d],styles:[".p-dialog-mask{position:fixed;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;pointer-events:none}.p-dialog-mask.p-component-overlay{pointer-events:auto}.p-dialog{display:flex;flex-direction:column;pointer-events:auto;max-height:90%;transform:scale(1);position:relative}.p-dialog-content{overflow-y:auto;flex-grow:1}.p-dialog-header{display:flex;align-items:center;justify-content:space-between;flex-shrink:0}.p-dialog-draggable .p-dialog-header{cursor:move}.p-dialog-footer{flex-shrink:0}.p-dialog .p-dialog-header-icons{display:flex;align-items:center}.p-dialog .p-dialog-header-icon{display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-fluid .p-dialog-footer .p-button{width:auto}.p-dialog-top .p-dialog,.p-dialog-bottom .p-dialog,.p-dialog-left .p-dialog,.p-dialog-right .p-dialog,.p-dialog-top-left .p-dialog,.p-dialog-top-right .p-dialog,.p-dialog-bottom-left .p-dialog,.p-dialog-bottom-right .p-dialog{margin:.75rem;transform:translate(0)}.p-dialog-maximized{transition:none;transform:none;width:100vw!important;height:100vh!important;top:0px!important;left:0px!important;max-height:100%;height:100%}.p-dialog-maximized .p-dialog-content{flex-grow:1}.p-dialog-left{justify-content:flex-start}.p-dialog-right{justify-content:flex-end}.p-dialog-top{align-items:flex-start}.p-dialog-top-left{justify-content:flex-start;align-items:flex-start}.p-dialog-top-right{justify-content:flex-end;align-items:flex-start}.p-dialog-bottom{align-items:flex-end}.p-dialog-bottom-left{justify-content:flex-start;align-items:flex-end}.p-dialog-bottom-right{justify-content:flex-end;align-items:flex-end}.p-dialog .p-resizable-handle{position:absolute;font-size:.1px;display:block;cursor:se-resize;width:12px;height:12px;right:1px;bottom:1px}.p-confirm-dialog .p-dialog-content{display:flex;align-items:center}\n"],encapsulation:2,data:{animation:[oy("animation",[Eu("void => visible",[NV(nse)]),Eu("visible => void",[NV(ise)])])]},changeDetection:0}),i})(),rse=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({imports:[Ns,Pre,$c,Na]}),i})();const c4=["container"],sse=function(i,t,e,n){return{"pi-info-circle":i,"pi-exclamation-triangle":t,"pi-times-circle":e,"pi-check":n}};function ose(i,t){if(1&i&&(qr(0),ii(1,"span",6),lt(2,"div",7)(3,"div",8),qi(4),ct(),lt(5,"div",9),qi(6),ct()(),Xr()),2&i){const e=_e();Me(1),Ur("p-toast-message-icon pi"+(e.message.icon?" "+e.message.icon:"")),ve("ngClass",Ff(5,sse,"info"==e.message.severity,"warn"==e.message.severity,"error"==e.message.severity,"success"==e.message.severity)),Me(3),as(e.message.summary),Me(2),as(e.message.detail)}}function ase(i,t){1&i&&Ki(0)}function lse(i,t){if(1&i){const e=Pi();lt(0,"button",10),fn("click",function(r){return wt(e),At(_e().onCloseIconClick(r))})("keydown.enter",function(r){return wt(e),At(_e().onCloseIconClick(r))}),ii(1,"span",11),ct()}}const cse=function(i){return[i,"p-toast-message"]},use=function(i,t,e,n){return{showTransformParams:i,hideTransformParams:t,showTransitionParams:e,hideTransitionParams:n}},dse=function(i){return{value:"visible",params:i}},hse=function(i){return{$implicit:i}};function fse(i,t){if(1&i){const e=Pi();lt(0,"p-toastItem",3),fn("onClose",function(r){return wt(e),At(_e().onMessageClose(r))})("@toastAnimation.start",function(r){return wt(e),At(_e().onAnimationStart(r))})("@toastAnimation.done",function(r){return wt(e),At(_e().onAnimationEnd(r))}),ct()}if(2&i){const e=t.$implicit,n=t.index,r=_e();ve("message",e)("index",n)("template",r.template)("@toastAnimation",void 0)("showTransformOptions",r.showTransformOptions)("hideTransformOptions",r.hideTransformOptions)("showTransitionOptions",r.showTransitionOptions)("hideTransitionOptions",r.hideTransitionOptions)}}let pse=(()=>{class i{constructor(e){this.zone=e,this.onClose=new qn}ngAfterViewInit(){this.initTimeout()}initTimeout(){this.message.sticky||this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>{this.onClose.emit({index:this.index,message:this.message})},this.message.life||3e3)})}clearTimeout(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null)}onMouseEnter(){this.clearTimeout()}onMouseLeave(){this.initTimeout()}onCloseIconClick(e){this.clearTimeout(),this.onClose.emit({index:this.index,message:this.message}),e.preventDefault()}ngOnDestroy(){this.clearTimeout()}}return i.\u0275fac=function(e){return new(e||i)(Zt(Ko))},i.\u0275cmp=Ir({type:i,selectors:[["p-toastItem"]],viewQuery:function(e,n){if(1&e&&vs(c4,5),2&e){let r;vr(r=yr())&&(n.containerViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{message:"message",index:"index",template:"template",showTransformOptions:"showTransformOptions",hideTransformOptions:"hideTransformOptions",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{onClose:"onClose"},decls:6,vars:21,consts:[[3,"ngClass","mouseenter","mouseleave"],["container",""],["role","alert","aria-live","assertive","aria-atomic","true",1,"p-toast-message-content",3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["type","button","class","p-toast-icon-close p-link","pRipple","",3,"click","keydown.enter",4,"ngIf"],[3,"ngClass"],[1,"p-toast-message-text"],[1,"p-toast-summary"],[1,"p-toast-detail"],["type","button","pRipple","",1,"p-toast-icon-close","p-link",3,"click","keydown.enter"],[1,"p-toast-icon-close-icon","pi","pi-times"]],template:function(e,n){1&e&&(lt(0,"div",0,1),fn("mouseenter",function(){return n.onMouseEnter()})("mouseleave",function(){return n.onMouseLeave()}),lt(2,"div",2),Ze(3,ose,7,10,"ng-container",3),Ze(4,ase,1,0,"ng-container",4),Ze(5,lse,2,0,"button",5),ct()()),2&e&&(Ur(n.message.styleClass),ve("ngClass",Bi(10,cse,"p-toast-message-"+n.message.severity))("@messageState",Bi(17,dse,Ff(12,use,n.showTransformOptions,n.hideTransformOptions,n.showTransitionOptions,n.hideTransitionOptions))),mr("id",n.message.id),Me(2),ve("ngClass",n.message.contentStyleClass),Me(1),ve("ngIf",!n.template),Me(1),ve("ngTemplateOutlet",n.template)("ngTemplateOutletContext",Bi(19,hse,n.message)),Me(1),ve("ngIf",!1!==n.message.closable))},dependencies:[bo,Wo,rc,_d],encapsulation:2,data:{animation:[oy("messageState",[_0("visible",Qa({transform:"translateY(0)",opacity:1})),Eu("void => *",[Qa({transform:"{{showTransformParams}}",opacity:0}),Cc("{{showTransitionParams}}")]),Eu("* => void",[Cc("{{hideTransitionParams}}",Qa({height:0,opacity:0,transform:"{{hideTransformParams}}"}))])])]},changeDetection:0}),i})(),q1=(()=>{class i{constructor(e,n,r){this.messageService=e,this.cd=n,this.config=r,this.autoZIndex=!0,this.baseZIndex=0,this.position="top-right",this.preventOpenDuplicates=!1,this.preventDuplicates=!1,this.showTransformOptions="translateY(100%)",this.hideTransformOptions="translateY(-100%)",this.showTransitionOptions="300ms ease-out",this.hideTransitionOptions="250ms ease-in",this.onClose=new qn,this.id=nw()}ngOnInit(){this.messageSubscription=this.messageService.messageObserver.subscribe(e=>{if(e)if(e instanceof Array){const n=e.filter(r=>this.canAdd(r));this.add(n)}else this.canAdd(e)&&this.add([e])}),this.clearSubscription=this.messageService.clearObserver.subscribe(e=>{e?this.key===e&&(this.messages=null):this.messages=null,this.cd.markForCheck()})}ngAfterViewInit(){this.breakpoints&&this.createStyle()}add(e){this.messages=this.messages?[...this.messages,...e]:[...e],this.preventDuplicates&&(this.messagesArchieve=this.messagesArchieve?[...this.messagesArchieve,...e]:[...e]),this.cd.markForCheck()}canAdd(e){let n=this.key===e.key;return n&&this.preventOpenDuplicates&&(n=!this.containsMessage(this.messages,e)),n&&this.preventDuplicates&&(n=!this.containsMessage(this.messagesArchieve,e)),n}containsMessage(e,n){return!!e&&null!=e.find(r=>r.summary===n.summary&&r.detail==n.detail&&r.severity===n.severity)}ngAfterContentInit(){this.templates.forEach(e=>{e.getType(),this.template=e.template})}onMessageClose(e){this.messages.splice(e.index,1),this.onClose.emit({message:e.message}),this.cd.detectChanges()}onAnimationStart(e){"void"===e.fromState&&(this.containerViewChild.nativeElement.setAttribute(this.id,""),this.autoZIndex&&""===this.containerViewChild.nativeElement.style.zIndex&&Dl.set("modal",this.containerViewChild.nativeElement,this.baseZIndex||this.config.zIndex.modal))}onAnimationEnd(e){"void"===e.toState&&this.autoZIndex&&fr.isEmpty(this.messages)&&Dl.clear(this.containerViewChild.nativeElement)}createStyle(){if(!this.styleElement){this.styleElement=document.createElement("style"),this.styleElement.type="text/css",document.head.appendChild(this.styleElement);let e="";for(let n in this.breakpoints){let r="";for(let s in this.breakpoints[n])r+=s+":"+this.breakpoints[n][s]+" !important;";e+=`\n                    @media screen and (max-width: ${n}) {\n                        .p-toast[${this.id}] {\n                           ${r}\n                        }\n                    }\n                `}this.styleElement.innerHTML=e}}destroyStyle(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}ngOnDestroy(){this.messageSubscription&&this.messageSubscription.unsubscribe(),this.containerViewChild&&this.autoZIndex&&Dl.clear(this.containerViewChild.nativeElement),this.clearSubscription&&this.clearSubscription.unsubscribe(),this.destroyStyle()}}return i.\u0275fac=function(e){return new(e||i)(Zt(fm),Zt(Zo),Zt(Tp))},i.\u0275cmp=Ir({type:i,selectors:[["p-toast"]],contentQueries:function(e,n,r){if(1&e&&cl(r,_l,4),2&e){let s;vr(s=yr())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&vs(c4,5),2&e){let r;vr(r=yr())&&(n.containerViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{key:"key",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",style:"style",styleClass:"styleClass",position:"position",preventOpenDuplicates:"preventOpenDuplicates",preventDuplicates:"preventDuplicates",showTransformOptions:"showTransformOptions",hideTransformOptions:"hideTransformOptions",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",breakpoints:"breakpoints"},outputs:{onClose:"onClose"},decls:3,vars:5,consts:[[3,"ngClass","ngStyle"],["container",""],[3,"message","index","template","showTransformOptions","hideTransformOptions","showTransitionOptions","hideTransitionOptions","onClose",4,"ngFor","ngForOf"],[3,"message","index","template","showTransformOptions","hideTransformOptions","showTransitionOptions","hideTransitionOptions","onClose"]],template:function(e,n){1&e&&(lt(0,"div",0,1),Ze(2,fse,1,8,"p-toastItem",2),ct()),2&e&&(Ur(n.styleClass),ve("ngClass","p-toast p-component p-toast-"+n.position)("ngStyle",n.style),Me(2),ve("ngForOf",n.messages))},dependencies:[bo,Su,Qo,pse],styles:[".p-toast{position:fixed;width:25rem}.p-toast-message{overflow:hidden}.p-toast-message-content{display:flex;align-items:flex-start}.p-toast-message-text{flex:1 1 auto}.p-toast-top-right{top:20px;right:20px}.p-toast-top-left{top:20px;left:20px}.p-toast-bottom-left{bottom:20px;left:20px}.p-toast-bottom-right{bottom:20px;right:20px}.p-toast-top-center{top:20px;left:50%;transform:translate(-50%)}.p-toast-bottom-center{bottom:20px;left:50%;transform:translate(-50%)}.p-toast-center{left:50%;top:50%;min-width:20vw;transform:translate(-50%,-50%)}.p-toast-icon-close{display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-toast-icon-close.p-link{cursor:pointer}\n"],encapsulation:2,data:{animation:[oy("toastAnimation",[Eu(":enter, :leave",[xJ("@*",CJ())])])]},changeDetection:0}),i})(),u4=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({imports:[Ns,$c,Na]}),i})();function gse(i,t){1&i&&ii(0,"span",11),2&i&&ve("innerHTML",_e(2).$implicit.summary,wa)}function mse(i,t){1&i&&ii(0,"span",12),2&i&&ve("innerHTML",_e(2).$implicit.detail,wa)}function vse(i,t){if(1&i&&(qr(0),Ze(1,gse,1,1,"span",9),Ze(2,mse,1,1,"span",10),Xr()),2&i){const e=_e().$implicit;Me(1),ve("ngIf",e.summary),Me(1),ve("ngIf",e.detail)}}function yse(i,t){if(1&i&&(lt(0,"span",15),qi(1),ct()),2&i){const e=_e(2).$implicit;Me(1),as(e.summary)}}function _se(i,t){if(1&i&&(lt(0,"span",16),qi(1),ct()),2&i){const e=_e(2).$implicit;Me(1),as(e.detail)}}function bse(i,t){if(1&i&&(Ze(0,yse,2,1,"span",13),Ze(1,_se,2,1,"span",14)),2&i){const e=_e().$implicit;ve("ngIf",e.summary),Me(1),ve("ngIf",e.detail)}}function Cse(i,t){if(1&i){const e=Pi();lt(0,"button",17),fn("click",function(){wt(e);const r=_e().index;return At(_e(2).removeMessage(r))}),ii(1,"i",18),ct()}}const xse=function(i,t){return{showTransitionParams:i,hideTransitionParams:t}},wse=function(i){return{value:"visible",params:i}},Ase=function(i,t,e,n){return{"pi-info-circle":i,"pi-check":t,"pi-exclamation-triangle":e,"pi-times-circle":n}};function Ise(i,t){if(1&i&&(lt(0,"div",4)(1,"div",5),ii(2,"span",6),Ze(3,vse,3,2,"ng-container",1),Ze(4,bse,2,2,"ng-template",null,7,vc),Ze(6,Cse,2,0,"button",8),ct()()),2&i){const e=t.$implicit,n=co(5),r=_e(2);Ur("p-message p-message-"+e.severity),ve("@messageAnimation",Bi(12,wse,ys(9,xse,r.showTransitionOptions,r.hideTransitionOptions))),Me(2),Ur("p-message-icon pi"+(e.icon?" "+e.icon:"")),ve("ngClass",Ff(14,Ase,"info"===e.severity,"success"===e.severity,"warn"===e.severity,"error"===e.severity)),Me(1),ve("ngIf",!r.escape)("ngIfElse",n),Me(3),ve("ngIf",r.closable)}}function Sse(i,t){if(1&i&&(qr(0),Ze(1,Ise,7,19,"div",3),Xr()),2&i){const e=_e();Me(1),ve("ngForOf",e.value)}}function Ese(i,t){1&i&&Ki(0)}function Tse(i,t){if(1&i&&(lt(0,"div",19)(1,"div",5),Ze(2,Ese,1,0,"ng-container",20),ct()()),2&i){const e=_e();ve("ngClass","p-message p-message-"+e.severity),Me(2),ve("ngTemplateOutlet",e.contentTemplate)}}let Mse=(()=>{class i{constructor(e,n,r){this.messageService=e,this.el=n,this.cd=r,this.closable=!0,this.enableService=!0,this.escape=!0,this.showTransitionOptions="300ms ease-out",this.hideTransitionOptions="200ms cubic-bezier(0.86, 0, 0.07, 1)",this.valueChange=new qn}ngAfterContentInit(){this.templates.forEach(e=>{e.getType(),this.contentTemplate=e.template}),this.messageService&&this.enableService&&!this.contentTemplate&&(this.messageSubscription=this.messageService.messageObserver.subscribe(e=>{if(e){if(e instanceof Array){let n=e.filter(r=>this.key===r.key);this.value=this.value?[...this.value,...n]:[...n]}else this.key===e.key&&(this.value=this.value?[...this.value,e]:[e]);this.cd.markForCheck()}}),this.clearSubscription=this.messageService.clearObserver.subscribe(e=>{e?this.key===e&&(this.value=null):this.value=null,this.cd.markForCheck()}))}hasMessages(){let e=this.el.nativeElement.parentElement;return!(!e||!e.offsetParent)&&(null!=this.contentTemplate||this.value&&this.value.length>0)}clear(){this.value=[],this.valueChange.emit(this.value)}removeMessage(e){this.value=this.value.filter((n,r)=>r!==e),this.valueChange.emit(this.value)}get icon(){const e=this.severity||(this.hasMessages()?this.value[0].severity:null);if(this.hasMessages())switch(e){case"success":return"pi-check";case"info":default:return"pi-info-circle";case"error":return"pi-times";case"warn":return"pi-exclamation-triangle"}return null}ngOnDestroy(){this.messageSubscription&&this.messageSubscription.unsubscribe(),this.clearSubscription&&this.clearSubscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(Zt(fm,8),Zt(Xn),Zt(Zo))},i.\u0275cmp=Ir({type:i,selectors:[["p-messages"]],contentQueries:function(e,n,r){if(1&e&&cl(r,_l,4),2&e){let s;vr(s=yr())&&(n.templates=s)}},hostAttrs:[1,"p-element"],inputs:{value:"value",closable:"closable",style:"style",styleClass:"styleClass",enableService:"enableService",key:"key",escape:"escape",severity:"severity",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{valueChange:"valueChange"},decls:4,vars:5,consts:[["role","alert",1,"p-messages","p-component",3,"ngStyle"],[4,"ngIf","ngIfElse"],["staticMessage",""],["role","alert",3,"class",4,"ngFor","ngForOf"],["role","alert"],[1,"p-message-wrapper"],[3,"ngClass"],["escapeOut",""],["class","p-message-close p-link","type","button","pRipple","",3,"click",4,"ngIf"],["class","p-message-summary",3,"innerHTML",4,"ngIf"],["class","p-message-detail",3,"innerHTML",4,"ngIf"],[1,"p-message-summary",3,"innerHTML"],[1,"p-message-detail",3,"innerHTML"],["class","p-message-summary",4,"ngIf"],["class","p-message-detail",4,"ngIf"],[1,"p-message-summary"],[1,"p-message-detail"],["type","button","pRipple","",1,"p-message-close","p-link",3,"click"],[1,"p-message-close-icon","pi","pi-times"],["role","alert",3,"ngClass"],[4,"ngTemplateOutlet"]],template:function(e,n){if(1&e&&(lt(0,"div",0),Ze(1,Sse,2,1,"ng-container",1),Ze(2,Tse,3,2,"ng-template",null,2,vc),ct()),2&e){const r=co(3);Ur(n.styleClass),ve("ngStyle",n.style),Me(1),ve("ngIf",!n.contentTemplate)("ngIfElse",r)}},dependencies:[bo,Su,Wo,rc,Qo,_d],styles:[".p-message-wrapper{display:flex;align-items:center}.p-message-close{display:flex;align-items:center;justify-content:center}.p-message-close.p-link{margin-left:auto;overflow:hidden;position:relative}.p-messages .p-message.ng-animating{overflow:hidden}\n"],encapsulation:2,data:{animation:[oy("messageAnimation",[Eu(":enter",[Qa({opacity:0,transform:"translateY(-25%)"}),Cc("{{showTransitionParams}}")]),Eu(":leave",[Cc("{{hideTransitionParams}}",Qa({height:0,marginTop:0,marginBottom:0,marginLeft:0,marginRight:0,opacity:0}))])])]},changeDetection:0}),i})(),d4=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({imports:[Ns,$c]}),i})();function Dse(i,t){if(1&i&&(lt(0,"div",5),qi(1),ct()),2&i){const e=_e(2);tf("display",null!=e.value&&0!==e.value?"flex":"none"),Me(1),vI("",e.value,"",e.unit,"")}}function Lse(i,t){if(1&i&&(lt(0,"div",3),Ze(1,Dse,2,4,"div",4),ct()),2&i){const e=_e();tf("width",e.value+"%"),Me(1),ve("ngIf",e.showValue)}}function Pse(i,t){1&i&&(lt(0,"div",6),ii(1,"div",7),ct())}const Rse=function(i,t){return{"p-progressbar p-component":!0,"p-progressbar-determinate":i,"p-progressbar-indeterminate":t}};let kse=(()=>{class i{constructor(){this.showValue=!0,this.unit="%",this.mode="determinate"}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=Ir({type:i,selectors:[["p-progressBar"]],hostAttrs:[1,"p-element"],inputs:{value:"value",showValue:"showValue",style:"style",styleClass:"styleClass",unit:"unit",mode:"mode"},decls:3,vars:10,consts:[["role","progressbar","aria-valuemin","0","aria-valuemax","100",3,"ngStyle","ngClass"],["class","p-progressbar-value p-progressbar-value-animate","style","display:flex",3,"width",4,"ngIf"],["class","p-progressbar-indeterminate-container",4,"ngIf"],[1,"p-progressbar-value","p-progressbar-value-animate",2,"display","flex"],["class","p-progressbar-label",3,"display",4,"ngIf"],[1,"p-progressbar-label"],[1,"p-progressbar-indeterminate-container"],[1,"p-progressbar-value","p-progressbar-value-animate"]],template:function(e,n){1&e&&(lt(0,"div",0),Ze(1,Lse,2,3,"div",1),Ze(2,Pse,2,0,"div",2),ct()),2&e&&(Ur(n.styleClass),ve("ngStyle",n.style)("ngClass",ys(7,Rse,"determinate"===n.mode,"indeterminate"===n.mode)),mr("aria-valuenow",n.value),Me(1),ve("ngIf","determinate"===n.mode),Me(1),ve("ngIf","indeterminate"===n.mode))},dependencies:[bo,Wo,Qo],styles:['.p-progressbar{position:relative;overflow:hidden}.p-progressbar-determinate .p-progressbar-value{height:100%;width:0%;position:absolute;display:none;border:0 none;display:flex;align-items:center;justify-content:center;overflow:hidden}.p-progressbar-determinate .p-progressbar-label{display:inline-flex}.p-progressbar-determinate .p-progressbar-value-animate{transition:width 1s ease-in-out}.p-progressbar-indeterminate .p-progressbar-value:before{content:"";position:absolute;background-color:inherit;top:0;left:0;bottom:0;will-change:left,right;animation:p-progressbar-indeterminate-anim 2.1s cubic-bezier(.65,.815,.735,.395) infinite}.p-progressbar-indeterminate .p-progressbar-value:after{content:"";position:absolute;background-color:inherit;top:0;left:0;bottom:0;will-change:left,right;animation:p-progressbar-indeterminate-anim-short 2.1s cubic-bezier(.165,.84,.44,1) infinite;animation-delay:1.15s}@keyframes p-progressbar-indeterminate-anim{0%{left:-35%;right:100%}60%{left:100%;right:-90%}to{left:100%;right:-90%}}@keyframes p-progressbar-indeterminate-anim-short{0%{left:-200%;right:100%}60%{left:107%;right:-8%}to{left:107%;right:-8%}}\n'],encapsulation:2,changeDetection:0}),i})(),V2=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({imports:[Ns]}),i})();const Ose=["advancedfileinput"],Fse=["basicfileinput"],Nse=["content"];function Bse(i,t){if(1&i){const e=Pi();lt(0,"p-button",17),fn("onClick",function(){return wt(e),At(_e(2).upload())}),ct()}if(2&i){const e=_e(2);ve("label",e.uploadButtonLabel)("icon",e.uploadIcon)("disabled",!e.hasFiles()||e.isFileLimitExceeded())}}function zse(i,t){if(1&i){const e=Pi();lt(0,"p-button",17),fn("onClick",function(){return wt(e),At(_e(2).clear())}),ct()}if(2&i){const e=_e(2);ve("label",e.cancelButtonLabel)("icon",e.cancelIcon)("disabled",!e.hasFiles()||e.uploading)}}function Vse(i,t){1&i&&Ki(0)}function Use(i,t){1&i&&ii(0,"p-progressBar",18),2&i&&ve("value",_e(2).progress)("showValue",!1)}function Hse(i,t){if(1&i&&ii(0,"img",26),2&i){const e=_e().$implicit,n=_e(4);ve("src",e.objectURL,qd)("width",n.previewWidth)}}function Gse(i,t){if(1&i){const e=Pi();lt(0,"div",22)(1,"div"),Ze(2,Hse,1,2,"img",23),ct(),lt(3,"div",24),qi(4),ct(),lt(5,"div"),qi(6),ct(),lt(7,"div")(8,"button",25),fn("click",function(r){const o=wt(e).index;return At(_e(4).remove(r,o))}),ct()()()}if(2&i){const e=t.$implicit,n=_e(4);Me(2),ve("ngIf",n.isImage(e)),Me(2),as(e.name),Me(2),as(n.formatSize(e.size)),Me(2),ve("disabled",n.uploading)}}function Wse(i,t){if(1&i&&(lt(0,"div"),Ze(1,Gse,9,4,"div",21),ct()),2&i){const e=_e(3);Me(1),ve("ngForOf",e.files)}}function jse(i,t){}function $se(i,t){if(1&i&&(lt(0,"div"),Ze(1,jse,0,0,"ng-template",27),ct()),2&i){const e=_e(3);Me(1),ve("ngForOf",e.files)("ngForTemplate",e.fileTemplate)}}function qse(i,t){if(1&i&&(lt(0,"div",19),Ze(1,Wse,2,1,"div",20),Ze(2,$se,2,2,"div",20),ct()),2&i){const e=_e(2);Me(1),ve("ngIf",!e.fileTemplate),Me(1),ve("ngIf",e.fileTemplate)}}function Xse(i,t){1&i&&Ki(0)}const Yse=function(i,t){return{"p-focus":i,"p-disabled":t}},Kse=function(i){return{$implicit:i}};function Zse(i,t){if(1&i){const e=Pi();lt(0,"div",2)(1,"div",3)(2,"span",4),fn("focus",function(){return wt(e),At(_e().onFocus())})("blur",function(){return wt(e),At(_e().onBlur())})("click",function(){return wt(e),At(_e().choose())})("keydown.enter",function(){return wt(e),At(_e().choose())}),lt(3,"input",5,6),fn("change",function(r){return wt(e),At(_e().onFileSelect(r))}),ct(),ii(5,"span",7),lt(6,"span",8),qi(7),ct()(),Ze(8,Bse,1,3,"p-button",9),Ze(9,zse,1,3,"p-button",9),Ze(10,Vse,1,0,"ng-container",10),ct(),lt(11,"div",11,12),fn("dragenter",function(r){return wt(e),At(_e().onDragEnter(r))})("dragleave",function(r){return wt(e),At(_e().onDragLeave(r))})("drop",function(r){return wt(e),At(_e().onDrop(r))}),Ze(13,Use,1,2,"p-progressBar",13),ii(14,"p-messages",14),Ze(15,qse,3,2,"div",15),Ze(16,Xse,1,0,"ng-container",16),ct()()}if(2&i){const e=_e();Ur(e.styleClass),ve("ngClass","p-fileupload p-fileupload-advanced p-component")("ngStyle",e.style),Me(2),ve("ngClass",ys(22,Yse,e.focus,e.disabled||e.isChooseDisabled())),Me(1),ve("multiple",e.multiple)("accept",e.accept)("disabled",e.disabled||e.isChooseDisabled()),mr("title",""),Me(2),Ur(e.chooseIcon),ve("ngClass","p-button-icon p-button-icon-left"),Me(2),as(e.chooseButtonLabel),Me(1),ve("ngIf",!e.auto&&e.showUploadButton),Me(1),ve("ngIf",!e.auto&&e.showCancelButton),Me(1),ve("ngTemplateOutlet",e.toolbarTemplate),Me(3),ve("ngIf",e.hasFiles()),Me(1),ve("value",e.msgs)("enableService",!1),Me(1),ve("ngIf",e.hasFiles()),Me(1),ve("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",Bi(25,Kse,e.files))}}function Qse(i,t){if(1&i){const e=Pi();lt(0,"input",32,33),fn("change",function(r){return wt(e),At(_e(2).onFileSelect(r))})("focus",function(){return wt(e),At(_e(2).onFocus())})("blur",function(){return wt(e),At(_e(2).onBlur())}),ct()}if(2&i){const e=_e(2);ve("accept",e.accept)("multiple",e.multiple)("disabled",e.disabled)}}const Jse=function(i,t,e,n){return{"p-button p-component p-fileupload-choose":!0,"p-button-icon-only":i,"p-fileupload-choose-selected":t,"p-focus":e,"p-disabled":n}};function eoe(i,t){if(1&i){const e=Pi();lt(0,"div",28),ii(1,"p-messages",14),lt(2,"span",29),fn("mouseup",function(){return wt(e),At(_e().onBasicUploaderClick())})("keydown",function(r){return wt(e),At(_e().onBasicKeydown(r))}),ii(3,"span",30),lt(4,"span",8),qi(5),ct(),Ze(6,Qse,2,3,"input",31),ct()()}if(2&i){const e=_e();Me(1),ve("value",e.msgs)("enableService",!1),Me(1),Ur(e.styleClass),ve("ngClass",Ff(9,Jse,!e.chooseLabel,e.hasFiles(),e.focus,e.disabled))("ngStyle",e.style),Me(1),ve("ngClass",e.hasFiles()&&!e.auto?e.uploadIcon:e.chooseIcon),Me(2),as(e.auto?e.chooseLabel:e.hasFiles()?e.files[0].name:e.chooseLabel),Me(1),ve("ngIf",!e.hasFiles())}}let h4=(()=>{class i{constructor(e,n,r,s,o,l){this.el=e,this.sanitizer=n,this.zone=r,this.http=s,this.cd=o,this.config=l,this.method="post",this.invalidFileSizeMessageSummary="{0}: Invalid file size, ",this.invalidFileSizeMessageDetail="maximum upload size is {0}.",this.invalidFileTypeMessageSummary="{0}: Invalid file type, ",this.invalidFileTypeMessageDetail="allowed file types: {0}.",this.invalidFileLimitMessageDetail="limit is {0} at most.",this.invalidFileLimitMessageSummary="Maximum number of files exceeded, ",this.previewWidth=50,this.chooseIcon="pi pi-plus",this.uploadIcon="pi pi-upload",this.cancelIcon="pi pi-times",this.showUploadButton=!0,this.showCancelButton=!0,this.mode="advanced",this.onBeforeUpload=new qn,this.onSend=new qn,this.onUpload=new qn,this.onError=new qn,this.onClear=new qn,this.onRemove=new qn,this.onSelect=new qn,this.onProgress=new qn,this.uploadHandler=new qn,this._files=[],this.progress=0,this.uploadedFileCount=0}set files(e){this._files=[];for(let n=0;n<e.length;n++){let r=e[n];this.validate(r)&&(this.isImage(r)&&(r.objectURL=this.sanitizer.bypassSecurityTrustUrl(window.URL.createObjectURL(e[n]))),this._files.push(e[n]))}}get files(){return this._files}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"file":default:this.fileTemplate=e.template;break;case"content":this.contentTemplate=e.template;break;case"toolbar":this.toolbarTemplate=e.template}})}ngOnInit(){this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.cd.markForCheck()})}ngAfterViewInit(){"advanced"===this.mode&&this.zone.runOutsideAngular(()=>{this.content&&this.content.nativeElement.addEventListener("dragover",this.onDragOver.bind(this))})}choose(){this.advancedFileInput.nativeElement.click()}onFileSelect(e){if("drop"!==e.type&&this.isIE11()&&this.duplicateIEEvent)return void(this.duplicateIEEvent=!1);this.msgs=[],this.multiple||(this.files=[]);let n=e.dataTransfer?e.dataTransfer.files:e.target.files;for(let r=0;r<n.length;r++){let s=n[r];this.isFileSelected(s)||this.validate(s)&&(this.isImage(s)&&(s.objectURL=this.sanitizer.bypassSecurityTrustUrl(window.URL.createObjectURL(n[r]))),this.files.push(n[r]))}this.onSelect.emit({originalEvent:e,files:n,currentFiles:this.files}),this.fileLimit&&"advanced"==this.mode&&this.checkFileLimit(),this.hasFiles()&&this.auto&&("advanced"!==this.mode||!this.isFileLimitExceeded())&&this.upload(),"drop"!==e.type&&this.isIE11()?this.clearIEInput():this.clearInputElement()}isFileSelected(e){for(let n of this.files)if(n.name+n.type+n.size===e.name+e.type+e.size)return!0;return!1}isIE11(){return!!window.MSInputMethodContext&&!!document.documentMode}validate(e){return this.accept&&!this.isFileTypeValid(e)?(this.msgs.push({severity:"error",summary:this.invalidFileTypeMessageSummary.replace("{0}",e.name),detail:this.invalidFileTypeMessageDetail.replace("{0}",this.accept)}),!1):!(this.maxFileSize&&e.size>this.maxFileSize&&(this.msgs.push({severity:"error",summary:this.invalidFileSizeMessageSummary.replace("{0}",e.name),detail:this.invalidFileSizeMessageDetail.replace("{0}",this.formatSize(this.maxFileSize))}),1))}isFileTypeValid(e){let n=this.accept.split(",").map(r=>r.trim());for(let r of n)if(this.isWildcard(r)?this.getTypeClass(e.type)===this.getTypeClass(r):e.type==r||this.getFileExtension(e).toLowerCase()===r.toLowerCase())return!0;return!1}getTypeClass(e){return e.substring(0,e.indexOf("/"))}isWildcard(e){return-1!==e.indexOf("*")}getFileExtension(e){return"."+e.name.split(".").pop()}isImage(e){return/^image\//.test(e.type)}onImageLoad(e){window.URL.revokeObjectURL(e.src)}upload(){if(this.customUpload)this.fileLimit&&(this.uploadedFileCount+=this.files.length),this.uploadHandler.emit({files:this.files}),this.cd.markForCheck();else{this.uploading=!0,this.msgs=[];let e=new FormData;this.onBeforeUpload.emit({formData:e});for(let n=0;n<this.files.length;n++)e.append(this.name,this.files[n],this.files[n].name);this.http[this.method](this.url,e,{headers:this.headers,reportProgress:!0,observe:"events",withCredentials:this.withCredentials}).subscribe(n=>{switch(n.type){case _c.Sent:this.onSend.emit({originalEvent:n,formData:e});break;case _c.Response:this.uploading=!1,this.progress=0,n.status>=200&&n.status<300?(this.fileLimit&&(this.uploadedFileCount+=this.files.length),this.onUpload.emit({originalEvent:n,files:this.files})):this.onError.emit({files:this.files}),this.clear();break;case _c.UploadProgress:n.loaded&&(this.progress=Math.round(100*n.loaded/n.total)),this.onProgress.emit({originalEvent:n,progress:this.progress})}this.cd.markForCheck()},n=>{this.uploading=!1,this.onError.emit({files:this.files,error:n})})}}clear(){this.files=[],this.onClear.emit(),this.clearInputElement(),this.cd.markForCheck()}remove(e,n){this.clearInputElement(),this.onRemove.emit({originalEvent:e,file:this.files[n]}),this.files.splice(n,1)}isFileLimitExceeded(){return this.fileLimit&&this.fileLimit<=this.files.length+this.uploadedFileCount&&this.focus&&(this.focus=!1),this.fileLimit&&this.fileLimit<this.files.length+this.uploadedFileCount}isChooseDisabled(){return this.fileLimit&&this.fileLimit<=this.files.length+this.uploadedFileCount}checkFileLimit(){this.isFileLimitExceeded()&&this.msgs.push({severity:"error",summary:this.invalidFileLimitMessageSummary.replace("{0}",this.fileLimit.toString()),detail:this.invalidFileLimitMessageDetail.replace("{0}",this.fileLimit.toString())})}clearInputElement(){this.advancedFileInput&&this.advancedFileInput.nativeElement&&(this.advancedFileInput.nativeElement.value=""),this.basicFileInput&&this.basicFileInput.nativeElement&&(this.basicFileInput.nativeElement.value="")}clearIEInput(){this.advancedFileInput&&this.advancedFileInput.nativeElement&&(this.duplicateIEEvent=!0,this.advancedFileInput.nativeElement.value="")}hasFiles(){return this.files&&this.files.length>0}onDragEnter(e){this.disabled||(e.stopPropagation(),e.preventDefault())}onDragOver(e){this.disabled||(Kt.addClass(this.content.nativeElement,"p-fileupload-highlight"),this.dragHighlight=!0,e.stopPropagation(),e.preventDefault())}onDragLeave(e){this.disabled||Kt.removeClass(this.content.nativeElement,"p-fileupload-highlight")}onDrop(e){if(!this.disabled){Kt.removeClass(this.content.nativeElement,"p-fileupload-highlight"),e.stopPropagation(),e.preventDefault();let n=e.dataTransfer?e.dataTransfer.files:e.target.files;(this.multiple||n&&1===n.length)&&this.onFileSelect(e)}}onFocus(){this.focus=!0}onBlur(){this.focus=!1}formatSize(e){if(0==e)return"0 B";let o=Math.floor(Math.log(e)/Math.log(1e3));return parseFloat((e/Math.pow(1e3,o)).toFixed(3))+" "+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][o]}onBasicUploaderClick(){this.hasFiles()?this.upload():this.basicFileInput.nativeElement.click()}onBasicKeydown(e){switch(e.code){case"Space":case"Enter":this.onBasicUploaderClick(),e.preventDefault()}}getBlockableElement(){return this.el.nativeElement.children[0]}get chooseButtonLabel(){return this.chooseLabel||this.config.getTranslation(Wc.CHOOSE)}get uploadButtonLabel(){return this.uploadLabel||this.config.getTranslation(Wc.UPLOAD)}get cancelButtonLabel(){return this.cancelLabel||this.config.getTranslation(Wc.CANCEL)}ngOnDestroy(){this.content&&this.content.nativeElement&&this.content.nativeElement.removeEventListener("dragover",this.onDragOver),this.translationSubscription&&this.translationSubscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(Zt(Xn),Zt(t3),Zt(Ko),Zt(lD),Zt(Zo),Zt(Tp))},i.\u0275cmp=Ir({type:i,selectors:[["p-fileUpload"]],contentQueries:function(e,n,r){if(1&e&&cl(r,_l,4),2&e){let s;vr(s=yr())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(vs(Ose,5),vs(Fse,5),vs(Nse,5)),2&e){let r;vr(r=yr())&&(n.advancedFileInput=r.first),vr(r=yr())&&(n.basicFileInput=r.first),vr(r=yr())&&(n.content=r.first)}},hostAttrs:[1,"p-element"],inputs:{name:"name",url:"url",method:"method",multiple:"multiple",accept:"accept",disabled:"disabled",auto:"auto",withCredentials:"withCredentials",maxFileSize:"maxFileSize",invalidFileSizeMessageSummary:"invalidFileSizeMessageSummary",invalidFileSizeMessageDetail:"invalidFileSizeMessageDetail",invalidFileTypeMessageSummary:"invalidFileTypeMessageSummary",invalidFileTypeMessageDetail:"invalidFileTypeMessageDetail",invalidFileLimitMessageDetail:"invalidFileLimitMessageDetail",invalidFileLimitMessageSummary:"invalidFileLimitMessageSummary",style:"style",styleClass:"styleClass",previewWidth:"previewWidth",chooseLabel:"chooseLabel",uploadLabel:"uploadLabel",cancelLabel:"cancelLabel",chooseIcon:"chooseIcon",uploadIcon:"uploadIcon",cancelIcon:"cancelIcon",showUploadButton:"showUploadButton",showCancelButton:"showCancelButton",mode:"mode",headers:"headers",customUpload:"customUpload",fileLimit:"fileLimit",files:"files"},outputs:{onBeforeUpload:"onBeforeUpload",onSend:"onSend",onUpload:"onUpload",onError:"onError",onClear:"onClear",onRemove:"onRemove",onSelect:"onSelect",onProgress:"onProgress",uploadHandler:"uploadHandler"},decls:2,vars:2,consts:[[3,"ngClass","ngStyle","class",4,"ngIf"],["class","p-fileupload p-fileupload-basic p-component",4,"ngIf"],[3,"ngClass","ngStyle"],[1,"p-fileupload-buttonbar"],["pRipple","","tabindex","0",1,"p-button","p-component","p-fileupload-choose",3,"ngClass","focus","blur","click","keydown.enter"],["type","file",3,"multiple","accept","disabled","change"],["advancedfileinput",""],[3,"ngClass"],[1,"p-button-label"],["type","button",3,"label","icon","disabled","onClick",4,"ngIf"],[4,"ngTemplateOutlet"],[1,"p-fileupload-content",3,"dragenter","dragleave","drop"],["content",""],[3,"value","showValue",4,"ngIf"],[3,"value","enableService"],["class","p-fileupload-files",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["type","button",3,"label","icon","disabled","onClick"],[3,"value","showValue"],[1,"p-fileupload-files"],[4,"ngIf"],["class","p-fileupload-row",4,"ngFor","ngForOf"],[1,"p-fileupload-row"],[3,"src","width",4,"ngIf"],[1,"p-fileupload-filename"],["type","button","icon","pi pi-times","pButton","",3,"disabled","click"],[3,"src","width"],["ngFor","",3,"ngForOf","ngForTemplate"],[1,"p-fileupload","p-fileupload-basic","p-component"],["tabindex","0","pRipple","",3,"ngClass","ngStyle","mouseup","keydown"],[1,"p-button-icon","p-button-icon-left","pi",3,"ngClass"],["type","file",3,"accept","multiple","disabled","change","focus","blur",4,"ngIf"],["type","file",3,"accept","multiple","disabled","change","focus","blur"],["basicfileinput",""]],template:function(e,n){1&e&&(Ze(0,Zse,17,27,"div",0),Ze(1,eoe,7,14,"div",1)),2&e&&(ve("ngIf","advanced"===n.mode),Me(1),ve("ngIf","basic"===n.mode))},dependencies:[bo,Su,Wo,rc,Qo,cC,U1,kse,Mse,_d],styles:[".p-fileupload-content{position:relative}.p-fileupload-row{display:flex;align-items:center}.p-fileupload-row>div{flex:1 1 auto;width:25%}.p-fileupload-row>div:last-child{text-align:right}.p-fileupload-content .p-progressbar{width:100%;position:absolute;top:0;left:0}.p-button.p-fileupload-choose{position:relative;overflow:hidden}.p-button.p-fileupload-choose input[type=file],.p-fileupload-choose.p-fileupload-choose-selected input[type=file]{display:none}.p-fluid .p-fileupload .p-button{width:auto}.p-fileupload-filename{word-break:break-all}\n"],encapsulation:2,changeDetection:0}),i})(),toe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({imports:[Ns,Na,sv,V2,d4,$c,Na,sv,V2,d4]}),i})();function noe(i,t){1&i&&Ki(0)}function ioe(i,t){if(1&i&&(lt(0,"div",3),Ze(1,noe,1,0,"ng-container",4),ct()),2&i){const e=_e();Me(1),ve("ngTemplateOutlet",e.leftTemplate)}}function roe(i,t){1&i&&Ki(0)}function soe(i,t){if(1&i&&(lt(0,"div",5),Ze(1,roe,1,0,"ng-container",4),ct()),2&i){const e=_e();Me(1),ve("ngTemplateOutlet",e.rightTemplate)}}const ooe=["*"];let f4=(()=>{class i{constructor(e){this.el=e}getBlockableElement(){return this.el.nativeElement.children[0]}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"left":this.leftTemplate=e.template;break;case"right":this.rightTemplate=e.template}})}}return i.\u0275fac=function(e){return new(e||i)(Zt(Xn))},i.\u0275cmp=Ir({type:i,selectors:[["p-toolbar"]],contentQueries:function(e,n,r){if(1&e&&cl(r,_l,4),2&e){let s;vr(s=yr())&&(n.templates=s)}},hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass"},ngContentSelectors:ooe,decls:4,vars:6,consts:[["role","toolbar",3,"ngClass","ngStyle"],["class","p-toolbar-group-left",4,"ngIf"],["class","p-toolbar-group-right",4,"ngIf"],[1,"p-toolbar-group-left"],[4,"ngTemplateOutlet"],[1,"p-toolbar-group-right"]],template:function(e,n){1&e&&(dg(),lt(0,"div",0),$u(1),Ze(2,ioe,2,1,"div",1),Ze(3,soe,2,1,"div",2),ct()),2&e&&(Ur(n.styleClass),ve("ngClass","p-toolbar p-component")("ngStyle",n.style),Me(2),ve("ngIf",n.leftTemplate),Me(1),ve("ngIf",n.rightTemplate))},dependencies:[bo,Wo,rc,Qo],styles:[".p-toolbar{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap}.p-toolbar-group-left,.p-toolbar-group-right{display:flex;align-items:center}\n"],encapsulation:2,changeDetection:0}),i})(),aoe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({imports:[Ns]}),i})();function loe(i,t){1&i&&ii(0,"i",8),2&i&&(Ur(_e(2).confirmation.icon),ve("ngClass","p-confirm-popup-icon"))}function coe(i,t){if(1&i){const e=Pi();lt(0,"button",9),fn("click",function(){return wt(e),At(_e(2).reject())}),ct()}if(2&i){const e=_e(2);Ur(e.confirmation.rejectButtonStyleClass||"p-button-text"),ve("icon",e.confirmation.rejectIcon)("label",e.rejectButtonLabel)("ngClass","p-confirm-popup-reject p-button-sm"),mr("aria-label",e.rejectButtonLabel)}}function uoe(i,t){if(1&i){const e=Pi();lt(0,"button",9),fn("click",function(){return wt(e),At(_e(2).accept())}),ct()}if(2&i){const e=_e(2);Ur(e.confirmation.acceptButtonStyleClass),ve("icon",e.confirmation.acceptIcon)("label",e.acceptButtonLabel)("ngClass","p-confirm-popup-accept p-button-sm"),mr("aria-label",e.acceptButtonLabel)}}const doe=function(i,t){return{showTransitionParams:i,hideTransitionParams:t}},hoe=function(i){return{value:"open",params:i}};function foe(i,t){if(1&i){const e=Pi();lt(0,"div",1),fn("click",function(r){return wt(e),At(_e().onOverlayClick(r))})("@animation.start",function(r){return wt(e),At(_e().onAnimationStart(r))})("@animation.done",function(r){return wt(e),At(_e().onAnimationEnd(r))}),lt(1,"div",2,3),Ze(3,loe,1,3,"i",4),lt(4,"span",5),qi(5),ct()(),lt(6,"div",6),Ze(7,coe,1,6,"button",7),Ze(8,uoe,1,6,"button",7),ct()()}if(2&i){const e=_e();Ur(e.styleClass),ve("ngClass","p-confirm-popup p-component")("ngStyle",e.style)("@animation",Bi(12,hoe,ys(9,doe,e.showTransitionOptions,e.hideTransitionOptions))),Me(3),ve("ngIf",e.confirmation.icon),Me(2),as(e.confirmation.message),Me(2),ve("ngIf",!1!==e.confirmation.rejectVisible),Me(1),ve("ngIf",!1!==e.confirmation.acceptVisible)}}let p4=(()=>{class i{constructor(e,n,r,s,o,l){this.el=e,this.confirmationService=n,this.renderer=r,this.cd=s,this.config=o,this.overlayService=l,this.defaultFocus="accept",this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.autoZIndex=!0,this.baseZIndex=0,this.subscription=this.confirmationService.requireConfirmation$.subscribe(u=>{u?u.key===this.key&&(this.confirmation=u,this.confirmation.accept&&(this.confirmation.acceptEvent=new qn,this.confirmation.acceptEvent.subscribe(this.confirmation.accept)),this.confirmation.reject&&(this.confirmation.rejectEvent=new qn,this.confirmation.rejectEvent.subscribe(this.confirmation.reject)),this.visible=!0):this.hide()})}get visible(){return this._visible}set visible(e){this._visible=e,this.cd.markForCheck()}onAnimationStart(e){if("open"===e.toState){this.container=e.element,document.body.appendChild(this.container),this.align(),this.bindListeners();const n=this.getElementToFocus();n&&n.focus()}}onAnimationEnd(e){"void"===e.toState&&this.onContainerDestroy()}getElementToFocus(){switch(this.defaultFocus){case"accept":return Kt.findSingle(this.container,".p-confirm-popup-accept");case"reject":return Kt.findSingle(this.container,".p-confirm-popup-reject");case"none":return null}}align(){this.autoZIndex&&Dl.set("overlay",this.container,this.config.zIndex.overlay),Kt.absolutePosition(this.container,this.confirmation.target);const e=Kt.getOffset(this.container),n=Kt.getOffset(this.confirmation.target);let r=0;e.left<n.left&&(r=n.left-e.left),this.container.style.setProperty("--overlayArrowLeft",`${r}px`),e.top<n.top&&Kt.addClass(this.container,"p-confirm-popup-flipped")}hide(){this.visible=!1}accept(){this.confirmation.acceptEvent&&this.confirmation.acceptEvent.emit(),this.hide()}reject(){this.confirmation.rejectEvent&&this.confirmation.rejectEvent.emit(),this.hide()}onOverlayClick(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement})}bindListeners(){this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener()}unbindListeners(){this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener()}bindDocumentClickListener(){if(!this.documentClickListener){let e=Kt.isIOS()?"touchstart":"click";const n=this.el?this.el.nativeElement.ownerDocument:document;this.documentClickListener=this.renderer.listen(n,e,r=>{let s=this.confirmation.target;this.container!==r.target&&!this.container.contains(r.target)&&s!==r.target&&!s.contains(r.target)&&this.hide()})}}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}onWindowResize(){this.visible&&!Kt.isTouchDevice()&&this.hide()}bindDocumentResizeListener(){this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener)}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new xw(this.confirmation.target,()=>{this.visible&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}unsubscribeConfirmationSubscriptions(){this.confirmation&&(this.confirmation.acceptEvent&&this.confirmation.acceptEvent.unsubscribe(),this.confirmation.rejectEvent&&this.confirmation.rejectEvent.unsubscribe())}onContainerDestroy(){this.unbindListeners(),this.unsubscribeConfirmationSubscriptions(),this.autoZIndex&&Dl.clear(this.container),this.confirmation=null,this.container=null}restoreAppend(){this.container&&document.body.removeChild(this.container),this.onContainerDestroy()}get acceptButtonLabel(){return this.confirmation.acceptLabel||this.config.getTranslation(Wc.ACCEPT)}get rejectButtonLabel(){return this.confirmation.rejectLabel||this.config.getTranslation(Wc.REJECT)}ngOnDestroy(){this.restoreAppend(),this.subscription&&this.subscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(Zt(Xn),Zt(m1),Zt(h),Zt(Zo),Zt(Tp),Zt(iw))},i.\u0275cmp=Ir({type:i,selectors:[["p-confirmPopup"]],hostAttrs:[1,"p-element"],inputs:{key:"key",defaultFocus:"defaultFocus",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",style:"style",styleClass:"styleClass",visible:"visible"},decls:1,vars:1,consts:[[3,"ngClass","ngStyle","class","click",4,"ngIf"],[3,"ngClass","ngStyle","click"],[1,"p-confirm-popup-content"],["content",""],[3,"ngClass","class",4,"ngIf"],[1,"p-confirm-popup-message"],[1,"p-confirm-popup-footer"],["type","button","pButton","",3,"icon","label","ngClass","class","click",4,"ngIf"],[3,"ngClass"],["type","button","pButton","",3,"icon","label","ngClass","click"]],template:function(e,n){1&e&&Ze(0,foe,9,14,"div",0),2&e&&ve("ngIf",n.visible)},dependencies:[bo,Wo,Qo,cC],styles:['.p-confirm-popup{position:absolute;margin-top:10px;top:0;left:0}.p-confirm-popup-flipped{margin-top:0;margin-bottom:10px}.p-confirm-popup:after,.p-confirm-popup:before{bottom:100%;left:calc(var(--overlayArrowLeft, 0) + 1.25rem);content:" ";height:0;width:0;position:absolute;pointer-events:none}.p-confirm-popup:after{border-width:8px;margin-left:-8px}.p-confirm-popup:before{border-width:10px;margin-left:-10px}.p-confirm-popup-flipped:after,.p-confirm-popup-flipped:before{bottom:auto;top:100%}.p-confirm-popup.p-confirm-popup-flipped:after{border-bottom-color:transparent}.p-confirm-popup.p-confirm-popup-flipped:before{border-bottom-color:transparent}.p-confirm-popup .p-confirm-popup-content{display:flex;align-items:center}\n'],encapsulation:2,data:{animation:[oy("animation",[_0("void",Qa({transform:"scaleY(0.8)",opacity:0})),_0("open",Qa({transform:"translateY(0)",opacity:1})),Eu("void => open",Cc("{{showTransitionParams}}")),Eu("open => void",Cc("{{hideTransitionParams}}"))])]},changeDetection:0}),i})(),poe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({imports:[Ns,sv]}),i})();function goe(i,t){if(1&i){const e=Pi();lt(0,"span",13)(1,"input",14),fn("ngModelChange",function(r){return wt(e),At(_e().newGraph=r)}),ct(),lt(2,"label",15),qi(3,"Name"),ct(),lt(4,"button",16),fn("click",function(){wt(e);const r=_e();return At(r.openNew(r.newGraph))}),ct()()}if(2&i){const e=_e();Me(1),ve("ngModel",e.newGraph)}}function moe(i,t){}function voe(i,t){1&i&&(lt(0,"div",17)(1,"h5",18),qi(2,"Manage Graphs"),ct(),lt(3,"span",19),ii(4,"i",20)(5,"input",21),ct()())}function yoe(i,t){1&i&&(lt(0,"tr")(1,"th",22),ii(2,"p-tableHeaderCheckbox"),ct(),lt(3,"th",23),qi(4,"Label "),ii(5,"p-sortIcon",24),ct(),lt(6,"th"),qi(7,"Action(s) "),ct()())}function _oe(i,t){if(1&i){const e=Pi();lt(0,"tr")(1,"td"),ii(2,"p-tableCheckbox",25),ct(),lt(3,"td"),qi(4),ct(),lt(5,"td")(6,"button",26),fn("click",function(){const s=wt(e).$implicit;return At(_e().showImport(s))}),ct(),lt(7,"span"),qi(8,"\xa0"),ct(),lt(9,"button",27),fn("click",function(){const s=wt(e).$implicit;return At(_e().gexf(s))}),ct(),lt(10,"span"),qi(11,"\xa0"),ct(),lt(12,"button",28),fn("click",function(r){const o=wt(e).$implicit;return At(_e().confirm(r,o))}),ct(),lt(13,"span"),qi(14,"\xa0"),ct(),lt(15,"button",29),fn("click",function(){const s=wt(e).$implicit;return At(_e().selectCytoscape(s))}),ct(),lt(16,"span"),qi(17,"\xa0"),ct(),lt(18,"button",30),fn("click",function(){const s=wt(e).$implicit;return At(_e().selectThreejs(s))}),ct()()()}if(2&i){const e=t.$implicit;Me(2),ve("value",e),Me(2),as(e.label)}}function boe(i,t){if(1&i){const e=Pi();lt(0,"p-button",31),fn("click",function(){return wt(e),At(_e().displayExport=!1)}),ct()}}const Coe=function(){return["label"]},xoe=function(){return{width:"50vw"}};let woe=(()=>{class i{constructor(e,n,r,s,o,l,u,p){this.router=e,this.logger=n,this.graphsService=r,this.clipboardService=s,this.databaseService=o,this.confirmationService=l,this.messageService=u,this.store=p,this.graph=void 0,this.graphs=[],this.displayImport=!1,this.displayExport=!1,this.exportData=[],this.exportDataHtml="",this.Delete="false",this.xml=[],this.graph$=this.store.select(d2),this.graphs$=this.store.select(u2),this.graph$.subscribe(v=>{!v||(this.graph=v)}),this.graphs$.subscribe(v=>{!v||(this.graphs=_r.map(v,x=>({id:x.id,style:x.style,label:x.label,nodes:x.nodes,edges:x.edges})))})}ngOnInit(){let e=this.databaseService.findAllGraphs();this.store.dispatch(uw({graphs:e}))}confirm(e,n){this.confirmationService.confirm({target:e.target||void 0,message:"Are you sure that you want to proceed ?",icon:"pi pi-exclamation-triangle",accept:()=>{this.deleteGraph(n)},reject:()=>{}})}deleteGraph(e){let n=this.databaseService.deleteGraph(e);this.store.dispatch(uw({graphs:n}))}showImport(e){this.displayImport=!0,this.selectedGraph=e}openNew(e){if(e){this.databaseService.storeGraph({id:e,style:"default",label:e,edges:[],nodes:[]});let n=this.databaseService.findAllGraphs();this.store.dispatch(uw({graphs:n}))}}uploadHandler(e,n){n&&this.graphsService.uploadHandler(e.files[0],n.id,n.id).then(r=>{this.databaseService.storeGraph(r),this.displayImport=!1})}gexf(e){let n=this.graphsService.getGraph(e.id+"");this.exportData=this.graphsService.toGexf(n),this.exportDataHtml=this.exportData.join("\n"),this.clipboardService.copyTextToClipboard(this.exportData.join("\n")),this.displayExport=!0}selectCytoscape(e){this.router.navigate(["graphs","cytoscape",e.id])}selectThreejs(e){this.router.navigate(["graphs","threejs",e.id])}}return i.\u0275fac=function(e){return new(e||i)(Zt(Zd),Zt(Mp),Zt(E1),Zt(T1),Zt(sC),Zt(m1),Zt(fm),Zt(ey))},i.\u0275cmp=Ir({type:i,selectors:[["app-graph-selector"]],features:[To([fm])],decls:17,vars:17,consts:[[1,"card"],["styleClass","mb-4"],["pTemplate","left"],["pTemplate","right"],["responsiveLayout","scroll","dataKey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","rows","paginator","globalFilterFields","rowHover","showCurrentPageReport"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[3,"modal","header","visible","visibleChange"],["name","myfile[]",3,"customUpload","uploadHandler"],["header","Gexf",3,"visible","baseZIndex","visibleChange"],["pTemplate","footer"],[1,"p-float-label"],["id","float-input","type","text","pInputText","",3,"ngModel","ngModelChange"],["for","float-input"],["pButton","","pRipple","","label","New","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],[1,"flex","align-items-center","justify-content-between"],[1,"m-0"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search..."],[2,"width","3rem"],["pSortableColumn","label"],["field","label"],[3,"value"],["pButton","","type","button","pTooltip","Import","tooltipPosition","top","icon","pi pi-cloud-upload",3,"click"],["pButton","","pRipple","","pTooltip","Copy to clipboard","tooltipPosition","top","icon","pi pi-cloud-download",3,"click"],["pButton","","pRipple","","pTooltip","Remove this graph","tooltipPosition","top","icon","pi pi-trash",1,"p-button-danger",3,"click"],["pButton","","pRipple","","pTooltip","Select this graph","tooltipPosition","top","icon","pi pi-sign-out",3,"click"],["pButton","","pRipple","","pTooltip","Select this graph for 3D preview","tooltipPosition","top","icon","pi pi-sign-out",3,"click"],["icon","pi pi-check","label","Ok","styleClass","p-button-text",3,"click"]],template:function(e,n){1&e&&(lt(0,"div",0)(1,"p-toolbar",1),Ze(2,goe,5,1,"ng-template",2),Ze(3,moe,0,0,"ng-template",3),ct(),ii(4,"p-toast"),lt(5,"p-table",4,5),Ze(7,voe,6,0,"ng-template",6),Ze(8,yoe,8,0,"ng-template",7),Ze(9,_oe,19,2,"ng-template",8),ct()(),ii(10,"p-confirmPopup"),lt(11,"p-dialog",9),fn("visibleChange",function(s){return n.displayImport=s}),lt(12,"p-fileUpload",10),fn("uploadHandler",function(s){return n.uploadHandler(s,n.selectedGraph)}),ct()(),lt(13,"p-dialog",11),fn("visibleChange",function(s){return n.displayExport=s}),lt(14,"pre"),qi(15),ct(),Ze(16,boe,1,0,"ng-template",12),ct()),2&e&&(Me(5),ve("value",n.graphs)("rows",10)("paginator",!0)("globalFilterFields",Mo(15,Coe))("rowHover",!0)("showCurrentPageReport",!0),Me(6),gI("header","Import ",null==n.selectedGraph?null:n.selectedGraph.label,""),ve("modal",!0)("visible",n.displayImport),Me(1),ve("customUpload",!0),Me(1),uo(Mo(16,xoe)),ve("visible",n.displayExport)("baseZIndex",1e4),Me(2),as(n.exportDataHtml))},dependencies:[b0,_l,s4,o4,a4,l4,cC,U1,$1,o_,q1,Aw,h4,f4,v0,oC,ry,p4]}),i})();var Aoe=V(5595),Ioe=V.n(Aoe),Soe=V(3424),Eoe=V.n(Soe),Toe=V(756),Moe=V.n(Toe);const Doe=["myGraph"];function Loe(i,t){if(1&i&&(lt(0,"pre"),qi(1),ct()),2&i){const e=t.$implicit;Me(1),yd("",e,"\n")}}let Poe=(()=>{class i{constructor(e,n,r,s){this.http=e,this.logger=n,this.graphsService=r,this.store=s,this.subscription=null,this.graph=new(Ioe()),this.display=!1,this.xml=[],this.graphs$=this.store.select(u2),this.graphs$.subscribe(o=>{o&&0!==o.length&&(this.graph.clear(),_r.each(o[0].nodes,u=>{this.graph.addNode(u.id,{x:u.x,y:u.y,label:u.label,color:u.color,size:u.size,uid:u.id})}),_r.each(o[0].edges,u=>{u.source&&u.target?this.graph.addEdge(u.source,u.target,{label:u.label,type:"arrow",size:5,uid:u.id,source:u.source,target:u.target}):this.logger.info(u)}),new(Eoe())(this.graph,{isNodeFixed:(u,p)=>p.highlighted}))})}ngOnInit(){let e=this.graphsService.getGraphs("Default");this.store.dispatch(uw({graphs:e}))}ngAfterViewInit(){let e=null,n=!1;this.renderer=new(Moe())(this.graph,this.myGraph?.nativeElement,{renderEdgeLabels:!0}),this.renderer.on("downNode",r=>{n=!0,e=r.node,this.graph.setNodeAttribute(e,"highlighted",!0)}),this.renderer.getMouseCaptor().on("mousemovebody",r=>{if(!n||!e||!this.renderer)return;const s=this.renderer.viewportToGraph(r);this.graph.setNodeAttribute(e,"x",s.x),this.graph.setNodeAttribute(e,"y",s.y),r.preventSigmaDefault(),r.original.preventDefault(),r.original.stopPropagation()}),this.renderer.getMouseCaptor().on("mouseup",()=>{e&&this.graph.removeNodeAttribute(e,"highlighted"),n=!1,e=null}),this.renderer.getMouseCaptor().on("mousedown",()=>{this.renderer?.getCustomBBox()||this.renderer?.setCustomBBox(this.renderer.getBBox())})}gexf(e){this.xml=[],this.xml.push('<?xml version="1.0" encoding="UTF-8"?>'),this.xml.push('<gexf xmlns="http://gexf.net/1.2" version="1.2">'),this.xml.push('<meta lastmodifieddate="2009-03-20">'),this.xml.push("<creator>Gexf.net</creator>"),this.xml.push("<description>A hello world! file</description>"),this.xml.push("</meta>"),this.xml.push(`<graph mode="static" defaultedgetype="directed" style="${e}">`),this.xml.push("<nodes>"),this.graph.forEachNode(n=>{let r=this.graph.getNodeAttribute(n,"uid"),s=this.graph.getNodeAttribute(n,"label"),o=this.graph.getNodeAttribute(n,"x"),l=this.graph.getNodeAttribute(n,"y");this.xml.push(`<node id="${r}" label="${s}" x="${o}" y="${l}" />`)}),this.xml.push("</nodes>"),this.xml.push("<edges>"),this.graph.forEachEdge(n=>{let r=this.graph.getEdgeAttribute(n,"uid"),s=this.graph.getEdgeAttribute(n,"label"),o=this.graph.getEdgeAttribute(n,"source"),l=this.graph.getEdgeAttribute(n,"target");this.xml.push(`<edge id="${r}" source="${o}" target="${l}" label="${s}" />`)}),this.xml.push("</edges>"),this.xml.push("</graph>"),this.xml.push("</gexf>"),this.display=!0}uploadHandler(e){let n=new FileReader;n.addEventListener("loadend",()=>{}),n.readAsText(e.files[0])}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(Zt(lD),Zt(Mp),Zt(E1),Zt(ey))},i.\u0275cmp=Ir({type:i,selectors:[["app-graph"]],viewQuery:function(e,n){if(1&e&&vs(Doe,5),2&e){let r;vr(r=yr())&&(n.myGraph=r.first)}},hostBindings:function(e,n){1&e&&fn("beforeunload",function(s){return n.ngOnDestroy(s)},0,$n)},decls:6,vars:3,consts:[["name","myfile[]",3,"customUpload","uploadHandler"],["header","Gexf",3,"visible","visibleChange"],[4,"ngFor","ngForOf"],["label","Gexf",3,"onClick"],[1,"sigma-container"],["myGraph",""]],template:function(e,n){1&e&&(lt(0,"p-fileUpload",0),fn("uploadHandler",function(s){return n.uploadHandler(s)}),ct(),lt(1,"p-dialog",1),fn("visibleChange",function(s){return n.display=s}),Ze(2,Loe,2,1,"pre",2),ct(),lt(3,"p-button",3),fn("onClick",function(){return n.gexf("default")}),ct(),ii(4,"div",4,5)),2&e&&(ve("customUpload",!0),Me(1),ve("visible",n.display),Me(1),ve("ngForOf",n.xml))},dependencies:[Su,U1,$1,h4],styles:[".sigma-container[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:0;overflow:hidden}"]}),i})();const g4={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let X1;const Roe=new Uint8Array(16);function koe(){if(!X1&&(X1=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!X1))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return X1(Roe)}const Jd=[];for(let i=0;i<256;++i)Jd.push((i+256).toString(16).slice(1));const v4=function Ooe(i,t,e){if(g4.randomUUID&&!t&&!i)return g4.randomUUID();const n=(i=i||{}).random||(i.rng||koe)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){e=e||0;for(let r=0;r<16;++r)t[e+r]=n[r];return t}return function m4(i,t=0){return(Jd[i[t+0]]+Jd[i[t+1]]+Jd[i[t+2]]+Jd[i[t+3]]+"-"+Jd[i[t+4]]+Jd[i[t+5]]+"-"+Jd[i[t+6]]+Jd[i[t+7]]+"-"+Jd[i[t+8]]+Jd[i[t+9]]+"-"+Jd[i[t+10]]+Jd[i[t+11]]+Jd[i[t+12]]+Jd[i[t+13]]+Jd[i[t+14]]+Jd[i[t+15]]).toLowerCase()}(n)};var Y1=V(6864);class Ew extends class Noe extends class Foe{ready(t){console.debug(`layout ready, cytoscape.LayoutEventObject: ${JSON.stringify(t)}`)}stop(t){console.debug(`layout stop, cytoscape.LayoutEventObject: ${JSON.stringify(t)}`)}}{constructor(){super(...arguments),this.zoom=null,this.pan=null,this.animate=!1,this.animationDuration=500,this.animationEasing=void 0,this.animateFilter=(t,e)=>!0}}{constructor(){super(...arguments),this.fit=!0,this.padding=30,this.boundingBox=null,this.avoidOverlap=!0,this.nodeDimensionsIncludeLabels=!1,this.spacingFactor=1.75,this.sort=null,this.transform=(t,e)=>e}}class Boe extends Ew{constructor(){super(...arguments),this.name="grid",this.avoidOverlapPadding=10,this.condense=!1,this.rows=null,this.cols=null,this.position=null}}class zoe extends Ew{constructor(){super(...arguments),this.name="circle",this.startAngle=1.5*Math.PI,this.sweep=null,this.clockwise=!0}}class Voe{constructor(){this.name="concentric",this.startAngle=1.5*Math.PI,this.equidistant=!1,this.minNodeSpacing=10,this.boundingBox=null,this.height=null,this.width=null,this.spacingFactor=null}concentric(t){return 0}levelWidth(t){return 0}}class Uoe extends Ew{constructor(){super(...arguments),this.name="breadthfirst",this.directed=!1,this.circle=!1,this.maximal=!1,this.grid=!1,this.nodeDimensionsIncludeLabels=!1}}class Hoe extends Ew{constructor(){super(...arguments),this.name="cose",this.animationThreshold=250,this.refresh=20,this.randomize=!1,this.componentSpacing=40,this.nodeOverlap=4e3,this.nestingFactor=1.2,this.gravity=1,this.numIter=1e3,this.initialTemp=1e3,this.coolingFactor=.99,this.minTemp=1,this.nodeRepulsion=t=>2048,this.idealEdgeLength=t=>32,this.edgeElasticity=t=>32}}class Goe extends Ew{constructor(){super(),this.name="dagre",this.nodeSep=null,this.edgeSep=null,this.rankSep=null,this.rankDir="TB",this.ranker=null,this.minLen=t=>1,this.edgeWeight=t=>1}}const K1=nC("[SysTags List/API] Retrieve Styles Success",{_as:"props",_p:void 0}),U2=nC("[SysTags List/API] Retrieve Style Success",{_as:"props",_p:void 0});new bz.Parser;let y4=(()=>{class i{constructor(e,n,r,s){this.messageService=e,this.databaseService=n,this.base16=r,this.logger=s}getStyles(){let e=this.databaseService.findAllStyles(),n=new Array;return _r.each(e,r=>{n.push(r)}),n}deleteStyle(e){return this.databaseService.deleteStyle(e.id)}getStyle(e){return this.databaseService.findStyle(e)}saveStyle(e){this.databaseService.storeStyle(e)}}return i.\u0275fac=function(e){return new(e||i)(jn(fm),jn(sC),jn(p2),jn(Mp))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const joe=["sublist"],$oe=["menuitem"],qoe=function(i){return{"p-hidden":i}};function Xoe(i,t){if(1&i&&ii(0,"li",5,6),2&i){const e=_e().$implicit;ve("ngClass",Bi(1,qoe,!1===e.visible))}}function Yoe(i,t){if(1&i&&ii(0,"span",17),2&i){const e=_e(3).$implicit;ve("ngClass",e.icon)("ngStyle",e.iconStyle)}}function Koe(i,t){if(1&i&&(lt(0,"span",18),qi(1),ct()),2&i){const e=_e(3).$implicit;Me(1),as(e.label)}}function Zoe(i,t){1&i&&ii(0,"span",19),2&i&&ve("innerHTML",_e(3).$implicit.label,wa)}function Qoe(i,t){if(1&i&&(lt(0,"span",20),qi(1),ct()),2&i){const e=_e(3).$implicit;ve("ngClass",e.badgeStyleClass),Me(1),as(e.badge)}}function Joe(i,t){1&i&&ii(0,"span",21)}const _4=function(i){return{"p-menuitem-link":!0,"p-disabled":i}};function eae(i,t){if(1&i){const e=Pi();lt(0,"a",11),fn("click",function(r){wt(e),_e();const s=co(1),o=_e(),l=o.$implicit,u=o.index,p=_e();return At(p.onItemClick(r,l,s,p.getKey(u)))}),Ze(1,Yoe,1,2,"span",12),Ze(2,Koe,2,1,"span",13),Ze(3,Zoe,1,1,"ng-template",null,14,vc),Ze(5,Qoe,2,2,"span",15),Ze(6,Joe,1,0,"span",16),ct()}if(2&i){const e=co(4),n=_e(2),r=n.$implicit,s=n.index,o=_e();ve("target",r.target)("ngClass",Bi(13,_4,r.disabled)),mr("href",r.url?r.url:null,qd)("title",r.title)("id",r.id)("tabindex",r.disabled?null:"0")("aria-haspopup",null!=o.item.items)("aria-expanded",o.isActive(o.getKey(s))),Me(1),ve("ngIf",r.icon),Me(1),ve("ngIf",!1!==r.escape)("ngIfElse",e),Me(3),ve("ngIf",r.badge),Me(1),ve("ngIf",r.items)}}function tae(i,t){if(1&i&&ii(0,"span",17),2&i){const e=_e(3).$implicit;ve("ngClass",e.icon)("ngStyle",e.iconStyle)}}function nae(i,t){if(1&i&&(lt(0,"span",18),qi(1),ct()),2&i){const e=_e(3).$implicit;Me(1),as(e.label)}}function iae(i,t){1&i&&ii(0,"span",19),2&i&&ve("innerHTML",_e(3).$implicit.label,wa)}function rae(i,t){if(1&i&&(lt(0,"span",20),qi(1),ct()),2&i){const e=_e(3).$implicit;ve("ngClass",e.badgeStyleClass),Me(1),as(e.badge)}}function sae(i,t){1&i&&ii(0,"span",21)}const oae=function(){return{exact:!1}};function aae(i,t){if(1&i){const e=Pi();lt(0,"a",22),fn("click",function(r){wt(e),_e();const s=co(1),o=_e(),l=o.$implicit,u=o.index,p=_e();return At(p.onItemClick(r,l,s,p.getKey(u)))}),Ze(1,tae,1,2,"span",12),Ze(2,nae,2,1,"span",13),Ze(3,iae,1,1,"ng-template",null,23,vc),Ze(5,rae,2,2,"span",15),Ze(6,sae,1,0,"span",16),ct()}if(2&i){const e=co(4),n=_e(2).$implicit;ve("routerLink",n.routerLink)("queryParams",n.queryParams)("routerLinkActive","p-menuitem-link-active")("routerLinkActiveOptions",n.routerLinkActiveOptions||Mo(20,oae))("target",n.target)("ngClass",Bi(21,_4,n.disabled))("fragment",n.fragment)("queryParamsHandling",n.queryParamsHandling)("preserveFragment",n.preserveFragment)("skipLocationChange",n.skipLocationChange)("replaceUrl",n.replaceUrl)("state",n.state),mr("title",n.title)("id",n.id)("tabindex",n.disabled?null:"0"),Me(1),ve("ngIf",n.icon),Me(1),ve("ngIf",!1!==n.escape)("ngIfElse",e),Me(3),ve("ngIf",n.badge),Me(1),ve("ngIf",n.items)}}function lae(i,t){if(1&i){const e=Pi();lt(0,"p-contextMenuSub",24),fn("leafClick",function(){return wt(e),At(_e(3).onLeafClick())}),ct()}if(2&i){const e=_e(2),n=e.index,r=e.$implicit;ve("parentItemKey",_e().getKey(n))("item",r)}}const cae=function(i,t){return{"p-menuitem":!0,"p-menuitem-active":i,"p-hidden":t}};function uae(i,t){if(1&i){const e=Pi();lt(0,"li",7,6),fn("mouseenter",function(r){wt(e);const s=_e(),o=s.$implicit,l=s.index,u=_e();return At(u.onItemMouseEnter(r,o,u.getKey(l)))})("mouseleave",function(r){wt(e);const s=_e().$implicit;return At(_e().onItemMouseLeave(r,s))}),Ze(2,eae,7,15,"a",8),Ze(3,aae,7,23,"a",9),Ze(4,lae,1,2,"p-contextMenuSub",10),ct()}if(2&i){const e=_e(),n=e.$implicit,r=e.index,s=_e();Ur(n.styleClass),ve("ngClass",ys(9,cae,s.isActive(s.getKey(r)),!1===n.visible))("ngStyle",n.style)("tooltipOptions",n.tooltipOptions),mr("data-ik",s.getKey(r)),Me(2),ve("ngIf",!n.routerLink),Me(1),ve("ngIf",n.routerLink),Me(1),ve("ngIf",n.items)}}function dae(i,t){if(1&i&&(Ze(0,Xoe,2,3,"li",3),Ze(1,uae,5,12,"li",4)),2&i){const e=t.$implicit;ve("ngIf",e.separator),Me(1),ve("ngIf",!e.separator)}}const hae=function(i){return{"p-submenu-list":i}},fae=["container"];let pae=(()=>{class i{constructor(e){this.leafClick=new qn,this.contextMenu=e}ngOnInit(){this.activeItemKeyChangeSubscription=this.contextMenu.contextMenuService.activeItemKeyChange$.pipe(function Woe(i){return Cn((t,e)=>{hl(i).subscribe(yn(e,()=>e.complete(),se)),!e.closed&&t.subscribe(e)})}(this.contextMenu.ngDestroy$)).subscribe(e=>{this.activeItemKey=e,this.isActive(this.parentItemKey)&&Kt.hasClass(this.sublistViewChild.nativeElement,"p-submenu-list-active")&&this.contextMenu.positionSubmenu(this.sublistViewChild.nativeElement),this.contextMenu.cd.markForCheck()})}onItemMouseEnter(e,n,r){if(this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null),n.disabled)this.activeItemKey=null;else{if(n.items){let s=Kt.findSingle(e.currentTarget,".p-submenu-list");Kt.addClass(s,"p-submenu-list-active")}this.contextMenu.contextMenuService.changeKey(r)}}onItemMouseLeave(e,n){n.disabled||this.contextMenu.el.nativeElement.contains(e.toElement)&&(n.items&&this.contextMenu.removeActiveFromSubLists(e.currentTarget),this.root||this.contextMenu.contextMenuService.changeKey(this.parentItemKey))}onItemClick(e,n,r,s){if(n.disabled)e.preventDefault();else{if(!n.url&&!n.routerLink&&e.preventDefault(),n.command&&n.command({originalEvent:e,item:n}),n.items){let o=Kt.findSingle(r,".p-submenu-list");o&&(this.isActive(s)&&Kt.hasClass(o,"p-submenu-list-active")?this.contextMenu.removeActiveFromSubLists(r):Kt.addClass(o,"p-submenu-list-active"),this.contextMenu.contextMenuService.changeKey(s))}n.items||this.onLeafClick()}}onLeafClick(){this.root&&this.contextMenu.hide(),this.leafClick.emit()}getKey(e){return this.root?String(e):this.parentItemKey+"_"+e}isActive(e){return this.activeItemKey&&(this.activeItemKey.startsWith(e+"_")||this.activeItemKey===e)}}return i.\u0275fac=function(e){return new(e||i)(Zt(ds(()=>b4)))},i.\u0275cmp=Ir({type:i,selectors:[["p-contextMenuSub"]],viewQuery:function(e,n){if(1&e&&(vs(joe,5),vs($oe,5)),2&e){let r;vr(r=yr())&&(n.sublistViewChild=r.first),vr(r=yr())&&(n.menuitemViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{item:"item",root:"root",parentItemKey:"parentItemKey"},outputs:{leafClick:"leafClick"},decls:3,vars:4,consts:[[3,"ngClass"],["sublist",""],["ngFor","",3,"ngForOf"],["class","p-menu-separator","role","separator",3,"ngClass",4,"ngIf"],["pTooltip","","role","none",3,"ngClass","ngStyle","class","tooltipOptions","mouseenter","mouseleave",4,"ngIf"],["role","separator",1,"p-menu-separator",3,"ngClass"],["menuitem",""],["pTooltip","","role","none",3,"ngClass","ngStyle","tooltipOptions","mouseenter","mouseleave"],["pRipple","",3,"target","ngClass","click",4,"ngIf"],["role","menuitem","pRipple","",3,"routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","target","ngClass","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","click",4,"ngIf"],[3,"parentItemKey","item","leafClick",4,"ngIf"],["pRipple","",3,"target","ngClass","click"],["class","p-menuitem-icon",3,"ngClass","ngStyle",4,"ngIf"],["class","p-menuitem-text",4,"ngIf","ngIfElse"],["htmlLabel",""],["class","p-menuitem-badge",3,"ngClass",4,"ngIf"],["class","p-submenu-icon pi pi-angle-right",4,"ngIf"],[1,"p-menuitem-icon",3,"ngClass","ngStyle"],[1,"p-menuitem-text"],[1,"p-menuitem-text",3,"innerHTML"],[1,"p-menuitem-badge",3,"ngClass"],[1,"p-submenu-icon","pi","pi-angle-right"],["role","menuitem","pRipple","",3,"routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","target","ngClass","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","click"],["htmlRouteLabel",""],[3,"parentItemKey","item","leafClick"]],template:function(e,n){1&e&&(lt(0,"ul",0,1),Ze(2,dae,2,2,"ng-template",2),ct()),2&e&&(ve("ngClass",Bi(2,hae,!n.root)),Me(2),ve("ngForOf",n.root?n.item:n.item.items))},dependencies:[bo,Su,Wo,Qo,tC,GD,_d,o_,i],encapsulation:2}),i})(),b4=(()=>{class i{constructor(e,n,r,s,o,l){this.el=e,this.renderer=n,this.cd=r,this.zone=s,this.contextMenuService=o,this.config=l,this.autoZIndex=!0,this.baseZIndex=0,this.triggerEvent="contextmenu",this.onShow=new qn,this.onHide=new qn,this.ngDestroy$=new nn,this.preventDocumentDefault=!1}ngAfterViewInit(){this.global?this.triggerEventListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document",this.triggerEvent,n=>{this.show(n),n.preventDefault()}):this.target&&(this.triggerEventListener=this.renderer.listen(this.target,this.triggerEvent,e=>{this.show(e),e.preventDefault()})),this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.containerViewChild.nativeElement):Kt.appendChild(this.containerViewChild.nativeElement,this.appendTo))}show(e){this.clearActiveItem(),this.position(e),this.moveOnTop(),this.containerViewChild.nativeElement.style.display="block",this.preventDocumentDefault=!0,Kt.fadeIn(this.containerViewChild.nativeElement,250),this.bindGlobalListeners(),e&&e.preventDefault(),this.onShow.emit()}hide(){this.containerViewChild.nativeElement.style.display="none",this.autoZIndex&&Dl.clear(this.containerViewChild.nativeElement),this.clearActiveItem(),this.unbindGlobalListeners(),this.onHide.emit()}moveOnTop(){this.autoZIndex&&this.containerViewChild&&"block"!==this.containerViewChild.nativeElement.style.display&&Dl.set("menu",this.containerViewChild.nativeElement,this.baseZIndex+this.config.zIndex.menu)}toggle(e){this.containerViewChild.nativeElement.offsetParent?this.hide():this.show(e)}position(e){if(e){let n=e.pageX+1,r=e.pageY+1,s=this.containerViewChild.nativeElement.offsetParent?this.containerViewChild.nativeElement.offsetWidth:Kt.getHiddenElementOuterWidth(this.containerViewChild.nativeElement),o=this.containerViewChild.nativeElement.offsetParent?this.containerViewChild.nativeElement.offsetHeight:Kt.getHiddenElementOuterHeight(this.containerViewChild.nativeElement),l=Kt.getViewport();n+s-document.body.scrollLeft>l.width&&(n-=s),r+o-document.body.scrollTop>l.height&&(r-=o),n<document.body.scrollLeft&&(n=document.body.scrollLeft),r<document.body.scrollTop&&(r=document.body.scrollTop),this.containerViewChild.nativeElement.style.left=n+"px",this.containerViewChild.nativeElement.style.top=r+"px"}}positionSubmenu(e){let n=e.parentElement.parentElement,r=Kt.getViewport(),s=e.offsetParent?e.offsetWidth:Kt.getHiddenElementOuterWidth(e),o=e.offsetHeight?e.offsetHeight:Kt.getHiddenElementOuterHeight(e),l=Kt.getOuterWidth(n.children[0]),u=Kt.getOuterHeight(n.children[0]),p=Kt.getOffset(n.parentElement);e.style.zIndex=++Kt.zindex,parseInt(p.top)+u+o>r.height-Kt.calculateScrollbarHeight()?(e.style.removeProperty("top"),e.style.bottom="0px"):(e.style.removeProperty("bottom"),e.style.top="0px"),e.style.left=parseInt(p.left)+l+s>r.width-Kt.calculateScrollbarWidth()?-s+"px":l+"px"}isItemMatched(e){return Kt.hasClass(e,"p-menuitem")&&!Kt.hasClass(e.children[0],"p-disabled")}findNextItem(e,n){let r=e.nextElementSibling;if(r)return this.isItemMatched(r)?r:this.findNextItem(r,n);{let s=e.parentElement.children[0];return this.isItemMatched(s)?s:n?null:this.findNextItem(s,!0)}}findPrevItem(e,n){let r=e.previousElementSibling;if(r)return this.isItemMatched(r)?r:this.findPrevItem(r,n);{let s=e.parentElement.children[e.parentElement.children.length-1];return this.isItemMatched(s)?s:n?null:this.findPrevItem(s,!0)}}getActiveItem(){let e=this.contextMenuService.activeItemKey;return null==e?null:Kt.findSingle(this.containerViewChild.nativeElement,'.p-menuitem[data-ik="'+e+'"]')}clearActiveItem(){this.contextMenuService.activeItemKey&&(this.removeActiveFromSubLists(this.containerViewChild.nativeElement),this.contextMenuService.reset())}removeActiveFromSubLists(e){let n=Kt.find(e,".p-submenu-list-active");for(let r of n)Kt.removeClass(r,"p-submenu-list-active")}removeActiveFromSublist(e){e&&Kt.findSingle(e,".p-submenu-list")&&Kt.hasClass(e,"p-submenu-list-active")&&Kt.removeClass(e,"p-submenu-list-active")}bindGlobalListeners(){if(!this.documentClickListener){const e=this.el?this.el.nativeElement.ownerDocument:"document";this.documentClickListener=this.renderer.listen(e,"click",n=>{this.containerViewChild.nativeElement.offsetParent&&this.isOutsideClicked(n)&&!n.ctrlKey&&2!==n.button&&this.hide()}),this.documentTriggerListener=this.renderer.listen(e,this.triggerEvent,n=>{this.containerViewChild.nativeElement.offsetParent&&this.isOutsideClicked(n)&&!this.preventDocumentDefault&&this.hide(),this.preventDocumentDefault=!1})}this.zone.runOutsideAngular(()=>{this.windowResizeListener||(this.windowResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.windowResizeListener))}),this.documentKeydownListener||(this.documentKeydownListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","keydown",n=>{let r=this.getActiveItem();switch(n.key){case"ArrowDown":if(r)this.removeActiveFromSublist(r),r=this.findNextItem(r);else{let s=Kt.findSingle(this.containerViewChild.nativeElement,".p-menuitem-link").parentElement;r=this.isItemMatched(s)?s:this.findNextItem(s)}r&&this.contextMenuService.changeKey(r.getAttribute("data-ik")),n.preventDefault();break;case"ArrowUp":if(r)this.removeActiveFromSublist(r),r=this.findPrevItem(r);else{let s=Kt.findSingle(this.containerViewChild.nativeElement,"ul"),o=s.children[s.children.length-1];r=this.isItemMatched(o)?o:this.findPrevItem(o)}r&&this.contextMenuService.changeKey(r.getAttribute("data-ik")),n.preventDefault();break;case"ArrowRight":if(r){let s=Kt.findSingle(r,".p-submenu-list");s&&(Kt.addClass(s,"p-submenu-list-active"),r=Kt.findSingle(s,".p-menuitem-link:not(.p-disabled)").parentElement,r&&this.contextMenuService.changeKey(r.getAttribute("data-ik")))}n.preventDefault();break;case"ArrowLeft":if(r){let s=r.parentElement;s&&Kt.hasClass(s,"p-submenu-list-active")&&(Kt.removeClass(s,"p-submenu-list-active"),r=s.parentElement.parentElement,r&&this.contextMenuService.changeKey(r.getAttribute("data-ik")))}n.preventDefault();break;case"Escape":this.hide(),n.preventDefault();break;case"Enter":r&&this.handleItemClick(n,this.findModelItemFromKey(this.contextMenuService.activeItemKey),r),n.preventDefault()}}))}findModelItemFromKey(e){return null!=e&&this.model?e.split("_").reduce((r,s)=>r?r.items[s]:this.model[s],null):null}handleItemClick(e,n,r){if(n&&!n.disabled){if(n.command&&n.command({originalEvent:e,item:n}),n.items){let s=Kt.findSingle(r,".p-submenu-list");s&&(Kt.hasClass(s,"p-submenu-list-active")?this.removeActiveFromSubLists(r):(Kt.addClass(s,"p-submenu-list-active"),this.positionSubmenu(s)))}n.items||this.hide()}}unbindGlobalListeners(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null),this.documentTriggerListener&&(this.documentTriggerListener(),this.documentTriggerListener=null),this.windowResizeListener&&(window.removeEventListener("resize",this.windowResizeListener),this.windowResizeListener=null),this.documentKeydownListener&&(this.documentKeydownListener(),this.documentKeydownListener=null)}onWindowResize(e){this.containerViewChild.nativeElement.offsetParent&&this.hide()}isOutsideClicked(e){return!(this.containerViewChild.nativeElement.isSameNode(e.target)||this.containerViewChild.nativeElement.contains(e.target))}ngOnDestroy(){this.unbindGlobalListeners(),this.triggerEventListener&&this.triggerEventListener(),this.containerViewChild&&this.autoZIndex&&Dl.clear(this.containerViewChild.nativeElement),this.appendTo&&this.el.nativeElement.appendChild(this.containerViewChild.nativeElement),this.ngDestroy$.next(!0),this.ngDestroy$.complete()}}return i.\u0275fac=function(e){return new(e||i)(Zt(Xn),Zt(h),Zt(Zo),Zt(Ko),Zt(RB),Zt(Tp))},i.\u0275cmp=Ir({type:i,selectors:[["p-contextMenu"]],viewQuery:function(e,n){if(1&e&&vs(fae,5),2&e){let r;vr(r=yr())&&(n.containerViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{model:"model",global:"global",target:"target",style:"style",styleClass:"styleClass",appendTo:"appendTo",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",triggerEvent:"triggerEvent"},outputs:{onShow:"onShow",onHide:"onHide"},decls:3,vars:6,consts:[[3,"ngClass","ngStyle"],["container",""],[3,"item","root"]],template:function(e,n){1&e&&(lt(0,"div",0,1),ii(2,"p-contextMenuSub",2),ct()),2&e&&(Ur(n.styleClass),ve("ngClass","p-contextmenu p-component")("ngStyle",n.style),Me(2),ve("item",n.model)("root",!0))},dependencies:[bo,Qo,pae],styles:[".p-contextmenu{position:absolute;display:none}.p-contextmenu ul{margin:0;padding:0;list-style:none}.p-contextmenu .p-submenu-list{position:absolute;min-width:100%;z-index:1;display:none}.p-contextmenu .p-menuitem-link{cursor:pointer;display:flex;align-items:center;text-decoration:none;overflow:hidden;position:relative}.p-contextmenu .p-menuitem-text{line-height:1}.p-contextmenu .p-menuitem{position:relative}.p-contextmenu .p-menuitem-link .p-submenu-icon{margin-left:auto}.p-contextmenu .p-menuitem-active>p-contextmenusub>.p-submenu-list.p-submenu-list-active{display:block!important}\n"],encapsulation:2,changeDetection:0}),i})(),gae=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({providers:[RB],imports:[Ns,i_,$c,iv,i_,iv]}),i})(),mae=(()=>{class i{constructor(e,n,r,s){this.el=e,this.ngModel=n,this.control=r,this.cd=s,this.onResize=new qn}ngOnInit(){this.ngModel&&(this.ngModelSubscription=this.ngModel.valueChanges.subscribe(()=>{this.updateState()})),this.control&&(this.ngControlSubscription=this.control.valueChanges.subscribe(()=>{this.updateState()}))}ngAfterViewInit(){this.autoResize&&this.resize(),this.updateFilledState(),this.cd.detectChanges()}onInput(e){this.updateState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length}onFocus(e){this.autoResize&&this.resize(e)}onBlur(e){this.autoResize&&this.resize(e)}resize(e){this.el.nativeElement.style.height="auto",this.el.nativeElement.style.height=this.el.nativeElement.scrollHeight+"px",parseFloat(this.el.nativeElement.style.height)>=parseFloat(this.el.nativeElement.style.maxHeight)?(this.el.nativeElement.style.overflowY="scroll",this.el.nativeElement.style.height=this.el.nativeElement.style.maxHeight):this.el.nativeElement.style.overflow="hidden",this.onResize.emit(e||{})}updateState(){this.updateFilledState(),this.autoResize&&this.resize()}ngOnDestroy(){this.ngModelSubscription&&this.ngModelSubscription.unsubscribe(),this.ngControlSubscription&&this.ngControlSubscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(Zt(Xn),Zt(ry,8),Zt(nv,8),Zt(Zo))},i.\u0275dir=$r({type:i,selectors:[["","pInputTextarea",""]],hostAttrs:[1,"p-inputtextarea","p-inputtext","p-component","p-element"],hostVars:4,hostBindings:function(e,n){1&e&&fn("input",function(s){return n.onInput(s)})("focus",function(s){return n.onFocus(s)})("blur",function(s){return n.onBlur(s)}),2&e&&Ep("p-filled",n.filled)("p-inputtextarea-resizable",n.autoResize)},inputs:{autoResize:"autoResize"},outputs:{onResize:"onResize"}}),i})(),vae=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({imports:[Ns]}),i})();const yae=["container"];function _ae(i,t){1&i&&Ki(0)}function bae(i,t){if(1&i){const e=Pi();lt(0,"div",5),fn("mousedown",function(r){wt(e);const s=_e().index;return At(_e().onGutterMouseDown(r,s))})("touchstart",function(r){wt(e);const s=_e().index;return At(_e().onGutterTouchStart(r,s))}),ii(1,"div",6),ct()}2&i&&ve("ngStyle",_e(2).gutterStyle())}function Cae(i,t){if(1&i&&(lt(0,"div",0),Ze(1,_ae,1,0,"ng-container",3),ct(),Ze(2,bae,2,1,"div",4)),2&i){const e=t.$implicit,n=t.index,r=_e();Ur(r.panelStyleClass),ve("ngClass",r.panelContainerClass())("ngStyle",r.panelStyle),Me(1),ve("ngTemplateOutlet",e),Me(1),ve("ngIf",n!==r.panels.length-1)}}let C4=(()=>{class i{constructor(e,n){this.cd=e,this.el=n,this.stateStorage="session",this.stateKey=null,this.layout="horizontal",this.gutterSize=4,this.minSizes=[],this.onResizeEnd=new qn,this.onResizeStart=new qn,this.nested=!1,this.panels=[],this.dragging=!1,this.mouseMoveListener=null,this.mouseUpListener=null,this.touchMoveListener=null,this.touchEndListener=null,this.size=null,this.gutterElement=null,this.startPos=null,this.prevPanelElement=null,this.nextPanelElement=null,this.nextPanelSize=null,this.prevPanelSize=null,this._panelSizes=[],this.prevPanelIndex=null}get panelSizes(){return this._panelSizes}set panelSizes(e){if(this._panelSizes=e,this.el&&this.el.nativeElement&&this.panels.length>0){let n=[...this.el.nativeElement.children[0].children].filter(s=>Kt.hasClass(s,"p-splitter-panel")),r=[];this.panels.map((s,o)=>{let u=(this.panelSizes.length-1>=o?this.panelSizes[o]:null)||100/this.panels.length;r[o]=u,n[o].style.flexBasis="calc("+u+"% - "+(this.panels.length-1)*this.gutterSize+"px)"})}}ngOnInit(){this.nested=this.isNested()}ngAfterContentInit(){this.templates.forEach(e=>{e.getType(),this.panels.push(e.template)})}ngAfterViewInit(){if(this.panels&&this.panels.length){let e=!1;if(this.isStateful()&&(e=this.restoreState()),!e){let n=[...this.el.nativeElement.children[0].children].filter(s=>Kt.hasClass(s,"p-splitter-panel")),r=[];this.panels.map((s,o)=>{let u=(this.panelSizes.length-1>=o?this.panelSizes[o]:null)||100/this.panels.length;r[o]=u,n[o].style.flexBasis="calc("+u+"% - "+(this.panels.length-1)*this.gutterSize+"px)"}),this._panelSizes=r}}}resizeStart(e,n){this.gutterElement=e.currentTarget,this.size=this.horizontal()?Kt.getWidth(this.containerViewChild.nativeElement):Kt.getHeight(this.containerViewChild.nativeElement),this.dragging=!0,this.startPos=this.horizontal()?e.pageX||e.changedTouches[0].pageX:e.pageY||e.changedTouches[0].pageY,this.prevPanelElement=this.gutterElement.previousElementSibling,this.nextPanelElement=this.gutterElement.nextElementSibling,this.prevPanelSize=100*(this.horizontal()?Kt.getOuterWidth(this.prevPanelElement,!0):Kt.getOuterHeight(this.prevPanelElement,!0))/this.size,this.nextPanelSize=100*(this.horizontal()?Kt.getOuterWidth(this.nextPanelElement,!0):Kt.getOuterHeight(this.nextPanelElement,!0))/this.size,this.prevPanelIndex=n,Kt.addClass(this.gutterElement,"p-splitter-gutter-resizing"),Kt.addClass(this.containerViewChild.nativeElement,"p-splitter-resizing"),this.onResizeStart.emit({originalEvent:e,sizes:this._panelSizes})}onResize(e){let n;n=this.horizontal()?100*e.pageX/this.size-100*this.startPos/this.size:100*e.pageY/this.size-100*this.startPos/this.size;let r=this.prevPanelSize+n,s=this.nextPanelSize-n;this.validateResize(r,s)&&(this.prevPanelElement.style.flexBasis="calc("+r+"% - "+(this.panels.length-1)*this.gutterSize+"px)",this.nextPanelElement.style.flexBasis="calc("+s+"% - "+(this.panels.length-1)*this.gutterSize+"px)",this._panelSizes[this.prevPanelIndex]=r,this._panelSizes[this.prevPanelIndex+1]=s)}resizeEnd(e){this.isStateful()&&this.saveState(),this.onResizeEnd.emit({originalEvent:e,sizes:this._panelSizes}),Kt.removeClass(this.gutterElement,"p-splitter-gutter-resizing"),Kt.removeClass(this.containerViewChild.nativeElement,"p-splitter-resizing"),this.clear()}onGutterMouseDown(e,n){this.resizeStart(e,n),this.bindMouseListeners()}onGutterTouchStart(e,n){e.cancelable&&(this.resizeStart(e,n),this.bindTouchListeners(),e.preventDefault())}onGutterTouchEnd(e){this.resizeEnd(e),this.unbindTouchListeners(),e.cancelable&&e.preventDefault()}validateResize(e,n){return!(this.minSizes.length>=1&&this.minSizes[0]&&this.minSizes[0]>e||this.minSizes.length>1&&this.minSizes[1]&&this.minSizes[1]>n)}bindMouseListeners(){this.mouseMoveListener||(this.mouseMoveListener=e=>this.onResize(e),document.addEventListener("mousemove",this.mouseMoveListener)),this.mouseUpListener||(this.mouseUpListener=e=>{this.resizeEnd(e),this.unbindMouseListeners()},document.addEventListener("mouseup",this.mouseUpListener))}bindTouchListeners(){this.touchMoveListener||(this.touchMoveListener=e=>this.onResize(e.changedTouches[0]),document.addEventListener("touchmove",this.touchMoveListener)),this.touchEndListener||(this.touchEndListener=e=>{this.resizeEnd(e),this.unbindTouchListeners()},document.addEventListener("touchend",this.touchEndListener))}unbindMouseListeners(){this.mouseMoveListener&&(document.removeEventListener("mousemove",this.mouseMoveListener),this.mouseMoveListener=null),this.mouseUpListener&&(document.removeEventListener("mouseup",this.mouseUpListener),this.mouseUpListener=null)}unbindTouchListeners(){this.touchMoveListener&&(document.removeEventListener("touchmove",this.touchMoveListener),this.touchMoveListener=null),this.touchEndListener&&(document.removeEventListener("touchend",this.touchEndListener),this.touchEndListener=null)}clear(){this.dragging=!1,this.size=null,this.startPos=null,this.prevPanelElement=null,this.nextPanelElement=null,this.prevPanelSize=null,this.nextPanelSize=null,this.gutterElement=null,this.prevPanelIndex=null}isNested(){if(this.el.nativeElement){let e=this.el.nativeElement.parentElement;for(;e&&!Kt.hasClass(e,"p-splitter");)e=e.parentElement;return null!==e}return!1}isStateful(){return null!=this.stateKey}getStorage(){switch(this.stateStorage){case"local":return window.localStorage;case"session":return window.sessionStorage;default:throw new Error(this.stateStorage+' is not a valid value for the state storage, supported values are "local" and "session".')}}saveState(){this.getStorage().setItem(this.stateKey,JSON.stringify(this._panelSizes))}restoreState(){const n=this.getStorage().getItem(this.stateKey);return!!n&&(this._panelSizes=JSON.parse(n),[...this.containerViewChild.nativeElement.children].filter(s=>Kt.hasClass(s,"p-splitter-panel")).forEach((s,o)=>{s.style.flexBasis="calc("+this._panelSizes[o]+"% - "+(this.panels.length-1)*this.gutterSize+"px)"}),!0)}containerClass(){return{"p-splitter p-component":!0,"p-splitter-horizontal":"horizontal"===this.layout,"p-splitter-vertical":"vertical"===this.layout}}panelContainerClass(){return{"p-splitter-panel":!0,"p-splitter-panel-nested":!0}}gutterStyle(){return this.horizontal()?{width:this.gutterSize+"px"}:{height:this.gutterSize+"px"}}horizontal(){return"horizontal"===this.layout}}return i.\u0275fac=function(e){return new(e||i)(Zt(Zo),Zt(Xn))},i.\u0275cmp=Ir({type:i,selectors:[["p-splitter"]],contentQueries:function(e,n,r){if(1&e&&cl(r,_l,4),2&e){let s;vr(s=yr())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&vs(yae,5),2&e){let r;vr(r=yr())&&(n.containerViewChild=r.first)}},hostAttrs:[1,"p-element"],hostVars:2,hostBindings:function(e,n){2&e&&Ep("p-splitter-panel-nested",n.nested)},inputs:{styleClass:"styleClass",panelStyleClass:"panelStyleClass",style:"style",panelStyle:"panelStyle",stateStorage:"stateStorage",stateKey:"stateKey",layout:"layout",gutterSize:"gutterSize",minSizes:"minSizes",panelSizes:"panelSizes"},outputs:{onResizeEnd:"onResizeEnd",onResizeStart:"onResizeStart"},decls:3,vars:5,consts:[[3,"ngClass","ngStyle"],["container",""],["ngFor","",3,"ngForOf"],[4,"ngTemplateOutlet"],["class","p-splitter-gutter",3,"ngStyle","mousedown","touchstart",4,"ngIf"],[1,"p-splitter-gutter",3,"ngStyle","mousedown","touchstart"],[1,"p-splitter-gutter-handle"]],template:function(e,n){1&e&&(lt(0,"div",0,1),Ze(2,Cae,3,6,"ng-template",2),ct()),2&e&&(Ur(n.styleClass),ve("ngClass",n.containerClass())("ngStyle",n.style),Me(2),ve("ngForOf",n.panels))},dependencies:[bo,Su,Wo,rc,Qo],styles:[".p-splitter{display:flex;flex-wrap:nowrap}.p-splitter-vertical{flex-direction:column}.p-splitter-panel{flex-grow:1}.p-splitter-panel-nested{display:flex}.p-splitter-panel p-splitter{flex-grow:1}.p-splitter-panel .p-splitter{flex-grow:1;border:0 none}.p-splitter-gutter{flex-grow:0;flex-shrink:0;display:flex;align-items:center;justify-content:center;cursor:col-resize}.p-splitter-horizontal.p-splitter-resizing{cursor:col-resize;-webkit-user-select:none;user-select:none}.p-splitter-horizontal>.p-splitter-gutter>.p-splitter-gutter-handle{height:24px;width:100%}.p-splitter-horizontal>.p-splitter-gutter{cursor:col-resize}.p-splitter-vertical.p-splitter-resizing{cursor:row-resize;-webkit-user-select:none;user-select:none}.p-splitter-vertical>.p-splitter-gutter{cursor:row-resize}.p-splitter-vertical>.p-splitter-gutter>.p-splitter-gutter-handle{width:24px;height:100%}\n"],encapsulation:2,changeDetection:0}),i})(),xae=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({imports:[Ns,Na]}),i})();const x4=function(i){return{"p-treenode-droppoint-active":i}};function wae(i,t){if(1&i){const e=Pi();lt(0,"li",4),fn("drop",function(r){return wt(e),At(_e(2).onDropPoint(r,-1))})("dragover",function(r){return wt(e),At(_e(2).onDropPointDragOver(r))})("dragenter",function(r){return wt(e),At(_e(2).onDropPointDragEnter(r,-1))})("dragleave",function(r){return wt(e),At(_e(2).onDropPointDragLeave(r))}),ct()}if(2&i){const e=_e(2);ve("ngClass",Bi(1,x4,e.draghoverPrev))}}const Aae=function(i){return{"p-checkbox-disabled":i}},Iae=function(i,t){return{"p-highlight":i,"p-indeterminate":t}},Sae=function(i,t){return{"pi-check":i,"pi-minus":t}};function Eae(i,t){if(1&i&&(lt(0,"div",13)(1,"div",14),ii(2,"span",15),ct()()),2&i){const e=_e(3);ve("ngClass",Bi(4,Aae,!1===e.node.selectable)),mr("aria-checked",e.isSelected()),Me(1),ve("ngClass",ys(6,Iae,e.isSelected(),e.node.partialSelected)),Me(1),ve("ngClass",ys(9,Sae,e.isSelected(),e.node.partialSelected))}}function Tae(i,t){1&i&&ii(0,"span"),2&i&&Ur(_e(3).getIcon())}function Mae(i,t){if(1&i&&(lt(0,"span"),qi(1),ct()),2&i){const e=_e(3);Me(1),as(e.node.label)}}function Dae(i,t){1&i&&Ki(0)}const w4=function(i){return{$implicit:i}};function Lae(i,t){if(1&i&&(lt(0,"span"),Ze(1,Dae,1,0,"ng-container",16),ct()),2&i){const e=_e(3);Me(1),ve("ngTemplateOutlet",e.tree.getTemplateForNode(e.node))("ngTemplateOutletContext",Bi(2,w4,e.node))}}function Pae(i,t){if(1&i&&ii(0,"p-treeNode",19),2&i){const e=t.$implicit,n=t.first,r=t.last,s=t.index,o=_e(4);ve("node",e)("parentNode",o.node)("firstChild",n)("lastChild",r)("index",s)("itemSize",o.itemSize)("level",o.level+1)}}function Rae(i,t){if(1&i&&(lt(0,"ul",17),Ze(1,Pae,1,7,"p-treeNode",18),ct()),2&i){const e=_e(3);tf("display",e.node.expanded?"block":"none"),Me(1),ve("ngForOf",e.node.children)("ngForTrackBy",e.tree.trackBy)}}const kae=function(i,t){return["p-treenode",i,t]},A4=function(i){return{height:i}},Oae=function(i,t,e){return{"p-treenode-selectable":i,"p-treenode-dragover":t,"p-highlight":e}},Fae=function(i,t){return{"pi-chevron-right":i,"pi-chevron-down":t}};function Nae(i,t){if(1&i){const e=Pi();lt(0,"li",5)(1,"div",6),fn("click",function(r){return wt(e),At(_e(2).onNodeClick(r))})("contextmenu",function(r){return wt(e),At(_e(2).onNodeRightClick(r))})("touchend",function(){return wt(e),At(_e(2).onNodeTouchEnd())})("drop",function(r){return wt(e),At(_e(2).onDropNode(r))})("dragover",function(r){return wt(e),At(_e(2).onDropNodeDragOver(r))})("dragenter",function(r){return wt(e),At(_e(2).onDropNodeDragEnter(r))})("dragleave",function(r){return wt(e),At(_e(2).onDropNodeDragLeave(r))})("dragstart",function(r){return wt(e),At(_e(2).onDragStart(r))})("dragend",function(r){return wt(e),At(_e(2).onDragStop(r))})("keydown",function(r){return wt(e),At(_e(2).onKeyDown(r))}),lt(2,"button",7),fn("click",function(r){return wt(e),At(_e(2).toggle(r))}),ii(3,"span",8),ct(),Ze(4,Eae,3,12,"div",9),Ze(5,Tae,1,2,"span",3),lt(6,"span",10),Ze(7,Mae,2,1,"span",11),Ze(8,Lae,2,4,"span",11),ct()(),Ze(9,Rae,2,4,"ul",12),ct()}if(2&i){const e=_e(2);ve("ngClass",ys(18,kae,e.node.styleClass||"",e.isLeaf()?"p-treenode-leaf":""))("ngStyle",Bi(21,A4,e.itemSize+"px")),Me(1),tf("padding-left",e.level*e.indentation+"rem"),ve("draggable",e.tree.draggableNodes)("ngClass",wu(23,Oae,e.tree.selectionMode&&!1!==e.node.selectable,e.draghoverNode,e.isSelected())),mr("tabindex",0)("aria-posinset",e.index+1)("aria-expanded",e.node.expanded)("aria-selected",e.isSelected())("aria-label",e.node.label),Me(1),mr("aria-label",e.tree.togglerAriaLabel),Me(1),ve("ngClass",ys(27,Fae,!e.node.expanded,e.node.expanded)),Me(1),ve("ngIf","checkbox"==e.tree.selectionMode),Me(1),ve("ngIf",e.node.icon||e.node.expandedIcon||e.node.collapsedIcon),Me(2),ve("ngIf",!e.tree.getTemplateForNode(e.node)),Me(1),ve("ngIf",e.tree.getTemplateForNode(e.node)),Me(1),ve("ngIf",!e.tree.virtualScroll&&e.node.children&&e.node.expanded)}}function Bae(i,t){if(1&i){const e=Pi();lt(0,"li",4),fn("drop",function(r){return wt(e),At(_e(2).onDropPoint(r,1))})("dragover",function(r){return wt(e),At(_e(2).onDropPointDragOver(r))})("dragenter",function(r){return wt(e),At(_e(2).onDropPointDragEnter(r,1))})("dragleave",function(r){return wt(e),At(_e(2).onDropPointDragLeave(r))}),ct()}if(2&i){const e=_e(2);ve("ngClass",Bi(1,x4,e.draghoverNext))}}const I4=function(i){return{"p-treenode-connector-line":i}};function zae(i,t){if(1&i&&(lt(0,"td",25)(1,"table",26)(2,"tbody")(3,"tr"),ii(4,"td",27),ct(),lt(5,"tr"),ii(6,"td",27),ct()()()()),2&i){const e=_e(3);Me(4),ve("ngClass",Bi(2,I4,!e.firstChild)),Me(2),ve("ngClass",Bi(4,I4,!e.lastChild))}}const Vae=function(i,t){return{"pi-plus":i,"pi-minus":t}};function Uae(i,t){if(1&i){const e=Pi();lt(0,"span",28),fn("click",function(r){return wt(e),At(_e(3).toggle(r))}),ct()}if(2&i){const e=_e(3);ve("ngClass",ys(2,Vae,!e.node.expanded,e.node.expanded)),mr("aria-label",e.tree.togglerAriaLabel)}}function Hae(i,t){1&i&&ii(0,"span"),2&i&&Ur(_e(3).getIcon())}function Gae(i,t){if(1&i&&(lt(0,"span"),qi(1),ct()),2&i){const e=_e(3);Me(1),as(e.node.label)}}function Wae(i,t){1&i&&Ki(0)}function jae(i,t){if(1&i&&(lt(0,"span"),Ze(1,Wae,1,0,"ng-container",16),ct()),2&i){const e=_e(3);Me(1),ve("ngTemplateOutlet",e.tree.getTemplateForNode(e.node))("ngTemplateOutletContext",Bi(2,w4,e.node))}}function $ae(i,t){if(1&i&&ii(0,"p-treeNode",32),2&i){const n=t.first,r=t.last;ve("node",t.$implicit)("firstChild",n)("lastChild",r)}}function qae(i,t){if(1&i&&(lt(0,"td",29)(1,"div",30),Ze(2,$ae,1,3,"p-treeNode",31),ct()()),2&i){const e=_e(3);tf("display",e.node.expanded?"table-cell":"none"),Me(2),ve("ngForOf",e.node.children)("ngForTrackBy",e.tree.trackBy)}}const Xae=function(i){return{"p-treenode-collapsed":i}},Yae=function(i,t){return{"p-treenode-selectable":i,"p-highlight":t}};function Kae(i,t){if(1&i){const e=Pi();lt(0,"table")(1,"tbody")(2,"tr"),Ze(3,zae,7,6,"td",20),lt(4,"td",21)(5,"div",22),fn("click",function(r){return wt(e),At(_e(2).onNodeClick(r))})("contextmenu",function(r){return wt(e),At(_e(2).onNodeRightClick(r))})("touchend",function(){return wt(e),At(_e(2).onNodeTouchEnd())})("keydown",function(r){return wt(e),At(_e(2).onNodeKeydown(r))}),Ze(6,Uae,1,5,"span",23),Ze(7,Hae,1,2,"span",3),lt(8,"span",10),Ze(9,Gae,2,1,"span",11),Ze(10,jae,2,4,"span",11),ct()()(),Ze(11,qae,3,4,"td",24),ct()()()}if(2&i){const e=_e(2);Ur(e.node.styleClass),Me(3),ve("ngIf",!e.root),Me(1),ve("ngClass",Bi(10,Xae,!e.node.expanded)),Me(1),ve("ngClass",ys(12,Yae,e.tree.selectionMode,e.isSelected())),Me(1),ve("ngIf",!e.isLeaf()),Me(1),ve("ngIf",e.node.icon||e.node.expandedIcon||e.node.collapsedIcon),Me(2),ve("ngIf",!e.tree.getTemplateForNode(e.node)),Me(1),ve("ngIf",e.tree.getTemplateForNode(e.node)),Me(1),ve("ngIf",e.node.children&&e.node.expanded)}}function Zae(i,t){if(1&i&&(Ze(0,wae,1,3,"li",1),Ze(1,Nae,10,30,"li",2),Ze(2,Bae,1,3,"li",1),Ze(3,Kae,12,15,"table",3)),2&i){const e=_e();ve("ngIf",e.tree.droppableNodes),Me(1),ve("ngIf",!e.tree.horizontal),Me(1),ve("ngIf",e.tree.droppableNodes&&e.lastChild),Me(1),ve("ngIf",e.tree.horizontal)}}const Qae=["filter"],Jae=["scroller"],ele=["wrapper"];function tle(i,t){if(1&i&&(lt(0,"div",9),ii(1,"i"),ct()),2&i){const e=_e(2);Me(1),Ur("p-tree-loading-icon pi-spin "+e.loadingIcon)}}function nle(i,t){1&i&&Ki(0)}function ile(i,t){if(1&i){const e=Pi();lt(0,"div",10)(1,"input",11,12),fn("keydown.enter",function(r){return r.preventDefault()})("input",function(r){return wt(e),At(_e(2)._filter(r.target.value))}),ct(),ii(3,"span",13),ct()}if(2&i){const e=_e(2);Me(1),mr("placeholder",e.filterPlaceholder)}}function rle(i,t){if(1&i&&ii(0,"p-treeNode",20),2&i){const e=t.$implicit,n=t.first,r=t.last,s=t.index,o=_e(2).options,l=_e(3);ve("level",e.level)("rowNode",e)("node",e.node)("firstChild",n)("lastChild",r)("index",l.getIndex(o,s))("itemSize",o.itemSize)("indentation",l.indentation)}}function sle(i,t){if(1&i&&(lt(0,"ul",18),Ze(1,rle,1,8,"p-treeNode",19),ct()),2&i){const e=_e(),n=e.options,r=e.$implicit,s=_e(3);uo(n.contentStyle),ve("ngClass",n.contentStyleClass),mr("aria-label",s.ariaLabel)("aria-labelledby",s.ariaLabelledBy),Me(1),ve("ngForOf",r)("ngForTrackBy",s.trackBy)}}function ole(i,t){1&i&&Ze(0,sle,2,7,"ul",17),2&i&&ve("ngIf",t.$implicit)}function ale(i,t){1&i&&Ki(0)}const lle=function(i){return{options:i}};function cle(i,t){if(1&i&&Ze(0,ale,1,0,"ng-container",22),2&i){const e=t.options;ve("ngTemplateOutlet",_e(4).loaderTemplate)("ngTemplateOutletContext",Bi(2,lle,e))}}function ule(i,t){1&i&&(qr(0),Ze(1,cle,1,4,"ng-template",21),Xr())}function dle(i,t){if(1&i){const e=Pi();lt(0,"p-scroller",14,15),fn("onScroll",function(r){return wt(e),At(_e(2).onScroll.emit(r))})("onScrollIndexChange",function(r){return wt(e),At(_e(2).onScrollIndexChange.emit(r))})("onLazyLoad",function(r){return wt(e),At(_e(2).onLazyLoad.emit(r))}),Ze(2,ole,1,1,"ng-template",16),Ze(3,ule,2,0,"ng-container",7),ct()}if(2&i){const e=_e(2);uo(Bi(7,A4,e.scrollHeight)),ve("items",e.serializedValue)("itemSize",e.virtualScrollItemSize||e._virtualNodeHeight)("lazy",e.lazy)("options",e.virtualScrollOptions),Me(3),ve("ngIf",e.loaderTemplate)}}function hle(i,t){if(1&i&&ii(0,"p-treeNode",28),2&i){const n=t.first,r=t.last,s=t.index;ve("node",t.$implicit)("firstChild",n)("lastChild",r)("index",s)("level",0)}}function fle(i,t){if(1&i&&(lt(0,"ul",26),Ze(1,hle,1,5,"p-treeNode",27),ct()),2&i){const e=_e(3);mr("aria-label",e.ariaLabel)("aria-labelledby",e.ariaLabelledBy),Me(1),ve("ngForOf",e.getRootNode())("ngForTrackBy",e.trackBy)}}function ple(i,t){if(1&i&&(qr(0),lt(1,"div",23,24),Ze(3,fle,2,4,"ul",25),ct(),Xr()),2&i){const e=_e(2);Me(1),tf("max-height",e.scrollHeight),Me(2),ve("ngIf",e.getRootNode())}}function gle(i,t){if(1&i&&(qr(0),qi(1),Xr()),2&i){const e=_e(3);Me(1),yd(" ",e.emptyMessageLabel," ")}}function mle(i,t){1&i&&Ki(0,null,31)}function vle(i,t){if(1&i&&(lt(0,"div",29),Ze(1,gle,2,1,"ng-container",30),Ze(2,mle,2,0,"ng-container",4),ct()),2&i){const e=_e(2);Me(1),ve("ngIf",!e.emptyMessageTemplate)("ngIfElse",e.emptyFilter),Me(1),ve("ngTemplateOutlet",e.emptyMessageTemplate)}}function yle(i,t){1&i&&Ki(0)}const _le=function(i,t,e,n){return{"p-tree p-component":!0,"p-tree-selectable":i,"p-treenode-dragover":t,"p-tree-loading":e,"p-tree-flex-scrollable":n}};function ble(i,t){if(1&i){const e=Pi();lt(0,"div",2),fn("drop",function(r){return wt(e),At(_e().onDrop(r))})("dragover",function(r){return wt(e),At(_e().onDragOver(r))})("dragenter",function(){return wt(e),At(_e().onDragEnter())})("dragleave",function(r){return wt(e),At(_e().onDragLeave(r))}),Ze(1,tle,2,2,"div",3),Ze(2,nle,1,0,"ng-container",4),Ze(3,ile,4,1,"div",5),Ze(4,dle,4,9,"p-scroller",6),Ze(5,ple,4,3,"ng-container",7),Ze(6,vle,3,3,"div",8),Ze(7,yle,1,0,"ng-container",4),ct()}if(2&i){const e=_e();Ur(e.styleClass),ve("ngClass",Ff(11,_le,e.selectionMode,e.dragHover,e.loading,"flex"===e.scrollHeight))("ngStyle",e.style),Me(1),ve("ngIf",e.loading),Me(1),ve("ngTemplateOutlet",e.headerTemplate),Me(1),ve("ngIf",e.filter),Me(1),ve("ngIf",e.virtualScroll),Me(1),ve("ngIf",!e.virtualScroll),Me(1),ve("ngIf",!e.loading&&(null==e.getRootNode()||0===e.getRootNode().length)),Me(1),ve("ngTemplateOutlet",e.footerTemplate)}}function Cle(i,t){1&i&&Ki(0)}function xle(i,t){if(1&i&&(lt(0,"div",34),ii(1,"i"),ct()),2&i){const e=_e(2);Me(1),Ur("p-tree-loading-icon pi-spin "+e.loadingIcon)}}function wle(i,t){if(1&i&&(lt(0,"table"),ii(1,"p-treeNode",35),ct()),2&i){const e=_e(2);Me(1),ve("node",e.value[0])("root",!0)}}function Ale(i,t){if(1&i&&(qr(0),qi(1),Xr()),2&i){const e=_e(3);Me(1),yd(" ",e.emptyMessageLabel," ")}}function Ile(i,t){1&i&&Ki(0,null,31)}function Sle(i,t){if(1&i&&(lt(0,"div",29),Ze(1,Ale,2,1,"ng-container",30),Ze(2,Ile,2,0,"ng-container",4),ct()),2&i){const e=_e(2);Me(1),ve("ngIf",!e.emptyMessageTemplate)("ngIfElse",e.emptyFilter),Me(1),ve("ngTemplateOutlet",e.emptyMessageTemplate)}}function Ele(i,t){1&i&&Ki(0)}const Tle=function(i){return{"p-tree p-tree-horizontal p-component":!0,"p-tree-selectable":i}};function Mle(i,t){if(1&i&&(lt(0,"div",32),Ze(1,Cle,1,0,"ng-container",4),Ze(2,xle,2,2,"div",33),Ze(3,wle,2,2,"table",7),Ze(4,Sle,3,3,"div",8),Ze(5,Ele,1,0,"ng-container",4),ct()),2&i){const e=_e();Ur(e.styleClass),ve("ngClass",Bi(9,Tle,e.selectionMode))("ngStyle",e.style),Me(1),ve("ngTemplateOutlet",e.headerTemplate),Me(1),ve("ngIf",e.loading),Me(1),ve("ngIf",e.value&&e.value[0]),Me(1),ve("ngIf",!e.loading&&(null==e.getRootNode()||0===e.getRootNode().length)),Me(1),ve("ngTemplateOutlet",e.footerTemplate)}}let Dle=(()=>{class i{constructor(e){this.tree=e}ngOnInit(){this.node.parent=this.parentNode,this.parentNode&&this.tree.syncNodeOption(this.node,this.tree.value,"parent",this.tree.getNodeWithKey(this.parentNode.key,this.tree.value))}getIcon(){let e;return e=this.node.icon?this.node.icon:this.node.expanded&&this.node.children&&this.node.children.length?this.node.expandedIcon:this.node.collapsedIcon,i.ICON_CLASS+" "+e}isLeaf(){return this.tree.isNodeLeaf(this.node)}toggle(e){this.node.expanded?this.collapse(e):this.expand(e)}expand(e){this.node.expanded=!0,this.tree.virtualScroll&&this.tree.updateSerializedValue(),this.tree.onNodeExpand.emit({originalEvent:e,node:this.node})}collapse(e){this.node.expanded=!1,this.tree.virtualScroll&&this.tree.updateSerializedValue(),this.tree.onNodeCollapse.emit({originalEvent:e,node:this.node})}onNodeClick(e){this.tree.onNodeClick(e,this.node)}onNodeKeydown(e){13===e.which&&this.tree.onNodeClick(e,this.node)}onNodeTouchEnd(){this.tree.onNodeTouchEnd()}onNodeRightClick(e){this.tree.onNodeRightClick(e,this.node)}isSelected(){return this.tree.isSelected(this.node)}onDropPoint(e,n){e.preventDefault();let r=this.tree.dragNode,l=this.tree.dragNodeTree!==this.tree||1===n||this.tree.dragNodeIndex!==this.index-1;if(this.tree.allowDrop(r,this.node,this.tree.dragNodeScope)&&l){let u={...this.createDropPointEventMetadata(n)};this.tree.validateDrop?this.tree.onNodeDrop.emit({originalEvent:e,dragNode:r,dropNode:this.node,index:this.index,accept:()=>{this.processPointDrop(u)}}):(this.processPointDrop(u),this.tree.onNodeDrop.emit({originalEvent:e,dragNode:r,dropNode:this.node,index:this.index}))}this.draghoverPrev=!1,this.draghoverNext=!1}processPointDrop(e){let n=e.dropNode.parent?e.dropNode.parent.children:this.tree.value;e.dragNodeSubNodes.splice(e.dragNodeIndex,1);let r=this.index;e.position<0?(r=e.dragNodeSubNodes===n?e.dragNodeIndex>e.index?e.index:e.index-1:e.index,n.splice(r,0,e.dragNode)):(r=n.length,n.push(e.dragNode)),this.tree.dragDropService.stopDrag({node:e.dragNode,subNodes:e.dropNode.parent?e.dropNode.parent.children:this.tree.value,index:e.dragNodeIndex})}createDropPointEventMetadata(e){return{dragNode:this.tree.dragNode,dragNodeIndex:this.tree.dragNodeIndex,dragNodeSubNodes:this.tree.dragNodeSubNodes,dropNode:this.node,index:this.index,position:e}}onDropPointDragOver(e){e.dataTransfer.dropEffect="move",e.preventDefault()}onDropPointDragEnter(e,n){this.tree.allowDrop(this.tree.dragNode,this.node,this.tree.dragNodeScope)&&(n<0?this.draghoverPrev=!0:this.draghoverNext=!0)}onDropPointDragLeave(e){this.draghoverPrev=!1,this.draghoverNext=!1}onDragStart(e){this.tree.draggableNodes&&!1!==this.node.draggable?(e.dataTransfer.setData("text","data"),this.tree.dragDropService.startDrag({tree:this,node:this.node,subNodes:this.node.parent?this.node.parent.children:this.tree.value,index:this.index,scope:this.tree.draggableScope})):e.preventDefault()}onDragStop(e){this.tree.dragDropService.stopDrag({node:this.node,subNodes:this.node.parent?this.node.parent.children:this.tree.value,index:this.index})}onDropNodeDragOver(e){e.dataTransfer.dropEffect="move",this.tree.droppableNodes&&(e.preventDefault(),e.stopPropagation())}onDropNode(e){if(this.tree.droppableNodes&&!1!==this.node.droppable){let n=this.tree.dragNode;if(this.tree.allowDrop(n,this.node,this.tree.dragNodeScope)){let r={...this.createDropNodeEventMetadata()};this.tree.validateDrop?this.tree.onNodeDrop.emit({originalEvent:e,dragNode:n,dropNode:this.node,index:this.index,accept:()=>{this.processNodeDrop(r)}}):(this.processNodeDrop(r),this.tree.onNodeDrop.emit({originalEvent:e,dragNode:n,dropNode:this.node,index:this.index}))}}e.preventDefault(),e.stopPropagation(),this.draghoverNode=!1}createDropNodeEventMetadata(){return{dragNode:this.tree.dragNode,dragNodeIndex:this.tree.dragNodeIndex,dragNodeSubNodes:this.tree.dragNodeSubNodes,dropNode:this.node}}processNodeDrop(e){let n=e.dragNodeIndex;e.dragNodeSubNodes.splice(n,1),e.dropNode.children?e.dropNode.children.push(e.dragNode):e.dropNode.children=[e.dragNode],this.tree.dragDropService.stopDrag({node:e.dragNode,subNodes:e.dropNode.parent?e.dropNode.parent.children:this.tree.value,index:n})}onDropNodeDragEnter(e){this.tree.droppableNodes&&!1!==this.node.droppable&&this.tree.allowDrop(this.tree.dragNode,this.node,this.tree.dragNodeScope)&&(this.draghoverNode=!0)}onDropNodeDragLeave(e){if(this.tree.droppableNodes){let n=e.currentTarget.getBoundingClientRect();(e.x>n.left+n.width||e.x<n.left||e.y>=Math.floor(n.top+n.height)||e.y<n.top)&&(this.draghoverNode=!1)}}onKeyDown(e){const n=e.target.parentElement.parentElement;if(!("P-TREENODE"!==n.nodeName||this.tree.contextMenu&&"block"===this.tree.contextMenu.containerViewChild.nativeElement.style.display))switch(e.which){case 40:const r=this.tree.droppableNodes?n.children[1].children[1]:n.children[0].children[1];if(r&&r.children.length>0)this.focusNode(r.children[0]);else{const s=n.nextElementSibling;if(s)this.focusNode(s);else{let o=this.findNextSiblingOfAncestor(n);o&&this.focusNode(o)}}e.preventDefault();break;case 38:if(n.previousElementSibling)this.focusNode(this.findLastVisibleDescendant(n.previousElementSibling));else{let s=this.getParentNodeElement(n);s&&this.focusNode(s)}e.preventDefault();break;case 39:!this.node.expanded&&!this.tree.isNodeLeaf(this.node)&&this.expand(e),e.preventDefault();break;case 37:if(this.node.expanded)this.collapse(e);else{let s=this.getParentNodeElement(n);s&&this.focusNode(s)}e.preventDefault();break;case 13:this.tree.onNodeClick(e,this.node),e.preventDefault()}}findNextSiblingOfAncestor(e){let n=this.getParentNodeElement(e);return n?n.nextElementSibling?n.nextElementSibling:this.findNextSiblingOfAncestor(n):null}findLastVisibleDescendant(e){const r=Array.from(e.children).find(s=>Kt.hasClass(s,"p-treenode")).children[1];return r&&r.children.length>0?this.findLastVisibleDescendant(r.children[r.children.length-1]):e}getParentNodeElement(e){const n=e.parentElement.parentElement.parentElement;return"P-TREENODE"===n.tagName?n:null}focusNode(e){this.tree.droppableNodes?e.children[1].children[0].focus():e.children[0].children[0].focus()}}return i.ICON_CLASS="p-treenode-icon ",i.\u0275fac=function(e){return new(e||i)(Zt(ds(()=>S4)))},i.\u0275cmp=Ir({type:i,selectors:[["p-treeNode"]],hostAttrs:[1,"p-element"],inputs:{rowNode:"rowNode",node:"node",parentNode:"parentNode",root:"root",index:"index",firstChild:"firstChild",lastChild:"lastChild",level:"level",indentation:"indentation",itemSize:"itemSize"},decls:1,vars:1,consts:[[3,"ngIf"],["class","p-treenode-droppoint",3,"ngClass","drop","dragover","dragenter","dragleave",4,"ngIf"],[3,"ngClass","ngStyle",4,"ngIf"],[3,"class",4,"ngIf"],[1,"p-treenode-droppoint",3,"ngClass","drop","dragover","dragenter","dragleave"],[3,"ngClass","ngStyle"],["role","treeitem",1,"p-treenode-content",3,"draggable","ngClass","click","contextmenu","touchend","drop","dragover","dragenter","dragleave","dragstart","dragend","keydown"],["type","button","pRipple","","tabindex","-1",1,"p-tree-toggler","p-link",3,"click"],[1,"p-tree-toggler-icon","pi","pi-fw",3,"ngClass"],["class","p-checkbox p-component",3,"ngClass",4,"ngIf"],[1,"p-treenode-label"],[4,"ngIf"],["class","p-treenode-children","style","display: none;","role","group",3,"display",4,"ngIf"],[1,"p-checkbox","p-component",3,"ngClass"],[1,"p-checkbox-box",3,"ngClass"],[1,"p-checkbox-icon","pi",3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["role","group",1,"p-treenode-children",2,"display","none"],[3,"node","parentNode","firstChild","lastChild","index","itemSize","level",4,"ngFor","ngForOf","ngForTrackBy"],[3,"node","parentNode","firstChild","lastChild","index","itemSize","level"],["class","p-treenode-connector",4,"ngIf"],[1,"p-treenode",3,"ngClass"],["tabindex","0",1,"p-treenode-content",3,"ngClass","click","contextmenu","touchend","keydown"],["class","p-tree-toggler pi pi-fw",3,"ngClass","click",4,"ngIf"],["class","p-treenode-children-container",3,"display",4,"ngIf"],[1,"p-treenode-connector"],[1,"p-treenode-connector-table"],[3,"ngClass"],[1,"p-tree-toggler","pi","pi-fw",3,"ngClass","click"],[1,"p-treenode-children-container"],[1,"p-treenode-children"],[3,"node","firstChild","lastChild",4,"ngFor","ngForOf","ngForTrackBy"],[3,"node","firstChild","lastChild"]],template:function(e,n){1&e&&Ze(0,Zae,4,4,"ng-template",0),2&e&&ve("ngIf",n.node)},dependencies:[bo,Su,Wo,rc,Qo,_d,i],encapsulation:2}),i})(),S4=(()=>{class i{constructor(e,n,r){this.el=e,this.dragDropService=n,this.config=r,this.layout="vertical",this.metaKeySelection=!0,this.propagateSelectionUp=!0,this.propagateSelectionDown=!0,this.loadingIcon="pi pi-spinner",this.emptyMessage="",this.filterBy="label",this.filterMode="lenient",this.lazy=!1,this.indentation=1.5,this.trackBy=(s,o)=>o,this.selectionChange=new qn,this.onNodeSelect=new qn,this.onNodeUnselect=new qn,this.onNodeExpand=new qn,this.onNodeCollapse=new qn,this.onNodeContextMenuSelect=new qn,this.onNodeDrop=new qn,this.onLazyLoad=new qn,this.onScroll=new qn,this.onScrollIndexChange=new qn,this.onFilter=new qn}get virtualNodeHeight(){return this._virtualNodeHeight}set virtualNodeHeight(e){this._virtualNodeHeight=e,console.warn("The virtualNodeHeight property is deprecated, use virtualScrollItemSize property instead.")}ngOnInit(){this.droppableNodes&&(this.dragStartSubscription=this.dragDropService.dragStart$.subscribe(e=>{this.dragNodeTree=e.tree,this.dragNode=e.node,this.dragNodeSubNodes=e.subNodes,this.dragNodeIndex=e.index,this.dragNodeScope=e.scope}),this.dragStopSubscription=this.dragDropService.dragStop$.subscribe(e=>{this.dragNodeTree=null,this.dragNode=null,this.dragNodeSubNodes=null,this.dragNodeIndex=null,this.dragNodeScope=null,this.dragHover=!1}))}ngOnChanges(e){e.value&&this.updateSerializedValue()}get horizontal(){return"horizontal"==this.layout}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(Wc.EMPTY_MESSAGE)}ngAfterContentInit(){this.templates.length&&(this.templateMap={}),this.templates.forEach(e=>{switch(e.getType()){case"header":this.headerTemplate=e.template;break;case"empty":this.emptyMessageTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"loader":this.loaderTemplate=e.template;break;default:this.templateMap[e.name]=e.template}})}updateSerializedValue(){this.serializedValue=[],this.serializeNodes(null,this.getRootNode(),0,!0)}serializeNodes(e,n,r,s){if(n&&n.length)for(let o of n){o.parent=e;const l={node:o,parent:e,level:r,visible:s&&(!e||e.expanded)};this.serializedValue.push(l),l.visible&&o.expanded&&this.serializeNodes(o,o.children,r+1,l.visible)}}onNodeClick(e,n){let r=e.target;if(!Kt.hasClass(r,"p-tree-toggler")&&!Kt.hasClass(r,"p-tree-toggler-icon")){if(this.selectionMode){if(!1===n.selectable||this.hasFilteredNodes()&&!(n=this.getNodeWithKey(n.key,this.value)))return;let s=this.findIndexInSelection(n),o=s>=0;if(this.isCheckboxSelectionMode())o?(this.propagateSelectionDown?this.propagateDown(n,!1):this.selection=this.selection.filter((l,u)=>u!=s),this.propagateSelectionUp&&n.parent&&this.propagateUp(n.parent,!1),this.selectionChange.emit(this.selection),this.onNodeUnselect.emit({originalEvent:e,node:n})):(this.propagateSelectionDown?this.propagateDown(n,!0):this.selection=[...this.selection||[],n],this.propagateSelectionUp&&n.parent&&this.propagateUp(n.parent,!0),this.selectionChange.emit(this.selection),this.onNodeSelect.emit({originalEvent:e,node:n}));else if(!this.nodeTouched&&this.metaKeySelection){let u=e.metaKey||e.ctrlKey;o&&u?(this.isSingleSelectionMode()?this.selectionChange.emit(null):(this.selection=this.selection.filter((p,v)=>v!=s),this.selectionChange.emit(this.selection)),this.onNodeUnselect.emit({originalEvent:e,node:n})):(this.isSingleSelectionMode()?this.selectionChange.emit(n):this.isMultipleSelectionMode()&&(this.selection=u&&this.selection||[],this.selection=[...this.selection,n],this.selectionChange.emit(this.selection)),this.onNodeSelect.emit({originalEvent:e,node:n}))}else this.isSingleSelectionMode()?o?(this.selection=null,this.onNodeUnselect.emit({originalEvent:e,node:n})):(this.selection=n,this.onNodeSelect.emit({originalEvent:e,node:n})):o?(this.selection=this.selection.filter((u,p)=>p!=s),this.onNodeUnselect.emit({originalEvent:e,node:n})):(this.selection=[...this.selection||[],n],this.onNodeSelect.emit({originalEvent:e,node:n})),this.selectionChange.emit(this.selection)}this.nodeTouched=!1}}onNodeTouchEnd(){this.nodeTouched=!0}onNodeRightClick(e,n){if(this.contextMenu){let r=e.target;if(r.className&&0===r.className.indexOf("p-tree-toggler"))return;this.findIndexInSelection(n)>=0||(this.isSingleSelectionMode()?this.selectionChange.emit(n):this.selectionChange.emit([n])),this.contextMenu.show(e),this.onNodeContextMenuSelect.emit({originalEvent:e,node:n})}}findIndexInSelection(e){let n=-1;if(this.selectionMode&&this.selection)if(this.isSingleSelectionMode())n=this.selection.key&&this.selection.key===e.key||this.selection==e?0:-1;else for(let r=0;r<this.selection.length;r++){let s=this.selection[r];if(s.key&&s.key===e.key||s==e){n=r;break}}return n}syncNodeOption(e,n,r,s){const o=this.hasFilteredNodes()?this.getNodeWithKey(e.key,n):null;o&&(o[r]=s||e[r])}hasFilteredNodes(){return this.filter&&this.filteredNodes&&this.filteredNodes.length}getNodeWithKey(e,n){for(let r of n){if(r.key===e)return r;if(r.children){let s=this.getNodeWithKey(e,r.children);if(s)return s}}}propagateUp(e,n){if(e.children&&e.children.length){let s=0,o=!1;for(let l of e.children)this.isSelected(l)?s++:l.partialSelected&&(o=!0);if(n&&s==e.children.length)this.selection=[...this.selection||[],e],e.partialSelected=!1;else{if(!n){let l=this.findIndexInSelection(e);l>=0&&(this.selection=this.selection.filter((u,p)=>p!=l))}e.partialSelected=!!(o||s>0&&s!=e.children.length)}this.syncNodeOption(e,this.filteredNodes,"partialSelected")}let r=e.parent;r&&this.propagateUp(r,n)}propagateDown(e,n){let r=this.findIndexInSelection(e);if(n&&-1==r?this.selection=[...this.selection||[],e]:!n&&r>-1&&(this.selection=this.selection.filter((s,o)=>o!=r)),e.partialSelected=!1,this.syncNodeOption(e,this.filteredNodes,"partialSelected"),e.children&&e.children.length)for(let s of e.children)this.propagateDown(s,n)}isSelected(e){return-1!=this.findIndexInSelection(e)}isSingleSelectionMode(){return this.selectionMode&&"single"==this.selectionMode}isMultipleSelectionMode(){return this.selectionMode&&"multiple"==this.selectionMode}isCheckboxSelectionMode(){return this.selectionMode&&"checkbox"==this.selectionMode}isNodeLeaf(e){return 0!=e.leaf&&!(e.children&&e.children.length)}getRootNode(){return this.filteredNodes?this.filteredNodes:this.value}getTemplateForNode(e){return this.templateMap?e.type?this.templateMap[e.type]:this.templateMap.default:null}onDragOver(e){this.droppableNodes&&(!this.value||0===this.value.length)&&(e.dataTransfer.dropEffect="move",e.preventDefault())}onDrop(e){if(this.droppableNodes&&(!this.value||0===this.value.length)){e.preventDefault();let n=this.dragNode;if(this.allowDrop(n,null,this.dragNodeScope)){let r=this.dragNodeIndex;this.value=this.value||[],this.validateDrop?this.onNodeDrop.emit({originalEvent:e,dragNode:n,dropNode:null,index:r,accept:()=>{this.processTreeDrop(n,r)}}):(this.onNodeDrop.emit({originalEvent:e,dragNode:n,dropNode:null,index:r}),this.processTreeDrop(n,r))}}}processTreeDrop(e,n){this.dragNodeSubNodes.splice(n,1),this.value.push(e),this.dragDropService.stopDrag({node:e})}onDragEnter(){this.droppableNodes&&this.allowDrop(this.dragNode,null,this.dragNodeScope)&&(this.dragHover=!0)}onDragLeave(e){if(this.droppableNodes){let n=e.currentTarget.getBoundingClientRect();(e.x>n.left+n.width||e.x<n.left||e.y>n.top+n.height||e.y<n.top)&&(this.dragHover=!1)}}allowDrop(e,n,r){if(e){if(this.isValidDragScope(r)){let s=!0;if(n)if(e===n)s=!1;else{let o=n.parent;for(;null!=o;){if(o===e){s=!1;break}o=o.parent}}return s}return!1}return!1}isValidDragScope(e){let n=this.droppableScope;if(n){if("string"==typeof n){if("string"==typeof e)return n===e;if(e instanceof Array)return-1!=e.indexOf(n)}else if(n instanceof Array){if("string"==typeof e)return-1!=n.indexOf(e);if(e instanceof Array)for(let r of n)for(let s of e)if(r===s)return!0}return!1}return!0}_filter(e){let n=e;if(""===n)this.filteredNodes=null;else{this.filteredNodes=[];const r=this.filterBy.split(","),s=fr.removeAccents(n).toLocaleLowerCase(this.filterLocale),o="strict"===this.filterMode;for(let l of this.value){let u={...l},p={searchFields:r,filterText:s,isStrictMode:o};(o&&(this.findFilteredNodes(u,p)||this.isFilterMatched(u,p))||!o&&(this.isFilterMatched(u,p)||this.findFilteredNodes(u,p)))&&this.filteredNodes.push(u)}}this.updateSerializedValue(),this.onFilter.emit({filter:n,filteredValue:this.filteredNodes})}resetFilter(){this.filteredNodes=null,this.filterViewChild&&this.filterViewChild.nativeElement&&(this.filterViewChild.nativeElement.value="")}scrollToVirtualIndex(e){this.virtualScroll&&this.scroller.scrollToIndex(e)}scrollTo(e){this.virtualScroll?this.scroller.scrollTo(e):this.wrapperViewChild&&this.wrapperViewChild.nativeElement&&(this.wrapperViewChild.nativeElement.scrollTo?this.wrapperViewChild.nativeElement.scrollTo(e):(this.wrapperViewChild.nativeElement.scrollLeft=e.left,this.wrapperViewChild.nativeElement.scrollTop=e.top))}findFilteredNodes(e,n){if(e){let r=!1;if(e.children){let s=[...e.children];e.children=[];for(let o of s){let l={...o};this.isFilterMatched(l,n)&&(r=!0,e.children.push(l))}}if(r)return e.expanded=!0,!0}}isFilterMatched(e,{searchFields:n,filterText:r,isStrictMode:s}){let o=!1;for(let l of n)fr.removeAccents(String(fr.resolveFieldData(e,l))).toLocaleLowerCase(this.filterLocale).indexOf(r)>-1&&(o=!0);return(!o||s&&!this.isNodeLeaf(e))&&(o=this.findFilteredNodes(e,{searchFields:n,filterText:r,isStrictMode:s})||o),o}getIndex(e,n){const r=e.getItemOptions;return r?r(n).index:n}getBlockableElement(){return this.el.nativeElement.children[0]}ngOnDestroy(){this.dragStartSubscription&&this.dragStartSubscription.unsubscribe(),this.dragStopSubscription&&this.dragStopSubscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(Zt(Xn),Zt(WK,8),Zt(Tp))},i.\u0275cmp=Ir({type:i,selectors:[["p-tree"]],contentQueries:function(e,n,r){if(1&e&&cl(r,_l,4),2&e){let s;vr(s=yr())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(vs(Qae,5),vs(Jae,5),vs(ele,5)),2&e){let r;vr(r=yr())&&(n.filterViewChild=r.first),vr(r=yr())&&(n.scroller=r.first),vr(r=yr())&&(n.wrapperViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{value:"value",selectionMode:"selectionMode",selection:"selection",style:"style",styleClass:"styleClass",contextMenu:"contextMenu",layout:"layout",draggableScope:"draggableScope",droppableScope:"droppableScope",draggableNodes:"draggableNodes",droppableNodes:"droppableNodes",metaKeySelection:"metaKeySelection",propagateSelectionUp:"propagateSelectionUp",propagateSelectionDown:"propagateSelectionDown",loading:"loading",loadingIcon:"loadingIcon",emptyMessage:"emptyMessage",ariaLabel:"ariaLabel",togglerAriaLabel:"togglerAriaLabel",ariaLabelledBy:"ariaLabelledBy",validateDrop:"validateDrop",filter:"filter",filterBy:"filterBy",filterMode:"filterMode",filterPlaceholder:"filterPlaceholder",filteredNodes:"filteredNodes",filterLocale:"filterLocale",scrollHeight:"scrollHeight",lazy:"lazy",virtualScroll:"virtualScroll",virtualScrollItemSize:"virtualScrollItemSize",virtualScrollOptions:"virtualScrollOptions",indentation:"indentation",trackBy:"trackBy",virtualNodeHeight:"virtualNodeHeight"},outputs:{selectionChange:"selectionChange",onNodeSelect:"onNodeSelect",onNodeUnselect:"onNodeUnselect",onNodeExpand:"onNodeExpand",onNodeCollapse:"onNodeCollapse",onNodeContextMenuSelect:"onNodeContextMenuSelect",onNodeDrop:"onNodeDrop",onLazyLoad:"onLazyLoad",onScroll:"onScroll",onScrollIndexChange:"onScrollIndexChange",onFilter:"onFilter"},features:[_a],decls:2,vars:2,consts:[[3,"ngClass","ngStyle","class","drop","dragover","dragenter","dragleave",4,"ngIf"],[3,"ngClass","ngStyle","class",4,"ngIf"],[3,"ngClass","ngStyle","drop","dragover","dragenter","dragleave"],["class","p-tree-loading-overlay p-component-overlay",4,"ngIf"],[4,"ngTemplateOutlet"],["class","p-tree-filter-container",4,"ngIf"],["styleClass","p-tree-wrapper",3,"items","style","itemSize","lazy","options","onScroll","onScrollIndexChange","onLazyLoad",4,"ngIf"],[4,"ngIf"],["class","p-tree-empty-message",4,"ngIf"],[1,"p-tree-loading-overlay","p-component-overlay"],[1,"p-tree-filter-container"],["type","text","autocomplete","off",1,"p-tree-filter","p-inputtext","p-component",3,"keydown.enter","input"],["filter",""],[1,"p-tree-filter-icon","pi","pi-search"],["styleClass","p-tree-wrapper",3,"items","itemSize","lazy","options","onScroll","onScrollIndexChange","onLazyLoad"],["scroller",""],["pTemplate","content"],["class","p-tree-container","role","tree",3,"ngClass","style",4,"ngIf"],["role","tree",1,"p-tree-container",3,"ngClass"],[3,"level","rowNode","node","firstChild","lastChild","index","itemSize","indentation",4,"ngFor","ngForOf","ngForTrackBy"],[3,"level","rowNode","node","firstChild","lastChild","index","itemSize","indentation"],["pTemplate","loader"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-tree-wrapper"],["wrapper",""],["class","p-tree-container","role","tree",4,"ngIf"],["role","tree",1,"p-tree-container"],[3,"node","firstChild","lastChild","index","level",4,"ngFor","ngForOf","ngForTrackBy"],[3,"node","firstChild","lastChild","index","level"],[1,"p-tree-empty-message"],[4,"ngIf","ngIfElse"],["emptyFilter",""],[3,"ngClass","ngStyle"],["class","p-tree-loading-mask p-component-overlay",4,"ngIf"],[1,"p-tree-loading-mask","p-component-overlay"],[3,"node","root"]],template:function(e,n){1&e&&(Ze(0,ble,8,16,"div",0),Ze(1,Mle,6,11,"div",1)),2&e&&(ve("ngIf",!n.horizontal),Me(1),ve("ngIf",n.horizontal))},dependencies:[bo,Su,Wo,rc,Qo,_l,z1,Dle],styles:[".p-tree-container{margin:0;padding:0;list-style-type:none;overflow:auto}.p-treenode-children{margin:0;padding:0;list-style-type:none}.p-tree-wrapper{overflow:auto}.p-treenode-selectable{cursor:pointer;-webkit-user-select:none;user-select:none}.p-tree-toggler{cursor:pointer;-webkit-user-select:none;user-select:none;display:inline-flex;align-items:center;justify-content:center;overflow:hidden;position:relative;flex-shrink:0}.p-treenode-leaf>.p-treenode-content .p-tree-toggler{visibility:hidden}.p-treenode-content{display:flex;align-items:center}.p-tree-filter{width:100%}.p-tree-filter-container{position:relative;display:block;width:100%}.p-tree-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-tree-loading{position:relative;min-height:4rem}.p-tree .p-tree-loading-overlay{position:absolute;display:flex;align-items:center;justify-content:center;z-index:2}.p-tree-flex-scrollable{display:flex;flex:1;height:100%;flex-direction:column}.p-tree-flex-scrollable .p-tree-wrapper{flex:1}.p-tree .p-treenode-droppoint{height:4px;list-style-type:none}.p-tree .p-treenode-droppoint-active{border:0 none}.p-tree-horizontal{width:auto;padding-left:0;padding-right:0;overflow:auto}.p-tree.p-tree-horizontal table,.p-tree.p-tree-horizontal tr,.p-tree.p-tree-horizontal td{border-collapse:collapse;margin:0;padding:0;vertical-align:middle}.p-tree-horizontal .p-treenode-content{font-weight:400;padding:.4em 1em .4em .2em;display:flex;align-items:center}.p-tree-horizontal .p-treenode-parent .p-treenode-content{font-weight:400;white-space:nowrap}.p-tree.p-tree-horizontal .p-treenode{background:url(data:image/gif;base64,R0lGODlhAQABAIAAALGxsf///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNC4xLWMwMzQgNDYuMjcyOTc2LCBTYXQgSmFuIDI3IDIwMDcgMjI6Mzc6MzcgICAgICAgICI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnhhcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyI+CiAgICAgICAgIDx4YXA6Q3JlYXRvclRvb2w+QWRvYmUgRmlyZXdvcmtzIENTMzwveGFwOkNyZWF0b3JUb29sPgogICAgICAgICA8eGFwOkNyZWF0ZURhdGU+MjAxMC0wMy0xMVQxMDoxNjo0MVo8L3hhcDpDcmVhdGVEYXRlPgogICAgICAgICA8eGFwOk1vZGlmeURhdGU+MjAxMC0wMy0xMVQxMjo0NDoxOVo8L3hhcDpNb2RpZnlEYXRlPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIj4KICAgICAgICAgPGRjOmZvcm1hdD5pbWFnZS9naWY8L2RjOmZvcm1hdD4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgCjw/eHBhY2tldCBlbmQ9InciPz4B//79/Pv6+fj39vX08/Lx8O/u7ezr6uno5+bl5OPi4eDf3t3c29rZ2NfW1dTT0tHQz87NzMvKycjHxsXEw8LBwL++vby7urm4t7a1tLOysbCvrq2sq6qpqKempaSjoqGgn56dnJuamZiXlpWUk5KRkI+OjYyLiomIh4aFhIOCgYB/fn18e3p5eHd2dXRzcnFwb25tbGtqaWhnZmVkY2JhYF9eXVxbWllYV1ZVVFNSUVBPTk1MS0pJSEdGRURDQkFAPz49PAA6OTg3NjU0MzIxMC8uLSwrKikoJyYlJCMiISAfHh0cGxoZGBcWFRQTEhEQDw4NDAsKCQgHBgUEAwIBAAAh+QQABwD/ACwAAAAAAQABAAACAkQBADs=) repeat-x scroll center center transparent;padding:.25rem 2.5rem}.p-tree.p-tree-horizontal .p-treenode.p-treenode-leaf,.p-tree.p-tree-horizontal .p-treenode.p-treenode-collapsed{padding-right:0}.p-tree.p-tree-horizontal .p-treenode-children{padding:0;margin:0}.p-tree.p-tree-horizontal .p-treenode-connector{width:1px}.p-tree.p-tree-horizontal .p-treenode-connector-table{height:100%;width:1px}.p-tree.p-tree-horizontal .p-treenode-connector-line{background:url(data:image/gif;base64,R0lGODlhAQABAIAAALGxsf///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNC4xLWMwMzQgNDYuMjcyOTc2LCBTYXQgSmFuIDI3IDIwMDcgMjI6Mzc6MzcgICAgICAgICI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnhhcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyI+CiAgICAgICAgIDx4YXA6Q3JlYXRvclRvb2w+QWRvYmUgRmlyZXdvcmtzIENTMzwveGFwOkNyZWF0b3JUb29sPgogICAgICAgICA8eGFwOkNyZWF0ZURhdGU+MjAxMC0wMy0xMVQxMDoxNjo0MVo8L3hhcDpDcmVhdGVEYXRlPgogICAgICAgICA8eGFwOk1vZGlmeURhdGU+MjAxMC0wMy0xMVQxMjo0NDoxOVo8L3hhcDpNb2RpZnlEYXRlPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIj4KICAgICAgICAgPGRjOmZvcm1hdD5pbWFnZS9naWY8L2RjOmZvcm1hdD4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgCjw/eHBhY2tldCBlbmQ9InciPz4B//79/Pv6+fj39vX08/Lx8O/u7ezr6uno5+bl5OPi4eDf3t3c29rZ2NfW1dTT0tHQz87NzMvKycjHxsXEw8LBwL++vby7urm4t7a1tLOysbCvrq2sq6qpqKempaSjoqGgn56dnJuamZiXlpWUk5KRkI+OjYyLiomIh4aFhIOCgYB/fn18e3p5eHd2dXRzcnFwb25tbGtqaWhnZmVkY2JhYF9eXVxbWllYV1ZVVFNSUVBPTk1MS0pJSEdGRURDQkFAPz49PAA6OTg3NjU0MzIxMC8uLSwrKikoJyYlJCMiISAfHh0cGxoZGBcWFRQTEhEQDw4NDAsKCQgHBgUEAwIBAAAh+QQABwD/ACwAAAAAAQABAAACAkQBADs=) repeat-y scroll 0 0 transparent;width:1px}.p-tree.p-tree-horizontal table{height:0}.p-scroller .p-tree-container{overflow:visible}\n"],encapsulation:2}),i})(),Lle=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({imports:[Ns,Na,$c,rv,Na,rv]}),i})();function Ple(i,t){if(1&i&&ii(0,"span",11),2&i){const e=_e(2).$implicit;ve("ngClass",e.icon)("ngStyle",e.iconStyle)}}function Rle(i,t){1&i&&Ki(0)}const E4=function(i){return{"p-disabled":i}},kle=function(){return{exact:!1}},T4=function(i){return{$implicit:i}};function Ole(i,t){if(1&i){const e=Pi();lt(0,"a",8),fn("click",function(r){wt(e);const s=_e().$implicit;return At(_e().onItemClick(r,s))})("keydown.enter",function(r){wt(e);const s=_e(),o=s.$implicit,l=s.index;return At(_e().onItemClick(r,o,l))}),Ze(1,Ple,1,2,"span",9),Ze(2,Rle,1,0,"ng-container",10),ct()}if(2&i){const e=_e().$implicit,n=_e();ve("routerLink",e.routerLink)("queryParams",e.queryParams)("ngClass",Bi(17,E4,e.disabled))("routerLinkActiveOptions",e.routerLinkActiveOptions||Mo(19,kle))("target",e.target)("tooltipOptions",e.tooltipOptions)("fragment",e.fragment)("queryParamsHandling",e.queryParamsHandling)("preserveFragment",e.preserveFragment)("skipLocationChange",e.skipLocationChange)("replaceUrl",e.replaceUrl)("state",e.state),mr("id",e.id)("tabindex",e.disabled||n.readonly?null:e.tabindex?e.tabindex:"0"),Me(1),ve("ngIf",e.icon&&!n.itemTemplate),Me(1),ve("ngTemplateOutlet",n.itemTemplate)("ngTemplateOutletContext",Bi(20,T4,e))}}function Fle(i,t){if(1&i&&ii(0,"span",11),2&i){const e=_e(2).$implicit;ve("ngClass",e.icon)("ngStyle",e.iconStyle)}}function Nle(i,t){1&i&&Ki(0)}function Ble(i,t){if(1&i){const e=Pi();lt(0,"a",12),fn("click",function(r){wt(e);const s=_e().$implicit;return At(_e().onItemClick(r,s))})("keydown.enter",function(r){wt(e);const s=_e(),o=s.$implicit,l=s.index;return At(_e().onItemClick(r,o,l))}),Ze(1,Fle,1,2,"span",9),Ze(2,Nle,1,0,"ng-container",10),ct()}if(2&i){const e=_e(),n=e.$implicit,r=e.index,s=_e();ve("tooltipPosition",n.tooltipPosition)("tooltipOptions",n.tooltipOptions)("ngClass",Bi(10,E4,n.disabled))("target",n.target),mr("href",n.url||null,qd)("id",n.id)("tabindex",n.disabled||r!==s.activeIndex&&s.readonly?null:n.tabindex?n.tabindex:"0"),Me(1),ve("ngIf",n.icon&&!s.itemTemplate),Me(1),ve("ngTemplateOutlet",s.itemTemplate)("ngTemplateOutletContext",Bi(12,T4,n))}}function zle(i,t){if(1&i){const e=Pi();lt(0,"li",5),fn("mouseenter",function(){const s=wt(e).index;return At(_e().onItemMouseEnter(s))}),Ze(1,Ole,3,22,"a",6),Ze(2,Ble,3,14,"ng-template",null,7,vc),ct()}if(2&i){const e=t.$implicit,n=t.index,r=co(3),s=_e();ve("ngClass",s.itemClass(n)),Me(1),ve("ngIf",s.isClickableRouterLink(e))("ngIfElse",r)}}let Vle=(()=>{class i{constructor(e,n){this.el=e,this.cd=n,this.model=null,this.position="bottom",this.currentIndex=-3}ngAfterContentInit(){this.templates.forEach(e=>{e.getType(),this.itemTemplate=e.template})}onListMouseLeave(){this.currentIndex=-3,this.cd.markForCheck()}onItemMouseEnter(e){this.currentIndex=e,this.cd.markForCheck()}onItemClick(e,n){n.command&&n.command({originalEvent:e,item:n})}get containerClass(){return{[`p-dock p-component  p-dock-${this.position}`]:!0}}isClickableRouterLink(e){return e.routerLink&&!e.disabled}itemClass(e){return{"p-dock-item":!0,"p-dock-item-second-prev":this.currentIndex-2===e,"p-dock-item-prev":this.currentIndex-1===e,"p-dock-item-current":this.currentIndex===e,"p-dock-item-next":this.currentIndex+1===e,"p-dock-item-second-next":this.currentIndex+2===e}}}return i.\u0275fac=function(e){return new(e||i)(Zt(Xn),Zt(Zo))},i.\u0275cmp=Ir({type:i,selectors:[["p-dock"]],contentQueries:function(e,n,r){if(1&e&&cl(r,_l,4),2&e){let s;vr(s=yr())&&(n.templates=s)}},hostAttrs:[1,"p-element"],inputs:{id:"id",style:"style",styleClass:"styleClass",model:"model",position:"position"},decls:5,vars:6,consts:[[3,"ngClass","ngStyle"],[1,"p-dock-list-container"],["role","menu",1,"p-dock-list",3,"mouseleave"],["list",""],[3,"ngClass","mouseenter",4,"ngFor","ngForOf"],[3,"ngClass","mouseenter"],["pRipple","","class","p-dock-action","role","menuitem","pTooltip","",3,"routerLink","queryParams","ngClass","routerLinkActiveOptions","target","tooltipOptions","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","click","keydown.enter",4,"ngIf","ngIfElse"],["elseBlock",""],["pRipple","","role","menuitem","pTooltip","",1,"p-dock-action",3,"routerLink","queryParams","ngClass","routerLinkActiveOptions","target","tooltipOptions","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","click","keydown.enter"],["class","p-dock-action-icon",3,"ngClass","ngStyle",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-dock-action-icon",3,"ngClass","ngStyle"],["role","menuitem","pRipple","","pTooltip","",1,"p-dock-action",3,"tooltipPosition","tooltipOptions","ngClass","target","click","keydown.enter"]],template:function(e,n){1&e&&(lt(0,"div",0)(1,"div",1)(2,"ul",2,3),fn("mouseleave",function(){return n.onListMouseLeave()}),Ze(4,zle,4,3,"li",4),ct()()()),2&e&&(Ur(n.styleClass),ve("ngClass",n.containerClass)("ngStyle",n.style),mr("id",n.id),Me(4),ve("ngForOf",n.model))},dependencies:[bo,Su,Wo,rc,Qo,tC,_d,o_],styles:[".p-dock{position:absolute;z-index:1;display:flex;justify-content:center;align-items:center;pointer-events:none}.p-dock-list-container{display:flex;pointer-events:auto}.p-dock-list{margin:0;padding:0;list-style:none;display:flex;align-items:center;justify-content:center}.p-dock-item{transition:all .2s cubic-bezier(.4,0,.2,1);will-change:transform}.p-dock-action{display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative;overflow:hidden;cursor:default}.p-dock-item-second-prev,.p-dock-item-second-next{transform:scale(1.2)}.p-dock-item-prev,.p-dock-item-next{transform:scale(1.4)}.p-dock-item-current{transform:scale(1.6);z-index:1}.p-dock-top{left:0;top:0;width:100%}.p-dock-top .p-dock-item{transform-origin:center top}.p-dock-bottom{left:0;bottom:0;width:100%}.p-dock-bottom .p-dock-item{transform-origin:center bottom}.p-dock-right{right:0;top:0;height:100%}.p-dock-right .p-dock-item{transform-origin:center right}.p-dock-right .p-dock-list{flex-direction:column}.p-dock-left{left:0;top:0;height:100%}.p-dock-left .p-dock-item{transform-origin:center left}.p-dock-left .p-dock-list{flex-direction:column}\n"],encapsulation:2,changeDetection:0}),i})(),Ule=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({imports:[Ns,i_,$c,iv,Na,iv,i_]}),i})();const Hle=["cb"],Gle=function(i,t,e){return{"p-checkbox-label":!0,"p-checkbox-label-active":i,"p-disabled":t,"p-checkbox-label-focus":e}};function Wle(i,t){if(1&i){const e=Pi();lt(0,"label",7),fn("click",function(r){wt(e);const s=_e(),o=co(3);return At(s.onClick(r,o,!0))}),qi(1),ct()}if(2&i){const e=_e();Ur(e.labelStyleClass),ve("ngClass",wu(5,Gle,e.checked(),e.disabled,e.focused)),mr("for",e.inputId),Me(1),as(e.label)}}const jle=function(i,t,e){return{"p-checkbox p-component":!0,"p-checkbox-checked":i,"p-checkbox-disabled":t,"p-checkbox-focused":e}},$le=function(i,t,e){return{"p-highlight":i,"p-disabled":t,"p-focus":e}},qle={provide:bc,useExisting:ds(()=>M4),multi:!0};let M4=(()=>{class i{constructor(e){this.cd=e,this.checkboxIcon="pi pi-check",this.trueValue=!0,this.falseValue=!1,this.onChange=new qn,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.focused=!1}onClick(e,n,r){e.preventDefault(),!this.disabled&&!this.readonly&&(this.updateModel(e),r&&n.focus())}updateModel(e){let n;this.binary?(n=this.checked()?this.falseValue:this.trueValue,this.model=n,this.onModelChange(n)):(n=this.checked()?this.model.filter(r=>!fr.equals(r,this.value)):this.model?[...this.model,this.value]:[this.value],this.onModelChange(n),this.model=n,this.formControl&&this.formControl.setValue(n)),this.onChange.emit({checked:n,originalEvent:e})}handleChange(e){this.readonly||this.updateModel(e)}onFocus(){this.focused=!0}onBlur(){this.focused=!1,this.onModelTouched()}focus(){this.inputViewChild.nativeElement.focus()}writeValue(e){this.model=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}checked(){return this.binary?this.model===this.trueValue:fr.contains(this.value,this.model)}}return i.\u0275fac=function(e){return new(e||i)(Zt(Zo))},i.\u0275cmp=Ir({type:i,selectors:[["p-checkbox"]],viewQuery:function(e,n){if(1&e&&vs(Hle,5),2&e){let r;vr(r=yr())&&(n.inputViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{value:"value",name:"name",disabled:"disabled",binary:"binary",label:"label",ariaLabelledBy:"ariaLabelledBy",ariaLabel:"ariaLabel",tabindex:"tabindex",inputId:"inputId",style:"style",styleClass:"styleClass",labelStyleClass:"labelStyleClass",formControl:"formControl",checkboxIcon:"checkboxIcon",readonly:"readonly",required:"required",trueValue:"trueValue",falseValue:"falseValue"},outputs:{onChange:"onChange"},features:[To([qle])],decls:7,vars:26,consts:[[3,"ngStyle","ngClass"],[1,"p-hidden-accessible"],["type","checkbox",3,"readonly","value","checked","disabled","focus","blur","change"],["cb",""],[1,"p-checkbox-box",3,"ngClass","click"],[1,"p-checkbox-icon",3,"ngClass"],[3,"class","ngClass","click",4,"ngIf"],[3,"ngClass","click"]],template:function(e,n){if(1&e){const r=Pi();lt(0,"div",0)(1,"div",1)(2,"input",2,3),fn("focus",function(){return n.onFocus()})("blur",function(){return n.onBlur()})("change",function(o){return n.handleChange(o)}),ct()(),lt(4,"div",4),fn("click",function(o){wt(r);const l=co(3);return At(n.onClick(o,l,!0))}),ii(5,"span",5),ct()(),Ze(6,Wle,2,9,"label",6)}2&e&&(Ur(n.styleClass),ve("ngStyle",n.style)("ngClass",wu(18,jle,n.checked(),n.disabled,n.focused)),Me(2),ve("readonly",n.readonly)("value",n.value)("checked",n.checked())("disabled",n.disabled),mr("id",n.inputId)("name",n.name)("tabindex",n.tabindex)("aria-labelledby",n.ariaLabelledBy)("aria-label",n.ariaLabel)("aria-checked",n.checked())("required",n.required),Me(2),ve("ngClass",wu(22,$le,n.checked(),n.disabled,n.focused)),Me(1),ve("ngClass",n.checked()?n.checkboxIcon:null),Me(1),ve("ngIf",n.label))},dependencies:[bo,Wo,Qo],styles:[".p-checkbox{display:inline-flex;cursor:pointer;-webkit-user-select:none;user-select:none;vertical-align:bottom;position:relative}.p-checkbox-disabled{cursor:default!important;pointer-events:none}.p-checkbox-box{display:flex;justify-content:center;align-items:center}p-checkbox{display:inline-flex;vertical-align:bottom;align-items:center}.p-checkbox-label{line-height:1}\n"],encapsulation:2,changeDetection:0}),i})(),Xle=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({imports:[Ns]}),i})();function ay(){}const Yle=function(){let i=0;return function(){return i++}}();function pa(i){return null===i||typeof i>"u"}function Ll(i){if(Array.isArray&&Array.isArray(i))return!0;const t=Object.prototype.toString.call(i);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function Jo(i){return null!==i&&"[object Object]"===Object.prototype.toString.call(i)}const ru=i=>("number"==typeof i||i instanceof Number)&&isFinite(+i);function mg(i,t){return ru(i)?i:t}function fo(i,t){return typeof i>"u"?t:i}const D4=(i,t)=>"string"==typeof i&&i.endsWith("%")?parseFloat(i)/100*t:+i;function Pl(i,t,e){if(i&&"function"==typeof i.call)return i.apply(e,t)}function Ja(i,t,e,n){let r,s,o;if(Ll(i))if(s=i.length,n)for(r=s-1;r>=0;r--)t.call(e,i[r],r);else for(r=0;r<s;r++)t.call(e,i[r],r);else if(Jo(i))for(o=Object.keys(i),s=o.length,r=0;r<s;r++)t.call(e,i[o[r]],o[r])}function Z1(i,t){let e,n,r,s;if(!i||!t||i.length!==t.length)return!1;for(e=0,n=i.length;e<n;++e)if(r=i[e],s=t[e],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function Q1(i){if(Ll(i))return i.map(Q1);if(Jo(i)){const t=Object.create(null),e=Object.keys(i),n=e.length;let r=0;for(;r<n;++r)t[e[r]]=Q1(i[e[r]]);return t}return i}function L4(i){return-1===["__proto__","prototype","constructor"].indexOf(i)}function Zle(i,t,e,n){if(!L4(i))return;const r=t[i],s=e[i];Jo(r)&&Jo(s)?Tw(r,s,n):t[i]=Q1(s)}function Tw(i,t,e){const n=Ll(t)?t:[t],r=n.length;if(!Jo(i))return i;const s=(e=e||{}).merger||Zle;for(let o=0;o<r;++o){if(!Jo(t=n[o]))continue;const l=Object.keys(t);for(let u=0,p=l.length;u<p;++u)s(l[u],i,t,e)}return i}function Mw(i,t){return Tw(i,t,{merger:Qle})}function Qle(i,t,e){if(!L4(i))return;const n=t[i],r=e[i];Jo(n)&&Jo(r)?Mw(n,r):Object.prototype.hasOwnProperty.call(t,i)||(t[i]=Q1(r))}const P4={"":i=>i,x:i=>i.x,y:i=>i.y};function a_(i,t){return(P4[t]||(P4[t]=function Jle(i){const t=function ece(i){const t=i.split("."),e=[];let n="";for(const r of t)n+=r,n.endsWith("\\")?n=n.slice(0,-1)+".":(e.push(n),n="");return e}(i);return e=>{for(const n of t){if(""===n)break;e=e&&e[n]}return e}}(t)))(i)}function H2(i){return i.charAt(0).toUpperCase()+i.slice(1)}const vg=i=>typeof i<"u",l_=i=>"function"==typeof i,R4=(i,t)=>{if(i.size!==t.size)return!1;for(const e of i)if(!t.has(e))return!1;return!0},sc=Math.PI,ul=2*sc,nce=ul+sc,J1=Number.POSITIVE_INFINITY,ice=sc/180,qc=sc/2,Dw=sc/4,k4=2*sc/3,yg=Math.log10,ov=Math.sign;function O4(i){const t=Math.round(i);i=Lw(i,t,i/1e3)?t:i;const e=Math.pow(10,Math.floor(yg(i))),n=i/e;return(n<=1?1:n<=2?2:n<=5?5:10)*e}function uC(i){return!isNaN(parseFloat(i))&&isFinite(i)}function Lw(i,t,e){return Math.abs(i-t)<e}function F4(i,t,e){let n,r,s;for(n=0,r=i.length;n<r;n++)s=i[n][e],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function gm(i){return i*(sc/180)}function G2(i){return i*(180/sc)}function N4(i){if(!ru(i))return;let t=1,e=0;for(;Math.round(i*t)/t!==i;)t*=10,e++;return e}function B4(i,t){const e=t.x-i.x,n=t.y-i.y,r=Math.sqrt(e*e+n*n);let s=Math.atan2(n,e);return s<-.5*sc&&(s+=ul),{angle:s,distance:r}}function W2(i,t){return Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2))}function oce(i,t){return(i-t+nce)%ul-sc}function Dp(i){return(i%ul+ul)%ul}function Pw(i,t,e,n){const r=Dp(i),s=Dp(t),o=Dp(e),l=Dp(s-r),u=Dp(o-r),p=Dp(r-s),v=Dp(r-o);return r===s||r===o||n&&s===o||l>u&&p<v}function bd(i,t,e){return Math.max(t,Math.min(e,i))}function ly(i,t,e,n=1e-6){return i>=Math.min(t,e)-n&&i<=Math.max(t,e)+n}function j2(i,t,e){e=e||(o=>i[o]<t);let s,n=i.length-1,r=0;for(;n-r>1;)s=r+n>>1,e(s)?r=s:n=s;return{lo:r,hi:n}}const cy=(i,t,e,n)=>j2(i,e,n?r=>i[r][t]<=e:r=>i[r][t]<e),lce=(i,t,e)=>j2(i,e,n=>i[n][t]>=e),z4=["push","pop","shift","splice","unshift"];function V4(i,t){const e=i._chartjs;if(!e)return;const n=e.listeners,r=n.indexOf(t);-1!==r&&n.splice(r,1),!(n.length>0)&&(z4.forEach(s=>{delete i[s]}),delete i._chartjs)}function U4(i){const t=new Set;let e,n;for(e=0,n=i.length;e<n;++e)t.add(i[e]);return t.size===n?i:Array.from(t)}const H4=typeof window>"u"?function(i){return i()}:window.requestAnimationFrame;function G4(i,t,e){const n=e||(o=>Array.prototype.slice.call(o));let r=!1,s=[];return function(...o){s=n(o),r||(r=!0,H4.call(window,()=>{r=!1,i.apply(t,s)}))}}const $2=i=>"start"===i?"left":"end"===i?"right":"center",Ih=(i,t,e)=>"start"===i?t:"end"===i?e:(t+e)/2;function W4(i,t,e){const n=t.length;let r=0,s=n;if(i._sorted){const{iScale:o,_parsed:l}=i,u=o.axis,{min:p,max:v,minDefined:x,maxDefined:I}=o.getUserBounds();x&&(r=bd(Math.min(cy(l,o.axis,p).lo,e?n:cy(t,u,o.getPixelForValue(p)).lo),0,n-1)),s=I?bd(Math.max(cy(l,o.axis,v,!0).hi+1,e?0:cy(t,u,o.getPixelForValue(v),!0).hi+1),r,n)-r:n-r}return{start:r,count:s}}function j4(i){const{xScale:t,yScale:e,_scaleRanges:n}=i,r={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!n)return i._scaleRanges=r,!0;const s=n.xmin!==t.min||n.xmax!==t.max||n.ymin!==e.min||n.ymax!==e.max;return Object.assign(n,r),s}const eS=i=>0===i||1===i,$4=(i,t,e)=>-Math.pow(2,10*(i-=1))*Math.sin((i-t)*ul/e),q4=(i,t,e)=>Math.pow(2,-10*i)*Math.sin((i-t)*ul/e)+1,Rw={linear:i=>i,easeInQuad:i=>i*i,easeOutQuad:i=>-i*(i-2),easeInOutQuad:i=>(i/=.5)<1?.5*i*i:-.5*(--i*(i-2)-1),easeInCubic:i=>i*i*i,easeOutCubic:i=>(i-=1)*i*i+1,easeInOutCubic:i=>(i/=.5)<1?.5*i*i*i:.5*((i-=2)*i*i+2),easeInQuart:i=>i*i*i*i,easeOutQuart:i=>-((i-=1)*i*i*i-1),easeInOutQuart:i=>(i/=.5)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2),easeInQuint:i=>i*i*i*i*i,easeOutQuint:i=>(i-=1)*i*i*i*i+1,easeInOutQuint:i=>(i/=.5)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2),easeInSine:i=>1-Math.cos(i*qc),easeOutSine:i=>Math.sin(i*qc),easeInOutSine:i=>-.5*(Math.cos(sc*i)-1),easeInExpo:i=>0===i?0:Math.pow(2,10*(i-1)),easeOutExpo:i=>1===i?1:1-Math.pow(2,-10*i),easeInOutExpo:i=>eS(i)?i:i<.5?.5*Math.pow(2,10*(2*i-1)):.5*(2-Math.pow(2,-10*(2*i-1))),easeInCirc:i=>i>=1?i:-(Math.sqrt(1-i*i)-1),easeOutCirc:i=>Math.sqrt(1-(i-=1)*i),easeInOutCirc:i=>(i/=.5)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1),easeInElastic:i=>eS(i)?i:$4(i,.075,.3),easeOutElastic:i=>eS(i)?i:q4(i,.075,.3),easeInOutElastic:i=>eS(i)?i:i<.5?.5*$4(2*i,.1125,.45):.5+.5*q4(2*i-1,.1125,.45),easeInBack:i=>i*i*(2.70158*i-1.70158),easeOutBack:i=>(i-=1)*i*(2.70158*i+1.70158)+1,easeInOutBack(i){let t=1.70158;return(i/=.5)<1?i*i*((1+(t*=1.525))*i-t)*.5:.5*((i-=2)*i*((1+(t*=1.525))*i+t)+2)},easeInBounce:i=>1-Rw.easeOutBounce(1-i),easeOutBounce:i=>i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375,easeInOutBounce:i=>i<.5?.5*Rw.easeInBounce(2*i):.5*Rw.easeOutBounce(2*i-1)+.5};function kw(i){return i+.5|0}const c_=(i,t,e)=>Math.max(Math.min(i,e),t);function Ow(i){return c_(kw(2.55*i),0,255)}function u_(i){return c_(kw(255*i),0,255)}function uy(i){return c_(kw(i/2.55)/100,0,1)}function X4(i){return c_(kw(100*i),0,100)}const _g={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},q2=[..."0123456789ABCDEF"],fce=i=>q2[15&i],pce=i=>q2[(240&i)>>4]+q2[15&i],tS=i=>(240&i)>>4==(15&i);const _ce=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Y4(i,t,e){const n=t*Math.min(e,1-e),r=(s,o=(s+i/30)%12)=>e-n*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function bce(i,t,e){const n=(r,s=(r+i/60)%6)=>e-e*t*Math.max(Math.min(s,4-s,1),0);return[n(5),n(3),n(1)]}function Cce(i,t,e){const n=Y4(i,1,.5);let r;for(t+e>1&&(r=1/(t+e),t*=r,e*=r),r=0;r<3;r++)n[r]*=1-t-e,n[r]+=t;return n}function X2(i){const e=i.r/255,n=i.g/255,r=i.b/255,s=Math.max(e,n,r),o=Math.min(e,n,r),l=(s+o)/2;let u,p,v;return s!==o&&(v=s-o,p=l>.5?v/(2-s-o):v/(s+o),u=function xce(i,t,e,n,r){return i===r?(t-e)/n+(t<e?6:0):t===r?(e-i)/n+2:(i-t)/n+4}(e,n,r,v,s),u=60*u+.5),[0|u,p||0,l]}function Y2(i,t,e,n){return(Array.isArray(t)?i(t[0],t[1],t[2]):i(t,e,n)).map(u_)}function K2(i,t,e){return Y2(Y4,i,t,e)}function K4(i){return(i%360+360)%360}const Z4={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Q4={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let nS;const Dce=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,Z2=i=>i<=.0031308?12.92*i:1.055*Math.pow(i,1/2.4)-.055,dC=i=>i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4);function iS(i,t,e){if(i){let n=X2(i);n[t]=Math.max(0,Math.min(n[t]+n[t]*e,0===t?360:1)),n=K2(n),i.r=n[0],i.g=n[1],i.b=n[2]}}function J4(i,t){return i&&Object.assign(t||{},i)}function eU(i){var t={r:0,g:0,b:0,a:255};return Array.isArray(i)?i.length>=3&&(t={r:i[0],g:i[1],b:i[2],a:255},i.length>3&&(t.a=u_(i[3]))):(t=J4(i,{r:0,g:0,b:0,a:1})).a=u_(t.a),t}function kce(i){return"r"===i.charAt(0)?function Lce(i){const t=Dce.exec(i);let n,r,s,e=255;if(t){if(t[7]!==n){const o=+t[7];e=t[8]?Ow(o):c_(255*o,0,255)}return n=+t[1],r=+t[3],s=+t[5],n=255&(t[2]?Ow(n):c_(n,0,255)),r=255&(t[4]?Ow(r):c_(r,0,255)),s=255&(t[6]?Ow(s):c_(s,0,255)),{r:n,g:r,b:s,a:e}}}(i):function Ice(i){const t=_ce.exec(i);let n,e=255;if(!t)return;t[5]!==n&&(e=t[6]?Ow(+t[5]):u_(+t[5]));const r=K4(+t[2]),s=+t[3]/100,o=+t[4]/100;return n="hwb"===t[1]?function wce(i,t,e){return Y2(Cce,i,t,e)}(r,s,o):"hsv"===t[1]?function Ace(i,t,e){return Y2(bce,i,t,e)}(r,s,o):K2(r,s,o),{r:n[0],g:n[1],b:n[2],a:e}}(i)}class rS{constructor(t){if(t instanceof rS)return t;const e=typeof t;let n;"object"===e?n=eU(t):"string"===e&&(n=function mce(i){var e,t=i.length;return"#"===i[0]&&(4===t||5===t?e={r:255&17*_g[i[1]],g:255&17*_g[i[2]],b:255&17*_g[i[3]],a:5===t?17*_g[i[4]]:255}:(7===t||9===t)&&(e={r:_g[i[1]]<<4|_g[i[2]],g:_g[i[3]]<<4|_g[i[4]],b:_g[i[5]]<<4|_g[i[6]],a:9===t?_g[i[7]]<<4|_g[i[8]]:255})),e}(t)||function Mce(i){nS||(nS=function Tce(){const i={},t=Object.keys(Q4),e=Object.keys(Z4);let n,r,s,o,l;for(n=0;n<t.length;n++){for(o=l=t[n],r=0;r<e.length;r++)s=e[r],l=l.replace(s,Z4[s]);s=parseInt(Q4[o],16),i[l]=[s>>16&255,s>>8&255,255&s]}return i}(),nS.transparent=[0,0,0,0]);const t=nS[i.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}(t)||kce(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=J4(this._rgb);return t&&(t.a=uy(t.a)),t}set rgb(t){this._rgb=eU(t)}rgbString(){return this._valid?function Pce(i){return i&&(i.a<255?`rgba(${i.r}, ${i.g}, ${i.b}, ${uy(i.a)})`:`rgb(${i.r}, ${i.g}, ${i.b})`)}(this._rgb):void 0}hexString(){return this._valid?function yce(i){var t=(i=>tS(i.r)&&tS(i.g)&&tS(i.b)&&tS(i.a))(i)?fce:pce;return i?"#"+t(i.r)+t(i.g)+t(i.b)+((i,t)=>i<255?t(i):"")(i.a,t):void 0}(this._rgb):void 0}hslString(){return this._valid?function Ece(i){if(!i)return;const t=X2(i),e=t[0],n=X4(t[1]),r=X4(t[2]);return i.a<255?`hsla(${e}, ${n}%, ${r}%, ${uy(i.a)})`:`hsl(${e}, ${n}%, ${r}%)`}(this._rgb):void 0}mix(t,e){if(t){const n=this.rgb,r=t.rgb;let s;const o=e===s?.5:e,l=2*o-1,u=n.a-r.a,p=((l*u==-1?l:(l+u)/(1+l*u))+1)/2;s=1-p,n.r=255&p*n.r+s*r.r+.5,n.g=255&p*n.g+s*r.g+.5,n.b=255&p*n.b+s*r.b+.5,n.a=o*n.a+(1-o)*r.a,this.rgb=n}return this}interpolate(t,e){return t&&(this._rgb=function Rce(i,t,e){const n=dC(uy(i.r)),r=dC(uy(i.g)),s=dC(uy(i.b));return{r:u_(Z2(n+e*(dC(uy(t.r))-n))),g:u_(Z2(r+e*(dC(uy(t.g))-r))),b:u_(Z2(s+e*(dC(uy(t.b))-s))),a:i.a+e*(t.a-i.a)}}(this._rgb,t._rgb,e)),this}clone(){return new rS(this.rgb)}alpha(t){return this._rgb.a=u_(t),this}clearer(t){return this._rgb.a*=1-t,this}greyscale(){const t=this._rgb,e=kw(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){return this._rgb.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return iS(this._rgb,2,t),this}darken(t){return iS(this._rgb,2,-t),this}saturate(t){return iS(this._rgb,1,t),this}desaturate(t){return iS(this._rgb,1,-t),this}rotate(t){return function Sce(i,t){var e=X2(i);e[0]=K4(e[0]+t),e=K2(e),i.r=e[0],i.g=e[1],i.b=e[2]}(this._rgb,t),this}}function tU(i){return new rS(i)}function nU(i){if(i&&"object"==typeof i){const t=i.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function iU(i){return nU(i)?i:tU(i)}function Q2(i){return nU(i)?i:tU(i).saturate(.5).darken(.1).hexString()}const C0=Object.create(null),J2=Object.create(null);function Fw(i,t){if(!t)return i;const e=t.split(".");for(let n=0,r=e.length;n<r;++n){const s=e[n];i=i[s]||(i[s]=Object.create(null))}return i}function eL(i,t,e){return"string"==typeof t?Tw(Fw(i,t),e):Tw(Fw(i,""),t)}var na=new class Oce{constructor(t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,n)=>Q2(n.backgroundColor),this.hoverBorderColor=(e,n)=>Q2(n.borderColor),this.hoverColor=(e,n)=>Q2(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t)}set(t,e){return eL(this,t,e)}get(t){return Fw(this,t)}describe(t,e){return eL(J2,t,e)}override(t,e){return eL(C0,t,e)}route(t,e,n,r){const s=Fw(this,t),o=Fw(this,n),l="_"+e;Object.defineProperties(s,{[l]:{value:s[e],writable:!0},[e]:{enumerable:!0,get(){const u=this[l],p=o[r];return Jo(u)?Object.assign({},p,u):fo(u,p)},set(u){this[l]=u}}})}}({_scriptable:i=>!i.startsWith("on"),_indexable:i=>"events"!==i,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function sS(i,t,e,n,r){let s=t[r];return s||(s=t[r]=i.measureText(r).width,e.push(r)),s>n&&(n=s),n}function Nce(i,t,e,n){let r=(n=n||{}).data=n.data||{},s=n.garbageCollect=n.garbageCollect||[];n.font!==t&&(r=n.data={},s=n.garbageCollect=[],n.font=t),i.save(),i.font=t;let o=0;const l=e.length;let u,p,v,x,I;for(u=0;u<l;u++)if(x=e[u],null!=x&&!0!==Ll(x))o=sS(i,r,s,o,x);else if(Ll(x))for(p=0,v=x.length;p<v;p++)I=x[p],null!=I&&!Ll(I)&&(o=sS(i,r,s,o,I));i.restore();const T=s.length/2;if(T>e.length){for(u=0;u<T;u++)delete r[s[u]];s.splice(0,T)}return o}function x0(i,t,e){const n=i.currentDevicePixelRatio,r=0!==e?Math.max(e/2,.5):0;return Math.round((t-r)*n)/n+r}function rU(i,t){(t=t||i.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,i.width,i.height),t.restore()}function tL(i,t,e,n){sU(i,t,e,n,null)}function sU(i,t,e,n,r){let s,o,l,u,p,v;const x=t.pointStyle,I=t.rotation,T=t.radius;let F=(I||0)*ice;if(x&&"object"==typeof x&&(s=x.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return i.save(),i.translate(e,n),i.rotate(F),i.drawImage(x,-x.width/2,-x.height/2,x.width,x.height),void i.restore();if(!(isNaN(T)||T<=0)){switch(i.beginPath(),x){default:r?i.ellipse(e,n,r/2,T,0,0,ul):i.arc(e,n,T,0,ul),i.closePath();break;case"triangle":i.moveTo(e+Math.sin(F)*T,n-Math.cos(F)*T),F+=k4,i.lineTo(e+Math.sin(F)*T,n-Math.cos(F)*T),F+=k4,i.lineTo(e+Math.sin(F)*T,n-Math.cos(F)*T),i.closePath();break;case"rectRounded":p=.516*T,u=T-p,o=Math.cos(F+Dw)*u,l=Math.sin(F+Dw)*u,i.arc(e-o,n-l,p,F-sc,F-qc),i.arc(e+l,n-o,p,F-qc,F),i.arc(e+o,n+l,p,F,F+qc),i.arc(e-l,n+o,p,F+qc,F+sc),i.closePath();break;case"rect":if(!I){u=Math.SQRT1_2*T,v=r?r/2:u,i.rect(e-v,n-u,2*v,2*u);break}F+=Dw;case"rectRot":o=Math.cos(F)*T,l=Math.sin(F)*T,i.moveTo(e-o,n-l),i.lineTo(e+l,n-o),i.lineTo(e+o,n+l),i.lineTo(e-l,n+o),i.closePath();break;case"crossRot":F+=Dw;case"cross":o=Math.cos(F)*T,l=Math.sin(F)*T,i.moveTo(e-o,n-l),i.lineTo(e+o,n+l),i.moveTo(e+l,n-o),i.lineTo(e-l,n+o);break;case"star":o=Math.cos(F)*T,l=Math.sin(F)*T,i.moveTo(e-o,n-l),i.lineTo(e+o,n+l),i.moveTo(e+l,n-o),i.lineTo(e-l,n+o),F+=Dw,o=Math.cos(F)*T,l=Math.sin(F)*T,i.moveTo(e-o,n-l),i.lineTo(e+o,n+l),i.moveTo(e+l,n-o),i.lineTo(e-l,n+o);break;case"line":o=r?r/2:Math.cos(F)*T,l=Math.sin(F)*T,i.moveTo(e-o,n-l),i.lineTo(e+o,n+l);break;case"dash":i.moveTo(e,n),i.lineTo(e+Math.cos(F)*T,n+Math.sin(F)*T)}i.fill(),t.borderWidth>0&&i.stroke()}}function Nw(i,t,e){return e=e||.5,!t||i&&i.x>t.left-e&&i.x<t.right+e&&i.y>t.top-e&&i.y<t.bottom+e}function oS(i,t){i.save(),i.beginPath(),i.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),i.clip()}function aS(i){i.restore()}function Bce(i,t,e,n,r){if(!t)return i.lineTo(e.x,e.y);if("middle"===r){const s=(t.x+e.x)/2;i.lineTo(s,t.y),i.lineTo(s,e.y)}else"after"===r!=!!n?i.lineTo(t.x,e.y):i.lineTo(e.x,t.y);i.lineTo(e.x,e.y)}function zce(i,t,e,n){if(!t)return i.lineTo(e.x,e.y);i.bezierCurveTo(n?t.cp1x:t.cp2x,n?t.cp1y:t.cp2y,n?e.cp2x:e.cp1x,n?e.cp2y:e.cp1y,e.x,e.y)}function w0(i,t,e,n,r,s={}){const o=Ll(t)?t:[t],l=s.strokeWidth>0&&""!==s.strokeColor;let u,p;for(i.save(),i.font=r.string,function Vce(i,t){t.translation&&i.translate(t.translation[0],t.translation[1]),pa(t.rotation)||i.rotate(t.rotation),t.color&&(i.fillStyle=t.color),t.textAlign&&(i.textAlign=t.textAlign),t.textBaseline&&(i.textBaseline=t.textBaseline)}(i,s),u=0;u<o.length;++u)p=o[u],l&&(s.strokeColor&&(i.strokeStyle=s.strokeColor),pa(s.strokeWidth)||(i.lineWidth=s.strokeWidth),i.strokeText(p,e,n,s.maxWidth)),i.fillText(p,e,n,s.maxWidth),Uce(i,e,n,p,s),n+=r.lineHeight;i.restore()}function Uce(i,t,e,n,r){if(r.strikethrough||r.underline){const s=i.measureText(n),o=t-s.actualBoundingBoxLeft,l=t+s.actualBoundingBoxRight,u=e-s.actualBoundingBoxAscent,p=e+s.actualBoundingBoxDescent,v=r.strikethrough?(u+p)/2:p;i.strokeStyle=i.fillStyle,i.beginPath(),i.lineWidth=r.decorationWidth||2,i.moveTo(o,v),i.lineTo(l,v),i.stroke()}}function Bw(i,t){const{x:e,y:n,w:r,h:s,radius:o}=t;i.arc(e+o.topLeft,n+o.topLeft,o.topLeft,-qc,sc,!0),i.lineTo(e,n+s-o.bottomLeft),i.arc(e+o.bottomLeft,n+s-o.bottomLeft,o.bottomLeft,sc,qc,!0),i.lineTo(e+r-o.bottomRight,n+s),i.arc(e+r-o.bottomRight,n+s-o.bottomRight,o.bottomRight,qc,0,!0),i.lineTo(e+r,n+o.topRight),i.arc(e+r-o.topRight,n+o.topRight,o.topRight,0,-qc,!0),i.lineTo(e+o.topLeft,n)}const Hce=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),Gce=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function Wce(i,t){const e=(""+i).match(Hce);if(!e||"normal"===e[1])return 1.2*t;switch(i=+e[2],e[3]){case"px":return i;case"%":i/=100}return t*i}const jce=i=>+i||0;function nL(i,t){const e={},n=Jo(t),r=n?Object.keys(t):t,s=Jo(i)?n?o=>fo(i[o],i[t[o]]):o=>i[o]:()=>i;for(const o of r)e[o]=jce(s(o));return e}function oU(i){return nL(i,{top:"y",right:"x",bottom:"y",left:"x"})}function A0(i){return nL(i,["topLeft","topRight","bottomLeft","bottomRight"])}function Sh(i){const t=oU(i);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Ku(i,t){let e=fo((i=i||{}).size,(t=t||na.font).size);"string"==typeof e&&(e=parseInt(e,10));let n=fo(i.style,t.style);n&&!(""+n).match(Gce)&&(console.warn('Invalid font style specified: "'+n+'"'),n="");const r={family:fo(i.family,t.family),lineHeight:Wce(fo(i.lineHeight,t.lineHeight),e),size:e,style:n,weight:fo(i.weight,t.weight),string:""};return r.string=function Fce(i){return!i||pa(i.size)||pa(i.family)?null:(i.style?i.style+" ":"")+(i.weight?i.weight+" ":"")+i.size+"px "+i.family}(r),r}function zw(i,t,e,n){let s,o,l,r=!0;for(s=0,o=i.length;s<o;++s)if(l=i[s],void 0!==l&&(void 0!==t&&"function"==typeof l&&(l=l(t),r=!1),void 0!==e&&Ll(l)&&(l=l[e%l.length],r=!1),void 0!==l))return n&&!r&&(n.cacheable=!1),l}function d_(i,t){return Object.assign(Object.create(i),t)}function iL(i,t=[""],e=i,n,r=(()=>i[0])){vg(n)||(n=dU("_fallback",i));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:i,_rootScopes:e,_fallback:n,_getTarget:r,override:o=>iL([o,...i],t,e,n)};return new Proxy(s,{deleteProperty:(o,l)=>(delete o[l],delete o._keys,delete i[0][l],!0),get:(o,l)=>lU(o,l,()=>function eue(i,t,e,n){let r;for(const s of t)if(r=dU(qce(s,i),e),vg(r))return rL(i,r)?sL(e,n,i,r):r}(l,t,i,o)),getOwnPropertyDescriptor:(o,l)=>Reflect.getOwnPropertyDescriptor(o._scopes[0],l),getPrototypeOf:()=>Reflect.getPrototypeOf(i[0]),has:(o,l)=>hU(o).includes(l),ownKeys:o=>hU(o),set(o,l,u){const p=o._storage||(o._storage=r());return o[l]=p[l]=u,delete o._keys,!0}})}function hC(i,t,e,n){const r={_cacheable:!1,_proxy:i,_context:t,_subProxy:e,_stack:new Set,_descriptors:aU(i,n),setContext:s=>hC(i,s,e,n),override:s=>hC(i.override(s),t,e,n)};return new Proxy(r,{deleteProperty:(s,o)=>(delete s[o],delete i[o],!0),get:(s,o,l)=>lU(s,o,()=>function Xce(i,t,e){const{_proxy:n,_context:r,_subProxy:s,_descriptors:o}=i;let l=n[t];return l_(l)&&o.isScriptable(t)&&(l=function Yce(i,t,e,n){const{_proxy:r,_context:s,_subProxy:o,_stack:l}=e;if(l.has(i))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+i);return l.add(i),t=t(s,o||n),l.delete(i),rL(i,t)&&(t=sL(r._scopes,r,i,t)),t}(t,l,i,e)),Ll(l)&&l.length&&(l=function Kce(i,t,e,n){const{_proxy:r,_context:s,_subProxy:o,_descriptors:l}=e;if(vg(s.index)&&n(i))t=t[s.index%t.length];else if(Jo(t[0])){const u=t,p=r._scopes.filter(v=>v!==u);t=[];for(const v of u){const x=sL(p,r,i,v);t.push(hC(x,s,o&&o[i],l))}}return t}(t,l,i,o.isIndexable)),rL(t,l)&&(l=hC(l,r,s&&s[t],o)),l}(s,o,l)),getOwnPropertyDescriptor:(s,o)=>s._descriptors.allKeys?Reflect.has(i,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(i,o),getPrototypeOf:()=>Reflect.getPrototypeOf(i),has:(s,o)=>Reflect.has(i,o),ownKeys:()=>Reflect.ownKeys(i),set:(s,o,l)=>(i[o]=l,delete s[o],!0)})}function aU(i,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:n=t.indexable,_allKeys:r=t.allKeys}=i;return{allKeys:r,scriptable:e,indexable:n,isScriptable:l_(e)?e:()=>e,isIndexable:l_(n)?n:()=>n}}const qce=(i,t)=>i?i+H2(t):t,rL=(i,t)=>Jo(t)&&"adapters"!==i&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function lU(i,t,e){if(Object.prototype.hasOwnProperty.call(i,t))return i[t];const n=e();return i[t]=n,n}function cU(i,t,e){return l_(i)?i(t,e):i}const Zce=(i,t)=>!0===i?t:"string"==typeof i?a_(t,i):void 0;function Qce(i,t,e,n,r){for(const s of t){const o=Zce(e,s);if(o){i.add(o);const l=cU(o._fallback,e,r);if(vg(l)&&l!==e&&l!==n)return l}else if(!1===o&&vg(n)&&e!==n)return null}return!1}function sL(i,t,e,n){const r=t._rootScopes,s=cU(t._fallback,e,n),o=[...i,...r],l=new Set;l.add(n);let u=uU(l,o,e,s||e,n);return!(null===u||vg(s)&&s!==e&&(u=uU(l,o,s,u,n),null===u))&&iL(Array.from(l),[""],r,s,()=>function Jce(i,t,e){const n=i._getTarget();t in n||(n[t]={});const r=n[t];return Ll(r)&&Jo(e)?e:r}(t,e,n))}function uU(i,t,e,n,r){for(;e;)e=Qce(i,t,e,n,r);return e}function dU(i,t){for(const e of t){if(!e)continue;const n=e[i];if(vg(n))return n}}function hU(i){let t=i._keys;return t||(t=i._keys=function tue(i){const t=new Set;for(const e of i)for(const n of Object.keys(e).filter(r=>!r.startsWith("_")))t.add(n);return Array.from(t)}(i._scopes)),t}function fU(i,t,e,n){const{iScale:r}=i,{key:s="r"}=this._parsing,o=new Array(n);let l,u,p,v;for(l=0,u=n;l<u;++l)p=l+e,v=t[p],o[l]={r:r.parse(a_(v,s),p)};return o}const nue=Number.EPSILON||1e-14,fC=(i,t)=>t<i.length&&!i[t].skip&&i[t],pU=i=>"x"===i?"y":"x";function iue(i,t,e,n){const r=i.skip?t:i,s=t,o=e.skip?t:e,l=W2(s,r),u=W2(o,s);let p=l/(l+u),v=u/(l+u);p=isNaN(p)?0:p,v=isNaN(v)?0:v;const x=n*p,I=n*v;return{previous:{x:s.x-x*(o.x-r.x),y:s.y-x*(o.y-r.y)},next:{x:s.x+I*(o.x-r.x),y:s.y+I*(o.y-r.y)}}}function lS(i,t,e){return Math.max(Math.min(i,e),t)}function lue(i,t,e,n,r){let s,o,l,u;if(t.spanGaps&&(i=i.filter(p=>!p.skip)),"monotone"===t.cubicInterpolationMode)!function oue(i,t="x"){const e=pU(t),n=i.length,r=Array(n).fill(0),s=Array(n);let o,l,u,p=fC(i,0);for(o=0;o<n;++o)if(l=u,u=p,p=fC(i,o+1),u){if(p){const v=p[t]-u[t];r[o]=0!==v?(p[e]-u[e])/v:0}s[o]=l?p?ov(r[o-1])!==ov(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}(function rue(i,t,e){const n=i.length;let r,s,o,l,u,p=fC(i,0);for(let v=0;v<n-1;++v)if(u=p,p=fC(i,v+1),u&&p){if(Lw(t[v],0,nue)){e[v]=e[v+1]=0;continue}r=e[v]/t[v],s=e[v+1]/t[v],l=Math.pow(r,2)+Math.pow(s,2),!(l<=9)&&(o=3/Math.sqrt(l),e[v]=r*o*t[v],e[v+1]=s*o*t[v])}})(i,r,s),function sue(i,t,e="x"){const n=pU(e),r=i.length;let s,o,l,u=fC(i,0);for(let p=0;p<r;++p){if(o=l,l=u,u=fC(i,p+1),!l)continue;const v=l[e],x=l[n];o&&(s=(v-o[e])/3,l[`cp1${e}`]=v-s,l[`cp1${n}`]=x-s*t[p]),u&&(s=(u[e]-v)/3,l[`cp2${e}`]=v+s,l[`cp2${n}`]=x+s*t[p])}}(i,s,t)}(i,r);else{let p=n?i[i.length-1]:i[0];for(s=0,o=i.length;s<o;++s)l=i[s],u=iue(p,l,i[Math.min(s+1,o-(n?0:1))%o],t.tension),l.cp1x=u.previous.x,l.cp1y=u.previous.y,l.cp2x=u.next.x,l.cp2y=u.next.y,p=l}t.capBezierPoints&&function aue(i,t){let e,n,r,s,o,l=Nw(i[0],t);for(e=0,n=i.length;e<n;++e)o=s,s=l,l=e<n-1&&Nw(i[e+1],t),s&&(r=i[e],o&&(r.cp1x=lS(r.cp1x,t.left,t.right),r.cp1y=lS(r.cp1y,t.top,t.bottom)),l&&(r.cp2x=lS(r.cp2x,t.left,t.right),r.cp2y=lS(r.cp2y,t.top,t.bottom)))}(i,e)}function gU(){return typeof window<"u"&&typeof document<"u"}function oL(i){let t=i.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function cS(i,t,e){let n;return"string"==typeof i?(n=parseInt(i,10),-1!==i.indexOf("%")&&(n=n/100*t.parentNode[e])):n=i,n}const uS=i=>window.getComputedStyle(i,null),uue=["top","right","bottom","left"];function I0(i,t,e){const n={};e=e?"-"+e:"";for(let r=0;r<4;r++){const s=uue[r];n[s]=parseFloat(i[t+"-"+s+e])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}function S0(i,t){if("native"in i)return i;const{canvas:e,currentDevicePixelRatio:n}=t,r=uS(e),s="border-box"===r.boxSizing,o=I0(r,"padding"),l=I0(r,"border","width"),{x:u,y:p,box:v}=function hue(i,t){const e=i.touches,n=e&&e.length?e[0]:i,{offsetX:r,offsetY:s}=n;let l,u,o=!1;if(((i,t,e)=>(i>0||t>0)&&(!e||!e.shadowRoot))(r,s,i.target))l=r,u=s;else{const p=t.getBoundingClientRect();l=n.clientX-p.left,u=n.clientY-p.top,o=!0}return{x:l,y:u,box:o}}(i,e),x=o.left+(v&&l.left),I=o.top+(v&&l.top);let{width:T,height:F}=t;return s&&(T-=o.width+l.width,F-=o.height+l.height),{x:Math.round((u-x)/T*e.width/n),y:Math.round((p-I)/F*e.height/n)}}const aL=i=>Math.round(10*i)/10;function mU(i,t,e){const n=t||1,r=Math.floor(i.height*n),s=Math.floor(i.width*n);i.height=r/n,i.width=s/n;const o=i.canvas;return o.style&&(e||!o.style.height&&!o.style.width)&&(o.style.height=`${i.height}px`,o.style.width=`${i.width}px`),(i.currentDevicePixelRatio!==n||o.height!==r||o.width!==s)&&(i.currentDevicePixelRatio=n,o.height=r,o.width=s,i.ctx.setTransform(n,0,0,n,0,0),!0)}const gue=function(){let i=!1;try{const t={get passive(){return i=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch{}return i}();function vU(i,t){const e=function cue(i,t){return uS(i).getPropertyValue(t)}(i,t),n=e&&e.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function E0(i,t,e,n){return{x:i.x+e*(t.x-i.x),y:i.y+e*(t.y-i.y)}}function mue(i,t,e,n){return{x:i.x+e*(t.x-i.x),y:"middle"===n?e<.5?i.y:t.y:"after"===n?e<1?i.y:t.y:e>0?t.y:i.y}}function vue(i,t,e,n){const r={x:i.cp2x,y:i.cp2y},s={x:t.cp1x,y:t.cp1y},o=E0(i,r,e),l=E0(r,s,e),u=E0(s,t,e),p=E0(o,l,e),v=E0(l,u,e);return E0(p,v,e)}const yU=new Map;function Vw(i,t,e){return function yue(i,t){t=t||{};const e=i+JSON.stringify(t);let n=yU.get(e);return n||(n=new Intl.NumberFormat(i,t),yU.set(e,n)),n}(t,e).format(i)}function pC(i,t,e){return i?function(i,t){return{x:e=>i+i+t-e,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,n)=>e-n,leftForLtr:(e,n)=>e-n}}(t,e):{x:i=>i,setWidth(i){},textAlign:i=>i,xPlus:(i,t)=>i+t,leftForLtr:(i,t)=>i}}function _U(i,t){let e,n;("ltr"===t||"rtl"===t)&&(e=i.canvas.style,n=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),i.prevTextDirection=n)}function bU(i,t){void 0!==t&&(delete i.prevTextDirection,i.canvas.style.setProperty("direction",t[0],t[1]))}function CU(i){return"angle"===i?{between:Pw,compare:oce,normalize:Dp}:{between:ly,compare:(t,e)=>t-e,normalize:t=>t}}function xU({start:i,end:t,count:e,loop:n,style:r}){return{start:i%e,end:t%e,loop:n&&(t-i+1)%e==0,style:r}}function wU(i,t,e){if(!e)return[i];const{property:n,start:r,end:s}=e,o=t.length,{compare:l,between:u,normalize:p}=CU(n),{start:v,end:x,loop:I,style:T}=function Cue(i,t,e){const{property:n,start:r,end:s}=e,{between:o,normalize:l}=CU(n),u=t.length;let I,T,{start:p,end:v,loop:x}=i;if(x){for(p+=u,v+=u,I=0,T=u;I<T&&o(l(t[p%u][n]),r,s);++I)p--,v--;p%=u,v%=u}return v<p&&(v+=u),{start:p,end:v,loop:x,style:i.style}}(i,t,e),F=[];let ce,we,ye,j=!1,X=null;for(let Xe=v,yt=v;Xe<=x;++Xe)we=t[Xe%o],!we.skip&&(ce=p(we[n]),ce!==ye&&(j=u(ce,r,s),null===X&&(j||u(r,ye,ce)&&0!==l(r,ye))&&(X=0===l(ce,r)?Xe:yt),null!==X&&(!j||0===l(s,ce)||u(s,ye,ce))&&(F.push(xU({start:X,end:Xe,loop:I,count:o,style:T})),X=null),yt=Xe,ye=ce));return null!==X&&F.push(xU({start:X,end:x,loop:I,count:o,style:T})),F}function AU(i,t){const e=[],n=i.segments;for(let r=0;r<n.length;r++){const s=wU(n[r],i.points,t);s.length&&e.push(...s)}return e}function SU(i){return{backgroundColor:i.backgroundColor,borderCapStyle:i.borderCapStyle,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderJoinStyle:i.borderJoinStyle,borderWidth:i.borderWidth,borderColor:i.borderColor}}function Sue(i,t){return t&&JSON.stringify(i)!==JSON.stringify(t)}var dy=new class Eue{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,n,r){const o=e.duration;e.listeners[r].forEach(l=>l({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(n-e.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=H4.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((n,r)=>{if(!n.running||!n.items.length)return;const s=n.items;let u,o=s.length-1,l=!1;for(;o>=0;--o)u=s[o],u._active?(u._total>n.duration&&(n.duration=u._total),u.tick(t),l=!0):(s[o]=s[s.length-1],s.pop());l&&(r.draw(),this._notify(r,n,t,"progress")),s.length||(n.running=!1,this._notify(r,n,t,"complete"),n.initial=!1),e+=s.length}),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){const e=this._charts;let n=e.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,n)),n}listen(t,e,n){this._getAnims(t).listeners[e].push(n)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);!e||(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((n,r)=>Math.max(n,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const n=e.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}};const EU="transparent",Tue={boolean:(i,t,e)=>e>.5?t:i,color(i,t,e){const n=iU(i||EU),r=n.valid&&iU(t||EU);return r&&r.valid?r.mix(n,e).hexString():t},number:(i,t,e)=>i+(t-i)*e};class Mue{constructor(t,e,n,r){const s=e[n];r=zw([t.to,r,s,t.from]);const o=zw([t.from,s,r]);this._active=!0,this._fn=t.fn||Tue[t.type||typeof o],this._easing=Rw[t.easing]||Rw.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=n,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(t,e,n){if(this._active){this._notify(!1);const r=this._target[this._prop],s=n-this._start,o=this._duration-s;this._start=n,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=s,this._loop=!!t.loop,this._to=zw([t.to,e,r,t.from]),this._from=zw([t.from,r,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,n=this._duration,r=this._prop,s=this._from,o=this._loop,l=this._to;let u;if(this._active=s!==l&&(o||e<n),!this._active)return this._target[r]=l,void this._notify(!0);e<0?this._target[r]=s:(u=e/n%2,u=o&&u>1?2-u:u,u=this._easing(Math.min(1,Math.max(0,u))),this._target[r]=this._fn(s,l,u))}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,n)=>{t.push({res:e,rej:n})})}_notify(t){const e=t?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][e]()}}na.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const Pue=Object.keys(na.animation);na.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:i=>"onProgress"!==i&&"onComplete"!==i&&"fn"!==i}),na.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),na.describe("animations",{_fallback:"animation"}),na.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:i=>0|i}}}});class TU{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Jo(t))return;const e=this._properties;Object.getOwnPropertyNames(t).forEach(n=>{const r=t[n];if(!Jo(r))return;const s={};for(const o of Pue)s[o]=r[o];(Ll(r.properties)&&r.properties||[n]).forEach(o=>{(o===n||!e.has(o))&&e.set(o,s)})})}_animateOptions(t,e){const n=e.options,r=function kue(i,t){if(!t)return;let e=i.options;if(e)return e.$shared&&(i.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e;i.options=t}(t,n);if(!r)return[];const s=this._createAnimations(r,n);return n.$shared&&function Rue(i,t){const e=[],n=Object.keys(t);for(let r=0;r<n.length;r++){const s=i[n[r]];s&&s.active()&&e.push(s.wait())}return Promise.all(e)}(t.options.$animations,n).then(()=>{t.options=n},()=>{}),s}_createAnimations(t,e){const n=this._properties,r=[],s=t.$animations||(t.$animations={}),o=Object.keys(e),l=Date.now();let u;for(u=o.length-1;u>=0;--u){const p=o[u];if("$"===p.charAt(0))continue;if("options"===p){r.push(...this._animateOptions(t,e));continue}const v=e[p];let x=s[p];const I=n.get(p);if(x){if(I&&x.active()){x.update(I,v,l);continue}x.cancel()}I&&I.duration?(s[p]=x=new Mue(I,t,p,v),r.push(x)):t[p]=v}return r}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const n=this._createAnimations(t,e);return n.length?(dy.add(this._chart,n),!0):void 0}}function MU(i,t){const e=i&&i.options||{},n=e.reverse,r=void 0===e.min?t:0,s=void 0===e.max?t:0;return{start:n?s:r,end:n?r:s}}function DU(i,t){const e=[],n=i._getSortedDatasetMetas(t);let r,s;for(r=0,s=n.length;r<s;++r)e.push(n[r].index);return e}function LU(i,t,e,n={}){const r=i.keys,s="single"===n.mode;let o,l,u,p;if(null!==t){for(o=0,l=r.length;o<l;++o){if(u=+r[o],u===e){if(n.all)continue;break}p=i.values[u],ru(p)&&(s||0===t||ov(t)===ov(p))&&(t+=p)}return t}}function PU(i,t){const e=i&&i.options.stacked;return e||void 0===e&&void 0!==t.stack}function Vue(i,t,e){const n=i[t]||(i[t]={});return n[e]||(n[e]={})}function RU(i,t,e,n){for(const r of t.getMatchingVisibleMetas(n).reverse()){const s=i[r.index];if(e&&s>0||!e&&s<0)return r.index}return null}function kU(i,t){const{chart:e,_cachedMeta:n}=i,r=e._stacks||(e._stacks={}),{iScale:s,vScale:o,index:l}=n,u=s.axis,p=o.axis,v=function Bue(i,t,e){return`${i.id}.${t.id}.${e.stack||e.type}`}(s,o,n),x=t.length;let I;for(let T=0;T<x;++T){const F=t[T],{[u]:j,[p]:X}=F;I=(F._stacks||(F._stacks={}))[p]=Vue(r,v,j),I[l]=X,I._top=RU(I,o,!0,n.type),I._bottom=RU(I,o,!1,n.type)}}function lL(i,t){const e=i.scales;return Object.keys(e).filter(n=>e[n].axis===t).shift()}function Uw(i,t){const e=i.controller.index,n=i.vScale&&i.vScale.axis;if(n){t=t||i._parsed;for(const r of t){const s=r._stacks;if(!s||void 0===s[n]||void 0===s[n][e])return;delete s[n][e]}}}const cL=i=>"reset"===i||"none"===i,OU=(i,t)=>t?i:Object.assign({},i);let av=(()=>{class i{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=PU(e.vScale,e),this.addElements()}updateIndex(e){this.index!==e&&Uw(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),s=(I,T,F,j)=>"x"===I?T:"r"===I?j:F,o=n.xAxisID=fo(r.xAxisID,lL(e,"x")),l=n.yAxisID=fo(r.yAxisID,lL(e,"y")),u=n.rAxisID=fo(r.rAxisID,lL(e,"r")),p=n.indexAxis,v=n.iAxisID=s(p,o,l,u),x=n.vAxisID=s(p,l,o,u);n.xScale=this.getScaleForId(o),n.yScale=this.getScaleForId(l),n.rScale=this.getScaleForId(u),n.iScale=this.getScaleForId(v),n.vScale=this.getScaleForId(x)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&V4(this._data,this),e._stacked&&Uw(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(Jo(n))this._data=function Nue(i){const t=Object.keys(i),e=new Array(t.length);let n,r,s;for(n=0,r=t.length;n<r;++n)s=t[n],e[n]={x:s,y:i[s]};return e}(n);else if(r!==n){if(r){V4(r,this);const s=this._cachedMeta;Uw(s),s._parsed=[]}n&&Object.isExtensible(n)&&function uce(i,t){i._chartjs?i._chartjs.listeners.push(t):(Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),z4.forEach(e=>{const n="_onData"+H2(e),r=i[e];Object.defineProperty(i,e,{configurable:!0,enumerable:!1,value(...s){const o=r.apply(this,s);return i._chartjs.listeners.forEach(l=>{"function"==typeof l[n]&&l[n](...s)}),o}})}))}(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const o=n._stacked;n._stacked=PU(n.vScale,n),n.stack!==r.stack&&(s=!0,Uw(n),n.stack=r.stack),this._resyncElements(e),(s||o!==n._stacked)&&kU(this,n._parsed)}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:s}=this,{iScale:o,_stacked:l}=r,u=o.axis;let x,I,T,p=0===e&&n===s.length||r._sorted,v=e>0&&r._parsed[e-1];if(!1===this._parsing)r._parsed=s,r._sorted=!0,T=s;else{T=Ll(s[e])?this.parseArrayData(r,s,e,n):Jo(s[e])?this.parseObjectData(r,s,e,n):this.parsePrimitiveData(r,s,e,n);const F=()=>null===I[u]||v&&I[u]<v[u];for(x=0;x<n;++x)r._parsed[x+e]=I=T[x],p&&(F()&&(p=!1),v=I);r._sorted=p}l&&kU(this,T)}parsePrimitiveData(e,n,r,s){const{iScale:o,vScale:l}=e,u=o.axis,p=l.axis,v=o.getLabels(),x=o===l,I=new Array(s);let T,F,j;for(T=0,F=s;T<F;++T)j=T+r,I[T]={[u]:x||o.parse(v[j],j),[p]:l.parse(n[j],j)};return I}parseArrayData(e,n,r,s){const{xScale:o,yScale:l}=e,u=new Array(s);let p,v,x,I;for(p=0,v=s;p<v;++p)x=p+r,I=n[x],u[p]={x:o.parse(I[0],x),y:l.parse(I[1],x)};return u}parseObjectData(e,n,r,s){const{xScale:o,yScale:l}=e,{xAxisKey:u="x",yAxisKey:p="y"}=this._parsing,v=new Array(s);let x,I,T,F;for(x=0,I=s;x<I;++x)T=x+r,F=n[T],v[x]={x:o.parse(a_(F,u),T),y:l.parse(a_(F,p),T)};return v}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const o=this._cachedMeta,l=n[e.axis];return LU({keys:DU(this.chart,!0),values:n._stacks[e.axis]},l,o.index,{mode:r})}updateRangeFromParsed(e,n,r,s){const o=r[n.axis];let l=null===o?NaN:o;const u=s&&r._stacks[n.axis];s&&u&&(s.values=u,l=LU(s,o,this._cachedMeta.index)),e.min=Math.min(e.min,l),e.max=Math.max(e.max,l)}getMinMax(e,n){const r=this._cachedMeta,s=r._parsed,o=r._sorted&&e===r.iScale,l=s.length,u=this._getOtherScale(e),p=((i,t,e)=>i&&!t.hidden&&t._stacked&&{keys:DU(this.chart,!0),values:null})(n,r),v={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:x,max:I}=function zue(i){const{min:t,max:e,minDefined:n,maxDefined:r}=i.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:r?e:Number.POSITIVE_INFINITY}}(u);let T,F;function j(){F=s[T];const X=F[u.axis];return!ru(F[e.axis])||x>X||I<X}for(T=0;T<l&&(j()||(this.updateRangeFromParsed(v,e,F,p),!o));++T);if(o)for(T=l-1;T>=0;--T)if(!j()){this.updateRangeFromParsed(v,e,F,p);break}return v}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let s,o,l;for(s=0,o=n.length;s<o;++s)l=n[s][e.axis],ru(l)&&r.push(l);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,s=n.vScale,o=this.getParsed(e);return{label:r?""+r.getLabelForValue(o[r.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=function Fue(i){let t,e,n,r;return Jo(i)?(t=i.top,e=i.right,n=i.bottom,r=i.left):t=e=n=r=i,{top:t,right:e,bottom:n,left:r,disabled:!1===i}}(fo(this.options.clip,function Oue(i,t,e){if(!1===e)return!1;const n=MU(i,e),r=MU(t,e);return{top:r.end,right:n.end,bottom:r.start,left:n.start}}(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,r=this._cachedMeta,s=r.data||[],o=this.chart.chartArea,l=[],u=this._drawStart||0,p=this._drawCount||s.length-u,v=this.options.drawActiveElementsOnTop;let x;for(r.dataset&&r.dataset.draw(e,o,u,p),x=u;x<u+p;++x){const I=s[x];I.hidden||(I.active&&v?l.push(I):I.draw(e,o))}for(x=0;x<l.length;++x)l[x].draw(e,o)}getStyle(e,n){const r=n?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const s=this.getDataset();let o;if(e>=0&&e<this._cachedMeta.data.length){const l=this._cachedMeta.data[e];o=l.$context||(l.$context=function Hue(i,t,e){return d_(i,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}(this.getContext(),e,l)),o.parsed=this.getParsed(e),o.raw=s.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=function Uue(i,t){return d_(i,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!n,o.mode=r,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const s="active"===n,o=this._cachedDataOpts,l=e+"-"+n,u=o[l],p=this.enableOptionSharing&&vg(r);if(u)return OU(u,p);const v=this.chart.config,x=v.datasetElementScopeKeys(this._type,e),I=s?[`${e}Hover`,"hover",e,""]:[e,""],T=v.getOptionScopes(this.getDataset(),x),F=Object.keys(na.elements[e]),X=v.resolveNamedOptions(T,F,()=>this.getContext(r,s),I);return X.$shared&&(X.$shared=p,o[l]=Object.freeze(OU(X,p))),X}_resolveAnimations(e,n,r){const s=this.chart,o=this._cachedDataOpts,l=`animation-${n}`,u=o[l];if(u)return u;let p;if(!1!==s.options.animation){const x=this.chart.config,I=x.datasetAnimationScopeKeys(this._type,n),T=x.getOptionScopes(this.getDataset(),I);p=x.createResolver(T,this.getContext(e,r,n))}const v=new TU(s,p&&p.animations);return p&&p._cacheable&&(o[l]=Object.freeze(v)),v}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||cL(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),s=this._sharedOptions,o=this.getSharedOptions(r),l=this.includeOptions(n,o)||o!==s;return this.updateSharedOptions(o,n,r),{sharedOptions:o,includeOptions:l}}updateElement(e,n,r,s){cL(s)?Object.assign(e,r):this._resolveAnimations(n,s).update(e,r)}updateSharedOptions(e,n,r){e&&!cL(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,s){e.active=s;const o=this.getStyle(n,s);this._resolveAnimations(n,r,s).update(e,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[u,p,v]of this._syncList)this[u](p,v);this._syncList=[];const s=r.length,o=n.length,l=Math.min(o,s);l&&this.parse(0,l),o>s?this._insertElements(s,o-s,e):o<s&&this._removeElements(o,s-o)}_insertElements(e,n,r=!0){const s=this._cachedMeta,o=s.data,l=e+n;let u;const p=v=>{for(v.length+=n,u=v.length-1;u>=l;u--)v[u]=v[u-n]};for(p(o),u=e;u<l;++u)o[u]=new this.dataElementType;this._parsing&&p(s._parsed),this.parse(e,n),r&&this.updateElements(o,e,n,"reset")}updateElements(e,n,r,s){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(e,n);r._stacked&&Uw(r,s)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,s]=e;this[n](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return i.defaults={},i})();function jue(i){const t=i.iScale,e=function Wue(i,t){if(!i._cache.$bar){const e=i.getMatchingVisibleMetas(t);let n=[];for(let r=0,s=e.length;r<s;r++)n=n.concat(e[r].controller.getAllParsedValues(i));i._cache.$bar=U4(n.sort((r,s)=>r-s))}return i._cache.$bar}(t,i.type);let r,s,o,l,n=t._length;const u=()=>{32767===o||-32768===o||(vg(l)&&(n=Math.min(n,Math.abs(o-l)||n)),l=o)};for(r=0,s=e.length;r<s;++r)o=t.getPixelForValue(e[r]),u();for(l=void 0,r=0,s=t.ticks.length;r<s;++r)o=t.getPixelForTick(r),u();return n}function FU(i,t,e,n){return Ll(i)?function Xue(i,t,e,n){const r=e.parse(i[0],n),s=e.parse(i[1],n),o=Math.min(r,s),l=Math.max(r,s);let u=o,p=l;Math.abs(o)>Math.abs(l)&&(u=l,p=o),t[e.axis]=p,t._custom={barStart:u,barEnd:p,start:r,end:s,min:o,max:l}}(i,t,e,n):t[e.axis]=e.parse(i,n),t}function NU(i,t,e,n){const r=i.iScale,s=i.vScale,o=r.getLabels(),l=r===s,u=[];let p,v,x,I;for(p=e,v=e+n;p<v;++p)I=t[p],x={},x[r.axis]=l||r.parse(o[p],p),u.push(FU(I,x,s,p));return u}function uL(i){return i&&void 0!==i.barStart&&void 0!==i.barEnd}function Zue(i,t,e,n){let r=t.borderSkipped;const s={};if(!r)return void(i.borderSkipped=s);if(!0===r)return void(i.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:o,end:l,reverse:u,top:p,bottom:v}=function Kue(i){let t,e,n,r,s;return i.horizontal?(t=i.base>i.x,e="left",n="right"):(t=i.base<i.y,e="bottom",n="top"),t?(r="end",s="start"):(r="start",s="end"),{start:e,end:n,reverse:t,top:r,bottom:s}}(i);"middle"===r&&e&&(i.enableBorderRadius=!0,(e._top||0)===n?r=p:(e._bottom||0)===n?r=v:(s[BU(v,o,l,u)]=!0,r=p)),s[BU(r,o,l,u)]=!0,i.borderSkipped=s}function BU(i,t,e,n){return n?(i=function Que(i,t,e){return i===t?e:i===e?t:i}(i,t,e),i=zU(i,e,t)):i=zU(i,t,e),i}function zU(i,t,e){return"start"===i?t:"end"===i?e:i}function Jue(i,{inflateAmount:t},e){i.inflateAmount="auto"===t?1===e?.33:0:t}av.prototype.datasetElementType=null,av.prototype.dataElementType=null;let ede=(()=>{class i extends av{parsePrimitiveData(e,n,r,s){return NU(e,n,r,s)}parseArrayData(e,n,r,s){return NU(e,n,r,s)}parseObjectData(e,n,r,s){const{iScale:o,vScale:l}=e,{xAxisKey:u="x",yAxisKey:p="y"}=this._parsing,v="x"===o.axis?u:p,x="x"===l.axis?u:p,I=[];let T,F,j,X;for(T=r,F=r+s;T<F;++T)X=n[T],j={},j[o.axis]=o.parse(a_(X,v),T),I.push(FU(a_(X,x),j,l,T));return I}updateRangeFromParsed(e,n,r,s){super.updateRangeFromParsed(e,n,r,s);const o=r._custom;o&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,o.min),e.max=Math.max(e.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:s}=n,o=this.getParsed(e),l=o._custom,u=uL(l)?"["+l.start+", "+l.end+"]":""+s.getLabelForValue(o[s.axis]);return{label:""+r.getLabelForValue(o[r.axis]),value:u}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,s){const o="reset"===s,{index:l,_cachedMeta:{vScale:u}}=this,p=u.getBasePixel(),v=u.isHorizontal(),x=this._getRuler(),{sharedOptions:I,includeOptions:T}=this._getSharedOptions(n,s);for(let F=n;F<n+r;F++){const j=this.getParsed(F),X=o||pa(j[u.axis])?{base:p,head:p}:this._calculateBarValuePixels(F),ce=this._calculateBarIndexPixels(F,x),we=(j._stacks||{})[u.axis],ye={horizontal:v,base:X.base,enableBorderRadius:!we||uL(j._custom)||l===we._top||l===we._bottom,x:v?X.head:ce.center,y:v?ce.center:X.head,height:v?ce.size:Math.abs(X.size),width:v?Math.abs(X.size):ce.size};T&&(ye.options=I||this.resolveDataElementOptions(F,e[F].active?"active":s));const Ae=ye.options||e[F].options;Zue(ye,Ae,we,l),Jue(ye,Ae,x.ratio),this.updateElement(e[F],F,ye,s)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,s=r.getMatchingVisibleMetas(this._type).filter(p=>p.controller.options.grouped),o=r.options.stacked,l=[],u=p=>{const v=p.controller.getParsed(n),x=v&&v[p.vScale.axis];if(pa(x)||isNaN(x))return!0};for(const p of s)if((void 0===n||!u(p))&&((!1===o||-1===l.indexOf(p.stack)||void 0===o&&void 0===p.stack)&&l.push(p.stack),p.index===e))break;return l.length||l.push(void 0),l}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,r){const s=this._getStacks(e,r),o=void 0!==n?s.indexOf(n):-1;return-1===o?s.length-1:o}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,s=[];let o,l;for(o=0,l=n.data.length;o<l;++o)s.push(r.getPixelForValue(this.getParsed(o)[r.axis],o));const u=e.barThickness;return{min:u||jue(n),pixels:s,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:u?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r},options:{base:s,minBarLength:o}}=this,l=s||0,u=this.getParsed(e),p=u._custom,v=uL(p);let F,j,x=u[n.axis],I=0,T=r?this.applyStack(n,u,r):x;T!==x&&(I=T-x,T=x),v&&(x=p.barStart,T=p.barEnd-p.barStart,0!==x&&ov(x)!==ov(p.barEnd)&&(I=0),I+=x);const X=pa(s)||v?I:s;let ce=n.getPixelForValue(X);if(F=this.chart.getDataVisibility(e)?n.getPixelForValue(I+T):ce,j=F-ce,Math.abs(j)<o){j=function Yue(i,t,e){return 0!==i?ov(i):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}(j,n,l)*o,x===l&&(ce-=j/2);const we=n.getPixelForDecimal(0),ye=n.getPixelForDecimal(1),Ae=Math.min(we,ye),We=Math.max(we,ye);ce=Math.max(Math.min(ce,We),Ae),F=ce+j}if(ce===n.getPixelForValue(l)){const we=ov(j)*n.getLineWidthForValue(l)/2;ce+=we,j-=we}return{size:j,base:ce,head:F,center:F+j/2}}_calculateBarIndexPixels(e,n){const r=n.scale,s=this.options,o=s.skipNull,l=fo(s.maxBarThickness,1/0);let u,p;if(n.grouped){const v=o?this._getStackCount(e):n.stackCount,x="flex"===s.barThickness?function que(i,t,e,n){const r=t.pixels,s=r[i];let o=i>0?r[i-1]:null,l=i<r.length-1?r[i+1]:null;const u=e.categoryPercentage;null===o&&(o=s-(null===l?t.end-t.start:l-s)),null===l&&(l=s+s-o);const p=s-(s-Math.min(o,l))/2*u;return{chunk:Math.abs(l-o)/2*u/n,ratio:e.barPercentage,start:p}}(e,n,s,v):function $ue(i,t,e,n){const r=e.barThickness;let s,o;return pa(r)?(s=t.min*e.categoryPercentage,o=e.barPercentage):(s=r*n,o=1),{chunk:s/n,ratio:o,start:t.pixels[i]-s/2}}(e,n,s,v),I=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0);u=x.start+x.chunk*I+x.chunk/2,p=Math.min(l,x.chunk*x.ratio)}else u=r.getPixelForValue(this.getParsed(e)[r.axis],e),p=Math.min(l,n.min*n.ratio);return{base:u-p/2,head:u+p/2,center:u,size:p}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,s=r.length;let o=0;for(;o<s;++o)null!==this.getParsed(o)[n.axis]&&r[o].draw(this._ctx)}}return i.id="bar",i.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},i.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}},i})(),tde=(()=>{class i extends av{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,n,r,s){const o=super.parsePrimitiveData(e,n,r,s);for(let l=0;l<o.length;l++)o[l]._custom=this.resolveDataElementOptions(l+r).radius;return o}parseArrayData(e,n,r,s){const o=super.parseArrayData(e,n,r,s);for(let l=0;l<o.length;l++)o[l]._custom=fo(n[r+l][2],this.resolveDataElementOptions(l+r).radius);return o}parseObjectData(e,n,r,s){const o=super.parseObjectData(e,n,r,s);for(let l=0;l<o.length;l++){const u=n[r+l];o[l]._custom=fo(u&&u.r&&+u.r,this.resolveDataElementOptions(l+r).radius)}return o}getMaxOverflow(){const e=this._cachedMeta.data;let n=0;for(let r=e.length-1;r>=0;--r)n=Math.max(n,e[r].size(this.resolveDataElementOptions(r))/2);return n>0&&n}getLabelAndValue(e){const n=this._cachedMeta,{xScale:r,yScale:s}=n,o=this.getParsed(e),l=r.getLabelForValue(o.x),u=s.getLabelForValue(o.y),p=o._custom;return{label:n.label,value:"("+l+", "+u+(p?", "+p:"")+")"}}update(e){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,e)}updateElements(e,n,r,s){const o="reset"===s,{iScale:l,vScale:u}=this._cachedMeta,{sharedOptions:p,includeOptions:v}=this._getSharedOptions(n,s),x=l.axis,I=u.axis;for(let T=n;T<n+r;T++){const F=e[T],j=!o&&this.getParsed(T),X={},ce=X[x]=o?l.getPixelForDecimal(.5):l.getPixelForValue(j[x]),we=X[I]=o?u.getBasePixel():u.getPixelForValue(j[I]);X.skip=isNaN(ce)||isNaN(we),v&&(X.options=p||this.resolveDataElementOptions(T,F.active?"active":s),o&&(X.options.radius=0)),this.updateElement(F,T,X,s)}}resolveDataElementOptions(e,n){const r=this.getParsed(e);let s=super.resolveDataElementOptions(e,n);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const o=s.radius;return"active"!==n&&(s.radius=0),s.radius+=fo(r&&r._custom,o),s}}return i.id="bubble",i.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},i.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:()=>""}}}},i})(),VU=(()=>{class i extends av{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,s=this._cachedMeta;if(!1===this._parsing)s._parsed=r;else{let l,u,o=p=>+r[p];if(Jo(r[e])){const{key:p="value"}=this._parsing;o=v=>+a_(r[v],p)}for(l=e,u=e+n;l<u;++l)s._parsed[l]=o(l)}}_getRotation(){return gm(this.options.rotation-90)}_getCircumference(){return gm(this.options.circumference)}_getRotationExtents(){let e=ul,n=-ul;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)){const s=this.chart.getDatasetMeta(r).controller,o=s._getRotation(),l=s._getCircumference();e=Math.min(e,o),n=Math.max(n,o+l)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,s=this._cachedMeta,o=s.data,l=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,u=Math.max((Math.min(r.width,r.height)-l)/2,0),p=Math.min(((i,t)=>"string"==typeof i&&i.endsWith("%")?parseFloat(i)/100:i/t)(this.options.cutout,u),1),v=this._getRingWeight(this.index),{circumference:x,rotation:I}=this._getRotationExtents(),{ratioX:T,ratioY:F,offsetX:j,offsetY:X}=function nde(i,t,e){let n=1,r=1,s=0,o=0;if(t<ul){const l=i,u=l+t,p=Math.cos(l),v=Math.sin(l),x=Math.cos(u),I=Math.sin(u),T=(ye,Ae,We)=>Pw(ye,l,u,!0)?1:Math.max(Ae,Ae*e,We,We*e),F=(ye,Ae,We)=>Pw(ye,l,u,!0)?-1:Math.min(Ae,Ae*e,We,We*e),j=T(0,p,x),X=T(qc,v,I),ce=F(sc,p,x),we=F(sc+qc,v,I);n=(j-ce)/2,r=(X-we)/2,s=-(j+ce)/2,o=-(X+we)/2}return{ratioX:n,ratioY:r,offsetX:s,offsetY:o}}(I,x,p),ye=Math.max(Math.min((r.width-l)/T,(r.height-l)/F)/2,0),Ae=D4(this.options.radius,ye),ot=(Ae-Math.max(Ae*p,0))/this._getVisibleDatasetWeightTotal();this.offsetX=j*Ae,this.offsetY=X*Ae,s.total=this.calculateTotal(),this.outerRadius=Ae-ot*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-ot*v,0),this.updateElements(o,0,o.length,e)}_circumference(e,n){const r=this.options,s=this._cachedMeta,o=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||null===s._parsed[e]||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*o/ul)}updateElements(e,n,r,s){const o="reset"===s,l=this.chart,u=l.chartArea,x=(u.left+u.right)/2,I=(u.top+u.bottom)/2,T=o&&l.options.animation.animateScale,F=T?0:this.innerRadius,j=T?0:this.outerRadius,{sharedOptions:X,includeOptions:ce}=this._getSharedOptions(n,s);let ye,we=this._getRotation();for(ye=0;ye<n;++ye)we+=this._circumference(ye,o);for(ye=n;ye<n+r;++ye){const Ae=this._circumference(ye,o),We=e[ye],ot={x:x+this.offsetX,y:I+this.offsetY,startAngle:we,endAngle:we+Ae,circumference:Ae,outerRadius:j,innerRadius:F};ce&&(ot.options=X||this.resolveDataElementOptions(ye,We.active?"active":s)),we+=Ae,this.updateElement(We,ye,ot,s)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let s,r=0;for(s=0;s<n.length;s++){const o=e._parsed[s];null!==o&&!isNaN(o)&&this.chart.getDataVisibility(s)&&!n[s].hidden&&(r+=Math.abs(o))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?ul*(Math.abs(e)/n):0}getLabelAndValue(e){const r=this.chart,s=r.data.labels||[],o=Vw(this._cachedMeta._parsed[e],r.options.locale);return{label:s[e]||"",value:o}}getMaxBorderWidth(e){let n=0;const r=this.chart;let s,o,l,u,p;if(!e)for(s=0,o=r.data.datasets.length;s<o;++s)if(r.isDatasetVisible(s)){l=r.getDatasetMeta(s),e=l.data,u=l.controller;break}if(!e)return 0;for(s=0,o=e.length;s<o;++s)p=u.resolveDataElementOptions(s),"inner"!==p.borderAlign&&(n=Math.max(n,p.borderWidth||0,p.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,s=e.length;r<s;++r){const o=this.resolveDataElementOptions(r);n=Math.max(n,o.offset||0,o.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(fo(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return i.id="doughnut",i.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},i.descriptors={_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t},i.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n}}=t.legend.options;return e.labels.map((r,s)=>{const l=t.getDatasetMeta(0).controller.getStyle(s);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,lineWidth:l.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(s),index:s}})}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}},tooltip:{callbacks:{title:()=>"",label(t){let e=t.label;const n=": "+t.formattedValue;return Ll(e)?(e=e.slice(),e[0]+=n):e+=n,e}}}}},i})(),ide=(()=>{class i extends av{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:s=[],_dataset:o}=n,l=this.chart._animationsDisabled;let{start:u,count:p}=W4(n,s,l);this._drawStart=u,this._drawCount=p,j4(n)&&(u=0,p=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!o._decimated,r.points=s;const v=this.resolveDatasetElementOptions(e);this.options.showLine||(v.borderWidth=0),v.segment=this.options.segment,this.updateElement(r,void 0,{animated:!l,options:v},e),this.updateElements(s,u,p,e)}updateElements(e,n,r,s){const o="reset"===s,{iScale:l,vScale:u,_stacked:p,_dataset:v}=this._cachedMeta,{sharedOptions:x,includeOptions:I}=this._getSharedOptions(n,s),T=l.axis,F=u.axis,{spanGaps:j,segment:X}=this.options,ce=uC(j)?j:Number.POSITIVE_INFINITY,we=this.chart._animationsDisabled||o||"none"===s;let ye=n>0&&this.getParsed(n-1);for(let Ae=n;Ae<n+r;++Ae){const We=e[Ae],ot=this.getParsed(Ae),Mt=we?We:{},Xe=pa(ot[F]),yt=Mt[T]=l.getPixelForValue(ot[T],Ae),tn=Mt[F]=o||Xe?u.getBasePixel():u.getPixelForValue(p?this.applyStack(u,ot,p):ot[F],Ae);Mt.skip=isNaN(yt)||isNaN(tn)||Xe,Mt.stop=Ae>0&&Math.abs(ot[T]-ye[T])>ce,X&&(Mt.parsed=ot,Mt.raw=v.data[Ae]),I&&(Mt.options=x||this.resolveDataElementOptions(Ae,We.active?"active":s)),we||this.updateElement(We,Ae,Mt,s),ye=ot}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,s=e.data||[];if(!s.length)return r;const o=s[0].size(this.resolveDataElementOptions(0)),l=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,o,l)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}return i.id="line",i.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},i.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}},i})(),rde=(()=>{class i extends av{constructor(e,n){super(e,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const r=this.chart,s=r.data.labels||[],o=Vw(this._cachedMeta._parsed[e].r,r.options.locale);return{label:s[e]||"",value:o}}parseObjectData(e,n,r,s){return fU.bind(this)(e,n,r,s)}update(e){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,e)}getMinMax(){const n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return this._cachedMeta.data.forEach((r,s)=>{const o=this.getParsed(s).r;!isNaN(o)&&this.chart.getDataVisibility(s)&&(o<n.min&&(n.min=o),o>n.max&&(n.max=o))}),n}_updateRadius(){const e=this.chart,n=e.chartArea,r=e.options,s=Math.min(n.right-n.left,n.bottom-n.top),o=Math.max(s/2,0),u=(o-Math.max(r.cutoutPercentage?o/100*r.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=o-u*this.index,this.innerRadius=this.outerRadius-u}updateElements(e,n,r,s){const o="reset"===s,l=this.chart,p=l.options.animation,v=this._cachedMeta.rScale,x=v.xCenter,I=v.yCenter,T=v.getIndexAngle(0)-.5*sc;let j,F=T;const X=360/this.countVisibleElements();for(j=0;j<n;++j)F+=this._computeAngle(j,s,X);for(j=n;j<n+r;j++){const ce=e[j];let we=F,ye=F+this._computeAngle(j,s,X),Ae=l.getDataVisibility(j)?v.getDistanceFromCenterForValue(this.getParsed(j).r):0;F=ye,o&&(p.animateScale&&(Ae=0),p.animateRotate&&(we=ye=T));const We={x,y:I,innerRadius:0,outerRadius:Ae,startAngle:we,endAngle:ye,options:this.resolveDataElementOptions(j,ce.active?"active":s)};this.updateElement(ce,j,We,s)}}countVisibleElements(){let n=0;return this._cachedMeta.data.forEach((r,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&n++}),n}_computeAngle(e,n,r){return this.chart.getDataVisibility(e)?gm(this.resolveDataElementOptions(e,n).angle||r):0}}return i.id="polarArea",i.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},i.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n}}=t.legend.options;return e.labels.map((r,s)=>{const l=t.getDatasetMeta(0).controller.getStyle(s);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,lineWidth:l.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(s),index:s}})}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}},tooltip:{callbacks:{title:()=>"",label:t=>t.chart.data.labels[t.dataIndex]+": "+t.formattedValue}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}},i})(),sde=(()=>{class i extends VU{}return i.id="pie",i.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"},i})(),ode=(()=>{class i extends av{getLabelAndValue(e){const n=this._cachedMeta.vScale,r=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(r[n.axis])}}parseObjectData(e,n,r,s){return fU.bind(this)(e,n,r,s)}update(e){const n=this._cachedMeta,r=n.dataset,s=n.data||[],o=n.iScale.getLabels();if(r.points=s,"resize"!==e){const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),this.updateElement(r,void 0,{_loop:!0,_fullLoop:o.length===s.length,options:l},e)}this.updateElements(s,0,s.length,e)}updateElements(e,n,r,s){const o=this._cachedMeta.rScale,l="reset"===s;for(let u=n;u<n+r;u++){const p=e[u],v=this.resolveDataElementOptions(u,p.active?"active":s),x=o.getPointPositionForValue(u,this.getParsed(u).r),I=l?o.xCenter:x.x,T=l?o.yCenter:x.y,F={x:I,y:T,angle:x.angle,skip:isNaN(I)||isNaN(T),options:v};this.updateElement(p,u,F,s)}}}return i.id="radar",i.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},i.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}},i})();class mm{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}hasValue(){return uC(this.x)&&uC(this.y)}getProps(t,e){const n=this.$animations;if(!e||!n)return this;const r={};return t.forEach(s=>{r[s]=n[s]&&n[s].active()?n[s]._to:this[s]}),r}}mm.defaults={},mm.defaultRoutes=void 0;const UU={values:i=>Ll(i)?i:""+i,numeric(i,t,e){if(0===i)return"0";const n=this.chart.options.locale;let r,s=i;if(e.length>1){const p=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(p<1e-4||p>1e15)&&(r="scientific"),s=function ade(i,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&i!==Math.floor(i)&&(e=i-Math.floor(i)),e}(i,e)}const o=yg(Math.abs(s)),l=Math.max(Math.min(-1*Math.floor(o),20),0),u={notation:r,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(u,this.options.ticks.format),Vw(i,n,u)},logarithmic(i,t,e){if(0===i)return"0";const n=i/Math.pow(10,Math.floor(yg(i)));return 1===n||2===n||5===n?UU.numeric.call(this,i,t,e):""}};var dS={formatters:UU};function hS(i,t,e,n,r){const s=fo(n,0),o=Math.min(fo(r,i.length),i.length);let u,p,v,l=0;for(e=Math.ceil(e),r&&(u=r-n,e=u/Math.floor(u/e)),v=s;v<0;)l++,v=Math.round(s+l*e);for(p=Math.max(s,0);p<o;p++)p===v&&(t.push(i[p]),l++,v=Math.round(s+l*e))}na.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(i,t)=>t.lineWidth,tickColor:(i,t)=>t.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:dS.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),na.route("scale.ticks","color","","color"),na.route("scale.grid","color","","borderColor"),na.route("scale.grid","borderColor","","borderColor"),na.route("scale.title","color","","color"),na.describe("scale",{_fallback:!1,_scriptable:i=>!i.startsWith("before")&&!i.startsWith("after")&&"callback"!==i&&"parser"!==i,_indexable:i=>"borderDash"!==i&&"tickBorderDash"!==i}),na.describe("scales",{_fallback:"scale"}),na.describe("scale.ticks",{_scriptable:i=>"backdropPadding"!==i&&"callback"!==i,_indexable:i=>"backdropPadding"!==i});const HU=(i,t,e)=>"top"===t||"left"===t?i[t]+e:i[t]-e;function GU(i,t){const e=[],n=i.length/t,r=i.length;let s=0;for(;s<r;s+=n)e.push(i[Math.floor(s)]);return e}function gde(i,t,e){const n=i.ticks.length,r=Math.min(t,n-1),s=i._startPixel,o=i._endPixel,l=1e-6;let p,u=i.getPixelForTick(r);if(!(e&&(p=1===n?Math.max(u-s,o-u):0===t?(i.getPixelForTick(1)-u)/2:(u-i.getPixelForTick(r-1))/2,u+=r<t?p:-p,u<s-l||u>o+l)))return u}function Hw(i){return i.drawTicks?i.tickLength:0}function WU(i,t){if(!i.display)return 0;const e=Ku(i.font,t),n=Sh(i.padding);return(Ll(i.text)?i.text.length:1)*e.lineHeight+n.height}function _de(i,t,e){let n=$2(i);return(e&&"right"!==t||!e&&"right"===t)&&(n=(i=>"left"===i?"right":"right"===i?"left":i)(n)),n}class T0 extends mm{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:n,_suggestedMax:r}=this;return t=mg(t,Number.POSITIVE_INFINITY),e=mg(e,Number.NEGATIVE_INFINITY),n=mg(n,Number.POSITIVE_INFINITY),r=mg(r,Number.NEGATIVE_INFINITY),{min:mg(t,n),max:mg(e,r),minDefined:ru(t),maxDefined:ru(e)}}getMinMax(t){let o,{min:e,max:n,minDefined:r,maxDefined:s}=this.getUserBounds();if(r&&s)return{min:e,max:n};const l=this.getMatchingVisibleMetas();for(let u=0,p=l.length;u<p;++u)o=l[u].controller.getMinMax(this,t),r||(e=Math.min(e,o.min)),s||(n=Math.max(n,o.max));return e=s&&e>n?n:e,n=r&&e>n?e:n,{min:mg(e,mg(n,e)),max:mg(n,mg(e,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Pl(this.options.beforeUpdate,[this])}update(t,e,n){const{beginAtZero:r,grace:s,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function $ce(i,t,e){const{min:n,max:r}=i,s=D4(t,(r-n)/2),o=(l,u)=>e&&0===l?0:l+u;return{min:o(n,-Math.abs(s)),max:o(r,s)}}(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const u=l<this.ticks.length;this._convertTicksToLabels(u?GU(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=function lde(i,t){const e=i.options.ticks,n=e.maxTicksLimit||function cde(i){const t=i.options.offset,e=i._tickSize();return Math.floor(Math.min(i._length/e+(t?0:1),i._maxLength/e))}(i),r=e.major.enabled?function dde(i){const t=[];let e,n;for(e=0,n=i.length;e<n;e++)i[e].major&&t.push(e);return t}(t):[],s=r.length,o=r[0],l=r[s-1],u=[];if(s>n)return function hde(i,t,e,n){let o,r=0,s=e[0];for(n=Math.ceil(n),o=0;o<i.length;o++)o===s&&(t.push(i[o]),r++,s=e[r*n])}(t,u,r,s/n),u;const p=function ude(i,t,e){const n=function fde(i){const t=i.length;let e,n;if(t<2)return!1;for(n=i[0],e=1;e<t;++e)if(i[e]-i[e-1]!==n)return!1;return n}(i),r=t.length/e;if(!n)return Math.max(r,1);const s=function rce(i){const t=[],e=Math.sqrt(i);let n;for(n=1;n<e;n++)i%n==0&&(t.push(n),t.push(i/n));return e===(0|e)&&t.push(e),t.sort((r,s)=>r-s).pop(),t}(n);for(let o=0,l=s.length-1;o<l;o++){const u=s[o];if(u>r)return u}return Math.max(r,1)}(r,t,n);if(s>0){let v,x;const I=s>1?Math.round((l-o)/(s-1)):null;for(hS(t,u,p,pa(I)?0:o-I,o),v=0,x=s-1;v<x;v++)hS(t,u,p,r[v],r[v+1]);return hS(t,u,p,l,pa(I)?t.length:l+I),u}return hS(t,u,p),u}(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),u&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,n,t=this.options.reverse;this.isHorizontal()?(e=this.left,n=this.right):(e=this.top,n=this.bottom,t=!t),this._startPixel=e,this._endPixel=n,this._reversePixels=t,this._length=n-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Pl(this.options.afterUpdate,[this])}beforeSetDimensions(){Pl(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Pl(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Pl(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Pl(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let n,r,s;for(n=0,r=t.length;n<r;n++)s=t[n],s.label=Pl(e.callback,[s.value,n,t],this)}afterTickToLabelConversion(){Pl(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Pl(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,n=this.ticks.length,r=e.minRotation||0,s=e.maxRotation;let l,u,p,o=r;if(!this._isVisible()||!e.display||r>=s||n<=1||!this.isHorizontal())return void(this.labelRotation=r);const v=this._getLabelSizes(),x=v.widest.width,I=v.highest.height,T=bd(this.chart.width-x,0,this.maxWidth);l=t.offset?this.maxWidth/n:T/(n-1),x+6>l&&(l=T/(n-(t.offset?.5:1)),u=this.maxHeight-Hw(t.grid)-e.padding-WU(t.title,this.chart.options.font),p=Math.sqrt(x*x+I*I),o=G2(Math.min(Math.asin(bd((v.highest.height+6)/l,-1,1)),Math.asin(bd(u/p,-1,1))-Math.asin(bd(I/p,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Pl(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Pl(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:n,title:r,grid:s}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const u=WU(r,e.options.font);if(l?(t.width=this.maxWidth,t.height=Hw(s)+u):(t.height=this.maxHeight,t.width=Hw(s)+u),n.display&&this.ticks.length){const{first:p,last:v,widest:x,highest:I}=this._getLabelSizes(),T=2*n.padding,F=gm(this.labelRotation),j=Math.cos(F),X=Math.sin(F);l?t.height=Math.min(this.maxHeight,t.height+(n.mirror?0:X*x.width+j*I.height)+T):t.width=Math.min(this.maxWidth,t.width+(n.mirror?0:j*x.width+X*I.height)+T),this._calculatePadding(p,v,X,j)}}this._handleMargins(),l?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,n,r){const{ticks:{align:s,padding:o},position:l}=this.options,u=0!==this.labelRotation,p="top"!==l&&"x"===this.axis;if(this.isHorizontal()){const v=this.getPixelForTick(0)-this.left,x=this.right-this.getPixelForTick(this.ticks.length-1);let I=0,T=0;u?p?(I=r*t.width,T=n*e.height):(I=n*t.height,T=r*e.width):"start"===s?T=e.width:"end"===s?I=t.width:"inner"!==s&&(I=t.width/2,T=e.width/2),this.paddingLeft=Math.max((I-v+o)*this.width/(this.width-v),0),this.paddingRight=Math.max((T-x+o)*this.width/(this.width-x),0)}else{let v=e.height/2,x=t.height/2;"start"===s?(v=0,x=t.height):"end"===s&&(v=e.height,x=0),this.paddingTop=v+o,this.paddingBottom=x+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Pl(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,n=t.length;e<n;e++)pa(t[e].label)&&(t.splice(e,1),n--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let n=this.ticks;e<n.length&&(n=GU(n,e)),this._labelSizes=t=this._computeLabelSizes(n,n.length)}return t}_computeLabelSizes(t,e){const{ctx:n,_longestTextCache:r}=this,s=[],o=[];let p,v,x,I,T,F,j,X,ce,we,ye,l=0,u=0;for(p=0;p<e;++p){if(I=t[p].label,T=this._resolveTickFontOptions(p),n.font=F=T.string,j=r[F]=r[F]||{data:{},gc:[]},X=T.lineHeight,ce=we=0,pa(I)||Ll(I)){if(Ll(I))for(v=0,x=I.length;v<x;++v)ye=I[v],!pa(ye)&&!Ll(ye)&&(ce=sS(n,j.data,j.gc,ce,ye),we+=X)}else ce=sS(n,j.data,j.gc,ce,I),we=X;s.push(ce),o.push(we),l=Math.max(ce,l),u=Math.max(we,u)}!function mde(i,t){Ja(i,e=>{const n=e.gc,r=n.length/2;let s;if(r>t){for(s=0;s<r;++s)delete e.data[n[s]];n.splice(0,r)}})}(r,e);const Ae=s.indexOf(l),We=o.indexOf(u),ot=Mt=>({width:s[Mt]||0,height:o[Mt]||0});return{first:ot(0),last:ot(e-1),widest:ot(Ae),highest:ot(We),widths:s,heights:o}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return function ace(i){return bd(i,-32768,32767)}(this._alignToPixels?x0(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const n=e[t];return n.$context||(n.$context=function yde(i,t,e){return d_(i,{tick:e,index:t,type:"tick"})}(this.getContext(),t,n))}return this.$context||(this.$context=function vde(i,t){return d_(i,{scale:t,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=gm(this.labelRotation),n=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),s=this._getLabelSizes(),o=t.autoSkipPadding||0,l=s?s.widest.width+o:0,u=s?s.highest.height+o:0;return this.isHorizontal()?u*n>l*r?l/n:u/r:u*r<l*n?u/n:l/r}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,n=this.chart,r=this.options,{grid:s,position:o}=r,l=s.offset,u=this.isHorizontal(),v=this.ticks.length+(l?1:0),x=Hw(s),I=[],T=s.setContext(this.getContext()),F=T.drawBorder?T.borderWidth:0,j=F/2,X=function(Nn){return x0(n,Nn,F)};let ce,we,ye,Ae,We,ot,Mt,Xe,yt,tn,zn,Qn;if("top"===o)ce=X(this.bottom),ot=this.bottom-x,Xe=ce-j,tn=X(t.top)+j,Qn=t.bottom;else if("bottom"===o)ce=X(this.top),tn=t.top,Qn=X(t.bottom)-j,ot=ce+j,Xe=this.top+x;else if("left"===o)ce=X(this.right),We=this.right-x,Mt=ce-j,yt=X(t.left)+j,zn=t.right;else if("right"===o)ce=X(this.left),yt=t.left,zn=X(t.right)-j,We=ce+j,Mt=this.left+x;else if("x"===e){if("center"===o)ce=X((t.top+t.bottom)/2+.5);else if(Jo(o)){const Nn=Object.keys(o)[0];ce=X(this.chart.scales[Nn].getPixelForValue(o[Nn]))}tn=t.top,Qn=t.bottom,ot=ce+j,Xe=ot+x}else if("y"===e){if("center"===o)ce=X((t.left+t.right)/2);else if(Jo(o)){const Nn=Object.keys(o)[0];ce=X(this.chart.scales[Nn].getPixelForValue(o[Nn]))}We=ce-j,Mt=We-x,yt=t.left,zn=t.right}const Un=fo(r.ticks.maxTicksLimit,v),An=Math.max(1,Math.ceil(v/Un));for(we=0;we<v;we+=An){const Nn=s.setContext(this.getContext(we)),_n=Nn.lineWidth,Vn=Nn.color,Fn=Nn.borderDash||[],bn=Nn.borderDashOffset,Bn=Nn.tickWidth,Wi=Nn.tickColor,wi=Nn.tickBorderDash||[],er=Nn.tickBorderDashOffset;ye=gde(this,we,l),void 0!==ye&&(Ae=x0(n,ye,_n),u?We=Mt=yt=zn=Ae:ot=Xe=tn=Qn=Ae,I.push({tx1:We,ty1:ot,tx2:Mt,ty2:Xe,x1:yt,y1:tn,x2:zn,y2:Qn,width:_n,color:Vn,borderDash:Fn,borderDashOffset:bn,tickWidth:Bn,tickColor:Wi,tickBorderDash:wi,tickBorderDashOffset:er}))}return this._ticksLength=v,this._borderValue=ce,I}_computeLabelItems(t){const e=this.axis,n=this.options,{position:r,ticks:s}=n,o=this.isHorizontal(),l=this.ticks,{align:u,crossAlign:p,padding:v,mirror:x}=s,I=Hw(n.grid),T=I+v,F=x?-v:T,j=-gm(this.labelRotation),X=[];let ce,we,ye,Ae,We,ot,Mt,Xe,yt,tn,zn,Qn,Un="middle";if("top"===r)ot=this.bottom-F,Mt=this._getXAxisLabelAlignment();else if("bottom"===r)ot=this.top+F,Mt=this._getXAxisLabelAlignment();else if("left"===r){const Nn=this._getYAxisLabelAlignment(I);Mt=Nn.textAlign,We=Nn.x}else if("right"===r){const Nn=this._getYAxisLabelAlignment(I);Mt=Nn.textAlign,We=Nn.x}else if("x"===e){if("center"===r)ot=(t.top+t.bottom)/2+T;else if(Jo(r)){const Nn=Object.keys(r)[0];ot=this.chart.scales[Nn].getPixelForValue(r[Nn])+T}Mt=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===r)We=(t.left+t.right)/2-T;else if(Jo(r)){const Nn=Object.keys(r)[0];We=this.chart.scales[Nn].getPixelForValue(r[Nn])}Mt=this._getYAxisLabelAlignment(I).textAlign}"y"===e&&("start"===u?Un="top":"end"===u&&(Un="bottom"));const An=this._getLabelSizes();for(ce=0,we=l.length;ce<we;++ce){ye=l[ce],Ae=ye.label;const Nn=s.setContext(this.getContext(ce));Xe=this.getPixelForTick(ce)+s.labelOffset,yt=this._resolveTickFontOptions(ce),tn=yt.lineHeight,zn=Ll(Ae)?Ae.length:1;const _n=zn/2,Vn=Nn.color,Fn=Nn.textStrokeColor,bn=Nn.textStrokeWidth;let Wi,Bn=Mt;if(o?(We=Xe,"inner"===Mt&&(Bn=ce===we-1?this.options.reverse?"left":"right":0===ce?this.options.reverse?"right":"left":"center"),Qn="top"===r?"near"===p||0!==j?-zn*tn+tn/2:"center"===p?-An.highest.height/2-_n*tn+tn:tn/2-An.highest.height:"near"===p||0!==j?tn/2:"center"===p?An.highest.height/2-_n*tn:An.highest.height-zn*tn,x&&(Qn*=-1)):(ot=Xe,Qn=(1-zn)*tn/2),Nn.showLabelBackdrop){const wi=Sh(Nn.backdropPadding),er=An.heights[ce],cr=An.widths[ce];let Is=ot+Qn-wi.top,Si=We-wi.left;switch(Un){case"middle":Is-=er/2;break;case"bottom":Is-=er}switch(Mt){case"center":Si-=cr/2;break;case"right":Si-=cr}Wi={left:Si,top:Is,width:cr+wi.width,height:er+wi.height,color:Nn.backdropColor}}X.push({rotation:j,label:Ae,font:yt,color:Vn,strokeColor:Fn,strokeWidth:bn,textOffset:Qn,textAlign:Bn,textBaseline:Un,translation:[We,ot],backdrop:Wi})}return X}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-gm(this.labelRotation))return"top"===t?"left":"right";let r="center";return"start"===e.align?r="left":"end"===e.align?r="right":"inner"===e.align&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:n,mirror:r,padding:s}}=this.options,l=t+s,u=this._getLabelSizes().widest.width;let p,v;return"left"===e?r?(v=this.right+s,"near"===n?p="left":"center"===n?(p="center",v+=u/2):(p="right",v+=u)):(v=this.right-l,"near"===n?p="right":"center"===n?(p="center",v-=u/2):(p="left",v=this.left)):"right"===e?r?(v=this.left+s,"near"===n?p="right":"center"===n?(p="center",v-=u/2):(p="left",v-=u)):(v=this.left+l,"near"===n?p="left":"center"===n?(p="center",v+=u/2):(p="right",v=this.right)):p="right",{textAlign:p,x:v}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:n,top:r,width:s,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(n,r,s,o),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const r=this.ticks.findIndex(s=>s.value===t);return r>=0?e.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const e=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let s,o;const l=(u,p,v)=>{!v.width||!v.color||(n.save(),n.lineWidth=v.width,n.strokeStyle=v.color,n.setLineDash(v.borderDash||[]),n.lineDashOffset=v.borderDashOffset,n.beginPath(),n.moveTo(u.x,u.y),n.lineTo(p.x,p.y),n.stroke(),n.restore())};if(e.display)for(s=0,o=r.length;s<o;++s){const u=r[s];e.drawOnChartArea&&l({x:u.x1,y:u.y1},{x:u.x2,y:u.y2},u),e.drawTicks&&l({x:u.tx1,y:u.ty1},{x:u.tx2,y:u.ty2},{color:u.tickColor,width:u.tickWidth,borderDash:u.tickBorderDash,borderDashOffset:u.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{grid:n}}=this,r=n.setContext(this.getContext()),s=n.drawBorder?r.borderWidth:0;if(!s)return;const o=n.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let u,p,v,x;this.isHorizontal()?(u=x0(t,this.left,s)-s/2,p=x0(t,this.right,o)+o/2,v=x=l):(v=x0(t,this.top,s)-s/2,x=x0(t,this.bottom,o)+o/2,u=p=l),e.save(),e.lineWidth=r.borderWidth,e.strokeStyle=r.borderColor,e.beginPath(),e.moveTo(u,v),e.lineTo(p,x),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const n=this.ctx,r=this._computeLabelArea();r&&oS(n,r);const s=this._labelItems||(this._labelItems=this._computeLabelItems(t));let o,l;for(o=0,l=s.length;o<l;++o){const u=s[o],p=u.font,v=u.label;u.backdrop&&(n.fillStyle=u.backdrop.color,n.fillRect(u.backdrop.left,u.backdrop.top,u.backdrop.width,u.backdrop.height)),w0(n,v,0,u.textOffset,p,u)}r&&aS(n)}drawTitle(){const{ctx:t,options:{position:e,title:n,reverse:r}}=this;if(!n.display)return;const s=Ku(n.font),o=Sh(n.padding),l=n.align;let u=s.lineHeight/2;"bottom"===e||"center"===e||Jo(e)?(u+=o.bottom,Ll(n.text)&&(u+=s.lineHeight*(n.text.length-1))):u+=o.top;const{titleX:p,titleY:v,maxWidth:x,rotation:I}=function bde(i,t,e,n){const{top:r,left:s,bottom:o,right:l,chart:u}=i,{chartArea:p,scales:v}=u;let I,T,F,x=0;const j=o-r,X=l-s;if(i.isHorizontal()){if(T=Ih(n,s,l),Jo(e)){const ce=Object.keys(e)[0];F=v[ce].getPixelForValue(e[ce])+j-t}else F="center"===e?(p.bottom+p.top)/2+j-t:HU(i,e,t);I=l-s}else{if(Jo(e)){const ce=Object.keys(e)[0];T=v[ce].getPixelForValue(e[ce])-X+t}else T="center"===e?(p.left+p.right)/2-X+t:HU(i,e,t);F=Ih(n,o,r),x="left"===e?-qc:qc}return{titleX:T,titleY:F,maxWidth:I,rotation:x}}(this,u,e,l);w0(t,n.text,0,0,s,{color:n.color,maxWidth:x,rotation:I,textAlign:_de(l,e,r),textBaseline:"middle",translation:[p,v]})}draw(t){!this._isVisible()||(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,n=fo(t.grid&&t.grid.z,-1);return this._isVisible()&&this.draw===T0.prototype.draw?[{z:n,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:n+1,draw:()=>{this.drawBorder()}},{z:e,draw:r=>{this.drawLabels(r)}}]:[{z:e,draw:r=>{this.draw(r)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let s,o;for(s=0,o=e.length;s<o;++s){const l=e[s];l[n]===this.id&&(!t||l.type===t)&&r.push(l)}return r}_resolveTickFontOptions(t){return Ku(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class fS{constructor(t,e,n){this.type=t,this.scope=e,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let n;(function wde(i){return"id"in i&&"defaults"in i})(e)&&(n=this.register(e));const r=this.items,s=t.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+t);return s in r||(r[s]=t,function Cde(i,t,e){const n=Tw(Object.create(null),[e?na.get(e):{},na.get(t),i.defaults]);na.set(t,n),i.defaultRoutes&&function xde(i,t){Object.keys(t).forEach(e=>{const n=e.split("."),r=n.pop(),s=[i].concat(n).join("."),o=t[e].split("."),l=o.pop(),u=o.join(".");na.route(s,r,u,l)})}(t,i.defaultRoutes),i.descriptors&&na.describe(t,i.descriptors)}(t,o,n),this.override&&na.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const e=this.items,n=t.id,r=this.scope;n in e&&delete e[n],r&&n in na[r]&&(delete na[r][n],this.override&&delete C0[n])}}var lv=new class Ade{constructor(){this.controllers=new fS(av,"datasets",!0),this.elements=new fS(mm,"elements"),this.plugins=new fS(Object,"plugins"),this.scales=new fS(T0,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,n){[...e].forEach(r=>{const s=n||this._getRegistryForType(r);n||s.isForType(r)||s===this.plugins&&r.id?this._exec(t,s,r):Ja(r,o=>{const l=n||this._getRegistryForType(o);this._exec(t,l,o)})})}_exec(t,e,n){const r=H2(t);Pl(n["before"+r],[],n),e[t](n),Pl(n["after"+r],[],n)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const n=this._typedRegistries[e];if(n.isForType(t))return n}return this.plugins}_get(t,e,n){const r=e.get(t);if(void 0===r)throw new Error('"'+t+'" is not a registered '+n+".");return r}},Ide=Object.freeze({__proto__:null,BarController:ede,BubbleController:tde,DoughnutController:VU,LineController:ide,PolarAreaController:rde,PieController:sde,RadarController:ode,ScatterController:(()=>{class i extends av{update(e){const n=this._cachedMeta,{data:r=[]}=n,s=this.chart._animationsDisabled;let{start:o,count:l}=W4(n,r,s);if(this._drawStart=o,this._drawCount=l,j4(n)&&(o=0,l=r.length),this.options.showLine){const{dataset:u,_dataset:p}=n;u._chart=this.chart,u._datasetIndex=this.index,u._decimated=!!p._decimated,u.points=r;const v=this.resolveDatasetElementOptions(e);v.segment=this.options.segment,this.updateElement(u,void 0,{animated:!s,options:v},e)}this.updateElements(r,o,l,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=lv.getElement("line")),super.addElements()}updateElements(e,n,r,s){const o="reset"===s,{iScale:l,vScale:u,_stacked:p,_dataset:v}=this._cachedMeta,x=this.resolveDataElementOptions(n,s),I=this.getSharedOptions(x),T=this.includeOptions(s,I),F=l.axis,j=u.axis,{spanGaps:X,segment:ce}=this.options,we=uC(X)?X:Number.POSITIVE_INFINITY,ye=this.chart._animationsDisabled||o||"none"===s;let Ae=n>0&&this.getParsed(n-1);for(let We=n;We<n+r;++We){const ot=e[We],Mt=this.getParsed(We),Xe=ye?ot:{},yt=pa(Mt[j]),tn=Xe[F]=l.getPixelForValue(Mt[F],We),zn=Xe[j]=o||yt?u.getBasePixel():u.getPixelForValue(p?this.applyStack(u,Mt,p):Mt[j],We);Xe.skip=isNaN(tn)||isNaN(zn)||yt,Xe.stop=We>0&&Math.abs(Mt[F]-Ae[F])>we,ce&&(Xe.parsed=Mt,Xe.raw=v.data[We]),T&&(Xe.options=I||this.resolveDataElementOptions(We,ot.active?"active":s)),ye||this.updateElement(ot,We,Xe,s),Ae=Mt}this.updateSharedOptions(I,s,x)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let u=0;for(let p=n.length-1;p>=0;--p)u=Math.max(u,n[p].size(this.resolveDataElementOptions(p))/2);return u>0&&u}const r=e.dataset,s=r.options&&r.options.borderWidth||0;if(!n.length)return s;const o=n[0].size(this.resolveDataElementOptions(0)),l=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(s,o,l)/2}}return i.id="scatter",i.defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1},i.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:()=>"",label:t=>"("+t.label+", "+t.formattedValue+")"}}},scales:{x:{type:"linear"},y:{type:"linear"}}},i})()});function M0(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var Sde={_date:(()=>{class i{constructor(e){this.options=e||{}}init(e){}formats(){return M0()}parse(e,n){return M0()}format(e,n){return M0()}add(e,n,r){return M0()}diff(e,n,r){return M0()}startOf(e,n,r){return M0()}endOf(e,n){return M0()}}return i.override=function(t){Object.assign(i.prototype,t)},i})()};function Ede(i,t,e,n){const{controller:r,data:s,_sorted:o}=i,l=r._cachedMeta.iScale;if(l&&t===l.axis&&"r"!==t&&o&&s.length){const u=l._reversePixels?lce:cy;if(!n)return u(s,t,e);if(r._sharedOptions){const p=s[0],v="function"==typeof p.getRange&&p.getRange(t);if(v){const x=u(s,t,e-v),I=u(s,t,e+v);return{lo:x.lo,hi:I.hi}}}}return{lo:0,hi:s.length-1}}function Gw(i,t,e,n,r){const s=i.getSortedVisibleDatasetMetas(),o=e[t];for(let l=0,u=s.length;l<u;++l){const{index:p,data:v}=s[l],{lo:x,hi:I}=Ede(s[l],t,o,r);for(let T=x;T<=I;++T){const F=v[T];F.skip||n(F,p,T)}}}function dL(i,t,e,n,r){const s=[];return!r&&!i.isPointInArea(t)||Gw(i,e,t,function(l,u,p){!r&&!Nw(l,i.chartArea,0)||l.inRange(t.x,t.y,n)&&s.push({element:l,datasetIndex:u,index:p})},!0),s}function hL(i,t,e,n,r,s){return s||i.isPointInArea(t)?"r"!==e||n?function Dde(i,t,e,n,r,s){let o=[];const l=function Tde(i){const t=-1!==i.indexOf("x"),e=-1!==i.indexOf("y");return function(n,r){const s=t?Math.abs(n.x-r.x):0,o=e?Math.abs(n.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}(e);let u=Number.POSITIVE_INFINITY;return Gw(i,e,t,function p(v,x,I){const T=v.inRange(t.x,t.y,r);if(n&&!T)return;const F=v.getCenterPoint(r);if(!s&&!i.isPointInArea(F)&&!T)return;const X=l(t,F);X<u?(o=[{element:v,datasetIndex:x,index:I}],u=X):X===u&&o.push({element:v,datasetIndex:x,index:I})}),o}(i,t,e,n,r,s):function Mde(i,t,e,n){let r=[];return Gw(i,e,t,function s(o,l,u){const{startAngle:p,endAngle:v}=o.getProps(["startAngle","endAngle"],n),{angle:x}=B4(o,{x:t.x,y:t.y});Pw(x,p,v)&&r.push({element:o,datasetIndex:l,index:u})}),r}(i,t,e,r):[]}function jU(i,t,e,n,r){const s=[],o="x"===e?"inXRange":"inYRange";let l=!1;return Gw(i,e,t,(u,p,v)=>{u[o](t[e],r)&&(s.push({element:u,datasetIndex:p,index:v}),l=l||u.inRange(t.x,t.y,r))}),n&&!l?[]:s}var Lde={evaluateInteractionItems:Gw,modes:{index(i,t,e,n){const r=S0(t,i),s=e.axis||"x",o=e.includeInvisible||!1,l=e.intersect?dL(i,r,s,n,o):hL(i,r,s,!1,n,o),u=[];return l.length?(i.getSortedVisibleDatasetMetas().forEach(p=>{const v=l[0].index,x=p.data[v];x&&!x.skip&&u.push({element:x,datasetIndex:p.index,index:v})}),u):[]},dataset(i,t,e,n){const r=S0(t,i),s=e.axis||"xy",o=e.includeInvisible||!1;let l=e.intersect?dL(i,r,s,n,o):hL(i,r,s,!1,n,o);if(l.length>0){const u=l[0].datasetIndex,p=i.getDatasetMeta(u).data;l=[];for(let v=0;v<p.length;++v)l.push({element:p[v],datasetIndex:u,index:v})}return l},point:(i,t,e,n)=>dL(i,S0(t,i),e.axis||"xy",n,e.includeInvisible||!1),nearest:(i,t,e,n)=>hL(i,S0(t,i),e.axis||"xy",e.intersect,n,e.includeInvisible||!1),x:(i,t,e,n)=>jU(i,S0(t,i),"x",e.intersect,n),y:(i,t,e,n)=>jU(i,S0(t,i),"y",e.intersect,n)}};const $U=["left","top","right","bottom"];function Ww(i,t){return i.filter(e=>e.pos===t)}function qU(i,t){return i.filter(e=>-1===$U.indexOf(e.pos)&&e.box.axis===t)}function jw(i,t){return i.sort((e,n)=>{const r=t?n:e,s=t?e:n;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function XU(i,t,e,n){return Math.max(i[e],t[e])+Math.max(i[n],t[n])}function YU(i,t){i.top=Math.max(i.top,t.top),i.left=Math.max(i.left,t.left),i.bottom=Math.max(i.bottom,t.bottom),i.right=Math.max(i.right,t.right)}function Fde(i,t,e,n){const{pos:r,box:s}=e,o=i.maxPadding;if(!Jo(r)){e.size&&(i[r]-=e.size);const x=n[e.stack]||{size:0,count:1};x.size=Math.max(x.size,e.horizontal?s.height:s.width),e.size=x.size/x.count,i[r]+=e.size}s.getPadding&&YU(o,s.getPadding());const l=Math.max(0,t.outerWidth-XU(o,i,"left","right")),u=Math.max(0,t.outerHeight-XU(o,i,"top","bottom")),p=l!==i.w,v=u!==i.h;return i.w=l,i.h=u,e.horizontal?{same:p,other:v}:{same:v,other:p}}function Bde(i,t){const e=t.maxPadding;return function n(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(t[o],e[o])}),s}(i?["left","right"]:["top","bottom"])}function $w(i,t,e,n){const r=[];let s,o,l,u,p,v;for(s=0,o=i.length,p=0;s<o;++s){l=i[s],u=l.box,u.update(l.width||t.w,l.height||t.h,Bde(l.horizontal,t));const{same:x,other:I}=Fde(t,e,l,n);p|=x&&r.length,v=v||I,u.fullSize||r.push(l)}return p&&$w(r,t,e,n)||v}function pS(i,t,e,n,r){i.top=e,i.left=t,i.right=t+n,i.bottom=e+r,i.width=n,i.height=r}function KU(i,t,e,n){const r=e.padding;let{x:s,y:o}=t;for(const l of i){const u=l.box,p=n[l.stack]||{count:1,placed:0,weight:1},v=l.stackWeight/p.weight||1;if(l.horizontal){const x=t.w*v,I=p.size||u.height;vg(p.start)&&(o=p.start),u.fullSize?pS(u,r.left,o,e.outerWidth-r.right-r.left,I):pS(u,t.left+p.placed,o,x,I),p.start=o,p.placed+=x,o=u.bottom}else{const x=t.h*v,I=p.size||u.width;vg(p.start)&&(s=p.start),u.fullSize?pS(u,s,r.top,I,e.outerHeight-r.bottom-r.top):pS(u,s,t.top+p.placed,I,x),p.start=s,p.placed+=x,s=u.right}}t.x=s,t.y=o}na.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var Eh={addBox(i,t){i.boxes||(i.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},i.boxes.push(t)},removeBox(i,t){const e=i.boxes?i.boxes.indexOf(t):-1;-1!==e&&i.boxes.splice(e,1)},configure(i,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(i,t,e,n){if(!i)return;const r=Sh(i.options.layout.padding),s=Math.max(t-r.width,0),o=Math.max(e-r.height,0),l=function Ode(i){const t=function Pde(i){const t=[];let e,n,r,s,o,l;for(e=0,n=(i||[]).length;e<n;++e)r=i[e],({position:s,options:{stack:o,stackWeight:l=1}}=r),t.push({index:e,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:l});return t}(i),e=jw(t.filter(p=>p.box.fullSize),!0),n=jw(Ww(t,"left"),!0),r=jw(Ww(t,"right")),s=jw(Ww(t,"top"),!0),o=jw(Ww(t,"bottom")),l=qU(t,"x"),u=qU(t,"y");return{fullSize:e,leftAndTop:n.concat(s),rightAndBottom:r.concat(u).concat(o).concat(l),chartArea:Ww(t,"chartArea"),vertical:n.concat(r).concat(u),horizontal:s.concat(o).concat(l)}}(i.boxes),u=l.vertical,p=l.horizontal;Ja(i.boxes,j=>{"function"==typeof j.beforeLayout&&j.beforeLayout()});const v=u.reduce((j,X)=>X.box.options&&!1===X.box.options.display?j:j+1,0)||1,x=Object.freeze({outerWidth:t,outerHeight:e,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/v,hBoxMaxHeight:o/2}),I=Object.assign({},r);YU(I,Sh(n));const T=Object.assign({maxPadding:I,w:s,h:o,x:r.left,y:r.top},r),F=function kde(i,t){const e=function Rde(i){const t={};for(const e of i){const{stack:n,pos:r,stackWeight:s}=e;if(!n||!$U.includes(r))continue;const o=t[n]||(t[n]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return t}(i),{vBoxMaxWidth:n,hBoxMaxHeight:r}=t;let s,o,l;for(s=0,o=i.length;s<o;++s){l=i[s];const{fullSize:u}=l.box,p=e[l.stack],v=p&&l.stackWeight/p.weight;l.horizontal?(l.width=v?v*n:u&&t.availableWidth,l.height=r):(l.width=n,l.height=v?v*r:u&&t.availableHeight)}return e}(u.concat(p),x);$w(l.fullSize,T,x,F),$w(u,T,x,F),$w(p,T,x,F)&&$w(u,T,x,F),function Nde(i){const t=i.maxPadding;function e(n){const r=Math.max(t[n]-i[n],0);return i[n]+=r,r}i.y+=e("top"),i.x+=e("left"),e("right"),e("bottom")}(T),KU(l.leftAndTop,T,x,F),T.x+=T.w,T.y+=T.h,KU(l.rightAndBottom,T,x,F),i.chartArea={left:T.left,top:T.top,right:T.left+T.w,bottom:T.top+T.h,height:T.h,width:T.w},Ja(l.chartArea,j=>{const X=j.box;Object.assign(X,i.chartArea),X.update(T.w,T.h,{left:0,top:0,right:0,bottom:0})})}};class ZU{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,n){}removeEventListener(t,e,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,n,r){return e=Math.max(0,e||t.width),n=n||t.height,{width:e,height:Math.max(0,r?Math.floor(e/r):n)}}isAttached(t){return!0}updateConfig(t){}}class zde extends ZU{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const gS="$chartjs",Vde={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},QU=i=>null===i||""===i,JU=!!gue&&{passive:!0};function Gde(i,t,e){i.canvas.removeEventListener(t,e,JU)}function mS(i,t){for(const e of i)if(e===t||e.contains(t))return!0}function jde(i,t,e){const n=i.canvas,r=new MutationObserver(s=>{let o=!1;for(const l of s)o=o||mS(l.addedNodes,n),o=o&&!mS(l.removedNodes,n);o&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}function $de(i,t,e){const n=i.canvas,r=new MutationObserver(s=>{let o=!1;for(const l of s)o=o||mS(l.removedNodes,n),o=o&&!mS(l.addedNodes,n);o&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}const qw=new Map;let eH=0;function tH(){const i=window.devicePixelRatio;i!==eH&&(eH=i,qw.forEach((t,e)=>{e.currentDevicePixelRatio!==i&&t()}))}function Yde(i,t,e){const n=i.canvas,r=n&&oL(n);if(!r)return;const s=G4((l,u)=>{const p=r.clientWidth;e(l,u),p<r.clientWidth&&e()},window),o=new ResizeObserver(l=>{const u=l[0],p=u.contentRect.width,v=u.contentRect.height;0===p&&0===v||s(p,v)});return o.observe(r),function qde(i,t){qw.size||window.addEventListener("resize",tH),qw.set(i,t)}(i,s),o}function fL(i,t,e){e&&e.disconnect(),"resize"===t&&function Xde(i){qw.delete(i),qw.size||window.removeEventListener("resize",tH)}(i)}function Kde(i,t,e){const n=i.canvas,r=G4(s=>{null!==i.ctx&&e(function Wde(i,t){const e=Vde[i.type]||i.type,{x:n,y:r}=S0(i,t);return{type:e,chart:t,native:i,x:void 0!==n?n:null,y:void 0!==r?r:null}}(s,i))},i,s=>{const o=s[0];return[o,o.offsetX,o.offsetY]});return function Hde(i,t,e){i.addEventListener(t,e,JU)}(n,t,r),r}class Zde extends ZU{acquireContext(t,e){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(function Ude(i,t){const e=i.style,n=i.getAttribute("height"),r=i.getAttribute("width");if(i[gS]={initial:{height:n,width:r,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",QU(r)){const s=vU(i,"width");void 0!==s&&(i.width=s)}if(QU(n))if(""===i.style.height)i.height=i.width/(t||2);else{const s=vU(i,"height");void 0!==s&&(i.height=s)}}(t,e),n):null}releaseContext(t){const e=t.canvas;if(!e[gS])return!1;const n=e[gS].initial;["height","width"].forEach(s=>{const o=n[s];pa(o)?e.removeAttribute(s):e.setAttribute(s,o)});const r=n.style||{};return Object.keys(r).forEach(s=>{e.style[s]=r[s]}),e.width=e.width,delete e[gS],!0}addEventListener(t,e,n){this.removeEventListener(t,e),(t.$proxies||(t.$proxies={}))[e]=({attach:jde,detach:$de,resize:Yde}[e]||Kde)(t,e,n)}removeEventListener(t,e){const n=t.$proxies||(t.$proxies={}),r=n[e];r&&(({attach:fL,detach:fL,resize:fL}[e]||Gde)(t,e,r),n[e]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,n,r){return function pue(i,t,e,n){const r=uS(i),s=I0(r,"margin"),o=cS(r.maxWidth,i,"clientWidth")||J1,l=cS(r.maxHeight,i,"clientHeight")||J1,u=function fue(i,t,e){let n,r;if(void 0===t||void 0===e){const s=oL(i);if(s){const o=s.getBoundingClientRect(),l=uS(s),u=I0(l,"border","width"),p=I0(l,"padding");t=o.width-p.width-u.width,e=o.height-p.height-u.height,n=cS(l.maxWidth,s,"clientWidth"),r=cS(l.maxHeight,s,"clientHeight")}else t=i.clientWidth,e=i.clientHeight}return{width:t,height:e,maxWidth:n||J1,maxHeight:r||J1}}(i,t,e);let{width:p,height:v}=u;if("content-box"===r.boxSizing){const x=I0(r,"border","width"),I=I0(r,"padding");p-=I.width+x.width,v-=I.height+x.height}return p=Math.max(0,p-s.width),v=Math.max(0,n?Math.floor(p/n):v-s.height),p=aL(Math.min(p,o,u.maxWidth)),v=aL(Math.min(v,l,u.maxHeight)),p&&!v&&(v=aL(p/2)),{width:p,height:v}}(t,e,n,r)}isAttached(t){const e=oL(t);return!(!e||!e.isConnected)}}class Jde{constructor(){this._init=[]}notify(t,e,n,r){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const s=r?this._descriptors(t).filter(r):this._descriptors(t),o=this._notify(s,t,e,n);return"afterDestroy"===e&&(this._notify(s,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,e,n,r){r=r||{};for(const s of t){const o=s.plugin;if(!1===Pl(o[n],[e,r,s.options],o)&&r.cancelable)return!1}return!0}invalidate(){pa(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const n=t&&t.config,r=fo(n.options&&n.options.plugins,{}),s=function ehe(i){const t={},e=[],n=Object.keys(lv.plugins.items);for(let s=0;s<n.length;s++)e.push(lv.getPlugin(n[s]));const r=i.plugins||[];for(let s=0;s<r.length;s++){const o=r[s];-1===e.indexOf(o)&&(e.push(o),t[o.id]=!0)}return{plugins:e,localIds:t}}(n);return!1!==r||e?function nhe(i,{plugins:t,localIds:e},n,r){const s=[],o=i.getContext();for(const l of t){const u=l.id,p=the(n[u],r);null!==p&&s.push({plugin:l,options:ihe(i.config,{plugin:l,local:e[u]},p,o)})}return s}(t,s,r,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],n=this._cache,r=(s,o)=>s.filter(l=>!o.some(u=>l.plugin.id===u.plugin.id));this._notify(r(e,n),t,"stop"),this._notify(r(n,e),t,"start")}}function the(i,t){return t||!1!==i?!0===i?{}:i:null}function ihe(i,{plugin:t,local:e},n,r){const s=i.pluginScopeKeys(t),o=i.getOptionScopes(n,s);return e&&t.defaults&&o.push(t.defaults),i.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function pL(i,t){return((t.datasets||{})[i]||{}).indexAxis||t.indexAxis||(na.datasets[i]||{}).indexAxis||"x"}function gL(i,t){return"x"===i||"y"===i?i:t.axis||function ohe(i){return"top"===i||"bottom"===i?"x":"left"===i||"right"===i?"y":void 0}(t.position)||i.charAt(0).toLowerCase()}function nH(i){const t=i.options||(i.options={});t.plugins=fo(t.plugins,{}),t.scales=function ahe(i,t){const e=C0[i.type]||{scales:{}},n=t.scales||{},r=pL(i.type,t),s=Object.create(null),o=Object.create(null);return Object.keys(n).forEach(l=>{const u=n[l];if(!Jo(u))return console.error(`Invalid scale configuration for scale: ${l}`);if(u._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${l}`);const p=gL(l,u),v=function she(i,t){return i===t?"_index_":"_value_"}(p,r),x=e.scales||{};s[p]=s[p]||l,o[l]=Mw(Object.create(null),[{axis:p},u,x[p],x[v]])}),i.data.datasets.forEach(l=>{const u=l.type||i.type,p=l.indexAxis||pL(u,t),x=(C0[u]||{}).scales||{};Object.keys(x).forEach(I=>{const T=function rhe(i,t){let e=i;return"_index_"===i?e=t:"_value_"===i&&(e="x"===t?"y":"x"),e}(I,p),F=l[T+"AxisID"]||s[T]||T;o[F]=o[F]||Object.create(null),Mw(o[F],[{axis:T},n[F],x[I]])})}),Object.keys(o).forEach(l=>{const u=o[l];Mw(u,[na.scales[u.type],na.scale])}),o}(i,t)}function iH(i){return(i=i||{}).datasets=i.datasets||[],i.labels=i.labels||[],i}const rH=new Map,sH=new Set;function vS(i,t){let e=rH.get(i);return e||(e=t(),rH.set(i,e),sH.add(e)),e}const Xw=(i,t,e)=>{const n=a_(t,e);void 0!==n&&i.add(n)};class che{constructor(t){this._config=function lhe(i){return(i=i||{}).data=iH(i.data),nH(i),i}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=iH(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),nH(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return vS(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return vS(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return vS(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id;return vS(`${this.type}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const n=this._scopeCache;let r=n.get(t);return(!r||e)&&(r=new Map,n.set(t,r)),r}getOptionScopes(t,e,n){const{options:r,type:s}=this,o=this._cachedScopes(t,n),l=o.get(e);if(l)return l;const u=new Set;e.forEach(v=>{t&&(u.add(t),v.forEach(x=>Xw(u,t,x))),v.forEach(x=>Xw(u,r,x)),v.forEach(x=>Xw(u,C0[s]||{},x)),v.forEach(x=>Xw(u,na,x)),v.forEach(x=>Xw(u,J2,x))});const p=Array.from(u);return 0===p.length&&p.push(Object.create(null)),sH.has(e)&&o.set(e,p),p}chartOptionScopes(){const{options:t,type:e}=this;return[t,C0[e]||{},na.datasets[e]||{},{type:e},na,J2]}resolveNamedOptions(t,e,n,r=[""]){const s={$shared:!0},{resolver:o,subPrefixes:l}=oH(this._resolverCache,t,r);let u=o;(function dhe(i,t){const{isScriptable:e,isIndexable:n}=aU(i);for(const r of t){const s=e(r),o=n(r),l=(o||s)&&i[r];if(s&&(l_(l)||uhe(l))||o&&Ll(l))return!0}return!1})(o,e)&&(s.$shared=!1,u=hC(o,n=l_(n)?n():n,this.createResolver(t,n,l)));for(const p of e)s[p]=u[p];return s}createResolver(t,e,n=[""],r){const{resolver:s}=oH(this._resolverCache,t,n);return Jo(e)?hC(s,e,void 0,r):s}}function oH(i,t,e){let n=i.get(t);n||(n=new Map,i.set(t,n));const r=e.join();let s=n.get(r);return s||(s={resolver:iL(t,e),subPrefixes:e.filter(l=>!l.toLowerCase().includes("hover"))},n.set(r,s)),s}const uhe=i=>Jo(i)&&Object.getOwnPropertyNames(i).reduce((t,e)=>t||l_(i[e]),!1),fhe=["top","bottom","left","right","chartArea"];function aH(i,t){return"top"===i||"bottom"===i||-1===fhe.indexOf(i)&&"x"===t}function lH(i,t){return function(e,n){return e[i]===n[i]?e[t]-n[t]:e[i]-n[i]}}function cH(i){const t=i.chart,e=t.options.animation;t.notifyPlugins("afterRender"),Pl(e&&e.onComplete,[i],t)}function phe(i){const t=i.chart,e=t.options.animation;Pl(e&&e.onProgress,[i],t)}function uH(i){return gU()&&"string"==typeof i?i=document.getElementById(i):i&&i.length&&(i=i[0]),i&&i.canvas&&(i=i.canvas),i}const yS={},dH=i=>{const t=uH(i);return Object.values(yS).filter(e=>e.canvas===t).pop()};function ghe(i,t,e){const n=Object.keys(i);for(const r of n){const s=+r;if(s>=t){const o=i[r];delete i[r],(e>0||s>t)&&(i[s+e]=o)}}}class _S{constructor(t,e){const n=this.config=new che(e),r=uH(t),s=dH(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function Qde(i){return!gU()||typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas?zde:Zde}(r)),this.platform.updateConfig(n);const l=this.platform.acquireContext(r,o.aspectRatio),u=l&&l.canvas,p=u&&u.height,v=u&&u.width;this.id=Yle(),this.ctx=l,this.canvas=u,this.width=v,this.height=p,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Jde,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function dce(i,t){let e;return function(...n){return t?(clearTimeout(e),e=setTimeout(i,t,n)):i.apply(this,n),t}}(x=>this.update(x),o.resizeDelay||0),this._dataChanges=[],yS[this.id]=this,l&&u?(dy.listen(this,"complete",cH),dy.listen(this,"progress",phe),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:n,height:r,_aspectRatio:s}=this;return pa(t)?e&&s?s:r?n/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():mU(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return rU(this.canvas,this.ctx),this}stop(){return dy.stop(this),this}resize(t,e){dy.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const n=this.options,o=this.platform.getMaximumSize(this.canvas,t,e,n.maintainAspectRatio&&this.aspectRatio),l=n.devicePixelRatio||this.platform.getDevicePixelRatio(),u=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,mU(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),Pl(n.onResize,[this,o],this),this.attached&&this._doResize(u)&&this.render())}ensureScalesHaveIDs(){Ja(this.options.scales||{},(n,r)=>{n.id=r})}buildOrUpdateScales(){const t=this.options,e=t.scales,n=this.scales,r=Object.keys(n).reduce((o,l)=>(o[l]=!1,o),{});let s=[];e&&(s=s.concat(Object.keys(e).map(o=>{const l=e[o],u=gL(o,l),p="r"===u,v="x"===u;return{options:l,dposition:p?"chartArea":v?"bottom":"left",dtype:p?"radialLinear":v?"category":"linear"}}))),Ja(s,o=>{const l=o.options,u=l.id,p=gL(u,l),v=fo(l.type,o.dtype);(void 0===l.position||aH(l.position,p)!==aH(o.dposition))&&(l.position=o.dposition),r[u]=!0;let x=null;u in n&&n[u].type===v?x=n[u]:(x=new(lv.getScale(v))({id:u,type:v,ctx:this.ctx,chart:this}),n[x.id]=x),x.init(l,t)}),Ja(r,(o,l)=>{o||delete n[l]}),Ja(n,o=>{Eh.configure(this,o,o.options),Eh.addBox(this,o)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,n=t.length;if(t.sort((r,s)=>r.index-s.index),n>e){for(let r=e;r<n;++r)this._destroyDatasetMeta(r);t.splice(e,n-e)}this._sortedMetasets=t.slice(0).sort(lH("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((n,r)=>{0===e.filter(s=>s===n._dataset).length&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=e.length;n<r;n++){const s=e[n];let o=this.getDatasetMeta(n);const l=s.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(n),o=this.getDatasetMeta(n)),o.type=l,o.indexAxis=s.indexAxis||pL(l,this.options),o.order=s.order||0,o.index=n,o.label=""+s.label,o.visible=this.isDatasetVisible(n),o.controller)o.controller.updateIndex(n),o.controller.linkScales();else{const u=lv.getController(l),{datasetElementType:p,dataElementType:v}=na.datasets[l];Object.assign(u.prototype,{dataElementType:lv.getElement(v),datasetElementType:p&&lv.getElement(p)}),o.controller=new u(this,n),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){Ja(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const n=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let p=0,v=this.data.datasets.length;p<v;p++){const{controller:x}=this.getDatasetMeta(p),I=!r&&-1===s.indexOf(x);x.buildOrUpdateElements(I),o=Math.max(+x.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),r||Ja(s,p=>{p.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(lH("z","_idx"));const{_active:l,_lastEvent:u}=this;u?this._eventHandler(u,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){Ja(this.scales,t=>{Eh.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),n=new Set(t.events);(!R4(e,n)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:s}of e)ghe(t,r,"_removeElements"===n?-s:s)}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,n=s=>new Set(t.filter(o=>o[0]===s).map((o,l)=>l+","+o.splice(1).join(","))),r=n(0);for(let s=1;s<e;s++)if(!R4(r,n(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Eh.update(this,this.width,this.height,t);const e=this.chartArea,n=e.width<=0||e.height<=0;this._layers=[],Ja(this.boxes,r=>{n&&"chartArea"===r.position||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let e=0,n=this.data.datasets.length;e<n;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,n=this.data.datasets.length;e<n;++e)this._updateDataset(e,l_(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const n=this.getDatasetMeta(t),r={meta:n,index:t,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(n.controller._update(e),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(dy.has(this)?this.attached&&!dy.running(this)&&dy.start(this):(this.draw(),cH({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:n,height:r}=this._resizeBeforeDraw;this._resize(n,r),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,n=[];let r,s;for(r=0,s=e.length;r<s;++r){const o=e[r];(!t||o.visible)&&n.push(o)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,n=t._clip,r=!n.disabled,s=this.chartArea,o={meta:t,index:t.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",o)&&(r&&oS(e,{left:!1===n.left?0:s.left-n.left,right:!1===n.right?this.width:s.right+n.right,top:!1===n.top?0:s.top-n.top,bottom:!1===n.bottom?this.height:s.bottom+n.bottom}),t.controller.draw(),r&&aS(e),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(t){return Nw(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,n,r){const s=Lde.modes[e];return"function"==typeof s?s(this,t,n,r):[]}getDatasetMeta(t){const e=this.data.datasets[t],n=this._metasets;let r=n.filter(s=>s&&s._dataset===e).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=d_(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const n=this.getDatasetMeta(t);return"boolean"==typeof n.hidden?!n.hidden:!e.hidden}setDatasetVisibility(t,e){this.getDatasetMeta(t).hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,n){const r=n?"show":"hide",s=this.getDatasetMeta(t),o=s.controller._resolveAnimations(void 0,r);vg(e)?(s.data[e].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),o.update(s,{visible:n}),this.update(l=>l.datasetIndex===t?r:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),dy.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),rU(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete yS[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,n=(s,o)=>{e.addEventListener(this,s,o),t[s]=o},r=(s,o,l)=>{s.offsetX=o,s.offsetY=l,this._eventHandler(s)};Ja(this.options.events,s=>n(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,n=(u,p)=>{e.addEventListener(this,u,p),t[u]=p},r=(u,p)=>{t[u]&&(e.removeEventListener(this,u,p),delete t[u])},s=(u,p)=>{this.canvas&&this.resize(u,p)};let o;const l=()=>{r("attach",l),this.attached=!0,this.resize(),n("resize",s),n("detach",o)};o=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),n("attach",l)},e.isAttached(this.canvas)?l():o()}unbindEvents(){Ja(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},Ja(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,n){const r=n?"set":"remove";let s,o,l,u;for("dataset"===e&&(s=this.getDatasetMeta(t[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),l=0,u=t.length;l<u;++l){o=t[l];const p=o&&this.getDatasetMeta(o.datasetIndex).controller;p&&p[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],n=t.map(({datasetIndex:s,index:o})=>{const l=this.getDatasetMeta(s);if(!l)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:l.data[o],index:o}});!Z1(n,e)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,e))}notifyPlugins(t,e,n){return this._plugins.notify(this,t,e,n)}_updateHoverStyles(t,e,n){const r=this.options.hover,s=(u,p)=>u.filter(v=>!p.some(x=>v.datasetIndex===x.datasetIndex&&v.index===x.index)),o=s(e,t),l=n?t:s(t,e);o.length&&this.updateHoverStyle(o,r.mode,!1),l.length&&r.mode&&this.updateHoverStyle(l,r.mode,!0)}_eventHandler(t,e){const n={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},r=o=>(o.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",n,r))return;const s=this._handleEvent(t,e,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(s||n.changed)&&this.render(),this}_handleEvent(t,e,n){const{_active:r=[],options:s}=this,l=this._getActiveElements(t,r,n,e),u=function tce(i){return"mouseup"===i.type||"click"===i.type||"contextmenu"===i.type}(t),p=function mhe(i,t,e,n){return e&&"mouseout"!==i.type?n?t:i:null}(t,this._lastEvent,n,u);n&&(this._lastEvent=null,Pl(s.onHover,[t,l,this],this),u&&Pl(s.onClick,[t,l,this],this));const v=!Z1(l,r);return(v||e)&&(this._active=l,this._updateHoverStyles(l,r,e)),this._lastEvent=p,v}_getActiveElements(t,e,n,r){if("mouseout"===t.type)return[];if(!n)return e;const s=this.options.hover;return this.getElementsAtEventForMode(t,s.mode,s,r)}}const hH=()=>Ja(_S.instances,i=>i._plugins.invalidate()),h_=!0;function fH(i,t,e){const{startAngle:n,pixelMargin:r,x:s,y:o,outerRadius:l,innerRadius:u}=t;let p=r/l;i.beginPath(),i.arc(s,o,l,n-p,e+p),u>r?(p=r/u,i.arc(s,o,u,e+p,n-p,!0)):i.arc(s,o,r,e+qc,n-qc),i.closePath(),i.clip()}function gC(i,t,e,n){return{x:e+i*Math.cos(t),y:n+i*Math.sin(t)}}function mL(i,t,e,n,r,s){const{x:o,y:l,startAngle:u,pixelMargin:p,innerRadius:v}=t,x=Math.max(t.outerRadius+n+e-p,0),I=v>0?v+n+e+p:0;let T=0;const F=r-u;if(n){const Vn=((v>0?v-n:0)+(x>0?x-n:0))/2;T=(F-(0!==Vn?F*Vn/(Vn+n):F))/2}const X=(F-Math.max(.001,F*x-e/sc)/x)/2,ce=u+X+T,we=r-X-T,{outerStart:ye,outerEnd:Ae,innerStart:We,innerEnd:ot}=function yhe(i,t,e,n){const r=function vhe(i){return nL(i,["outerStart","outerEnd","innerStart","innerEnd"])}(i.options.borderRadius),s=(e-t)/2,o=Math.min(s,n*t/2),l=u=>{const p=(e-Math.min(s,u))*n/2;return bd(u,0,Math.min(s,p))};return{outerStart:l(r.outerStart),outerEnd:l(r.outerEnd),innerStart:bd(r.innerStart,0,o),innerEnd:bd(r.innerEnd,0,o)}}(t,I,x,we-ce),Mt=x-ye,Xe=x-Ae,yt=ce+ye/Mt,tn=we-Ae/Xe,zn=I+We,Qn=I+ot,Un=ce+We/zn,An=we-ot/Qn;if(i.beginPath(),s){if(i.arc(o,l,x,yt,tn),Ae>0){const Vn=gC(Xe,tn,o,l);i.arc(Vn.x,Vn.y,Ae,tn,we+qc)}const Nn=gC(Qn,we,o,l);if(i.lineTo(Nn.x,Nn.y),ot>0){const Vn=gC(Qn,An,o,l);i.arc(Vn.x,Vn.y,ot,we+qc,An+Math.PI)}if(i.arc(o,l,I,we-ot/I,ce+We/I,!0),We>0){const Vn=gC(zn,Un,o,l);i.arc(Vn.x,Vn.y,We,Un+Math.PI,ce-qc)}const _n=gC(Mt,ce,o,l);if(i.lineTo(_n.x,_n.y),ye>0){const Vn=gC(Mt,yt,o,l);i.arc(Vn.x,Vn.y,ye,ce-qc,yt)}}else{i.moveTo(o,l);const Nn=Math.cos(yt)*x+o,_n=Math.sin(yt)*x+l;i.lineTo(Nn,_n);const Vn=Math.cos(tn)*x+o,Fn=Math.sin(tn)*x+l;i.lineTo(Vn,Fn)}i.closePath()}Object.defineProperties(_S,{defaults:{enumerable:h_,value:na},instances:{enumerable:h_,value:yS},overrides:{enumerable:h_,value:C0},registry:{enumerable:h_,value:lv},version:{enumerable:h_,value:"3.9.1"},getChart:{enumerable:h_,value:dH},register:{enumerable:h_,value:(...i)=>{lv.add(...i),hH()}},unregister:{enumerable:h_,value:(...i)=>{lv.remove(...i),hH()}}});class bS extends mm{constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,n){const r=this.getProps(["x","y"],n),{angle:s,distance:o}=B4(r,{x:t,y:e}),{startAngle:l,endAngle:u,innerRadius:p,outerRadius:v,circumference:x}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),I=this.options.spacing/2,F=fo(x,u-l)>=ul||Pw(s,l,u),j=ly(o,p+I,v+I);return F&&j}getCenterPoint(t){const{x:e,y:n,startAngle:r,endAngle:s,innerRadius:o,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],t),{offset:u,spacing:p}=this.options,v=(r+s)/2,x=(o+l+p+u)/2;return{x:e+Math.cos(v)*x,y:n+Math.sin(v)*x}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:n}=this,r=(e.offset||0)/2,s=(e.spacing||0)/2,o=e.circular;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=n>ul?Math.floor(n/ul):0,0===n||this.innerRadius<0||this.outerRadius<0)return;t.save();let l=0;if(r){l=r/2;const p=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(p)*l,Math.sin(p)*l),this.circumference>=sc&&(l=r)}t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor;const u=function _he(i,t,e,n,r){const{fullCircles:s,startAngle:o,circumference:l}=t;let u=t.endAngle;if(s){mL(i,t,e,n,o+ul,r);for(let p=0;p<s;++p)i.fill();isNaN(l)||(u=o+l%ul,l%ul==0&&(u+=ul))}return mL(i,t,e,n,u,r),i.fill(),u}(t,this,l,s,o);(function Che(i,t,e,n,r,s){const{options:o}=t,{borderWidth:l,borderJoinStyle:u}=o,p="inner"===o.borderAlign;!l||(p?(i.lineWidth=2*l,i.lineJoin=u||"round"):(i.lineWidth=l,i.lineJoin=u||"bevel"),t.fullCircles&&function bhe(i,t,e){const{x:n,y:r,startAngle:s,pixelMargin:o,fullCircles:l}=t,u=Math.max(t.outerRadius-o,0),p=t.innerRadius+o;let v;for(e&&fH(i,t,s+ul),i.beginPath(),i.arc(n,r,p,s+ul,s,!0),v=0;v<l;++v)i.stroke();for(i.beginPath(),i.arc(n,r,u,s,s+ul),v=0;v<l;++v)i.stroke()}(i,t,p),p&&fH(i,t,r),mL(i,t,e,n,r,s),i.stroke())})(t,this,l,s,u,o),t.restore()}}function pH(i,t,e=t){i.lineCap=fo(e.borderCapStyle,t.borderCapStyle),i.setLineDash(fo(e.borderDash,t.borderDash)),i.lineDashOffset=fo(e.borderDashOffset,t.borderDashOffset),i.lineJoin=fo(e.borderJoinStyle,t.borderJoinStyle),i.lineWidth=fo(e.borderWidth,t.borderWidth),i.strokeStyle=fo(e.borderColor,t.borderColor)}function xhe(i,t,e){i.lineTo(e.x,e.y)}function gH(i,t,e={}){const n=i.length,{start:r=0,end:s=n-1}=e,{start:o,end:l}=t,u=Math.max(r,o),p=Math.min(s,l);return{count:n,start:u,loop:t.loop,ilen:p<u&&!(r<o&&s<o||r>l&&s>l)?n+p-u:p-u}}function Ahe(i,t,e,n){const{points:r,options:s}=t,{count:o,start:l,loop:u,ilen:p}=gH(r,e,n),v=function whe(i){return i.stepped?Bce:i.tension||"monotone"===i.cubicInterpolationMode?zce:xhe}(s);let T,F,j,{move:x=!0,reverse:I}=n||{};for(T=0;T<=p;++T)F=r[(l+(I?p-T:T))%o],!F.skip&&(x?(i.moveTo(F.x,F.y),x=!1):v(i,j,F,I,s.stepped),j=F);return u&&(F=r[(l+(I?p:0))%o],v(i,j,F,I,s.stepped)),!!u}function Ihe(i,t,e,n){const r=t.points,{count:s,start:o,ilen:l}=gH(r,e,n),{move:u=!0,reverse:p}=n||{};let I,T,F,j,X,ce,v=0,x=0;const we=Ae=>(o+(p?l-Ae:Ae))%s,ye=()=>{j!==X&&(i.lineTo(v,X),i.lineTo(v,j),i.lineTo(v,ce))};for(u&&(T=r[we(0)],i.moveTo(T.x,T.y)),I=0;I<=l;++I){if(T=r[we(I)],T.skip)continue;const Ae=T.x,We=T.y,ot=0|Ae;ot===F?(We<j?j=We:We>X&&(X=We),v=(x*v+Ae)/++x):(ye(),i.lineTo(Ae,We),F=ot,x=0,j=X=We),ce=We}ye()}function vL(i){const t=i.options;return i._decimated||i._loop||t.tension||"monotone"===t.cubicInterpolationMode||t.stepped||t.borderDash&&t.borderDash.length?Ahe:Ihe}bS.id="arc",bS.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0},bS.defaultRoutes={backgroundColor:"backgroundColor"};const Mhe="function"==typeof Path2D;let CS=(()=>{class i extends mm{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;!r.tension&&"monotone"!==r.cubicInterpolationMode||r.stepped||this._pointsUpdated||(lue(this._points,r,e,r.spanGaps?this._loop:this._fullLoop,n),this._pointsUpdated=!0)}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function Aue(i,t){const e=i.points,n=i.options.spanGaps,r=e.length;if(!r)return[];const s=!!i._loop,{start:o,end:l}=function xue(i,t,e,n){let r=0,s=t-1;if(e&&!n)for(;r<t&&!i[r].skip;)r++;for(;r<t&&i[r].skip;)r++;for(r%=t,e&&(s+=r);s>r&&i[s%t].skip;)s--;return s%=t,{start:r,end:s}}(e,r,s,n);return function IU(i,t,e,n){return n&&n.setContext&&e?function Iue(i,t,e,n){const r=i._chart.getContext(),s=SU(i.options),{_datasetIndex:o,options:{spanGaps:l}}=i,u=e.length,p=[];let v=s,x=t[0].start,I=x;function T(F,j,X,ce){const we=l?-1:1;if(F!==j){for(F+=u;e[F%u].skip;)F-=we;for(;e[j%u].skip;)j+=we;F%u!=j%u&&(p.push({start:F%u,end:j%u,loop:X,style:ce}),v=ce,x=j%u)}}for(const F of t){x=l?x:F.start;let X,j=e[x%u];for(I=x+1;I<=F.end;I++){const ce=e[I%u];X=SU(n.setContext(d_(r,{type:"segment",p0:j,p1:ce,p0DataIndex:(I-1)%u,p1DataIndex:I%u,datasetIndex:o}))),Sue(X,v)&&T(x,I-1,F.loop,v),j=ce,v=X}x<I-1&&T(x,I-1,F.loop,v)}return p}(i,t,e,n):t}(i,!0===n?[{start:o,end:l,loop:s}]:function wue(i,t,e,n){const r=i.length,s=[];let u,o=t,l=i[t];for(u=t+1;u<=e;++u){const p=i[u%r];p.skip||p.stop?l.skip||(s.push({start:t%r,end:(u-1)%r,loop:n=!1}),t=o=p.stop?u:null):(o=u,l.skip&&(t=u)),l=p}return null!==o&&s.push({start:t%r,end:o%r,loop:n}),s}(e,o,l<o?l+r:l,!!i._fullLoop&&0===o&&l===r-1),e,t)}(this,this.options.segment))}first(){const e=this.segments;return e.length&&this.points[e[0].start]}last(){const e=this.segments,r=e.length;return r&&this.points[e[r-1].end]}interpolate(e,n){const r=this.options,s=e[n],o=this.points,l=AU(this,{property:n,start:s,end:s});if(!l.length)return;const u=[],p=function She(i){return i.stepped?mue:i.tension||"monotone"===i.cubicInterpolationMode?vue:E0}(r);let v,x;for(v=0,x=l.length;v<x;++v){const{start:I,end:T}=l[v],F=o[I],j=o[T];if(F===j){u.push(F);continue}const ce=p(F,j,Math.abs((s-F[n])/(j[n]-F[n])),r.stepped);ce[n]=e[n],u.push(ce)}return 1===u.length?u[0]:u}pathSegment(e,n,r){return vL(this)(e,this,n,r)}path(e,n,r){const s=this.segments,o=vL(this);let l=this._loop;n=n||0,r=r||this.points.length-n;for(const u of s)l&=o(e,this,u,{start:n,end:n+r-1});return!!l}draw(e,n,r,s){(this.points||[]).length&&(this.options||{}).borderWidth&&(e.save(),function Dhe(i,t,e,n){Mhe&&!t.options.segment?function Ehe(i,t,e,n){let r=t._path;r||(r=t._path=new Path2D,t.path(r,e,n)&&r.closePath()),pH(i,t.options),i.stroke(r)}(i,t,e,n):function The(i,t,e,n){const{segments:r,options:s}=t,o=vL(t);for(const l of r)pH(i,s,l.style),i.beginPath(),o(i,t,l,{start:e,end:e+n-1})&&i.closePath(),i.stroke()}(i,t,e,n)}(e,this,r,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return i.id="line",i.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},i.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},i.descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t},i})();function mH(i,t,e,n){const r=i.options,{[e]:s}=i.getProps([e],n);return Math.abs(t-s)<r.radius+r.hitRadius}let Lhe=(()=>{class i extends mm{constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,n,r){const s=this.options,{x:o,y:l}=this.getProps(["x","y"],r);return Math.pow(e-o,2)+Math.pow(n-l,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(e,n){return mH(this,e,"x",n)}inYRange(e,n){return mH(this,e,"y",n)}getCenterPoint(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}size(e){let n=(e=e||this.options||{}).radius||0;return n=Math.max(n,n&&e.hoverRadius||0),2*(n+(n&&e.borderWidth||0))}draw(e,n){const r=this.options;this.skip||r.radius<.1||!Nw(this,n,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,tL(e,r,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}return i.id="point",i.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},i.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},i})();function vH(i,t){const{x:e,y:n,base:r,width:s,height:o}=i.getProps(["x","y","base","width","height"],t);let l,u,p,v,x;return i.horizontal?(x=o/2,l=Math.min(e,r),u=Math.max(e,r),p=n-x,v=n+x):(x=s/2,l=e-x,u=e+x,p=Math.min(n,r),v=Math.max(n,r)),{left:l,top:p,right:u,bottom:v}}function f_(i,t,e,n){return i?0:bd(t,e,n)}function yL(i,t,e,n){const r=null===t,s=null===e,l=i&&!(r&&s)&&vH(i,n);return l&&(r||ly(t,l.left,l.right))&&(s||ly(e,l.top,l.bottom))}function Fhe(i,t){i.rect(t.x,t.y,t.w,t.h)}function _L(i,t,e={}){const n=i.x!==e.x?-t:0,r=i.y!==e.y?-t:0;return{x:i.x+n,y:i.y+r,w:i.w+((i.x+i.w!==e.x+e.w?t:0)-n),h:i.h+((i.y+i.h!==e.y+e.h?t:0)-r),radius:i.radius}}class xS extends mm{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:n,backgroundColor:r}}=this,{inner:s,outer:o}=function khe(i){const t=vH(i),e=t.right-t.left,n=t.bottom-t.top,r=function Phe(i,t,e){const r=i.borderSkipped,s=oU(i.options.borderWidth);return{t:f_(r.top,s.top,0,e),r:f_(r.right,s.right,0,t),b:f_(r.bottom,s.bottom,0,e),l:f_(r.left,s.left,0,t)}}(i,e/2,n/2),s=function Rhe(i,t,e){const{enableBorderRadius:n}=i.getProps(["enableBorderRadius"]),r=i.options.borderRadius,s=A0(r),o=Math.min(t,e),l=i.borderSkipped,u=n||Jo(r);return{topLeft:f_(!u||l.top||l.left,s.topLeft,0,o),topRight:f_(!u||l.top||l.right,s.topRight,0,o),bottomLeft:f_(!u||l.bottom||l.left,s.bottomLeft,0,o),bottomRight:f_(!u||l.bottom||l.right,s.bottomRight,0,o)}}(i,e/2,n/2);return{outer:{x:t.left,y:t.top,w:e,h:n,radius:s},inner:{x:t.left+r.l,y:t.top+r.t,w:e-r.l-r.r,h:n-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}(this),l=function Ohe(i){return i.topLeft||i.topRight||i.bottomLeft||i.bottomRight}(o.radius)?Bw:Fhe;t.save(),(o.w!==s.w||o.h!==s.h)&&(t.beginPath(),l(t,_L(o,e,s)),t.clip(),l(t,_L(s,-e,o)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),l(t,_L(s,e)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,e,n){return yL(this,t,e,n)}inXRange(t,e){return yL(this,t,null,e)}inYRange(t,e){return yL(this,null,t,e)}getCenterPoint(t){const{x:e,y:n,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],t);return{x:s?(e+r)/2:e,y:s?n:(n+r)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}}xS.id="bar",xS.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},xS.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var Nhe=Object.freeze({__proto__:null,ArcElement:bS,LineElement:CS,PointElement:Lhe,BarElement:xS});function yH(i){if(i._decimated){const t=i._data;delete i._decimated,delete i._data,Object.defineProperty(i,"data",{value:t})}}function _H(i){i.data.datasets.forEach(t=>{yH(t)})}var Uhe={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(i,t,e)=>{if(!e.enabled)return void _H(i);const n=i.width;i.data.datasets.forEach((r,s)=>{const{_data:o,indexAxis:l}=r,u=i.getDatasetMeta(s),p=o||r.data;if("y"===zw([l,i.options.indexAxis])||!u.controller.supportsDecimation)return;const v=i.scales[u.xAxisID];if("linear"!==v.type&&"time"!==v.type||i.options.parsing)return;let F,{start:x,count:I}=function Vhe(i,t){const e=t.length;let r,n=0;const{iScale:s}=i,{min:o,max:l,minDefined:u,maxDefined:p}=s.getUserBounds();return u&&(n=bd(cy(t,s.axis,o).lo,0,e-1)),r=p?bd(cy(t,s.axis,l).hi+1,n,e)-n:e-n,{start:n,count:r}}(u,p);if(I<=(e.threshold||4*n))yH(r);else{switch(pa(o)&&(r._data=p,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(j){this._data=j}})),e.algorithm){case"lttb":F=function Bhe(i,t,e,n,r){const s=r.samples||n;if(s>=e)return i.slice(t,t+e);const o=[],l=(e-2)/(s-2);let u=0;const p=t+e-1;let x,I,T,F,j,v=t;for(o[u++]=i[v],x=0;x<s-2;x++){let we,X=0,ce=0;const ye=Math.floor((x+1)*l)+1+t,Ae=Math.min(Math.floor((x+2)*l)+1,e)+t,We=Ae-ye;for(we=ye;we<Ae;we++)X+=i[we].x,ce+=i[we].y;X/=We,ce/=We;const ot=Math.floor(x*l)+1+t,Mt=Math.min(Math.floor((x+1)*l)+1,e)+t,{x:Xe,y:yt}=i[v];for(T=F=-1,we=ot;we<Mt;we++)F=.5*Math.abs((Xe-X)*(i[we].y-yt)-(Xe-i[we].x)*(ce-yt)),F>T&&(T=F,I=i[we],j=we);o[u++]=I,v=j}return o[u++]=i[p],o}(p,x,I,n,e);break;case"min-max":F=function zhe(i,t,e,n){let o,l,u,p,v,x,I,T,F,j,r=0,s=0;const X=[],we=i[t].x,Ae=i[t+e-1].x-we;for(o=t;o<t+e;++o){l=i[o],u=(l.x-we)/Ae*n,p=l.y;const We=0|u;if(We===v)p<F?(F=p,x=o):p>j&&(j=p,I=o),r=(s*r+l.x)/++s;else{const ot=o-1;if(!pa(x)&&!pa(I)){const Mt=Math.min(x,I),Xe=Math.max(x,I);Mt!==T&&Mt!==ot&&X.push({...i[Mt],x:r}),Xe!==T&&Xe!==ot&&X.push({...i[Xe],x:r})}o>0&&ot!==T&&X.push(i[ot]),X.push(l),v=We,s=0,F=j=p,x=I=T=o}}return X}(p,x,I,n);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}r._decimated=F}})},destroy(i){_H(i)}};function bL(i,t,e,n){if(n)return;let r=t[i],s=e[i];return"angle"===i&&(r=Dp(r),s=Dp(s)),{property:i,start:r,end:s}}function CL(i,t,e){for(;t>i;t--){const n=e[t];if(!isNaN(n.x)&&!isNaN(n.y))break}return t}function bH(i,t,e,n){return i&&t?n(i[e],t[e]):i?i[e]:t?t[e]:0}function CH(i,t){let e=[],n=!1;return Ll(i)?(n=!0,e=i):e=function Ghe(i,t){const{x:e=null,y:n=null}=i||{},r=t.points,s=[];return t.segments.forEach(({start:o,end:l})=>{l=CL(o,l,r);const u=r[o],p=r[l];null!==n?(s.push({x:u.x,y:n}),s.push({x:p.x,y:n})):null!==e&&(s.push({x:e,y:u.y}),s.push({x:e,y:p.y}))}),s}(i,t),e.length?new CS({points:e,options:{tension:0},_loop:n,_fullLoop:n}):null}function xH(i){return i&&!1!==i.fill}function Whe(i,t,e){let r=i[t].fill;const s=[t];let o;if(!e)return r;for(;!1!==r&&-1===s.indexOf(r);){if(!ru(r))return r;if(o=i[r],!o)return!1;if(o.visible)return r;s.push(r),r=o.fill}return!1}function jhe(i,t,e){const n=function Yhe(i){const t=i.options,e=t.fill;let n=fo(e&&e.target,e);return void 0===n&&(n=!!t.backgroundColor),!1!==n&&null!==n&&(!0===n?"origin":n)}(i);if(Jo(n))return!isNaN(n.value)&&n;let r=parseFloat(n);return ru(r)&&Math.floor(r)===r?function $he(i,t,e,n){return("-"===i||"+"===i)&&(e=t+e),!(e===t||e<0||e>=n)&&e}(n[0],t,r,e):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function Qhe(i,t,e){const n=[];for(let r=0;r<e.length;r++){const s=e[r],{first:o,last:l,point:u}=Jhe(s,t,"x");if(!(!u||o&&l))if(o)n.unshift(u);else if(i.push(u),!l)break}i.push(...n)}function Jhe(i,t,e){const n=i.interpolate(t,e);if(!n)return{};const r=n[e],s=i.segments,o=i.points;let l=!1,u=!1;for(let p=0;p<s.length;p++){const v=s[p],x=o[v.start][e],I=o[v.end][e];if(ly(r,x,I)){l=r===x,u=r===I;break}}return{first:l,last:u,point:n}}class wH{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,n){const{x:r,y:s,radius:o}=this;return t.arc(r,s,o,(e=e||{start:0,end:ul}).end,e.start,!0),!n.bounds}interpolate(t){const{x:e,y:n,radius:r}=this,s=t.angle;return{x:e+Math.cos(s)*r,y:n+Math.sin(s)*r,angle:s}}}function xL(i,t,e){const n=function efe(i){const{chart:t,fill:e,line:n}=i;if(ru(e))return function tfe(i,t){const e=i.getDatasetMeta(t);return e&&i.isDatasetVisible(t)?e.dataset:null}(t,e);if("stack"===e)return function Khe(i){const{scale:t,index:e,line:n}=i,r=[],s=n.segments,o=n.points,l=function Zhe(i,t){const e=[],n=i.getMatchingVisibleMetas("line");for(let r=0;r<n.length;r++){const s=n[r];if(s.index===t)break;s.hidden||e.unshift(s.dataset)}return e}(t,e);l.push(CH({x:null,y:t.bottom},n));for(let u=0;u<s.length;u++){const p=s[u];for(let v=p.start;v<=p.end;v++)Qhe(r,o[v],l)}return new CS({points:r,options:{}})}(i);if("shape"===e)return!0;const r=function nfe(i){return(i.scale||{}).getPointPositionForValue?function rfe(i){const{scale:t,fill:e}=i,n=t.options,r=t.getLabels().length,s=n.reverse?t.max:t.min,o=function Xhe(i,t,e){let n;return n="start"===i?e:"end"===i?t.options.reverse?t.min:t.max:Jo(i)?i.value:t.getBaseValue(),n}(e,t,s),l=[];if(n.grid.circular){const u=t.getPointPositionForValue(0,s);return new wH({x:u.x,y:u.y,radius:t.getDistanceFromCenterForValue(o)})}for(let u=0;u<r;++u)l.push(t.getPointPositionForValue(u,o));return l}(i):function ife(i){const{scale:t={},fill:e}=i,n=function qhe(i,t){let e=null;return"start"===i?e=t.bottom:"end"===i?e=t.top:Jo(i)?e=t.getPixelForValue(i.value):t.getBasePixel&&(e=t.getBasePixel()),e}(e,t);if(ru(n)){const r=t.isHorizontal();return{x:r?n:null,y:r?null:n}}return null}(i)}(i);return r instanceof wH?r:CH(r,n)}(t),{line:r,scale:s,axis:o}=t,l=r.options,u=l.fill,p=l.backgroundColor,{above:v=p,below:x=p}=u||{};n&&r.points.length&&(oS(i,e),function sfe(i,t){const{line:e,target:n,above:r,below:s,area:o,scale:l}=t,u=e._loop?"angle":t.axis;i.save(),"x"===u&&s!==r&&(AH(i,n,o.top),IH(i,{line:e,target:n,color:r,scale:l,property:u}),i.restore(),i.save(),AH(i,n,o.bottom)),IH(i,{line:e,target:n,color:s,scale:l,property:u}),i.restore()}(i,{line:r,target:n,above:v,below:x,area:e,scale:s,axis:o}),aS(i))}function AH(i,t,e){const{segments:n,points:r}=t;let s=!0,o=!1;i.beginPath();for(const l of n){const{start:u,end:p}=l,v=r[u],x=r[CL(u,p,r)];s?(i.moveTo(v.x,v.y),s=!1):(i.lineTo(v.x,e),i.lineTo(v.x,v.y)),o=!!t.pathSegment(i,l,{move:o}),o?i.closePath():i.lineTo(x.x,e)}i.lineTo(t.first().x,e),i.closePath(),i.clip()}function IH(i,t){const{line:e,target:n,property:r,color:s,scale:o}=t,l=function Hhe(i,t,e){const n=i.segments,r=i.points,s=t.points,o=[];for(const l of n){let{start:u,end:p}=l;p=CL(u,p,r);const v=bL(e,r[u],r[p],l.loop);if(!t.segments){o.push({source:l,target:v,start:r[u],end:r[p]});continue}const x=AU(t,v);for(const I of x){const T=bL(e,s[I.start],s[I.end],I.loop),F=wU(l,r,T);for(const j of F)o.push({source:j,target:I,start:{[e]:bH(v,T,"start",Math.max)},end:{[e]:bH(v,T,"end",Math.min)}})}}return o}(e,n,r);for(const{source:u,target:p,start:v,end:x}of l){const{style:{backgroundColor:I=s}={}}=u,T=!0!==n;i.save(),i.fillStyle=I,ofe(i,o,T&&bL(r,v,x)),i.beginPath();const F=!!e.pathSegment(i,u);let j;if(T){F?i.closePath():SH(i,n,x,r);const X=!!n.pathSegment(i,p,{move:F,reverse:!0});j=F&&X,j||SH(i,n,v,r)}i.closePath(),i.fill(j?"evenodd":"nonzero"),i.restore()}}function ofe(i,t,e){const{top:n,bottom:r}=t.chart.chartArea,{property:s,start:o,end:l}=e||{};"x"===s&&(i.beginPath(),i.rect(o,n,l-o,r-n),i.clip())}function SH(i,t,e,n){const r=t.interpolate(e,n);r&&i.lineTo(r.x,r.y)}var afe={id:"filler",afterDatasetsUpdate(i,t,e){const n=(i.data.datasets||[]).length,r=[];let s,o,l,u;for(o=0;o<n;++o)s=i.getDatasetMeta(o),l=s.dataset,u=null,l&&l.options&&l instanceof CS&&(u={visible:i.isDatasetVisible(o),index:o,fill:jhe(l,o,n),chart:i,axis:s.controller.options.indexAxis,scale:s.vScale,line:l}),s.$filler=u,r.push(u);for(o=0;o<n;++o)u=r[o],u&&!1!==u.fill&&(u.fill=Whe(r,o,e.propagate))},beforeDraw(i,t,e){const n="beforeDraw"===e.drawTime,r=i.getSortedVisibleDatasetMetas(),s=i.chartArea;for(let o=r.length-1;o>=0;--o){const l=r[o].$filler;!l||(l.line.updateControlPoints(s,l.axis),n&&l.fill&&xL(i.ctx,l,s))}},beforeDatasetsDraw(i,t,e){if("beforeDatasetsDraw"!==e.drawTime)return;const n=i.getSortedVisibleDatasetMetas();for(let r=n.length-1;r>=0;--r){const s=n[r].$filler;xH(s)&&xL(i.ctx,s,i.chartArea)}},beforeDatasetDraw(i,t,e){const n=t.meta.$filler;!xH(n)||"beforeDatasetDraw"!==e.drawTime||xL(i.ctx,n,i.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const EH=(i,t)=>{let{boxHeight:e=t,boxWidth:n=t}=i;return i.usePointStyle&&(e=Math.min(e,t),n=i.pointStyleWidth||Math.min(n,t)),{boxWidth:n,boxHeight:e,itemHeight:Math.max(t,e)}};class TH extends mm{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,n){this.maxWidth=t,this.maxHeight=e,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=Pl(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(n=>t.filter(n,this.chart.data))),t.sort&&(e=e.sort((n,r)=>t.sort(n,r,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display)return void(this.width=this.height=0);const n=t.labels,r=Ku(n.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:u}=EH(n,s);let p,v;e.font=r.string,this.isHorizontal()?(p=this.maxWidth,v=this._fitRows(o,s,l,u)+10):(v=this.maxHeight,p=this._fitCols(o,s,l,u)+10),this.width=Math.min(p,t.maxWidth||this.maxWidth),this.height=Math.min(v,t.maxHeight||this.maxHeight)}_fitRows(t,e,n,r){const{ctx:s,maxWidth:o,options:{labels:{padding:l}}}=this,u=this.legendHitBoxes=[],p=this.lineWidths=[0],v=r+l;let x=t;s.textAlign="left",s.textBaseline="middle";let I=-1,T=-v;return this.legendItems.forEach((F,j)=>{const X=n+e/2+s.measureText(F.text).width;(0===j||p[p.length-1]+X+2*l>o)&&(x+=v,p[p.length-(j>0?0:1)]=0,T+=v,I++),u[j]={left:0,top:T,row:I,width:X,height:r},p[p.length-1]+=X+l}),x}_fitCols(t,e,n,r){const{ctx:s,maxHeight:o,options:{labels:{padding:l}}}=this,u=this.legendHitBoxes=[],p=this.columnSizes=[],v=o-t;let x=l,I=0,T=0,F=0,j=0;return this.legendItems.forEach((X,ce)=>{const we=n+e/2+s.measureText(X.text).width;ce>0&&T+r+2*l>v&&(x+=I+l,p.push({width:I,height:T}),F+=I+l,j++,I=T=0),u[ce]={left:F,top:T,col:j,width:we,height:r},I=Math.max(I,we),T+=r+l}),x+=I,p.push({width:I,height:T}),x}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:n,labels:{padding:r},rtl:s}}=this,o=pC(s,this.left,this.width);if(this.isHorizontal()){let l=0,u=Ih(n,this.left+r,this.right-this.lineWidths[l]);for(const p of e)l!==p.row&&(l=p.row,u=Ih(n,this.left+r,this.right-this.lineWidths[l])),p.top+=this.top+t+r,p.left=o.leftForLtr(o.x(u),p.width),u+=p.width+r}else{let l=0,u=Ih(n,this.top+t+r,this.bottom-this.columnSizes[l].height);for(const p of e)p.col!==l&&(l=p.col,u=Ih(n,this.top+t+r,this.bottom-this.columnSizes[l].height)),p.top=u,p.left+=this.left+r,p.left=o.leftForLtr(o.x(p.left),p.width),u+=p.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const t=this.ctx;oS(t,this),this._draw(),aS(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:n,ctx:r}=this,{align:s,labels:o}=t,l=na.color,u=pC(t.rtl,this.left,this.width),p=Ku(o.font),{color:v,padding:x}=o,I=p.size,T=I/2;let F;this.drawTitle(),r.textAlign=u.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=p.string;const{boxWidth:j,boxHeight:X,itemHeight:ce}=EH(o,I),Ae=this.isHorizontal(),We=this._computeTitleHeight();F=Ae?{x:Ih(s,this.left+x,this.right-n[0]),y:this.top+x+We,line:0}:{x:this.left+x,y:Ih(s,this.top+We+x,this.bottom-e[0].height),line:0},_U(this.ctx,t.textDirection);const ot=ce+x;this.legendItems.forEach((Mt,Xe)=>{r.strokeStyle=Mt.fontColor||v,r.fillStyle=Mt.fontColor||v;const yt=r.measureText(Mt.text).width,tn=u.textAlign(Mt.textAlign||(Mt.textAlign=o.textAlign)),zn=j+T+yt;let Qn=F.x,Un=F.y;u.setWidth(this.width),Ae?Xe>0&&Qn+zn+x>this.right&&(Un=F.y+=ot,F.line++,Qn=F.x=Ih(s,this.left+x,this.right-n[F.line])):Xe>0&&Un+ot>this.bottom&&(Qn=F.x=Qn+e[F.line].width+x,F.line++,Un=F.y=Ih(s,this.top+We+x,this.bottom-e[F.line].height)),function(Mt,Xe,yt){if(isNaN(j)||j<=0||isNaN(X)||X<0)return;r.save();const tn=fo(yt.lineWidth,1);if(r.fillStyle=fo(yt.fillStyle,l),r.lineCap=fo(yt.lineCap,"butt"),r.lineDashOffset=fo(yt.lineDashOffset,0),r.lineJoin=fo(yt.lineJoin,"miter"),r.lineWidth=tn,r.strokeStyle=fo(yt.strokeStyle,l),r.setLineDash(fo(yt.lineDash,[])),o.usePointStyle){const zn={radius:X*Math.SQRT2/2,pointStyle:yt.pointStyle,rotation:yt.rotation,borderWidth:tn},Qn=u.xPlus(Mt,j/2);sU(r,zn,Qn,Xe+T,o.pointStyleWidth&&j)}else{const zn=Xe+Math.max((I-X)/2,0),Qn=u.leftForLtr(Mt,j),Un=A0(yt.borderRadius);r.beginPath(),Object.values(Un).some(An=>0!==An)?Bw(r,{x:Qn,y:zn,w:j,h:X,radius:Un}):r.rect(Qn,zn,j,X),r.fill(),0!==tn&&r.stroke()}r.restore()}(u.x(Qn),Un,Mt),Qn=((i,t,e,n)=>i===(n?"left":"right")?e:"center"===i?(t+e)/2:t)(tn,Qn+j+T,Ae?Qn+zn:this.right,t.rtl),function(Mt,Xe,yt){w0(r,yt.text,Mt,Xe+ce/2,p,{strikethrough:yt.hidden,textAlign:u.textAlign(yt.textAlign)})}(u.x(Qn),Un,Mt),Ae?F.x+=zn+x:F.y+=ot}),bU(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,n=Ku(e.font),r=Sh(e.padding);if(!e.display)return;const s=pC(t.rtl,this.left,this.width),o=this.ctx,l=e.position,p=r.top+n.size/2;let v,x=this.left,I=this.width;if(this.isHorizontal())I=Math.max(...this.lineWidths),v=this.top+p,x=Ih(t.align,x,this.right-I);else{const F=this.columnSizes.reduce((j,X)=>Math.max(j,X.height),0);v=p+Ih(t.align,this.top,this.bottom-F-t.labels.padding-this._computeTitleHeight())}const T=Ih(l,x,x+I);o.textAlign=s.textAlign($2(l)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=n.string,w0(o,e.text,T,v,n)}_computeTitleHeight(){const t=this.options.title,e=Ku(t.font),n=Sh(t.padding);return t.display?e.lineHeight+n.height:0}_getLegendItemAt(t,e){let n,r,s;if(ly(t,this.left,this.right)&&ly(e,this.top,this.bottom))for(s=this.legendHitBoxes,n=0;n<s.length;++n)if(r=s[n],ly(t,r.left,r.left+r.width)&&ly(e,r.top,r.top+r.height))return this.legendItems[n];return null}handleEvent(t){const e=this.options;if(!function cfe(i,t){return!(("mousemove"!==i&&"mouseout"!==i||!t.onHover&&!t.onLeave)&&(!t.onClick||"click"!==i&&"mouseup"!==i))}(t.type,e))return;const n=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type||"mouseout"===t.type){const r=this._hoveredItem,s=((i,t)=>null!==i&&null!==t&&i.datasetIndex===t.datasetIndex&&i.index===t.index)(r,n);r&&!s&&Pl(e.onLeave,[t,r,this],this),this._hoveredItem=n,n&&!s&&Pl(e.onHover,[t,n,this],this)}else n&&Pl(e.onClick,[t,n,this],this)}}var ufe={id:"legend",_element:TH,start(i,t,e){const n=i.legend=new TH({ctx:i.ctx,options:e,chart:i});Eh.configure(i,n,e),Eh.addBox(i,n)},stop(i){Eh.removeBox(i,i.legend),delete i.legend},beforeUpdate(i,t,e){const n=i.legend;Eh.configure(i,n,e),n.options=e},afterUpdate(i){const t=i.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(i,t){t.replay||i.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(i,t,e){const n=t.datasetIndex,r=e.chart;r.isDatasetVisible(n)?(r.hide(n),t.hidden=!0):(r.show(n),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:i=>i.chart.options.color,boxWidth:40,padding:10,generateLabels(i){const t=i.data.datasets,{labels:{usePointStyle:e,pointStyle:n,textAlign:r,color:s}}=i.legend.options;return i._getSortedDatasetMetas().map(o=>{const l=o.controller.getStyle(e?0:void 0),u=Sh(l.borderWidth);return{text:t[o.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!o.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:l.borderColor,pointStyle:n||l.pointStyle,rotation:l.rotation,textAlign:r||l.textAlign,borderRadius:0,datasetIndex:o.index}},this)}},title:{color:i=>i.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:i=>!i.startsWith("on"),labels:{_scriptable:i=>!["generateLabels","filter","sort"].includes(i)}}};class wL extends mm{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=t,this.height=this.bottom=e;const r=Ll(n.text)?n.text.length:1;this._padding=Sh(n.padding);const s=r*Ku(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){const{top:e,left:n,bottom:r,right:s,options:o}=this,l=o.align;let p,v,x,u=0;return this.isHorizontal()?(v=Ih(l,n,s),x=e+t,p=s-n):("left"===o.position?(v=n+t,x=Ih(l,r,e),u=-.5*sc):(v=s-t,x=Ih(l,e,r),u=.5*sc),p=r-e),{titleX:v,titleY:x,maxWidth:p,rotation:u}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const n=Ku(e.font),s=n.lineHeight/2+this._padding.top,{titleX:o,titleY:l,maxWidth:u,rotation:p}=this._drawArgs(s);w0(t,e.text,0,0,n,{color:e.color,maxWidth:u,rotation:p,textAlign:$2(e.align),textBaseline:"middle",translation:[o,l]})}}var hfe={id:"title",_element:wL,start(i,t,e){!function dfe(i,t){const e=new wL({ctx:i.ctx,options:t,chart:i});Eh.configure(i,e,t),Eh.addBox(i,e),i.titleBlock=e}(i,e)},stop(i){Eh.removeBox(i,i.titleBlock),delete i.titleBlock},beforeUpdate(i,t,e){const n=i.titleBlock;Eh.configure(i,n,e),n.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const wS=new WeakMap;var ffe={id:"subtitle",start(i,t,e){const n=new wL({ctx:i.ctx,options:e,chart:i});Eh.configure(i,n,e),Eh.addBox(i,n),wS.set(i,n)},stop(i){Eh.removeBox(i,wS.get(i)),wS.delete(i)},beforeUpdate(i,t,e){const n=wS.get(i);Eh.configure(i,n,e),n.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Yw={average(i){if(!i.length)return!1;let t,e,n=0,r=0,s=0;for(t=0,e=i.length;t<e;++t){const o=i[t].element;if(o&&o.hasValue()){const l=o.tooltipPosition();n+=l.x,r+=l.y,++s}}return{x:n/s,y:r/s}},nearest(i,t){if(!i.length)return!1;let s,o,l,e=t.x,n=t.y,r=Number.POSITIVE_INFINITY;for(s=0,o=i.length;s<o;++s){const u=i[s].element;if(u&&u.hasValue()){const v=W2(t,u.getCenterPoint());v<r&&(r=v,l=u)}}if(l){const u=l.tooltipPosition();e=u.x,n=u.y}return{x:e,y:n}}};function cv(i,t){return t&&(Ll(t)?Array.prototype.push.apply(i,t):i.push(t)),i}function hy(i){return("string"==typeof i||i instanceof String)&&i.indexOf("\n")>-1?i.split("\n"):i}function pfe(i,t){const{element:e,datasetIndex:n,index:r}=t,s=i.getDatasetMeta(n).controller,{label:o,value:l}=s.getLabelAndValue(r);return{chart:i,label:o,parsed:s.getParsed(r),raw:i.data.datasets[n].data[r],formattedValue:l,dataset:s.getDataset(),dataIndex:r,datasetIndex:n,element:e}}function MH(i,t){const e=i.chart.ctx,{body:n,footer:r,title:s}=i,{boxWidth:o,boxHeight:l}=t,u=Ku(t.bodyFont),p=Ku(t.titleFont),v=Ku(t.footerFont),x=s.length,I=r.length,T=n.length,F=Sh(t.padding);let j=F.height,X=0,ce=n.reduce((Ae,We)=>Ae+We.before.length+We.lines.length+We.after.length,0);ce+=i.beforeBody.length+i.afterBody.length,x&&(j+=x*p.lineHeight+(x-1)*t.titleSpacing+t.titleMarginBottom),ce&&(j+=T*(t.displayColors?Math.max(l,u.lineHeight):u.lineHeight)+(ce-T)*u.lineHeight+(ce-1)*t.bodySpacing),I&&(j+=t.footerMarginTop+I*v.lineHeight+(I-1)*t.footerSpacing);let we=0;const ye=function(Ae){X=Math.max(X,e.measureText(Ae).width+we)};return e.save(),e.font=p.string,Ja(i.title,ye),e.font=u.string,Ja(i.beforeBody.concat(i.afterBody),ye),we=t.displayColors?o+2+t.boxPadding:0,Ja(n,Ae=>{Ja(Ae.before,ye),Ja(Ae.lines,ye),Ja(Ae.after,ye)}),we=0,e.font=v.string,Ja(i.footer,ye),e.restore(),X+=F.width,{width:X,height:j}}function vfe(i,t,e,n){const{x:r,width:s}=e,{width:o,chartArea:{left:l,right:u}}=i;let p="center";return"center"===n?p=r<=(l+u)/2?"left":"right":r<=s/2?p="left":r>=o-s/2&&(p="right"),function mfe(i,t,e,n){const{x:r,width:s}=n,o=e.caretSize+e.caretPadding;if("left"===i&&r+s+o>t.width||"right"===i&&r-s-o<0)return!0}(p,i,t,e)&&(p="center"),p}function DH(i,t,e){const n=e.yAlign||t.yAlign||function gfe(i,t){const{y:e,height:n}=t;return e<n/2?"top":e>i.height-n/2?"bottom":"center"}(i,e);return{xAlign:e.xAlign||t.xAlign||vfe(i,t,e,n),yAlign:n}}function LH(i,t,e,n){const{caretSize:r,caretPadding:s,cornerRadius:o}=i,{xAlign:l,yAlign:u}=e,p=r+s,{topLeft:v,topRight:x,bottomLeft:I,bottomRight:T}=A0(o);let F=function yfe(i,t){let{x:e,width:n}=i;return"right"===t?e-=n:"center"===t&&(e-=n/2),e}(t,l);const j=function _fe(i,t,e){let{y:n,height:r}=i;return"top"===t?n+=e:n-="bottom"===t?r+e:r/2,n}(t,u,p);return"center"===u?"left"===l?F+=p:"right"===l&&(F-=p):"left"===l?F-=Math.max(v,I)+r:"right"===l&&(F+=Math.max(x,T)+r),{x:bd(F,0,n.width-t.width),y:bd(j,0,n.height-t.height)}}function AS(i,t,e){const n=Sh(e.padding);return"center"===t?i.x+i.width/2:"right"===t?i.x+i.width-n.right:i.x+n.left}function PH(i){return cv([],hy(i))}function RH(i,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?i.override(e):i}let kH=(()=>{class i extends mm{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart||e._chart,this._chart=this.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&n.options.animation&&r.animations,o=new TU(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=function bfe(i,t,e){return d_(i,{tooltip:t,tooltipItems:e,type:"tooltip"})}(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,s=r.beforeTitle.apply(this,[e]),o=r.title.apply(this,[e]),l=r.afterTitle.apply(this,[e]);let u=[];return u=cv(u,hy(s)),u=cv(u,hy(o)),u=cv(u,hy(l)),u}getBeforeBody(e,n){return PH(n.callbacks.beforeBody.apply(this,[e]))}getBody(e,n){const{callbacks:r}=n,s=[];return Ja(e,o=>{const l={before:[],lines:[],after:[]},u=RH(r,o);cv(l.before,hy(u.beforeLabel.call(this,o))),cv(l.lines,u.label.call(this,o)),cv(l.after,hy(u.afterLabel.call(this,o))),s.push(l)}),s}getAfterBody(e,n){return PH(n.callbacks.afterBody.apply(this,[e]))}getFooter(e,n){const{callbacks:r}=n,s=r.beforeFooter.apply(this,[e]),o=r.footer.apply(this,[e]),l=r.afterFooter.apply(this,[e]);let u=[];return u=cv(u,hy(s)),u=cv(u,hy(o)),u=cv(u,hy(l)),u}_createItems(e){const n=this._active,r=this.chart.data,s=[],o=[],l=[];let p,v,u=[];for(p=0,v=n.length;p<v;++p)u.push(pfe(this.chart,n[p]));return e.filter&&(u=u.filter((x,I,T)=>e.filter(x,I,T,r))),e.itemSort&&(u=u.sort((x,I)=>e.itemSort(x,I,r))),Ja(u,x=>{const I=RH(e.callbacks,x);s.push(I.labelColor.call(this,x)),o.push(I.labelPointStyle.call(this,x)),l.push(I.labelTextColor.call(this,x))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=l,this.dataPoints=u,u}update(e,n){const r=this.options.setContext(this.getContext()),s=this._active;let o,l=[];if(s.length){const u=Yw[r.position].call(this,s,this._eventPosition);l=this._createItems(r),this.title=this.getTitle(l,r),this.beforeBody=this.getBeforeBody(l,r),this.body=this.getBody(l,r),this.afterBody=this.getAfterBody(l,r),this.footer=this.getFooter(l,r);const p=this._size=MH(this,r),v=Object.assign({},u,p),x=DH(this.chart,r,v),I=LH(r,v,x,this.chart);this.xAlign=x.xAlign,this.yAlign=x.yAlign,o={opacity:1,x:I.x,y:I.y,width:p.width,height:p.height,caretX:u.x,caretY:u.y}}else 0!==this.opacity&&(o={opacity:0});this._tooltipItems=l,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,s){const o=this.getCaretPosition(e,r,s);n.lineTo(o.x1,o.y1),n.lineTo(o.x2,o.y2),n.lineTo(o.x3,o.y3)}getCaretPosition(e,n,r){const{xAlign:s,yAlign:o}=this,{caretSize:l,cornerRadius:u}=r,{topLeft:p,topRight:v,bottomLeft:x,bottomRight:I}=A0(u),{x:T,y:F}=e,{width:j,height:X}=n;let ce,we,ye,Ae,We,ot;return"center"===o?(We=F+X/2,"left"===s?(ce=T,we=ce-l,Ae=We+l,ot=We-l):(ce=T+j,we=ce+l,Ae=We-l,ot=We+l),ye=ce):(we="left"===s?T+Math.max(p,x)+l:"right"===s?T+j-Math.max(v,I)-l:this.caretX,"top"===o?(Ae=F,We=Ae-l,ce=we-l,ye=we+l):(Ae=F+X,We=Ae+l,ce=we+l,ye=we-l),ot=Ae),{x1:ce,x2:we,x3:ye,y1:Ae,y2:We,y3:ot}}drawTitle(e,n,r){const s=this.title,o=s.length;let l,u,p;if(o){const v=pC(r.rtl,this.x,this.width);for(e.x=AS(this,r.titleAlign,r),n.textAlign=v.textAlign(r.titleAlign),n.textBaseline="middle",l=Ku(r.titleFont),u=r.titleSpacing,n.fillStyle=r.titleColor,n.font=l.string,p=0;p<o;++p)n.fillText(s[p],v.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+u,p+1===o&&(e.y+=r.titleMarginBottom-u)}}_drawColorBox(e,n,r,s,o){const l=this.labelColors[r],u=this.labelPointStyles[r],{boxHeight:p,boxWidth:v,boxPadding:x}=o,I=Ku(o.bodyFont),T=AS(this,"left",o),F=s.x(T),X=n.y+(p<I.lineHeight?(I.lineHeight-p)/2:0);if(o.usePointStyle){const ce={radius:Math.min(v,p)/2,pointStyle:u.pointStyle,rotation:u.rotation,borderWidth:1},we=s.leftForLtr(F,v)+v/2,ye=X+p/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,tL(e,ce,we,ye),e.strokeStyle=l.borderColor,e.fillStyle=l.backgroundColor,tL(e,ce,we,ye)}else{e.lineWidth=Jo(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,e.strokeStyle=l.borderColor,e.setLineDash(l.borderDash||[]),e.lineDashOffset=l.borderDashOffset||0;const ce=s.leftForLtr(F,v-x),we=s.leftForLtr(s.xPlus(F,1),v-x-2),ye=A0(l.borderRadius);Object.values(ye).some(Ae=>0!==Ae)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,Bw(e,{x:ce,y:X,w:v,h:p,radius:ye}),e.fill(),e.stroke(),e.fillStyle=l.backgroundColor,e.beginPath(),Bw(e,{x:we,y:X+1,w:v-2,h:p-2,radius:ye}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(ce,X,v,p),e.strokeRect(ce,X,v,p),e.fillStyle=l.backgroundColor,e.fillRect(we,X+1,v-2,p-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:s}=this,{bodySpacing:o,bodyAlign:l,displayColors:u,boxHeight:p,boxWidth:v,boxPadding:x}=r,I=Ku(r.bodyFont);let T=I.lineHeight,F=0;const j=pC(r.rtl,this.x,this.width),X=function(yt){n.fillText(yt,j.x(e.x+F),e.y+T/2),e.y+=T+o},ce=j.textAlign(l);let we,ye,Ae,We,ot,Mt,Xe;for(n.textAlign=l,n.textBaseline="middle",n.font=I.string,e.x=AS(this,ce,r),n.fillStyle=r.bodyColor,Ja(this.beforeBody,X),F=u&&"right"!==ce?"center"===l?v/2+x:v+2+x:0,We=0,Mt=s.length;We<Mt;++We){for(we=s[We],ye=this.labelTextColors[We],n.fillStyle=ye,Ja(we.before,X),Ae=we.lines,u&&Ae.length&&(this._drawColorBox(n,e,We,j,r),T=Math.max(I.lineHeight,p)),ot=0,Xe=Ae.length;ot<Xe;++ot)X(Ae[ot]),T=I.lineHeight;Ja(we.after,X)}F=0,T=I.lineHeight,Ja(this.afterBody,X),e.y-=o}drawFooter(e,n,r){const s=this.footer,o=s.length;let l,u;if(o){const p=pC(r.rtl,this.x,this.width);for(e.x=AS(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=p.textAlign(r.footerAlign),n.textBaseline="middle",l=Ku(r.footerFont),n.fillStyle=r.footerColor,n.font=l.string,u=0;u<o;++u)n.fillText(s[u],p.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+r.footerSpacing}}drawBackground(e,n,r,s){const{xAlign:o,yAlign:l}=this,{x:u,y:p}=e,{width:v,height:x}=r,{topLeft:I,topRight:T,bottomLeft:F,bottomRight:j}=A0(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(u+I,p),"top"===l&&this.drawCaret(e,n,r,s),n.lineTo(u+v-T,p),n.quadraticCurveTo(u+v,p,u+v,p+T),"center"===l&&"right"===o&&this.drawCaret(e,n,r,s),n.lineTo(u+v,p+x-j),n.quadraticCurveTo(u+v,p+x,u+v-j,p+x),"bottom"===l&&this.drawCaret(e,n,r,s),n.lineTo(u+F,p+x),n.quadraticCurveTo(u,p+x,u,p+x-F),"center"===l&&"left"===o&&this.drawCaret(e,n,r,s),n.lineTo(u,p+I),n.quadraticCurveTo(u,p,u+I,p),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,s=r&&r.x,o=r&&r.y;if(s||o){const l=Yw[e.position].call(this,this._active,this._eventPosition);if(!l)return;const u=this._size=MH(this,e),p=Object.assign({},l,this._size),v=DH(n,e,p),x=LH(e,p,v,n);(s._to!==x.x||o._to!==x.y)&&(this.xAlign=v.xAlign,this.yAlign=v.yAlign,this.width=u.width,this.height=u.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,x))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},o={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const l=Sh(n.padding);n.enabled&&(this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length)&&(e.save(),e.globalAlpha=r,this.drawBackground(o,e,s,n),_U(e,n.textDirection),o.y+=l.top,this.drawTitle(o,e,n),this.drawBody(o,e,n),this.drawFooter(o,e,n),bU(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,s=e.map(({datasetIndex:u,index:p})=>{const v=this.chart.getDatasetMeta(u);if(!v)throw new Error("Cannot find a dataset at index "+u);return{datasetIndex:u,element:v.data[p],index:p}}),o=!Z1(r,s),l=this._positionChanged(s,n);(o||l)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,o=this._active||[],l=this._getActiveElements(e,o,n,r),u=this._positionChanged(l,e),p=n||!Z1(l,o)||u;return p&&(this._active=l,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),p}_getActiveElements(e,n,r,s){const o=this.options;if("mouseout"===e.type)return[];if(!s)return n;const l=this.chart.getElementsAtEventForMode(e,o.mode,o,r);return o.reverse&&l.reverse(),l}_positionChanged(e,n){const{caretX:r,caretY:s,options:o}=this,l=Yw[o.position].call(this,e,n);return!1!==l&&(r!==l.x||s!==l.y)}}return i.positioners=Yw,i})();var xfe=Object.freeze({__proto__:null,Decimation:Uhe,Filler:afe,Legend:ufe,SubTitle:ffe,Title:hfe,Tooltip:{id:"tooltip",_element:kH,positioners:Yw,afterInit(i,t,e){e&&(i.tooltip=new kH({chart:i,options:e}))},beforeUpdate(i,t,e){i.tooltip&&i.tooltip.initialize(e)},reset(i,t,e){i.tooltip&&i.tooltip.initialize(e)},afterDraw(i){const t=i.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(!1===i.notifyPlugins("beforeTooltipDraw",e))return;t.draw(i.ctx),i.notifyPlugins("afterTooltipDraw",e)}},afterEvent(i,t){i.tooltip&&i.tooltip.handleEvent(t.event,t.replay,t.inChartArea)&&(t.changed=!0)},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(i,t)=>t.bodyFont.size,boxWidth:(i,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:ay,title(i){if(i.length>0){const t=i[0],e=t.chart.data.labels,n=e?e.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return e[t.dataIndex]}return""},afterTitle:ay,beforeBody:ay,beforeLabel:ay,label(i){if(this&&this.options&&"dataset"===this.options.mode)return i.label+": "+i.formattedValue||i.formattedValue;let t=i.dataset.label||"";t&&(t+=": ");const e=i.formattedValue;return pa(e)||(t+=e),t},labelColor(i){const e=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(i){const e=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:ay,afterBody:ay,beforeFooter:ay,footer:ay,afterFooter:ay}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:i=>"filter"!==i&&"itemSort"!==i&&"external"!==i,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]}});class IS extends T0{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const n=this.getLabels();for(const{index:r,label:s}of e)n[r]===s&&n.splice(r,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(pa(t))return null;const n=this.getLabels();return((i,t)=>null===i?null:bd(Math.round(i),0,t))(e=isFinite(e)&&n[e]===t?e:function Afe(i,t,e,n){const r=i.indexOf(t);return-1===r?((i,t,e,n)=>("string"==typeof t?(e=i.push(t)-1,n.unshift({index:e,label:t})):isNaN(t)&&(e=null),e))(i,t,e,n):r!==i.lastIndexOf(t)?e:r}(n,t,fo(e,t),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(n=0),e||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const t=this.min,e=this.max,n=this.options.offset,r=[];let s=this.getLabels();s=0===t&&e===s.length-1?s:s.slice(t,e+1),this._valueRange=Math.max(s.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let o=t;o<=e;o++)r.push({value:o});return r}getLabelForValue(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!=typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function OH(i,t,{horizontal:e,minRotation:n}){const r=gm(n),s=(e?Math.sin(r):Math.cos(r))||.001;return Math.min(t/s,.75*t*(""+i).length)}IS.id="category",IS.defaults={ticks:{callback:IS.prototype.getLabelForValue}};class SS extends T0{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return pa(t)||("number"==typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this;const o=u=>r=e?r:u,l=u=>s=n?s:u;if(t){const u=ov(r),p=ov(s);u<0&&p<0?l(0):u>0&&p>0&&o(0)}if(r===s){let u=1;(s>=Number.MAX_SAFE_INTEGER||r<=Number.MIN_SAFE_INTEGER)&&(u=Math.abs(.05*s)),l(s+u),t||o(r-u)}this.min=r,this.max=s}getTickLimit(){const t=this.options.ticks;let r,{maxTicksLimit:e,stepSize:n}=t;return n?(r=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),e=e||11),e&&(r=Math.min(e,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const o=function Sfe(i,t){const e=[],{bounds:r,step:s,min:o,max:l,precision:u,count:p,maxTicks:v,maxDigits:x,includeBounds:I}=i,T=s||1,F=v-1,{min:j,max:X}=t,ce=!pa(o),we=!pa(l),ye=!pa(p),Ae=(X-j)/(x+1);let ot,Mt,Xe,yt,We=O4((X-j)/F/T)*T;if(We<1e-14&&!ce&&!we)return[{value:j},{value:X}];yt=Math.ceil(X/We)-Math.floor(j/We),yt>F&&(We=O4(yt*We/F/T)*T),pa(u)||(ot=Math.pow(10,u),We=Math.ceil(We*ot)/ot),"ticks"===r?(Mt=Math.floor(j/We)*We,Xe=Math.ceil(X/We)*We):(Mt=j,Xe=X),ce&&we&&s&&function sce(i,t){const e=Math.round(i);return e-t<=i&&e+t>=i}((l-o)/s,We/1e3)?(yt=Math.round(Math.min((l-o)/We,v)),We=(l-o)/yt,Mt=o,Xe=l):ye?(Mt=ce?o:Mt,Xe=we?l:Xe,yt=p-1,We=(Xe-Mt)/yt):(yt=(Xe-Mt)/We,yt=Lw(yt,Math.round(yt),We/1e3)?Math.round(yt):Math.ceil(yt));const tn=Math.max(N4(We),N4(Mt));ot=Math.pow(10,pa(u)?tn:u),Mt=Math.round(Mt*ot)/ot,Xe=Math.round(Xe*ot)/ot;let zn=0;for(ce&&(I&&Mt!==o?(e.push({value:o}),Mt<o&&zn++,Lw(Math.round((Mt+zn*We)*ot)/ot,o,OH(o,Ae,i))&&zn++):Mt<o&&zn++);zn<yt;++zn)e.push({value:Math.round((Mt+zn*We)*ot)/ot});return we&&I&&Xe!==l?e.length&&Lw(e[e.length-1].value,l,OH(l,Ae,i))?e[e.length-1].value=l:e.push({value:l}):(!we||Xe===l)&&e.push({value:Xe}),e}({maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===t.bounds&&F4(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let e=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const r=(n-e)/Math.max(t.length-1,1)/2;e-=r,n+=r}this._startValue=e,this._endValue=n,this._valueRange=n-e}getLabelForValue(t){return Vw(t,this.chart.options.locale,this.options.ticks.format)}}class AL extends SS{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=ru(t)?t:0,this.max=ru(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,n=gm(this.options.ticks.minRotation),r=(t?Math.sin(n):Math.cos(n))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,s.lineHeight/r))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}function FH(i){return i/Math.pow(10,Math.floor(yg(i)))==1}AL.id="linear",AL.defaults={ticks:{callback:dS.formatters.numeric}};class IL extends T0{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const n=SS.prototype.parse.apply(this,[t,e]);if(0!==n)return ru(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=ru(t)?Math.max(0,t):null,this.max=ru(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let n=this.min,r=this.max;const s=u=>n=t?n:u,o=u=>r=e?r:u,l=(u,p)=>Math.pow(10,Math.floor(yg(u))+p);n===r&&(n<=0?(s(1),o(10)):(s(l(n,-1)),o(l(r,1)))),n<=0&&s(l(r,-1)),r<=0&&o(l(n,1)),this._zero&&this.min!==this._suggestedMin&&n===l(this.min,0)&&s(l(n,-1)),this.min=n,this.max=r}buildTicks(){const t=this.options,n=function Efe(i,t){const e=Math.floor(yg(t.max)),n=Math.ceil(t.max/Math.pow(10,e)),r=[];let s=mg(i.min,Math.pow(10,Math.floor(yg(t.min)))),o=Math.floor(yg(s)),l=Math.floor(s/Math.pow(10,o)),u=o<0?Math.pow(10,Math.abs(o)):1;do{r.push({value:s,major:FH(s)}),++l,10===l&&(l=1,++o,u=o>=0?1:u),s=Math.round(l*Math.pow(10,o)*u)/u}while(o<e||o===e&&l<n);const p=mg(i.max,s);return r.push({value:p,major:FH(s)}),r}({min:this._userMin,max:this._userMax},this);return"ticks"===t.bounds&&F4(n,this,"value"),t.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(t){return void 0===t?"0":Vw(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=yg(t),this._valueRange=yg(this.max)-yg(t)}getPixelForValue(t){return(void 0===t||0===t)&&(t=this.min),null===t||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(yg(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function SL(i){const t=i.ticks;if(t.display&&i.display){const e=Sh(t.backdropPadding);return fo(t.font&&t.font.size,na.font.size)+e.height}return 0}function Tfe(i,t,e){return e=Ll(e)?e:[e],{w:Nce(i,t.string,e),h:e.length*t.lineHeight}}function NH(i,t,e,n,r){return i===n||i===r?{start:t-e/2,end:t+e/2}:i<n||i>r?{start:t-e,end:t}:{start:t,end:t+e}}function Dfe(i,t,e,n,r){const s=Math.abs(Math.sin(e)),o=Math.abs(Math.cos(e));let l=0,u=0;n.start<t.l?(l=(t.l-n.start)/s,i.l=Math.min(i.l,t.l-l)):n.end>t.r&&(l=(n.end-t.r)/s,i.r=Math.max(i.r,t.r+l)),r.start<t.t?(u=(t.t-r.start)/o,i.t=Math.min(i.t,t.t-u)):r.end>t.b&&(u=(r.end-t.b)/o,i.b=Math.max(i.b,t.b+u))}function Pfe(i){return 0===i||180===i?"center":i<180?"left":"right"}function Rfe(i,t,e){return"right"===e?i-=t:"center"===e&&(i-=t/2),i}function kfe(i,t,e){return 90===e||270===e?i-=t/2:(e>270||e<90)&&(i-=t),i}function BH(i,t,e,n){const{ctx:r}=i;if(e)r.arc(i.xCenter,i.yCenter,t,0,ul);else{let s=i.getPointPosition(0,t);r.moveTo(s.x,s.y);for(let o=1;o<n;o++)s=i.getPointPosition(o,t),r.lineTo(s.x,s.y)}}IL.id="logarithmic",IL.defaults={ticks:{callback:dS.formatters.logarithmic,major:{enabled:!0}}};class Kw extends SS{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=Sh(SL(this.options)/2),e=this.width=this.maxWidth-t.width,n=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+n/2+t.top),this.drawingArea=Math.floor(Math.min(e,n)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=ru(t)&&!isNaN(t)?t:0,this.max=ru(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/SL(this.options))}generateTickLabels(t){SS.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,n)=>{const r=Pl(this.options.pointLabels.callback,[e,n],this);return r||0===r?r:""}).filter((e,n)=>this.chart.getDataVisibility(n))}fit(){const t=this.options;t.display&&t.pointLabels.display?function Mfe(i){const t={l:i.left+i._padding.left,r:i.right-i._padding.right,t:i.top+i._padding.top,b:i.bottom-i._padding.bottom},e=Object.assign({},t),n=[],r=[],s=i._pointLabels.length,o=i.options.pointLabels,l=o.centerPointLabels?sc/s:0;for(let u=0;u<s;u++){const p=o.setContext(i.getPointLabelContext(u));r[u]=p.padding;const v=i.getPointPosition(u,i.drawingArea+r[u],l),x=Ku(p.font),I=Tfe(i.ctx,x,i._pointLabels[u]);n[u]=I;const T=Dp(i.getIndexAngle(u)+l),F=Math.round(G2(T));Dfe(e,t,T,NH(F,v.x,I.w,0,180),NH(F,v.y,I.h,90,270))}i.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),i._pointLabelItems=function Lfe(i,t,e){const n=[],r=i._pointLabels.length,s=i.options,o=SL(s)/2,l=i.drawingArea,u=s.pointLabels.centerPointLabels?sc/r:0;for(let p=0;p<r;p++){const v=i.getPointPosition(p,l+o+e[p],u),x=Math.round(G2(Dp(v.angle+qc))),I=t[p],T=kfe(v.y,I.h,x),F=Pfe(x),j=Rfe(v.x,I.w,F);n.push({x:v.x,y:T,textAlign:F,left:j,top:T,right:j+I.w,bottom:T+I.h})}return n}(i,n,r)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,n,r){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,n,r))}getIndexAngle(t){return Dp(t*(ul/(this._pointLabels.length||1))+gm(this.options.startAngle||0))}getDistanceFromCenterForValue(t){if(pa(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(pa(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const n=e[t];return function Nfe(i,t,e){return d_(i,{label:e,index:t,type:"pointLabel"})}(this.getContext(),t,n)}}getPointPosition(t,e,n=0){const r=this.getIndexAngle(t)-qc+n;return{x:Math.cos(r)*e+this.xCenter,y:Math.sin(r)*e+this.yCenter,angle:r}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:n,right:r,bottom:s}=this._pointLabelItems[t];return{left:e,top:n,right:r,bottom:s}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const n=this.ctx;n.save(),n.beginPath(),BH(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),n.closePath(),n.fillStyle=t,n.fill(),n.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:n,grid:r}=e,s=this._pointLabels.length;let o,l,u;if(e.pointLabels.display&&function Ofe(i,t){const{ctx:e,options:{pointLabels:n}}=i;for(let r=t-1;r>=0;r--){const s=n.setContext(i.getPointLabelContext(r)),o=Ku(s.font),{x:l,y:u,textAlign:p,left:v,top:x,right:I,bottom:T}=i._pointLabelItems[r],{backdropColor:F}=s;if(!pa(F)){const j=A0(s.borderRadius),X=Sh(s.backdropPadding);e.fillStyle=F;const ce=v-X.left,we=x-X.top,ye=I-v+X.width,Ae=T-x+X.height;Object.values(j).some(We=>0!==We)?(e.beginPath(),Bw(e,{x:ce,y:we,w:ye,h:Ae,radius:j}),e.fill()):e.fillRect(ce,we,ye,Ae)}w0(e,i._pointLabels[r],l,u+o.lineHeight/2,o,{color:s.color,textAlign:p,textBaseline:"middle"})}}(this,s),r.display&&this.ticks.forEach((p,v)=>{0!==v&&(l=this.getDistanceFromCenterForValue(p.value),function Ffe(i,t,e,n){const r=i.ctx,s=t.circular,{color:o,lineWidth:l}=t;!s&&!n||!o||!l||e<0||(r.save(),r.strokeStyle=o,r.lineWidth=l,r.setLineDash(t.borderDash),r.lineDashOffset=t.borderDashOffset,r.beginPath(),BH(i,e,s,n),r.closePath(),r.stroke(),r.restore())}(this,r.setContext(this.getContext(v-1)),l,s))}),n.display){for(t.save(),o=s-1;o>=0;o--){const p=n.setContext(this.getPointLabelContext(o)),{color:v,lineWidth:x}=p;!x||!v||(t.lineWidth=x,t.strokeStyle=v,t.setLineDash(p.borderDash),t.lineDashOffset=p.borderDashOffset,l=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),u=this.getPointPosition(o,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(u.x,u.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,n=e.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let s,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(r),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((l,u)=>{if(0===u&&!e.reverse)return;const p=n.setContext(this.getContext(u)),v=Ku(p.font);if(s=this.getDistanceFromCenterForValue(this.ticks[u].value),p.showLabelBackdrop){t.font=v.string,o=t.measureText(l.label).width,t.fillStyle=p.backdropColor;const x=Sh(p.backdropPadding);t.fillRect(-o/2-x.left,-s-v.size/2-x.top,o+x.width,v.size+x.height)}w0(t,l.label,0,-s,v,{color:p.color})}),t.restore()}drawTitle(){}}Kw.id="radialLinear",Kw.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:dS.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:i=>i,padding:5,centerPointLabels:!1}},Kw.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},Kw.descriptors={angleLines:{_fallback:"grid"}};const ES={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},zf=Object.keys(ES);function Bfe(i,t){return i-t}function zH(i,t){if(pa(t))return null;const e=i._adapter,{parser:n,round:r,isoWeekday:s}=i._parseOpts;let o=t;return"function"==typeof n&&(o=n(o)),ru(o)||(o="string"==typeof n?e.parse(o,n):e.parse(o)),null===o?null:(r&&(o="week"!==r||!uC(s)&&!0!==s?e.startOf(o,r):e.startOf(o,"isoWeek",s)),+o)}function VH(i,t,e,n){const r=zf.length;for(let s=zf.indexOf(i);s<r-1;++s){const o=ES[zf[s]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((e-t)/(l*o.size))<=n)return zf[s]}return zf[r-1]}function UH(i,t,e){if(e){if(e.length){const{lo:n,hi:r}=j2(e,t);i[e[n]>=t?e[n]:e[r]]=!0}}else i[t]=!0}function HH(i,t,e){const n=[],r={},s=t.length;let o,l;for(o=0;o<s;++o)l=t[o],r[l]=o,n.push({value:l,major:!1});return 0!==s&&e?function Ufe(i,t,e,n){const r=i._adapter,s=+r.startOf(t[0].value,n),o=t[t.length-1].value;let l,u;for(l=s;l<=o;l=+r.add(l,1,n))u=e[l],u>=0&&(t[u].major=!0);return t}(i,n,r,e):n}let EL=(()=>{class i extends T0{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n){const r=e.time||(e.time={}),s=this._adapter=new Sde._date(e.adapters.date);s.init(n),Mw(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return void 0===e?null:zH(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:s,max:o,minDefined:l,maxDefined:u}=this.getUserBounds();function p(v){!l&&!isNaN(v.min)&&(s=Math.min(s,v.min)),!u&&!isNaN(v.max)&&(o=Math.max(o,v.max))}(!l||!u)&&(p(this._getLabelBounds()),("ticks"!==e.bounds||"labels"!==e.ticks.source)&&p(this.getMinMax(!1))),s=ru(s)&&!isNaN(s)?s:+n.startOf(Date.now(),r),o=ru(o)&&!isNaN(o)?o:+n.endOf(Date.now(),r)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,s="labels"===r.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const o=this.min,u=function cce(i,t,e){let n=0,r=i.length;for(;n<r&&i[n]<t;)n++;for(;r>n&&i[r-1]>e;)r--;return n>0||r<i.length?i.slice(n,r):i}(s,o,this.max);return this._unit=n.unit||(r.autoSkip?VH(n.minUnit,this.min,this.max,this._getLabelCapacity(o)):function zfe(i,t,e,n,r){for(let s=zf.length-1;s>=zf.indexOf(e);s--){const o=zf[s];if(ES[o].common&&i._adapter.diff(r,n,o)>=t-1)return o}return zf[e?zf.indexOf(e):0]}(this,u.length,n.minUnit,this.min,this.max)),this._majorUnit=r.major.enabled&&"year"!==this._unit?function Vfe(i){for(let t=zf.indexOf(i)+1,e=zf.length;t<e;++t)if(ES[zf[t]].common)return zf[t]}(this._unit):void 0,this.initOffsets(s),e.reverse&&u.reverse(),HH(this,u,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e){let s,o,n=0,r=0;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),n=1===e.length?1-s:(this.getDecimalForValue(e[1])-s)/2,o=this.getDecimalForValue(e[e.length-1]),r=1===e.length?o:(o-this.getDecimalForValue(e[e.length-2]))/2);const l=e.length<3?.5:.25;n=bd(n,0,l),r=bd(r,0,l),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,s=this.options,o=s.time,l=o.unit||VH(o.minUnit,n,r,this._getLabelCapacity(n)),u=fo(o.stepSize,1),p="week"===l&&o.isoWeekday,v=uC(p)||!0===p,x={};let T,F,I=n;if(v&&(I=+e.startOf(I,"isoWeek",p)),I=+e.startOf(I,v?"day":l),e.diff(r,n,l)>1e5*u)throw new Error(n+" and "+r+" are too far apart with stepSize of "+u+" "+l);const j="data"===s.ticks.source&&this.getDataTimestamps();for(T=I,F=0;T<r;T=+e.add(T,u,l),F++)UH(x,T,j);return(T===r||"ticks"===s.bounds||1===F)&&UH(x,T,j),Object.keys(x).sort((X,ce)=>X-ce).map(X=>+X)}getLabelForValue(e){const r=this.options.time;return this._adapter.format(e,r.tooltipFormat?r.tooltipFormat:r.displayFormats.datetime)}_tickFormatFunction(e,n,r,s){const o=this.options,l=o.time.displayFormats,u=this._unit,p=this._majorUnit,x=p&&l[p],I=r[n],F=this._adapter.format(e,s||(p&&x&&I&&I.major?x:u&&l[u])),j=o.ticks.callback;return j?Pl(j,[F,n,r],this):F}generateTickLabels(e){let n,r,s;for(n=0,r=e.length;n<r;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,s=gm(this.isHorizontal()?n.maxRotation:n.minRotation),o=Math.cos(s),l=Math.sin(s),u=this._resolveTickFontOptions(0).size;return{w:r*o+u*l,h:r*l+u*o}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,s=r[n.unit]||r.millisecond,o=this._tickFormatFunction(e,0,HH(this,[e],this._majorUnit),s),l=this._getLabelSize(o),u=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return u>0?u:1}getDataTimestamps(){let n,r,e=this._cache.data||[];if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,r=s.length;n<r;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const s=this.getLabels();for(n=0,r=s.length;n<r;++n)e.push(zH(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return U4(e.sort(Bfe))}}return i.id="time",i.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}},i})();function TS(i,t,e){let s,o,l,u,n=0,r=i.length-1;e?(t>=i[n].pos&&t<=i[r].pos&&({lo:n,hi:r}=cy(i,"pos",t)),({pos:s,time:l}=i[n]),({pos:o,time:u}=i[r])):(t>=i[n].time&&t<=i[r].time&&({lo:n,hi:r}=cy(i,"time",t)),({time:s,pos:l}=i[n]),({time:o,pos:u}=i[r]));const p=o-s;return p?l+(u-l)*(t-s)/p:l}class TL extends EL{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=TS(e,this.min),this._tableRange=TS(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:n}=this,r=[],s=[];let o,l,u,p,v;for(o=0,l=t.length;o<l;++o)p=t[o],p>=e&&p<=n&&r.push(p);if(r.length<2)return[{time:e,pos:0},{time:n,pos:1}];for(o=0,l=r.length;o<l;++o)v=r[o+1],u=r[o-1],p=r[o],Math.round((v+u)/2)!==p&&s.push({time:p,pos:o/(l-1)});return s}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),n=this.getLabelTimestamps();return t=e.length&&n.length?this.normalize(e.concat(n)):e.length?e:n,t=this._cache.all=t,t}getDecimalForValue(t){return(TS(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return TS(this._table,n*this._tableRange+this._minPos,!0)}}TL.id="timeseries",TL.defaults=EL.defaults,_S.register(Ide,Nhe,xfe,Object.freeze({__proto__:null,CategoryScale:IS,LinearScale:AL,LogarithmicScale:IL,RadialLinearScale:Kw,TimeScale:EL,TimeSeriesScale:TL}));const Wfe=_S;let jfe=(()=>{class i{constructor(e){this.el=e,this.plugins=[],this.responsive=!0,this.onDataSelect=new qn,this._options={}}get data(){return this._data}set data(e){this._data=e,this.reinit()}get options(){return this._options}set options(e){this._options=e,this.reinit()}ngAfterViewInit(){this.initChart(),this.initialized=!0}onCanvasClick(e){if(this.chart){const n=this.chart.getElementsAtEventForMode(e,"nearest",{intersect:!0},!1),r=this.chart.getElementsAtEventForMode(e,"dataset",{intersect:!0},!1);n&&n[0]&&r&&this.onDataSelect.emit({originalEvent:e,element:n[0],dataset:r})}}initChart(){let e=this.options||{};e.responsive=this.responsive,e.responsive&&(this.height||this.width)&&(e.maintainAspectRatio=!1),this.chart=new Wfe(this.el.nativeElement.children[0].children[0],{type:this.type,data:this.data,options:this.options,plugins:this.plugins})}getCanvas(){return this.el.nativeElement.children[0].children[0]}getBase64Image(){return this.chart.toBase64Image()}generateLegend(){if(this.chart)return this.chart.generateLegend()}refresh(){this.chart&&this.chart.update()}reinit(){this.chart&&(this.chart.destroy(),this.initChart())}ngOnDestroy(){this.chart&&(this.chart.destroy(),this.initialized=!1,this.chart=null)}}return i.\u0275fac=function(e){return new(e||i)(Zt(Xn))},i.\u0275cmp=Ir({type:i,selectors:[["p-chart"]],hostAttrs:[1,"p-element"],inputs:{type:"type",plugins:"plugins",width:"width",height:"height",responsive:"responsive",data:"data",options:"options"},outputs:{onDataSelect:"onDataSelect"},decls:2,vars:6,consts:[[2,"position","relative"],[3,"click"]],template:function(e,n){1&e&&(lt(0,"div",0)(1,"canvas",1),fn("click",function(s){return n.onCanvasClick(s)}),ct()()),2&e&&(tf("width",n.responsive&&!n.width?null:n.width)("height",n.responsive&&!n.height?null:n.height),Me(1),mr("width",n.responsive&&!n.width?null:n.width)("height",n.responsive&&!n.height?null:n.height))},encapsulation:2,changeDetection:0}),i})(),$fe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({imports:[Ns]}),i})();const qfe=function(i,t){return{"p-button-icon":!0,"p-button-icon-left":i,"p-button-icon-right":t}};function Xfe(i,t){if(1&i&&ii(0,"span",3),2&i){const e=_e();Ur(e.checked?e.onIcon:e.offIcon),ve("ngClass",ys(3,qfe,"left"===e.iconPos,"right"===e.iconPos))}}const Yfe=function(i,t,e){return{"p-button p-togglebutton p-component":!0,"p-button-icon-only":i,"p-highlight":t,"p-disabled":e}},Kfe={provide:bc,useExisting:ds(()=>GH),multi:!0};let GH=(()=>{class i{constructor(e){this.cd=e,this.iconPos="left",this.onChange=new qn,this.checked=!1,this.onModelChange=()=>{},this.onModelTouched=()=>{}}toggle(e){this.disabled||(this.checked=!this.checked,this.onModelChange(this.checked),this.onModelTouched(),this.onChange.emit({originalEvent:e,checked:this.checked}),this.cd.markForCheck())}onBlur(){this.onModelTouched()}writeValue(e){this.checked=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}get hasOnLabel(){return this.onLabel&&this.onLabel.length>0}get hasOffLabel(){return this.onLabel&&this.onLabel.length>0}}return i.\u0275fac=function(e){return new(e||i)(Zt(Zo))},i.\u0275cmp=Ir({type:i,selectors:[["p-toggleButton"]],hostAttrs:[1,"p-element"],inputs:{onLabel:"onLabel",offLabel:"offLabel",onIcon:"onIcon",offIcon:"offIcon",ariaLabelledBy:"ariaLabelledBy",disabled:"disabled",style:"style",styleClass:"styleClass",inputId:"inputId",tabindex:"tabindex",iconPos:"iconPos"},outputs:{onChange:"onChange"},features:[To([Kfe])],decls:4,vars:12,consts:[["role","checkbox","pRipple","",3,"ngClass","ngStyle","click","keydown.enter"],[3,"class","ngClass",4,"ngIf"],[1,"p-button-label"],[3,"ngClass"]],template:function(e,n){1&e&&(lt(0,"div",0),fn("click",function(s){return n.toggle(s)})("keydown.enter",function(s){return n.toggle(s)}),Ze(1,Xfe,1,6,"span",1),lt(2,"span",2),qi(3),ct()()),2&e&&(Ur(n.styleClass),ve("ngClass",wu(8,Yfe,n.onIcon&&n.offIcon&&!n.hasOnLabel&&!n.hasOffLabel,n.checked,n.disabled))("ngStyle",n.style),mr("tabindex",n.disabled?null:"0")("aria-checked",n.checked),Me(1),ve("ngIf",n.onIcon||n.offIcon),Me(2),as(n.checked?n.hasOnLabel?n.onLabel:"":n.hasOffLabel?n.offLabel:""))},dependencies:[bo,Wo,Qo,_d],styles:[".p-button[_ngcontent-%COMP%]{margin:0;display:inline-flex;cursor:pointer;-webkit-user-select:none;user-select:none;align-items:center;vertical-align:bottom;text-align:center;overflow:hidden;position:relative}.p-button-label[_ngcontent-%COMP%]{flex:1 1 auto}.p-button-icon-right[_ngcontent-%COMP%]{order:1}.p-button[_ngcontent-%COMP%]:disabled{cursor:default}.p-button-icon-only[_ngcontent-%COMP%]{justify-content:center}.p-button-icon-only[_ngcontent-%COMP%]   .p-button-label[_ngcontent-%COMP%]{visibility:hidden;width:0;flex:0 0 auto}.p-button-vertical[_ngcontent-%COMP%]{flex-direction:column}.p-button-icon-bottom[_ngcontent-%COMP%]{order:2}.p-buttonset[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]{margin:0}.p-buttonset[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]:not(:last-child){border-right:0 none}.p-buttonset[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]:not(:first-of-type):not(:last-of-type){border-radius:0}.p-buttonset[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]:first-of-type{border-top-right-radius:0;border-bottom-right-radius:0}.p-buttonset[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]:last-of-type{border-top-left-radius:0;border-bottom-left-radius:0}.p-buttonset[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]:focus{position:relative;z-index:1}"],changeDetection:0}),i})(),Zfe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({imports:[Ns,$c]}),i})(),ML=(()=>{class i{constructor(){this.fileDropped=new qn}onDragOver(e){e.preventDefault(),e.stopPropagation(),this.fileOver=!0}onDragLeave(e){e.preventDefault(),e.stopPropagation(),this.fileOver=!1}ondrop(e){e.preventDefault(),e.stopPropagation(),this.fileOver=!1;let n=e.dataTransfer.files;n.length>0&&this.fileDropped.emit(n)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=$r({type:i,selectors:[["","dropZoneDirective",""]],hostVars:2,hostBindings:function(e,n){1&e&&fn("dragover",function(s){return n.onDragOver(s)})("dragleave",function(s){return n.onDragLeave(s)})("drop",function(s){return n.ondrop(s)}),2&e&&Ep("fileover",n.fileOver)},outputs:{fileDropped:"fileDropped"}}),i})();const Qfe=["myCytoscape"],Jfe=["myPng"],epe=["myTreeTable"];function tpe(i,t){if(1&i){const e=Pi();lt(0,"span",36)(1,"span",37)(2,"p-checkbox",38),fn("ngModelChange",function(r){return wt(e),At(_e().groupEnabled=r)}),ct(),lt(3,"label",39),qi(4,"Group"),ct()(),lt(5,"span",37)(6,"p-checkbox",38),fn("ngModelChange",function(r){return wt(e),At(_e().drawModeEnabled=r)}),ct(),lt(7,"label",39),qi(8,"Draw mode"),ct()(),lt(9,"span",37)(10,"p"),qi(11),ct()(),lt(12,"span",37)(13,"p"),qi(14),ct()()()}if(2&i){const e=_e();Me(2),ve("ngModel",e.groupEnabled)("binary",!0)("readonly",!0),Me(4),ve("ngModel",e.drawModeEnabled)("binary",!0)("readonly",!0),Me(5),as(e.selectorDisplay),Me(3),yd("style: ",e.currentStyle,"")}}function npe(i,t){if(1&i&&ii(0,"img",40),2&i){const e=t.$implicit;ve("src",e.icon,qd)("alt",e.label)}}function ipe(i,t){if(1&i&&ii(0,"img",40),2&i){const e=t.$implicit;ve("src",e.icon,qd)("alt",e.label)}}function rpe(i,t){if(1&i&&ii(0,"img",40),2&i){const e=t.$implicit;ve("src",e.icon,qd)("alt",e.label)}}const MS=function(){return{width:"100%"}};function spe(i,t){if(1&i){const e=Pi();lt(0,"div",22)(1,"div",23)(2,"div",41)(3,"span",42),ii(4,"i",43),ct(),lt(5,"input",44),fn("ngModelChange",function(r){return wt(e),At(_e().captureData.clone=r)}),ct()()(),lt(6,"div",23)(7,"div",41)(8,"span",42),ii(9,"i",45),ct(),lt(10,"input",44),fn("ngModelChange",function(r){return wt(e),At(_e().captureData.label=r)}),ct()()(),lt(11,"div",23)(12,"div",46)(13,"p-dropdown",47),fn("ngModelChange",function(r){return wt(e),At(_e().captureData.alias=r)}),ct()()(),lt(14,"div",23)(15,"div",24)(16,"p-dropdown",25),fn("ngModelChange",function(r){return wt(e),At(_e().captureData.tag=r)}),ct()()(),lt(17,"div",23)(18,"div",41)(19,"span",42),ii(20,"i",48),ct(),lt(21,"input",44),fn("ngModelChange",function(r){return wt(e),At(_e().captureData.group=r)}),ct()()(),lt(22,"div",23)(23,"div",41)(24,"span",49)(25,"p-checkbox",50),fn("ngModelChange",function(r){return wt(e),At(_e()._lockedElement=r)})("onChange",function(r){return wt(e),At(_e().handleChangeLock(r))}),ct()(),ii(26,"input",51),ct()()()}if(2&i){const e=_e();Me(5),ve("ngModel",e.captureData.clone),Me(5),ve("ngModel",e.captureData.label),Me(3),uo(Mo(17,MS)),ve("options",e.allNodes)("ngModel",e.captureData.alias)("filter",!0)("showClear",!0),Me(3),uo(Mo(18,MS)),ve("options",e.captureData.tags)("ngModel",e.captureData.tag)("filter",!0)("showClear",!0),Me(5),ve("ngModel",e.captureData.group),Me(4),ve("ngModel",e._lockedElement)("binary",!0)}}function ope(i,t){if(1&i){const e=Pi();lt(0,"p-button",52),fn("click",function(){wt(e);const r=_e();return At(r.applyNodeUpdate(r.captureData))}),ct()}}function ape(i,t){if(1&i){const e=Pi();lt(0,"div",22)(1,"div",23)(2,"div",41)(3,"span",42),ii(4,"i",45),ct(),lt(5,"input",44),fn("ngModelChange",function(r){return wt(e),At(_e().captureData.label=r)}),ct()()(),lt(6,"div",23)(7,"div",24)(8,"p-dropdown",25),fn("ngModelChange",function(r){return wt(e),At(_e().captureData.tag=r)}),ct()()(),lt(9,"div",23)(10,"div",41)(11,"span",42),ii(12,"i",53),ct(),lt(13,"input",54),fn("ngModelChange",function(r){return wt(e),At(_e().currentSelectedEdge.data()._source=r)}),ct()()(),lt(14,"div",23)(15,"div",41)(16,"span",42),ii(17,"i",55),ct(),lt(18,"input",54),fn("ngModelChange",function(r){return wt(e),At(_e().currentSelectedEdge.data()._target=r)}),ct()()()()}if(2&i){const e=_e();Me(5),ve("ngModel",e.captureData.label),Me(3),uo(Mo(9,MS)),ve("options",e.captureData.tags)("ngModel",e.captureData.tag)("filter",!0)("showClear",!0),Me(5),ve("ngModel",e.currentSelectedEdge.data()._source),Me(5),ve("ngModel",e.currentSelectedEdge.data()._target)}}function lpe(i,t){if(1&i){const e=Pi();lt(0,"p-button",52),fn("click",function(){wt(e);const r=_e();return At(r.applyEdgeUpdate(r.captureData))}),ct()}}function cpe(i,t){if(1&i){const e=Pi();lt(0,"p-button",52),fn("click",function(){wt(e);const r=_e();return At(r.applyChangeStyle(r.captureData))}),ct()}}const upe=function(){return{width:"100%",height:"100%"}};function dpe(i,t){if(1&i){const e=Pi();lt(0,"textarea",57),fn("keyup",function(){wt(e);const r=_e(2);return At(r.previewNewCData(r.captureData))})("ngModelChange",function(r){return wt(e),At(_e(2).captureData.selectElementRawCdata=r)}),ct()}if(2&i){const e=_e(2);uo(Mo(3,upe)),ve("ngModel",e.captureData.selectElementRawCdata)}}function hpe(i,t){1&i&&ii(0,"div",58),2&i&&ve("innerHTML",_e(2).captureData.selectElementCdata,wa)}const WH=function(){return{height:"100%"}};function fpe(i,t){1&i&&(lt(0,"p-splitter"),Ze(1,dpe,1,4,"ng-template",56),Ze(2,hpe,1,1,"ng-template",56),ct()),2&i&&uo(Mo(2,WH))}function ppe(i,t){1&i&&ii(0,"div",58),2&i&&ve("innerHTML",_e(2).captureData.selectElementCdata,wa)}function gpe(i,t){1&i&&(lt(0,"p-splitter"),Ze(1,ppe,1,1,"ng-template",56),ct()),2&i&&uo(Mo(2,WH))}function mpe(i,t){if(1&i){const e=Pi();lt(0,"p-toggleButton",61),fn("ngModelChange",function(r){return wt(e),At(_e(2).captureData.editable=r)}),ct()}2&i&&ve("ngModel",_e(2).captureData.editable)}function vpe(i,t){if(1&i){const e=Pi();lt(0,"p-button",62),fn("click",function(){wt(e);const r=_e(2);return At(r.applyNewCData(r.captureData))}),ct()}}function ype(i,t){if(1&i&&(Ze(0,mpe,1,1,"p-toggleButton",59),Ze(1,vpe,1,0,"p-button",60)),2&i){const e=_e();ve("ngIf",!e.captureData.isAlias),Me(1),ve("ngIf",!e.captureData.isAlias)}}const _pe=function(){return{height:"94vh"}},bpe=function(){return{width:"35vw",height:"55vw"}},Cpe=function(){return{width:"100vw",height:"42vw"}},xpe=function(){return{width:"100vw",height:"32vw"}},wpe=function(){return{width:"45vw",height:"45vw"}},jH=function(){return{width:"60vw",height:"50vw"}},$H=function(){return{width:"40vw",height:"45vw"}},qH=function(){return{width:"40%"}},Ape=function(){return{width:"55vw",height:"55vw"}};var DL=V(4826)(),Ipe=V(2960);Y1.use(Ipe);var Spe=V(4147);Y1.use(Spe),V(9050)(Y1);let Tpe=(()=>{class i{constructor(e,n,r,s,o,l,u,p,v){this.graphsService=e,this.styleService=n,this.databaseService=r,this.clipboardService=s,this.logger=o,this.messageService=l,this.base16=u,this.store=p,this.route=v,this.displaySelectionNode=!1,this.displaySelectionEdge=!1,this.displayChangeStyle=!1,this.displayAlias=!1,this.displayFinder=!1,this.displayMarkdown=!1,this.dockRightItems=[{label:"Export GEXF to clipboard",tooltipOptions:{tooltipLabel:"Export GEXF to clipboard",tooltipPosition:"top",positionTop:-15,positionLeft:15},icon:"assets/dock/export-gexf.png",command:()=>{this.id&&(this.gexf(this.id,this.id,this.currentStyle),this.messageService.add({key:"bc",severity:"info",summary:"Info",detail:"Store GEXF in clipboard"}))}},{label:"Export GRAPHML to clipboard",tooltipOptions:{tooltipLabel:"Export GRAPHML to clipboard",tooltipPosition:"top",positionTop:-15,positionLeft:15},icon:"assets/dock/export-graphml.png",command:()=>{this.id&&(this.graphml(this.id,this.id,this.currentStyle),this.messageService.add({key:"bc",severity:"info",summary:"Info",detail:"Store GRAPHML in clipboard"}))}},{label:"Export PNG",tooltipOptions:{tooltipLabel:"Export PNG",tooltipPosition:"top",positionTop:-15,positionLeft:15},icon:"assets/dock/export-png.png",command:()=>{if(document){let x=this.cy?.png({bg:"white",full:this.preferences.full,maxWidth:this.preferences.maxWidth?Number(this.preferences.maxWidth):1024,maxHeight:this.preferences.maxHeight?Number(this.preferences.maxHeight):768})||"";this.logger.info(`PNG ${this.preferences.full} ${this.preferences.maxWidth} ${this.preferences.maxHeight}`),this.myPng?.nativeElement.setAttribute("src",x)}this.displayExportPng=!0}},{label:"Save",tooltipOptions:{tooltipLabel:"Save current diagram in local storage",tooltipPosition:"top",positionTop:-15,positionLeft:15},icon:"assets/dock/save.png",command:()=>{if(this.id){let x=this.toSysGraph(this.id,this.id,this.currentStyle);this.databaseService.storeGraph(x),this.messageService.add({key:"bc",severity:"info",summary:"Info",detail:"Save graph"})}}}],this.dockLeftItems=[{label:"Finder",tooltipOptions:{tooltipLabel:"Find alias(s)",tooltipPosition:"right",positionTop:-15,positionLeft:15},icon:"assets/dock/find-alias.png",command:()=>{let x=_r.filter(_r.map(this.cy?.elements("node"),T=>({alias:T.data().alias,label:T.data().label,id:this.base16.decode(T.data().id)})),T=>T.alias),I={};_r.each(x,T=>{let F=this.base16.encode(T.alias),j=this.cy?.$(`#${F}`);j&&(T.target={id:T.alias,label:j[0].data().label},I[F]?I[F].aliases.push(T):I[F]={label:j[0].data().label,aliases:[T]})}),this.alias=[],_r.each(I,(T,F)=>{let j={key:F,label:`${T.label} #${this.base16.decode(F)}`,data:{id:this.base16.decode(F),label:T.label},expandedIcon:"pi pi-folder-open",collapsedIcon:"pi pi-folder",children:[]};_r.each(T.aliases,X=>{j.children?.push({key:this.base16.encode(X.id),label:`${X.label} #${X.id}`,leaf:!0,icon:"pi pi-fw pi-clone",data:{id:X.id,label:X.label}})}),this.alias.push(j)}),this.displayAlias=!0}},{label:"Finder",tooltipOptions:{tooltipLabel:"Find element(s)",tooltipPosition:"right",positionTop:-15,positionLeft:15},icon:"assets/dock/find-element.png",command:()=>{this.displayFinder=!0}}],this.dockBottomItems=[],this.responsiveOptions=[{breakpoint:"1024px",numVisible:3},{breakpoint:"768px",numVisible:2},{breakpoint:"560px",numVisible:1}],this.subscriptions=[],this.displayExportPng=!1,this.displayTool=!0,this.searchNode="",this.graphs=[],this.alias=[],this.allNodes=[],this.cols=[{field:"label",header:"Label"}],this.breadFirstLayoutOptions=new Uoe,this.concentricLayoutOptions=new Voe,this.circleLayoutOptions=new zoe,this.gridLayoutOptions=new Boe,this.coseLayoutOptions=new Hoe,this.dagreLayoutOptions=new Goe,this.items=[],this.groupEnabled=!0,this.selectorDisplay="",this.drawModeEnabled=!1,this.rules=[],this.graph$=this.store.select(d2),this.graphs$=this.store.select(u2),this._lockedElement=!1,this.nodeItem=[{label:"Drop",icon:"pi pi-trash",command:()=>{!this.currentSelectedNode||this.cy?.$(`#${this.currentSelectedNode.data().id}`).remove()}},{label:"Clone",icon:"pi pi-clone",command:()=>{this.onCloneNode(this.currentSelectedNode),this.onClearAnySelection()}},{label:"Edit",icon:"pi pi-book",command:()=>{if(!this.currentSelectedNode||!this.currentStyle)return;let x=_r.uniq(_r.map(_r.filter(this.styleService.getStyle(this.currentStyle)?.tags,T=>T.label&&"node"==T.selector),T=>({label:T.label,value:T.label})));x.unshift({label:"",value:""});let I=this.currentSelectedNode.data().clone?this.currentSelectedNode.data().clone:this.currentSelectedNode.data().id;this.captureData={id:this.currentSelectedNode.data().id,clone:this.base16.decode(I),label:this.currentSelectedNode.data().label,alias:this.currentSelectedNode.data().alias,tag:this.currentSelectedNode.data().tag,group:this.currentSelectedNode.data().group,tags:x},setTimeout(()=>{this.captureData.tag=this.currentSelectedNode.data().tag},100),this.displaySelectionNode=!0}},{label:"Documentation",icon:"pi pi-eye",command:()=>{this.displayMarkdown=!0}},{label:"Link to node",icon:"pi pi-upload",command:()=>{this.edgehandles.start(this.currentSelectedNode),this.onClearAnySelection()}},{label:"Goto to alias",icon:"pi pi-arrow-right",command:()=>{this.onSelectAlias(this.currentSelectedNode)}}],this.edgeItem=[{label:"Drop",icon:"pi pi-trash",command:()=>{!this.currentSelectedEdge||this.cy?.$(`#${this.currentSelectedEdge.data().id}`).remove()}},{label:"Edit",icon:"pi pi-book",command:()=>{if(!this.currentSelectedEdge||!this.currentStyle)return;let x=_r.uniq(_r.map(_r.filter(this.styleService.getStyle(this.currentStyle)?.tags,I=>I.label&&"edge"==I.selector),I=>({label:I.label,value:I.label})));x.unshift({label:"",value:""}),this.captureData={id:this.currentSelectedEdge.data().id,label:this.currentSelectedEdge.data().label,tag:this.currentSelectedEdge.data().tag,tags:x},setTimeout(()=>{this.captureData.tag=this.currentSelectedEdge.data().tag},100),this.displaySelectionEdge=!0}},{label:"Documentation",icon:"pi pi-eye",command:()=>{this.displayMarkdown=!0}}],this.coreItem=[{label:"Add new node",icon:"pi pi-plus",command:()=>{this.createNewNode()}},{label:"Change style",icon:"pi pi-wallet",command:()=>{this.changeStyle()}},{label:"Group",icon:"pi pi-share-alt",items:[{label:"Toggle",icon:"pi pi-undo",command:()=>{this.onToggleGroupEnabled()}},{label:"Group Statistics",icon:"pi pi-chart-pie",command:()=>{let x=_r.sortBy(_r.filter(_r.map(this.cy?.nodes(),T=>T.data().group),T=>T&&""!==T)),I={};_r.each(x,T=>{I[T]?I[T]+=1:I[T]=1}),this.dataGroupStatistics={datasets:[{data:_r.map(I,(T,F)=>T),backgroundColor:_r.map(I,(T,F)=>{switch(T){case 1:return"#42A5F5";case 2:return"#66BB6A";case 3:return"#FFA726";case 4:return"#26C6DA";default:return"#7E57C2"}}),label:"My dataset"}],labels:_r.map(I,(T,F)=>F)},this.displayGroupStatistic=!0}},{label:"Tag Statistics",icon:"pi pi-chart-pie",command:()=>{let x=_r.sortBy(_r.filter(_r.map(this.cy?.nodes(),T=>T.data().tag),T=>T&&""!==T&&void 0===T.alias)),I={};_r.each(x,T=>{I[T]?I[T]+=1:I[T]=1}),this.dataTagStatistics={datasets:[{data:_r.map(I,(T,F)=>T),backgroundColor:_r.map(I,(T,F)=>{switch(T){case 1:return"#42A5F5";case 2:return"#66BB6A";case 3:return"#FFA726";case 4:return"#26C6DA";default:return"#7E57C2"}}),label:"My dataset"}],labels:_r.map(I,(T,F)=>F)},this.displayTagStatistic=!0}}]},{label:"Layout",icon:"pi pi-sitemap",items:[{label:"Bread First Layout",icon:"pi pi-ellipsis-h",command:()=>{this.breadFirstLayoutOptions&&this.cy?.layout(this.breadFirstLayoutOptions).run(),this.onClearAnySelection()}},{label:"Concentric Layout",icon:"pi pi-ellipsis-h",command:()=>{this.concentricLayoutOptions&&this.cy?.layout(this.concentricLayoutOptions).run(),this.onClearAnySelection()}},{label:"Circle Layout",icon:"pi pi-ellipsis-h",command:()=>{this.circleLayoutOptions&&this.cy?.layout(this.circleLayoutOptions).run(),this.onClearAnySelection()}},{label:"Grid Layout",icon:"pi pi-ellipsis-h",command:()=>{this.gridLayoutOptions&&this.cy?.layout(this.gridLayoutOptions).run(),this.onClearAnySelection()}},{label:"Cose Layout",icon:"pi pi-ellipsis-h",command:()=>{this.coseLayoutOptions&&this.cy?.layout(this.coseLayoutOptions).run(),this.onClearAnySelection()}},{label:"Dagre Layout",icon:"pi pi-ellipsis-h",command:()=>{this.dagreLayoutOptions&&this.cy?.layout(this.dagreLayoutOptions).run(),this.onClearAnySelection()}}]},{label:"Zoom",icon:"pi pi-circle",items:[{label:"0.1",icon:"pi pi-ellipsis-h",command:()=>{this.cy?.zoom(.1)}},{label:"0.2",icon:"pi pi-ellipsis-h",command:()=>{this.cy?.zoom(.2)}},{label:"0.3",icon:"pi pi-ellipsis-h",command:()=>{this.cy?.zoom(.3)}},{label:"0.5",icon:"pi pi-ellipsis-h",command:()=>{this.cy?.zoom(.5)}},{label:"0.6",icon:"pi pi-ellipsis-h",command:()=>{this.cy?.zoom(.6)}},{label:"0.75",icon:"pi pi-ellipsis-h",command:()=>{this.cy?.zoom(.75)}},{label:"1",icon:"pi pi-ellipsis-h",command:()=>{this.cy?.zoom(1)}},{label:"fit",icon:"pi pi-ellipsis-h",command:()=>{this.cy?.fit()}}]},{label:"Draw mode",icon:"pi pi-share-alt",items:[{label:"Toggle",icon:"pi pi-undo",command:()=>{this.onToggleDrawModeEnabled()}}]}],this.captureData={},this.currentSelectedNode=void 0,this.currentSelectedEdge=void 0,this.dataGroupStatistics={datasets:[{data:[],backgroundColor:[],label:"Dataset"}],labels:[]},this.displayGroupStatistic=!1,this.dataTagStatistics={datasets:[{data:[],backgroundColor:[],label:"Dataset"}],labels:[]},this.displayTagStatistic=!1,this.config={dark:!1},this.preferences=this.databaseService.retrievePreferences(),this.subscriptions.push(this.graph$.subscribe(x=>{if(x){if(this.cy?.startBatch(),this.cy?.boxSelectionEnabled(this.boxSelectionEnabled),this.cy?.nodes().remove(),this.cy?.edges().remove(),x.style&&(this.cy?.style(this.retrieveStyle(x.style)),this.currentStyle=x.style),this.graphs=[],x.nodes&&(this.graphs.push(this.buildChildNodes(x)),this.allNodes=_r.map(x.nodes,I=>({label:this.base16.decode(I.id),value:this.base16.decode(I.id)})),this.allNodes.unshift({label:"",value:""}),this.cy?.add(_r.map(x.nodes,I=>{let T={data:{id:I.id,label:I.label,cdata:I.cdata,alias:I.alias,group:I.group,tag:I.tag},position:{x:I.x,y:I.y}};return I.parent&&(T.data.parent=I.parent),T}))),x.edges&&(this.graphs.push(this.buildChildEdges(x)),this.cy?.add(_r.map(x.edges,I=>({data:{id:I.id,label:I.label,cdata:I.cdata,source:I.source||"",target:I.target||"",_source:u.decode(I.source||""),_target:u.decode(I.target||""),tag:I.tag}})))),this.cy){this.edgehandles&&this.edgehandles.destroy(),_r.each(this.rules,F=>{F.destroy()}),this.rules=[];let I=_r.uniq(_r.map(_r.filter(x.nodes,F=>""!==F.group),F=>F.group)),T=this.cy;this.edgehandles=T.edgehandles(),_r.each(I,F=>{let j=this.cy?.$(`[group = "${F}"]`);this.rules.push(T.automove({nodesMatching:j,reposition:"drag",dragWith:j}))})}this.cy?.endBatch(),this.cy?.fit()}}))}ngOnInit(){this.route.queryParams.subscribe(e=>{this.id=e.id}),this.items=this.coreItem}onSelectAlias(e){if(e.data()&&e.data().alias){let n=this.cy?.$(`#${this.base16.encode(e.data().alias)}`);this.logger.info("Alias",e.data().alias,n),this.cy?.center(n)}}applyNodeUpdate(e){if(void 0!==e.clone&&""!=e.clone){let r=this.cy?.$(`#${this.base16.encode(e.clone)}`);if(e.id!==this.base16.encode(e.clone)&&r&&r.length>0)return void this.messageService.add({key:"bc",severity:"error",summary:"While checking unicity of",detail:e.clone})}this.cy?.$(`#${e.id}`)?.data("clone",this.base16.encode(e.clone)).data("alias",e.alias).data("group",e.group?e.group:"").data("label",e.label).data("tag",e.tag),this.displaySelectionNode=!1}applyEdgeUpdate(e){this.cy?.$(`#${e.id}`).data("label",e.label).data("tag",e.tag),this.displaySelectionEdge=!1}applyChangeStyle(e){this.cy?.style(this.retrieveStyle(e.style)),this.currentStyle=e.style,this.displayChangeStyle=!1}onSelectCurrentAlias(e){let n=this.cy?.$(`#${this.selectedAlias.key}`);this.cy?.center(n),this.displayAlias=!1}ngOnDestroy(){this.subscriptions&&_r.each(this.subscriptions,e=>{e.unsubscribe()})}onHide(){this.onClearAnySelection()}createNewNode(){let e=this.base16.encode(`default@${v4()}`);this.cy?.add([{data:{id:e,label:"default",cdata:"TODO ...",tag:""},position:{x:0,y:0}}]);let n=this.cy?.$(`#${e}`);this.cy?.center(n)}changeStyle(){this.captureData={styles:_r.map(this.styleService.getStyles(),e=>e.id),style:"default"},this.displayChangeStyle=!0}nodeSelect(e){let n=[{opacity:.2},{opacity:1}],r=this.cy?.$(`#${this.selectedNode.key}`);this.cy?.center(r),this.selectedNode.data._source?(this.animate(this.cy?.$(`#${this.selectedNode.data._source}`),n),this.animate(this.cy?.$(`#${this.selectedNode.data._target}`),n)):this.animate(this.cy?.$(`#${this.selectedNode.data._id}`),n)}onToggleGroupEnabled(){this.groupEnabled?(this.groupEnabled=!1,_r.each(this.rules,e=>{e.disable()})):(this.groupEnabled=!0,_r.each(this.rules,e=>{e.enable()})),this.onClearAnySelection()}onToggleDrawModeEnabled(){this.drawModeEnabled?(this.edgehandles.disableDrawMode(),this.drawModeEnabled=!1):(this.edgehandles.enableDrawMode(),this.drawModeEnabled=!0),this.onClearAnySelection()}buildChildNodes(e){return{key:"1",label:"Nodes",data:{uid:1,label:"Nodes"},expandedIcon:"pi pi-folder-open",collapsedIcon:"pi pi-folder",children:_r.map(e.nodes,n=>({key:n.id,leaf:!0,label:n.label,data:{_id:n.id,label:n.label},icon:"pi pi-fw pi-clone",children:[]}))}}buildChildEdges(e){return{key:"1",label:"Edges",data:{uid:2,label:"Edges"},expandedIcon:"pi pi-folder-open",collapsedIcon:"pi pi-folder",children:_r.map(e.edges,n=>({key:n.id,leaf:!0,label:n.label,data:{_id:n.id,_source:n.source,_target:n.target,label:n.label},icon:"pi pi-fw pi-share-alt",children:[]}))}}onFileDropped(e){let n=e[0].name;this.id&&n.endsWith(".json")?this.onFileStyleDropped(e):this.id&&n.endsWith(".gexf")&&this.onFileGexfDropped(e)}onFileGexfDropped(e){this.messageService.add({key:"bc",severity:"info",summary:"Upload/GEXF",detail:`Filename ${e[0].name}`}),this.id&&this.graphsService.uploadHandler(e[0],this.id,this.id).then(n=>{this.databaseService.storeGraph(n),this.store.dispatch(x1({graph:n}))})}onFileStyleDropped(e){var n=this;let r;if(!this.currentStyle)return void this.messageService.add({key:"bc",severity:"warning",summary:"No style selected"});r=this.currentStyle,this.messageService.add({key:"bc",severity:"info",summary:"Upload/Style",detail:`Filename ${e[0].name}`});let s=new FileReader;s.addEventListener("loadend",p0(function*(){let o={id:r,tags:JSON.parse(s.result+"")};n.styleService.saveStyle(o),n.store.dispatch(U2({style:o}))})),s.readAsText(e[0])}ngAfterViewInit(){this.cy=Y1({container:this.myGraph?.nativeElement,layout:{name:"preset"},motionBlur:!0,selectionType:"single",boxSelectionEnabled:!1}),this.preferences.grid&&this.cy?.snapToGrid(),this.cy.on("mouseover",e=>{this.logger.debug(e)}),this.cy.on("mouseout",e=>{this.logger.debug(e)}),this.cy.on("dblclick","node",e=>{this.items=this.nodeItem,this.selectorDisplay=this.base16.decode(e.target.id()),this.onDblClickNode(e)}),this.cy.on("dblclick","edge",e=>{this.items=this.edgeItem,this.selectorDisplay=this.base16.decode(e.target.id()),this.onDblClickEdge(e)}),this.cy.on("cxttap","node",e=>{this.items=this.nodeItem,this.selectorDisplay=this.base16.decode(e.target.id()),this.onRightClickNode(e)}),this.cy.on("cxttap","edge",e=>{this.items=this.edgeItem,this.selectorDisplay=this.base16.decode(e.target.id()),this.onRightClickEdge(e)}),this.cy.on("click",e=>{this.onClearAnySelection()}),this.cy.on("click","node",e=>{this.items=this.nodeItem,this.selectorDisplay=this.base16.decode(e.target.id()),this.onLeftClickNode(e)}),this.cy.on("click","edge",e=>{this.items=this.edgeItem,this.selectorDisplay=this.base16.decode(e.target.id()),this.onLeftClickEdge(e)}),this.cy.on("mouseover",e=>{}),this.route.params.subscribe(e=>{this.id=e.label;let n=this.graphsService.getGraph(this.id+"");n&&this.store.dispatch(x1({graph:n}))})}onRightClickNode(e){this.logger.info("[NODE] rclick",e)}onRightClickEdge(e){this.logger.info("[EDGE] rclick",e)}onDblClickNode(e){this.logger.info("[NODE] dblclick",e)}onDblClickEdge(e){this.logger.info("[EDGE] dblclick",e)}onLeftClickNode(e){this.logger.info("[NODE] lclick",e),this.selectorDisplay=this.base16.decode(e.target.id()),this.messageService.add({key:"bc",severity:"info",summary:`Select node ${e.target.data().label}`,detail:`${this.base16.decode(e.target.id())}`}),this.currentSelectedEdge=void 0,this.currentSelectedNode=e.target[0];let n="";if(this.currentSelectedNode.data().cdata&&(n=this.currentSelectedNode.data().cdata,this.currentSelectedNode.data().alias)){let r=this.base16.encode(this.currentSelectedNode.data().alias),s=this.cy?.$(`#${r}`);s&&(n=s[0].data().cdata)}this.captureData=this.currentSelectedNode.data().cdata?{editable:!1,isAlias:!!this.currentSelectedNode.data().alias,selectElementId:this.currentSelectedNode.data().id,selectElementCdata:DL.render(n),selectElementRawCdata:n}:{editable:!1,isAlias:!!this.currentSelectedNode.data().alias,selectElementId:this.currentSelectedNode.data().id,selectElementCdata:"",selectElementRawCdata:n},this._lockedElement=this.currentSelectedNode.locked()}onLeftClickEdge(e){this.logger.info("[EDGE] lclick",e),this.selectorDisplay=this.base16.decode(e.target.id()),this.messageService.add({key:"bc",severity:"info",summary:`Select edge ${e.target.data().label}`,detail:`${this.base16.decode(e.target.id())}`}),this.currentSelectedNode=void 0,this.currentSelectedEdge=e.target[0],this.captureData=this.currentSelectedEdge.data().cdata?{selectElementId:this.currentSelectedEdge.data().id,selectElementCdata:DL.render(this.currentSelectedEdge.data().cdata),selectElementRawCdata:this.currentSelectedEdge.data().cdata}:{selectElementId:this.currentSelectedEdge.data().id,selectElementCdata:"",selectElementRawCdata:this.currentSelectedEdge.data().cdata}}previewNewCData(e){e.selectElementCdata=DL.render(e.selectElementRawCdata)}applyNewCData(e){this.logger.info("Apply new data on id",this.base16.decode(e.selectElementId)),this.cy?.$(`#${e.selectElementId}`).data("cdata",e.selectElementRawCdata),this.displayMarkdown=!1}onCloneNode(e){1===e.length&&e[0].isNode()&&this.cy?.add(_r.map(e,n=>{let s=`${this.base16.decode(n.data()?.id).split("@")[0]}@${v4()}`,o={data:{id:this.base16.encode(s),label:n.data()?.label,cdata:"TODO ...",group:"",tag:n.data()?.tag},position:{x:n.position().x+50,y:n.position().y+50}};return n.data()?.parent&&(o.data.parent=n.data()?.parent),this.logger.info("Clone node",o),o}))}onCloneEdge(e){}onClearAnySelection(){this.logger.info("Clear selection"),this.selectorDisplay="",this.currentSelectedEdge=void 0,this.currentSelectedNode=void 0,this.items=this.coreItem}retrieveStyle(e){let n=this.styleService.getStyle(e)?.tags,r=[];_r.each(n,o=>{if(o.label)r.push({selector:`${o.selector}[tag = '${o.label}']`,css:o.style?.css?o.style?.css:{}});else{let l={selector:`${o.selector}`,css:o.style?.css?o.style?.css:{}};void 0===l.css.content&&(l.css.content=u=>{let p=u.data().cdata?"*":"",v=u.data().alias?"@":"";return u.data().label&&u.data().group?`${u.data().label} (${u.data().group}) ${p} ${v}`:u.data().label?`${u.data().label} ${p} ${v}`:""}),r.push(l)}});let s=[];return _r.each(r,o=>{s.push(o)}),s}onSelect(e){let n=[{opacity:.2},{opacity:1}];e._source?(this.animate(this.cy?.$(`#${e._source}`),n),this.animate(this.cy?.$(`#${e._target}`),n)):this.animate(this.cy?.$(`#${e._id}`),n)}animate(e,n){if(e&&e.length>0){let r=e[0],s=_r.map(n,o=>()=>{r.animate({style:o},{duration:250})});_r.each(s,o=>o())}}handleChangeLock(e){if(!this.currentSelectedNode)return;this.logger.info("lock",this.currentSelectedNode.data().id);let n=this.cy?.$(`#${this.currentSelectedNode.data().id}`);this.logger.info("lock",n),e.checked?(n?.lock(),n?.animate({style:{opacity:.2}},{duration:1e3})):(n?.animate({style:{opacity:1}},{duration:1e3}),n?.unlock())}resolveClonedId(e){let n=this.cy?.$(`#${e}`)[0];return n?.data().clone||n?.data().id||void 0}toSysGraph(e,n,r){let s={};return this.logger.info(`toSysGraph style: ${r}`),{id:e,style:r||"default",label:n,nodes:_r.map(this.cy?.nodes(),o=>{let l={id:o.data().clone||o.data().id||"",label:o.data().label||"",x:o.position().x||0,y:o.position().y||0,size:10,color:"0",group:o.data().group,tag:o.data().tag};return s[o.data().id||""]=l,o.data().alias&&(l.alias=o.data().alias),o.data().cdata&&(l.cdata=o.data().cdata),o.data().parent&&(l.parent=o.data().parent),l}),edges:_r.map(this.cy?.edges(),o=>{let l=this.resolveClonedId(o.data().source),u=this.resolveClonedId(o.data().target);if(void 0===l||void 0===u)throw this.logger.error("Internal error while resolving source and target"),new String("Internal error while resolving source and target");let p={id:o.data().id||"",label:o.data().label||"",source:l,target:u,cdata:o.data().cdata,tag:o.data().tag};return o.data().cdata&&(p.cdata=o.data().cdata),p})}}gexf(e,n,r){let s=this.toSysGraph(e,n,r);this.clipboardService.copyTextToClipboard(this.graphsService.toGexf(s).join("\n"))}graphml(e,n,r){let s=this.toSysGraph(e,n,r);this.clipboardService.copyTextToClipboard(this.graphsService.toGraphml(s).join("\n"))}updateChartOptions(){this.chartOptions=this.config&&this.config.dark?this.getDarkTheme():this.getLightTheme()}getLightTheme(){return{plugins:{legend:{labels:{color:"#495057"}}},scales:{r:{grid:{color:"#ebedef"}}}}}getDarkTheme(){return{plugins:{legend:{labels:{color:"#ebedef"}}},scales:{r:{grid:{color:"rgba(255,255,255,0.2)"}}}}}}return i.\u0275fac=function(e){return new(e||i)(Zt(E1),Zt(y4),Zt(sC),Zt(T1),Zt(Mp),Zt(fm),Zt(p2),Zt(ey),Zt(t_))},i.\u0275cmp=Ir({type:i,selectors:[["app-graph-cytoscape"]],viewQuery:function(e,n){if(1&e&&(vs(Qfe,5),vs(Jfe,5),vs(epe,5)),2&e){let r;vr(r=yr())&&(n.myGraph=r.first),vr(r=yr())&&(n.myPng=r.first),vr(r=yr())&&(n.myTreeTable=r.first)}},decls:47,vars:101,consts:[[3,"target","model"],["cm",""],["position","bottom-center","key","bc"],["class","cytoscape-selector",4,"ngIf"],[1,"dock-window"],["position","left",3,"model"],["pTemplate","item"],["position","right",3,"model"],["position","bottom",3,"model"],["area",""],[1,"flex"],["dropZoneDirective","",1,"w-12",3,"fileDropped"],["id","cytoscape",1,"cytoscape-container"],["myCytoscape",""],["header","Find any element",3,"visible","maximizable","draggable","resizable","visibleChange"],["selectionMode","single","filterMode","strict",3,"value","selection","filter","selectionChange","onNodeSelect"],["myTree",""],["header","Current node",3,"visible","modal","maximizable","draggable","resizable","visibleChange","onHide"],["class","grid p-fluid",4,"ngIf"],["pTemplate","footer"],["header","Current edge",3,"visible","modal","maximizable","draggable","resizable","visibleChange","onHide"],["header","Change style",3,"visible","modal","maximizable","draggable","resizable","visibleChange","onHide"],[1,"grid","p-fluid"],[1,"col-12"],["pTooltip","Tags","tooltipPosition","top"],["scrollHeight","120px","defaultLabel","Select a tag","filterBy","label",3,"options","ngModel","filter","showClear","ngModelChange"],["header","Documentation",3,"visible","modal","maximizable","draggable","resizable","visibleChange","onHide"],[3,"style",4,"ngIf"],["header","Group statistics",3,"visible","modal","maximizable","draggable","resizable","visibleChange"],["type","polarArea",3,"data","options"],["header","Tag statistics",3,"visible","modal","maximizable","draggable","resizable","visibleChange"],["header","Png file to export","header","Png export",3,"modal","visible","visibleChange"],["src",""],["myPng",""],["header","Find any alias",3,"modal","visible","visibleChange"],["myTreeAlias",""],[1,"cytoscape-selector"],[1,"field-checkbox"],["inputId","binary",3,"ngModel","binary","readonly","ngModelChange"],["for","binary"],["width","100%",3,"src","alt"],[1,"p-inputgroup"],[1,"p-inputgroup-addon"],["pTooltip","Internal ID to override current ID on next save or diagram export","tooltipPosition","top",1,"pi","pi-bookmark"],["type","text","pInputText","","placeholder","",3,"ngModel","ngModelChange"],["pTooltip","Label","tooltipPosition","top",1,"pi","pi-hashtag"],["pTooltip","Alias","tooltipPosition","top"],["scrollHeight","120px","defaultLabel","Select an alias","filterBy","label",1,"p-col",3,"options","ngModel","filter","showClear","ngModelChange"],["pTooltip","Group","tooltipPosition","top",1,"pi","pi-clone"],["pTooltip","Locked item ?","tooltipPosition","top",1,"p-inputgroup-addon"],["inputId","binary",3,"ngModel","binary","ngModelChange","onChange"],["type","text","pInputText","","placeholder","Locked","readonly","true"],["icon","pi pi-check","label","Ok","styleClass","p-button-text",3,"click"],["pTooltip","Source","tooltipPosition","top",1,"pi","pi-cog"],["type","text","pInputText","","placeholder","","readonly","true",3,"ngModel","ngModelChange"],["pTooltip","Target","tooltipPosition","top",1,"pi","pi-cog"],["pTemplate",""],["pInputTextarea","",3,"ngModel","keyup","ngModelChange"],[3,"innerHTML"],["styleClass","p-button-text","onLabel","Editable","offLabel","Readonly","onIcon","pi pi-check","offIcon","pi pi-times",3,"ngModel","ngModelChange",4,"ngIf"],["icon","pi pi-save","label","Update","styleClass","p-button-text",3,"click",4,"ngIf"],["styleClass","p-button-text","onLabel","Editable","offLabel","Readonly","onIcon","pi pi-check","offIcon","pi pi-times",3,"ngModel","ngModelChange"],["icon","pi pi-save","label","Update","styleClass","p-button-text",3,"click"]],template:function(e,n){1&e&&(ii(0,"p-contextMenu",0,1)(2,"p-toast",2),Ze(3,tpe,15,8,"span",3),lt(4,"div",4)(5,"p-dock",5),Ze(6,npe,1,2,"ng-template",6),ct(),lt(7,"p-dock",7),Ze(8,ipe,1,2,"ng-template",6),ct(),lt(9,"p-dock",8),Ze(10,rpe,1,2,"ng-template",6),ct()(),lt(11,"div",null,9)(13,"div",10)(14,"div",11),fn("fileDropped",function(s){return n.onFileDropped(s)}),ii(15,"div",12,13),ct()()(),lt(17,"p-dialog",14),fn("visibleChange",function(s){return n.displayFinder=s}),lt(18,"p-tree",15,16),fn("selectionChange",function(s){return n.selectedNode=s})("onNodeSelect",function(s){return n.nodeSelect(s)}),ct()(),lt(20,"p-dialog",17),fn("visibleChange",function(s){return n.displaySelectionNode=s})("onHide",function(){return n.onHide()}),Ze(21,spe,27,19,"div",18),Ze(22,ope,1,0,"ng-template",19),ct(),lt(23,"p-dialog",20),fn("visibleChange",function(s){return n.displaySelectionEdge=s})("onHide",function(){return n.onHide()}),Ze(24,ape,19,10,"div",18),Ze(25,lpe,1,0,"ng-template",19),ct(),lt(26,"p-dialog",21),fn("visibleChange",function(s){return n.displayChangeStyle=s})("onHide",function(){return n.onHide()}),lt(27,"div",22)(28,"div",23)(29,"div",24)(30,"p-dropdown",25),fn("ngModelChange",function(s){return n.captureData.style=s}),ct()()()(),Ze(31,cpe,1,0,"ng-template",19),ct(),lt(32,"p-dialog",26),fn("visibleChange",function(s){return n.displayMarkdown=s})("onHide",function(){return n.onHide()}),Ze(33,fpe,3,3,"p-splitter",27),Ze(34,gpe,2,3,"p-splitter",27),Ze(35,ype,2,2,"ng-template",19),ct(),lt(36,"p-dialog",28),fn("visibleChange",function(s){return n.displayGroupStatistic=s}),ii(37,"p-chart",29),ct(),lt(38,"p-dialog",30),fn("visibleChange",function(s){return n.displayTagStatistic=s}),ii(39,"p-chart",29),ct(),lt(40,"p-dialog",31),fn("visibleChange",function(s){return n.displayExportPng=s}),ii(41,"img",32,33)(43,"img"),ct(),lt(44,"p-dialog",34),fn("visibleChange",function(s){return n.displayAlias=s}),lt(45,"p-tree",15,35),fn("selectionChange",function(s){return n.selectedAlias=s})("onNodeSelect",function(s){return n.onSelectCurrentAlias(s)}),ct()()),2&e&&(ve("target",co(12))("model",n.items),Me(3),ve("ngIf",n.preferences.info),Me(2),ve("model",n.dockLeftItems),Me(2),ve("model",n.dockRightItems),Me(2),ve("model",n.dockBottomItems),Me(5),uo(Mo(88,_pe)),Me(3),uo(Mo(89,bpe)),ve("visible",n.displayFinder)("maximizable",!0)("draggable",!0)("resizable",!1),Me(1),ve("value",n.graphs)("selection",n.selectedNode)("filter",!0),Me(2),uo(Mo(90,Cpe)),ve("visible",n.displaySelectionNode)("modal",!0)("maximizable",!0)("draggable",!0)("resizable",!1),Me(1),ve("ngIf",n.currentSelectedNode),Me(2),uo(Mo(91,xpe)),ve("visible",n.displaySelectionEdge)("modal",!0)("maximizable",!0)("draggable",!0)("resizable",!1),Me(1),ve("ngIf",n.currentSelectedEdge),Me(2),uo(Mo(92,wpe)),ve("visible",n.displayChangeStyle)("modal",!0)("maximizable",!0)("draggable",!0)("resizable",!1),Me(4),uo(Mo(93,MS)),ve("options",n.captureData.styles)("ngModel",n.captureData.style)("filter",!0)("showClear",!0),Me(2),uo(Mo(94,jH)),ve("visible",n.displayMarkdown)("modal",!0)("maximizable",!0)("draggable",!0)("resizable",!1),Me(1),ve("ngIf",!n.captureData.isAlias&&n.captureData.editable),Me(1),ve("ngIf",n.captureData.isAlias||!n.captureData.editable),Me(2),uo(Mo(95,$H)),ve("visible",n.displayGroupStatistic)("modal",!0)("maximizable",!0)("draggable",!0)("resizable",!1),Me(1),uo(Mo(96,qH)),ve("data",n.dataGroupStatistics)("options",n.chartOptions),Me(1),uo(Mo(97,$H)),ve("visible",n.displayTagStatistic)("modal",!0)("maximizable",!0)("draggable",!0)("resizable",!1),Me(1),uo(Mo(98,qH)),ve("data",n.dataTagStatistics)("options",n.chartOptions),Me(1),uo(Mo(99,jH)),ve("modal",!0)("visible",n.displayExportPng),Me(4),uo(Mo(100,Ape)),ve("modal",!0)("visible",n.displayAlias),Me(1),ve("value",n.alias)("selection",n.selectedAlias)("filter",!0))},dependencies:[Wo,_l,U1,$1,b4,o_,N2,q1,Aw,mae,C4,v0,oC,ry,S4,Vle,M4,jfe,GH,ML],styles:[".cytoscape-container[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:0;overflow:hidden}.cytoscape-selector[_ngcontent-%COMP%]{position:absolute;top:100px;left:50px;width:50%;z-index:-10000}"]}),i})(),Mpe=(()=>{class i{constructor(e,n,r){this.messageService=e,this.databaseService=n,this.logger=r}uploadHandler(e){return new Promise(n=>{let r=new FileReader;r.addEventListener("loadend",p0(function*(){for(var s=new Uint8Array(r.result),o=s.length,l=[];o--;)l[o]=String.fromCharCode(s[o]);var u=window.btoa(l.join(""));n(u)})),r.readAsArrayBuffer(e)})}}return i.\u0275fac=function(e){return new(e||i)(jn(fm),jn(sC),jn(Mp))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Dpe=["myImg"];function Lpe(i,t){1&i&&(lt(0,"pre"),qi(1,"Drop here"),ct())}function Ppe(i,t){1&i&&ii(0,"img",2,3),2&i&&ve("src",_e().viewer,qd)}const Rpe=function(){return{height:"256px"}};let kpe=(()=>{class i{constructor(e,n,r,s){this.logger=e,this.messageService=n,this.clipboardService=r,this.converterService=s,this.viewer="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAgAElEQVR4nO3dT8hsW3rX8edUvfd27unb/iFR9NJpK90d2+hInAiJKHrVBjmke6Akk0hwboYOVFicQzqSIIZGBEVQcKLQoFwjIgYRB04jUTCgkmijgkZDHCR0MB73es9blV1v7T9rV63az289+7tgD5K367PqWWtX/Z573npX2ccf/5H3u+u97rJrRn7c0+Pf7114eHh4eHh4yl6oYvDw8PDw8PDKEbfJ8fDw8PDw8Fw918nx8PDw8PDw1vdcJ8fDw8PDw8Nb33OdHA8PDw8PD8/Hc50cDw8PDw8Pz8dznRwPDw8PDw/Px3OdHA8PDw8PD8/Hc50cDw8PDw8Pz8cLVQweHh4eHh5emReqGDw8PDw8PLwrvVDF4OHh4eHh4RH+eHh4eHh4eEqT4+Hh4eHh4RH+eHh4eHh4eHf2QhWDh4eHh4eHV+aFKgYPDw8PDw+vzAtVDB4eHh4eHl6ZF6oYPDw8PDw8vDIvVDF4eHh4eHh4xUCcYvDw8PDw8PDKEbfJ8fDw8PDw8Fw918nx8PDw8PDw1vdcJ8fDw8PDw8Nb33OdHA8PDw8PD8/Hc50cDw8PDw8Pz8dznRwPDw8PDw/Px3OdHA8PDw8PD8/Hc50cDw8PDw8Pz8cLVQweHh4eHh5emReqGDw8PDw8PLwrvVDF4OHh4eHh4RH+eHh4eHh4eEqT4+Hh4eHh4RH+eHh4eHh4eHf2QhWDh4eHh4eHV+aFKgYPDw8PDw+vzAtVDB4eHh4eHl6ZF6oYPDw8PDw8vDIvVDF4eHh4eHh4xUCcYvDw8PDw8PDKEbfJ8fDw8PDw8Fw918nx8PDw8PDw1vdcJ8fDw8PDw8Nb33OdHA8PDw8PD8/Hc50cDw8PDw8Pz8dznRwPDw8PDw/Px3OdHA8PDw8PD8/Hc50cDw8PDw8Pz8cLVQweHh4eHh5emReqGDw8PDw8PLwrvVDF4OHh4eHh4RH+eHh4eHh4eEqT4+Hh4eHh4RH+eHh4eHh4eHf2QhWDh4eHh4eHV+aFKgYPDw8PDw+vzAtVDB4eHh4eHl6ZF6oYPDw8PDw8vDIvVDF4eHh4eHh4xUCcYvDw8PDw8PDKEbfJ8fDw8PDw8Fw918nx8PDw8PDw1vdcJ8fDw5v2Hh4evrLb7f52/+p+9LeuvZ5bt3r5+SmvHx4eXoWhXgweXkRvv9+/efHixdvj1f3o6qvv1PLy81NePzw8vGHPdXI8PLx5r98AmFj4P2sAJNcPDw9v2HOdHA8Pb947NgAmGP69BkB2/fDw8IY918nx8PDmvd1u99pEwz9f+fkprx8eHt6w5zo5Hh7evNf9KJlo+D95qWa96vuBhxfFC1UMHl5QL5lu+F/VADS+H3h4IbxQxeDhBfWS6Yb/4gYgwH7g4cX0QhWDhxfDS6Yb/osagCD7gYcXzwtVDB5eHC+ZbvgXNwCB9gMPL5YXqhg8vFheMt3wL2oAgu0HHl4cL1QxeHjxvGS64T/bAAisHx4eHuGPh9ekl0w3/CcbAJH1w8PDG3lAnGLw8GJ6yXTDf7QBEFo/PDy8kQfFKQYPL6aXTDf8BxsAsfXDw8MbeWCcYvDwYnrJdMP/ogEQXD88PLyRB8cpBg8vppdMN/zPGgDR9cPDwxsB4hSDhxfTS6Yb/qcGQHj98PDwxhC3yfHw8EpGMt3wf2wAxNcPDw+v1lAvBg8vkteNJBz+xwZAdv3w8PAqDfVi8PCiebvd7rVw+L/Nz095/fDw8CoM9WLw8CJ6+/3+jWr458fn56e8fnh4eMOe6+R4eHjzXr8BMLHwf9YASK4fHh7esOc6OR4e3rx3bABMMPx7DYDs+uHh4Q17rpPj4eHNe/l37CYa/vl6+gxAtXrV9wMPL4rnOjkeHt68Z4VfBzx0rfTXA6lmver7gYcXxQtVDB5eUC+Zbvhf1QA0vh94eCG8UMXg4QX1kumG/+IGIMB+4OHF9EIVg4cXw0umG/6LGoAg+4GHF88LVQweXhwvmW74FzcAgfYDDy+WF6oYPLxYXjLd8C9qAILtBx5eHC9UMXh48bxkuuE/2wAIrB8eHh7hj4fXpJdMN/wnGwCR9cPDwxt5QJxi8PBiesl0w3+0ARBaPzw8vJEHxSkGDy+ml0w3/AcbALH1w8PDG3lgnGLw8GJ6yXTD/6IBEFw/PDy8kQfHKQYPL6aXTDf8zxoA0fXDw8MbAeIUg4cX00umG/6nBkB4/fDw8MYQt8nx8PBKRjLd8H9sAMTXDw8Pr9ZQLwYPL5LXjSQc/scGQHb98PDwKg31YvDwonm73e61cPi/zc9Pef3w8PAqDPVi8PAievv9/o1q+OfH5+envH54eHjDnuvkeHh4816/ATCx8H/WAEiuHx4e3rDnOjkeHt68d2wATDD8ew2A7Prh4eENe66T4+HhzXv5d+wmGv75evoMQLV61fcDDy+K5zo5Hh7evGeFXwc8dK301wOpZr3q+4GHF8ULVQweXlAvmW74X9UANL4feHghvFDF4OEF9ZLphv/iBiDAfuDhxfRCFYOHF8NLphv+ixqAIPuBhxfPC1UMHl4cL5lu+Bc3AIH2Aw8vlheqGDy8WF4y3fAvagCC7QceXhwvVDF4ePG8ZLrhP9sACKwfHh4e4Y+H16SXTDf8JxsAkfXDw8MbeUCcYvDwYnrJdMN/tAEQWj88PLyRB8UpBg8vppdMN/wHGwCx9cPDwxt5YJxi8PBiesl0w/+iARBcPzw8vJEHxykGDy+ml0w3/M8aANH1w8PDGwHiFIOHF9NLphv+pwZAeP3w8PDGELfJ8fDwSkYy3fB/bADE1w8PD6/WUC8GDy+S140kHP7HBkB2/fDw8CoN9WLw8KJ5u93utXD4v83PT3n98PDwKgz1YvDwInr7/f6Navjnx+fnp7x+eHh4w57r5Hh4ePNevwEwsfB/1gBIrh8eHt6w5zo5Hh7evHdsAEww/HsNgOz64eHhDXuuk+Ph4c17+XfsJhr++Xr6DEC1etX3Aw8viuc6OR4e3rxnhV8HPHSt9NcDqWa96vuBhxfFC1UMHl5QL5lu+F/VADS+H3h4IbxQxeDhBfWS6Yb/4gYgwH7g4cX0QhWDhxfDS6Yb/osagCD7gYcXzwtVDB5eHC+ZbvgXNwCB9gMPL5YXqhg8vFheMt3wL2oAgu0HHl4cL1QxeHjxvGS64T/bAAisHx4eHuGPh9ekl0w3/CcbAJH1w8PDG3lAnGLw8GJ6yXTDf7QBEFo/PDy8kQfFKQYPL6aXTDf8BxsAsfXDw8MbeWCcYvDwYnrJdMP/ogEQXD88PLyRB8cpBg8vppdMN/zPGgDR9cPDwxsB4hSDhxfTS6Yb/qcGQHj98PDwxhC3yfHw8EpGMt3wf2wAxNcPDw+v1lAvBg8vkteNJBz+xwZAdv3w8PAqDfVi8PCiebvd7rVw+L/Nz095/fDw8CoM9WLw8CJ6+/3+jWr458fn56e8fnh4eMOe6+R4eHjzXr8BMLHwf9YASK4fHh7esOc6OR4e3rx3bABMMPx7DYDs+uHh4Q17rpPj4eHNe/l37CYa/vl6+gxAtXrV9wMPL4rnOjkeHt68Z4VfBzx0rfTXA6lmver7gYcXxQtVDB5eUC+Zbvhf1QA0vh94eCG8UMXg4QX1kumG/+IGIMB+4OHF9EIVg4cXw0umG/6LGoAg+4GHF88LVQweXhwvmW74FzcAgfYDDy+WF6oYPLxYXjLd8C9qAILtBx5eHC9UMXh48bxkuuE/2wAIrB8eHh7hj4fXpJdMN/wnGwCR9cPDwxt5QJxi8PBiesl0w3+0ARBaPzw8vJEHxSkGDy+ml0w3/AcbALH1w8PDG3lgnGLw8GJ6yXTD/6IBEFw/PDy8kQfHKQYPL6aXTDf8zxoA0fXDw8MbAeIUg4cX00umG/6nBkB4/fDw8MYQt8nx8PBKRjLd8H9sAMTXDw8Pr9ZQLwYPL5LXjSQc/scGQHb98PDwKg31YvDwonm73e61cPi/zc9Pef3w8PAqDPVi8PAievv9/o1q+OfH5+envH54eHjDnuvkeHh4816/ATCx8H/WAEiuHx4e3rDnOjkeHt68d2wATDD8ew2A7Prh4eENe66T4+HhzXv5d+wmGv75evoMQLV61fcDDy+K5zo5Hh7evGeFXwc8dK301wOpZr3q+4GHF8ULVQweXlAvmW74X9UANL4feHghvFDF4OEF9ZLphv/iBiDAfuDhxfRCFYOHF8NLphv+ixqAIPuBhxfPC1UMHl4cL5lu+Bc3AIH2Aw8vlheqGDy8WF4y3fAvagCC7QceXhwvVDF4ePG8ZLrhP9sACKwfHh4e4Y+H16SXTDf8JxsAkfXDw8MbeUCcYvDwYnrJdMN/tAEQWj88PLyRB8UpBg8vppdMN/wHGwCx9cPDwxt5YJxi8PBiesl0w/+iARBcPzw8vJEHxykGDy+ml0w3/M8aANH1w8PDGwHiFIOHF9NLphv+pwZAeP3w8PDGELfJ8fDwSkYy3fB/bADE1w8PD6/WUC8GDy+S140kHP7HBkB2/fDw8CoN9WLw8KJ5u93utXD4v83PT3n98PDwKgz1YvDwInr7/f6Navjnx+fnp7x+eHh4w57r5Hh4ePNevwEwsfB/1gBIrh8eHt6w5zo5Hh7evHdsAEww/HsNgOz64eHhDXuuk+Ph4c17+XfsJhr++Xr6DEC1etX3Aw8viuc6OR4e3rxnhV8HPHSt9NcDqWa96vuBhxfFC1UMHl5QL5lu+F/VADS+H3h4IbxQxeDhBfWS6Yb/4gYgwH7g4cX0QhWDhxfDS6Yb/osagCD7gYcXzwtVDB5eHC+ZbvgXNwCB9gMPL5YXqhg8vFheMt3wL2oAgu0HHl4cL1QxeLW8j7vri8LPb0teMt3wn20ABNZvK15+vX4s/Pzw1LxQxeDV8v5Ed/1qd33TnjUBIs9va14y3fCfbABE1m8L3qG7fr67vtVdrwSfH56iF6oYvBreMfyPb+6nJkDk+W3RS6Yb/qMNgND6RfcO9i78j/sx2AQEqhevlheqGLxbvefhf2oCuiD4osDz26qXTDf8BxsAsfWL7B3sPPwHm4BA9eLV9EIVg3eLNxb+x3D45suXH3xPoHpb8pLphv9FAyC4flG9gw2H/1kTEKhevNpeqGLw7hX+x+vYBLReb2teMt3wP2sARNcvonew6fA/NQEPDw9fCVAv3j28UMXg3TP8T01A/nXAis8Pr9cACIb/qQEQXr9o3sHKwv+4p9967733vtpwvXj38kIVg3fv8D/+7OKvA+70/PDejWS64f/YAIivXyTvYMvC/9QEPP1LwL2fH16DnuvkeE2F/+ImQKTeZr1uJOHwPzYAsusXyDvYdeF/3N/JPxEUrBdvBc91crwmw7+4CRCpt2lvt9u9Fg7/t/n5Ka9fEO9gt4X/8VrUBARaP7xbh3oxeKuG/2wTIFJv895+v3+jGv758fn5Ka9fAO9gdcJ/URMQaP3wRjzXyfGaD//RJkCk3hBevwEwsfB/1gBIrl/j3sHqhn9RExBo/fAmPNfJ8Vb17hX+F02ASL1hvGMDYILh32sAZNevYe9g9wn/ySYg0PrhzXiuk+Ot5t07/E9NwAtODKzu5d+xm2j45+vpMwDV6lXfj5W8g903/AebgEDrh1fguU6Ot4q3VvgfPU4MrOxZ4dcBD10r/fVAqlmv+n6s4B1snfA/awICrR9eoReqGLyLsXb4Hy9ODKzrJdMN/6sagMb3457ewdYN/1MTwImB2/NCFYN3NrzC/9QEvODEwFpeMt3wX9wABNiPe3kH8wn/o8GJgVv3QhWzXc87/I8/48TAOl4y3fBf1AAE2Y97eAfzDf9TE8CJgRv1QhWzXU8l/Bc3ASLrp+gl0w3/4gYg0H7U9g6mEf5HjxMDt+aFKma7nlr4FzcBIuun6iXTCYerGoBg+1HTO5hW+B8vTgzciheqmO16quE/2wSIrJ+yl0wrHBY1AALrp+odTDP8FzUBgfZje16oYrbrqYf/aBMgsn7qXjK9cChqAETWT9E7mHb4FzUBgfZjm16oYrbptRL+F02AyPq14CXT3t9Uud7BEcg7WBvhP9kEBNqP7Xqhitme11r4n5qAF5wYuMRLpr2/qXK9FyOQd7C2wn+wCQi0H9v2QhWzLa/V8D96nBhY7iXT3t9Uud6zEcg7WJvhf9YEBNoPvFDFbMdrPfyPFycGlo1k2vubKtd7GoG8g7Ud/qcmgBMDA3mhitmGFyX8T03AC04MnBvJtPc3Va7XgnkHixH+R4MTA6N4oYqJ70UL/+PPODFweiTT3t8kvn6Ef32PEwMDea6T4xV5X7KY4b+4CRDZj9W8biTx/U3K6+fo5fs539eKr7caXn4/+tId1w9vBc91crxF3huL8+YxdHFi4IC32+1eK+9vfn7K6+fkHSzmf/n3vZ+44/rhreC5To53lXfWBDT85rG4CRDdj7t7+/3+jfL+5uenvH6EP+GPN+y5To53tffYBDT85rG4CRDfj7t6/QbABPe31wBIrh/hT/jjDXuuk+Nd7+12ux9t9M1jcRPQwn7c0zs2ACa6v08NgOz6Ef6EP96w5zo53m1e98b7tcbePBY3AS84MfD9/Dt209iPQe/pMwDV6lXfD8L/LuuH5+C5To53u5f/JcDaePO41tv8iYFW+HXAQ9dK+5tq1qu+H4R/9fXDc/JCFbNhb/CvA+auht6Mtn5iYDKt/Xjupcr1Lh6EP+GPt9wLVczGvUVNQINvRls+MTCZ3n70f54q17toEP6EP14lL1Qx2/OKmoCG34y2emJgMs39WNwABNmPPA5G+N+yfnhqXqhitutNNgENvxktbgJE9qOGl0x3P4obgED7cTDC/5b1w1PzQhWDx4mBWvtxq5dMez9S5XpnB+FP+ONV8kIVg3ccnBiotR+3eMm09yNVrndyEP6EP14lL1QxeM8HJwZq7ce1XjLt/UiV6x0dhD/hj1fRC1UM3oXHiYFa+3Gll0x7P1LlegcH4U/441X2QhWDN+hxYuBt6yfgJdPej1S53otB+BP+eHfwQhWDN+pxYuBt6+fsJdPej1S53rNB+BP+eHfyQhWDN+dxYuBt6+flJdPej1S53tMg/Al/vDt6oYrBK/E4MfC29fPwkmnvR6pcrzl7ByP8b1k/vFa8UMXglXqcGHjb+q3tJdPejyS+foQ/4Y9Xa6gXg1fkcWLgbeu3mteNJL4fSXn9CH/CH6/SUC8Gb5HHiYFa+zHo7Xa718r7kZ+f8voR/oQ/XoWhXgzeVR4nBmrtx4W33+/fKO9Hfn7K60f4E/54w57r5HgyHicGau3HmddvAArrXXU/eg2A5PoR/oQ/3rDnOjmejseJgVr70feODcDCelfbj6cGQHb9CP+7rR9e457r5HhaHicG3rZ+9/Ly79ivrHeV/Xj6DEC1egl/wh9vHc91cjw9jxMDb1u/e3hW+HXAI/WusR+pZr2EP+GPt44Xqhi8ah4nBt62frW9dGO9996PVLnexYPwJ/zxlnuhisGr6nFi4G3rV9NLFeq9536kyvUuGoQ/4Y9XyQtVDN6tHicG3rZ+tbxUqd577UeqXG/xIPwJf7xKXqhi8Gp5nBh42/rV8FLFeu+xH6lyvUWD8Cf88Sp5oYrBq+1xYqDvfqTK9dZev1S53tlB+BP+eJW8UMXg3cvjxEC//Uji65cq1zs5CH/CH6+SF6oYvHt7nBjosx9JfP1S5XpHB+FP+ONV9EIVg3d3jxMDXfYjia9fqlzv4CD8CX+8yl6oYvBW8Tgx8Lb1u8JL4uuXKtd7MQh/wh/vDl6oYvBW8zgx8Lb1W+gl8fVLles9G4Q/4Y93Jy9UMXhre5wYeNv6lY60Ur3XeqlyvadB+BP+eHf0QhWD5+FxYuBt61cy0or1XuOkyvXaQu9ghP8t64e3VS9UMXheHicG3rZ+cyOJr18i/Al/vHY918nxQnicGHjb+k2NJL5+ifAn/PHa9FwnxwvlcWLgHfZjt9u9Vl6//PwIf8Ifrz3PdXK8kB4nBlbej/1+/0Z5/fLzI/wJf7z2PNfJ8cJ6nBhYcT/6DYDi+vUaAMKf8MdryHOdHC+ux4mB9fbj2ACort9TA0D4E/54jXmuk+PF9jgx8Lb1O175d+wi9Q56T58BqFYv4X+X9cPDu/BcJ8eL73Fi4G3r9/G7f6ZLQvUOealmvYR/9fXDwxv0QhWDJ+txYuBt65fE6n3upcr19sfBCP9b1g8Pb+o/LuIUgyftcWLg9euXBOvt/zxVrvc4Dkb437J+eHjLvFDF4Kl5nBh43fol0XoXNwCEP+GPJ+qFKgZP1ePEwOXrl4TrLW4ACH/CH0/UC1UMnrrHiYHL1i+J15umal1Y78EI/1vWDw+P8MeT9zgxsHz9kni9aeyJL6z3YIT/LeuHh0f44zXjcWJg2fol8XrT2BMn/Al/PGEvVDF4zXmcGFi0fkm83jS2v4Q/4Y8n7IUqBq9JjxMDZ0cSrzdN7S/hT/jjiXqhisFr1uPEwMmRxOtNc/tL+JePFl+/eI16oYrBa93jxMDhkcTrTYX72x8HI/wvRuOvX7zWvFDF4EXwODHwciTxevPzI/wJf7zWvFDF4EXxODHwfCTxehPhT/jjteu5To6HNzA4MfA3RhKvNxH+hD9em57r5Hh4E4MTAz9+/FPJ18r15udH+BP+eO15rpPj4RWMzZ8YuN/v3yjXm58f4U/447XnuU6Oh1c4Nn1iYL8BUKy31wAQ/oVD/PWGtxHPdXI8vFJvyycGHhsA1XqfGgDCv3C08HrD24bnOjke3hJvqycG5t+xizy/Qe/pMwDPt+5ghP/FaOn1hhffc50cD2+pt8UTA63w64Ad603Ptu5ghP/FaPH1hhfbC1UM3ma8rZ0YmMSe33Mv9bbuYIT/xWj89YYX1AtVDN6mvC2dGJgEn1//5+npeR6M8L8YQV5veFvwQhWDF93byomBSfT59RuAgxH+FyPY6w0vsheqGLyteFs4MfDrws8vXz9phP/FEHl94OER/nihvegnBv6y+PP7JfHnR/jj4RH+eIG96CcG4hH+eHh1vVDF4G3di35iIB7hj4dXzwtVDN7mvQ2cGIhH+OPh1fFCFYOH9/EmTgzEI/zx8G73QhWDh/d0beDEQDzCHw/vNi9UMXh45170EwPxCH88vOu9UMXg4V160U8MxCP88fCu80IVg4c37EU/MRCP8MfDu9pznRwPbwUv+omBeIQ/Ht59h3oxeHgTI/qJgXiEPx7efYZ6MXh4BYMTA/EIfzy8JY9roRg8vMLBiYHb9gh/PLzu8a6T4+F5eZwYuFmP8MfDe/JcJ8fD8/Q4MXBzHuGPh9fzXCfHw/P2ODFwMx7hj4f3zAtVDB7elR4nBsb2CH88vAEvVDF4eDd4nBgY0yP88fBKvVDF4OEt8zgxMJZH+OPhEf54eMXej5lGeOHd5v3Y1CYPDZH7Dw+P8MfDc/Q4MbBtj//yx8Mj/PHwrvY4MbBNj/DHwyP88fBu9jgxsC2P8MfDW+KFKgYPr7LHiYHNeIQ/Ht5SL1QxeHh38DgxUN4j/PHwrvFCFYOHdyePEwNlPcIfD+9aL1QxeHj39TgxUMsj/PHwbvFCFYOHd3+PEwM1PMIfD+9WL1QxeHjreJwYSPjj4YXxXCfHw2vQm2wCGg5XdY/wx8Mj/PHw3D1ODCT88fCa9Vwnx8ML4HFiIOGPh9ek5zo5Hl4QjxMDCX88vOY818nx8KJ4nBhI+OPhtea5To6HF8nb73c/3li4qnt8pS8e3h0918nx8KJ5nBjIf/nj4bXihSoGD0/E48RAwh8PT94LVQwenpDHiYGEPx5eW16oYvDwfD1ODCT88fDa8EIVg4en4XFiIOGPh6fthSoGD0/L48RAwh8PT9MLVQwenqbHiYGEPx6elidazEfd9aeP18PDww901w/2rh/o/3zpVcH73sr1ngZeaI8TAwl/vNu9/P675vv9Uu+jyvUWj8We6M3wyrTf3D6pXK/hbcPjxEDCH+9mL7//qt3P/etV5XqLxlWe6M3w2AAIv7l9IrF5eE16+/3+a2L3M+GP15JX1AA4vj5mGwCZ/VC8GbrxSvzN7ROJzcNr1tvwiYGEP96t3mwD4Pz6mGwABNbv7MFyN8PDw8NXlN/cujfvfyyxeXite1s7MZDwx6vhTTYAAq+P0QZAZP3OALmboRtfVX5ze9YAyK0fXlPeVk4MJPzxanmjDYDI62OwARBav3PEbfIRr98AmOCbW68BiPBiwvP38rfeKYV1bY9v9cOr6Q02AEKvj4sGQGz9bhv3LubYAJjom9tTAyCzeXghvKgnBvJf/ni1vYsGQOz1cdYACK7f9WONYvJnAEz4ze2pAahWr9LNgOfqRTsxkPDHu4d31gAIvj5ODYDo+l031irGeucALL1Wuhk+qVmvys2AJ+FFOTGQ8Me7l3dqAERfH68q12v38lwnn/CuagBWvBkWNwAt3Ax4Ml7rJwYS/nj39B4bAOHXxyvx9Tt5rpNPeIsbgJVvhkUNQCs3A56O1/CJgYQ/3l29bnwiHP7HBkB2/fqe6+QT3qIGwOFmKG4A1F9MeLpegycGEv54d/fyZ7CEw/9t/gyb8vr1PdfJJ7ziBsCpEyxqAFp4MeFpew2dGEj4463iPW8ATOz1kf+KTXn9+p7r5BNeUQPg+M9Asw1AKy8mvCY89RMDCX+81bx+A2Bi4f+sAZBcv77nOvmEN9sAOP8OaLIBEFg/vHie6omBhD/eqt6xATDB8O81ALLrN+mJ3AyTDYDAB0BGGwCR9cOL6RU1AYQ/XmQvNwAmGv75evoMQLV6V9sPoZthtAEQCP/RBkBo/fDieionBhL+eC6eFX4d8NC10utj9uuAl9S7yn6I3QyDDYBI+A82AGLrhxfb8z4xkPDH8/SuagBWfH0sbgBc90PwZrhoAITC/6IBEFw/vPie14mBhD+et7e4AVg5PxY1AK77IXoznDUAYuF/1ri61v4AABCHSURBVACIrh/eNry1Twwk/PEUvEUNgEN+FDcA7vshejOcGgDB8D81AO6bh7d5b8UTAwl/PBWvuAFwyo+iBkBiP0RvhscGQDT8HxsAic3Dw/t4lRMDCX88Ja+oAXDMj9kGQGY/FG+GbrwSDv9jA+C/eXh4T9cdTwwk/PHUvNkGwDk/JhsAgfU7e7DczZD/jlI4/N/mv0OV2Dw8vHOv9omBhD+eojfZAAj8x+NoAyCyfmeA3M2QT1JSDf/8+GcNgNz64W3aq3ViIOGPp+qNNgAC4T/aAAit3zniNvmI128ATCz8nzUAEV5MePG8W08MJPzxlL3BBkAk/AcbALH1u23cu5hjA2CC4d9rAGQ2Dw9vYFx7YiDhj6fuXTQAQuF/0QAIrt/1Y41i8mcATDT8ew1AtXqVbga8UN7SEwMJf7wWvLMGQCz8zxoA0fW7bqxVjBV+HfDQtdLNMPt1wEvqVbkZ8EJ6pScGEv54rXinBkAw/E8NgPD6nTzXySe8qxqAFW+GxQ1ACzcDXlhv7sRAwh+vJe+xARAN/8cGQHz9Tp7r5BPe4gZg5ZthUQPQys2AF9ebODGQ8MdryuvGJ8Lhf2wAZNev77lOPuEtagAcbobiBkD9xYS3HW/gxEDCH685L38GSzj83+bPsCmvX99znXzCK24AnDrBogaghRcT3ra83omBhD9ek97zBsCEwj8/Pv8Vm/L69T3XySe8ogbA8Z+BZhuAVl5MeJv0viz+/PDwRr1+A2Bi4f+sAZBcv77nOvmEN9sAOP8OaLIBEFg/PDw8vJDesQEwwfDvNQCy6zfpidwMkw2AwAdARhsAkfXDw8PDC+nlBsBEwz9fT58BqFbvavshdDOMNgAC4T/aAAitHx4eHl5Izwq/DnjoWik/Zr8OeEm9q+yH2M0w2ACIhP9gAyC2fnh4eHhRvasagBXzY3ED4LofgjfDRQMgFP4XDYDg+uHh4eFF9RY3ACvnx6IGwHU/RG+GswZALPzPGgDR9cPDw8OL6i1qABzyo7gBcN8P0Zvh1AAIhv+pAXDfPDw8PLztecUNgFN+FDUAEvshejM8NgCi4f/YAEhsHh4eHt72vKIGwDE/ZhsAmf1QvBm68Uo4/I8NgP/m4eHh4W3Pm20AnPNjsgEQWL+zB8vdDPnvKIXD/23+O1SJzcPDw8PbnjfZAAj8x+NoAyCyfmeA3M2QT1JSDf/8+GcNgNz64eHh4QX2RhsAgfAfbQCE1u8ccZt8xOs3ACYW/s8agAgvJjw8PLyWvMEGQCT8BxsAsfW7bdy7mGMDYILh32sAZDYPDw8Pb0PeRQMgFP4XDYDg+l0/1igmfwbARMO/1wBUq1fpZsDDw8MT984aALHwP2sARNfvurFWMVb4dcBD10o3w+zXAS+pV+VmwMPDw2vAOzUAguF/agCE1+/kuU4+4V3VAKx4MyxuAFq4GfDw8PAa8B4bANHwf2wAxNfv5LlOPuEtbgBWvhkWNQCt3Ax4eHh46l43PhEO/2MDILt+fc918glvUQPgcDMUNwDqLyY8PDy8lrz8GSzh8H+bP8OmvH59z3XyCa+4AXDqBIsagBZeTHh4eHgtec8bABMK//z4/FdsyuvX91wnn/CKGgDHfwaabQBaeTHh4eHhteT1GwATC/9nDYDk+vU918knvNkGwPl3QJMNgMD64eHh4YX0jg2ACYZ/rwGQXb9JT+RmmGwABD4AMtoAiKwfHh4eXkgvNwAmGv75evoMQLV6V9sPoZthtAEQCP/RBkBo/fDw8PBCelb4dcBD10r5Mft1wEvqXWU/xG6GwQZAJPwHGwCx9cPDw8OL6l3VAKyYH4sbANf9ELwZLhoAofC/aAAE1w8PDw8vqre4AVg5PxY1AK77IXoznDUAYuF/1gCIrh8eHh5eVG9RA+CQH8UNgPt+iN4MpwZAMPxPDYD75uHh4eFtzytuAJzyo6gBkNgP0ZvhsQEQDf/HBkBi8/Dw8PC25xU1AI75MdsAyOyH4s3QjVfC4X9sAPw3Dw8PD2973mwD4Jwfkw2AwPqdPVjuZsh/Rykc/m/z36FKbB4eHh7e9rzJBkDgPx5HGwCR9TsD5G6GfJKSavjnxz9rAOTWDw8PDy+wN9oACIT/aAMgtH7niNvkI16/ATCx8H/WAER4MeHh4eG15A02ACLhP9gAiK3fbePexRwbABMM/14DILN5eHh4eBvyLhoAofC/aAAE1+/6sUYx+TMAJhr+vQagWr1KNwMeHh6euHfWAIiF/1kDILp+1421irHCrwMeula6GWa/DnhJvSo3Ax4eHl4D3qkBEAz/UwMgvH4nz3XyCe+qBmDFm2FxA9DCzYCHh4fXgPfYAIiG/2MDIL5+J8918glvcQOw8s2wqAFo5WbAw8PDU/e68Ylw+B8bANn163uuk094ixoAh5uhuAFQfzHh4eHhteTlz2AJh//b/Bk25fXre66TT3jFDYBTJ1jUALTwYsLDw8NryXveAJhQ+OfH579iU16/vuc6+YRX1AA4/jPQbAPQyosJDw8PryWv3wCYWPg/awAk16/vuU4+4c02AM6/A5psAATWDw8PDy+kd2wATDD8ew2A7PpNeiI3w2QDIPABkNEGQGT98PDw8EJ6uQEw0fDP19NnAKrVu9p+CN0Mow2AQPiPNgBC64eHh4cX0rPCrwMeulbKj9mvA15S7yr7IXYzDDYAIuE/2ACIrR8eHh5eVO+qBmDF/FjcALjuh+DNcNEACIX/RQMguH54eHh4Ub3FDcDK+bGoAXDdD9Gb4awBEAv/swZAdP3w8PDwonqLGgCH/ChuANz3Q/RmODUAguF/agDcNw8PDw9ve15xA+CUH0UNgMR+iN4Mjw2AaPg/NgASm4eHh4e3Pa+oAXDMj9kGQGY/FG+GbrwSDv9jA+C/eXh4eHjb82YbAOf8mGwABNbv7MFyN0P+O0rh8H+b/w5VYvPw8PDwtudNNgAC//E42gCIrN8ZIHczdOP7VcM/P75rAP6JxObh4eHhbc/7KdMN/3z9qcr1Do4qnuLN0I0/phr+7xqAFz8jsXl4eHh42/P+jemGf77+cOV6L0Ztz3Xy596nPvWpP6ga/k/X//30p19+QWXz8PDw8DbiHbrr1003/PP1+yvWezFqe66TD3kffPBtv9d0w//o/b1a9SrdDHh4eHjC3t837fDP1xeF1+/6sVYxu93ud5p2+B+vv6S4fnh4eHjBvBfdlUw//PP12wXXb9BznXzCy1/48GumHf7H65921/d1115o/fDw8PAiePl99Q911z8zjff7uSvn1oPQ+k16rpPPeD9n+uHfv361u/5Ld/2noat7/MU19r8tufDw8PCCe/n9NL+vKr7fj13/vpXwz47r5DOe+nGPeHh4eHh4/esfthL+sw2AcyfzE9b+zYCHh4eHtxFvt9v9eCvhP9kACPwzxg9b4zcDHh4eHt52vIeHhz/XSviPfgZAIPzz+G5r/GbAw8PDw9uO9/Llyy+1Ev6Dnkj4H8cvWMM3Ax4eHh7eZrz/TPjX9f6utXsz4OHh4eFtxNvtdn+H8K/r/Vlr9GbAw8PDw9uO9/Cw/yHCv6737d31LWvwZsDDw8PD24z3rf1+l/Nq8SD8p8c/avBmwMPDw8PbjvcNu2K4569y+OfHPTw8/JkGbwY8PDw8vO14328Lh3v4Pz1INvzz47/whe/6sFvkX2zsZsDDw8PD24b3i901f6xub0iE/9MDZcP/aO33u7/W0M2Ah4eHh7cdL59aWzxkwv/pwdLhn6/PfObD7+x+9CvWxs2Ah4eHh7cNL39Z0UdWOKTC/wmQDv+e9zdM/2bAw8PDw9uO93UrHHLhf0TcJl/mfc6e/iSw9Apwc+Hh4eHhaXq/1l2/ywqGZPhfOxyL+eumezPg4eHh4W3H+0krGIR/Pe83ddd/M82bAQ8PDw9vG95/767fYjOD8K/v/ZDp3Qx4eHh4eNvxftBmhkheTnquk1/pveiuf2laNwMeHh4e3ja8n7aZIZSXk57r5Dd439Vdv2QaNwMeHh4e3ja8/91dB5sYgnk56rlOfqP3qrv+n8W6ufDw8PDwNL2cN1+1iSGcl4Oe6+S3et34eqCbCw8PDw9P1/urNjHU83LIa7qYz33uOz/c7Xb/OsjNhYeHh4en6f0rmzjvv4W8HPKaL+Y7vuPbf9tu9+JnG7+58PDw8PA0vX/XXb/VRkZLeTnrtVjMhx9++tD96BeszZsLDw8PD0/T+2Z35e+iGRwt5mWo8O9539Nd/8Paurnw8PDw8DS9nCe/x0ZG43kpNHk97/Pd9R+sjZsLDw8PD0/T+/nu+pKNjCB5KTB5fe93dNfPmPbNhYeHh4en6f3b7vqsjYxQeRmqmN8Y+Yzmf2GaNxceHh4enqb3z7vrN9vIEMm3el6oYs7HvrtSd/266dxceHh4eHh6Xj7k56/Yu9wYHGL5VscLVczw+KP27pubIt2seHh4eHh1vPxhvz9pE0M4327zQhUzMna73Ufd9Y0gNyseHh4eXh3vH9i7z42NDvV8u8kLVcyM9/777/3x3e7FzzV8s+Lh4eHh3e79x+76ss2MlvLtKi9UMQXeZz/70We6H/1le/ZtgqVXkJsfDw8Pb4ve/+quv9hd32Yzo8V8W+yFKmaZ92F3/Yg9fT6g5Apw8+Ph4eFt0fuf9u5D4fkvxGZHgHy731AvZqH3aXvXCPys6dyseHh4eHi3e/l9/c9310srHMHyre5QL+ZG7/fZuz8FOftXgYZvfjw8PLytefmf+f9md32fLRxieXR3z3VyYS//Legf6K6/sNvtfqq7oX65oZsfDw8Pb0ver3Tv0z+93+/fvPfee19++fKD4a+5nRnCeXQ3z3XyVrzD4XOf+dSn3v/e7gb74e5HX+uub9i74yL/a3f9H4v1YsLDw8NT8/L7bH6/ze+7+f33R/P7cX5fzu/Pyvmh7LlOHszLHy7JXxv5+edXd6N//oMPPvjdL1++/NLxyv93/v8P/e/nLjw8PLwNePn99OJDeyLv9yE818nx8PDw8PDwfDzXyfHw8PDw8PB8vFDF4OHh4eHh4ZV5oYrBw8PDw8PDu9ILVQweHh4eHh4e4Y+Hh4eHh4enNDkeHh4eHh4e4Y+Hh4eHh4d3Zy9UMXh4eHh4eHhlXqhi8PDw8PDw8Mq8UMXg4eHh4eHhlXmhisHDw8PDw8Mr80IVg4eHh4eHh1cMxCkGDw8PDw8PrxxxmxwPDw8PDw/P1XOdHA8PDw8PD299z3VyPDw8PDw8vPU918nx8PDw8PDwfDzXyfHw8PDw8PB8PNfJ8fDw8PDw8Hw818nx8PDw8PDwfDzXyfHw8PDw8PB8vFDF4OHh4eHh4ZV5oYrBw8PDw8PDu9ILVQweHh4eHh4e4Y+Hh4eHh4enNDkeHh4eHh4e4Y+Hh4eHh4d3Zy9UMXh4eHh4eHhlXqhi8PDw8PDw8Mq8UMXg4eHh4eHhlXmhisHDw8PDw8Mr80IVg4eHh4eHh1cMxCkGDw8PDw8PrxxxmxwPDw8PDw/P1XOdHA8PDw8PD299z3VyPDw8PDw8vPU918nx8PDw8PDwfDzXyfHw8PDw8PB8PNfJ8fDw8PDw8Hw818nx8PDw8PDwfDzXyfHw8PDw8PB8vFDF4OHh4eHh4ZV5oYrBw8PDw8PDK/P+P4jnb7D01hqeAAAAAElFTkSuQmCC"}ngOnInit(){}onFileDropped(e){this.converterService.uploadHandler(e[0]).then(n=>{this.logger.info(n),n.startsWith("PHN2Z")&&(this.messageService.add({severity:"info",summary:"Copied to clipboard/SVG",detail:`Filename ${e[0].name}`}),this.viewer="data:image/svg+xml;base64,"+n,this.clipboardService.copyTextToClipboard("data:image/svg+xml;base64,"+n)),n.startsWith("iVBOR")&&(this.messageService.add({severity:"info",summary:"Copied to clipboard/PNG",detail:`Filename ${e[0].name}`}),this.viewer="data:image/png;base64,"+n,this.clipboardService.copyTextToClipboard("data:image/png;base64,"+n))})}}return i.\u0275fac=function(e){return new(e||i)(Zt(Mp),Zt(fm),Zt(T1),Zt(Mpe))},i.\u0275cmp=Ir({type:i,selectors:[["app-converter"]],viewQuery:function(e,n){if(1&e&&vs(Dpe,5),2&e){let r;vr(r=yr())&&(n.myImg=r.first)}},decls:4,vars:3,consts:[["dropZoneDirective","",3,"fileDropped"],["pTemplate",""],["alt","drop here",3,"src"],["myImg",""]],template:function(e,n){1&e&&(ii(0,"p-toast"),lt(1,"p-splitter",0),fn("fileDropped",function(s){return n.onFileDropped(s)}),Ze(2,Lpe,2,0,"ng-template",1),Ze(3,Ppe,2,1,"ng-template",1),ct()),2&e&&(Me(1),uo(Mo(2,Rpe)))},dependencies:[_l,q1,C4,ML]}),i})();const Ope=function(i,t,e){return{"p-inputswitch p-component":!0,"p-inputswitch-checked":i,"p-disabled":t,"p-focus":e}},Fpe={provide:bc,useExisting:ds(()=>XH),multi:!0};let XH=(()=>{class i{constructor(e){this.cd=e,this.trueValue=!0,this.falseValue=!1,this.onChange=new qn,this.modelValue=!1,this.focused=!1,this.onModelChange=()=>{},this.onModelTouched=()=>{}}onClick(e,n){!this.disabled&&!this.readonly&&(e.preventDefault(),this.toggle(e),n.focus())}onInputChange(e){this.readonly||this.updateModel(e,e.target.checked)}toggle(e){this.updateModel(e,!this.checked())}updateModel(e,n){this.modelValue=n?this.trueValue:this.falseValue,this.onModelChange(this.modelValue),this.onChange.emit({originalEvent:e,checked:this.modelValue})}onFocus(e){this.focused=!0}onBlur(e){this.focused=!1,this.onModelTouched()}writeValue(e){this.modelValue=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}checked(){return this.modelValue===this.trueValue}}return i.\u0275fac=function(e){return new(e||i)(Zt(Zo))},i.\u0275cmp=Ir({type:i,selectors:[["p-inputSwitch"]],hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass",tabindex:"tabindex",inputId:"inputId",name:"name",disabled:"disabled",readonly:"readonly",trueValue:"trueValue",falseValue:"falseValue",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy"},outputs:{onChange:"onChange"},features:[To([Fpe])],decls:5,vars:16,consts:[[3,"ngClass","ngStyle","click"],[1,"p-hidden-accessible"],["type","checkbox","role","switch",3,"checked","disabled","change","focus","blur"],["cb",""],[1,"p-inputswitch-slider"]],template:function(e,n){if(1&e){const r=Pi();lt(0,"div",0),fn("click",function(o){wt(r);const l=co(3);return At(n.onClick(o,l))}),lt(1,"div",1)(2,"input",2,3),fn("change",function(o){return n.onInputChange(o)})("focus",function(o){return n.onFocus(o)})("blur",function(o){return n.onBlur(o)}),ct()(),ii(4,"span",4),ct()}2&e&&(Ur(n.styleClass),ve("ngClass",wu(12,Ope,n.checked(),n.disabled,n.focused))("ngStyle",n.style),Me(2),ve("checked",n.checked())("disabled",n.disabled),mr("aria-label",n.ariaLabel)("id",n.inputId)("name",n.name)("tabindex",n.tabindex)("aria-checked",n.checked())("aria-labelledby",n.ariaLabelledBy))},dependencies:[bo,Qo],styles:['.p-inputswitch{position:relative;display:inline-block;-webkit-user-select:none;user-select:none}.p-inputswitch-slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0}.p-inputswitch-slider:before{position:absolute;content:"";top:50%}\n'],encapsulation:2,changeDetection:0}),i})(),Npe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({imports:[Ns]}),i})();function Bpe(i,t){if(1&i&&(lt(0,"span",10),qi(1),ct()),2&i){const e=_e(2);mr("id",e.id+"_header"),Me(1),as(e.header)}}function zpe(i,t){1&i&&Ki(0)}function Vpe(i,t){}function Upe(i,t){1&i&&Ze(0,Vpe,0,0,"ng-template")}function Hpe(i,t){if(1&i){const e=Pi();lt(0,"button",11),fn("click",function(r){return wt(e),At(_e(2).onIconClick(r))})("keydown.enter",function(r){return wt(e),At(_e(2).onIconClick(r))}),ii(1,"span"),ct()}if(2&i){const e=_e(2);mr("aria-label","collapse button")("id",e.id+"-label")("aria-controls",e.id+"-content")("aria-expanded",!e.collapsed),Me(1),Ur(e.collapsed?e.expandIcon:e.collapseIcon)}}const Gpe=function(i,t,e){return{"p-panel-icons-start":i,"p-panel-icons-end":t,"p-panel-icons-center":e}};function Wpe(i,t){if(1&i){const e=Pi();lt(0,"div",6),fn("click",function(r){return wt(e),At(_e().onHeaderClick(r))}),Ze(1,Bpe,2,2,"span",7),$u(2,1),Ze(3,zpe,1,0,"ng-container",4),lt(4,"div",8),Ze(5,Upe,1,0,null,4),Ze(6,Hpe,2,6,"button",9),ct()()}if(2&i){const e=_e();mr("id",e.id+"-titlebar"),Me(1),ve("ngIf",e.header),Me(2),ve("ngTemplateOutlet",e.headerTemplate),Me(1),ve("ngClass",wu(6,Gpe,"start"===e.iconPos,"end"===e.iconPos,"center"===e.iconPos)),Me(1),ve("ngTemplateOutlet",e.iconTemplate),Me(1),ve("ngIf",e.toggleable)}}function jpe(i,t){1&i&&Ki(0)}function $pe(i,t){1&i&&Ki(0)}function qpe(i,t){if(1&i&&(lt(0,"div",12),$u(1,2),Ze(2,$pe,1,0,"ng-container",4),ct()),2&i){const e=_e();Me(2),ve("ngTemplateOutlet",e.footerTemplate)}}const Xpe=["*",[["p-header"]],[["p-footer"]]],Ype=function(i,t){return{"p-panel p-component":!0,"p-panel-toggleable":i,"p-panel-expanded":t}},Kpe=function(i){return{transitionParams:i,height:"0",opacity:"0"}},Zpe=function(i){return{value:"hidden",params:i}},Qpe=function(i){return{transitionParams:i,height:"*",opacity:"1"}},Jpe=function(i){return{value:"visible",params:i}},ege=["*","p-header","p-footer"];let tge=0,nge=(()=>{class i{constructor(e){this.el=e,this.collapsed=!1,this.iconPos="end",this.expandIcon="pi pi-plus",this.collapseIcon="pi pi-minus",this.showHeader=!0,this.toggler="icon",this.collapsedChange=new qn,this.onBeforeToggle=new qn,this.onAfterToggle=new qn,this.transitionOptions="400ms cubic-bezier(0.86, 0, 0.07, 1)",this.id="p-panel-"+tge++}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"header":this.headerTemplate=e.template;break;case"content":default:this.contentTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"icons":this.iconTemplate=e.template}})}onHeaderClick(e){"header"===this.toggler&&this.toggle(e)}onIconClick(e){"icon"===this.toggler&&this.toggle(e)}toggle(e){if(this.animating)return!1;this.animating=!0,this.onBeforeToggle.emit({originalEvent:e,collapsed:this.collapsed}),this.toggleable&&(this.collapsed?this.expand(e):this.collapse(e)),e.preventDefault()}expand(e){this.collapsed=!1,this.collapsedChange.emit(this.collapsed)}collapse(e){this.collapsed=!0,this.collapsedChange.emit(this.collapsed)}getBlockableElement(){return this.el.nativeElement.children[0]}onToggleDone(e){this.animating=!1,this.onAfterToggle.emit({originalEvent:e,collapsed:this.collapsed})}}return i.\u0275fac=function(e){return new(e||i)(Zt(Xn))},i.\u0275cmp=Ir({type:i,selectors:[["p-panel"]],contentQueries:function(e,n,r){if(1&e&&(cl(r,y1,5),cl(r,_l,4)),2&e){let s;vr(s=yr())&&(n.footerFacet=s.first),vr(s=yr())&&(n.templates=s)}},hostAttrs:[1,"p-element"],inputs:{toggleable:"toggleable",header:"header",collapsed:"collapsed",style:"style",styleClass:"styleClass",iconPos:"iconPos",expandIcon:"expandIcon",collapseIcon:"collapseIcon",showHeader:"showHeader",toggler:"toggler",transitionOptions:"transitionOptions"},outputs:{collapsedChange:"collapsedChange",onBeforeToggle:"onBeforeToggle",onAfterToggle:"onAfterToggle"},ngContentSelectors:ege,decls:7,vars:23,consts:[[3,"ngClass","ngStyle"],["class","p-panel-header",3,"click",4,"ngIf"],["role","region",1,"p-toggleable-content"],[1,"p-panel-content"],[4,"ngTemplateOutlet"],["class","p-panel-footer",4,"ngIf"],[1,"p-panel-header",3,"click"],["class","p-panel-title",4,"ngIf"],["role","tablist",1,"p-panel-icons",3,"ngClass"],["type","button","class","p-panel-header-icon p-panel-toggler p-link","pRipple","","role","tab",3,"click","keydown.enter",4,"ngIf"],[1,"p-panel-title"],["type","button","pRipple","","role","tab",1,"p-panel-header-icon","p-panel-toggler","p-link",3,"click","keydown.enter"],[1,"p-panel-footer"]],template:function(e,n){1&e&&(dg(Xpe),lt(0,"div",0),Ze(1,Wpe,7,10,"div",1),lt(2,"div",2),fn("@panelContent.done",function(s){return n.onToggleDone(s)}),lt(3,"div",3),$u(4),Ze(5,jpe,1,0,"ng-container",4),ct(),Ze(6,qpe,3,1,"div",5),ct()()),2&e&&(Ur(n.styleClass),ve("ngClass",ys(12,Ype,n.toggleable,!n.collapsed&&n.toggleable))("ngStyle",n.style),mr("id",n.id),Me(1),ve("ngIf",n.showHeader),Me(1),ve("@panelContent",n.collapsed?Bi(17,Zpe,Bi(15,Kpe,n.animating?n.transitionOptions:"0ms")):Bi(21,Jpe,Bi(19,Qpe,n.animating?n.transitionOptions:"0ms"))),mr("id",n.id+"-content")("aria-hidden",n.collapsed)("aria-labelledby",n.id+"-titlebar"),Me(3),ve("ngTemplateOutlet",n.contentTemplate),Me(1),ve("ngIf",n.footerFacet||n.footerTemplate))},dependencies:[bo,Wo,rc,Qo,_d],styles:[".p-panel-header{display:flex;align-items:center}.p-panel-title{line-height:1;order:1}.p-panel-header-icon{display:inline-flex;justify-content:center;align-items:center;cursor:pointer;text-decoration:none;overflow:hidden;position:relative}.p-panel-toggleable.p-panel-expanded .p-toggleable-content:not(.ng-animating){overflow:visible}.p-panel-toggleable .p-toggleable-content{overflow:hidden}\n"],encapsulation:2,data:{animation:[oy("panelContent",[_0("hidden",Qa({height:"0"})),_0("void",Qa({height:"{{height}}"}),{params:{height:"0"}}),_0("visible",Qa({height:"*"})),Eu("visible <=> hidden",[Cc("{{transitionParams}}")]),Eu("void => hidden",Cc("{{transitionParams}}")),Eu("void => visible",Cc("{{transitionParams}}"))])]},changeDetection:0}),i})(),ige=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({imports:[Ns,Na,$c,Na]}),i})(),rge=(()=>{class i{constructor(e){this.databaseService=e,this.preferences=this.databaseService.retrievePreferences()}ngOnInit(){}handleChange(e){this.databaseService.storePreferences(this.preferences)}}return i.\u0275fac=function(e){return new(e||i)(Zt(sC))},i.\u0275cmp=Ir({type:i,selectors:[["app-preference"]],decls:23,vars:6,consts:[["header","Render",3,"toggleable"],[1,"field-checkbox"],[3,"ngModel","ngModelChange","onChange"],["for","ny"],[1,"p-float-label"],["type","text","id","inputtext","pInputText","",3,"ngModel","ngModelChange","keyup"],["for","inputtext"]],template:function(e,n){1&e&&(lt(0,"p-panel",0)(1,"div",1)(2,"p-inputSwitch",2),fn("ngModelChange",function(s){return n.preferences.grid=s})("onChange",function(s){return n.handleChange(s)}),ct(),lt(3,"label",3),qi(4,"Apply grid"),ct()(),lt(5,"div",1)(6,"p-inputSwitch",2),fn("ngModelChange",function(s){return n.preferences.info=s})("onChange",function(s){return n.handleChange(s)}),ct(),lt(7,"label",3),qi(8,"Apply display info"),ct()(),lt(9,"div",1)(10,"p-inputSwitch",2),fn("ngModelChange",function(s){return n.preferences.full=s})("onChange",function(s){return n.handleChange(s)}),ct(),lt(11,"label",3),qi(12,"Export full graph"),ct()(),lt(13,"div",1)(14,"span",4)(15,"input",5),fn("ngModelChange",function(s){return n.preferences.maxWidth=s})("keyup",function(s){return n.handleChange(s)}),ct(),lt(16,"label",6),qi(17,"Max width for image export"),ct()()(),lt(18,"div",1)(19,"span",4)(20,"input",5),fn("ngModelChange",function(s){return n.preferences.maxHeight=s})("keyup",function(s){return n.handleChange(s)}),ct(),lt(21,"label",6),qi(22,"Max height for image export"),ct()()()()),2&e&&(ve("toggleable",!0),Me(2),ve("ngModel",n.preferences.grid),Me(4),ve("ngModel",n.preferences.info),Me(4),ve("ngModel",n.preferences.full),Me(5),ve("ngModel",n.preferences.maxWidth),Me(5),ve("ngModel",n.preferences.maxHeight))},dependencies:[Aw,XH,v0,oC,ry,nge]}),i})();var sge=V(4826)();let oge=(()=>{class i{constructor(){this.about=sge.render('\n  ## My system\n\n  This tool aim to design complex system with a component view target\n  - based on [cytoscapejs](https://js.cytoscape.org)\n  - based on [primeng](https://www.primefaces.org/primeng/)\n\n  I used it on my own to design my system\n\n  ## November 2022\n\n  ### Features releases\n\n  - Manage many style sheet\n  - Find alias by label or id (target and alias)\n  - Display alias documentation only\n  - Add alias option on node\n  - Modify inline documentation\n  - Rework any node id on next save\n  - Add 3d view of graph\n\n  ### Bugs\n  \n  - GEXF can export more than one edge over 2 nodes\n  - Rewrite with a new GUID cloned node (without infinte @.. append)\n\n  ## October 2022\n\n  ### Features releases\n\n  - Add icon to menu action (core, node and edge)\n  - Add a default content value in style if content is not defined\n\n  ![Alt text](assets/about/display-node.PNG "display node label")\n\n  ### Bugs\n\n  - Add favicon.ico (replace default angular favicon.ico)\n  - Generate error in console while mis selecting any node\n\n  ')}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=Ir({type:i,selectors:[["app-about"]],decls:1,vars:1,consts:[[3,"innerHTML"]],template:function(e,n){1&e&&ii(0,"div",0),2&e&&ve("innerHTML",n.about,wa)}}),i})();const af=1001,Zu=1003,Tu=1006,P0=1009,R0=1014,m_=1015,Jw=1016,bC=1020,Cg=1023,k0=1026,CC=1027,O0=3e3,Xc=3001,py="srgb",N0="srgb-linear";class AC{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const r=this._listeners[t];if(void 0!==r){const s=r.indexOf(e);-1!==s&&r.splice(s,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const n=this._listeners[t.type];if(void 0!==n){t.target=this;const r=n.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,t);t.target=null}}}const Th=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],B0=Math.PI/180,eA=180/Math.PI;function Lp(){const i=4294967295*Math.random()|0,t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(Th[255&i]+Th[i>>8&255]+Th[i>>16&255]+Th[i>>24&255]+"-"+Th[255&t]+Th[t>>8&255]+"-"+Th[t>>16&15|64]+Th[t>>24&255]+"-"+Th[63&e|128]+Th[e>>8&255]+"-"+Th[e>>16&255]+Th[e>>24&255]+Th[255&n]+Th[n>>8&255]+Th[n>>16&255]+Th[n>>24&255]).toLowerCase()}function su(i,t,e){return Math.max(t,Math.min(e,i))}function tA(i,t,e){return(1-e)*i+e*t}function jL(i){return 0==(i&i-1)&&0!==i}function zS(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function gy(i,t){switch(t.constructor){case Float32Array:return i;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function bl(i,t){switch(t.constructor){case Float32Array:return i;case Uint16Array:return Math.round(65535*i);case Uint8Array:return Math.round(255*i);case Int16Array:return Math.round(32767*i);case Int8Array:return Math.round(127*i);default:throw new Error("Invalid component type.")}}class Gi{constructor(t=0,e=0){Gi.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),r=Math.sin(e),s=this.x-t.x,o=this.y-t.y;return this.x=s*n-o*r+t.x,this.y=s*r+o*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Pp{constructor(){Pp.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(t,e,n,r,s,o,l,u,p){const v=this.elements;return v[0]=t,v[1]=r,v[2]=l,v[3]=e,v[4]=s,v[5]=u,v[6]=n,v[7]=o,v[8]=p,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,s=this.elements,o=n[0],l=n[3],u=n[6],p=n[1],v=n[4],x=n[7],I=n[2],T=n[5],F=n[8],j=r[0],X=r[3],ce=r[6],we=r[1],ye=r[4],Ae=r[7],We=r[2],ot=r[5],Mt=r[8];return s[0]=o*j+l*we+u*We,s[3]=o*X+l*ye+u*ot,s[6]=o*ce+l*Ae+u*Mt,s[1]=p*j+v*we+x*We,s[4]=p*X+v*ye+x*ot,s[7]=p*ce+v*Ae+x*Mt,s[2]=I*j+T*we+F*We,s[5]=I*X+T*ye+F*ot,s[8]=I*ce+T*Ae+F*Mt,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],r=t[2],s=t[3],o=t[4],l=t[5],u=t[6],p=t[7],v=t[8];return e*o*v-e*l*p-n*s*v+n*l*u+r*s*p-r*o*u}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],s=t[3],o=t[4],l=t[5],u=t[6],p=t[7],v=t[8],x=v*o-l*p,I=l*u-v*s,T=p*s-o*u,F=e*x+n*I+r*T;if(0===F)return this.set(0,0,0,0,0,0,0,0,0);const j=1/F;return t[0]=x*j,t[1]=(r*p-v*n)*j,t[2]=(l*n-r*o)*j,t[3]=I*j,t[4]=(v*e-r*u)*j,t[5]=(r*s-l*e)*j,t[6]=T*j,t[7]=(n*u-p*e)*j,t[8]=(o*e-n*s)*j,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,r,s,o,l){const u=Math.cos(s),p=Math.sin(s);return this.set(n*u,n*p,-n*(u*o+p*l)+o+t,-r*p,r*u,-r*(-p*o+u*l)+l+e,0,0,1),this}scale(t,e){const n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this}rotate(t){const e=Math.cos(t),n=Math.sin(t),r=this.elements,s=r[0],o=r[3],l=r[6],u=r[1],p=r[4],v=r[7];return r[0]=e*s+n*u,r[3]=e*o+n*p,r[6]=e*l+n*v,r[1]=-n*s+e*u,r[4]=-n*o+e*p,r[7]=-n*l+e*v,this}translate(t,e){const n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this}equals(t){const e=this.elements,n=t.elements;for(let r=0;r<9;r++)if(e[r]!==n[r])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}function P5(i){for(let t=i.length-1;t>=0;--t)if(i[t]>=65535)return!0;return!1}function nA(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function z0(i){return i<.04045?.0773993808*i:Math.pow(.9478672986*i+.0521327014,2.4)}function VS(i){return i<.0031308?12.92*i:1.055*Math.pow(i,.41666)-.055}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const $L={[py]:{[N0]:z0},[N0]:{[py]:VS}},vm={legacyMode:!0,get workingColorSpace(){return N0},set workingColorSpace(i){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(i,t,e){if(this.legacyMode||t===e||!t||!e)return i;if($L[t]&&void 0!==$L[t][e]){const n=$L[t][e];return i.r=n(i.r),i.g=n(i.g),i.b=n(i.b),i}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(i,t){return this.convert(i,this.workingColorSpace,t)},toWorkingColorSpace:function(i,t){return this.convert(i,t,this.workingColorSpace)}},R5={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Qu={r:0,g:0,b:0},ym={h:0,s:0,l:0},US={h:0,s:0,l:0};function qL(i,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?i+6*(t-i)*e:e<.5?t:e<2/3?i+6*(t-i)*(2/3-e):i}function HS(i,t){return t.r=i.r,t.g=i.g,t.b=i.b,t}let SC,Jr=(()=>{class i{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===n&&void 0===r?this.set(e):this.setRGB(e,n,r)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=py){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,vm.toWorkingColorSpace(this,n),this}setRGB(e,n,r,s=N0){return this.r=e,this.g=n,this.b=r,vm.toWorkingColorSpace(this,s),this}setHSL(e,n,r,s=N0){if(e=function WL(i,t){return(i%t+t)%t}(e,1),n=su(n,0,1),r=su(r,0,1),0===n)this.r=this.g=this.b=r;else{const o=r<=.5?r*(1+n):r+n-r*n,l=2*r-o;this.r=qL(l,o,e+1/3),this.g=qL(l,o,e),this.b=qL(l,o,e-1/3)}return vm.toWorkingColorSpace(this,s),this}setStyle(e,n=py){function r(o){void 0!==o&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let o;const u=s[2];switch(s[1]){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return this.r=Math.min(255,parseInt(o[1],10))/255,this.g=Math.min(255,parseInt(o[2],10))/255,this.b=Math.min(255,parseInt(o[3],10))/255,vm.toWorkingColorSpace(this,n),r(o[4]),this;if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return this.r=Math.min(100,parseInt(o[1],10))/100,this.g=Math.min(100,parseInt(o[2],10))/100,this.b=Math.min(100,parseInt(o[3],10))/100,vm.toWorkingColorSpace(this,n),r(o[4]),this;break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u)){const p=parseFloat(o[1])/360,v=parseFloat(o[2])/100,x=parseFloat(o[3])/100;return r(o[4]),this.setHSL(p,v,x,n)}}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=s[1],l=o.length;if(3===l)return this.r=parseInt(o.charAt(0)+o.charAt(0),16)/255,this.g=parseInt(o.charAt(1)+o.charAt(1),16)/255,this.b=parseInt(o.charAt(2)+o.charAt(2),16)/255,vm.toWorkingColorSpace(this,n),this;if(6===l)return this.r=parseInt(o.charAt(0)+o.charAt(1),16)/255,this.g=parseInt(o.charAt(2)+o.charAt(3),16)/255,this.b=parseInt(o.charAt(4)+o.charAt(5),16)/255,vm.toWorkingColorSpace(this,n),this}return e&&e.length>0?this.setColorName(e,n):this}setColorName(e,n=py){const r=R5[e.toLowerCase()];return void 0!==r?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=z0(e.r),this.g=z0(e.g),this.b=z0(e.b),this}copyLinearToSRGB(e){return this.r=VS(e.r),this.g=VS(e.g),this.b=VS(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=py){return vm.fromWorkingColorSpace(HS(this,Qu),e),su(255*Qu.r,0,255)<<16^su(255*Qu.g,0,255)<<8^su(255*Qu.b,0,255)<<0}getHexString(e=py){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=N0){vm.fromWorkingColorSpace(HS(this,Qu),n);const r=Qu.r,s=Qu.g,o=Qu.b,l=Math.max(r,s,o),u=Math.min(r,s,o);let p,v;const x=(u+l)/2;if(u===l)p=0,v=0;else{const I=l-u;switch(v=x<=.5?I/(l+u):I/(2-l-u),l){case r:p=(s-o)/I+(s<o?6:0);break;case s:p=(o-r)/I+2;break;case o:p=(r-s)/I+4}p/=6}return e.h=p,e.s=v,e.l=x,e}getRGB(e,n=N0){return vm.fromWorkingColorSpace(HS(this,Qu),n),e.r=Qu.r,e.g=Qu.g,e.b=Qu.b,e}getStyle(e=py){return vm.fromWorkingColorSpace(HS(this,Qu),e),e!==py?`color(${e} ${Qu.r} ${Qu.g} ${Qu.b})`:`rgb(${255*Qu.r|0},${255*Qu.g|0},${255*Qu.b|0})`}offsetHSL(e,n,r){return this.getHSL(ym),ym.h+=e,ym.s+=n,ym.l+=r,this.setHSL(ym.h,ym.s,ym.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(ym),e.getHSL(US);const r=tA(ym.h,US.h,n),s=tA(ym.s,US.s,n),o=tA(ym.l,US.l,n);return this.setHSL(r,s,o),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}return i.NAMES=R5,i})();class k5{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===SC&&(SC=nA("canvas")),SC.width=t.width,SC.height=t.height;const n=SC.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=SC}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const e=nA("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);const r=n.getImageData(0,0,t.width,t.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=255*z0(s[o]/255);return n.putImageData(r,0,0),e}if(t.data){const e=t.data.slice(0);for(let n=0;n<e.length;n++)e[n]=e instanceof Uint8Array||e instanceof Uint8ClampedArray?Math.floor(255*z0(e[n]/255)):z0(e[n]);return{data:e,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}class EC{constructor(t=null){this.isSource=!0,this.uuid=Lp(),this.data=t,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let s;if(Array.isArray(r)){s=[];for(let o=0,l=r.length;o<l;o++)s.push(XL(r[o].isDataTexture?r[o].image:r[o]))}else s=XL(r);n.url=s}return e||(t.images[this.uuid]=n),n}}function XL(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?k5.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let _me=0,v_=(()=>{class i extends AC{constructor(e=i.DEFAULT_IMAGE,n=i.DEFAULT_MAPPING,r=af,s=af,o=Tu,l=1008,u=Cg,p=P0,v=1,x=O0){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:_me++}),this.uuid=Lp(),this.name="",this.source=new EC(e),this.mipmaps=[],this.mapping=n,this.wrapS=r,this.wrapT=s,this.magFilter=o,this.minFilter=l,this.anisotropy=v,this.format=u,this.internalFormat=null,this.type=p,this.offset=new Gi(0,0),this.repeat=new Gi(1,1),this.center=new Gi(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Pp,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=x,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=void 0===e||"string"==typeof e;if(!n&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case 1e3:e.x=e.x-Math.floor(e.x);break;case af:e.x=e.x<0?0:1;break;case 1002:e.x=1===Math.abs(Math.floor(e.x)%2)?Math.ceil(e.x)-e.x:e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case 1e3:e.y=e.y-Math.floor(e.y);break;case af:e.y=e.y<0?0:1;break;case 1002:e.y=1===Math.abs(Math.floor(e.y)%2)?Math.ceil(e.y)-e.y:e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}}return i.DEFAULT_IMAGE=null,i.DEFAULT_MAPPING=300,i})();class dl{constructor(t=0,e=0,n=0,r=1){dl.prototype.isVector4=!0,this.x=t,this.y=e,this.z=n,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,s=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*r+o[12]*s,this.y=o[1]*e+o[5]*n+o[9]*r+o[13]*s,this.z=o[2]*e+o[6]*n+o[10]*r+o[14]*s,this.w=o[3]*e+o[7]*n+o[11]*r+o[15]*s,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,r,s;const u=t.elements,p=u[0],v=u[4],x=u[8],I=u[1],T=u[5],F=u[9],j=u[2],X=u[6],ce=u[10];if(Math.abs(v-I)<.01&&Math.abs(x-j)<.01&&Math.abs(F-X)<.01){if(Math.abs(v+I)<.1&&Math.abs(x+j)<.1&&Math.abs(F+X)<.1&&Math.abs(p+T+ce-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const ye=(p+1)/2,Ae=(T+1)/2,We=(ce+1)/2,ot=(v+I)/4,Mt=(x+j)/4,Xe=(F+X)/4;return ye>Ae&&ye>We?ye<.01?(n=0,r=.707106781,s=.707106781):(n=Math.sqrt(ye),r=ot/n,s=Mt/n):Ae>We?Ae<.01?(n=.707106781,r=0,s=.707106781):(r=Math.sqrt(Ae),n=ot/r,s=Xe/r):We<.01?(n=.707106781,r=.707106781,s=0):(s=Math.sqrt(We),n=Mt/s,r=Xe/s),this.set(n,r,s,e),this}let we=Math.sqrt((X-F)*(X-F)+(x-j)*(x-j)+(I-v)*(I-v));return Math.abs(we)<.001&&(we=1),this.x=(X-F)/we,this.y=(x-j)/we,this.z=(I-v)/we,this.w=Math.acos((p+T+ce-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class V0 extends AC{constructor(t=1,e=1,n={}){super(),this.isWebGLRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new dl(0,0,t,e),this.scissorTest=!1,this.viewport=new dl(0,0,t,e),this.texture=new v_({width:t,height:e,depth:1},n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:Tu,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(t,e,n=1){(this.width!==t||this.height!==e||this.depth!==n)&&(this.width=t,this.height=e,this.depth=n,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0;const e=Object.assign({},t.texture.image);return this.texture.source=new EC(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class YL extends v_{constructor(t=null,e=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:n,depth:r},this.magFilter=Zu,this.minFilter=Zu,this.wrapR=af,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class O5 extends v_{constructor(t=null,e=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:n,depth:r},this.magFilter=Zu,this.minFilter=Zu,this.wrapR=af,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Rp{constructor(t=0,e=0,n=0,r=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=r}static slerpFlat(t,e,n,r,s,o,l){let u=n[r+0],p=n[r+1],v=n[r+2],x=n[r+3];const I=s[o+0],T=s[o+1],F=s[o+2],j=s[o+3];if(0===l)return t[e+0]=u,t[e+1]=p,t[e+2]=v,void(t[e+3]=x);if(1===l)return t[e+0]=I,t[e+1]=T,t[e+2]=F,void(t[e+3]=j);if(x!==j||u!==I||p!==T||v!==F){let X=1-l;const ce=u*I+p*T+v*F+x*j,we=ce>=0?1:-1,ye=1-ce*ce;if(ye>Number.EPSILON){const We=Math.sqrt(ye),ot=Math.atan2(We,ce*we);X=Math.sin(X*ot)/We,l=Math.sin(l*ot)/We}const Ae=l*we;if(u=u*X+I*Ae,p=p*X+T*Ae,v=v*X+F*Ae,x=x*X+j*Ae,X===1-l){const We=1/Math.sqrt(u*u+p*p+v*v+x*x);u*=We,p*=We,v*=We,x*=We}}t[e]=u,t[e+1]=p,t[e+2]=v,t[e+3]=x}static multiplyQuaternionsFlat(t,e,n,r,s,o){const l=n[r],u=n[r+1],p=n[r+2],v=n[r+3],x=s[o],I=s[o+1],T=s[o+2],F=s[o+3];return t[e]=l*F+v*x+u*T-p*I,t[e+1]=u*F+v*I+p*x-l*T,t[e+2]=p*F+v*T+l*I-u*x,t[e+3]=v*F-l*x-u*I-p*T,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){const n=t._x,r=t._y,s=t._z,o=t._order,l=Math.cos,u=Math.sin,p=l(n/2),v=l(r/2),x=l(s/2),I=u(n/2),T=u(r/2),F=u(s/2);switch(o){case"XYZ":this._x=I*v*x+p*T*F,this._y=p*T*x-I*v*F,this._z=p*v*F+I*T*x,this._w=p*v*x-I*T*F;break;case"YXZ":this._x=I*v*x+p*T*F,this._y=p*T*x-I*v*F,this._z=p*v*F-I*T*x,this._w=p*v*x+I*T*F;break;case"ZXY":this._x=I*v*x-p*T*F,this._y=p*T*x+I*v*F,this._z=p*v*F+I*T*x,this._w=p*v*x-I*T*F;break;case"ZYX":this._x=I*v*x-p*T*F,this._y=p*T*x+I*v*F,this._z=p*v*F-I*T*x,this._w=p*v*x+I*T*F;break;case"YZX":this._x=I*v*x+p*T*F,this._y=p*T*x+I*v*F,this._z=p*v*F-I*T*x,this._w=p*v*x-I*T*F;break;case"XZY":this._x=I*v*x-p*T*F,this._y=p*T*x-I*v*F,this._z=p*v*F+I*T*x,this._w=p*v*x+I*T*F;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],r=e[4],s=e[8],o=e[1],l=e[5],u=e[9],p=e[2],v=e[6],x=e[10],I=n+l+x;if(I>0){const T=.5/Math.sqrt(I+1);this._w=.25/T,this._x=(v-u)*T,this._y=(s-p)*T,this._z=(o-r)*T}else if(n>l&&n>x){const T=2*Math.sqrt(1+n-l-x);this._w=(v-u)/T,this._x=.25*T,this._y=(r+o)/T,this._z=(s+p)/T}else if(l>x){const T=2*Math.sqrt(1+l-n-x);this._w=(s-p)/T,this._x=(r+o)/T,this._y=.25*T,this._z=(u+v)/T}else{const T=2*Math.sqrt(1+x-n-l);this._w=(o-r)/T,this._x=(s+p)/T,this._y=(u+v)/T,this._z=.25*T}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(su(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(0===n)return this;const r=Math.min(1,e/n);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,r=t._y,s=t._z,o=t._w,l=e._x,u=e._y,p=e._z,v=e._w;return this._x=n*v+o*l+r*p-s*u,this._y=r*v+o*u+s*l-n*p,this._z=s*v+o*p+n*u-r*l,this._w=o*v-n*l-r*u-s*p,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,r=this._y,s=this._z,o=this._w;let l=o*t._w+n*t._x+r*t._y+s*t._z;if(l<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,l=-l):this.copy(t),l>=1)return this._w=o,this._x=n,this._y=r,this._z=s,this;const u=1-l*l;if(u<=Number.EPSILON){const T=1-e;return this._w=T*o+e*this._w,this._x=T*n+e*this._x,this._y=T*r+e*this._y,this._z=T*s+e*this._z,this.normalize(),this._onChangeCallback(),this}const p=Math.sqrt(u),v=Math.atan2(p,l),x=Math.sin((1-e)*v)/p,I=Math.sin(e*v)/p;return this._w=o*x+this._w*I,this._x=n*x+this._x*I,this._y=r*x+this._y*I,this._z=s*x+this._z*I,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){const t=Math.random(),e=Math.sqrt(1-t),n=Math.sqrt(t),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(e*Math.cos(r),n*Math.sin(s),n*Math.cos(s),e*Math.sin(r))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class jt{constructor(t=0,e=0,n=0){jt.prototype.isVector3=!0,this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(F5.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(F5.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,r=this.z,s=t.elements;return this.x=s[0]*e+s[3]*n+s[6]*r,this.y=s[1]*e+s[4]*n+s[7]*r,this.z=s[2]*e+s[5]*n+s[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,s=t.elements,o=1/(s[3]*e+s[7]*n+s[11]*r+s[15]);return this.x=(s[0]*e+s[4]*n+s[8]*r+s[12])*o,this.y=(s[1]*e+s[5]*n+s[9]*r+s[13])*o,this.z=(s[2]*e+s[6]*n+s[10]*r+s[14])*o,this}applyQuaternion(t){const e=this.x,n=this.y,r=this.z,s=t.x,o=t.y,l=t.z,u=t.w,p=u*e+o*r-l*n,v=u*n+l*e-s*r,x=u*r+s*n-o*e,I=-s*e-o*n-l*r;return this.x=p*u+I*-s+v*-l-x*-o,this.y=v*u+I*-o+x*-s-p*-l,this.z=x*u+I*-l+p*-o-v*-s,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,r=this.z,s=t.elements;return this.x=s[0]*e+s[4]*n+s[8]*r,this.y=s[1]*e+s[5]*n+s[9]*r,this.z=s[2]*e+s[6]*n+s[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,r=t.y,s=t.z,o=e.x,l=e.y,u=e.z;return this.x=r*u-s*l,this.y=s*o-n*u,this.z=n*l-r*o,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return KL.copy(this).projectOnVector(t),this.sub(KL)}reflect(t){return this.sub(KL.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(su(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=2*(Math.random()-.5),e=Math.random()*Math.PI*2,n=Math.sqrt(1-t**2);return this.x=n*Math.cos(e),this.y=n*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const KL=new jt,F5=new Rp;class y_{constructor(t=new jt(1/0,1/0,1/0),e=new jt(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,n=1/0,r=1/0,s=-1/0,o=-1/0,l=-1/0;for(let u=0,p=t.length;u<p;u+=3){const v=t[u],x=t[u+1],I=t[u+2];v<e&&(e=v),x<n&&(n=x),I<r&&(r=I),v>s&&(s=v),x>o&&(o=x),I>l&&(l=I)}return this.min.set(e,n,r),this.max.set(s,o,l),this}setFromBufferAttribute(t){let e=1/0,n=1/0,r=1/0,s=-1/0,o=-1/0,l=-1/0;for(let u=0,p=t.count;u<p;u++){const v=t.getX(u),x=t.getY(u),I=t.getZ(u);v<e&&(e=v),x<n&&(n=x),I<r&&(r=I),v>s&&(s=v),x>o&&(o=x),I>l&&(l=I)}return this.min.set(e,n,r),this.max.set(s,o,l),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=U0.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const n=t.geometry;if(void 0!==n)if(e&&null!=n.attributes&&void 0!==n.attributes.position){const s=n.attributes.position;for(let o=0,l=s.count;o<l;o++)U0.fromBufferAttribute(s,o).applyMatrix4(t.matrixWorld),this.expandByPoint(U0)}else null===n.boundingBox&&n.computeBoundingBox(),ZL.copy(n.boundingBox),ZL.applyMatrix4(t.matrixWorld),this.union(ZL);const r=t.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,U0),U0.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(iA),GS.subVectors(this.max,iA),TC.subVectors(t.a,iA),MC.subVectors(t.b,iA),DC.subVectors(t.c,iA),__.subVectors(MC,TC),b_.subVectors(DC,MC),H0.subVectors(TC,DC);let e=[0,-__.z,__.y,0,-b_.z,b_.y,0,-H0.z,H0.y,__.z,0,-__.x,b_.z,0,-b_.x,H0.z,0,-H0.x,-__.y,__.x,0,-b_.y,b_.x,0,-H0.y,H0.x,0];return!(!QL(e,TC,MC,DC,GS)||(e=[1,0,0,0,1,0,0,0,1],!QL(e,TC,MC,DC,GS)))&&(WS.crossVectors(__,b_),e=[WS.x,WS.y,WS.z],QL(e,TC,MC,DC,GS))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return U0.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return this.getCenter(t.center),t.radius=.5*this.getSize(U0).length(),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(my[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),my[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),my[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),my[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),my[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),my[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),my[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),my[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(my)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const my=[new jt,new jt,new jt,new jt,new jt,new jt,new jt,new jt],U0=new jt,ZL=new y_,TC=new jt,MC=new jt,DC=new jt,__=new jt,b_=new jt,H0=new jt,iA=new jt,GS=new jt,WS=new jt,G0=new jt;function QL(i,t,e,n,r){for(let s=0,o=i.length-3;s<=o;s+=3){G0.fromArray(i,s);const l=r.x*Math.abs(G0.x)+r.y*Math.abs(G0.y)+r.z*Math.abs(G0.z),u=t.dot(G0),p=e.dot(G0),v=n.dot(G0);if(Math.max(-Math.max(u,p,v),Math.min(u,p,v))>l)return!1}return!0}const bme=new y_,rA=new jt,JL=new jt;class LC{constructor(t=new jt,e=-1){this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;void 0!==e?n.copy(e):bme.setFromPoints(t).getCenter(n);let r=0;for(let s=0,o=t.length;s<o;s++)r=Math.max(r,n.distanceToSquared(t[s]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;rA.subVectors(t,this.center);const e=rA.lengthSq();if(e>this.radius*this.radius){const n=Math.sqrt(e),r=.5*(n-this.radius);this.center.addScaledVector(rA,r/n),this.radius+=r}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(JL.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(rA.copy(t.center).add(JL)),this.expandByPoint(rA.copy(t.center).sub(JL))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const vy=new jt,eP=new jt,jS=new jt,C_=new jt,tP=new jt,$S=new jt,nP=new jt;class qS{constructor(t=new jt,e=new jt(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,vy)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=vy.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(vy.copy(this.direction).multiplyScalar(e).add(this.origin),vy.distanceToSquared(t))}distanceSqToSegment(t,e,n,r){eP.copy(t).add(e).multiplyScalar(.5),jS.copy(e).sub(t).normalize(),C_.copy(this.origin).sub(eP);const s=.5*t.distanceTo(e),o=-this.direction.dot(jS),l=C_.dot(this.direction),u=-C_.dot(jS),p=C_.lengthSq(),v=Math.abs(1-o*o);let x,I,T,F;if(v>0)if(x=o*u-l,I=o*l-u,F=s*v,x>=0)if(I>=-F)if(I<=F){const j=1/v;x*=j,I*=j,T=x*(x+o*I+2*l)+I*(o*x+I+2*u)+p}else I=s,x=Math.max(0,-(o*I+l)),T=-x*x+I*(I+2*u)+p;else I=-s,x=Math.max(0,-(o*I+l)),T=-x*x+I*(I+2*u)+p;else I<=-F?(x=Math.max(0,-(-o*s+l)),I=x>0?-s:Math.min(Math.max(-s,-u),s),T=-x*x+I*(I+2*u)+p):I<=F?(x=0,I=Math.min(Math.max(-s,-u),s),T=I*(I+2*u)+p):(x=Math.max(0,-(o*s+l)),I=x>0?s:Math.min(Math.max(-s,-u),s),T=-x*x+I*(I+2*u)+p);else I=o>0?-s:s,x=Math.max(0,-(o*I+l)),T=-x*x+I*(I+2*u)+p;return n&&n.copy(this.direction).multiplyScalar(x).add(this.origin),r&&r.copy(jS).multiplyScalar(I).add(eP),T}intersectSphere(t,e){vy.subVectors(t.center,this.origin);const n=vy.dot(this.direction),r=vy.dot(vy)-n*n,s=t.radius*t.radius;if(r>s)return null;const o=Math.sqrt(s-r),l=n-o,u=n+o;return l<0&&u<0?null:this.at(l<0?u:l,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,r,s,o,l,u;const p=1/this.direction.x,v=1/this.direction.y,x=1/this.direction.z,I=this.origin;return p>=0?(n=(t.min.x-I.x)*p,r=(t.max.x-I.x)*p):(n=(t.max.x-I.x)*p,r=(t.min.x-I.x)*p),v>=0?(s=(t.min.y-I.y)*v,o=(t.max.y-I.y)*v):(s=(t.max.y-I.y)*v,o=(t.min.y-I.y)*v),n>o||s>r||((s>n||isNaN(n))&&(n=s),(o<r||isNaN(r))&&(r=o),x>=0?(l=(t.min.z-I.z)*x,u=(t.max.z-I.z)*x):(l=(t.max.z-I.z)*x,u=(t.min.z-I.z)*x),n>u||l>r)||((l>n||n!=n)&&(n=l),(u<r||r!=r)&&(r=u),r<0)?null:this.at(n>=0?n:r,e)}intersectsBox(t){return null!==this.intersectBox(t,vy)}intersectTriangle(t,e,n,r,s){tP.subVectors(e,t),$S.subVectors(n,t),nP.crossVectors(tP,$S);let l,o=this.direction.dot(nP);if(o>0){if(r)return null;l=1}else{if(!(o<0))return null;l=-1,o=-o}C_.subVectors(this.origin,t);const u=l*this.direction.dot($S.crossVectors(C_,$S));if(u<0)return null;const p=l*this.direction.dot(tP.cross(C_));if(p<0||u+p>o)return null;const v=-l*C_.dot(nP);return v<0?null:this.at(v/o,s)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class po{constructor(){po.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(t,e,n,r,s,o,l,u,p,v,x,I,T,F,j,X){const ce=this.elements;return ce[0]=t,ce[4]=e,ce[8]=n,ce[12]=r,ce[1]=s,ce[5]=o,ce[9]=l,ce[13]=u,ce[2]=p,ce[6]=v,ce[10]=x,ce[14]=I,ce[3]=T,ce[7]=F,ce[11]=j,ce[15]=X,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new po).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,r=1/PC.setFromMatrixColumn(t,0).length(),s=1/PC.setFromMatrixColumn(t,1).length(),o=1/PC.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*s,e[5]=n[5]*s,e[6]=n[6]*s,e[7]=0,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,n=t.x,r=t.y,s=t.z,o=Math.cos(n),l=Math.sin(n),u=Math.cos(r),p=Math.sin(r),v=Math.cos(s),x=Math.sin(s);if("XYZ"===t.order){const I=o*v,T=o*x,F=l*v,j=l*x;e[0]=u*v,e[4]=-u*x,e[8]=p,e[1]=T+F*p,e[5]=I-j*p,e[9]=-l*u,e[2]=j-I*p,e[6]=F+T*p,e[10]=o*u}else if("YXZ"===t.order){const I=u*v,T=u*x,F=p*v,j=p*x;e[0]=I+j*l,e[4]=F*l-T,e[8]=o*p,e[1]=o*x,e[5]=o*v,e[9]=-l,e[2]=T*l-F,e[6]=j+I*l,e[10]=o*u}else if("ZXY"===t.order){const I=u*v,T=u*x,F=p*v,j=p*x;e[0]=I-j*l,e[4]=-o*x,e[8]=F+T*l,e[1]=T+F*l,e[5]=o*v,e[9]=j-I*l,e[2]=-o*p,e[6]=l,e[10]=o*u}else if("ZYX"===t.order){const I=o*v,T=o*x,F=l*v,j=l*x;e[0]=u*v,e[4]=F*p-T,e[8]=I*p+j,e[1]=u*x,e[5]=j*p+I,e[9]=T*p-F,e[2]=-p,e[6]=l*u,e[10]=o*u}else if("YZX"===t.order){const I=o*u,T=o*p,F=l*u,j=l*p;e[0]=u*v,e[4]=j-I*x,e[8]=F*x+T,e[1]=x,e[5]=o*v,e[9]=-l*v,e[2]=-p*v,e[6]=T*x+F,e[10]=I-j*x}else if("XZY"===t.order){const I=o*u,T=o*p,F=l*u,j=l*p;e[0]=u*v,e[4]=-x,e[8]=p*v,e[1]=I*x+j,e[5]=o*v,e[9]=T*x-F,e[2]=F*x-T,e[6]=l*v,e[10]=j*x+I}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Cme,t,xme)}lookAt(t,e,n){const r=this.elements;return kp.subVectors(t,e),0===kp.lengthSq()&&(kp.z=1),kp.normalize(),x_.crossVectors(n,kp),0===x_.lengthSq()&&(1===Math.abs(n.z)?kp.x+=1e-4:kp.z+=1e-4,kp.normalize(),x_.crossVectors(n,kp)),x_.normalize(),XS.crossVectors(kp,x_),r[0]=x_.x,r[4]=XS.x,r[8]=kp.x,r[1]=x_.y,r[5]=XS.y,r[9]=kp.y,r[2]=x_.z,r[6]=XS.z,r[10]=kp.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,s=this.elements,o=n[0],l=n[4],u=n[8],p=n[12],v=n[1],x=n[5],I=n[9],T=n[13],F=n[2],j=n[6],X=n[10],ce=n[14],we=n[3],ye=n[7],Ae=n[11],We=n[15],ot=r[0],Mt=r[4],Xe=r[8],yt=r[12],tn=r[1],zn=r[5],Qn=r[9],Un=r[13],An=r[2],Nn=r[6],_n=r[10],Vn=r[14],Fn=r[3],bn=r[7],Bn=r[11],Wi=r[15];return s[0]=o*ot+l*tn+u*An+p*Fn,s[4]=o*Mt+l*zn+u*Nn+p*bn,s[8]=o*Xe+l*Qn+u*_n+p*Bn,s[12]=o*yt+l*Un+u*Vn+p*Wi,s[1]=v*ot+x*tn+I*An+T*Fn,s[5]=v*Mt+x*zn+I*Nn+T*bn,s[9]=v*Xe+x*Qn+I*_n+T*Bn,s[13]=v*yt+x*Un+I*Vn+T*Wi,s[2]=F*ot+j*tn+X*An+ce*Fn,s[6]=F*Mt+j*zn+X*Nn+ce*bn,s[10]=F*Xe+j*Qn+X*_n+ce*Bn,s[14]=F*yt+j*Un+X*Vn+ce*Wi,s[3]=we*ot+ye*tn+Ae*An+We*Fn,s[7]=we*Mt+ye*zn+Ae*Nn+We*bn,s[11]=we*Xe+ye*Qn+Ae*_n+We*Bn,s[15]=we*yt+ye*Un+Ae*Vn+We*Wi,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],r=t[8],s=t[12],o=t[1],l=t[5],u=t[9],p=t[13],v=t[2],x=t[6],I=t[10],T=t[14];return t[3]*(+s*u*x-r*p*x-s*l*I+n*p*I+r*l*T-n*u*T)+t[7]*(+e*u*T-e*p*I+s*o*I-r*o*T+r*p*v-s*u*v)+t[11]*(+e*p*x-e*l*T-s*o*x+n*o*T+s*l*v-n*p*v)+t[15]*(-r*l*v-e*u*x+e*l*I+r*o*x-n*o*I+n*u*v)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],s=t[3],o=t[4],l=t[5],u=t[6],p=t[7],v=t[8],x=t[9],I=t[10],T=t[11],F=t[12],j=t[13],X=t[14],ce=t[15],we=x*X*p-j*I*p+j*u*T-l*X*T-x*u*ce+l*I*ce,ye=F*I*p-v*X*p-F*u*T+o*X*T+v*u*ce-o*I*ce,Ae=v*j*p-F*x*p+F*l*T-o*j*T-v*l*ce+o*x*ce,We=F*x*u-v*j*u-F*l*I+o*j*I+v*l*X-o*x*X,ot=e*we+n*ye+r*Ae+s*We;if(0===ot)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const Mt=1/ot;return t[0]=we*Mt,t[1]=(j*I*s-x*X*s-j*r*T+n*X*T+x*r*ce-n*I*ce)*Mt,t[2]=(l*X*s-j*u*s+j*r*p-n*X*p-l*r*ce+n*u*ce)*Mt,t[3]=(x*u*s-l*I*s-x*r*p+n*I*p+l*r*T-n*u*T)*Mt,t[4]=ye*Mt,t[5]=(v*X*s-F*I*s+F*r*T-e*X*T-v*r*ce+e*I*ce)*Mt,t[6]=(F*u*s-o*X*s-F*r*p+e*X*p+o*r*ce-e*u*ce)*Mt,t[7]=(o*I*s-v*u*s+v*r*p-e*I*p-o*r*T+e*u*T)*Mt,t[8]=Ae*Mt,t[9]=(F*x*s-v*j*s-F*n*T+e*j*T+v*n*ce-e*x*ce)*Mt,t[10]=(o*j*s-F*l*s+F*n*p-e*j*p-o*n*ce+e*l*ce)*Mt,t[11]=(v*l*s-o*x*s-v*n*p+e*x*p+o*n*T-e*l*T)*Mt,t[12]=We*Mt,t[13]=(v*j*r-F*x*r+F*n*I-e*j*I-v*n*X+e*x*X)*Mt,t[14]=(F*l*r-o*j*r-F*n*u+e*j*u+o*n*X-e*l*X)*Mt,t[15]=(o*x*r-v*l*r+v*n*u-e*x*u-o*n*I+e*l*I)*Mt,this}scale(t){const e=this.elements,n=t.x,r=t.y,s=t.z;return e[0]*=n,e[4]*=r,e[8]*=s,e[1]*=n,e[5]*=r,e[9]*=s,e[2]*=n,e[6]*=r,e[10]*=s,e[3]*=n,e[7]*=r,e[11]*=s,this}getMaxScaleOnAxis(){const t=this.elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10]))}makeTranslation(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),r=Math.sin(e),s=1-n,o=t.x,l=t.y,u=t.z,p=s*o,v=s*l;return this.set(p*o+n,p*l-r*u,p*u+r*l,0,p*l+r*u,v*l+n,v*u-r*o,0,p*u-r*l,v*u+r*o,s*u*u+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,r,s,o){return this.set(1,n,s,0,t,1,o,0,e,r,1,0,0,0,0,1),this}compose(t,e,n){const r=this.elements,s=e._x,o=e._y,l=e._z,u=e._w,p=s+s,v=o+o,x=l+l,I=s*p,T=s*v,F=s*x,j=o*v,X=o*x,ce=l*x,we=u*p,ye=u*v,Ae=u*x,We=n.x,ot=n.y,Mt=n.z;return r[0]=(1-(j+ce))*We,r[1]=(T+Ae)*We,r[2]=(F-ye)*We,r[3]=0,r[4]=(T-Ae)*ot,r[5]=(1-(I+ce))*ot,r[6]=(X+we)*ot,r[7]=0,r[8]=(F+ye)*Mt,r[9]=(X-we)*Mt,r[10]=(1-(I+j))*Mt,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,n){const r=this.elements;let s=PC.set(r[0],r[1],r[2]).length();const o=PC.set(r[4],r[5],r[6]).length(),l=PC.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),t.x=r[12],t.y=r[13],t.z=r[14],_m.copy(this);const p=1/s,v=1/o,x=1/l;return _m.elements[0]*=p,_m.elements[1]*=p,_m.elements[2]*=p,_m.elements[4]*=v,_m.elements[5]*=v,_m.elements[6]*=v,_m.elements[8]*=x,_m.elements[9]*=x,_m.elements[10]*=x,e.setFromRotationMatrix(_m),n.x=s,n.y=o,n.z=l,this}makePerspective(t,e,n,r,s,o){const l=this.elements,p=2*s/(n-r),v=(e+t)/(e-t),x=(n+r)/(n-r),I=-(o+s)/(o-s),T=-2*o*s/(o-s);return l[0]=2*s/(e-t),l[4]=0,l[8]=v,l[12]=0,l[1]=0,l[5]=p,l[9]=x,l[13]=0,l[2]=0,l[6]=0,l[10]=I,l[14]=T,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(t,e,n,r,s,o){const l=this.elements,u=1/(e-t),p=1/(n-r),v=1/(o-s),x=(e+t)*u,I=(n+r)*p,T=(o+s)*v;return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-x,l[1]=0,l[5]=2*p,l[9]=0,l[13]=-I,l[2]=0,l[6]=0,l[10]=-2*v,l[14]=-T,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const PC=new jt,_m=new po,Cme=new jt(0,0,0),xme=new jt(1,1,1),x_=new jt,XS=new jt,kp=new jt,N5=new po,B5=new Rp;let wme=(()=>{class i{constructor(e=0,n=0,r=0,s=i.DefaultOrder){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,s=this._order){return this._x=e,this._y=n,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const s=e.elements,o=s[0],l=s[4],u=s[8],p=s[1],v=s[5],x=s[9],I=s[2],T=s[6],F=s[10];switch(n){case"XYZ":this._y=Math.asin(su(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-x,F),this._z=Math.atan2(-l,o)):(this._x=Math.atan2(T,v),this._z=0);break;case"YXZ":this._x=Math.asin(-su(x,-1,1)),Math.abs(x)<.9999999?(this._y=Math.atan2(u,F),this._z=Math.atan2(p,v)):(this._y=Math.atan2(-I,o),this._z=0);break;case"ZXY":this._x=Math.asin(su(T,-1,1)),Math.abs(T)<.9999999?(this._y=Math.atan2(-I,F),this._z=Math.atan2(-l,v)):(this._y=0,this._z=Math.atan2(p,o));break;case"ZYX":this._y=Math.asin(-su(I,-1,1)),Math.abs(I)<.9999999?(this._x=Math.atan2(T,F),this._z=Math.atan2(p,o)):(this._x=0,this._z=Math.atan2(-l,v));break;case"YZX":this._z=Math.asin(su(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(-x,v),this._y=Math.atan2(-I,o)):(this._x=0,this._y=Math.atan2(u,F));break;case"XZY":this._z=Math.asin(-su(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(T,v),this._y=Math.atan2(u,o)):(this._x=Math.atan2(-x,F),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,!0===r&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return N5.makeRotationFromQuaternion(e),this.setFromRotationMatrix(N5,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return B5.setFromEuler(this),this.setFromQuaternion(B5,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}return i.DefaultOrder="XYZ",i.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],i})();class iP{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}isEnabled(t){return 0!=(this.mask&(1<<t|0))}}let Ame=0;const z5=new jt,RC=new Rp,yy=new po,YS=new jt,sA=new jt,Ime=new jt,Sme=new Rp,V5=new jt(1,0,0),U5=new jt(0,1,0),H5=new jt(0,0,1),Eme={type:"added"},G5={type:"removed"};let Vf=(()=>{class i extends AC{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Ame++}),this.uuid=Lp(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=i.DefaultUp.clone();const e=new jt,n=new wme,r=new Rp,s=new jt(1,1,1);n._onChange(function o(){r.setFromEuler(n,!1)}),r._onChange(function l(){n.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new po},normalMatrix:{value:new Pp}}),this.matrix=new po,this.matrixWorld=new po,this.matrixAutoUpdate=i.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=i.DefaultMatrixWorldAutoUpdate,this.layers=new iP,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return RC.setFromAxisAngle(e,n),this.quaternion.multiply(RC),this}rotateOnWorldAxis(e,n){return RC.setFromAxisAngle(e,n),this.quaternion.premultiply(RC),this}rotateX(e){return this.rotateOnAxis(V5,e)}rotateY(e){return this.rotateOnAxis(U5,e)}rotateZ(e){return this.rotateOnAxis(H5,e)}translateOnAxis(e,n){return z5.copy(e).applyQuaternion(this.quaternion),this.position.add(z5.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(V5,e)}translateY(e){return this.translateOnAxis(U5,e)}translateZ(e){return this.translateOnAxis(H5,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(yy.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?YS.copy(e):YS.set(e,n,r);const s=this.parent;this.updateWorldMatrix(!0,!1),sA.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?yy.lookAt(sA,YS,this.up):yy.lookAt(YS,sA,this.up),this.quaternion.setFromRotationMatrix(yy),s&&(yy.extractRotation(s.matrixWorld),RC.setFromRotationMatrix(yy),this.quaternion.premultiply(RC.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Eme)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(G5)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const n=this.children[e];n.parent=null,n.dispatchEvent(G5)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),yy.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),yy.multiply(e.parent.matrixWorld)),e.applyMatrix4(yy),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,s=this.children.length;r<s;r++){const l=this.children[r].getObjectByProperty(e,n);if(void 0!==l)return l}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(sA,e,Ime),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(sA,Sme,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,s=n.length;r<s;r++)n[r].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const n=this.children;for(let r=0,s=n.length;r<s;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;null!==n&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,s=n.length;r<s;r++){const o=n[r];(!0===o.matrixWorldAutoUpdate||!0===e)&&o.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const r=this.parent;if(!0===e&&null!==r&&!0===r.matrixWorldAutoUpdate&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===n){const s=this.children;for(let o=0,l=s.length;o<l;o++){const u=s[o];!0===u.matrixWorldAutoUpdate&&u.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=void 0===e||"string"==typeof e,r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const s={};function o(u,p){return void 0===u[p.uuid]&&(u[p.uuid]=p.toJSON(e)),p.uuid}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),!0===this.castShadow&&(s.castShadow=!0),!0===this.receiveShadow&&(s.receiveShadow=!0),!1===this.visible&&(s.visible=!1),!1===this.frustumCulled&&(s.frustumCulled=!1),0!==this.renderOrder&&(s.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(s.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(e.geometries,this.geometry);const u=this.geometry.parameters;if(void 0!==u&&void 0!==u.shapes){const p=u.shapes;if(Array.isArray(p))for(let v=0,x=p.length;v<x;v++)o(e.shapes,p[v]);else o(e.shapes,p)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(o(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const u=[];for(let p=0,v=this.material.length;p<v;p++)u.push(o(e.materials,this.material[p]));s.material=u}else s.material=o(e.materials,this.material);if(this.children.length>0){s.children=[];for(let u=0;u<this.children.length;u++)s.children.push(this.children[u].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let u=0;u<this.animations.length;u++)s.animations.push(o(e.animations,this.animations[u]))}if(n){const u=l(e.geometries),p=l(e.materials),v=l(e.textures),x=l(e.images),I=l(e.shapes),T=l(e.skeletons),F=l(e.animations),j=l(e.nodes);u.length>0&&(r.geometries=u),p.length>0&&(r.materials=p),v.length>0&&(r.textures=v),x.length>0&&(r.images=x),I.length>0&&(r.shapes=I),T.length>0&&(r.skeletons=T),F.length>0&&(r.animations=F),j.length>0&&(r.nodes=j)}return r.object=s,r;function l(u){const p=[];for(const v in u){const x=u[v];delete x.metadata,p.push(x)}return p}}clone(e){return(new this.constructor).copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===n)for(let r=0;r<e.children.length;r++)this.add(e.children[r].clone());return this}}return i.DefaultUp=new jt(0,1,0),i.DefaultMatrixAutoUpdate=!0,i.DefaultMatrixWorldAutoUpdate=!0,i})();const bm=new jt,_y=new jt,rP=new jt,by=new jt,kC=new jt,OC=new jt,W5=new jt,sP=new jt,oP=new jt,aP=new jt;class Cm{constructor(t=new jt,e=new jt,n=new jt){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,r){r.subVectors(n,e),bm.subVectors(t,e),r.cross(bm);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(t,e,n,r,s){bm.subVectors(r,e),_y.subVectors(n,e),rP.subVectors(t,e);const o=bm.dot(bm),l=bm.dot(_y),u=bm.dot(rP),p=_y.dot(_y),v=_y.dot(rP),x=o*p-l*l;if(0===x)return s.set(-2,-1,-1);const I=1/x,T=(p*u-l*v)*I,F=(o*v-l*u)*I;return s.set(1-T-F,F,T)}static containsPoint(t,e,n,r){return this.getBarycoord(t,e,n,r,by),by.x>=0&&by.y>=0&&by.x+by.y<=1}static getUV(t,e,n,r,s,o,l,u){return this.getBarycoord(t,e,n,r,by),u.set(0,0),u.addScaledVector(s,by.x),u.addScaledVector(o,by.y),u.addScaledVector(l,by.z),u}static isFrontFacing(t,e,n,r){return bm.subVectors(n,e),_y.subVectors(t,e),bm.cross(_y).dot(r)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this}setFromAttributeAndIndices(t,e,n,r){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,r),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return bm.subVectors(this.c,this.b),_y.subVectors(this.a,this.b),.5*bm.cross(_y).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Cm.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return Cm.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,n,r,s){return Cm.getUV(t,this.a,this.b,this.c,e,n,r,s)}containsPoint(t){return Cm.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Cm.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,r=this.b,s=this.c;let o,l;kC.subVectors(r,n),OC.subVectors(s,n),sP.subVectors(t,n);const u=kC.dot(sP),p=OC.dot(sP);if(u<=0&&p<=0)return e.copy(n);oP.subVectors(t,r);const v=kC.dot(oP),x=OC.dot(oP);if(v>=0&&x<=v)return e.copy(r);const I=u*x-v*p;if(I<=0&&u>=0&&v<=0)return o=u/(u-v),e.copy(n).addScaledVector(kC,o);aP.subVectors(t,s);const T=kC.dot(aP),F=OC.dot(aP);if(F>=0&&T<=F)return e.copy(s);const j=T*p-u*F;if(j<=0&&p>=0&&F<=0)return l=p/(p-F),e.copy(n).addScaledVector(OC,l);const X=v*F-T*x;if(X<=0&&x-v>=0&&T-F>=0)return W5.subVectors(s,r),l=(x-v)/(x-v+(T-F)),e.copy(r).addScaledVector(W5,l);const ce=1/(X+j+I);return o=j*ce,l=I*ce,e.copy(n).addScaledVector(kC,o).addScaledVector(OC,l)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let Tme=0;class W0 extends AC{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Tme++}),this.uuid=Lp(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const n=t[e];if(void 0===n){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}const r=this[e];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}}toJSON(t){const e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(s){const o=[];for(const l in s){const u=s[l];delete u.metadata,o.push(u)}return o}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e){const s=r(t.textures),o=r(t.images);s.length>0&&(n.textures=s),o.length>0&&(n.images=o)}return n}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(null!==e){const r=e.length;n=new Array(r);for(let s=0;s!==r;++s)n[s]=e[s].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}}class j0 extends W0{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Jr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const Mu=new jt,KS=new Gi;class Cd{constructor(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[t+r]=e.array[n+r];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,n=this.count;e<n;e++)KS.fromBufferAttribute(this,e),KS.applyMatrix3(t),this.setXY(e,KS.x,KS.y);else if(3===this.itemSize)for(let e=0,n=this.count;e<n;e++)Mu.fromBufferAttribute(this,e),Mu.applyMatrix3(t),this.setXYZ(e,Mu.x,Mu.y,Mu.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)Mu.fromBufferAttribute(this,e),Mu.applyMatrix4(t),this.setXYZ(e,Mu.x,Mu.y,Mu.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)Mu.fromBufferAttribute(this,e),Mu.applyNormalMatrix(t),this.setXYZ(e,Mu.x,Mu.y,Mu.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)Mu.fromBufferAttribute(this,e),Mu.transformDirection(t),this.setXYZ(e,Mu.x,Mu.y,Mu.z);return this}set(t,e=0){return this.array.set(t,e),this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=gy(e,this.array)),e}setX(t,e){return this.normalized&&(e=bl(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=gy(e,this.array)),e}setY(t,e){return this.normalized&&(e=bl(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=gy(e,this.array)),e}setZ(t,e){return this.normalized&&(e=bl(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=gy(e,this.array)),e}setW(t,e){return this.normalized&&(e=bl(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=bl(e,this.array),n=bl(n,this.array)),this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,r){return t*=this.itemSize,this.normalized&&(e=bl(e,this.array),n=bl(n,this.array),r=bl(r,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this}setXYZW(t,e,n,r,s){return t*=this.itemSize,this.normalized&&(e=bl(e,this.array),n=bl(n,this.array),r=bl(r,this.array),s=bl(s,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=s,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),35044!==this.usage&&(t.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(t.updateRange=this.updateRange),t}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class j5 extends Cd{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class $5 extends Cd{constructor(t,e,n){super(new Uint32Array(t),e,n)}}class ss extends Cd{constructor(t,e,n){super(new Float32Array(t),e,n)}}let Mme=0;const xg=new po,lP=new Vf,FC=new jt,Op=new y_,oA=new y_,xd=new jt;class Bo extends AC{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Mme++}),this.uuid=Lp(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return this.index=Array.isArray(t)?new(P5(t)?$5:j5)(t,1):t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const s=(new Pp).getNormalMatrix(t);n.applyNormalMatrix(s),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(t),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return xg.makeRotationFromQuaternion(t),this.applyMatrix4(xg),this}rotateX(t){return xg.makeRotationX(t),this.applyMatrix4(xg),this}rotateY(t){return xg.makeRotationY(t),this.applyMatrix4(xg),this}rotateZ(t){return xg.makeRotationZ(t),this.applyMatrix4(xg),this}translate(t,e,n){return xg.makeTranslation(t,e,n),this.applyMatrix4(xg),this}scale(t,e,n){return xg.makeScale(t,e,n),this.applyMatrix4(xg),this}lookAt(t){return lP.lookAt(t),lP.updateMatrix(),this.applyMatrix4(lP.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(FC).negate(),this.translate(FC.x,FC.y,FC.z),this}setFromPoints(t){const e=[];for(let n=0,r=t.length;n<r;n++){const s=t[n];e.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new ss(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new y_);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new jt(-1/0,-1/0,-1/0),new jt(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let n=0,r=e.length;n<r;n++)Op.setFromBufferAttribute(e[n]),this.morphTargetsRelative?(xd.addVectors(this.boundingBox.min,Op.min),this.boundingBox.expandByPoint(xd),xd.addVectors(this.boundingBox.max,Op.max),this.boundingBox.expandByPoint(xd)):(this.boundingBox.expandByPoint(Op.min),this.boundingBox.expandByPoint(Op.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new LC);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new jt,1/0);if(t){const n=this.boundingSphere.center;if(Op.setFromBufferAttribute(t),e)for(let s=0,o=e.length;s<o;s++)oA.setFromBufferAttribute(e[s]),this.morphTargetsRelative?(xd.addVectors(Op.min,oA.min),Op.expandByPoint(xd),xd.addVectors(Op.max,oA.max),Op.expandByPoint(xd)):(Op.expandByPoint(oA.min),Op.expandByPoint(oA.max));Op.getCenter(n);let r=0;for(let s=0,o=t.count;s<o;s++)xd.fromBufferAttribute(t,s),r=Math.max(r,n.distanceToSquared(xd));if(e)for(let s=0,o=e.length;s<o;s++){const l=e[s],u=this.morphTargetsRelative;for(let p=0,v=l.count;p<v;p++)xd.fromBufferAttribute(l,p),u&&(FC.fromBufferAttribute(t,p),xd.add(FC)),r=Math.max(r,n.distanceToSquared(xd))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.array,r=e.position.array,s=e.normal.array,o=e.uv.array,l=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Cd(new Float32Array(4*l),4));const u=this.getAttribute("tangent").array,p=[],v=[];for(let tn=0;tn<l;tn++)p[tn]=new jt,v[tn]=new jt;const x=new jt,I=new jt,T=new jt,F=new Gi,j=new Gi,X=new Gi,ce=new jt,we=new jt;function ye(tn,zn,Qn){x.fromArray(r,3*tn),I.fromArray(r,3*zn),T.fromArray(r,3*Qn),F.fromArray(o,2*tn),j.fromArray(o,2*zn),X.fromArray(o,2*Qn),I.sub(x),T.sub(x),j.sub(F),X.sub(F);const Un=1/(j.x*X.y-X.x*j.y);!isFinite(Un)||(ce.copy(I).multiplyScalar(X.y).addScaledVector(T,-j.y).multiplyScalar(Un),we.copy(T).multiplyScalar(j.x).addScaledVector(I,-X.x).multiplyScalar(Un),p[tn].add(ce),p[zn].add(ce),p[Qn].add(ce),v[tn].add(we),v[zn].add(we),v[Qn].add(we))}let Ae=this.groups;0===Ae.length&&(Ae=[{start:0,count:n.length}]);for(let tn=0,zn=Ae.length;tn<zn;++tn){const Qn=Ae[tn],Un=Qn.start;for(let Nn=Un,_n=Un+Qn.count;Nn<_n;Nn+=3)ye(n[Nn+0],n[Nn+1],n[Nn+2])}const We=new jt,ot=new jt,Mt=new jt,Xe=new jt;function yt(tn){Mt.fromArray(s,3*tn),Xe.copy(Mt);const zn=p[tn];We.copy(zn),We.sub(Mt.multiplyScalar(Mt.dot(zn))).normalize(),ot.crossVectors(Xe,zn);const Un=ot.dot(v[tn])<0?-1:1;u[4*tn]=We.x,u[4*tn+1]=We.y,u[4*tn+2]=We.z,u[4*tn+3]=Un}for(let tn=0,zn=Ae.length;tn<zn;++tn){const Qn=Ae[tn],Un=Qn.start;for(let Nn=Un,_n=Un+Qn.count;Nn<_n;Nn+=3)yt(n[Nn+0]),yt(n[Nn+1]),yt(n[Nn+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let n=this.getAttribute("normal");if(void 0===n)n=new Cd(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(let I=0,T=n.count;I<T;I++)n.setXYZ(I,0,0,0);const r=new jt,s=new jt,o=new jt,l=new jt,u=new jt,p=new jt,v=new jt,x=new jt;if(t)for(let I=0,T=t.count;I<T;I+=3){const F=t.getX(I+0),j=t.getX(I+1),X=t.getX(I+2);r.fromBufferAttribute(e,F),s.fromBufferAttribute(e,j),o.fromBufferAttribute(e,X),v.subVectors(o,s),x.subVectors(r,s),v.cross(x),l.fromBufferAttribute(n,F),u.fromBufferAttribute(n,j),p.fromBufferAttribute(n,X),l.add(v),u.add(v),p.add(v),n.setXYZ(F,l.x,l.y,l.z),n.setXYZ(j,u.x,u.y,u.z),n.setXYZ(X,p.x,p.y,p.z)}else for(let I=0,T=e.count;I<T;I+=3)r.fromBufferAttribute(e,I+0),s.fromBufferAttribute(e,I+1),o.fromBufferAttribute(e,I+2),v.subVectors(o,s),x.subVectors(r,s),v.cross(x),n.setXYZ(I+0,v.x,v.y,v.z),n.setXYZ(I+1,v.x,v.y,v.z),n.setXYZ(I+2,v.x,v.y,v.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)xd.fromBufferAttribute(t,e),xd.normalize(),t.setXYZ(e,xd.x,xd.y,xd.z)}toNonIndexed(){function t(l,u){const p=l.array,v=l.itemSize,x=l.normalized,I=new p.constructor(u.length*v);let T=0,F=0;for(let j=0,X=u.length;j<X;j++){T=l.isInterleavedBufferAttribute?u[j]*l.data.stride+l.offset:u[j]*v;for(let ce=0;ce<v;ce++)I[F++]=p[T++]}return new Cd(I,v,x)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new Bo,n=this.index.array,r=this.attributes;for(const l in r){const p=t(r[l],n);e.setAttribute(l,p)}const s=this.morphAttributes;for(const l in s){const u=[],p=s[l];for(let v=0,x=p.length;v<x;v++){const T=t(p[v],n);u.push(T)}e.morphAttributes[l]=u}e.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let l=0,u=o.length;l<u;l++){const p=o[l];e.addGroup(p.start,p.count,p.materialIndex)}return e}toJSON(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const u=this.parameters;for(const p in u)void 0!==u[p]&&(t[p]=u[p]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const u in n)t.data.attributes[u]=n[u].toJSON(t.data);const r={};let s=!1;for(const u in this.morphAttributes){const p=this.morphAttributes[u],v=[];for(let x=0,I=p.length;x<I;x++)v.push(p[x].toJSON(t.data));v.length>0&&(r[u]=v,s=!0)}s&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(t.data.groups=JSON.parse(JSON.stringify(o)));const l=this.boundingSphere;return null!==l&&(t.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;null!==n&&this.setIndex(n.clone(e));const r=t.attributes;for(const p in r)this.setAttribute(p,r[p].clone(e));const s=t.morphAttributes;for(const p in s){const v=[],x=s[p];for(let I=0,T=x.length;I<T;I++)v.push(x[I].clone(e));this.morphAttributes[p]=v}this.morphTargetsRelative=t.morphTargetsRelative;const o=t.groups;for(let p=0,v=o.length;p<v;p++){const x=o[p];this.addGroup(x.start,x.count,x.materialIndex)}const l=t.boundingBox;null!==l&&(this.boundingBox=l.clone());const u=t.boundingSphere;return null!==u&&(this.boundingSphere=u.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,void 0!==t.parameters&&(this.parameters=Object.assign({},t.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const q5=new po,NC=new qS,cP=new LC,w_=new jt,A_=new jt,I_=new jt,uP=new jt,dP=new jt,hP=new jt,ZS=new jt,QS=new jt,JS=new jt,eE=new Gi,tE=new Gi,nE=new Gi,fP=new jt,iE=new jt;class Mh extends Vf{constructor(t=new Bo,e=new j0){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const r=e[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}raycast(t,e){const n=this.geometry,r=this.material,s=this.matrixWorld;if(void 0===r||(null===n.boundingSphere&&n.computeBoundingSphere(),cP.copy(n.boundingSphere),cP.applyMatrix4(s),!1===t.ray.intersectsSphere(cP))||(q5.copy(s).invert(),NC.copy(t.ray).applyMatrix4(q5),null!==n.boundingBox&&!1===NC.intersectsBox(n.boundingBox)))return;let o;const l=n.index,u=n.attributes.position,p=n.morphAttributes.position,v=n.morphTargetsRelative,x=n.attributes.uv,I=n.attributes.uv2,T=n.groups,F=n.drawRange;if(null!==l)if(Array.isArray(r))for(let j=0,X=T.length;j<X;j++){const ce=T[j],we=r[ce.materialIndex];for(let We=Math.max(ce.start,F.start),ot=Math.min(l.count,Math.min(ce.start+ce.count,F.start+F.count));We<ot;We+=3){const Mt=l.getX(We),Xe=l.getX(We+1),yt=l.getX(We+2);o=rE(this,we,t,NC,u,p,v,x,I,Mt,Xe,yt),o&&(o.faceIndex=Math.floor(We/3),o.face.materialIndex=ce.materialIndex,e.push(o))}}else for(let ce=Math.max(0,F.start),we=Math.min(l.count,F.start+F.count);ce<we;ce+=3){const ye=l.getX(ce),Ae=l.getX(ce+1),We=l.getX(ce+2);o=rE(this,r,t,NC,u,p,v,x,I,ye,Ae,We),o&&(o.faceIndex=Math.floor(ce/3),e.push(o))}else if(void 0!==u)if(Array.isArray(r))for(let j=0,X=T.length;j<X;j++){const ce=T[j],we=r[ce.materialIndex];for(let We=Math.max(ce.start,F.start),ot=Math.min(u.count,Math.min(ce.start+ce.count,F.start+F.count));We<ot;We+=3)o=rE(this,we,t,NC,u,p,v,x,I,We,We+1,We+2),o&&(o.faceIndex=Math.floor(We/3),o.face.materialIndex=ce.materialIndex,e.push(o))}else for(let ce=Math.max(0,F.start),we=Math.min(u.count,F.start+F.count);ce<we;ce+=3)o=rE(this,r,t,NC,u,p,v,x,I,ce,ce+1,ce+2),o&&(o.faceIndex=Math.floor(ce/3),e.push(o))}}function rE(i,t,e,n,r,s,o,l,u,p,v,x){w_.fromBufferAttribute(r,p),A_.fromBufferAttribute(r,v),I_.fromBufferAttribute(r,x);const I=i.morphTargetInfluences;if(s&&I){ZS.set(0,0,0),QS.set(0,0,0),JS.set(0,0,0);for(let F=0,j=s.length;F<j;F++){const X=I[F],ce=s[F];0!==X&&(uP.fromBufferAttribute(ce,p),dP.fromBufferAttribute(ce,v),hP.fromBufferAttribute(ce,x),o?(ZS.addScaledVector(uP,X),QS.addScaledVector(dP,X),JS.addScaledVector(hP,X)):(ZS.addScaledVector(uP.sub(w_),X),QS.addScaledVector(dP.sub(A_),X),JS.addScaledVector(hP.sub(I_),X)))}w_.add(ZS),A_.add(QS),I_.add(JS)}i.isSkinnedMesh&&(i.boneTransform(p,w_),i.boneTransform(v,A_),i.boneTransform(x,I_));const T=function Dme(i,t,e,n,r,s,o,l){let u;if(u=1===t.side?n.intersectTriangle(o,s,r,!0,l):n.intersectTriangle(r,s,o,2!==t.side,l),null===u)return null;iE.copy(l),iE.applyMatrix4(i.matrixWorld);const p=e.ray.origin.distanceTo(iE);return p<e.near||p>e.far?null:{distance:p,point:iE.clone(),object:i}}(i,t,e,n,w_,A_,I_,fP);if(T){l&&(eE.fromBufferAttribute(l,p),tE.fromBufferAttribute(l,v),nE.fromBufferAttribute(l,x),T.uv=Cm.getUV(fP,w_,A_,I_,eE,tE,nE,new Gi)),u&&(eE.fromBufferAttribute(u,p),tE.fromBufferAttribute(u,v),nE.fromBufferAttribute(u,x),T.uv2=Cm.getUV(fP,w_,A_,I_,eE,tE,nE,new Gi));const F={a:p,b:v,c:x,normal:new jt,materialIndex:0};Cm.getNormal(w_,A_,I_,F.normal),T.face=F}return T}class S_ extends Bo{constructor(t=1,e=1,n=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:s,depthSegments:o};const l=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const u=[],p=[],v=[],x=[];let I=0,T=0;function F(j,X,ce,we,ye,Ae,We,ot,Mt,Xe,yt){const tn=Ae/Mt,zn=We/Xe,Qn=Ae/2,Un=We/2,An=ot/2,Nn=Mt+1,_n=Xe+1;let Vn=0,Fn=0;const bn=new jt;for(let Bn=0;Bn<_n;Bn++){const Wi=Bn*zn-Un;for(let wi=0;wi<Nn;wi++)bn[j]=(wi*tn-Qn)*we,bn[X]=Wi*ye,bn[ce]=An,p.push(bn.x,bn.y,bn.z),bn[j]=0,bn[X]=0,bn[ce]=ot>0?1:-1,v.push(bn.x,bn.y,bn.z),x.push(wi/Mt),x.push(1-Bn/Xe),Vn+=1}for(let Bn=0;Bn<Xe;Bn++)for(let Wi=0;Wi<Mt;Wi++){const er=I+Wi+Nn*(Bn+1),cr=I+(Wi+1)+Nn*(Bn+1),Is=I+(Wi+1)+Nn*Bn;u.push(I+Wi+Nn*Bn,er,Is),u.push(er,cr,Is),Fn+=6}l.addGroup(T,Fn,yt),T+=Fn,I+=Vn}F("z","y","x",-1,-1,n,e,t,o,s,0),F("z","y","x",1,-1,n,e,-t,o,s,1),F("x","z","y",1,1,t,n,e,r,o,2),F("x","z","y",1,-1,t,n,-e,r,o,3),F("x","y","z",1,-1,t,e,n,r,s,4),F("x","y","z",-1,-1,t,e,-n,r,s,5),this.setIndex(u),this.setAttribute("position",new ss(p,3)),this.setAttribute("normal",new ss(v,3)),this.setAttribute("uv",new ss(x,2))}static fromJSON(t){return new S_(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function BC(i){const t={};for(const e in i){t[e]={};for(const n in i[e]){const r=i[e][n];t[e][n]=r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.clone():Array.isArray(r)?r.slice():r}}return t}function lf(i){const t={};for(let e=0;e<i.length;e++){const n=BC(i[e]);for(const r in n)t[r]=n[r]}return t}const Pme={clone:BC,merge:lf};class E_ extends W0{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=BC(t.uniforms),this.uniformsGroups=function Lme(i){const t=[];for(let e=0;e<i.length;e++)t.push(i[e].clone());return t}(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;e.uniforms[r]=o&&o.isTexture?{type:"t",value:o.toJSON(t).uuid}:o&&o.isColor?{type:"c",value:o.getHex()}:o&&o.isVector2?{type:"v2",value:o.toArray()}:o&&o.isVector3?{type:"v3",value:o.toArray()}:o&&o.isVector4?{type:"v4",value:o.toArray()}:o&&o.isMatrix3?{type:"m3",value:o.toArray()}:o&&o.isMatrix4?{type:"m4",value:o.toArray()}:{value:o}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}class pP extends Vf{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new po,this.projectionMatrix=new po,this.projectionMatrixInverse=new po}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class eh extends pP{constructor(t=50,e=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*eA*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*B0*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*eA*Math.atan(Math.tan(.5*B0*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,n,r,s,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*B0*this.fov)/this.zoom,n=2*e,r=this.aspect*n,s=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const u=o.fullWidth,p=o.fullHeight;s+=o.offsetX*r/u,e-=o.offsetY*n/p,r*=o.width/u,n*=o.height/p}const l=this.filmOffset;0!==l&&(s+=t*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,e,e-n,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}class Ome extends Vf{constructor(t,e,n){super(),this.type="CubeCamera",this.renderTarget=n;const r=new eh(90,1,t,e);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new jt(1,0,0)),this.add(r);const s=new eh(90,1,t,e);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new jt(-1,0,0)),this.add(s);const o=new eh(90,1,t,e);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new jt(0,1,0)),this.add(o);const l=new eh(90,1,t,e);l.layers=this.layers,l.up.set(0,0,-1),l.lookAt(new jt(0,-1,0)),this.add(l);const u=new eh(90,1,t,e);u.layers=this.layers,u.up.set(0,-1,0),u.lookAt(new jt(0,0,1)),this.add(u);const p=new eh(90,1,t,e);p.layers=this.layers,p.up.set(0,-1,0),p.lookAt(new jt(0,0,-1)),this.add(p)}update(t,e){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[r,s,o,l,u,p]=this.children,v=t.getRenderTarget(),x=t.toneMapping,I=t.xr.enabled;t.toneMapping=0,t.xr.enabled=!1;const T=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,r),t.setRenderTarget(n,1),t.render(e,s),t.setRenderTarget(n,2),t.render(e,o),t.setRenderTarget(n,3),t.render(e,l),t.setRenderTarget(n,4),t.render(e,u),n.texture.generateMipmaps=T,t.setRenderTarget(n,5),t.render(e,p),t.setRenderTarget(v),t.toneMapping=x,t.xr.enabled=I,n.texture.needsPMREMUpdate=!0}}class sE extends v_{constructor(t,e,n,r,s,o,l,u,p,v){super(t=void 0!==t?t:[],e=void 0!==e?e:301,n,r,s,o,l,u,p,v),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class Fme extends V0{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;const n={width:t,height:t,depth:1};this.texture=new sE([n,n,n,n,n,n],e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:Tu}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n_uniforms={tEquirect:{value:null}},n_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",n_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",r=new S_(5,5,5),s=new E_({name:"CubemapFromEquirect",uniforms:BC(n_uniforms),vertexShader:n_vertexShader,fragmentShader:n_fragmentShader,side:1,blending:0});s.uniforms.tEquirect.value=e;const o=new Mh(r,s),l=e.minFilter;return 1008===e.minFilter&&(e.minFilter=Tu),new Ome(1,10,this).update(t,o),e.minFilter=l,o.geometry.dispose(),o.material.dispose(),this}clear(t,e,n,r){const s=t.getRenderTarget();for(let o=0;o<6;o++)t.setRenderTarget(this,o),t.clear(e,n,r);t.setRenderTarget(s)}}const gP=new jt,Nme=new jt,Bme=new Pp;class $0{constructor(t=new jt(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const r=gP.subVectors(n,e).cross(Nme.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,e){const n=t.delta(gP),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;const s=-(t.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:e.copy(n).multiplyScalar(s).add(t.start)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||Bme.getNormalMatrix(t),r=this.coplanarPoint(gP).applyMatrix4(t),s=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(s),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const UC=new LC,oE=new jt;class mP{constructor(t=new $0,e=new $0,n=new $0,r=new $0,s=new $0,o=new $0){this.planes=[t,e,n,r,s,o]}set(t,e,n,r,s,o){const l=this.planes;return l[0].copy(t),l[1].copy(e),l[2].copy(n),l[3].copy(r),l[4].copy(s),l[5].copy(o),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t){const e=this.planes,n=t.elements,r=n[0],s=n[1],o=n[2],l=n[3],u=n[4],p=n[5],v=n[6],x=n[7],I=n[8],T=n[9],F=n[10],j=n[11],X=n[12],ce=n[13],we=n[14],ye=n[15];return e[0].setComponents(l-r,x-u,j-I,ye-X).normalize(),e[1].setComponents(l+r,x+u,j+I,ye+X).normalize(),e[2].setComponents(l+s,x+p,j+T,ye+ce).normalize(),e[3].setComponents(l-s,x-p,j-T,ye-ce).normalize(),e[4].setComponents(l-o,x-v,j-F,ye-we).normalize(),e[5].setComponents(l+o,x+v,j+F,ye+we).normalize(),this}intersectsObject(t){const e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),UC.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(UC)}intersectsSprite(t){return UC.center.set(0,0,0),UC.radius=.7071067811865476,UC.applyMatrix4(t.matrixWorld),this.intersectsSphere(UC)}intersectsSphere(t){const e=this.planes,n=t.center,r=-t.radius;for(let s=0;s<6;s++)if(e[s].distanceToPoint(n)<r)return!1;return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const r=e[n];if(oE.x=r.normal.x>0?t.max.x:t.min.x,oE.y=r.normal.y>0?t.max.y:t.min.y,oE.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(oE)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function X5(){let i=null,t=!1,e=null,n=null;function r(s,o){e(s,o),n=i.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==e&&(n=i.requestAnimationFrame(r),t=!0)},stop:function(){i.cancelAnimationFrame(n),t=!1},setAnimationLoop:function(s){e=s},setContext:function(s){i=s}}}function zme(i,t){const e=t.isWebGL2,n=new WeakMap;return{get:function o(p){return p.isInterleavedBufferAttribute&&(p=p.data),n.get(p)},remove:function l(p){p.isInterleavedBufferAttribute&&(p=p.data);const v=n.get(p);v&&(i.deleteBuffer(v.buffer),n.delete(p))},update:function u(p,v){if(p.isGLBufferAttribute){const I=n.get(p);return void((!I||I.version<p.version)&&n.set(p,{buffer:p.buffer,type:p.type,bytesPerElement:p.elementSize,version:p.version}))}p.isInterleavedBufferAttribute&&(p=p.data);const x=n.get(p);void 0===x?n.set(p,function r(p,v){const x=p.array,I=p.usage,T=i.createBuffer();let F;if(i.bindBuffer(v,T),i.bufferData(v,x,I),p.onUploadCallback(),x instanceof Float32Array)F=5126;else if(x instanceof Uint16Array)if(p.isFloat16BufferAttribute){if(!e)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");F=5131}else F=5123;else if(x instanceof Int16Array)F=5122;else if(x instanceof Uint32Array)F=5125;else if(x instanceof Int32Array)F=5124;else if(x instanceof Int8Array)F=5120;else if(x instanceof Uint8Array)F=5121;else{if(!(x instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+x);F=5121}return{buffer:T,type:F,bytesPerElement:x.BYTES_PER_ELEMENT,version:p.version}}(p,v)):x.version<p.version&&(function s(p,v,x){const I=v.array,T=v.updateRange;i.bindBuffer(x,p),-1===T.count?i.bufferSubData(x,0,I):(e?i.bufferSubData(x,T.offset*I.BYTES_PER_ELEMENT,I,T.offset,T.count):i.bufferSubData(x,T.offset*I.BYTES_PER_ELEMENT,I.subarray(T.offset,T.offset+T.count)),T.count=-1)}(x.buffer,p,v),x.version=p.version)}}}class aE extends Bo{constructor(t=1,e=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r};const s=t/2,o=e/2,l=Math.floor(n),u=Math.floor(r),p=l+1,v=u+1,x=t/l,I=e/u,T=[],F=[],j=[],X=[];for(let ce=0;ce<v;ce++){const we=ce*I-o;for(let ye=0;ye<p;ye++)F.push(ye*x-s,-we,0),j.push(0,0,1),X.push(ye/l),X.push(1-ce/u)}for(let ce=0;ce<u;ce++)for(let we=0;we<l;we++){const Ae=we+p*(ce+1),We=we+1+p*(ce+1),ot=we+1+p*ce;T.push(we+p*ce,Ae,ot),T.push(Ae,We,ot)}this.setIndex(T),this.setAttribute("position",new ss(F,3)),this.setAttribute("normal",new ss(j,3)),this.setAttribute("uv",new ss(X,2))}static fromJSON(t){return new aE(t.width,t.height,t.widthSegments,t.heightSegments)}}const Lo={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert\n#define Material_LightProbeLOD( material )\t(0)",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Er={common:{diffuse:{value:new Jr(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Pp},uv2Transform:{value:new Pp},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Gi(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Jr(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Jr(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Pp}},sprite:{diffuse:{value:new Jr(16777215)},opacity:{value:1},center:{value:new Gi(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Pp}}},uv={basic:{uniforms:lf([Er.common,Er.specularmap,Er.envmap,Er.aomap,Er.lightmap,Er.fog]),vertexShader:Lo.meshbasic_vert,fragmentShader:Lo.meshbasic_frag},lambert:{uniforms:lf([Er.common,Er.specularmap,Er.envmap,Er.aomap,Er.lightmap,Er.emissivemap,Er.bumpmap,Er.normalmap,Er.displacementmap,Er.fog,Er.lights,{emissive:{value:new Jr(0)}}]),vertexShader:Lo.meshlambert_vert,fragmentShader:Lo.meshlambert_frag},phong:{uniforms:lf([Er.common,Er.specularmap,Er.envmap,Er.aomap,Er.lightmap,Er.emissivemap,Er.bumpmap,Er.normalmap,Er.displacementmap,Er.fog,Er.lights,{emissive:{value:new Jr(0)},specular:{value:new Jr(1118481)},shininess:{value:30}}]),vertexShader:Lo.meshphong_vert,fragmentShader:Lo.meshphong_frag},standard:{uniforms:lf([Er.common,Er.envmap,Er.aomap,Er.lightmap,Er.emissivemap,Er.bumpmap,Er.normalmap,Er.displacementmap,Er.roughnessmap,Er.metalnessmap,Er.fog,Er.lights,{emissive:{value:new Jr(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Lo.meshphysical_vert,fragmentShader:Lo.meshphysical_frag},toon:{uniforms:lf([Er.common,Er.aomap,Er.lightmap,Er.emissivemap,Er.bumpmap,Er.normalmap,Er.displacementmap,Er.gradientmap,Er.fog,Er.lights,{emissive:{value:new Jr(0)}}]),vertexShader:Lo.meshtoon_vert,fragmentShader:Lo.meshtoon_frag},matcap:{uniforms:lf([Er.common,Er.bumpmap,Er.normalmap,Er.displacementmap,Er.fog,{matcap:{value:null}}]),vertexShader:Lo.meshmatcap_vert,fragmentShader:Lo.meshmatcap_frag},points:{uniforms:lf([Er.points,Er.fog]),vertexShader:Lo.points_vert,fragmentShader:Lo.points_frag},dashed:{uniforms:lf([Er.common,Er.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Lo.linedashed_vert,fragmentShader:Lo.linedashed_frag},depth:{uniforms:lf([Er.common,Er.displacementmap]),vertexShader:Lo.depth_vert,fragmentShader:Lo.depth_frag},normal:{uniforms:lf([Er.common,Er.bumpmap,Er.normalmap,Er.displacementmap,{opacity:{value:1}}]),vertexShader:Lo.meshnormal_vert,fragmentShader:Lo.meshnormal_frag},sprite:{uniforms:lf([Er.sprite,Er.fog]),vertexShader:Lo.sprite_vert,fragmentShader:Lo.sprite_frag},background:{uniforms:{uvTransform:{value:new Pp},t2D:{value:null}},vertexShader:Lo.background_vert,fragmentShader:Lo.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0}},vertexShader:Lo.backgroundCube_vert,fragmentShader:Lo.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Lo.cube_vert,fragmentShader:Lo.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Lo.equirect_vert,fragmentShader:Lo.equirect_frag},distanceRGBA:{uniforms:lf([Er.common,Er.displacementmap,{referencePosition:{value:new jt},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Lo.distanceRGBA_vert,fragmentShader:Lo.distanceRGBA_frag},shadow:{uniforms:lf([Er.lights,Er.fog,{color:{value:new Jr(0)},opacity:{value:1}}]),vertexShader:Lo.shadow_vert,fragmentShader:Lo.shadow_frag}};function Bye(i,t,e,n,r,s,o){const l=new Jr(0);let p,v,u=!0===s?0:1,x=null,I=0,T=null;function j(X,ce){n.buffers.color.setClear(X.r,X.g,X.b,ce,o)}return{getClearColor:function(){return l},setClearColor:function(X,ce=1){l.set(X),u=ce,j(l,u)},getClearAlpha:function(){return u},setClearAlpha:function(X){u=X,j(l,u)},render:function F(X,ce){let we=!1,ye=!0===ce.isScene?ce.background:null;ye&&ye.isTexture&&(ye=(ce.backgroundBlurriness>0?e:t).get(ye));const Ae=i.xr,We=Ae.getSession&&Ae.getSession();We&&"additive"===We.environmentBlendMode&&(ye=null),null===ye?j(l,u):ye&&ye.isColor&&(j(ye,1),we=!0),(i.autoClear||we)&&i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil),ye&&(ye.isCubeTexture||306===ye.mapping)?(void 0===v&&(v=new Mh(new S_(1,1,1),new E_({name:"BackgroundCubeMaterial",uniforms:BC(uv.backgroundCube.uniforms),vertexShader:uv.backgroundCube.vertexShader,fragmentShader:uv.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),v.geometry.deleteAttribute("normal"),v.geometry.deleteAttribute("uv"),v.onBeforeRender=function(ot,Mt,Xe){this.matrixWorld.copyPosition(Xe.matrixWorld)},Object.defineProperty(v.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(v)),v.material.uniforms.envMap.value=ye,v.material.uniforms.flipEnvMap.value=ye.isCubeTexture&&!1===ye.isRenderTargetTexture?-1:1,v.material.uniforms.backgroundBlurriness.value=ce.backgroundBlurriness,(x!==ye||I!==ye.version||T!==i.toneMapping)&&(v.material.needsUpdate=!0,x=ye,I=ye.version,T=i.toneMapping),v.layers.enableAll(),X.unshift(v,v.geometry,v.material,0,0,null)):ye&&ye.isTexture&&(void 0===p&&(p=new Mh(new aE(2,2),new E_({name:"BackgroundMaterial",uniforms:BC(uv.background.uniforms),vertexShader:uv.background.vertexShader,fragmentShader:uv.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),p.geometry.deleteAttribute("normal"),Object.defineProperty(p.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(p)),p.material.uniforms.t2D.value=ye,!0===ye.matrixAutoUpdate&&ye.updateMatrix(),p.material.uniforms.uvTransform.value.copy(ye.matrix),(x!==ye||I!==ye.version||T!==i.toneMapping)&&(p.material.needsUpdate=!0,x=ye,I=ye.version,T=i.toneMapping),p.layers.enableAll(),X.unshift(p,p.geometry,p.material,0,0,null))}}}function zye(i,t,e,n){const r=i.getParameter(34921),s=n.isWebGL2?null:t.get("OES_vertex_array_object"),o=n.isWebGL2||null!==s,l={},u=X(null);let p=u,v=!1;function T(An){return n.isWebGL2?i.bindVertexArray(An):s.bindVertexArrayOES(An)}function F(An){return n.isWebGL2?i.deleteVertexArray(An):s.deleteVertexArrayOES(An)}function X(An){const Nn=[],_n=[],Vn=[];for(let Fn=0;Fn<r;Fn++)Nn[Fn]=0,_n[Fn]=0,Vn[Fn]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Nn,enabledAttributes:_n,attributeDivisors:Vn,object:An,attributes:{},index:null}}function ye(){const An=p.newAttributes;for(let Nn=0,_n=An.length;Nn<_n;Nn++)An[Nn]=0}function Ae(An){We(An,0)}function We(An,Nn){const Vn=p.enabledAttributes,Fn=p.attributeDivisors;p.newAttributes[An]=1,0===Vn[An]&&(i.enableVertexAttribArray(An),Vn[An]=1),Fn[An]!==Nn&&((n.isWebGL2?i:t.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](An,Nn),Fn[An]=Nn)}function ot(){const An=p.newAttributes,Nn=p.enabledAttributes;for(let _n=0,Vn=Nn.length;_n<Vn;_n++)Nn[_n]!==An[_n]&&(i.disableVertexAttribArray(_n),Nn[_n]=0)}function Mt(An,Nn,_n,Vn,Fn,bn){!0!==n.isWebGL2||5124!==_n&&5125!==_n?i.vertexAttribPointer(An,Nn,_n,Vn,Fn,bn):i.vertexAttribIPointer(An,Nn,_n,Fn,bn)}function Qn(){Un(),v=!0,p!==u&&(p=u,T(p.object))}function Un(){u.geometry=null,u.program=null,u.wireframe=!1}return{setup:function x(An,Nn,_n,Vn,Fn){let bn=!1;if(o){const Bn=function j(An,Nn,_n){const Vn=!0===_n.wireframe;let Fn=l[An.id];void 0===Fn&&(Fn={},l[An.id]=Fn);let bn=Fn[Nn.id];void 0===bn&&(bn={},Fn[Nn.id]=bn);let Bn=bn[Vn];return void 0===Bn&&(Bn=X(function I(){return n.isWebGL2?i.createVertexArray():s.createVertexArrayOES()}()),bn[Vn]=Bn),Bn}(Vn,_n,Nn);p!==Bn&&(p=Bn,T(p.object)),bn=function ce(An,Nn,_n,Vn){const Fn=p.attributes,bn=Nn.attributes;let Bn=0;const Wi=_n.getAttributes();for(const wi in Wi)if(Wi[wi].location>=0){const cr=Fn[wi];let Is=bn[wi];if(void 0===Is&&("instanceMatrix"===wi&&An.instanceMatrix&&(Is=An.instanceMatrix),"instanceColor"===wi&&An.instanceColor&&(Is=An.instanceColor)),void 0===cr||cr.attribute!==Is||Is&&cr.data!==Is.data)return!0;Bn++}return p.attributesNum!==Bn||p.index!==Vn}(An,Vn,_n,Fn),bn&&function we(An,Nn,_n,Vn){const Fn={},bn=Nn.attributes;let Bn=0;const Wi=_n.getAttributes();for(const wi in Wi)if(Wi[wi].location>=0){let cr=bn[wi];void 0===cr&&("instanceMatrix"===wi&&An.instanceMatrix&&(cr=An.instanceMatrix),"instanceColor"===wi&&An.instanceColor&&(cr=An.instanceColor));const Is={};Is.attribute=cr,cr&&cr.data&&(Is.data=cr.data),Fn[wi]=Is,Bn++}p.attributes=Fn,p.attributesNum=Bn,p.index=Vn}(An,Vn,_n,Fn)}else{const Bn=!0===Nn.wireframe;(p.geometry!==Vn.id||p.program!==_n.id||p.wireframe!==Bn)&&(p.geometry=Vn.id,p.program=_n.id,p.wireframe=Bn,bn=!0)}null!==Fn&&e.update(Fn,34963),(bn||v)&&(v=!1,function Xe(An,Nn,_n,Vn){if(!1===n.isWebGL2&&(An.isInstancedMesh||Vn.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;ye();const Fn=Vn.attributes,bn=_n.getAttributes(),Bn=Nn.defaultAttributeValues;for(const Wi in bn){const wi=bn[Wi];if(wi.location>=0){let er=Fn[Wi];if(void 0===er&&("instanceMatrix"===Wi&&An.instanceMatrix&&(er=An.instanceMatrix),"instanceColor"===Wi&&An.instanceColor&&(er=An.instanceColor)),void 0!==er){const cr=er.normalized,Is=er.itemSize,Si=e.get(er);if(void 0===Si)continue;const _s=Si.buffer,hs=Si.type,fs=Si.bytesPerElement;if(er.isInterleavedBufferAttribute){const Lr=er.data,Co=Lr.stride,Vi=er.offset;if(Lr.isInstancedInterleavedBuffer){for(let Ri=0;Ri<wi.locationSize;Ri++)We(wi.location+Ri,Lr.meshPerAttribute);!0!==An.isInstancedMesh&&void 0===Vn._maxInstanceCount&&(Vn._maxInstanceCount=Lr.meshPerAttribute*Lr.count)}else for(let Ri=0;Ri<wi.locationSize;Ri++)Ae(wi.location+Ri);i.bindBuffer(34962,_s);for(let Ri=0;Ri<wi.locationSize;Ri++)Mt(wi.location+Ri,Is/wi.locationSize,hs,cr,Co*fs,(Vi+Is/wi.locationSize*Ri)*fs)}else{if(er.isInstancedBufferAttribute){for(let Lr=0;Lr<wi.locationSize;Lr++)We(wi.location+Lr,er.meshPerAttribute);!0!==An.isInstancedMesh&&void 0===Vn._maxInstanceCount&&(Vn._maxInstanceCount=er.meshPerAttribute*er.count)}else for(let Lr=0;Lr<wi.locationSize;Lr++)Ae(wi.location+Lr);i.bindBuffer(34962,_s);for(let Lr=0;Lr<wi.locationSize;Lr++)Mt(wi.location+Lr,Is/wi.locationSize,hs,cr,Is*fs,Is/wi.locationSize*Lr*fs)}}else if(void 0!==Bn){const cr=Bn[Wi];if(void 0!==cr)switch(cr.length){case 2:i.vertexAttrib2fv(wi.location,cr);break;case 3:i.vertexAttrib3fv(wi.location,cr);break;case 4:i.vertexAttrib4fv(wi.location,cr);break;default:i.vertexAttrib1fv(wi.location,cr)}}}}ot()}(An,Nn,_n,Vn),null!==Fn&&i.bindBuffer(34963,e.get(Fn).buffer))},reset:Qn,resetDefaultState:Un,dispose:function yt(){Qn();for(const An in l){const Nn=l[An];for(const _n in Nn){const Vn=Nn[_n];for(const Fn in Vn)F(Vn[Fn].object),delete Vn[Fn];delete Nn[_n]}delete l[An]}},releaseStatesOfGeometry:function tn(An){if(void 0===l[An.id])return;const Nn=l[An.id];for(const _n in Nn){const Vn=Nn[_n];for(const Fn in Vn)F(Vn[Fn].object),delete Vn[Fn];delete Nn[_n]}delete l[An.id]},releaseStatesOfProgram:function zn(An){for(const Nn in l){const _n=l[Nn];if(void 0===_n[An.id])continue;const Vn=_n[An.id];for(const Fn in Vn)F(Vn[Fn].object),delete Vn[Fn];delete _n[An.id]}},initAttributes:ye,enableAttribute:Ae,disableUnusedAttributes:ot}}function Vye(i,t,e,n){const r=n.isWebGL2;let s;this.setMode=function o(p){s=p},this.render=function l(p,v){i.drawArrays(s,p,v),e.update(v,s,1)},this.renderInstances=function u(p,v,x){if(0===x)return;let I,T;if(r)I=i,T="drawArraysInstanced";else if(I=t.get("ANGLE_instanced_arrays"),T="drawArraysInstancedANGLE",null===I)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");I[T](s,p,v,x),e.update(v,s,x)}}function Uye(i,t,e){let n;function s(Mt){if("highp"===Mt){if(i.getShaderPrecisionFormat(35633,36338).precision>0&&i.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";Mt="mediump"}return"mediump"===Mt&&i.getShaderPrecisionFormat(35633,36337).precision>0&&i.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&i instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&i instanceof WebGL2ComputeRenderingContext;let l=void 0!==e.precision?e.precision:"highp";const u=s(l);u!==l&&(console.warn("THREE.WebGLRenderer:",l,"not supported, using",u,"instead."),l=u);const p=o||t.has("WEBGL_draw_buffers"),v=!0===e.logarithmicDepthBuffer,x=i.getParameter(34930),I=i.getParameter(35660),T=i.getParameter(3379),F=i.getParameter(34076),j=i.getParameter(34921),X=i.getParameter(36347),ce=i.getParameter(36348),we=i.getParameter(36349),ye=I>0,Ae=o||t.has("OES_texture_float");return{isWebGL2:o,drawBuffers:p,getMaxAnisotropy:function r(){if(void 0!==n)return n;if(!0===t.has("EXT_texture_filter_anisotropic")){const Mt=t.get("EXT_texture_filter_anisotropic");n=i.getParameter(Mt.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n},getMaxPrecision:s,precision:l,logarithmicDepthBuffer:v,maxTextures:x,maxVertexTextures:I,maxTextureSize:T,maxCubemapSize:F,maxAttributes:j,maxVertexUniforms:X,maxVaryings:ce,maxFragmentUniforms:we,vertexTextures:ye,floatFragmentTextures:Ae,floatVertexTextures:ye&&Ae,maxSamples:o?i.getParameter(36183):0}}function Hye(i){const t=this;let e=null,n=0,r=!1,s=!1;const o=new $0,l=new Pp,u={value:null,needsUpdate:!1};function p(){u.value!==e&&(u.value=e,u.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0}function v(x,I,T,F){const j=null!==x?x.length:0;let X=null;if(0!==j){if(X=u.value,!0!==F||null===X){const ce=T+4*j,we=I.matrixWorldInverse;l.getNormalMatrix(we),(null===X||X.length<ce)&&(X=new Float32Array(ce));for(let ye=0,Ae=T;ye!==j;++ye,Ae+=4)o.copy(x[ye]).applyMatrix4(we,l),o.normal.toArray(X,Ae),X[Ae+3]=o.constant}u.value=X,u.needsUpdate=!0}return t.numPlanes=j,t.numIntersection=0,X}this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(x,I,T){const F=0!==x.length||I||0!==n||r;return r=I,e=v(x,T,0),n=x.length,F},this.beginShadows=function(){s=!0,v(null)},this.endShadows=function(){s=!1,p()},this.setState=function(x,I,T){const F=x.clippingPlanes,j=x.clipIntersection,X=x.clipShadows,ce=i.get(x);if(!r||null===F||0===F.length||s&&!X)s?v(null):p();else{const we=s?0:n,ye=4*we;let Ae=ce.clippingState||null;u.value=Ae,Ae=v(F,I,ye,T);for(let We=0;We!==ye;++We)Ae[We]=e[We];ce.clippingState=Ae,this.numIntersection=j?this.numPlanes:0,this.numPlanes+=we}}}function Gye(i){let t=new WeakMap;function e(o,l){return 303===l?o.mapping=301:304===l&&(o.mapping=302),o}function r(o){const l=o.target;l.removeEventListener("dispose",r);const u=t.get(l);void 0!==u&&(t.delete(l),u.dispose())}return{get:function n(o){if(o&&o.isTexture&&!1===o.isRenderTargetTexture){const l=o.mapping;if(303===l||304===l){if(t.has(o))return e(t.get(o).texture,o.mapping);{const u=o.image;if(u&&u.height>0){const p=new Fme(u.height/2);return p.fromEquirectangularTexture(i,o),t.set(o,p),o.addEventListener("dispose",r),e(p.texture,o.mapping)}return null}}}return o},dispose:function s(){t=new WeakMap}}}uv.physical={uniforms:lf([uv.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Gi(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Jr(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Gi},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Jr(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Jr(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Lo.meshphysical_vert,fragmentShader:Lo.meshphysical_frag};class vP extends pP{constructor(t=-1,e=1,n=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,n,r,s,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=n-t,o=n+t,l=r+e,u=r-e;if(null!==this.view&&this.view.enabled){const p=(this.right-this.left)/this.view.fullWidth/this.zoom,v=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=p*this.view.offsetX,o=s+p*this.view.width,l-=v*this.view.offsetY,u=l-v*this.view.height}this.projectionMatrix.makeOrthographic(s,o,l,u,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}const Y5=[.125,.215,.35,.446,.526,.582],yP=new vP,K5=new Jr;let _P=null;const X0=(1+Math.sqrt(5))/2,GC=1/X0,Z5=[new jt(1,1,1),new jt(-1,1,1),new jt(1,1,-1),new jt(-1,1,-1),new jt(0,X0,GC),new jt(0,X0,-GC),new jt(GC,0,X0),new jt(-GC,0,X0),new jt(X0,GC,0),new jt(-X0,GC,0)];class Q5{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,r=100){_P=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(t,n,r,s),e>0&&this._blur(s,0,0,e),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=tG(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=eG(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(_P),t.scissorTest=!1,lE(t,0,0,t.width,t.height)}_fromTexture(t,e){this._setSize(301===t.mapping||302===t.mapping?0===t.image.length?16:t.image[0].width||t.image[0].image.width:t.image.width/4),_P=this._renderer.getRenderTarget();const n=e||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,n={magFilter:Tu,minFilter:Tu,generateMipmaps:!1,type:Jw,format:Cg,encoding:O0,depthBuffer:!1},r=J5(t,e,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=J5(t,e,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function Wye(i){const t=[],e=[],n=[];let r=i;const s=i-4+1+Y5.length;for(let o=0;o<s;o++){const l=Math.pow(2,r);e.push(l);let u=1/l;o>i-4?u=Y5[o-i+4-1]:0===o&&(u=0),n.push(u);const p=1/(l-2),v=-p,x=1+p,I=[v,v,x,v,x,x,v,v,x,x,v,x],T=6,F=6,j=3,X=2,ce=1,we=new Float32Array(j*F*T),ye=new Float32Array(X*F*T),Ae=new Float32Array(ce*F*T);for(let ot=0;ot<T;ot++){const Mt=ot%3*2/3-1,Xe=ot>2?0:-1;we.set([Mt,Xe,0,Mt+2/3,Xe,0,Mt+2/3,Xe+1,0,Mt,Xe,0,Mt+2/3,Xe+1,0,Mt,Xe+1,0],j*F*ot),ye.set(I,X*F*ot),Ae.set([ot,ot,ot,ot,ot,ot],ce*F*ot)}const We=new Bo;We.setAttribute("position",new Cd(we,j)),We.setAttribute("uv",new Cd(ye,X)),We.setAttribute("faceIndex",new Cd(Ae,ce)),t.push(We),r>4&&r--}return{lodPlanes:t,sizeLods:e,sigmas:n}}(s)),this._blurMaterial=function jye(i,t,e){const n=new Float32Array(20),r=new jt(0,1,0);return new E_({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/e,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(s,t,e)}return r}_compileMaterial(t){const e=new Mh(this._lodPlanes[0],t);this._renderer.compile(e,yP)}_sceneToCubeUV(t,e,n,r){const l=new eh(90,1,e,n),u=[1,-1,1,1,1,1],p=[1,1,1,-1,-1,-1],v=this._renderer,x=v.autoClear,I=v.toneMapping;v.getClearColor(K5),v.toneMapping=0,v.autoClear=!1;const T=new j0({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),F=new Mh(new S_,T);let j=!1;const X=t.background;X?X.isColor&&(T.color.copy(X),t.background=null,j=!0):(T.color.copy(K5),j=!0);for(let ce=0;ce<6;ce++){const we=ce%3;0===we?(l.up.set(0,u[ce],0),l.lookAt(p[ce],0,0)):1===we?(l.up.set(0,0,u[ce]),l.lookAt(0,p[ce],0)):(l.up.set(0,u[ce],0),l.lookAt(0,0,p[ce]));const ye=this._cubeSize;lE(r,we*ye,ce>2?ye:0,ye,ye),v.setRenderTarget(r),j&&v.render(F,l),v.render(t,l)}F.geometry.dispose(),F.material.dispose(),v.toneMapping=I,v.autoClear=x,t.background=X}_textureToCubeUV(t,e){const n=this._renderer,r=301===t.mapping||302===t.mapping;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=tG()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=eG());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Mh(this._lodPlanes[0],s);s.uniforms.envMap.value=t;const u=this._cubeSize;lE(e,0,0,3*u,2*u),n.setRenderTarget(e),n.render(o,yP)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]);this._blur(t,r-1,r,s,Z5[(r-1)%Z5.length])}e.autoClear=n}_blur(t,e,n,r,s){const o=this._pingPongRenderTarget;this._halfBlur(t,o,e,n,r,"latitudinal",s),this._halfBlur(o,t,n,n,r,"longitudinal",s)}_halfBlur(t,e,n,r,s,o,l){const u=this._renderer,p=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const x=new Mh(this._lodPlanes[r],p),I=p.uniforms,T=this._sizeLods[n]-1,F=isFinite(s)?Math.PI/(2*T):2*Math.PI/39,j=s/F,X=isFinite(s)?1+Math.floor(3*j):20;X>20&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${X} samples when the maximum is set to 20`);const ce=[];let we=0;for(let Mt=0;Mt<20;++Mt){const Xe=Mt/j,yt=Math.exp(-Xe*Xe/2);ce.push(yt),0===Mt?we+=yt:Mt<X&&(we+=2*yt)}for(let Mt=0;Mt<ce.length;Mt++)ce[Mt]=ce[Mt]/we;I.envMap.value=t.texture,I.samples.value=X,I.weights.value=ce,I.latitudinal.value="latitudinal"===o,l&&(I.poleAxis.value=l);const{_lodMax:ye}=this;I.dTheta.value=F,I.mipInt.value=ye-n;const Ae=this._sizeLods[r];lE(e,3*Ae*(r>ye-4?r-ye+4:0),4*(this._cubeSize-Ae),3*Ae,2*Ae),u.setRenderTarget(e),u.render(x,yP)}}function J5(i,t,e){const n=new V0(i,t,e);return n.texture.mapping=306,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function lE(i,t,e,n,r){i.viewport.set(t,e,n,r),i.scissor.set(t,e,n,r)}function eG(){return new E_({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function tG(){return new E_({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function $ye(i){let t=new WeakMap,e=null;function s(l){const u=l.target;u.removeEventListener("dispose",s);const p=t.get(u);void 0!==p&&(t.delete(u),p.dispose())}return{get:function n(l){if(l&&l.isTexture){const u=l.mapping,p=303===u||304===u,v=301===u||302===u;if(p||v){if(l.isRenderTargetTexture&&!0===l.needsPMREMUpdate){l.needsPMREMUpdate=!1;let x=t.get(l);return null===e&&(e=new Q5(i)),x=p?e.fromEquirectangular(l,x):e.fromCubemap(l,x),t.set(l,x),x.texture}if(t.has(l))return t.get(l).texture;{const x=l.image;if(p&&x&&x.height>0||v&&x&&function r(l){let u=0;for(let v=0;v<6;v++)void 0!==l[v]&&u++;return 6===u}(x)){null===e&&(e=new Q5(i));const I=p?e.fromEquirectangular(l):e.fromCubemap(l);return t.set(l,I),l.addEventListener("dispose",s),I.texture}return null}}}return l},dispose:function o(){t=new WeakMap,null!==e&&(e.dispose(),e=null)}}}function qye(i){const t={};function e(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=i.getExtension(n)}return t[n]=r,r}return{has:function(n){return null!==e(n)},init:function(n){n.isWebGL2?e("EXT_color_buffer_float"):(e("WEBGL_depth_texture"),e("OES_texture_float"),e("OES_texture_half_float"),e("OES_texture_half_float_linear"),e("OES_standard_derivatives"),e("OES_element_index_uint"),e("OES_vertex_array_object"),e("ANGLE_instanced_arrays")),e("OES_texture_float_linear"),e("EXT_color_buffer_half_float"),e("WEBGL_multisampled_render_to_texture")},get:function(n){const r=e(n);return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),r}}}function Xye(i,t,e,n){const r={},s=new WeakMap;function o(x){const I=x.target;null!==I.index&&t.remove(I.index);for(const F in I.attributes)t.remove(I.attributes[F]);I.removeEventListener("dispose",o),delete r[I.id];const T=s.get(I);T&&(t.remove(T),s.delete(I)),n.releaseStatesOfGeometry(I),!0===I.isInstancedBufferGeometry&&delete I._maxInstanceCount,e.memory.geometries--}function p(x){const I=[],T=x.index,F=x.attributes.position;let j=0;if(null!==T){const we=T.array;j=T.version;for(let ye=0,Ae=we.length;ye<Ae;ye+=3){const We=we[ye+0],ot=we[ye+1],Mt=we[ye+2];I.push(We,ot,ot,Mt,Mt,We)}}else{j=F.version;for(let ye=0,Ae=F.array.length/3-1;ye<Ae;ye+=3){const We=ye+0,ot=ye+1,Mt=ye+2;I.push(We,ot,ot,Mt,Mt,We)}}const X=new(P5(I)?$5:j5)(I,1);X.version=j;const ce=s.get(x);ce&&t.remove(ce),s.set(x,X)}return{get:function l(x,I){return!0===r[I.id]||(I.addEventListener("dispose",o),r[I.id]=!0,e.memory.geometries++),I},update:function u(x){const I=x.attributes;for(const F in I)t.update(I[F],34962);const T=x.morphAttributes;for(const F in T){const j=T[F];for(let X=0,ce=j.length;X<ce;X++)t.update(j[X],34962)}},getWireframeAttribute:function v(x){const I=s.get(x);if(I){const T=x.index;null!==T&&I.version<T.version&&p(x)}else p(x);return s.get(x)}}}function Yye(i,t,e,n){const r=n.isWebGL2;let s,l,u;this.setMode=function o(I){s=I},this.setIndex=function p(I){l=I.type,u=I.bytesPerElement},this.render=function v(I,T){i.drawElements(s,T,l,I*u),e.update(T,s,1)},this.renderInstances=function x(I,T,F){if(0===F)return;let j,X;if(r)j=i,X="drawElementsInstanced";else if(j=t.get("ANGLE_instanced_arrays"),X="drawElementsInstancedANGLE",null===j)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");j[X](s,T,l,I*u,F),e.update(T,s,F)}}function Kye(i){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function r(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function n(s,o,l){switch(e.calls++,o){case 4:e.triangles+=l*(s/3);break;case 1:e.lines+=l*(s/2);break;case 3:e.lines+=l*(s-1);break;case 2:e.lines+=l*s;break;case 0:e.points+=l*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o)}}}}function Zye(i,t){return i[0]-t[0]}function Qye(i,t){return Math.abs(t[1])-Math.abs(i[1])}function Jye(i,t,e){const n={},r=new Float32Array(8),s=new WeakMap,o=new dl,l=[];for(let p=0;p<8;p++)l[p]=[p,0];return{update:function u(p,v,x,I){const T=p.morphTargetInfluences;if(!0===t.isWebGL2){const F=v.morphAttributes.position||v.morphAttributes.normal||v.morphAttributes.color,j=void 0!==F?F.length:0;let X=s.get(v);if(void 0===X||X.count!==j){let Nn=function(){Un.dispose(),s.delete(v),v.removeEventListener("dispose",Nn)};void 0!==X&&X.texture.dispose();const ye=void 0!==v.morphAttributes.position,Ae=void 0!==v.morphAttributes.normal,We=void 0!==v.morphAttributes.color,ot=v.morphAttributes.position||[],Mt=v.morphAttributes.normal||[],Xe=v.morphAttributes.color||[];let yt=0;!0===ye&&(yt=1),!0===Ae&&(yt=2),!0===We&&(yt=3);let tn=v.attributes.position.count*yt,zn=1;tn>t.maxTextureSize&&(zn=Math.ceil(tn/t.maxTextureSize),tn=t.maxTextureSize);const Qn=new Float32Array(tn*zn*4*j),Un=new YL(Qn,tn,zn,j);Un.type=m_,Un.needsUpdate=!0;const An=4*yt;for(let _n=0;_n<j;_n++){const Vn=ot[_n],Fn=Mt[_n],bn=Xe[_n],Bn=tn*zn*4*_n;for(let Wi=0;Wi<Vn.count;Wi++){const wi=Wi*An;!0===ye&&(o.fromBufferAttribute(Vn,Wi),Qn[Bn+wi+0]=o.x,Qn[Bn+wi+1]=o.y,Qn[Bn+wi+2]=o.z,Qn[Bn+wi+3]=0),!0===Ae&&(o.fromBufferAttribute(Fn,Wi),Qn[Bn+wi+4]=o.x,Qn[Bn+wi+5]=o.y,Qn[Bn+wi+6]=o.z,Qn[Bn+wi+7]=0),!0===We&&(o.fromBufferAttribute(bn,Wi),Qn[Bn+wi+8]=o.x,Qn[Bn+wi+9]=o.y,Qn[Bn+wi+10]=o.z,Qn[Bn+wi+11]=4===bn.itemSize?o.w:1)}}X={count:j,texture:Un,size:new Gi(tn,zn)},s.set(v,X),v.addEventListener("dispose",Nn)}let ce=0;for(let ye=0;ye<T.length;ye++)ce+=T[ye];const we=v.morphTargetsRelative?1:1-ce;I.getUniforms().setValue(i,"morphTargetBaseInfluence",we),I.getUniforms().setValue(i,"morphTargetInfluences",T),I.getUniforms().setValue(i,"morphTargetsTexture",X.texture,e),I.getUniforms().setValue(i,"morphTargetsTextureSize",X.size)}else{const F=void 0===T?0:T.length;let j=n[v.id];if(void 0===j||j.length!==F){j=[];for(let Ae=0;Ae<F;Ae++)j[Ae]=[Ae,0];n[v.id]=j}for(let Ae=0;Ae<F;Ae++){const We=j[Ae];We[0]=Ae,We[1]=T[Ae]}j.sort(Qye);for(let Ae=0;Ae<8;Ae++)Ae<F&&j[Ae][1]?(l[Ae][0]=j[Ae][0],l[Ae][1]=j[Ae][1]):(l[Ae][0]=Number.MAX_SAFE_INTEGER,l[Ae][1]=0);l.sort(Zye);const X=v.morphAttributes.position,ce=v.morphAttributes.normal;let we=0;for(let Ae=0;Ae<8;Ae++){const We=l[Ae],ot=We[0],Mt=We[1];ot!==Number.MAX_SAFE_INTEGER&&Mt?(X&&v.getAttribute("morphTarget"+Ae)!==X[ot]&&v.setAttribute("morphTarget"+Ae,X[ot]),ce&&v.getAttribute("morphNormal"+Ae)!==ce[ot]&&v.setAttribute("morphNormal"+Ae,ce[ot]),r[Ae]=Mt,we+=Mt):(X&&!0===v.hasAttribute("morphTarget"+Ae)&&v.deleteAttribute("morphTarget"+Ae),ce&&!0===v.hasAttribute("morphNormal"+Ae)&&v.deleteAttribute("morphNormal"+Ae),r[Ae]=0)}const ye=v.morphTargetsRelative?1:1-we;I.getUniforms().setValue(i,"morphTargetBaseInfluence",ye),I.getUniforms().setValue(i,"morphTargetInfluences",r)}}}}function e_e(i,t,e,n){let r=new WeakMap;function l(u){const p=u.target;p.removeEventListener("dispose",l),e.remove(p.instanceMatrix),null!==p.instanceColor&&e.remove(p.instanceColor)}return{update:function s(u){const p=n.render.frame,x=t.get(u,u.geometry);return r.get(x)!==p&&(t.update(x),r.set(x,p)),u.isInstancedMesh&&(!1===u.hasEventListener("dispose",l)&&u.addEventListener("dispose",l),e.update(u.instanceMatrix,34962),null!==u.instanceColor&&e.update(u.instanceColor,34962)),x},dispose:function o(){r=new WeakMap}}}const nG=new v_,iG=new YL,rG=new O5,sG=new sE,oG=[],aG=[],lG=new Float32Array(16),cG=new Float32Array(9),uG=new Float32Array(4);function WC(i,t,e){const n=i[0];if(n<=0||n>0)return i;const r=t*e;let s=oG[r];if(void 0===s&&(s=new Float32Array(r),oG[r]=s),0!==t){n.toArray(s,0);for(let o=1,l=0;o!==t;++o)l+=e,i[o].toArray(s,l)}return s}function Ju(i,t){if(i.length!==t.length)return!1;for(let e=0,n=i.length;e<n;e++)if(i[e]!==t[e])return!1;return!0}function ed(i,t){for(let e=0,n=t.length;e<n;e++)i[e]=t[e]}function cE(i,t){let e=aG[t];void 0===e&&(e=new Int32Array(t),aG[t]=e);for(let n=0;n!==t;++n)e[n]=i.allocateTextureUnit();return e}function t_e(i,t){const e=this.cache;e[0]!==t&&(i.uniform1f(this.addr,t),e[0]=t)}function n_e(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Ju(e,t))return;i.uniform2fv(this.addr,t),ed(e,t)}}function i_e(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(void 0!==t.r)(e[0]!==t.r||e[1]!==t.g||e[2]!==t.b)&&(i.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if(Ju(e,t))return;i.uniform3fv(this.addr,t),ed(e,t)}}function r_e(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Ju(e,t))return;i.uniform4fv(this.addr,t),ed(e,t)}}function s_e(i,t){const e=this.cache,n=t.elements;if(void 0===n){if(Ju(e,t))return;i.uniformMatrix2fv(this.addr,!1,t),ed(e,t)}else{if(Ju(e,n))return;uG.set(n),i.uniformMatrix2fv(this.addr,!1,uG),ed(e,n)}}function o_e(i,t){const e=this.cache,n=t.elements;if(void 0===n){if(Ju(e,t))return;i.uniformMatrix3fv(this.addr,!1,t),ed(e,t)}else{if(Ju(e,n))return;cG.set(n),i.uniformMatrix3fv(this.addr,!1,cG),ed(e,n)}}function a_e(i,t){const e=this.cache,n=t.elements;if(void 0===n){if(Ju(e,t))return;i.uniformMatrix4fv(this.addr,!1,t),ed(e,t)}else{if(Ju(e,n))return;lG.set(n),i.uniformMatrix4fv(this.addr,!1,lG),ed(e,n)}}function l_e(i,t){const e=this.cache;e[0]!==t&&(i.uniform1i(this.addr,t),e[0]=t)}function c_e(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2i(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Ju(e,t))return;i.uniform2iv(this.addr,t),ed(e,t)}}function u_e(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3i(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(Ju(e,t))return;i.uniform3iv(this.addr,t),ed(e,t)}}function d_e(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4i(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Ju(e,t))return;i.uniform4iv(this.addr,t),ed(e,t)}}function h_e(i,t){const e=this.cache;e[0]!==t&&(i.uniform1ui(this.addr,t),e[0]=t)}function f_e(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2ui(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Ju(e,t))return;i.uniform2uiv(this.addr,t),ed(e,t)}}function p_e(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3ui(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(Ju(e,t))return;i.uniform3uiv(this.addr,t),ed(e,t)}}function g_e(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4ui(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Ju(e,t))return;i.uniform4uiv(this.addr,t),ed(e,t)}}function m_e(i,t,e){const n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),e.setTexture2D(t||nG,r)}function v_e(i,t,e){const n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),e.setTexture3D(t||rG,r)}function y_e(i,t,e){const n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),e.setTextureCube(t||sG,r)}function __e(i,t,e){const n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),e.setTexture2DArray(t||iG,r)}function C_e(i,t){i.uniform1fv(this.addr,t)}function x_e(i,t){const e=WC(t,this.size,2);i.uniform2fv(this.addr,e)}function w_e(i,t){const e=WC(t,this.size,3);i.uniform3fv(this.addr,e)}function A_e(i,t){const e=WC(t,this.size,4);i.uniform4fv(this.addr,e)}function I_e(i,t){const e=WC(t,this.size,4);i.uniformMatrix2fv(this.addr,!1,e)}function S_e(i,t){const e=WC(t,this.size,9);i.uniformMatrix3fv(this.addr,!1,e)}function E_e(i,t){const e=WC(t,this.size,16);i.uniformMatrix4fv(this.addr,!1,e)}function T_e(i,t){i.uniform1iv(this.addr,t)}function M_e(i,t){i.uniform2iv(this.addr,t)}function D_e(i,t){i.uniform3iv(this.addr,t)}function L_e(i,t){i.uniform4iv(this.addr,t)}function P_e(i,t){i.uniform1uiv(this.addr,t)}function R_e(i,t){i.uniform2uiv(this.addr,t)}function k_e(i,t){i.uniform3uiv(this.addr,t)}function O_e(i,t){i.uniform4uiv(this.addr,t)}function F_e(i,t,e){const n=this.cache,r=t.length,s=cE(e,r);Ju(n,s)||(i.uniform1iv(this.addr,s),ed(n,s));for(let o=0;o!==r;++o)e.setTexture2D(t[o]||nG,s[o])}function N_e(i,t,e){const n=this.cache,r=t.length,s=cE(e,r);Ju(n,s)||(i.uniform1iv(this.addr,s),ed(n,s));for(let o=0;o!==r;++o)e.setTexture3D(t[o]||rG,s[o])}function B_e(i,t,e){const n=this.cache,r=t.length,s=cE(e,r);Ju(n,s)||(i.uniform1iv(this.addr,s),ed(n,s));for(let o=0;o!==r;++o)e.setTextureCube(t[o]||sG,s[o])}function z_e(i,t,e){const n=this.cache,r=t.length,s=cE(e,r);Ju(n,s)||(i.uniform1iv(this.addr,s),ed(n,s));for(let o=0;o!==r;++o)e.setTexture2DArray(t[o]||iG,s[o])}class U_e{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=function b_e(i){switch(i){case 5126:return t_e;case 35664:return n_e;case 35665:return i_e;case 35666:return r_e;case 35674:return s_e;case 35675:return o_e;case 35676:return a_e;case 5124:case 35670:return l_e;case 35667:case 35671:return c_e;case 35668:case 35672:return u_e;case 35669:case 35673:return d_e;case 5125:return h_e;case 36294:return f_e;case 36295:return p_e;case 36296:return g_e;case 35678:case 36198:case 36298:case 36306:case 35682:return m_e;case 35679:case 36299:case 36307:return v_e;case 35680:case 36300:case 36308:case 36293:return y_e;case 36289:case 36303:case 36311:case 36292:return __e}}(e.type)}}class H_e{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=function V_e(i){switch(i){case 5126:return C_e;case 35664:return x_e;case 35665:return w_e;case 35666:return A_e;case 35674:return I_e;case 35675:return S_e;case 35676:return E_e;case 5124:case 35670:return T_e;case 35667:case 35671:return M_e;case 35668:case 35672:return D_e;case 35669:case 35673:return L_e;case 5125:return P_e;case 36294:return R_e;case 36295:return k_e;case 36296:return O_e;case 35678:case 36198:case 36298:case 36306:case 35682:return F_e;case 35679:case 36299:case 36307:return N_e;case 35680:case 36300:case 36308:case 36293:return B_e;case 36289:case 36303:case 36311:case 36292:return z_e}}(e.type)}}class G_e{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,n){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const l=r[s];l.setValue(t,e[l.id],n)}}}const CP=/(\w+)(\])?(\[|\.)?/g;function dG(i,t){i.seq.push(t),i.map[t.id]=t}function W_e(i,t,e){const n=i.name,r=n.length;for(CP.lastIndex=0;;){const s=CP.exec(n),o=CP.lastIndex;let l=s[1];const p=s[3];if("]"===s[2]&&(l|=0),void 0===p||"["===p&&o+2===r){dG(e,void 0===p?new U_e(l,i,t):new H_e(l,i,t));break}{let x=e.map[l];void 0===x&&(x=new G_e(l),dG(e,x)),e=x}}}class uE{constructor(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,35718);for(let r=0;r<n;++r){const s=t.getActiveUniform(e,r);W_e(s,t.getUniformLocation(e,s.name),this)}}setValue(t,e,n,r){const s=this.map[e];void 0!==s&&s.setValue(t,n,r)}setOptional(t,e,n){const r=e[n];void 0!==r&&this.setValue(t,n,r)}static upload(t,e,n,r){for(let s=0,o=e.length;s!==o;++s){const l=e[s],u=n[l.id];!1!==u.needsUpdate&&l.setValue(t,u.value,r)}}static seqWithValue(t,e){const n=[];for(let r=0,s=t.length;r!==s;++r){const o=t[r];o.id in e&&n.push(o)}return n}}function hG(i,t,e){const n=i.createShader(t);return i.shaderSource(n,e),i.compileShader(n),n}let j_e=0;function fG(i,t,e){const n=i.getShaderParameter(t,35713),r=i.getShaderInfoLog(t).trim();if(n&&""===r)return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return e.toUpperCase()+"\n\n"+r+"\n\n"+function $_e(i,t){const e=i.split("\n"),n=[],r=Math.max(t-6,0),s=Math.min(t+6,e.length);for(let o=r;o<s;o++){const l=o+1;n.push(`${l===t?">":" "} ${l}: ${e[o]}`)}return n.join("\n")}(i.getShaderSource(t),o)}return r}function X_e(i,t){const e=function q_e(i){switch(i){case O0:return["Linear","( value )"];case Xc:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",i),["Linear","( value )"]}}(t);return"vec4 "+i+"( vec4 value ) { return LinearTo"+e[0]+e[1]+"; }"}function Y_e(i,t){let e;switch(t){case 1:e="Linear";break;case 2:e="Reinhard";break;case 3:e="OptimizedCineon";break;case 4:e="ACESFilmic";break;case 5:e="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),e="Linear"}return"vec3 "+i+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}function aA(i){return""!==i}function pG(i,t){const e=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,e).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function gG(i,t){return i.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const J_e=/^[ \t]*#include +<([\w\d./]+)>/gm;function xP(i){return i.replace(J_e,e0e)}function e0e(i,t){const e=Lo[t];if(void 0===e)throw new Error("Can not resolve #include <"+t+">");return xP(e)}const t0e=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function mG(i){return i.replace(t0e,n0e)}function n0e(i,t,e,n){let r="";for(let s=parseInt(t);s<parseInt(e);s++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function vG(i){let t="precision "+i.precision+" float;\nprecision "+i.precision+" int;";return"highp"===i.precision?t+="\n#define HIGH_PRECISION":"mediump"===i.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===i.precision&&(t+="\n#define LOW_PRECISION"),t}function l0e(i,t,e,n){const r=i.getContext(),s=e.defines;let o=e.vertexShader,l=e.fragmentShader;const u=function i0e(i){let t="SHADOWMAP_TYPE_BASIC";return 1===i.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===i.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===i.shadowMapType&&(t="SHADOWMAP_TYPE_VSM"),t}(e),p=function r0e(i){let t="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case 301:case 302:t="ENVMAP_TYPE_CUBE";break;case 306:t="ENVMAP_TYPE_CUBE_UV"}return t}(e),v=function s0e(i){let t="ENVMAP_MODE_REFLECTION";return i.envMap&&302===i.envMapMode&&(t="ENVMAP_MODE_REFRACTION"),t}(e),x=function o0e(i){let t="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(e),I=function a0e(i){const t=i.envMapCubeUVHeight;if(null===t)return null;const e=Math.log2(t)-2,n=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,e),112)),texelHeight:n,maxMip:e}}(e),T=e.isWebGL2?"":function K_e(i){return[i.extensionDerivatives||i.envMapCubeUVHeight||i.bumpMap||i.tangentSpaceNormalMap||i.clearcoatNormalMap||i.flatShading||"physical"===i.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(i.extensionFragDepth||i.logarithmicDepthBuffer)&&i.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",i.extensionDrawBuffers&&i.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(i.extensionShaderTextureLOD||i.envMap||i.transmission)&&i.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(aA).join("\n")}(e),F=function Z_e(i){const t=[];for(const e in i){const n=i[e];!1!==n&&t.push("#define "+e+" "+n)}return t.join("\n")}(s),j=r.createProgram();let X,ce,we=e.glslVersion?"#version "+e.glslVersion+"\n":"";e.isRawShaderMaterial?(X=[F].filter(aA).join("\n"),X.length>0&&(X+="\n"),ce=[T,F].filter(aA).join("\n"),ce.length>0&&(ce+="\n")):(X=[vG(e),"#define SHADER_NAME "+e.shaderName,F,e.instancing?"#define USE_INSTANCING":"",e.instancingColor?"#define USE_INSTANCING_COLOR":"",e.supportsVertexTextures?"#define VERTEX_TEXTURES":"",e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+v:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMap&&e.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",e.normalMap&&e.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.displacementMap&&e.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",e.specularColorMap?"#define USE_SPECULARCOLORMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.sheenColorMap?"#define USE_SHEENCOLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",e.vertexTangents?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUvs?"#define USE_UV":"",e.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&!1===e.flatShading?"#define USE_MORPHNORMALS":"",e.morphColors&&e.isWebGL2?"#define USE_MORPHCOLORS":"",e.morphTargetsCount>0&&e.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",e.morphTargetsCount>0&&e.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+e.morphTextureStride:"",e.morphTargetsCount>0&&e.isWebGL2?"#define MORPHTARGETS_COUNT "+e.morphTargetsCount:"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+u:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.logarithmicDepthBuffer&&e.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(aA).join("\n"),ce=[T,vG(e),"#define SHADER_NAME "+e.shaderName,F,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+p:"",e.envMap?"#define "+v:"",e.envMap?"#define "+x:"",I?"#define CUBEUV_TEXEL_WIDTH "+I.texelWidth:"",I?"#define CUBEUV_TEXEL_HEIGHT "+I.texelHeight:"",I?"#define CUBEUV_MAX_MIP "+I.maxMip+".0":"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMap&&e.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",e.normalMap&&e.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",e.clearcoat?"#define USE_CLEARCOAT":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescence?"#define USE_IRIDESCENCE":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",e.specularColorMap?"#define USE_SPECULARCOLORMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaTest?"#define USE_ALPHATEST":"",e.sheen?"#define USE_SHEEN":"",e.sheenColorMap?"#define USE_SHEENCOLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",e.vertexTangents?"#define USE_TANGENT":"",e.vertexColors||e.instancingColor?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUvs?"#define USE_UV":"",e.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+u:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.logarithmicDepthBuffer&&e.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==e.toneMapping?"#define TONE_MAPPING":"",0!==e.toneMapping?Lo.tonemapping_pars_fragment:"",0!==e.toneMapping?Y_e("toneMapping",e.toneMapping):"",e.dithering?"#define DITHERING":"",e.opaque?"#define OPAQUE":"",Lo.encodings_pars_fragment,X_e("linearToOutputTexel",e.outputEncoding),e.useDepthPacking?"#define DEPTH_PACKING "+e.depthPacking:"","\n"].filter(aA).join("\n")),o=xP(o),o=pG(o,e),o=gG(o,e),l=xP(l),l=pG(l,e),l=gG(l,e),o=mG(o),l=mG(l),e.isWebGL2&&!0!==e.isRawShaderMaterial&&(we="#version 300 es\n",X=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+X,ce=["#define varying in","300 es"===e.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===e.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+ce);const Ae=we+ce+l,We=hG(r,35633,we+X+o),ot=hG(r,35632,Ae);if(r.attachShader(j,We),r.attachShader(j,ot),void 0!==e.index0AttributeName?r.bindAttribLocation(j,0,e.index0AttributeName):!0===e.morphTargets&&r.bindAttribLocation(j,0,"position"),r.linkProgram(j),i.debug.checkShaderErrors){const yt=r.getProgramInfoLog(j).trim(),tn=r.getShaderInfoLog(We).trim(),zn=r.getShaderInfoLog(ot).trim();let Qn=!0,Un=!0;if(!1===r.getProgramParameter(j,35714)){Qn=!1;const An=fG(r,We,"vertex"),Nn=fG(r,ot,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(j,35715)+"\n\nProgram Info Log: "+yt+"\n"+An+"\n"+Nn)}else""!==yt?console.warn("THREE.WebGLProgram: Program Info Log:",yt):(""===tn||""===zn)&&(Un=!1);Un&&(this.diagnostics={runnable:Qn,programLog:yt,vertexShader:{log:tn,prefix:X},fragmentShader:{log:zn,prefix:ce}})}let Mt,Xe;return r.deleteShader(We),r.deleteShader(ot),this.getUniforms=function(){return void 0===Mt&&(Mt=new uE(r,j)),Mt},this.getAttributes=function(){return void 0===Xe&&(Xe=function Q_e(i,t){const e={},n=i.getProgramParameter(t,35721);for(let r=0;r<n;r++){const s=i.getActiveAttrib(t,r),o=s.name;let l=1;35674===s.type&&(l=2),35675===s.type&&(l=3),35676===s.type&&(l=4),e[o]={type:s.type,location:i.getAttribLocation(t,o),locationSize:l}}return e}(r,j)),Xe},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(j),this.program=void 0},this.name=e.shaderName,this.id=j_e++,this.cacheKey=t,this.usedTimes=1,this.program=j,this.vertexShader=We,this.fragmentShader=ot,this}let c0e=0;class u0e{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const n=t.fragmentShader,r=this._getShaderStage(t.vertexShader),s=this._getShaderStage(n),o=this._getShaderCacheForMaterial(t);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(s)&&(o.add(s),s.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const n of e)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let n=e.get(t);return void 0===n&&(n=new Set,e.set(t,n)),n}_getShaderStage(t){const e=this.shaderCache;let n=e.get(t);return void 0===n&&(n=new d0e(t),e.set(t,n)),n}}class d0e{constructor(t){this.id=c0e++,this.code=t,this.usedTimes=0}}function h0e(i,t,e,n,r,s,o){const l=new iP,u=new u0e,p=[],v=r.isWebGL2,x=r.logarithmicDepthBuffer,I=r.vertexTextures;let T=r.precision;const F={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function j(Xe,yt,tn,zn,Qn){const Un=zn.fog,An=Qn.geometry,_n=(Xe.isMeshStandardMaterial?e:t).get(Xe.envMap||(Xe.isMeshStandardMaterial?zn.environment:null)),Vn=_n&&306===_n.mapping?_n.image.height:null,Fn=F[Xe.type];null!==Xe.precision&&(T=r.getMaxPrecision(Xe.precision),T!==Xe.precision&&console.warn("THREE.WebGLProgram.getParameters:",Xe.precision,"not supported, using",T,"instead."));const bn=An.morphAttributes.position||An.morphAttributes.normal||An.morphAttributes.color,Bn=void 0!==bn?bn.length:0;let wi,er,cr,Is,Wi=0;if(void 0!==An.morphAttributes.position&&(Wi=1),void 0!==An.morphAttributes.normal&&(Wi=2),void 0!==An.morphAttributes.color&&(Wi=3),Fn){const Co=uv[Fn];wi=Co.vertexShader,er=Co.fragmentShader}else wi=Xe.vertexShader,er=Xe.fragmentShader,u.update(Xe),cr=u.getVertexShaderID(Xe),Is=u.getFragmentShaderID(Xe);const Si=i.getRenderTarget(),hs=Xe.clearcoat>0,fs=Xe.iridescence>0;return{isWebGL2:v,shaderID:Fn,shaderName:Xe.type,vertexShader:wi,fragmentShader:er,defines:Xe.defines,customVertexShaderID:cr,customFragmentShaderID:Is,isRawShaderMaterial:!0===Xe.isRawShaderMaterial,glslVersion:Xe.glslVersion,precision:T,instancing:!0===Qn.isInstancedMesh,instancingColor:!0===Qn.isInstancedMesh&&null!==Qn.instanceColor,supportsVertexTextures:I,outputEncoding:null===Si?i.outputEncoding:!0===Si.isXRRenderTarget?Si.texture.encoding:O0,map:!!Xe.map,matcap:!!Xe.matcap,envMap:!!_n,envMapMode:_n&&_n.mapping,envMapCubeUVHeight:Vn,lightMap:!!Xe.lightMap,aoMap:!!Xe.aoMap,emissiveMap:!!Xe.emissiveMap,bumpMap:!!Xe.bumpMap,normalMap:!!Xe.normalMap,objectSpaceNormalMap:1===Xe.normalMapType,tangentSpaceNormalMap:0===Xe.normalMapType,decodeVideoTexture:!!Xe.map&&!0===Xe.map.isVideoTexture&&Xe.map.encoding===Xc,clearcoat:hs,clearcoatMap:hs&&!!Xe.clearcoatMap,clearcoatRoughnessMap:hs&&!!Xe.clearcoatRoughnessMap,clearcoatNormalMap:hs&&!!Xe.clearcoatNormalMap,iridescence:fs,iridescenceMap:fs&&!!Xe.iridescenceMap,iridescenceThicknessMap:fs&&!!Xe.iridescenceThicknessMap,displacementMap:!!Xe.displacementMap,roughnessMap:!!Xe.roughnessMap,metalnessMap:!!Xe.metalnessMap,specularMap:!!Xe.specularMap,specularIntensityMap:!!Xe.specularIntensityMap,specularColorMap:!!Xe.specularColorMap,opaque:!1===Xe.transparent&&1===Xe.blending,alphaMap:!!Xe.alphaMap,alphaTest:Xe.alphaTest>0,gradientMap:!!Xe.gradientMap,sheen:Xe.sheen>0,sheenColorMap:!!Xe.sheenColorMap,sheenRoughnessMap:!!Xe.sheenRoughnessMap,transmission:Xe.transmission>0,transmissionMap:!!Xe.transmissionMap,thicknessMap:!!Xe.thicknessMap,combine:Xe.combine,vertexTangents:!!Xe.normalMap&&!!An.attributes.tangent,vertexColors:Xe.vertexColors,vertexAlphas:!0===Xe.vertexColors&&!!An.attributes.color&&4===An.attributes.color.itemSize,vertexUvs:!!(Xe.map||Xe.bumpMap||Xe.normalMap||Xe.specularMap||Xe.alphaMap||Xe.emissiveMap||Xe.roughnessMap||Xe.metalnessMap||Xe.clearcoatMap||Xe.clearcoatRoughnessMap||Xe.clearcoatNormalMap||Xe.iridescenceMap||Xe.iridescenceThicknessMap||Xe.displacementMap||Xe.transmissionMap||Xe.thicknessMap||Xe.specularIntensityMap||Xe.specularColorMap||Xe.sheenColorMap||Xe.sheenRoughnessMap),uvsVertexOnly:!(Xe.map||Xe.bumpMap||Xe.normalMap||Xe.specularMap||Xe.alphaMap||Xe.emissiveMap||Xe.roughnessMap||Xe.metalnessMap||Xe.clearcoatNormalMap||Xe.iridescenceMap||Xe.iridescenceThicknessMap||Xe.transmission>0||Xe.transmissionMap||Xe.thicknessMap||Xe.specularIntensityMap||Xe.specularColorMap||Xe.sheen>0||Xe.sheenColorMap||Xe.sheenRoughnessMap||!Xe.displacementMap),fog:!!Un,useFog:!0===Xe.fog,fogExp2:Un&&Un.isFogExp2,flatShading:!!Xe.flatShading,sizeAttenuation:Xe.sizeAttenuation,logarithmicDepthBuffer:x,skinning:!0===Qn.isSkinnedMesh,morphTargets:void 0!==An.morphAttributes.position,morphNormals:void 0!==An.morphAttributes.normal,morphColors:void 0!==An.morphAttributes.color,morphTargetsCount:Bn,morphTextureStride:Wi,numDirLights:yt.directional.length,numPointLights:yt.point.length,numSpotLights:yt.spot.length,numSpotLightMaps:yt.spotLightMap.length,numRectAreaLights:yt.rectArea.length,numHemiLights:yt.hemi.length,numDirLightShadows:yt.directionalShadowMap.length,numPointLightShadows:yt.pointShadowMap.length,numSpotLightShadows:yt.spotShadowMap.length,numSpotLightShadowsWithMaps:yt.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:Xe.dithering,shadowMapEnabled:i.shadowMap.enabled&&tn.length>0,shadowMapType:i.shadowMap.type,toneMapping:Xe.toneMapped?i.toneMapping:0,physicallyCorrectLights:i.physicallyCorrectLights,premultipliedAlpha:Xe.premultipliedAlpha,doubleSided:2===Xe.side,flipSided:1===Xe.side,useDepthPacking:!!Xe.depthPacking,depthPacking:Xe.depthPacking||0,index0AttributeName:Xe.index0AttributeName,extensionDerivatives:Xe.extensions&&Xe.extensions.derivatives,extensionFragDepth:Xe.extensions&&Xe.extensions.fragDepth,extensionDrawBuffers:Xe.extensions&&Xe.extensions.drawBuffers,extensionShaderTextureLOD:Xe.extensions&&Xe.extensions.shaderTextureLOD,rendererExtensionFragDepth:v||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:v||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:v||n.has("EXT_shader_texture_lod"),customProgramCacheKey:Xe.customProgramCacheKey()}},getProgramCacheKey:function X(Xe){const yt=[];if(Xe.shaderID?yt.push(Xe.shaderID):(yt.push(Xe.customVertexShaderID),yt.push(Xe.customFragmentShaderID)),void 0!==Xe.defines)for(const tn in Xe.defines)yt.push(tn),yt.push(Xe.defines[tn]);return!1===Xe.isRawShaderMaterial&&(function ce(Xe,yt){Xe.push(yt.precision),Xe.push(yt.outputEncoding),Xe.push(yt.envMapMode),Xe.push(yt.envMapCubeUVHeight),Xe.push(yt.combine),Xe.push(yt.vertexUvs),Xe.push(yt.fogExp2),Xe.push(yt.sizeAttenuation),Xe.push(yt.morphTargetsCount),Xe.push(yt.morphAttributeCount),Xe.push(yt.numDirLights),Xe.push(yt.numPointLights),Xe.push(yt.numSpotLights),Xe.push(yt.numSpotLightMaps),Xe.push(yt.numHemiLights),Xe.push(yt.numRectAreaLights),Xe.push(yt.numDirLightShadows),Xe.push(yt.numPointLightShadows),Xe.push(yt.numSpotLightShadows),Xe.push(yt.numSpotLightShadowsWithMaps),Xe.push(yt.shadowMapType),Xe.push(yt.toneMapping),Xe.push(yt.numClippingPlanes),Xe.push(yt.numClipIntersection),Xe.push(yt.depthPacking)}(yt,Xe),function we(Xe,yt){l.disableAll(),yt.isWebGL2&&l.enable(0),yt.supportsVertexTextures&&l.enable(1),yt.instancing&&l.enable(2),yt.instancingColor&&l.enable(3),yt.map&&l.enable(4),yt.matcap&&l.enable(5),yt.envMap&&l.enable(6),yt.lightMap&&l.enable(7),yt.aoMap&&l.enable(8),yt.emissiveMap&&l.enable(9),yt.bumpMap&&l.enable(10),yt.normalMap&&l.enable(11),yt.objectSpaceNormalMap&&l.enable(12),yt.tangentSpaceNormalMap&&l.enable(13),yt.clearcoat&&l.enable(14),yt.clearcoatMap&&l.enable(15),yt.clearcoatRoughnessMap&&l.enable(16),yt.clearcoatNormalMap&&l.enable(17),yt.iridescence&&l.enable(18),yt.iridescenceMap&&l.enable(19),yt.iridescenceThicknessMap&&l.enable(20),yt.displacementMap&&l.enable(21),yt.specularMap&&l.enable(22),yt.roughnessMap&&l.enable(23),yt.metalnessMap&&l.enable(24),yt.gradientMap&&l.enable(25),yt.alphaMap&&l.enable(26),yt.alphaTest&&l.enable(27),yt.vertexColors&&l.enable(28),yt.vertexAlphas&&l.enable(29),yt.vertexUvs&&l.enable(30),yt.vertexTangents&&l.enable(31),yt.uvsVertexOnly&&l.enable(32),Xe.push(l.mask),l.disableAll(),yt.fog&&l.enable(0),yt.useFog&&l.enable(1),yt.flatShading&&l.enable(2),yt.logarithmicDepthBuffer&&l.enable(3),yt.skinning&&l.enable(4),yt.morphTargets&&l.enable(5),yt.morphNormals&&l.enable(6),yt.morphColors&&l.enable(7),yt.premultipliedAlpha&&l.enable(8),yt.shadowMapEnabled&&l.enable(9),yt.physicallyCorrectLights&&l.enable(10),yt.doubleSided&&l.enable(11),yt.flipSided&&l.enable(12),yt.useDepthPacking&&l.enable(13),yt.dithering&&l.enable(14),yt.specularIntensityMap&&l.enable(15),yt.specularColorMap&&l.enable(16),yt.transmission&&l.enable(17),yt.transmissionMap&&l.enable(18),yt.thicknessMap&&l.enable(19),yt.sheen&&l.enable(20),yt.sheenColorMap&&l.enable(21),yt.sheenRoughnessMap&&l.enable(22),yt.decodeVideoTexture&&l.enable(23),yt.opaque&&l.enable(24),Xe.push(l.mask)}(yt,Xe),yt.push(i.outputEncoding)),yt.push(Xe.customProgramCacheKey),yt.join()},getUniforms:function ye(Xe){const yt=F[Xe.type];let tn;return tn=yt?Pme.clone(uv[yt].uniforms):Xe.uniforms,tn},acquireProgram:function Ae(Xe,yt){let tn;for(let zn=0,Qn=p.length;zn<Qn;zn++){const Un=p[zn];if(Un.cacheKey===yt){tn=Un,++tn.usedTimes;break}}return void 0===tn&&(tn=new l0e(i,yt,Xe,s),p.push(tn)),tn},releaseProgram:function We(Xe){if(0==--Xe.usedTimes){const yt=p.indexOf(Xe);p[yt]=p[p.length-1],p.pop(),Xe.destroy()}},releaseShaderCache:function ot(Xe){u.remove(Xe)},programs:p,dispose:function Mt(){u.dispose()}}}function f0e(){let i=new WeakMap;return{get:function t(s){let o=i.get(s);return void 0===o&&(o={},i.set(s,o)),o},remove:function e(s){i.delete(s)},update:function n(s,o,l){i.get(s)[o]=l},dispose:function r(){i=new WeakMap}}}function p0e(i,t){return i.groupOrder!==t.groupOrder?i.groupOrder-t.groupOrder:i.renderOrder!==t.renderOrder?i.renderOrder-t.renderOrder:i.material.id!==t.material.id?i.material.id-t.material.id:i.z!==t.z?i.z-t.z:i.id-t.id}function yG(i,t){return i.groupOrder!==t.groupOrder?i.groupOrder-t.groupOrder:i.renderOrder!==t.renderOrder?i.renderOrder-t.renderOrder:i.z!==t.z?t.z-i.z:i.id-t.id}function _G(){const i=[];let t=0;const e=[],n=[],r=[];function o(x,I,T,F,j,X){let ce=i[t];return void 0===ce?(ce={id:x.id,object:x,geometry:I,material:T,groupOrder:F,renderOrder:x.renderOrder,z:j,group:X},i[t]=ce):(ce.id=x.id,ce.object=x,ce.geometry=I,ce.material=T,ce.groupOrder=F,ce.renderOrder=x.renderOrder,ce.z=j,ce.group=X),t++,ce}return{opaque:e,transmissive:n,transparent:r,init:function s(){t=0,e.length=0,n.length=0,r.length=0},push:function l(x,I,T,F,j,X){const ce=o(x,I,T,F,j,X);T.transmission>0?n.push(ce):!0===T.transparent?r.push(ce):e.push(ce)},unshift:function u(x,I,T,F,j,X){const ce=o(x,I,T,F,j,X);T.transmission>0?n.unshift(ce):!0===T.transparent?r.unshift(ce):e.unshift(ce)},finish:function v(){for(let x=t,I=i.length;x<I;x++){const T=i[x];if(null===T.id)break;T.id=null,T.object=null,T.geometry=null,T.material=null,T.group=null}},sort:function p(x,I){e.length>1&&e.sort(x||p0e),n.length>1&&n.sort(I||yG),r.length>1&&r.sort(I||yG)}}}function g0e(){let i=new WeakMap;return{get:function t(n,r){const s=i.get(n);let o;return void 0===s?(o=new _G,i.set(n,[o])):r>=s.length?(o=new _G,s.push(o)):o=s[r],o},dispose:function e(){i=new WeakMap}}}function m0e(){const i={};return{get:function(t){if(void 0!==i[t.id])return i[t.id];let e;switch(t.type){case"DirectionalLight":e={direction:new jt,color:new Jr};break;case"SpotLight":e={position:new jt,direction:new jt,color:new Jr,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new jt,color:new Jr,distance:0,decay:0};break;case"HemisphereLight":e={direction:new jt,skyColor:new Jr,groundColor:new Jr};break;case"RectAreaLight":e={color:new Jr,position:new jt,halfWidth:new jt,halfHeight:new jt}}return i[t.id]=e,e}}}let y0e=0;function _0e(i,t){return(t.castShadow?2:0)-(i.castShadow?2:0)+(t.map?1:0)-(i.map?1:0)}function b0e(i,t){const e=new m0e,n=function v0e(){const i={};return{get:function(t){if(void 0!==i[t.id])return i[t.id];let e;switch(t.type){case"DirectionalLight":case"SpotLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Gi};break;case"PointLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Gi,shadowCameraNear:1,shadowCameraFar:1e3}}return i[t.id]=e,e}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let v=0;v<9;v++)r.probe.push(new jt);const s=new jt,o=new po,l=new po;return{setup:function u(v,x){let I=0,T=0,F=0;for(let zn=0;zn<9;zn++)r.probe[zn].set(0,0,0);let j=0,X=0,ce=0,we=0,ye=0,Ae=0,We=0,ot=0,Mt=0,Xe=0;v.sort(_0e);const yt=!0!==x?Math.PI:1;for(let zn=0,Qn=v.length;zn<Qn;zn++){const Un=v[zn],An=Un.color,Nn=Un.intensity,_n=Un.distance,Vn=Un.shadow&&Un.shadow.map?Un.shadow.map.texture:null;if(Un.isAmbientLight)I+=An.r*Nn*yt,T+=An.g*Nn*yt,F+=An.b*Nn*yt;else if(Un.isLightProbe)for(let Fn=0;Fn<9;Fn++)r.probe[Fn].addScaledVector(Un.sh.coefficients[Fn],Nn);else if(Un.isDirectionalLight){const Fn=e.get(Un);if(Fn.color.copy(Un.color).multiplyScalar(Un.intensity*yt),Un.castShadow){const bn=Un.shadow,Bn=n.get(Un);Bn.shadowBias=bn.bias,Bn.shadowNormalBias=bn.normalBias,Bn.shadowRadius=bn.radius,Bn.shadowMapSize=bn.mapSize,r.directionalShadow[j]=Bn,r.directionalShadowMap[j]=Vn,r.directionalShadowMatrix[j]=Un.shadow.matrix,Ae++}r.directional[j]=Fn,j++}else if(Un.isSpotLight){const Fn=e.get(Un);Fn.position.setFromMatrixPosition(Un.matrixWorld),Fn.color.copy(An).multiplyScalar(Nn*yt),Fn.distance=_n,Fn.coneCos=Math.cos(Un.angle),Fn.penumbraCos=Math.cos(Un.angle*(1-Un.penumbra)),Fn.decay=Un.decay,r.spot[ce]=Fn;const bn=Un.shadow;if(Un.map&&(r.spotLightMap[Mt]=Un.map,Mt++,bn.updateMatrices(Un),Un.castShadow&&Xe++),r.spotLightMatrix[ce]=bn.matrix,Un.castShadow){const Bn=n.get(Un);Bn.shadowBias=bn.bias,Bn.shadowNormalBias=bn.normalBias,Bn.shadowRadius=bn.radius,Bn.shadowMapSize=bn.mapSize,r.spotShadow[ce]=Bn,r.spotShadowMap[ce]=Vn,ot++}ce++}else if(Un.isRectAreaLight){const Fn=e.get(Un);Fn.color.copy(An).multiplyScalar(Nn),Fn.halfWidth.set(.5*Un.width,0,0),Fn.halfHeight.set(0,.5*Un.height,0),r.rectArea[we]=Fn,we++}else if(Un.isPointLight){const Fn=e.get(Un);if(Fn.color.copy(Un.color).multiplyScalar(Un.intensity*yt),Fn.distance=Un.distance,Fn.decay=Un.decay,Un.castShadow){const bn=Un.shadow,Bn=n.get(Un);Bn.shadowBias=bn.bias,Bn.shadowNormalBias=bn.normalBias,Bn.shadowRadius=bn.radius,Bn.shadowMapSize=bn.mapSize,Bn.shadowCameraNear=bn.camera.near,Bn.shadowCameraFar=bn.camera.far,r.pointShadow[X]=Bn,r.pointShadowMap[X]=Vn,r.pointShadowMatrix[X]=Un.shadow.matrix,We++}r.point[X]=Fn,X++}else if(Un.isHemisphereLight){const Fn=e.get(Un);Fn.skyColor.copy(Un.color).multiplyScalar(Nn*yt),Fn.groundColor.copy(Un.groundColor).multiplyScalar(Nn*yt),r.hemi[ye]=Fn,ye++}}we>0&&(t.isWebGL2||!0===i.has("OES_texture_float_linear")?(r.rectAreaLTC1=Er.LTC_FLOAT_1,r.rectAreaLTC2=Er.LTC_FLOAT_2):!0===i.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=Er.LTC_HALF_1,r.rectAreaLTC2=Er.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=I,r.ambient[1]=T,r.ambient[2]=F;const tn=r.hash;(tn.directionalLength!==j||tn.pointLength!==X||tn.spotLength!==ce||tn.rectAreaLength!==we||tn.hemiLength!==ye||tn.numDirectionalShadows!==Ae||tn.numPointShadows!==We||tn.numSpotShadows!==ot||tn.numSpotMaps!==Mt)&&(r.directional.length=j,r.spot.length=ce,r.rectArea.length=we,r.point.length=X,r.hemi.length=ye,r.directionalShadow.length=Ae,r.directionalShadowMap.length=Ae,r.pointShadow.length=We,r.pointShadowMap.length=We,r.spotShadow.length=ot,r.spotShadowMap.length=ot,r.directionalShadowMatrix.length=Ae,r.pointShadowMatrix.length=We,r.spotLightMatrix.length=ot+Mt-Xe,r.spotLightMap.length=Mt,r.numSpotLightShadowsWithMaps=Xe,tn.directionalLength=j,tn.pointLength=X,tn.spotLength=ce,tn.rectAreaLength=we,tn.hemiLength=ye,tn.numDirectionalShadows=Ae,tn.numPointShadows=We,tn.numSpotShadows=ot,tn.numSpotMaps=Mt,r.version=y0e++)},setupView:function p(v,x){let I=0,T=0,F=0,j=0,X=0;const ce=x.matrixWorldInverse;for(let we=0,ye=v.length;we<ye;we++){const Ae=v[we];if(Ae.isDirectionalLight){const We=r.directional[I];We.direction.setFromMatrixPosition(Ae.matrixWorld),s.setFromMatrixPosition(Ae.target.matrixWorld),We.direction.sub(s),We.direction.transformDirection(ce),I++}else if(Ae.isSpotLight){const We=r.spot[F];We.position.setFromMatrixPosition(Ae.matrixWorld),We.position.applyMatrix4(ce),We.direction.setFromMatrixPosition(Ae.matrixWorld),s.setFromMatrixPosition(Ae.target.matrixWorld),We.direction.sub(s),We.direction.transformDirection(ce),F++}else if(Ae.isRectAreaLight){const We=r.rectArea[j];We.position.setFromMatrixPosition(Ae.matrixWorld),We.position.applyMatrix4(ce),l.identity(),o.copy(Ae.matrixWorld),o.premultiply(ce),l.extractRotation(o),We.halfWidth.set(.5*Ae.width,0,0),We.halfHeight.set(0,.5*Ae.height,0),We.halfWidth.applyMatrix4(l),We.halfHeight.applyMatrix4(l),j++}else if(Ae.isPointLight){const We=r.point[T];We.position.setFromMatrixPosition(Ae.matrixWorld),We.position.applyMatrix4(ce),T++}else if(Ae.isHemisphereLight){const We=r.hemi[X];We.direction.setFromMatrixPosition(Ae.matrixWorld),We.direction.transformDirection(ce),X++}}},state:r}}function bG(i,t){const e=new b0e(i,t),n=[],r=[];return{init:function s(){n.length=0,r.length=0},state:{lightsArray:n,shadowsArray:r,lights:e},setupLights:function u(x){e.setup(n,x)},setupLightsView:function p(x){e.setupView(n,x)},pushLight:function o(x){n.push(x)},pushShadow:function l(x){r.push(x)}}}function C0e(i,t){let e=new WeakMap;return{get:function n(s,o=0){const l=e.get(s);let u;return void 0===l?(u=new bG(i,t),e.set(s,[u])):o>=l.length?(u=new bG(i,t),l.push(u)):u=l[o],u},dispose:function r(){e=new WeakMap}}}class CG extends W0{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class xG extends W0{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new jt,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}function A0e(i,t,e){let n=new mP;const r=new Gi,s=new Gi,o=new dl,l=new CG({depthPacking:3201}),u=new xG,p={},v=e.maxTextureSize,x={0:1,1:0,2:2},I=new E_({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Gi},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),T=I.clone();T.defines.HORIZONTAL_PASS=1;const F=new Bo;F.setAttribute("position",new Cd(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const j=new Mh(F,I),X=this;function ce(Ae,We){const ot=t.update(j);I.defines.VSM_SAMPLES!==Ae.blurSamples&&(I.defines.VSM_SAMPLES=Ae.blurSamples,T.defines.VSM_SAMPLES=Ae.blurSamples,I.needsUpdate=!0,T.needsUpdate=!0),null===Ae.mapPass&&(Ae.mapPass=new V0(r.x,r.y)),I.uniforms.shadow_pass.value=Ae.map.texture,I.uniforms.resolution.value=Ae.mapSize,I.uniforms.radius.value=Ae.radius,i.setRenderTarget(Ae.mapPass),i.clear(),i.renderBufferDirect(We,null,ot,I,j,null),T.uniforms.shadow_pass.value=Ae.mapPass.texture,T.uniforms.resolution.value=Ae.mapSize,T.uniforms.radius.value=Ae.radius,i.setRenderTarget(Ae.map),i.clear(),i.renderBufferDirect(We,null,ot,T,j,null)}function we(Ae,We,ot,Mt,Xe,yt){let tn=null;const zn=!0===ot.isPointLight?Ae.customDistanceMaterial:Ae.customDepthMaterial;if(tn=void 0!==zn?zn:!0===ot.isPointLight?u:l,i.localClippingEnabled&&!0===We.clipShadows&&Array.isArray(We.clippingPlanes)&&0!==We.clippingPlanes.length||We.displacementMap&&0!==We.displacementScale||We.alphaMap&&We.alphaTest>0){const Qn=tn.uuid,Un=We.uuid;let An=p[Qn];void 0===An&&(An={},p[Qn]=An);let Nn=An[Un];void 0===Nn&&(Nn=tn.clone(),An[Un]=Nn),tn=Nn}return tn.visible=We.visible,tn.wireframe=We.wireframe,tn.side=3===yt?null!==We.shadowSide?We.shadowSide:We.side:null!==We.shadowSide?We.shadowSide:x[We.side],tn.alphaMap=We.alphaMap,tn.alphaTest=We.alphaTest,tn.clipShadows=We.clipShadows,tn.clippingPlanes=We.clippingPlanes,tn.clipIntersection=We.clipIntersection,tn.displacementMap=We.displacementMap,tn.displacementScale=We.displacementScale,tn.displacementBias=We.displacementBias,tn.wireframeLinewidth=We.wireframeLinewidth,tn.linewidth=We.linewidth,!0===ot.isPointLight&&!0===tn.isMeshDistanceMaterial&&(tn.referencePosition.setFromMatrixPosition(ot.matrixWorld),tn.nearDistance=Mt,tn.farDistance=Xe),tn}function ye(Ae,We,ot,Mt,Xe){if(!1===Ae.visible)return;if(Ae.layers.test(We.layers)&&(Ae.isMesh||Ae.isLine||Ae.isPoints)&&(Ae.castShadow||Ae.receiveShadow&&3===Xe)&&(!Ae.frustumCulled||n.intersectsObject(Ae))){Ae.modelViewMatrix.multiplyMatrices(ot.matrixWorldInverse,Ae.matrixWorld);const zn=t.update(Ae),Qn=Ae.material;if(Array.isArray(Qn)){const Un=zn.groups;for(let An=0,Nn=Un.length;An<Nn;An++){const _n=Un[An],Vn=Qn[_n.materialIndex];if(Vn&&Vn.visible){const Fn=we(Ae,Vn,Mt,ot.near,ot.far,Xe);i.renderBufferDirect(ot,null,zn,Fn,Ae,_n)}}}else if(Qn.visible){const Un=we(Ae,Qn,Mt,ot.near,ot.far,Xe);i.renderBufferDirect(ot,null,zn,Un,Ae,null)}}const tn=Ae.children;for(let zn=0,Qn=tn.length;zn<Qn;zn++)ye(tn[zn],We,ot,Mt,Xe)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(Ae,We,ot){if(!1===X.enabled||!1===X.autoUpdate&&!1===X.needsUpdate||0===Ae.length)return;const Mt=i.getRenderTarget(),Xe=i.getActiveCubeFace(),yt=i.getActiveMipmapLevel(),tn=i.state;tn.setBlending(0),tn.buffers.color.setClear(1,1,1,1),tn.buffers.depth.setTest(!0),tn.setScissorTest(!1);for(let zn=0,Qn=Ae.length;zn<Qn;zn++){const Un=Ae[zn],An=Un.shadow;if(void 0===An){console.warn("THREE.WebGLShadowMap:",Un,"has no shadow.");continue}if(!1===An.autoUpdate&&!1===An.needsUpdate)continue;r.copy(An.mapSize);const Nn=An.getFrameExtents();r.multiply(Nn),s.copy(An.mapSize),(r.x>v||r.y>v)&&(r.x>v&&(s.x=Math.floor(v/Nn.x),r.x=s.x*Nn.x,An.mapSize.x=s.x),r.y>v&&(s.y=Math.floor(v/Nn.y),r.y=s.y*Nn.y,An.mapSize.y=s.y)),null===An.map&&(An.map=new V0(r.x,r.y,3!==this.type?{minFilter:Zu,magFilter:Zu}:{}),An.map.texture.name=Un.name+".shadowMap",An.camera.updateProjectionMatrix()),i.setRenderTarget(An.map),i.clear();const _n=An.getViewportCount();for(let Vn=0;Vn<_n;Vn++){const Fn=An.getViewport(Vn);o.set(s.x*Fn.x,s.y*Fn.y,s.x*Fn.z,s.y*Fn.w),tn.viewport(o),An.updateMatrices(Un,Vn),n=An.getFrustum(),ye(We,ot,An.camera,Un,this.type)}!0!==An.isPointLightShadow&&3===this.type&&ce(An,ot),An.needsUpdate=!1}X.needsUpdate=!1,i.setRenderTarget(Mt,Xe,yt)}}function I0e(i,t,e){const n=e.isWebGL2,l=new function r(){let Tn=!1;const Ci=new dl;let ar=null;const Yr=new dl(0,0,0,0);return{setMask:function(bs){ar!==bs&&!Tn&&(i.colorMask(bs,bs,bs,bs),ar=bs)},setLocked:function(bs){Tn=bs},setClear:function(bs,Ga,Ad,Dh,ob){!0===ob&&(bs*=Dh,Ga*=Dh,Ad*=Dh),Ci.set(bs,Ga,Ad,Dh),!1===Yr.equals(Ci)&&(i.clearColor(bs,Ga,Ad,Dh),Yr.copy(Ci))},reset:function(){Tn=!1,ar=null,Yr.set(-1,0,0,0)}}},u=new function s(){let Tn=!1,Ci=null,ar=null,Yr=null;return{setTest:function(bs){bs?_s(2929):hs(2929)},setMask:function(bs){Ci!==bs&&!Tn&&(i.depthMask(bs),Ci=bs)},setFunc:function(bs){if(ar!==bs){switch(bs){case 0:i.depthFunc(512);break;case 1:i.depthFunc(519);break;case 2:i.depthFunc(513);break;case 3:default:i.depthFunc(515);break;case 4:i.depthFunc(514);break;case 5:i.depthFunc(518);break;case 6:i.depthFunc(516);break;case 7:i.depthFunc(517)}ar=bs}},setLocked:function(bs){Tn=bs},setClear:function(bs){Yr!==bs&&(i.clearDepth(bs),Yr=bs)},reset:function(){Tn=!1,Ci=null,ar=null,Yr=null}}},p=new function o(){let Tn=!1,Ci=null,ar=null,Yr=null,bs=null,Ga=null,Ad=null,Dh=null,ob=null;return{setTest:function(ac){Tn||(ac?_s(2960):hs(2960))},setMask:function(ac){Ci!==ac&&!Tn&&(i.stencilMask(ac),Ci=ac)},setFunc:function(ac,Iy,Sg){(ar!==ac||Yr!==Iy||bs!==Sg)&&(i.stencilFunc(ac,Iy,Sg),ar=ac,Yr=Iy,bs=Sg)},setOp:function(ac,Iy,Sg){(Ga!==ac||Ad!==Iy||Dh!==Sg)&&(i.stencilOp(ac,Iy,Sg),Ga=ac,Ad=Iy,Dh=Sg)},setLocked:function(ac){Tn=ac},setClear:function(ac){ob!==ac&&(i.clearStencil(ac),ob=ac)},reset:function(){Tn=!1,Ci=null,ar=null,Yr=null,bs=null,Ga=null,Ad=null,Dh=null,ob=null}}},v=new WeakMap,x=new WeakMap;let I={},T={},F=new WeakMap,j=[],X=null,ce=!1,we=null,ye=null,Ae=null,We=null,ot=null,Mt=null,Xe=null,yt=!1,tn=null,zn=null,Qn=null,Un=null,An=null;const Nn=i.getParameter(35661);let _n=!1,Vn=0;const Fn=i.getParameter(7938);-1!==Fn.indexOf("WebGL")?(Vn=parseFloat(/^WebGL (\d)/.exec(Fn)[1]),_n=Vn>=1):-1!==Fn.indexOf("OpenGL ES")&&(Vn=parseFloat(/^OpenGL ES (\d)/.exec(Fn)[1]),_n=Vn>=2);let bn=null,Bn={};const Wi=i.getParameter(3088),wi=i.getParameter(2978),er=(new dl).fromArray(Wi),cr=(new dl).fromArray(wi);function Is(Tn,Ci,ar){const Yr=new Uint8Array(4),bs=i.createTexture();i.bindTexture(Tn,bs),i.texParameteri(Tn,10241,9728),i.texParameteri(Tn,10240,9728);for(let Ga=0;Ga<ar;Ga++)i.texImage2D(Ci+Ga,0,6408,1,1,0,6408,5121,Yr);return bs}const Si={};function _s(Tn){!0!==I[Tn]&&(i.enable(Tn),I[Tn]=!0)}function hs(Tn){!1!==I[Tn]&&(i.disable(Tn),I[Tn]=!1)}Si[3553]=Is(3553,3553,1),Si[34067]=Is(34067,34069,6),l.setClear(0,0,0,1),u.setClear(1),p.setClear(0),_s(2929),u.setFunc(3),kr(!1),go(1),_s(2884),wr(0);const Vi={100:32774,101:32778,102:32779};if(n)Vi[103]=32775,Vi[104]=32776;else{const Tn=t.get("EXT_blend_minmax");null!==Tn&&(Vi[103]=Tn.MIN_EXT,Vi[104]=Tn.MAX_EXT)}const Ri={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function wr(Tn,Ci,ar,Yr,bs,Ga,Ad,Dh){if(0!==Tn){if(!1===ce&&(_s(3042),ce=!0),5===Tn)bs=bs||Ci,Ga=Ga||ar,Ad=Ad||Yr,(Ci!==ye||bs!==ot)&&(i.blendEquationSeparate(Vi[Ci],Vi[bs]),ye=Ci,ot=bs),(ar!==Ae||Yr!==We||Ga!==Mt||Ad!==Xe)&&(i.blendFuncSeparate(Ri[ar],Ri[Yr],Ri[Ga],Ri[Ad]),Ae=ar,We=Yr,Mt=Ga,Xe=Ad),we=Tn,yt=null;else if(Tn!==we||Dh!==yt){if((100!==ye||100!==ot)&&(i.blendEquation(32774),ye=100,ot=100),Dh)switch(Tn){case 1:i.blendFuncSeparate(1,771,1,771);break;case 2:i.blendFunc(1,1);break;case 3:i.blendFuncSeparate(0,769,0,1);break;case 4:i.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Tn)}else switch(Tn){case 1:i.blendFuncSeparate(770,771,1,771);break;case 2:i.blendFunc(770,1);break;case 3:i.blendFuncSeparate(0,769,0,1);break;case 4:i.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Tn)}Ae=null,We=null,Mt=null,Xe=null,we=Tn,yt=Dh}}else!0===ce&&(hs(3042),ce=!1)}function kr(Tn){tn!==Tn&&(i.frontFace(Tn?2304:2305),tn=Tn)}function go(Tn){0!==Tn?(_s(2884),Tn!==zn&&i.cullFace(1===Tn?1029:2===Tn?1028:1032)):hs(2884),zn=Tn}function Bs(Tn,Ci,ar){Tn?(_s(32823),(Un!==Ci||An!==ar)&&(i.polygonOffset(Ci,ar),Un=Ci,An=ar)):hs(32823)}return{buffers:{color:l,depth:u,stencil:p},enable:_s,disable:hs,bindFramebuffer:function fs(Tn,Ci){return T[Tn]!==Ci&&(i.bindFramebuffer(Tn,Ci),T[Tn]=Ci,n&&(36009===Tn&&(T[36160]=Ci),36160===Tn&&(T[36009]=Ci)),!0)},drawBuffers:function Lr(Tn,Ci){let ar=j,Yr=!1;if(Tn)if(ar=F.get(Ci),void 0===ar&&(ar=[],F.set(Ci,ar)),Tn.isWebGLMultipleRenderTargets){const bs=Tn.texture;if(ar.length!==bs.length||36064!==ar[0]){for(let Ga=0,Ad=bs.length;Ga<Ad;Ga++)ar[Ga]=36064+Ga;ar.length=bs.length,Yr=!0}}else 36064!==ar[0]&&(ar[0]=36064,Yr=!0);else 1029!==ar[0]&&(ar[0]=1029,Yr=!0);Yr&&(e.isWebGL2?i.drawBuffers(ar):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(ar))},useProgram:function Co(Tn){return X!==Tn&&(i.useProgram(Tn),X=Tn,!0)},setBlending:wr,setMaterial:function ls(Tn,Ci){2===Tn.side?hs(2884):_s(2884);let ar=1===Tn.side;Ci&&(ar=!ar),kr(ar),1===Tn.blending&&!1===Tn.transparent?wr(0):wr(Tn.blending,Tn.blendEquation,Tn.blendSrc,Tn.blendDst,Tn.blendEquationAlpha,Tn.blendSrcAlpha,Tn.blendDstAlpha,Tn.premultipliedAlpha),u.setFunc(Tn.depthFunc),u.setTest(Tn.depthTest),u.setMask(Tn.depthWrite),l.setMask(Tn.colorWrite);const Yr=Tn.stencilWrite;p.setTest(Yr),Yr&&(p.setMask(Tn.stencilWriteMask),p.setFunc(Tn.stencilFunc,Tn.stencilRef,Tn.stencilFuncMask),p.setOp(Tn.stencilFail,Tn.stencilZFail,Tn.stencilZPass)),Bs(Tn.polygonOffset,Tn.polygonOffsetFactor,Tn.polygonOffsetUnits),!0===Tn.alphaToCoverage?_s(32926):hs(32926)},setFlipSided:kr,setCullFace:go,setLineWidth:function Xs(Tn){Tn!==Qn&&(_n&&i.lineWidth(Tn),Qn=Tn)},setPolygonOffset:Bs,setScissorTest:function Wl(Tn){Tn?_s(3089):hs(3089)},activeTexture:function Cl(Tn){void 0===Tn&&(Tn=33984+Nn-1),bn!==Tn&&(i.activeTexture(Tn),bn=Tn)},bindTexture:function rn(Tn,Ci,ar){void 0===ar&&(ar=null===bn?33984+Nn-1:bn);let Yr=Bn[ar];void 0===Yr&&(Yr={type:void 0,texture:void 0},Bn[ar]=Yr),(Yr.type!==Tn||Yr.texture!==Ci)&&(bn!==ar&&(i.activeTexture(ar),bn=ar),i.bindTexture(Tn,Ci||Si[Tn]),Yr.type=Tn,Yr.texture=Ci)},unbindTexture:function Nt(){const Tn=Bn[bn];void 0!==Tn&&void 0!==Tn.type&&(i.bindTexture(Tn.type,null),Tn.type=void 0,Tn.texture=void 0)},compressedTexImage2D:function ai(){try{i.compressedTexImage2D.apply(i,arguments)}catch(Tn){console.error("THREE.WebGLState:",Tn)}},compressedTexImage3D:function lr(){try{i.compressedTexImage3D.apply(i,arguments)}catch(Tn){console.error("THREE.WebGLState:",Tn)}},texImage2D:function Ys(){try{i.texImage2D.apply(i,arguments)}catch(Tn){console.error("THREE.WebGLState:",Tn)}},texImage3D:function ps(){try{i.texImage3D.apply(i,arguments)}catch(Tn){console.error("THREE.WebGLState:",Tn)}},updateUBOMapping:function Aa(Tn,Ci){let ar=x.get(Ci);void 0===ar&&(ar=new WeakMap,x.set(Ci,ar));let Yr=ar.get(Tn);void 0===Yr&&(Yr=i.getUniformBlockIndex(Ci,Tn.name),ar.set(Tn,Yr))},uniformBlockBinding:function oc(Tn,Ci){const Yr=x.get(Ci).get(Tn);v.get(Tn)!==Yr&&(i.uniformBlockBinding(Ci,Yr,Tn.__bindingPointIndex),v.set(Tn,Yr))},texStorage2D:function ki(){try{i.texStorage2D.apply(i,arguments)}catch(Tn){console.error("THREE.WebGLState:",Tn)}},texStorage3D:function Ms(){try{i.texStorage3D.apply(i,arguments)}catch(Tn){console.error("THREE.WebGLState:",Tn)}},texSubImage2D:function xr(){try{i.texSubImage2D.apply(i,arguments)}catch(Tn){console.error("THREE.WebGLState:",Tn)}},texSubImage3D:function zr(){try{i.texSubImage3D.apply(i,arguments)}catch(Tn){console.error("THREE.WebGLState:",Tn)}},compressedTexSubImage2D:function Qs(){try{i.compressedTexSubImage2D.apply(i,arguments)}catch(Tn){console.error("THREE.WebGLState:",Tn)}},compressedTexSubImage3D:function Hr(){try{i.compressedTexSubImage3D.apply(i,arguments)}catch(Tn){console.error("THREE.WebGLState:",Tn)}},scissor:function Us(Tn){!1===er.equals(Tn)&&(i.scissor(Tn.x,Tn.y,Tn.z,Tn.w),er.copy(Tn))},viewport:function Ds(Tn){!1===cr.equals(Tn)&&(i.viewport(Tn.x,Tn.y,Tn.z,Tn.w),cr.copy(Tn))},reset:function wd(){i.disable(3042),i.disable(2884),i.disable(2929),i.disable(32823),i.disable(3089),i.disable(2960),i.disable(32926),i.blendEquation(32774),i.blendFunc(1,0),i.blendFuncSeparate(1,0,1,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(513),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(519,0,4294967295),i.stencilOp(7680,7680,7680),i.clearStencil(0),i.cullFace(1029),i.frontFace(2305),i.polygonOffset(0,0),i.activeTexture(33984),i.bindFramebuffer(36160,null),!0===n&&(i.bindFramebuffer(36009,null),i.bindFramebuffer(36008,null)),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),I={},bn=null,Bn={},T={},F=new WeakMap,j=[],X=null,ce=!1,we=null,ye=null,Ae=null,We=null,ot=null,Mt=null,Xe=null,yt=!1,tn=null,zn=null,Qn=null,Un=null,An=null,er.set(0,0,i.canvas.width,i.canvas.height),cr.set(0,0,i.canvas.width,i.canvas.height),l.reset(),u.reset(),p.reset()}}}function S0e(i,t,e,n,r,s,o){const l=r.isWebGL2,u=r.maxTextures,p=r.maxCubemapSize,v=r.maxTextureSize,x=r.maxSamples,I=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,T=/OculusBrowser/g.test(typeof navigator>"u"?"":navigator.userAgent),F=new WeakMap;let j;const X=new WeakMap;let ce=!1;try{ce=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function we(rn,Nt){return ce?new OffscreenCanvas(rn,Nt):nA("canvas")}function ye(rn,Nt,ai,lr){let xr=1;if((rn.width>lr||rn.height>lr)&&(xr=lr/Math.max(rn.width,rn.height)),xr<1||!0===Nt){if(typeof HTMLImageElement<"u"&&rn instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&rn instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&rn instanceof ImageBitmap){const zr=Nt?zS:Math.floor,Qs=zr(xr*rn.width),Hr=zr(xr*rn.height);void 0===j&&(j=we(Qs,Hr));const ki=ai?we(Qs,Hr):j;return ki.width=Qs,ki.height=Hr,ki.getContext("2d").drawImage(rn,0,0,Qs,Hr),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+rn.width+"x"+rn.height+") to ("+Qs+"x"+Hr+")."),ki}return"data"in rn&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+rn.width+"x"+rn.height+")."),rn}return rn}function Ae(rn){return jL(rn.width)&&jL(rn.height)}function ot(rn,Nt){return rn.generateMipmaps&&Nt&&rn.minFilter!==Zu&&rn.minFilter!==Tu}function Mt(rn){i.generateMipmap(rn)}function Xe(rn,Nt,ai,lr,xr=!1){if(!1===l)return Nt;if(null!==rn){if(void 0!==i[rn])return i[rn];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+rn+"'")}let zr=Nt;return 6403===Nt&&(5126===ai&&(zr=33326),5131===ai&&(zr=33325),5121===ai&&(zr=33321)),33319===Nt&&(5126===ai&&(zr=33328),5131===ai&&(zr=33327),5121===ai&&(zr=33323)),6408===Nt&&(5126===ai&&(zr=34836),5131===ai&&(zr=34842),5121===ai&&(zr=lr===Xc&&!1===xr?35907:32856),32819===ai&&(zr=32854),32820===ai&&(zr=32855)),(33325===zr||33326===zr||33327===zr||33328===zr||34842===zr||34836===zr)&&t.get("EXT_color_buffer_float"),zr}function yt(rn,Nt,ai){return!0===ot(rn,ai)||rn.isFramebufferTexture&&rn.minFilter!==Zu&&rn.minFilter!==Tu?Math.log2(Math.max(Nt.width,Nt.height))+1:void 0!==rn.mipmaps&&rn.mipmaps.length>0?rn.mipmaps.length:rn.isCompressedTexture&&Array.isArray(rn.image)?Nt.mipmaps.length:1}function tn(rn){return rn===Zu||1004===rn||1005===rn?9728:9729}function zn(rn){const Nt=rn.target;Nt.removeEventListener("dispose",zn),function Un(rn){const Nt=n.get(rn);if(void 0===Nt.__webglInit)return;const ai=rn.source,lr=X.get(ai);if(lr){const xr=lr[Nt.__cacheKey];xr.usedTimes--,0===xr.usedTimes&&An(rn),0===Object.keys(lr).length&&X.delete(ai)}n.remove(rn)}(Nt),Nt.isVideoTexture&&F.delete(Nt)}function Qn(rn){const Nt=rn.target;Nt.removeEventListener("dispose",Qn),function Nn(rn){const Nt=rn.texture,ai=n.get(rn),lr=n.get(Nt);if(void 0!==lr.__webglTexture&&(i.deleteTexture(lr.__webglTexture),o.memory.textures--),rn.depthTexture&&rn.depthTexture.dispose(),rn.isWebGLCubeRenderTarget)for(let xr=0;xr<6;xr++)i.deleteFramebuffer(ai.__webglFramebuffer[xr]),ai.__webglDepthbuffer&&i.deleteRenderbuffer(ai.__webglDepthbuffer[xr]);else{if(i.deleteFramebuffer(ai.__webglFramebuffer),ai.__webglDepthbuffer&&i.deleteRenderbuffer(ai.__webglDepthbuffer),ai.__webglMultisampledFramebuffer&&i.deleteFramebuffer(ai.__webglMultisampledFramebuffer),ai.__webglColorRenderbuffer)for(let xr=0;xr<ai.__webglColorRenderbuffer.length;xr++)ai.__webglColorRenderbuffer[xr]&&i.deleteRenderbuffer(ai.__webglColorRenderbuffer[xr]);ai.__webglDepthRenderbuffer&&i.deleteRenderbuffer(ai.__webglDepthRenderbuffer)}if(rn.isWebGLMultipleRenderTargets)for(let xr=0,zr=Nt.length;xr<zr;xr++){const Qs=n.get(Nt[xr]);Qs.__webglTexture&&(i.deleteTexture(Qs.__webglTexture),o.memory.textures--),n.remove(Nt[xr])}n.remove(Nt),n.remove(rn)}(Nt)}function An(rn){const Nt=n.get(rn);i.deleteTexture(Nt.__webglTexture),delete X.get(rn.source)[Nt.__cacheKey],o.memory.textures--}let _n=0;function Bn(rn,Nt){const ai=n.get(rn);if(rn.isVideoTexture&&function Wl(rn){const Nt=o.render.frame;F.get(rn)!==Nt&&(F.set(rn,Nt),rn.update())}(rn),!1===rn.isRenderTargetTexture&&rn.version>0&&ai.__version!==rn.version){const lr=rn.image;if(null===lr)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==lr.complete)return void hs(ai,rn,Nt);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}e.bindTexture(3553,ai.__webglTexture,33984+Nt)}const cr={1e3:10497,[af]:33071,1002:33648},Is={[Zu]:9728,1004:9984,1005:9986,[Tu]:9729,1007:9985,1008:9987};function Si(rn,Nt,ai){if(ai?(i.texParameteri(rn,10242,cr[Nt.wrapS]),i.texParameteri(rn,10243,cr[Nt.wrapT]),(32879===rn||35866===rn)&&i.texParameteri(rn,32882,cr[Nt.wrapR]),i.texParameteri(rn,10240,Is[Nt.magFilter]),i.texParameteri(rn,10241,Is[Nt.minFilter])):(i.texParameteri(rn,10242,33071),i.texParameteri(rn,10243,33071),(32879===rn||35866===rn)&&i.texParameteri(rn,32882,33071),(Nt.wrapS!==af||Nt.wrapT!==af)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),i.texParameteri(rn,10240,tn(Nt.magFilter)),i.texParameteri(rn,10241,tn(Nt.minFilter)),Nt.minFilter!==Zu&&Nt.minFilter!==Tu&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){const lr=t.get("EXT_texture_filter_anisotropic");if(Nt.type===m_&&!1===t.has("OES_texture_float_linear")||!1===l&&Nt.type===Jw&&!1===t.has("OES_texture_half_float_linear"))return;(Nt.anisotropy>1||n.get(Nt).__currentAnisotropy)&&(i.texParameterf(rn,lr.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Nt.anisotropy,r.getMaxAnisotropy())),n.get(Nt).__currentAnisotropy=Nt.anisotropy)}}function _s(rn,Nt){let ai=!1;void 0===rn.__webglInit&&(rn.__webglInit=!0,Nt.addEventListener("dispose",zn));const lr=Nt.source;let xr=X.get(lr);void 0===xr&&(xr={},X.set(lr,xr));const zr=function bn(rn){const Nt=[];return Nt.push(rn.wrapS),Nt.push(rn.wrapT),Nt.push(rn.wrapR||0),Nt.push(rn.magFilter),Nt.push(rn.minFilter),Nt.push(rn.anisotropy),Nt.push(rn.internalFormat),Nt.push(rn.format),Nt.push(rn.type),Nt.push(rn.generateMipmaps),Nt.push(rn.premultiplyAlpha),Nt.push(rn.flipY),Nt.push(rn.unpackAlignment),Nt.push(rn.encoding),Nt.join()}(Nt);if(zr!==rn.__cacheKey){void 0===xr[zr]&&(xr[zr]={texture:i.createTexture(),usedTimes:0},o.memory.textures++,ai=!0),xr[zr].usedTimes++;const Qs=xr[rn.__cacheKey];void 0!==Qs&&(xr[rn.__cacheKey].usedTimes--,0===Qs.usedTimes&&An(Nt)),rn.__cacheKey=zr,rn.__webglTexture=xr[zr].texture}return ai}function hs(rn,Nt,ai){let lr=3553;(Nt.isDataArrayTexture||Nt.isCompressedArrayTexture)&&(lr=35866),Nt.isData3DTexture&&(lr=32879);const xr=_s(rn,Nt),zr=Nt.source;e.bindTexture(lr,rn.__webglTexture,33984+ai);const Qs=n.get(zr);if(zr.version!==Qs.__version||!0===xr){e.activeTexture(33984+ai),i.pixelStorei(37440,Nt.flipY),i.pixelStorei(37441,Nt.premultiplyAlpha),i.pixelStorei(3317,Nt.unpackAlignment),i.pixelStorei(37443,0);const Hr=function We(rn){return!l&&(rn.wrapS!==af||rn.wrapT!==af||rn.minFilter!==Zu&&rn.minFilter!==Tu)}(Nt)&&!1===Ae(Nt.image);let ki=ye(Nt.image,Hr,!1,v);ki=Cl(Nt,ki);const Ms=Ae(ki)||l,Ys=s.convert(Nt.format,Nt.encoding);let Ds,ps=s.convert(Nt.type),Us=Xe(Nt.internalFormat,Ys,ps,Nt.encoding,Nt.isVideoTexture);Si(lr,Nt,Ms);const Aa=Nt.mipmaps,oc=l&&!0!==Nt.isVideoTexture,wd=void 0===Qs.__version||!0===xr,Tn=yt(Nt,ki,Ms);if(Nt.isDepthTexture)Us=6402,l?Us=Nt.type===m_?36012:Nt.type===R0?33190:Nt.type===bC?35056:33189:Nt.type===m_&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Nt.format===k0&&6402===Us&&1012!==Nt.type&&Nt.type!==R0&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Nt.type=R0,ps=s.convert(Nt.type)),Nt.format===CC&&6402===Us&&(Us=34041,Nt.type!==bC&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Nt.type=bC,ps=s.convert(Nt.type))),wd&&(oc?e.texStorage2D(3553,1,Us,ki.width,ki.height):e.texImage2D(3553,0,Us,ki.width,ki.height,0,Ys,ps,null));else if(Nt.isDataTexture)if(Aa.length>0&&Ms){oc&&wd&&e.texStorage2D(3553,Tn,Us,Aa[0].width,Aa[0].height);for(let Ci=0,ar=Aa.length;Ci<ar;Ci++)Ds=Aa[Ci],oc?e.texSubImage2D(3553,Ci,0,0,Ds.width,Ds.height,Ys,ps,Ds.data):e.texImage2D(3553,Ci,Us,Ds.width,Ds.height,0,Ys,ps,Ds.data);Nt.generateMipmaps=!1}else oc?(wd&&e.texStorage2D(3553,Tn,Us,ki.width,ki.height),e.texSubImage2D(3553,0,0,0,ki.width,ki.height,Ys,ps,ki.data)):e.texImage2D(3553,0,Us,ki.width,ki.height,0,Ys,ps,ki.data);else if(Nt.isCompressedTexture)if(Nt.isCompressedArrayTexture){oc&&wd&&e.texStorage3D(35866,Tn,Us,Aa[0].width,Aa[0].height,ki.depth);for(let Ci=0,ar=Aa.length;Ci<ar;Ci++)Ds=Aa[Ci],Nt.format!==Cg?null!==Ys?oc?e.compressedTexSubImage3D(35866,Ci,0,0,0,Ds.width,Ds.height,ki.depth,Ys,Ds.data,0,0):e.compressedTexImage3D(35866,Ci,Us,Ds.width,Ds.height,ki.depth,0,Ds.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):oc?e.texSubImage3D(35866,Ci,0,0,0,Ds.width,Ds.height,ki.depth,Ys,ps,Ds.data):e.texImage3D(35866,Ci,Us,Ds.width,Ds.height,ki.depth,0,Ys,ps,Ds.data)}else{oc&&wd&&e.texStorage2D(3553,Tn,Us,Aa[0].width,Aa[0].height);for(let Ci=0,ar=Aa.length;Ci<ar;Ci++)Ds=Aa[Ci],Nt.format!==Cg?null!==Ys?oc?e.compressedTexSubImage2D(3553,Ci,0,0,Ds.width,Ds.height,Ys,Ds.data):e.compressedTexImage2D(3553,Ci,Us,Ds.width,Ds.height,0,Ds.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):oc?e.texSubImage2D(3553,Ci,0,0,Ds.width,Ds.height,Ys,ps,Ds.data):e.texImage2D(3553,Ci,Us,Ds.width,Ds.height,0,Ys,ps,Ds.data)}else if(Nt.isDataArrayTexture)oc?(wd&&e.texStorage3D(35866,Tn,Us,ki.width,ki.height,ki.depth),e.texSubImage3D(35866,0,0,0,0,ki.width,ki.height,ki.depth,Ys,ps,ki.data)):e.texImage3D(35866,0,Us,ki.width,ki.height,ki.depth,0,Ys,ps,ki.data);else if(Nt.isData3DTexture)oc?(wd&&e.texStorage3D(32879,Tn,Us,ki.width,ki.height,ki.depth),e.texSubImage3D(32879,0,0,0,0,ki.width,ki.height,ki.depth,Ys,ps,ki.data)):e.texImage3D(32879,0,Us,ki.width,ki.height,ki.depth,0,Ys,ps,ki.data);else if(Nt.isFramebufferTexture){if(wd)if(oc)e.texStorage2D(3553,Tn,Us,ki.width,ki.height);else{let Ci=ki.width,ar=ki.height;for(let Yr=0;Yr<Tn;Yr++)e.texImage2D(3553,Yr,Us,Ci,ar,0,Ys,ps,null),Ci>>=1,ar>>=1}}else if(Aa.length>0&&Ms){oc&&wd&&e.texStorage2D(3553,Tn,Us,Aa[0].width,Aa[0].height);for(let Ci=0,ar=Aa.length;Ci<ar;Ci++)Ds=Aa[Ci],oc?e.texSubImage2D(3553,Ci,0,0,Ys,ps,Ds):e.texImage2D(3553,Ci,Us,Ys,ps,Ds);Nt.generateMipmaps=!1}else oc?(wd&&e.texStorage2D(3553,Tn,Us,ki.width,ki.height),e.texSubImage2D(3553,0,0,0,Ys,ps,ki)):e.texImage2D(3553,0,Us,Ys,ps,ki);ot(Nt,Ms)&&Mt(lr),Qs.__version=zr.version,Nt.onUpdate&&Nt.onUpdate(Nt)}rn.__version=Nt.version}function Lr(rn,Nt,ai,lr,xr){const zr=s.convert(ai.format,ai.encoding),Qs=s.convert(ai.type),Hr=Xe(ai.internalFormat,zr,Qs,ai.encoding);n.get(Nt).__hasExternalTextures||(32879===xr||35866===xr?e.texImage3D(xr,0,Hr,Nt.width,Nt.height,Nt.depth,0,zr,Qs,null):e.texImage2D(xr,0,Hr,Nt.width,Nt.height,0,zr,Qs,null)),e.bindFramebuffer(36160,rn),Bs(Nt)?I.framebufferTexture2DMultisampleEXT(36160,lr,xr,n.get(ai).__webglTexture,0,Xs(Nt)):(3553===xr||xr>=34069&&xr<=34074)&&i.framebufferTexture2D(36160,lr,xr,n.get(ai).__webglTexture,0),e.bindFramebuffer(36160,null)}function Co(rn,Nt,ai){if(i.bindRenderbuffer(36161,rn),Nt.depthBuffer&&!Nt.stencilBuffer){let lr=33189;if(ai||Bs(Nt)){const xr=Nt.depthTexture;xr&&xr.isDepthTexture&&(xr.type===m_?lr=36012:xr.type===R0&&(lr=33190));const zr=Xs(Nt);Bs(Nt)?I.renderbufferStorageMultisampleEXT(36161,zr,lr,Nt.width,Nt.height):i.renderbufferStorageMultisample(36161,zr,lr,Nt.width,Nt.height)}else i.renderbufferStorage(36161,lr,Nt.width,Nt.height);i.framebufferRenderbuffer(36160,36096,36161,rn)}else if(Nt.depthBuffer&&Nt.stencilBuffer){const lr=Xs(Nt);ai&&!1===Bs(Nt)?i.renderbufferStorageMultisample(36161,lr,35056,Nt.width,Nt.height):Bs(Nt)?I.renderbufferStorageMultisampleEXT(36161,lr,35056,Nt.width,Nt.height):i.renderbufferStorage(36161,34041,Nt.width,Nt.height),i.framebufferRenderbuffer(36160,33306,36161,rn)}else{const lr=!0===Nt.isWebGLMultipleRenderTargets?Nt.texture:[Nt.texture];for(let xr=0;xr<lr.length;xr++){const zr=lr[xr],Qs=s.convert(zr.format,zr.encoding),Hr=s.convert(zr.type),ki=Xe(zr.internalFormat,Qs,Hr,zr.encoding),Ms=Xs(Nt);ai&&!1===Bs(Nt)?i.renderbufferStorageMultisample(36161,Ms,ki,Nt.width,Nt.height):Bs(Nt)?I.renderbufferStorageMultisampleEXT(36161,Ms,ki,Nt.width,Nt.height):i.renderbufferStorage(36161,ki,Nt.width,Nt.height)}}i.bindRenderbuffer(36161,null)}function Ri(rn){const Nt=n.get(rn),ai=!0===rn.isWebGLCubeRenderTarget;if(rn.depthTexture&&!Nt.__autoAllocateDepthBuffer){if(ai)throw new Error("target.depthTexture not supported in Cube render targets");!function Vi(rn,Nt){if(Nt&&Nt.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,rn),!Nt.depthTexture||!Nt.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(Nt.depthTexture).__webglTexture||Nt.depthTexture.image.width!==Nt.width||Nt.depthTexture.image.height!==Nt.height)&&(Nt.depthTexture.image.width=Nt.width,Nt.depthTexture.image.height=Nt.height,Nt.depthTexture.needsUpdate=!0),Bn(Nt.depthTexture,0);const lr=n.get(Nt.depthTexture).__webglTexture,xr=Xs(Nt);if(Nt.depthTexture.format===k0)Bs(Nt)?I.framebufferTexture2DMultisampleEXT(36160,36096,3553,lr,0,xr):i.framebufferTexture2D(36160,36096,3553,lr,0);else{if(Nt.depthTexture.format!==CC)throw new Error("Unknown depthTexture format");Bs(Nt)?I.framebufferTexture2DMultisampleEXT(36160,33306,3553,lr,0,xr):i.framebufferTexture2D(36160,33306,3553,lr,0)}}(Nt.__webglFramebuffer,rn)}else if(ai){Nt.__webglDepthbuffer=[];for(let lr=0;lr<6;lr++)e.bindFramebuffer(36160,Nt.__webglFramebuffer[lr]),Nt.__webglDepthbuffer[lr]=i.createRenderbuffer(),Co(Nt.__webglDepthbuffer[lr],rn,!1)}else e.bindFramebuffer(36160,Nt.__webglFramebuffer),Nt.__webglDepthbuffer=i.createRenderbuffer(),Co(Nt.__webglDepthbuffer,rn,!1);e.bindFramebuffer(36160,null)}function Xs(rn){return Math.min(x,rn.samples)}function Bs(rn){const Nt=n.get(rn);return l&&rn.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==Nt.__useRenderToTexture}function Cl(rn,Nt){const ai=rn.encoding,lr=rn.format,xr=rn.type;return!0===rn.isCompressedTexture||!0===rn.isVideoTexture||1035===rn.format||ai!==O0&&(ai===Xc?!1===l?!0===t.has("EXT_sRGB")&&lr===Cg?(rn.format=1035,rn.minFilter=Tu,rn.generateMipmaps=!1):Nt=k5.sRGBToLinear(Nt):(lr!==Cg||xr!==P0)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",ai)),Nt}this.allocateTextureUnit=function Fn(){const rn=_n;return rn>=u&&console.warn("THREE.WebGLTextures: Trying to use "+rn+" texture units while this GPU supports only "+u),_n+=1,rn},this.resetTextureUnits=function Vn(){_n=0},this.setTexture2D=Bn,this.setTexture2DArray=function Wi(rn,Nt){const ai=n.get(rn);rn.version>0&&ai.__version!==rn.version?hs(ai,rn,Nt):e.bindTexture(35866,ai.__webglTexture,33984+Nt)},this.setTexture3D=function wi(rn,Nt){const ai=n.get(rn);rn.version>0&&ai.__version!==rn.version?hs(ai,rn,Nt):e.bindTexture(32879,ai.__webglTexture,33984+Nt)},this.setTextureCube=function er(rn,Nt){const ai=n.get(rn);rn.version>0&&ai.__version!==rn.version?function fs(rn,Nt,ai){if(6!==Nt.image.length)return;const lr=_s(rn,Nt),xr=Nt.source;e.bindTexture(34067,rn.__webglTexture,33984+ai);const zr=n.get(xr);if(xr.version!==zr.__version||!0===lr){e.activeTexture(33984+ai),i.pixelStorei(37440,Nt.flipY),i.pixelStorei(37441,Nt.premultiplyAlpha),i.pixelStorei(3317,Nt.unpackAlignment),i.pixelStorei(37443,0);const Qs=Nt.isCompressedTexture||Nt.image[0].isCompressedTexture,Hr=Nt.image[0]&&Nt.image[0].isDataTexture,ki=[];for(let Ci=0;Ci<6;Ci++)ki[Ci]=Qs||Hr?Hr?Nt.image[Ci].image:Nt.image[Ci]:ye(Nt.image[Ci],!1,!0,p),ki[Ci]=Cl(Nt,ki[Ci]);const Ms=ki[0],Ys=Ae(Ms)||l,ps=s.convert(Nt.format,Nt.encoding),Us=s.convert(Nt.type),Ds=Xe(Nt.internalFormat,ps,Us,Nt.encoding),Aa=l&&!0!==Nt.isVideoTexture,oc=void 0===zr.__version||!0===lr;let Tn,wd=yt(Nt,Ms,Ys);if(Si(34067,Nt,Ys),Qs){Aa&&oc&&e.texStorage2D(34067,wd,Ds,Ms.width,Ms.height);for(let Ci=0;Ci<6;Ci++){Tn=ki[Ci].mipmaps;for(let ar=0;ar<Tn.length;ar++){const Yr=Tn[ar];Nt.format!==Cg?null!==ps?Aa?e.compressedTexSubImage2D(34069+Ci,ar,0,0,Yr.width,Yr.height,ps,Yr.data):e.compressedTexImage2D(34069+Ci,ar,Ds,Yr.width,Yr.height,0,Yr.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Aa?e.texSubImage2D(34069+Ci,ar,0,0,Yr.width,Yr.height,ps,Us,Yr.data):e.texImage2D(34069+Ci,ar,Ds,Yr.width,Yr.height,0,ps,Us,Yr.data)}}}else{Tn=Nt.mipmaps,Aa&&oc&&(Tn.length>0&&wd++,e.texStorage2D(34067,wd,Ds,ki[0].width,ki[0].height));for(let Ci=0;Ci<6;Ci++)if(Hr){Aa?e.texSubImage2D(34069+Ci,0,0,0,ki[Ci].width,ki[Ci].height,ps,Us,ki[Ci].data):e.texImage2D(34069+Ci,0,Ds,ki[Ci].width,ki[Ci].height,0,ps,Us,ki[Ci].data);for(let ar=0;ar<Tn.length;ar++){const bs=Tn[ar].image[Ci].image;Aa?e.texSubImage2D(34069+Ci,ar+1,0,0,bs.width,bs.height,ps,Us,bs.data):e.texImage2D(34069+Ci,ar+1,Ds,bs.width,bs.height,0,ps,Us,bs.data)}}else{Aa?e.texSubImage2D(34069+Ci,0,0,0,ps,Us,ki[Ci]):e.texImage2D(34069+Ci,0,Ds,ps,Us,ki[Ci]);for(let ar=0;ar<Tn.length;ar++){const Yr=Tn[ar];Aa?e.texSubImage2D(34069+Ci,ar+1,0,0,ps,Us,Yr.image[Ci]):e.texImage2D(34069+Ci,ar+1,Ds,ps,Us,Yr.image[Ci])}}}ot(Nt,Ys)&&Mt(34067),zr.__version=xr.version,Nt.onUpdate&&Nt.onUpdate(Nt)}rn.__version=Nt.version}(ai,rn,Nt):e.bindTexture(34067,ai.__webglTexture,33984+Nt)},this.rebindTextures=function wr(rn,Nt,ai){const lr=n.get(rn);void 0!==Nt&&Lr(lr.__webglFramebuffer,rn,rn.texture,36064,3553),void 0!==ai&&Ri(rn)},this.setupRenderTarget=function ls(rn){const Nt=rn.texture,ai=n.get(rn),lr=n.get(Nt);rn.addEventListener("dispose",Qn),!0!==rn.isWebGLMultipleRenderTargets&&(void 0===lr.__webglTexture&&(lr.__webglTexture=i.createTexture()),lr.__version=Nt.version,o.memory.textures++);const xr=!0===rn.isWebGLCubeRenderTarget,zr=!0===rn.isWebGLMultipleRenderTargets,Qs=Ae(rn)||l;if(xr){ai.__webglFramebuffer=[];for(let Hr=0;Hr<6;Hr++)ai.__webglFramebuffer[Hr]=i.createFramebuffer()}else{if(ai.__webglFramebuffer=i.createFramebuffer(),zr)if(r.drawBuffers){const Hr=rn.texture;for(let ki=0,Ms=Hr.length;ki<Ms;ki++){const Ys=n.get(Hr[ki]);void 0===Ys.__webglTexture&&(Ys.__webglTexture=i.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(l&&rn.samples>0&&!1===Bs(rn)){const Hr=zr?Nt:[Nt];ai.__webglMultisampledFramebuffer=i.createFramebuffer(),ai.__webglColorRenderbuffer=[],e.bindFramebuffer(36160,ai.__webglMultisampledFramebuffer);for(let ki=0;ki<Hr.length;ki++){const Ms=Hr[ki];ai.__webglColorRenderbuffer[ki]=i.createRenderbuffer(),i.bindRenderbuffer(36161,ai.__webglColorRenderbuffer[ki]);const Ys=s.convert(Ms.format,Ms.encoding),ps=s.convert(Ms.type),Us=Xe(Ms.internalFormat,Ys,ps,Ms.encoding,!0===rn.isXRRenderTarget),Ds=Xs(rn);i.renderbufferStorageMultisample(36161,Ds,Us,rn.width,rn.height),i.framebufferRenderbuffer(36160,36064+ki,36161,ai.__webglColorRenderbuffer[ki])}i.bindRenderbuffer(36161,null),rn.depthBuffer&&(ai.__webglDepthRenderbuffer=i.createRenderbuffer(),Co(ai.__webglDepthRenderbuffer,rn,!0)),e.bindFramebuffer(36160,null)}}if(xr){e.bindTexture(34067,lr.__webglTexture),Si(34067,Nt,Qs);for(let Hr=0;Hr<6;Hr++)Lr(ai.__webglFramebuffer[Hr],rn,Nt,36064,34069+Hr);ot(Nt,Qs)&&Mt(34067),e.unbindTexture()}else if(zr){const Hr=rn.texture;for(let ki=0,Ms=Hr.length;ki<Ms;ki++){const Ys=Hr[ki],ps=n.get(Ys);e.bindTexture(3553,ps.__webglTexture),Si(3553,Ys,Qs),Lr(ai.__webglFramebuffer,rn,Ys,36064+ki,3553),ot(Ys,Qs)&&Mt(3553)}e.unbindTexture()}else{let Hr=3553;(rn.isWebGL3DRenderTarget||rn.isWebGLArrayRenderTarget)&&(l?Hr=rn.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),e.bindTexture(Hr,lr.__webglTexture),Si(Hr,Nt,Qs),Lr(ai.__webglFramebuffer,rn,Nt,36064,Hr),ot(Nt,Qs)&&Mt(Hr),e.unbindTexture()}rn.depthBuffer&&Ri(rn)},this.updateRenderTargetMipmap=function kr(rn){const Nt=Ae(rn)||l,ai=!0===rn.isWebGLMultipleRenderTargets?rn.texture:[rn.texture];for(let lr=0,xr=ai.length;lr<xr;lr++){const zr=ai[lr];if(ot(zr,Nt)){const Qs=rn.isWebGLCubeRenderTarget?34067:3553,Hr=n.get(zr).__webglTexture;e.bindTexture(Qs,Hr),Mt(Qs),e.unbindTexture()}}},this.updateMultisampleRenderTarget=function go(rn){if(l&&rn.samples>0&&!1===Bs(rn)){const Nt=rn.isWebGLMultipleRenderTargets?rn.texture:[rn.texture],ai=rn.width,lr=rn.height;let xr=16384;const zr=[],Qs=rn.stencilBuffer?33306:36096,Hr=n.get(rn),ki=!0===rn.isWebGLMultipleRenderTargets;if(ki)for(let Ms=0;Ms<Nt.length;Ms++)e.bindFramebuffer(36160,Hr.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(36160,36064+Ms,36161,null),e.bindFramebuffer(36160,Hr.__webglFramebuffer),i.framebufferTexture2D(36009,36064+Ms,3553,null,0);e.bindFramebuffer(36008,Hr.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,Hr.__webglFramebuffer);for(let Ms=0;Ms<Nt.length;Ms++){zr.push(36064+Ms),rn.depthBuffer&&zr.push(Qs);const Ys=void 0!==Hr.__ignoreDepthValues&&Hr.__ignoreDepthValues;if(!1===Ys&&(rn.depthBuffer&&(xr|=256),rn.stencilBuffer&&(xr|=1024)),ki&&i.framebufferRenderbuffer(36008,36064,36161,Hr.__webglColorRenderbuffer[Ms]),!0===Ys&&(i.invalidateFramebuffer(36008,[Qs]),i.invalidateFramebuffer(36009,[Qs])),ki){const ps=n.get(Nt[Ms]).__webglTexture;i.framebufferTexture2D(36009,36064,3553,ps,0)}i.blitFramebuffer(0,0,ai,lr,0,0,ai,lr,xr,9728),T&&i.invalidateFramebuffer(36008,zr)}if(e.bindFramebuffer(36008,null),e.bindFramebuffer(36009,null),ki)for(let Ms=0;Ms<Nt.length;Ms++){e.bindFramebuffer(36160,Hr.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(36160,36064+Ms,36161,Hr.__webglColorRenderbuffer[Ms]);const Ys=n.get(Nt[Ms]).__webglTexture;e.bindFramebuffer(36160,Hr.__webglFramebuffer),i.framebufferTexture2D(36009,36064+Ms,3553,Ys,0)}e.bindFramebuffer(36009,Hr.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=Ri,this.setupFrameBufferTexture=Lr,this.useMultisampledRTT=Bs}function E0e(i,t,e){const n=e.isWebGL2;return{convert:function r(s,o=null){let l;if(s===P0)return 5121;if(1017===s)return 32819;if(1018===s)return 32820;if(1010===s)return 5120;if(1011===s)return 5122;if(1012===s)return 5123;if(1013===s)return 5124;if(s===R0)return 5125;if(s===m_)return 5126;if(s===Jw)return n?5131:(l=t.get("OES_texture_half_float"),null!==l?l.HALF_FLOAT_OES:null);if(1021===s)return 6406;if(s===Cg)return 6408;if(1024===s)return 6409;if(1025===s)return 6410;if(s===k0)return 6402;if(s===CC)return 34041;if(1028===s)return 6403;if(1022===s)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(1035===s)return l=t.get("EXT_sRGB"),null!==l?l.SRGB_ALPHA_EXT:null;if(1029===s)return 36244;if(1030===s)return 33319;if(1031===s)return 33320;if(1033===s)return 36249;if(33776===s||33777===s||33778===s||33779===s)if(o===Xc){if(l=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===l)return null;if(33776===s)return l.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===s)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===s)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===s)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(l=t.get("WEBGL_compressed_texture_s3tc"),null===l)return null;if(33776===s)return l.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===s)return l.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===s)return l.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===s)return l.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===s||35841===s||35842===s||35843===s){if(l=t.get("WEBGL_compressed_texture_pvrtc"),null===l)return null;if(35840===s)return l.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===s)return l.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===s)return l.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===s)return l.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===s)return l=t.get("WEBGL_compressed_texture_etc1"),null!==l?l.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===s||37496===s){if(l=t.get("WEBGL_compressed_texture_etc"),null===l)return null;if(37492===s)return o===Xc?l.COMPRESSED_SRGB8_ETC2:l.COMPRESSED_RGB8_ETC2;if(37496===s)return o===Xc?l.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:l.COMPRESSED_RGBA8_ETC2_EAC}if(37808===s||37809===s||37810===s||37811===s||37812===s||37813===s||37814===s||37815===s||37816===s||37817===s||37818===s||37819===s||37820===s||37821===s){if(l=t.get("WEBGL_compressed_texture_astc"),null===l)return null;if(37808===s)return o===Xc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:l.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===s)return o===Xc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:l.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===s)return o===Xc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:l.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===s)return o===Xc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:l.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===s)return o===Xc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:l.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===s)return o===Xc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:l.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===s)return o===Xc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:l.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===s)return o===Xc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:l.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===s)return o===Xc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:l.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===s)return o===Xc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:l.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===s)return o===Xc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:l.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===s)return o===Xc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:l.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===s)return o===Xc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:l.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===s)return o===Xc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:l.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===s){if(l=t.get("EXT_texture_compression_bptc"),null===l)return null;if(36492===s)return o===Xc?l.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:l.COMPRESSED_RGBA_BPTC_UNORM_EXT}return s===bC?n?34042:(l=t.get("WEBGL_depth_texture"),null!==l?l.UNSIGNED_INT_24_8_WEBGL:null):void 0!==i[s]?i[s]:null}}}class T0e extends eh{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}}class jC extends Vf{constructor(){super(),this.isGroup=!0,this.type="Group"}}const M0e={type:"move"};class wP{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new jC,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new jC,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new jt,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new jt),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new jC,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new jt,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new jt),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,n){let r=null,s=null,o=null;const l=this._targetRay,u=this._grip,p=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState){if(p&&t.hand){o=!0;for(const j of t.hand.values()){const X=e.getJointPose(j,n);if(void 0===p.joints[j.jointName]){const we=new jC;we.matrixAutoUpdate=!1,we.visible=!1,p.joints[j.jointName]=we,p.add(we)}const ce=p.joints[j.jointName];null!==X&&(ce.matrix.fromArray(X.transform.matrix),ce.matrix.decompose(ce.position,ce.rotation,ce.scale),ce.jointRadius=X.radius),ce.visible=null!==X}const I=p.joints["index-finger-tip"].position.distanceTo(p.joints["thumb-tip"].position),T=.02,F=.005;p.inputState.pinching&&I>T+F?(p.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!p.inputState.pinching&&I<=T-F&&(p.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==u&&t.gripSpace&&(s=e.getPose(t.gripSpace,n),null!==s&&(u.matrix.fromArray(s.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),s.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(s.linearVelocity)):u.hasLinearVelocity=!1,s.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(s.angularVelocity)):u.hasAngularVelocity=!1));null!==l&&(r=e.getPose(t.targetRaySpace,n),null===r&&null!==s&&(r=s),null!==r&&(l.matrix.fromArray(r.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),r.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(r.linearVelocity)):l.hasLinearVelocity=!1,r.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(r.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(M0e)))}return null!==l&&(l.visible=null!==r),null!==u&&(u.visible=null!==s),null!==p&&(p.visible=null!==o),this}}class D0e extends v_{constructor(t,e,n,r,s,o,l,u,p,v){if((v=void 0!==v?v:k0)!==k0&&v!==CC)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&v===k0&&(n=R0),void 0===n&&v===CC&&(n=bC),super(null,r,s,o,l,u,v,n,p),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=void 0!==l?l:Zu,this.minFilter=void 0!==u?u:Zu,this.flipY=!1,this.generateMipmaps=!1}}class L0e extends AC{constructor(t,e){super();const n=this;let r=null,s=1,o=null,l="local-floor",u=null,p=null,v=null,x=null,I=null,T=null;const F=e.getContextAttributes();let j=null,X=null;const ce=[],we=[],ye=new eh;ye.layers.enable(1),ye.viewport=new dl;const Ae=new eh;Ae.layers.enable(2),Ae.viewport=new dl;const We=[ye,Ae],ot=new T0e;ot.layers.enable(1),ot.layers.enable(2);let Mt=null,Xe=null;function yt(bn){const Bn=we.indexOf(bn.inputSource);if(-1===Bn)return;const Wi=ce[Bn];void 0!==Wi&&Wi.dispatchEvent({type:bn.type,data:bn.inputSource})}function tn(){r.removeEventListener("select",yt),r.removeEventListener("selectstart",yt),r.removeEventListener("selectend",yt),r.removeEventListener("squeeze",yt),r.removeEventListener("squeezestart",yt),r.removeEventListener("squeezeend",yt),r.removeEventListener("end",tn),r.removeEventListener("inputsourceschange",zn);for(let bn=0;bn<ce.length;bn++){const Bn=we[bn];null!==Bn&&(we[bn]=null,ce[bn].disconnect(Bn))}Mt=null,Xe=null,t.setRenderTarget(j),I=null,x=null,v=null,r=null,X=null,Fn.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function zn(bn){for(let Bn=0;Bn<bn.removed.length;Bn++){const Wi=bn.removed[Bn],wi=we.indexOf(Wi);wi>=0&&(we[wi]=null,ce[wi].dispatchEvent({type:"disconnected",data:Wi}))}for(let Bn=0;Bn<bn.added.length;Bn++){const Wi=bn.added[Bn];let wi=we.indexOf(Wi);if(-1===wi){for(let cr=0;cr<ce.length;cr++){if(cr>=we.length){we.push(Wi),wi=cr;break}if(null===we[cr]){we[cr]=Wi,wi=cr;break}}if(-1===wi)break}const er=ce[wi];er&&er.dispatchEvent({type:"connected",data:Wi})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(bn){let Bn=ce[bn];return void 0===Bn&&(Bn=new wP,ce[bn]=Bn),Bn.getTargetRaySpace()},this.getControllerGrip=function(bn){let Bn=ce[bn];return void 0===Bn&&(Bn=new wP,ce[bn]=Bn),Bn.getGripSpace()},this.getHand=function(bn){let Bn=ce[bn];return void 0===Bn&&(Bn=new wP,ce[bn]=Bn),Bn.getHandSpace()},this.setFramebufferScaleFactor=function(bn){s=bn,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(bn){l=bn,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||o},this.setReferenceSpace=function(bn){u=bn},this.getBaseLayer=function(){return null!==x?x:I},this.getBinding=function(){return v},this.getFrame=function(){return T},this.getSession=function(){return r},this.setSession=function(){var bn=p0(function*(Bn){if(r=Bn,null!==r){if(j=t.getRenderTarget(),r.addEventListener("select",yt),r.addEventListener("selectstart",yt),r.addEventListener("selectend",yt),r.addEventListener("squeeze",yt),r.addEventListener("squeezestart",yt),r.addEventListener("squeezeend",yt),r.addEventListener("end",tn),r.addEventListener("inputsourceschange",zn),!0!==F.xrCompatible&&(yield e.makeXRCompatible()),void 0===r.renderState.layers||!1===t.capabilities.isWebGL2)I=new XRWebGLLayer(r,e,{antialias:void 0!==r.renderState.layers||F.antialias,alpha:F.alpha,depth:F.depth,stencil:F.stencil,framebufferScaleFactor:s}),r.updateRenderState({baseLayer:I}),X=new V0(I.framebufferWidth,I.framebufferHeight,{format:Cg,type:P0,encoding:t.outputEncoding,stencilBuffer:F.stencil});else{let Wi=null,wi=null,er=null;F.depth&&(er=F.stencil?35056:33190,Wi=F.stencil?CC:k0,wi=F.stencil?bC:R0);const cr={colorFormat:32856,depthFormat:er,scaleFactor:s};v=new XRWebGLBinding(r,e),x=v.createProjectionLayer(cr),r.updateRenderState({layers:[x]}),X=new V0(x.textureWidth,x.textureHeight,{format:Cg,type:P0,depthTexture:new D0e(x.textureWidth,x.textureHeight,wi,void 0,void 0,void 0,void 0,void 0,void 0,Wi),stencilBuffer:F.stencil,encoding:t.outputEncoding,samples:F.antialias?4:0}),t.properties.get(X).__ignoreDepthValues=x.ignoreDepthValues}X.isXRRenderTarget=!0,this.setFoveation(1),u=null,o=yield r.requestReferenceSpace(l),Fn.setContext(r),Fn.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}});return function(Bn){return bn.apply(this,arguments)}}();const Qn=new jt,Un=new jt;function Nn(bn,Bn){null===Bn?bn.matrixWorld.copy(bn.matrix):bn.matrixWorld.multiplyMatrices(Bn.matrixWorld,bn.matrix),bn.matrixWorldInverse.copy(bn.matrixWorld).invert()}this.updateCamera=function(bn){if(null===r)return;ot.near=Ae.near=ye.near=bn.near,ot.far=Ae.far=ye.far=bn.far,(Mt!==ot.near||Xe!==ot.far)&&(r.updateRenderState({depthNear:ot.near,depthFar:ot.far}),Mt=ot.near,Xe=ot.far);const Bn=bn.parent,Wi=ot.cameras;Nn(ot,Bn);for(let er=0;er<Wi.length;er++)Nn(Wi[er],Bn);ot.matrixWorld.decompose(ot.position,ot.quaternion,ot.scale),bn.matrix.copy(ot.matrix),bn.matrix.decompose(bn.position,bn.quaternion,bn.scale);const wi=bn.children;for(let er=0,cr=wi.length;er<cr;er++)wi[er].updateMatrixWorld(!0);2===Wi.length?function An(bn,Bn,Wi){Qn.setFromMatrixPosition(Bn.matrixWorld),Un.setFromMatrixPosition(Wi.matrixWorld);const wi=Qn.distanceTo(Un),er=Bn.projectionMatrix.elements,cr=Wi.projectionMatrix.elements,Is=er[14]/(er[10]-1),Si=er[14]/(er[10]+1),_s=(er[9]+1)/er[5],hs=(er[9]-1)/er[5],fs=(er[8]-1)/er[0],Lr=(cr[8]+1)/cr[0],Co=Is*fs,Vi=Is*Lr,Ri=wi/(-fs+Lr),wr=Ri*-fs;Bn.matrixWorld.decompose(bn.position,bn.quaternion,bn.scale),bn.translateX(wr),bn.translateZ(Ri),bn.matrixWorld.compose(bn.position,bn.quaternion,bn.scale),bn.matrixWorldInverse.copy(bn.matrixWorld).invert();const ls=Is+Ri,kr=Si+Ri;bn.projectionMatrix.makePerspective(Co-wr,Vi+(wi-wr),_s*Si/kr*ls,hs*Si/kr*ls,ls,kr)}(ot,ye,Ae):ot.projectionMatrix.copy(ye.projectionMatrix)},this.getCamera=function(){return ot},this.getFoveation=function(){return null!==x?x.fixedFoveation:null!==I?I.fixedFoveation:void 0},this.setFoveation=function(bn){null!==x&&(x.fixedFoveation=bn),null!==I&&void 0!==I.fixedFoveation&&(I.fixedFoveation=bn)};let _n=null;const Fn=new X5;Fn.setAnimationLoop(function Vn(bn,Bn){if(p=Bn.getViewerPose(u||o),T=Bn,null!==p){const Wi=p.views;null!==I&&(t.setRenderTargetFramebuffer(X,I.framebuffer),t.setRenderTarget(X));let wi=!1;Wi.length!==ot.cameras.length&&(ot.cameras.length=0,wi=!0);for(let er=0;er<Wi.length;er++){const cr=Wi[er];let Is=null;if(null!==I)Is=I.getViewport(cr);else{const _s=v.getViewSubImage(x,cr);Is=_s.viewport,0===er&&(t.setRenderTargetTextures(X,_s.colorTexture,x.ignoreDepthValues?void 0:_s.depthStencilTexture),t.setRenderTarget(X))}let Si=We[er];void 0===Si&&(Si=new eh,Si.layers.enable(er),Si.viewport=new dl,We[er]=Si),Si.matrix.fromArray(cr.transform.matrix),Si.projectionMatrix.fromArray(cr.projectionMatrix),Si.viewport.set(Is.x,Is.y,Is.width,Is.height),0===er&&ot.matrix.copy(Si.matrix),!0===wi&&ot.cameras.push(Si)}}for(let Wi=0;Wi<ce.length;Wi++){const wi=we[Wi],er=ce[Wi];null!==wi&&void 0!==er&&er.update(wi,Bn,u||o)}_n&&_n(bn,Bn),T=null}),this.setAnimationLoop=function(bn){_n=bn},this.dispose=function(){}}}function P0e(i,t){function r(j,X){j.opacity.value=X.opacity,X.color&&j.diffuse.value.copy(X.color),X.emissive&&j.emissive.value.copy(X.emissive).multiplyScalar(X.emissiveIntensity),X.map&&(j.map.value=X.map),X.alphaMap&&(j.alphaMap.value=X.alphaMap),X.bumpMap&&(j.bumpMap.value=X.bumpMap,j.bumpScale.value=X.bumpScale,1===X.side&&(j.bumpScale.value*=-1)),X.displacementMap&&(j.displacementMap.value=X.displacementMap,j.displacementScale.value=X.displacementScale,j.displacementBias.value=X.displacementBias),X.emissiveMap&&(j.emissiveMap.value=X.emissiveMap),X.normalMap&&(j.normalMap.value=X.normalMap,j.normalScale.value.copy(X.normalScale),1===X.side&&j.normalScale.value.negate()),X.specularMap&&(j.specularMap.value=X.specularMap),X.alphaTest>0&&(j.alphaTest.value=X.alphaTest);const ce=t.get(X).envMap;if(ce&&(j.envMap.value=ce,j.flipEnvMap.value=ce.isCubeTexture&&!1===ce.isRenderTargetTexture?-1:1,j.reflectivity.value=X.reflectivity,j.ior.value=X.ior,j.refractionRatio.value=X.refractionRatio),X.lightMap){j.lightMap.value=X.lightMap;const Ae=!0!==i.physicallyCorrectLights?Math.PI:1;j.lightMapIntensity.value=X.lightMapIntensity*Ae}let we,ye;X.aoMap&&(j.aoMap.value=X.aoMap,j.aoMapIntensity.value=X.aoMapIntensity),X.map?we=X.map:X.specularMap?we=X.specularMap:X.displacementMap?we=X.displacementMap:X.normalMap?we=X.normalMap:X.bumpMap?we=X.bumpMap:X.roughnessMap?we=X.roughnessMap:X.metalnessMap?we=X.metalnessMap:X.alphaMap?we=X.alphaMap:X.emissiveMap?we=X.emissiveMap:X.clearcoatMap?we=X.clearcoatMap:X.clearcoatNormalMap?we=X.clearcoatNormalMap:X.clearcoatRoughnessMap?we=X.clearcoatRoughnessMap:X.iridescenceMap?we=X.iridescenceMap:X.iridescenceThicknessMap?we=X.iridescenceThicknessMap:X.specularIntensityMap?we=X.specularIntensityMap:X.specularColorMap?we=X.specularColorMap:X.transmissionMap?we=X.transmissionMap:X.thicknessMap?we=X.thicknessMap:X.sheenColorMap?we=X.sheenColorMap:X.sheenRoughnessMap&&(we=X.sheenRoughnessMap),void 0!==we&&(we.isWebGLRenderTarget&&(we=we.texture),!0===we.matrixAutoUpdate&&we.updateMatrix(),j.uvTransform.value.copy(we.matrix)),X.aoMap?ye=X.aoMap:X.lightMap&&(ye=X.lightMap),void 0!==ye&&(ye.isWebGLRenderTarget&&(ye=ye.texture),!0===ye.matrixAutoUpdate&&ye.updateMatrix(),j.uv2Transform.value.copy(ye.matrix))}return{refreshFogUniforms:function e(j,X){j.fogColor.value.copy(X.color),X.isFog?(j.fogNear.value=X.near,j.fogFar.value=X.far):X.isFogExp2&&(j.fogDensity.value=X.density)},refreshMaterialUniforms:function n(j,X,ce,we,ye){X.isMeshBasicMaterial||X.isMeshLambertMaterial?r(j,X):X.isMeshToonMaterial?(r(j,X),function v(j,X){X.gradientMap&&(j.gradientMap.value=X.gradientMap)}(j,X)):X.isMeshPhongMaterial?(r(j,X),function p(j,X){j.specular.value.copy(X.specular),j.shininess.value=Math.max(X.shininess,1e-4)}(j,X)):X.isMeshStandardMaterial?(r(j,X),function x(j,X){j.roughness.value=X.roughness,j.metalness.value=X.metalness,X.roughnessMap&&(j.roughnessMap.value=X.roughnessMap),X.metalnessMap&&(j.metalnessMap.value=X.metalnessMap),t.get(X).envMap&&(j.envMapIntensity.value=X.envMapIntensity)}(j,X),X.isMeshPhysicalMaterial&&function I(j,X,ce){j.ior.value=X.ior,X.sheen>0&&(j.sheenColor.value.copy(X.sheenColor).multiplyScalar(X.sheen),j.sheenRoughness.value=X.sheenRoughness,X.sheenColorMap&&(j.sheenColorMap.value=X.sheenColorMap),X.sheenRoughnessMap&&(j.sheenRoughnessMap.value=X.sheenRoughnessMap)),X.clearcoat>0&&(j.clearcoat.value=X.clearcoat,j.clearcoatRoughness.value=X.clearcoatRoughness,X.clearcoatMap&&(j.clearcoatMap.value=X.clearcoatMap),X.clearcoatRoughnessMap&&(j.clearcoatRoughnessMap.value=X.clearcoatRoughnessMap),X.clearcoatNormalMap&&(j.clearcoatNormalScale.value.copy(X.clearcoatNormalScale),j.clearcoatNormalMap.value=X.clearcoatNormalMap,1===X.side&&j.clearcoatNormalScale.value.negate())),X.iridescence>0&&(j.iridescence.value=X.iridescence,j.iridescenceIOR.value=X.iridescenceIOR,j.iridescenceThicknessMinimum.value=X.iridescenceThicknessRange[0],j.iridescenceThicknessMaximum.value=X.iridescenceThicknessRange[1],X.iridescenceMap&&(j.iridescenceMap.value=X.iridescenceMap),X.iridescenceThicknessMap&&(j.iridescenceThicknessMap.value=X.iridescenceThicknessMap)),X.transmission>0&&(j.transmission.value=X.transmission,j.transmissionSamplerMap.value=ce.texture,j.transmissionSamplerSize.value.set(ce.width,ce.height),X.transmissionMap&&(j.transmissionMap.value=X.transmissionMap),j.thickness.value=X.thickness,X.thicknessMap&&(j.thicknessMap.value=X.thicknessMap),j.attenuationDistance.value=X.attenuationDistance,j.attenuationColor.value.copy(X.attenuationColor)),j.specularIntensity.value=X.specularIntensity,j.specularColor.value.copy(X.specularColor),X.specularIntensityMap&&(j.specularIntensityMap.value=X.specularIntensityMap),X.specularColorMap&&(j.specularColorMap.value=X.specularColorMap)}(j,X,ye)):X.isMeshMatcapMaterial?(r(j,X),function T(j,X){X.matcap&&(j.matcap.value=X.matcap)}(j,X)):X.isMeshDepthMaterial?r(j,X):X.isMeshDistanceMaterial?(r(j,X),function F(j,X){j.referencePosition.value.copy(X.referencePosition),j.nearDistance.value=X.nearDistance,j.farDistance.value=X.farDistance}(j,X)):X.isMeshNormalMaterial?r(j,X):X.isLineBasicMaterial?(function s(j,X){j.diffuse.value.copy(X.color),j.opacity.value=X.opacity}(j,X),X.isLineDashedMaterial&&function o(j,X){j.dashSize.value=X.dashSize,j.totalSize.value=X.dashSize+X.gapSize,j.scale.value=X.scale}(j,X)):X.isPointsMaterial?function l(j,X,ce,we){let ye;j.diffuse.value.copy(X.color),j.opacity.value=X.opacity,j.size.value=X.size*ce,j.scale.value=.5*we,X.map&&(j.map.value=X.map),X.alphaMap&&(j.alphaMap.value=X.alphaMap),X.alphaTest>0&&(j.alphaTest.value=X.alphaTest),X.map?ye=X.map:X.alphaMap&&(ye=X.alphaMap),void 0!==ye&&(!0===ye.matrixAutoUpdate&&ye.updateMatrix(),j.uvTransform.value.copy(ye.matrix))}(j,X,ce,we):X.isSpriteMaterial?function u(j,X){let ce;j.diffuse.value.copy(X.color),j.opacity.value=X.opacity,j.rotation.value=X.rotation,X.map&&(j.map.value=X.map),X.alphaMap&&(j.alphaMap.value=X.alphaMap),X.alphaTest>0&&(j.alphaTest.value=X.alphaTest),X.map?ce=X.map:X.alphaMap&&(ce=X.alphaMap),void 0!==ce&&(!0===ce.matrixAutoUpdate&&ce.updateMatrix(),j.uvTransform.value.copy(ce.matrix))}(j,X):X.isShadowMaterial?(j.color.value.copy(X.color),j.opacity.value=X.opacity):X.isShaderMaterial&&(X.uniformsNeedUpdate=!1)}}}function R0e(i,t,e,n){let r={},s={},o=[];const l=e.isWebGL2?i.getParameter(35375):0;function T(we,ye,Ae){const We=we.value;if(void 0===Ae[ye])return Ae[ye]="number"==typeof We?We:We.clone(),!0;if("number"==typeof We){if(Ae[ye]!==We)return Ae[ye]=We,!0}else{const ot=Ae[ye];if(!1===ot.equals(We))return ot.copy(We),!0}return!1}function j(we){const ye=we.value,Ae={boundary:0,storage:0};return"number"==typeof ye?(Ae.boundary=4,Ae.storage=4):ye.isVector2?(Ae.boundary=8,Ae.storage=8):ye.isVector3||ye.isColor?(Ae.boundary=16,Ae.storage=12):ye.isVector4?(Ae.boundary=16,Ae.storage=16):ye.isMatrix3?(Ae.boundary=48,Ae.storage=48):ye.isMatrix4?(Ae.boundary=64,Ae.storage=64):ye.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",ye),Ae}function X(we){const ye=we.target;ye.removeEventListener("dispose",X);const Ae=o.indexOf(ye.__bindingPointIndex);o.splice(Ae,1),i.deleteBuffer(r[ye.id]),delete r[ye.id],delete s[ye.id]}return{bind:function u(we,ye){n.uniformBlockBinding(we,ye.program)},update:function p(we,ye){let Ae=r[we.id];void 0===Ae&&(function F(we){const ye=we.uniforms;let Ae=0;let ot=0;for(let Mt=0,Xe=ye.length;Mt<Xe;Mt++){const yt=ye[Mt],tn=j(yt);if(yt.__data=new Float32Array(tn.storage/Float32Array.BYTES_PER_ELEMENT),yt.__offset=Ae,Mt>0){ot=Ae%16;const zn=16-ot;0!==ot&&zn-tn.boundary<0&&(Ae+=16-ot,yt.__offset=Ae)}Ae+=tn.storage}ot=Ae%16,ot>0&&(Ae+=16-ot),we.__size=Ae,we.__cache={}}(we),Ae=function v(we){const ye=function x(){for(let we=0;we<l;we++)if(-1===o.indexOf(we))return o.push(we),we;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();we.__bindingPointIndex=ye;const Ae=i.createBuffer(),We=we.__size,ot=we.usage;return i.bindBuffer(35345,Ae),i.bufferData(35345,We,ot),i.bindBuffer(35345,null),i.bindBufferBase(35345,ye,Ae),Ae}(we),r[we.id]=Ae,we.addEventListener("dispose",X)),n.updateUBOMapping(we,ye.program);const ot=t.render.frame;s[we.id]!==ot&&(function I(we){const Ae=we.uniforms,We=we.__cache;i.bindBuffer(35345,r[we.id]);for(let ot=0,Mt=Ae.length;ot<Mt;ot++){const Xe=Ae[ot];if(!0===T(Xe,ot,We)){const yt=Xe.value,tn=Xe.__offset;"number"==typeof yt?(Xe.__data[0]=yt,i.bufferSubData(35345,tn,Xe.__data)):(Xe.value.isMatrix3?(Xe.__data[0]=Xe.value.elements[0],Xe.__data[1]=Xe.value.elements[1],Xe.__data[2]=Xe.value.elements[2],Xe.__data[3]=Xe.value.elements[0],Xe.__data[4]=Xe.value.elements[3],Xe.__data[5]=Xe.value.elements[4],Xe.__data[6]=Xe.value.elements[5],Xe.__data[7]=Xe.value.elements[0],Xe.__data[8]=Xe.value.elements[6],Xe.__data[9]=Xe.value.elements[7],Xe.__data[10]=Xe.value.elements[8],Xe.__data[11]=Xe.value.elements[0]):yt.toArray(Xe.__data),i.bufferSubData(35345,tn,Xe.__data))}}i.bindBuffer(35345,null)}(we),s[we.id]=ot)},dispose:function ce(){for(const we in r)i.deleteBuffer(r[we]);o=[],r={},s={}}}}function wG(i={}){this.isWebGLRenderer=!0;const t=void 0!==i.canvas?i.canvas:function k0e(){const i=nA("canvas");return i.style.display="block",i}(),e=void 0!==i.context?i.context:null,n=void 0===i.depth||i.depth,r=void 0===i.stencil||i.stencil,s=void 0!==i.antialias&&i.antialias,o=void 0===i.premultipliedAlpha||i.premultipliedAlpha,l=void 0!==i.preserveDrawingBuffer&&i.preserveDrawingBuffer,u=void 0!==i.powerPreference?i.powerPreference:"default",p=void 0!==i.failIfMajorPerformanceCaveat&&i.failIfMajorPerformanceCaveat;let v;v=null!==e?e.getContextAttributes().alpha:void 0!==i.alpha&&i.alpha;let x=null,I=null;const T=[],F=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=O0,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const j=this;let X=!1,ce=0,we=0,ye=null,Ae=-1,We=null;const ot=new dl,Mt=new dl;let Xe=null,yt=t.width,tn=t.height,zn=1,Qn=null,Un=null;const An=new dl(0,0,yt,tn),Nn=new dl(0,0,yt,tn);let _n=!1;const Vn=new mP;let Fn=!1,bn=!1,Bn=null;const Wi=new po,wi=new Gi,er=new jt,cr={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Is(){return null===ye?zn:1}let hs,fs,Lr,Co,Vi,Ri,wr,ls,kr,go,Xs,Bs,Wl,Cl,rn,Nt,ai,lr,xr,zr,Qs,Hr,ki,Ms,Si=e;function _s(Xt,Kn){for(let vi=0;vi<Xt.length;vi++){const Li=t.getContext(Xt[vi],Kn);if(null!==Li)return Li}return null}try{const Xt={alpha:!0,depth:n,stencil:r,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:p};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r146"),t.addEventListener("webglcontextlost",Us,!1),t.addEventListener("webglcontextrestored",Ds,!1),t.addEventListener("webglcontextcreationerror",Aa,!1),null===Si){const Kn=["webgl2","webgl","experimental-webgl"];if(!0===j.isWebGL1Renderer&&Kn.shift(),Si=_s(Kn,Xt),null===Si)throw _s(Kn)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===Si.getShaderPrecisionFormat&&(Si.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Xt){throw console.error("THREE.WebGLRenderer: "+Xt.message),Xt}function Ys(){hs=new qye(Si),fs=new Uye(Si,hs,i),hs.init(fs),Hr=new E0e(Si,hs,fs),Lr=new I0e(Si,hs,fs),Co=new Kye,Vi=new f0e,Ri=new S0e(Si,hs,Lr,Vi,fs,Hr,Co),wr=new Gye(j),ls=new $ye(j),kr=new zme(Si,fs),ki=new zye(Si,hs,kr,fs),go=new Xye(Si,kr,Co,ki),Xs=new e_e(Si,go,kr,Co),xr=new Jye(Si,fs,Ri),Nt=new Hye(Vi),Bs=new h0e(j,wr,ls,hs,fs,ki,Nt),Wl=new P0e(j,Vi),Cl=new g0e,rn=new C0e(hs,fs),lr=new Bye(j,wr,ls,Lr,Xs,v,o),ai=new A0e(j,Xs,fs),Ms=new R0e(Si,Co,fs,Lr),zr=new Vye(Si,hs,Co,fs),Qs=new Yye(Si,hs,Co,fs),Co.programs=Bs.programs,j.capabilities=fs,j.extensions=hs,j.properties=Vi,j.renderLists=Cl,j.shadowMap=ai,j.state=Lr,j.info=Co}Ys();const ps=new L0e(j,Si);function Us(Xt){Xt.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),X=!0}function Ds(){console.log("THREE.WebGLRenderer: Context Restored."),X=!1;const Xt=Co.autoReset,Kn=ai.enabled,vi=ai.autoUpdate,Gn=ai.needsUpdate,Li=ai.type;Ys(),Co.autoReset=Xt,ai.enabled=Kn,ai.autoUpdate=vi,ai.needsUpdate=Gn,ai.type=Li}function Aa(Xt){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Xt.statusMessage)}function oc(Xt){const Kn=Xt.target;Kn.removeEventListener("dispose",oc),function wd(Xt){(function Tn(Xt){const Kn=Vi.get(Xt).programs;void 0!==Kn&&(Kn.forEach(function(vi){Bs.releaseProgram(vi)}),Xt.isShaderMaterial&&Bs.releaseShaderCache(Xt))})(Xt),Vi.remove(Xt)}(Kn)}this.xr=ps,this.getContext=function(){return Si},this.getContextAttributes=function(){return Si.getContextAttributes()},this.forceContextLoss=function(){const Xt=hs.get("WEBGL_lose_context");Xt&&Xt.loseContext()},this.forceContextRestore=function(){const Xt=hs.get("WEBGL_lose_context");Xt&&Xt.restoreContext()},this.getPixelRatio=function(){return zn},this.setPixelRatio=function(Xt){void 0!==Xt&&(zn=Xt,this.setSize(yt,tn,!1))},this.getSize=function(Xt){return Xt.set(yt,tn)},this.setSize=function(Xt,Kn,vi){ps.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(yt=Xt,tn=Kn,t.width=Math.floor(Xt*zn),t.height=Math.floor(Kn*zn),!1!==vi&&(t.style.width=Xt+"px",t.style.height=Kn+"px"),this.setViewport(0,0,Xt,Kn))},this.getDrawingBufferSize=function(Xt){return Xt.set(yt*zn,tn*zn).floor()},this.setDrawingBufferSize=function(Xt,Kn,vi){yt=Xt,tn=Kn,zn=vi,t.width=Math.floor(Xt*vi),t.height=Math.floor(Kn*vi),this.setViewport(0,0,Xt,Kn)},this.getCurrentViewport=function(Xt){return Xt.copy(ot)},this.getViewport=function(Xt){return Xt.copy(An)},this.setViewport=function(Xt,Kn,vi,Gn){Xt.isVector4?An.set(Xt.x,Xt.y,Xt.z,Xt.w):An.set(Xt,Kn,vi,Gn),Lr.viewport(ot.copy(An).multiplyScalar(zn).floor())},this.getScissor=function(Xt){return Xt.copy(Nn)},this.setScissor=function(Xt,Kn,vi,Gn){Xt.isVector4?Nn.set(Xt.x,Xt.y,Xt.z,Xt.w):Nn.set(Xt,Kn,vi,Gn),Lr.scissor(Mt.copy(Nn).multiplyScalar(zn).floor())},this.getScissorTest=function(){return _n},this.setScissorTest=function(Xt){Lr.setScissorTest(_n=Xt)},this.setOpaqueSort=function(Xt){Qn=Xt},this.setTransparentSort=function(Xt){Un=Xt},this.getClearColor=function(Xt){return Xt.copy(lr.getClearColor())},this.setClearColor=function(){lr.setClearColor.apply(lr,arguments)},this.getClearAlpha=function(){return lr.getClearAlpha()},this.setClearAlpha=function(){lr.setClearAlpha.apply(lr,arguments)},this.clear=function(Xt=!0,Kn=!0,vi=!0){let Gn=0;Xt&&(Gn|=16384),Kn&&(Gn|=256),vi&&(Gn|=1024),Si.clear(Gn)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Us,!1),t.removeEventListener("webglcontextrestored",Ds,!1),t.removeEventListener("webglcontextcreationerror",Aa,!1),Cl.dispose(),rn.dispose(),Vi.dispose(),wr.dispose(),ls.dispose(),Xs.dispose(),ki.dispose(),Ms.dispose(),Bs.dispose(),ps.dispose(),ps.removeEventListener("sessionstart",Yr),ps.removeEventListener("sessionend",bs),Bn&&(Bn.dispose(),Bn=null),Ga.stop()},this.renderBufferDirect=function(Xt,Kn,vi,Gn,Li,ks){null===Kn&&(Kn=cr);const ro=Li.isMesh&&Li.matrixWorld.determinant()<0,zo=function DEe(Xt,Kn,vi,Gn,Li){!0!==Kn.isScene&&(Kn=cr),Ri.resetTextureUnits();const ks=Kn.fog,zo=null===ye?j.outputEncoding:!0===ye.isXRRenderTarget?ye.texture.encoding:O0,Po=(Gn.isMeshStandardMaterial?ls:wr).get(Gn.envMap||(Gn.isMeshStandardMaterial?Kn.environment:null)),Wa=!0===Gn.vertexColors&&!!vi.attributes.color&&4===vi.attributes.color.itemSize,ea=!!Gn.normalMap&&!!vi.attributes.tangent,ga=!!vi.morphAttributes.position,Kc=!!vi.morphAttributes.normal,ab=!!vi.morphAttributes.color,rx=Gn.toneMapped?j.toneMapping:0,sx=vi.morphAttributes.position||vi.morphAttributes.normal||vi.morphAttributes.color,pv=void 0!==sx?sx.length:0,ja=Vi.get(Gn),ox=I.state.lights;!0!==Fn||!0!==bn&&Xt===We||Nt.setState(Gn,Xt,Xt===We&&Gn.id===Ae);let Du=!1;Gn.version===ja.__version?(ja.needsLights&&ja.lightsStateVersion!==ox.state.version||ja.outputEncoding!==zo||Li.isInstancedMesh&&!1===ja.instancing||!Li.isInstancedMesh&&!0===ja.instancing||Li.isSkinnedMesh&&!1===ja.skinning||!Li.isSkinnedMesh&&!0===ja.skinning||ja.envMap!==Po||!0===Gn.fog&&ja.fog!==ks||void 0!==ja.numClippingPlanes&&(ja.numClippingPlanes!==Nt.numPlanes||ja.numIntersection!==Nt.numIntersection)||ja.vertexAlphas!==Wa||ja.vertexTangents!==ea||ja.morphTargets!==ga||ja.morphNormals!==Kc||ja.morphColors!==ab||ja.toneMapping!==rx||!0===fs.isWebGL2&&ja.morphTargetsCount!==pv)&&(Du=!0):(Du=!0,ja.__version=Gn.version);let Eg=ja.currentProgram;!0===Du&&(Eg=Sg(Gn,Kn,Li));let P_=!1,TA=!1,FR=!1;const uf=Eg.getUniforms(),lb=ja.uniforms;if(Lr.useProgram(Eg.program)&&(P_=!0,TA=!0,FR=!0),Gn.id!==Ae&&(Ae=Gn.id,TA=!0),P_||We!==Xt){if(uf.setValue(Si,"projectionMatrix",Xt.projectionMatrix),fs.logarithmicDepthBuffer&&uf.setValue(Si,"logDepthBufFC",2/(Math.log(Xt.far+1)/Math.LN2)),We!==Xt&&(We=Xt,TA=!0,FR=!0),Gn.isShaderMaterial||Gn.isMeshPhongMaterial||Gn.isMeshToonMaterial||Gn.isMeshStandardMaterial||Gn.envMap){const Bp=uf.map.cameraPosition;void 0!==Bp&&Bp.setValue(Si,er.setFromMatrixPosition(Xt.matrixWorld))}(Gn.isMeshPhongMaterial||Gn.isMeshToonMaterial||Gn.isMeshLambertMaterial||Gn.isMeshBasicMaterial||Gn.isMeshStandardMaterial||Gn.isShaderMaterial)&&uf.setValue(Si,"isOrthographic",!0===Xt.isOrthographicCamera),(Gn.isMeshPhongMaterial||Gn.isMeshToonMaterial||Gn.isMeshLambertMaterial||Gn.isMeshBasicMaterial||Gn.isMeshStandardMaterial||Gn.isShaderMaterial||Gn.isShadowMaterial||Li.isSkinnedMesh)&&uf.setValue(Si,"viewMatrix",Xt.matrixWorldInverse)}if(Li.isSkinnedMesh){uf.setOptional(Si,Li,"bindMatrix"),uf.setOptional(Si,Li,"bindMatrixInverse");const Bp=Li.skeleton;Bp&&(fs.floatVertexTextures?(null===Bp.boneTexture&&Bp.computeBoneTexture(),uf.setValue(Si,"boneTexture",Bp.boneTexture,Ri),uf.setValue(Si,"boneTextureSize",Bp.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const NR=vi.morphAttributes;if((void 0!==NR.position||void 0!==NR.normal||void 0!==NR.color&&!0===fs.isWebGL2)&&xr.update(Li,vi,Gn,Eg),(TA||ja.receiveShadow!==Li.receiveShadow)&&(ja.receiveShadow=Li.receiveShadow,uf.setValue(Si,"receiveShadow",Li.receiveShadow)),Gn.isMeshGouraudMaterial&&null!==Gn.envMap&&(lb.envMap.value=Po,lb.flipEnvMap.value=Po.isCubeTexture&&!1===Po.isRenderTargetTexture?-1:1),TA&&(uf.setValue(Si,"toneMappingExposure",j.toneMappingExposure),ja.needsLights&&function LEe(Xt,Kn){Xt.ambientLightColor.needsUpdate=Kn,Xt.lightProbe.needsUpdate=Kn,Xt.directionalLights.needsUpdate=Kn,Xt.directionalLightShadows.needsUpdate=Kn,Xt.pointLights.needsUpdate=Kn,Xt.pointLightShadows.needsUpdate=Kn,Xt.spotLights.needsUpdate=Kn,Xt.spotLightShadows.needsUpdate=Kn,Xt.rectAreaLights.needsUpdate=Kn,Xt.hemisphereLights.needsUpdate=Kn}(lb,FR),ks&&!0===Gn.fog&&Wl.refreshFogUniforms(lb,ks),Wl.refreshMaterialUniforms(lb,Gn,zn,tn,Bn),uE.upload(Si,ja.uniformsList,lb,Ri)),Gn.isShaderMaterial&&!0===Gn.uniformsNeedUpdate&&(uE.upload(Si,ja.uniformsList,lb,Ri),Gn.uniformsNeedUpdate=!1),Gn.isSpriteMaterial&&uf.setValue(Si,"center",Li.center),uf.setValue(Si,"modelViewMatrix",Li.modelViewMatrix),uf.setValue(Si,"normalMatrix",Li.normalMatrix),uf.setValue(Si,"modelMatrix",Li.matrixWorld),Gn.isShaderMaterial||Gn.isRawShaderMaterial){const Bp=Gn.uniformsGroups;for(let BR=0,REe=Bp.length;BR<REe;BR++)if(fs.isWebGL2){const k6=Bp[BR];Ms.update(k6,Eg),Ms.bind(k6,Eg)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Eg}(Xt,Kn,vi,Gn,Li);Lr.setMaterial(Gn,ro);let Po=vi.index;const Wa=vi.attributes.position;if(null===Po){if(void 0===Wa||0===Wa.count)return}else if(0===Po.count)return;let ea=1;!0===Gn.wireframe&&(Po=go.getWireframeAttribute(vi),ea=2),ki.setup(Li,Gn,zo,vi,Po);let ga,Kc=zr;null!==Po&&(ga=kr.get(Po),Kc=Qs,Kc.setIndex(ga));const ab=null!==Po?Po.count:Wa.count,rx=vi.drawRange.start*ea,sx=vi.drawRange.count*ea,pv=null!==ks?ks.start*ea:0,ja=null!==ks?ks.count*ea:1/0,ox=Math.max(rx,pv),Du=Math.min(ab,rx+sx,pv+ja)-1,Eg=Math.max(0,Du-ox+1);if(0!==Eg){if(Li.isMesh)!0===Gn.wireframe?(Lr.setLineWidth(Gn.wireframeLinewidth*Is()),Kc.setMode(1)):Kc.setMode(4);else if(Li.isLine){let P_=Gn.linewidth;void 0===P_&&(P_=1),Lr.setLineWidth(P_*Is()),Kc.setMode(Li.isLineSegments?1:Li.isLineLoop?2:3)}else Li.isPoints?Kc.setMode(0):Li.isSprite&&Kc.setMode(4);if(Li.isInstancedMesh)Kc.renderInstances(ox,Eg,Li.count);else if(vi.isInstancedBufferGeometry){const P_=Math.min(vi.instanceCount,vi._maxInstanceCount);Kc.renderInstances(ox,Eg,P_)}else Kc.render(ox,Eg)}},this.compile=function(Xt,Kn){function vi(Gn,Li,ks){!0===Gn.transparent&&2===Gn.side?(Gn.side=1,Gn.needsUpdate=!0,Sg(Gn,Li,ks),Gn.side=0,Gn.needsUpdate=!0,Sg(Gn,Li,ks),Gn.side=2):Sg(Gn,Li,ks)}I=rn.get(Xt),I.init(),F.push(I),Xt.traverseVisible(function(Gn){Gn.isLight&&Gn.layers.test(Kn.layers)&&(I.pushLight(Gn),Gn.castShadow&&I.pushShadow(Gn))}),I.setupLights(j.physicallyCorrectLights),Xt.traverse(function(Gn){const Li=Gn.material;if(Li)if(Array.isArray(Li))for(let ks=0;ks<Li.length;ks++)vi(Li[ks],Xt,Gn);else vi(Li,Xt,Gn)}),F.pop(),I=null};let Ci=null;function Yr(){Ga.stop()}function bs(){Ga.start()}const Ga=new X5;function Ad(Xt,Kn,vi,Gn){if(!1===Xt.visible)return;if(Xt.layers.test(Kn.layers))if(Xt.isGroup)vi=Xt.renderOrder;else if(Xt.isLOD)!0===Xt.autoUpdate&&Xt.update(Kn);else if(Xt.isLight)I.pushLight(Xt),Xt.castShadow&&I.pushShadow(Xt);else if(Xt.isSprite){if(!Xt.frustumCulled||Vn.intersectsSprite(Xt)){Gn&&er.setFromMatrixPosition(Xt.matrixWorld).applyMatrix4(Wi);const ro=Xs.update(Xt),zo=Xt.material;zo.visible&&x.push(Xt,ro,zo,vi,er.z,null)}}else if((Xt.isMesh||Xt.isLine||Xt.isPoints)&&(Xt.isSkinnedMesh&&Xt.skeleton.frame!==Co.render.frame&&(Xt.skeleton.update(),Xt.skeleton.frame=Co.render.frame),!Xt.frustumCulled||Vn.intersectsObject(Xt))){Gn&&er.setFromMatrixPosition(Xt.matrixWorld).applyMatrix4(Wi);const ro=Xs.update(Xt),zo=Xt.material;if(Array.isArray(zo)){const Po=ro.groups;for(let Wa=0,ea=Po.length;Wa<ea;Wa++){const ga=Po[Wa],Kc=zo[ga.materialIndex];Kc&&Kc.visible&&x.push(Xt,ro,Kc,vi,er.z,ga)}}else zo.visible&&x.push(Xt,ro,zo,vi,er.z,null)}const ks=Xt.children;for(let ro=0,zo=ks.length;ro<zo;ro++)Ad(ks[ro],Kn,vi,Gn)}function Dh(Xt,Kn,vi,Gn){const Li=Xt.opaque,ks=Xt.transmissive,ro=Xt.transparent;I.setupLightsView(vi),ks.length>0&&function ob(Xt,Kn,vi){const Gn=fs.isWebGL2;null===Bn&&(Bn=new V0(1,1,{generateMipmaps:!0,type:hs.has("EXT_color_buffer_half_float")?Jw:P0,minFilter:1008,samples:Gn&&!0===s?4:0})),j.getDrawingBufferSize(wi),Gn?Bn.setSize(wi.x,wi.y):Bn.setSize(zS(wi.x),zS(wi.y));const Li=j.getRenderTarget();j.setRenderTarget(Bn),j.clear();const ks=j.toneMapping;j.toneMapping=0,ac(Xt,Kn,vi),j.toneMapping=ks,Ri.updateMultisampleRenderTarget(Bn),Ri.updateRenderTargetMipmap(Bn),j.setRenderTarget(Li)}(Li,Kn,vi),Gn&&Lr.viewport(ot.copy(Gn)),Li.length>0&&ac(Li,Kn,vi),ks.length>0&&ac(ks,Kn,vi),ro.length>0&&ac(ro,Kn,vi),Lr.buffers.depth.setTest(!0),Lr.buffers.depth.setMask(!0),Lr.buffers.color.setMask(!0),Lr.setPolygonOffset(!1)}function ac(Xt,Kn,vi){const Gn=!0===Kn.isScene?Kn.overrideMaterial:null;for(let Li=0,ks=Xt.length;Li<ks;Li++){const ro=Xt[Li],zo=ro.object,Po=ro.geometry,Wa=null===Gn?ro.material:Gn,ea=ro.group;zo.layers.test(vi.layers)&&Iy(zo,Kn,vi,Po,Wa,ea)}}function Iy(Xt,Kn,vi,Gn,Li,ks){Xt.onBeforeRender(j,Kn,vi,Gn,Li,ks),Xt.modelViewMatrix.multiplyMatrices(vi.matrixWorldInverse,Xt.matrixWorld),Xt.normalMatrix.getNormalMatrix(Xt.modelViewMatrix),Li.onBeforeRender(j,Kn,vi,Gn,Xt,ks),!0===Li.transparent&&2===Li.side?(Li.side=1,Li.needsUpdate=!0,j.renderBufferDirect(vi,Kn,Gn,Li,Xt,ks),Li.side=0,Li.needsUpdate=!0,j.renderBufferDirect(vi,Kn,Gn,Li,Xt,ks),Li.side=2):j.renderBufferDirect(vi,Kn,Gn,Li,Xt,ks),Xt.onAfterRender(j,Kn,vi,Gn,Li,ks)}function Sg(Xt,Kn,vi){!0!==Kn.isScene&&(Kn=cr);const Gn=Vi.get(Xt),Li=I.state.lights,ro=Li.state.version,zo=Bs.getParameters(Xt,Li.state,I.state.shadowsArray,Kn,vi),Po=Bs.getProgramCacheKey(zo);let Wa=Gn.programs;Gn.environment=Xt.isMeshStandardMaterial?Kn.environment:null,Gn.fog=Kn.fog,Gn.envMap=(Xt.isMeshStandardMaterial?ls:wr).get(Xt.envMap||Gn.environment),void 0===Wa&&(Xt.addEventListener("dispose",oc),Wa=new Map,Gn.programs=Wa);let ea=Wa.get(Po);if(void 0!==ea){if(Gn.currentProgram===ea&&Gn.lightsStateVersion===ro)return R6(Xt,zo),ea}else zo.uniforms=Bs.getUniforms(Xt),Xt.onBuild(vi,zo,j),Xt.onBeforeCompile(zo,j),ea=Bs.acquireProgram(zo,Po),Wa.set(Po,ea),Gn.uniforms=zo.uniforms;const ga=Gn.uniforms;(!Xt.isShaderMaterial&&!Xt.isRawShaderMaterial||!0===Xt.clipping)&&(ga.clippingPlanes=Nt.uniform),R6(Xt,zo),Gn.needsLights=function PEe(Xt){return Xt.isMeshLambertMaterial||Xt.isMeshToonMaterial||Xt.isMeshPhongMaterial||Xt.isMeshStandardMaterial||Xt.isShadowMaterial||Xt.isShaderMaterial&&!0===Xt.lights}(Xt),Gn.lightsStateVersion=ro,Gn.needsLights&&(ga.ambientLightColor.value=Li.state.ambient,ga.lightProbe.value=Li.state.probe,ga.directionalLights.value=Li.state.directional,ga.directionalLightShadows.value=Li.state.directionalShadow,ga.spotLights.value=Li.state.spot,ga.spotLightShadows.value=Li.state.spotShadow,ga.rectAreaLights.value=Li.state.rectArea,ga.ltc_1.value=Li.state.rectAreaLTC1,ga.ltc_2.value=Li.state.rectAreaLTC2,ga.pointLights.value=Li.state.point,ga.pointLightShadows.value=Li.state.pointShadow,ga.hemisphereLights.value=Li.state.hemi,ga.directionalShadowMap.value=Li.state.directionalShadowMap,ga.directionalShadowMatrix.value=Li.state.directionalShadowMatrix,ga.spotShadowMap.value=Li.state.spotShadowMap,ga.spotLightMatrix.value=Li.state.spotLightMatrix,ga.spotLightMap.value=Li.state.spotLightMap,ga.pointShadowMap.value=Li.state.pointShadowMap,ga.pointShadowMatrix.value=Li.state.pointShadowMatrix);const Kc=ea.getUniforms(),ab=uE.seqWithValue(Kc.seq,ga);return Gn.currentProgram=ea,Gn.uniformsList=ab,ea}function R6(Xt,Kn){const vi=Vi.get(Xt);vi.outputEncoding=Kn.outputEncoding,vi.instancing=Kn.instancing,vi.skinning=Kn.skinning,vi.morphTargets=Kn.morphTargets,vi.morphNormals=Kn.morphNormals,vi.morphColors=Kn.morphColors,vi.morphTargetsCount=Kn.morphTargetsCount,vi.numClippingPlanes=Kn.numClippingPlanes,vi.numIntersection=Kn.numClipIntersection,vi.vertexAlphas=Kn.vertexAlphas,vi.vertexTangents=Kn.vertexTangents,vi.toneMapping=Kn.toneMapping}Ga.setAnimationLoop(function ar(Xt){Ci&&Ci(Xt)}),typeof self<"u"&&Ga.setContext(self),this.setAnimationLoop=function(Xt){Ci=Xt,ps.setAnimationLoop(Xt),null===Xt?Ga.stop():Ga.start()},ps.addEventListener("sessionstart",Yr),ps.addEventListener("sessionend",bs),this.render=function(Xt,Kn){if(void 0===Kn||!0===Kn.isCamera){if(!0!==X){if(!0===Xt.matrixWorldAutoUpdate&&Xt.updateMatrixWorld(),null===Kn.parent&&!0===Kn.matrixWorldAutoUpdate&&Kn.updateMatrixWorld(),!0===ps.enabled&&!0===ps.isPresenting&&(!0===ps.cameraAutoUpdate&&ps.updateCamera(Kn),Kn=ps.getCamera()),!0===Xt.isScene&&Xt.onBeforeRender(j,Xt,Kn,ye),I=rn.get(Xt,F.length),I.init(),F.push(I),Wi.multiplyMatrices(Kn.projectionMatrix,Kn.matrixWorldInverse),Vn.setFromProjectionMatrix(Wi),bn=this.localClippingEnabled,Fn=Nt.init(this.clippingPlanes,bn,Kn),x=Cl.get(Xt,T.length),x.init(),T.push(x),Ad(Xt,Kn,0,j.sortObjects),x.finish(),!0===j.sortObjects&&x.sort(Qn,Un),!0===Fn&&Nt.beginShadows(),ai.render(I.state.shadowsArray,Xt,Kn),!0===Fn&&Nt.endShadows(),!0===this.info.autoReset&&this.info.reset(),lr.render(x,Xt),I.setupLights(j.physicallyCorrectLights),Kn.isArrayCamera){const Gn=Kn.cameras;for(let Li=0,ks=Gn.length;Li<ks;Li++){const ro=Gn[Li];Dh(x,Xt,ro,ro.viewport)}}else Dh(x,Xt,Kn);null!==ye&&(Ri.updateMultisampleRenderTarget(ye),Ri.updateRenderTargetMipmap(ye)),!0===Xt.isScene&&Xt.onAfterRender(j,Xt,Kn),ki.resetDefaultState(),Ae=-1,We=null,F.pop(),I=F.length>0?F[F.length-1]:null,T.pop(),x=T.length>0?T[T.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return ce},this.getActiveMipmapLevel=function(){return we},this.getRenderTarget=function(){return ye},this.setRenderTargetTextures=function(Xt,Kn,vi){Vi.get(Xt.texture).__webglTexture=Kn,Vi.get(Xt.depthTexture).__webglTexture=vi;const Gn=Vi.get(Xt);Gn.__hasExternalTextures=!0,Gn.__hasExternalTextures&&(Gn.__autoAllocateDepthBuffer=void 0===vi,Gn.__autoAllocateDepthBuffer||!0===hs.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Gn.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Xt,Kn){const vi=Vi.get(Xt);vi.__webglFramebuffer=Kn,vi.__useDefaultFramebuffer=void 0===Kn},this.setRenderTarget=function(Xt,Kn=0,vi=0){ye=Xt,ce=Kn,we=vi;let Gn=!0,Li=null,ks=!1,ro=!1;if(Xt){const Po=Vi.get(Xt);void 0!==Po.__useDefaultFramebuffer?(Lr.bindFramebuffer(36160,null),Gn=!1):void 0===Po.__webglFramebuffer?Ri.setupRenderTarget(Xt):Po.__hasExternalTextures&&Ri.rebindTextures(Xt,Vi.get(Xt.texture).__webglTexture,Vi.get(Xt.depthTexture).__webglTexture);const Wa=Xt.texture;(Wa.isData3DTexture||Wa.isDataArrayTexture||Wa.isCompressedArrayTexture)&&(ro=!0);const ea=Vi.get(Xt).__webglFramebuffer;Xt.isWebGLCubeRenderTarget?(Li=ea[Kn],ks=!0):Li=fs.isWebGL2&&Xt.samples>0&&!1===Ri.useMultisampledRTT(Xt)?Vi.get(Xt).__webglMultisampledFramebuffer:ea,ot.copy(Xt.viewport),Mt.copy(Xt.scissor),Xe=Xt.scissorTest}else ot.copy(An).multiplyScalar(zn).floor(),Mt.copy(Nn).multiplyScalar(zn).floor(),Xe=_n;if(Lr.bindFramebuffer(36160,Li)&&fs.drawBuffers&&Gn&&Lr.drawBuffers(Xt,Li),Lr.viewport(ot),Lr.scissor(Mt),Lr.setScissorTest(Xe),ks){const Po=Vi.get(Xt.texture);Si.framebufferTexture2D(36160,36064,34069+Kn,Po.__webglTexture,vi)}else if(ro){const Po=Vi.get(Xt.texture);Si.framebufferTextureLayer(36160,36064,Po.__webglTexture,vi||0,Kn||0)}Ae=-1},this.readRenderTargetPixels=function(Xt,Kn,vi,Gn,Li,ks,ro){if(!Xt||!Xt.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let zo=Vi.get(Xt).__webglFramebuffer;if(Xt.isWebGLCubeRenderTarget&&void 0!==ro&&(zo=zo[ro]),zo){Lr.bindFramebuffer(36160,zo);try{const Po=Xt.texture,Wa=Po.format,ea=Po.type;if(Wa!==Cg&&Hr.convert(Wa)!==Si.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const ga=ea===Jw&&(hs.has("EXT_color_buffer_half_float")||fs.isWebGL2&&hs.has("EXT_color_buffer_float"));if(!(ea===P0||Hr.convert(ea)===Si.getParameter(35738)||ea===m_&&(fs.isWebGL2||hs.has("OES_texture_float")||hs.has("WEBGL_color_buffer_float"))||ga))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Kn>=0&&Kn<=Xt.width-Gn&&vi>=0&&vi<=Xt.height-Li&&Si.readPixels(Kn,vi,Gn,Li,Hr.convert(Wa),Hr.convert(ea),ks)}finally{const Po=null!==ye?Vi.get(ye).__webglFramebuffer:null;Lr.bindFramebuffer(36160,Po)}}},this.copyFramebufferToTexture=function(Xt,Kn,vi=0){const Gn=Math.pow(2,-vi),Li=Math.floor(Kn.image.width*Gn),ks=Math.floor(Kn.image.height*Gn);Ri.setTexture2D(Kn,0),Si.copyTexSubImage2D(3553,vi,0,0,Xt.x,Xt.y,Li,ks),Lr.unbindTexture()},this.copyTextureToTexture=function(Xt,Kn,vi,Gn=0){const Li=Kn.image.width,ks=Kn.image.height,ro=Hr.convert(vi.format),zo=Hr.convert(vi.type);Ri.setTexture2D(vi,0),Si.pixelStorei(37440,vi.flipY),Si.pixelStorei(37441,vi.premultiplyAlpha),Si.pixelStorei(3317,vi.unpackAlignment),Kn.isDataTexture?Si.texSubImage2D(3553,Gn,Xt.x,Xt.y,Li,ks,ro,zo,Kn.image.data):Kn.isCompressedTexture?Si.compressedTexSubImage2D(3553,Gn,Xt.x,Xt.y,Kn.mipmaps[0].width,Kn.mipmaps[0].height,ro,Kn.mipmaps[0].data):Si.texSubImage2D(3553,Gn,Xt.x,Xt.y,ro,zo,Kn.image),0===Gn&&vi.generateMipmaps&&Si.generateMipmap(3553),Lr.unbindTexture()},this.copyTextureToTexture3D=function(Xt,Kn,vi,Gn,Li=0){if(j.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const ks=Xt.max.x-Xt.min.x+1,ro=Xt.max.y-Xt.min.y+1,zo=Xt.max.z-Xt.min.z+1,Po=Hr.convert(Gn.format),Wa=Hr.convert(Gn.type);let ea;if(Gn.isData3DTexture)Ri.setTexture3D(Gn,0),ea=32879;else{if(!Gn.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Ri.setTexture2DArray(Gn,0),ea=35866}Si.pixelStorei(37440,Gn.flipY),Si.pixelStorei(37441,Gn.premultiplyAlpha),Si.pixelStorei(3317,Gn.unpackAlignment);const ga=Si.getParameter(3314),Kc=Si.getParameter(32878),ab=Si.getParameter(3316),rx=Si.getParameter(3315),sx=Si.getParameter(32877),pv=vi.isCompressedTexture?vi.mipmaps[0]:vi.image;Si.pixelStorei(3314,pv.width),Si.pixelStorei(32878,pv.height),Si.pixelStorei(3316,Xt.min.x),Si.pixelStorei(3315,Xt.min.y),Si.pixelStorei(32877,Xt.min.z),vi.isDataTexture||vi.isData3DTexture?Si.texSubImage3D(ea,Li,Kn.x,Kn.y,Kn.z,ks,ro,zo,Po,Wa,pv.data):vi.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Si.compressedTexSubImage3D(ea,Li,Kn.x,Kn.y,Kn.z,ks,ro,zo,Po,pv.data)):Si.texSubImage3D(ea,Li,Kn.x,Kn.y,Kn.z,ks,ro,zo,Po,Wa,pv),Si.pixelStorei(3314,ga),Si.pixelStorei(32878,Kc),Si.pixelStorei(3316,ab),Si.pixelStorei(3315,rx),Si.pixelStorei(32877,sx),0===Li&&Gn.generateMipmaps&&Si.generateMipmap(ea),Lr.unbindTexture()},this.initTexture=function(Xt){Xt.isCubeTexture?Ri.setTextureCube(Xt,0):Xt.isData3DTexture?Ri.setTexture3D(Xt,0):Xt.isDataArrayTexture||Xt.isCompressedArrayTexture?Ri.setTexture2DArray(Xt,0):Ri.setTexture2D(Xt,0),Lr.unbindTexture()},this.resetState=function(){ce=0,we=0,ye=null,Lr.reset(),ki.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(class O0e extends wG{}).prototype.isWebGL1Renderer=!0;class AG extends Vf{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.backgroundBlurriness=this.backgroundBlurriness),e}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(t){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=t}}class Uf extends W0{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Jr(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const zG=new jt,VG=new jt,UG=new po,TP=new qS,mE=new LC;class pA extends Vf{constructor(t=new Bo,e=new Uf){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,n=[0];for(let r=1,s=e.count;r<s;r++)zG.fromBufferAttribute(e,r-1),VG.fromBufferAttribute(e,r),n[r]=n[r-1],n[r]+=zG.distanceTo(VG);t.setAttribute("lineDistance",new ss(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){const n=this.geometry,r=this.matrixWorld,s=t.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),mE.copy(n.boundingSphere),mE.applyMatrix4(r),mE.radius+=s,!1===t.ray.intersectsSphere(mE))return;UG.copy(r).invert(),TP.copy(t.ray).applyMatrix4(UG);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,p=new jt,v=new jt,x=new jt,I=new jt,T=this.isLineSegments?2:1,F=n.index,X=n.attributes.position;if(null!==F)for(let ye=Math.max(0,o.start),Ae=Math.min(F.count,o.start+o.count)-1;ye<Ae;ye+=T){const We=F.getX(ye),ot=F.getX(ye+1);if(p.fromBufferAttribute(X,We),v.fromBufferAttribute(X,ot),TP.distanceSqToSegment(p,v,I,x)>u)continue;I.applyMatrix4(this.matrixWorld);const Xe=t.ray.origin.distanceTo(I);Xe<t.near||Xe>t.far||e.push({distance:Xe,point:x.clone().applyMatrix4(this.matrixWorld),index:ye,face:null,faceIndex:null,object:this})}else for(let ye=Math.max(0,o.start),Ae=Math.min(X.count,o.start+o.count)-1;ye<Ae;ye+=T){if(p.fromBufferAttribute(X,ye),v.fromBufferAttribute(X,ye+1),TP.distanceSqToSegment(p,v,I,x)>u)continue;I.applyMatrix4(this.matrixWorld);const ot=t.ray.origin.distanceTo(I);ot<t.near||ot>t.far||e.push({distance:ot,point:x.clone().applyMatrix4(this.matrixWorld),index:ye,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const r=e[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}class dv{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)}getPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}getSpacedPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,r=this.getPoint(0),s=0;e.push(0);for(let o=1;o<=t;o++)n=this.getPoint(o/t),s+=n.distanceTo(r),e.push(s),r=n;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){const n=this.getLengths();let r=0;const s=n.length;let o;o=e||t*n[s-1];let p,l=0,u=s-1;for(;l<=u;)if(r=Math.floor(l+(u-l)/2),p=n[r]-o,p<0)l=r+1;else{if(!(p>0)){u=r;break}u=r-1}if(r=u,n[r]===o)return r/(s-1);const v=n[r];return(r+(o-v)/(n[r+1]-v))/(s-1)}getTangent(t,e){let r=t-1e-4,s=t+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),l=this.getPoint(s),u=e||(o.isVector2?new Gi:new jt);return u.copy(l).sub(o).normalize(),u}getTangentAt(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)}computeFrenetFrames(t,e){const n=new jt,r=[],s=[],o=[],l=new jt,u=new po;for(let T=0;T<=t;T++)r[T]=this.getTangentAt(T/t,new jt);s[0]=new jt,o[0]=new jt;let p=Number.MAX_VALUE;const v=Math.abs(r[0].x),x=Math.abs(r[0].y),I=Math.abs(r[0].z);v<=p&&(p=v,n.set(1,0,0)),x<=p&&(p=x,n.set(0,1,0)),I<=p&&n.set(0,0,1),l.crossVectors(r[0],n).normalize(),s[0].crossVectors(r[0],l),o[0].crossVectors(r[0],s[0]);for(let T=1;T<=t;T++){if(s[T]=s[T-1].clone(),o[T]=o[T-1].clone(),l.crossVectors(r[T-1],r[T]),l.length()>Number.EPSILON){l.normalize();const F=Math.acos(su(r[T-1].dot(r[T]),-1,1));s[T].applyMatrix4(u.makeRotationAxis(l,F))}o[T].crossVectors(r[T],s[T])}if(!0===e){let T=Math.acos(su(s[0].dot(s[t]),-1,1));T/=t,r[0].dot(l.crossVectors(s[0],s[t]))>0&&(T=-T);for(let F=1;F<=t;F++)s[F].applyMatrix4(u.makeRotationAxis(r[F],T*F)),o[F].crossVectors(r[F],s[F])}return{tangents:r,normals:s,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class DP extends dv{constructor(t=0,e=0,n=1,r=1,s=0,o=2*Math.PI,l=!1,u=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=l,this.aRotation=u}getPoint(t,e){const n=e||new Gi,r=2*Math.PI;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(s=o?0:r),!0===this.aClockwise&&!o&&(s===r?s=-r:s-=r);const l=this.aStartAngle+t*s;let u=this.aX+this.xRadius*Math.cos(l),p=this.aY+this.yRadius*Math.sin(l);if(0!==this.aRotation){const v=Math.cos(this.aRotation),x=Math.sin(this.aRotation),I=u-this.aX,T=p-this.aY;u=I*v-T*x+this.aX,p=I*x+T*v+this.aY}return n.set(u,p)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}function LP(){let i=0,t=0,e=0,n=0;function r(s,o,l,u){i=s,t=l,e=-3*s+3*o-2*l-u,n=2*s-2*o+l+u}return{initCatmullRom:function(s,o,l,u,p){r(o,l,p*(l-s),p*(u-o))},initNonuniformCatmullRom:function(s,o,l,u,p,v,x){let I=(o-s)/p-(l-s)/(p+v)+(l-o)/v,T=(l-o)/v-(u-o)/(v+x)+(u-l)/x;I*=v,T*=v,r(o,l,I,T)},calc:function(s){const o=s*s;return i+t*s+e*o+n*(o*s)}}}const _E=new jt,PP=new LP,RP=new LP,kP=new LP;function XG(i,t,e,n,r){const s=.5*(n-t),o=.5*(r-e),l=i*i;return(2*e-2*n+s+o)*(i*l)+(-3*e+3*n-2*s-o)*l+s*i+e}function gA(i,t,e,n){return function X0e(i,t){const e=1-i;return e*e*t}(i,t)+function Y0e(i,t){return 2*(1-i)*i*t}(i,e)+function K0e(i,t){return i*i*t}(i,n)}function mA(i,t,e,n,r){return function Z0e(i,t){const e=1-i;return e*e*e*t}(i,t)+function Q0e(i,t){const e=1-i;return 3*e*e*i*t}(i,e)+function J0e(i,t){return 3*(1-i)*i*i*t}(i,n)+function ebe(i,t){return i*i*i*t}(i,r)}class YG extends dv{constructor(t=new Gi,e=new Gi,n=new Gi,r=new Gi){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=r}getPoint(t,e=new Gi){const n=e,r=this.v0,s=this.v1,o=this.v2,l=this.v3;return n.set(mA(t,r.x,s.x,o.x,l.x),mA(t,r.y,s.y,o.y,l.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class OP extends dv{constructor(t=new Gi,e=new Gi){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new Gi){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e){const n=e||new Gi;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class KG extends dv{constructor(t=new Gi,e=new Gi,n=new Gi){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new Gi){const n=e,r=this.v0,s=this.v1,o=this.v2;return n.set(gA(t,r.x,s.x,o.x),gA(t,r.y,s.y,o.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class QG extends dv{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,e=new Gi){const n=e,r=this.points,s=(r.length-1)*t,o=Math.floor(s),l=s-o,u=r[0===o?o:o-1],p=r[o],v=r[o>r.length-2?r.length-1:o+1],x=r[o>r.length-3?r.length-1:o+2];return n.set(XG(l,u.x,p.x,v.x,x.x),XG(l,u.y,p.y,v.y,x.y)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++)this.points.push(t.points[e].clone());return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++)t.points.push(this.points[e].toArray());return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const r=t.points[e];this.points.push((new Gi).fromArray(r))}return this}}var FP=Object.freeze({__proto__:null,ArcCurve:class $0e extends DP{constructor(t,e,n,r,s,o){super(t,e,n,n,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}},CatmullRomCurve3:class q0e extends dv{constructor(t=[],e=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=r}getPoint(t,e=new jt){const n=e,r=this.points,s=r.length,o=(s-(this.closed?0:1))*t;let p,v,l=Math.floor(o),u=o-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/s)+1)*s:0===u&&l===s-1&&(l=s-2,u=1),this.closed||l>0?p=r[(l-1)%s]:(_E.subVectors(r[0],r[1]).add(r[0]),p=_E);const x=r[l%s],I=r[(l+1)%s];if(this.closed||l+2<s?v=r[(l+2)%s]:(_E.subVectors(r[s-1],r[s-2]).add(r[s-1]),v=_E),"centripetal"===this.curveType||"chordal"===this.curveType){const T="chordal"===this.curveType?.5:.25;let F=Math.pow(p.distanceToSquared(x),T),j=Math.pow(x.distanceToSquared(I),T),X=Math.pow(I.distanceToSquared(v),T);j<1e-4&&(j=1),F<1e-4&&(F=j),X<1e-4&&(X=j),PP.initNonuniformCatmullRom(p.x,x.x,I.x,v.x,F,j,X),RP.initNonuniformCatmullRom(p.y,x.y,I.y,v.y,F,j,X),kP.initNonuniformCatmullRom(p.z,x.z,I.z,v.z,F,j,X)}else"catmullrom"===this.curveType&&(PP.initCatmullRom(p.x,x.x,I.x,v.x,this.tension),RP.initCatmullRom(p.y,x.y,I.y,v.y,this.tension),kP.initCatmullRom(p.z,x.z,I.z,v.z,this.tension));return n.set(PP.calc(u),RP.calc(u),kP.calc(u)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++)this.points.push(t.points[e].clone());return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++)t.points.push(this.points[e].toArray());return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const r=t.points[e];this.points.push((new jt).fromArray(r))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}},CubicBezierCurve:YG,CubicBezierCurve3:class tbe extends dv{constructor(t=new jt,e=new jt,n=new jt,r=new jt){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=r}getPoint(t,e=new jt){const n=e,r=this.v0,s=this.v1,o=this.v2,l=this.v3;return n.set(mA(t,r.x,s.x,o.x,l.x),mA(t,r.y,s.y,o.y,l.y),mA(t,r.z,s.z,o.z,l.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}},EllipseCurve:DP,LineCurve:OP,LineCurve3:class nbe extends dv{constructor(t=new jt,e=new jt){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t,e=new jt){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},QuadraticBezierCurve:KG,QuadraticBezierCurve3:class ZG extends dv{constructor(t=new jt,e=new jt,n=new jt){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new jt){const n=e,r=this.v0,s=this.v1,o=this.v2;return n.set(gA(t,r.x,s.x,o.x),gA(t,r.y,s.y,o.y),gA(t,r.z,s.z,o.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},SplineCurve:QG});class ibe extends dv{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new OP(e,t))}getPoint(t,e){const n=t*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=n){const o=r[s]-n,l=this.curves[s],u=l.getLength();return l.getPointAt(0===u?0:1-o/u,e)}s++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let n=0,r=this.curves.length;n<r;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let n;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],u=o.getPoints(o.isEllipseCurve?2*t:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?t*o.points.length:t);for(let p=0;p<u.length;p++){const v=u[p];n&&n.equals(v)||(e.push(v),n=v)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++)this.curves.push(t.curves[e].clone());return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++)t.curves.push(this.curves[e].toJSON());return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const r=t.curves[e];this.curves.push((new FP[r.type]).fromJSON(r))}return this}}class bE extends ibe{constructor(t){super(),this.type="Path",this.currentPoint=new Gi,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const n=new OP(this.currentPoint.clone(),new Gi(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,n,r){const s=new KG(this.currentPoint.clone(),new Gi(t,e),new Gi(n,r));return this.curves.push(s),this.currentPoint.set(n,r),this}bezierCurveTo(t,e,n,r,s,o){const l=new YG(this.currentPoint.clone(),new Gi(t,e),new Gi(n,r),new Gi(s,o));return this.curves.push(l),this.currentPoint.set(s,o),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),n=new QG(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,n,r,s,o){return this.absarc(t+this.currentPoint.x,e+this.currentPoint.y,n,r,s,o),this}absarc(t,e,n,r,s,o){return this.absellipse(t,e,n,n,r,s,o),this}ellipse(t,e,n,r,s,o,l,u){return this.absellipse(t+this.currentPoint.x,e+this.currentPoint.y,n,r,s,o,l,u),this}absellipse(t,e,n,r,s,o,l,u){const p=new DP(t,e,n,r,s,o,l,u);if(this.curves.length>0){const x=p.getPoint(0);x.equals(this.currentPoint)||this.lineTo(x.x,x.y)}this.curves.push(p);const v=p.getPoint(1);return this.currentPoint.copy(v),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class ZC extends bE{constructor(t){super(t),this.uuid=Lp(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let n=0,r=this.holes.length;n<r;n++)e[n]=this.holes[n].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,n=t.holes.length;e<n;e++)this.holes.push(t.holes[e].clone());return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,n=this.holes.length;e<n;e++)t.holes.push(this.holes[e].toJSON());return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const r=t.holes[e];this.holes.push((new bE).fromJSON(r))}return this}}function JG(i,t,e,n,r){let s,o;if(r===function Cbe(i,t,e,n){let r=0;for(let s=t,o=e-n;s<e;s+=n)r+=(i[o]-i[s])*(i[s+1]+i[o+1]),o=s;return r}(i,t,e,n)>0)for(s=t;s<e;s+=n)o=n8(s,i[s],i[s+1],o);else for(s=e-n;s>=t;s-=n)o=n8(s,i[s],i[s+1],o);return o&&IE(o,o.next)&&(bA(o),o=o.next),o}function K0(i,t){if(!i)return i;t||(t=i);let n,e=i;do{if(n=!1,e.steiner||!IE(e,e.next)&&0!==xc(e.prev,e,e.next))e=e.next;else{if(bA(e),e=t=e.prev,e===e.next)break;n=!0}}while(n||e!==t);return t}function yA(i,t,e,n,r,s,o){if(!i)return;!o&&s&&function gbe(i,t,e,n){let r=i;do{0===r.z&&(r.z=HP(r.x,r.y,t,e,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==i);r.prevZ.nextZ=null,r.prevZ=null,function mbe(i){let t,e,n,r,s,o,l,u,p=1;do{for(e=i,i=null,s=null,o=0;e;){for(o++,n=e,l=0,t=0;t<p&&(l++,n=n.nextZ,n);t++);for(u=p;l>0||u>0&&n;)0!==l&&(0===u||!n||e.z<=n.z)?(r=e,e=e.nextZ,l--):(r=n,n=n.nextZ,u--),s?s.nextZ=r:i=r,r.prevZ=s,s=r;e=n}s.nextZ=null,p*=2}while(o>1)}(r)}(i,n,r,s);let u,p,l=i;for(;i.prev!==i.next;)if(u=i.prev,p=i.next,s?abe(i,n,r,s):obe(i))t.push(u.i/e|0),t.push(i.i/e|0),t.push(p.i/e|0),bA(i),i=p.next,l=p.next;else if((i=p)===l){o?1===o?yA(i=lbe(K0(i),t,e),t,e,n,r,s,2):2===o&&cbe(i,t,e,n,r,s):yA(K0(i),t,e,n,r,s,1);break}}function obe(i){const t=i.prev,e=i,n=i.next;if(xc(t,e,n)>=0)return!1;const r=t.x,s=e.x,o=n.x,l=t.y,u=e.y,p=n.y,v=r<s?r<o?r:o:s<o?s:o,x=l<u?l<p?l:p:u<p?u:p,I=r>s?r>o?r:o:s>o?s:o,T=l>u?l>p?l:p:u>p?u:p;let F=n.next;for(;F!==t;){if(F.x>=v&&F.x<=I&&F.y>=x&&F.y<=T&&QC(r,l,s,u,o,p,F.x,F.y)&&xc(F.prev,F,F.next)>=0)return!1;F=F.next}return!0}function abe(i,t,e,n){const r=i.prev,s=i,o=i.next;if(xc(r,s,o)>=0)return!1;const l=r.x,u=s.x,p=o.x,v=r.y,x=s.y,I=o.y,T=l<u?l<p?l:p:u<p?u:p,F=v<x?v<I?v:I:x<I?x:I,j=l>u?l>p?l:p:u>p?u:p,X=v>x?v>I?v:I:x>I?x:I,ce=HP(T,F,t,e,n),we=HP(j,X,t,e,n);let ye=i.prevZ,Ae=i.nextZ;for(;ye&&ye.z>=ce&&Ae&&Ae.z<=we;){if(ye.x>=T&&ye.x<=j&&ye.y>=F&&ye.y<=X&&ye!==r&&ye!==o&&QC(l,v,u,x,p,I,ye.x,ye.y)&&xc(ye.prev,ye,ye.next)>=0||(ye=ye.prevZ,Ae.x>=T&&Ae.x<=j&&Ae.y>=F&&Ae.y<=X&&Ae!==r&&Ae!==o&&QC(l,v,u,x,p,I,Ae.x,Ae.y)&&xc(Ae.prev,Ae,Ae.next)>=0))return!1;Ae=Ae.nextZ}for(;ye&&ye.z>=ce;){if(ye.x>=T&&ye.x<=j&&ye.y>=F&&ye.y<=X&&ye!==r&&ye!==o&&QC(l,v,u,x,p,I,ye.x,ye.y)&&xc(ye.prev,ye,ye.next)>=0)return!1;ye=ye.prevZ}for(;Ae&&Ae.z<=we;){if(Ae.x>=T&&Ae.x<=j&&Ae.y>=F&&Ae.y<=X&&Ae!==r&&Ae!==o&&QC(l,v,u,x,p,I,Ae.x,Ae.y)&&xc(Ae.prev,Ae,Ae.next)>=0)return!1;Ae=Ae.nextZ}return!0}function lbe(i,t,e){let n=i;do{const r=n.prev,s=n.next.next;!IE(r,s)&&e8(r,n,n.next,s)&&_A(r,s)&&_A(s,r)&&(t.push(r.i/e|0),t.push(n.i/e|0),t.push(s.i/e|0),bA(n),bA(n.next),n=i=s),n=n.next}while(n!==i);return K0(n)}function cbe(i,t,e,n,r,s){let o=i;do{let l=o.next.next;for(;l!==o.prev;){if(o.i!==l.i&&ybe(o,l)){let u=t8(o,l);return o=K0(o,o.next),u=K0(u,u.next),yA(o,t,e,n,r,s,0),void yA(u,t,e,n,r,s,0)}l=l.next}o=o.next}while(o!==i)}function dbe(i,t){return i.x-t.x}function hbe(i,t){const e=function fbe(i,t){let r,e=t,n=-1/0;const s=i.x,o=i.y;do{if(o<=e.y&&o>=e.next.y&&e.next.y!==e.y){const I=e.x+(o-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(I<=s&&I>n&&(n=I,r=e.x<e.next.x?e:e.next,I===s))return r}e=e.next}while(e!==t);if(!r)return null;const l=r,u=r.x,p=r.y;let x,v=1/0;e=r;do{s>=e.x&&e.x>=u&&s!==e.x&&QC(o<p?s:n,o,u,p,o<p?n:s,o,e.x,e.y)&&(x=Math.abs(o-e.y)/(s-e.x),_A(e,i)&&(x<v||x===v&&(e.x>r.x||e.x===r.x&&pbe(r,e)))&&(r=e,v=x)),e=e.next}while(e!==l);return r}(i,t);if(!e)return t;const n=t8(e,i);return K0(n,n.next),K0(e,e.next)}function pbe(i,t){return xc(i.prev,i,t.prev)<0&&xc(t.next,i,i.next)<0}function HP(i,t,e,n,r){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-e)*r|0)|i<<8))|i<<4))|i<<2))|i<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function vbe(i){let t=i,e=i;do{(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next}while(t!==i);return e}function QC(i,t,e,n,r,s,o,l){return(r-o)*(t-l)>=(i-o)*(s-l)&&(i-o)*(n-l)>=(e-o)*(t-l)&&(e-o)*(s-l)>=(r-o)*(n-l)}function ybe(i,t){return i.next.i!==t.i&&i.prev.i!==t.i&&!function _be(i,t){let e=i;do{if(e.i!==i.i&&e.next.i!==i.i&&e.i!==t.i&&e.next.i!==t.i&&e8(e,e.next,i,t))return!0;e=e.next}while(e!==i);return!1}(i,t)&&(_A(i,t)&&_A(t,i)&&function bbe(i,t){let e=i,n=!1;const r=(i.x+t.x)/2,s=(i.y+t.y)/2;do{e.y>s!=e.next.y>s&&e.next.y!==e.y&&r<(e.next.x-e.x)*(s-e.y)/(e.next.y-e.y)+e.x&&(n=!n),e=e.next}while(e!==i);return n}(i,t)&&(xc(i.prev,i,t.prev)||xc(i,t.prev,t))||IE(i,t)&&xc(i.prev,i,i.next)>0&&xc(t.prev,t,t.next)>0)}function xc(i,t,e){return(t.y-i.y)*(e.x-t.x)-(t.x-i.x)*(e.y-t.y)}function IE(i,t){return i.x===t.x&&i.y===t.y}function e8(i,t,e,n){const r=EE(xc(i,t,e)),s=EE(xc(i,t,n)),o=EE(xc(e,n,i)),l=EE(xc(e,n,t));return!!(r!==s&&o!==l||0===r&&SE(i,e,t)||0===s&&SE(i,n,t)||0===o&&SE(e,i,n)||0===l&&SE(e,t,n))}function SE(i,t,e){return t.x<=Math.max(i.x,e.x)&&t.x>=Math.min(i.x,e.x)&&t.y<=Math.max(i.y,e.y)&&t.y>=Math.min(i.y,e.y)}function EE(i){return i>0?1:i<0?-1:0}function _A(i,t){return xc(i.prev,i,i.next)<0?xc(i,t,i.next)>=0&&xc(i,i.prev,t)>=0:xc(i,t,i.prev)<0||xc(i,i.next,t)<0}function t8(i,t){const e=new GP(i.i,i.x,i.y),n=new GP(t.i,t.x,t.y),r=i.next,s=t.prev;return i.next=t,t.prev=i,e.next=r,r.prev=e,n.next=e,e.prev=n,s.next=n,n.prev=s,n}function n8(i,t,e,n){const r=new GP(i,t,e);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function bA(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function GP(i,t,e){this.i=i,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class Cy{static area(t){const e=t.length;let n=0;for(let r=e-1,s=0;s<e;r=s++)n+=t[r].x*t[s].y-t[s].x*t[r].y;return.5*n}static isClockWise(t){return Cy.area(t)<0}static triangulateShape(t,e){const n=[],r=[],s=[];r8(t),s8(n,t);let o=t.length;e.forEach(r8);for(let u=0;u<e.length;u++)r.push(o),o+=e[u].length,s8(n,e[u]);const l=function(i,t,e=2){const n=t&&t.length,r=n?t[0]*e:i.length;let s=JG(i,0,r,e,!0);const o=[];if(!s||s.next===s.prev)return o;let l,u,p,v,x,I,T;if(n&&(s=function ube(i,t,e,n){const r=[];let s,o,l,u,p;for(s=0,o=t.length;s<o;s++)l=t[s]*n,u=s<o-1?t[s+1]*n:i.length,p=JG(i,l,u,n,!1),p===p.next&&(p.steiner=!0),r.push(vbe(p));for(r.sort(dbe),s=0;s<r.length;s++)e=hbe(r[s],e);return e}(i,t,s,e)),i.length>80*e){l=p=i[0],u=v=i[1];for(let F=e;F<r;F+=e)x=i[F],I=i[F+1],x<l&&(l=x),I<u&&(u=I),x>p&&(p=x),I>v&&(v=I);T=Math.max(p-l,v-u),T=0!==T?32767/T:0}return yA(s,o,e,l,u,T,0),o}(n,r);for(let u=0;u<l.length;u+=3)s.push(l.slice(u,u+3));return s}}function r8(i){const t=i.length;t>2&&i[t-1].equals(i[0])&&i.pop()}function s8(i,t){for(let e=0;e<t.length;e++)i.push(t[e].x),i.push(t[e].y)}class TE extends Bo{constructor(t=new ZC([new Gi(.5,.5),new Gi(-.5,.5),new Gi(-.5,-.5),new Gi(.5,-.5)]),e={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const n=this,r=[],s=[];for(let l=0,u=t.length;l<u;l++)o(t[l]);function o(l){const u=[],p=void 0!==e.curveSegments?e.curveSegments:12,v=void 0!==e.steps?e.steps:1,x=void 0!==e.depth?e.depth:1;let I=void 0===e.bevelEnabled||e.bevelEnabled,T=void 0!==e.bevelThickness?e.bevelThickness:.2,F=void 0!==e.bevelSize?e.bevelSize:T-.1,j=void 0!==e.bevelOffset?e.bevelOffset:0,X=void 0!==e.bevelSegments?e.bevelSegments:3;const ce=e.extrudePath,we=void 0!==e.UVGenerator?e.UVGenerator:xbe;let ye,We,ot,Mt,Xe,Ae=!1;ce&&(ye=ce.getSpacedPoints(v),Ae=!0,I=!1,We=ce.computeFrenetFrames(v,!1),ot=new jt,Mt=new jt,Xe=new jt),I||(X=0,T=0,F=0,j=0);const yt=l.extractPoints(p);let tn=yt.shape;const zn=yt.holes;if(!Cy.isClockWise(tn)){tn=tn.reverse();for(let Vi=0,Ri=zn.length;Vi<Ri;Vi++){const wr=zn[Vi];Cy.isClockWise(wr)&&(zn[Vi]=wr.reverse())}}const Un=Cy.triangulateShape(tn,zn),An=tn;for(let Vi=0,Ri=zn.length;Vi<Ri;Vi++)tn=tn.concat(zn[Vi]);function Nn(Vi,Ri,wr){return Ri||console.error("THREE.ExtrudeGeometry: vec does not exist"),Ri.clone().multiplyScalar(wr).add(Vi)}const _n=tn.length,Vn=Un.length;function Fn(Vi,Ri,wr){let ls,kr,go;const Xs=Vi.x-Ri.x,Bs=Vi.y-Ri.y,Wl=wr.x-Vi.x,Cl=wr.y-Vi.y,rn=Xs*Xs+Bs*Bs;if(Math.abs(Xs*Cl-Bs*Wl)>Number.EPSILON){const ai=Math.sqrt(rn),lr=Math.sqrt(Wl*Wl+Cl*Cl),xr=Ri.x-Bs/ai,zr=Ri.y+Xs/ai,ki=((wr.x-Cl/lr-xr)*Cl-(wr.y+Wl/lr-zr)*Wl)/(Xs*Cl-Bs*Wl);ls=xr+Xs*ki-Vi.x,kr=zr+Bs*ki-Vi.y;const Ms=ls*ls+kr*kr;if(Ms<=2)return new Gi(ls,kr);go=Math.sqrt(Ms/2)}else{let ai=!1;Xs>Number.EPSILON?Wl>Number.EPSILON&&(ai=!0):Xs<-Number.EPSILON?Wl<-Number.EPSILON&&(ai=!0):Math.sign(Bs)===Math.sign(Cl)&&(ai=!0),ai?(ls=-Bs,kr=Xs,go=Math.sqrt(rn)):(ls=Xs,kr=Bs,go=Math.sqrt(rn/2))}return new Gi(ls/go,kr/go)}const bn=[];for(let Vi=0,Ri=An.length,wr=Ri-1,ls=Vi+1;Vi<Ri;Vi++,wr++,ls++)wr===Ri&&(wr=0),ls===Ri&&(ls=0),bn[Vi]=Fn(An[Vi],An[wr],An[ls]);const Bn=[];let Wi,wi=bn.concat();for(let Vi=0,Ri=zn.length;Vi<Ri;Vi++){const wr=zn[Vi];Wi=[];for(let ls=0,kr=wr.length,go=kr-1,Xs=ls+1;ls<kr;ls++,go++,Xs++)go===kr&&(go=0),Xs===kr&&(Xs=0),Wi[ls]=Fn(wr[ls],wr[go],wr[Xs]);Bn.push(Wi),wi=wi.concat(Wi)}for(let Vi=0;Vi<X;Vi++){const Ri=Vi/X,wr=T*Math.cos(Ri*Math.PI/2),ls=F*Math.sin(Ri*Math.PI/2)+j;for(let kr=0,go=An.length;kr<go;kr++){const Xs=Nn(An[kr],bn[kr],ls);_s(Xs.x,Xs.y,-wr)}for(let kr=0,go=zn.length;kr<go;kr++){const Xs=zn[kr];Wi=Bn[kr];for(let Bs=0,Wl=Xs.length;Bs<Wl;Bs++){const Cl=Nn(Xs[Bs],Wi[Bs],ls);_s(Cl.x,Cl.y,-wr)}}}const er=F+j;for(let Vi=0;Vi<_n;Vi++){const Ri=I?Nn(tn[Vi],wi[Vi],er):tn[Vi];Ae?(Mt.copy(We.normals[0]).multiplyScalar(Ri.x),ot.copy(We.binormals[0]).multiplyScalar(Ri.y),Xe.copy(ye[0]).add(Mt).add(ot),_s(Xe.x,Xe.y,Xe.z)):_s(Ri.x,Ri.y,0)}for(let Vi=1;Vi<=v;Vi++)for(let Ri=0;Ri<_n;Ri++){const wr=I?Nn(tn[Ri],wi[Ri],er):tn[Ri];Ae?(Mt.copy(We.normals[Vi]).multiplyScalar(wr.x),ot.copy(We.binormals[Vi]).multiplyScalar(wr.y),Xe.copy(ye[Vi]).add(Mt).add(ot),_s(Xe.x,Xe.y,Xe.z)):_s(wr.x,wr.y,x/v*Vi)}for(let Vi=X-1;Vi>=0;Vi--){const Ri=Vi/X,wr=T*Math.cos(Ri*Math.PI/2),ls=F*Math.sin(Ri*Math.PI/2)+j;for(let kr=0,go=An.length;kr<go;kr++){const Xs=Nn(An[kr],bn[kr],ls);_s(Xs.x,Xs.y,x+wr)}for(let kr=0,go=zn.length;kr<go;kr++){const Xs=zn[kr];Wi=Bn[kr];for(let Bs=0,Wl=Xs.length;Bs<Wl;Bs++){const Cl=Nn(Xs[Bs],Wi[Bs],ls);Ae?_s(Cl.x,Cl.y+ye[v-1].y,ye[v-1].x+wr):_s(Cl.x,Cl.y,x+wr)}}}function Si(Vi,Ri){let wr=Vi.length;for(;--wr>=0;){const ls=wr;let kr=wr-1;kr<0&&(kr=Vi.length-1);for(let go=0,Xs=v+2*X;go<Xs;go++){const Bs=_n*go,Wl=_n*(go+1);fs(Ri+ls+Bs,Ri+kr+Bs,Ri+kr+Wl,Ri+ls+Wl)}}}function _s(Vi,Ri,wr){u.push(Vi),u.push(Ri),u.push(wr)}function hs(Vi,Ri,wr){Lr(Vi),Lr(Ri),Lr(wr);const ls=r.length/3,kr=we.generateTopUV(n,r,ls-3,ls-2,ls-1);Co(kr[0]),Co(kr[1]),Co(kr[2])}function fs(Vi,Ri,wr,ls){Lr(Vi),Lr(Ri),Lr(ls),Lr(Ri),Lr(wr),Lr(ls);const kr=r.length/3,go=we.generateSideWallUV(n,r,kr-6,kr-3,kr-2,kr-1);Co(go[0]),Co(go[1]),Co(go[3]),Co(go[1]),Co(go[2]),Co(go[3])}function Lr(Vi){r.push(u[3*Vi+0]),r.push(u[3*Vi+1]),r.push(u[3*Vi+2])}function Co(Vi){s.push(Vi.x),s.push(Vi.y)}(function cr(){const Vi=r.length/3;if(I){let Ri=0,wr=_n*Ri;for(let ls=0;ls<Vn;ls++){const kr=Un[ls];hs(kr[2]+wr,kr[1]+wr,kr[0]+wr)}Ri=v+2*X,wr=_n*Ri;for(let ls=0;ls<Vn;ls++){const kr=Un[ls];hs(kr[0]+wr,kr[1]+wr,kr[2]+wr)}}else{for(let Ri=0;Ri<Vn;Ri++){const wr=Un[Ri];hs(wr[2],wr[1],wr[0])}for(let Ri=0;Ri<Vn;Ri++){const wr=Un[Ri];hs(wr[0]+_n*v,wr[1]+_n*v,wr[2]+_n*v)}}n.addGroup(Vi,r.length/3-Vi,0)})(),function Is(){const Vi=r.length/3;let Ri=0;Si(An,Ri),Ri+=An.length;for(let wr=0,ls=zn.length;wr<ls;wr++){const kr=zn[wr];Si(kr,Ri),Ri+=kr.length}n.addGroup(Vi,r.length/3-Vi,1)}()}this.setAttribute("position",new ss(r,3)),this.setAttribute("uv",new ss(s,2)),this.computeVertexNormals()}toJSON(){const t=super.toJSON();return function wbe(i,t,e){if(e.shapes=[],Array.isArray(i))for(let n=0,r=i.length;n<r;n++)e.shapes.push(i[n].uuid);else e.shapes.push(i.uuid);return e.options=Object.assign({},t),void 0!==t.extrudePath&&(e.options.extrudePath=t.extrudePath.toJSON()),e}(this.parameters.shapes,this.parameters.options,t)}static fromJSON(t,e){const n=[];for(let s=0,o=t.shapes.length;s<o;s++)n.push(e[t.shapes[s]]);const r=t.options.extrudePath;return void 0!==r&&(t.options.extrudePath=(new FP[r.type]).fromJSON(r)),new TE(n,t.options)}}const xbe={generateTopUV:function(i,t,e,n,r){const l=t[3*n],u=t[3*n+1],p=t[3*r],v=t[3*r+1];return[new Gi(t[3*e],t[3*e+1]),new Gi(l,u),new Gi(p,v)]},generateSideWallUV:function(i,t,e,n,r,s){const o=t[3*e],l=t[3*e+1],u=t[3*e+2],p=t[3*n],v=t[3*n+1],x=t[3*n+2],I=t[3*r],T=t[3*r+1],F=t[3*r+2],j=t[3*s],X=t[3*s+1],ce=t[3*s+2];return Math.abs(l-v)<Math.abs(o-p)?[new Gi(o,1-u),new Gi(p,1-x),new Gi(I,1-F),new Gi(j,1-ce)]:[new Gi(l,1-u),new Gi(v,1-x),new Gi(T,1-F),new Gi(X,1-ce)]}};class LE extends W0{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Jr(16777215),this.specular=new Jr(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Jr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Gi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}function wg(i,t,e){return ZP(i)?new i.constructor(i.subarray(t,void 0!==e?e:i.length)):i.slice(t,e)}function Z0(i,t,e){return!i||!e&&i.constructor===t?i:"number"==typeof t.BYTES_PER_ELEMENT?new t(i):Array.prototype.slice.call(i)}function ZP(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}class PE{constructor(t,e,n,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,r=e[n],s=e[n-1];e:{t:{let o;n:{i:if(!(t<r)){for(let l=n+2;;){if(void 0===r){if(t<s)break i;return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===l)break;if(s=r,r=e[++n],t<r)break t}o=e.length;break n}if(t>=s)break e;{const l=e[1];t<l&&(n=2,s=l);for(let u=n-2;;){if(void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(n===u)break;if(r=s,s=e[--n-1],t>=s)break t}o=n,n=0}}for(;n<o;){const l=n+o>>>1;t<e[l]?o=l:n=l+1}if(r=e[n],s=e[n-1],void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,r)}return this.interpolate_(n,s,t,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=t*r;for(let o=0;o!==r;++o)e[o]=n[s+o];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Nbe extends PE{constructor(t,e,n,r){super(t,e,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(t,e,n){const r=this.parameterPositions;let s=t-2,o=t+1,l=r[s],u=r[o];if(void 0===l)switch(this.getSettings_().endingStart){case 2401:s=t,l=2*e-n;break;case 2402:s=r.length-2,l=e+r[s]-r[s+1];break;default:s=t,l=n}if(void 0===u)switch(this.getSettings_().endingEnd){case 2401:o=t,u=2*n-e;break;case 2402:o=1,u=n+r[1]-r[0];break;default:o=t-1,u=e}const p=.5*(n-e),v=this.valueSize;this._weightPrev=p/(e-l),this._weightNext=p/(u-n),this._offsetPrev=s*v,this._offsetNext=o*v}interpolate_(t,e,n,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,u=t*l,p=u-l,v=this._offsetPrev,x=this._offsetNext,I=this._weightPrev,T=this._weightNext,F=(n-e)/(r-e),j=F*F,X=j*F,ce=-I*X+2*I*j-I*F,we=(1+I)*X+(-1.5-2*I)*j+(-.5+I)*F+1,ye=(-1-T)*X+(1.5+T)*j+.5*F,Ae=T*X-T*j;for(let We=0;We!==l;++We)s[We]=ce*o[v+We]+we*o[p+We]+ye*o[u+We]+Ae*o[x+We];return s}}class c8 extends PE{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,u=t*l,p=u-l,v=(n-e)/(r-e),x=1-v;for(let I=0;I!==l;++I)s[I]=o[p+I]*x+o[u+I]*v;return s}}class Bbe extends PE{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t){return this.copySampleValue_(t-1)}}class hv{constructor(t,e,n,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Z0(e,this.TimeBufferType),this.values=Z0(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:Z0(t.times,Array),values:Z0(t.values,Array)};const r=t.getInterpolation();r!==t.DefaultInterpolation&&(n.interpolation=r)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new Bbe(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new c8(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new Nbe(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case 2300:e=this.InterpolantFactoryMethodDiscrete;break;case 2301:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]*=t}return this}trim(t,e){const n=this.times,r=n.length;let s=0,o=r-1;for(;s!==r&&n[s]<t;)++s;for(;-1!==o&&n[o]>e;)--o;if(++o,0!==s||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const l=this.getValueSize();this.times=wg(n,s,o),this.values=wg(this.values,s*l,o*l)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,r=this.values,s=n.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let o=null;for(let l=0;l!==s;l++){const u=n[l];if("number"==typeof u&&isNaN(u)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,l,u),t=!1;break}if(null!==o&&o>u){console.error("THREE.KeyframeTrack: Out of order keys.",this,l,u,o),t=!1;break}o=u}if(void 0!==r&&ZP(r))for(let l=0,u=r.length;l!==u;++l){const p=r[l];if(isNaN(p)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,p),t=!1;break}}return t}optimize(){const t=wg(this.times),e=wg(this.values),n=this.getValueSize(),r=2302===this.getInterpolation(),s=t.length-1;let o=1;for(let l=1;l<s;++l){let u=!1;const p=t[l];if(p!==t[l+1]&&(1!==l||p!==t[0]))if(r)u=!0;else{const x=l*n,I=x-n,T=x+n;for(let F=0;F!==n;++F){const j=e[x+F];if(j!==e[I+F]||j!==e[T+F]){u=!0;break}}}if(u){if(l!==o){t[o]=t[l];const x=l*n,I=o*n;for(let T=0;T!==n;++T)e[I+T]=e[x+T]}++o}}if(s>0){t[o]=t[s];for(let l=s*n,u=o*n,p=0;p!==n;++p)e[u+p]=e[l+p];++o}return o!==t.length?(this.times=wg(t,0,o),this.values=wg(e,0,o*n)):(this.times=t,this.values=e),this}clone(){const t=wg(this.times,0),e=wg(this.values,0),r=new(0,this.constructor)(this.name,t,e);return r.createInterpolant=this.createInterpolant,r}}hv.prototype.TimeBufferType=Float32Array,hv.prototype.ValueBufferType=Float32Array,hv.prototype.DefaultInterpolation=2301;class JC extends hv{}JC.prototype.ValueTypeName="bool",JC.prototype.ValueBufferType=Array,JC.prototype.DefaultInterpolation=2300,JC.prototype.InterpolantFactoryMethodLinear=void 0,JC.prototype.InterpolantFactoryMethodSmooth=void 0;(class u8 extends hv{}).prototype.ValueTypeName="color";(class RE extends hv{}).prototype.ValueTypeName="number";class zbe extends PE{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,u=(n-e)/(r-e);let p=t*l;for(let v=p+l;p!==v;p+=4)Rp.slerpFlat(s,0,o,p-l,o,p,u);return s}}class CA extends hv{InterpolantFactoryMethodLinear(t){return new zbe(this.times,this.values,this.getValueSize(),t)}}CA.prototype.ValueTypeName="quaternion",CA.prototype.DefaultInterpolation=2301,CA.prototype.InterpolantFactoryMethodSmooth=void 0;class ex extends hv{}ex.prototype.ValueTypeName="string",ex.prototype.ValueBufferType=Array,ex.prototype.DefaultInterpolation=2300,ex.prototype.InterpolantFactoryMethodLinear=void 0,ex.prototype.InterpolantFactoryMethodSmooth=void 0;(class kE extends hv{}).prototype.ValueTypeName="vector";const tx={enabled:!1,files:{},add:function(i,t){!1!==this.enabled&&(this.files[i]=t)},get:function(i){if(!1!==this.enabled)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class d8{constructor(t,e,n){const r=this;let u,s=!1,o=0,l=0;const p=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(v){l++,!1===s&&void 0!==r.onStart&&r.onStart(v,o,l),s=!0},this.itemEnd=function(v){o++,void 0!==r.onProgress&&r.onProgress(v,o,l),o===l&&(s=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(v){void 0!==r.onError&&r.onError(v)},this.resolveURL=function(v){return u?u(v):v},this.setURLModifier=function(v){return u=v,this},this.addHandler=function(v,x){return p.push(v,x),this},this.removeHandler=function(v){const x=p.indexOf(v);return-1!==x&&p.splice(x,2),this},this.getHandler=function(v){for(let x=0,I=p.length;x<I;x+=2){const T=p[x],F=p[x+1];if(T.global&&(T.lastIndex=0),T.test(v))return F}return null}}}const Hbe=new d8;class h8{constructor(t){this.manager=void 0!==t?t:Hbe,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const n=this;return new Promise(function(r,s){n.load(t,r,e,s)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}const xy={};class Gbe extends Error{constructor(t,e){super(t),this.response=e}}class wy extends h8{constructor(t){super(t)}load(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const s=tx.get(t);if(void 0!==s)return this.manager.itemStart(t),setTimeout(()=>{e&&e(s),this.manager.itemEnd(t)},0),s;if(void 0!==xy[t])return void xy[t].push({onLoad:e,onProgress:n,onError:r});xy[t]=[],xy[t].push({onLoad:e,onProgress:n,onError:r});const o=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),l=this.mimeType,u=this.responseType;fetch(o).then(p=>{if(200===p.status||0===p.status){if(0===p.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===p.body||void 0===p.body.getReader)return p;const v=xy[t],x=p.body.getReader(),I=p.headers.get("Content-Length"),T=I?parseInt(I):0,F=0!==T;let j=0;const X=new ReadableStream({start(ce){!function we(){x.read().then(({done:ye,value:Ae})=>{if(ye)ce.close();else{j+=Ae.byteLength;const We=new ProgressEvent("progress",{lengthComputable:F,loaded:j,total:T});for(let ot=0,Mt=v.length;ot<Mt;ot++){const Xe=v[ot];Xe.onProgress&&Xe.onProgress(We)}ce.enqueue(Ae),we()}})}()}});return new Response(X)}throw new Gbe(`fetch for "${p.url}" responded with ${p.status}: ${p.statusText}`,p)}).then(p=>{switch(u){case"arraybuffer":return p.arrayBuffer();case"blob":return p.blob();case"document":return p.text().then(v=>(new DOMParser).parseFromString(v,l));case"json":return p.json();default:if(void 0===l)return p.text();{const x=/charset="?([^;"\s]*)"?/i.exec(l),I=x&&x[1]?x[1].toLowerCase():void 0,T=new TextDecoder(I);return p.arrayBuffer().then(F=>T.decode(F))}}}).then(p=>{tx.add(t,p);const v=xy[t];delete xy[t];for(let x=0,I=v.length;x<I;x++){const T=v[x];T.onLoad&&T.onLoad(p)}}).catch(p=>{const v=xy[t];if(void 0===v)throw this.manager.itemError(t),p;delete xy[t];for(let x=0,I=v.length;x<I;x++){const T=v[x];T.onError&&T.onError(p)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class eR extends Vf{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new Jr(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}const tR=new po,f8=new jt,p8=new jt;class g8{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Gi(512,512),this.map=null,this.mapPass=null,this.matrix=new po,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new mP,this._frameExtents=new Gi(1,1),this._viewportCount=1,this._viewports=[new dl(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;f8.setFromMatrixPosition(t.matrixWorld),e.position.copy(f8),p8.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(p8),e.updateMatrixWorld(),tR.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(tR),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(tR)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class jbe extends g8{constructor(){super(new eh(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const e=this.camera,n=2*eA*t.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=t.distance||e.far;(n!==e.fov||r!==e.aspect||s!==e.far)&&(e.fov=n,e.aspect=r,e.far=s,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class m8 extends eR{constructor(t,e,n=0,r=Math.PI/3,s=0,o=1){super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Vf.DefaultUp),this.updateMatrix(),this.target=new Vf,this.distance=n,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new jbe}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class Xbe extends g8{constructor(){super(new vP(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class y8 extends eR{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Vf.DefaultUp),this.updateMatrix(),this.target=new Vf,this.shadow=new Xbe}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class _8 extends eR{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}}const rR="\\[\\]\\.:\\/",sCe=new RegExp("["+rR+"]","g"),sR="[^"+rR+"]",oCe="[^"+rR.replace("\\.","")+"]",dCe=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",sR)+/(WCOD+)?/.source.replace("WCOD",oCe)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",sR)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",sR)+"$"),hCe=["material","materials","bones","map"];class fCe{constructor(t,e,n){const r=n||Gl.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}getValue(t,e){this.bind();const r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=n.length;r!==s;++r)n[r].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}let Gl=(()=>{class i{constructor(e,n,r){this.path=n,this.parsedPath=r||i.parseTrackName(n),this.node=i.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,r){return e&&e.isAnimationObjectGroup?new i.Composite(e,n,r):new i(e,n,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(sCe,"")}static parseTrackName(e){const n=dCe.exec(e);if(null===n)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==s&&-1!==s){const o=r.nodeName.substring(s+1);-1!==hCe.indexOf(o)&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,n){if(void 0===n||""===n||"."===n||-1===n||n===e.name||n===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(n);if(void 0!==r)return r}if(e.children){const r=function(o){for(let l=0;l<o.length;l++){const u=o[l];if(u.name===n||u.uuid===n)return u;const p=r(u.children);if(p)return p}return null},s=r(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)e[n++]=r[s]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,r=n.objectName,s=n.propertyName;let o=n.propertyIndex;if(e||(e=i.findNode(this.rootNode,n.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(r){let v=n.objectIndex;switch(r){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let x=0;x<e.length;x++)if(e[x].name===v){v=x;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[r]}if(void 0!==v){if(void 0===e[v])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[v]}}const l=e[s];if(void 0===l)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n.nodeName+"."+s+" but it wasn't found.",e);let u=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?u=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(u=this.Versioning.MatrixWorldNeedsUpdate);let p=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===s){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[o]&&(o=e.morphTargetDictionary[o])}p=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=o}else void 0!==l.fromArray&&void 0!==l.toArray?(p=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(p=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=s;this.getValue=this.GetterByBindingType[p],this.setValue=this.SetterByBindingTypeAndVersioning[p][u]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return i.Composite=fCe,i})();Gl.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Gl.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Gl.prototype.GetterByBindingType=[Gl.prototype._getValue_direct,Gl.prototype._getValue_array,Gl.prototype._getValue_arrayElement,Gl.prototype._getValue_toArray],Gl.prototype.SetterByBindingTypeAndVersioning=[[Gl.prototype._setValue_direct,Gl.prototype._setValue_direct_setNeedsUpdate,Gl.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Gl.prototype._setValue_array,Gl.prototype._setValue_array_setNeedsUpdate,Gl.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Gl.prototype._setValue_arrayElement,Gl.prototype._setValue_arrayElement_setNeedsUpdate,Gl.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Gl.prototype._setValue_fromArray,Gl.prototype._setValue_fromArray_setNeedsUpdate,Gl.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1);class yCe{constructor(){this.type="ShapePath",this.color=new Jr,this.subPaths=[],this.currentPath=null}moveTo(t,e){return this.currentPath=new bE,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}lineTo(t,e){return this.currentPath.lineTo(t,e),this}quadraticCurveTo(t,e,n,r){return this.currentPath.quadraticCurveTo(t,e,n,r),this}bezierCurveTo(t,e,n,r,s,o){return this.currentPath.bezierCurveTo(t,e,n,r,s,o),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t){function n(ce,we){const ye=we.length;let Ae=!1;for(let We=ye-1,ot=0;ot<ye;We=ot++){let Mt=we[We],Xe=we[ot],yt=Xe.x-Mt.x,tn=Xe.y-Mt.y;if(Math.abs(tn)>Number.EPSILON){if(tn<0&&(Mt=we[ot],yt=-yt,Xe=we[We],tn=-tn),ce.y<Mt.y||ce.y>Xe.y)continue;if(ce.y===Mt.y){if(ce.x===Mt.x)return!0}else{const zn=tn*(ce.x-Mt.x)-yt*(ce.y-Mt.y);if(0===zn)return!0;if(zn<0)continue;Ae=!Ae}}else{if(ce.y!==Mt.y)continue;if(Xe.x<=ce.x&&ce.x<=Mt.x||Mt.x<=ce.x&&ce.x<=Xe.x)return!0}}return Ae}const r=Cy.isClockWise,s=this.subPaths;if(0===s.length)return[];let o,l,u;const p=[];if(1===s.length)return l=s[0],u=new ZC,u.curves=l.curves,p.push(u),p;let v=!r(s[0].getPoints());v=t?!v:v;const x=[],I=[];let j,X,T=[],F=0;I[F]=void 0,T[F]=[];for(let ce=0,we=s.length;ce<we;ce++)l=s[ce],j=l.getPoints(),o=r(j),o=t?!o:o,o?(!v&&I[F]&&F++,I[F]={s:new ZC,p:j},I[F].s.curves=l.curves,v&&F++,T[F]=[]):T[F].push({h:l,p:j[0]});if(!I[0])return function e(ce){const we=[];for(let ye=0,Ae=ce.length;ye<Ae;ye++){const We=ce[ye],ot=new ZC;ot.curves=We.curves,we.push(ot)}return we}(s);if(I.length>1){let ce=!1,we=0;for(let ye=0,Ae=I.length;ye<Ae;ye++)x[ye]=[];for(let ye=0,Ae=I.length;ye<Ae;ye++){const We=T[ye];for(let ot=0;ot<We.length;ot++){const Mt=We[ot];let Xe=!0;for(let yt=0;yt<I.length;yt++)n(Mt.p,I[yt].p)&&(ye!==yt&&we++,Xe?(Xe=!1,x[yt].push(Mt)):ce=!0);Xe&&x[ye].push(Mt)}}we>0&&!1===ce&&(T=x)}for(let ce=0,we=I.length;ce<we;ce++){u=I[ce].s,p.push(u),X=T[ce];for(let ye=0,Ae=X.length;ye<Ae;ye++)u.holes.push(X[ye].h)}return p}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"146"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="146");var xCe=V(5570);class wCe extends h8{constructor(t){super(t)}load(t,e,n,r){const s=this,o=new wy(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,function(l){const u=s.parse(JSON.parse(l));e&&e(u)},n,r)}parse(t){return new ACe(t)}}class ACe{constructor(t){this.isFont=!0,this.type="Font",this.data=t}generateShapes(t,e=100){const n=[],r=function ICe(i,t,e){const n=Array.from(i),r=t/e.resolution,s=(e.boundingBox.yMax-e.boundingBox.yMin+e.underlineThickness)*r,o=[];let l=0,u=0;for(let p=0;p<n.length;p++){const v=n[p];if("\n"===v)l=0,u-=s;else{const x=SCe(v,r,l,u,e);x&&(l+=x.offsetX,o.push(x.path))}}return o}(t,e,this.data);for(let s=0,o=r.length;s<o;s++)n.push(...r[s].toShapes(!1));return n}}function SCe(i,t,e,n,r){const s=r.glyphs[i]||r.glyphs["?"];if(!s)return void console.error('THREE.Font: character "'+i+'" does not exists in font family '+r.familyName+".");const o=new yCe;let l,u,p,v,x,I,T,F;if(s.o){const j=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let X=0,ce=j.length;X<ce;)switch(j[X++]){case"m":l=j[X++]*t+e,u=j[X++]*t+n,o.moveTo(l,u);break;case"l":l=j[X++]*t+e,u=j[X++]*t+n,o.lineTo(l,u);break;case"q":p=j[X++]*t+e,v=j[X++]*t+n,x=j[X++]*t+e,I=j[X++]*t+n,o.quadraticCurveTo(x,I,p,v);break;case"b":p=j[X++]*t+e,v=j[X++]*t+n,x=j[X++]*t+e,I=j[X++]*t+n,T=j[X++]*t+e,F=j[X++]*t+n,o.bezierCurveTo(x,I,T,F,p,v)}}return{offsetX:s.ha*t,path:o}}class ECe extends TE{constructor(t,e={}){const n=e.font;if(void 0===n)super();else{const r=n.generateShapes(t,e.size);e.depth=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),super(r,e)}this.type="TextGeometry"}}const TCe=["canvas"];let MCe=(()=>{class i{constructor(e,n,r,s){this.graphsService=e,this.logger=n,this.store=r,this.route=s,this.rotationSpeedX=.05,this.rotationSpeedY=.01,this.size=200,this.frustumSize=600,this.texture="/assets/texture.jpg",this.cameraZ=1,this.fieldOfView=1,this.nearClippingPlane=150,this.farClippingPlane=1e3,this.scene=new AG,this.group=new jC,this.graph$=this.store.select(d2),this.subscriptions=[],this.subscriptions.push(this.graph$.subscribe(o=>{!o||(this.group.clear(),this.loadGraph(o,this.scene))}))}get canvas(){return this.canvasRef?.nativeElement}ngOnInit(){}ngAfterViewInit(){this.route.params.subscribe(e=>{this.id=e.label,this.clearScene(),this.startRenderingLoop();let n=this.graphsService.getGraph(this.id+"");n&&this.store.dispatch(x1({graph:n}))})}ngOnDestroy(){this.subscriptions&&_r.each(this.subscriptions,e=>{e.unsubscribe()})}clearScene(){this.scene.add(this.group),this.camera=new eh(45,this.getAspectRatio(),1,1e3),this.camera.position.set(0,15,35);let e=new LE({color:16711680,shininess:150,specular:2236962}),n=new S_(1e3,.15,1e3);e=new LE({color:10530223,shininess:150,specular:1118481});const r=new Mh(n,e);r.scale.multiplyScalar(3),r.castShadow=!1,r.receiveShadow=!0,this.scene.add(r),this.scene.add(new _8(4210752));let s=new m8(4210752);s.name="Spot Light",s.angle=Math.PI/5,s.penumbra=.3,s.position.set(5,5,5),s.castShadow=!0,s.shadow.camera.near=8,s.shadow.camera.far=30,s.shadow.mapSize.width=1024,s.shadow.mapSize.height=1024,this.scene.add(s),this.scene.add(s.shadow.camera);let o=new y8(16777215,1);o.name="Dir. Light",o.position.set(0,10,0),o.castShadow=!0,o.shadow.camera.near=1,o.shadow.camera.far=10,o.shadow.camera.right=15,o.shadow.camera.left=-15,o.shadow.camera.top=15,o.shadow.camera.bottom=-15,o.shadow.mapSize.width=1024,o.shadow.mapSize.height=1024,this.scene.add(o),this.scene.add(o.shadow.camera)}getAspectRatio(){return this.canvas.clientWidth/this.canvas.clientHeight}loadGraph(e,n){let r={};if(e){this.logger.info("Load",e);let s=new jt(1,0,0);_r.each(e.nodes,u=>{let p=new S_(1,.1,1),v=new LE({color:16711680,shininess:150,specular:2236962}),x=new Mh(p,v);x.name=u.id,r[u.id]={x:u.x,y:u.y},x.position.set(u.x/50,2,u.y/50),x.castShadow=!0,x.receiveShadow=!0,n.add(x),this.group.add(x),(new wCe).load("assets/fonts/helvetiker_regular.typeface.json",T=>{const F=new ECe(u.label,{font:T,size:.3,height:.1,curveSegments:5,bevelEnabled:!1,bevelThickness:0,bevelSize:0,bevelOffset:0,bevelSegments:0});F.computeBoundingBox(),F.boundingBox||new y_;let ce=new Mh(F,v);ce.position.set(u.x/50,2,u.y/50),ce.rotateOnAxis(s,-Math.PI/2),n.add(ce),this.group.add(ce)})}),_r.each(e.edges,u=>{let p=r[u.source],v=r[u.target];const x=new Uf({color:255}),I=[];I.push(new jt(p.x/50,2,p.y/50)),I.push(new jt(v.x/50,2,v.y/50));const T=(new Bo).setFromPoints(I),F=new pA(T,x);n.add(F),this.group.add(F)});let l=(new y_).setFromObject(this.group).getSize(new jt);this.group.translateX(-l.x/2),this.group.translateZ(-l.z/2),this.logger.info("Loaded",this.group.children.length,l)}}startRenderingLoop(){this.renderer=new wG({canvas:this.canvas}),this.renderer.setPixelRatio(devicePixelRatio),this.renderer.setSize(this.canvas.clientWidth,this.canvas.clientHeight),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=0;let e=this;const n=new xCe.OrbitControls(this.camera,this.renderer.domElement);n.autoRotate=!0,n.enableZoom=!0,n.enablePan=!1,n.minDistance=20,n.enableDamping=!0,n.dampingFactor=.2,n.enableKeys=!0,n.update(),function r(){requestAnimationFrame(r),e.renderer.render(e.scene,e.camera)}()}}return i.\u0275fac=function(e){return new(e||i)(Zt(E1),Zt(Mp),Zt(ey),Zt(t_))},i.\u0275cmp=Ir({type:i,selectors:[["app-threejs"]],viewQuery:function(e,n){if(1&e&&vs(TCe,5),2&e){let r;vr(r=yr())&&(n.canvasRef=r.first)}},inputs:{rotationSpeedX:"rotationSpeedX",rotationSpeedY:"rotationSpeedY",size:"size",frustumSize:"frustumSize",texture:"texture",cameraZ:"cameraZ",fieldOfView:"fieldOfView",nearClippingPlane:["nearClipping","nearClippingPlane"],farClippingPlane:["farClipping","farClippingPlane"]},decls:2,vars:0,consts:[["id","canvas",2,"height","100%","width","100%"],["canvas",""]],template:function(e,n){1&e&&ii(0,"canvas",0,1)}}),i})();const DCe=aw("styles"),LCe=aw("style");function PCe(i,t){if(1&i){const e=Pi();lt(0,"span",12)(1,"input",13),fn("ngModelChange",function(r){return wt(e),At(_e().newStyle=r)}),ct(),lt(2,"label",14),qi(3,"Name"),ct(),lt(4,"button",15),fn("click",function(){wt(e);const r=_e();return At(r.openNew(r.newStyle))}),ct()()}if(2&i){const e=_e();Me(1),ve("ngModel",e.newStyle)}}function RCe(i,t){}function kCe(i,t){1&i&&(lt(0,"div",16)(1,"h5",17),qi(2,"Manage Styles"),ct(),lt(3,"span",18),ii(4,"i",19)(5,"input",20),ct()())}function OCe(i,t){1&i&&(lt(0,"tr")(1,"th",21),ii(2,"p-tableHeaderCheckbox"),ct(),lt(3,"th",22),qi(4,"Label "),ii(5,"p-sortIcon",23),ct(),lt(6,"th"),qi(7,"Action(s) "),ct()())}function FCe(i,t){if(1&i){const e=Pi();lt(0,"tr")(1,"td"),ii(2,"p-tableCheckbox",24),ct(),lt(3,"td"),qi(4),ct(),lt(5,"td")(6,"button",25),fn("click",function(){const s=wt(e).$implicit;return At(_e().selectStyle(s))}),ct(),lt(7,"span"),qi(8,"\xa0"),ct(),lt(9,"button",26),fn("click",function(r){const o=wt(e).$implicit;return At(_e().confirm(r,o))}),ct(),lt(10,"span"),qi(11,"\xa0"),ct()()()}if(2&i){const e=t.$implicit;Me(2),ve("value",e),Me(2),as(e.id)}}const NCe=function(){return["label"]},BCe=function(){return{width:"60vw",height:"50vw"}},zCe=[{path:"graphs",component:woe},{path:"graphs/sigma/:label",component:Poe},{path:"graphs/cytoscape/:label",component:Tpe},{path:"graphs/threejs/:label",component:MCe},{path:"styles",component:(()=>{class i{constructor(e,n,r,s,o,l,u){this.router=e,this.logger=n,this.styleService=r,this.clipboardService=s,this.confirmationService=o,this.messageService=l,this.store=u,this.style=void 0,this.styles=[],this.displayStyle=!1,this.style$=this.store.select(LCe),this.styles$=this.store.select(DCe),this.style$.subscribe(p=>{!p||(this.style=p)}),this.styles$.subscribe(p=>{!p||(this.styles=_r.map(p,v=>({id:v.id,tags:v.tags})))})}ngOnInit(){let e=this.styleService.getStyles();this.store.dispatch(K1({styles:e}))}confirm(e,n){this.confirmationService.confirm({target:e.target||void 0,message:"Are you sure that you want to proceed ?",icon:"pi pi-exclamation-triangle",accept:()=>{this.deleteStyle(n)},reject:()=>{}})}selectStyle(e){this.selectedStyle=this.styleService.getStyle(e.id),this.logger.info(this.selectedStyle),this.displayStyle=!0}deleteStyle(e){let n=this.styleService.deleteStyle(e);this.store.dispatch(K1({styles:n}))}openNew(e){if(e){this.styleService.saveStyle({id:e,tags:[]});let n=this.styleService.getStyles();this.logger.info(n),this.store.dispatch(K1({styles:n}))}}onFileDropped(e){e[0].name.endsWith(".json")&&this.onFileStyleDropped(e)}onFileStyleDropped(e){var n=this;this.messageService.add({key:"bc",severity:"info",summary:"Upload/Style",detail:`Filename ${e[0].name}`});let r=new FileReader;r.addEventListener("loadend",p0(function*(){n.selectedStyle&&(n.selectedStyle.tags=JSON.parse(r.result+""),n.styleService.saveStyle(n.selectedStyle),n.store.dispatch(U2({style:n.selectedStyle})))})),r.readAsText(e[0])}}return i.\u0275fac=function(e){return new(e||i)(Zt(Zd),Zt(Mp),Zt(y4),Zt(T1),Zt(m1),Zt(fm),Zt(ey))},i.\u0275cmp=Ir({type:i,selectors:[["app-style-selector"]],decls:16,vars:18,consts:[[1,"card"],["styleClass","mb-4"],["pTemplate","left"],["pTemplate","right"],["responsiveLayout","scroll","dataKey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","rows","paginator","globalFilterFields","rowHover","showCurrentPageReport"],["mystyles",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["position","bottom-center","key","bc"],["header","Drag and drop file to update style",3,"modal","visible","maximizable","draggable","resizable","visibleChange"],["dropZoneDirective","",3,"fileDropped"],[1,"p-float-label"],["id","float-input","type","text","pInputText","",3,"ngModel","ngModelChange"],["for","float-input"],["pButton","","pRipple","","label","New","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],[1,"flex","align-items-center","justify-content-between"],[1,"m-0"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search..."],[2,"width","3rem"],["pSortableColumn","label"],["field","label"],[3,"value"],["pButton","","pRipple","","pTooltip","Select this style","tooltipPosition","top","icon","pi pi-sign-out",3,"click"],["pButton","","pRipple","","pTooltip","Remove this style","tooltipPosition","top","icon","pi pi-trash",1,"p-button-danger",3,"click"]],template:function(e,n){1&e&&(lt(0,"div",0)(1,"p-toolbar",1),Ze(2,PCe,5,1,"ng-template",2),Ze(3,RCe,0,0,"ng-template",3),ct(),ii(4,"p-toast"),lt(5,"p-table",4,5),Ze(7,kCe,6,0,"ng-template",6),Ze(8,OCe,8,0,"ng-template",7),Ze(9,FCe,12,2,"ng-template",8),ct()(),ii(10,"p-confirmPopup")(11,"p-toast",9),lt(12,"p-dialog",10),fn("visibleChange",function(s){return n.displayStyle=s}),lt(13,"pre",11),fn("fileDropped",function(s){return n.onFileDropped(s)}),qi(14),function oF(i,t){const e=Es();let n;const r=i+22;e.firstCreatePass?(n=function Tj(i,t){if(t)for(let e=t.length-1;e>=0;e--){const n=t[e];if(i===n.name)return n}}(t,e.pipeRegistry),e.data[r]=n,n.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(r,n.onDestroy)):n=e.data[r];const s=n.factory||(n.factory=tp(n.type)),o=ku(Zt);try{const l=lh(!1),u=s();return lh(l),function TW(i,t,e,n){e>=i.data.length&&(i.data[e]=null,i.blueprint[e]=null),t[e]=n}(e,mi(),r,u),u}finally{ku(o)}}(15,"json"),ct()()),2&e&&(Me(5),ve("value",n.styles)("rows",10)("paginator",!0)("globalFilterFields",Mo(16,NCe))("rowHover",!0)("showCurrentPageReport",!0),Me(7),uo(Mo(17,BCe)),ve("modal",!0)("visible",n.displayStyle)("maximizable",!0)("draggable",!1)("resizable",!1),Me(2),as(function aF(i,t,e){const n=i+22,r=mi(),s=pl(r,n);return function Ox(i,t){return i[1].data[t].pure}(r,n)?tF(r,Oo(),t,s.transform,e,s):s.transform(e)}(15,14,n.selectedStyle)))},dependencies:[b0,_l,s4,o4,a4,l4,cC,$1,o_,q1,Aw,f4,v0,oC,ry,p4,ML,PN]}),i})()},{path:"converters/images",component:kpe},{path:"preferences",component:rge},{path:"about",component:oge}];let VCe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({imports:[i_.forRoot(zCe,{useHash:!0}),i_]}),i})();const UCe=function(i){return{"p-hidden":i}};function HCe(i,t){if(1&i&&ii(0,"li",4),2&i){const e=_e().$implicit;ve("ngClass",Bi(1,UCe,!1===e.visible))}}function GCe(i,t){if(1&i&&ii(0,"span",16),2&i){const e=_e(3).$implicit;ve("ngClass",e.icon)("ngStyle",e.iconStyle)}}function WCe(i,t){if(1&i&&(lt(0,"span",17),qi(1),ct()),2&i){const e=_e(3).$implicit;Me(1),as(e.label)}}function jCe(i,t){1&i&&ii(0,"span",18),2&i&&ve("innerHTML",_e(3).$implicit.label,wa)}function $Ce(i,t){if(1&i&&(lt(0,"span",19),qi(1),ct()),2&i){const e=_e(3).$implicit;ve("ngClass",e.badgeStyleClass),Me(1),as(e.badge)}}const V8=function(i,t){return{"pi-angle-down":i,"pi-angle-right":t}};function qCe(i,t){if(1&i&&ii(0,"span",20),2&i){const e=_e(4);ve("ngClass",ys(1,V8,e.root,!e.root))}}const U8=function(i){return{"p-menuitem-link":!0,"p-disabled":i}};function XCe(i,t){if(1&i){const e=Pi();lt(0,"a",10),fn("click",function(r){wt(e);const s=_e(2).$implicit;return At(_e().onItemClick(r,s))})("mouseenter",function(r){wt(e);const s=_e(2).$implicit;return At(_e().onItemMouseEnter(r,s))}),Ze(1,GCe,1,2,"span",11),Ze(2,WCe,2,1,"span",12),Ze(3,jCe,1,1,"ng-template",null,13,vc),Ze(5,$Ce,2,2,"span",14),Ze(6,qCe,1,4,"span",15),ct()}if(2&i){const e=co(4),n=_e(2).$implicit,r=_e();ve("target",n.target)("ngClass",Bi(14,U8,n.disabled)),mr("href",n.url,qd)("data-automationid",n.automationId)("title",n.title)("id",n.id)("tabindex",n.disabled?null:"0")("aria-haspopup",null!=r.item.items)("aria-expanded",r.item===r.activeItem),Me(1),ve("ngIf",n.icon),Me(1),ve("ngIf",!1!==n.escape)("ngIfElse",e),Me(3),ve("ngIf",n.badge),Me(1),ve("ngIf",n.items)}}function YCe(i,t){if(1&i&&ii(0,"span",16),2&i){const e=_e(3).$implicit;ve("ngClass",e.icon)("ngStyle",e.iconStyle)}}function KCe(i,t){if(1&i&&(lt(0,"span",17),qi(1),ct()),2&i){const e=_e(3).$implicit;Me(1),as(e.label)}}function ZCe(i,t){1&i&&ii(0,"span",18),2&i&&ve("innerHTML",_e(3).$implicit.label,wa)}function QCe(i,t){if(1&i&&(lt(0,"span",19),qi(1),ct()),2&i){const e=_e(3).$implicit;ve("ngClass",e.badgeStyleClass),Me(1),as(e.badge)}}function JCe(i,t){if(1&i&&ii(0,"span",20),2&i){const e=_e(4);ve("ngClass",ys(1,V8,e.root,!e.root))}}const exe=function(){return{exact:!1}};function txe(i,t){if(1&i){const e=Pi();lt(0,"a",21),fn("click",function(r){wt(e);const s=_e(2).$implicit;return At(_e().onItemClick(r,s))})("mouseenter",function(r){wt(e);const s=_e(2).$implicit;return At(_e().onItemMouseEnter(r,s))}),Ze(1,YCe,1,2,"span",11),Ze(2,KCe,2,1,"span",12),Ze(3,ZCe,1,1,"ng-template",null,22,vc),Ze(5,QCe,2,2,"span",14),Ze(6,JCe,1,4,"span",15),ct()}if(2&i){const e=co(4),n=_e(2).$implicit;ve("routerLink",n.routerLink)("queryParams",n.queryParams)("routerLinkActive","p-menuitem-link-active")("routerLinkActiveOptions",n.routerLinkActiveOptions||Mo(21,exe))("target",n.target)("ngClass",Bi(22,U8,n.disabled))("fragment",n.fragment)("queryParamsHandling",n.queryParamsHandling)("preserveFragment",n.preserveFragment)("skipLocationChange",n.skipLocationChange)("replaceUrl",n.replaceUrl)("state",n.state),mr("data-automationid",n.automationId)("title",n.title)("id",n.id)("tabindex",n.disabled?null:"0"),Me(1),ve("ngIf",n.icon),Me(1),ve("ngIf",!1!==n.escape)("ngIfElse",e),Me(3),ve("ngIf",n.badge),Me(1),ve("ngIf",n.items)}}function nxe(i,t){if(1&i){const e=Pi();lt(0,"p-menubarSub",23),fn("leafClick",function(){return wt(e),At(_e(3).onLeafClick())}),ct()}if(2&i){const e=_e(2).$implicit,n=_e();ve("parentActive",e===n.activeItem)("item",e)("mobileActive",n.mobileActive)("autoDisplay",n.autoDisplay)}}const ixe=function(i,t){return{"p-menuitem":!0,"p-menuitem-active":i,"p-hidden":t}};function rxe(i,t){if(1&i&&(lt(0,"li",5,6),Ze(2,XCe,7,16,"a",7),Ze(3,txe,7,24,"a",8),Ze(4,nxe,1,4,"p-menubarSub",9),ct()),2&i){const e=_e().$implicit,n=_e();Ur(e.styleClass),ve("ngClass",ys(8,ixe,e===n.activeItem,!1===e.visible))("ngStyle",e.style)("tooltipOptions",e.tooltipOptions),Me(2),ve("ngIf",!e.routerLink),Me(1),ve("ngIf",e.routerLink),Me(1),ve("ngIf",e.items)}}function sxe(i,t){if(1&i&&(Ze(0,HCe,1,3,"li",2),Ze(1,rxe,5,11,"li",3)),2&i){const e=t.$implicit;ve("ngIf",e.separator),Me(1),ve("ngIf",!e.separator)}}const oxe=function(i,t){return{"p-submenu-list":i,"p-menubar-root-list":t}},axe=["menubutton"],lxe=["rootmenu"];function cxe(i,t){1&i&&Ki(0)}function uxe(i,t){if(1&i&&(lt(0,"div",9),Ze(1,cxe,1,0,"ng-container",10),ct()),2&i){const e=_e();Me(1),ve("ngTemplateOutlet",e.startTemplate)}}function dxe(i,t){1&i&&Ki(0)}function hxe(i,t){if(1&i&&(lt(0,"div",11),Ze(1,dxe,1,0,"ng-container",10),ct()),2&i){const e=_e();Me(1),ve("ngTemplateOutlet",e.endTemplate)}}function fxe(i,t){1&i&&(lt(0,"div",11),$u(1),ct())}const pxe=function(i){return{"p-menubar p-component":!0,"p-menubar-mobile-active":i}},gxe=["*"];let mxe=(()=>{class i{constructor(e,n,r){this.el=e,this.renderer=n,this.cd=r,this.autoZIndex=!0,this.baseZIndex=0,this.leafClick=new qn,this.menuHoverActive=!1}get parentActive(){return this._parentActive}set parentActive(e){this.root||(this._parentActive=e,e||(this.activeItem=null))}onItemClick(e,n){n.disabled?e.preventDefault():(!n.url&&!n.routerLink&&e.preventDefault(),n.command&&n.command({originalEvent:e,item:n}),n.items&&(this.activeItem&&n===this.activeItem?(this.activeItem=null,this.unbindDocumentClickListener()):(this.activeItem=n,this.root&&this.bindDocumentClickListener())),n.items||this.onLeafClick())}onItemMouseEnter(e,n){n.disabled||this.mobileActive?e.preventDefault():this.root?(this.activeItem||this.autoDisplay)&&(this.activeItem=n,this.bindDocumentClickListener()):(this.activeItem=n,this.bindDocumentClickListener())}onLeafClick(){this.activeItem=null,this.root&&this.unbindDocumentClickListener(),this.leafClick.emit()}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=e=>{this.el&&!this.el.nativeElement.contains(e.target)&&(this.activeItem=null,this.cd.markForCheck(),this.unbindDocumentClickListener())},document.addEventListener("click",this.documentClickListener))}unbindDocumentClickListener(){this.documentClickListener&&(document.removeEventListener("click",this.documentClickListener),this.documentClickListener=null)}ngOnDestroy(){this.unbindDocumentClickListener()}}return i.\u0275fac=function(e){return new(e||i)(Zt(Xn),Zt(h),Zt(Zo))},i.\u0275cmp=Ir({type:i,selectors:[["p-menubarSub"]],hostAttrs:[1,"p-element"],inputs:{item:"item",root:"root",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",mobileActive:"mobileActive",autoDisplay:"autoDisplay",parentActive:"parentActive"},outputs:{leafClick:"leafClick"},decls:2,vars:6,consts:[[3,"ngClass"],["ngFor","",3,"ngForOf"],["class","p-menu-separator","role","separator",3,"ngClass",4,"ngIf"],["role","none","pTooltip","",3,"ngClass","ngStyle","class","tooltipOptions",4,"ngIf"],["role","separator",1,"p-menu-separator",3,"ngClass"],["role","none","pTooltip","",3,"ngClass","ngStyle","tooltipOptions"],["listItem",""],["role","menuitem","pRipple","",3,"target","ngClass","click","mouseenter",4,"ngIf"],["role","menuitem","pRipple","",3,"routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","target","ngClass","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","click","mouseenter",4,"ngIf"],[3,"parentActive","item","mobileActive","autoDisplay","leafClick",4,"ngIf"],["role","menuitem","pRipple","",3,"target","ngClass","click","mouseenter"],["class","p-menuitem-icon",3,"ngClass","ngStyle",4,"ngIf"],["class","p-menuitem-text",4,"ngIf","ngIfElse"],["htmlLabel",""],["class","p-menuitem-badge",3,"ngClass",4,"ngIf"],["class","p-submenu-icon pi",3,"ngClass",4,"ngIf"],[1,"p-menuitem-icon",3,"ngClass","ngStyle"],[1,"p-menuitem-text"],[1,"p-menuitem-text",3,"innerHTML"],[1,"p-menuitem-badge",3,"ngClass"],[1,"p-submenu-icon","pi",3,"ngClass"],["role","menuitem","pRipple","",3,"routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","target","ngClass","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","click","mouseenter"],["htmlRouteLabel",""],[3,"parentActive","item","mobileActive","autoDisplay","leafClick"]],template:function(e,n){1&e&&(lt(0,"ul",0),Ze(1,sxe,2,2,"ng-template",1),ct()),2&e&&(ve("ngClass",ys(3,oxe,!n.root,n.root)),mr("role",n.root?"menubar":"menu"),Me(1),ve("ngForOf",n.root?n.item:n.item.items))},dependencies:[bo,Su,Wo,Qo,tC,GD,_d,o_,i],encapsulation:2}),i})(),vxe=(()=>{class i{constructor(e,n,r,s){this.el=e,this.renderer=n,this.cd=r,this.config=s,this.autoZIndex=!0,this.baseZIndex=0}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"start":this.startTemplate=e.template;break;case"end":this.endTemplate=e.template}})}toggle(e){this.mobileActive?(this.hide(),Dl.clear(this.rootmenu.el.nativeElement)):(this.mobileActive=!0,Dl.set("menu",this.rootmenu.el.nativeElement,this.config.zIndex.menu)),this.bindOutsideClickListener(),e.preventDefault()}bindOutsideClickListener(){this.outsideClickListener||(this.outsideClickListener=e=>{this.mobileActive&&this.rootmenu.el.nativeElement!==e.target&&!this.rootmenu.el.nativeElement.contains(e.target)&&this.menubutton.nativeElement!==e.target&&!this.menubutton.nativeElement.contains(e.target)&&this.hide()},document.addEventListener("click",this.outsideClickListener))}hide(){this.mobileActive=!1,this.cd.markForCheck(),Dl.clear(this.rootmenu.el.nativeElement),this.unbindOutsideClickListener()}onLeafClick(){this.hide()}unbindOutsideClickListener(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null)}ngOnDestroy(){this.unbindOutsideClickListener()}}return i.\u0275fac=function(e){return new(e||i)(Zt(Xn),Zt(h),Zt(Zo),Zt(Tp))},i.\u0275cmp=Ir({type:i,selectors:[["p-menubar"]],contentQueries:function(e,n,r){if(1&e&&cl(r,_l,4),2&e){let s;vr(s=yr())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(vs(axe,5),vs(lxe,5)),2&e){let r;vr(r=yr())&&(n.menubutton=r.first),vr(r=yr())&&(n.rootmenu=r.first)}},hostAttrs:[1,"p-element"],inputs:{model:"model",style:"style",styleClass:"styleClass",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",autoDisplay:"autoDisplay"},ngContentSelectors:gxe,decls:10,vars:14,consts:[[3,"ngClass","ngStyle"],["class","p-menubar-start",4,"ngIf"],["tabindex","0",1,"p-menubar-button",3,"click"],["menubutton",""],[1,"pi","pi-bars"],["root","root",3,"item","baseZIndex","autoZIndex","mobileActive","autoDisplay","leafClick"],["rootmenu",""],["class","p-menubar-end",4,"ngIf","ngIfElse"],["legacy",""],[1,"p-menubar-start"],[4,"ngTemplateOutlet"],[1,"p-menubar-end"]],template:function(e,n){if(1&e&&(dg(),lt(0,"div",0),Ze(1,uxe,2,1,"div",1),lt(2,"a",2,3),fn("click",function(s){return n.toggle(s)}),ii(4,"i",4),ct(),lt(5,"p-menubarSub",5,6),fn("leafClick",function(){return n.onLeafClick()}),ct(),Ze(7,hxe,2,1,"div",7),Ze(8,fxe,2,0,"ng-template",null,8,vc),ct()),2&e){const r=co(9);Ur(n.styleClass),ve("ngClass",Bi(12,pxe,n.mobileActive))("ngStyle",n.style),Me(1),ve("ngIf",n.startTemplate),Me(4),ve("item",n.model)("baseZIndex",n.baseZIndex)("autoZIndex",n.autoZIndex)("mobileActive",n.mobileActive)("autoDisplay",n.autoDisplay),Me(2),ve("ngIf",n.endTemplate)("ngIfElse",r)}},dependencies:[bo,Wo,rc,Qo,mxe],styles:[".p-menubar{display:flex;align-items:center}.p-menubar ul{margin:0;padding:0;list-style:none}.p-menubar .p-menuitem-link{cursor:pointer;display:flex;align-items:center;text-decoration:none;overflow:hidden;position:relative}.p-menubar .p-menuitem-text{line-height:1}.p-menubar .p-menuitem{position:relative}.p-menubar-root-list{display:flex;align-items:center}.p-menubar-root-list>li ul{display:none;z-index:1}.p-menubar-root-list>.p-menuitem-active>p-menubarsub>.p-submenu-list{display:block}.p-menubar .p-submenu-list{display:none;position:absolute;z-index:1}.p-menubar .p-submenu-list>.p-menuitem-active>p-menubarsub>.p-submenu-list{display:block;left:100%;top:0}.p-menubar .p-submenu-list .p-menuitem-link .p-submenu-icon{margin-left:auto}.p-menubar .p-menubar-custom,.p-menubar .p-menubar-end{margin-left:auto;align-self:center}.p-menubar-button{display:none;cursor:pointer;align-items:center;justify-content:center}\n"],encapsulation:2,changeDetection:0}),i})(),yxe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({imports:[Ns,i_,$c,iv,Na,i_,iv,Na]}),i})();function _xe(i,t){1&i&&ii(0,"img",2)}let bxe=(()=>{class i{constructor(e,n){this.title=e,this.store=n,this.items=[],this.subscriptions=[],this.title.setTitle("MySystem 1.1.1")}ngOnInit(){this.items=[{label:"Graph",icon:"pi pi-fw pi-box",items:[{label:"Graph(s)",icon:"pi pi-fw pi-book",routerLink:"/graphs"}]},{label:"Style",icon:"pi pi-fw pi-box",items:[{label:"Style(s)",icon:"pi pi-fw pi-book",routerLink:"/styles"}]},{label:"Misc",icon:"pi pi-fw pi-cog",items:[{label:"Preferences",icon:"pi pi-fw pi-database",routerLink:"/preferences"},{label:"Images",icon:"pi pi-fw pi-cloud-upload",routerLink:"/converters/images"},{label:"About",icon:"pi pi-fw pi-at",routerLink:"/about"}]}]}ngOnDestroy(){this.subscriptions&&_r.each(this.subscriptions,e=>{e.unsubscribe()})}}return i.\u0275fac=function(e){return new(e||i)(Zt(iD),Zt(ey))},i.\u0275cmp=Ir({type:i,selectors:[["app-root"]],decls:3,vars:1,consts:[[3,"model"],["pTemplate","start"],["src","assets/favicon.png","height","40",1,"mr-2"]],template:function(e,n){1&e&&(lt(0,"p-menubar",0),Ze(1,_xe,1,0,"ng-template",1),ct(),ii(2,"router-outlet")),2&e&&ve("model",n.items)},dependencies:[LD,_l,vxe]}),i})();function H8(i){return new gi(3e3,!1)}function twe(){return typeof window<"u"&&typeof window.document<"u"}function cR(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function M_(i){switch(i.length){case 0:return new Cw;case 1:return i[0];default:return new zV(i)}}function G8(i,t,e,n,r=new Map,s=new Map){const o=[],l=[];let u=-1,p=null;if(n.forEach(v=>{const x=v.get("offset"),I=x==u,T=I&&p||new Map;v.forEach((F,j)=>{let X=j,ce=F;if("offset"!==j)switch(X=t.normalizePropertyName(X,o),ce){case"!":ce=r.get(j);break;case sy:ce=s.get(j);break;default:ce=t.normalizeStyleValue(j,X,ce,o)}T.set(X,ce)}),I||l.push(T),p=T,u=x}),o.length)throw function Gxe(i){return new gi(3502,!1)}();return l}function uR(i,t,e,n){switch(t){case"start":i.onStart(()=>n(e&&dR(e,"start",i)));break;case"done":i.onDone(()=>n(e&&dR(e,"done",i)));break;case"destroy":i.onDestroy(()=>n(e&&dR(e,"destroy",i)))}}function dR(i,t,e){const s=hR(i.element,i.triggerName,i.fromState,i.toState,t||i.phaseName,e.totalTime??i.totalTime,!!e.disabled),o=i._data;return null!=o&&(s._data=o),s}function hR(i,t,e,n,r="",s=0,o){return{element:i,triggerName:t,fromState:e,toState:n,phaseName:r,totalTime:s,disabled:!!o}}function Fp(i,t,e){let n=i.get(t);return n||i.set(t,n=e),n}function W8(i){const t=i.indexOf(":");return[i.substring(1,t),i.slice(t+1)]}let fR=(i,t)=>!1,j8=(i,t,e)=>[],$8=null;function pR(i){const t=i.parentNode||i.host;return t===$8?null:t}(cR()||typeof Element<"u")&&(twe()?($8=(()=>document.documentElement)(),fR=(i,t)=>{for(;t;){if(t===i)return!0;t=pR(t)}return!1}):fR=(i,t)=>i.contains(t),j8=(i,t,e)=>{if(e)return Array.from(i.querySelectorAll(t));const n=i.querySelector(t);return n?[n]:[]});let ib=null,q8=!1;const X8=fR,Y8=j8;let K8=(()=>{class i{validateStyleProperty(e){return function iwe(i){ib||(ib=function rwe(){return typeof document<"u"?document.body:null}()||{},q8=!!ib.style&&"WebkitAppearance"in ib.style);let t=!0;return ib.style&&!function nwe(i){return"ebkit"==i.substring(1,6)}(i)&&(t=i in ib.style,!t&&q8&&(t="Webkit"+i.charAt(0).toUpperCase()+i.slice(1)in ib.style)),t}(e)}matchesElement(e,n){return!1}containsElement(e,n){return X8(e,n)}getParentElement(e){return pR(e)}query(e,n,r){return Y8(e,n,r)}computeStyle(e,n,r){return r||""}animate(e,n,r,s,o,l=[],u){return new Cw(r,s)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})(),gR=(()=>{class i{}return i.NOOP=new K8,i})();const mR="ng-enter",WE="ng-leave",jE="ng-trigger",$E=".ng-trigger",Q8="ng-animating",vR=".ng-animating";function D_(i){if("number"==typeof i)return i;const t=i.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:yR(parseFloat(t[1]),t[2])}function yR(i,t){return"s"===t?1e3*i:i}function qE(i,t,e){return i.hasOwnProperty("duration")?i:function awe(i,t,e){let r,s=0,o="";if("string"==typeof i){const l=i.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===l)return t.push(H8()),{duration:0,delay:0,easing:""};r=yR(parseFloat(l[1]),l[2]);const u=l[3];null!=u&&(s=yR(parseFloat(u),l[4]));const p=l[5];p&&(o=p)}else r=i;if(!e){let l=!1,u=t.length;r<0&&(t.push(function Cxe(){return new gi(3100,!1)}()),l=!0),s<0&&(t.push(function xxe(){return new gi(3101,!1)}()),l=!0),l&&t.splice(u,0,H8())}return{duration:r,delay:s,easing:o}}(i,t,e)}function wA(i,t={}){return Object.keys(i).forEach(e=>{t[e]=i[e]}),t}function J8(i){const t=new Map;return Object.keys(i).forEach(e=>{t.set(e,i[e])}),t}function L_(i,t=new Map,e){if(e)for(let[n,r]of e)t.set(n,r);for(let[n,r]of i)t.set(n,r);return t}function t6(i,t,e){return e?t+":"+e+";":""}function n6(i){let t="";for(let e=0;e<i.style.length;e++){const n=i.style.item(e);t+=t6(0,n,i.style.getPropertyValue(n))}for(const e in i.style)i.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=t6(0,dwe(e),i.style[e]));i.setAttribute("style",t)}function fv(i,t,e){i.style&&(t.forEach((n,r)=>{const s=bR(r);e&&!e.has(r)&&e.set(r,i.style[s]),i.style[s]=n}),cR()&&n6(i))}function rb(i,t){i.style&&(t.forEach((e,n)=>{const r=bR(n);i.style[r]=""}),cR()&&n6(i))}function AA(i){return Array.isArray(i)?1==i.length?i[0]:FV(i):i}const _R=new RegExp("{{\\s*(.+?)\\s*}}","g");function r6(i){let t=[];if("string"==typeof i){let e;for(;e=_R.exec(i);)t.push(e[1]);_R.lastIndex=0}return t}function XE(i,t,e){const n=i.toString(),r=n.replace(_R,(s,o)=>{let l=t[o];return null==l&&(e.push(function Axe(i){return new gi(3003,!1)}()),l=""),l.toString()});return r==n?i:r}function YE(i){const t=[];let e=i.next();for(;!e.done;)t.push(e.value),e=i.next();return t}const uwe=/-+([a-z0-9])/g;function bR(i){return i.replace(uwe,(...t)=>t[1].toUpperCase())}function dwe(i){return i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Np(i,t,e){switch(t.type){case 7:return i.visitTrigger(t,e);case 0:return i.visitState(t,e);case 1:return i.visitTransition(t,e);case 2:return i.visitSequence(t,e);case 3:return i.visitGroup(t,e);case 4:return i.visitAnimate(t,e);case 5:return i.visitKeyframes(t,e);case 6:return i.visitStyle(t,e);case 8:return i.visitReference(t,e);case 9:return i.visitAnimateChild(t,e);case 10:return i.visitAnimateRef(t,e);case 11:return i.visitQuery(t,e);case 12:return i.visitStagger(t,e);default:throw function Ixe(i){return new gi(3004,!1)}()}}function s6(i,t){return window.getComputedStyle(i)[t]}function vwe(i,t){const e=[];return"string"==typeof i?i.split(/\s*,\s*/).forEach(n=>function ywe(i,t,e){if(":"==i[0]){const u=function _we(i,t){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,n)=>parseFloat(n)>parseFloat(e);case":decrement":return(e,n)=>parseFloat(n)<parseFloat(e);default:return t.push(function zxe(i){return new gi(3016,!1)}()),"* => *"}}(i,e);if("function"==typeof u)return void t.push(u);i=u}const n=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==n||n.length<4)return e.push(function Bxe(i){return new gi(3015,!1)}()),t;const r=n[1],s=n[2],o=n[3];t.push(o6(r,o));"<"==s[0]&&!("*"==r&&"*"==o)&&t.push(o6(o,r))}(n,e,t)):e.push(i),e}const JE=new Set(["true","1"]),eT=new Set(["false","0"]);function o6(i,t){const e=JE.has(i)||eT.has(i),n=JE.has(t)||eT.has(t);return(r,s)=>{let o="*"==i||i==r,l="*"==t||t==s;return!o&&e&&"boolean"==typeof r&&(o=r?JE.has(i):eT.has(i)),!l&&n&&"boolean"==typeof s&&(l=s?JE.has(t):eT.has(t)),o&&l}}const bwe=new RegExp("s*:selfs*,?","g");function CR(i,t,e,n){return new Cwe(i).build(t,e,n)}class Cwe{constructor(t){this._driver=t}build(t,e,n){const r=new Awe(e);return this._resetContextStyleTimingState(r),Np(this,AA(t),r)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles=new Map,t.collectedStyles.set("",new Map),t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const s=[],o=[];return"@"==t.name.charAt(0)&&e.errors.push(function Exe(){return new gi(3006,!1)}()),t.definitions.forEach(l=>{if(this._resetContextStyleTimingState(e),0==l.type){const u=l,p=u.name;p.toString().split(/\s*,\s*/).forEach(v=>{u.name=v,s.push(this.visitState(u,e))}),u.name=p}else if(1==l.type){const u=this.visitTransition(l,e);n+=u.queryCount,r+=u.depCount,o.push(u)}else e.errors.push(function Txe(){return new gi(3007,!1)}())}),{type:7,name:t.name,states:s,transitions:o,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const s=new Set,o=r||{};n.styles.forEach(l=>{l instanceof Map&&l.forEach(u=>{r6(u).forEach(p=>{o.hasOwnProperty(p)||s.add(p)})})}),s.size&&(YE(s.values()),e.errors.push(function Mxe(i,t){return new gi(3008,!1)}()))}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=Np(this,AA(t.animation),e);return{type:1,matchers:vwe(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:sb(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(n=>Np(this,n,e)),options:sb(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const s=t.steps.map(o=>{e.currentTime=n;const l=Np(this,o,e);return r=Math.max(r,e.currentTime),l});return e.currentTime=r,{type:3,steps:s,options:sb(t.options)}}visitAnimate(t,e){const n=function Swe(i,t){if(i.hasOwnProperty("duration"))return i;if("number"==typeof i)return xR(qE(i,t).duration,0,"");const e=i;if(e.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=xR(0,0,"");return s.dynamic=!0,s.strValue=e,s}const r=qE(e,t);return xR(r.duration,r.delay,r.easing)}(t.timings,e.errors);e.currentAnimateTimings=n;let r,s=t.styles?t.styles:Qa({});if(5==s.type)r=this.visitKeyframes(s,e);else{let o=t.styles,l=!1;if(!o){l=!0;const p={};n.easing&&(p.easing=n.easing),o=Qa(p)}e.currentTime+=n.duration+n.delay;const u=this.visitStyle(o,e);u.isEmptyStep=l,r=u}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[],r=Array.isArray(t.styles)?t.styles:[t.styles];for(let l of r)"string"==typeof l?l===sy?n.push(l):e.errors.push(new gi(3002,!1)):n.push(J8(l));let s=!1,o=null;return n.forEach(l=>{if(l instanceof Map&&(l.has("easing")&&(o=l.get("easing"),l.delete("easing")),!s))for(let u of l.values())if(u.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:n,easing:o,offset:t.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,s=e.currentTime;n&&s>0&&(s-=n.duration+n.delay),t.styles.forEach(o=>{"string"!=typeof o&&o.forEach((l,u)=>{const p=e.collectedStyles.get(e.currentQuerySelector),v=p.get(u);let x=!0;v&&(s!=r&&s>=v.startTime&&r<=v.endTime&&(e.errors.push(function Lxe(i,t,e,n,r){return new gi(3010,!1)}()),x=!1),s=v.startTime),x&&p.set(u,{startTime:s,endTime:r}),e.options&&function cwe(i,t,e){const n=t.params||{},r=r6(i);r.length&&r.forEach(s=>{n.hasOwnProperty(s)||e.push(function wxe(i){return new gi(3001,!1)}())})}(l,e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function Pxe(){return new gi(3011,!1)}()),n;let s=0;const o=[];let l=!1,u=!1,p=0;const v=t.steps.map(ce=>{const we=this._makeStyleAst(ce,e);let ye=null!=we.offset?we.offset:function Iwe(i){if("string"==typeof i)return null;let t=null;if(Array.isArray(i))i.forEach(e=>{if(e instanceof Map&&e.has("offset")){const n=e;t=parseFloat(n.get("offset")),n.delete("offset")}});else if(i instanceof Map&&i.has("offset")){const e=i;t=parseFloat(e.get("offset")),e.delete("offset")}return t}(we.styles),Ae=0;return null!=ye&&(s++,Ae=we.offset=ye),u=u||Ae<0||Ae>1,l=l||Ae<p,p=Ae,o.push(Ae),we});u&&e.errors.push(function Rxe(){return new gi(3012,!1)}()),l&&e.errors.push(function kxe(){return new gi(3200,!1)}());const x=t.steps.length;let I=0;s>0&&s<x?e.errors.push(function Oxe(){return new gi(3202,!1)}()):0==s&&(I=1/(x-1));const T=x-1,F=e.currentTime,j=e.currentAnimateTimings,X=j.duration;return v.forEach((ce,we)=>{const ye=I>0?we==T?1:I*we:o[we],Ae=ye*X;e.currentTime=F+j.delay+Ae,j.duration=Ae,this._validateStyleAst(ce,e),ce.offset=ye,n.styles.push(ce)}),n}visitReference(t,e){return{type:8,animation:Np(this,AA(t.animation),e),options:sb(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:sb(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:sb(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[s,o]=function xwe(i){const t=!!i.split(/\s*,\s*/).find(e=>":self"==e);return t&&(i=i.replace(bwe,"")),i=i.replace(/@\*/g,$E).replace(/@\w+/g,e=>$E+"-"+e.slice(1)).replace(/:animating/g,vR),[i,t]}(t.selector);e.currentQuerySelector=n.length?n+" "+s:s,Fp(e.collectedStyles,e.currentQuerySelector,new Map);const l=Np(this,AA(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:l,originalSelector:t.selector,options:sb(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function Fxe(){return new gi(3013,!1)}());const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:qE(t.timings,e.errors,!0);return{type:12,animation:Np(this,AA(t.animation),e),timings:n,options:null}}}class Awe{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function sb(i){return i?(i=wA(i)).params&&(i.params=function wwe(i){return i?wA(i):null}(i.params)):i={},i}function xR(i,t,e){return{duration:i,delay:t,easing:e}}function wR(i,t,e,n,r,s,o=null,l=!1){return{type:1,element:i,keyframes:t,preStyleProps:e,postStyleProps:n,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:l}}class tT{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const Mwe=new RegExp(":enter","g"),Lwe=new RegExp(":leave","g");function AR(i,t,e,n,r,s=new Map,o=new Map,l,u,p=[]){return(new Pwe).buildKeyframes(i,t,e,n,r,s,o,l,u,p)}class Pwe{buildKeyframes(t,e,n,r,s,o,l,u,p,v=[]){p=p||new tT;const x=new IR(t,e,p,r,s,v,[]);x.options=u;const I=u.delay?D_(u.delay):0;x.currentTimeline.delayNextStep(I),x.currentTimeline.setStyles([o],null,x.errors,u),Np(this,n,x);const T=x.timelines.filter(F=>F.containsAnimation());if(T.length&&l.size){let F;for(let j=T.length-1;j>=0;j--){const X=T[j];if(X.element===e){F=X;break}}F&&!F.allowOnlyTimelineStyles()&&F.setStyles([l],null,x.errors,u)}return T.length?T.map(F=>F.buildKeyframes()):[wR(e,[],[],[],0,I,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.get(e.element);if(n){const r=e.createSubContext(t.options),s=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);s!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let s=e.currentTimeline.currentTime;const o=null!=n.duration?D_(n.duration):null,l=null!=n.delay?D_(n.delay):null;return 0!==o&&t.forEach(u=>{const p=e.appendInstructionToTimeline(u,o,l);s=Math.max(s,p.duration+p.delay)}),s}visitReference(t,e){e.updateOptions(t.options,!0),Np(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const s=t.options;if(s&&(s.params||s.delay)&&(r=e.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=nT);const o=D_(s.delay);r.delayNextStep(o)}t.steps.length&&(t.steps.forEach(o=>Np(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const s=t.options&&t.options.delay?D_(t.options.delay):0;t.steps.forEach(o=>{const l=e.createSubContext(t.options);s&&l.delayNextStep(s),Np(this,o,l),r=Math.max(r,l.currentTimeline.currentTime),n.push(l.currentTimeline)}),n.forEach(o=>e.currentTimeline.mergeTimelineCollectedStyles(o)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return qE(e.params?XE(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const s=t.style;5==s.type?this.visitKeyframes(s,e):(e.incrementTime(n.duration),this.visitStyle(s,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.hasCurrentStyleProperties()&&n.forwardFrame();const s=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(s):n.setStyles(t.styles,s,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,s=n.duration,l=e.createSubContext().currentTimeline;l.easing=n.easing,t.styles.forEach(u=>{l.forwardTime((u.offset||0)*s),l.setStyles(u.styles,u.easing,e.errors,e.options),l.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(l),e.transformIntoNewTimeline(r+s),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},s=r.delay?D_(r.delay):0;s&&(6===e.previousNode.type||0==n&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=nT);let o=n;const l=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=l.length;let u=null;l.forEach((p,v)=>{e.currentQueryIndex=v;const x=e.createSubContext(t.options,p);s&&x.delayNextStep(s),p===e.element&&(u=x.currentTimeline),Np(this,t.animation,x),x.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,x.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),u&&(e.currentTimeline.mergeTimelineCollectedStyles(u),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,s=t.timings,o=Math.abs(s.duration),l=o*(e.currentQueryTotal-1);let u=o*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":u=l-u;break;case"full":u=n.currentStaggerTime}const v=e.currentTimeline;u&&v.delayNextStep(u);const x=v.currentTime;Np(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-x+(r.startTime-n.currentTimeline.startTime)}}const nT={};class IR{constructor(t,e,n,r,s,o,l,u){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=l,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=nT,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=u||new iT(this._driver,e,0),l.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=D_(n.duration)),null!=n.delay&&(r.delay=D_(n.delay));const s=n.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(l=>{(!e||!o.hasOwnProperty(l))&&(o[l]=XE(s[l],o,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(r=>{n[r]=e[r]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,s=new IR(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(t),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(t){return this.previousNode=nT,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:e??t.duration,delay:this.currentTimeline.currentTime+(n??0)+t.delay,easing:""},s=new Rwe(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,s,o){let l=[];if(r&&l.push(this.element),t.length>0){t=(t=t.replace(Mwe,"."+this._enterClassName)).replace(Lwe,"."+this._leaveClassName);let p=this._driver.query(this.element,t,1!=n);0!==n&&(p=n<0?p.slice(p.length+n,p.length):p.slice(0,n)),l.push(...p)}return!s&&0==l.length&&o.push(function Nxe(i){return new gi(3014,!1)}()),l}}class iT{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new iT(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,n]of this._globalTimelineStyles)this._backFill.set(e,n||sy),this._currentKeyframe.set(e,sy);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&this._previousKeyframe.set("easing",e);const s=r&&r.params||{},o=function kwe(i,t){const e=new Map;let n;return i.forEach(r=>{if("*"===r){n=n||t.keys();for(let s of n)e.set(s,sy)}else L_(r,e)}),e}(t,this._globalTimelineStyles);for(let[l,u]of o){const p=XE(u,s,n);this._pendingStyles.set(l,p),this._localTimelineStyles.has(l)||this._backFill.set(l,this._globalTimelineStyles.get(l)??sy),this._updateStyle(l,p)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,n)=>{const r=this._styleSummary.get(n);(!r||e.time>r.time)&&this._updateStyle(n,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((l,u)=>{const p=L_(l,new Map,this._backFill);p.forEach((v,x)=>{"!"===v?t.add(x):v===sy&&e.add(x)}),n||p.set("offset",u/this.duration),r.push(p)});const s=t.size?YE(t.values()):[],o=e.size?YE(e.values()):[];if(n){const l=r[0],u=new Map(l);l.set("offset",0),u.set("offset",1),r=[l,u]}return wR(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class Rwe extends iT{constructor(t,e,n,r,s,o,l=!1){super(t,e,o.delay),this.keyframes=n,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=l,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const s=[],o=n+e,l=e/o,u=L_(t[0]);u.set("offset",0),s.push(u);const p=L_(t[0]);p.set("offset",c6(l)),s.push(p);const v=t.length-1;for(let x=1;x<=v;x++){let I=L_(t[x]);const T=I.get("offset");I.set("offset",c6((e+T*n)/o)),s.push(I)}n=o,e=0,r="",t=s}return wR(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function c6(i,t=3){const e=Math.pow(10,t-1);return Math.round(i*e)/e}class SR{}const Owe=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Fwe extends SR{normalizePropertyName(t,e){return bR(t)}normalizeStyleValue(t,e,n,r){let s="";const o=n.toString().trim();if(Owe.has(e)&&0!==n&&"0"!==n)if("number"==typeof n)s="px";else{const l=n.match(/^[+-]?[\d\.]+([a-z]*)$/);l&&0==l[1].length&&r.push(function Sxe(i,t){return new gi(3005,!1)}())}return o+s}}function u6(i,t,e,n,r,s,o,l,u,p,v,x,I){return{type:0,element:i,triggerName:t,isRemovalTransition:r,fromState:e,fromStyles:s,toState:n,toStyles:o,timelines:l,queriedElements:u,preStyleProps:p,postStyleProps:v,totalTime:x,errors:I}}const ER={};class d6{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function Nwe(i,t,e,n,r){return i.some(s=>s(t,e,n,r))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){let r=this._stateStyles.get("*");return void 0!==t&&(r=this._stateStyles.get(t?.toString())||r),r?r.buildStyles(e,n):new Map}build(t,e,n,r,s,o,l,u,p,v){const x=[],I=this.ast.options&&this.ast.options.params||ER,F=this.buildStyles(n,l&&l.params||ER,x),j=u&&u.params||ER,X=this.buildStyles(r,j,x),ce=new Set,we=new Map,ye=new Map,Ae="void"===r,We={params:Bwe(j,I),delay:this.ast.options?.delay},ot=v?[]:AR(t,e,this.ast.animation,s,o,F,X,We,p,x);let Mt=0;if(ot.forEach(yt=>{Mt=Math.max(yt.duration+yt.delay,Mt)}),x.length)return u6(e,this._triggerName,n,r,Ae,F,X,[],[],we,ye,Mt,x);ot.forEach(yt=>{const tn=yt.element,zn=Fp(we,tn,new Set);yt.preStyleProps.forEach(Un=>zn.add(Un));const Qn=Fp(ye,tn,new Set);yt.postStyleProps.forEach(Un=>Qn.add(Un)),tn!==e&&ce.add(tn)});const Xe=YE(ce.values());return u6(e,this._triggerName,n,r,Ae,F,X,ot,Xe,we,ye,Mt)}}function Bwe(i,t){const e=wA(t);for(const n in i)i.hasOwnProperty(n)&&null!=i[n]&&(e[n]=i[n]);return e}class zwe{constructor(t,e,n){this.styles=t,this.defaultParams=e,this.normalizer=n}buildStyles(t,e){const n=new Map,r=wA(this.defaultParams);return Object.keys(t).forEach(s=>{const o=t[s];null!==o&&(r[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,l)=>{o&&(o=XE(o,r,e));const u=this.normalizer.normalizePropertyName(l,e);o=this.normalizer.normalizeStyleValue(l,u,o,e),n.set(u,o)})}),n}}class Uwe{constructor(t,e,n){this.name=t,this.ast=e,this._normalizer=n,this.transitionFactories=[],this.states=new Map,e.states.forEach(r=>{this.states.set(r.name,new zwe(r.style,r.options&&r.options.params||{},n))}),h6(this.states,"true","1"),h6(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new d6(t,r,this.states))}),this.fallbackTransition=function Hwe(i,t,e){return new d6(i,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,l)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(o=>o.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function h6(i,t,e){i.has(t)?i.has(e)||i.set(e,i.get(t)):i.has(e)&&i.set(t,i.get(e))}const Gwe=new tT;class Wwe{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,e){const n=[],s=CR(this._driver,e,n,[]);if(n.length)throw function Wxe(i){return new gi(3503,!1)}();this._animations.set(t,s)}_buildPlayer(t,e,n){const r=t.element,s=G8(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,s,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],s=this._animations.get(t);let o;const l=new Map;if(s?(o=AR(this._driver,e,s,mR,WE,new Map,new Map,n,Gwe,r),o.forEach(v=>{const x=Fp(l,v.element,new Map);v.postStyleProps.forEach(I=>x.set(I,null))})):(r.push(function jxe(){return new gi(3300,!1)}()),o=[]),r.length)throw function $xe(i){return new gi(3504,!1)}();l.forEach((v,x)=>{v.forEach((I,T)=>{v.set(T,this._driver.computeStyle(x,T,sy))})});const p=M_(o.map(v=>{const x=l.get(v.element);return this._buildPlayer(v,new Map,x)}));return this._playersById.set(t,p),p.onDestroy(()=>this.destroy(t)),this.players.push(p),p}destroy(t){const e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById.get(t);if(!e)throw function qxe(i){return new gi(3301,!1)}();return e}listen(t,e,n,r){const s=hR(e,"","","");return uR(this._getPlayer(t),n,s,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const s=this._getPlayer(t);switch(n){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const f6="ng-animate-queued",TR="ng-animate-disabled",Ywe=[],p6={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Kwe={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ag="__ng_removed";class MR{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=function eAe(i){return i??null}(n?t.value:t),n){const s=wA(t);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const n=this.options.params;Object.keys(e).forEach(r=>{null==n[r]&&(n[r]=e[r])})}}}const IA="void",DR=new MR(IA);class Zwe{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Ig(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.has(e))throw function Xxe(i,t){return new gi(3302,!1)}();if(null==n||0==n.length)throw function Yxe(i){return new gi(3303,!1)}();if(!function tAe(i){return"start"==i||"done"==i}(n))throw function Kxe(i,t){return new gi(3400,!1)}();const s=Fp(this._elementListeners,t,[]),o={name:e,phase:n,callback:r};s.push(o);const l=Fp(this._engine.statesByElement,t,new Map);return l.has(e)||(Ig(t,jE),Ig(t,jE+"-"+e),l.set(e,DR)),()=>{this._engine.afterFlush(()=>{const u=s.indexOf(o);u>=0&&s.splice(u,1),this._triggers.has(e)||l.delete(e)})}}register(t,e){return!this._triggers.has(t)&&(this._triggers.set(t,e),!0)}_getTrigger(t){const e=this._triggers.get(t);if(!e)throw function Zxe(i){return new gi(3401,!1)}();return e}trigger(t,e,n,r=!0){const s=this._getTrigger(e),o=new LR(this.id,e,t);let l=this._engine.statesByElement.get(t);l||(Ig(t,jE),Ig(t,jE+"-"+e),this._engine.statesByElement.set(t,l=new Map));let u=l.get(e);const p=new MR(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&u&&p.absorbOptions(u.options),l.set(e,p),u||(u=DR),p.value!==IA&&u.value===p.value){if(!function rAe(i,t){const e=Object.keys(i),n=Object.keys(t);if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){const s=e[r];if(!t.hasOwnProperty(s)||i[s]!==t[s])return!1}return!0}(u.params,p.params)){const j=[],X=s.matchStyles(u.value,u.params,j),ce=s.matchStyles(p.value,p.params,j);j.length?this._engine.reportError(j):this._engine.afterFlush(()=>{rb(t,X),fv(t,ce)})}return}const I=Fp(this._engine.playersByElement,t,[]);I.forEach(j=>{j.namespaceId==this.id&&j.triggerName==e&&j.queued&&j.destroy()});let T=s.matchTransition(u.value,p.value,t,p.params),F=!1;if(!T){if(!r)return;T=s.fallbackTransition,F=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:T,fromState:u,toState:p,player:o,isFallbackTransition:F}),F||(Ig(t,f6),o.onStart(()=>{nx(t,f6)})),o.onDone(()=>{let j=this.players.indexOf(o);j>=0&&this.players.splice(j,1);const X=this._engine.playersByElement.get(t);if(X){let ce=X.indexOf(o);ce>=0&&X.splice(ce,1)}}),this.players.push(o),I.push(o),o}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(n=>n.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,$E,!0);n.forEach(r=>{if(r[Ag])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,e,n,r){const s=this._engine.statesByElement.get(t),o=new Map;if(s){const l=[];if(s.forEach((u,p)=>{if(o.set(p,u.value),this._triggers.has(p)){const v=this.trigger(t,p,IA,r);v&&l.push(v)}}),l.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,o),n&&M_(l).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),n=this._engine.statesByElement.get(t);if(e&&n){const r=new Set;e.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const u=this._triggers.get(o).fallbackTransition,p=n.get(o)||DR,v=new MR(IA),x=new LR(this.id,o,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:o,transition:u,fromState:p,toState:v,player:x,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const s=n.players.length?n.playersByQueriedElement.get(t):[];if(s&&s.length)r=!0;else{let o=t;for(;o=o.parentNode;)if(n.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const s=t[Ag];(!s||s===p6)&&(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){Ig(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const s=n.element,o=this._elementListeners.get(s);o&&o.forEach(l=>{if(l.name==n.triggerName){const u=hR(s,n.triggerName,n.fromState.value,n.toState.value);u._data=t,uR(n.player,l.phase,u,l.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((n,r)=>{const s=n.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(n.element,r.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(n=>n.element===t)||e,e}}class Qwe{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(n=>{n.queued&&t.push(n)})}),t}createNamespace(t,e){const n=new Zwe(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList,r=this.namespacesByHostElement;if(n.length-1>=0){let o=!1,l=this.driver.getParentElement(e);for(;l;){const u=r.get(l);if(u){const p=n.indexOf(u);n.splice(p+1,0,t),o=!0;break}l=this.driver.getParentElement(l)}o||n.unshift(t)}else n.push(t);return r.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const r=this._namespaceList.indexOf(n);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n)for(let r of n.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&e.add(s)}return e}trigger(t,e,n,r){if(rT(e)){const s=this._fetchNamespace(t);if(s)return s.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!rT(e))return;const s=e[Ag];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(e);o>=0&&this.collectedLeaveElements.splice(o,1)}if(t){const o=this._fetchNamespace(t);o&&o.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Ig(t,TR)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),nx(t,TR))}removeNode(t,e,n,r){if(rT(e)){const s=t?this._fetchNamespace(t):null;if(s?s.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const o=this.namespacesByHostElement.get(e);o&&o.id!==t&&o.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r,s){this.collectedLeaveElements.push(e),e[Ag]={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1,previousTriggersValues:s}}listen(t,e,n,r,s){return rT(e)?this._fetchNamespace(t).listen(e,n,r,s):()=>{}}_buildInstruction(t,e,n,r,s){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,s)}destroyInnerAnimations(t){let e=this.driver.query(t,$E,!0);e.forEach(n=>this.destroyActiveAnimationsForElement(n)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,vR,!0),e.forEach(n=>this.finishActiveQueriedAnimationOnElement(n)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(n=>{n.queued?n.markedForDestroy=!0:n.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(n=>n.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return M_(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[Ag];if(e&&e.setForRemoval){if(t[Ag]=p6,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(TR)&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(n=>{this.markElementAsDisabled(n,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((n,r)=>this._balanceNamespaceList(n,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)Ig(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let r=0;r<n.length;r++)n[r]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(n=>n()),this._flushFns=[],this._whenQuietFns.length){const n=this._whenQuietFns;this._whenQuietFns=[],e.length?M_(e).onDone(()=>{n.forEach(r=>r())}):n.forEach(r=>r())}}reportError(t){throw function Qxe(i){return new gi(3402,!1)}()}_flushAnimations(t,e){const n=new tT,r=[],s=new Map,o=[],l=new Map,u=new Map,p=new Map,v=new Set;this.disabledNodes.forEach(_n=>{v.add(_n);const Vn=this.driver.query(_n,".ng-animate-queued",!0);for(let Fn=0;Fn<Vn.length;Fn++)v.add(Vn[Fn])});const x=this.bodyNode,I=Array.from(this.statesByElement.keys()),T=v6(I,this.collectedEnterElements),F=new Map;let j=0;T.forEach((_n,Vn)=>{const Fn=mR+j++;F.set(Vn,Fn),_n.forEach(bn=>Ig(bn,Fn))});const X=[],ce=new Set,we=new Set;for(let _n=0;_n<this.collectedLeaveElements.length;_n++){const Vn=this.collectedLeaveElements[_n],Fn=Vn[Ag];Fn&&Fn.setForRemoval&&(X.push(Vn),ce.add(Vn),Fn.hasAnimation?this.driver.query(Vn,".ng-star-inserted",!0).forEach(bn=>ce.add(bn)):we.add(Vn))}const ye=new Map,Ae=v6(I,Array.from(ce));Ae.forEach((_n,Vn)=>{const Fn=WE+j++;ye.set(Vn,Fn),_n.forEach(bn=>Ig(bn,Fn))}),t.push(()=>{T.forEach((_n,Vn)=>{const Fn=F.get(Vn);_n.forEach(bn=>nx(bn,Fn))}),Ae.forEach((_n,Vn)=>{const Fn=ye.get(Vn);_n.forEach(bn=>nx(bn,Fn))}),X.forEach(_n=>{this.processLeaveNode(_n)})});const We=[],ot=[];for(let _n=this._namespaceList.length-1;_n>=0;_n--)this._namespaceList[_n].drainQueuedTransitions(e).forEach(Fn=>{const bn=Fn.player,Bn=Fn.element;if(We.push(bn),this.collectedEnterElements.length){const _s=Bn[Ag];if(_s&&_s.setForMove){if(_s.previousTriggersValues&&_s.previousTriggersValues.has(Fn.triggerName)){const hs=_s.previousTriggersValues.get(Fn.triggerName),fs=this.statesByElement.get(Fn.element);if(fs&&fs.has(Fn.triggerName)){const Lr=fs.get(Fn.triggerName);Lr.value=hs,fs.set(Fn.triggerName,Lr)}}return void bn.destroy()}}const Wi=!x||!this.driver.containsElement(x,Bn),wi=ye.get(Bn),er=F.get(Bn),cr=this._buildInstruction(Fn,n,er,wi,Wi);if(cr.errors&&cr.errors.length)return void ot.push(cr);if(Wi)return bn.onStart(()=>rb(Bn,cr.fromStyles)),bn.onDestroy(()=>fv(Bn,cr.toStyles)),void r.push(bn);if(Fn.isFallbackTransition)return bn.onStart(()=>rb(Bn,cr.fromStyles)),bn.onDestroy(()=>fv(Bn,cr.toStyles)),void r.push(bn);const Is=[];cr.timelines.forEach(_s=>{_s.stretchStartingKeyframe=!0,this.disabledNodes.has(_s.element)||Is.push(_s)}),cr.timelines=Is,n.append(Bn,cr.timelines),o.push({instruction:cr,player:bn,element:Bn}),cr.queriedElements.forEach(_s=>Fp(l,_s,[]).push(bn)),cr.preStyleProps.forEach((_s,hs)=>{if(_s.size){let fs=u.get(hs);fs||u.set(hs,fs=new Set),_s.forEach((Lr,Co)=>fs.add(Co))}}),cr.postStyleProps.forEach((_s,hs)=>{let fs=p.get(hs);fs||p.set(hs,fs=new Set),_s.forEach((Lr,Co)=>fs.add(Co))})});if(ot.length){const _n=[];ot.forEach(Vn=>{_n.push(function Jxe(i,t){return new gi(3505,!1)}())}),We.forEach(Vn=>Vn.destroy()),this.reportError(_n)}const Mt=new Map,Xe=new Map;o.forEach(_n=>{const Vn=_n.element;n.has(Vn)&&(Xe.set(Vn,Vn),this._beforeAnimationBuild(_n.player.namespaceId,_n.instruction,Mt))}),r.forEach(_n=>{const Vn=_n.element;this._getPreviousPlayers(Vn,!1,_n.namespaceId,_n.triggerName,null).forEach(bn=>{Fp(Mt,Vn,[]).push(bn),bn.destroy()})});const yt=X.filter(_n=>_6(_n,u,p)),tn=new Map;m6(tn,this.driver,we,p,sy).forEach(_n=>{_6(_n,u,p)&&yt.push(_n)});const Qn=new Map;T.forEach((_n,Vn)=>{m6(Qn,this.driver,new Set(_n),u,"!")}),yt.forEach(_n=>{const Vn=tn.get(_n),Fn=Qn.get(_n);tn.set(_n,new Map([...Array.from(Vn?.entries()??[]),...Array.from(Fn?.entries()??[])]))});const Un=[],An=[],Nn={};o.forEach(_n=>{const{element:Vn,player:Fn,instruction:bn}=_n;if(n.has(Vn)){if(v.has(Vn))return Fn.onDestroy(()=>fv(Vn,bn.toStyles)),Fn.disabled=!0,Fn.overrideTotalTime(bn.totalTime),void r.push(Fn);let Bn=Nn;if(Xe.size>1){let wi=Vn;const er=[];for(;wi=wi.parentNode;){const cr=Xe.get(wi);if(cr){Bn=cr;break}er.push(wi)}er.forEach(cr=>Xe.set(cr,Bn))}const Wi=this._buildAnimation(Fn.namespaceId,bn,Mt,s,Qn,tn);if(Fn.setRealPlayer(Wi),Bn===Nn)Un.push(Fn);else{const wi=this.playersByElement.get(Bn);wi&&wi.length&&(Fn.parentPlayer=M_(wi)),r.push(Fn)}}else rb(Vn,bn.fromStyles),Fn.onDestroy(()=>fv(Vn,bn.toStyles)),An.push(Fn),v.has(Vn)&&r.push(Fn)}),An.forEach(_n=>{const Vn=s.get(_n.element);if(Vn&&Vn.length){const Fn=M_(Vn);_n.setRealPlayer(Fn)}}),r.forEach(_n=>{_n.parentPlayer?_n.syncPlayerEvents(_n.parentPlayer):_n.destroy()});for(let _n=0;_n<X.length;_n++){const Vn=X[_n],Fn=Vn[Ag];if(nx(Vn,WE),Fn&&Fn.hasAnimation)continue;let bn=[];if(l.size){let Wi=l.get(Vn);Wi&&Wi.length&&bn.push(...Wi);let wi=this.driver.query(Vn,vR,!0);for(let er=0;er<wi.length;er++){let cr=l.get(wi[er]);cr&&cr.length&&bn.push(...cr)}}const Bn=bn.filter(Wi=>!Wi.destroyed);Bn.length?nAe(this,Vn,Bn):this.processLeaveNode(Vn)}return X.length=0,Un.forEach(_n=>{this.players.push(_n),_n.onDone(()=>{_n.destroy();const Vn=this.players.indexOf(_n);this.players.splice(Vn,1)}),_n.play()}),Un}elementContainsData(t,e){let n=!1;const r=e[Ag];return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,s){let o=[];if(e){const l=this.playersByQueriedElement.get(t);l&&(o=l)}else{const l=this.playersByElement.get(t);if(l){const u=!s||s==IA;l.forEach(p=>{p.queued||!u&&p.triggerName!=r||o.push(p)})}}return(n||r)&&(o=o.filter(l=>!(n&&n!=l.namespaceId||r&&r!=l.triggerName))),o}_beforeAnimationBuild(t,e,n){const s=e.element,o=e.isRemovalTransition?void 0:t,l=e.isRemovalTransition?void 0:e.triggerName;for(const u of e.timelines){const p=u.element,v=p!==s,x=Fp(n,p,[]);this._getPreviousPlayers(p,v,o,l,e.toState).forEach(T=>{const F=T.getRealPlayer();F.beforeDestroy&&F.beforeDestroy(),T.destroy(),x.push(T)})}rb(s,e.fromStyles)}_buildAnimation(t,e,n,r,s,o){const l=e.triggerName,u=e.element,p=[],v=new Set,x=new Set,I=e.timelines.map(F=>{const j=F.element;v.add(j);const X=j[Ag];if(X&&X.removedBeforeQueried)return new Cw(F.duration,F.delay);const ce=j!==u,we=function iAe(i){const t=[];return y6(i,t),t}((n.get(j)||Ywe).map(Mt=>Mt.getRealPlayer())).filter(Mt=>!!Mt.element&&Mt.element===j),ye=s.get(j),Ae=o.get(j),We=G8(0,this._normalizer,0,F.keyframes,ye,Ae),ot=this._buildPlayer(F,We,we);if(F.subTimeline&&r&&x.add(j),ce){const Mt=new LR(t,l,j);Mt.setRealPlayer(ot),p.push(Mt)}return ot});p.forEach(F=>{Fp(this.playersByQueriedElement,F.element,[]).push(F),F.onDone(()=>function Jwe(i,t,e){let n=i.get(t);if(n){if(n.length){const r=n.indexOf(e);n.splice(r,1)}0==n.length&&i.delete(t)}return n}(this.playersByQueriedElement,F.element,F))}),v.forEach(F=>Ig(F,Q8));const T=M_(I);return T.onDestroy(()=>{v.forEach(F=>nx(F,Q8)),fv(u,e.toStyles)}),x.forEach(F=>{Fp(r,F,[]).push(T)}),T}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new Cw(t.duration,t.delay)}}class LR{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new Cw,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,n)=>{e.forEach(r=>uR(t,n,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Fp(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function rT(i){return i&&1===i.nodeType}function g6(i,t){const e=i.style.display;return i.style.display=t??"none",e}function m6(i,t,e,n,r){const s=[];e.forEach(u=>s.push(g6(u)));const o=[];n.forEach((u,p)=>{const v=new Map;u.forEach(x=>{const I=t.computeStyle(p,x,r);v.set(x,I),(!I||0==I.length)&&(p[Ag]=Kwe,o.push(p))}),i.set(p,v)});let l=0;return e.forEach(u=>g6(u,s[l++])),o}function v6(i,t){const e=new Map;if(i.forEach(l=>e.set(l,[])),0==t.length)return e;const r=new Set(t),s=new Map;function o(l){if(!l)return 1;let u=s.get(l);if(u)return u;const p=l.parentNode;return u=e.has(p)?p:r.has(p)?1:o(p),s.set(l,u),u}return t.forEach(l=>{const u=o(l);1!==u&&e.get(u).push(l)}),e}function Ig(i,t){i.classList?.add(t)}function nx(i,t){i.classList?.remove(t)}function nAe(i,t,e){M_(e).onDone(()=>i.processLeaveNode(t))}function y6(i,t){for(let e=0;e<i.length;e++){const n=i[e];n instanceof zV?y6(n.players,t):t.push(n)}}function _6(i,t,e){const n=e.get(i);if(!n)return!1;let r=t.get(i);return r?n.forEach(s=>r.add(s)):t.set(i,n),e.delete(i),!0}class sT{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new Qwe(t,e,n),this._timelineEngine=new Wwe(t,e,n),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(t,e,n,r,s){const o=t+"-"+r;let l=this._triggerCache[o];if(!l){const u=[],v=CR(this._driver,s,u,[]);if(u.length)throw function Hxe(i,t){return new gi(3404,!1)}();l=function Vwe(i,t,e){return new Uwe(i,t,e)}(r,v,this._normalizer),this._triggerCache[o]=l}this._transitionEngine.registerTrigger(e,r,l)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[s,o]=W8(n);this._timelineEngine.command(s,e,o,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,s){if("@"==n.charAt(0)){const[o,l]=W8(n);return this._timelineEngine.listen(o,e,l,s)}return this._transitionEngine.listen(t,e,n,r,s)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let oAe=(()=>{class i{constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let s=i.initialStylesByElement.get(e);s||i.initialStylesByElement.set(e,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&fv(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(fv(this._element,this._initialStyles),this._endStyles&&(fv(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(i.initialStylesByElement.delete(this._element),this._startStyles&&(rb(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(rb(this._element,this._endStyles),this._endStyles=null),fv(this._element,this._initialStyles),this._state=3)}}return i.initialStylesByElement=new WeakMap,i})();function PR(i){let t=null;return i.forEach((e,n)=>{(function aAe(i){return"display"===i||"position"===i})(n)&&(t=t||new Map,t.set(n,e))}),t}class b6{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){const e=[];return t.forEach(n=>{e.push(Object.fromEntries(n))}),e}_triggerWebAnimation(t,e,n){return t.animate(this._convertKeyframesToObject(e),n)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((n,r)=>{"offset"!==r&&t.set(r,this._finished?n:s6(this.element,r))}),this.currentSnapshot=t}triggerCallback(t){const e="start"===t?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}class lAe{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}matchesElement(t,e){return!1}containsElement(t,e){return X8(t,e)}getParentElement(t){return pR(t)}query(t,e,n){return Y8(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}animate(t,e,n,r,s,o=[]){const u={duration:n,delay:r,fill:0==r?"both":"forwards"};s&&(u.easing=s);const p=new Map,v=o.filter(T=>T instanceof b6);(function hwe(i,t){return 0===i||0===t})(n,r)&&v.forEach(T=>{T.currentSnapshot.forEach((F,j)=>p.set(j,F))});let x=function lwe(i){return i.length?i[0]instanceof Map?i:i.map(t=>J8(t)):[]}(e).map(T=>L_(T));x=function fwe(i,t,e){if(e.size&&t.length){let n=t[0],r=[];if(e.forEach((s,o)=>{n.has(o)||r.push(o),n.set(o,s)}),r.length)for(let s=1;s<t.length;s++){let o=t[s];r.forEach(l=>o.set(l,s6(i,l)))}}return t}(t,x,p);const I=function sAe(i,t){let e=null,n=null;return Array.isArray(t)&&t.length?(e=PR(t[0]),t.length>1&&(n=PR(t[t.length-1]))):t instanceof Map&&(e=PR(t)),e||n?new oAe(i,e,n):null}(t,x);return new b6(t,x,u,I)}}let cAe=(()=>{class i extends OV{constructor(e,n){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(n.body,{id:"0",encapsulation:Ta.None,styles:[],data:{animation:[]}})}build(e){const n=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(e)?FV(e):e;return C6(this._renderer,null,n,"register",[r]),new uAe(n,this._renderer)}}return i.\u0275fac=function(e){return new(e||i)(jn(c),jn(Xu))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})();class uAe extends class bJ{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new dAe(this._id,t,e||{},this._renderer)}}class dAe{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return C6(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function C6(i,t,e,n,r){return i.setProperty(t,`@@${e}:${n}`,r)}const x6="@.disabled";let hAe=(()=>{class i{constructor(e,n,r){this.delegate=e,this.engine=n,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),n.onRemovalComplete=(s,o)=>{const l=o?.parentNode(s);l&&o.removeChild(l,s)}}createRenderer(e,n){const s=this.delegate.createRenderer(e,n);if(!(e&&n&&n.data&&n.data.animation)){let v=this._rendererCache.get(s);return v||(v=new w6("",s,this.engine),this._rendererCache.set(s,v)),v}const o=n.id,l=n.id+"-"+this._currentId;this._currentId++,this.engine.register(l,e);const u=v=>{Array.isArray(v)?v.forEach(u):this.engine.registerTrigger(o,l,e,v.name,v)};return n.data.animation.forEach(u),new fAe(this,l,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,n,r){e>=0&&e<this._microtaskId?this._zone.run(()=>n(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,l]=s;o(l)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([n,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return i.\u0275fac=function(e){return new(e||i)(jn(c),jn(sT),jn(Ko))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})();class w6{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?r=>e.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,r=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){"@"==e.charAt(0)&&e==x6?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class fAe extends w6{constructor(t,e,n,r){super(e,n,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){"@"==e.charAt(0)?"."==e.charAt(1)&&e==x6?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.slice(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if("@"==e.charAt(0)){const r=function pAe(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}(t);let s=e.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function gAe(i){const t=i.indexOf(".");return[i.substring(0,t),i.slice(t+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,l=>{this.factory.scheduleListenerCallback(l._data||-1,n,l)})}return this.delegate.listen(t,e,n)}}const A6=[{provide:OV,useClass:cAe},{provide:SR,useFactory:function vAe(){return new Fwe}},{provide:sT,useClass:(()=>{class i extends sT{constructor(e,n,r,s){super(e.body,n,r)}ngOnDestroy(){this.flush()}}return i.\u0275fac=function(e){return new(e||i)(jn(Xu),jn(gR),jn(SR),jn(zx))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})()},{provide:c,useFactory:function yAe(i,t,e){return new hAe(i,t,e)},deps:[$I,sT,Ko]}],RR=[{provide:gR,useFactory:()=>new lAe},{provide:NF,useValue:"BrowserAnimations"},...A6],I6=[{provide:gR,useClass:K8},{provide:NF,useValue:"NoopAnimations"},...A6];let _Ae=(()=>{class i{static withConfig(e){return{ngModule:i,providers:e.disableAnimations?I6:RR}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({providers:RR,imports:[QN]}),i})();const bAe=["sliderHandle"],CAe=["sliderHandleStart"],xAe=["sliderHandleEnd"],wAe=function(i,t){return{left:i,width:t}};function AAe(i,t){if(1&i&&ii(0,"span",4),2&i){const e=_e();ve("ngStyle",ys(1,wAe,null!=e.offset?e.offset+"%":e.handleValues[0]+"%",e.diff?e.diff+"%":e.handleValues[1]-e.handleValues[0]+"%"))}}const IAe=function(i,t){return{bottom:i,height:t}};function SAe(i,t){if(1&i&&ii(0,"span",4),2&i){const e=_e();ve("ngStyle",ys(1,IAe,null!=e.offset?e.offset+"%":e.handleValues[0]+"%",e.diff?e.diff+"%":e.handleValues[1]-e.handleValues[0]+"%"))}}const EAe=function(i){return{height:i}};function TAe(i,t){if(1&i&&ii(0,"span",4),2&i){const e=_e();ve("ngStyle",Bi(1,EAe,e.handleValue+"%"))}}const MAe=function(i){return{width:i}};function DAe(i,t){if(1&i&&ii(0,"span",4),2&i){const e=_e();ve("ngStyle",Bi(1,MAe,e.handleValue+"%"))}}const kR=function(i,t){return{left:i,bottom:t}};function LAe(i,t){if(1&i){const e=Pi();lt(0,"span",5,6),fn("keydown",function(r){return wt(e),At(_e().onHandleKeydown(r))})("mousedown",function(r){return wt(e),At(_e().onMouseDown(r))})("touchstart",function(r){return wt(e),At(_e().onTouchStart(r))})("touchmove",function(r){return wt(e),At(_e().onTouchMove(r))})("touchend",function(r){return wt(e),At(_e().onTouchEnd(r))}),ct()}if(2&i){const e=_e();tf("transition",e.dragging?"none":null),ve("ngStyle",ys(8,kR,"horizontal"==e.orientation?e.handleValue+"%":null,"vertical"==e.orientation?e.handleValue+"%":null)),mr("tabindex",e.disabled?null:e.tabindex)("aria-valuemin",e.min)("aria-valuenow",e.value)("aria-valuemax",e.max)("aria-labelledby",e.ariaLabelledBy)}}const S6=function(i){return{"p-slider-handle-active":i}};function PAe(i,t){if(1&i){const e=Pi();lt(0,"span",7,8),fn("keydown",function(r){return wt(e),At(_e().onHandleKeydown(r,0))})("mousedown",function(r){return wt(e),At(_e().onMouseDown(r,0))})("touchstart",function(r){return wt(e),At(_e().onTouchStart(r,0))})("touchmove",function(r){return wt(e),At(_e().onTouchMove(r,0))})("touchend",function(r){return wt(e),At(_e().onTouchEnd(r))}),ct()}if(2&i){const e=_e();tf("transition",e.dragging?"none":null),ve("ngStyle",ys(9,kR,e.rangeStartLeft,e.rangeStartBottom))("ngClass",Bi(12,S6,0==e.handleIndex)),mr("tabindex",e.disabled?null:e.tabindex)("aria-valuemin",e.min)("aria-valuenow",e.value?e.value[0]:null)("aria-valuemax",e.max)("aria-labelledby",e.ariaLabelledBy)}}function RAe(i,t){if(1&i){const e=Pi();lt(0,"span",7,9),fn("keydown",function(r){return wt(e),At(_e().onHandleKeydown(r,1))})("mousedown",function(r){return wt(e),At(_e().onMouseDown(r,1))})("touchstart",function(r){return wt(e),At(_e().onTouchStart(r,1))})("touchmove",function(r){return wt(e),At(_e().onTouchMove(r,1))})("touchend",function(r){return wt(e),At(_e().onTouchEnd(r))}),ct()}if(2&i){const e=_e();tf("transition",e.dragging?"none":null),ve("ngStyle",ys(9,kR,e.rangeEndLeft,e.rangeEndBottom))("ngClass",Bi(12,S6,1==e.handleIndex)),mr("tabindex",e.disabled?null:e.tabindex)("aria-valuemin",e.min)("aria-valuenow",e.value?e.value[1]:null)("aria-valuemax",e.max)("aria-labelledby",e.ariaLabelledBy)}}const kAe=function(i,t,e,n){return{"p-slider p-component":!0,"p-disabled":i,"p-slider-horizontal":t,"p-slider-vertical":e,"p-slider-animate":n}},OAe={provide:bc,useExisting:ds(()=>FAe),multi:!0};let FAe=(()=>{class i{constructor(e,n,r,s){this.el=e,this.renderer=n,this.ngZone=r,this.cd=s,this.min=0,this.max=100,this.orientation="horizontal",this.tabindex=0,this.onChange=new qn,this.onSlideEnd=new qn,this.handleValues=[],this.onModelChange=()=>{},this.onModelTouched=()=>{},this.handleIndex=0}onMouseDown(e,n){this.disabled||(this.dragging=!0,this.updateDomData(),this.sliderHandleClick=!0,this.handleIndex=this.range&&this.handleValues&&this.handleValues[0]===this.max?0:n,this.bindDragListeners(),e.target.focus(),e.preventDefault(),this.animate&&Kt.removeClass(this.el.nativeElement.children[0],"p-slider-animate"))}onTouchStart(e,n){if(!this.disabled){var r=e.changedTouches[0];this.startHandleValue=this.range?this.handleValues[n]:this.handleValue,this.dragging=!0,this.handleIndex=this.range&&this.handleValues&&this.handleValues[0]===this.max?0:n,"horizontal"===this.orientation?(this.startx=parseInt(r.clientX,10),this.barWidth=this.el.nativeElement.children[0].offsetWidth):(this.starty=parseInt(r.clientY,10),this.barHeight=this.el.nativeElement.children[0].offsetHeight),this.animate&&Kt.removeClass(this.el.nativeElement.children[0],"p-slider-animate"),e.preventDefault()}}onTouchMove(e,n){if(!this.disabled){var s,r=e.changedTouches[0];s="horizontal"===this.orientation?Math.floor(100*(parseInt(r.clientX,10)-this.startx)/this.barWidth)+this.startHandleValue:Math.floor(100*(this.starty-parseInt(r.clientY,10))/this.barHeight)+this.startHandleValue,this.setValueFromHandle(e,s),e.preventDefault()}}onTouchEnd(e,n){this.disabled||(this.dragging=!1,this.onSlideEnd.emit(this.range?{originalEvent:e,values:this.values}:{originalEvent:e,value:this.value}),this.animate&&Kt.addClass(this.el.nativeElement.children[0],"p-slider-animate"),e.preventDefault())}onBarClick(e){this.disabled||(this.sliderHandleClick||(this.updateDomData(),this.handleChange(e)),this.sliderHandleClick=!1)}onHandleKeydown(e,n){this.disabled||(38==e.which||39==e.which?this.spin(e,1,n):(37==e.which||40==e.which)&&this.spin(e,-1,n))}spin(e,n,r){let s=(this.step||1)*n;this.range?(this.handleIndex=r,this.updateValue(this.values[this.handleIndex]+s),this.updateHandleValue()):(this.updateValue(this.value+s),this.updateHandleValue()),e.preventDefault()}handleChange(e){let n=this.calculateHandleValue(e);this.setValueFromHandle(e,n)}bindDragListeners(){this.ngZone.runOutsideAngular(()=>{const e=this.el?this.el.nativeElement.ownerDocument:"document";this.dragListener||(this.dragListener=this.renderer.listen(e,"mousemove",n=>{this.dragging&&this.ngZone.run(()=>{this.handleChange(n)})})),this.mouseupListener||(this.mouseupListener=this.renderer.listen(e,"mouseup",n=>{this.dragging&&(this.dragging=!1,this.ngZone.run(()=>{this.onSlideEnd.emit(this.range?{originalEvent:n,values:this.values}:{originalEvent:n,value:this.value}),this.animate&&Kt.addClass(this.el.nativeElement.children[0],"p-slider-animate")}))}))})}unbindDragListeners(){this.dragListener&&this.dragListener(),this.mouseupListener&&this.mouseupListener()}setValueFromHandle(e,n){this.sliderHandleClick=!1;let r=this.getValueFromHandle(n);this.range?this.step?this.handleStepChange(r,this.values[this.handleIndex]):(this.handleValues[this.handleIndex]=n,this.updateValue(r,e)):this.step?this.handleStepChange(r,this.value):(this.handleValue=n,this.updateValue(r,e)),this.cd.markForCheck()}handleStepChange(e,n){let r=e-n,s=n;r<0?s=n+Math.ceil(e/this.step-n/this.step)*this.step:r>0&&(s=n+Math.floor(e/this.step-n/this.step)*this.step),this.updateValue(s),this.updateHandleValue()}writeValue(e){this.range?this.values=e||[0,0]:this.value=e||0,this.updateHandleValue(),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}get rangeStartLeft(){return this.isVertical()?null:this.handleValues[0]+"%"}get rangeStartBottom(){return this.isVertical()?this.handleValues[0]+"%":"auto"}get rangeEndLeft(){return this.isVertical()?null:this.handleValues[1]+"%"}get rangeEndBottom(){return this.isVertical()?this.handleValues[1]+"%":"auto"}isVertical(){return"vertical"===this.orientation}updateDomData(){let e=this.el.nativeElement.children[0].getBoundingClientRect();this.initX=e.left+Kt.getWindowScrollLeft(),this.initY=e.top+Kt.getWindowScrollTop(),this.barWidth=this.el.nativeElement.children[0].offsetWidth,this.barHeight=this.el.nativeElement.children[0].offsetHeight}calculateHandleValue(e){return"horizontal"===this.orientation?100*(e.pageX-this.initX)/this.barWidth:100*(this.initY+this.barHeight-e.pageY)/this.barHeight}updateHandleValue(){this.range?(this.handleValues[0]=100*(this.values[0]<this.min?0:this.values[0]-this.min)/(this.max-this.min),this.handleValues[1]=100*(this.values[1]>this.max?100:this.values[1]-this.min)/(this.max-this.min)):this.handleValue=this.value<this.min?0:this.value>this.max?100:100*(this.value-this.min)/(this.max-this.min)}updateValue(e,n){if(this.range){let r=e;0==this.handleIndex?(r<this.min?(r=this.min,this.handleValues[0]=0):r>this.values[1]&&(r>this.max&&(r=this.max,this.handleValues[0]=100),this.handleValues[0]=r),this.sliderHandleStart.nativeElement.focus()):(r>this.max?(r=this.max,this.handleValues[1]=100,this.offset=this.handleValues[1]):r<this.min?(r=this.min,this.handleValues[1]=r):r<this.values[0]&&(this.offset=this.handleValues[1]),this.sliderHandleEnd.nativeElement.focus()),this.diff=Math.abs(this.handleValues[0]-this.handleValues[1]),this.offset=Math.min(this.handleValues[0],this.handleValues[1]),this.values[this.handleIndex]=this.getNormalizedValue(r),this.onModelChange([this.minVal,this.maxVal]),this.onChange.emit({event:n,values:this.values})}else e<this.min?(e=this.min,this.handleValue=0):e>this.max&&(e=this.max,this.handleValue=100),this.value=this.getNormalizedValue(e),this.onModelChange(this.value),this.onChange.emit({event:n,value:this.value}),this.sliderHandle.nativeElement.focus()}getValueFromHandle(e){return e/100*(this.max-this.min)+this.min}getDecimalsCount(e){return e&&Math.floor(e)!==e&&e.toString().split(".")[1].length||0}getNormalizedValue(e){let n=this.getDecimalsCount(this.step);return n>0?+e.toFixed(n):Math.floor(e)}ngOnDestroy(){this.unbindDragListeners()}get minVal(){return Math.min(this.values[1],this.values[0])}get maxVal(){return Math.max(this.values[1],this.values[0])}}return i.\u0275fac=function(e){return new(e||i)(Zt(Xn),Zt(h),Zt(Ko),Zt(Zo))},i.\u0275cmp=Ir({type:i,selectors:[["p-slider"]],viewQuery:function(e,n){if(1&e&&(vs(bAe,5),vs(CAe,5),vs(xAe,5)),2&e){let r;vr(r=yr())&&(n.sliderHandle=r.first),vr(r=yr())&&(n.sliderHandleStart=r.first),vr(r=yr())&&(n.sliderHandleEnd=r.first)}},hostAttrs:[1,"p-element"],inputs:{animate:"animate",disabled:"disabled",min:"min",max:"max",orientation:"orientation",step:"step",range:"range",style:"style",styleClass:"styleClass",ariaLabelledBy:"ariaLabelledBy",tabindex:"tabindex"},outputs:{onChange:"onChange",onSlideEnd:"onSlideEnd"},features:[To([OAe])],decls:8,vars:16,consts:[[3,"ngStyle","ngClass","click"],["class","p-slider-range",3,"ngStyle",4,"ngIf"],["class","p-slider-handle",3,"transition","ngStyle","keydown","mousedown","touchstart","touchmove","touchend",4,"ngIf"],["class","p-slider-handle",3,"transition","ngStyle","ngClass","keydown","mousedown","touchstart","touchmove","touchend",4,"ngIf"],[1,"p-slider-range",3,"ngStyle"],[1,"p-slider-handle",3,"ngStyle","keydown","mousedown","touchstart","touchmove","touchend"],["sliderHandle",""],[1,"p-slider-handle",3,"ngStyle","ngClass","keydown","mousedown","touchstart","touchmove","touchend"],["sliderHandleStart",""],["sliderHandleEnd",""]],template:function(e,n){1&e&&(lt(0,"div",0),fn("click",function(s){return n.onBarClick(s)}),Ze(1,AAe,1,4,"span",1),Ze(2,SAe,1,4,"span",1),Ze(3,TAe,1,3,"span",1),Ze(4,DAe,1,3,"span",1),Ze(5,LAe,2,11,"span",2),Ze(6,PAe,2,14,"span",3),Ze(7,RAe,2,14,"span",3),ct()),2&e&&(Ur(n.styleClass),ve("ngStyle",n.style)("ngClass",Ff(11,kAe,n.disabled,"horizontal"==n.orientation,"vertical"==n.orientation,n.animate)),Me(1),ve("ngIf",n.range&&"horizontal"==n.orientation),Me(1),ve("ngIf",n.range&&"vertical"==n.orientation),Me(1),ve("ngIf",!n.range&&"vertical"==n.orientation),Me(1),ve("ngIf",!n.range&&"horizontal"==n.orientation),Me(1),ve("ngIf",!n.range),Me(1),ve("ngIf",n.range),Me(1),ve("ngIf",n.range))},dependencies:[bo,Wo,Qo],styles:[".p-slider{position:relative}.p-slider .p-slider-handle{position:absolute;cursor:grab;touch-action:none;display:block}.p-slider-range{position:absolute;display:block}.p-slider-horizontal .p-slider-range{top:0;left:0;height:100%}.p-slider-horizontal .p-slider-handle{top:50%}.p-slider-vertical{height:100px}.p-slider-vertical .p-slider-handle{left:50%}.p-slider-vertical .p-slider-range{bottom:0;left:0;width:100%}\n"],encapsulation:2,changeDetection:0}),i})(),NAe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({imports:[Ns]}),i})();function BAe(i,t){if(1&i&&(lt(0,"span"),qi(1),ct()),2&i){const e=_e();Me(1),as(e.label)}}function zAe(i,t){1&i&&Ki(0)}const SA=function(i){return{height:i}},VAe=function(i,t){return{"p-highlight":i,"p-disabled":t}},UAe=function(i){return{"p-highlight":i}},E6=function(i){return{"pi pi-check":i}},EA=function(i){return{$implicit:i}},HAe=["container"],GAe=["filterInput"],WAe=["in"],jAe=["items"],$Ae=["scroller"];function qAe(i,t){if(1&i&&(qr(0),qi(1),Xr()),2&i){const e=_e(2);Me(1),as(e.valuesAsString||"empty")}}function XAe(i,t){if(1&i){const e=Pi();lt(0,"span",18),fn("click",function(r){wt(e);const s=_e().$implicit;return At(_e(3).removeChip(s,r))}),ct()}}function YAe(i,t){if(1&i&&(lt(0,"div",14,15)(2,"span",16),qi(3),ct(),Ze(4,XAe,1,0,"span",17),ct()),2&i){const e=t.$implicit,n=_e(3);Me(3),as(n.findLabelByValue(e)),Me(1),ve("ngIf",!n.disabled)}}function KAe(i,t){if(1&i&&(qr(0),qi(1),Xr()),2&i){const e=_e(3);Me(1),as(e.placeholder||e.defaultLabel||"empty")}}function ZAe(i,t){if(1&i&&(qr(0),Ze(1,YAe,5,2,"div",13),Ze(2,KAe,2,1,"ng-container",7),Xr()),2&i){const e=_e(2);Me(1),ve("ngForOf",e.value),Me(1),ve("ngIf",!e.value||0===e.value.length)}}function QAe(i,t){if(1&i&&(qr(0),Ze(1,qAe,2,1,"ng-container",7),Ze(2,ZAe,3,2,"ng-container",7),Xr()),2&i){const e=_e();Me(1),ve("ngIf","comma"===e.display),Me(1),ve("ngIf","chip"===e.display)}}function JAe(i,t){1&i&&Ki(0)}function eIe(i,t){if(1&i){const e=Pi();lt(0,"i",19),fn("click",function(r){return wt(e),At(_e().clear(r))}),ct()}}function tIe(i,t){1&i&&Ki(0)}function nIe(i,t){1&i&&Ki(0)}const T6=function(i){return{options:i}};function iIe(i,t){if(1&i&&(qr(0),Ze(1,nIe,1,0,"ng-container",8),Xr()),2&i){const e=_e(3);Me(1),ve("ngTemplateOutlet",e.filterTemplate)("ngTemplateOutletContext",Bi(2,T6,e.filterOptions))}}const rIe=function(i){return{"p-checkbox-disabled":i}},sIe=function(i,t,e){return{"p-highlight":i,"p-focus":t,"p-disabled":e}};function oIe(i,t){if(1&i){const e=Pi();lt(0,"div",34)(1,"div",2)(2,"input",35),fn("focus",function(){return wt(e),At(_e(4).onHeaderCheckboxFocus())})("blur",function(){return wt(e),At(_e(4).onHeaderCheckboxBlur())})("keydown.space",function(r){return wt(e),At(_e(4).toggleAll(r))}),ct()(),lt(3,"div",36),fn("click",function(r){return wt(e),At(_e(4).toggleAll(r))}),ii(4,"span",37),ct()()}if(2&i){const e=_e(4);ve("ngClass",Bi(6,rIe,e.disabled||e.toggleAllDisabled)),Me(2),ve("checked",e.allChecked)("disabled",e.disabled||e.toggleAllDisabled),Me(1),ve("ngClass",wu(8,sIe,e.allChecked,e.headerCheckboxFocus,e.disabled||e.toggleAllDisabled)),mr("aria-checked",e.allChecked),Me(1),ve("ngClass",Bi(12,E6,e.allChecked))}}function aIe(i,t){if(1&i){const e=Pi();lt(0,"div",38)(1,"input",39,40),fn("input",function(r){return wt(e),At(_e(4).onFilterInputChange(r))}),ct(),ii(3,"span",41),ct()}if(2&i){const e=_e(4);Me(1),ve("value",e.filterValue||"")("disabled",e.disabled),mr("autocomplete",e.autocomplete)("placeholder",e.filterPlaceHolder)("aria-label",e.ariaFilterLabel)}}function lIe(i,t){if(1&i){const e=Pi();Ze(0,oIe,5,14,"div",30),Ze(1,aIe,4,5,"div",31),lt(2,"button",32),fn("click",function(r){return wt(e),At(_e(3).close(r))}),ii(3,"span",33),ct()}if(2&i){const e=_e(3);ve("ngIf",e.showToggleAll&&!e.selectionLimit),Me(1),ve("ngIf",e.filter)}}function cIe(i,t){if(1&i&&(lt(0,"div",26),$u(1),Ze(2,tIe,1,0,"ng-container",27),Ze(3,iIe,2,4,"ng-container",28),Ze(4,lIe,4,2,"ng-template",null,29,vc),ct()),2&i){const e=co(5),n=_e(2);Me(2),ve("ngTemplateOutlet",n.headerTemplate),Me(1),ve("ngIf",n.filterTemplate)("ngIfElse",e)}}function uIe(i,t){1&i&&Ki(0)}const M6=function(i,t){return{$implicit:i,options:t}};function dIe(i,t){if(1&i&&Ze(0,uIe,1,0,"ng-container",8),2&i){const e=t.$implicit,n=t.options;_e(2),ve("ngTemplateOutlet",co(6))("ngTemplateOutletContext",ys(2,M6,e,n))}}function hIe(i,t){1&i&&Ki(0)}function fIe(i,t){if(1&i&&Ze(0,hIe,1,0,"ng-container",8),2&i){const e=t.options;ve("ngTemplateOutlet",_e(4).loaderTemplate)("ngTemplateOutletContext",Bi(2,T6,e))}}function pIe(i,t){1&i&&(qr(0),Ze(1,fIe,1,4,"ng-template",45),Xr())}function gIe(i,t){if(1&i){const e=Pi();lt(0,"p-scroller",42,43),fn("onLazyLoad",function(r){return wt(e),At(_e(2).onLazyLoad.emit(r))}),Ze(2,dIe,1,5,"ng-template",44),Ze(3,pIe,2,0,"ng-container",7),ct()}if(2&i){const e=_e(2);uo(Bi(9,SA,e.scrollHeight)),ve("items",e.optionsToRender)("itemSize",e.virtualScrollItemSize||e._itemSize)("autoSize",!0)("tabindex",-1)("lazy",e.lazy)("options",e.virtualScrollOptions),Me(3),ve("ngIf",e.loaderTemplate)}}function mIe(i,t){1&i&&Ki(0)}const vIe=function(){return{}};function yIe(i,t){if(1&i&&(qr(0),Ze(1,mIe,1,0,"ng-container",8),Xr()),2&i){_e();const e=co(6),n=_e();Me(1),ve("ngTemplateOutlet",e)("ngTemplateOutletContext",ys(3,M6,n.optionsToRender,Mo(2,vIe)))}}function _Ie(i,t){if(1&i&&(lt(0,"span"),qi(1),ct()),2&i){const e=_e().$implicit,n=_e(4);Me(1),as(n.getOptionGroupLabel(e)||"empty")}}function bIe(i,t){1&i&&Ki(0)}function CIe(i,t){1&i&&Ki(0)}function xIe(i,t){if(1&i&&(lt(0,"li",51),Ze(1,_Ie,2,1,"span",7),Ze(2,bIe,1,0,"ng-container",8),ct(),Ze(3,CIe,1,0,"ng-container",8)),2&i){const e=t.$implicit,n=_e(2).options,r=co(5),s=_e(2);ve("ngStyle",Bi(6,SA,n.itemSize+"px")),Me(1),ve("ngIf",!s.groupTemplate),Me(1),ve("ngTemplateOutlet",s.groupTemplate)("ngTemplateOutletContext",Bi(8,EA,e)),Me(1),ve("ngTemplateOutlet",r)("ngTemplateOutletContext",Bi(10,EA,s.getOptionGroupChildren(e)))}}function wIe(i,t){if(1&i&&(qr(0),Ze(1,xIe,4,12,"ng-template",50),Xr()),2&i){const e=_e().$implicit;Me(1),ve("ngForOf",e)}}function AIe(i,t){1&i&&Ki(0)}function IIe(i,t){if(1&i&&(qr(0),Ze(1,AIe,1,0,"ng-container",8),Xr()),2&i){const e=_e().$implicit,n=co(5);Me(1),ve("ngTemplateOutlet",n)("ngTemplateOutletContext",Bi(2,EA,e))}}function SIe(i,t){if(1&i){const e=Pi();lt(0,"p-multiSelectItem",52),fn("onClick",function(r){return wt(e),At(_e(4).onOptionClick(r))})("onKeydown",function(r){return wt(e),At(_e(4).onOptionKeydown(r))}),ct()}if(2&i){const e=t.$implicit,n=_e(2).options,r=_e(2);ve("option",e)("selected",r.isSelected(e))("label",r.getOptionLabel(e))("disabled",r.isOptionDisabled(e))("template",r.itemTemplate)("itemSize",n.itemSize)}}function EIe(i,t){1&i&&Ze(0,SIe,1,6,"ng-template",50),2&i&&ve("ngForOf",t.$implicit)}function TIe(i,t){if(1&i&&(qr(0),qi(1),Xr()),2&i){const e=_e(4);Me(1),yd(" ",e.emptyFilterMessageLabel," ")}}function MIe(i,t){1&i&&Ki(0,null,54)}function DIe(i,t){if(1&i&&(lt(0,"li",53),Ze(1,TIe,2,1,"ng-container",28),Ze(2,MIe,2,0,"ng-container",27),ct()),2&i){const e=_e().options,n=_e(2);ve("ngStyle",Bi(4,SA,e.itemSize+"px")),Me(1),ve("ngIf",!n.emptyFilterTemplate&&!n.emptyTemplate)("ngIfElse",n.emptyFilter),Me(1),ve("ngTemplateOutlet",n.emptyFilterTemplate||n.emptyTemplate)}}function LIe(i,t){if(1&i&&(qr(0),qi(1),Xr()),2&i){const e=_e(4);Me(1),yd(" ",e.emptyMessageLabel," ")}}function PIe(i,t){1&i&&Ki(0,null,55)}function RIe(i,t){if(1&i&&(lt(0,"li",53),Ze(1,LIe,2,1,"ng-container",28),Ze(2,PIe,2,0,"ng-container",27),ct()),2&i){const e=_e().options,n=_e(2);ve("ngStyle",Bi(4,SA,e.itemSize+"px")),Me(1),ve("ngIf",!n.emptyTemplate)("ngIfElse",n.empty),Me(1),ve("ngTemplateOutlet",n.emptyTemplate)}}function kIe(i,t){if(1&i&&(lt(0,"ul",46,47),Ze(2,wIe,2,1,"ng-container",7),Ze(3,IIe,2,4,"ng-container",7),Ze(4,EIe,1,1,"ng-template",null,48,vc),Ze(6,DIe,3,6,"li",49),Ze(7,RIe,3,6,"li",49),ct()),2&i){const e=t.options,n=_e(2);uo(e.contentStyle),ve("ngClass",e.contentStyleClass),Me(2),ve("ngIf",n.group),Me(1),ve("ngIf",!n.group),Me(3),ve("ngIf",n.hasFilter()&&n.isEmpty()),Me(1),ve("ngIf",!n.hasFilter()&&n.isEmpty())}}function OIe(i,t){1&i&&Ki(0)}function FIe(i,t){if(1&i&&(lt(0,"div",56),$u(1,1),Ze(2,OIe,1,0,"ng-container",27),ct()),2&i){const e=_e(2);Me(2),ve("ngTemplateOutlet",e.footerTemplate)}}const NIe=function(){return["p-multiselect-panel p-component"]},BIe=function(i,t){return{showTransitionParams:i,hideTransitionParams:t}},zIe=function(i){return{value:"visible",params:i}};function VIe(i,t){if(1&i){const e=Pi();lt(0,"div",20),fn("@overlayAnimation.start",function(r){return wt(e),At(_e().onOverlayAnimationStart(r))})("@overlayAnimation.done",function(r){return wt(e),At(_e().onOverlayAnimationEnd(r))})("keydown",function(r){return wt(e),At(_e().onKeydown(r))})("click",function(r){return wt(e),At(_e().onOverlayClick(r))}),Ze(1,cIe,6,3,"div",21),lt(2,"div",22),Ze(3,gIe,4,11,"p-scroller",23),Ze(4,yIe,2,6,"ng-container",7),Ze(5,kIe,8,7,"ng-template",null,24,vc),ct(),Ze(7,FIe,3,1,"div",25),ct()}if(2&i){const e=_e();Ur(e.panelStyleClass),ve("ngClass",Mo(11,NIe))("@overlayAnimation",Bi(15,zIe,ys(12,BIe,e.showTransitionOptions,e.hideTransitionOptions)))("ngStyle",e.panelStyle),Me(1),ve("ngIf",e.showHeader),Me(1),tf("max-height",e.virtualScroll?"auto":e.scrollHeight||"auto"),Me(1),ve("ngIf",e.virtualScroll),Me(1),ve("ngIf",!e.virtualScroll),Me(3),ve("ngIf",e.footerFacet||e.footerTemplate)}}const UIe=[[["p-header"]],[["p-footer"]]],HIe=function(i,t,e,n){return{"p-multiselect p-component":!0,"p-multiselect-open":i,"p-multiselect-chip":t,"p-focus":e,"p-disabled":n}},GIe=function(i,t){return{"p-placeholder":i,"p-multiselect-label-empty":t}},WIe=function(){return{"p-multiselect-trigger":!0}},jIe=["p-header","p-footer"],$Ie={provide:bc,useExisting:ds(()=>XIe),multi:!0};let qIe=(()=>{class i{constructor(){this.onClick=new qn,this.onKeydown=new qn}onOptionClick(e){this.onClick.emit({originalEvent:e,option:this.option})}onOptionKeydown(e){this.onKeydown.emit({originalEvent:e,option:this.option})}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=Ir({type:i,selectors:[["p-multiSelectItem"]],hostAttrs:[1,"p-element"],inputs:{option:"option",selected:"selected",label:"label",disabled:"disabled",itemSize:"itemSize",template:"template"},outputs:{onClick:"onClick",onKeydown:"onKeydown"},decls:6,vars:20,consts:[["pRipple","",1,"p-multiselect-item",3,"ngStyle","ngClass","click","keydown"],[1,"p-checkbox","p-component"],[1,"p-checkbox-box",3,"ngClass"],[1,"p-checkbox-icon",3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,n){1&e&&(lt(0,"li",0),fn("click",function(s){return n.onOptionClick(s)})("keydown",function(s){return n.onOptionKeydown(s)}),lt(1,"div",1)(2,"div",2),ii(3,"span",3),ct()(),Ze(4,BAe,2,1,"span",4),Ze(5,zAe,1,0,"ng-container",5),ct()),2&e&&(ve("ngStyle",Bi(9,SA,n.itemSize+"px"))("ngClass",ys(11,VAe,n.selected,n.disabled)),mr("aria-label",n.label)("tabindex",n.disabled?null:"0"),Me(2),ve("ngClass",Bi(14,UAe,n.selected)),Me(1),ve("ngClass",Bi(16,E6,n.selected)),Me(1),ve("ngIf",!n.template),Me(1),ve("ngTemplateOutlet",n.template)("ngTemplateOutletContext",Bi(18,EA,n.option)))},dependencies:[bo,Wo,rc,Qo,_d],encapsulation:2}),i})(),XIe=(()=>{class i{constructor(e,n,r,s,o,l){this.el=e,this.renderer=n,this.cd=r,this.filterService=s,this.config=o,this.overlayService=l,this.filter=!0,this.displaySelectedLabel=!0,this.maxSelectedLabels=3,this.selectedItemsLabel="ellipsis",this.showToggleAll=!0,this.emptyFilterMessage="",this.emptyMessage="",this.resetFilterOnHide=!1,this.dropdownIcon="pi pi-chevron-down",this.optionGroupChildren="items",this.showHeader=!0,this.autoZIndex=!0,this.baseZIndex=0,this.scrollHeight="200px",this.lazy=!1,this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.filterMatchMode="contains",this.tooltip="",this.tooltipPosition="right",this.tooltipPositionStyle="absolute",this.autofocusFilter=!0,this.display="comma",this.autocomplete="on",this.showClear=!1,this.onChange=new qn,this.onFilter=new qn,this.onFocus=new qn,this.onBlur=new qn,this.onClick=new qn,this.onClear=new qn,this.onPanelShow=new qn,this.onPanelHide=new qn,this.onLazyLoad=new qn,this.onModelChange=()=>{},this.onModelTouched=()=>{}}set defaultLabel(e){this._defaultLabel=e,this.updateLabel()}get defaultLabel(){return this._defaultLabel}set placeholder(e){this._placeholder=e,this.updateLabel()}get placeholder(){return this._placeholder}get options(){return this._options}set options(e){this._options=e,this.updateLabel()}get filterValue(){return this._filterValue}set filterValue(e){this._filterValue=e,this.activateFilter()}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=e,console.warn("The itemSize property is deprecated, use virtualScrollItemSize property instead.")}ngOnInit(){this.updateLabel(),this.filterBy&&(this.filterOptions={filter:e=>this.onFilterInputChange(e),reset:()=>this.resetFilter()})}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"item":default:this.itemTemplate=e.template;break;case"group":this.groupTemplate=e.template;break;case"selectedItems":this.selectedItemsTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"filter":this.filterTemplate=e.template;break;case"emptyfilter":this.emptyFilterTemplate=e.template;break;case"empty":this.emptyTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"loader":this.loaderTemplate=e.template}})}ngAfterViewInit(){this.overlayVisible&&this.show()}ngAfterViewChecked(){this.filtered&&(this.alignOverlay(),this.filtered=!1)}getOptionLabel(e){return this.optionLabel?fr.resolveFieldData(e,this.optionLabel):e&&null!=e.label?e.label:e}getOptionValue(e){return this.optionValue?fr.resolveFieldData(e,this.optionValue):!this.optionLabel&&e&&void 0!==e.value?e.value:e}getOptionGroupLabel(e){return this.optionGroupLabel?fr.resolveFieldData(e,this.optionGroupLabel):e&&null!=e.label?e.label:e}getOptionGroupChildren(e){return this.optionGroupChildren?fr.resolveFieldData(e,this.optionGroupChildren):e.items}isOptionDisabled(e){return(this.optionDisabled?fr.resolveFieldData(e,this.optionDisabled):!(!e||void 0===e.disabled)&&e.disabled)||this.maxSelectionLimitReached&&!this.isSelected(e)}writeValue(e){this.value=e,this.updateLabel(),this.updateFilledState(),this.checkSelectionLimit(),this.cd.markForCheck()}checkSelectionLimit(){this.maxSelectionLimitReached=!(!this.selectionLimit||!this.value||this.value.length!==this.selectionLimit)}updateFilledState(){this.filled=this.value&&this.value.length>0}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onOptionClick(e){let n=e.option;if(this.isOptionDisabled(n))return;let r=this.getOptionValue(n),s=this.findSelectionIndex(r);-1!=s?(this.value=this.value.filter((o,l)=>l!=s),this.selectionLimit&&(this.maxSelectionLimitReached=!1)):((!this.selectionLimit||!this.value||this.value.length<this.selectionLimit)&&(this.value=[...this.value||[],r]),this.checkSelectionLimit()),this.onModelChange(this.value),this.onChange.emit({originalEvent:e.originalEvent,value:this.value,itemValue:r}),this.updateLabel(),this.updateFilledState()}isSelected(e){return-1!=this.findSelectionIndex(this.getOptionValue(e))}findSelectionIndex(e){let n=-1;if(this.value)for(let r=0;r<this.value.length;r++)if(fr.equals(this.value[r],e,this.dataKey)){n=r;break}return n}get toggleAllDisabled(){let e=this.optionsToRender;if(!e||0===e.length)return!0;for(let n of e)if(!this.isOptionDisabled(n))return!1;return!0}toggleAll(e){this.disabled||this.toggleAllDisabled||this.readonly||(this.allChecked?this.uncheckAll():this.checkAll(),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}),this.updateFilledState(),this.updateLabel(),e.preventDefault())}checkAll(){let n=[];this.optionsToRender.forEach(r=>{if(this.group){let s=this.getOptionGroupChildren(r);s&&s.forEach(o=>{let l=this.isOptionDisabled(o);(!l||l&&this.isSelected(o))&&n.push(this.getOptionValue(o))})}else{let s=this.isOptionDisabled(r);(!s||s&&this.isSelected(r))&&n.push(this.getOptionValue(r))}}),this.value=n}uncheckAll(){let n=[];this.optionsToRender.forEach(r=>{this.group?r.items&&r.items.forEach(s=>{this.isOptionDisabled(s)&&this.isSelected(s)&&n.push(this.getOptionValue(s))}):this.isOptionDisabled(r)&&this.isSelected(r)&&n.push(this.getOptionValue(r))}),this.value=n}show(){this.overlayVisible||(this.overlayVisible=!0,this.preventDocumentDefault=!0,this.cd.markForCheck())}onOverlayClick(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement})}onOverlayAnimationStart(e){switch(e.toState){case"visible":this.overlay=e.element,this.virtualScroll&&this.scroller?.setContentEl(this.itemsViewChild.nativeElement),this.appendOverlay(),this.autoZIndex&&Dl.set("overlay",this.overlay,this.baseZIndex+this.config.zIndex.overlay),this.alignOverlay(),this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener(),this.filterInputChild&&this.filterInputChild.nativeElement&&(this.preventModelTouched=!0,this.autofocusFilter&&this.filterInputChild.nativeElement.focus()),this.onPanelShow.emit();break;case"void":this.onOverlayHide()}}onOverlayAnimationEnd(e){"void"===e.toState&&Dl.clear(e.element)}appendOverlay(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.overlay):Kt.appendChild(this.overlay,this.appendTo),this.overlay.style.minWidth||(this.overlay.style.minWidth=Kt.getWidth(this.containerViewChild.nativeElement)+"px"))}restoreOverlayAppend(){this.overlay&&this.appendTo&&this.el.nativeElement.appendChild(this.overlay)}alignOverlay(){this.overlay&&(this.appendTo?Kt.absolutePosition(this.overlay,this.containerViewChild.nativeElement):Kt.relativePosition(this.overlay,this.containerViewChild.nativeElement))}hide(){this.overlayVisible=!1,this.unbindDocumentClickListener(),this.resetFilterOnHide&&this.resetFilter(),this.onPanelHide.emit(),this.cd.markForCheck()}resetFilter(){this.filterInputChild&&this.filterInputChild.nativeElement&&(this.filterInputChild.nativeElement.value=""),this._filterValue=null,this._filteredOptions=null}close(e){this.hide(),e.preventDefault(),e.stopPropagation()}clear(e){this.value=null,this.updateLabel(),this.updateFilledState(),this.onClear.emit(),this.onModelChange(this.value),e.stopPropagation()}onMouseclick(e,n){this.disabled||this.readonly||e.target.isSameNode(this.accessibleViewChild.nativeElement)||(this.onClick.emit(e),!this.isOverlayClick(e)&&!Kt.hasClass(e.target,"p-multiselect-token-icon")&&(this.overlayVisible?this.hide():(n.focus(),this.show())))}removeChip(e,n){this.value=this.value.filter(r=>!fr.equals(r,e,this.dataKey)),this.onModelChange(this.value),this.checkSelectionLimit(),this.onChange.emit({originalEvent:n,value:this.value,itemValue:e}),this.updateLabel(),this.updateFilledState()}isOverlayClick(e){let n=e.target;return!!this.overlay&&(this.overlay.isSameNode(n)||this.overlay.contains(n))}isOutsideClicked(e){return!(this.el.nativeElement.isSameNode(e.target)||this.el.nativeElement.contains(e.target)||this.isOverlayClick(e))}onInputFocus(e){this.focus=!0,this.onFocus.emit({originalEvent:e})}onInputBlur(e){this.focus=!1,this.onBlur.emit({originalEvent:e}),this.preventModelTouched||this.onModelTouched(),this.preventModelTouched=!1}onOptionKeydown(e){if(!this.readonly)switch(e.originalEvent.which){case 40:var n=this.findNextItem(e.originalEvent.target.parentElement);n&&n.focus(),e.originalEvent.preventDefault();break;case 38:var r=this.findPrevItem(e.originalEvent.target.parentElement);r&&r.focus(),e.originalEvent.preventDefault();break;case 13:this.onOptionClick(e),e.originalEvent.preventDefault();break;case 9:this.hide()}}findNextItem(e){let n=e.nextElementSibling;return n?Kt.hasClass(n.children[0],"p-disabled")||Kt.isHidden(n.children[0])||Kt.hasClass(n,"p-multiselect-item-group")?this.findNextItem(n):n.children[0]:null}findPrevItem(e){let n=e.previousElementSibling;return n?Kt.hasClass(n.children[0],"p-disabled")||Kt.isHidden(n.children[0])||Kt.hasClass(n,"p-multiselect-item-group")?this.findPrevItem(n):n.children[0]:null}onKeydown(e){switch(e.which){case 40:!this.overlayVisible&&e.altKey&&(this.show(),e.preventDefault());break;case 32:this.overlayVisible||(this.show(),e.preventDefault());break;case 27:this.hide()}}updateLabel(){if(this.value&&this.options&&this.value.length&&this.displaySelectedLabel){let e="";for(let n=0;n<this.value.length;n++){let r=this.findLabelByValue(this.value[n]);r&&(e.length>0&&(e+=", "),e+=r)}if(this.value.length<=this.maxSelectedLabels||"ellipsis"===this.selectedItemsLabel)this.valuesAsString=e;else{let n=/{(.*?)}/;this.valuesAsString=n.test(this.selectedItemsLabel)?this.selectedItemsLabel.replace(this.selectedItemsLabel.match(n)[0],this.value.length+""):this.selectedItemsLabel}}else this.valuesAsString=this.placeholder||this.defaultLabel}findLabelByValue(e){if(this.group){let n=null;for(let r=0;r<this.options.length;r++){let s=this.getOptionGroupChildren(this.options[r]);if(s&&(n=this.searchLabelByValue(e,s),n))break}return n}return this.searchLabelByValue(e,this.options)}searchLabelByValue(e,n){let r=null;for(let s=0;s<n.length;s++){let o=n[s],l=this.getOptionValue(o);if(null==e&&null==l||fr.equals(e,l,this.dataKey)){r=this.getOptionLabel(o);break}}return r}get allChecked(){let e=this.optionsToRender;if(!e||0===e.length)return!1;{let n=0,r=0,s=0,o=this.group?0:this.optionsToRender.length;for(let l of e)if(this.group)for(let u of this.getOptionGroupChildren(l)){let p=this.isOptionDisabled(u),v=this.isSelected(u);if(p)v?n++:r++;else{if(!v)return!1;s++}o++}else{let u=this.isOptionDisabled(l),p=this.isSelected(l);if(u)p?n++:r++;else{if(!p)return!1;s++}}return o===n||o===s||s&&o===s+r+n}}get optionsToRender(){return this._filteredOptions||this.options}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(Wc.EMPTY_MESSAGE)}get emptyFilterMessageLabel(){return this.emptyFilterMessage||this.config.getTranslation(Wc.EMPTY_FILTER_MESSAGE)}hasFilter(){return this._filterValue&&this._filterValue.trim().length>0}isEmpty(){return!this.optionsToRender||this.optionsToRender&&0===this.optionsToRender.length}onFilterInputChange(e){this._filterValue=e.target.value,this.activateFilter(),this.onFilter.emit({originalEvent:e,filter:this._filterValue}),this.cd.detectChanges(),this.alignOverlay()}activateFilter(){if(this.hasFilter()&&this._options){let e=(this.filterBy||this.optionLabel||"label").split(",");if(this.group){let n=[];for(let r of this.options){let s=this.filterService.filter(this.getOptionGroupChildren(r),e,this.filterValue,this.filterMatchMode,this.filterLocale);s&&s.length&&n.push({...r,[this.optionGroupChildren]:s})}this._filteredOptions=n}else this._filteredOptions=this.filterService.filter(this.options,e,this._filterValue,this.filterMatchMode,this.filterLocale)}else this._filteredOptions=null}onHeaderCheckboxFocus(){this.headerCheckboxFocus=!0}onHeaderCheckboxBlur(){this.headerCheckboxFocus=!1}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","click",n=>{!this.preventDocumentDefault&&this.isOutsideClicked(n)&&this.hide(),this.preventDocumentDefault=!1}))}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener)}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}onWindowResize(){this.overlayVisible&&!Kt.isTouchDevice()&&this.hide()}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new xw(this.containerViewChild.nativeElement,()=>{this.overlayVisible&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}onOverlayHide(){this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.overlay=null,this.onModelTouched()}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.overlay&&Dl.clear(this.overlay),this.restoreOverlayAppend(),this.onOverlayHide()}}return i.\u0275fac=function(e){return new(e||i)(Zt(Xn),Zt(h),Zt(Zo),Zt(v1),Zt(Tp),Zt(iw))},i.\u0275cmp=Ir({type:i,selectors:[["p-multiSelect"]],contentQueries:function(e,n,r){if(1&e&&(cl(r,y1,5),cl(r,jD,5),cl(r,_l,4)),2&e){let s;vr(s=yr())&&(n.footerFacet=s.first),vr(s=yr())&&(n.headerFacet=s.first),vr(s=yr())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(vs(HAe,5),vs(GAe,5),vs(WAe,5),vs(jAe,5),vs($Ae,5)),2&e){let r;vr(r=yr())&&(n.containerViewChild=r.first),vr(r=yr())&&(n.filterInputChild=r.first),vr(r=yr())&&(n.accessibleViewChild=r.first),vr(r=yr())&&(n.itemsViewChild=r.first),vr(r=yr())&&(n.scroller=r.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(e,n){2&e&&Ep("p-inputwrapper-filled",n.filled)("p-inputwrapper-focus",n.focus||n.overlayVisible)("p-multiselect-clearable",n.showClear&&!n.disabled)},inputs:{style:"style",styleClass:"styleClass",panelStyle:"panelStyle",panelStyleClass:"panelStyleClass",inputId:"inputId",disabled:"disabled",readonly:"readonly",group:"group",filter:"filter",filterPlaceHolder:"filterPlaceHolder",filterLocale:"filterLocale",overlayVisible:"overlayVisible",tabindex:"tabindex",appendTo:"appendTo",dataKey:"dataKey",name:"name",label:"label",ariaLabelledBy:"ariaLabelledBy",displaySelectedLabel:"displaySelectedLabel",maxSelectedLabels:"maxSelectedLabels",selectionLimit:"selectionLimit",selectedItemsLabel:"selectedItemsLabel",showToggleAll:"showToggleAll",emptyFilterMessage:"emptyFilterMessage",emptyMessage:"emptyMessage",resetFilterOnHide:"resetFilterOnHide",dropdownIcon:"dropdownIcon",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",optionGroupLabel:"optionGroupLabel",optionGroupChildren:"optionGroupChildren",showHeader:"showHeader",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",filterBy:"filterBy",scrollHeight:"scrollHeight",lazy:"lazy",virtualScroll:"virtualScroll",virtualScrollItemSize:"virtualScrollItemSize",virtualScrollOptions:"virtualScrollOptions",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",ariaFilterLabel:"ariaFilterLabel",filterMatchMode:"filterMatchMode",tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",autofocusFilter:"autofocusFilter",display:"display",autocomplete:"autocomplete",showClear:"showClear",defaultLabel:"defaultLabel",placeholder:"placeholder",options:"options",filterValue:"filterValue",itemSize:"itemSize"},outputs:{onChange:"onChange",onFilter:"onFilter",onFocus:"onFocus",onBlur:"onBlur",onClick:"onClick",onClear:"onClear",onPanelShow:"onPanelShow",onPanelHide:"onPanelHide",onLazyLoad:"onLazyLoad"},features:[To([$Ie])],ngContentSelectors:jIe,decls:13,vars:34,consts:[[3,"ngClass","ngStyle","click"],["container",""],[1,"p-hidden-accessible"],["type","text","readonly","readonly","aria-haspopup","listbox","role","listbox",3,"disabled","focus","blur","keydown"],["in",""],[1,"p-multiselect-label-container",3,"pTooltip","tooltipPosition","positionStyle","tooltipStyleClass"],[1,"p-multiselect-label",3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","p-multiselect-clear-icon pi pi-times",3,"click",4,"ngIf"],[3,"ngClass"],[1,"p-multiselect-trigger-icon",3,"ngClass"],[3,"ngClass","ngStyle","class","keydown","click",4,"ngIf"],["class","p-multiselect-token",4,"ngFor","ngForOf"],[1,"p-multiselect-token"],["token",""],[1,"p-multiselect-token-label"],["class","p-multiselect-token-icon pi pi-times-circle",3,"click",4,"ngIf"],[1,"p-multiselect-token-icon","pi","pi-times-circle",3,"click"],[1,"p-multiselect-clear-icon","pi","pi-times",3,"click"],[3,"ngClass","ngStyle","keydown","click"],["class","p-multiselect-header",4,"ngIf"],[1,"p-multiselect-items-wrapper"],[3,"items","style","itemSize","autoSize","tabindex","lazy","options","onLazyLoad",4,"ngIf"],["buildInItems",""],["class","p-multiselect-footer",4,"ngIf"],[1,"p-multiselect-header"],[4,"ngTemplateOutlet"],[4,"ngIf","ngIfElse"],["builtInFilterElement",""],["class","p-checkbox p-component",3,"ngClass",4,"ngIf"],["class","p-multiselect-filter-container",4,"ngIf"],["type","button","pRipple","",1,"p-multiselect-close","p-link",3,"click"],[1,"p-multiselect-close-icon","pi","pi-times"],[1,"p-checkbox","p-component",3,"ngClass"],["type","checkbox","readonly","readonly",3,"checked","disabled","focus","blur","keydown.space"],["role","checkbox",1,"p-checkbox-box",3,"ngClass","click"],[1,"p-checkbox-icon",3,"ngClass"],[1,"p-multiselect-filter-container"],["type","text","role","textbox",1,"p-multiselect-filter","p-inputtext","p-component",3,"value","disabled","input"],["filterInput",""],[1,"p-multiselect-filter-icon","pi","pi-search"],[3,"items","itemSize","autoSize","tabindex","lazy","options","onLazyLoad"],["scroller",""],["pTemplate","content"],["pTemplate","loader"],["role","listbox","aria-multiselectable","true",1,"p-multiselect-items","p-component",3,"ngClass"],["items",""],["itemslist",""],["class","p-multiselect-empty-message",3,"ngStyle",4,"ngIf"],["ngFor","",3,"ngForOf"],[1,"p-multiselect-item-group",3,"ngStyle"],[3,"option","selected","label","disabled","template","itemSize","onClick","onKeydown"],[1,"p-multiselect-empty-message",3,"ngStyle"],["emptyFilter",""],["empty",""],[1,"p-multiselect-footer"]],template:function(e,n){if(1&e){const r=Pi();dg(UIe),lt(0,"div",0,1),fn("click",function(o){wt(r);const l=co(4);return At(n.onMouseclick(o,l))}),lt(2,"div",2)(3,"input",3,4),fn("focus",function(o){return n.onInputFocus(o)})("blur",function(o){return n.onInputBlur(o)})("keydown",function(o){return n.onKeydown(o)}),ct()(),lt(5,"div",5)(6,"div",6),Ze(7,QAe,3,2,"ng-container",7),Ze(8,JAe,1,0,"ng-container",8),ct(),Ze(9,eIe,1,0,"i",9),ct(),lt(10,"div",10),ii(11,"span",11),ct(),Ze(12,VIe,8,17,"div",12),ct()}2&e&&(Ur(n.styleClass),ve("ngClass",Ff(23,HIe,n.overlayVisible,"chip"===n.display,n.focus,n.disabled))("ngStyle",n.style),Me(3),ve("disabled",n.disabled),mr("label",n.label)("id",n.inputId)("name",n.name)("tabindex",n.tabindex)("aria-expanded",n.overlayVisible)("aria-labelledby",n.ariaLabelledBy),Me(2),ve("pTooltip",n.tooltip)("tooltipPosition",n.tooltipPosition)("positionStyle",n.tooltipPositionStyle)("tooltipStyleClass",n.tooltipStyleClass),Me(1),ve("ngClass",ys(28,GIe,n.valuesAsString===(n.defaultLabel||n.placeholder),!(null!=n.valuesAsString&&0!==n.valuesAsString.length||null!=n.placeholder&&0!==n.placeholder.length))),Me(1),ve("ngIf",!n.selectedItemsTemplate),Me(1),ve("ngTemplateOutlet",n.selectedItemsTemplate)("ngTemplateOutletContext",Bi(31,EA,n.value)),Me(1),ve("ngIf",null!=n.value&&n.filled&&!n.disabled&&n.showClear),Me(1),ve("ngClass",Mo(33,WIe)),Me(1),ve("ngClass",n.dropdownIcon),Me(1),ve("ngIf",n.overlayVisible))},dependencies:[bo,Su,Wo,rc,Qo,_l,o_,_d,z1,qIe],styles:[".p-multiselect{display:inline-flex;cursor:pointer;position:relative;-webkit-user-select:none;user-select:none}.p-multiselect-trigger{display:flex;align-items:center;justify-content:center;flex-shrink:0}.p-multiselect-label-container{overflow:hidden;flex:1 1 auto;cursor:pointer}.p-multiselect-label{display:block;white-space:nowrap;cursor:pointer;overflow:hidden;text-overflow:ellipsis}.p-multiselect-label-empty{overflow:hidden;visibility:hidden}.p-multiselect-token{cursor:default;display:inline-flex;align-items:center;flex:0 0 auto}.p-multiselect-token-icon{cursor:pointer}.p-multiselect .p-multiselect-panel{min-width:100%}.p-multiselect-panel{position:absolute;top:0;left:0}.p-multiselect-items-wrapper{overflow:auto}.p-multiselect-items{margin:0;padding:0;list-style-type:none}.p-multiselect-item{cursor:pointer;display:flex;align-items:center;font-weight:400;white-space:nowrap;position:relative;overflow:hidden}.p-multiselect-header{display:flex;align-items:center;justify-content:space-between}.p-multiselect-filter-container{position:relative;flex:1 1 auto}.p-multiselect-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-multiselect-filter-container .p-inputtext{width:100%}.p-multiselect-close{display:flex;align-items:center;justify-content:center;flex-shrink:0;overflow:hidden;position:relative}.p-fluid .p-multiselect{display:flex}.p-multiselect-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-multiselect-clearable{position:relative}\n"],encapsulation:2,data:{animation:[oy("overlayAnimation",[Eu(":enter",[Qa({opacity:0,transform:"scaleY(0.8)"}),Cc("{{showTransitionParams}}")]),Eu(":leave",[Cc("{{hideTransitionParams}}",Qa({opacity:0}))])])]},changeDetection:0}),i})(),YIe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({imports:[Ns,Na,iv,$c,rv,Na,rv]}),i})();function KIe(i,t){if(1&i){const e=Pi();lt(0,"span",3),fn("click",function(r){return wt(e),At(_e().clear(r))})("keydown.enter",function(r){return wt(e),At(_e().clear(r))}),ct()}if(2&i){const e=_e();ve("ngClass",e.iconCancelClass)("ngStyle",e.iconCancelStyle),mr("tabindex",e.disabled||e.readonly?null:"0")}}function ZIe(i,t){if(1&i){const e=Pi();lt(0,"span",4),fn("click",function(r){const o=wt(e).index;return At(_e().rate(r,o))})("keydown.enter",function(r){const o=wt(e).index;return At(_e().rate(r,o))}),ct()}if(2&i){const e=t.index,n=_e();ve("ngClass",!n.value||e>=n.value?n.iconOffClass:n.iconOnClass)("ngStyle",!n.value||e>=n.value?n.iconOffStyle:n.iconOnStyle),mr("tabindex",n.disabled||n.readonly?null:"0")}}const QIe=function(i,t){return{"p-readonly":i,"p-disabled":t}},JIe={provide:bc,useExisting:ds(()=>e1e),multi:!0};let e1e=(()=>{class i{constructor(e){this.cd=e,this.stars=5,this.cancel=!0,this.iconOnClass="pi pi-star-fill",this.iconOffClass="pi pi-star",this.iconCancelClass="pi pi-ban",this.onRate=new qn,this.onCancel=new qn,this.onModelChange=()=>{},this.onModelTouched=()=>{}}ngOnInit(){this.starsArray=[];for(let e=0;e<this.stars;e++)this.starsArray[e]=e}rate(e,n){!this.readonly&&!this.disabled&&(this.value=n+1,this.onModelChange(this.value),this.onModelTouched(),this.onRate.emit({originalEvent:e,value:n+1})),e.preventDefault()}clear(e){!this.readonly&&!this.disabled&&(this.value=null,this.onModelChange(this.value),this.onModelTouched(),this.onCancel.emit(e)),e.preventDefault()}writeValue(e){this.value=e,this.cd.detectChanges()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}}return i.\u0275fac=function(e){return new(e||i)(Zt(Zo))},i.\u0275cmp=Ir({type:i,selectors:[["p-rating"]],hostAttrs:[1,"p-element"],inputs:{disabled:"disabled",readonly:"readonly",stars:"stars",cancel:"cancel",iconOnClass:"iconOnClass",iconOnStyle:"iconOnStyle",iconOffClass:"iconOffClass",iconOffStyle:"iconOffStyle",iconCancelClass:"iconCancelClass",iconCancelStyle:"iconCancelStyle"},outputs:{onRate:"onRate",onCancel:"onCancel"},features:[To([JIe])],decls:3,vars:6,consts:[[1,"p-rating",3,"ngClass"],["class","p-rating-icon p-rating-cancel",3,"ngClass","ngStyle","click","keydown.enter",4,"ngIf"],["class","p-rating-icon",3,"ngClass","ngStyle","click","keydown.enter",4,"ngFor","ngForOf"],[1,"p-rating-icon","p-rating-cancel",3,"ngClass","ngStyle","click","keydown.enter"],[1,"p-rating-icon",3,"ngClass","ngStyle","click","keydown.enter"]],template:function(e,n){1&e&&(lt(0,"div",0),Ze(1,KIe,1,3,"span",1),Ze(2,ZIe,1,3,"span",2),ct()),2&e&&(ve("ngClass",ys(3,QIe,n.readonly,n.disabled)),Me(1),ve("ngIf",n.cancel),Me(1),ve("ngForOf",n.starsArray))},dependencies:[bo,Su,Wo,Qo],styles:[".p-rating-icon{cursor:pointer}.p-rating.p-rating-readonly .p-rating-icon{cursor:default}\n"],encapsulation:2,changeDetection:0}),i})(),t1e=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({imports:[Ns]}),i})();const n1e=["rb"],i1e=function(i,t,e){return{"p-radiobutton-label":!0,"p-radiobutton-label-active":i,"p-disabled":t,"p-radiobutton-label-focus":e}};function r1e(i,t){if(1&i){const e=Pi();lt(0,"label",4),fn("click",function(r){return wt(e),At(_e().select(r))}),qi(1),ct()}if(2&i){const e=_e(),n=co(3);Ur(e.labelStyleClass),ve("ngClass",wu(5,i1e,n.checked,e.disabled,e.focused)),mr("for",e.inputId),Me(1),as(e.label)}}const s1e=function(i,t,e){return{"p-radiobutton p-component":!0,"p-radiobutton-checked":i,"p-radiobutton-disabled":t,"p-radiobutton-focused":e}},o1e=function(i,t,e){return{"p-radiobutton-box":!0,"p-highlight":i,"p-disabled":t,"p-focus":e}},a1e={provide:bc,useExisting:ds(()=>c1e),multi:!0};let l1e=(()=>{class i{constructor(){this.accessors=[]}add(e,n){this.accessors.push([e,n])}remove(e){this.accessors=this.accessors.filter(n=>n[1]!==e)}select(e){this.accessors.forEach(n=>{this.isSameGroup(n,e)&&n[1]!==e&&n[1].writeValue(e.value)})}isSameGroup(e,n){return!!e[0].control&&e[0].control.root===n.control.control.root&&e[1].name===n.name}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Yi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),c1e=(()=>{class i{constructor(e,n,r){this.cd=e,this.injector=n,this.registry=r,this.onClick=new qn,this.onFocus=new qn,this.onBlur=new qn,this.onModelChange=()=>{},this.onModelTouched=()=>{}}ngOnInit(){this.control=this.injector.get(nv),this.checkName(),this.registry.add(this.control,this)}handleClick(e,n,r){e.preventDefault(),!this.disabled&&(this.select(e),r&&n.focus())}select(e){this.disabled||(this.inputViewChild.nativeElement.checked=!0,this.checked=!0,this.onModelChange(this.value),this.registry.select(this),this.onClick.emit(e))}writeValue(e){this.checked=e==this.value,this.inputViewChild&&this.inputViewChild.nativeElement&&(this.inputViewChild.nativeElement.checked=this.checked),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onInputFocus(e){this.focused=!0,this.onFocus.emit(e)}onInputBlur(e){this.focused=!1,this.onModelTouched(),this.onBlur.emit(e)}onChange(e){this.select(e)}focus(){this.inputViewChild.nativeElement.focus()}ngOnDestroy(){this.registry.remove(this)}checkName(){this.name&&this.formControlName&&this.name!==this.formControlName&&this.throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}throwNameError(){throw new Error('\n          If you define both a name and a formControlName attribute on your radio button, their values\n          must match. Ex: <p-radioButton formControlName="food" name="food"></p-radioButton>\n        ')}}return i.\u0275fac=function(e){return new(e||i)(Zt(Zo),Zt(xu),Zt(l1e))},i.\u0275cmp=Ir({type:i,selectors:[["p-radioButton"]],viewQuery:function(e,n){if(1&e&&vs(n1e,5),2&e){let r;vr(r=yr())&&(n.inputViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{value:"value",formControlName:"formControlName",name:"name",disabled:"disabled",label:"label",tabindex:"tabindex",inputId:"inputId",ariaLabelledBy:"ariaLabelledBy",ariaLabel:"ariaLabel",style:"style",styleClass:"styleClass",labelStyleClass:"labelStyleClass"},outputs:{onClick:"onClick",onFocus:"onFocus",onBlur:"onBlur"},features:[To([a1e])],decls:7,vars:23,consts:[[3,"ngStyle","ngClass"],[1,"p-hidden-accessible"],["type","radio",3,"checked","disabled","change","focus","blur"],["rb",""],[3,"ngClass","click"],[1,"p-radiobutton-icon"],[3,"class","ngClass","click",4,"ngIf"]],template:function(e,n){if(1&e){const r=Pi();lt(0,"div",0)(1,"div",1)(2,"input",2,3),fn("change",function(o){return n.onChange(o)})("focus",function(o){return n.onInputFocus(o)})("blur",function(o){return n.onInputBlur(o)}),ct()(),lt(4,"div",4),fn("click",function(o){wt(r);const l=co(3);return At(n.handleClick(o,l,!0))}),ii(5,"span",5),ct()(),Ze(6,r1e,2,9,"label",6)}2&e&&(Ur(n.styleClass),ve("ngStyle",n.style)("ngClass",wu(15,s1e,n.checked,n.disabled,n.focused)),Me(2),ve("checked",n.checked)("disabled",n.disabled),mr("id",n.inputId)("name",n.name)("value",n.value)("tabindex",n.tabindex)("aria-checked",n.checked)("aria-label",n.ariaLabel)("aria-labelledby",n.ariaLabelledBy),Me(2),ve("ngClass",wu(19,o1e,n.checked,n.disabled,n.focused)),Me(2),ve("ngIf",n.label))},dependencies:[bo,Wo,Qo],encapsulation:2,changeDetection:0}),i})(),u1e=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({imports:[Ns]}),i})();lC([Qa({transform:"{{transform}}",opacity:0}),Cc("{{transition}}",Qa({transform:"none",opacity:1}))]),lC([Cc("{{transition}}",Qa({transform:"{{transform}}",opacity:0}))]);let E1e=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({imports:[Ns,sv,$c,sv,Na]}),i})(),T1e=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({imports:[Ns]}),i})(),R1e=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({imports:[Ns,$c,Na,Na]}),i})();const k1e=cw([],lw(uw,(i,{graphs:t})=>t)),O1e=cw({id:"default",label:"default",style:"default",nodes:[],edges:[]},lw(x1,(i,{graph:t})=>t));let j1e=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({imports:[Ns,Na,iv,$c,Na]}),i})(),CSe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({imports:[Ns,qV,$c,rv,Na,rv]}),i})();const xSe=["headerchkbox"],wSe=["filter"];function ASe(i,t){1&i&&Ki(0)}function ISe(i,t){if(1&i&&(lt(0,"div",7),$u(1),Ze(2,ASe,1,0,"ng-container",8),ct()),2&i){const e=_e();Me(2),ve("ngTemplateOutlet",e.headerTemplate)}}const L6=function(i){return{"p-checkbox-disabled":i}},SSe=function(i,t,e){return{"p-highlight":i,"p-focus":t,"p-disabled":e}},P6=function(i){return{"pi pi-check":i}};function ESe(i,t){if(1&i){const e=Pi();lt(0,"div",12)(1,"div",13)(2,"input",14),fn("focus",function(){return wt(e),At(_e(2).onHeaderCheckboxFocus())})("blur",function(){return wt(e),At(_e(2).onHeaderCheckboxBlur())})("keydown.space",function(r){return wt(e),At(_e(2).toggleAll(r))}),ct()(),lt(3,"div",15,16),fn("click",function(r){return wt(e),At(_e(2).toggleAll(r))}),ii(5,"span",17),ct()()}if(2&i){const e=_e(2);ve("ngClass",Bi(5,L6,e.disabled||e.toggleAllDisabled)),Me(2),ve("checked",e.allChecked)("disabled",e.disabled||e.toggleAllDisabled),Me(1),ve("ngClass",wu(7,SSe,e.allChecked,e.headerCheckboxFocus,e.disabled||e.toggleAllDisabled)),Me(2),ve("ngClass",Bi(11,P6,e.allChecked))}}function TSe(i,t){1&i&&Ki(0)}const MSe=function(i){return{options:i}};function DSe(i,t){if(1&i&&(qr(0),Ze(1,TSe,1,0,"ng-container",18),Xr()),2&i){const e=_e(2);Me(1),ve("ngTemplateOutlet",e.filterTemplate)("ngTemplateOutletContext",Bi(2,MSe,e.filterOptions))}}function LSe(i,t){if(1&i){const e=Pi();lt(0,"div",20)(1,"input",21,22),fn("input",function(r){return wt(e),At(_e(3).onFilter(r))}),ct(),ii(3,"span",23),ct()}if(2&i){const e=_e(3);Me(1),ve("value",e.filterValue||"")("disabled",e.disabled),mr("placeholder",e.filterPlaceHolder)("aria-label",e.ariaFilterLabel)}}function PSe(i,t){1&i&&Ze(0,LSe,4,4,"div",19),2&i&&ve("ngIf",_e(2).filter)}function RSe(i,t){if(1&i&&(lt(0,"div",7),Ze(1,ESe,6,13,"div",9),Ze(2,DSe,2,4,"ng-container",10),Ze(3,PSe,1,1,"ng-template",null,11,vc),ct()),2&i){const e=co(4),n=_e();Me(1),ve("ngIf",n.checkbox&&n.multiple&&n.showToggleAll),Me(1),ve("ngIf",n.filterTemplate)("ngIfElse",e)}}function kSe(i,t){if(1&i&&(lt(0,"span"),qi(1),ct()),2&i){const e=_e().$implicit,n=_e(2);Me(1),as(n.getOptionGroupLabel(e)||"empty")}}function OSe(i,t){1&i&&Ki(0)}function FSe(i,t){1&i&&Ki(0)}const OR=function(i){return{$implicit:i}};function NSe(i,t){if(1&i&&(lt(0,"li",25),Ze(1,kSe,2,1,"span",3),Ze(2,OSe,1,0,"ng-container",18),ct(),Ze(3,FSe,1,0,"ng-container",18)),2&i){const e=t.$implicit,n=_e(2),r=co(8);Me(1),ve("ngIf",!n.groupTemplate),Me(1),ve("ngTemplateOutlet",n.groupTemplate)("ngTemplateOutletContext",Bi(5,OR,e)),Me(1),ve("ngTemplateOutlet",r)("ngTemplateOutletContext",Bi(7,OR,n.getOptionGroupChildren(e)))}}function BSe(i,t){if(1&i&&(qr(0),Ze(1,NSe,4,9,"ng-template",24),Xr()),2&i){const e=_e();Me(1),ve("ngForOf",e.optionsToRender)}}function zSe(i,t){1&i&&Ki(0)}function VSe(i,t){if(1&i&&(qr(0),Ze(1,zSe,1,0,"ng-container",18),Xr()),2&i){const e=_e(),n=co(8);Me(1),ve("ngTemplateOutlet",n)("ngTemplateOutletContext",Bi(2,OR,e.optionsToRender))}}const USe=function(i){return{"p-highlight":i}};function HSe(i,t){if(1&i&&(lt(0,"div",12)(1,"div",28),ii(2,"span",17),ct()()),2&i){const e=_e().$implicit,n=_e(2);ve("ngClass",Bi(3,L6,n.disabled||n.isOptionDisabled(e))),Me(1),ve("ngClass",Bi(5,USe,n.isSelected(e))),Me(1),ve("ngClass",Bi(7,P6,n.isSelected(e)))}}function GSe(i,t){if(1&i&&(lt(0,"span"),qi(1),ct()),2&i){const e=_e().$implicit,n=_e(2);Me(1),as(n.getOptionLabel(e))}}function WSe(i,t){1&i&&Ki(0)}const jSe=function(i,t){return{"p-listbox-item":!0,"p-highlight":i,"p-disabled":t}},$Se=function(i,t){return{$implicit:i,index:t}};function qSe(i,t){if(1&i){const e=Pi();lt(0,"li",27),fn("click",function(r){const o=wt(e).$implicit;return At(_e(2).onOptionClick(r,o))})("dblclick",function(r){const o=wt(e).$implicit;return At(_e(2).onOptionDoubleClick(r,o))})("touchend",function(){const s=wt(e).$implicit;return At(_e(2).onOptionTouchEnd(s))})("keydown",function(r){const o=wt(e).$implicit;return At(_e(2).onOptionKeyDown(r,o))}),Ze(1,HSe,3,9,"div",9),Ze(2,GSe,2,1,"span",3),Ze(3,WSe,1,0,"ng-container",18),ct()}if(2&i){const e=t.$implicit,n=t.index,r=_e(2);ve("ngClass",ys(8,jSe,r.isSelected(e),r.isOptionDisabled(e))),mr("tabindex",r.disabled||r.isOptionDisabled(e)?null:"0")("aria-label",r.getOptionLabel(e))("aria-selected",r.isSelected(e)),Me(1),ve("ngIf",r.checkbox&&r.multiple),Me(1),ve("ngIf",!r.itemTemplate),Me(1),ve("ngTemplateOutlet",r.itemTemplate)("ngTemplateOutletContext",ys(11,$Se,e,n))}}function XSe(i,t){1&i&&Ze(0,qSe,4,14,"li",26),2&i&&ve("ngForOf",t.$implicit)}function YSe(i,t){if(1&i&&(qr(0),qi(1),Xr()),2&i){const e=_e(2);Me(1),yd(" ",e.emptyFilterMessageLabel," ")}}function KSe(i,t){1&i&&Ki(0,null,30)}function ZSe(i,t){if(1&i&&(lt(0,"li",29),Ze(1,YSe,2,1,"ng-container",10),Ze(2,KSe,2,0,"ng-container",8),ct()),2&i){const e=_e();Me(1),ve("ngIf",!e.emptyFilterTemplate&&!e.emptyTemplate)("ngIfElse",e.emptyFilter),Me(1),ve("ngTemplateOutlet",e.emptyFilterTemplate||e.emptyTemplate)}}function QSe(i,t){if(1&i&&(qr(0),qi(1),Xr()),2&i){const e=_e(2);Me(1),yd(" ",e.emptyMessageLabel," ")}}function JSe(i,t){1&i&&Ki(0,null,31)}function eEe(i,t){if(1&i&&(lt(0,"li",29),Ze(1,QSe,2,1,"ng-container",10),Ze(2,JSe,2,0,"ng-container",8),ct()),2&i){const e=_e();Me(1),ve("ngIf",!e.emptyTemplate)("ngIfElse",e.empty),Me(1),ve("ngTemplateOutlet",e.emptyTemplate)}}function tEe(i,t){1&i&&Ki(0)}function nEe(i,t){if(1&i&&(lt(0,"div",32),$u(1,1),Ze(2,tEe,1,0,"ng-container",8),ct()),2&i){const e=_e();Me(2),ve("ngTemplateOutlet",e.footerTemplate)}}const iEe=[[["p-header"]],[["p-footer"]]],rEe=function(i){return{"p-listbox p-component":!0,"p-disabled":i}},sEe=["p-header","p-footer"],oEe={provide:bc,useExisting:ds(()=>aEe),multi:!0};let aEe=(()=>{class i{constructor(e,n,r,s){this.el=e,this.cd=n,this.filterService=r,this.config=s,this.checkbox=!1,this.filter=!1,this.filterMatchMode="contains",this.metaKeySelection=!0,this.showToggleAll=!0,this.optionGroupChildren="items",this.onChange=new qn,this.onClick=new qn,this.onDblClick=new qn,this.onModelChange=()=>{},this.onModelTouched=()=>{}}get options(){return this._options}set options(e){this._options=e,this.hasFilter()&&this.activateFilter()}get filterValue(){return this._filterValue}set filterValue(e){this._filterValue=e,this.activateFilter()}ngOnInit(){this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.cd.markForCheck()}),this.filterBy&&(this.filterOptions={filter:e=>this.onFilter(e),reset:()=>this.resetFilter()})}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"item":default:this.itemTemplate=e.template;break;case"group":this.groupTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"filter":this.filterTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"empty":this.emptyTemplate=e.template;break;case"emptyfilter":this.emptyFilterTemplate=e.template}})}getOptionLabel(e){return this.optionLabel?fr.resolveFieldData(e,this.optionLabel):null!=e.label?e.label:e}getOptionGroupChildren(e){return this.optionGroupChildren?fr.resolveFieldData(e,this.optionGroupChildren):e.items}getOptionGroupLabel(e){return this.optionGroupLabel?fr.resolveFieldData(e,this.optionGroupLabel):null!=e.label?e.label:e}getOptionValue(e){return this.optionValue?fr.resolveFieldData(e,this.optionValue):this.optionLabel||void 0===e.value?e:e.value}isOptionDisabled(e){return this.optionDisabled?fr.resolveFieldData(e,this.optionDisabled):void 0!==e.disabled&&e.disabled}writeValue(e){this.value=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onOptionClick(e,n){this.disabled||this.isOptionDisabled(n)||this.readonly||(this.multiple?this.checkbox?this.onOptionClickCheckbox(e,n):this.onOptionClickMultiple(e,n):this.onOptionClickSingle(e,n),this.onClick.emit({originalEvent:e,option:n,value:this.value}),this.optionTouched=!1)}onOptionTouchEnd(e){this.disabled||this.isOptionDisabled(e)||this.readonly||(this.optionTouched=!0)}onOptionDoubleClick(e,n){this.disabled||this.isOptionDisabled(n)||this.readonly||this.onDblClick.emit({originalEvent:e,option:n,value:this.value})}onOptionClickSingle(e,n){let r=this.isSelected(n),s=!1;if(!this.optionTouched&&this.metaKeySelection){let l=e.metaKey||e.ctrlKey;r?l&&(this.value=null,s=!0):(this.value=this.getOptionValue(n),s=!0)}else this.value=r?null:this.getOptionValue(n),s=!0;s&&(this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}))}onOptionClickMultiple(e,n){let r=this.isSelected(n),s=!1;if(!this.optionTouched&&this.metaKeySelection){let l=e.metaKey||e.ctrlKey;r?(l?this.removeOption(n):this.value=[this.getOptionValue(n)],s=!0):(this.value=l&&this.value||[],this.value=[...this.value,this.getOptionValue(n)],s=!0)}else r?this.removeOption(n):this.value=[...this.value||[],this.getOptionValue(n)],s=!0;s&&(this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}))}onOptionClickCheckbox(e,n){this.disabled||this.readonly||(this.isSelected(n)?this.removeOption(n):(this.value=this.value?this.value:[],this.value=[...this.value,this.getOptionValue(n)]),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}))}removeOption(e){this.value=this.value.filter(n=>!fr.equals(n,this.getOptionValue(e),this.dataKey))}isSelected(e){let n=!1,r=this.getOptionValue(e);if(this.multiple){if(this.value)for(let s of this.value)if(fr.equals(s,r,this.dataKey)){n=!0;break}}else n=fr.equals(this.value,r,this.dataKey);return n}get allChecked(){let e=this.optionsToRender;if(!e||0===e.length)return!1;{let n=0,r=0,s=0,o=this.group?0:this.optionsToRender.length;for(let l of e)if(this.group)for(let u of this.getOptionGroupChildren(l)){let p=this.isOptionDisabled(u),v=this.isSelected(u);if(p)v?n++:r++;else{if(!v)return!1;s++}o++}else{let u=this.isOptionDisabled(l),p=this.isSelected(l);if(u)p?n++:r++;else{if(!p)return!1;s++}}return o===n||o===s||s&&o===s+r+n}}get optionsToRender(){return this._filteredOptions||this.options}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(Wc.EMPTY_MESSAGE)}get emptyFilterMessageLabel(){return this.emptyFilterMessage||this.config.getTranslation(Wc.EMPTY_FILTER_MESSAGE)}hasFilter(){return this._filterValue&&this._filterValue.trim().length>0}isEmpty(){return!this.optionsToRender||this.optionsToRender&&0===this.optionsToRender.length}onFilter(e){this._filterValue=e.target.value,this.activateFilter()}activateFilter(){if(this.hasFilter()&&this._options)if(this.group){let e=(this.filterBy||this.optionLabel||"label").split(","),n=[];for(let r of this.options){let s=this.filterService.filter(this.getOptionGroupChildren(r),e,this.filterValue,this.filterMatchMode,this.filterLocale);s&&s.length&&n.push({...r,[this.optionGroupChildren]:s})}this._filteredOptions=n}else this._filteredOptions=this._options.filter(e=>this.filterService.filters[this.filterMatchMode](this.getOptionLabel(e),this._filterValue,this.filterLocale));else this._filteredOptions=null}resetFilter(){this.filterViewChild&&this.filterViewChild.nativeElement&&(this.filterViewChild.nativeElement.value=""),this._filterValue=null,this._filteredOptions=null}get toggleAllDisabled(){let e=this.optionsToRender;if(!e||0===e.length)return!0;for(let n of e)if(!this.isOptionDisabled(n))return!1;return!0}toggleAll(e){this.disabled||this.toggleAllDisabled||this.readonly||(this.allChecked?this.uncheckAll():this.checkAll(),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}),e.preventDefault())}checkAll(){let n=[];this.optionsToRender.forEach(r=>{if(this.group){let s=this.getOptionGroupChildren(r);s&&s.forEach(o=>{let l=this.isOptionDisabled(o);(!l||l&&this.isSelected(o))&&n.push(this.getOptionValue(o))})}else{let s=this.isOptionDisabled(r);(!s||s&&this.isSelected(r))&&n.push(this.getOptionValue(r))}}),this.value=n}uncheckAll(){let n=[];this.optionsToRender.forEach(r=>{this.group?r.items&&r.items.forEach(s=>{this.isOptionDisabled(s)&&this.isSelected(s)&&n.push(this.getOptionValue(s))}):this.isOptionDisabled(r)&&this.isSelected(r)&&n.push(this.getOptionValue(r))}),this.value=n}onOptionKeyDown(e,n){if(this.readonly)return;let r=e.currentTarget;switch(e.which){case 40:var s=this.findNextItem(r);s&&s.focus(),e.preventDefault();break;case 38:var o=this.findPrevItem(r);o&&o.focus(),e.preventDefault();break;case 13:this.onOptionClick(e,n),e.preventDefault()}}findNextItem(e){let n=e.nextElementSibling;return n?Kt.hasClass(n,"p-disabled")||Kt.isHidden(n)||Kt.hasClass(n,"p-listbox-item-group")?this.findNextItem(n):n:null}findPrevItem(e){let n=e.previousElementSibling;return n?Kt.hasClass(n,"p-disabled")||Kt.isHidden(n)||Kt.hasClass(n,"p-listbox-item-group")?this.findPrevItem(n):n:null}onHeaderCheckboxFocus(){this.headerCheckboxFocus=!0}onHeaderCheckboxBlur(){this.headerCheckboxFocus=!1}ngOnDestroy(){this.translationSubscription&&this.translationSubscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(Zt(Xn),Zt(Zo),Zt(v1),Zt(Tp))},i.\u0275cmp=Ir({type:i,selectors:[["p-listbox"]],contentQueries:function(e,n,r){if(1&e&&(cl(r,jD,5),cl(r,y1,5),cl(r,_l,4)),2&e){let s;vr(s=yr())&&(n.headerFacet=s.first),vr(s=yr())&&(n.footerFacet=s.first),vr(s=yr())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(vs(xSe,5),vs(wSe,5)),2&e){let r;vr(r=yr())&&(n.headerCheckboxViewChild=r.first),vr(r=yr())&&(n.filterViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{multiple:"multiple",style:"style",styleClass:"styleClass",listStyle:"listStyle",listStyleClass:"listStyleClass",readonly:"readonly",disabled:"disabled",checkbox:"checkbox",filter:"filter",filterBy:"filterBy",filterMatchMode:"filterMatchMode",filterLocale:"filterLocale",metaKeySelection:"metaKeySelection",dataKey:"dataKey",showToggleAll:"showToggleAll",optionLabel:"optionLabel",optionValue:"optionValue",optionGroupChildren:"optionGroupChildren",optionGroupLabel:"optionGroupLabel",optionDisabled:"optionDisabled",ariaFilterLabel:"ariaFilterLabel",filterPlaceHolder:"filterPlaceHolder",emptyFilterMessage:"emptyFilterMessage",emptyMessage:"emptyMessage",group:"group",options:"options",filterValue:"filterValue"},outputs:{onChange:"onChange",onClick:"onClick",onDblClick:"onDblClick"},features:[To([oEe])],ngContentSelectors:sEe,decls:12,vars:17,consts:[[3,"ngClass","ngStyle"],["class","p-listbox-header",4,"ngIf"],["role","listbox","aria-multiselectable","multiple",1,"p-listbox-list"],[4,"ngIf"],["itemslist",""],["class","p-listbox-empty-message",4,"ngIf"],["class","p-listbox-footer",4,"ngIf"],[1,"p-listbox-header"],[4,"ngTemplateOutlet"],["class","p-checkbox p-component",3,"ngClass",4,"ngIf"],[4,"ngIf","ngIfElse"],["builtInFilterElement",""],[1,"p-checkbox","p-component",3,"ngClass"],[1,"p-hidden-accessible"],["type","checkbox","readonly","readonly",3,"checked","disabled","focus","blur","keydown.space"],[1,"p-checkbox-box",3,"ngClass","click"],["headerchkbox",""],[1,"p-checkbox-icon",3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","p-listbox-filter-container",4,"ngIf"],[1,"p-listbox-filter-container"],["type","text",1,"p-listbox-filter","p-inputtext","p-component",3,"value","disabled","input"],["filter",""],[1,"p-listbox-filter-icon","pi","pi-search"],["ngFor","",3,"ngForOf"],[1,"p-listbox-item-group"],["pRipple","","role","option",3,"ngClass","click","dblclick","touchend","keydown",4,"ngFor","ngForOf"],["pRipple","","role","option",3,"ngClass","click","dblclick","touchend","keydown"],[1,"p-checkbox-box",3,"ngClass"],[1,"p-listbox-empty-message"],["emptyFilter",""],["empty",""],[1,"p-listbox-footer"]],template:function(e,n){1&e&&(dg(iEe),lt(0,"div",0),Ze(1,ISe,3,1,"div",1),Ze(2,RSe,5,3,"div",1),lt(3,"div",0)(4,"ul",2),Ze(5,BSe,2,1,"ng-container",3),Ze(6,VSe,2,4,"ng-container",3),Ze(7,XSe,1,1,"ng-template",null,4,vc),Ze(9,ZSe,3,3,"li",5),Ze(10,eEe,3,3,"li",5),ct()(),Ze(11,nEe,3,1,"div",6),ct()),2&e&&(Ur(n.styleClass),ve("ngClass",Bi(15,rEe,n.disabled))("ngStyle",n.style),Me(1),ve("ngIf",n.headerFacet||n.headerTemplate),Me(1),ve("ngIf",n.checkbox&&n.multiple&&n.showToggleAll||n.filter),Me(1),Ur(n.listStyleClass),ve("ngClass","p-listbox-list-wrapper")("ngStyle",n.listStyle),Me(2),ve("ngIf",n.group),Me(1),ve("ngIf",!n.group),Me(3),ve("ngIf",n.hasFilter()&&n.isEmpty()),Me(1),ve("ngIf",!n.hasFilter()&&n.isEmpty()),Me(1),ve("ngIf",n.footerFacet||n.footerTemplate))},dependencies:[bo,Su,Wo,rc,Qo,_d],styles:[".p-listbox-list-wrapper{overflow:auto}.p-listbox-list{list-style-type:none;margin:0;padding:0}.p-listbox-item{cursor:pointer;position:relative;overflow:hidden;display:flex;align-items:center;-webkit-user-select:none;user-select:none}.p-listbox-header{display:flex;align-items:center}.p-listbox-filter-container{position:relative;flex:1 1 auto}.p-listbox-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-listbox-filter{width:100%}\n"],encapsulation:2,changeDetection:0}),i})(),lEe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({imports:[Ns,Na,$c,Na]}),i})();lC([Qa({transform:"{{transform}}",opacity:0}),Cc("{{transition}}")]),lC([Cc("{{transition}}",Qa({transform:"{{transform}}",opacity:0}))]);let pEe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({imports:[Ns,$c]}),i})(),_Ee=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({imports:[Ns,Na]}),i})(),CEe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({imports:[Ns,Na]}),i})(),AEe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i}),i.\u0275inj=Tr({imports:[Ns]}),i})();const SEe=cw({grid:!1,info:!1,full:!0,maxHeight:16384,maxWidth:16384},lw(nC("[SysPreference] Retrieve Preferences Success",{_as:"props",_p:void 0}),(i,{Preferences:t})=>t)),EEe=cw([],lw(K1,(i,{styles:t})=>t)),TEe=cw({id:"default",tags:[]},lw(U2,(i,{style:t})=>t));let MEe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Pr({type:i,bootstrap:[bxe]}),i.\u0275inj=Tr({providers:[m1,fm],imports:[QN,_Q.forRoot(),VCe,_Ae,p3,Ns,tQ.forRoot({level:jc.DEBUG}),Dre,QV,NAe,rse,YIe,gae,V1,sv,u4,B2,V2,p3,toe,aoe,t1e,u1e,H1,E1e,vae,Npe,xae,yxe,B1,T1e,j1e,R1e,poe,Lle,CSe,u4,lEe,pEe,_Ee,CEe,Ule,AEe,Xle,ige,$fe,iv,Zfe,RZ.forRoot({graphs:k1e,graph:O1e,styles:EEe,style:TEe,preferences:SEe})]}),i})();(function k7(){if(eN)throw new Error("Cannot enable prod mode after platform setup.");JF=!1})(),Gq().bootstrapModule(MEe).catch(i=>console.error(i))},3333:Be=>{Be.exports=function(V,Y){var D=Y.length;if(0!==D){var H=V.length;V.length+=D;for(var B=0;B<D;B++)V[H+B]=Y[B]}}},5343:(Be,Ce)=>{"use strict";Ce.byteLength=function O(Q){var U=P(Q),xe=U[1];return 3*(U[0]+xe)/4-xe},Ce.toByteArray=function te(Q){var U,$,ae=P(Q),xe=ae[0],Oe=ae[1],re=new D(function q(Q,U,ae){return 3*(U+ae)/4-ae}(0,xe,Oe)),ue=0,z=Oe>0?xe-4:xe;for($=0;$<z;$+=4)U=Y[Q.charCodeAt($)]<<18|Y[Q.charCodeAt($+1)]<<12|Y[Q.charCodeAt($+2)]<<6|Y[Q.charCodeAt($+3)],re[ue++]=U>>16&255,re[ue++]=U>>8&255,re[ue++]=255&U;return 2===Oe&&(U=Y[Q.charCodeAt($)]<<2|Y[Q.charCodeAt($+1)]>>4,re[ue++]=255&U),1===Oe&&(U=Y[Q.charCodeAt($)]<<10|Y[Q.charCodeAt($+1)]<<4|Y[Q.charCodeAt($+2)]>>2,re[ue++]=U>>8&255,re[ue++]=255&U),re},Ce.fromByteArray=function se(Q){for(var U,ae=Q.length,xe=ae%3,Oe=[],ue=0,z=ae-xe;ue<z;ue+=16383)Oe.push(oe(Q,ue,ue+16383>z?z:ue+16383));return 1===xe?Oe.push(V[(U=Q[ae-1])>>2]+V[U<<4&63]+"=="):2===xe&&Oe.push(V[(U=(Q[ae-2]<<8)+Q[ae-1])>>10]+V[U>>4&63]+V[U<<2&63]+"="),Oe.join("")};for(var V=[],Y=[],D=typeof Uint8Array<"u"?Uint8Array:Array,H="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",B=0,W=H.length;B<W;++B)V[B]=H[B],Y[H.charCodeAt(B)]=B;function P(Q){var U=Q.length;if(U%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var ae=Q.indexOf("=");return-1===ae&&(ae=U),[ae,ae===U?0:4-ae%4]}function J(Q){return V[Q>>18&63]+V[Q>>12&63]+V[Q>>6&63]+V[63&Q]}function oe(Q,U,ae){for(var Oe=[],re=U;re<ae;re+=3)Oe.push(J((Q[re]<<16&16711680)+(Q[re+1]<<8&65280)+(255&Q[re+2])));return Oe.join("")}Y["-".charCodeAt(0)]=62,Y["_".charCodeAt(0)]=63},3172:(Be,Ce,V)=>{"use strict";var Y=V(5343),D=V(8461),H="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;Ce.Buffer=O,Ce.SlowBuffer=function re(Je){return+Je!=Je&&(Je=0),O.alloc(+Je)},Ce.INSPECT_MAX_BYTES=50;var B=2147483647;function P(Je){if(Je>B)throw new RangeError('The value "'+Je+'" is invalid for option "size"');var Te=new Uint8Array(Je);return Object.setPrototypeOf(Te,O.prototype),Te}function O(Je,Te,De){if("number"==typeof Je){if("string"==typeof Te)throw new TypeError('The "string" argument must be of type string. Received type number');return oe(Je)}return q(Je,Te,De)}function q(Je,Te,De){if("string"==typeof Je)return function se(Je,Te){if(("string"!=typeof Te||""===Te)&&(Te="utf8"),!O.isEncoding(Te))throw new TypeError("Unknown encoding: "+Te);var De=0|ue(Je,Te),Ot=P(De),vn=Ot.write(Je,Te);return vn!==De&&(Ot=Ot.slice(0,vn)),Ot}(Je,Te);if(ArrayBuffer.isView(Je))return function U(Je){if(It(Je,Uint8Array)){var Te=new Uint8Array(Je);return ae(Te.buffer,Te.byteOffset,Te.byteLength)}return Q(Je)}(Je);if(null==Je)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Je);if(It(Je,ArrayBuffer)||Je&&It(Je.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(It(Je,SharedArrayBuffer)||Je&&It(Je.buffer,SharedArrayBuffer)))return ae(Je,Te,De);if("number"==typeof Je)throw new TypeError('The "value" argument must not be of type number. Received type number');var Ot=Je.valueOf&&Je.valueOf();if(null!=Ot&&Ot!==Je)return O.from(Ot,Te,De);var vn=function xe(Je){if(O.isBuffer(Je)){var Te=0|Oe(Je.length),De=P(Te);return 0===De.length||Je.copy(De,0,0,Te),De}return void 0!==Je.length?"number"!=typeof Je.length||Pt(Je.length)?P(0):Q(Je):"Buffer"===Je.type&&Array.isArray(Je.data)?Q(Je.data):void 0}(Je);if(vn)return vn;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof Je[Symbol.toPrimitive])return O.from(Je[Symbol.toPrimitive]("string"),Te,De);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Je)}function te(Je){if("number"!=typeof Je)throw new TypeError('"size" argument must be of type number');if(Je<0)throw new RangeError('The value "'+Je+'" is invalid for option "size"')}function oe(Je){return te(Je),P(Je<0?0:0|Oe(Je))}function Q(Je){for(var Te=Je.length<0?0:0|Oe(Je.length),De=P(Te),Ot=0;Ot<Te;Ot+=1)De[Ot]=255&Je[Ot];return De}function ae(Je,Te,De){if(Te<0||Je.byteLength<Te)throw new RangeError('"offset" is outside of buffer bounds');if(Je.byteLength<Te+(De||0))throw new RangeError('"length" is outside of buffer bounds');var Ot;return Ot=void 0===Te&&void 0===De?new Uint8Array(Je):void 0===De?new Uint8Array(Je,Te):new Uint8Array(Je,Te,De),Object.setPrototypeOf(Ot,O.prototype),Ot}function Oe(Je){if(Je>=B)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+B.toString(16)+" bytes");return 0|Je}function ue(Je,Te){if(O.isBuffer(Je))return Je.length;if(ArrayBuffer.isView(Je)||It(Je,ArrayBuffer))return Je.byteLength;if("string"!=typeof Je)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Je);var De=Je.length,Ot=arguments.length>2&&!0===arguments[2];if(!Ot&&0===De)return 0;for(var vn=!1;;)switch(Te){case"ascii":case"latin1":case"binary":return De;case"utf8":case"utf-8":return be(Je).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*De;case"hex":return De>>>1;case"base64":return ci(Je).length;default:if(vn)return Ot?-1:be(Je).length;Te=(""+Te).toLowerCase(),vn=!0}}function z(Je,Te,De){var Ot=!1;if((void 0===Te||Te<0)&&(Te=0),Te>this.length||((void 0===De||De>this.length)&&(De=this.length),De<=0)||(De>>>=0)<=(Te>>>=0))return"";for(Je||(Je="utf8");;)switch(Je){case"hex":return Ut(this,Te,De);case"utf8":case"utf-8":return He(this,Te,De);case"ascii":return bt(this,Te,De);case"latin1":case"binary":return kn(this,Te,De);case"base64":return xt(this,Te,De);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Dn(this,Te,De);default:if(Ot)throw new TypeError("Unknown encoding: "+Je);Je=(Je+"").toLowerCase(),Ot=!0}}function $(Je,Te,De){var Ot=Je[Te];Je[Te]=Je[De],Je[De]=Ot}function ne(Je,Te,De,Ot,vn){if(0===Je.length)return-1;if("string"==typeof De?(Ot=De,De=0):De>2147483647?De=2147483647:De<-2147483648&&(De=-2147483648),Pt(De=+De)&&(De=vn?0:Je.length-1),De<0&&(De=Je.length+De),De>=Je.length){if(vn)return-1;De=Je.length-1}else if(De<0){if(!vn)return-1;De=0}if("string"==typeof Te&&(Te=O.from(Te,Ot)),O.isBuffer(Te))return 0===Te.length?-1:ge(Je,Te,De,Ot,vn);if("number"==typeof Te)return Te&=255,"function"==typeof Uint8Array.prototype.indexOf?vn?Uint8Array.prototype.indexOf.call(Je,Te,De):Uint8Array.prototype.lastIndexOf.call(Je,Te,De):ge(Je,[Te],De,Ot,vn);throw new TypeError("val must be string, number or Buffer")}function ge(Je,Te,De,Ot,vn){var Cs,ri=1,Fi=Je.length,Hs=Te.length;if(void 0!==Ot&&("ucs2"===(Ot=String(Ot).toLowerCase())||"ucs-2"===Ot||"utf16le"===Ot||"utf-16le"===Ot)){if(Je.length<2||Te.length<2)return-1;ri=2,Fi/=2,Hs/=2,De/=2}function so(jl,$l){return 1===ri?jl[$l]:jl.readUInt16BE($l*ri)}if(vn){var ua=-1;for(Cs=De;Cs<Fi;Cs++)if(so(Je,Cs)===so(Te,-1===ua?0:Cs-ua)){if(-1===ua&&(ua=Cs),Cs-ua+1===Hs)return ua*ri}else-1!==ua&&(Cs-=Cs-ua),ua=-1}else for(De+Hs>Fi&&(De=Fi-Hs),Cs=De;Cs>=0;Cs--){for(var tr=!0,el=0;el<Hs;el++)if(so(Je,Cs+el)!==so(Te,el)){tr=!1;break}if(tr)return Cs}return-1}function Ue(Je,Te,De,Ot){De=Number(De)||0;var vn=Je.length-De;Ot?(Ot=Number(Ot))>vn&&(Ot=vn):Ot=vn;var ri=Te.length;Ot>ri/2&&(Ot=ri/2);for(var Fi=0;Fi<Ot;++Fi){var Hs=parseInt(Te.substr(2*Fi,2),16);if(Pt(Hs))return Fi;Je[De+Fi]=Hs}return Fi}function Re(Je,Te,De,Ot){return $i(be(Te,Je.length-De),Je,De,Ot)}function rt(Je,Te,De,Ot){return $i(function Dt(Je){for(var Te=[],De=0;De<Je.length;++De)Te.push(255&Je.charCodeAt(De));return Te}(Te),Je,De,Ot)}function Pe(Je,Te,De,Ot){return $i(ci(Te),Je,De,Ot)}function at(Je,Te,De,Ot){return $i(function Rt(Je,Te){for(var De,Ot,ri=[],Fi=0;Fi<Je.length&&!((Te-=2)<0);++Fi)Ot=(De=Je.charCodeAt(Fi))>>8,ri.push(De%256),ri.push(Ot);return ri}(Te,Je.length-De),Je,De,Ot)}function xt(Je,Te,De){return Y.fromByteArray(0===Te&&De===Je.length?Je:Je.slice(Te,De))}function He(Je,Te,De){De=Math.min(Je.length,De);for(var Ot=[],vn=Te;vn<De;){var so,Cs,ua,tr,ri=Je[vn],Fi=null,Hs=ri>239?4:ri>223?3:ri>191?2:1;if(vn+Hs<=De)switch(Hs){case 1:ri<128&&(Fi=ri);break;case 2:128==(192&(so=Je[vn+1]))&&(tr=(31&ri)<<6|63&so)>127&&(Fi=tr);break;case 3:Cs=Je[vn+2],128==(192&(so=Je[vn+1]))&&128==(192&Cs)&&(tr=(15&ri)<<12|(63&so)<<6|63&Cs)>2047&&(tr<55296||tr>57343)&&(Fi=tr);break;case 4:Cs=Je[vn+2],ua=Je[vn+3],128==(192&(so=Je[vn+1]))&&128==(192&Cs)&&128==(192&ua)&&(tr=(15&ri)<<18|(63&so)<<12|(63&Cs)<<6|63&ua)>65535&&tr<1114112&&(Fi=tr)}null===Fi?(Fi=65533,Hs=1):Fi>65535&&(Ot.push((Fi-=65536)>>>10&1023|55296),Fi=56320|1023&Fi),Ot.push(Fi),vn+=Hs}return function gt(Je){var Te=Je.length;if(Te<=4096)return String.fromCharCode.apply(String,Je);for(var De="",Ot=0;Ot<Te;)De+=String.fromCharCode.apply(String,Je.slice(Ot,Ot+=4096));return De}(Ot)}function bt(Je,Te,De){var Ot="";De=Math.min(Je.length,De);for(var vn=Te;vn<De;++vn)Ot+=String.fromCharCode(127&Je[vn]);return Ot}function kn(Je,Te,De){var Ot="";De=Math.min(Je.length,De);for(var vn=Te;vn<De;++vn)Ot+=String.fromCharCode(Je[vn]);return Ot}function Ut(Je,Te,De){var Ot=Je.length;(!Te||Te<0)&&(Te=0),(!De||De<0||De>Ot)&&(De=Ot);for(var vn="",ri=Te;ri<De;++ri)vn+=un[Je[ri]];return vn}function Dn(Je,Te,De){for(var Ot=Je.slice(Te,De),vn="",ri=0;ri<Ot.length-1;ri+=2)vn+=String.fromCharCode(Ot[ri]+256*Ot[ri+1]);return vn}function Jt(Je,Te,De){if(Je%1!=0||Je<0)throw new RangeError("offset is not uint");if(Je+Te>De)throw new RangeError("Trying to access beyond buffer length")}function nn(Je,Te,De,Ot,vn,ri){if(!O.isBuffer(Je))throw new TypeError('"buffer" argument must be a Buffer instance');if(Te>vn||Te<ri)throw new RangeError('"value" argument is out of bounds');if(De+Ot>Je.length)throw new RangeError("Index out of range")}function Ln(Je,Te,De,Ot,vn,ri){if(De+Ot>Je.length)throw new RangeError("Index out of range");if(De<0)throw new RangeError("Index out of range")}function xn(Je,Te,De,Ot,vn){return Te=+Te,De>>>=0,vn||Ln(Je,0,De,4),D.write(Je,Te,De,Ot,23,4),De+4}function Cn(Je,Te,De,Ot,vn){return Te=+Te,De>>>=0,vn||Ln(Je,0,De,8),D.write(Je,Te,De,Ot,52,8),De+8}Ce.kMaxLength=B,!(O.TYPED_ARRAY_SUPPORT=function W(){try{var Je=new Uint8Array(1),Te={foo:function(){return 42}};return Object.setPrototypeOf(Te,Uint8Array.prototype),Object.setPrototypeOf(Je,Te),42===Je.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(O.prototype,"parent",{enumerable:!0,get:function(){if(O.isBuffer(this))return this.buffer}}),Object.defineProperty(O.prototype,"offset",{enumerable:!0,get:function(){if(O.isBuffer(this))return this.byteOffset}}),O.poolSize=8192,O.from=function(Je,Te,De){return q(Je,Te,De)},Object.setPrototypeOf(O.prototype,Uint8Array.prototype),Object.setPrototypeOf(O,Uint8Array),O.alloc=function(Je,Te,De){return function J(Je,Te,De){return te(Je),Je<=0?P(Je):void 0!==Te?"string"==typeof De?P(Je).fill(Te,De):P(Je).fill(Te):P(Je)}(Je,Te,De)},O.allocUnsafe=function(Je){return oe(Je)},O.allocUnsafeSlow=function(Je){return oe(Je)},O.isBuffer=function(Te){return null!=Te&&!0===Te._isBuffer&&Te!==O.prototype},O.compare=function(Te,De){if(It(Te,Uint8Array)&&(Te=O.from(Te,Te.offset,Te.byteLength)),It(De,Uint8Array)&&(De=O.from(De,De.offset,De.byteLength)),!O.isBuffer(Te)||!O.isBuffer(De))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Te===De)return 0;for(var Ot=Te.length,vn=De.length,ri=0,Fi=Math.min(Ot,vn);ri<Fi;++ri)if(Te[ri]!==De[ri]){Ot=Te[ri],vn=De[ri];break}return Ot<vn?-1:vn<Ot?1:0},O.isEncoding=function(Te){switch(String(Te).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},O.concat=function(Te,De){if(!Array.isArray(Te))throw new TypeError('"list" argument must be an Array of Buffers');if(0===Te.length)return O.alloc(0);var Ot;if(void 0===De)for(De=0,Ot=0;Ot<Te.length;++Ot)De+=Te[Ot].length;var vn=O.allocUnsafe(De),ri=0;for(Ot=0;Ot<Te.length;++Ot){var Fi=Te[Ot];if(It(Fi,Uint8Array))ri+Fi.length>vn.length?O.from(Fi).copy(vn,ri):Uint8Array.prototype.set.call(vn,Fi,ri);else{if(!O.isBuffer(Fi))throw new TypeError('"list" argument must be an Array of Buffers');Fi.copy(vn,ri)}ri+=Fi.length}return vn},O.byteLength=ue,O.prototype._isBuffer=!0,O.prototype.swap16=function(){var Te=this.length;if(Te%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var De=0;De<Te;De+=2)$(this,De,De+1);return this},O.prototype.swap32=function(){var Te=this.length;if(Te%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var De=0;De<Te;De+=4)$(this,De,De+3),$(this,De+1,De+2);return this},O.prototype.swap64=function(){var Te=this.length;if(Te%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var De=0;De<Te;De+=8)$(this,De,De+7),$(this,De+1,De+6),$(this,De+2,De+5),$(this,De+3,De+4);return this},O.prototype.toLocaleString=O.prototype.toString=function(){var Te=this.length;return 0===Te?"":0===arguments.length?He(this,0,Te):z.apply(this,arguments)},O.prototype.equals=function(Te){if(!O.isBuffer(Te))throw new TypeError("Argument must be a Buffer");return this===Te||0===O.compare(this,Te)},O.prototype.inspect=function(){var Te="",De=Ce.INSPECT_MAX_BYTES;return Te=this.toString("hex",0,De).replace(/(.{2})/g,"$1 ").trim(),this.length>De&&(Te+=" ... "),"<Buffer "+Te+">"},H&&(O.prototype[H]=O.prototype.inspect),O.prototype.compare=function(Te,De,Ot,vn,ri){if(It(Te,Uint8Array)&&(Te=O.from(Te,Te.offset,Te.byteLength)),!O.isBuffer(Te))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof Te);if(void 0===De&&(De=0),void 0===Ot&&(Ot=Te?Te.length:0),void 0===vn&&(vn=0),void 0===ri&&(ri=this.length),De<0||Ot>Te.length||vn<0||ri>this.length)throw new RangeError("out of range index");if(vn>=ri&&De>=Ot)return 0;if(vn>=ri)return-1;if(De>=Ot)return 1;if(this===Te)return 0;for(var Fi=(ri>>>=0)-(vn>>>=0),Hs=(Ot>>>=0)-(De>>>=0),so=Math.min(Fi,Hs),Cs=this.slice(vn,ri),ua=Te.slice(De,Ot),tr=0;tr<so;++tr)if(Cs[tr]!==ua[tr]){Fi=Cs[tr],Hs=ua[tr];break}return Fi<Hs?-1:Hs<Fi?1:0},O.prototype.includes=function(Te,De,Ot){return-1!==this.indexOf(Te,De,Ot)},O.prototype.indexOf=function(Te,De,Ot){return ne(this,Te,De,Ot,!0)},O.prototype.lastIndexOf=function(Te,De,Ot){return ne(this,Te,De,Ot,!1)},O.prototype.write=function(Te,De,Ot,vn){if(void 0===De)vn="utf8",Ot=this.length,De=0;else if(void 0===Ot&&"string"==typeof De)vn=De,Ot=this.length,De=0;else{if(!isFinite(De))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");De>>>=0,isFinite(Ot)?(Ot>>>=0,void 0===vn&&(vn="utf8")):(vn=Ot,Ot=void 0)}var ri=this.length-De;if((void 0===Ot||Ot>ri)&&(Ot=ri),Te.length>0&&(Ot<0||De<0)||De>this.length)throw new RangeError("Attempt to write outside buffer bounds");vn||(vn="utf8");for(var Fi=!1;;)switch(vn){case"hex":return Ue(this,Te,De,Ot);case"utf8":case"utf-8":return Re(this,Te,De,Ot);case"ascii":case"latin1":case"binary":return rt(this,Te,De,Ot);case"base64":return Pe(this,Te,De,Ot);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return at(this,Te,De,Ot);default:if(Fi)throw new TypeError("Unknown encoding: "+vn);vn=(""+vn).toLowerCase(),Fi=!0}},O.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},O.prototype.slice=function(Te,De){var Ot=this.length;(Te=~~Te)<0?(Te+=Ot)<0&&(Te=0):Te>Ot&&(Te=Ot),(De=void 0===De?Ot:~~De)<0?(De+=Ot)<0&&(De=0):De>Ot&&(De=Ot),De<Te&&(De=Te);var vn=this.subarray(Te,De);return Object.setPrototypeOf(vn,O.prototype),vn},O.prototype.readUintLE=O.prototype.readUIntLE=function(Te,De,Ot){Te>>>=0,De>>>=0,Ot||Jt(Te,De,this.length);for(var vn=this[Te],ri=1,Fi=0;++Fi<De&&(ri*=256);)vn+=this[Te+Fi]*ri;return vn},O.prototype.readUintBE=O.prototype.readUIntBE=function(Te,De,Ot){Te>>>=0,De>>>=0,Ot||Jt(Te,De,this.length);for(var vn=this[Te+--De],ri=1;De>0&&(ri*=256);)vn+=this[Te+--De]*ri;return vn},O.prototype.readUint8=O.prototype.readUInt8=function(Te,De){return Te>>>=0,De||Jt(Te,1,this.length),this[Te]},O.prototype.readUint16LE=O.prototype.readUInt16LE=function(Te,De){return Te>>>=0,De||Jt(Te,2,this.length),this[Te]|this[Te+1]<<8},O.prototype.readUint16BE=O.prototype.readUInt16BE=function(Te,De){return Te>>>=0,De||Jt(Te,2,this.length),this[Te]<<8|this[Te+1]},O.prototype.readUint32LE=O.prototype.readUInt32LE=function(Te,De){return Te>>>=0,De||Jt(Te,4,this.length),(this[Te]|this[Te+1]<<8|this[Te+2]<<16)+16777216*this[Te+3]},O.prototype.readUint32BE=O.prototype.readUInt32BE=function(Te,De){return Te>>>=0,De||Jt(Te,4,this.length),16777216*this[Te]+(this[Te+1]<<16|this[Te+2]<<8|this[Te+3])},O.prototype.readIntLE=function(Te,De,Ot){Te>>>=0,De>>>=0,Ot||Jt(Te,De,this.length);for(var vn=this[Te],ri=1,Fi=0;++Fi<De&&(ri*=256);)vn+=this[Te+Fi]*ri;return vn>=(ri*=128)&&(vn-=Math.pow(2,8*De)),vn},O.prototype.readIntBE=function(Te,De,Ot){Te>>>=0,De>>>=0,Ot||Jt(Te,De,this.length);for(var vn=De,ri=1,Fi=this[Te+--vn];vn>0&&(ri*=256);)Fi+=this[Te+--vn]*ri;return Fi>=(ri*=128)&&(Fi-=Math.pow(2,8*De)),Fi},O.prototype.readInt8=function(Te,De){return Te>>>=0,De||Jt(Te,1,this.length),128&this[Te]?-1*(255-this[Te]+1):this[Te]},O.prototype.readInt16LE=function(Te,De){Te>>>=0,De||Jt(Te,2,this.length);var Ot=this[Te]|this[Te+1]<<8;return 32768&Ot?4294901760|Ot:Ot},O.prototype.readInt16BE=function(Te,De){Te>>>=0,De||Jt(Te,2,this.length);var Ot=this[Te+1]|this[Te]<<8;return 32768&Ot?4294901760|Ot:Ot},O.prototype.readInt32LE=function(Te,De){return Te>>>=0,De||Jt(Te,4,this.length),this[Te]|this[Te+1]<<8|this[Te+2]<<16|this[Te+3]<<24},O.prototype.readInt32BE=function(Te,De){return Te>>>=0,De||Jt(Te,4,this.length),this[Te]<<24|this[Te+1]<<16|this[Te+2]<<8|this[Te+3]},O.prototype.readFloatLE=function(Te,De){return Te>>>=0,De||Jt(Te,4,this.length),D.read(this,Te,!0,23,4)},O.prototype.readFloatBE=function(Te,De){return Te>>>=0,De||Jt(Te,4,this.length),D.read(this,Te,!1,23,4)},O.prototype.readDoubleLE=function(Te,De){return Te>>>=0,De||Jt(Te,8,this.length),D.read(this,Te,!0,52,8)},O.prototype.readDoubleBE=function(Te,De){return Te>>>=0,De||Jt(Te,8,this.length),D.read(this,Te,!1,52,8)},O.prototype.writeUintLE=O.prototype.writeUIntLE=function(Te,De,Ot,vn){Te=+Te,De>>>=0,Ot>>>=0,vn||nn(this,Te,De,Ot,Math.pow(2,8*Ot)-1,0);var Fi=1,Hs=0;for(this[De]=255&Te;++Hs<Ot&&(Fi*=256);)this[De+Hs]=Te/Fi&255;return De+Ot},O.prototype.writeUintBE=O.prototype.writeUIntBE=function(Te,De,Ot,vn){Te=+Te,De>>>=0,Ot>>>=0,vn||nn(this,Te,De,Ot,Math.pow(2,8*Ot)-1,0);var Fi=Ot-1,Hs=1;for(this[De+Fi]=255&Te;--Fi>=0&&(Hs*=256);)this[De+Fi]=Te/Hs&255;return De+Ot},O.prototype.writeUint8=O.prototype.writeUInt8=function(Te,De,Ot){return Te=+Te,De>>>=0,Ot||nn(this,Te,De,1,255,0),this[De]=255&Te,De+1},O.prototype.writeUint16LE=O.prototype.writeUInt16LE=function(Te,De,Ot){return Te=+Te,De>>>=0,Ot||nn(this,Te,De,2,65535,0),this[De]=255&Te,this[De+1]=Te>>>8,De+2},O.prototype.writeUint16BE=O.prototype.writeUInt16BE=function(Te,De,Ot){return Te=+Te,De>>>=0,Ot||nn(this,Te,De,2,65535,0),this[De]=Te>>>8,this[De+1]=255&Te,De+2},O.prototype.writeUint32LE=O.prototype.writeUInt32LE=function(Te,De,Ot){return Te=+Te,De>>>=0,Ot||nn(this,Te,De,4,4294967295,0),this[De+3]=Te>>>24,this[De+2]=Te>>>16,this[De+1]=Te>>>8,this[De]=255&Te,De+4},O.prototype.writeUint32BE=O.prototype.writeUInt32BE=function(Te,De,Ot){return Te=+Te,De>>>=0,Ot||nn(this,Te,De,4,4294967295,0),this[De]=Te>>>24,this[De+1]=Te>>>16,this[De+2]=Te>>>8,this[De+3]=255&Te,De+4},O.prototype.writeIntLE=function(Te,De,Ot,vn){if(Te=+Te,De>>>=0,!vn){var ri=Math.pow(2,8*Ot-1);nn(this,Te,De,Ot,ri-1,-ri)}var Fi=0,Hs=1,so=0;for(this[De]=255&Te;++Fi<Ot&&(Hs*=256);)Te<0&&0===so&&0!==this[De+Fi-1]&&(so=1),this[De+Fi]=(Te/Hs>>0)-so&255;return De+Ot},O.prototype.writeIntBE=function(Te,De,Ot,vn){if(Te=+Te,De>>>=0,!vn){var ri=Math.pow(2,8*Ot-1);nn(this,Te,De,Ot,ri-1,-ri)}var Fi=Ot-1,Hs=1,so=0;for(this[De+Fi]=255&Te;--Fi>=0&&(Hs*=256);)Te<0&&0===so&&0!==this[De+Fi+1]&&(so=1),this[De+Fi]=(Te/Hs>>0)-so&255;return De+Ot},O.prototype.writeInt8=function(Te,De,Ot){return Te=+Te,De>>>=0,Ot||nn(this,Te,De,1,127,-128),Te<0&&(Te=255+Te+1),this[De]=255&Te,De+1},O.prototype.writeInt16LE=function(Te,De,Ot){return Te=+Te,De>>>=0,Ot||nn(this,Te,De,2,32767,-32768),this[De]=255&Te,this[De+1]=Te>>>8,De+2},O.prototype.writeInt16BE=function(Te,De,Ot){return Te=+Te,De>>>=0,Ot||nn(this,Te,De,2,32767,-32768),this[De]=Te>>>8,this[De+1]=255&Te,De+2},O.prototype.writeInt32LE=function(Te,De,Ot){return Te=+Te,De>>>=0,Ot||nn(this,Te,De,4,2147483647,-2147483648),this[De]=255&Te,this[De+1]=Te>>>8,this[De+2]=Te>>>16,this[De+3]=Te>>>24,De+4},O.prototype.writeInt32BE=function(Te,De,Ot){return Te=+Te,De>>>=0,Ot||nn(this,Te,De,4,2147483647,-2147483648),Te<0&&(Te=4294967295+Te+1),this[De]=Te>>>24,this[De+1]=Te>>>16,this[De+2]=Te>>>8,this[De+3]=255&Te,De+4},O.prototype.writeFloatLE=function(Te,De,Ot){return xn(this,Te,De,!0,Ot)},O.prototype.writeFloatBE=function(Te,De,Ot){return xn(this,Te,De,!1,Ot)},O.prototype.writeDoubleLE=function(Te,De,Ot){return Cn(this,Te,De,!0,Ot)},O.prototype.writeDoubleBE=function(Te,De,Ot){return Cn(this,Te,De,!1,Ot)},O.prototype.copy=function(Te,De,Ot,vn){if(!O.isBuffer(Te))throw new TypeError("argument should be a Buffer");if(Ot||(Ot=0),!vn&&0!==vn&&(vn=this.length),De>=Te.length&&(De=Te.length),De||(De=0),vn>0&&vn<Ot&&(vn=Ot),vn===Ot||0===Te.length||0===this.length)return 0;if(De<0)throw new RangeError("targetStart out of bounds");if(Ot<0||Ot>=this.length)throw new RangeError("Index out of range");if(vn<0)throw new RangeError("sourceEnd out of bounds");vn>this.length&&(vn=this.length),Te.length-De<vn-Ot&&(vn=Te.length-De+Ot);var ri=vn-Ot;return this===Te&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(De,Ot,vn):Uint8Array.prototype.set.call(Te,this.subarray(Ot,vn),De),ri},O.prototype.fill=function(Te,De,Ot,vn){if("string"==typeof Te){if("string"==typeof De?(vn=De,De=0,Ot=this.length):"string"==typeof Ot&&(vn=Ot,Ot=this.length),void 0!==vn&&"string"!=typeof vn)throw new TypeError("encoding must be a string");if("string"==typeof vn&&!O.isEncoding(vn))throw new TypeError("Unknown encoding: "+vn);if(1===Te.length){var ri=Te.charCodeAt(0);("utf8"===vn&&ri<128||"latin1"===vn)&&(Te=ri)}}else"number"==typeof Te?Te&=255:"boolean"==typeof Te&&(Te=Number(Te));if(De<0||this.length<De||this.length<Ot)throw new RangeError("Out of range index");if(Ot<=De)return this;var Fi;if(De>>>=0,Ot=void 0===Ot?this.length:Ot>>>0,Te||(Te=0),"number"==typeof Te)for(Fi=De;Fi<Ot;++Fi)this[Fi]=Te;else{var Hs=O.isBuffer(Te)?Te:O.from(Te,vn),so=Hs.length;if(0===so)throw new TypeError('The value "'+Te+'" is invalid for argument "value"');for(Fi=0;Fi<Ot-De;++Fi)this[Fi+De]=Hs[Fi%so]}return this};var yn=/[^+/0-9A-Za-z-_]/g;function be(Je,Te){Te=Te||1/0;for(var De,Ot=Je.length,vn=null,ri=[],Fi=0;Fi<Ot;++Fi){if((De=Je.charCodeAt(Fi))>55295&&De<57344){if(!vn){if(De>56319){(Te-=3)>-1&&ri.push(239,191,189);continue}if(Fi+1===Ot){(Te-=3)>-1&&ri.push(239,191,189);continue}vn=De;continue}if(De<56320){(Te-=3)>-1&&ri.push(239,191,189),vn=De;continue}De=65536+(vn-55296<<10|De-56320)}else vn&&(Te-=3)>-1&&ri.push(239,191,189);if(vn=null,De<128){if((Te-=1)<0)break;ri.push(De)}else if(De<2048){if((Te-=2)<0)break;ri.push(De>>6|192,63&De|128)}else if(De<65536){if((Te-=3)<0)break;ri.push(De>>12|224,De>>6&63|128,63&De|128)}else{if(!(De<1114112))throw new Error("Invalid code point");if((Te-=4)<0)break;ri.push(De>>18|240,De>>12&63|128,De>>6&63|128,63&De|128)}}return ri}function ci(Je){return Y.toByteArray(function je(Je){if((Je=(Je=Je.split("=")[0]).trim().replace(yn,"")).length<2)return"";for(;Je.length%4!=0;)Je+="=";return Je}(Je))}function $i(Je,Te,De,Ot){for(var vn=0;vn<Ot&&!(vn+De>=Te.length||vn>=Je.length);++vn)Te[vn+De]=Je[vn];return vn}function It(Je,Te){return Je instanceof Te||null!=Je&&null!=Je.constructor&&null!=Je.constructor.name&&Je.constructor.name===Te.name}function Pt(Je){return Je!=Je}var un=function(){for(var Je="0123456789abcdef",Te=new Array(256),De=0;De<16;++De)for(var Ot=16*De,vn=0;vn<16;++vn)Te[Ot+vn]=Je[De]+Je[vn];return Te}()},4147:function(Be){Be.exports=function(Ce){var V={};function Y(D){if(V[D])return V[D].exports;var H=V[D]={i:D,l:!1,exports:{}};return Ce[D].call(H.exports,H,H.exports,Y),H.l=!0,H.exports}return Y.m=Ce,Y.c=V,Y.i=function(D){return D},Y.d=function(D,H,B){Y.o(D,H)||Object.defineProperty(D,H,{configurable:!1,enumerable:!0,get:B})},Y.n=function(D){var H=D&&D.__esModule?function(){return D.default}:function(){return D};return Y.d(H,"a",H),H},Y.o=function(D,H){return Object.prototype.hasOwnProperty.call(D,H)},Y.p="",Y(Y.s=3)}([function(Ce,V,Y){"use strict";var D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Dn){return typeof Dn}:function(Dn){return Dn&&"function"==typeof Symbol&&Dn.constructor===Symbol&&Dn!==Symbol.prototype?"symbol":typeof Dn},H=Y(2),B=D(""),W=D({}),P=D(function(){}),O=function(Jt){return(typeof Jt>"u"?"undefined":D(Jt))===W},te=function(Jt){return(typeof Jt>"u"?"undefined":D(Jt))===P},J=function(Jt){return O(Jt)&&te(Jt.collection)},oe=Y(1),se=function(Jt){return null!=Jt&&!Jt.removed()},Q=function(Jt,nn){return(Q=null!=Jt.has?function(xn,Cn){return xn.has(Cn)}:function(xn,Cn){return xn.intersection(Cn).length>0})(Jt,nn)},U=function(Jt){if(function(Jt){return(typeof Jt>"u"?"undefined":D(Jt))===B}(Jt))return function(nn){return nn.is(Jt)};if(te(Jt))return Jt;if(J(Jt))return function(nn){return Q(Jt,nn)};throw new Error("Can not create match function for spec",Jt)},xe=function(Jt,nn,Ln,xn,Cn){var yn=function(Jt,nn,Ln,xn){var Cn={cy:Jt,events:nn,selector:Ln||"node",fn:xn};return Jt.on(Cn.events,Cn.selector,Cn.fn),Cn}(nn,Ln,xn,Cn);(Jt.bindings=Jt.bindings||[]).push(yn)},Oe=function(Jt){Jt.bindings.forEach(function(xn){xn.cy.off(xn.events,xn.selector,xn.fn)}),Jt.bindings=[]},ue=function(Jt){return function(nn){var Ln=nn.position(),xn=Jt.delta;if(null!=Jt.delta&&!nn.same(Jt.grabbedNode)&&!nn.grabbed())return{x:Ln.x+xn.x,y:Ln.y+xn.y}}},z=function(Jt){return function(nn){for(var Ln=nn.neighborhood(),xn={x:0,y:0},Cn=0,yn=0;yn<Ln.length;yn++){var je=Ln[yn];if(je.isNode()&&!Jt(je)){var be=je.position();xn.x+=be.x,xn.y+=be.y,Cn++}}if(!(Cn<2))return xn.x/=Cn,xn.y/=Cn,xn}},$=function(Jt,nn,Ln){return Jt<nn?nn:Jt>Ln?Ln:Jt},ne=function(Jt,nn){var Ln=Jt.position();return{x:$(Ln.x,nn.x1,nn.x2),y:$(Ln.y,nn.y1,nn.y2)}},ge=function(Jt){return function(nn){return ne(nn,Jt)}},Re=function(Jt){return function(nn){return function(Jt,nn){var Ln=Jt.position(),xn=Ln.x,Cn=Ln.y,yn=nn.x1,je=nn.y1,be=nn.x2,Dt=nn.y2,$i=Math.abs;if(yn<=xn&&xn<=be&&je<=Cn&&Cn<=Dt){var It=$i(yn-xn),Pt=$i(be-xn),un=$i(je-Cn),Je=$i(Dt-Cn),Te=Math.min(It,Pt,un,Je);return Te===It?{x:yn,y:Cn}:Te===Pt?{x:be,y:Cn}:Te===un?{x:xn,y:je}:{x:xn,y:Dt}}return{x:xn,y:Cn}}(nn,Jt)}},rt=function(Jt){return function(nn){var Ln=Jt.extent(),xn=nn.outerWidth(),Cn=nn.outerHeight();return ne(nn,{x1:Ln.x1+xn/2,x2:Ln.x2-xn/2,y1:Ln.y1+Cn/2,y2:Ln.y2-Cn/2})}},He=function(Jt,nn){return"mean"===nn.reposition?function(Jt){return function(nn,Ln){var xn=function(yn){return Jt.matches(yn)&&yn.neighborhood().length>2&&!yn.grabbed()};xe(Jt,Ln,"position","node",function(){(this.neighborhood().some(xn)||Jt.meanOnSelfPosition(this)&&xn(this))&&nn(Ln,[Jt])}),xe(Jt,Ln,"add remove","edge",function(){[Ln.getElementById(this.data("source")),Ln.getElementById(this.data("target"))].some(xn)&&nn(Ln,[Jt])})}}(nn):"drag"===nn.reposition?function(Jt){return function(nn,Ln){xe(Jt,Ln,"grab","node",function(){if(Jt.dragWithMatches(this)){var Cn=this.position();Jt.grabbedNode=this,Jt.p1={x:Cn.x,y:Cn.y},Jt.delta={x:0,y:0}}}),xe(Jt,Ln,"drag","node",function(){if(this.same(Jt.grabbedNode)){var Cn=Jt.delta,yn=Jt.p1,je=this.position(),be={x:je.x,y:je.y};Cn.x=be.x-yn.x,Cn.y=be.y-yn.y,Jt.p1=be,nn(Ln,[Jt])}}),xe(Jt,Ln,"free","node",function(){Jt.grabbedNode=null,Jt.delta=null,Jt.p1=null})}}(nn):O(nn.reposition)||"matching"===nn.when||"viewport"===nn.reposition?function(Jt){return function(nn,Ln){xe(Jt,Ln,"position","node",function(){Jt.matches(this)&&nn(Ln,[Jt])})}}(nn):nn.when},ft=function(Jt,nn,Ln){var xn=oe({},H,Ln);if(xn.getNewPos=function(Jt,nn){var Ln=Jt.reposition;return"mean"===Ln?z(U(Jt.meanIgnores)):"viewport"===Ln?rt(nn):"drag"===Ln?ue(Jt):O(Ln)?null==Ln.type||"inside"==Ln.type?ge(Ln):"outside"==Ln.type?Re(Ln):void 0:Ln}(xn,Jt),xn.listener=He(0,xn),J(xn.nodesMatching))xn.nodes=xn.nodesMatching.slice(),xn.matches=function(je){return se(je)&&Q(xn.nodes,je)};else{var yn=U(xn.nodesMatching);xn.matches=function(je){return se(je)&&yn(je)}}return null!=xn.dragWith&&(xn.dragWithMatches=U(xn.dragWith)),xn.listener(function(){kn(Jt,[xn])},Jt),xn.enabled=!0,nn.rules.push(xn),xn},bt=function(Jt,nn){Jt.removeListener("add","node",nn.onAddNode),Jt.removeListener("remove","node",nn.onRmNode)},kn=function(Jt,nn){var Ln=Jt.scratch().automove;nn=nn??Ln.rules,Jt.batch(function(){for(var xn=0;xn<nn.length;xn++){var Cn=nn[xn];if(Cn.destroyed||!Cn.enabled)break;for(var yn=Cn.nodes||Ln.nodes,je=yn.length-1;je>=0;je--){var be=yn[je];if(be.removed())yn.unmerge(be);else if(Cn.matches(be)){var Dt=be.position(),Rt=Cn.getNewPos(be);null!=Rt&&(Dt.x!==Rt.x||Dt.y!==Rt.y)&&(be.position(Rt),be.trigger("automove",[Cn]))}}}})};Ce.exports=function(Jt){var nn=this,Ln=nn.scratch().automove=nn.scratch().automove||{rules:[]};if(0===Ln.rules.length&&(Ln.nodes=nn.nodes().slice(),function(Jt,nn){nn.onAddNode=function(Ln){nn.nodes.merge(Ln.target)},nn.onRmNode=function(Ln){nn.nodes.unmerge(Ln.target)},Jt.on("add","node",nn.onAddNode),Jt.on("remove","node",nn.onRmNode)}(nn,Ln)),"destroy"===Jt)return Ln.rules.forEach(function(Cn){Oe(Cn),Cn.destroyed=!0}),Ln.rules.splice(0,Ln.rules.length),void bt(nn,Ln);var xn=ft(nn,Ln,Jt);return kn(nn,[xn]),{apply:function(){kn(nn,[xn])},disable:function(){this.toggle(!1)},enable:function(){this.toggle(!0)},enabled:function(){return xn.enabled},toggle:function(yn){xn.enabled=void 0!==yn?yn:!xn.enabled,xn.enabled&&kn(nn,[xn])},destroy:function(){var yn=Ln.rules;return Oe(xn),xn.destroyed=!0,yn.splice(yn.indexOf(xn),1),0===yn.length&&bt(nn,Ln),this}}}},function(Ce,V,Y){"use strict";Ce.exports=null!=Object.assign?Object.assign.bind(Object):function(D){for(var H=arguments.length,B=Array(H>1?H-1:0),W=1;W<H;W++)B[W-1]=arguments[W];return B.forEach(function(P){Object.keys(P).forEach(function(O){return D[O]=P[O]})}),D}},function(Ce,V,Y){"use strict";Ce.exports={nodesMatching:function(B){return!1},reposition:"mean",when:void 0,meanIgnores:function(B){return!1},meanOnSelfPosition:function(B){return!0},dragWith:function(B){return!1}}},function(Ce,V,Y){"use strict";var D=Y(0),H=function(W){!W||W("core","automove",D)};typeof cytoscape<"u"&&H(cytoscape),Ce.exports=H}])},2960:function(Be,Ce,V){var Y,D;Be.exports=(Y=V(8132),D=V(8078),function(H){var B={};function W(P){if(B[P])return B[P].exports;var O=B[P]={i:P,l:!1,exports:{}};return H[P].call(O.exports,O,O.exports,W),O.l=!0,O.exports}return W.m=H,W.c=B,W.i=function(P){return P},W.d=function(P,O,q){W.o(P,O)||Object.defineProperty(P,O,{configurable:!1,enumerable:!0,get:q})},W.n=function(P){var O=P&&P.__esModule?function(){return P.default}:function(){return P};return W.d(O,"a",O),O},W.o=function(P,O){return Object.prototype.hasOwnProperty.call(P,O)},W.p="",W(W.s=12)}([function(H,B,W){"use strict";H.exports=null!=Object.assign?Object.assign.bind(Object):function(P){for(var O=arguments.length,q=Array(O>1?O-1:0),te=1;te<O;te++)q[te-1]=arguments[te];return q.filter(function(J){return null!=J}).forEach(function(J){Object.keys(J).forEach(function(oe){return P[oe]=J[oe]})}),P}},function(H,B,W){"use strict";var P=W(10),O=W(0);H.exports=function(q){return new P(O({cy:this},q))}},function(H,B,W){"use strict";H.exports={disableGestures:function P(){if(this.saveGestureState(),this.cy.zoomingEnabled(!1).panningEnabled(!1).boxSelectionEnabled(!1),this.options.disableBrowserGestures){var te=this.windowListenerOptions;window.addEventListener("touchstart",this.preventDefault,te),window.addEventListener("touchmove",this.preventDefault,te),window.addEventListener("wheel",this.preventDefault,te)}return this},resetGestures:function O(){if(this.cy.zoomingEnabled(this.lastZoomingEnabled).panningEnabled(this.lastPanningEnabled).boxSelectionEnabled(this.lastBoxSelectionEnabled),this.options.disableBrowserGestures){var te=this.windowListenerOptions;window.removeEventListener("touchstart",this.preventDefault,te),window.removeEventListener("touchmove",this.preventDefault,te),window.removeEventListener("wheel",this.preventDefault,te)}return this},saveGestureState:function q(){var te=this.cy;return this.lastPanningEnabled=te.panningEnabled(),this.lastZoomingEnabled=te.zoomingEnabled(),this.lastBoxSelectionEnabled=te.boxSelectionEnabled(),this}}},function(H,B,W){"use strict";H.exports={addCytoscapeListeners:function P(){var O=this,q=this.cy,te=this.options;return this.addListener(q,"drag",function(){return O.grabbingNode=!0}),this.addListener(q,"free",function(){return O.grabbingNode=!1}),this.addListener(q,"tapstart","node",function(J){O.drawMode&&O.start(J.target)}),this.addListener(q,"tapdrag",function(J){O.update(J.position)}),this.addListener(q,"tapdragover","node",function(J){te.snap||O.preview(J.target)}),this.addListener(q,"tapdragout","node",function(J){te.snap||O.unpreview(J.target)}),this.addListener(q,"tapend",function(){O.stop()}),this}}},function(H,B,W){"use strict";H.exports={canConnect:function(q,te){return!q.same(te)},edgeParams:function(q,te){return{}},hoverDelay:150,snap:!0,snapThreshold:50,snapFrequency:15,noEdgeEventsInDraw:!0,disableBrowserGestures:!0}},function(H,B,W){"use strict";H.exports={toggleDrawMode:function P(te){var J=this.cy;return this.drawMode=te??!this.drawMode,this.drawMode?(this.prevUngrabifyState=J.autoungrabify(),J.autoungrabify(!0),this.emit("drawon")):(J.autoungrabify(this.prevUngrabifyState),this.emit("drawoff")),this},enableDrawMode:function O(){return this.toggleDrawMode(!0)},disableDrawMode:function q(){return this.toggleDrawMode(!1)}}},function(H,B,W){"use strict";var P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(xe){return typeof xe}:function(xe){return xe&&"function"==typeof Symbol&&xe.constructor===Symbol&&xe!==Symbol.prototype?"symbol":typeof xe},O=W(0);function J(xe,Oe,re){var ue={};return O(ue,Oe,xe),O(ue.data,Oe.data,xe.data),ue.classes=function(Oe){return(typeof Oe>"u"?"undefined":P(Oe))===P("")}(Oe.classes)?Oe.classes+" "+re:function(Oe){return(typeof Oe>"u"?"undefined":P(Oe))===P([])&&null!=Oe.length}(Oe.classes)?Oe.classes.join(" ")+" "+re:re,ue}H.exports={makeEdges:function oe(){var xe=arguments.length>0&&void 0!==arguments[0]&&arguments[0],Oe=this.cy,ue=this.presumptiveTargets,z=this.previewEles,$=this.active,ne=this.sourceNode,ge=this.targetNode,Ue=xe?"eh-preview":"",Re=Oe.collection(),rt=this.canConnect(ge);if($&&rt){if(!ge||0===ge.size())return z.remove(),void this.emit("cancel",this.mp(),ne,ue);if(!xe)return z.removeClass("eh-preview").style("events",""),void this.emit("complete",this.mp(),ne,ge,z);var Pe=Oe.add(J({group:"edges",data:{source:ne.id(),target:ge.id()}},this.edgeParams(ge),Ue));return Re=Re.merge(Pe),xe?(this.previewEles=Re,Re.style("events","no")):(Re.style("events",""),this.emit("complete",this.mp(),ne,ge,Re)),this}},makePreview:function se(){return this.makeEdges(!0),this},removePreview:function U(){return this.previewShown()&&this.previewEles.remove(),this},previewShown:function Q(){return this.previewEles.nonempty()&&this.previewEles.inside()},updateEdge:function ae(){var xe=this,Oe=this.sourceNode,re=this.ghostNode,ue=this.cy,ne=this.mx,ge=this.my,Ue=void 0,Re=void 0;if(Oe)return(!re||0===re.length||re.removed())&&(Re=this.ghostEles=ue.collection(),ue.batch(function(){(re=xe.ghostNode=ue.add({group:"nodes",classes:"eh-ghost eh-ghost-node",position:{x:0,y:0}})).style({"background-color":"blue",width:1e-4,height:1e-4,opacity:0,events:"no"});var rt={};(Ue=ue.add(O({},rt,{group:"edges",data:O({},rt.data,{source:Oe.id(),target:re.id()}),classes:"eh-ghost eh-ghost-edge"}))).style({events:"no"})}),Re.merge(re).merge(Ue)),re.position({x:ne,y:ge}),this}}},function(H,B,W){"use strict";H.exports={disableEdgeEvents:function P(){return this.options.noEdgeEventsInDraw&&this.cy.edges().style("events","no"),this},enableEdgeEvents:function O(){return this.options.noEdgeEventsInDraw&&this.cy.edges().style("events",""),this}}},function(H,B,W){"use strict";H.exports={enable:function P(){return this.enabled=!0,this.emit("enable"),this},disable:function O(){return this.enabled=!1,this.emit("disable"),this}}},function(H,B,W){"use strict";var P=W(13),O=Math.sqrt(2);H.exports={start:function oe(Oe){var re=this;if(this.canStartOn(Oe)){this.active=!0,this.sourceNode=Oe,this.sourceNode.addClass("eh-source"),this.disableGestures(),this.disableEdgeEvents();var ue=function($){return $.id()};this.canConnect=P(function(z){return re.options.canConnect(re.sourceNode,z)},ue),this.edgeParams=P(function(z){return re.options.edgeParams(re.sourceNode,z)},ue),this.emit("start",this.hp(),Oe)}},update:function se(Oe){if(this.active){var re=Oe;return this.mx=re.x,this.my=re.y,this.updateEdge(),this.throttledSnap(),this}},preview:function U(Oe){var re=this,ue=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],z=this.options,$=this.sourceNode,ge=this.ghostEles,Ue=this.presumptiveTargets,Re=this.previewEles,rt=this.active,Pe=$,at=Oe.same(this.ghostNode),xt=!this.canConnect(Oe),He=Oe.same(this.targetNode);if(!rt||at||xt||He)return!1;this.targetNode.nonempty()&&this.unpreview(this.targetNode),clearTimeout(this.previewTimeout);var ft=function(){re.targetNode=Oe,Ue.merge(Oe),Oe.addClass("eh-presumptive-target"),Oe.addClass("eh-target"),re.emit("hoverover",re.mp(),Pe,Oe),Oe.addClass("eh-preview"),ge.addClass("eh-preview-active"),$.addClass("eh-preview-active"),Oe.addClass("eh-preview-active"),re.makePreview(),re.emit("previewon",re.mp(),Pe,Oe,Re)};return ue&&z.hoverDelay>0?this.previewTimeout=setTimeout(ft,z.hoverDelay):ft(),!0},unpreview:function ae(Oe){if(this.active){var ue=this.sourceNode,z=this.previewEles,$=this.ghostEles,ne=this.cy;clearTimeout(this.previewTimeout),this.previewTimeout=null;var ge=ue;return Oe.removeClass("eh-preview eh-target eh-presumptive-target eh-preview-active"),$.removeClass("eh-preview-active"),ue.removeClass("eh-preview-active"),this.targetNode=ne.collection(),this.removePreview(ge,Oe),this.emit("hoverout",this.mp(),ge,Oe),this.emit("previewoff",this.mp(),ge,Oe,z),this}},stop:function xe(){if(this.active){var Oe=this.sourceNode,re=this.targetNode,ue=this.ghostEles,z=this.presumptiveTargets;return clearTimeout(this.previewTimeout),Oe.removeClass("eh-source eh-preview-active"),re.removeClass("eh-target eh-preview eh-hover eh-preview-active"),z.removeClass("eh-presumptive-target"),this.makeEdges(),ue.remove(),this.clearCollections(),this.resetGestures(),this.enableEdgeEvents(),this.active=!1,this.emit("stop",this.mp(),Oe),this}},snap:function Q(){if(!this.active||!this.options.snap)return!1;var Oe=this.cy,re=this.targetNode,ue=this.options.snapThreshold,z=this.mp(),$=this.previewEles,ne=this.ghostNode,Ue=function(xn,Cn,yn,je){var be=yn-xn,Dt=je-Cn;return be*be+Dt*Dt},rt=function(xn){return function(xn,Cn){return Ue(xn.x,xn.y,Cn.x,Cn.y)}(xn.position(),z)},Pe=function(xn){var yn=function(xn){return O*Math.max(xn.outerWidth(),xn.outerHeight())/2}(xn)+ue;return yn*yn},at=function(xn){return rt(xn)<=Pe(xn)},xt=function(xn){var Cn=xn.position(),yn=xn.outerWidth()/2,je=xn.outerHeight()/2,be=Cn.x,Dt=Cn.y,Rt=z.x,ci=z.y,$i=be-yn,It=be+yn,Pt=Dt-je,un=Dt+je,Je=$i<=Rt&&Rt<=It,Te=Pt<=ci&&ci<=un;if(Je&&Te)return 0;if(Je){var De=ci-Pt,Ot=ci-un;return Math.min(De*De,Ot*Ot)}if(Te){var vn=Rt-$i,ri=Rt-It;return Math.min(vn*vn,ri*ri)}return Rt<$i&&ci<Pt?Ue(Rt,ci,$i,Pt):Rt>It&&ci<Pt?Ue(Rt,ci,It,Pt):Ue(Rt,ci,Rt<$i&&ci>un?$i:It,un)},bt=function(xn){var Cn=z,je=xn.outerWidth()/2,Dt=xn.outerHeight()/2,Rt=xn.position();return Rt.x-je<=Cn.x&&Cn.x<=Rt.x+je&&Rt.y-Dt<=Cn.y&&Cn.y<=Rt.y+Dt},Ut=Oe.nodes(function(Ln){return!((xn=Ln).same($)||xn.same(ne))&&at(Ln);var xn}).sort(function(xn,Cn){return xt(xn)-xt(Cn)}),Dn=!1;re.nonempty()&&!at(re)&&this.unpreview(re);for(var Jt=0;Jt<Ut.length;Jt++){var nn=Ut[Jt];if((!nn.isParent()||!bt(nn))&&(!nn.isChild()||bt(nn.parent()))&&(nn.same(re)||this.preview(nn,false))){Dn=!0;break}}return Dn},canStartOn:function q(Oe){var Pe,re=this.previewEles,ue=this.ghostEles;return this.enabled&&!this.active&&!this.grabbingNode&&null!=Oe&&Oe.nonempty()&&!(function(Pe){return re.anySame(Pe)}(Pe=Oe)||function(Pe){return ue.anySame(Pe)}(Pe))},canStartDrawModeOn:function te(Oe){return this.canStartOn(Oe)&&this.drawMode},canStartNonDrawModeOn:function J(Oe){return this.canStartOn(Oe)&&!this.drawMode}}},function(H,B,W){"use strict";var P=W(4),O=W(0),q=W(14),te=W(2),J=W(3),oe=W(5),se=W(6),Q=W(8),U=W(9),ae=W(11),xe=W(7);function Oe(z){this.cy=z.cy,this.listeners=[],this.enabled=!0,this.drawMode=!1,this.active=!1,this.grabbingNode=!1,this.clearCollections(),this.mx=0,this.my=0,this.options=O({},P,z),this.saveGestureState(),this.addListeners(),this.throttledSnap=q(this.snap.bind(this),1e3/z.snapFrequency),this.preventDefault=function(Ue){return Ue.preventDefault()},this.canConnect=function(){return!1};var ne=!1;try{var ge=Object.defineProperty({},"passive",{get:function(){ne=!0}});window.addEventListener("test",null,ge)}catch{}this.windowListenerOptions=!ne||{capture:!0,passive:!1}}var re=Oe.prototype={};re.destroy=function(){this.removeListeners()},re.setOptions=function(z){O(this.options,z)},re.mp=function(){return{x:this.mx,y:this.my}},re.hp=function(){return{x:this.hx,y:this.hy}},re.clearCollections=function(){var z=this.cy;this.previewEles=z.collection(),this.ghostEles=z.collection(),this.ghostNode=z.collection(),this.sourceNode=z.collection(),this.targetNode=z.collection(),this.presumptiveTargets=z.collection()},[te,J,oe,se,Q,U,ae,xe].forEach(function($){return O(re,$)}),H.exports=Oe},function(H,B,W){"use strict";var P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(U){return typeof U}:function(U){return U&&"function"==typeof Symbol&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U};function te(U,ae,xe,Oe,re){return(typeof xe>"u"?"undefined":P(xe))!==P("")&&(re=Oe=xe,xe=null),null==re&&(re=!1),{target:U,event:ae,selector:xe,callback:Oe,options:re}}function J(U){return U instanceof Element}H.exports={addListener:function oe(U,ae,xe,Oe,re){var ue=te(U,ae,xe,Oe,re);return this.listeners.push(ue),J(ue.target)?ue.target.addEventListener(ue.event,ue.callback,ue.options):ue.selector?ue.target.addListener(ue.event,ue.selector,ue.callback,ue.options):ue.target.addListener(ue.event,ue.callback,ue.options),this},addListeners:function O(){var U=this;return this.addCytoscapeListeners(),this.addListener(this.cy,"destroy",function(){return U.destroy()}),this},removeListener:function se(U,ae,xe,Oe,re){for(var ue=te(U,ae,xe,Oe,re),z=this.listeners.length-1;z>=0;z--){var $=this.listeners[z];if(!(ue.target!==$.target||ue.event!==$.event||null!=ue.selector&&ue.selector!==$.selector||null!=ue.callback&&ue.callback!==$.callback)){this.listeners.splice(z,1),J(ue.target)?ue.target.removeEventListener(ue.event,ue.callback,ue.options):ue.selector?ue.target.removeListener(ue.event,ue.selector,ue.callback,ue.options):ue.target.removeListener(ue.event,ue.callback,ue.options);break}}return this},removeListeners:function q(){for(var U=this.listeners.length-1;U>=0;U--){var ae=this.listeners[U];this.removeListener(ae.target,ae.event,ae.selector,ae.callback,ae.options)}return this},emit:function Q(U,ae){for(var xe=this.cy,Oe=arguments.length,re=Array(Oe>2?Oe-2:0),ue=2;ue<Oe;ue++)re[ue-2]=arguments[ue];return xe.emit({type:"eh"+U,position:ae},re),this}}},function(H,B,W){"use strict";var P=W(1),O=function(te){!te||te("core","edgehandles",P)};typeof cytoscape<"u"&&O(cytoscape),H.exports=O},function(H,B){H.exports=Y},function(H,B){H.exports=D}]))},9050:(Be,Ce,V)=>{var Y;!function(D){"use strict";var H=function(B){!B||B("core","snapToGrid",function(W){var P=this,O=W,q=P.container(),te={stackOrder:-1,gridSpacing:40,strokeStyle:"#CCCCCC",lineWidth:1,lineDash:[5,8],zoomDash:!0,panGrid:!0,snapToGrid:!0,drawGrid:!0},J={snapOn:function(){D(this).trigger("snaptogrid.snapon")},snapOff:function(){D(this).trigger("snaptogrid.snapoff")},gridOn:function(){D(this).trigger("snaptogrid.gridon")},gridOff:function(){D(this).trigger("snaptogrid.gridoff")},refresh:function(){D(this).trigger("snaptogrid.refresh")},option:function(oe,se){var Q=D(this),U=Q.data("snapToGrid");if(null!=U){var ae=U.options;if(void 0===se){if(typeof oe!=typeof{})return ae[oe];ae=D.extend(!0,{},defaults,oe),U.options=ae}else ae[oe]=se;return Q.data("snapToGrid",U),Q.trigger("snaptogrid.refresh"),Q}},init:function(){var Q,oe=D("<canvas></canvas>"),se=D(this),U=D.extend(!0,{},te,W);se.data("snapToGrid",U);var ae,xe=function(){return ae||(ae=se.data("snapToGrid"))},Oe=function(){oe.attr("height",se.height()).attr("width",se.width()).css({position:"absolute",top:0,left:0,"z-index":xe().stackOrder}),setTimeout(function(){var at=oe.offset(),xt=se.offset();oe.attr("height",se.height()).attr("width",se.width()).css({top:-(at.top-xt.top),left:-(at.left-xt.left)}),re()},0)},re=function(){if(ue(),xe().drawGrid){var at=P.zoom(),xt=se.width(),He=se.height(),ft=xe().gridSpacing*at,gt=P.pan(),bt=gt.x%ft,kn=gt.y%ft;if(Q.strokeStyle=xe().strokeStyle,Q.lineWidth=xe().lineWidth,xe().zoomDash){for(var Ut=xe().lineDash.slice(),Dn=0;Dn<Ut.length;Dn++)Ut[Dn]=xe().lineDash[Dn]*at;Q.setLineDash(Ut)}else Q.setLineDash(xe().lineDash);for(Q.lineDashOffset=xe().panGrid?-gt.y:0,Dn=bt;Dn<xt;Dn+=ft)Q.beginPath(),Q.moveTo(Dn,0),Q.lineTo(Dn,He),Q.stroke();for(Q.lineDashOffset=xe().panGrid?-gt.x:0,Dn=kn;Dn<He;Dn+=ft)Q.beginPath(),Q.moveTo(0,Dn),Q.lineTo(xt,Dn),Q.stroke()}},ue=function(){var at=se.width(),xt=se.height();Q.clearRect(0,0,at,xt)},z=function(at){var xt=at.position(),He=Math.floor(xt.x/xe().gridSpacing),ft=Math.floor(xt.y/xe().gridSpacing);at.position({x:(He+.5)*xe().gridSpacing,y:(ft+.5)*xe().gridSpacing})},$=function(){P.nodes().each(function(at){z(at)})},ne=function(at){xe().snapToGrid&&z(at.target)},ge=function(at){xe().snapToGrid&&z(at.target)};se.append(oe),D(window).on("resize",Oe),se.on("snaptogrid.snapon",function(){xe().snapToGrid=!0,$()}),se.on("snaptogrid.snapoff",function(){xe().snapToGrid=!1}),se.on("snaptogrid.gridon",function(){xe().drawGrid=!0,re()}),se.on("snaptogrid.gridoff",function(){xe().drawGrid=!1,re()}),se.on("snaptogrid.refresh",Oe),Q=oe[0].getContext("2d"),P.ready(function(){Oe(),xe().snapToGrid&&$(),P.on("zoom",re),P.on("pan",re),P.on("free",ne),P.on("add",ge)})}};return J[O]?J[O].apply(q,Array.prototype.slice.call(arguments,1)):"object"!=typeof O&&O?(console.error("No such function `"+O+"` for snapToGrid"),this):J.init.apply(q,arguments)})};Be.exports&&(Be.exports=H),void 0!==(Y=function(){return H}.call(Ce,V,Ce,Be))&&(Be.exports=Y),typeof cytoscape<"u"&&H(cytoscape)}(typeof jQuery<"u"?jQuery:null)},6864:(Be,Ce,V)=>{"use strict";var Y=V(406),D=V(5203),H=V(8817),B=V(4793),W=V(4152);function P(f){return f&&"object"==typeof f&&"default"in f?f:{default:f}}var O=P(Y),q=P(D),te=P(H),J=P(B),oe=P(W);function se(f){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function Q(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")}function U(f,c){for(var h=0;h<c.length;h++){var m=c[h];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(f,m.key,m)}}function ae(f,c,h){return c&&U(f.prototype,c),h&&U(f,h),Object.defineProperty(f,"prototype",{writable:!1}),f}function xe(f,c,h){return c in f?Object.defineProperty(f,c,{value:h,enumerable:!0,configurable:!0,writable:!0}):f[c]=h,f}function Oe(f,c){return function re(f){if(Array.isArray(f))return f}(f)||function ue(f,c){var h=null==f?null:typeof Symbol<"u"&&f[Symbol.iterator]||f["@@iterator"];if(null!=h){var w,E,m=[],_=!0,C=!1;try{for(h=h.call(f);!(_=(w=h.next()).done)&&(m.push(w.value),!c||m.length!==c);_=!0);}catch(k){C=!0,E=k}finally{try{!_&&null!=h.return&&h.return()}finally{if(C)throw E}}return m}}(f,c)||function z(f,c){if(f){if("string"==typeof f)return $(f,c);var h=Object.prototype.toString.call(f).slice(8,-1);if("Object"===h&&f.constructor&&(h=f.constructor.name),"Map"===h||"Set"===h)return Array.from(f);if("Arguments"===h||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return $(f,c)}}(f,c)||function ne(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(f,c){(null==c||c>f.length)&&(c=f.length);for(var h=0,m=new Array(c);h<c;h++)m[h]=f[h];return m}var ge=typeof window>"u"?null:window,Ue=ge?ge.navigator:null,Re=se(""),rt=se({}),Pe=se(function(){}),at=typeof HTMLElement>"u"?"undefined":se(HTMLElement),xt=function(c){return c&&c.instanceString&&ft(c.instanceString)?c.instanceString():null},He=function(c){return null!=c&&se(c)==Re},ft=function(c){return null!=c&&se(c)===Pe},gt=function(c){return!nn(c)&&(Array.isArray?Array.isArray(c):null!=c&&c instanceof Array)},bt=function(c){return null!=c&&se(c)===rt&&!gt(c)&&c.constructor===Object},Ut=function(c){return null!=c&&se(c)===se(1)&&!isNaN(c)},Jt=function(c){if("undefined"!==at)return null!=c&&c instanceof HTMLElement},nn=function(c){return Ln(c)||xn(c)},Ln=function(c){return"collection"===xt(c)&&c._private.single},xn=function(c){return"collection"===xt(c)&&!c._private.single},Cn=function(c){return"core"===xt(c)},yn=function(c){return"stylesheet"===xt(c)},be=function(c){return null==c||!(""!==c&&!c.match(/^\s+$/))},ci=function(c){return function(c){return null!=c&&se(c)===rt}(c)&&ft(c.then)},It=function(c,h){h||(h=function(){if(1===arguments.length)return arguments[0];if(0===arguments.length)return"undefined";for(var C=[],w=0;w<arguments.length;w++)C.push(arguments[w]);return C.join("$")});var m=function _(){var E,C=this,w=arguments,k=h.apply(C,w),L=_.cache;return(E=L[k])||(E=L[k]=c.apply(C,w)),E};return m.cache={},m},Pt=It(function(f){return f.replace(/([A-Z])/g,function(c){return"-"+c.toLowerCase()})}),un=It(function(f){return f.replace(/(-\w)/g,function(c){return c[1].toUpperCase()})}),Je=It(function(f,c){return f+c[0].toUpperCase()+c.substring(1)},function(f,c){return f+"$"+c}),Te=function(c){return be(c)?c:c.charAt(0).toUpperCase()+c.substring(1)},De="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",Cs=function(c,h){return c<h?-1:c>h?1:0},tr=null!=Object.assign?Object.assign.bind(Object):function(f){for(var c=arguments,h=1;h<c.length;h++){var m=c[h];if(null!=m)for(var _=Object.keys(m),C=0;C<_.length;C++){var w=_[C];f[w]=m[w]}}return f},td={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},lc=function(c){for(var h=c.map,m=c.keys,_=m.length,C=0;C<_;C++){var w=m[C];if(bt(w))throw Error("Tried to set map with object key");C<m.length-1?(null==h[w]&&(h[w]={}),h=h[w]):h[w]=c.value}},Id=function(c){for(var h=c.map,m=c.keys,_=m.length,C=0;C<_;C++){var w=m[C];if(bt(w))throw Error("Tried to get map with object key");if(null==(h=h[w]))return h}return h},Lu=ge?ge.performance:null,$a=Lu&&Lu.now?function(){return Lu.now()}:function(){return Date.now()},Lh=function(){if(ge){if(ge.requestAnimationFrame)return function(f){ge.requestAnimationFrame(f)};if(ge.mozRequestAnimationFrame)return function(f){ge.mozRequestAnimationFrame(f)};if(ge.webkitRequestAnimationFrame)return function(f){ge.webkitRequestAnimationFrame(f)};if(ge.msRequestAnimationFrame)return function(f){ge.msRequestAnimationFrame(f)}}return function(f){f&&setTimeout(function(){f($a())},1e3/60)}}(),au=function(c){return Lh(c)},Ia=$a,Sd=9261,Pu=65599,th=5381,df=function(c){for(var _,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Sd,m=h;!(_=c.next()).done;)m=m*Pu+_.value|0;return m},nh=function(c){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Sd;return h*Pu+c|0},hl=function(c){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:th;return(h<<5)+h+c|0},nd=function(c){return 2097152*c[0]+c[1]},ff=function(c,h){return[nh(c[0],h[0]),hl(c[1],h[1])]},wc=function(c,h){var m={value:0,done:!1},_=0,C=c.length;return df({next:function(){return _<C?m.value=c.charCodeAt(_++):m.done=!0,m}},h)},Tg=function(){return Ed(arguments)},Ed=function(c){for(var h,m=0;m<c.length;m++){var _=c[m];h=0===m?wc(_):wc(_,h)}return h},to=!0,pf=null!=console.warn,fl=null!=console.trace,Ac=Number.MAX_SAFE_INTEGER||9007199254740991,tl=function(){return!0},Wf=function(){return!1},ih=function(){return 0},Ge=function(){},it=function(c){throw new Error(c)},Ye=function(c){if(void 0===c)return to;to=!!c},de=function(c){!Ye()||(pf?console.warn(c):(console.log(c),fl&&console.trace()))},$e=function(c){return null==c?c:gt(c)?c.slice():bt(c)?function(c){return tr({},c)}(c):c},zt=function(c,h){for(h=c="";c++<36;h+=51*c&52?(15^c?8^Math.random()*(20^c?16:4):4).toString(16):"-");return h},In={},yi=function(){return In},ti=function(c){var h=Object.keys(c);return function(m){for(var _={},C=0;C<h.length;C++){var w=h[C],E=m?.[w];_[w]=void 0===E?c[w]:E}return _}},hi=function(c,h,m){for(var _=c.length-1;_>=0&&(c[_]!==h||(c.splice(_,1),!m));_--);},pr=function(c){c.splice(0,c.length)},or=function(c,h,m){return m&&(h=Je(m,h)),c[h]},Gs=function(c,h,m,_){m&&(h=Je(m,h)),c[h]=_},wo=typeof Map<"u"?Map:function(){function f(){Q(this,f),this._obj={}}return ae(f,[{key:"set",value:function(h,m){return this._obj[h]=m,this}},{key:"delete",value:function(h){return this._obj[h]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(h){return void 0!==this._obj[h]}},{key:"get",value:function(h){return this._obj[h]}}]),f}(),Sa=function(){function f(c){if(Q(this,f),this._obj=Object.create(null),this.size=0,null!=c){var h;h=null!=c.instanceString&&c.instanceString()===this.instanceString()?c.toArray():c;for(var m=0;m<h.length;m++)this.add(h[m])}}return ae(f,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(h){var m=this._obj;1!==m[h]&&(m[h]=1,this.size++)}},{key:"delete",value:function(h){var m=this._obj;1===m[h]&&(m[h]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(h){return 1===this._obj[h]}},{key:"toArray",value:function(){var h=this;return Object.keys(this._obj).filter(function(m){return h.has(m)})}},{key:"forEach",value:function(h,m){return this.toArray().forEach(h,m)}}]),f}(),us="undefined"!==(typeof Set>"u"?"undefined":se(Set))?Set:Sa,qa=function(c,h){var m=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0!==c&&void 0!==h&&Cn(c)){var _=h.group;if(null==_&&(_=h.data&&null!=h.data.source&&null!=h.data.target?"edges":"nodes"),"nodes"===_||"edges"===_){this.length=1,this[0]=this;var C=this._private={cy:c,single:!0,data:h.data||{},position:h.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:_,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!h.selected,selectable:void 0===h.selectable||!!h.selectable,locked:!!h.locked,grabbed:!1,grabbable:void 0===h.grabbable||!!h.grabbable,pannable:void 0===h.pannable?"edges"===_:!!h.pannable,active:!1,classes:new us,animation:{current:[],queue:[]},rscratch:{},scratch:h.scratch||{},edges:[],children:[],parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(null==C.position.x&&(C.position.x=0),null==C.position.y&&(C.position.y=0),h.renderedPosition){var w=h.renderedPosition,E=c.pan(),k=c.zoom();C.position={x:(w.x-E.x)/k,y:(w.y-E.y)/k}}var L=[];gt(h.classes)?L=h.classes:He(h.classes)&&(L=h.classes.split(/\s+/));for(var G=0,K=L.length;G<K;G++){var le=L[G];!le||""===le||C.classes.add(le)}this.createEmitter();var he=h.style||h.css;he&&(de("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(he)),(void 0===m||m)&&this.restore()}else it("An element must be of type `nodes` or `edges`; you specified `"+_+"`")}else it("An element must have a core reference and parameters set")},Ru=function(c){return c={bfs:c.bfs||!c.dfs,dfs:c.dfs||!c.bfs},function(m,_,C){var w;bt(m)&&!nn(m)&&(m=(w=m).roots||w.root,_=w.visit,C=w.directed),C=2!==arguments.length||ft(_)?C:_,_=ft(_)?_:function(){};for(var Ie,E=this._private.cy,k=m=He(m)?this.filter(m):m,L=[],G=[],K={},le={},he={},pe=0,Ne=this.byGroup(),ze=Ne.nodes,Qe=Ne.edges,qe=0;qe<k.length;qe++){var ht=k[qe],Lt=ht.id();ht.isNode()&&(L.unshift(ht),c.bfs&&(he[Lt]=!0,G.push(ht)),le[Lt]=0)}for(var kt=function(){var Gt=c.bfs?L.shift():L.pop(),Tt=Gt.id();if(c.dfs){if(he[Tt])return"continue";he[Tt]=!0,G.push(Gt)}var Jn,mn=le[Tt],Yt=K[Tt],ln=null!=Yt?Yt.source():null,Sn=null!=Yt?Yt.target():null,Rn=null==Yt?void 0:Gt.same(ln)?Sn[0]:ln[0];if(!0===(Jn=_(Gt,Yt,Rn,pe++,mn)))return Ie=Gt,"break";if(!1===Jn)return"break";for(var En=Gt.connectedEdges().filter(function(di){return(!C||di.source().same(Gt))&&Qe.has(di)}),Yn=0;Yn<En.length;Yn++){var li=En[Yn],bi=li.connectedNodes().filter(function(di){return!di.same(Gt)&&ze.has(di)}),pi=bi.id();0!==bi.length&&!he[pi]&&(L.push(bi=bi[0]),c.bfs&&(he[pi]=!0,G.push(bi)),K[pi]=li,le[pi]=le[Tt]+1)}};0!==L.length;){var mt=kt();if("continue"!==mt&&"break"===mt)break}for(var Ft=E.collection(),Ct=0;Ct<G.length;Ct++){var Ht=G[Ct],Vt=K[Ht.id()];null!=Vt&&Ft.push(Vt),Ft.push(Ht)}return{path:E.collection(Ft),found:E.collection(Ie)}}},ds={breadthFirstSearch:Ru({bfs:!0}),depthFirstSearch:Ru({dfs:!0})};ds.bfs=ds.breadthFirstSearch,ds.dfs=ds.depthFirstSearch;var ts=ti({root:null,weight:function(c){return 1},directed:!1}),Mg={dijkstra:function(c){if(!bt(c)){var h=arguments;c={root:h[0],weight:h[1],directed:h[2]}}var m=ts(c),_=m.root,C=m.weight,w=m.directed,E=this,k=C,L=He(_)?this.filter(_)[0]:_[0],G={},K={},le={},he=this.byGroup(),pe=he.nodes,Ie=he.edges;Ie.unmergeBy(function(mn){return mn.isLoop()});for(var Ne=function(Yt){return G[Yt.id()]},ze=function(Yt,ln){G[Yt.id()]=ln,Qe.updateItem(Yt)},Qe=new q.default(function(mn,Yt){return Ne(mn)-Ne(Yt)}),qe=0;qe<pe.length;qe++){var ht=pe[qe];G[ht.id()]=ht.same(L)?0:1/0,Qe.push(ht)}for(var Lt=function(Yt,ln){for(var Jn,Sn=(w?Yt.edgesTo(ln):Yt.edgesWith(ln)).intersect(Ie),Rn=1/0,En=0;En<Sn.length;En++){var Yn=Sn[En],li=k(Yn);(li<Rn||!Jn)&&(Rn=li,Jn=Yn)}return{edge:Jn,dist:Rn}};Qe.size()>0;){var kt=Qe.pop(),mt=Ne(kt),Ft=kt.id();if(le[Ft]=mt,mt!==1/0)for(var Ct=kt.neighborhood().intersect(pe),Ht=0;Ht<Ct.length;Ht++){var Vt=Ct[Ht],et=Vt.id(),Gt=Lt(kt,Vt),Tt=mt+Gt.dist;Tt<Ne(Vt)&&(ze(Vt,Tt),K[et]={node:kt,edge:Gt.edge})}}return{distanceTo:function(Yt){var ln=He(Yt)?pe.filter(Yt)[0]:Yt[0];return le[ln.id()]},pathTo:function(Yt){var ln=He(Yt)?pe.filter(Yt)[0]:Yt[0],Sn=[],Rn=ln,Jn=Rn.id();if(ln.length>0)for(Sn.unshift(ln);K[Jn];){var En=K[Jn];Sn.unshift(En.edge),Sn.unshift(En.node),Jn=(Rn=En.node).id()}return E.spawn(Sn)}}}},zp={kruskal:function(c){c=c||function(qe){return 1};for(var h=this.byGroup(),m=h.nodes,_=h.edges,C=m.length,w=new Array(C),E=m,k=function(ht){for(var Lt=0;Lt<w.length;Lt++)if(w[Lt].has(ht))return Lt},L=0;L<C;L++)w[L]=this.spawn(m[L]);for(var G=_.sort(function(qe,ht){return c(qe)-c(ht)}),K=0;K<G.length;K++){var le=G[K],he=le.source()[0],pe=le.target()[0],Ie=k(he),Ne=k(pe),ze=w[Ie],Qe=w[Ne];Ie!==Ne&&(E.merge(le),ze.merge(Qe),w.splice(Ne,1))}return E}},gi=ti({root:null,goal:null,weight:function(c){return 1},heuristic:function(c){return 0},directed:!1}),Dg={aStar:function(c){var h=this.cy(),m=gi(c),_=m.root,C=m.goal,w=m.heuristic,E=m.directed,k=m.weight;_=h.collection(_)[0],C=h.collection(C)[0];var qe,ht,L=_.id(),G=C.id(),K={},le={},he={},pe=new q.default(function(Jn,En){return le[Jn.id()]-le[En.id()]}),Ie=new us,Ne={},ze={},Qe=function(En,Yn){pe.push(En),Ie.add(Yn)};Qe(_,L),K[L]=0,le[L]=w(_);for(var mt=0;pe.size()>0;){if(ht=(qe=pe.pop()).id(),Ie.delete(ht),mt++,ht===G){for(var Ft=[],Ct=C,Ht=G,Vt=ze[Ht];Ft.unshift(Ct),null!=Vt&&Ft.unshift(Vt),null!=(Ct=Ne[Ht]);)Vt=ze[Ht=Ct.id()];return{found:!0,distance:K[ht],path:this.spawn(Ft),steps:mt}}he[ht]=!0;for(var et=qe._private.edges,Gt=0;Gt<et.length;Gt++){var Tt=et[Gt];if(this.hasElementWithId(Tt.id())&&(!E||Tt.data("source")===ht)){var mn=Tt.source(),Yt=Tt.target(),ln=mn.id()!==ht?mn:Yt,Sn=ln.id();if(this.hasElementWithId(Sn)&&!he[Sn]){var Rn=K[ht]+k(Tt);if(!Ie.has(Sn)){K[Sn]=Rn,le[Sn]=Rn+w(ln),Qe(ln,Sn),Ne[Sn]=qe,ze[Sn]=Tt;continue}Rn<K[Sn]&&(K[Sn]=Rn,le[Sn]=Rn+w(ln),Ne[Sn]=qe,ze[Sn]=Tt)}}}}return{found:!1,distance:void 0,path:void 0,steps:mt}}},Ls=ti({weight:function(c){return 1},directed:!1}),Ao={floydWarshall:function(c){for(var h=this.cy(),m=Ls(c),C=m.directed,w=m.weight,E=this.byGroup(),k=E.nodes,L=E.edges,G=k.length,K=G*G,le=function(li){return k.indexOf(li)},he=function(li){return k[li]},pe=new Array(K),Ie=0;Ie<K;Ie++){var Ne=Ie%G;pe[Ie]=(Ie-Ne)/G===Ne?0:1/0}for(var Qe=new Array(K),qe=new Array(K),ht=0;ht<L.length;ht++){var Lt=L[ht],kt=Lt.source()[0],mt=Lt.target()[0];if(kt!==mt){var Ft=le(kt),Ct=le(mt),Ht=Ft*G+Ct,Vt=w(Lt);if(pe[Ht]>Vt&&(pe[Ht]=Vt,Qe[Ht]=Ct,qe[Ht]=Lt),!C){var et=Ct*G+Ft;!C&&pe[et]>Vt&&(pe[et]=Vt,Qe[et]=Ft,qe[et]=Lt)}}}for(var Gt=0;Gt<G;Gt++)for(var Tt=0;Tt<G;Tt++)for(var mn=Tt*G+Gt,Yt=0;Yt<G;Yt++){var ln=Tt*G+Yt,Sn=Gt*G+Yt;pe[mn]+pe[Sn]<pe[ln]&&(pe[ln]=pe[mn]+pe[Sn],Qe[ln]=Qe[mn])}var Jn=function(li){return le(function(li){return(He(li)?h.filter(li):li)[0]}(li))};return{distance:function(li,bi){var pi=Jn(li),di=Jn(bi);return pe[pi*G+di]},path:function(li,bi){var pi=Jn(li),di=Jn(bi),Mn=he(pi);if(pi===di)return Mn.collection();if(null==Qe[pi*G+di])return h.collection();var si=h.collection();for(si.merge(Mn);pi!==di;)si.merge(qe[pi*G+(pi=Qe[pi*G+di])]),si.merge(he(pi));return si}}}},gv=ti({weight:function(c){return 1},directed:!1,root:null}),mv={bellmanFord:function(c){var h=this,m=gv(c),C=m.directed,w=m.root,E=m.weight,k=this,L=this.cy(),G=this.byGroup(),K=G.edges,le=G.nodes,he=le.length,pe=new wo,Ie=!1,Ne=[];w=L.collection(w)[0],K.unmergeBy(function(Mi){return Mi.isLoop()});for(var ze=K.length,Qe=function(gr){var Cr=pe.get(gr.id());return Cr||(Cr={},pe.set(gr.id(),Cr)),Cr},qe=function(gr){return(He(gr)?L.$(gr):gr)[0]},kt=0;kt<he;kt++){var mt=le[kt],Ft=Qe(mt);Ft.dist=mt.same(w)?0:1/0,Ft.pred=null,Ft.edge=null}for(var Ct=!1,Ht=function(gr,Cr,Zr,Fs,Qr,Ui){var St=Fs.dist+Ui;St<Qr.dist&&!Zr.same(Fs.edge)&&(Qr.dist=St,Qr.pred=gr,Qr.edge=Zr,Ct=!0)},Vt=1;Vt<he;Vt++){Ct=!1;for(var et=0;et<ze;et++){var Gt=K[et],Tt=Gt.source(),mn=Gt.target(),Yt=E(Gt),ln=Qe(Tt),Sn=Qe(mn);Ht(Tt,0,Gt,ln,Sn,Yt),C||Ht(mn,0,Gt,Sn,ln,Yt)}if(!Ct)break}if(Ct)for(var Rn=[],Jn=0;Jn<ze;Jn++){var En=K[Jn],Yn=En.source(),li=En.target(),bi=E(En),pi=Qe(Yn).dist,di=Qe(li).dist;if(pi+bi<di||!C&&di+bi<pi){if(Ie||(de("Graph contains a negative weight cycle for Bellman-Ford"),Ie=!0),!1===c.findNegativeWeightCycles)break;var Mn=[];pi+bi<di&&Mn.push(Yn),!C&&di+bi<pi&&Mn.push(li);for(var si=Mn.length,xi=0;xi<si;xi++){var ji=Mn[xi],rr=[ji];rr.push(Qe(ji).edge);for(var Br=Qe(ji).pred;-1===rr.indexOf(Br);)rr.push(Br),rr.push(Qe(Br).edge),Br=Qe(Br).pred;for(var Kr=(rr=rr.slice(rr.indexOf(Br)))[0].id(),hr=0,nr=2;nr<rr.length;nr+=2)rr[nr].id()<Kr&&(Kr=rr[nr].id(),hr=nr);(rr=rr.slice(hr).concat(rr.slice(0,hr))).push(rr[0]);var jr=rr.map(function(Mi){return Mi.id()}).join(",");-1===Rn.indexOf(jr)&&(Ne.push(k.spawn(rr)),Rn.push(jr))}}}return{distanceTo:function(gr){return Qe(qe(gr)).dist},pathTo:function(gr){for(var Cr=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w,Zr=qe(gr),Fs=[],Qr=Zr;;){if(null==Qr)return h.spawn();var Ui=Qe(Qr),St=Ui.edge,$n=Ui.pred;if(Fs.unshift(Qr[0]),Qr.same(Cr)&&Fs.length>0)break;null!=St&&Fs.unshift(St),Qr=$n}return k.spawn(Fs)},hasNegativeWeightCycle:Ie,negativeWeightCycles:Ne}}},Sy=Math.sqrt(2),xs=function(c,h,m){0===m.length&&it("Karger-Stein must be run on a connected (sub)graph");for(var _=m[c],E=h[_[1]],k=h[_[2]],L=m,G=L.length-1;G>=0;G--){var K=L[G],le=K[1],he=K[2];(h[le]===E&&h[he]===k||h[le]===k&&h[he]===E)&&L.splice(G,1)}for(var pe=0;pe<L.length;pe++){var Ie=L[pe];Ie[1]===k?(L[pe]=Ie.slice(),L[pe][1]=E):Ie[2]===k&&(L[pe]=Ie.slice(),L[pe][2]=E)}for(var Ne=0;Ne<h.length;Ne++)h[Ne]===k&&(h[Ne]=E);return L},Xi=function(c,h,m,_){for(;m>_;){var C=Math.floor(Math.random()*h.length);h=xs(C,c,h),m--}return h},Ey={kargerStein:function(){var c=this,h=this.byGroup(),m=h.nodes,_=h.edges;_.unmergeBy(function(Sn){return Sn.isLoop()});var C=m.length,w=_.length,E=Math.ceil(Math.pow(Math.log(C)/Math.LN2,2)),k=Math.floor(C/Sy);if(!(C<2)){for(var L=[],G=0;G<w;G++){var K=_[G];L.push([G,m.indexOf(K.source()),m.indexOf(K.target())])}for(var le=1/0,he=[],pe=new Array(C),Ie=new Array(C),Ne=new Array(C),ze=function(Rn,Jn){for(var En=0;En<C;En++)Jn[En]=Rn[En]},Qe=0;Qe<=E;Qe++){for(var qe=0;qe<C;qe++)Ie[qe]=qe;var ht=Xi(Ie,L.slice(),C,k),Lt=ht.slice();ze(Ie,Ne);var kt=Xi(Ie,ht,k,2),mt=Xi(Ne,Lt,k,2);kt.length<=mt.length&&kt.length<le?(le=kt.length,he=kt,ze(Ie,pe)):mt.length<=kt.length&&mt.length<le&&(le=mt.length,he=mt,ze(Ne,pe))}for(var Ft=this.spawn(he.map(function(Sn){return _[Sn[0]]})),Ct=this.spawn(),Ht=this.spawn(),Vt=pe[0],et=0;et<pe.length;et++){var Tt=m[et];pe[et]===Vt?Ct.merge(Tt):Ht.merge(Tt)}var mn=function(Rn){var Jn=c.spawn();return Rn.forEach(function(En){Jn.merge(En),En.connectedEdges().forEach(function(Yn){c.contains(Yn)&&!Ft.contains(Yn)&&Jn.merge(Yn)})}),Jn},Yt=[mn(Ct),mn(Ht)];return{cut:Ft,components:Yt,partition1:Ct,partition2:Ht}}it("At least 2 nodes are required for Karger-Stein algorithm")}},$o=function(c,h,m){return{x:c.x*h+m.x,y:c.y*h+m.y}},Ic=function(c,h,m){return{x:(c.x-m.x)/h,y:(c.y-m.y)/h}},rh=function(c){return{x:c[0],y:c[1]}},Lg=function(c,h){return Math.atan2(h,c)-Math.PI/2},vv=Math.log2||function(f){return Math.log(f)/Math.log(2)},Sc=function(c){return c>0?1:c<0?-1:0},no=function(c,h){return Math.sqrt(Td(c,h))},Td=function(c,h){var m=h.x-c.x,_=h.y-c.y;return m*m+_*_},k_=function(c){for(var h=c.length,m=0,_=0;_<h;_++)m+=c[_];for(var C=0;C<h;C++)c[C]=c[C]/m;return c},cc=function(c,h,m,_){return(1-_)*(1-_)*c+2*(1-_)*_*h+_*_*m},Yi=function(c,h,m,_){return{x:cc(c.x,h.x,m.x,_),y:cc(c.y,h.y,m.y,_)}},Tr=function(c,h,m){return Math.max(c,Math.min(m,h))},Ec=function(c){if(null==c)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(null!=c.x1&&null!=c.y1){if(null!=c.x2&&null!=c.y2&&c.x2>=c.x1&&c.y2>=c.y1)return{x1:c.x1,y1:c.y1,x2:c.x2,y2:c.y2,w:c.x2-c.x1,h:c.y2-c.y1};if(null!=c.w&&null!=c.h&&c.w>=0&&c.h>=0)return{x1:c.x1,y1:c.y1,x2:c.x1+c.w,y2:c.y1+c.h,w:c.w,h:c.h}}},Ea=function(c,h){c.x1=Math.min(c.x1,h.x1),c.x2=Math.max(c.x2,h.x2),c.w=c.x2-c.x1,c.y1=Math.min(c.y1,h.y1),c.y2=Math.max(c.y2,h.y2),c.h=c.y2-c.y1},da=function(c,h,m){c.x1=Math.min(c.x1,h),c.x2=Math.max(c.x2,h),c.w=c.x2-c.x1,c.y1=Math.min(c.y1,m),c.y2=Math.max(c.y2,m),c.h=c.y2-c.y1},jf=function(c){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return c.x1-=h,c.x2+=h,c.y1-=h,c.y2+=h,c.w=c.x2-c.x1,c.h=c.y2-c.y1,c},Vp=function(c){var m,_,C,w,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0];if(1===h.length)m=_=C=w=h[0];else if(2===h.length)m=C=h[0],w=_=h[1];else if(4===h.length){var E=Oe(h,4);m=E[0],_=E[1],C=E[2],w=E[3]}return c.x1-=w,c.x2+=_,c.y1-=m,c.y2+=C,c.w=c.x2-c.x1,c.h=c.y2-c.y1,c},xm=function(c,h){c.x1=h.x1,c.y1=h.y1,c.x2=h.x2,c.y2=h.y2,c.w=c.x2-c.x1,c.h=c.y2-c.y1},wm=function(c,h){return!(c.x1>h.x2||h.x1>c.x2||c.x2<h.x1||h.x2<c.x1||c.y2<h.y1||h.y2<c.y1||c.y1>h.y2||h.y1>c.y2)},ns=function(c,h,m){return c.x1<=h&&h<=c.x2&&c.y1<=m&&m<=c.y2},yv=function(c,h){return ns(c,h.x,h.y)},_v=function(c,h){return ns(c,h.x1,h.y1)&&ns(c,h.x2,h.y2)},ku=function(c,h,m,_,C,w,E){var K,k=gf(C,w),L=C/2,G=w/2,he=_-G-E;if((K=nl(c,h,m,_,m-L+k-E,he,m+L-k+E,he,!1)).length>0)return K;var Ne=m+L+E;if((K=nl(c,h,m,_,Ne,_-G+k-E,Ne,_+G-k+E,!1)).length>0)return K;var Lt=_+G+E;if((K=nl(c,h,m,_,m-L+k-E,Lt,m+L-k+E,Lt,!1)).length>0)return K;var et,Ft=m-L-E;if((K=nl(c,h,m,_,Ft,_-G+k-E,Ft,_+G-k+E,!1)).length>0)return K;var Gt=m-L+k,Tt=_-G+k;if((et=$f(c,h,m,_,Gt,Tt,k+E)).length>0&&et[0]<=Gt&&et[1]<=Tt)return[et[0],et[1]];var mn=m+L-k,Yt=_-G+k;if((et=$f(c,h,m,_,mn,Yt,k+E)).length>0&&et[0]>=mn&&et[1]<=Yt)return[et[0],et[1]];var ln=m+L-k,Sn=_+G-k;if((et=$f(c,h,m,_,ln,Sn,k+E)).length>0&&et[0]>=ln&&et[1]>=Sn)return[et[0],et[1]];var Rn=m-L+k,Jn=_+G-k;return(et=$f(c,h,m,_,Rn,Jn,k+E)).length>0&&et[0]<=Rn&&et[1]>=Jn?[et[0],et[1]]:[]},ql=function(c,h,m,_,C,w,E){var k=E,L=Math.min(m,C),G=Math.max(m,C),K=Math.min(_,w),le=Math.max(_,w);return L-k<=c&&c<=G+k&&K-k<=h&&h<=le+k},F_=function(c,h,m,_,C,w,E,k,L){var G_x1=Math.min(m,E,C)-L,G_x2=Math.max(m,E,C)+L,G_y1=Math.min(_,k,w)-L,G_y2=Math.max(_,k,w)+L;return!(c<G_x1||c>G_x2||h<G_y1||h>G_y2)},My=function(c,h,m,_,C,w,E,k){var he=[];!function(c,h,m,_,C){var E,k,L,G,K,le,he,pe;0===c&&(c=1e-5),L=-27*(_/=c)+(h/=c)*(9*(m/=c)-h*h*2),E=(k=(3*m-h*h)/9)*k*k+(L/=54)*L,C[1]=0,he=h/3,E>0?(K=(K=L+Math.sqrt(E))<0?-Math.pow(-K,1/3):Math.pow(K,1/3),le=(le=L-Math.sqrt(E))<0?-Math.pow(-le,1/3):Math.pow(le,1/3),C[0]=-he+K+le,C[4]=C[2]=-(he+=(K+le)/2),he=Math.sqrt(3)*(-le+K)/2,C[3]=he,C[5]=-he):(C[5]=C[3]=0,0===E?(pe=L<0?-Math.pow(-L,1/3):Math.pow(L,1/3),C[0]=2*pe-he,C[4]=C[2]=-(pe+he)):(G=(k=-k)*k*k,G=Math.acos(L/Math.sqrt(G)),pe=2*Math.sqrt(k),C[0]=-he+pe*Math.cos(G/3),C[2]=-he+pe*Math.cos((G+2*Math.PI)/3),C[4]=-he+pe*Math.cos((G+4*Math.PI)/3)))}(1*m*m-4*m*C+2*m*E+4*C*C-4*C*E+E*E+_*_-4*_*w+2*_*k+4*w*w-4*w*k+k*k,9*m*C-3*m*m-3*m*E-6*C*C+3*C*E+9*_*w-3*_*_-3*_*k-6*w*w+3*w*k,3*m*m-6*m*C+m*E-m*c+2*C*C+2*C*c-E*c+3*_*_-6*_*w+_*k-_*h+2*w*w+2*w*h-k*h,1*m*C-m*m+m*c-C*c+_*w-_*_+_*h-w*h,he);for(var Ie=[],Ne=0;Ne<6;Ne+=2)Math.abs(he[Ne+1])<1e-7&&he[Ne]>=0&&he[Ne]<=1&&Ie.push(he[Ne]);Ie.push(1),Ie.push(0);for(var Qe,qe,ht,ze=-1,Lt=0;Lt<Ie.length;Lt++)Qe=Math.pow(1-Ie[Lt],2)*m+2*(1-Ie[Lt])*Ie[Lt]*C+Ie[Lt]*Ie[Lt]*E,qe=Math.pow(1-Ie[Lt],2)*_+2*(1-Ie[Lt])*Ie[Lt]*w+Ie[Lt]*Ie[Lt]*k,ht=Math.pow(Qe-c,2)+Math.pow(qe-h,2),ze>=0?ht<ze&&(ze=ht):ze=ht;return ze},Md=function(c,h,m,_,C,w){var E=[c-m,h-_],k=[C-m,w-_],L=k[0]*k[0]+k[1]*k[1],G=E[0]*E[0]+E[1]*E[1],K=E[0]*k[0]+E[1]*k[1],le=K*K/L;return K<0?G:le>L?(c-C)*(c-C)+(h-w)*(h-w):G-le},Ta=function(c,h,m){for(var _,C,w,E,L=0,G=0;G<m.length/2;G++)if(C=m[2*G+1],G+1<m.length/2?(w=m[2*(G+1)],E=m[2*(G+1)+1]):(w=m[2*(G+1-m.length/2)],E=m[2*(G+1-m.length/2)+1]),(_=m[2*G])!=c||w!=c){if(!(_>=c&&c>=w||_<=c&&c<=w))continue;(c-_)/(w-_)*(E-C)+C>h&&L++}return L%2!=0},io=function(c,h,m,_,C,w,E,k,L){var K,Ie,G=new Array(m.length);null!=k[0]?(K=Math.atan(k[1]/k[0]),k[0]<0?K+=Math.PI/2:K=-K-Math.PI/2):K=k;for(var le=Math.cos(-K),he=Math.sin(-K),pe=0;pe<G.length/2;pe++)G[2*pe]=w/2*(m[2*pe]*le-m[2*pe+1]*he),G[2*pe+1]=E/2*(m[2*pe+1]*le+m[2*pe]*he),G[2*pe]+=_,G[2*pe+1]+=C;if(L>0){var Ne=kh(G,-L);Ie=Dy(Ne)}else Ie=G;return Ta(c,h,Ie)},Dy=function(c){for(var E,k,L,G,h=new Array(c.length/2),K=0;K<c.length/4;K++){K<c.length/4-1?(E=c[4*(K+1)],k=c[4*(K+1)+1],L=c[4*(K+1)+2],G=c[4*(K+1)+3]):(E=c[0],k=c[1],L=c[2],G=c[3]);var le=nl(c[4*K],c[4*K+1],c[4*K+2],c[4*K+3],E,k,L,G,!0);h[2*K]=le[0],h[2*K+1]=le[1]}return h},kh=function(c,h){for(var _,C,w,E,m=new Array(2*c.length),k=0;k<c.length/2;k++){k<c.length/2-1?(w=c[2*(k+1)],E=c[2*(k+1)+1]):(w=c[0],E=c[1]);var L=E-(C=c[2*k+1]),G=-(w-(_=c[2*k])),K=Math.sqrt(L*L+G*G),le=L/K,he=G/K;m[4*k]=_+le*h,m[4*k+1]=C+he*h,m[4*k+2]=w+le*h,m[4*k+3]=E+he*h}return m},Xa=function(c,h,m,_,C,w,E){return c-=C,h-=w,(c/=m/2+E)*c+(h/=_/2+E)*h<=1},$f=function(c,h,m,_,C,w,E){var k=[m-c,_-h],L=[c-C,h-w],G=k[0]*k[0]+k[1]*k[1],K=2*(L[0]*k[0]+L[1]*k[1]),he=K*K-4*G*(L[0]*L[0]+L[1]*L[1]-E*E);if(he<0)return[];var pe=(-K+Math.sqrt(he))/(2*G),Ie=(-K-Math.sqrt(he))/(2*G),Ne=Math.min(pe,Ie),ze=Math.max(pe,Ie),Qe=[];if(Ne>=0&&Ne<=1&&Qe.push(Ne),ze>=0&&ze<=1&&Qe.push(ze),0===Qe.length)return[];var qe=Qe[0]*k[0]+c,ht=Qe[0]*k[1]+h;return Qe.length>1?Qe[0]==Qe[1]?[qe,ht]:[qe,ht,Qe[1]*k[0]+c,Qe[1]*k[1]+h]:[qe,ht]},Ya=function(c,h,m){return h<=c&&c<=m||m<=c&&c<=h?c:c<=h&&h<=m||m<=h&&h<=c?h:m},nl=function(c,h,m,_,C,w,E,k,L){var G=c-C,K=m-c,le=E-C,he=h-w,pe=_-h,Ie=k-w,Ne=le*he-Ie*G,ze=K*he-pe*G,Qe=Ie*K-le*pe;if(0!==Qe){var qe=Ne/Qe,ht=ze/Qe;return-.001<=qe&&qe<=1.001&&-.001<=ht&&ht<=1.001||L?[c+qe*K,h+qe*pe]:[]}return 0===Ne||0===ze?Ya(c,m,E)===E?[E,k]:Ya(c,m,C)===C?[C,w]:Ya(C,E,m)===m?[m,_]:[]:[]},lu=function(c,h,m,_,C,w,E,k){var G,he,L=[],K=new Array(m.length),le=!0;if(null==w&&(le=!1),le){for(var pe=0;pe<K.length/2;pe++)K[2*pe]=m[2*pe]*w+_,K[2*pe+1]=m[2*pe+1]*E+C;if(k>0){var Ie=kh(K,-k);he=Dy(Ie)}else he=K}else he=m;for(var Qe,qe,ht=0;ht<he.length/2;ht++)ht<he.length/2-1?(Qe=he[2*(ht+1)],qe=he[2*(ht+1)+1]):(Qe=he[0],qe=he[1]),0!==(G=nl(c,h,_,C,he[2*ht],he[2*ht+1],Qe,qe)).length&&L.push(G[0],G[1]);return L},qf=function(c,h,m){var _=[c[0]-h[0],c[1]-h[1]],C=Math.sqrt(_[0]*_[0]+_[1]*_[1]),w=(C-m)/C;return w<0&&(w=1e-5),[h[0]+w*_[0],h[1]+w*_[1]]},Ir=function(c,h){var m=Dd(c,h);return Ma(m)},Ma=function(c){for(var h,m,_=c.length/2,C=1/0,w=1/0,E=-1/0,k=-1/0,L=0;L<_;L++)h=c[2*L],m=c[2*L+1],C=Math.min(C,h),E=Math.max(E,h),w=Math.min(w,m),k=Math.max(k,m);for(var G=2/(E-C),K=2/(k-w),le=0;le<_;le++)h=c[2*le]=c[2*le]*G,m=c[2*le+1]=c[2*le+1]*K,C=Math.min(C,h),E=Math.max(E,h),w=Math.min(w,m),k=Math.max(k,m);if(w<-1)for(var he=0;he<_;he++)m=c[2*he+1]=c[2*he+1]+(-1-w);return c},Dd=function(c,h){var m=1/c*2*Math.PI,_=c%2==0?Math.PI/2+m/2:Math.PI/2;_+=h;for(var w,C=new Array(2*c),E=0;E<c;E++)w=E*m+_,C[2*E]=Math.cos(w),C[2*E+1]=Math.sin(-w);return C},gf=function(c,h){return Math.min(c/4,h/4,8)},Pr=function(c,h){return Math.min(c/10,h/10,8)},$r=function(c,h){return{heightOffset:Math.min(15,.05*h),widthOffset:Math.min(100,.25*c),ctrlPtOffsetPct:.05}},cu=ti({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(c){return 1}}),qo={pageRank:function(c){for(var h=cu(c),m=h.dampingFactor,_=h.precision,C=h.iterations,w=h.weight,E=this._private.cy,k=this.byGroup(),L=k.nodes,G=k.edges,K=L.length,he=G.length,pe=new Array(K*K),Ie=new Array(K),Ne=(1-m)/K,ze=0;ze<K;ze++){for(var Qe=0;Qe<K;Qe++)pe[ze*K+Qe]=0;Ie[ze]=0}for(var ht=0;ht<he;ht++){var Lt=G[ht],kt=Lt.data("source"),mt=Lt.data("target");if(kt!==mt){var Ft=L.indexOfId(kt),Ct=L.indexOfId(mt),Ht=w(Lt);pe[Ct*K+Ft]+=Ht,Ie[Ft]+=Ht}}for(var et=1/K+Ne,Gt=0;Gt<K;Gt++)if(0===Ie[Gt])for(var Tt=0;Tt<K;Tt++)pe[Tt*K+Gt]=et;else for(var Yt=0;Yt<K;Yt++){var ln=Yt*K+Gt;pe[ln]=pe[ln]/Ie[Gt]+Ne}for(var Jn,Sn=new Array(K),Rn=new Array(K),En=0;En<K;En++)Sn[En]=1;for(var Yn=0;Yn<C;Yn++){for(var li=0;li<K;li++)Rn[li]=0;for(var bi=0;bi<K;bi++)for(var pi=0;pi<K;pi++)Rn[bi]+=pe[bi*K+pi]*Sn[pi];k_(Rn),Jn=Sn,Sn=Rn,Rn=Jn;for(var Mn=0,si=0;si<K;si++){var xi=Jn[si]-Sn[si];Mn+=xi*xi}if(Mn<_)break}return{rank:function(Br){return Br=E.collection(Br)[0],Sn[L.indexOf(Br)]}}}},kl=ti({root:null,weight:function(c){return 1},directed:!1,alpha:0}),Da={degreeCentralityNormalized:function(c){c=kl(c);var h=this.cy(),m=this.nodes(),_=m.length;if(c.directed){for(var G={},K={},le=0,he=0,pe=0;pe<_;pe++){var Ie=m[pe],Ne=Ie.id();c.root=Ie;var ze=this.degreeCentrality(c);le<ze.indegree&&(le=ze.indegree),he<ze.outdegree&&(he=ze.outdegree),G[Ne]=ze.indegree,K[Ne]=ze.outdegree}return{indegree:function(qe){return 0==le?0:(He(qe)&&(qe=h.filter(qe)),G[qe.id()]/le)},outdegree:function(qe){return 0===he?0:(He(qe)&&(qe=h.filter(qe)),K[qe.id()]/he)}}}for(var C={},w=0,E=0;E<_;E++){var k=m[E];c.root=k;var L=this.degreeCentrality(c);w<L.degree&&(w=L.degree),C[k.id()]=L.degree}return{degree:function(qe){return 0===w?0:(He(qe)&&(qe=h.filter(qe)),C[qe.id()]/w)}}},degreeCentrality:function(c){c=kl(c);var h=this.cy(),m=this,C=c.root,w=c.weight,E=c.directed,k=c.alpha;if(C=h.collection(C)[0],E){for(var he=C.connectedEdges(),pe=he.filter(function(kt){return kt.target().same(C)&&m.has(kt)}),Ie=he.filter(function(kt){return kt.source().same(C)&&m.has(kt)}),Ne=pe.length,ze=Ie.length,Qe=0,qe=0,ht=0;ht<pe.length;ht++)Qe+=w(pe[ht]);for(var Lt=0;Lt<Ie.length;Lt++)qe+=w(Ie[Lt]);return{indegree:Math.pow(Ne,1-k)*Math.pow(Qe,k),outdegree:Math.pow(ze,1-k)*Math.pow(qe,k)}}for(var L=C.connectedEdges().intersection(m),G=L.length,K=0,le=0;le<L.length;le++)K+=w(L[le]);return{degree:Math.pow(G,1-k)*Math.pow(K,k)}}};Da.dc=Da.degreeCentrality,Da.dcn=Da.degreeCentralityNormalised=Da.degreeCentralityNormalized;var uu=ti({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),Xl={closenessCentralityNormalized:function(c){for(var h=uu(c),m=h.harmonic,_=h.weight,C=h.directed,w=this.cy(),E={},k=0,L=this.nodes(),G=this.floydWarshall({weight:_,directed:C}),K=0;K<L.length;K++){for(var le=0,he=L[K],pe=0;pe<L.length;pe++)if(K!==pe){var Ie=G.distance(he,L[pe]);le+=m?1/Ie:Ie}m||(le=1/le),k<le&&(k=le),E[he.id()]=le}return{closeness:function(ze){return 0==k?0:(ze=He(ze)?w.filter(ze)[0].id():ze.id(),E[ze]/k)}}},closenessCentrality:function(c){var h=uu(c),m=h.root,_=h.weight,C=h.directed,w=h.harmonic;m=this.filter(m)[0];for(var E=this.dijkstra({root:m,weight:_,directed:C}),k=0,L=this.nodes(),G=0;G<L.length;G++){var K=L[G];if(!K.same(m)){var le=E.distanceTo(K);k+=w?1/le:le}}return w?k:1/k}};Xl.cc=Xl.closenessCentrality,Xl.ccn=Xl.closenessCentralityNormalised=Xl.closenessCentralityNormalized;var Ar=ti({weight:null,directed:!1}),Ss={betweennessCentrality:function(c){for(var h=Ar(c),m=h.directed,_=h.weight,C=null!=_,w=this.cy(),E=this.nodes(),k={},L={},G=0,K={set:function(qe,ht){L[qe]=ht,ht>G&&(G=ht)},get:function(qe){return L[qe]}},le=0;le<E.length;le++){var he=E[le],pe=he.id();k[pe]=m?he.outgoers().nodes():he.openNeighborhood().nodes(),K.set(pe,0)}for(var Ie=function(qe){for(var ht=E[qe].id(),Lt=[],kt={},mt={},Ft={},Ct=new q.default(function(pi,di){return Ft[pi]-Ft[di]}),Ht=0;Ht<E.length;Ht++){var Vt=E[Ht].id();kt[Vt]=[],mt[Vt]=0,Ft[Vt]=1/0}for(mt[ht]=1,Ft[ht]=0,Ct.push(ht);!Ct.empty();){var et=Ct.pop();if(Lt.push(et),C)for(var Gt=0;Gt<k[et].length;Gt++){var Yt,Tt=k[et][Gt],mn=w.getElementById(et);Yt=mn.edgesTo(Tt).length>0?mn.edgesTo(Tt)[0]:Tt.edgesTo(mn)[0];var ln=_(Yt);Tt=Tt.id(),Ft[Tt]>Ft[et]+ln&&(Ft[Tt]=Ft[et]+ln,Ct.nodes.indexOf(Tt)<0?Ct.push(Tt):Ct.updateItem(Tt),mt[Tt]=0,kt[Tt]=[]),Ft[Tt]==Ft[et]+ln&&(mt[Tt]=mt[Tt]+mt[et],kt[Tt].push(et))}else for(var Sn=0;Sn<k[et].length;Sn++){var Rn=k[et][Sn].id();Ft[Rn]==1/0&&(Ct.push(Rn),Ft[Rn]=Ft[et]+1),Ft[Rn]==Ft[et]+1&&(mt[Rn]=mt[Rn]+mt[et],kt[Rn].push(et))}}for(var Jn={},En=0;En<E.length;En++)Jn[E[En].id()]=0;for(;Lt.length>0;){for(var Yn=Lt.pop(),li=0;li<kt[Yn].length;li++){var bi=kt[Yn][li];Jn[bi]=Jn[bi]+mt[bi]/mt[Yn]*(1+Jn[Yn])}Yn!=E[qe].id()&&K.set(Yn,K.get(Yn)+Jn[Yn])}},Ne=0;Ne<E.length;Ne++)Ie(Ne);var ze={betweenness:function(qe){var ht=w.collection(qe).id();return K.get(ht)},betweennessNormalized:function(qe){if(0==G)return 0;var ht=w.collection(qe).id();return K.get(ht)/G}};return ze.betweennessNormalised=ze.betweennessNormalized,ze}};Ss.bc=Ss.betweennessCentrality;var ma=ti({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(f){return 1}]}),Xf=function(c,h){for(var m=0,_=0;_<h.length;_++)m+=h[_](c);return m},sh=function(c,h){for(var m,_=0;_<h;_++){m=0;for(var C=0;C<h;C++)m+=c[C*h+_];for(var w=0;w<h;w++)c[w*h+_]=c[w*h+_]/m}},il=function(c,h,m){for(var _=new Array(m*m),C=0;C<m;C++){for(var w=0;w<m;w++)_[C*m+w]=0;for(var E=0;E<m;E++)for(var k=0;k<m;k++)_[C*m+k]+=c[C*m+E]*h[E*m+k]}return _},Up=function(c,h,m){for(var _=c.slice(0),C=1;C<m;C++)c=il(c,_,h);return c},Yl=function(c,h,m){for(var _=new Array(h*h),C=0;C<h*h;C++)_[C]=Math.pow(c[C],m);return sh(_,h),_},Ws=function(c,h,m,_){for(var C=0;C<m;C++)if(Math.round(c[C]*Math.pow(10,_))/Math.pow(10,_)!=Math.round(h[C]*Math.pow(10,_))/Math.pow(10,_))return!1;return!0},Yf=function(c,h){for(var m=0;m<c.length;m++)if(!h[m]||c[m].id()!==h[m].id())return!1;return!0},vf=function(c){for(var h=this.nodes(),m=this.edges(),_=this.cy(),C=function(c){return ma(c)}(c),w={},E=0;E<h.length;E++)w[h[E].id()]=E;for(var K,k=h.length,L=k*k,G=new Array(L),le=0;le<L;le++)G[le]=0;for(var he=0;he<m.length;he++){var pe=m[he],Ie=w[pe.source().id()],Ne=w[pe.target().id()],ze=Xf(pe,C.attributes);G[Ie*k+Ne]+=ze,G[Ne*k+Ie]+=ze}(function(c,h,m){for(var _=0;_<h;_++)c[_*h+_]=m})(G,k,C.multFactor),sh(G,k);for(var Qe=!0,qe=0;Qe&&qe<C.maxIterations;)Qe=!1,K=Up(G,k,C.expandFactor),G=Yl(K,k,C.inflateFactor),Ws(G,K,L,4)||(Qe=!0),qe++;var ht=function(c,h,m,_){for(var C=[],w=0;w<h;w++){for(var E=[],k=0;k<h;k++)Math.round(1e3*c[w*h+k])/1e3>0&&E.push(m[k]);0!==E.length&&C.push(_.collection(E))}return C}(G,k,h,_);return ht=function(c){for(var h=0;h<c.length;h++)for(var m=0;m<c.length;m++)h!=m&&Yf(c[h],c[m])&&c.splice(m,1);return c}(ht),ht},Tc={markovClustering:vf,mcl:vf},Pg=function(c){return c},Kf=function(c,h){return Math.abs(h-c)},od=function(c,h,m){return c+Kf(h,m)},ad=function(c,h,m){return c+Math.pow(m-h,2)},Py=function(c){return Math.sqrt(c)},va=function(c,h,m){return Math.max(c,Kf(h,m))},Zf=function(c,h,m,_,C){for(var w=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Pg,E=_,G=0;G<c;G++)E=C(E,h(G),m(G));return w(E)},Qf={euclidean:function(c,h,m){return c>=2?Zf(c,h,m,0,ad,Py):Zf(c,h,m,0,od)},squaredEuclidean:function(c,h,m){return Zf(c,h,m,0,ad)},manhattan:function(c,h,m){return Zf(c,h,m,0,od)},max:function(c,h,m){return Zf(c,h,m,-1/0,va)}};function hu(f,c,h,m,_,C){var w;return w=ft(f)?f:Qf[f]||Qf.euclidean,0===c&&ft(f)?w(_,C):w(c,h,m,_,C)}Qf["squared-euclidean"]=Qf.squaredEuclidean,Qf.squaredeuclidean=Qf.squaredEuclidean;var Hp=ti({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),Jf=function(c){return Hp(c)},ep=function(c,h,m,_,C){var E="kMedoids"!==C?function(K){return m[K]}:function(K){return _[K](m)};return hu(c,_.length,E,function(le){return _[le](h)},m,h)},Oh=function(c,h,m){for(var _=m.length,C=new Array(_),w=new Array(_),E=new Array(h),k=null,L=0;L<_;L++)C[L]=c.min(m[L]).value,w[L]=c.max(m[L]).value;for(var G=0;G<h;G++){k=[];for(var K=0;K<_;K++)k[K]=Math.random()*(w[K]-C[K])+C[K];E[G]=k}return E},rl=function(c,h,m,_,C){for(var w=1/0,E=0,k=0;k<h.length;k++){var L=ep(m,c,h[k],_,C);L<w&&(w=L,E=k)}return E},ld=function(c,h,m){for(var _=[],C=null,w=0;w<h.length;w++)m[(C=h[w]).id()]===c&&_.push(C);return _},Zc=function(c,h,m){return Math.abs(h-c)<=m},Ld=function(c,h,m){for(var _=0;_<c.length;_++)for(var C=0;C<c[_].length;C++)if(Math.abs(c[_][C]-h[_][C])>m)return!1;return!0},bv=function(c,h,m){for(var _=0;_<m;_++)if(c===h[_])return!0;return!1},Rg=function(c,h){var m=new Array(h);if(c.length<50)for(var _=0;_<h;_++){for(var C=c[Math.floor(Math.random()*c.length)];bv(C,m,_);)C=c[Math.floor(Math.random()*c.length)];m[_]=C}else for(var w=0;w<h;w++)m[w]=c[Math.floor(Math.random()*c.length)];return m},kg=function(c,h,m){for(var _=0,C=0;C<h.length;C++)_+=ep("manhattan",h[C],c,m,"kMedoids");return _},wn=function(c,h,m,_,C){for(var w,E,k=0;k<h.length;k++)for(var L=0;L<c.length;L++)_[k][L]=Math.pow(m[k][L],C.m);for(var G=0;G<c.length;G++)for(var K=0;K<C.attributes.length;K++){w=0,E=0;for(var le=0;le<h.length;le++)w+=_[le][G]*C.attributes[K](h[le]),E+=_[le][G];c[G][K]=w/E}},oi=function(c,h,m,_,C){for(var w=0;w<c.length;w++)h[w]=c[w].slice();for(var E,k,L,G=2/(C.m-1),K=0;K<m.length;K++)for(var le=0;le<_.length;le++){E=0;for(var he=0;he<m.length;he++)k=ep(C.distance,_[le],m[K],C.attributes,"cmeans"),L=ep(C.distance,_[le],m[he],C.attributes,"cmeans"),E+=Math.pow(k/L,G);c[le][K]=1/E}},Rr=function(c){var C,w,E,k,L,h=this.cy(),m=this.nodes(),_=Jf(c);k=new Array(m.length);for(var G=0;G<m.length;G++)k[G]=new Array(_.k);E=new Array(m.length);for(var K=0;K<m.length;K++)E[K]=new Array(_.k);for(var le=0;le<m.length;le++){for(var he=0,pe=0;pe<_.k;pe++)E[le][pe]=Math.random(),he+=E[le][pe];for(var Ie=0;Ie<_.k;Ie++)E[le][Ie]=E[le][Ie]/he}w=new Array(_.k);for(var Ne=0;Ne<_.k;Ne++)w[Ne]=new Array(_.attributes.length);L=new Array(m.length);for(var ze=0;ze<m.length;ze++)L[ze]=new Array(_.k);for(var Qe=!0,qe=0;Qe&&qe<_.maxIterations;)Qe=!1,wn(w,m,E,L,_),oi(E,k,w,m,_),Ld(E,k,_.sensitivityThreshold)||(Qe=!0),qe++;return C=function(c,h,m,_){for(var C=new Array(m.k),w=0;w<C.length;w++)C[w]=[];for(var E,k,L=0;L<h.length;L++){E=-1/0,k=-1;for(var G=0;G<h[0].length;G++)h[L][G]>E&&(E=h[L][G],k=G);C[k].push(c[L])}for(var K=0;K<C.length;K++)C[K]=_.collection(C[K]);return C}(m,E,_,h),{clusters:C,degreeOfMembership:E}},zs={kMeans:function(c){var k,h=this.cy(),m=this.nodes(),_=null,C=Jf(c),w=new Array(C.k),E={};k=C.testMode?"number"==typeof C.testCentroids?Oh(m,C.k,C.attributes):"object"===se(C.testCentroids)?C.testCentroids:Oh(m,C.k,C.attributes):Oh(m,C.k,C.attributes);for(var L=!0,G=0;L&&G<C.maxIterations;){for(var K=0;K<m.length;K++)E[(_=m[K]).id()]=rl(_,k,C.distance,C.attributes,"kMeans");L=!1;for(var le=0;le<C.k;le++){var he=ld(le,m,E);if(0!==he.length){for(var pe=C.attributes.length,Ie=k[le],Ne=new Array(pe),ze=new Array(pe),Qe=0;Qe<pe;Qe++){ze[Qe]=0;for(var qe=0;qe<he.length;qe++)ze[Qe]+=C.attributes[Qe](_=he[qe]);Ne[Qe]=ze[Qe]/he.length,Zc(Ne[Qe],Ie[Qe],C.sensitivityThreshold)||(L=!0)}k[le]=Ne,w[le]=h.collection(he)}}G++}return w},kMedoids:function(c){var E,L,h=this.cy(),m=this.nodes(),_=null,C=Jf(c),w=new Array(C.k),k={},G=new Array(C.k);C.testMode?"number"==typeof C.testCentroids||(E="object"===se(C.testCentroids)?C.testCentroids:Rg(m,C.k)):E=Rg(m,C.k);for(var K=!0,le=0;K&&le<C.maxIterations;){for(var he=0;he<m.length;he++)k[(_=m[he]).id()]=rl(_,E,C.distance,C.attributes,"kMedoids");K=!1;for(var pe=0;pe<E.length;pe++){var Ie=ld(pe,m,k);if(0!==Ie.length){G[pe]=kg(E[pe],Ie,C.attributes);for(var Ne=0;Ne<Ie.length;Ne++)(L=kg(Ie[Ne],Ie,C.attributes))<G[pe]&&(G[pe]=L,E[pe]=Ie[Ne],K=!0);w[pe]=h.collection(Ie)}}le++}return w},fuzzyCMeans:Rr,fcm:Rr},Xo=ti({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),Kl={single:"min",complete:"max"},Cv=function(c,h,m,_,C){for(var k,w=0,E=1/0,L=C.attributes,G=function(Ct,Ht){return hu(C.distance,L.length,function(Vt){return L[Vt](Ct)},function(Vt){return L[Vt](Ht)},Ct,Ht)},K=0;K<c.length;K++){var le=c[K].key,he=m[le][_[le]];he<E&&(w=le,E=he)}if("threshold"===C.mode&&E>=C.threshold||"dendrogram"===C.mode&&1===c.length)return!1;var Ne,pe=h[w],Ie=h[_[w]];Ne="dendrogram"===C.mode?{left:pe,right:Ie,key:pe.key}:{value:pe.value.concat(Ie.value),key:pe.key},c[pe.index]=Ne,c.splice(Ie.index,1),h[pe.key]=Ne;for(var ze=0;ze<c.length;ze++){var Qe=c[ze];pe.key===Qe.key?k=1/0:"min"===C.linkage?(k=m[pe.key][Qe.key],m[pe.key][Qe.key]>m[Ie.key][Qe.key]&&(k=m[Ie.key][Qe.key])):"max"===C.linkage?(k=m[pe.key][Qe.key],m[pe.key][Qe.key]<m[Ie.key][Qe.key]&&(k=m[Ie.key][Qe.key])):k="mean"===C.linkage?(m[pe.key][Qe.key]*pe.size+m[Ie.key][Qe.key]*Ie.size)/(pe.size+Ie.size):"dendrogram"===C.mode?G(Qe.value,pe.value):G(Qe.value[0],pe.value[0]),m[pe.key][Qe.key]=m[Qe.key][pe.key]=k}for(var qe=0;qe<c.length;qe++){var ht=c[qe].key;if(_[ht]===pe.key||_[ht]===Ie.key){for(var Lt=ht,kt=0;kt<c.length;kt++){var mt=c[kt].key;m[ht][mt]<m[ht][Lt]&&(Lt=mt)}_[ht]=Lt}c[qe].index=qe}return pe.key=Ie.key=pe.index=Ie.index=null,!0},xv=function f(c,h,m){!c||(c.value?h.push(c.value):(c.left&&f(c.left,h),c.right&&f(c.right,h)))},Rd=function f(c,h){if(!c)return"";if(c.left&&c.right){var m=f(c.left,h),_=f(c.right,h),C=h.add({group:"nodes",data:{id:m+","+_}});return h.add({group:"edges",data:{source:m,target:C.id()}}),h.add({group:"edges",data:{source:_,target:C.id()}}),C.id()}return c.value?c.value.id():void 0},wv=function f(c,h,m){if(!c)return[];var _=[],C=[],w=[];return 0===h?(c.left&&xv(c.left,_),c.right&&xv(c.right,C),w=_.concat(C),[m.collection(w)]):1===h?c.value?[m.collection(c.value)]:(c.left&&xv(c.left,_),c.right&&xv(c.right,C),[m.collection(_),m.collection(C)]):c.value?[m.collection(c.value)]:(c.left&&(_=f(c.left,h-1,m)),c.right&&(C=f(c.right,h-1,m)),_.concat(C))},B_=function(c){for(var h=this.cy(),m=this.nodes(),_=function(c){var h=Xo(c),m=Kl[h.linkage];return null!=m&&(h.linkage=m),h}(c),C=_.attributes,w=function(qe,ht){return hu(_.distance,C.length,function(Lt){return C[Lt](qe)},function(Lt){return C[Lt](ht)},qe,ht)},E=[],k=[],L=[],G=[],K=0;K<m.length;K++){var le={value:"dendrogram"===_.mode?m[K]:[m[K]],key:K,index:K};E[K]=le,G[K]=le,k[K]=[],L[K]=0}for(var he=0;he<E.length;he++)for(var pe=0;pe<=he;pe++){var Ie;Ie="dendrogram"===_.mode?he===pe?1/0:w(E[he].value,E[pe].value):he===pe?1/0:w(E[he].value[0],E[pe].value[0]),k[he][pe]=Ie,k[pe][he]=Ie,Ie<k[he][L[he]]&&(L[he]=pe)}for(var Ne=Cv(E,G,k,L,_);Ne;)Ne=Cv(E,G,k,L,_);var ze;return"dendrogram"===_.mode?(ze=wv(E[0],_.dendrogramDepth,h),_.addDendrogram&&Rd(E[0],h)):(ze=new Array(E.length),E.forEach(function(Qe,qe){Qe.key=Qe.index=null,ze[qe]=h.collection(Qe.value)})),ze},Og={hierarchicalClustering:B_,hca:B_},Av=ti({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),ia=function(c,h,m,_){var C=function(E,k){return _[k](E)};return-hu(c,_.length,function(w){return C(h,w)},function(w){return C(m,w)},h,m)},Tm=function(c,h,m){for(var _=[],C=0;C<c;C++){for(var w=-1,E=-1/0,k=0;k<m.length;k++){var L=m[k];h[C*c+L]>E&&(w=L,E=h[C*c+L])}w>0&&_.push(w)}for(var G=0;G<m.length;G++)_[m[G]]=m[G];return _},z_=function(c){for(var h=this.cy(),m=this.nodes(),_=function(c){var h=c.damping,m=c.preference;.5<=h&&h<1||it("Damping must range on [0.5, 1).  Got: ".concat(h));var _=["median","mean","min","max"];return _.some(function(C){return C===m})||Ut(m)||it("Preference must be one of [".concat(_.map(function(C){return"'".concat(C,"'")}).join(", "),"] or a number.  Got: ").concat(m)),Av(c)}(c),C={},w=0;w<m.length;w++)C[m[w].id()]=w;var E,k,L,G,K,le,Ct;k=(E=m.length)*E,L=new Array(k);for(var he=0;he<k;he++)L[he]=-1/0;for(var pe=0;pe<E;pe++)for(var Ie=0;Ie<E;Ie++)pe!==Ie&&(L[pe*E+Ie]=ia(_.distance,m[pe],m[Ie],_.attributes));G=function(c,h){var m;return m="median"===h?function(c){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.length,C=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],w=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];arguments.length>3&&void 0!==arguments[3]&&!arguments[3]?(m<c.length&&c.splice(m,c.length-m),h>0&&c.splice(0,h)):c=c.slice(h,m);for(var E=0,k=c.length-1;k>=0;k--)w?isFinite(c[k])||(c[k]=-1/0,E++):c.splice(k,1);C&&c.sort(function(le,he){return le-he});var G=c.length,K=Math.floor(G/2);return G%2!=0?c[K+1+E]:(c[K-1+E]+c[K+E])/2}(c):"mean"===h?function(c){for(var m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.length,_=0,C=0,w=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;w<m;w++){var E=c[w];isFinite(E)&&(_+=E,C++)}return _/C}(c):"min"===h?function(c){for(var m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.length,_=1/0,C=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;C<m;C++){var w=c[C];isFinite(w)&&(_=Math.min(w,_))}return _}(c):"max"===h?function(c){for(var m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.length,_=-1/0,C=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;C<m;C++){var w=c[C];isFinite(w)&&(_=Math.max(w,_))}return _}(c):h,m}(L,_.preference);for(var Ne=0;Ne<E;Ne++)L[Ne*E+Ne]=G;K=new Array(k);for(var ze=0;ze<k;ze++)K[ze]=0;le=new Array(k);for(var Qe=0;Qe<k;Qe++)le[Qe]=0;for(var qe=new Array(E),ht=new Array(E),Lt=new Array(E),kt=0;kt<E;kt++)qe[kt]=0,ht[kt]=0,Lt[kt]=0;for(var mt=new Array(E*_.minIterations),Ft=0;Ft<mt.length;Ft++)mt[Ft]=0;for(Ct=0;Ct<_.maxIterations;Ct++){for(var Ht=0;Ht<E;Ht++){for(var Vt=-1/0,et=-1/0,Gt=-1,Tt=0,mn=0;mn<E;mn++)qe[mn]=K[Ht*E+mn],(Tt=le[Ht*E+mn]+L[Ht*E+mn])>=Vt?(et=Vt,Vt=Tt,Gt=mn):Tt>et&&(et=Tt);for(var Yt=0;Yt<E;Yt++)K[Ht*E+Yt]=(1-_.damping)*(L[Ht*E+Yt]-Vt)+_.damping*qe[Yt];K[Ht*E+Gt]=(1-_.damping)*(L[Ht*E+Gt]-et)+_.damping*qe[Gt]}for(var ln=0;ln<E;ln++){for(var Sn=0,Rn=0;Rn<E;Rn++)qe[Rn]=le[Rn*E+ln],ht[Rn]=Math.max(0,K[Rn*E+ln]),Sn+=ht[Rn];Sn-=ht[ln],ht[ln]=K[ln*E+ln],Sn+=ht[ln];for(var Jn=0;Jn<E;Jn++)le[Jn*E+ln]=(1-_.damping)*Math.min(0,Sn-ht[Jn])+_.damping*qe[Jn];le[ln*E+ln]=(1-_.damping)*(Sn-ht[ln])+_.damping*qe[ln]}for(var En=0,Yn=0;Yn<E;Yn++){var li=le[Yn*E+Yn]+K[Yn*E+Yn]>0?1:0;mt[Ct%_.minIterations*E+Yn]=li,En+=li}if(En>0&&(Ct>=_.minIterations-1||Ct==_.maxIterations-1)){for(var bi=0,pi=0;pi<E;pi++){Lt[pi]=0;for(var di=0;di<_.minIterations;di++)Lt[pi]+=mt[di*E+pi];(0===Lt[pi]||Lt[pi]===_.minIterations)&&bi++}if(bi===E)break}}for(var Mn=function(c,h,m){for(var _=[],C=0;C<c;C++)h[C*c+C]+m[C*c+C]>0&&_.push(C);return _}(E,K,le),si=function(c,h,m){for(var _=Tm(c,h,m),C=0;C<m.length;C++){for(var w=[],E=0;E<_.length;E++)_[E]===m[C]&&w.push(E);for(var k=-1,L=-1/0,G=0;G<w.length;G++){for(var K=0,le=0;le<w.length;le++)K+=h[w[le]*c+w[G]];K>L&&(k=G,L=K)}m[C]=w[k]}return Tm(c,h,m)}(E,L,Mn),xi={},ji=0;ji<Mn.length;ji++)xi[Mn[ji]]=[];for(var rr=0;rr<m.length;rr++){var Kr=si[C[m[rr].id()]];null!=Kr&&xi[Kr].push(m[rr])}for(var hr=new Array(Mn.length),nr=0;nr<Mn.length;nr++)hr[nr]=h.collection(xi[Mn[nr]]);return hr},tp={affinityPropagation:z_,ap:z_},Mm=ti({root:void 0,directed:!1}),_a={hierholzer:function(c){if(!bt(c)){var h=arguments;c={root:h[0],directed:h[1]}}var k,L,G,m=Mm(c),_=m.root,C=m.directed,w=this,E=!1;_&&(G=He(_)?this.filter(_)[0].id():_[0].id());var K={},le={};w.forEach(C?function(Qe){var qe=Qe.id();if(Qe.isNode()){var ht=Qe.indegree(!0),Lt=Qe.outdegree(!0),kt=ht-Lt,mt=Lt-ht;1==kt?k?E=!0:k=qe:1==mt?L?E=!0:L=qe:(mt>1||kt>1)&&(E=!0),K[qe]=[],Qe.outgoers().forEach(function(Ft){Ft.isEdge()&&K[qe].push(Ft.id())})}else le[qe]=[void 0,Qe.target().id()]}:function(Qe){var qe=Qe.id();Qe.isNode()?(Qe.degree(!0)%2&&(k?L?E=!0:L=qe:k=qe),K[qe]=[],Qe.connectedEdges().forEach(function(Lt){return K[qe].push(Lt.id())})):le[qe]=[Qe.source().id(),Qe.target().id()]});var he={found:!1,trail:void 0};if(E)return he;if(L&&k)if(C){if(G&&L!=G)return he;G=L}else{if(G&&L!=G&&k!=G)return he;G||(G=L)}else G||(G=w[0].id());var pe=function(qe){for(var kt,mt,Ft,ht=qe,Lt=[qe];K[ht].length;)kt=K[ht].shift(),mt=le[kt][0],ht!=(Ft=le[kt][1])?(K[Ft]=K[Ft].filter(function(Ct){return Ct!=kt}),ht=Ft):!C&&ht!=mt&&(K[mt]=K[mt].filter(function(Ct){return Ct!=kt}),ht=mt),Lt.unshift(kt),Lt.unshift(ht);return Lt},Ie=[],Ne=[];for(Ne=pe(G);1!=Ne.length;)0==K[Ne[0]].length?(Ie.unshift(w.getElementById(Ne.shift())),Ie.unshift(w.getElementById(Ne.shift()))):Ne=pe(Ne.shift()).concat(Ne);for(var ze in Ie.unshift(w.getElementById(Ne.shift())),K)if(K[ze].length)return he;return he.found=!0,he.trail=this.spawn(Ie,!0),he}},yf=function(){var c=this,h={},m=0,_=0,C=[],w=[],E={},L=function K(le,he,pe){le===pe&&(_+=1),h[he]={id:m,low:m++,cutVertex:!1};var Ne,ze,Qe,qe,Ie=c.getElementById(he).connectedEdges().intersection(c);0===Ie.size()?C.push(c.spawn(c.getElementById(he))):Ie.forEach(function(ht){Ne=ht.source().id(),ze=ht.target().id(),(Qe=Ne===he?ze:Ne)!==pe&&(qe=ht.id(),E[qe]||(E[qe]=!0,w.push({x:he,y:Qe,edge:ht})),Qe in h?h[he].low=Math.min(h[he].low,h[Qe].id):(K(le,Qe,he),h[he].low=Math.min(h[he].low,h[Qe].low),h[he].id<=h[Qe].low&&(h[he].cutVertex=!0,function(le,he){for(var pe=w.length-1,Ie=[],Ne=c.spawn();w[pe].x!=le||w[pe].y!=he;)Ie.push(w.pop().edge),pe--;Ie.push(w.pop().edge),Ie.forEach(function(ze){var Qe=ze.connectedNodes().intersection(c);Ne.merge(ze),Qe.forEach(function(qe){var ht=qe.id(),Lt=qe.connectedEdges().intersection(c);Ne.merge(qe),Ne.merge(h[ht].cutVertex?Lt.filter(function(kt){return kt.isLoop()}):Lt)})}),C.push(Ne)}(he,Qe))))})};c.forEach(function(K){if(K.isNode()){var le=K.id();le in h||(_=0,L(le,le),h[le].cutVertex=_>1)}});var G=Object.keys(h).filter(function(K){return h[K].cutVertex}).map(function(K){return c.getElementById(K)});return{cut:c.spawn(G),components:C}},np=function(){var c=this,h={},m=0,_=[],C=[],w=c.spawn(c),E=function k(L){if(C.push(L),h[L]={index:m,low:m++,explored:!1},c.getElementById(L).connectedEdges().intersection(c).forEach(function(Ie){var Ne=Ie.target().id();Ne!==L&&(Ne in h||k(Ne),h[Ne].explored||(h[L].low=Math.min(h[L].low,h[Ne].low)))}),h[L].index===h[L].low){for(var K=c.spawn();;){var le=C.pop();if(K.merge(c.getElementById(le)),h[le].low=h[L].index,h[le].explored=!0,le===L)break}var he=K.edgesWith(K),pe=K.merge(he);_.push(pe),w=w.difference(pe)}};return c.forEach(function(k){if(k.isNode()){var L=k.id();L in h||E(L)}}),{cut:w,components:_}},Dm={};[ds,Mg,zp,Dg,Ao,mv,Ey,qo,Da,Xl,Ss,Tc,zs,Og,tp,_a,{hopcroftTarjanBiconnected:yf,htbc:yf,htb:yf,hopcroftTarjanBiconnectedComponents:yf},{tarjanStronglyConnected:np,tsc:np,tscc:np,tarjanStronglyConnectedComponents:np}].forEach(function(f){tr(Dm,f)});var ba=function f(c){if(!(this instanceof f))return new f(c);this.id="Thenable/1.0.7",this.state=0,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},"function"==typeof c&&c.call(this,this.fulfill.bind(this),this.reject.bind(this))};ba.prototype={fulfill:function(c){return ip(this,1,"fulfillValue",c)},reject:function(c){return ip(this,2,"rejectReason",c)},then:function(c,h){var m=this,_=new ba;return m.onFulfilled.push(Fy(c,_,"fulfill")),m.onRejected.push(Fy(h,_,"reject")),Oy(m),_.proxy}};var ip=function(c,h,m,_){return 0===c.state&&(c.state=h,c[m]=_,Oy(c)),c},Oy=function(c){1===c.state?Lm(c,"onFulfilled",c.fulfillValue):2===c.state&&Lm(c,"onRejected",c.rejectReason)},Lm=function(c,h,m){if(0!==c[h].length){var _=c[h];c[h]=[];var C=function(){for(var E=0;E<_.length;E++)_[E](m)};"function"==typeof setImmediate?setImmediate(C):setTimeout(C,0)}},Fy=function(c,h,m){return function(_){if("function"!=typeof c)h[m].call(h,_);else{var C;try{C=c(_)}catch(w){return void h.reject(w)}Ev(h,C)}}},Ev=function f(c,h){if(c!==h&&c.proxy!==h){var m;if("object"===se(h)&&null!==h||"function"==typeof h)try{m=h.then}catch(C){return void c.reject(C)}if("function"!=typeof m)c.fulfill(h);else{var _=!1;try{m.call(h,function(C){_||(_=!0,C===h?c.reject(new TypeError("circular thenable chain")):f(c,C))},function(C){_||(_=!0,c.reject(C))})}catch(C){_||c.reject(C)}}}else c.reject(new TypeError("cannot resolve promise with itself"))};ba.all=function(f){return new ba(function(c,h){for(var m=new Array(f.length),_=0,C=function(k,L){m[k]=L,++_===f.length&&c(m)},w=0;w<f.length;w++)!function(E){var k=f[E];null!=k&&null!=k.then?k.then(function(K){C(E,K)},function(K){h(K)}):C(E,k)}(w)})},ba.resolve=function(f){return new ba(function(c,h){c(f)})},ba.reject=function(f){return new ba(function(c,h){h(f)})};var ra=typeof Promise<"u"?Promise:ba,Bg=function(c,h,m){var _=Cn(c),C=!_,w=this._private=tr({duration:1e3},h,m);if(w.target=c,w.style=w.style||w.css,w.started=!1,w.playing=!1,w.hooked=!1,w.applying=!1,w.progress=0,w.completes=[],w.frames=[],w.complete&&ft(w.complete)&&w.completes.push(w.complete),C){var E=c.position();w.startPosition=w.startPosition||{x:E.x,y:E.y},w.startStyle=w.startStyle||c.cy().style().getAnimationStartStyle(c,w.style)}if(_){var k=c.pan();w.startPan={x:k.x,y:k.y},w.startZoom=c.zoom()}this.length=1,this[0]=this},Wp=Bg.prototype;tr(Wp,{instanceString:function(){return"animation"},hook:function(){var c=this._private;if(!c.hooked){var m=c.target._private.animation;(c.queue?m.queue:m.current).push(this),nn(c.target)&&c.target.cy().addToAnimationPool(c.target),c.hooked=!0}return this},play:function(){var c=this._private;return 1===c.progress&&(c.progress=0),c.playing=!0,c.started=!1,c.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var c=this._private;return c.applying=!0,c.started=!1,c.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var c=this._private;return c.playing=!1,c.started=!1,this},stop:function(){var c=this._private;return c.playing=!1,c.started=!1,c.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(c){var h=this._private;return void 0===c?h.progress*h.duration:this.progress(c/h.duration)},progress:function(c){var h=this._private,m=h.playing;return void 0===c?h.progress:(m&&this.pause(),h.progress=c,h.started=!1,m&&this.play(),this)},completed:function(){return 1===this._private.progress},reverse:function(){var c=this._private,h=c.playing;h&&this.pause(),c.progress=1-c.progress,c.started=!1;var m=function(L,G){var K=c[L];null!=K&&(c[L]=c[G],c[G]=K)};if(m("zoom","startZoom"),m("pan","startPan"),m("position","startPosition"),c.style)for(var _=0;_<c.style.length;_++){var C=c.style[_],w=C.name,E=c.startStyle[w];c.startStyle[w]=C,c.style[_]=E}return h&&this.play(),this},promise:function(c){var m,h=this._private;return m="frame"===c?h.frames:h.completes,new ra(function(_,C){m.push(function(){_()})})}}),Wp.complete=Wp.completed,Wp.run=Wp.play,Wp.running=Wp.playing;var cd={data:function(c){return c=tr({},{field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(_){},beforeSet:function(_,C){},onSet:function(_){},canSet:function(_){return!0}},c),function(_,C){var w=c,E=this,k=void 0!==E.length,L=k?E:[E],G=k?E[0]:E;if(He(_)){var he,le=-1!==_.indexOf(".")&&oe.default(_);if(w.allowGetting&&void 0===C)return G&&(w.beforeGet(G),he=le&&void 0===G._private[w.field][_]?te.default(G._private[w.field],le):G._private[w.field][_]),he;if(w.allowSetting&&void 0!==C&&!w.immutableKeys[_]){var Ie=xe({},_,C);w.beforeSet(E,Ie);for(var Ne=0,ze=L.length;Ne<ze;Ne++){var Qe=L[Ne];w.canSet(Qe)&&(le&&void 0===G._private[w.field][_]?J.default(Qe._private[w.field],le,C):Qe._private[w.field][_]=C)}w.updateStyle&&E.updateStyle(),w.onSet(E),w.settingTriggersEvent&&E[w.triggerFnName](w.settingEvent)}}else if(w.allowSetting&&bt(_)){var ht,Lt,qe=_,kt=Object.keys(qe);w.beforeSet(E,qe);for(var mt=0;mt<kt.length;mt++)if(Lt=qe[ht=kt[mt]],!w.immutableKeys[ht])for(var Ct=0;Ct<L.length;Ct++){var Ht=L[Ct];w.canSet(Ht)&&(Ht._private[w.field][ht]=Lt)}w.updateStyle&&E.updateStyle(),w.onSet(E),w.settingTriggersEvent&&E[w.triggerFnName](w.settingEvent)}else if(w.allowBinding&&ft(_))E.on(w.bindingEvent,_);else if(w.allowGetting&&void 0===_){var et;return G&&(w.beforeGet(G),et=G._private[w.field]),et}return E}},removeData:function(c){return c=tr({},{field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}},c),function(_){var C=c,w=this,k=void 0!==w.length?w:[w];if(He(_)){for(var L=_.split(/\s+/),G=L.length,K=0;K<G;K++){var le=L[K];if(!be(le)&&!C.immutableKeys[le])for(var pe=0,Ie=k.length;pe<Ie;pe++)k[pe]._private[C.field][le]=void 0}C.triggerEvent&&w[C.triggerFnName](C.event)}else if(void 0===_){for(var Ne=0,ze=k.length;Ne<ze;Ne++)for(var Qe=k[Ne]._private[C.field],qe=Object.keys(Qe),ht=0;ht<qe.length;ht++){var Lt=qe[ht];!C.immutableKeys[Lt]&&(Qe[Lt]=void 0)}C.triggerEvent&&w[C.triggerFnName](C.event)}return w}}},V_={eventAliasesOn:function(c){var h=c;h.addListener=h.listen=h.bind=h.on,h.unlisten=h.unbind=h.off=h.removeListener,h.trigger=h.emit,h.pon=h.promiseOn=function(m,_){var C=this,w=Array.prototype.slice.call(arguments,0);return new ra(function(E,k){var G=w.concat([function(he){C.off.apply(C,K),E(he)}]),K=G.concat([]);C.on.apply(C,G)})}}},ms={};[{animated:function(){return function(){var h=this,_=void 0!==h.length?h:[h];if(!(this._private.cy||this).styleEnabled())return!1;var w=_[0];return w?w._private.animation.current.length>0:void 0}},clearQueue:function(){return function(){var h=this,_=void 0!==h.length?h:[h];if(!(this._private.cy||this).styleEnabled())return this;for(var w=0;w<_.length;w++)_[w]._private.animation.queue=[];return this}},delay:function(){return function(h,m){return(this._private.cy||this).styleEnabled()?this.animate({delay:h,duration:h,complete:m}):this}},delayAnimation:function(){return function(h,m){return(this._private.cy||this).styleEnabled()?this.animation({delay:h,duration:h,complete:m}):this}},animation:function(){return function(h,m){var _=this,C=void 0!==_.length,w=C?_:[_],E=this._private.cy||this,k=!C,L=!k;if(!E.styleEnabled())return this;var G=E.style();if(h=tr({},h,m),0===Object.keys(h).length)return new Bg(w[0],h);switch(void 0===h.duration&&(h.duration=400),h.duration){case"slow":h.duration=600;break;case"fast":h.duration=200}if(L&&(h.style=G.getPropsList(h.style||h.css),h.css=void 0),L&&null!=h.renderedPosition){var le=h.renderedPosition,he=E.pan(),pe=E.zoom();h.position=Ic(le,pe,he)}if(k&&null!=h.panBy){var Ie=h.panBy,Ne=E.pan();h.pan={x:Ne.x+Ie.x,y:Ne.y+Ie.y}}var ze=h.center||h.centre;if(k&&null!=ze){var Qe=E.getCenterPan(ze.eles,h.zoom);null!=Qe&&(h.pan=Qe)}if(k&&null!=h.fit){var qe=h.fit,ht=E.getFitViewport(qe.eles||qe.boundingBox,qe.padding);null!=ht&&(h.pan=ht.pan,h.zoom=ht.zoom)}if(k&&bt(h.zoom)){var Lt=E.getZoomedViewport(h.zoom);null!=Lt?(Lt.zoomed&&(h.zoom=Lt.zoom),Lt.panned&&(h.pan=Lt.pan)):h.zoom=null}return new Bg(w[0],h)}},animate:function(){return function(h,m){var _=this,w=void 0!==_.length?_:[_];if(!(this._private.cy||this).styleEnabled())return this;m&&(h=tr({},h,m));for(var k=0;k<w.length;k++){var L=w[k],G=L.animated()&&(void 0===h.queue||h.queue);L.animation(h,G?{queue:!0}:void 0).play()}return this}},stop:function(){return function(h,m){var _=this,w=void 0!==_.length?_:[_],E=this._private.cy||this;if(!E.styleEnabled())return this;for(var k=0;k<w.length;k++){for(var G=w[k]._private,K=G.animation.current,le=0;le<K.length;le++)m&&(K[le]._private.duration=0);h&&(G.animation.queue=[]),m||(G.animation.current=[])}return E.notify("draw"),this}}},cd,V_].forEach(function(f){tr(ms,f)});var pl={animate:ms.animate(),animation:ms.animation(),animated:ms.animated(),clearQueue:ms.clearQueue(),delay:ms.delay(),delayAnimation:ms.delayAnimation(),stop:ms.stop()},Mc={classes:function(c){var h=this;if(void 0===c){var m=[];return h[0]._private.classes.forEach(function(pe){return m.push(pe)}),m}gt(c)||(c=(c||"").match(/\S+/g)||[]);for(var _=[],C=new us(c),w=0;w<h.length;w++){for(var E=h[w],k=E._private,L=k.classes,G=!1,K=0;K<c.length;K++)if(!L.has(c[K])){G=!0;break}G||(G=L.size!==c.length),G&&(k.classes=C,_.push(E))}return _.length>0&&this.spawn(_).updateStyle().emit("class"),h},addClass:function(c){return this.toggleClass(c,!0)},hasClass:function(c){var h=this[0];return null!=h&&h._private.classes.has(c)},toggleClass:function(c,h){gt(c)||(c=c.match(/\S+/g)||[]);for(var m=this,_=void 0===h,C=[],w=0,E=m.length;w<E;w++)for(var k=m[w],L=k._private.classes,G=!1,K=0;K<c.length;K++){var le=c[K],he=L.has(le),pe=!1;h||_&&!he?(L.add(le),pe=!0):(!h||_&&he)&&(L.delete(le),pe=!0),!G&&pe&&(C.push(k),G=!0)}return C.length>0&&this.spawn(C).updateStyle().emit("class"),m},removeClass:function(c){return this.toggleClass(c,!1)},flashClass:function(c,h){var m=this;if(null==h)h=250;else if(0===h)return m;return m.addClass(c),setTimeout(function(){m.removeClass(c)},h),m}};Mc.className=Mc.classNames=Mc.classes;var vo={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:"\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'",number:De,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};vo.variable="(?:[\\w-.]|(?:\\\\"+vo.metaChar+"))+",vo.className="(?:[\\w-]|(?:\\\\"+vo.metaChar+"))+",vo.value=vo.string+"|"+vo.number,vo.id=vo.variable,function(){var f,c,h;for(f=vo.comparatorOp.split("|"),h=0;h<f.length;h++)vo.comparatorOp+="|@"+(c=f[h]);for(f=vo.comparatorOp.split("|"),h=0;h<f.length;h++)!((c=f[h]).indexOf("!")>=0)&&"="!==c&&(vo.comparatorOp+="|\\!"+c)}();var $s=[{selector:":selected",matches:function(c){return c.selected()}},{selector:":unselected",matches:function(c){return!c.selected()}},{selector:":selectable",matches:function(c){return c.selectable()}},{selector:":unselectable",matches:function(c){return!c.selectable()}},{selector:":locked",matches:function(c){return c.locked()}},{selector:":unlocked",matches:function(c){return!c.locked()}},{selector:":visible",matches:function(c){return c.visible()}},{selector:":hidden",matches:function(c){return!c.visible()}},{selector:":transparent",matches:function(c){return c.transparent()}},{selector:":grabbed",matches:function(c){return c.grabbed()}},{selector:":free",matches:function(c){return!c.grabbed()}},{selector:":removed",matches:function(c){return c.removed()}},{selector:":inside",matches:function(c){return!c.removed()}},{selector:":grabbable",matches:function(c){return c.grabbable()}},{selector:":ungrabbable",matches:function(c){return!c.grabbable()}},{selector:":animated",matches:function(c){return c.animated()}},{selector:":unanimated",matches:function(c){return!c.animated()}},{selector:":parent",matches:function(c){return c.isParent()}},{selector:":childless",matches:function(c){return c.isChildless()}},{selector:":child",matches:function(c){return c.isChild()}},{selector:":orphan",matches:function(c){return c.isOrphan()}},{selector:":nonorphan",matches:function(c){return c.isChild()}},{selector:":compound",matches:function(c){return c.isNode()?c.isParent():c.source().isParent()||c.target().isParent()}},{selector:":loop",matches:function(c){return c.isLoop()}},{selector:":simple",matches:function(c){return c.isSimple()}},{selector:":active",matches:function(c){return c.active()}},{selector:":inactive",matches:function(c){return!c.active()}},{selector:":backgrounding",matches:function(c){return c.backgrounding()}},{selector:":nonbackgrounding",matches:function(c){return!c.backgrounding()}}].sort(function(f,c){return function(c,h){return-1*Cs(c,h)}(f.selector,c.selector)}),Wr=function(){for(var c,f={},h=0;h<$s.length;h++)f[(c=$s[h]).selector]=c.matches;return f}(),es="("+$s.map(function(f){return f.selector}).join("|")+")",os=function(c){return c.replace(new RegExp("\\\\("+vo.metaChar+")","g"),function(h,m){return m})},Dc=function(c,h,m){c[c.length-1]=m},oh=[{name:"group",query:!0,regex:"("+vo.group+")",populate:function(c,h,m){var C=Oe(m,1)[0];h.checks.push({type:0,value:"*"===C?C:C+"s"})}},{name:"state",query:!0,regex:es,populate:function(c,h,m){var _=Oe(m,1);h.checks.push({type:7,value:_[0]})}},{name:"id",query:!0,regex:"\\#("+vo.id+")",populate:function(c,h,m){var _=Oe(m,1);h.checks.push({type:8,value:os(_[0])})}},{name:"className",query:!0,regex:"\\.("+vo.className+")",populate:function(c,h,m){var _=Oe(m,1);h.checks.push({type:9,value:os(_[0])})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+vo.variable+")\\s*\\]",populate:function(c,h,m){var _=Oe(m,1);h.checks.push({type:4,field:os(_[0])})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+vo.variable+")\\s*("+vo.comparatorOp+")\\s*("+vo.value+")\\s*\\]",populate:function(c,h,m){var _=Oe(m,3),C=_[0],w=_[1],E=_[2];E=null!=new RegExp("^"+vo.string+"$").exec(E)?E.substring(1,E.length-1):parseFloat(E),h.checks.push({type:3,field:os(C),operator:w,value:E})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+vo.boolOp+")\\s*("+vo.variable+")\\s*\\]",populate:function(c,h,m){var _=Oe(m,2),C=_[0];h.checks.push({type:5,field:os(_[1]),operator:C})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+vo.meta+")\\s*("+vo.comparatorOp+")\\s*("+vo.number+")\\s*\\]\\]",populate:function(c,h,m){var _=Oe(m,3),w=_[1],E=_[2];h.checks.push({type:6,field:os(_[0]),operator:w,value:parseFloat(E)})}},{name:"nextQuery",separator:!0,regex:vo.separator,populate:function(c,h){var m=c.currentSubject,_=c.edgeCount,C=c.compoundCount,w=c[c.length-1];return null!=m&&(w.subject=m,c.currentSubject=null),w.edgeCount=_,w.compoundCount=C,c.edgeCount=0,c.compoundCount=0,c[c.length++]={checks:[]}}},{name:"directedEdge",separator:!0,regex:vo.directedEdge,populate:function(c,h){if(null==c.currentSubject){var m={checks:[]},C={checks:[]};return m.checks.push({type:11,source:h,target:C}),Dc(c,0,m),c.edgeCount++,C}var w={checks:[]},k={checks:[]};return w.checks.push({type:12,source:h,target:k}),Dc(c,0,w),c.edgeCount++,k}},{name:"undirectedEdge",separator:!0,regex:vo.undirectedEdge,populate:function(c,h){if(null==c.currentSubject){var m={checks:[]},C={checks:[]};return m.checks.push({type:10,nodes:[h,C]}),Dc(c,0,m),c.edgeCount++,C}var w={checks:[]},k={checks:[]};return w.checks.push({type:14,node:h,neighbor:k}),Dc(c,0,w),k}},{name:"child",separator:!0,regex:vo.child,populate:function(c,h){if(null==c.currentSubject){var m={checks:[]},_={checks:[]};return m.checks.push({type:15,parent:c[c.length-1],child:_}),Dc(c,0,m),c.compoundCount++,_}if(c.currentSubject===h){var w={checks:[]},k={checks:[]},L={checks:[]},G={checks:[]},K={checks:[]};return w.checks.push({type:19,left:c[c.length-1],right:k,subject:L}),L.checks=h.checks,h.checks=[{type:20}],K.checks.push({type:20}),k.checks.push({type:17,parent:K,child:G}),Dc(c,0,w),c.currentSubject=L,c.compoundCount++,G}var le={checks:[]},he={checks:[]},pe=[{type:17,parent:le,child:he}];return le.checks=h.checks,h.checks=pe,c.compoundCount++,he}},{name:"descendant",separator:!0,regex:vo.descendant,populate:function(c,h){if(null==c.currentSubject){var m={checks:[]},_={checks:[]};return m.checks.push({type:16,ancestor:c[c.length-1],descendant:_}),Dc(c,0,m),c.compoundCount++,_}if(c.currentSubject===h){var w={checks:[]},k={checks:[]},L={checks:[]},G={checks:[]},K={checks:[]};return w.checks.push({type:19,left:c[c.length-1],right:k,subject:L}),L.checks=h.checks,h.checks=[{type:20}],K.checks.push({type:20}),k.checks.push({type:18,ancestor:K,descendant:G}),Dc(c,0,w),c.currentSubject=L,c.compoundCount++,G}var le={checks:[]},he={checks:[]},pe=[{type:18,ancestor:le,descendant:he}];return le.checks=h.checks,h.checks=pe,c.compoundCount++,he}},{name:"subject",modifier:!0,regex:vo.subject,populate:function(c,h){if(null!=c.currentSubject&&c.currentSubject!==h)return de("Redefinition of subject in selector `"+c.toString()+"`"),!1;c.currentSubject=h;var _=c[c.length-1].checks[0],C=null==_?null:_.type;11===C?_.type=13:10===C&&(_.type=14,_.node=_.nodes[1],_.neighbor=_.nodes[0],_.nodes=null)}}];oh.forEach(function(f){return f.regexObj=new RegExp("^"+f.regex)});var jp=function(c){for(var h,m,_,C=0;C<oh.length;C++){var w=oh[C],E=w.name,k=c.match(w.regexObj);if(null!=k){m=k,h=w,_=E,c=c.substring(k[0].length);break}}return{expr:h,match:m,name:_,remaining:c}},Qc={parse:function(c){var h=this,m=h.inputText=c,_=h[0]={checks:[]};for(h.length=1,m=function(c){var h=c.match(/^\s+/);return h&&(c=c.substring(h[0].length)),c}(m);;){var C=jp(m);if(null==C.expr)return de("The selector `"+c+"`is invalid"),!1;var w=C.match.slice(1),E=C.expr.populate(h,_,w);if(!1===E)return!1;if(null!=E&&(_=E),(m=C.remaining).match(/^\s*$/))break}var k=h[h.length-1];null!=h.currentSubject&&(k.subject=h.currentSubject),k.edgeCount=h.edgeCount,k.compoundCount=h.compoundCount;for(var L=0;L<h.length;L++){var G=h[L];if(G.compoundCount>0&&G.edgeCount>0)return de("The selector `"+c+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(G.edgeCount>1)return de("The selector `"+c+"` is invalid because it uses multiple edge selectors"),!1;1===G.edgeCount&&de("The selector `"+c+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},toString:function(){if(null!=this.toStringCache)return this.toStringCache;for(var c=function(G){return G??""},h=function(G){return He(G)?'"'+G+'"':c(G)},m=function(G){return" "+G+" "},C=function(G,K){return G.checks.reduce(function(le,he,pe){return le+(K===G&&0===pe?"$":"")+function(G,K){var he=G.value;switch(G.type){case 0:var pe=c(he);return pe.substring(0,pe.length-1);case 3:return"["+G.field+m(c(G.operator))+h(he)+"]";case 5:var Qe=G.field;return"["+c(G.operator)+Qe+"]";case 4:return"["+G.field+"]";case 6:return"[["+G.field+m(c(G.operator))+h(he)+"]]";case 7:return he;case 8:return"#"+he;case 9:return"."+he;case 17:case 15:return C(G.parent,K)+m(">")+C(G.child,K);case 18:case 16:return C(G.ancestor,K)+" "+C(G.descendant,K);case 19:var kt=C(G.left,K),mt=C(G.subject,K),Ft=C(G.right,K);return kt+(kt.length>0?" ":"")+mt+Ft;case 20:return""}}(he,K)},"")},w="",E=0;E<this.length;E++){var k=this[E];w+=C(k,k.subject),this.length>1&&E<this.length-1&&(w+=", ")}return this.toStringCache=w,w}},mi=function(c,h,m){var _,k,L,C=He(c),w=Ut(c),E=He(m),G=!1,K=!1,le=!1;switch(h.indexOf("!")>=0&&(h=h.replace("!",""),K=!0),h.indexOf("@")>=0&&(h=h.replace("@",""),G=!0),(C||E||G)&&(k=C||w?""+c:"",L=""+m),G&&(c=k=k.toLowerCase(),m=L=L.toLowerCase()),h){case"*=":_=k.indexOf(L)>=0;break;case"$=":_=k.indexOf(L,k.length-L.length)>=0;break;case"^=":_=0===k.indexOf(L);break;case"=":_=c===m;break;case">":le=!0,_=c>m;break;case">=":le=!0,_=c>=m;break;case"<":le=!0,_=c<m;break;case"<=":le=!0,_=c<=m;break;default:_=!1}return K&&(null!=c||!le)&&(_=!_),_},At=function(c,h){return c.data(h)},ko=[],Io=function(c,h){return c.checks.every(function(m){return ko[m.type](m,h)})};ko[0]=function(f,c){var h=f.value;return"*"===h||h===c.group()},ko[7]=function(f,c){return function(c,h){return Wr[c](h)}(f.value,c)},ko[8]=function(f,c){var h=f.value;return c.id()===h},ko[9]=function(f,c){return c.hasClass(f.value)},ko[6]=function(f,c){var m=f.operator,_=f.value;return mi(function(c,h){return c[h]()}(c,f.field),m,_)},ko[3]=function(f,c){var m=f.operator,_=f.value;return mi(At(c,f.field),m,_)},ko[5]=function(f,c){var m=f.operator;return function(c,h){switch(h){case"?":return!!c;case"!":return!c;case"^":return void 0===c}}(At(c,f.field),m)},ko[4]=function(f,c){return function(c){return void 0!==c}(At(c,f.field))},ko[10]=function(f,c){var h=f.nodes[0],m=f.nodes[1],_=c.source(),C=c.target();return Io(h,_)&&Io(m,C)||Io(m,_)&&Io(h,C)},ko[14]=function(f,c){return Io(f.node,c)&&c.neighborhood().some(function(h){return h.isNode()&&Io(f.neighbor,h)})},ko[11]=function(f,c){return Io(f.source,c.source())&&Io(f.target,c.target())},ko[12]=function(f,c){return Io(f.source,c)&&c.outgoers().some(function(h){return h.isNode()&&Io(f.target,h)})},ko[13]=function(f,c){return Io(f.target,c)&&c.incomers().some(function(h){return h.isNode()&&Io(f.source,h)})},ko[15]=function(f,c){return Io(f.child,c)&&Io(f.parent,c.parent())},ko[17]=function(f,c){return Io(f.parent,c)&&c.children().some(function(h){return Io(f.child,h)})},ko[16]=function(f,c){return Io(f.descendant,c)&&c.ancestors().some(function(h){return Io(f.ancestor,h)})},ko[18]=function(f,c){return Io(f.ancestor,c)&&c.descendants().some(function(h){return Io(f.descendant,h)})},ko[19]=function(f,c){return Io(f.subject,c)&&Io(f.left,c)&&Io(f.right,c)},ko[20]=function(){return!0},ko[1]=function(f,c){return f.value.has(c)},ko[2]=function(f,c){return(0,f.value)(c)};var $p={matches:function(c){for(var m=0;m<this.length;m++)if(Io(this[m],c))return!0;return!1},filter:function(c){var h=this;if(1===h.length&&1===h[0].checks.length&&8===h[0].checks[0].type)return c.getElementById(h[0].checks[0].value).collection();var m=function(C){for(var w=0;w<h.length;w++)if(Io(h[w],C))return!0;return!1};return null==h.text()&&(m=function(){return!0}),c.filter(m)}},rp=function(c){this.inputText=c,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,null==c||He(c)&&c.match(/^\s*$/)||(nn(c)?this.addQuery({checks:[{type:1,value:c.collection()}]}):ft(c)?this.addQuery({checks:[{type:2,value:c}]}):He(c)?this.parse(c)||(this.invalid=!0):it("A selector must be created from a string; found "))},br=rp.prototype;[Qc,$p].forEach(function(f){return tr(br,f)}),br.text=function(){return this.inputText},br.size=function(){return this.length},br.eq=function(f){return this[f]},br.sameText=function(f){return!this.invalid&&!f.invalid&&this.text()===f.text()},br.addQuery=function(f){this[this.length++]=f},br.selector=br.toString;var Ol={allAre:function(c){var h=new rp(c);return this.every(function(m){return h.matches(m)})},is:function(c){var h=new rp(c);return this.some(function(m){return h.matches(m)})},some:function(c,h){for(var m=0;m<this.length;m++)if(h?c.apply(h,[this[m],m,this]):c(this[m],m,this))return!0;return!1},every:function(c,h){for(var m=0;m<this.length;m++)if(!(h?c.apply(h,[this[m],m,this]):c(this[m],m,this)))return!1;return!0},same:function(c){if(this===c)return!0;c=this.cy().collection(c);var h=this.length;return h===c.length&&(1===h?this[0]===c[0]:this.every(function(_){return c.hasElementWithId(_.id())}))},anySame:function(c){return c=this.cy().collection(c),this.some(function(h){return c.hasElementWithId(h.id())})},allAreNeighbors:function(c){c=this.cy().collection(c);var h=this.neighborhood();return c.every(function(m){return h.hasElementWithId(m.id())})},contains:function(c){c=this.cy().collection(c);var h=this;return c.every(function(m){return h.hasElementWithId(m.id())})}};Ol.allAreNeighbours=Ol.allAreNeighbors,Ol.has=Ol.contains,Ol.equal=Ol.equals=Ol.same;var Fh,sp,Ca=function(c,h){return function(_,C,w,E){var G,k=_,L=this;if(null==k?G="":nn(k)&&1===k.length&&(G=k.id()),1===L.length&&G){var K=L[0]._private,le=K.traversalCache=K.traversalCache||{},he=le[h]=le[h]||[],pe=wc(G);return he[pe]||(he[pe]=c.call(L,_,C,w,E))}return c.call(L,_,C,w,E)}},Oo={parent:function(c){var h=[];if(1===this.length){var m=this[0]._private.parent;if(m)return m}for(var _=0;_<this.length;_++){var w=this[_]._private.parent;w&&h.push(w)}return this.spawn(h,!0).filter(c)},parents:function(c){for(var h=[],m=this.parent();m.nonempty();){for(var _=0;_<m.length;_++)h.push(m[_]);m=m.parent()}return this.spawn(h,!0).filter(c)},commonAncestors:function(c){for(var h,m=0;m<this.length;m++){var C=this[m].parents();h=(h=h||C).intersect(C)}return h.filter(c)},orphans:function(c){return this.stdFilter(function(h){return h.isOrphan()}).filter(c)},nonorphans:function(c){return this.stdFilter(function(h){return h.isChild()}).filter(c)},children:Ca(function(f){for(var c=[],h=0;h<this.length;h++)for(var _=this[h]._private.children,C=0;C<_.length;C++)c.push(_[C]);return this.spawn(c,!0).filter(f)},"children"),siblings:function(c){return this.parent().children().not(this).filter(c)},isParent:function(){var c=this[0];if(c)return c.isNode()&&0!==c._private.children.length},isChildless:function(){var c=this[0];if(c)return c.isNode()&&0===c._private.children.length},isChild:function(){var c=this[0];if(c)return c.isNode()&&null!=c._private.parent},isOrphan:function(){var c=this[0];if(c)return c.isNode()&&null==c._private.parent},descendants:function(c){var h=[];return function m(_){for(var C=0;C<_.length;C++){var w=_[C];h.push(w),w.children().nonempty()&&m(w.children())}}(this.children()),this.spawn(h,!0).filter(c)}};function Ba(f,c,h,m){for(var _=[],C=new us,E=f.cy().hasCompoundNodes(),k=0;k<f.length;k++){var L=f[k];h?_.push(L):E&&m(_,C,L)}for(;_.length>0;){var G=_.shift();c(G),C.add(G.id()),E&&m(_,C,G)}return f}function dr(f,c,h){if(h.isParent())for(var m=h._private.children,_=0;_<m.length;_++){var C=m[_];c.has(C.id())||f.push(C)}}function kd(f,c,h){if(h.isChild()){var m=h._private.parent;c.has(m.id())||f.push(m)}}function gl(f,c,h){kd(f,c,h),dr(f,c,h)}Oo.forEachDown=function(f){var c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Ba(this,f,c,dr)},Oo.forEachUp=function(f){var c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Ba(this,f,c,kd)},Oo.forEachUpAndDown=function(f){var c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Ba(this,f,c,gl)},Oo.ancestors=Oo.parents,Fh=sp={data:ms.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:ms.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:ms.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:ms.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:ms.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:ms.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var c=this[0];if(c)return c._private.data.id}},Fh.attr=Fh.data,Fh.removeAttr=Fh.removeData;var Nh=sp,_f={};function Ou(f){return function(c){var h=this;if(void 0===c&&(c=!0),0===h.length);else if(h.isNode()&&!h.removed()){for(var m=0,_=h[0],C=_._private.edges,w=0;w<C.length;w++){var E=C[w];!c&&E.isLoop()||(m+=f(_,E))}return m}}}function is(f,c){return function(h){for(var m,_=this.nodes(),C=0;C<_.length;C++){var E=_[C][f](h);void 0!==E&&(void 0===m||c(E,m))&&(m=E)}return m}}tr(_f,{degree:Ou(function(f,c){return c.source().same(c.target())?2:1}),indegree:Ou(function(f,c){return c.target().same(f)?1:0}),outdegree:Ou(function(f,c){return c.source().same(f)?1:0})}),tr(_f,{minDegree:is("degree",function(f,c){return f<c}),maxDegree:is("degree",function(f,c){return f>c}),minIndegree:is("indegree",function(f,c){return f<c}),maxIndegree:is("indegree",function(f,c){return f>c}),minOutdegree:is("outdegree",function(f,c){return f<c}),maxOutdegree:is("outdegree",function(f,c){return f>c})}),tr(_f,{totalDegree:function(c){for(var h=0,m=this.nodes(),_=0;_<m.length;_++)h+=m[_].degree(c);return h}});var Lc,Ug,Ts=function(c,h,m){for(var _=0;_<c.length;_++){var C=c[_];if(!C.locked()){var w=C._private.position,E={x:null!=h.x?h.x-w.x:0,y:null!=h.y?h.y-w.y:0};C.isParent()&&!(0===E.x&&0===E.y)&&C.children().shift(E,m),C.dirtyBoundingBoxCache()}}},Tv={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(c){c.updateCompoundBounds()},beforeSet:function(c,h){Ts(c,h,!1)},onSet:function(c){c.dirtyCompoundBoundsCache()},canSet:function(c){return!c.locked()}};Lc=Ug={position:ms.data(Tv),silentPosition:ms.data(tr({},Tv,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(c,h){Ts(c,h,!0)},onSet:function(c){c.dirtyCompoundBoundsCache()}})),positions:function(c,h){if(bt(c))h?this.silentPosition(c):this.position(c);else if(ft(c)){var m=c,_=this.cy();_.startBatch();for(var C=0;C<this.length;C++){var E,w=this[C];(E=m(w,C))&&(h?w.silentPosition(E):w.position(E))}_.endBatch()}return this},silentPositions:function(c){return this.positions(c,!0)},shift:function(c,h,m){var _;if(bt(c)?(_={x:Ut(c.x)?c.x:0,y:Ut(c.y)?c.y:0},m=h):He(c)&&Ut(h)&&((_={x:0,y:0})[c]=h),null!=_){var C=this.cy();C.startBatch();for(var w=0;w<this.length;w++){var E=this[w];if(!(C.hasCompoundNodes()&&E.isChild()&&E.ancestors().anySame(this))){var k=E.position(),L={x:k.x+_.x,y:k.y+_.y};m?E.silentPosition(L):E.position(L)}}C.endBatch()}return this},silentShift:function(c,h){return bt(c)?this.shift(c,!0):He(c)&&Ut(h)&&this.shift(c,h,!0),this},renderedPosition:function(c,h){var m=this[0],_=this.cy(),C=_.zoom(),w=_.pan(),E=bt(c)?c:void 0,k=void 0!==E||void 0!==h&&He(c);if(m&&m.isNode()){if(!k){var K=m.position();return E=$o(K,C,w),void 0===c?E:E[c]}for(var L=0;L<this.length;L++){var G=this[L];void 0!==h?G.position(c,(h-w[c])/C):void 0!==E&&G.position(Ic(E,C,w))}}else if(!k)return;return this},relativePosition:function(c,h){var m=this[0],_=this.cy(),C=bt(c)?c:void 0,w=void 0!==C||void 0!==h&&He(c),E=_.hasCompoundNodes();if(m&&m.isNode()){if(!w){var pe=m.position(),Ie=E?m.parent():null,Ne=Ie&&Ie.length>0;Ne&&(Ie=Ie[0]);var Qe=Ne?Ie.position():{x:0,y:0};return C={x:pe.x-Qe.x,y:pe.y-Qe.y},void 0===c?C:C[c]}for(var k=0;k<this.length;k++){var L=this[k],G=E?L.parent():null,K=G&&G.length>0;K&&(G=G[0]);var he=K?G.position():{x:0,y:0};void 0!==h?L.position(c,h+he[c]):void 0!==C&&L.position({x:C.x+he.x,y:C.y+he.y})}}else if(!w)return;return this}},Lc.modelPosition=Lc.point=Lc.position,Lc.modelPositions=Lc.points=Lc.positions,Lc.renderedPoint=Lc.renderedPosition,Lc.relativePoint=Lc.relativePosition;var Mr,xa,Hg=Ug;Mr=xa={},xa.renderedBoundingBox=function(f){var c=this.boundingBox(f),h=this.cy(),m=h.zoom(),_=h.pan(),C=c.x1*m+_.x,w=c.x2*m+_.x,E=c.y1*m+_.y,k=c.y2*m+_.y;return{x1:C,x2:w,y1:E,y2:k,w:w-C,h:k-E}},xa.dirtyCompoundBoundsCache=function(){var f=arguments.length>0&&void 0!==arguments[0]&&arguments[0],c=this.cy();return c.styleEnabled()&&c.hasCompoundNodes()?(this.forEachUp(function(h){if(h.isParent()){var m=h._private;m.compoundBoundsClean=!1,m.bbCache=null,f||h.emitAndNotify("bounds")}}),this):this},xa.updateCompoundBounds=function(){var f=arguments.length>0&&void 0!==arguments[0]&&arguments[0],c=this.cy();if(!c.styleEnabled()||!c.hasCompoundNodes())return this;if(!f&&c.batching())return this;function h(w){if(w.isParent()){var E=w._private,k=w.children(),L="include"===w.pstyle("compound-sizing-wrt-labels").value,G={width:{val:w.pstyle("min-width").pfValue,left:w.pstyle("min-width-bias-left"),right:w.pstyle("min-width-bias-right")},height:{val:w.pstyle("min-height").pfValue,top:w.pstyle("min-height-bias-top"),bottom:w.pstyle("min-height-bias-bottom")}},K=k.boundingBox({includeLabels:L,includeOverlays:!1,useCache:!1}),le=E.position;(0===K.w||0===K.h)&&((K={w:w.pstyle("width").pfValue,h:w.pstyle("height").pfValue}).x1=le.x-K.w/2,K.x2=le.x+K.w/2,K.y1=le.y-K.h/2,K.y2=le.y+K.h/2);var Ie=G.width.left.value;"px"===G.width.left.units&&G.width.val>0&&(Ie=100*Ie/G.width.val);var Ne=G.width.right.value;"px"===G.width.right.units&&G.width.val>0&&(Ne=100*Ne/G.width.val);var ze=G.height.top.value;"px"===G.height.top.units&&G.height.val>0&&(ze=100*ze/G.height.val);var Qe=G.height.bottom.value;"px"===G.height.bottom.units&&G.height.val>0&&(Qe=100*Qe/G.height.val);var qe=he(G.width.val-K.w,Ie,Ne),ht=qe.biasDiff,Lt=qe.biasComplementDiff,kt=he(G.height.val-K.h,ze,Qe),mt=kt.biasDiff,Ft=kt.biasComplementDiff;E.autoPadding=function pe(Ct,Ht,Vt,et){if("%"!==Vt.units)return"px"===Vt.units?Vt.pfValue:0;switch(et){case"width":return Ct>0?Vt.pfValue*Ct:0;case"height":return Ht>0?Vt.pfValue*Ht:0;case"average":return Ct>0&&Ht>0?Vt.pfValue*(Ct+Ht)/2:0;case"min":return Ct>0&&Ht>0?Ct>Ht?Vt.pfValue*Ht:Vt.pfValue*Ct:0;case"max":return Ct>0&&Ht>0?Ct>Ht?Vt.pfValue*Ct:Vt.pfValue*Ht:0;default:return 0}}(K.w,K.h,w.pstyle("padding"),w.pstyle("padding-relative-to").value),E.autoWidth=Math.max(K.w,G.width.val),le.x=(-ht+K.x1+K.x2+Lt)/2,E.autoHeight=Math.max(K.h,G.height.val),le.y=(-mt+K.y1+K.y2+Ft)/2}function he(Ct,Ht,Vt){var et=0,Gt=0,Tt=Ht+Vt;return Ct>0&&Tt>0&&(et=Ht/Tt*Ct,Gt=Vt/Tt*Ct),{biasDiff:et,biasComplementDiff:Gt}}}for(var m=0;m<this.length;m++){var _=this[m],C=_._private;(!C.compoundBoundsClean||f)&&(h(_),c.batching()||(C.compoundBoundsClean=!0))}return this};var Fl=function(c){return c===1/0||c===-1/0?0:c},oa=function(c,h,m,_,C){_-h==0||C-m==0||null==h||null==m||null==_||null==C||(c.x1=h<c.x1?h:c.x1,c.x2=_>c.x2?_:c.x2,c.y1=m<c.y1?m:c.y1,c.y2=C>c.y2?C:c.y2,c.w=c.x2-c.x1,c.h=c.y2-c.y1)},za=function(c,h){return null==h?c:oa(c,h.x1,h.y1,h.x2,h.y2)},wl=function(c,h,m){return or(c,h,m)},Bh=function(c,h,m){if(!h.cy().headless()){var k,L,_=h._private,C=_.rstyle,w=C.arrowWidth/2;if("none"!==h.pstyle(m+"-arrow-shape").value){"source"===m?(k=C.srcX,L=C.srcY):"target"===m?(k=C.tgtX,L=C.tgtY):(k=C.midX,L=C.midY);var G=_.arrowBounds=_.arrowBounds||{},K=G[m]=G[m]||{};K.x1=k-w,K.y1=L-w,K.x2=k+w,K.y2=L+w,K.w=K.x2-K.x1,K.h=K.y2-K.y1,jf(K,1),oa(c,K.x1,K.y1,K.x2,K.y2)}}},uc=function(c,h,m){if(!h.cy().headless()){var _,C=h._private,w=C.rstyle;if(h.pstyle((_=m?m+"-":"")+"label").strValue){var Vt,et,Gt,Tt,k=h.pstyle("text-halign"),L=h.pstyle("text-valign"),G=wl(w,"labelWidth",m),K=wl(w,"labelHeight",m),le=wl(w,"labelX",m),he=wl(w,"labelY",m),pe=h.pstyle(_+"text-margin-x").pfValue,Ie=h.pstyle(_+"text-margin-y").pfValue,Ne=h.isEdge(),ze=h.pstyle(_+"text-rotation"),Qe=h.pstyle("text-outline-width").pfValue,ht=h.pstyle("text-border-width").pfValue/2,Lt=h.pstyle("text-background-padding").pfValue,mt=K,Ft=G,Ct=Ft/2,Ht=mt/2;if(Ne)Vt=le-Ct,et=le+Ct,Gt=he-Ht,Tt=he+Ht;else{switch(k.value){case"left":Vt=le-Ft,et=le;break;case"center":Vt=le-Ct,et=le+Ct;break;case"right":Vt=le,et=le+Ft}switch(L.value){case"top":Gt=he-mt,Tt=he;break;case"center":Gt=he-Ht,Tt=he+Ht;break;case"bottom":Gt=he,Tt=he+mt}}Vt+=pe-Math.max(Qe,ht)-Lt-2,et+=pe+Math.max(Qe,ht)+Lt+2,Gt+=Ie-Math.max(Qe,ht)-Lt-2,Tt+=Ie+Math.max(Qe,ht)+Lt+2;var mn=m||"main",Yt=C.labelBounds,ln=Yt[mn]=Yt[mn]||{};ln.x1=Vt,ln.y1=Gt,ln.x2=et,ln.y2=Tt,ln.w=et-Vt,ln.h=Tt-Gt;var Sn=Ne&&"autorotate"===ze.strValue;if(Sn||null!=ze.pfValue&&0!==ze.pfValue){var Jn=Sn?wl(C.rstyle,"labelAngle",m):ze.pfValue,En=Math.cos(Jn),Yn=Math.sin(Jn),li=(Vt+et)/2,bi=(Gt+Tt)/2;if(!Ne){switch(k.value){case"left":li=et;break;case"right":li=Vt}switch(L.value){case"top":bi=Tt;break;case"bottom":bi=Gt}}var pi=function(Kr,hr){return{x:(Kr-=li)*En-(hr-=bi)*Yn+li,y:Kr*Yn+hr*En+bi}},di=pi(Vt,Gt),Mn=pi(Vt,Tt),si=pi(et,Gt),xi=pi(et,Tt);Vt=Math.min(di.x,Mn.x,si.x,xi.x),et=Math.max(di.x,Mn.x,si.x,xi.x),Gt=Math.min(di.y,Mn.y,si.y,xi.y),Tt=Math.max(di.y,Mn.y,si.y,xi.y)}var ji=mn+"Rot",rr=Yt[ji]=Yt[ji]||{};rr.x1=Vt,rr.y1=Gt,rr.x2=et,rr.y2=Tt,rr.w=et-Vt,rr.h=Tt-Gt,oa(c,Vt,Gt,et,Tt),oa(C.labelBounds.all,Vt,Gt,et,Tt)}return c}},Va=function(c){var h=0,m=function(w){return(w?1:0)<<h++},_=0;return _+=m(c.incudeNodes),_+=m(c.includeEdges),_+=m(c.includeLabels),_+=m(c.includeMainLabels),_+=m(c.includeSourceLabels),(_+=m(c.includeTargetLabels))+m(c.includeOverlays)},Mv=function(c){if(c.isEdge()){var h=c.source().position(),m=c.target().position(),_=function(w){return Math.round(w)};return function(c,h){var m={value:0,done:!1},_=0,C=c.length;return df({next:function(){return _<C?m.value=c[_++]:m.done=!0,m}},void 0)}([_(h.x),_(h.y),_(m.x),_(m.y)])}return 0},Dv=function(c,h){var _,m=c._private,C=c.isEdge(),E=(null==h?Wg:Va(h))===Wg,k=Mv(c),L=m.bbCachePosKey===k,G=h.useCache&&L,K=function(Ie){return null==Ie._private.bbCache||Ie._private.styleDirty};if(!G||K(c)||C&&K(c.source())||K(c.target())?(L||c.recalculateRenderedStyle(G),_=function(c,h){var G,K,le,he,pe,Ie,m=c._private.cy,_=m.styleEnabled(),C=m.headless(),w=Ec(),E=c._private,k=c.isNode(),L=c.isEdge(),Ne=E.rstyle,ze=k&&_?c.pstyle("bounds-expansion").pfValue:[0],Qe=function(jr){return"none"!==jr.pstyle("display").value},qe=!_||Qe(c)&&(!L||Qe(c.source())&&Qe(c.target()));if(qe){var Lt=0;_&&h.includeOverlays&&0!==c.pstyle("overlay-opacity").value&&(Lt=c.pstyle("overlay-padding").value);var mt=0;_&&h.includeUnderlays&&0!==c.pstyle("underlay-opacity").value&&(mt=c.pstyle("underlay-padding").value);var Ft=Math.max(Lt,mt),Ht=0;if(_&&(Ht=c.pstyle("width").pfValue/2),k&&h.includeNodes){var Vt=c.position();pe=Vt.x,Ie=Vt.y;var Gt=c.outerWidth()/2,mn=c.outerHeight()/2;oa(w,G=pe-Gt,le=Ie-mn,K=pe+Gt,he=Ie+mn)}else if(L&&h.includeEdges)if(_&&!C){var Yt=c.pstyle("curve-style").strValue;if(G=Math.min(Ne.srcX,Ne.midX,Ne.tgtX),K=Math.max(Ne.srcX,Ne.midX,Ne.tgtX),le=Math.min(Ne.srcY,Ne.midY,Ne.tgtY),he=Math.max(Ne.srcY,Ne.midY,Ne.tgtY),oa(w,G-=Ht,le-=Ht,K+=Ht,he+=Ht),"haystack"===Yt){var ln=Ne.haystackPts;if(ln&&2===ln.length){if((G=ln[0].x)>(K=ln[1].x)){var Sn=G;G=K,K=Sn}if((le=ln[0].y)>(he=ln[1].y)){var Rn=le;le=he,he=Rn}oa(w,G-Ht,le-Ht,K+Ht,he+Ht)}}else if("bezier"===Yt||"unbundled-bezier"===Yt||"segments"===Yt||"taxi"===Yt){var Jn;switch(Yt){case"bezier":case"unbundled-bezier":Jn=Ne.bezierPts;break;case"segments":case"taxi":Jn=Ne.linePts}if(null!=Jn)for(var En=0;En<Jn.length;En++){var Yn=Jn[En];oa(w,G=Yn.x-Ht,le=Yn.y-Ht,K=Yn.x+Ht,he=Yn.y+Ht)}}}else{var bi=c.source().position(),di=c.target().position();if((G=bi.x)>(K=di.x)){var Mn=G;G=K,K=Mn}if((le=bi.y)>(he=di.y)){var si=le;le=he,he=si}oa(w,G-=Ht,le-=Ht,K+=Ht,he+=Ht)}if(_&&h.includeEdges&&L&&(Bh(w,c,"mid-source"),Bh(w,c,"mid-target"),Bh(w,c,"source"),Bh(w,c,"target")),_&&"yes"===c.pstyle("ghost").value){var ji=c.pstyle("ghost-offset-x").pfValue,rr=c.pstyle("ghost-offset-y").pfValue;oa(w,w.x1+ji,w.y1+rr,w.x2+ji,w.y2+rr)}var Br=E.bodyBounds=E.bodyBounds||{};xm(Br,w),Vp(Br,ze),jf(Br,1),_&&oa(w,(G=w.x1)-Ft,(le=w.y1)-Ft,(K=w.x2)+Ft,(he=w.y2)+Ft);var Kr=E.overlayBounds=E.overlayBounds||{};xm(Kr,w),Vp(Kr,ze),jf(Kr,1);var hr=E.labelBounds=E.labelBounds||{};null!=hr.all?function(c){c.x1=1/0,c.y1=1/0,c.x2=-1/0,c.y2=-1/0,c.w=0,c.h=0}(hr.all):hr.all=Ec(),_&&h.includeLabels&&(h.includeMainLabels&&uc(w,c,null),L&&(h.includeSourceLabels&&uc(w,c,"source"),h.includeTargetLabels&&uc(w,c,"target")))}return w.x1=Fl(w.x1),w.y1=Fl(w.y1),w.x2=Fl(w.x2),w.y2=Fl(w.y2),w.w=Fl(w.x2-w.x1),w.h=Fl(w.y2-w.y1),w.w>0&&w.h>0&&qe&&(Vp(w,ze),jf(w,1)),w}(c,Gg),m.bbCache=_,m.bbCachePosKey=k):_=m.bbCache,!E){var he=c.isNode();_=Ec(),(h.includeNodes&&he||h.includeEdges&&!he)&&za(_,h.includeOverlays?m.overlayBounds:m.bodyBounds),h.includeLabels&&(h.includeMainLabels&&(!C||h.includeSourceLabels&&h.includeTargetLabels)?za(_,m.labelBounds.all):(h.includeMainLabels&&za(_,m.labelBounds.mainRot),h.includeSourceLabels&&za(_,m.labelBounds.sourceRot),h.includeTargetLabels&&za(_,m.labelBounds.targetRot))),_.w=_.x2-_.x1,_.h=_.y2-_.y1}return _},Gg={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,useCache:!0},Wg=Va(Gg),Cf=ti(Gg);xa.boundingBox=function(f){var c;if(1!==this.length||null==this[0]._private.bbCache||this[0]._private.styleDirty||void 0!==f&&void 0!==f.useCache&&!0!==f.useCache){c=Ec();var h=Cf(f=f||Gg),m=this;if(m.cy().styleEnabled())for(var w=0;w<m.length;w++){var E=m[w],k=E._private,L=Mv(E);E.recalculateRenderedStyle(h.useCache&&k.bbCachePosKey===L&&!k.styleDirty)}this.updateCompoundBounds(!f.useCache);for(var le=0;le<m.length;le++)za(c,Dv(m[le],h))}else f=void 0===f?Gg:Cf(f),c=Dv(this[0],f);return c.x1=Fl(c.x1),c.y1=Fl(c.y1),c.x2=Fl(c.x2),c.y2=Fl(c.y2),c.w=Fl(c.x2-c.x1),c.h=Fl(c.y2-c.y1),c},xa.dirtyBoundingBoxCache=function(){for(var f=0;f<this.length;f++){var c=this[f]._private;c.bbCache=null,c.bbCachePosKey=null,c.bodyBounds=null,c.overlayBounds=null,c.labelBounds.all=null,c.labelBounds.source=null,c.labelBounds.target=null,c.labelBounds.main=null,c.labelBounds.sourceRot=null,c.labelBounds.targetRot=null,c.labelBounds.mainRot=null,c.arrowBounds.source=null,c.arrowBounds.target=null,c.arrowBounds["mid-source"]=null,c.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this},xa.boundingBoxAt=function(f){var c=this.nodes(),h=this.cy(),m=h.hasCompoundNodes(),_=h.collection();if(m&&(_=c.filter(function(L){return L.isParent()}),c=c.not(_)),bt(f)){var C=f;f=function(){return C}}h.startBatch(),c.forEach(function(G,K){return G._private.bbAtOldPos=f(G,K)}).silentPositions(f),m&&(_.dirtyCompoundBoundsCache(),_.dirtyBoundingBoxCache(),_.updateCompoundBounds(!0));var k=function(c){return{x1:c.x1,x2:c.x2,w:c.w,y1:c.y1,y2:c.y2,h:c.h}}(this.boundingBox({useCache:!1}));return c.silentPositions(function(G){return G._private.bbAtOldPos}),m&&(_.dirtyCompoundBoundsCache(),_.dirtyBoundingBoxCache(),_.updateCompoundBounds(!0)),h.endBatch(),k},Mr.boundingbox=Mr.bb=Mr.boundingBox,Mr.renderedBoundingbox=Mr.renderedBoundingBox;var xf,zh,Pm=xa;xf=zh={};var jg=function(c){c.uppercaseName=Te(c.name),c.autoName="auto"+c.uppercaseName,c.labelName="label"+c.uppercaseName,c.outerName="outer"+c.uppercaseName,c.uppercaseOuterName=Te(c.outerName),xf[c.name]=function(){var m=this[0],_=m._private;if(m){if(_.cy._private.styleEnabled){if(m.isParent())return m.updateCompoundBounds(),_[c.autoName]||0;var E=m.pstyle(c.name);return"label"===E.strValue?(m.recalculateRenderedStyle(),_.rstyle[c.labelName]||0):E.pfValue}return 1}},xf["outer"+c.uppercaseName]=function(){var m=this[0];if(m)return m._private.cy._private.styleEnabled?m[c.name]()+m.pstyle("border-width").pfValue+2*m.padding():1},xf["rendered"+c.uppercaseName]=function(){var m=this[0];if(m)return m[c.name]()*this.cy().zoom()},xf["rendered"+c.uppercaseOuterName]=function(){var m=this[0];if(m)return m[c.outerName]()*this.cy().zoom()}};jg({name:"width"}),jg({name:"height"}),zh.padding=function(){var f=this[0],c=f._private;return f.isParent()?(f.updateCompoundBounds(),void 0!==c.autoPadding?c.autoPadding:f.pstyle("padding").pfValue):f.pstyle("padding").pfValue},zh.paddedHeight=function(){var f=this[0];return f.height()+2*f.padding()},zh.paddedWidth=function(){var f=this[0];return f.width()+2*f.padding()};var Od=zh,Lv={controlPoints:{get:function(c){return c.renderer().getControlPoints(c)},mult:!0},segmentPoints:{get:function(c){return c.renderer().getSegmentPoints(c)},mult:!0},sourceEndpoint:{get:function(c){return c.renderer().getSourceEndpoint(c)}},targetEndpoint:{get:function(c){return c.renderer().getTargetEndpoint(c)}},midpoint:{get:function(c){return c.renderer().getEdgeMidpoint(c)}}},Pv=Object.keys(Lv).reduce(function(f,c){var h=Lv[c],m=function(c){return"rendered"+c[0].toUpperCase()+c.substr(1)}(c);return f[c]=function(){return function(c,h){if(c.isEdge())return h(c)}(this,h.get)},f[m]=h.mult?function(){return function(c,h){if(c.isEdge()){var m=c.cy(),_=m.pan(),C=m.zoom();return h(c).map(function(w){return $o(w,C,_)})}}(this,h.get)}:function(){return function(c,h){if(c.isEdge()){var m=c.cy();return $o(h(c),m.zoom(),m.pan())}}(this,h.get)},f},{}),db=tr({},Hg,Pm,Od,Pv),Xp=function(c,h){this.recycle(c,h)};function sl(){return!1}function Uh(){return!0}Xp.prototype={instanceString:function(){return"event"},recycle:function(c,h){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=sl,null!=c&&c.preventDefault?(this.type=c.type,this.isDefaultPrevented=c.defaultPrevented?Uh:sl):null!=c&&c.type?h=c:this.type=c,null!=h&&(this.originalEvent=h.originalEvent,this.type=null!=h.type?h.type:this.type,this.cy=h.cy,this.target=h.target,this.position=h.position,this.renderedPosition=h.renderedPosition,this.namespace=h.namespace,this.layout=h.layout),null!=this.cy&&null!=this.position&&null==this.renderedPosition){var m=this.position,_=this.cy.zoom(),C=this.cy.pan();this.renderedPosition={x:m.x*_+C.x,y:m.y*_+C.y}}this.timeStamp=c&&c.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=Uh;var c=this.originalEvent;!c||c.preventDefault&&c.preventDefault()},stopPropagation:function(){this.isPropagationStopped=Uh;var c=this.originalEvent;!c||c.stopPropagation&&c.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Uh,this.stopPropagation()},isDefaultPrevented:sl,isPropagationStopped:sl,isImmediatePropagationStopped:sl};var Fd=/^([^.]+)(\.(?:[^.]+))?$/,Nd={qualifierCompare:function(c,h){return c===h},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(c){return c},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},ud=Object.keys(Nd),Fu={};function fu(){for(var f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fu,c=arguments.length>1?arguments[1]:void 0,h=0;h<ud.length;h++){var m=ud[h];this[m]=f[m]||Nd[m]}this.context=c||this.context,this.listeners=[],this.emitting=0}var aa=fu.prototype,lh=function(c,h,m,_,C,w,E){ft(_)&&(C=_,_=null),E&&(w=null==w?E:tr({},w,E));for(var k=gt(m)?m:m.split(/\s+/),L=0;L<k.length;L++){var G=k[L];if(!be(G)){var K=G.match(Fd);if(K&&!1===h(c,G,K[1],K[2]?K[2]:null,_,C,w))break}}},Rm=function(c,h){return c.addEventFields(c.context,h),new Xp(h.type,h)};aa.on=aa.addListener=function(f,c,h,m,_){return lh(this,function(C,w,E,k,L,G,K){ft(G)&&C.listeners.push({event:w,callback:G,type:E,namespace:k,qualifier:L,conf:K})},f,c,h,m,_),this},aa.one=function(f,c,h,m){return this.on(f,c,h,m,{one:!0})},aa.removeListener=aa.off=function(f,c,h,m){var _=this;0!==this.emitting&&(this.listeners=function(c){return c.slice()}(this.listeners));for(var C=this.listeners,w=function(L){var G=C[L];lh(_,function(K,le,he,pe,Ie,Ne){if((G.type===he||"*"===f)&&(!pe&&".*"!==G.namespace||G.namespace===pe)&&(!Ie||K.qualifierCompare(G.qualifier,Ie))&&(!Ne||G.callback===Ne))return C.splice(L,1),!1},f,c,h,m)},E=C.length-1;E>=0;E--)w(E);return this},aa.removeAllListeners=function(){return this.removeListener("*")},aa.emit=aa.trigger=function(f,c,h){var m=this.listeners,_=m.length;return this.emitting++,gt(c)||(c=[c]),function(c,h,m){if(function(c){return"event"===xt(c)}(m))h(c,m);else if(bt(m))h(c,Rm(c,m));else for(var _=gt(m)?m:m.split(/\s+/),C=0;C<_.length;C++){var w=_[C];if(!be(w)){var E=w.match(Fd);E&&h(c,Rm(c,{type:E[1],namespace:E[2]?E[2]:null,target:c.context}))}}}(this,function(C,w){null!=h&&(_=(m=[{event:w.event,type:w.type,namespace:w.namespace,callback:h}]).length);for(var E=function(G){var K=m[G];if(K.type===w.type&&(!K.namespace||K.namespace===w.namespace||".*"===K.namespace)&&C.eventMatches(C.context,K,w)){var le=[w];null!=c&&function(c,h){for(var m=0;m<h.length;m++)c.push(h[m])}(le,c),C.beforeEmit(C.context,K,w),K.conf&&K.conf.one&&(C.listeners=C.listeners.filter(function(Ie){return Ie!==K}));var he=C.callbackContext(C.context,K,w),pe=K.callback.apply(he,le);C.afterEmit(C.context,K,w),!1===pe&&(w.stopPropagation(),w.preventDefault())}},k=0;k<_;k++)E(k);C.bubble(C.context)&&!w.isPropagationStopped()&&C.parent(C.context).emit(w,c)},f),this.emitting--,this};var ol={qualifierCompare:function(c,h){return null==c||null==h?null==c&&null==h:c.sameText(h)},eventMatches:function(c,h,m){var _=h.qualifier;return null==_||c!==m.target&&Ln(m.target)&&_.matches(m.target)},addEventFields:function(c,h){h.cy=c.cy(),h.target=c},callbackContext:function(c,h,m){return null!=h.qualifier?m.target:c},beforeEmit:function(c,h){h.conf&&h.conf.once&&h.conf.onceCollection.removeListener(h.event,h.qualifier,h.callback)},bubble:function(){return!0},parent:function(c){return c.isChild()?c.parent():c.cy()}},pu=function(c){return He(c)?new rp(c):c},yo={createEmitter:function(){for(var c=0;c<this.length;c++){var h=this[c],m=h._private;m.emitter||(m.emitter=new fu(ol,h))}return this},emitter:function(){return this._private.emitter},on:function(c,h,m){for(var _=pu(h),C=0;C<this.length;C++)this[C].emitter().on(c,_,m);return this},removeListener:function(c,h,m){for(var _=pu(h),C=0;C<this.length;C++)this[C].emitter().removeListener(c,_,m);return this},removeAllListeners:function(){for(var c=0;c<this.length;c++)this[c].emitter().removeAllListeners();return this},one:function(c,h,m){for(var _=pu(h),C=0;C<this.length;C++)this[C].emitter().one(c,_,m);return this},once:function(c,h,m){for(var _=pu(h),C=0;C<this.length;C++)this[C].emitter().on(c,_,m,{once:!0,onceCollection:this})},emit:function(c,h){for(var m=0;m<this.length;m++)this[m].emitter().emit(c,h);return this},emitAndNotify:function(c,h){if(0!==this.length)return this.cy().notify(c,this),this.emit(c,h),this}};ms.eventAliasesOn(yo);var Rc={nodes:function(c){return this.filter(function(h){return h.isNode()}).filter(c)},edges:function(c){return this.filter(function(h){return h.isEdge()}).filter(c)},byGroup:function(){for(var c=this.spawn(),h=this.spawn(),m=0;m<this.length;m++){var _=this[m];_.isNode()?c.push(_):h.push(_)}return{nodes:c,edges:h}},filter:function(c,h){if(void 0===c)return this;if(He(c)||nn(c))return new rp(c).filter(this);if(ft(c)){for(var m=this.spawn(),_=this,C=0;C<_.length;C++){var w=_[C];(h?c.apply(h,[w,C,_]):c(w,C,_))&&m.push(w)}return m}return this.spawn()},not:function(c){if(c){He(c)&&(c=this.filter(c));for(var h=this.spawn(),m=0;m<this.length;m++){var _=this[m];c.has(_)||h.push(_)}return h}return this},absoluteComplement:function(){return this.cy().mutableElements().not(this)},intersect:function(c){if(He(c))return this.filter(c);for(var m=this.spawn(),w=this.length<c.length,E=w?this:c,k=w?c:this,L=0;L<E.length;L++){var G=E[L];k.has(G)&&m.push(G)}return m},xor:function(c){var h=this._private.cy;He(c)&&(c=h.$(c));var m=this.spawn(),C=c,w=function(k,L){for(var G=0;G<k.length;G++){var K=k[G];L.hasElementWithId(K._private.data.id)||m.push(K)}};return w(this,C),w(C,this),m},diff:function(c){var h=this._private.cy;He(c)&&(c=h.$(c));var m=this.spawn(),_=this.spawn(),C=this.spawn(),E=c,k=function(G,K,le){for(var he=0;he<G.length;he++){var pe=G[he];K.hasElementWithId(pe._private.data.id)?C.merge(pe):le.push(pe)}};return k(this,E,m),k(E,this,_),{left:m,right:_,both:C}},add:function(c){var h=this._private.cy;if(!c)return this;if(He(c)){var m=c;c=h.mutableElements().filter(m)}for(var _=this.spawnSelf(),C=0;C<c.length;C++){var w=c[C];!this.has(w)&&_.push(w)}return _},merge:function(c){var h=this._private,m=h.cy;if(!c)return this;if(c&&He(c)){var _=c;c=m.mutableElements().filter(_)}for(var C=h.map,w=0;w<c.length;w++){var E=c[w],k=E._private.data.id;if(!C.has(k)){var G=this.length++;this[G]=E,C.set(k,{ele:E,index:G})}}return this},unmergeAt:function(c){var m=this[c].id(),C=this._private.map;if(this[c]=void 0,C.delete(m),this.length>1&&c!==this.length-1){var E=this.length-1,k=this[E],L=k._private.data.id;this[E]=void 0,this[c]=k,C.set(L,{ele:k,index:c})}return this.length--,this},unmergeOne:function(c){var C=this._private.map.get((c=c[0])._private.data.id);return C?(this.unmergeAt(C.index),this):this},unmerge:function(c){var h=this._private.cy;if(!c)return this;if(c&&He(c)){var m=c;c=h.mutableElements().filter(m)}for(var _=0;_<c.length;_++)this.unmergeOne(c[_]);return this},unmergeBy:function(c){for(var h=this.length-1;h>=0;h--)c(this[h])&&this.unmergeAt(h);return this},map:function(c,h){for(var m=[],_=this,C=0;C<_.length;C++){var w=_[C],E=h?c.apply(h,[w,C,_]):c(w,C,_);m.push(E)}return m},reduce:function(c,h){for(var m=h,_=this,C=0;C<_.length;C++)m=c(m,_[C],C,_);return m},max:function(c,h){for(var _,m=-1/0,C=this,w=0;w<C.length;w++){var E=C[w],k=h?c.apply(h,[E,w,C]):c(E,w,C);k>m&&(m=k,_=E)}return{value:m,ele:_}},min:function(c,h){for(var _,m=1/0,C=this,w=0;w<C.length;w++){var E=C[w],k=h?c.apply(h,[E,w,C]):c(E,w,C);k<m&&(m=k,_=E)}return{value:m,ele:_}}},js=Rc;js.u=js["|"]=js["+"]=js.union=js.or=js.add,js["\\"]=js["!"]=js["-"]=js.difference=js.relativeComplement=js.subtract=js.not,js.n=js["&"]=js["."]=js.and=js.intersection=js.intersect,js["^"]=js["(+)"]=js["(-)"]=js.symmetricDifference=js.symdiff=js.xor,js.fnFilter=js.filterFn=js.stdFilter=js.filter,js.complement=js.abscomp=js.absoluteComplement;var c,ap=function(c,h){var _=c.cy().hasCompoundNodes();function C(G){var K=G.pstyle("z-compound-depth");return"auto"===K.value?_?G.zDepth():0:"bottom"===K.value?-1:"top"===K.value?Ac:0}var w=C(c)-C(h);if(0!==w)return w;function E(G){return"auto"===G.pstyle("z-index-compare").value&&G.isNode()?1:0}var k=E(c)-E(h);if(0!==k)return k;var L=c.pstyle("z-index").value-h.pstyle("z-index").value;return 0!==L?L:c.poolIndex()-h.poolIndex()},kc={forEach:function(c,h){if(ft(c))for(var m=this.length,_=0;_<m;_++){var C=this[_];if(!1===(h?c.apply(h,[C,_,this]):c(C,_,this)))break}return this},toArray:function(){for(var c=[],h=0;h<this.length;h++)c.push(this[h]);return c},slice:function(c,h){var m=[],_=this.length;null==h&&(h=_),null==c&&(c=0),c<0&&(c=_+c),h<0&&(h=_+h);for(var C=c;C>=0&&C<h&&C<_;C++)m.push(this[C]);return this.spawn(m)},size:function(){return this.length},eq:function(c){return this[c]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(c){if(!ft(c))return this;var h=this.toArray().sort(c);return this.spawn(h)},sortByZIndex:function(){return this.sort(ap)},zDepth:function(){var c=this[0];if(c){var h=c._private;if("nodes"===h.group){var _=h.data.parent?c.parents().size():0;return c.isParent()?_:Ac-1}var w=h.target,E=h.source.zDepth(),k=w.zDepth();return Math.max(E,k,0)}}};kc.each=kc.forEach,c="undefined",(typeof Symbol>"u"?"undefined":se(Symbol))!=c&&se(Symbol.iterator)!=c&&(kc[Symbol.iterator]=function(){var m=this,_={value:void 0,done:!1},C=0,w=this.length;return xe({next:function(){return C<w?_.value=m[C++]:(_.value=void 0,_.done=!0),_}},Symbol.iterator,function(){return this})});var qg=ti({nodeDimensionsIncludeLabels:!1}),dd={layoutDimensions:function(c){var h;if(c=qg(c),this.takesUpSpace())if(c.nodeDimensionsIncludeLabels){var m=this.boundingBox();h={w:m.w,h:m.h}}else h={w:this.outerWidth(),h:this.outerHeight()};else h={w:0,h:0};return(0===h.w||0===h.h)&&(h.w=h.h=1),h},layoutPositions:function(c,h,m){var _=this.nodes().filter(function(Lt){return!Lt.isParent()}),C=this.cy(),w=h.eles,E=function(kt){return kt.id()},k=It(m,E);c.emit({type:"layoutstart",layout:c}),c.animations=[];var G=h.spacingFactor&&1!==h.spacingFactor,le=function(){if(!G)return null;for(var kt=Ec(),mt=0;mt<_.length;mt++){var Ct=k(_[mt],mt);da(kt,Ct.x,Ct.y)}return kt}(),he=It(function(Lt,kt){var mt=k(Lt,kt);return G&&(mt=function(kt,mt,Ft){var Ct_x=mt.x1+mt.w/2,Ct_y=mt.y1+mt.h/2;return{x:Ct_x+(Ft.x-Ct_x)*kt,y:Ct_y+(Ft.y-Ct_y)*kt}}(Math.abs(h.spacingFactor),le,mt)),null!=h.transform&&(mt=h.transform(Lt,mt)),mt},E);if(h.animate){for(var pe=0;pe<_.length;pe++){var Ie=_[pe],Ne=he(Ie,pe);if(null==h.animateFilter||h.animateFilter(Ie,pe)){var Qe=Ie.animation({position:Ne,duration:h.animationDuration,easing:h.animationEasing});c.animations.push(Qe)}else Ie.position(Ne)}if(h.fit){var qe=C.animation({fit:{boundingBox:w.boundingBoxAt(he),padding:h.padding},duration:h.animationDuration,easing:h.animationEasing});c.animations.push(qe)}else if(void 0!==h.zoom&&void 0!==h.pan){var ht=C.animation({zoom:h.zoom,pan:h.pan,duration:h.animationDuration,easing:h.animationEasing});c.animations.push(ht)}c.animations.forEach(function(Lt){return Lt.play()}),c.one("layoutready",h.ready),c.emit({type:"layoutready",layout:c}),ra.all(c.animations.map(function(Lt){return Lt.promise()})).then(function(){c.one("layoutstop",h.stop),c.emit({type:"layoutstop",layout:c})})}else _.positions(he),h.fit&&C.fit(h.eles,h.padding),null!=h.zoom&&C.zoom(h.zoom),h.pan&&C.pan(h.pan),c.one("layoutready",h.ready),c.emit({type:"layoutready",layout:c}),c.one("layoutstop",h.stop),c.emit({type:"layoutstop",layout:c});return this},layout:function(c){return this.cy().makeLayout(tr({},c,{eles:this}))}};function Hh(f,c,h){var C,m=h._private,_=m.styleCache=m.styleCache||[];return null!=(C=_[f])||(C=_[f]=c(h)),C}function Gh(f,c){return f=wc(f),function(m){return Hh(f,c,m)}}function Zl(f,c){f=wc(f);var h=function(_){return c.call(_)};return function(){var _=this[0];if(_)return Hh(f,h,_)}}dd.createLayout=dd.makeLayout=dd.layout;var al={recalculateRenderedStyle:function(c){var h=this.cy(),m=h.renderer(),_=h.styleEnabled();return m&&_&&m.recalculateRenderedStyle(this,c),this},dirtyStyleCache:function(){var m,c=this.cy(),h=function(C){return C._private.styleCache=null};return c.hasCompoundNodes()?((m=this.spawnSelf().merge(this.descendants()).merge(this.parents())).merge(m.connectedEdges()),m.forEach(h)):this.forEach(function(_){h(_),_.connectedEdges().forEach(h)}),this},updateStyle:function(c){var h=this._private.cy;if(!h.styleEnabled())return this;if(h.batching())return h._private.batchStyleEles.merge(this),this;var C=this;c=!(!c&&void 0!==c),h.hasCompoundNodes()&&(C=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var w=C;return c?w.emitAndNotify("style"):w.emit("style"),C.forEach(function(E){return E._private.styleDirty=!0}),this},cleanStyle:function(){var c=this.cy();if(c.styleEnabled())for(var h=0;h<this.length;h++){var m=this[h];m._private.styleDirty&&(m._private.styleDirty=!1,c.style().apply(m))}},parsedStyle:function(c){var h=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],m=this[0],_=m.cy();if(_.styleEnabled()&&m){this.cleanStyle();var C=m._private.style[c];return C??(h?_.style().getDefaultProperty(c):null)}},numericStyle:function(c){var h=this[0];if(h.cy().styleEnabled()&&h){var m=h.pstyle(c);return void 0!==m.pfValue?m.pfValue:m.value}},numericStyleUnits:function(c){var h=this[0];if(h.cy().styleEnabled()&&h)return h.pstyle(c).units},renderedStyle:function(c){var h=this.cy();if(!h.styleEnabled())return this;var m=this[0];return m?h.style().getRenderedStyle(m,c):void 0},style:function(c,h){var m=this.cy();if(!m.styleEnabled())return this;var C=m.style();if(bt(c))C.applyBypass(this,c,!1),this.emitAndNotify("style");else if(He(c)){if(void 0===h){var E=this[0];return E?C.getStylePropertyValue(E,c):void 0}C.applyBypass(this,c,h,!1),this.emitAndNotify("style")}else if(void 0===c){var k=this[0];return k?C.getRawStyle(k):void 0}return this},removeStyle:function(c){var h=this.cy();if(!h.styleEnabled())return this;var _=h.style(),C=this;if(void 0===c)for(var w=0;w<C.length;w++)_.removeAllBypasses(C[w],!1);else{c=c.split(/\s+/);for(var k=0;k<C.length;k++)_.removeBypasses(C[k],c,!1)}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var c=this.cy();if(!c.styleEnabled())return 1;var h=c.hasCompoundNodes(),m=this[0];if(m){var _=m._private,C=m.pstyle("opacity").value;if(!h)return C;var w=_.data.parent?m.parents():null;if(w)for(var E=0;E<w.length;E++)C*=w[E].pstyle("opacity").value;return C}},transparent:function(){if(!this.cy().styleEnabled())return!1;var h=this[0],m=h.cy().hasCompoundNodes();return h?m?0===h.effectiveOpacity():0===h.pstyle("opacity").value:void 0},backgrounding:function(){return!!this.cy().styleEnabled()&&!!this[0]._private.backgrounding}};function Bd(f,c){var m=f._private.data.parent?f.parents():null;if(m)for(var _=0;_<m.length;_++)if(!c(m[_]))return!1;return!0}function Jc(f){var c=f.ok,h=f.edgeOkViaNode||f.ok,m=f.parentOk||f.ok;return function(){var _=this.cy();if(!_.styleEnabled())return!0;var C=this[0],w=_.hasCompoundNodes();if(C){var E=C._private;if(!c(C))return!1;if(C.isNode())return!w||Bd(C,m);var k=E.source,L=E.target;return h(k)&&(!w||Bd(k,h))&&(k===L||h(L)&&(!w||Bd(L,h)))}}}var ch=Gh("eleTakesUpSpace",function(f){return"element"===f.pstyle("display").value&&0!==f.width()&&(!f.isNode()||0!==f.height())});al.takesUpSpace=Zl("takesUpSpace",Jc({ok:ch}));var Wh=Gh("eleInteractive",function(f){return"yes"===f.pstyle("events").value&&"visible"===f.pstyle("visibility").value&&ch(f)}),cp=Gh("parentInteractive",function(f){return"visible"===f.pstyle("visibility").value&&ch(f)});al.interactive=Zl("interactive",Jc({ok:Wh,parentOk:cp,edgeOkViaNode:ch})),al.noninteractive=function(){var f=this[0];if(f)return!f.interactive()};var hd=Gh("eleVisible",function(f){return"visible"===f.pstyle("visibility").value&&0!==f.pstyle("opacity").pfValue&&ch(f)});al.visible=Zl("visible",Jc({ok:hd,edgeOkViaNode:ch})),al.hidden=function(){var f=this[0];if(f)return!f.visible()},al.isBundledBezier=Zl("isBundledBezier",function(){return!!this.cy().styleEnabled()&&!this.removed()&&"bezier"===this.pstyle("curve-style").value&&this.takesUpSpace()}),al.bypass=al.css=al.style,al.renderedCss=al.renderedStyle,al.removeBypass=al.removeCss=al.removeStyle,al.pstyle=al.parsedStyle;var Vo={};function jh(f){return function(){var c=arguments,h=[];if(2===c.length){var m=c[0],_=c[1];this.on(f.event,m,_)}else if(1===c.length&&ft(c[0])){var C=c[0];this.on(f.event,C)}else if(0===c.length||1===c.length&&gt(c[0])){for(var w=1===c.length?c[0]:null,E=0;E<this.length;E++){var k=this[E],L=!f.ableField||k._private[f.ableField],G=k._private[f.field]!=f.value;if(f.overrideAble){var K=f.overrideAble(k);if(void 0!==K&&(L=K,!K))return this}L&&(k._private[f.field]=f.value,G&&h.push(k))}var le=this.spawn(h);le.updateStyle(),le.emit(f.event),w&&le.emit(w)}return this}}function zd(f){Vo[f.field]=function(){var c=this[0];if(c){if(f.overrideField){var h=f.overrideField(c);if(void 0!==h)return h}return c._private[f.field]}},Vo[f.on]=jh({event:f.on,field:f.field,ableField:f.ableField,overrideAble:f.overrideAble,value:!0}),Vo[f.off]=jh({event:f.off,field:f.field,ableField:f.ableField,overrideAble:f.overrideAble,value:!1})}zd({field:"locked",overrideField:function(c){return!!c.cy().autolock()||void 0},on:"lock",off:"unlock"}),zd({field:"grabbable",overrideField:function(c){return!c.cy().autoungrabify()&&!c.pannable()&&void 0},on:"grabify",off:"ungrabify"}),zd({field:"selected",ableField:"selectable",overrideAble:function(c){return!c.cy().autounselectify()&&void 0},on:"select",off:"unselect"}),zd({field:"selectable",overrideField:function(c){return!c.cy().autounselectify()&&void 0},on:"selectify",off:"unselectify"}),Vo.deselect=Vo.unselect,Vo.grabbed=function(){var f=this[0];if(f)return f._private.grabbed},zd({field:"active",on:"activate",off:"unactivate"}),zd({field:"pannable",on:"panify",off:"unpanify"}),Vo.inactive=function(){var f=this[0];if(f)return!f._private.active};var Ka={},uh=function(c){return function(m){for(var C=[],w=0;w<this.length;w++){var E=this[w];if(E.isNode()){for(var k=!1,L=E.connectedEdges(),G=0;G<L.length;G++){var K=L[G],le=K.source(),he=K.target();if(c.noIncomingEdges&&he===E&&le!==E||c.noOutgoingEdges&&le===E&&he!==E){k=!0;break}}k||C.push(E)}}return this.spawn(C,!0).filter(m)}},Nu=function(c){return function(h){for(var _=[],C=0;C<this.length;C++){var w=this[C];if(w.isNode())for(var E=w.connectedEdges(),k=0;k<E.length;k++){var L=E[k],G=L.source(),K=L.target();c.outgoing&&G===w?(_.push(L),_.push(K)):c.incoming&&K===w&&(_.push(L),_.push(G))}}return this.spawn(_,!0).filter(h)}},Vd=function(c){return function(h){for(var m=this,_=[],C={};;){var w=c.outgoing?m.outgoers():m.incomers();if(0===w.length)break;for(var E=!1,k=0;k<w.length;k++){var L=w[k],G=L.id();C[G]||(C[G]=!0,_.push(L),E=!0)}if(!E)break;m=w}return this.spawn(_,!0).filter(h)}};function La(f){return function(h){for(var m=[],_=0;_<this.length;_++){var w=this[_]._private[f.attr];w&&m.push(w)}return this.spawn(m,!0).filter(h)}}function eu(f){return function(h){var m=[],_=this._private.cy,C=f||{};He(h)&&(h=_.$(h));for(var w=0;w<h.length;w++)for(var E=h[w]._private.edges,k=0;k<E.length;k++){var L=E[k],G=L._private.data,K=this.hasElementWithId(G.source)&&h.hasElementWithId(G.target),le=h.hasElementWithId(G.source)&&this.hasElementWithId(G.target);!K&&!le||(C.thisIsSrc||C.thisIsTgt)&&(C.thisIsSrc&&!K||C.thisIsTgt&&!le)||m.push(L)}return this.spawn(m,!0)}}function dh(f){return f=tr({},{codirected:!1},f),function(m){for(var _=[],C=this.edges(),w=f,E=0;E<C.length;E++)for(var L=C[E]._private,G=L.source,K=G._private.data.id,le=L.data.target,he=G._private.edges,pe=0;pe<he.length;pe++){var Ie=he[pe],Ne=Ie._private.data,ze=Ne.target,Qe=Ne.source,qe=ze===le&&Qe===K;(w.codirected&&qe||!w.codirected&&(qe||K===ze&&le===Qe))&&_.push(Ie)}return this.spawn(_,!0).filter(m)}}Ka.clearTraversalCache=function(){for(var f=0;f<this.length;f++)this[f]._private.traversalCache=null},tr(Ka,{roots:uh({noIncomingEdges:!0}),leaves:uh({noOutgoingEdges:!0}),outgoers:Ca(Nu({outgoing:!0}),"outgoers"),successors:Vd({outgoing:!0}),incomers:Ca(Nu({incoming:!0}),"incomers"),predecessors:Vd({incoming:!0})}),tr(Ka,{neighborhood:Ca(function(f){for(var c=[],h=this.nodes(),m=0;m<h.length;m++)for(var _=h[m],C=_.connectedEdges(),w=0;w<C.length;w++){var E=C[w],k=E.source(),L=E.target(),G=_===k?L:k;G.length>0&&c.push(G[0]),c.push(E[0])}return this.spawn(c,!0).filter(f)},"neighborhood"),closedNeighborhood:function(c){return this.neighborhood().add(this).filter(c)},openNeighborhood:function(c){return this.neighborhood(c)}}),Ka.neighbourhood=Ka.neighborhood,Ka.closedNeighbourhood=Ka.closedNeighborhood,Ka.openNeighbourhood=Ka.openNeighborhood,tr(Ka,{source:Ca(function(c){var m,h=this[0];return h&&(m=h._private.source||h.cy().collection()),m&&c?m.filter(c):m},"source"),target:Ca(function(c){var m,h=this[0];return h&&(m=h._private.target||h.cy().collection()),m&&c?m.filter(c):m},"target"),sources:La({attr:"source"}),targets:La({attr:"target"})}),tr(Ka,{edgesWith:Ca(eu(),"edgesWith"),edgesTo:Ca(eu({thisIsSrc:!0}),"edgesTo")}),tr(Ka,{connectedEdges:Ca(function(f){for(var c=[],m=0;m<this.length;m++){var _=this[m];if(_.isNode())for(var C=_._private.edges,w=0;w<C.length;w++)c.push(C[w])}return this.spawn(c,!0).filter(f)},"connectedEdges"),connectedNodes:Ca(function(f){for(var c=[],m=0;m<this.length;m++){var _=this[m];!_.isEdge()||(c.push(_.source()[0]),c.push(_.target()[0]))}return this.spawn(c,!0).filter(f)},"connectedNodes"),parallelEdges:Ca(dh(),"parallelEdges"),codirectedEdges:Ca(dh({codirected:!0}),"codirectedEdges")}),tr(Ka,{components:function(c){var h=this,m=h.cy(),_=m.collection(),C=null==c?h.nodes():c.nodes(),w=[];null!=c&&C.empty()&&(C=c.sources());var E=function(G,K){_.merge(G),C.unmerge(G),K.merge(G)};if(C.empty())return h.spawn();var k=function(){var G=m.collection();w.push(G);var K=C[0];E(K,G),h.bfs({directed:!1,roots:K,visit:function(he){return E(he,G)}}),G.forEach(function(le){le.connectedEdges().forEach(function(he){h.has(he)&&G.has(he.source())&&G.has(he.target())&&G.merge(he)})})};do{k()}while(C.length>0);return w},component:function(){var c=this[0];return c.cy().mutableElements().components(c)[0]}}),Ka.componentsOf=Ka.components;var la=function(c,h){var m=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(void 0!==c){var _=new wo,C=!1;if(h){if(h.length>0&&bt(h[0])&&!Ln(h[0])){C=!0;for(var w=[],E=new us,k=0,L=h.length;k<L;k++){var G=h[k];null==G.data&&(G.data={});var K=G.data;if(null==K.id)K.id=zt();else if(c.hasElementWithId(K.id)||E.has(K.id))continue;var le=new qa(c,G,!1);w.push(le),E.add(K.id)}h=w}}else h=[];this.length=0;for(var he=0,pe=h.length;he<pe;he++){var Ie=h[he][0];if(null!=Ie){var Ne=Ie._private.data.id;(!m||!_.has(Ne))&&(m&&_.set(Ne,{index:this.length,ele:Ie}),this[this.length]=Ie,this.length++)}}this._private={eles:this,cy:c,get map(){return null==this.lazyMap&&this.rebuildMap(),this.lazyMap},set map(ze){this.lazyMap=ze},rebuildMap:function(){for(var Qe=this.lazyMap=new wo,qe=this.eles,ht=0;ht<qe.length;ht++){var Lt=qe[ht];Qe.set(Lt.id(),{index:ht,ele:Lt})}}},m&&(this._private.map=_),C&&this.restore()}else it("A collection must have a reference to the core")},Uo=qa.prototype=la.prototype=Object.create(Array.prototype);Uo.instanceString=function(){return"collection"},Uo.spawn=function(f,c){return new la(this.cy(),f,c)},Uo.spawnSelf=function(){return this.spawn(this)},Uo.cy=function(){return this._private.cy},Uo.renderer=function(){return this._private.cy.renderer()},Uo.element=function(){return this[0]},Uo.collection=function(){return xn(this)?this:new la(this._private.cy,[this])},Uo.unique=function(){return new la(this._private.cy,this,!0)},Uo.hasElementWithId=function(f){return this._private.map.has(f=""+f)},Uo.getElementById=function(f){var c=this._private.cy,h=this._private.map.get(f=""+f);return h?h.ele:new la(c)},Uo.$id=Uo.getElementById,Uo.poolIndex=function(){return this._private.cy._private.elements._private.map.get(this[0]._private.data.id).index},Uo.indexOf=function(f){return this._private.map.get(f[0]._private.data.id).index},Uo.indexOfId=function(f){return this._private.map.get(f=""+f).index},Uo.json=function(f){var c=this.element(),h=this.cy();if(null==c&&f)return this;if(null!=c){var m=c._private;if(bt(f)){if(h.startBatch(),f.data){c.data(f.data);var _=m.data;if(c.isEdge()){var C=!1,w={},E=f.data.source,k=f.data.target;null!=E&&E!=_.source&&(w.source=""+E,C=!0),null!=k&&k!=_.target&&(w.target=""+k,C=!0),C&&(c=c.move(w))}else{var G=f.data.parent;"parent"in f.data&&(null!=G||null!=_.parent)&&G!=_.parent&&(void 0===G&&(G=null),null!=G&&(G=""+G),c=c.move({parent:G}))}}f.position&&c.position(f.position);var K=function(Ie,Ne,ze){var Qe=f[Ie];null!=Qe&&Qe!==m[Ie]&&(Qe?c[Ne]():c[ze]())};return K("removed","remove","restore"),K("selected","select","unselect"),K("selectable","selectify","unselectify"),K("locked","lock","unlock"),K("grabbable","grabify","ungrabify"),K("pannable","panify","unpanify"),null!=f.classes&&c.classes(f.classes),h.endBatch(),this}if(void 0===f){var le={data:$e(m.data),position:$e(m.position),group:m.group,removed:m.removed,selected:m.selected,selectable:m.selectable,locked:m.locked,grabbable:m.grabbable,pannable:m.pannable,classes:""},he=0;return m.classes.forEach(function(pe){return le.classes+=0==he++?pe:" "+pe}),le}}},Uo.jsons=function(){for(var f=[],c=0;c<this.length;c++){var m=this[c].json();f.push(m)}return f},Uo.clone=function(){for(var f=this.cy(),c=[],h=0;h<this.length;h++){var _=this[h].json(),C=new qa(f,_,!1);c.push(C)}return new la(f,c)},Uo.copy=Uo.clone,Uo.restore=function(){for(var E,f=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],h=this,m=h.cy(),_=m._private,C=[],w=[],k=0,L=h.length;k<L;k++){var G=h[k];c&&!G.removed()||(G.isNode()?C.push(G):w.push(G))}E=C.concat(w);var K,le=function(){E.splice(K,1),K--};for(K=0;K<E.length;K++){var he=E[K],pe=he._private,Ie=pe.data;if(he.clearTraversalCache(),c||pe.removed)if(void 0===Ie.id)Ie.id=zt();else if(Ut(Ie.id))Ie.id=""+Ie.id;else{if(be(Ie.id)||!He(Ie.id)){it("Can not create element with invalid string ID `"+Ie.id+"`"),le();continue}if(m.hasElementWithId(Ie.id)){it("Can not create second element with ID `"+Ie.id+"`"),le();continue}}var Ne=Ie.id;if(he.isNode()){var ze=pe.position;null==ze.x&&(ze.x=0),null==ze.y&&(ze.y=0)}if(he.isEdge()){for(var Qe=he,qe=["source","target"],ht=qe.length,Lt=!1,kt=0;kt<ht;kt++){var mt=qe[kt],Ft=Ie[mt];Ut(Ft)&&(Ft=Ie[mt]=""+Ie[mt]),null==Ft||""===Ft?(it("Can not create edge `"+Ne+"` with unspecified "+mt),Lt=!0):m.hasElementWithId(Ft)||(it("Can not create edge `"+Ne+"` with nonexistant "+mt+" `"+Ft+"`"),Lt=!0)}if(Lt){le();continue}var Ct=m.getElementById(Ie.source),Ht=m.getElementById(Ie.target);Ct.same(Ht)?Ct._private.edges.push(Qe):(Ct._private.edges.push(Qe),Ht._private.edges.push(Qe)),Qe._private.source=Ct,Qe._private.target=Ht}pe.map=new wo,pe.map.set(Ne,{ele:he,index:0}),pe.removed=!1,c&&m.addToPool(he)}for(var Vt=0;Vt<C.length;Vt++){var et=C[Vt],Gt=et._private.data;Ut(Gt.parent)&&(Gt.parent=""+Gt.parent);var Tt=Gt.parent,mn=null!=Tt;if(mn){var Yt=m.getElementById(Tt);if(Yt.empty())Gt.parent=void 0;else{for(var ln=!1,Sn=Yt;!Sn.empty();){if(et.same(Sn)){ln=!0,Gt.parent=void 0;break}Sn=Sn.parent()}ln||(Yt[0]._private.children.push(et),et._private.parent=Yt[0],_.hasCompoundNodes=!0)}}}if(E.length>0){for(var Rn=E.length===h.length?h:new la(m,E),Jn=0;Jn<Rn.length;Jn++){var En=Rn[Jn];En.isNode()||(En.parallelEdges().clearTraversalCache(),En.source().clearTraversalCache(),En.target().clearTraversalCache())}(_.hasCompoundNodes?m.collection().merge(Rn).merge(Rn.connectedNodes()).merge(Rn.parent()):Rn).dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(f),f?Rn.emitAndNotify("add"):c&&Rn.emit("add")}return h},Uo.removed=function(){var f=this[0];return f&&f._private.removed},Uo.inside=function(){var f=this[0];return f&&!f._private.removed},Uo.remove=function(){var f=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],h=this,m=[],_={},C=h._private.cy;function w(Tt){for(var mn=Tt._private.edges,Yt=0;Yt<mn.length;Yt++)k(mn[Yt])}function E(Tt){for(var mn=Tt._private.children,Yt=0;Yt<mn.length;Yt++)k(mn[Yt])}function k(Tt){var mn=_[Tt.id()];c&&Tt.removed()||mn||(_[Tt.id()]=!0,Tt.isNode()?(m.push(Tt),w(Tt),E(Tt)):m.unshift(Tt))}for(var L=0,G=h.length;L<G;L++){var K=h[L];k(K)}function le(Tt,mn){hi(Tt._private.edges,mn),Tt.clearTraversalCache()}function he(Tt){Tt.clearTraversalCache()}var pe=[];function Ie(Tt,mn){mn=mn[0];var Yt=(Tt=Tt[0])._private.children,ln=Tt.id();hi(Yt,mn),mn._private.parent=null,pe.ids[ln]||(pe.ids[ln]=!0,pe.push(Tt))}pe.ids={},h.dirtyCompoundBoundsCache(),c&&C.removeFromPool(m);for(var Ne=0;Ne<m.length;Ne++){var ze=m[Ne];if(ze.isEdge()){var Qe=ze.source()[0],qe=ze.target()[0];le(Qe,ze),le(qe,ze);for(var ht=ze.parallelEdges(),Lt=0;Lt<ht.length;Lt++){var kt=ht[Lt];he(kt),kt.isBundledBezier()&&kt.dirtyBoundingBoxCache()}}else{var mt=ze.parent();0!==mt.length&&Ie(mt,ze)}c&&(ze._private.removed=!0)}var Ft=C._private.elements;C._private.hasCompoundNodes=!1;for(var Ct=0;Ct<Ft.length;Ct++){var Ht=Ft[Ct];if(Ht.isParent()){C._private.hasCompoundNodes=!0;break}}var Vt=new la(this.cy(),m);Vt.size()>0&&(f?Vt.emitAndNotify("remove"):c&&Vt.emit("remove"));for(var et=0;et<pe.length;et++){var Gt=pe[et];(!c||!Gt.removed())&&Gt.updateStyle()}return Vt},Uo.move=function(f){var c=this._private.cy,h=this,m=!1,_=!1,C=function(pe){return null==pe?pe:""+pe};if(void 0!==f.source||void 0!==f.target){var w=C(f.source),E=C(f.target),k=null!=w&&c.hasElementWithId(w),L=null!=E&&c.hasElementWithId(E);(k||L)&&(c.batch(function(){h.remove(m,_),h.emitAndNotify("moveout");for(var he=0;he<h.length;he++){var pe=h[he],Ie=pe._private.data;pe.isEdge()&&(k&&(Ie.source=w),L&&(Ie.target=E))}h.restore(m,_)}),h.emitAndNotify("move"))}else if(void 0!==f.parent){var G=C(f.parent);if(null===G||c.hasElementWithId(G)){var le=null===G?void 0:G;c.batch(function(){var he=h.remove(m,_);he.emitAndNotify("moveout");for(var pe=0;pe<h.length;pe++){var Ie=h[pe],Ne=Ie._private.data;Ie.isNode()&&(Ne.parent=le)}he.restore(m,_)}),h.emitAndNotify("move")}}return this},[Dm,pl,Mc,Ol,Oo,Nh,_f,db,yo,Rc,{isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var c=this[0];if(c)return c._private.group}},kc,dd,al,Vo,Ka].forEach(function(f){tr(Uo,f)});var Os={add:function(c){var h,m=this;if(nn(c)){var _=c;if(_._private.cy===m)h=_.restore();else{for(var C=[],w=0;w<_.length;w++)C.push(_[w].json());h=new la(m,C)}}else if(gt(c))h=new la(m,c);else if(bt(c)&&(gt(c.nodes)||gt(c.edges))){for(var L=c,G=[],K=["nodes","edges"],le=0,he=K.length;le<he;le++){var pe=K[le],Ie=L[pe];if(gt(Ie))for(var Ne=0,ze=Ie.length;Ne<ze;Ne++){var Qe=tr({group:pe},Ie[Ne]);G.push(Qe)}}h=new la(m,G)}else h=new qa(m,c).collection();return h},remove:function(c){return nn(c)||He(c)&&(c=this.$(c)),c.remove()}},km=function(){function f(m){return-m.tension*m.x-m.friction*m.v}function c(m,_,C){var w={x:m.x+C.dx*_,v:m.v+C.dv*_,tension:m.tension,friction:m.friction};return{dx:w.v,dv:f(w)}}function h(m,_){var C={dx:m.v,dv:f(m)},w=c(m,.5*_,C),E=c(m,.5*_,w),k=c(m,_,E),G=1/6*(C.dv+2*(w.dv+E.dv)+k.dv);return m.x=m.x+1/6*(C.dx+2*(w.dx+E.dx)+k.dx)*_,m.v=m.v+G*_,m}return function m(_,C,w){var le,he,pe,E={x:-1,v:0,tension:null,friction:null},k=[0],L=0,G=1e-4;for(_=parseFloat(_)||500,C=parseFloat(C)||20,w=w||null,E.tension=_,E.friction=C,he=(le=null!==w)?(L=m(_,C))/w*.016:.016;pe=h(pe||E,he),k.push(1+pe.x),L+=16,Math.abs(pe.x)>G&&Math.abs(pe.v)>G;);return le?function(Ie){return k[Ie*(k.length-1)|0]}:L}}(),_o=function(c,h,m,_){var C=function Ji(f,c,h,m){var _=4,C=.001,w=1e-7,E=10,k=11,L=1/(k-1),G=typeof Float32Array<"u";if(4!==arguments.length)return!1;for(var K=0;K<4;++K)if("number"!=typeof arguments[K]||isNaN(arguments[K])||!isFinite(arguments[K]))return!1;f=Math.min(f,1),h=Math.min(h,1),f=Math.max(f,0),h=Math.max(h,0);var le=G?new Float32Array(k):new Array(k);function he(Ht,Vt){return 1-3*Vt+3*Ht}function pe(Ht,Vt){return 3*Vt-6*Ht}function Ie(Ht){return 3*Ht}function Ne(Ht,Vt,et){return((he(Vt,et)*Ht+pe(Vt,et))*Ht+Ie(Vt))*Ht}function ze(Ht,Vt,et){return 3*he(Vt,et)*Ht*Ht+2*pe(Vt,et)*Ht+Ie(Vt)}function Qe(Ht,Vt){for(var et=0;et<_;++et){var Gt=ze(Vt,f,h);if(0===Gt)return Vt;Vt-=(Ne(Vt,f,h)-Ht)/Gt}return Vt}function qe(){for(var Ht=0;Ht<k;++Ht)le[Ht]=Ne(Ht*L,f,h)}function ht(Ht,Vt,et){var Gt,Tt,mn=0;do{(Gt=Ne(Tt=Vt+(et-Vt)/2,f,h)-Ht)>0?et=Tt:Vt=Tt}while(Math.abs(Gt)>w&&++mn<E);return Tt}function Lt(Ht){for(var Vt=0,et=1,Gt=k-1;et!==Gt&&le[et]<=Ht;++et)Vt+=L;--et;var mn=Vt+(Ht-le[et])/(le[et+1]-le[et])*L,Yt=ze(mn,f,h);return Yt>=C?Qe(Ht,mn):0===Yt?mn:ht(Ht,Vt,Vt+L)}var kt=!1;function mt(){kt=!0,(f!==c||h!==m)&&qe()}var Ft=function(Vt){return kt||mt(),f===c&&h===m?Vt:0===Vt?0:1===Vt?1:Ne(Lt(Vt),c,m)};Ft.getControlPoints=function(){return[{x:f,y:c},{x:h,y:m}]};var Ct="generateBezier("+[f,c,h,m]+")";return Ft.toString=function(){return Ct},Ft}(c,h,m,_);return function(w,E,k){return w+(E-w)*C(k)}},If={linear:function(c,h,m){return c+(h-c)*m},ease:_o(.25,.1,.25,1),"ease-in":_o(.42,0,1,1),"ease-out":_o(0,0,.58,1),"ease-in-out":_o(.42,0,.58,1),"ease-in-sine":_o(.47,0,.745,.715),"ease-out-sine":_o(.39,.575,.565,1),"ease-in-out-sine":_o(.445,.05,.55,.95),"ease-in-quad":_o(.55,.085,.68,.53),"ease-out-quad":_o(.25,.46,.45,.94),"ease-in-out-quad":_o(.455,.03,.515,.955),"ease-in-cubic":_o(.55,.055,.675,.19),"ease-out-cubic":_o(.215,.61,.355,1),"ease-in-out-cubic":_o(.645,.045,.355,1),"ease-in-quart":_o(.895,.03,.685,.22),"ease-out-quart":_o(.165,.84,.44,1),"ease-in-out-quart":_o(.77,0,.175,1),"ease-in-quint":_o(.755,.05,.855,.06),"ease-out-quint":_o(.23,1,.32,1),"ease-in-out-quint":_o(.86,0,.07,1),"ease-in-expo":_o(.95,.05,.795,.035),"ease-out-expo":_o(.19,1,.22,1),"ease-in-out-expo":_o(1,0,0,1),"ease-in-circ":_o(.6,.04,.98,.335),"ease-out-circ":_o(.075,.82,.165,1),"ease-in-out-circ":_o(.785,.135,.15,.86),spring:function(c,h,m){if(0===m)return If.linear;var _=km(c,h,m);return function(C,w,E){return C+(w-C)*_(E)}},"cubic-bezier":_o};function Kp(f,c,h,m,_){if(1===m||c===h)return h;var C=_(c,h,m);return null==f||((f.roundValue||f.color)&&(C=Math.round(C)),void 0!==f.min&&(C=Math.max(C,f.min)),void 0!==f.max&&(C=Math.min(C,f.max))),C}function Zp(f,c){return null!=f.pfValue||null!=f.value?null==f.pfValue||null!=c&&"%"===c.type.units?f.value:f.pfValue:f}function vl(f,c,h,m,_){var C=null!=_?_.type:null;h<0?h=0:h>1&&(h=1);var w=Zp(f,_),E=Zp(c,_);if(Ut(w)&&Ut(E))return Kp(C,w,E,h,m);if(gt(w)&&gt(E)){for(var k=[],L=0;L<E.length;L++){var G=w[L],K=E[L];if(null!=G&&null!=K){var le=Kp(C,G,K,h,m);k.push(le)}else k.push(K)}return k}}function Sf(f,c,h,m){var _=!m,C=f._private,w=c._private,E=w.easing,k=w.startTime,G=(m?f:f.cy()).style();if(!w.easingImpl)if(null==E)w.easingImpl=If.linear;else{var K,he,pe;K=He(E)?G.parse("transition-timing-function",E).value:E,He(K)?(he=K,pe=[]):(he=K[1],pe=K.slice(2).map(function(Rn){return+Rn})),pe.length>0?("spring"===he&&pe.push(w.duration),w.easingImpl=If[he].apply(null,pe)):w.easingImpl=If[he]}var Ne,Ie=w.easingImpl;if(Ne=0===w.duration?1:(h-k)/w.duration,w.applying&&(Ne=w.progress),Ne<0?Ne=0:Ne>1&&(Ne=1),null==w.delay){var ze=w.startPosition,Qe=w.position;if(Qe&&_&&!f.locked()){var qe={};Ql(ze.x,Qe.x)&&(qe.x=vl(ze.x,Qe.x,Ne,Ie)),Ql(ze.y,Qe.y)&&(qe.y=vl(ze.y,Qe.y,Ne,Ie)),f.position(qe)}var ht=w.startPan,Lt=w.pan,kt=C.pan,mt=null!=Lt&&m;mt&&(Ql(ht.x,Lt.x)&&(kt.x=vl(ht.x,Lt.x,Ne,Ie)),Ql(ht.y,Lt.y)&&(kt.y=vl(ht.y,Lt.y,Ne,Ie)),f.emit("pan"));var Ft=w.startZoom,Ct=w.zoom,Ht=null!=Ct&&m;Ht&&(Ql(Ft,Ct)&&(C.zoom=Tr(C.minZoom,vl(Ft,Ct,Ne,Ie),C.maxZoom)),f.emit("zoom")),(mt||Ht)&&f.emit("viewport");var Vt=w.style;if(Vt&&Vt.length>0&&_){for(var et=0;et<Vt.length;et++){var Gt=Vt[et],Tt=Gt.name,Yt=w.startStyle[Tt],Sn=vl(Yt,Gt,Ne,Ie,G.properties[Yt.name]);G.overrideBypass(f,Tt,Sn)}f.emit("style")}}return w.progress=Ne,Ne}function Ql(f,c){return!!(null!=f&&null!=c&&(Ut(f)&&Ut(c)||f&&c))}function Qp(f,c,h,m){var _=c._private;_.started=!0,_.startTime=h-_.progress*_.duration}function Jp(f,c){var h=c._private.aniEles,m=[];function _(G,K){var le=G._private,he=le.animation.current,pe=le.animation.queue,Ie=!1;if(0===he.length){var Ne=pe.shift();Ne&&he.push(Ne)}for(var ze=function(kt){for(var mt=kt.length-1;mt>=0;mt--)(0,kt[mt])();kt.splice(0,kt.length)},Qe=he.length-1;Qe>=0;Qe--){var qe=he[Qe],ht=qe._private;ht.stopped?(he.splice(Qe,1),ht.hooked=!1,ht.playing=!1,ht.started=!1,ze(ht.frames)):!ht.playing&&!ht.applying||(ht.playing&&ht.applying&&(ht.applying=!1),ht.started||Qp(0,qe,f),Sf(G,qe,f,K),ht.applying&&(ht.applying=!1),ze(ht.frames),null!=ht.step&&ht.step(f),qe.completed()&&(he.splice(Qe,1),ht.hooked=!1,ht.playing=!1,ht.started=!1,ze(ht.completes)),Ie=!0)}return!K&&0===he.length&&0===pe.length&&m.push(G),Ie}for(var C=!1,w=0;w<h.length;w++){var k=_(h[w]);C=C||k}var L=_(c,!0);(C||L)&&(h.length>0?c.notify("draw",h):c.notify("draw")),h.unmerge(m),c.emit("step")}var Pa={animate:ms.animate(),animation:ms.animation(),animated:ms.animated(),clearQueue:ms.clearQueue(),delay:ms.delay(),delayAnimation:ms.delayAnimation(),stop:ms.stop(),addToAnimationPool:function(c){!this.styleEnabled()||this._private.aniEles.merge(c)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var c=this;if(c._private.animationsRunning=!0,c.styleEnabled()){var m=c.renderer();m&&m.beforeRender?m.beforeRender(function(C,w){Jp(w,c)},m.beforeRenderPriorities.animations):function h(){!c._private.animationsRunning||au(function(C){Jp(C,c),h()})}()}}},Nl={qualifierCompare:function(c,h){return null==c||null==h?null==c&&null==h:c.sameText(h)},eventMatches:function(c,h,m){var _=h.qualifier;return null==_||c!==m.target&&Ln(m.target)&&_.matches(m.target)},addEventFields:function(c,h){h.cy=c,h.target=c},callbackContext:function(c,h,m){return null!=h.qualifier?m.target:c}},Al=function(c){return He(c)?new rp(c):c},Bu={createEmitter:function(){var c=this._private;return c.emitter||(c.emitter=new fu(Nl,this)),this},emitter:function(){return this._private.emitter},on:function(c,h,m){return this.emitter().on(c,Al(h),m),this},removeListener:function(c,h,m){return this.emitter().removeListener(c,Al(h),m),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(c,h,m){return this.emitter().one(c,Al(h),m),this},once:function(c,h,m){return this.emitter().one(c,Al(h),m),this},emit:function(c,h){return this.emitter().emit(c,h),this},emitAndNotify:function(c,h){return this.emit(c),this.notify(c,h),this}};ms.eventAliasesOn(Bu);var $h={png:function(c){return this._private.renderer.png(c=c||{})},jpg:function(c){var h=this._private.renderer;return(c=c||{}).bg=c.bg||"#fff",h.jpg(c)}};$h.jpeg=$h.jpg;var Ua={layout:function(c){var h=this;if(null!=c)if(null!=c.name){var C,m=c.name,_=h.extension("layout",m);if(null!=_)return C=He(c.eles)?h.$(c.eles):null!=c.eles?c.eles:h.$(),new _(tr({},c,{cy:h,eles:C}));it("No such layout `"+m+"` found.  Did you forget to import it and `cytoscape.use()` it?")}else it("A `name` must be specified to make a layout");else it("Layout options must be specified to make a layout")}};Ua.createLayout=Ua.makeLayout=Ua.layout;var gu={notify:function(c,h){var m=this._private;if(this.batching()){m.batchNotifications=m.batchNotifications||{};var _=m.batchNotifications[c]=m.batchNotifications[c]||this.collection();null!=h&&_.merge(h)}else if(m.notificationsEnabled){var C=this.renderer();this.destroyed()||!C||C.notify(c,h)}},notifications:function(c){var h=this._private;return void 0===c?h.notificationsEnabled:(h.notificationsEnabled=!!c,this)},noNotifications:function(c){this.notifications(!1),c(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var c=this._private;return null==c.batchCount&&(c.batchCount=0),0===c.batchCount&&(c.batchStyleEles=this.collection(),c.batchNotifications={}),c.batchCount++,this},endBatch:function(){var c=this._private;if(0===c.batchCount)return this;if(c.batchCount--,0===c.batchCount){c.batchStyleEles.updateStyle();var h=this.renderer();Object.keys(c.batchNotifications).forEach(function(m){var _=c.batchNotifications[m];_.empty()?h.notify(m):h.notify(m,_)})}return this},batch:function(c){return this.startBatch(),c(),this.endBatch(),this},batchData:function(c){var h=this;return this.batch(function(){for(var m=Object.keys(c),_=0;_<m.length;_++){var C=m[_],w=c[C];h.getElementById(C).data(w)}})}},zu=ti({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),Vu={renderTo:function(c,h,m,_){return this._private.renderer.renderTo(c,h,m,_),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(c){var h=this,m=h.extension("renderer",c.name);if(null!=m){void 0!==c.wheelSensitivity&&de("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var _=zu(c);_.cy=h,h._private.renderer=new m(_),this.notify("init")}else it("Can not initialise: No such renderer `".concat(c.name,"` found. Did you forget to import it and `cytoscape.use()` it?"))},destroyRenderer:function(){var c=this;c.notify("destroy");var h=c.container();if(h)for(h._cyreg=null;h.childNodes.length>0;)h.removeChild(h.childNodes[0]);c._private.renderer=null,c.mutableElements().forEach(function(m){var _=m._private;_.rscratch={},_.rstyle={},_.animation.current=[],_.animation.queue=[]})},onRender:function(c){return this.on("render",c)},offRender:function(c){return this.off("render",c)}};Vu.invalidateDimensions=Vu.resize;var Il={collection:function(c,h){return He(c)?this.$(c):nn(c)?c.collection():gt(c)?new la(this,c,h):new la(this)},nodes:function(c){var h=this.$(function(m){return m.isNode()});return c?h.filter(c):h},edges:function(c){var h=this.$(function(m){return m.isEdge()});return c?h.filter(c):h},$:function(c){var h=this._private.elements;return c?h.filter(c):h.spawnSelf()},mutableElements:function(){return this._private.elements}};Il.elements=Il.filter=Il.$;var Ra={apply:function(f){for(var c=this,_=c._private.cy.collection(),C=0;C<f.length;C++){var w=f[C],E=c.getContextMeta(w);if(!E.empty){var k=c.getContextStyle(E),L=c.applyContextStyle(E,k,w);w._private.appliedInitStyle?c.updateTransitions(w,L.diffProps):w._private.appliedInitStyle=!0,c.updateStyleHints(w)&&_.push(w)}}return _},getPropertiesDiff:function(f,c){var h=this,m=h._private.propDiffs=h._private.propDiffs||{},_=f+"-"+c,C=m[_];if(C)return C;for(var w=[],E={},k=0;k<h.length;k++){var L=h[k],K="t"===c[k],le="t"===f[k]!==K,he=L.mappedProperties.length>0;if(le||K&&he){var pe=void 0;le&&he||le?pe=L.properties:he&&(pe=L.mappedProperties);for(var Ie=0;Ie<pe.length;Ie++){for(var Ne=pe[Ie],ze=Ne.name,Qe=!1,qe=k+1;qe<h.length&&("t"!==c[qe]||!(Qe=null!=h[qe].properties[Ne.name]));qe++);!E[ze]&&!Qe&&(E[ze]=!0,w.push(ze))}}}return m[_]=w,w},getContextMeta:function(f){for(var m,c=this,h="",_=f._private.styleCxtKey||"",C=0;C<c.length;C++){var w=c[C];h+=w.selector&&w.selector.matches(f)?"t":"f"}return m=c.getPropertiesDiff(_,h),f._private.styleCxtKey=h,{key:h,diffPropNames:m,empty:0===m.length}},getContextStyle:function(f){var c=f.key,m=this._private.contextStyles=this._private.contextStyles||{};if(m[c])return m[c];for(var _={_private:{key:c}},C=0;C<this.length;C++){var w=this[C];if("t"===c[C])for(var k=0;k<w.properties.length;k++){var L=w.properties[k];_[L.name]=L}}return m[c]=_,_},applyContextStyle:function(f,c,h){for(var _=f.diffPropNames,C={},w=this.types,E=0;E<_.length;E++){var k=_[E],L=c[k],G=h.pstyle(k);if(!L){if(!G)continue;L=G.bypass?{name:k,deleteBypassed:!0}:{name:k,delete:!0}}if(G!==L){if(L.mapped===w.fn&&null!=G&&null!=G.mapping&&G.mapping.value===L.value){var K=G.mapping;if((K.fnValue=L.value(h))===K.prevFnValue)continue}var he=C[k]={prev:G};this.applyParsedProperty(h,L),he.next=h.pstyle(k),he.next&&he.next.bypass&&(he.next=he.next.bypassed)}}return{diffProps:C}},updateStyleHints:function(f){var m,c=f._private,h=this,_=h.propertyGroupKeys,C=function(ji,rr,Br){return h.getPropertiesHash(ji,rr,Br)},w=c.styleKey;if(f.removed())return!1;var ji,E="nodes"===c.group,k=f._private.style;m=Object.keys(k);for(var L=0;L<_.length;L++)c.styleKeys[_[L]]=[Sd,th];for(var K=function(ji,rr){return c.styleKeys[rr][0]=nh(ji,c.styleKeys[rr][0])},le=function(ji,rr){return c.styleKeys[rr][1]=hl(ji,c.styleKeys[rr][1])},he=function(ji,rr){K(ji,rr),le(ji,rr)},pe=function(ji,rr){for(var Br=0;Br<ji.length;Br++){var Kr=ji.charCodeAt(Br);K(Kr,rr),le(Kr,rr)}},ze=0;ze<m.length;ze++){var Qe=m[ze],qe=k[Qe];if(null!=qe){var ht=this.properties[Qe],Lt=ht.type,kt=ht.groupKey,mt=void 0;null!=ht.hashOverride?mt=ht.hashOverride(f,qe):null!=qe.pfValue&&(mt=qe.pfValue);var Ft=null==ht.enums?qe.value:null,Ct=null!=mt,et=qe.units;!Lt.number||!Ct&&null==Ft||Lt.multiple?pe(qe.strValue,kt):(he(-128<(ji=Ct?mt:Ft)&&ji<128&&Math.floor(ji)!==ji?2e9-(1024*ji|0):ji,kt),!Ct&&null!=et&&pe(et,kt))}}for(var Tt=[Sd,th],mn=0;mn<_.length;mn++){var ln=c.styleKeys[_[mn]];Tt[0]=nh(ln[0],Tt[0]),Tt[1]=hl(ln[1],Tt[1])}c.styleKey=function(c,h){return 2097152*c+h}(Tt[0],Tt[1]);var Sn=c.styleKeys;c.labelDimsKey=nd(Sn.labelDimensions);var Rn=C(f,["label"],Sn.labelDimensions);if(c.labelKey=nd(Rn),c.labelStyleKey=nd(ff(Sn.commonLabel,Rn)),!E){var Jn=C(f,["source-label"],Sn.labelDimensions);c.sourceLabelKey=nd(Jn),c.sourceLabelStyleKey=nd(ff(Sn.commonLabel,Jn));var En=C(f,["target-label"],Sn.labelDimensions);c.targetLabelKey=nd(En),c.targetLabelStyleKey=nd(ff(Sn.commonLabel,En))}if(E){var Yn=c.styleKeys,Mn=Yn.pie,si=[Yn.nodeBody,Yn.nodeBorder,Yn.backgroundImage,Yn.compound,Mn].filter(function(xi){return null!=xi}).reduce(ff,[Sd,th]);c.nodeKey=nd(si),c.hasPie=null!=Mn&&Mn[0]!==Sd&&Mn[1]!==th}return w!==c.styleKey},clearStyleHints:function(f){var c=f._private;c.styleCxtKey="",c.styleKeys={},c.styleKey=null,c.labelKey=null,c.labelStyleKey=null,c.sourceLabelKey=null,c.sourceLabelStyleKey=null,c.targetLabelKey=null,c.targetLabelStyleKey=null,c.nodeKey=null,c.hasPie=null},applyParsedProperty:function(f,c){var C,h=this,m=c,_=f._private.style,w=h.types,E=h.properties[m.name].type,k=m.bypass,L=_[m.name],G=L&&L.bypass,K=f._private,le="mapping",he=function(li){return null==li?null:null!=li.pfValue?li.pfValue:li.value},pe=function(){var li=he(L),bi=he(m);h.checkTriggers(f,m.name,li,bi)};if(m&&"pie"===m.name.substr(0,3)&&de("The pie style properties are deprecated.  Create charts using background images instead."),"curve-style"===c.name&&f.isEdge()&&("bezier"!==c.value&&f.isLoop()||"haystack"===c.value&&(f.source().isParent()||f.target().isParent()))&&(m=c=this.parse(c.name,"bezier",k)),m.delete)return _[m.name]=void 0,pe(),!0;if(m.deleteBypassed)return L?!!L.bypass&&(L.bypassed=void 0,pe(),!0):(pe(),!0);if(m.deleteBypass)return L?!!L.bypass&&(_[m.name]=L.bypassed,pe(),!0):(pe(),!0);var Ie=function(){de("Do not assign mappings to elements without corresponding data (i.e. ele `"+f.id()+"` has no mapping for property `"+m.name+"` with data field `"+m.field+"`); try a `["+m.field+"]` selector to limit scope to elements with `"+m.field+"` defined")};switch(m.mapped){case w.mapData:for(var Ne=m.field.split("."),ze=K.data,Qe=0;Qe<Ne.length&&ze;Qe++)ze=ze[Ne[Qe]];if(null==ze)return Ie(),!1;var ht;if(!Ut(ze))return de("Do not use continuous mappers without specifying numeric data (i.e. `"+m.field+": "+ze+"` for `"+f.id()+"` is non-numeric)"),!1;var Lt=m.fieldMax-m.fieldMin;if((ht=0===Lt?0:(ze-m.fieldMin)/Lt)<0?ht=0:ht>1&&(ht=1),E.color){var kt=m.valueMin[0],Ft=m.valueMin[1],Ct=m.valueMax[1],Ht=m.valueMin[2],Vt=m.valueMax[2],et=m.valueMin[3]??1,Gt=m.valueMax[3]??1,Tt=[Math.round(kt+(m.valueMax[0]-kt)*ht),Math.round(Ft+(Ct-Ft)*ht),Math.round(Ht+(Vt-Ht)*ht),Math.round(et+(Gt-et)*ht)];C={bypass:m.bypass,name:m.name,value:Tt,strValue:"rgb("+Tt[0]+", "+Tt[1]+", "+Tt[2]+")"}}else{if(!E.number)return!1;C=this.parse(m.name,m.valueMin+(m.valueMax-m.valueMin)*ht,m.bypass,le)}if(!C)return Ie(),!1;C.mapping=m,m=C;break;case w.data:for(var Yt=m.field.split("."),ln=K.data,Sn=0;Sn<Yt.length&&ln;Sn++)ln=ln[Yt[Sn]];if(null!=ln&&(C=this.parse(m.name,ln,m.bypass,le)),!C)return Ie(),!1;C.mapping=m,m=C;break;case w.fn:var En=null!=m.fnValue?m.fnValue:(0,m.value)(f);if(m.prevFnValue=En,null==En)return de("Custom function mappers may not return null (i.e. `"+m.name+"` for ele `"+f.id()+"` is null)"),!1;if(!(C=this.parse(m.name,En,m.bypass,le)))return de("Custom function mappers may not return invalid values for the property type (i.e. `"+m.name+"` for ele `"+f.id()+"` is invalid)"),!1;C.mapping=$e(m),m=C;break;case void 0:break;default:return!1}return k?(m.bypassed=G?L.bypassed:L,_[m.name]=m):G?L.bypassed=m:_[m.name]=m,pe(),!0},cleanElements:function(f,c){for(var h=0;h<f.length;h++){var m=f[h];if(this.clearStyleHints(m),m.dirtyCompoundBoundsCache(),m.dirtyBoundingBoxCache(),c)for(var _=m._private.style,C=Object.keys(_),w=0;w<C.length;w++){var E=C[w],k=_[E];null!=k&&(k.bypass?k.bypassed=null:_[E]=null)}else m._private.style={}}},update:function(){this._private.cy.mutableElements().updateStyle()},updateTransitions:function(f,c){var h=this,m=f._private,_=f.pstyle("transition-property").value,C=f.pstyle("transition-duration").pfValue,w=f.pstyle("transition-delay").pfValue;if(_.length>0&&C>0){for(var E={},k=!1,L=0;L<_.length;L++){var G=_[L],K=f.pstyle(G),le=c[G];if(le){var pe=le.prev,Ie=null!=le.next?le.next:K,Ne=!1,ze=void 0;!pe||(Ut(pe.pfValue)&&Ut(Ie.pfValue)?ze=pe.pfValue+1e-6*(Ne=Ie.pfValue-pe.pfValue):Ut(pe.value)&&Ut(Ie.value)?ze=pe.value+1e-6*(Ne=Ie.value-pe.value):gt(pe.value)&&gt(Ie.value)&&(Ne=pe.value[0]!==Ie.value[0]||pe.value[1]!==Ie.value[1]||pe.value[2]!==Ie.value[2],ze=pe.strValue),Ne&&(E[G]=Ie.strValue,this.applyBypass(f,G,ze),k=!0))}}if(!k)return;m.transitioning=!0,new ra(function(qe){w>0?f.delayAnimation(w).play().promise().then(qe):qe()}).then(function(){return f.animation({style:E,duration:C,easing:f.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){h.removeBypasses(f,_),f.emitAndNotify("style"),m.transitioning=!1})}else m.transitioning&&(this.removeBypasses(f,_),f.emitAndNotify("style"),m.transitioning=!1)},checkTrigger:function(f,c,h,m,_,C){var w=this.properties[c],E=_(w);null!=E&&E(h,m)&&C(w)},checkZOrderTrigger:function(f,c,h,m){var _=this;this.checkTrigger(f,c,h,m,function(C){return C.triggersZOrder},function(){_._private.cy.notify("zorder",f)})},checkBoundsTrigger:function(f,c,h,m){this.checkTrigger(f,c,h,m,function(_){return _.triggersBounds},function(_){f.dirtyCompoundBoundsCache(),f.dirtyBoundingBoxCache(),_.triggersBoundsOfParallelBeziers&&("curve-style"===c&&("bezier"===h||"bezier"===m)||"display"===c&&("none"===h||"none"===m))&&f.parallelEdges().forEach(function(C){C.isBundledBezier()&&C.dirtyBoundingBoxCache()})})},checkTriggers:function(f,c,h,m){f.dirtyStyleCache(),this.checkZOrderTrigger(f,c,h,m),this.checkBoundsTrigger(f,c,h,m)}},dc={applyBypass:function(f,c,h,m){var C=[];if("*"===c||"**"===c){if(void 0!==h)for(var E=0;E<this.properties.length;E++){var G=this.parse(this.properties[E].name,h,!0);G&&C.push(G)}}else if(He(c)){var K=this.parse(c,h,!0);K&&C.push(K)}else{if(!bt(c))return!1;var le=c;m=h;for(var he=Object.keys(le),pe=0;pe<he.length;pe++){var Ie=he[pe],Ne=le[Ie];if(void 0===Ne&&(Ne=le[un(Ie)]),void 0!==Ne){var ze=this.parse(Ie,Ne,!0);ze&&C.push(ze)}}}if(0===C.length)return!1;for(var Qe=!1,qe=0;qe<f.length;qe++){for(var ht=f[qe],Lt={},kt=void 0,mt=0;mt<C.length;mt++){var Ft=C[mt];if(m){var Ct=ht.pstyle(Ft.name);kt=Lt[Ft.name]={prev:Ct}}Qe=this.applyParsedProperty(ht,$e(Ft))||Qe,m&&(kt.next=ht.pstyle(Ft.name))}Qe&&this.updateStyleHints(ht),m&&this.updateTransitions(ht,Lt,!0)}return Qe},overrideBypass:function(f,c,h){c=Pt(c);for(var m=0;m<f.length;m++){var _=f[m],C=_._private.style[c],w=this.properties[c].type,E=w.color,k=w.mutiple,L=C?null!=C.pfValue?C.pfValue:C.value:null;C&&C.bypass?(C.value=h,null!=C.pfValue&&(C.pfValue=h),C.strValue=E?"rgb("+h.join(",")+")":k?h.join(" "):""+h,this.updateStyleHints(_)):this.applyBypass(_,c,h),this.checkTriggers(_,c,L,h)}},removeAllBypasses:function(f,c){return this.removeBypasses(f,this.propertyNames,c)},removeBypasses:function(f,c,h){for(var _=0;_<f.length;_++){for(var C=f[_],w={},E=0;E<c.length;E++){var k=c[E],L=this.properties[k],G=C.pstyle(L.name);if(G&&G.bypass){var le=this.parse(k,"",!0),he=w[L.name]={prev:G};this.applyParsedProperty(C,le),he.next=C.pstyle(L.name)}}this.updateStyleHints(C),h&&this.updateTransitions(C,w,!0)}}},Rv={getEmSizeInPixels:function(){var f=this.containerCss("font-size");return null!=f?parseFloat(f):1},containerCss:function(f){var h=this._private.cy.container();if(ge&&h&&ge.getComputedStyle)return ge.getComputedStyle(h).getPropertyValue(f)}},mu={getRenderedStyle:function(f,c){return c?this.getStylePropertyValue(f,c,!0):this.getRawStyle(f,!0)},getRawStyle:function(f,c){var h=this;if(f=f[0]){for(var m={},_=0;_<h.properties.length;_++){var C=h.properties[_],w=h.getStylePropertyValue(f,C.name,c);null!=w&&(m[C.name]=w,m[un(C.name)]=w)}return m}},getIndexedStyle:function(f,c,h,m){return f.pstyle(c)[h][m]??f.cy().style().getDefaultProperty(c)[h][0]},getStylePropertyValue:function(f,c,h){if(f=f[0]){var _=this.properties[c];_.alias&&(_=_.pointsTo);var C=_.type,w=f.pstyle(_.name);if(w){var E=w.value,k=w.units,L=w.strValue;if(h&&C.number&&null!=E&&Ut(E)){var G=f.cy().zoom(),K=function(Ne){return Ne*G},le=function(Ne,ze){return K(Ne)+ze},he=gt(E);return(he?k.every(function(Ie){return null!=Ie}):null!=k)?he?E.map(function(Ie,Ne){return le(Ie,k[Ne])}).join(" "):le(E,k):he?E.map(function(Ie){return He(Ie)?Ie:""+K(Ie)}).join(" "):""+K(E)}if(null!=L)return L}return null}},getAnimationStartStyle:function(f,c){for(var h={},m=0;m<c.length;m++){var C=c[m].name,w=f.pstyle(C);void 0!==w&&(w=bt(w)?this.parse(C,w.strValue):this.parse(C,w)),w&&(h[C]=w)}return h},getPropsList:function(f){var h=[],m=f,_=this.properties;if(m)for(var C=Object.keys(m),w=0;w<C.length;w++){var E=C[w],k=m[E],L=_[E]||_[Pt(E)],G=this.parse(L.name,k);G&&h.push(G)}return h},getNonDefaultPropertiesHash:function(f,c,h){var C,w,E,k,L,m=h.slice();for(k=0;k<c.length;k++)if(null!=(C=f.pstyle(c[k],!1)))if(null!=C.pfValue)m[0]=nh(E,m[0]),m[1]=hl(E,m[1]);else for(w=C.strValue,L=0;L<w.length;L++)E=w.charCodeAt(L),m[0]=nh(E,m[0]),m[1]=hl(E,m[1]);return m}};mu.getPropertiesHash=mu.getNonDefaultPropertiesHash;var Sl={appendFromJson:function(f){for(var c=this,h=0;h<f.length;h++){var m=f[h],_=m.selector,C=m.style||m.css,w=Object.keys(C);c.selector(_);for(var E=0;E<w.length;E++){var k=w[E];c.css(k,C[k])}}return c},fromJson:function(f){var c=this;return c.resetToDefault(),c.appendFromJson(f),c},json:function(){for(var f=[],c=this.defaultLength;c<this.length;c++){for(var h=this[c],m=h.selector,_=h.properties,C={},w=0;w<_.length;w++){var E=_[w];C[E.name]=E.strValue}f.push({selector:m?m.toString():"core",style:C})}return f}},hc={appendFromString:function(f){var _,C,w,h=this,m=""+f;function E(){m=m.length>_.length?m.substr(_.length):""}function k(){C=C.length>w.length?C.substr(w.length):""}for(m=m.replace(/[/][*](\s|.)+?[*][/]/g,"");!m.match(/^\s*$/);){var G=m.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!G){de("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+m);break}_=G[0];var K=G[1];if("core"!==K&&new rp(K).invalid)de("Skipping parsing of block: Invalid selector found in string stylesheet: "+K),E();else{var he=G[2],pe=!1;C=he;for(var Ie=[];!C.match(/^\s*$/);){var ze=C.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!ze){de("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+he),pe=!0;break}w=ze[0];var Qe=ze[1],qe=ze[2];this.properties[Qe]?h.parse(Qe,qe)?(Ie.push({name:Qe,val:qe}),k()):(de("Skipping property: Invalid property definition in: "+w),k()):(de("Skipping property: Invalid property name in: "+w),k())}if(pe){E();break}h.selector(K);for(var kt=0;kt<Ie.length;kt++){var mt=Ie[kt];h.css(mt.name,mt.val)}E()}}return h},fromString:function(f){var c=this;return c.resetToDefault(),c.appendFromString(f),c}},So={};(function(){var f=De,C=function(si){return"^"+si+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},w=function(si){var xi=f+"|\\w+|rgb[a]?\\((?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)(?:\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)|hsl[a]?\\((?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])(?:\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)|\\#[0-9a-fA-F]{3}|\\#[0-9a-fA-F]{6}";return"^"+si+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+f+")\\s*\\,\\s*("+f+")\\s*,\\s*("+xi+")\\s*\\,\\s*("+xi+")\\)$"},E=["^url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)$","^(none)$","^(.+)$"];So.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:C("data")},layoutData:{mapping:!0,regex:C("layoutData")},scratch:{mapping:!0,regex:C("scratch")},mapData:{mapping:!0,regex:w("mapData")},mapLayoutData:{mapping:!0,regex:w("mapLayoutData")},mapScratch:{mapping:!0,regex:w("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:E,singleRegexMatchValue:!0},urls:{regexes:E,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(si,xi){switch(si.length){case 2:return"deg"!==xi[0]&&"rad"!==xi[0]&&"deg"!==xi[1]&&"rad"!==xi[1];case 1:return He(si[0])||"deg"===xi[0]||"rad"===xi[0];default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+f+")\\s*,\\s*("+f+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+f+")\\s*,\\s*("+f+")\\s*,\\s*("+f+")\\s*,\\s*("+f+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(si){var xi=si.length;return 1===xi||2===xi||4===xi}}};var k={zeroNonZero:function(si,xi){return(null==si||null==xi)&&si!==xi||0==si&&0!=xi||0!=si&&0==xi},any:function(si,xi){return si!=xi},emptyNonEmpty:function(si,xi){var ji=be(si),rr=be(xi);return ji&&!rr||!ji&&rr}},L=So.types,G=[{name:"label",type:L.text,triggersBounds:k.any,triggersZOrder:k.emptyNonEmpty},{name:"text-rotation",type:L.textRotation,triggersBounds:k.any},{name:"text-margin-x",type:L.bidirectionalSize,triggersBounds:k.any},{name:"text-margin-y",type:L.bidirectionalSize,triggersBounds:k.any}],K=[{name:"source-label",type:L.text,triggersBounds:k.any},{name:"source-text-rotation",type:L.textRotation,triggersBounds:k.any},{name:"source-text-margin-x",type:L.bidirectionalSize,triggersBounds:k.any},{name:"source-text-margin-y",type:L.bidirectionalSize,triggersBounds:k.any},{name:"source-text-offset",type:L.size,triggersBounds:k.any}],le=[{name:"target-label",type:L.text,triggersBounds:k.any},{name:"target-text-rotation",type:L.textRotation,triggersBounds:k.any},{name:"target-text-margin-x",type:L.bidirectionalSize,triggersBounds:k.any},{name:"target-text-margin-y",type:L.bidirectionalSize,triggersBounds:k.any},{name:"target-text-offset",type:L.size,triggersBounds:k.any}],he=[{name:"font-family",type:L.fontFamily,triggersBounds:k.any},{name:"font-style",type:L.fontStyle,triggersBounds:k.any},{name:"font-weight",type:L.fontWeight,triggersBounds:k.any},{name:"font-size",type:L.size,triggersBounds:k.any},{name:"text-transform",type:L.textTransform,triggersBounds:k.any},{name:"text-wrap",type:L.textWrap,triggersBounds:k.any},{name:"text-overflow-wrap",type:L.textOverflowWrap,triggersBounds:k.any},{name:"text-max-width",type:L.size,triggersBounds:k.any},{name:"text-outline-width",type:L.size,triggersBounds:k.any},{name:"line-height",type:L.positiveNumber,triggersBounds:k.any}],pe=[{name:"text-valign",type:L.valign,triggersBounds:k.any},{name:"text-halign",type:L.halign,triggersBounds:k.any},{name:"color",type:L.color},{name:"text-outline-color",type:L.color},{name:"text-outline-opacity",type:L.zeroOneNumber},{name:"text-background-color",type:L.color},{name:"text-background-opacity",type:L.zeroOneNumber},{name:"text-background-padding",type:L.size,triggersBounds:k.any},{name:"text-border-opacity",type:L.zeroOneNumber},{name:"text-border-color",type:L.color},{name:"text-border-width",type:L.size,triggersBounds:k.any},{name:"text-border-style",type:L.borderStyle,triggersBounds:k.any},{name:"text-background-shape",type:L.textBackgroundShape,triggersBounds:k.any},{name:"text-justification",type:L.justification}],Ie=[{name:"events",type:L.bool},{name:"text-events",type:L.bool}],Ne=[{name:"display",type:L.display,triggersZOrder:k.any,triggersBounds:k.any,triggersBoundsOfParallelBeziers:!0},{name:"visibility",type:L.visibility,triggersZOrder:k.any},{name:"opacity",type:L.zeroOneNumber,triggersZOrder:k.zeroNonZero},{name:"text-opacity",type:L.zeroOneNumber},{name:"min-zoomed-font-size",type:L.size},{name:"z-compound-depth",type:L.zCompoundDepth,triggersZOrder:k.any},{name:"z-index-compare",type:L.zIndexCompare,triggersZOrder:k.any},{name:"z-index",type:L.nonNegativeInt,triggersZOrder:k.any}],ze=[{name:"overlay-padding",type:L.size,triggersBounds:k.any},{name:"overlay-color",type:L.color},{name:"overlay-opacity",type:L.zeroOneNumber,triggersBounds:k.zeroNonZero},{name:"overlay-shape",type:L.overlayShape,triggersBounds:k.any}],Qe=[{name:"underlay-padding",type:L.size,triggersBounds:k.any},{name:"underlay-color",type:L.color},{name:"underlay-opacity",type:L.zeroOneNumber,triggersBounds:k.zeroNonZero},{name:"underlay-shape",type:L.overlayShape,triggersBounds:k.any}],qe=[{name:"transition-property",type:L.propList},{name:"transition-duration",type:L.time},{name:"transition-delay",type:L.time},{name:"transition-timing-function",type:L.easing}],ht=function(si,xi){return"label"===xi.value?-si.poolIndex():xi.pfValue},Lt=[{name:"height",type:L.nodeSize,triggersBounds:k.any,hashOverride:ht},{name:"width",type:L.nodeSize,triggersBounds:k.any,hashOverride:ht},{name:"shape",type:L.nodeShape,triggersBounds:k.any},{name:"shape-polygon-points",type:L.polygonPointList,triggersBounds:k.any},{name:"background-color",type:L.color},{name:"background-fill",type:L.fill},{name:"background-opacity",type:L.zeroOneNumber},{name:"background-blacken",type:L.nOneOneNumber},{name:"background-gradient-stop-colors",type:L.colors},{name:"background-gradient-stop-positions",type:L.percentages},{name:"background-gradient-direction",type:L.gradientDirection},{name:"padding",type:L.sizeMaybePercent,triggersBounds:k.any},{name:"padding-relative-to",type:L.paddingRelativeTo,triggersBounds:k.any},{name:"bounds-expansion",type:L.boundsExpansion,triggersBounds:k.any}],kt=[{name:"border-color",type:L.color},{name:"border-opacity",type:L.zeroOneNumber},{name:"border-width",type:L.size,triggersBounds:k.any},{name:"border-style",type:L.borderStyle}],mt=[{name:"background-image",type:L.urls},{name:"background-image-crossorigin",type:L.bgCrossOrigin},{name:"background-image-opacity",type:L.zeroOneNumbers},{name:"background-image-containment",type:L.bgContainment},{name:"background-image-smoothing",type:L.bools},{name:"background-position-x",type:L.bgPos},{name:"background-position-y",type:L.bgPos},{name:"background-width-relative-to",type:L.bgRelativeTo},{name:"background-height-relative-to",type:L.bgRelativeTo},{name:"background-repeat",type:L.bgRepeat},{name:"background-fit",type:L.bgFit},{name:"background-clip",type:L.bgClip},{name:"background-width",type:L.bgWH},{name:"background-height",type:L.bgWH},{name:"background-offset-x",type:L.bgPos},{name:"background-offset-y",type:L.bgPos}],Ft=[{name:"position",type:L.position,triggersBounds:k.any},{name:"compound-sizing-wrt-labels",type:L.compoundIncludeLabels,triggersBounds:k.any},{name:"min-width",type:L.size,triggersBounds:k.any},{name:"min-width-bias-left",type:L.sizeMaybePercent,triggersBounds:k.any},{name:"min-width-bias-right",type:L.sizeMaybePercent,triggersBounds:k.any},{name:"min-height",type:L.size,triggersBounds:k.any},{name:"min-height-bias-top",type:L.sizeMaybePercent,triggersBounds:k.any},{name:"min-height-bias-bottom",type:L.sizeMaybePercent,triggersBounds:k.any}],Ct=[{name:"line-style",type:L.lineStyle},{name:"line-color",type:L.color},{name:"line-fill",type:L.fill},{name:"line-cap",type:L.lineCap},{name:"line-opacity",type:L.zeroOneNumber},{name:"line-dash-pattern",type:L.numbers},{name:"line-dash-offset",type:L.number},{name:"line-gradient-stop-colors",type:L.colors},{name:"line-gradient-stop-positions",type:L.percentages},{name:"curve-style",type:L.curveStyle,triggersBounds:k.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:L.zeroOneNumber,triggersBounds:k.any},{name:"source-endpoint",type:L.edgeEndpoint,triggersBounds:k.any},{name:"target-endpoint",type:L.edgeEndpoint,triggersBounds:k.any},{name:"control-point-step-size",type:L.size,triggersBounds:k.any},{name:"control-point-distances",type:L.bidirectionalSizes,triggersBounds:k.any},{name:"control-point-weights",type:L.numbers,triggersBounds:k.any},{name:"segment-distances",type:L.bidirectionalSizes,triggersBounds:k.any},{name:"segment-weights",type:L.numbers,triggersBounds:k.any},{name:"taxi-turn",type:L.bidirectionalSizeMaybePercent,triggersBounds:k.any},{name:"taxi-turn-min-distance",type:L.size,triggersBounds:k.any},{name:"taxi-direction",type:L.axisDirection,triggersBounds:k.any},{name:"edge-distances",type:L.edgeDistances,triggersBounds:k.any},{name:"arrow-scale",type:L.positiveNumber,triggersBounds:k.any},{name:"loop-direction",type:L.angle,triggersBounds:k.any},{name:"loop-sweep",type:L.angle,triggersBounds:k.any},{name:"source-distance-from-node",type:L.size,triggersBounds:k.any},{name:"target-distance-from-node",type:L.size,triggersBounds:k.any}],Ht=[{name:"ghost",type:L.bool,triggersBounds:k.any},{name:"ghost-offset-x",type:L.bidirectionalSize,triggersBounds:k.any},{name:"ghost-offset-y",type:L.bidirectionalSize,triggersBounds:k.any},{name:"ghost-opacity",type:L.zeroOneNumber}],Vt=[{name:"selection-box-color",type:L.color},{name:"selection-box-opacity",type:L.zeroOneNumber},{name:"selection-box-border-color",type:L.color},{name:"selection-box-border-width",type:L.size},{name:"active-bg-color",type:L.color},{name:"active-bg-opacity",type:L.zeroOneNumber},{name:"active-bg-size",type:L.size},{name:"outside-texture-bg-color",type:L.color},{name:"outside-texture-bg-opacity",type:L.zeroOneNumber}],et=[];So.pieBackgroundN=16,et.push({name:"pie-size",type:L.sizeMaybePercent});for(var Gt=1;Gt<=So.pieBackgroundN;Gt++)et.push({name:"pie-"+Gt+"-background-color",type:L.color}),et.push({name:"pie-"+Gt+"-background-size",type:L.percent}),et.push({name:"pie-"+Gt+"-background-opacity",type:L.zeroOneNumber});var Tt=[],mn=So.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:L.arrowShape,triggersBounds:k.any},{name:"arrow-color",type:L.color},{name:"arrow-fill",type:L.arrowFill}].forEach(function(Mn){mn.forEach(function(si){Tt.push({name:si+"-"+Mn.name,type:Mn.type,triggersBounds:Mn.triggersBounds})})},{});var Yt=So.properties=[].concat(Ie,qe,Ne,ze,Qe,Ht,pe,he,G,K,le,Lt,kt,mt,et,Ft,Ct,Tt,Vt),ln=So.propertyGroups={behavior:Ie,transition:qe,visibility:Ne,overlay:ze,underlay:Qe,ghost:Ht,commonLabel:pe,labelDimensions:he,mainLabel:G,sourceLabel:K,targetLabel:le,nodeBody:Lt,nodeBorder:kt,backgroundImage:mt,pie:et,compound:Ft,edgeLine:Ct,edgeArrow:Tt,core:Vt},Sn=So.propertyGroupNames={};(So.propertyGroupKeys=Object.keys(ln)).forEach(function(Mn){Sn[Mn]=ln[Mn].map(function(si){return si.name}),ln[Mn].forEach(function(si){return si.groupKey=Mn})});var Jn=So.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];So.propertyNames=Yt.map(function(Mn){return Mn.name});for(var En=0;En<Yt.length;En++){var Yn=Yt[En];Yt[Yn.name]=Yn}for(var li=0;li<Jn.length;li++){var bi=Jn[li],di={name:bi.name,alias:!0,pointsTo:Yt[bi.pointsTo]};Yt.push(di),Yt[bi.name]=di}})(),So.getDefaultProperty=function(f){return this.getDefaultProperties()[f]},So.getDefaultProperties=function(){var f=this._private;if(null!=f.defaultProperties)return f.defaultProperties;for(var c=tr({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(k,L){for(var G=1;G<=So.pieBackgroundN;G++)k[L.name.replace("{{i}}",G)]=L.value;return k},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"taxi-turn":"50%","taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"}].reduce(function(k,L){return So.arrowPrefixes.forEach(function(G){k[G+"-"+L.name]=L.value}),k},{})),h={},m=0;m<this.properties.length;m++){var _=this.properties[m];if(!_.pointsTo){var C=_.name,E=this.parse(C,c[C]);h[C]=E}}return f.defaultProperties=h,f.defaultProperties},So.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var Om={parse:function(f,c,h,m){var _=this;if(ft(c))return _.parseImplWarn(f,c,h,m);var G,k=Tg(f,""+c,h?"t":"f","mapping"===m||!0===m||!1===m||null==m?"dontcare":m),L=_.propCache=_.propCache||[];return(G=L[k])||(G=L[k]=_.parseImplWarn(f,c,h,m)),(h||"mapping"===m)&&(G=$e(G))&&(G.value=$e(G.value)),G},parseImplWarn:function(f,c,h,m){var _=this.parseImpl(f,c,h,m);return!_&&null!=c&&de("The style property `".concat(f,": ").concat(c,"` is invalid")),_&&("width"===_.name||"height"===_.name)&&"label"===c&&de("The style value of `label` is deprecated for `"+_.name+"`"),_}};Om.parseImpl=function(f,c,h,m){var _=this;f=Pt(f);var C=_.properties[f],w=c,E=_.types;if(!C||void 0===c)return null;C.alias&&(f=(C=C.pointsTo).name);var k=He(c);k&&(c=c.trim());var G,K,L=C.type;if(!L)return null;if(h&&(""===c||null===c))return{name:f,value:c,bypass:!0,deleteBypass:!0};if(ft(c))return{name:f,value:c,strValue:"fn",mapped:E.fn,bypass:h};if(!(!k||m||c.length<7||"a"!==c[1])){if(c.length>=7&&"d"===c[0]&&(G=new RegExp(E.data.regex).exec(c)))return!h&&{name:f,value:G,strValue:""+c,mapped:E.data,field:G[1],bypass:h};if(c.length>=10&&"m"===c[0]&&(K=new RegExp(E.mapData.regex).exec(c))){if(h||L.multiple)return!1;var he=E.mapData;if(!L.color&&!L.number)return!1;var pe=this.parse(f,K[4]);if(!pe||pe.mapped)return!1;var Ie=this.parse(f,K[5]);if(!Ie||Ie.mapped)return!1;if(pe.pfValue===Ie.pfValue||pe.strValue===Ie.strValue)return de("`"+f+": "+c+"` is not a valid mapper because the output range is zero; converting to `"+f+": "+pe.strValue+"`"),this.parse(f,pe.strValue);if(L.color){var Ne=pe.value,ze=Ie.value;if(!(Ne[0]!==ze[0]||Ne[1]!==ze[1]||Ne[2]!==ze[2]||Ne[3]!==ze[3]&&(null!=Ne[3]&&1!==Ne[3]||null!=ze[3]&&1!==ze[3])))return!1}return{name:f,value:K,strValue:""+c,mapped:he,field:K[1],fieldMin:parseFloat(K[2]),fieldMax:parseFloat(K[3]),valueMin:pe.value,valueMax:Ie.value,bypass:h}}}if(L.multiple&&"multiple"!==m){var qe;if(qe=k?c.split(/\s+/):gt(c)?c:[c],L.evenMultiple&&qe.length%2!=0)return null;for(var ht=[],Lt=[],kt=[],mt="",Ft=!1,Ct=0;Ct<qe.length;Ct++){var Ht=_.parse(f,qe[Ct],h,"multiple");Ft=Ft||He(Ht.value),ht.push(Ht.value),kt.push(null!=Ht.pfValue?Ht.pfValue:Ht.value),Lt.push(Ht.units),mt+=(Ct>0?" ":"")+Ht.strValue}return L.validate&&!L.validate(ht,Lt)?null:L.singleEnum&&Ft?1===ht.length&&He(ht[0])?{name:f,value:ht[0],strValue:ht[0],bypass:h}:null:{name:f,value:ht,pfValue:kt,strValue:mt,bypass:h,units:Lt}}var Vt=function(){for(var xi=0;xi<L.enums.length;xi++)if(L.enums[xi]===c)return{name:f,value:c,strValue:""+c,bypass:h};return null};if(L.number){var et,Gt="px";if(L.units&&(et=L.units),L.implicitUnits&&(Gt=L.implicitUnits),!L.unitless)if(k){var Tt="px|em"+(L.allowPercent?"|\\%":"");et&&(Tt=et);var mn=c.match("^("+De+")("+Tt+")?$");mn&&(c=mn[1],et=mn[2]||Gt)}else(!et||L.implicitUnits)&&(et=Gt);if(c=parseFloat(c),isNaN(c)&&void 0===L.enums)return null;if(isNaN(c)&&void 0!==L.enums)return c=w,Vt();if(L.integer&&!function(c){return Ut(c)&&Math.floor(c)===c}(c)||void 0!==L.min&&(c<L.min||L.strictMin&&c===L.min)||void 0!==L.max&&(c>L.max||L.strictMax&&c===L.max))return null;var Yt={name:f,value:c,strValue:""+c+(et||""),units:et,bypass:h};return Yt.pfValue=L.unitless||"px"!==et&&"em"!==et?c:"px"!==et&&et?this.getEmSizeInPixels()*c:c,("ms"===et||"s"===et)&&(Yt.pfValue="ms"===et?c:1e3*c),("deg"===et||"rad"===et)&&(Yt.pfValue="rad"===et?c:function(c){return Math.PI*c/180}(c)),"%"===et&&(Yt.pfValue=c/100),Yt}if(L.propList){var ln=[],Sn=""+c;if("none"!==Sn){for(var Rn=Sn.split(/\s*,\s*|\s+/),Jn=0;Jn<Rn.length;Jn++){var En=Rn[Jn].trim();_.properties[En]?ln.push(En):de("`"+En+"` is not a valid property name")}if(0===ln.length)return null}return{name:f,value:ln,strValue:0===ln.length?"none":ln.join(" "),bypass:h}}if(L.color){var Yn=function(c){return(gt(c)?c:null)||function(c){return td[c.toLowerCase()]}(c)||function(c){if((4===c.length||7===c.length)&&"#"===c[0]){var m,_,C,w=16;return 4===c.length?(m=parseInt(c[1]+c[1],w),_=parseInt(c[2]+c[2],w),C=parseInt(c[3]+c[3],w)):(m=parseInt(c[1]+c[2],w),_=parseInt(c[3]+c[4],w),C=parseInt(c[5]+c[6],w)),[m,_,C]}}(c)||function(c){var h,m=new RegExp("^rgb[a]?\\(((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)(?:\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)$").exec(c);if(m){h=[];for(var _=[],C=1;C<=3;C++){var w=m[C];if("%"===w[w.length-1]&&(_[C]=!0),w=parseFloat(w),_[C]&&(w=w/100*255),w<0||w>255)return;h.push(Math.floor(w))}if((_[1]||_[2]||_[3])&&!(_[1]&&_[2]&&_[3]))return;var L=m[4];if(void 0!==L){if((L=parseFloat(L))<0||L>1)return;h.push(L)}}return h}(c)||function(c){var h,m,_,C,w,E,k,L;function G(pe,Ie,Ne){return Ne<0&&(Ne+=1),Ne>1&&(Ne-=1),Ne<1/6?pe+6*(Ie-pe)*Ne:Ne<.5?Ie:Ne<2/3?pe+(Ie-pe)*(2/3-Ne)*6:pe}var K=new RegExp("^hsl[a]?\\(((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])(?:\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)$").exec(c);if(K){if((m=parseInt(K[1]))<0?m=(360- -1*m%360)%360:m>360&&(m%=360),m/=360,(_=parseFloat(K[2]))<0||_>100||(_/=100,(C=parseFloat(K[3]))<0||C>100)||(C/=100,void 0!==(w=K[4])&&((w=parseFloat(w))<0||w>1)))return;if(0===_)E=k=L=Math.round(255*C);else{var le=C<.5?C*(1+_):C+_-C*_,he=2*C-le;E=Math.round(255*G(he,le,m+1/3)),k=Math.round(255*G(he,le,m)),L=Math.round(255*G(he,le,m-1/3))}h=[E,k,L,w]}return h}(c)}(c);return Yn?{name:f,value:Yn,pfValue:Yn,strValue:"rgb("+Yn[0]+","+Yn[1]+","+Yn[2]+")",bypass:h}:null}if(L.regex||L.regexes){if(L.enums){var li=Vt();if(li)return li}for(var bi=L.regexes?L.regexes:[L.regex],pi=0;pi<bi.length;pi++){var Mn=new RegExp(bi[pi]).exec(c);if(Mn)return{name:f,value:L.singleRegexMatchValue?Mn[1]:Mn,strValue:""+c,bypass:h}}return null}return L.string?{name:f,value:""+c,strValue:""+c,bypass:h}:L.enums?Vt():null};var ec=function f(c){if(!(this instanceof f))return new f(c);Cn(c)?(this._private={cy:c,coreStyle:{}},this.length=0,this.resetToDefault()):it("A style must have a core reference")},Bl=ec.prototype;Bl.instanceString=function(){return"style"},Bl.clear=function(){for(var f=this._private,h=f.cy.elements(),m=0;m<this.length;m++)this[m]=void 0;return this.length=0,f.contextStyles={},f.propDiffs={},this.cleanElements(h,!0),h.forEach(function(_){var C=_[0]._private;C.styleDirty=!0,C.appliedInitStyle=!1}),this},Bl.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},Bl.core=function(f){return this._private.coreStyle[f]||this.getDefaultProperty(f)},Bl.selector=function(f){var c="core"===f?null:new rp(f),h=this.length++;return this[h]={selector:c,properties:[],mappedProperties:[],index:h},this},Bl.css=function(){var f=this,c=arguments;if(1===c.length)for(var h=c[0],m=0;m<f.properties.length;m++){var _=f.properties[m],C=h[_.name];void 0===C&&(C=h[un(_.name)]),void 0!==C&&this.cssRule(_.name,C)}else 2===c.length&&this.cssRule(c[0],c[1]);return this},Bl.style=Bl.css,Bl.cssRule=function(f,c){var h=this.parse(f,c);if(h){var m=this.length-1;this[m].properties.push(h),this[m].properties[h.name]=h,h.name.match(/pie-(\d+)-background-size/)&&h.value&&(this._private.hasPie=!0),h.mapped&&this[m].mappedProperties.push(h),!this[m].selector&&(this._private.coreStyle[h.name]=h)}return this},Bl.append=function(f){return yn(f)?f.appendToStyle(this):gt(f)?this.appendFromJson(f):He(f)&&this.appendFromString(f),this},ec.fromJson=function(f,c){var h=new ec(f);return h.fromJson(c),h},ec.fromString=function(f,c){return new ec(f).fromString(c)},[Ra,dc,Rv,mu,Sl,hc,So,Om].forEach(function(f){tr(Bl,f)}),ec.types=Bl.types,ec.properties=Bl.properties,ec.propertyGroups=Bl.propertyGroups,ec.propertyGroupNames=Bl.propertyGroupNames,ec.propertyGroupKeys=Bl.propertyGroupKeys;var Xg={style:function(c){return c&&this.setStyle(c).update(),this._private.style},setStyle:function(c){var h=this._private;return h.style=yn(c)?c.generateStyle(this):gt(c)?ec.fromJson(this,c):He(c)?ec.fromString(this,c):ec(this),h.style},updateStyle:function(){this.mutableElements().updateStyle()}},Ud={autolock:function(c){return void 0===c?this._private.autolock:(this._private.autolock=!!c,this)},autoungrabify:function(c){return void 0===c?this._private.autoungrabify:(this._private.autoungrabify=!!c,this)},autounselectify:function(c){return void 0===c?this._private.autounselectify:(this._private.autounselectify=!!c,this)},selectionType:function(c){var h=this._private;return null==h.selectionType&&(h.selectionType="single"),void 0===c?h.selectionType:(("additive"===c||"single"===c)&&(h.selectionType=c),this)},panningEnabled:function(c){return void 0===c?this._private.panningEnabled:(this._private.panningEnabled=!!c,this)},userPanningEnabled:function(c){return void 0===c?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!c,this)},zoomingEnabled:function(c){return void 0===c?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!c,this)},userZoomingEnabled:function(c){return void 0===c?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!c,this)},boxSelectionEnabled:function(c){return void 0===c?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!c,this)},pan:function(){var m,_,C,w,E,c=arguments,h=this._private.pan;switch(c.length){case 0:return h;case 1:if(He(c[0]))return h[m=c[0]];if(bt(c[0])){if(!this._private.panningEnabled)return this;E=(C=c[0]).y,Ut(w=C.x)&&(h.x=w),Ut(E)&&(h.y=E),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;_=c[1],("x"===(m=c[0])||"y"===m)&&Ut(_)&&(h[m]=_),this.emit("pan viewport")}return this.notify("viewport"),this},panBy:function(c,h){var C,w,E,k,L,m=arguments,_=this._private.pan;if(!this._private.panningEnabled)return this;switch(m.length){case 1:bt(c)&&(L=(E=m[0]).y,Ut(k=E.x)&&(_.x+=k),Ut(L)&&(_.y+=L),this.emit("pan viewport"));break;case 2:w=h,("x"===(C=c)||"y"===C)&&Ut(w)&&(_[C]+=w),this.emit("pan viewport")}return this.notify("viewport"),this},fit:function(c,h){var m=this.getFitViewport(c,h);if(m){var _=this._private;_.zoom=m.zoom,_.pan=m.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(c,h){var m;if((Ut(c)&&void 0===h&&(h=c,c=void 0),this._private.panningEnabled&&this._private.zoomingEnabled)&&(He(c)?c=this.$(c):!function(c){return bt(c)&&Ut(c.x1)&&Ut(c.x2)&&Ut(c.y1)&&Ut(c.y2)}(c)?nn(c)||(c=this.mutableElements()):((m={x1:c.x1,y1:c.y1,x2:c.x2,y2:c.y2}).w=m.x2-m.x1,m.h=m.y2-m.y1),!nn(c)||!c.empty())){m=m||c.boundingBox();var k,w=this.width(),E=this.height();if(h=Ut(h)?h:0,!isNaN(w)&&!isNaN(E)&&w>0&&E>0&&!isNaN(m.w)&&!isNaN(m.h)&&m.w>0&&m.h>0)return{zoom:k=(k=(k=Math.min((w-2*h)/m.w,(E-2*h)/m.h))>this._private.maxZoom?this._private.maxZoom:k)<this._private.minZoom?this._private.minZoom:k,pan:{x:(w-k*(m.x1+m.x2))/2,y:(E-k*(m.y1+m.y2))/2}}}},zoomRange:function(c,h){var m=this._private;if(null==h){var _=c;c=_.min,h=_.max}return Ut(c)&&Ut(h)&&c<=h?(m.minZoom=c,m.maxZoom=h):Ut(c)&&void 0===h&&c<=m.maxZoom?m.minZoom=c:Ut(h)&&void 0===c&&h>=m.minZoom&&(m.maxZoom=h),this},minZoom:function(c){return void 0===c?this._private.minZoom:this.zoomRange({min:c})},maxZoom:function(c){return void 0===c?this._private.maxZoom:this.zoomRange({max:c})},getZoomedViewport:function(c){var C,w,h=this._private,m=h.pan,_=h.zoom,E=!1;return h.zoomingEnabled||(E=!0),Ut(c)?w=c:bt(c)&&(w=c.level,null!=c.position?C=$o(c.position,_,m):null!=c.renderedPosition&&(C=c.renderedPosition),null!=C&&!h.panningEnabled&&(E=!0)),w=(w=w>h.maxZoom?h.maxZoom:w)<h.minZoom?h.minZoom:w,!E&&Ut(w)&&w!==_&&(null==C||Ut(C.x)&&Ut(C.y))?null!=C?{zoomed:!0,panned:!0,zoom:w,pan:{x:-w/_*(C.x-m.x)+C.x,y:-w/_*(C.y-m.y)+C.y}}:{zoomed:!0,panned:!1,zoom:w,pan:m}:null},zoom:function(c){if(void 0===c)return this._private.zoom;var h=this.getZoomedViewport(c),m=this._private;return null!=h&&h.zoomed?(m.zoom=h.zoom,h.panned&&(m.pan.x=h.pan.x,m.pan.y=h.pan.y),this.emit("zoom"+(h.panned?" pan":"")+" viewport"),this.notify("viewport"),this):this},viewport:function(c){var h=this._private,m=!0,_=!0,C=[],w=!1,E=!1;if(!c)return this;if(Ut(c.zoom)||(m=!1),bt(c.pan)||(_=!1),!m&&!_)return this;if(m){var k=c.zoom;k<h.minZoom||k>h.maxZoom||!h.zoomingEnabled?w=!0:(h.zoom=k,C.push("zoom"))}if(_&&(!w||!c.cancelOnFailedZoom)&&h.panningEnabled){var L=c.pan;Ut(L.x)&&(h.pan.x=L.x,E=!1),Ut(L.y)&&(h.pan.y=L.y,E=!1),E||C.push("pan")}return C.length>0&&(C.push("viewport"),this.emit(C.join(" ")),this.notify("viewport")),this},center:function(c){var h=this.getCenterPan(c);return h&&(this._private.pan=h,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(c,h){if(this._private.panningEnabled){if(He(c)){var m=c;c=this.mutableElements().filter(m)}else nn(c)||(c=this.mutableElements());if(0!==c.length){var _=c.boundingBox(),C=this.width(),w=this.height();return{x:(C-(h=void 0===h?this._private.zoom:h)*(_.x1+_.x2))/2,y:(w-h*(_.y1+_.y2))/2}}}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},invalidateSize:function(){this._private.sizeCache=null},size:function(){var m,_,c=this._private,h=c.container;return c.sizeCache=c.sizeCache||(h?(m=ge.getComputedStyle(h),{width:h.clientWidth-(_=function(w){return parseFloat(m.getPropertyValue(w))})("padding-left")-_("padding-right"),height:h.clientHeight-_("padding-top")-_("padding-bottom")}):{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var c=this._private.pan,h=this._private.zoom,m=this.renderedExtent(),_={x1:(m.x1-c.x)/h,x2:(m.x2-c.x)/h,y1:(m.y1-c.y)/h,y2:(m.y2-c.y)/h};return _.w=_.x2-_.x1,_.h=_.y2-_.y1,_},renderedExtent:function(){var c=this.width(),h=this.height();return{x1:0,y1:0,x2:c,y2:h,w:c,h}},multiClickDebounceTime:function(c){return c?(this._private.multiClickDebounceTime=c,this):this._private.multiClickDebounceTime}};Ud.centre=Ud.center,Ud.autolockNodes=Ud.autolock,Ud.autoungrabifyNodes=Ud.autoungrabify;var Js={data:ms.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:ms.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:ms.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:ms.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};Js.attr=Js.data,Js.removeAttr=Js.removeData;var fc=function(c){var h=this,m=(c=tr({},c)).container;m&&!Jt(m)&&Jt(m[0])&&(m=m[0]);var _=m?m._cyreg:null;(_=_||{})&&_.cy&&(_.cy.destroy(),_={});var C=_.readies=_.readies||[];m&&(m._cyreg=_),_.cy=h;var w=void 0!==ge&&void 0!==m&&!c.headless,E=c;E.layout=tr({name:w?"grid":"null"},E.layout),E.renderer=tr({name:w?"canvas":"null"},E.renderer);var k=function(pe,Ie,Ne){return void 0!==Ie?Ie:void 0!==Ne?Ne:pe},L=this._private={container:m,ready:!1,options:E,elements:new la(this),listeners:[],aniEles:new la(this),data:E.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:k(!0,E.zoomingEnabled),userZoomingEnabled:k(!0,E.userZoomingEnabled),panningEnabled:k(!0,E.panningEnabled),userPanningEnabled:k(!0,E.userPanningEnabled),boxSelectionEnabled:k(!0,E.boxSelectionEnabled),autolock:k(!1,E.autolock,E.autolockNodes),autoungrabify:k(!1,E.autoungrabify,E.autoungrabifyNodes),autounselectify:k(!1,E.autounselectify),styleEnabled:void 0===E.styleEnabled?w:E.styleEnabled,zoom:Ut(E.zoom)?E.zoom:1,pan:{x:bt(E.pan)&&Ut(E.pan.x)?E.pan.x:0,y:bt(E.pan)&&Ut(E.pan.y)?E.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:k(250,E.multiClickDebounceTime)};this.createEmitter(),this.selectionType(E.selectionType),this.zoomRange({min:E.minZoom,max:E.maxZoom}),L.styleEnabled&&h.setStyle([]);var K=tr({},E,E.renderer);h.initRenderer(K),function(pe,Ie){if(pe.some(ci))return ra.all(pe).then(Ie);Ie(pe)}([E.style,E.elements],function(he){var pe=he[0],Ie=he[1];L.styleEnabled&&h.style().append(pe),function(pe,Ie,Ne){h.notifications(!1);var ze=h.mutableElements();ze.length>0&&ze.remove(),null!=pe&&(bt(pe)||gt(pe))&&h.add(pe),h.one("layoutready",function(qe){h.notifications(!0),h.emit(qe),h.one("load",Ie),h.emitAndNotify("load")}).one("layoutstop",function(){h.one("done",Ne),h.emit("done")});var Qe=tr({},h._private.options.layout);Qe.eles=h.elements(),h.layout(Qe).run()}(Ie,function(){h.startAnimationLoop(),L.ready=!0,ft(E.ready)&&h.on("ready",E.ready);for(var Ne=0;Ne<C.length;Ne++)h.on("ready",C[Ne]);_&&(_.readies=[]),h.emit("ready")},E.done)})},fd=fc.prototype;tr(fd,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(c){return this.isReady()?this.emitter().emit("ready",[],c):this.on("ready",c),this},destroy:function(){var c=this;if(!c.destroyed())return c.stopAnimationLoop(),c.destroyRenderer(),this.emit("destroy"),c._private.destroyed=!0,c},hasElementWithId:function(c){return this._private.elements.hasElementWithId(c)},getElementById:function(c){return this._private.elements.getElementById(c)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(c){return this._private.elements.merge(c),this},removeFromPool:function(c){return this._private.elements.unmerge(c),this},container:function(){return this._private.container||null},mount:function(c){if(null!=c){var h=this,m=h._private,_=m.options;return!Jt(c)&&Jt(c[0])&&(c=c[0]),h.stopAnimationLoop(),h.destroyRenderer(),m.container=c,m.styleEnabled=!0,h.invalidateSize(),h.initRenderer(tr({},_,_.renderer,{name:"null"===_.renderer.name?"canvas":_.renderer.name})),h.startAnimationLoop(),h.style(_.style),h.emit("mount"),h}},unmount:function(){var c=this;return c.stopAnimationLoop(),c.destroyRenderer(),c.initRenderer({name:"null"}),c.emit("unmount"),c},options:function(){return $e(this._private.options)},json:function(c){var h=this,m=h._private,_=h.mutableElements();if(bt(c)){if(h.startBatch(),c.elements){var w={},E=function(ht,Lt){for(var kt=[],mt=[],Ft=0;Ft<ht.length;Ft++){var Ct=ht[Ft];if(Ct.data.id){var Ht=""+Ct.data.id,Vt=h.getElementById(Ht);w[Ht]=!0,0!==Vt.length?mt.push({ele:Vt,json:Ct}):(Lt&&(Ct.group=Lt),kt.push(Ct))}else de("cy.json() cannot handle elements without an ID attribute")}h.add(kt);for(var et=0;et<mt.length;et++){var Gt=mt[et];Gt.ele.json(Gt.json)}};if(gt(c.elements))E(c.elements);else for(var k=["nodes","edges"],L=0;L<k.length;L++){var G=k[L],K=c.elements[G];gt(K)&&E(K,G)}var le=h.collection();_.filter(function(qe){return!w[qe.id()]}).forEach(function(qe){qe.isParent()?le.merge(qe):qe.remove()}),le.forEach(function(qe){return qe.children().move({parent:null})}),le.forEach(function(qe){return(ht=qe,h.getElementById(ht.id())).remove();var ht})}c.style&&h.style(c.style),null!=c.zoom&&c.zoom!==m.zoom&&h.zoom(c.zoom),c.pan&&(c.pan.x!==m.pan.x||c.pan.y!==m.pan.y)&&h.pan(c.pan),c.data&&h.data(c.data);for(var he=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],pe=0;pe<he.length;pe++){var Ie=he[pe];null!=c[Ie]&&h[Ie](c[Ie])}return h.endBatch(),this}var ze={};c?ze.elements=this.elements().map(function(qe){return qe.json()}):(ze.elements={},_.forEach(function(qe){var ht=qe.group();ze.elements[ht]||(ze.elements[ht]=[]),ze.elements[ht].push(qe.json())})),this._private.styleEnabled&&(ze.style=h.style().json()),ze.data=$e(h.data());var Qe=m.options;return ze.zoomingEnabled=m.zoomingEnabled,ze.userZoomingEnabled=m.userZoomingEnabled,ze.zoom=m.zoom,ze.minZoom=m.minZoom,ze.maxZoom=m.maxZoom,ze.panningEnabled=m.panningEnabled,ze.userPanningEnabled=m.userPanningEnabled,ze.pan=$e(m.pan),ze.boxSelectionEnabled=m.boxSelectionEnabled,ze.renderer=$e(Qe.renderer),ze.hideEdgesOnViewport=Qe.hideEdgesOnViewport,ze.textureOnViewport=Qe.textureOnViewport,ze.wheelSensitivity=Qe.wheelSensitivity,ze.motionBlur=Qe.motionBlur,ze.multiClickDebounceTime=Qe.multiClickDebounceTime,ze}}),fd.$id=fd.getElementById,[Os,Pa,Bu,$h,Ua,gu,Vu,Il,Xg,Ud,Js].forEach(function(f){tr(fd,f)});var dp={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,maximal:!1,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(c,h){return!0},ready:void 0,stop:void 0,transform:function(c,h){return h}},Hd=function(c){return c.scratch("breadthfirst")},vu=function(c,h){return c.scratch("breadthfirst",h)};function Ef(f){this.options=tr({},dp,f)}Ef.prototype.run=function(){var L,f=this.options,c=f,h=f.cy,m=c.eles,_=m.nodes().filter(function(hr){return!hr.isParent()}),C=m,w=c.directed,E=c.maximal||c.maximalAdjustments>0,k=Ec(c.boundingBox?c.boundingBox:{x1:0,y1:0,w:h.width(),h:h.height()});if(nn(c.roots))L=c.roots;else if(gt(c.roots)){for(var G=[],K=0;K<c.roots.length;K++){var he=h.getElementById(c.roots[K]);G.push(he)}L=h.collection(G)}else if(He(c.roots))L=h.$(c.roots);else if(w)L=_.roots();else{var pe=m.components();L=h.collection();for(var Ie=function(nr){var jr=pe[nr],Mi=jr.maxDegree(!1),gr=jr.filter(function(Cr){return Cr.degree(!1)===Mi});L=L.add(gr)},Ne=0;Ne<pe.length;Ne++)Ie(Ne)}var ze=[],Qe={},qe=function(nr,jr){null==ze[jr]&&(ze[jr]=[]);var Mi=ze[jr].length;ze[jr].push(nr),vu(nr,{index:Mi,depth:jr})};C.bfs({roots:L,directed:c.directed,visit:function(nr,jr,Mi,gr,Cr){var Zr=nr[0],Fs=Zr.id();qe(Zr,Cr),Qe[Fs]=!0}});for(var Lt=[],kt=0;kt<_.length;kt++){var mt=_[kt];Qe[mt.id()]||Lt.push(mt)}var Ft=function(nr){for(var jr=ze[nr],Mi=0;Mi<jr.length;Mi++){var gr=jr[Mi];null!=gr?vu(gr,{depth:nr,index:Mi}):(jr.splice(Mi,1),Mi--)}},Ct=function(){for(var nr=0;nr<ze.length;nr++)Ft(nr)},Ht=function(nr,jr){for(var Mi=Hd(nr),gr=nr.incomers().filter(function(St){return St.isNode()&&m.has(St)}),Cr=-1,Zr=nr.id(),Fs=0;Fs<gr.length;Fs++){var Ui=Hd(gr[Fs]);Cr=Math.max(Cr,Ui.depth)}return Mi.depth<=Cr&&(jr[Zr]?null:(function(nr,jr){var Mi=Hd(nr);ze[Mi.depth][Mi.index]=null,qe(nr,jr)}(nr,Cr+1),jr[Zr]=!0,!0))};if(w&&E){var Vt=[],et={},Gt=function(nr){return Vt.push(nr)};for(_.forEach(function(hr){return Vt.push(hr)});Vt.length>0;){var mn=Vt.shift(),Yt=Ht(mn,et);if(Yt)mn.outgoers().filter(function(hr){return hr.isNode()&&m.has(hr)}).forEach(Gt);else if(null===Yt){de("Detected double maximal shift for node `"+mn.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}Ct();var ln=0;if(c.avoidOverlap)for(var Sn=0;Sn<_.length;Sn++){var Jn=_[Sn].layoutDimensions(c);ln=Math.max(ln,Jn.w,Jn.h)}var li={},bi=function(nr){if(li[nr.id()])return li[nr.id()];for(var jr=Hd(nr).depth,Mi=nr.neighborhood(),gr=0,Cr=0,Zr=0;Zr<Mi.length;Zr++){var Fs=Mi[Zr];if(!Fs.isEdge()&&!Fs.isParent()&&_.has(Fs)){var Qr=Hd(Fs);if(null!=Qr){var Ui=Qr.index,St=Qr.depth;null!=Ui&&null!=St&&St<jr&&(gr+=Ui/ze[St].length,Cr++)}}}return gr/=Cr=Math.max(1,Cr),0===Cr&&(gr=0),li[nr.id()]=gr,gr},pi=function(nr,jr){var Cr=bi(nr)-bi(jr);return 0===Cr?Cs(nr.id(),jr.id()):Cr};void 0!==c.depthSort&&(pi=c.depthSort);for(var di=0;di<ze.length;di++)ze[di].sort(pi),Ft(di);for(var Mn=[],si=0;si<Lt.length;si++)Mn.push(Lt[si]);ze.unshift(Mn),Ct();for(var xi=0,ji=0;ji<ze.length;ji++)xi=Math.max(ze[ji].length,xi);var rr_x=k.x1+k.w/2,rr_y=k.x1+k.h/2,Br=ze.reduce(function(hr,nr){return Math.max(hr,nr.length)},0);return m.nodes().layoutPositions(this,c,function(nr){var jr=Hd(nr),Mi=jr.depth,gr=jr.index,Cr=ze[Mi].length,Zr=Math.max(k.w/((c.grid?Br:Cr)+1),ln),Fs=Math.max(k.h/(ze.length+1),ln),Qr=Math.min(k.w/2/ze.length,k.h/2/ze.length);if(Qr=Math.max(Qr,ln),c.circle){var St=Qr*Mi+Qr-(ze.length>0&&ze[0].length<=3?Qr/2:0),$n=2*Math.PI/ze[Mi].length*gr;return 0===Mi&&1===ze[0].length&&(St=1),{x:rr_x+St*Math.cos($n),y:rr_y+St*Math.sin($n)}}return{x:rr_x+(gr+1-(Cr+1)/2)*Zr,y:(Mi+1)*Fs}}),this};var Tf={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(c,h){return!0},ready:void 0,stop:void 0,transform:function(c,h){return h}};function Yg(f){this.options=tr({},Tf,f)}Yg.prototype.run=function(){var f=this.options,c=f,h=f.cy,m=c.eles,_=void 0!==c.counterclockwise?!c.counterclockwise:c.clockwise,C=m.nodes().not(":parent");c.sort&&(C=C.sort(c.sort));for(var G,w=Ec(c.boundingBox?c.boundingBox:{x1:0,y1:0,w:h.width(),h:h.height()}),E={x:w.x1+w.w/2,y:w.y1+w.h/2},L=(void 0===c.sweep?2*Math.PI-2*Math.PI/C.length:c.sweep)/Math.max(1,C.length-1),K=0,le=0;le<C.length;le++){var pe=C[le].layoutDimensions(c);K=Math.max(K,pe.w,pe.h)}if(G=Ut(c.radius)?c.radius:C.length<=1?0:Math.min(w.h,w.w)/2-K,C.length>1&&c.avoidOverlap){K*=1.75;var ze=Math.cos(L)-Math.cos(0),Qe=Math.sin(L)-Math.sin(0),qe=Math.sqrt(K*K/(ze*ze+Qe*Qe));G=Math.max(qe,G)}return m.nodes().layoutPositions(this,c,function(kt,mt){var Ft=c.startAngle+mt*L*(_?1:-1),Ct=G*Math.cos(Ft),Ht=G*Math.sin(Ft);return{x:E.x+Ct,y:E.y+Ht}}),this};var pc={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(c){return c.degree()},levelWidth:function(c){return c.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(c,h){return!0},ready:void 0,stop:void 0,transform:function(c,h){return h}};function El(f){this.options=tr({},pc,f)}El.prototype.run=function(){for(var f=this.options,c=f,h=void 0!==c.counterclockwise?!c.counterclockwise:c.clockwise,m=f.cy,_=c.eles,C=_.nodes().not(":parent"),w=Ec(c.boundingBox?c.boundingBox:{x1:0,y1:0,w:m.width(),h:m.height()}),E={x:w.x1+w.w/2,y:w.y1+w.h/2},k=[],L=0,G=0;G<C.length;G++){var le,K=C[G];le=c.concentric(K),k.push({value:le,node:K}),K._private.scratch.concentric=le}C.updateStyle();for(var he=0;he<C.length;he++){var Ie=C[he].layoutDimensions(c);L=Math.max(L,Ie.w,Ie.h)}k.sort(function(hr,nr){return nr.value-hr.value});for(var Ne=c.levelWidth(C),ze=[[]],Qe=ze[0],qe=0;qe<k.length;qe++){var ht=k[qe];Qe.length>0&&Math.abs(Qe[0].value-ht.value)>=Ne&&ze.push(Qe=[]),Qe.push(ht)}var kt=L+c.minNodeSpacing;if(!c.avoidOverlap){var mt=ze.length>0&&ze[0].length>1,Ft=Math.min(w.w,w.h)/2-kt;kt=Math.min(kt,Ft/(ze.length+mt?1:0))}for(var Ht=0,Vt=0;Vt<ze.length;Vt++){var et=ze[Vt],Gt=void 0===c.sweep?2*Math.PI-2*Math.PI/et.length:c.sweep,Tt=et.dTheta=Gt/Math.max(1,et.length-1);if(et.length>1&&c.avoidOverlap){var mn=Math.cos(Tt)-Math.cos(0),Yt=Math.sin(Tt)-Math.sin(0),ln=Math.sqrt(kt*kt/(mn*mn+Yt*Yt));Ht=Math.max(ln,Ht)}et.r=Ht,Ht+=kt}if(c.equidistant){for(var Sn=0,Rn=0,Jn=0;Jn<ze.length;Jn++)Sn=Math.max(Sn,ze[Jn].r-Rn);Rn=0;for(var li=0;li<ze.length;li++){var bi=ze[li];0===li&&(Rn=bi.r),bi.r=Rn,Rn+=Sn}}for(var pi={},di=0;di<ze.length;di++)for(var Mn=ze[di],si=Mn.dTheta,xi=Mn.r,ji=0;ji<Mn.length;ji++){var rr=Mn[ji],Br=c.startAngle+(h?1:-1)*si*ji,Kr={x:E.x+xi*Math.cos(Br),y:E.y+xi*Math.sin(Br)};pi[rr.node.id()]=Kr}return _.nodes().layoutPositions(this,c,function(hr){var nr=hr.id();return pi[nr]}),this};var Gd,qh={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(c,h){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(c){return 2048},nodeOverlap:4,idealEdgeLength:function(c){return 32},edgeElasticity:function(c){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function Uu(f){this.options=tr({},qh,f),this.options.layout=this}Uu.prototype.run=function(){var f=this.options,c=f.cy,h=this;h.stopped=!1,(!0===f.animate||!1===f.animate)&&h.emit({type:"layoutstart",layout:h}),Gd=!0===f.debug;var m=hh(c,h,f);Gd&&(void 0)(m),f.randomize&&Xh(m);var _=Ia(),C=function(){Nm(m,c,f),!0===f.fit&&c.fit(f.padding)},w=function(le){return!(h.stopped||le>=f.numIter||(Kg(m,f),m.temperature=m.temperature*f.coolingFactor,m.temperature<f.minTemp))},E=function(){if(!0===f.animate||!1===f.animate)C(),h.one("layoutstop",f.stop),h.emit({type:"layoutstop",layout:h});else{var le=f.eles.nodes(),he=yu(m,f,le);le.layoutPositions(h,f,he)}},k=0,L=!0;if(!0===f.animate)!function K(){for(var le=0;L&&le<f.refresh;)L=w(k),k++,le++;L?(Ia()-_>=f.animationThreshold&&C(),au(K)):(fh(m,f),E())}();else{for(;L;)L=w(k),k++;fh(m,f),E()}return this},Uu.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this},Uu.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var hh=function(c,h,m){for(var _=m.eles.edges(),C=m.eles.nodes(),w={isCompound:c.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:C.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:_.size(),temperature:m.initialTemp,clientWidth:c.width(),clientHeight:c.width(),boundingBox:Ec(m.boundingBox?m.boundingBox:{x1:0,y1:0,w:c.width(),h:c.height()})},E=m.eles.components(),k={},L=0;L<E.length;L++)for(var G=E[L],K=0;K<G.length;K++)k[G[K].id()]=L;for(L=0;L<w.nodeSize;L++){var pe=(he=C[L]).layoutDimensions(m);(Ie={}).isLocked=he.locked(),Ie.id=he.data("id"),Ie.parentId=he.data("parent"),Ie.cmptId=k[he.id()],Ie.children=[],Ie.positionX=he.position("x"),Ie.positionY=he.position("y"),Ie.offsetX=0,Ie.offsetY=0,Ie.height=pe.w,Ie.width=pe.h,Ie.maxX=Ie.positionX+Ie.width/2,Ie.minX=Ie.positionX-Ie.width/2,Ie.maxY=Ie.positionY+Ie.height/2,Ie.minY=Ie.positionY-Ie.height/2,Ie.padLeft=parseFloat(he.style("padding")),Ie.padRight=parseFloat(he.style("padding")),Ie.padTop=parseFloat(he.style("padding")),Ie.padBottom=parseFloat(he.style("padding")),Ie.nodeRepulsion=ft(m.nodeRepulsion)?m.nodeRepulsion(he):m.nodeRepulsion,w.layoutNodes.push(Ie),w.idToIndex[Ie.id]=L}var Ne=[],ze=0,Qe=-1,qe=[];for(L=0;L<w.nodeSize;L++){var he,ht=(he=w.layoutNodes[L]).parentId;null!=ht?w.layoutNodes[w.idToIndex[ht]].children.push(he.id):(Ne[++Qe]=he.id,qe.push(he.id))}for(w.graphSet.push(qe);ze<=Qe;){var Lt=Ne[ze++],mt=w.layoutNodes[w.idToIndex[Lt]].children;if(mt.length>0)for(w.graphSet.push(mt),L=0;L<mt.length;L++)Ne[++Qe]=mt[L]}for(L=0;L<w.graphSet.length;L++){var Ft=w.graphSet[L];for(K=0;K<Ft.length;K++)w.indexToGraph[w.idToIndex[Ft[K]]]=L}for(L=0;L<w.edgeSize;L++){var Ht=_[L],Vt={};Vt.id=Ht.data("id"),Vt.sourceId=Ht.data("source"),Vt.targetId=Ht.data("target");var et=ft(m.idealEdgeLength)?m.idealEdgeLength(Ht):m.idealEdgeLength,Gt=ft(m.edgeElasticity)?m.edgeElasticity(Ht):m.edgeElasticity,Tt=w.idToIndex[Vt.sourceId],mn=w.idToIndex[Vt.targetId];if(w.indexToGraph[Tt]!=w.indexToGraph[mn]){for(var Sn=jn(Vt.sourceId,Vt.targetId,w),Rn=w.graphSet[Sn],Jn=0,Ie=w.layoutNodes[Tt];-1===Rn.indexOf(Ie.id);)Ie=w.layoutNodes[w.idToIndex[Ie.parentId]],Jn++;for(Ie=w.layoutNodes[mn];-1===Rn.indexOf(Ie.id);)Ie=w.layoutNodes[w.idToIndex[Ie.parentId]],Jn++;et*=Jn*m.nestingFactor}Vt.idealLength=et,Vt.elasticity=Gt,w.layoutEdges.push(Vt)}return w},jn=function(c,h,m){var _=Mf(c,h,0,m);return 2>_.count?0:_.graph},Mf=function f(c,h,m,_){var C=_.graphSet[m];if(-1<C.indexOf(c)&&-1<C.indexOf(h))return{count:2,graph:m};for(var w=0,E=0;E<C.length;E++){var G=_.layoutNodes[_.idToIndex[C[E]]].children;if(0!==G.length){var le=f(c,h,_.indexToGraph[_.idToIndex[G[0]]],_);if(0!==le.count){if(1!==le.count)return le;if(2==++w)break}}}return{count:w,graph:m}},Xh=function(c,h){for(var m=c.clientWidth,_=c.clientHeight,C=0;C<c.nodeSize;C++){var w=c.layoutNodes[C];0===w.children.length&&!w.isLocked&&(w.positionX=Math.random()*m,w.positionY=Math.random()*_)}},yu=function(c,h,m){var _=c.boundingBox,C={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return h.boundingBox&&(m.forEach(function(w){var E=c.layoutNodes[c.idToIndex[w.data("id")]];C.x1=Math.min(C.x1,E.positionX),C.x2=Math.max(C.x2,E.positionX),C.y1=Math.min(C.y1,E.positionY),C.y2=Math.max(C.y2,E.positionY)}),C.w=C.x2-C.x1,C.h=C.y2-C.y1),function(w,E){var k=c.layoutNodes[c.idToIndex[w.data("id")]];return h.boundingBox?{x:_.x1+(k.positionX-C.x1)/C.w*_.w,y:_.y1+(k.positionY-C.y1)/C.h*_.h}:{x:k.positionX,y:k.positionY}}},Nm=function(c,h,m){var _=m.layout,C=m.eles.nodes(),w=yu(c,m,C);C.positions(w),!0!==c.ready&&(c.ready=!0,_.one("layoutready",m.ready),_.emit({type:"layoutready",layout:this}))},Kg=function(c,h,m){hp(c,h),tu(c),Qg(c,h),fp(c),zl(c)},hp=function(c,h){for(var m=0;m<c.graphSet.length;m++)for(var _=c.graphSet[m],C=_.length,w=0;w<C;w++)for(var E=c.layoutNodes[c.idToIndex[_[w]]],k=w+1;k<C;k++)Tl(E,c.layoutNodes[c.idToIndex[_[k]]],c,h)},Hu=function(c){return-c+2*c*Math.random()},Tl=function(c,h,m,_){if(c.cmptId===h.cmptId||m.isCompound){var E=h.positionX-c.positionX,k=h.positionY-c.positionY;0===E&&0===k&&(E=Hu(1),k=Hu(1));var G=Zg(c,h,E,k);if(G>0)var he=(K=_.nodeOverlap*G)*E/(le=Math.sqrt(E*E+k*k)),pe=K*k/le;else{var K,Ie=pd(c,E,k),Ne=pd(h,-1*E,-1*k),ze=Ne.x-Ie.x,Qe=Ne.y-Ie.y,qe=ze*ze+Qe*Qe,le=Math.sqrt(qe);he=(K=(c.nodeRepulsion+h.nodeRepulsion)/qe)*ze/le,pe=K*Qe/le}c.isLocked||(c.offsetX-=he,c.offsetY-=pe),h.isLocked||(h.offsetX+=he,h.offsetY+=pe)}},Zg=function(c,h,m,_){if(m>0)var C=c.maxX-h.minX;else C=h.maxX-c.minX;if(_>0)var w=c.maxY-h.minY;else w=h.maxY-c.minY;return C>=0&&w>=0?Math.sqrt(C*C+w*w):0},pd=function(c,h,m){var _=c.positionX,C=c.positionY,w=c.height||1,E=c.width||1,k=m/h,L=w/E,G={};return 0===h&&0<m||0===h&&0>m?(G.x=_,G.y=C+w/2,G):0<h&&-1*L<=k&&k<=L?(G.x=_+E/2,G.y=C+E*m/2/h,G):0>h&&-1*L<=k&&k<=L?(G.x=_-E/2,G.y=C-E*m/2/h,G):0<m&&(k<=-1*L||k>=L)?(G.x=_+w*h/2/m,G.y=C+w/2,G):(0>m&&(k<=-1*L||k>=L)&&(G.x=_-w*h/2/m,G.y=C-w/2),G)},tu=function(c,h){for(var m=0;m<c.edgeSize;m++){var _=c.layoutEdges[m],w=c.layoutNodes[c.idToIndex[_.sourceId]],k=c.layoutNodes[c.idToIndex[_.targetId]],L=k.positionX-w.positionX,G=k.positionY-w.positionY;if(0!==L||0!==G){var K=pd(w,L,G),le=pd(k,-1*L,-1*G),he=le.x-K.x,pe=le.y-K.y,Ie=Math.sqrt(he*he+pe*pe),Ne=Math.pow(_.idealLength-Ie,2)/_.elasticity;if(0!==Ie)var ze=Ne*he/Ie,Qe=Ne*pe/Ie;else ze=0,Qe=0;w.isLocked||(w.offsetX+=ze,w.offsetY+=Qe),k.isLocked||(k.offsetX-=ze,k.offsetY-=Qe)}}},Qg=function(c,h){if(0!==h.gravity)for(var _=0;_<c.graphSet.length;_++){var C=c.graphSet[_],w=C.length;if(0===_)var E=c.clientHeight/2,k=c.clientWidth/2;else{var G=c.layoutNodes[c.idToIndex[c.layoutNodes[c.idToIndex[C[0]]].parentId]];E=G.positionX,k=G.positionY}for(var K=0;K<w;K++){var le=c.layoutNodes[c.idToIndex[C[K]]];if(!le.isLocked){var he=E-le.positionX,pe=k-le.positionY,Ie=Math.sqrt(he*he+pe*pe);if(Ie>1){var ze=h.gravity*pe/Ie;le.offsetX+=h.gravity*he/Ie,le.offsetY+=ze}}}}},fp=function(c,h){var m=[],_=0,C=-1;for(m.push.apply(m,c.graphSet[0]),C+=c.graphSet[0].length;_<=C;){var w=m[_++],k=c.layoutNodes[c.idToIndex[w]],L=k.children;if(0<L.length&&!k.isLocked){for(var G=k.offsetX,K=k.offsetY,le=0;le<L.length;le++){var he=c.layoutNodes[c.idToIndex[L[le]]];he.offsetX+=G,he.offsetY+=K,m[++C]=L[le]}k.offsetX=0,k.offsetY=0}}},zl=function(c,h){for(var m=0;m<c.nodeSize;m++)0<(_=c.layoutNodes[m]).children.length&&(_.maxX=void 0,_.minX=void 0,_.maxY=void 0,_.minY=void 0);for(m=0;m<c.nodeSize;m++)if(!(0<(_=c.layoutNodes[m]).children.length||_.isLocked)){var C=gd(_.offsetX,_.offsetY,c.temperature);_.positionX+=C.x,_.positionY+=C.y,_.offsetX=0,_.offsetY=0,_.minX=_.positionX-_.width,_.maxX=_.positionX+_.width,_.minY=_.positionY-_.height,_.maxY=_.positionY+_.height,Jg(_,c)}for(m=0;m<c.nodeSize;m++){var _;0<(_=c.layoutNodes[m]).children.length&&!_.isLocked&&(_.positionX=(_.maxX+_.minX)/2,_.positionY=(_.maxY+_.minY)/2,_.width=_.maxX-_.minX,_.height=_.maxY-_.minY)}},gd=function(c,h,m){var _=Math.sqrt(c*c+h*h);if(_>m)var C={x:m*c/_,y:m*h/_};else C={x:c,y:h};return C},Jg=function f(c,h){var m=c.parentId;if(null!=m){var _=h.layoutNodes[h.idToIndex[m]],C=!1;if((null==_.maxX||c.maxX+_.padRight>_.maxX)&&(_.maxX=c.maxX+_.padRight,C=!0),(null==_.minX||c.minX-_.padLeft<_.minX)&&(_.minX=c.minX-_.padLeft,C=!0),(null==_.maxY||c.maxY+_.padBottom>_.maxY)&&(_.maxY=c.maxY+_.padBottom,C=!0),(null==_.minY||c.minY-_.padTop<_.minY)&&(_.minY=c.minY-_.padTop,C=!0),C)return f(_,h)}},fh=function(c,h){for(var m=c.layoutNodes,_=[],C=0;C<m.length;C++){var w=m[C],E=w.cmptId;(_[E]=_[E]||[]).push(w)}var L=0;for(C=0;C<_.length;C++)if(G=_[C]){G.x1=1/0,G.x2=-1/0,G.y1=1/0,G.y2=-1/0;for(var K=0;K<G.length;K++){var le=G[K];G.x1=Math.min(G.x1,le.positionX-le.width/2),G.x2=Math.max(G.x2,le.positionX+le.width/2),G.y1=Math.min(G.y1,le.positionY-le.height/2),G.y2=Math.max(G.y2,le.positionY+le.height/2)}G.w=G.x2-G.x1,G.h=G.y2-G.y1,L+=G.w*G.h}_.sort(function(Qe,qe){return qe.w*qe.h-Qe.w*Qe.h});var he=0,pe=0,Ie=0,Ne=0,ze=Math.sqrt(L)*c.clientWidth/c.clientHeight;for(C=0;C<_.length;C++){var G;if(G=_[C]){for(K=0;K<G.length;K++)(le=G[K]).isLocked||(le.positionX+=he-G.x1,le.positionY+=pe-G.y1);he+=G.w+h.componentSpacing,Ie+=G.w+h.componentSpacing,Ne=Math.max(Ne,G.h),Ie>ze&&(pe+=Ne+h.componentSpacing,he=0,Ie=0,Ne=0)}}},tc={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(c){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(c,h){return!0},ready:void 0,stop:void 0,transform:function(c,h){return h}};function _u(f){this.options=tr({},tc,f)}_u.prototype.run=function(){var f=this.options,c=f,h=f.cy,m=c.eles,_=m.nodes().not(":parent");c.sort&&(_=_.sort(c.sort));var C=Ec(c.boundingBox?c.boundingBox:{x1:0,y1:0,w:h.width(),h:h.height()});if(0===C.h||0===C.w)m.nodes().layoutPositions(this,c,function(li){return{x:C.x1,y:C.y1}});else{var w=_.size(),E=Math.sqrt(w*C.h/C.w),k=Math.round(E),L=Math.round(C.w/C.h*E),G=function(bi){if(null==bi)return Math.min(k,L);Math.min(k,L)==k?k=bi:L=bi},K=function(bi){if(null==bi)return Math.max(k,L);Math.max(k,L)==k?k=bi:L=bi},le=c.rows,he=null!=c.cols?c.cols:c.columns;if(null!=le&&null!=he)k=le,L=he;else if(null!=le&&null==he)k=le,L=Math.ceil(w/k);else if(null==le&&null!=he)L=he,k=Math.ceil(w/L);else if(L*k>w){var pe=G(),Ie=K();(pe-1)*Ie>=w?G(pe-1):(Ie-1)*pe>=w&&K(Ie-1)}else for(;L*k<w;){var Ne=G(),ze=K();(ze+1)*Ne>=w?K(ze+1):G(Ne+1)}var Qe=C.w/L,qe=C.h/k;if(c.condense&&(Qe=0,qe=0),c.avoidOverlap)for(var ht=0;ht<_.length;ht++){var Lt=_[ht],kt=Lt._private.position;(null==kt.x||null==kt.y)&&(kt.x=0,kt.y=0);var mt=Lt.layoutDimensions(c),Ft=c.avoidOverlapPadding,Ht=mt.h+Ft;Qe=Math.max(Qe,mt.w+Ft),qe=Math.max(qe,Ht)}for(var Vt={},et=function(bi,pi){return!!Vt["c-"+bi+"-"+pi]},Gt=function(bi,pi){Vt["c-"+bi+"-"+pi]=!0},Tt=0,mn=0,Yt=function(){++mn>=L&&(mn=0,Tt++)},ln={},Sn=0;Sn<_.length;Sn++){var Rn=_[Sn],Jn=c.position(Rn);if(Jn&&(void 0!==Jn.row||void 0!==Jn.col)){var En={row:Jn.row,col:Jn.col};if(void 0===En.col)for(En.col=0;et(En.row,En.col);)En.col++;else if(void 0===En.row)for(En.row=0;et(En.row,En.col);)En.row++;ln[Rn.id()]=En,Gt(En.row,En.col)}}_.layoutPositions(this,c,function(bi,pi){var di,Mn;if(bi.locked()||bi.isParent())return!1;var si=ln[bi.id()];if(si)di=si.col*Qe+Qe/2+C.x1,Mn=si.row*qe+qe/2+C.y1;else{for(;et(Tt,mn);)Yt();di=mn*Qe+Qe/2+C.x1,Mn=Tt*qe+qe/2+C.y1,Gt(Tt,mn),Yt()}return{x:di,y:Mn}})}return this};var Yh={ready:function(){},stop:function(){}};function ph(f){this.options=tr({},Yh,f)}ph.prototype.run=function(){var f=this.options,c=f.eles,h=this;return h.emit("layoutstart"),c.nodes().positions(function(){return{x:0,y:0}}),h.one("layoutready",f.ready),h.emit("layoutready"),h.one("layoutstop",f.stop),h.emit("layoutstop"),this},ph.prototype.stop=function(){return this};var pp={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(c,h){return!0},ready:void 0,stop:void 0,transform:function(c,h){return h}};function Gu(f){this.options=tr({},pp,f)}Gu.prototype.run=function(){var f=this.options,h=f.eles.nodes(),m=ft(f.positions);return h.layoutPositions(this,f,function(C,w){var E=function _(C){return null==f.positions?function(c){return{x:c.x,y:c.y}}(C.position()):m?f.positions(C):f.positions[C._private.data.id]??null}(C);return!C.locked()&&null!=E&&E}),this};var rs={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(c,h){return!0},ready:void 0,stop:void 0,transform:function(c,h){return h}};function gp(f){this.options=tr({},rs,f)}gp.prototype.run=function(){var f=this.options,c=f.cy,h=f.eles,m=Ec(f.boundingBox?f.boundingBox:{x1:0,y1:0,w:c.width(),h:c.height()});return h.nodes().layoutPositions(this,f,function(w,E){return{x:m.x1+Math.round(Math.random()*m.w),y:m.y1+Math.round(Math.random()*m.h)}}),this};var em=[{name:"breadthfirst",impl:Ef},{name:"circle",impl:Yg},{name:"concentric",impl:El},{name:"cose",impl:Uu},{name:"grid",impl:_u},{name:"null",impl:ph},{name:"preset",impl:Gu},{name:"random",impl:gp}];function Kh(f){this.options=f,this.notifications=0}var Df=function(){},mp=function(){throw new Error("A headless instance can not render images")};Kh.prototype={recalculateRenderedStyle:Df,notify:function(){this.notifications++},init:Df,isHeadless:function(){return!0},png:mp,jpg:mp};var eg={arrowShapeWidth:.3,registerArrowShapes:function(){var f=this.arrowShapes={},c=this,h=function(L,G,K,le,he,pe,Ie){return he.x-K/2-Ie<=L&&L<=he.x+K/2+Ie&&he.y-K/2-Ie<=G&&G<=he.y+K/2+Ie},m=function(L,G,K,le,he){var pe=L*Math.cos(le)-G*Math.sin(le),Ie=L*Math.sin(le)+G*Math.cos(le);return{x:pe*K+he.x,y:Ie*K+he.y}},_=function(L,G,K,le){for(var he=[],pe=0;pe<L.length;pe+=2)he.push(m(L[pe],L[pe+1],G,K,le));return he},C=function(L){for(var G=[],K=0;K<L.length;K++){var le=L[K];G.push(le.x,le.y)}return G},w=function(L){return L.pstyle("width").pfValue*L.pstyle("arrow-scale").pfValue*2},E=function(L,G){He(G)&&(G=f[G]),f[L]=tr({name:L,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(le,he,pe,Ie,Ne,ze){var Qe=C(_(this.points,pe+2*ze,Ie,Ne));return Ta(le,he,Qe)},roughCollide:h,draw:function(le,he,pe,Ie){var Ne=_(this.points,he,pe,Ie);c.arrowShapeImpl("polygon")(le,Ne)},spacing:function(le){return 0},gap:w},G)};E("none",{collide:Wf,roughCollide:Wf,draw:Ge,spacing:ih,gap:ih}),E("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),E("arrow","triangle"),E("triangle-backcurve",{points:f.triangle.points,controlPoint:[0,-.15],roughCollide:h,draw:function(L,G,K,le,he){var pe=_(this.points,G,K,le),Ie=this.controlPoint,Ne=m(Ie[0],Ie[1],G,K,le);c.arrowShapeImpl(this.name)(L,pe,Ne)},gap:function(L){return.8*w(L)}}),E("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(L,G,K,le,he,pe,Ie){var Ne=C(_(this.points,K+2*Ie,le,he)),ze=C(_(this.pointsTee,K+2*Ie,le,he));return Ta(L,G,Ne)||Ta(L,G,ze)},draw:function(L,G,K,le,he){var pe=_(this.points,G,K,le),Ie=_(this.pointsTee,G,K,le);c.arrowShapeImpl(this.name)(L,pe,Ie)}}),E("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(L,G,K,le,he,pe,Ie){var Ne=he,ze=Math.pow(Ne.x-L,2)+Math.pow(Ne.y-G,2)<=Math.pow((K+2*Ie)*this.radius,2),Qe=C(_(this.points,K+2*Ie,le,he));return Ta(L,G,Qe)||ze},draw:function(L,G,K,le,he){var pe=_(this.pointsTr,G,K,le);c.arrowShapeImpl(this.name)(L,pe,le.x,le.y,this.radius*G)},spacing:function(L){return c.getArrowWidth(L.pstyle("width").pfValue,L.pstyle("arrow-scale").value)*this.radius}}),E("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(L,G){var K=this.baseCrossLinePts.slice(),le=G/L;return K[3]=K[3]-le,K[5]=K[5]-le,K},collide:function(L,G,K,le,he,pe,Ie){var Ne=C(_(this.points,K+2*Ie,le,he)),ze=C(_(this.crossLinePts(K,pe),K+2*Ie,le,he));return Ta(L,G,Ne)||Ta(L,G,ze)},draw:function(L,G,K,le,he){var pe=_(this.points,G,K,le),Ie=_(this.crossLinePts(G,he),G,K,le);c.arrowShapeImpl(this.name)(L,pe,Ie)}}),E("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(L){return.525*w(L)}}),E("circle",{radius:.15,collide:function(L,G,K,le,he,pe,Ie){var Ne=he;return Math.pow(Ne.x-L,2)+Math.pow(Ne.y-G,2)<=Math.pow((K+2*Ie)*this.radius,2)},draw:function(L,G,K,le,he){c.arrowShapeImpl(this.name)(L,le.x,le.y,this.radius*G)},spacing:function(L){return c.getArrowWidth(L.pstyle("width").pfValue,L.pstyle("arrow-scale").value)*this.radius}}),E("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(L){return 1},gap:function(L){return 1}}),E("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),E("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(L){return L.pstyle("width").pfValue*L.pstyle("arrow-scale").value}}),E("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(L){return.95*L.pstyle("width").pfValue*L.pstyle("arrow-scale").value}})}},ka={projectIntoViewport:function(f,c){var h=this.cy,m=this.findContainerClientCoords(),_=m[0],C=m[1],w=m[4],E=h.pan(),k=h.zoom();return[((f-_)/w-E.x)/k,((c-C)/w-E.y)/k]},findContainerClientCoords:function(){if(this.containerBB)return this.containerBB;var f=this.container,c=f.getBoundingClientRect(),h=ge.getComputedStyle(f),m=function(ze){return parseFloat(h.getPropertyValue(ze))},__left=m("padding-left"),__right=m("padding-right"),__top=m("padding-top"),__bottom=m("padding-bottom"),C_left=m("border-left-width"),C_right=m("border-right-width"),C_top=m("border-top-width"),w=(m("border-bottom-width"),f.clientWidth);return this.containerBB=[c.left+__left+C_left,c.top+__top+C_top,w-(__left+__right),f.clientHeight-(__top+__bottom),c.width/(w+(C_left+C_right))]},invalidateContainerClientCoordsCache:function(){this.containerBB=null},findNearestElement:function(f,c,h,m){return this.findNearestElements(f,c,h,m)[0]},findNearestElements:function(f,c,h,m){var pe,Ie,_=this,C=this,w=C.getCachedZSortedEles(),E=[],k=C.cy.zoom(),L=C.cy.hasCompoundNodes(),G=(m?24:8)/k,K=(m?8:2)/k,le=(m?8:2)/k,he=1/0;function Ne(mt,Ft){if(mt.isNode()){if(Ie)return;Ie=mt,E.push(mt)}if(mt.isEdge()&&(null==Ft||Ft<he))if(pe){if(pe.pstyle("z-compound-depth").value===mt.pstyle("z-compound-depth").value&&pe.pstyle("z-compound-depth").value===mt.pstyle("z-compound-depth").value)for(var Ct=0;Ct<E.length;Ct++)if(E[Ct].isEdge()){E[Ct]=mt,pe=mt,he=Ft??he;break}}else E.push(mt),pe=mt,he=Ft??he}function ze(mt){var Ft=mt.outerWidth()+2*K,Ct=mt.outerHeight()+2*K,Ht=Ft/2,Vt=Ct/2,et=mt.position();if(et.x-Ht<=f&&f<=et.x+Ht&&et.y-Vt<=c&&c<=et.y+Vt&&C.nodeShapes[_.getNodeShape(mt)].checkPoint(f,c,0,Ft,Ct,et.x,et.y))return Ne(mt,0),!0}function Qe(mt){var mn,Ft=mt._private,Ct=Ft.rscratch,Ht=mt.pstyle("width").pfValue,Vt=mt.pstyle("arrow-scale").value,et=Ht/2+G,Gt=et*et,Tt=2*et,Sn=Ft.source,Rn=Ft.target;if("segments"===Ct.edgeType||"straight"===Ct.edgeType||"haystack"===Ct.edgeType){for(var Yt=Ct.allpts,ln=0;ln+3<Yt.length;ln+=2)if(ql(f,c,Yt[ln],Yt[ln+1],Yt[ln+2],Yt[ln+3],Tt)&&Gt>(mn=Md(f,c,Yt[ln],Yt[ln+1],Yt[ln+2],Yt[ln+3])))return Ne(mt,mn),!0}else if("bezier"===Ct.edgeType||"multibezier"===Ct.edgeType||"self"===Ct.edgeType||"compound"===Ct.edgeType)for(Yt=Ct.allpts,ln=0;ln+5<Ct.allpts.length;ln+=4)if(F_(f,c,Yt[ln],Yt[ln+1],Yt[ln+2],Yt[ln+3],Yt[ln+4],Yt[ln+5],Tt)&&Gt>(mn=My(f,c,Yt[ln],Yt[ln+1],Yt[ln+2],Yt[ln+3],Yt[ln+4],Yt[ln+5])))return Ne(mt,mn),!0;Sn=Sn||Ft.source,Rn=Rn||Ft.target;var Jn=_.getArrowWidth(Ht,Vt),En=[{name:"source",x:Ct.arrowStartX,y:Ct.arrowStartY,angle:Ct.srcArrowAngle},{name:"target",x:Ct.arrowEndX,y:Ct.arrowEndY,angle:Ct.tgtArrowAngle},{name:"mid-source",x:Ct.midX,y:Ct.midY,angle:Ct.midsrcArrowAngle},{name:"mid-target",x:Ct.midX,y:Ct.midY,angle:Ct.midtgtArrowAngle}];for(ln=0;ln<En.length;ln++){var Yn=En[ln],li=C.arrowShapes[mt.pstyle(Yn.name+"-arrow-shape").value],bi=mt.pstyle("width").pfValue;if(li.roughCollide(f,c,Jn,Yn.angle,{x:Yn.x,y:Yn.y},bi,G)&&li.collide(f,c,Jn,Yn.angle,{x:Yn.x,y:Yn.y},bi,G))return Ne(mt),!0}L&&E.length>0&&(ze(Sn),ze(Rn))}function qe(mt,Ft,Ct){return or(mt,Ft,Ct)}function ht(mt,Ft){var Vt,Ct=mt._private,Ht=le;Vt=Ft?Ft+"-":"",mt.boundingBox();var et=Ct.labelBounds[Ft||"main"],Gt=mt.pstyle(Vt+"label").value;if("yes"===mt.pstyle("text-events").strValue&&Gt){var mn=qe(Ct.rscratch,"labelX",Ft),Yt=qe(Ct.rscratch,"labelY",Ft),ln=qe(Ct.rscratch,"labelAngle",Ft),Sn=mt.pstyle(Vt+"text-margin-x").pfValue,Rn=mt.pstyle(Vt+"text-margin-y").pfValue,Jn=et.x1-Ht-Sn,En=et.x2+Ht-Sn,Yn=et.y1-Ht-Rn,li=et.y2+Ht-Rn;if(ln){var bi=Math.cos(ln),pi=Math.sin(ln),di=function(Kr,hr){return{x:(Kr-=mn)*bi-(hr-=Yt)*pi+mn,y:Kr*pi+hr*bi+Yt}},Mn=di(Jn,Yn),si=di(Jn,li),xi=di(En,Yn),ji=di(En,li);if(Ta(f,c,[Mn.x+Sn,Mn.y+Rn,xi.x+Sn,xi.y+Rn,ji.x+Sn,ji.y+Rn,si.x+Sn,si.y+Rn]))return Ne(mt),!0}else if(ns(et,f,c))return Ne(mt),!0}}h&&(w=w.interactive);for(var Lt=w.length-1;Lt>=0;Lt--){var kt=w[Lt];kt.isNode()?ze(kt)||ht(kt):Qe(kt)||ht(kt)||ht(kt,"source")||ht(kt,"target")}return E},getAllInBox:function(f,c,h,m){for(var _=this.getCachedZSortedEles().interactive,C=[],w=Math.min(f,h),E=Math.max(f,h),k=Math.min(c,m),L=Math.max(c,m),G=Ec({x1:f=w,y1:c=k,x2:h=E,y2:m=L}),K=0;K<_.length;K++){var le=_[K];if(le.isNode()){var he=le,pe=he.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});wm(G,pe)&&!_v(pe,G)&&C.push(he)}else{var Ie=le,Ne=Ie._private,ze=Ne.rscratch;if(null!=ze.startX&&null!=ze.startY&&!ns(G,ze.startX,ze.startY)||null!=ze.endX&&null!=ze.endY&&!ns(G,ze.endX,ze.endY))continue;if("bezier"===ze.edgeType||"multibezier"===ze.edgeType||"self"===ze.edgeType||"compound"===ze.edgeType||"segments"===ze.edgeType||"haystack"===ze.edgeType){for(var Qe=Ne.rstyle.bezierPts||Ne.rstyle.linePts||Ne.rstyle.haystackPts,qe=!0,ht=0;ht<Qe.length;ht++)if(!yv(G,Qe[ht])){qe=!1;break}qe&&C.push(Ie)}else("haystack"===ze.edgeType||"straight"===ze.edgeType)&&C.push(Ie)}}return C}},Bm={calculateArrowAngles:function(f){var k,L,G,K,le,he,c=f._private.rscratch,h="haystack"===c.edgeType,m="bezier"===c.edgeType,_="multibezier"===c.edgeType,C="segments"===c.edgeType,w="compound"===c.edgeType,E="self"===c.edgeType;h?(G=c.haystackPts[0],K=c.haystackPts[1],le=c.haystackPts[2],he=c.haystackPts[3]):(G=c.arrowStartX,K=c.arrowStartY,le=c.arrowEndX,he=c.arrowEndY),ze=c.midX,Qe=c.midY,C?(k=G-c.segpts[0],L=K-c.segpts[1]):_||w||E||m?(k=G-cc((pe=c.allpts)[0],pe[2],pe[4],.1),L=K-cc(pe[1],pe[3],pe[5],.1)):(k=G-ze,L=K-Qe),c.srcArrowAngle=Lg(k,L);var ze=c.midX,Qe=c.midY;if(h&&(ze=(G+le)/2,Qe=(K+he)/2),k=le-G,L=he-K,C)if((pe=c.allpts).length/2%2==0)k=pe[qe=pe.length/2]-pe[ht=qe-2],L=pe[qe+1]-pe[ht+1];else{var qe,ht,Lt=2+(qe=pe.length/2-1);k=pe[qe]-pe[ht=qe-2],L=pe[qe+1]-pe[ht+1]}else if(_||w||E){var mt,Ft,Ct,Ht,et,Vt,Gt,pe=c.allpts;c.ctrlpts.length/2%2==0?(mt=cc(pe[Vt=pe.length/2-1],pe[et=Vt+2],pe[Gt=et+2],0),Ft=cc(pe[Vt+1],pe[et+1],pe[Gt+1],0),Ct=cc(pe[Vt],pe[et],pe[Gt],1e-4),Ht=cc(pe[Vt+1],pe[et+1],pe[Gt+1],1e-4)):(mt=cc(pe[Vt=(et=pe.length/2-1)-2],pe[et],pe[Gt=et+2],.4999),Ft=cc(pe[Vt+1],pe[et+1],pe[Gt+1],.4999),Ct=cc(pe[Vt],pe[et],pe[Gt],.5),Ht=cc(pe[Vt+1],pe[et+1],pe[Gt+1],.5)),k=Ct-mt,L=Ht-Ft}if(c.midtgtArrowAngle=Lg(k,L),c.midDispX=k,c.midDispY=L,k*=-1,L*=-1,C&&(pe=c.allpts).length/2%2!=0&&(k=-(pe[Lt=2+(qe=pe.length/2-1)]-pe[qe]),L=-(pe[Lt+1]-pe[qe+1])),c.midsrcArrowAngle=Lg(k,L),C)k=le-c.segpts[c.segpts.length-2],L=he-c.segpts[c.segpts.length-1];else if(_||w||E||m){var Tt=(pe=c.allpts).length;k=le-cc(pe[Tt-6],pe[Tt-4],pe[Tt-2],.9),L=he-cc(pe[Tt-5],pe[Tt-3],pe[Tt-1],.9)}else k=le-ze,L=he-Qe;c.tgtArrowAngle=Lg(k,L)}};Bm.getArrowWidth=Bm.getArrowHeight=function(f,c){var h=this.arrowWidthCache=this.arrowWidthCache||{},m=h[f+", "+c];return m||(m=Math.max(Math.pow(13.37*f,.9),29)*c,h[f+", "+c]=m,m)};var Vl={};function zm(f){var c=[];if(null!=f){for(var h=0;h<f.length;h+=2)c.push({x:f[h],y:f[h+1]});return c}}Vl.findHaystackPoints=function(f){for(var c=0;c<f.length;c++){var h=f[c],m=h._private,_=m.rscratch;if(!_.haystack){var C=2*Math.random()*Math.PI;_.source={x:Math.cos(C),y:Math.sin(C)},C=2*Math.random()*Math.PI,_.target={x:Math.cos(C),y:Math.sin(C)}}var w=m.source,E=m.target,k=w.position(),L=E.position(),G=w.width(),K=E.width(),le=w.height(),he=E.height(),Ie=h.pstyle("haystack-radius").value/2;_.haystackPts=_.allpts=[_.source.x*G*Ie+k.x,_.source.y*le*Ie+k.y,_.target.x*K*Ie+L.x,_.target.y*he*Ie+L.y],_.midX=(_.allpts[0]+_.allpts[2])/2,_.midY=(_.allpts[1]+_.allpts[3])/2,_.edgeType="haystack",_.haystack=!0,this.storeEdgeProjections(h),this.calculateArrowAngles(h),this.recalculateEdgeLabelProjections(h),this.calculateLabelAngles(h)}},Vl.findSegmentsPoints=function(f,c){var h=f._private.rscratch,m=c.posPts,_=c.intersectionPts,C=c.vectorNormInverse,w=f.pstyle("edge-distances").value,E=f.pstyle("segment-weights"),k=f.pstyle("segment-distances"),L=Math.min(E.pfValue.length,k.pfValue.length);h.edgeType="segments",h.segpts=[];for(var G=0;G<L;G++){var K=E.pfValue[G],le=k.pfValue[G],he=1-K,Ie="node-position"===w?m:_,Ne={x:Ie.x1*he+Ie.x2*K,y:Ie.y1*he+Ie.y2*K};h.segpts.push(Ne.x+C.x*le,Ne.y+C.y*le)}},Vl.findLoopPoints=function(f,c,h,m){var _=f._private.rscratch,C=c.dirCounts,w=c.srcPos,E=f.pstyle("control-point-distances"),k=E?E.pfValue[0]:void 0,L=f.pstyle("loop-direction").pfValue,G=f.pstyle("loop-sweep").pfValue,K=f.pstyle("control-point-step-size").pfValue;_.edgeType="self";var le=h,he=K;m&&(le=0,he=k);var pe=L-Math.PI/2,Ie=pe-G/2,Ne=pe+G/2,ze=String(L+"_"+G);le=void 0===C[ze]?C[ze]=0:++C[ze],_.ctrlpts=[w.x+1.4*Math.cos(Ie)*he*(le/3+1),w.y+1.4*Math.sin(Ie)*he*(le/3+1),w.x+1.4*Math.cos(Ne)*he*(le/3+1),w.y+1.4*Math.sin(Ne)*he*(le/3+1)]},Vl.findCompoundLoopPoints=function(f,c,h,m){var _=f._private.rscratch;_.edgeType="compound";var C=c.srcPos,w=c.tgtPos,E=c.srcW,k=c.srcH,L=c.tgtW,G=c.tgtH,K=f.pstyle("control-point-step-size").pfValue,le=f.pstyle("control-point-distances"),pe=h,Ie=K;m&&(pe=0,Ie=le?le.pfValue[0]:void 0);var ze={x:C.x-E/2,y:C.y-k/2},Qe={x:w.x-L/2,y:w.y-G/2},qe={x:Math.min(ze.x,Qe.x),y:Math.min(ze.y,Qe.y)},Lt=Math.max(.5,Math.log(.01*E)),kt=Math.max(.5,Math.log(.01*L));_.ctrlpts=[qe.x,qe.y-(1+Math.pow(50,1.12)/100)*Ie*(pe/3+1)*Lt,qe.x-(1+Math.pow(50,1.12)/100)*Ie*(pe/3+1)*kt,qe.y]},Vl.findStraightEdgePoints=function(f){f._private.rscratch.edgeType="straight"},Vl.findBezierPoints=function(f,c,h,m,_){var C=f._private.rscratch,w=c.vectorNormInverse,E=c.posPts,k=c.intersectionPts,L=f.pstyle("edge-distances").value,G=f.pstyle("control-point-step-size").pfValue,K=f.pstyle("control-point-distances"),le=f.pstyle("control-point-weights"),he=K&&le?Math.min(K.value.length,le.value.length):1,pe=K?K.pfValue[0]:void 0,Ie=le.value[0],Ne=m;C.edgeType=Ne?"multibezier":"bezier",C.ctrlpts=[];for(var ze=0;ze<he;ze++){var qe,Qe=(.5-c.eles.length/2+h)*G*(_?-1:1),ht=Sc(Qe);Ne&&(pe=K?K.pfValue[ze]:G,Ie=le.value[ze]);var Lt=void 0!==(qe=m?pe:void 0!==pe?ht*pe:void 0)?qe:Qe,kt=1-Ie,Ft="node-position"===L?E:k,Ct={x:Ft.x1*kt+Ft.x2*Ie,y:Ft.y1*kt+Ft.y2*Ie};C.ctrlpts.push(Ct.x+w.x*Lt,Ct.y+w.y*Lt)}},Vl.findTaxiPoints=function(f,c){var h=f._private.rscratch;h.edgeType="segments";var m="vertical",_="horizontal",C="leftward",w="rightward",E="downward",k="upward",G=c.posPts,K=c.srcW,le=c.srcH,he=c.tgtW,pe=c.tgtH,Ne="node-position"!==f.pstyle("edge-distances").value,ze=f.pstyle("taxi-direction").value,Qe=ze,qe=f.pstyle("taxi-turn"),ht="%"===qe.units,Lt=qe.pfValue,kt=Lt<0,mt=f.pstyle("taxi-turn-min-distance").pfValue,Ct=Ne?(le+pe)/2:0,Ht=G.x2-G.x1,Vt=G.y2-G.y1,et=function(gn,Qi){return gn>0?Math.max(gn-Qi,0):Math.min(gn+Qi,0)},Gt=et(Ht,Ne?(K+he)/2:0),Tt=et(Vt,Ct),mn=!1;"auto"===Qe?ze=Math.abs(Gt)>Math.abs(Tt)?_:m:Qe===k||Qe===E?(ze=m,mn=!0):(Qe===C||Qe===w)&&(ze=_,mn=!0);var En,Yt=ze===m,ln=Yt?Tt:Gt,Sn=Yt?Vt:Ht,Rn=Sc(Sn),Jn=!1;(!mn||!ht&&!kt)&&(Qe===E&&Sn<0||Qe===k&&Sn>0||Qe===C&&Sn>0||Qe===w&&Sn<0)&&(ln=(Rn*=-1)*Math.abs(ln),Jn=!0);var bi=function(gn){return Math.abs(gn)<mt||Math.abs(gn)>=Math.abs(ln)},pi=bi(En=ht?(Lt<0?1+Lt:Lt)*ln:(Lt<0?ln:0)+Lt*Rn),di=bi(Math.abs(ln)-Math.abs(En));if(!pi&&!di||Jn)if(Yt){var St=G.y1+En+(Ne?le/2*Rn:0);h.segpts=[G.x1,St,G.x2,St]}else{var Ve=G.x1+En+(Ne?K/2*Rn:0);h.segpts=[Ve,G.y1,Ve,G.y2]}else if(Yt){var si=Math.abs(Sn)<=le/2,xi=Math.abs(Ht)<=he/2;if(si){var ji=(G.x1+G.x2)/2;h.segpts=[ji,G.y1,ji,G.y2]}else if(xi){var Kr=(G.y1+G.y2)/2;h.segpts=[G.x1,Kr,G.x2,Kr]}else h.segpts=[G.x1,G.y2]}else{var jr=Math.abs(Sn)<=K/2,Mi=Math.abs(Vt)<=pe/2;if(jr){var gr=(G.y1+G.y2)/2;h.segpts=[G.x1,gr,G.x2,gr]}else if(Mi){var Fs=(G.x1+G.x2)/2;h.segpts=[Fs,G.y1,Fs,G.y2]}else h.segpts=[G.x2,G.y1]}},Vl.tryToCorrectInvalidPoints=function(f,c){var h=f._private.rscratch;if("bezier"===h.edgeType){var m=c.srcPos,_=c.tgtPos,C=c.srcW,w=c.srcH,E=c.tgtW,k=c.tgtH,L=c.srcShape,G=c.tgtShape,K=!Ut(h.startX)||!Ut(h.startY),le=!Ut(h.arrowStartX)||!Ut(h.arrowStartY),he=!Ut(h.endX)||!Ut(h.endY),pe=!Ut(h.arrowEndX)||!Ut(h.arrowEndY),ze=this.getArrowWidth(f.pstyle("width").pfValue,f.pstyle("arrow-scale").value)*this.arrowShapeWidth*3,Qe=no({x:h.ctrlpts[0],y:h.ctrlpts[1]},{x:h.startX,y:h.startY}),qe=Qe<ze,ht=no({x:h.ctrlpts[0],y:h.ctrlpts[1]},{x:h.endX,y:h.endY}),Lt=ht<ze,kt=!1;if(K||le||qe){kt=!0;var mt={x:h.ctrlpts[0]-m.x,y:h.ctrlpts[1]-m.y},Ft=Math.sqrt(mt.x*mt.x+mt.y*mt.y),Ct={x:mt.x/Ft,y:mt.y/Ft},Ht=Math.max(C,w),Vt={x:h.ctrlpts[0]+2*Ct.x*Ht,y:h.ctrlpts[1]+2*Ct.y*Ht},et=L.intersectLine(m.x,m.y,C,w,Vt.x,Vt.y,0);qe?(h.ctrlpts[0]=h.ctrlpts[0]+Ct.x*(ze-Qe),h.ctrlpts[1]=h.ctrlpts[1]+Ct.y*(ze-Qe)):(h.ctrlpts[0]=et[0]+Ct.x*ze,h.ctrlpts[1]=et[1]+Ct.y*ze)}if(he||pe||Lt){kt=!0;var Gt={x:h.ctrlpts[0]-_.x,y:h.ctrlpts[1]-_.y},Tt=Math.sqrt(Gt.x*Gt.x+Gt.y*Gt.y),mn={x:Gt.x/Tt,y:Gt.y/Tt},Yt=Math.max(C,w),ln={x:h.ctrlpts[0]+2*mn.x*Yt,y:h.ctrlpts[1]+2*mn.y*Yt},Sn=G.intersectLine(_.x,_.y,E,k,ln.x,ln.y,0);Lt?(h.ctrlpts[0]=h.ctrlpts[0]+mn.x*(ze-ht),h.ctrlpts[1]=h.ctrlpts[1]+mn.y*(ze-ht)):(h.ctrlpts[0]=Sn[0]+mn.x*ze,h.ctrlpts[1]=Sn[1]+mn.y*ze)}kt&&this.findEndpoints(f)}},Vl.storeAllpts=function(f){var c=f._private.rscratch;if("multibezier"===c.edgeType||"bezier"===c.edgeType||"self"===c.edgeType||"compound"===c.edgeType){c.allpts=[],c.allpts.push(c.startX,c.startY);for(var h=0;h+1<c.ctrlpts.length;h+=2)c.allpts.push(c.ctrlpts[h],c.ctrlpts[h+1]),h+3<c.ctrlpts.length&&c.allpts.push((c.ctrlpts[h]+c.ctrlpts[h+2])/2,(c.ctrlpts[h+1]+c.ctrlpts[h+3])/2);var m;c.allpts.push(c.endX,c.endY),c.ctrlpts.length/2%2==0?(c.midX=c.allpts[m=c.allpts.length/2-1],c.midY=c.allpts[m+1]):(c.midX=cc(c.allpts[m=c.allpts.length/2-3],c.allpts[m+2],c.allpts[m+4],.5),c.midY=cc(c.allpts[m+1],c.allpts[m+3],c.allpts[m+5],.5))}else if("straight"===c.edgeType)c.allpts=[c.startX,c.startY,c.endX,c.endY],c.midX=(c.startX+c.endX+c.arrowStartX+c.arrowEndX)/4,c.midY=(c.startY+c.endY+c.arrowStartY+c.arrowEndY)/4;else if("segments"===c.edgeType)if(c.allpts=[],c.allpts.push(c.startX,c.startY),c.allpts.push.apply(c.allpts,c.segpts),c.allpts.push(c.endX,c.endY),c.segpts.length%4==0){var C=c.segpts.length/2,w=C-2;c.midX=(c.segpts[w]+c.segpts[C])/2,c.midY=(c.segpts[w+1]+c.segpts[C+1])/2}else{var E=c.segpts.length/2-1;c.midX=c.segpts[E],c.midY=c.segpts[E+1]}},Vl.checkForInvalidEdgeWarning=function(f){var c=f[0]._private.rscratch;c.nodesOverlap||Ut(c.startX)&&Ut(c.startY)&&Ut(c.endX)&&Ut(c.endY)?c.loggedErr=!1:c.loggedErr||(c.loggedErr=!0,de("Edge `"+f.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))},Vl.findEdgeControlPoints=function(f){var c=this;if(f&&0!==f.length){for(var h=this,_=h.cy.hasCompoundNodes(),C={map:new wo,get:function(mt){var Ft=this.map.get(mt[0]);return null!=Ft?Ft.get(mt[1]):null},set:function(mt,Ft){var Ct=this.map.get(mt[0]);null==Ct&&(Ct=new wo,this.map.set(mt[0],Ct)),Ct.set(mt[1],Ft)}},w=[],E=[],k=0;k<f.length;k++){var L=f[k],G=L._private,K=L.pstyle("curve-style").value;if(!L.removed()&&L.takesUpSpace()){if("haystack"===K){E.push(L);continue}var le="unbundled-bezier"===K||"segments"===K||"straight"===K||"straight-triangle"===K||"taxi"===K,he="unbundled-bezier"===K||"bezier"===K,Ie=G.target,Qe=[G.source.poolIndex(),Ie.poolIndex()].sort(),qe=C.get(Qe);null==qe&&(C.set(Qe,qe={eles:[]}),w.push(Qe)),qe.eles.push(L),le&&(qe.hasUnbundled=!0),he&&(qe.hasBezier=!0)}}for(var ht=function(mt){var Ct=C.get(w[mt]),Ht=void 0;if(!Ct.hasUnbundled){var Vt=Ct.eles[0].parallelEdges().filter(function(Ui){return Ui.isBundledBezier()});pr(Ct.eles),Vt.forEach(function(Ui){return Ct.eles.push(Ui)}),Ct.eles.sort(function(Ui,St){return Ui.poolIndex()-St.poolIndex()})}var et=Ct.eles[0],Gt=et.source(),Tt=et.target();if(Gt.poolIndex()>Tt.poolIndex()){var mn=Gt;Gt=Tt,Tt=mn}var Yt=Ct.srcPos=Gt.position(),ln=Ct.tgtPos=Tt.position(),Sn=Ct.srcW=Gt.outerWidth(),Rn=Ct.srcH=Gt.outerHeight(),Jn=Ct.tgtW=Tt.outerWidth(),En=Ct.tgtH=Tt.outerHeight(),Yn=Ct.srcShape=h.nodeShapes[c.getNodeShape(Gt)],li=Ct.tgtShape=h.nodeShapes[c.getNodeShape(Tt)];Ct.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var bi=0;bi<Ct.eles.length;bi++){var pi=Ct.eles[bi],di=pi[0]._private.rscratch,Mn=pi.pstyle("curve-style").value,si="unbundled-bezier"===Mn||"segments"===Mn||"taxi"===Mn,xi=!Gt.same(pi.source());if(!Ct.calculatedIntersection&&Gt!==Tt&&(Ct.hasBezier||Ct.hasUnbundled)){Ct.calculatedIntersection=!0;var ji=Yn.intersectLine(Yt.x,Yt.y,Sn,Rn,ln.x,ln.y,0),rr=Ct.srcIntn=ji,Br=li.intersectLine(ln.x,ln.y,Jn,En,Yt.x,Yt.y,0),Kr=Ct.tgtIntn=Br,hr=Ct.intersectionPts={x1:ji[0],x2:Br[0],y1:ji[1],y2:Br[1]},nr=Ct.posPts={x1:Yt.x,x2:ln.x,y1:Yt.y,y2:ln.y},jr=Br[1]-ji[1],Mi=Br[0]-ji[0],gr=Math.sqrt(Mi*Mi+jr*jr),Cr=Ct.vector={x:Mi,y:jr},Zr=Ct.vectorNorm={x:Cr.x/gr,y:Cr.y/gr},Fs={x:-Zr.y,y:Zr.x};Ct.nodesOverlap=!Ut(gr)||li.checkPoint(ji[0],ji[1],0,Jn,En,ln.x,ln.y)||Yn.checkPoint(Br[0],Br[1],0,Sn,Rn,Yt.x,Yt.y),Ct.vectorNormInverse=Fs,Ht={nodesOverlap:Ct.nodesOverlap,dirCounts:Ct.dirCounts,calculatedIntersection:!0,hasBezier:Ct.hasBezier,hasUnbundled:Ct.hasUnbundled,eles:Ct.eles,srcPos:ln,tgtPos:Yt,srcW:Jn,srcH:En,tgtW:Sn,tgtH:Rn,srcIntn:Kr,tgtIntn:rr,srcShape:li,tgtShape:Yn,posPts:{x1:nr.x2,y1:nr.y2,x2:nr.x1,y2:nr.y1},intersectionPts:{x1:hr.x2,y1:hr.y2,x2:hr.x1,y2:hr.y1},vector:{x:-Cr.x,y:-Cr.y},vectorNorm:{x:-Zr.x,y:-Zr.y},vectorNormInverse:{x:-Fs.x,y:-Fs.y}}}var Qr=xi?Ht:Ct;di.nodesOverlap=Qr.nodesOverlap,di.srcIntn=Qr.srcIntn,di.tgtIntn=Qr.tgtIntn,_&&(Gt.isParent()||Gt.isChild()||Tt.isParent()||Tt.isChild())&&(Gt.parents().anySame(Tt)||Tt.parents().anySame(Gt)||Gt.same(Tt)&&Gt.isParent())?c.findCompoundLoopPoints(pi,Qr,bi,si):Gt===Tt?c.findLoopPoints(pi,Qr,bi,si):"segments"===Mn?c.findSegmentsPoints(pi,Qr):"taxi"===Mn?c.findTaxiPoints(pi,Qr):"straight"===Mn||!si&&Ct.eles.length%2==1&&bi===Math.floor(Ct.eles.length/2)?c.findStraightEdgePoints(pi):c.findBezierPoints(pi,Qr,bi,si,xi),c.findEndpoints(pi),c.tryToCorrectInvalidPoints(pi,Qr),c.checkForInvalidEdgeWarning(pi),c.storeAllpts(pi),c.storeEdgeProjections(pi),c.calculateArrowAngles(pi),c.recalculateEdgeLabelProjections(pi),c.calculateLabelAngles(pi)}},Lt=0;Lt<w.length;Lt++)ht(Lt);this.findHaystackPoints(E)}},Vl.getSegmentPoints=function(f){var c=f[0]._private.rscratch;if("segments"===c.edgeType)return this.recalculateRenderedStyle(f),zm(c.segpts)},Vl.getControlPoints=function(f){var c=f[0]._private.rscratch,h=c.edgeType;if("bezier"===h||"multibezier"===h||"self"===h||"compound"===h)return this.recalculateRenderedStyle(f),zm(c.ctrlpts)},Vl.getEdgeMidpoint=function(f){var c=f[0]._private.rscratch;return this.recalculateRenderedStyle(f),{x:c.midX,y:c.midY}};var md={manualEndptToPx:function(f,c){var m=f.position(),_=f.outerWidth(),C=f.outerHeight();if(2===c.value.length){var w=[c.pfValue[0],c.pfValue[1]];return"%"===c.units[0]&&(w[0]=w[0]*_),"%"===c.units[1]&&(w[1]=w[1]*C),w[0]+=m.x,w[1]+=m.y,w}var E=c.pfValue[0];E=-Math.PI/2+E;var k=2*Math.max(_,C),L=[m.x+Math.cos(E)*k,m.y+Math.sin(E)*k];return this.nodeShapes[this.getNodeShape(f)].intersectLine(m.x,m.y,_,C,L[0],L[1],0)},findEndpoints:function(f){var h,Ht,Vt,et,Gt,c=this,m=f.source()[0],_=f.target()[0],C=m.position(),w=_.position(),E=f.pstyle("target-arrow-shape").value,k=f.pstyle("source-arrow-shape").value,L=f.pstyle("target-distance-from-node").pfValue,G=f.pstyle("source-distance-from-node").pfValue,K=f.pstyle("curve-style").value,le=f._private.rscratch,he=le.edgeType,Ie="self"===he||"compound"===he,Ne="bezier"===he||"multibezier"===he||Ie,ze="bezier"!==he,Qe="straight"===he||"segments"===he,qe="segments"===he,ht=Ne||ze||Qe,Lt=Ie||"taxi"===K,kt=f.pstyle("source-endpoint"),mt=Lt?"outside-to-node":kt.value,Ft=f.pstyle("target-endpoint"),Ct=Lt?"outside-to-node":Ft.value;if(le.srcManEndpt=kt,le.tgtManEndpt=Ft,Ne){var Tt=[le.ctrlpts[0],le.ctrlpts[1]];Ht=ze?[le.ctrlpts[le.ctrlpts.length-2],le.ctrlpts[le.ctrlpts.length-1]]:Tt,Vt=Tt}else if(Qe){var Yt=qe?le.segpts.slice(0,2):[w.x,w.y];Ht=qe?le.segpts.slice(le.segpts.length-2):[C.x,C.y],Vt=Yt}if("inside-to-node"===Ct)h=[w.x,w.y];else if(Ft.units)h=this.manualEndptToPx(_,Ft);else if("outside-to-line"===Ct)h=le.tgtIntn;else if("outside-to-node"===Ct||"outside-to-node-or-label"===Ct?et=Ht:("outside-to-line"===Ct||"outside-to-line-or-label"===Ct)&&(et=[C.x,C.y]),h=c.nodeShapes[this.getNodeShape(_)].intersectLine(w.x,w.y,_.outerWidth(),_.outerHeight(),et[0],et[1],0),"outside-to-node-or-label"===Ct||"outside-to-line-or-label"===Ct){var Sn=_._private.rscratch,En=Sn.labelX,Yn=Sn.labelY,li=Sn.labelWidth/2,bi=Sn.labelHeight/2,pi=_.pstyle("text-valign").value;"top"===pi?Yn-=bi:"bottom"===pi&&(Yn+=bi);var di=_.pstyle("text-halign").value;"left"===di?En-=li:"right"===di&&(En+=li);var Mn=lu(et[0],et[1],[En-li,Yn-bi,En+li,Yn-bi,En+li,Yn+bi,En-li,Yn+bi],w.x,w.y);if(Mn.length>0){var si=C,xi=Td(si,rh(h)),ji=Td(si,rh(Mn)),rr=xi;ji<xi&&(h=Mn,rr=ji),Mn.length>2&&Td(si,{x:Mn[2],y:Mn[3]})<rr&&(h=[Mn[2],Mn[3]])}}var Kr=qf(h,Ht,c.arrowShapes[E].spacing(f)+L),hr=qf(h,Ht,c.arrowShapes[E].gap(f)+L);if(le.endX=hr[0],le.endY=hr[1],le.arrowEndX=Kr[0],le.arrowEndY=Kr[1],"inside-to-node"===mt)h=[C.x,C.y];else if(kt.units)h=this.manualEndptToPx(m,kt);else if("outside-to-line"===mt)h=le.srcIntn;else if("outside-to-node"===mt||"outside-to-node-or-label"===mt?Gt=Vt:("outside-to-line"===mt||"outside-to-line-or-label"===mt)&&(Gt=[w.x,w.y]),h=c.nodeShapes[this.getNodeShape(m)].intersectLine(C.x,C.y,m.outerWidth(),m.outerHeight(),Gt[0],Gt[1],0),"outside-to-node-or-label"===mt||"outside-to-line-or-label"===mt){var nr=m._private.rscratch,gr=nr.labelX,Cr=nr.labelY,Zr=nr.labelWidth/2,Fs=nr.labelHeight/2,Qr=m.pstyle("text-valign").value;"top"===Qr?Cr-=Fs:"bottom"===Qr&&(Cr+=Fs);var Ui=m.pstyle("text-halign").value;"left"===Ui?gr-=Zr:"right"===Ui&&(gr+=Zr);var St=lu(Gt[0],Gt[1],[gr-Zr,Cr-Fs,gr+Zr,Cr-Fs,gr+Zr,Cr+Fs,gr-Zr,Cr+Fs],C.x,C.y);if(St.length>0){var $n=w,Ei=Td($n,rh(h)),Ve=Td($n,rh(St)),ut=Ei;Ve<Ei&&(h=[St[0],St[1]],ut=Ve),St.length>2&&Td($n,{x:St[2],y:St[3]})<ut&&(h=[St[2],St[3]])}}var hn=qf(h,Vt,c.arrowShapes[k].spacing(f)+G),gn=qf(h,Vt,c.arrowShapes[k].gap(f)+G);le.startX=gn[0],le.startY=gn[1],le.arrowStartX=hn[0],le.arrowStartY=hn[1],ht&&(le.badLine=!(Ut(le.startX)&&Ut(le.startY)&&Ut(le.endX)&&Ut(le.endY)))},getSourceEndpoint:function(f){var c=f[0]._private.rscratch;return"haystack"===(this.recalculateRenderedStyle(f),c.edgeType)?{x:c.haystackPts[0],y:c.haystackPts[1]}:{x:c.arrowStartX,y:c.arrowStartY}},getTargetEndpoint:function(f){var c=f[0]._private.rscratch;return"haystack"===(this.recalculateRenderedStyle(f),c.edgeType)?{x:c.haystackPts[2],y:c.haystackPts[3]}:{x:c.arrowEndX,y:c.arrowEndY}}},tg={};function Vm(f,c,h){for(var m=function(L,G,K,le){return cc(L,G,K,le)},C=c._private.rstyle.bezierPts,w=0;w<f.bezierProjPcts.length;w++){var E=f.bezierProjPcts[w];C.push({x:m(h[0],h[2],h[4],E),y:m(h[1],h[3],h[5],E)})}}tg.storeEdgeProjections=function(f){var c=f._private,h=c.rscratch,m=h.edgeType;if(c.rstyle.bezierPts=null,c.rstyle.linePts=null,c.rstyle.haystackPts=null,"multibezier"===m||"bezier"===m||"self"===m||"compound"===m){c.rstyle.bezierPts=[];for(var _=0;_+5<h.allpts.length;_+=4)Vm(this,f,h.allpts.slice(_,_+6))}else if("segments"===m){var C=c.rstyle.linePts=[];for(_=0;_+1<h.allpts.length;_+=2)C.push({x:h.allpts[_],y:h.allpts[_+1]})}else if("haystack"===m){var w=h.haystackPts;c.rstyle.haystackPts=[{x:w[0],y:w[1]},{x:w[2],y:w[3]}]}c.rstyle.arrowWidth=this.getArrowWidth(f.pstyle("width").pfValue,f.pstyle("arrow-scale").value)*this.arrowShapeWidth},tg.recalculateEdgeProjections=function(f){this.findEdgeControlPoints(f)};var Oc={recalculateNodeLabelProjection:function(f){var c=f.pstyle("label").strValue;if(!be(c)){var h,m,_=f._private,C=f.width(),w=f.height(),E=f.padding(),k=f.position(),L=f.pstyle("text-halign").strValue,G=f.pstyle("text-valign").strValue,K=_.rscratch,le=_.rstyle;switch(L){case"left":h=k.x-C/2-E;break;case"right":h=k.x+C/2+E;break;default:h=k.x}switch(G){case"top":m=k.y-w/2-E;break;case"bottom":m=k.y+w/2+E;break;default:m=k.y}K.labelX=h,K.labelY=m,le.labelX=h,le.labelY=m,this.calculateLabelAngles(f),this.applyLabelDimensions(f)}}},Oa=function(c,h){var m=Math.atan(h/c);return 0===c&&m<0&&(m*=-1),m},gc=function(c,h){return Oa(h.x-c.x,h.y-c.y)};Oc.recalculateEdgeLabelProjections=function(f){var c,h=f._private,m=h.rscratch,_=this,C={mid:f.pstyle("label").strValue,source:f.pstyle("source-label").strValue,target:f.pstyle("target-label").strValue};if(C.mid||C.source||C.target){var w=function(K,le,he){Gs(h.rscratch,K,le,he),Gs(h.rstyle,K,le,he)};w("labelX",null,(c={x:m.midX,y:m.midY}).x),w("labelY",null,c.y);var E=Oa(m.midDispX,m.midDispY);w("labelAutoAngle",null,E);var k=function G(){if(G.cache)return G.cache;for(var K=[],le=0;le+5<m.allpts.length;le+=4)K.push({p0:{x:m.allpts[le],y:m.allpts[le+1]},p1:{x:m.allpts[le+2],y:m.allpts[le+3]},p2:{x:m.allpts[le+4],y:m.allpts[le+5]},startDist:0,length:0,segments:[]});var Ne=h.rstyle.bezierPts,ze=_.bezierProjPcts.length;function Qe(mt,Ft,Ct,Ht,Vt){var et=no(Ft,Ct),Gt=mt.segments[mt.segments.length-1];mt.segments.push({p0:Ft,p1:Ct,t0:Ht,t1:Vt,startDist:Gt?Gt.startDist+Gt.length:0,length:et}),mt.length+=et}for(var qe=0;qe<K.length;qe++){var ht=K[qe],Lt=K[qe-1];Lt&&(ht.startDist=Lt.startDist+Lt.length),Qe(ht,ht.p0,Ne[qe*ze],0,_.bezierProjPcts[0]);for(var kt=0;kt<ze-1;kt++)Qe(ht,Ne[qe*ze+kt],Ne[qe*ze+kt+1],_.bezierProjPcts[kt],_.bezierProjPcts[kt+1]);Qe(ht,Ne[qe*ze+ze-1],ht.p2,_.bezierProjPcts[ze-1],1)}return G.cache=K},L=function(K){var le,he="source"===K;if(C[K]){var pe=f.pstyle(K+"-text-offset").pfValue;switch(m.edgeType){case"self":case"compound":case"bezier":case"multibezier":for(var Ne,Ie=k(),ze=0,Qe=0,qe=0;qe<Ie.length;qe++){for(var ht=Ie[he?qe:Ie.length-1-qe],Lt=0;Lt<ht.segments.length;Lt++){var kt=ht.segments[he?Lt:ht.segments.length-1-Lt];if(ze=Qe,(Qe+=kt.length)>=pe||qe===Ie.length-1&&Lt===ht.segments.length-1){Ne={cp:ht,segment:kt};break}}if(Ne)break}var Ft=Ne.cp,Ct=Ne.segment,Ht=(pe-ze)/Ct.length,Vt=Ct.t1-Ct.t0,et=he?Ct.t0+Vt*Ht:Ct.t1-Vt*Ht;et=Tr(0,et,1),c=Yi(Ft.p0,Ft.p1,Ft.p2,et),le=function(c,h,m,_){var C=Tr(0,_-.001,1),w=Tr(0,_+.001,1),E=Yi(c,h,m,C),k=Yi(c,h,m,w);return gc(E,k)}(Ft.p0,Ft.p1,Ft.p2,et);break;case"straight":case"segments":case"haystack":for(var Tt,mn,Yt,ln,Gt=0,Sn=m.allpts.length,Rn=0;Rn+3<Sn&&(he?(Yt={x:m.allpts[Rn],y:m.allpts[Rn+1]},ln={x:m.allpts[Rn+2],y:m.allpts[Rn+3]}):(Yt={x:m.allpts[Sn-2-Rn],y:m.allpts[Sn-1-Rn]},ln={x:m.allpts[Sn-4-Rn],y:m.allpts[Sn-3-Rn]}),mn=Gt,!((Gt+=Tt=no(Yt,ln))>=pe));Rn+=2);var En=(pe-mn)/Tt;En=Tr(0,En,1),c=function(c,h,m,_){var C_x=h.x-c.x,C_y=h.y-c.y,w=no(c,h);return m=m??0,{x:c.x+C_x/w*(_=_??m*w),y:c.y+C_y/w*_}}(Yt,ln,En),le=gc(Yt,ln)}w("labelX",K,c.x),w("labelY",K,c.y),w("labelAutoAngle",K,le)}};L("source"),L("target"),this.applyLabelDimensions(f)}},Oc.applyLabelDimensions=function(f){this.applyPrefixedLabelDimensions(f),f.isEdge()&&(this.applyPrefixedLabelDimensions(f,"source"),this.applyPrefixedLabelDimensions(f,"target"))},Oc.applyPrefixedLabelDimensions=function(f,c){var h=f._private,m=this.getLabelText(f,c),_=this.calculateLabelDimensions(f,m),C=f.pstyle("line-height").pfValue,w=f.pstyle("text-wrap").strValue,E=or(h.rscratch,"labelWrapCachedLines",c)||[],k="wrap"!==w?1:Math.max(E.length,1),L=_.height/k,G=L*C,K=_.width,le=_.height+(k-1)*(C-1)*L;Gs(h.rstyle,"labelWidth",c,K),Gs(h.rscratch,"labelWidth",c,K),Gs(h.rstyle,"labelHeight",c,le),Gs(h.rscratch,"labelHeight",c,le),Gs(h.rscratch,"labelLineHeight",c,G)},Oc.getLabelText=function(f,c){var h=f._private,_=f.pstyle((c?c+"-":"")+"label").strValue,C=f.pstyle("text-transform").value,w=function(Jn,En){return En?(Gs(h.rscratch,Jn,c,En),En):or(h.rscratch,Jn,c)};if(!_)return"";"none"==C||("uppercase"==C?_=_.toUpperCase():"lowercase"==C&&(_=_.toLowerCase()));var E=f.pstyle("text-wrap").value;if("wrap"===E){var k=w("labelKey");if(null!=k&&w("labelWrapKey")===k)return w("labelWrapCachedText");for(var G=_.split("\n"),K=f.pstyle("text-max-width").pfValue,he="anywhere"===f.pstyle("text-overflow-wrap").value,pe=[],Ie=/[\s\u200b]+/,Ne=he?"":" ",ze=0;ze<G.length;ze++){var Qe=G[ze],ht=this.calculateLabelDimensions(f,Qe).width;if(he){var Lt=Qe.split("").join("\u200b");Qe=Lt}if(ht>K){for(var kt=Qe.split(Ie),mt="",Ft=0;Ft<kt.length;Ft++){var Ct=kt[Ft];this.calculateLabelDimensions(f,0===mt.length?Ct:mt+Ne+Ct).width<=K?mt+=Ct+Ne:(mt&&pe.push(mt),mt=Ct+Ne)}mt.match(/^[\s\u200b]+$/)||pe.push(mt)}else pe.push(Qe)}w("labelWrapCachedLines",pe),_=w("labelWrapCachedText",pe.join("\n")),w("labelWrapKey",k)}else if("ellipsis"===E){var Gt=f.pstyle("text-max-width").pfValue,Tt="",Yt=!1;if(this.calculateLabelDimensions(f,_).width<Gt)return _;for(var ln=0;ln<_.length&&!(this.calculateLabelDimensions(f,Tt+_[ln]+"\u2026").width>Gt);ln++)Tt+=_[ln],ln===_.length-1&&(Yt=!0);return Yt||(Tt+="\u2026"),Tt}return _},Oc.getLabelJustification=function(f){var c=f.pstyle("text-justification").strValue,h=f.pstyle("text-halign").strValue;if("auto"!==c)return c;if(!f.isNode())return"center";switch(h){case"left":return"right";case"right":return"left";default:return"center"}},Oc.calculateLabelDimensions=function(f,c){var m=wc(c,f._private.labelDimsKey),_=this.labelDimCache||(this.labelDimCache=[]),C=_[m];if(null!=C)return C;var E=f.pstyle("font-style").strValue,k=f.pstyle("font-size").pfValue,L=f.pstyle("font-family").strValue,G=f.pstyle("font-weight").strValue,K=this.labelCalcCanvas,le=this.labelCalcCanvasContext;if(!K){K=this.labelCalcCanvas=document.createElement("canvas"),le=this.labelCalcCanvasContext=K.getContext("2d");var he=K.style;he.position="absolute",he.left="-9999px",he.top="-9999px",he.zIndex="-1",he.visibility="hidden",he.pointerEvents="none"}le.font="".concat(E," ").concat(G," ").concat(k,"px ").concat(L);for(var pe=0,Ie=0,Ne=c.split("\n"),ze=0;ze<Ne.length;ze++){var qe=le.measureText(Ne[ze]),ht=Math.ceil(qe.width),Lt=k;pe=Math.max(ht,pe),Ie+=Lt}return _[m]={width:pe+=0,height:Ie+=0}},Oc.calculateLabelAngle=function(f,c){var m=f._private.rscratch,_=f.isEdge(),w=f.pstyle((c?c+"-":"")+"text-rotation"),E=w.strValue;return"none"===E?0:_&&"autorotate"===E?m.labelAutoAngle:"autorotate"===E?0:w.pfValue},Oc.calculateLabelAngles=function(f){var c=this,h=f.isEdge(),_=f._private.rscratch;_.labelAngle=c.calculateLabelAngle(f),h&&(_.sourceLabelAngle=c.calculateLabelAngle(f,"source"),_.targetLabelAngle=c.calculateLabelAngle(f,"target"))};var ng={},Wu=!1;ng.getNodeShape=function(f){var h=f.pstyle("shape").value;if("cutrectangle"===h&&(f.width()<28||f.height()<28))return Wu||(de("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),Wu=!0),"rectangle";if(f.isParent())return"rectangle"===h||"roundrectangle"===h||"round-rectangle"===h||"cutrectangle"===h||"cut-rectangle"===h||"barrel"===h?h:"rectangle";if("polygon"===h){var m=f.pstyle("shape-polygon-points").value;return this.nodeShapes.makePolygon(m).name}return h};var gh={updateCachedGrabbedEles:function(){var f=this.cachedZSortedEles;if(f){f.drag=[],f.nondrag=[];for(var c=[],h=0;h<f.length;h++){var _=(m=f[h])._private.rscratch;m.grabbed()&&!m.isParent()?c.push(m):_.inDragLayer?f.drag.push(m):f.nondrag.push(m)}for(h=0;h<c.length;h++){var m;f.drag.push(m=c[h])}}},invalidateCachedZSortedEles:function(){this.cachedZSortedEles=null},getCachedZSortedEles:function(f){if(f||!this.cachedZSortedEles){var c=this.cy.mutableElements().toArray();c.sort(ap),c.interactive=c.filter(function(h){return h.interactive()}),this.cachedZSortedEles=c,this.updateCachedGrabbedEles()}else c=this.cachedZSortedEles;return c}},vd={};[ka,Bm,Vl,md,tg,Oc,ng,{registerCalculationListeners:function(){var f=this.cy,c=f.collection(),h=this,m=function(w){var E=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(c.merge(w),E)for(var k=0;k<w.length;k++){var L=w[k],G=L._private,K=G.rstyle;K.clean=!1,K.cleanConnected=!1}};h.binder(f).on("bounds.* dirty.*",function(w){m(w.target)}).on("style.* background.*",function(w){m(w.target,!1)});var _=function(w){if(w){var E=h.onUpdateEleCalcsFns;c.cleanStyle();for(var k=0;k<c.length;k++){var L=c[k],G=L._private.rstyle;L.isNode()&&!G.cleanConnected&&(m(L.connectedEdges()),G.cleanConnected=!0)}if(E)for(var K=0;K<E.length;K++)(0,E[K])(w,c);h.recalculateRenderedStyle(c),c=f.collection()}};h.flushRenderedStyleQueue=function(){_(!0)},h.beforeRender(_,h.beforeRenderPriorities.eleCalcs)},onUpdateEleCalcs:function(f){(this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[]).push(f)},recalculateRenderedStyle:function(f,c){var h=function(ht){return ht._private.rstyle.cleanConnected},m=[],_=[];if(!this.destroyed){void 0===c&&(c=!0);for(var C=0;C<f.length;C++){var w=f[C],E=w._private,k=E.rstyle;w.isEdge()&&(!h(w.source())||!h(w.target()))&&(k.clean=!1),!(c&&k.clean||w.removed())&&"none"!==w.pstyle("display").value&&("nodes"===E.group?_.push(w):m.push(w),k.clean=!0)}for(var L=0;L<_.length;L++){var G=_[L],le=G._private.rstyle,he=G.position();this.recalculateNodeLabelProjection(G),le.nodeX=he.x,le.nodeY=he.y,le.nodeW=G.pstyle("width").pfValue,le.nodeH=G.pstyle("height").pfValue}this.recalculateEdgeProjections(m);for(var pe=0;pe<m.length;pe++){var Ne=m[pe]._private,ze=Ne.rstyle,Qe=Ne.rscratch;ze.srcX=Qe.arrowStartX,ze.srcY=Qe.arrowStartY,ze.tgtX=Qe.arrowEndX,ze.tgtY=Qe.arrowEndY,ze.midX=Qe.midX,ze.midY=Qe.midY,ze.labelAngle=Qe.labelAngle,ze.sourceLabelAngle=Qe.sourceLabelAngle,ze.targetLabelAngle=Qe.targetLabelAngle}}}},gh].forEach(function(f){tr(vd,f)});var Zh={getCachedImage:function(f,c,h){var _=this.imageCache=this.imageCache||{},C=_[f];if(C)return C.image.complete||C.image.addEventListener("load",h),C.image;var w=(C=_[f]=_[f]||{}).image=new Image;w.addEventListener("load",h),w.addEventListener("error",function(){w.error=!0});var E="data:";return f.substring(0,E.length).toLowerCase()===E||(w.crossOrigin=c),w.src=f,w}},nu={registerBinding:function(f,c,h,m){var _=Array.prototype.slice.apply(arguments,[1]),C=this.binder(f);return C.on.apply(C,_)},binder:function(f){var c=this,h=f===window||f===document||f===document.body||function(c){return!(typeof HTMLElement>"u")&&c instanceof HTMLElement}(f);if(null==c.supportsPassiveEvents){var m=!1;try{var _=Object.defineProperty({},"passive",{get:function(){return m=!0,!0}});window.addEventListener("test",null,_)}catch{}c.supportsPassiveEvents=m}var C=function(E,k,L){var G=Array.prototype.slice.call(arguments);return h&&c.supportsPassiveEvents&&(G[2]={capture:L??!1,passive:!1,once:!1}),c.bindings.push({target:f,args:G}),(f.addEventListener||f.on).apply(f,G),this};return{on:C,addEventListener:C,addListener:C,bind:C}},nodeIsDraggable:function(f){return f&&f.isNode()&&!f.locked()&&f.grabbable()},nodeIsGrabbable:function(f){return this.nodeIsDraggable(f)&&f.interactive()}};nu.load=function(){var f=this,c=function(St){return St.selected()},h=function(St,$n,Ei,Ve){null==St&&(St=f.cy);for(var ut=0;ut<$n.length;ut++)St.emit({originalEvent:Ei,type:$n[ut],position:Ve})},m=function(St){return St.shiftKey||St.metaKey||St.ctrlKey},_=function(St,$n){var Ei=!0;if(f.cy.hasCompoundNodes()&&St&&St.pannable()){for(var Ve=0;$n&&Ve<$n.length;Ve++)if((St=$n[Ve]).isNode()&&St.isParent()&&!St.pannable()){Ei=!1;break}}else Ei=!0;return Ei},E=function(St){St[0]._private.rscratch.inDragLayer=!0},L=function(St){St[0]._private.rscratch.isGrabTarget=!0},K=function(St,$n){var Ei=$n.addToList;!Ei.has(St)&&St.grabbable()&&!St.locked()&&(Ei.merge(St),function(St){St[0]._private.grabbed=!0}(St))},he=function(St,$n){$n=$n||{};var Ei=St.cy().hasCompoundNodes();$n.inDragLayer&&(St.forEach(E),St.neighborhood().stdFilter(function(Ve){return!Ei||Ve.isEdge()}).forEach(E)),$n.addToList&&St.forEach(function(Ve){K(Ve,$n)}),function(St,$n){if(St.cy().hasCompoundNodes()&&(null!=$n.inDragLayer||null!=$n.addToList)){var Ei=St.descendants();$n.inDragLayer&&(Ei.forEach(E),Ei.connectedEdges().forEach(E)),$n.addToList&&K(Ei,$n)}}(St,$n),Ne(St,{inDragLayer:$n.inDragLayer}),f.updateCachedGrabbedEles()},pe=he,Ie=function(St){!St||(f.getCachedZSortedEles().forEach(function($n){(function(St){St[0]._private.grabbed=!1})($n),function(St){St[0]._private.rscratch.inDragLayer=!1}($n),function(St){St[0]._private.rscratch.isGrabTarget=!1}($n)}),f.updateCachedGrabbedEles())},Ne=function(St,$n){if((null!=$n.inDragLayer||null!=$n.addToList)&&St.cy().hasCompoundNodes()){var Ei=St.ancestors().orphans();if(!Ei.same(St)){var Ve=Ei.descendants().spawnSelf().merge(Ei).unmerge(St).unmerge(St.descendants()),ut=Ve.connectedEdges();$n.inDragLayer&&(ut.forEach(E),Ve.forEach(E)),$n.addToList&&Ve.forEach(function(an){K(an,$n)})}}},ze=function(){null!=document.activeElement&&null!=document.activeElement.blur&&document.activeElement.blur()},Qe=typeof MutationObserver<"u",qe=typeof ResizeObserver<"u";Qe?(f.removeObserver=new MutationObserver(function(Ui){for(var St=0;St<Ui.length;St++){var Ei=Ui[St].removedNodes;if(Ei)for(var Ve=0;Ve<Ei.length;Ve++)if(Ei[Ve]===f.container){f.destroy();break}}}),f.container.parentNode&&f.removeObserver.observe(f.container.parentNode,{childList:!0})):f.registerBinding(f.container,"DOMNodeRemoved",function(Ui){f.destroy()});var ht=O.default(function(){f.cy.resize()},100);Qe&&(f.styleObserver=new MutationObserver(ht),f.styleObserver.observe(f.container,{attributes:!0})),f.registerBinding(window,"resize",ht),qe&&(f.resizeObserver=new ResizeObserver(ht),f.resizeObserver.observe(f.container));var kt=function(){f.invalidateContainerClientCoordsCache()};(function(St,$n){for(;null!=St;)f.registerBinding(Ui=St,"transitionend",kt),f.registerBinding(Ui,"animationend",kt),f.registerBinding(Ui,"scroll",kt),St=St.parentNode;var Ui})(f.container),f.registerBinding(f.container,"contextmenu",function(Ui){Ui.preventDefault()});var Ct,Ht,Vt,Ft=function(St){for(var $n=f.findContainerClientCoords(),Ei=$n[0],Ve=$n[1],ut=$n[2],an=$n[3],hn=St.touches?St.touches:[St],gn=!1,Qi=0;Qi<hn.length;Qi++){var sr=hn[Qi];if(Ei<=sr.clientX&&sr.clientX<=Ei+ut&&Ve<=sr.clientY&&sr.clientY<=Ve+an){gn=!0;break}}if(!gn)return!1;for(var ni=f.container,Oi=St.target.parentNode,Ni=!1;Oi;){if(Oi===ni){Ni=!0;break}Oi=Oi.parentNode}return!!Ni};f.registerBinding(f.container,"mousedown",function(St){if(Ft(St)){St.preventDefault(),ze(),f.hoverData.capture=!0,f.hoverData.which=St.which;var $n=f.cy,Ei=[St.clientX,St.clientY],Ve=f.projectIntoViewport(Ei[0],Ei[1]),ut=f.selection,an=f.findNearestElements(Ve[0],Ve[1],!0,!1),hn=an[0],gn=f.dragData.possibleDragElements;if(f.hoverData.mdownPos=Ve,f.hoverData.mdownGPos=Ei,3==St.which){f.hoverData.cxtStarted=!0;var sr={originalEvent:St,type:"cxttapstart",position:{x:Ve[0],y:Ve[1]}};hn?(hn.activate(),hn.emit(sr),f.hoverData.down=hn):$n.emit(sr),f.hoverData.downTime=(new Date).getTime(),f.hoverData.cxtDragged=!1}else if(1==St.which){if(hn&&hn.activate(),null!=hn&&f.nodeIsGrabbable(hn)){var ni=function(Zi){return{originalEvent:St,type:Zi,position:{x:Ve[0],y:Ve[1]}}};if(L(hn),hn.selected()){gn=f.dragData.possibleDragElements=$n.collection();var Oi=$n.$(function(Ni){return Ni.isNode()&&Ni.selected()&&f.nodeIsGrabbable(Ni)});he(Oi,{addToList:gn}),hn.emit(ni("grabon")),Oi.forEach(function(Zi){Zi.emit(ni("grab"))})}else gn=f.dragData.possibleDragElements=$n.collection(),pe(hn,{addToList:gn}),hn.emit(ni("grabon")).emit(ni("grab"));f.redrawHint("eles",!0),f.redrawHint("drag",!0)}f.hoverData.down=hn,f.hoverData.downs=an,f.hoverData.downTime=(new Date).getTime(),h(hn,["mousedown","tapstart","vmousedown"],St,{x:Ve[0],y:Ve[1]}),null==hn?(ut[4]=1,f.data.bgActivePosistion={x:Ve[0],y:Ve[1]},f.redrawHint("select",!0),f.redraw()):hn.pannable()&&(ut[4]=1),f.hoverData.tapholdCancelled=!1,clearTimeout(f.hoverData.tapholdTimeout),f.hoverData.tapholdTimeout=setTimeout(function(){if(!f.hoverData.tapholdCancelled){var Zi=f.hoverData.down;Zi?Zi.emit({originalEvent:St,type:"taphold",position:{x:Ve[0],y:Ve[1]}}):$n.emit({originalEvent:St,type:"taphold",position:{x:Ve[0],y:Ve[1]}})}},f.tapholdDuration)}ut[0]=ut[2]=Ve[0],ut[1]=ut[3]=Ve[1]}},!1),f.registerBinding(window,"mousemove",function(St){var Vc;if(f.hoverData.capture||Ft(St)){var Ei=!1,Ve=f.cy,ut=Ve.zoom(),an=[St.clientX,St.clientY],hn=f.projectIntoViewport(an[0],an[1]),gn=f.hoverData.mdownPos,Qi=f.hoverData.mdownGPos,sr=f.selection,ni=null;!f.hoverData.draggingEles&&!f.hoverData.dragging&&!f.hoverData.selecting&&(ni=f.findNearestElement(hn[0],hn[1],!0,!1));var eo,Fr=f.hoverData.last,Oi=f.hoverData.down,Ni=[hn[0]-sr[2],hn[1]-sr[3]],Zi=f.dragData.possibleDragElements;if(Qi){var ao=an[0]-Qi[0],Ho=an[1]-Qi[1];f.hoverData.isOverThresholdDrag=eo=ao*ao+Ho*Ho>=f.desktopTapThreshold2}var Sr=m(St);eo&&(f.hoverData.tapholdCancelled=!0),Ei=!0,h(ni,["mousemove","vmousemove","tapdrag"],St,{x:hn[0],y:hn[1]});var Ul=function(){f.data.bgActivePosistion=void 0,f.hoverData.selecting||Ve.emit({originalEvent:St,type:"boxstart",position:{x:hn[0],y:hn[1]}}),sr[4]=1,f.hoverData.selecting=!0,f.redrawHint("select",!0),f.redraw()};if(3===f.hoverData.which){if(eo){var Hl={originalEvent:St,type:"cxtdrag",position:{x:hn[0],y:hn[1]}};Oi?Oi.emit(Hl):Ve.emit(Hl),f.hoverData.cxtDragged=!0,(!f.hoverData.cxtOver||ni!==f.hoverData.cxtOver)&&(f.hoverData.cxtOver&&f.hoverData.cxtOver.emit({originalEvent:St,type:"cxtdragout",position:{x:hn[0],y:hn[1]}}),f.hoverData.cxtOver=ni,ni&&ni.emit({originalEvent:St,type:"cxtdragover",position:{x:hn[0],y:hn[1]}}))}}else if(f.hoverData.dragging){if(Ei=!0,Ve.panningEnabled()&&Ve.userPanningEnabled()){var Nc;if(f.hoverData.justStartedPan){var _p=f.hoverData.mdownPos;Nc={x:(hn[0]-_p[0])*ut,y:(hn[1]-_p[1])*ut},f.hoverData.justStartedPan=!1}else Nc={x:Ni[0]*ut,y:Ni[1]*ut};Ve.panBy(Nc),Ve.emit("dragpan"),f.hoverData.dragged=!0}hn=f.projectIntoViewport(St.clientX,St.clientY)}else if(1!=sr[4]||null!=Oi&&!Oi.pannable()){if(Oi&&Oi.pannable()&&Oi.active()&&Oi.unactivate(),(!Oi||!Oi.grabbed())&&ni!=Fr&&(Fr&&h(Fr,["mouseout","tapdragout"],St,{x:hn[0],y:hn[1]}),ni&&h(ni,["mouseover","tapdragover"],St,{x:hn[0],y:hn[1]}),f.hoverData.last=ni),Oi)if(eo){if(Ve.boxSelectionEnabled()&&Sr)Oi&&Oi.grabbed()&&(Ie(Zi),Oi.emit("freeon"),Zi.emit("free"),f.dragData.didDrag&&(Oi.emit("dragfreeon"),Zi.emit("dragfree"))),Ul();else if(Oi&&Oi.grabbed()&&f.nodeIsDraggable(Oi)){var Bc=!f.dragData.didDrag;Bc&&f.redrawHint("eles",!0),f.dragData.didDrag=!0,f.hoverData.draggingEles||he(Zi,{inDragLayer:!0});var nc={x:0,y:0};if(Ut(Ni[0])&&Ut(Ni[1])&&(nc.x+=Ni[0],nc.y+=Ni[1],Bc)){var zc=f.hoverData.dragDelta;zc&&Ut(zc[0])&&Ut(zc[1])&&(nc.x+=zc[0],nc.y+=zc[1])}f.hoverData.draggingEles=!0,Zi.silentShift(nc).emit("position drag"),f.redrawHint("drag",!0),f.redraw()}}else 0===(Vc=f.hoverData.dragDelta=f.hoverData.dragDelta||[]).length?(Vc.push(Ni[0]),Vc.push(Ni[1])):(Vc[0]+=Ni[0],Vc[1]+=Ni[1]);Ei=!0}else eo&&(f.hoverData.dragging||!Ve.boxSelectionEnabled()||!Sr&&Ve.panningEnabled()&&Ve.userPanningEnabled()?!f.hoverData.selecting&&Ve.panningEnabled()&&Ve.userPanningEnabled()&&_(Oi,f.hoverData.downs)&&(f.hoverData.dragging=!0,f.hoverData.justStartedPan=!0,sr[4]=0,f.data.bgActivePosistion=rh(gn),f.redrawHint("select",!0),f.redraw()):Ul(),Oi&&Oi.pannable()&&Oi.active()&&Oi.unactivate());if(sr[2]=hn[0],sr[3]=hn[1],Ei)return St.stopPropagation&&St.stopPropagation(),St.preventDefault&&St.preventDefault(),!1}},!1),f.registerBinding(window,"mouseup",function(St){if(f.hoverData.capture){f.hoverData.capture=!1;var Ei=f.cy,Ve=f.projectIntoViewport(St.clientX,St.clientY),ut=f.selection,an=f.findNearestElement(Ve[0],Ve[1],!0,!1),hn=f.dragData.possibleDragElements,gn=f.hoverData.down,Qi=m(St);if(f.data.bgActivePosistion&&(f.redrawHint("select",!0),f.redraw()),f.hoverData.tapholdCancelled=!0,f.data.bgActivePosistion=void 0,gn&&gn.unactivate(),3===f.hoverData.which){var sr={originalEvent:St,type:"cxttapend",position:{x:Ve[0],y:Ve[1]}};if(gn?gn.emit(sr):Ei.emit(sr),!f.hoverData.cxtDragged){var ni={originalEvent:St,type:"cxttap",position:{x:Ve[0],y:Ve[1]}};gn?gn.emit(ni):Ei.emit(ni)}f.hoverData.cxtDragged=!1,f.hoverData.which=null}else if(1===f.hoverData.which){if(h(an,["mouseup","tapend","vmouseup"],St,{x:Ve[0],y:Ve[1]}),!f.dragData.didDrag&&!f.hoverData.dragged&&!f.hoverData.selecting&&!f.hoverData.isOverThresholdDrag&&(h(gn,["click","tap","vclick"],St,{x:Ve[0],y:Ve[1]}),Ht=!1,St.timeStamp-Vt<=Ei.multiClickDebounceTime()?(Ct&&clearTimeout(Ct),Ht=!0,Vt=null,h(gn,["dblclick","dbltap","vdblclick"],St,{x:Ve[0],y:Ve[1]})):(Ct=setTimeout(function(){Ht||h(gn,["oneclick","onetap","voneclick"],St,{x:Ve[0],y:Ve[1]})},Ei.multiClickDebounceTime()),Vt=St.timeStamp)),null==gn&&!f.dragData.didDrag&&!f.hoverData.selecting&&!f.hoverData.dragged&&!m(St)&&(Ei.$(c).unselect(["tapunselect"]),hn.length>0&&f.redrawHint("eles",!0),f.dragData.possibleDragElements=hn=Ei.collection()),an==gn&&!f.dragData.didDrag&&!f.hoverData.selecting&&null!=an&&an._private.selectable&&(f.hoverData.dragging||("additive"===Ei.selectionType()||Qi?an.selected()?an.unselect(["tapunselect"]):an.select(["tapselect"]):Qi||(Ei.$(c).unmerge(an).unselect(["tapunselect"]),an.select(["tapselect"]))),f.redrawHint("eles",!0)),f.hoverData.selecting){var Fr=Ei.collection(f.getAllInBox(ut[0],ut[1],ut[2],ut[3]));f.redrawHint("select",!0),Fr.length>0&&f.redrawHint("eles",!0),Ei.emit({type:"boxend",originalEvent:St,position:{x:Ve[0],y:Ve[1]}}),"additive"===Ei.selectionType()||Qi||Ei.$(c).unmerge(Fr).unselect(),Fr.emit("box").stdFilter(function(eo){return eo.selectable()&&!eo.selected()}).select().emit("boxselect"),f.redraw()}if(f.hoverData.dragging&&(f.hoverData.dragging=!1,f.redrawHint("select",!0),f.redrawHint("eles",!0),f.redraw()),!ut[4]){f.redrawHint("drag",!0),f.redrawHint("eles",!0);var Ni=gn&&gn.grabbed();Ie(hn),Ni&&(gn.emit("freeon"),hn.emit("free"),f.dragData.didDrag&&(gn.emit("dragfreeon"),hn.emit("dragfree")))}}ut[4]=0,f.hoverData.down=null,f.hoverData.cxtStarted=!1,f.hoverData.draggingEles=!1,f.hoverData.selecting=!1,f.hoverData.isOverThresholdDrag=!1,f.dragData.didDrag=!1,f.hoverData.dragged=!1,f.hoverData.dragDelta=[],f.hoverData.mdownPos=null,f.hoverData.mdownGPos=null}},!1);var et=function(St){if(!f.scrollingPage){var $n=f.cy,Ei=$n.zoom(),Ve=$n.pan(),ut=f.projectIntoViewport(St.clientX,St.clientY),an=[ut[0]*Ei+Ve.x,ut[1]*Ei+Ve.y];if(f.hoverData.draggingEles||f.hoverData.dragging||f.hoverData.cxtStarted||0!==f.selection[4])return void St.preventDefault();if($n.panningEnabled()&&$n.userPanningEnabled()&&$n.zoomingEnabled()&&$n.userZoomingEnabled()){var hn;St.preventDefault(),f.data.wheelZooming=!0,clearTimeout(f.data.wheelTimeout),f.data.wheelTimeout=setTimeout(function(){f.data.wheelZooming=!1,f.redrawHint("eles",!0),f.redraw()},150),hn=null!=St.deltaY?St.deltaY/-250:null!=St.wheelDeltaY?St.wheelDeltaY/1e3:St.wheelDelta/1e3,hn*=f.wheelSensitivity,1===St.deltaMode&&(hn*=33);var Qi=$n.zoom()*Math.pow(10,hn);"gesturechange"===St.type&&(Qi=f.gestureStartZoom*St.scale),$n.zoom({level:Qi,renderedPosition:{x:an[0],y:an[1]}}),$n.emit("gesturechange"===St.type?"pinchzoom":"scrollzoom")}}};f.registerBinding(f.container,"wheel",et,!0),f.registerBinding(window,"scroll",function(St){f.scrollingPage=!0,clearTimeout(f.scrollingPageTimeout),f.scrollingPageTimeout=setTimeout(function(){f.scrollingPage=!1},250)},!0),f.registerBinding(f.container,"gesturestart",function(St){f.gestureStartZoom=f.cy.zoom(),f.hasTouchStarted||St.preventDefault()},!0),f.registerBinding(f.container,"gesturechange",function(Ui){f.hasTouchStarted||et(Ui)},!0),f.registerBinding(f.container,"mouseout",function(St){var $n=f.projectIntoViewport(St.clientX,St.clientY);f.cy.emit({originalEvent:St,type:"mouseout",position:{x:$n[0],y:$n[1]}})},!1),f.registerBinding(f.container,"mouseover",function(St){var $n=f.projectIntoViewport(St.clientX,St.clientY);f.cy.emit({originalEvent:St,type:"mouseover",position:{x:$n[0],y:$n[1]}})},!1);var Gt,Tt,mn,Yt,ln,Sn,Rn,Jn,En,Yn,li,bi,pi,si,xi,ji,rr,Br,Kr,hr,di=function(St,$n,Ei,Ve){return Math.sqrt((Ei-St)*(Ei-St)+(Ve-$n)*(Ve-$n))},Mn=function(St,$n,Ei,Ve){return(Ei-St)*(Ei-St)+(Ve-$n)*(Ve-$n)};if(f.registerBinding(f.container,"touchstart",si=function(St){if(f.hasTouchStarted=!0,Ft(St)){ze(),f.touchData.capture=!0,f.data.bgActivePosistion=void 0;var $n=f.cy,Ei=f.touchData.now,Ve=f.touchData.earlier;if(St.touches[0]){var ut=f.projectIntoViewport(St.touches[0].clientX,St.touches[0].clientY);Ei[0]=ut[0],Ei[1]=ut[1]}if(St.touches[1]&&(ut=f.projectIntoViewport(St.touches[1].clientX,St.touches[1].clientY),Ei[2]=ut[0],Ei[3]=ut[1]),St.touches[2]&&(ut=f.projectIntoViewport(St.touches[2].clientX,St.touches[2].clientY),Ei[4]=ut[0],Ei[5]=ut[1]),St.touches[1]){f.touchData.singleTouchMoved=!0,Ie(f.dragData.touchDragEles);var an=f.findContainerClientCoords();li=an[2],bi=an[3],Tt=St.touches[0].clientY-(Yn=an[1]),mn=St.touches[1].clientX-(En=an[0]),Yt=St.touches[1].clientY-Yn,pi=0<=(Gt=St.touches[0].clientX-En)&&Gt<=li&&0<=mn&&mn<=li&&0<=Tt&&Tt<=bi&&0<=Yt&&Yt<=bi;var hn=$n.pan(),gn=$n.zoom();if(ln=di(Gt,Tt,mn,Yt),Sn=Mn(Gt,Tt,mn,Yt),Jn=[((Rn=[(Gt+mn)/2,(Tt+Yt)/2])[0]-hn.x)/gn,(Rn[1]-hn.y)/gn],Sn<4e4&&!St.touches[2]){var ni=f.findNearestElement(Ei[0],Ei[1],!0,!0),Fr=f.findNearestElement(Ei[2],Ei[3],!0,!0);return ni&&ni.isNode()?(ni.activate().emit({originalEvent:St,type:"cxttapstart",position:{x:Ei[0],y:Ei[1]}}),f.touchData.start=ni):Fr&&Fr.isNode()?(Fr.activate().emit({originalEvent:St,type:"cxttapstart",position:{x:Ei[0],y:Ei[1]}}),f.touchData.start=Fr):$n.emit({originalEvent:St,type:"cxttapstart",position:{x:Ei[0],y:Ei[1]}}),f.touchData.start&&(f.touchData.start._private.grabbed=!1),f.touchData.cxt=!0,f.touchData.cxtDragged=!1,f.data.bgActivePosistion=void 0,void f.redraw()}}if(St.touches[2])$n.boxSelectionEnabled()&&St.preventDefault();else if(!St.touches[1]&&St.touches[0]){var Oi=f.findNearestElements(Ei[0],Ei[1],!0,!0),Ni=Oi[0];if(null!=Ni&&(Ni.activate(),f.touchData.start=Ni,f.touchData.starts=Oi,f.nodeIsGrabbable(Ni))){var Zi=f.dragData.touchDragEles=$n.collection(),eo=null;f.redrawHint("eles",!0),f.redrawHint("drag",!0),Ni.selected()?(eo=$n.$(function(Yo){return Yo.selected()&&f.nodeIsGrabbable(Yo)}),he(eo,{addToList:Zi})):pe(Ni,{addToList:Zi}),L(Ni);var ao=function(Sr){return{originalEvent:St,type:Sr,position:{x:Ei[0],y:Ei[1]}}};Ni.emit(ao("grabon")),eo?eo.forEach(function(Yo){Yo.emit(ao("grab"))}):Ni.emit(ao("grab"))}h(Ni,["touchstart","tapstart","vmousedown"],St,{x:Ei[0],y:Ei[1]}),null==Ni&&(f.data.bgActivePosistion={x:ut[0],y:ut[1]},f.redrawHint("select",!0),f.redraw()),f.touchData.singleTouchMoved=!1,f.touchData.singleTouchStartTime=+new Date,clearTimeout(f.touchData.tapholdTimeout),f.touchData.tapholdTimeout=setTimeout(function(){!1===f.touchData.singleTouchMoved&&!f.pinching&&!f.touchData.selecting&&h(f.touchData.start,["taphold"],St,{x:Ei[0],y:Ei[1]})},f.tapholdDuration)}if(St.touches.length>=1){for(var Fa=f.touchData.startPosition=[],Ho=0;Ho<Ei.length;Ho++)Fa[Ho]=Ve[Ho]=Ei[Ho];var Eo=St.touches[0];f.touchData.startGPosition=[Eo.clientX,Eo.clientY]}}},!1),f.registerBinding(window,"touchmove",xi=function(St){var $n=f.touchData.capture;if($n||Ft(St)){var Ei=f.selection,Ve=f.cy,ut=f.touchData.now,an=f.touchData.earlier,hn=Ve.zoom();if(St.touches[0]){var gn=f.projectIntoViewport(St.touches[0].clientX,St.touches[0].clientY);ut[0]=gn[0],ut[1]=gn[1]}St.touches[1]&&(gn=f.projectIntoViewport(St.touches[1].clientX,St.touches[1].clientY),ut[2]=gn[0],ut[3]=gn[1]),St.touches[2]&&(gn=f.projectIntoViewport(St.touches[2].clientX,St.touches[2].clientY),ut[4]=gn[0],ut[5]=gn[1]);var sr,Qi=f.touchData.startGPosition;if($n&&St.touches[0]&&Qi){for(var ni=[],Fr=0;Fr<ut.length;Fr++)ni[Fr]=ut[Fr]-an[Fr];var Oi=St.touches[0].clientX-Qi[0],Zi=St.touches[0].clientY-Qi[1];sr=Oi*Oi+Zi*Zi>=f.touchTapThreshold2}if($n&&f.touchData.cxt){St.preventDefault();var Sr=Mn(Fa=St.touches[0].clientX-En,Ho=St.touches[0].clientY-Yn,Eo=St.touches[1].clientX-En,Yo=St.touches[1].clientY-Yn);if(Sr/Sn>=2.25||Sr>=22500){f.touchData.cxt=!1,f.data.bgActivePosistion=void 0,f.redrawHint("select",!0);var Of={originalEvent:St,type:"cxttapend",position:{x:ut[0],y:ut[1]}};f.touchData.start?(f.touchData.start.unactivate().emit(Of),f.touchData.start=null):Ve.emit(Of)}}if($n&&f.touchData.cxt){Of={originalEvent:St,type:"cxtdrag",position:{x:ut[0],y:ut[1]}},f.data.bgActivePosistion=void 0,f.redrawHint("select",!0),f.touchData.start?f.touchData.start.emit(Of):Ve.emit(Of),f.touchData.start&&(f.touchData.start._private.grabbed=!1),f.touchData.cxtDragged=!0;var Bc=f.findNearestElement(ut[0],ut[1],!0,!0);(!f.touchData.cxtOver||Bc!==f.touchData.cxtOver)&&(f.touchData.cxtOver&&f.touchData.cxtOver.emit({originalEvent:St,type:"cxtdragout",position:{x:ut[0],y:ut[1]}}),f.touchData.cxtOver=Bc,Bc&&Bc.emit({originalEvent:St,type:"cxtdragover",position:{x:ut[0],y:ut[1]}}))}else if($n&&St.touches[2]&&Ve.boxSelectionEnabled())St.preventDefault(),f.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,f.touchData.selecting||Ve.emit({originalEvent:St,type:"boxstart",position:{x:ut[0],y:ut[1]}}),f.touchData.selecting=!0,f.touchData.didSelect=!0,Ei[4]=1,Ei&&0!==Ei.length&&void 0!==Ei[0]?(Ei[2]=(ut[0]+ut[2]+ut[4])/3,Ei[3]=(ut[1]+ut[3]+ut[5])/3):(Ei[0]=(ut[0]+ut[2]+ut[4])/3,Ei[1]=(ut[1]+ut[3]+ut[5])/3,Ei[2]=(ut[0]+ut[2]+ut[4])/3+1,Ei[3]=(ut[1]+ut[3]+ut[5])/3+1),f.redrawHint("select",!0),f.redraw();else if($n&&St.touches[1]&&!f.touchData.didSelect&&Ve.zoomingEnabled()&&Ve.panningEnabled()&&Ve.userZoomingEnabled()&&Ve.userPanningEnabled()){if(St.preventDefault(),f.data.bgActivePosistion=void 0,f.redrawHint("select",!0),nc=f.dragData.touchDragEles){f.redrawHint("drag",!0);for(var zc=0;zc<nc.length;zc++){var bp=nc[zc]._private;bp.grabbed=!1,bp.rscratch.inDragLayer=!1}}var Fa,Ho,Eo,Yo,Vc=f.touchData.start,Zs=di(Fa=St.touches[0].clientX-En,Ho=St.touches[0].clientY-Yn,Eo=St.touches[1].clientX-En,Yo=St.touches[1].clientY-Yn),gb=Zs/ln;if(pi){var Q_=(Fa-Gt+(Eo-mn))/2,mb=(Ho-Tt+(Yo-Yt))/2,lg=Ve.zoom(),Yy=lg*gb,Vv=Ve.pan(),cg=Jn[0]*lg+Vv.x,J_=Jn[1]*lg+Vv.y,vb={x:-Yy/lg*(cg-Vv.x-Q_)+cg,y:-Yy/lg*(J_-Vv.y-mb)+J_};Vc&&Vc.active()&&(Ie(nc=f.dragData.touchDragEles),f.redrawHint("drag",!0),f.redrawHint("eles",!0),Vc.unactivate().emit("freeon"),nc.emit("free"),f.dragData.didDrag&&(Vc.emit("dragfreeon"),nc.emit("dragfree"))),Ve.viewport({zoom:Yy,pan:vb,cancelOnFailedZoom:!0}),Ve.emit("pinchzoom"),ln=Zs,Gt=Fa,Tt=Ho,mn=Eo,Yt=Yo,f.pinching=!0}St.touches[0]&&(gn=f.projectIntoViewport(St.touches[0].clientX,St.touches[0].clientY),ut[0]=gn[0],ut[1]=gn[1]),St.touches[1]&&(gn=f.projectIntoViewport(St.touches[1].clientX,St.touches[1].clientY),ut[2]=gn[0],ut[3]=gn[1]),St.touches[2]&&(gn=f.projectIntoViewport(St.touches[2].clientX,St.touches[2].clientY),ut[4]=gn[0],ut[5]=gn[1])}else if(St.touches[0]&&!f.touchData.didSelect){var ef=f.touchData.start,yb=f.touchData.last;if(!f.hoverData.draggingEles&&!f.swipePanning&&(Bc=f.findNearestElement(ut[0],ut[1],!0,!0)),$n&&null!=ef&&St.preventDefault(),$n&&null!=ef&&f.nodeIsDraggable(ef))if(sr){var nc=f.dragData.touchDragEles,Uv=!f.dragData.didDrag;Uv&&he(nc,{inDragLayer:!0}),f.dragData.didDrag=!0;var Hv={x:0,y:0};Ut(ni[0])&&Ut(ni[1])&&(Hv.x+=ni[0],Hv.y+=ni[1],Uv)&&(f.redrawHint("eles",!0),(bh=f.touchData.dragDelta)&&Ut(bh[0])&&Ut(bh[1])&&(Hv.x+=bh[0],Hv.y+=bh[1])),f.hoverData.draggingEles=!0,nc.silentShift(Hv).emit("position drag"),f.redrawHint("drag",!0),f.touchData.startPosition[0]==an[0]&&f.touchData.startPosition[1]==an[1]&&f.redrawHint("eles",!0),f.redraw()}else{var bh;0===(bh=f.touchData.dragDelta=f.touchData.dragDelta||[]).length?(bh.push(ni[0]),bh.push(ni[1])):(bh[0]+=ni[0],bh[1]+=ni[1])}if(h(ef||Bc,["touchmove","tapdrag","vmousemove"],St,{x:ut[0],y:ut[1]}),(!ef||!ef.grabbed())&&Bc!=yb&&(yb&&yb.emit({originalEvent:St,type:"tapdragout",position:{x:ut[0],y:ut[1]}}),Bc&&Bc.emit({originalEvent:St,type:"tapdragover",position:{x:ut[0],y:ut[1]}})),f.touchData.last=Bc,$n)for(zc=0;zc<ut.length;zc++)ut[zc]&&f.touchData.startPosition[zc]&&sr&&(f.touchData.singleTouchMoved=!0);$n&&(null==ef||ef.pannable())&&Ve.panningEnabled()&&Ve.userPanningEnabled()&&(_(ef,f.touchData.starts)&&(St.preventDefault(),f.data.bgActivePosistion||(f.data.bgActivePosistion=rh(f.touchData.startPosition)),f.swipePanning?(Ve.panBy({x:ni[0]*hn,y:ni[1]*hn}),Ve.emit("dragpan")):sr&&(f.swipePanning=!0,Ve.panBy({x:Oi*hn,y:Zi*hn}),Ve.emit("dragpan"),ef&&(ef.unactivate(),f.redrawHint("select",!0),f.touchData.start=null))),gn=f.projectIntoViewport(St.touches[0].clientX,St.touches[0].clientY),ut[0]=gn[0],ut[1]=gn[1])}for(Fr=0;Fr<ut.length;Fr++)an[Fr]=ut[Fr];$n&&St.touches.length>0&&!f.hoverData.draggingEles&&!f.swipePanning&&null!=f.data.bgActivePosistion&&(f.data.bgActivePosistion=void 0,f.redrawHint("select",!0),f.redraw())}},!1),f.registerBinding(window,"touchcancel",ji=function(St){var $n=f.touchData.start;f.touchData.capture=!1,$n&&$n.unactivate()}),f.registerBinding(window,"touchend",rr=function(St){var $n=f.touchData.start;if(f.touchData.capture){0===St.touches.length&&(f.touchData.capture=!1),St.preventDefault();var Ve=f.selection;f.swipePanning=!1,f.hoverData.draggingEles=!1;var sr,ut=f.cy,an=ut.zoom(),hn=f.touchData.now,gn=f.touchData.earlier;if(St.touches[0]){var Qi=f.projectIntoViewport(St.touches[0].clientX,St.touches[0].clientY);hn[0]=Qi[0],hn[1]=Qi[1]}if(St.touches[1]&&(Qi=f.projectIntoViewport(St.touches[1].clientX,St.touches[1].clientY),hn[2]=Qi[0],hn[3]=Qi[1]),St.touches[2]&&(Qi=f.projectIntoViewport(St.touches[2].clientX,St.touches[2].clientY),hn[4]=Qi[0],hn[5]=Qi[1]),$n&&$n.unactivate(),f.touchData.cxt){if(sr={originalEvent:St,type:"cxttapend",position:{x:hn[0],y:hn[1]}},$n?$n.emit(sr):ut.emit(sr),!f.touchData.cxtDragged){var ni={originalEvent:St,type:"cxttap",position:{x:hn[0],y:hn[1]}};$n?$n.emit(ni):ut.emit(ni)}return f.touchData.start&&(f.touchData.start._private.grabbed=!1),f.touchData.cxt=!1,f.touchData.start=null,void f.redraw()}if(!St.touches[2]&&ut.boxSelectionEnabled()&&f.touchData.selecting){f.touchData.selecting=!1;var Fr=ut.collection(f.getAllInBox(Ve[0],Ve[1],Ve[2],Ve[3]));Ve[0]=void 0,Ve[1]=void 0,Ve[2]=void 0,Ve[3]=void 0,Ve[4]=0,f.redrawHint("select",!0),ut.emit({type:"boxend",originalEvent:St,position:{x:hn[0],y:hn[1]}}),Fr.emit("box").stdFilter(function(Hl){return Hl.selectable()&&!Hl.selected()}).select().emit("boxselect"),Fr.nonempty()&&f.redrawHint("eles",!0),f.redraw()}if($n?.unactivate(),St.touches[2])f.data.bgActivePosistion=void 0,f.redrawHint("select",!0);else if(!St.touches[1]&&!St.touches[0]&&!St.touches[0]){f.data.bgActivePosistion=void 0,f.redrawHint("select",!0);var Ni=f.dragData.touchDragEles;if(null!=$n){var Zi=$n._private.grabbed;Ie(Ni),f.redrawHint("drag",!0),f.redrawHint("eles",!0),Zi&&($n.emit("freeon"),Ni.emit("free"),f.dragData.didDrag&&($n.emit("dragfreeon"),Ni.emit("dragfree"))),h($n,["touchend","tapend","vmouseup","tapdragout"],St,{x:hn[0],y:hn[1]}),$n.unactivate(),f.touchData.start=null}else{var eo=f.findNearestElement(hn[0],hn[1],!0,!0);h(eo,["touchend","tapend","vmouseup","tapdragout"],St,{x:hn[0],y:hn[1]})}var ao=f.touchData.startPosition[0]-hn[0],Ho=f.touchData.startPosition[1]-hn[1],Sr=(ao*ao+Ho*Ho)*an*an;f.touchData.singleTouchMoved||($n||ut.$(":selected").unselect(["tapunselect"]),h($n,["tap","vclick"],St,{x:hn[0],y:hn[1]}),Br=!1,St.timeStamp-hr<=ut.multiClickDebounceTime()?(Kr&&clearTimeout(Kr),Br=!0,hr=null,h($n,["dbltap","vdblclick"],St,{x:hn[0],y:hn[1]})):(Kr=setTimeout(function(){Br||h($n,["onetap","voneclick"],St,{x:hn[0],y:hn[1]})},ut.multiClickDebounceTime()),hr=St.timeStamp)),null!=$n&&!f.dragData.didDrag&&$n._private.selectable&&Sr<f.touchTapThreshold2&&!f.pinching&&("single"===ut.selectionType()?(ut.$(c).unmerge($n).unselect(["tapunselect"]),$n.select(["tapselect"])):$n.selected()?$n.unselect(["tapunselect"]):$n.select(["tapselect"]),f.redrawHint("eles",!0)),f.touchData.singleTouchMoved=!0}for(var Ha=0;Ha<hn.length;Ha++)gn[Ha]=hn[Ha];f.dragData.didDrag=!1,0===St.touches.length&&(f.touchData.dragDelta=[],f.touchData.startPosition=null,f.touchData.startGPosition=null,f.touchData.didSelect=!1),St.touches.length<2&&(1===St.touches.length&&(f.touchData.startGPosition=[St.touches[0].clientX,St.touches[0].clientY]),f.pinching=!1,f.redrawHint("eles",!0),f.redraw())}},!1),typeof TouchEvent>"u"){var nr=[],jr=function(St){return{clientX:St.clientX,clientY:St.clientY,force:1,identifier:St.pointerId,pageX:St.pageX,pageY:St.pageY,radiusX:St.width/2,radiusY:St.height/2,screenX:St.screenX,screenY:St.screenY,target:St.target}},Cr=function(St){for(var $n=0;$n<nr.length;$n++)if(nr[$n].event.pointerId===St.pointerId)return void nr.splice($n,1)},Fs=function(St){St.touches=nr.map(function($n){return $n.touch})},Qr=function(St){return"mouse"===St.pointerType||4===St.pointerType};f.registerBinding(f.container,"pointerdown",function(Ui){Qr(Ui)||(Ui.preventDefault(),nr.push(function(St){return{event:St,touch:jr(St)}}(Ui)),Fs(Ui),si(Ui))}),f.registerBinding(f.container,"pointerup",function(Ui){Qr(Ui)||(Cr(Ui),Fs(Ui),rr(Ui))}),f.registerBinding(f.container,"pointercancel",function(Ui){Qr(Ui)||(Cr(Ui),Fs(Ui),ji())}),f.registerBinding(f.container,"pointermove",function(Ui){var St,$n;Qr(Ui)||(Ui.preventDefault(),St=Ui,($n=nr.filter(function(Ei){return Ei.event.pointerId===St.pointerId})[0]).event=St,$n.touch=jr(St),Fs(Ui),xi(Ui))})}};var mh={generatePolygon:function(f,c){return this.nodeShapes[f]={renderer:this,name:f,points:c,draw:function(m,_,C,w,E){this.renderer.nodeShapeImpl("polygon",m,_,C,w,E,this.points)},intersectLine:function(m,_,C,w,E,k,L){return lu(E,k,this.points,m,_,C/2,w/2,L)},checkPoint:function(m,_,C,w,E,k,L){return io(m,_,this.points,k,L,w,E,[0,-1],C)}}},generateEllipse:function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(c,h,m,_,C){this.renderer.nodeShapeImpl(this.name,c,h,m,_,C)},intersectLine:function(c,h,m,_,C,w,E){return function(c,h,m,_,C,w){var E=m-c,k=_-h;E/=C,k/=w;var L=Math.sqrt(E*E+k*k),G=L-1;if(G<0)return[];var K=G/L;return[(m-c)*K+c,(_-h)*K+h]}(C,w,c,h,m/2+E,_/2+E)},checkPoint:function(c,h,m,_,C,w,E){return Xa(c,h,_,C,w,E,m)}}},generateRoundPolygon:function(f,c){for(var h=new Array(2*c.length),m=0;m<c.length/2;m++){var C,_=2*m;C=m<c.length/2-1?2*(m+1):0,h[4*m]=c[_],h[4*m+1]=c[_+1];var w=c[C]-c[_],E=c[C+1]-c[_+1],k=Math.sqrt(w*w+E*E);h[4*m+2]=w/k,h[4*m+3]=E/k}return this.nodeShapes[f]={renderer:this,name:f,points:h,draw:function(G,K,le,he,pe){this.renderer.nodeShapeImpl("round-polygon",G,K,le,he,pe,this.points)},intersectLine:function(G,K,le,he,pe,Ie,Ne){return function(c,h,m,_,C,w,E,k){for(var G,L=[],K=new Array(m.length),le=w/2,he=E/2,pe=Pr(w,E),Ie=0;Ie<m.length/4;Ie++){var ze,Ne;Ne=0===Ie?m.length-2:4*Ie-2,ze=4*Ie+2;var Qe=_+le*m[4*Ie],qe=C+he*m[4*Ie+1],Lt=pe/Math.tan(Math.acos(-m[Ne]*m[ze]-m[Ne+1]*m[ze+1])/2),kt=Qe-Lt*m[Ne],mt=qe-Lt*m[Ne+1],Ft=Qe+Lt*m[ze],Ct=qe+Lt*m[ze+1];0===Ie?(K[m.length-2]=kt,K[m.length-1]=mt):(K[4*Ie-2]=kt,K[4*Ie-1]=mt),K[4*Ie]=Ft,K[4*Ie+1]=Ct;var Ht=m[Ne+1],Vt=-m[Ne];Ht*m[ze]+Vt*m[ze+1]<0&&(Ht*=-1,Vt*=-1),0!==(G=$f(c,h,_,C,kt+Ht*pe,mt+Vt*pe,pe)).length&&L.push(G[0],G[1])}for(var mn=0;mn<K.length/4;mn++)0!==(G=nl(c,h,_,C,K[4*mn],K[4*mn+1],K[4*mn+2],K[4*mn+3],!1)).length&&L.push(G[0],G[1]);if(L.length>2){for(var Yt=[L[0],L[1]],ln=Math.pow(Yt[0]-c,2)+Math.pow(Yt[1]-h,2),Sn=1;Sn<L.length/2;Sn++){var Rn=Math.pow(L[2*Sn]-c,2)+Math.pow(L[2*Sn+1]-h,2);Rn<=ln&&(Yt[0]=L[2*Sn],Yt[1]=L[2*Sn+1],ln=Rn)}return Yt}return L}(pe,Ie,this.points,G,K,le,he)},checkPoint:function(G,K,le,he,pe,Ie,Ne){return function(c,h,m,_,C,w,E){for(var k=new Array(m.length),L=w/2,G=E/2,K=Pr(w,E),le=K*K,he=0;he<m.length/4;he++){var Ie,pe;pe=0===he?m.length-2:4*he-2,Ie=4*he+2;var Ne=_+L*m[4*he],ze=C+G*m[4*he+1],qe=K/Math.tan(Math.acos(-m[pe]*m[Ie]-m[pe+1]*m[Ie+1])/2),ht=Ne-qe*m[pe],Lt=ze-qe*m[pe+1],kt=Ne+qe*m[Ie],mt=ze+qe*m[Ie+1];k[4*he]=ht,k[4*he+1]=Lt,k[4*he+2]=kt,k[4*he+3]=mt;var Ft=m[pe+1],Ct=-m[pe];Ft*m[Ie]+Ct*m[Ie+1]<0&&(Ft*=-1,Ct*=-1);var et=Lt+Ct*K;if(Math.pow(ht+Ft*K-c,2)+Math.pow(et-h,2)<=le)return!0}return Ta(c,h,k)}(G,K,this.points,Ie,Ne,he,pe)}}},generateRoundRectangle:function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:Ir(4,0),draw:function(c,h,m,_,C){this.renderer.nodeShapeImpl(this.name,c,h,m,_,C)},intersectLine:function(c,h,m,_,C,w,E){return ku(C,w,c,h,m,_,E)},checkPoint:function(c,h,m,_,C,w,E){var k=gf(_,C),L=2*k;return!!(io(c,h,this.points,w,E,_,C-L,[0,-1],m)||io(c,h,this.points,w,E,_-L,C,[0,-1],m)||Xa(c,h,L,L,w-_/2+k,E-C/2+k,m)||Xa(c,h,L,L,w+_/2-k,E-C/2+k,m)||Xa(c,h,L,L,w+_/2-k,E+C/2-k,m)||Xa(c,h,L,L,w-_/2+k,E+C/2-k,m))}}},generateCutRectangle:function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:8,points:Ir(4,0),draw:function(c,h,m,_,C){this.renderer.nodeShapeImpl(this.name,c,h,m,_,C)},generateCutTrianglePts:function(c,h,m,_){var C=this.cornerLength,w=h/2,E=c/2,k=m-E,L=m+E,G=_-w,K=_+w;return{topLeft:[k,G+C,k+C,G,k+C,G+C],topRight:[L-C,G,L,G+C,L-C,G+C],bottomRight:[L,K-C,L-C,K,L-C,K-C],bottomLeft:[k+C,K,k,K-C,k+C,K-C]}},intersectLine:function(c,h,m,_,C,w,E){var k=this.generateCutTrianglePts(m+2*E,_+2*E,c,h),L=[].concat.apply([],[k.topLeft.splice(0,4),k.topRight.splice(0,4),k.bottomRight.splice(0,4),k.bottomLeft.splice(0,4)]);return lu(C,w,L,c,h)},checkPoint:function(c,h,m,_,C,w,E){if(io(c,h,this.points,w,E,_,C-2*this.cornerLength,[0,-1],m)||io(c,h,this.points,w,E,_-2*this.cornerLength,C,[0,-1],m))return!0;var k=this.generateCutTrianglePts(_,C,w,E);return Ta(c,h,k.topLeft)||Ta(c,h,k.topRight)||Ta(c,h,k.bottomRight)||Ta(c,h,k.bottomLeft)}}},generateBarrel:function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:Ir(4,0),draw:function(c,h,m,_,C){this.renderer.nodeShapeImpl(this.name,c,h,m,_,C)},intersectLine:function(c,h,m,_,C,w,E){var K=this.generateBarrelBezierPts(m+2*E,_+2*E,c,h),le=function(Ie){var Ne=Yi({x:Ie[0],y:Ie[1]},{x:Ie[2],y:Ie[3]},{x:Ie[4],y:Ie[5]},.15),ze=Yi({x:Ie[0],y:Ie[1]},{x:Ie[2],y:Ie[3]},{x:Ie[4],y:Ie[5]},.5),Qe=Yi({x:Ie[0],y:Ie[1]},{x:Ie[2],y:Ie[3]},{x:Ie[4],y:Ie[5]},.85);return[Ie[0],Ie[1],Ne.x,Ne.y,ze.x,ze.y,Qe.x,Qe.y,Ie[4],Ie[5]]},he=[].concat(le(K.topLeft),le(K.topRight),le(K.bottomRight),le(K.bottomLeft));return lu(C,w,he,c,h)},generateBarrelBezierPts:function(c,h,m,_){var C=h/2,w=c/2,E=m-w,k=m+w,L=_-C,G=_+C,K=$r(c,h),le=K.heightOffset,he=K.widthOffset,pe=K.ctrlPtOffsetPct*c,Ie={topLeft:[E,L+le,E+pe,L,E+he,L],topRight:[k-he,L,k-pe,L,k,L+le],bottomRight:[k,G-le,k-pe,G,k-he,G],bottomLeft:[E+he,G,E+pe,G,E,G-le]};return Ie.topLeft.isTop=!0,Ie.topRight.isTop=!0,Ie.bottomLeft.isBottom=!0,Ie.bottomRight.isBottom=!0,Ie},checkPoint:function(c,h,m,_,C,w,E){var k=$r(_,C),G=k.widthOffset;if(io(c,h,this.points,w,E,_,C-2*k.heightOffset,[0,-1],m)||io(c,h,this.points,w,E,_-2*G,C,[0,-1],m))return!0;for(var K=this.generateBarrelBezierPts(_,C,w,E),le=function(mt,Ft,Ct){var Ht=Ct[4],Vt=Ct[2],et=Ct[0],Gt=Ct[5],Tt=Ct[1],mn=Math.min(Ht,et),Yt=Math.max(Ht,et),ln=Math.min(Gt,Tt),Sn=Math.max(Gt,Tt);if(mn<=mt&&mt<=Yt&&ln<=Ft&&Ft<=Sn){var Rn=function(c,h,m){return[c-2*h+m,2*(h-c),c]}(Ht,Vt,et),Jn=function(c,h,m,_){var C=h*h-4*c*(m-=_);if(C<0)return[];var w=Math.sqrt(C),E=2*c;return[(-h+w)/E,(-h-w)/E]}(Rn[0],Rn[1],Rn[2],mt),En=Jn.filter(function(Yn){return 0<=Yn&&Yn<=1});if(En.length>0)return En[0]}return null},he=Object.keys(K),pe=0;pe<he.length;pe++){var Ne=K[he[pe]],ze=le(c,h,Ne);if(null!=ze){var Lt=cc(Ne[5],Ne[3],Ne[1],ze);if(Ne.isTop&&Lt<=h||Ne.isBottom&&h<=Lt)return!0}}return!1}}},generateBottomRoundrectangle:function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:Ir(4,0),draw:function(c,h,m,_,C){this.renderer.nodeShapeImpl(this.name,c,h,m,_,C)},intersectLine:function(c,h,m,_,C,w,E){var L=h-(_/2+E),le=nl(C,w,c,h,c-(m/2+E),L,c+(m/2+E),L,!1);return le.length>0?le:ku(C,w,c,h,m,_,E)},checkPoint:function(c,h,m,_,C,w,E){var k=gf(_,C),L=2*k;if(io(c,h,this.points,w,E,_,C-L,[0,-1],m)||io(c,h,this.points,w,E,_-L,C,[0,-1],m))return!0;var G=_/2+2*m,K=C/2+2*m;return!!(Ta(c,h,[w-G,E-K,w-G,E,w+G,E,w+G,E-K])||Xa(c,h,L,L,w+_/2-k,E+C/2-k,m)||Xa(c,h,L,L,w-_/2+k,E+C/2-k,m))}}},registerNodeShapes:function(){var f=this.nodeShapes={},c=this;this.generateEllipse(),this.generatePolygon("triangle",Ir(3,0)),this.generateRoundPolygon("round-triangle",Ir(3,0)),this.generatePolygon("rectangle",Ir(4,0)),f.square=f.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();var h=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",h),this.generateRoundPolygon("round-diamond",h),this.generatePolygon("pentagon",Ir(5,0)),this.generateRoundPolygon("round-pentagon",Ir(5,0)),this.generatePolygon("hexagon",Ir(6,0)),this.generateRoundPolygon("round-hexagon",Ir(6,0)),this.generatePolygon("heptagon",Ir(7,0)),this.generateRoundPolygon("round-heptagon",Ir(7,0)),this.generatePolygon("octagon",Ir(8,0)),this.generateRoundPolygon("round-octagon",Ir(8,0));var m=new Array(20),_=Dd(5,0),C=Dd(5,Math.PI/5),w=.5*(3-Math.sqrt(5));w*=1.57;for(var E=0;E<C.length/2;E++)C[2*E]*=w,C[2*E+1]*=w;for(E=0;E<5;E++)m[4*E]=_[2*E],m[4*E+1]=_[2*E+1],m[4*E+2]=C[2*E],m[4*E+3]=C[2*E+1];m=Ma(m),this.generatePolygon("star",m),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);var k=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",k),this.generateRoundPolygon("round-tag",k),f.makePolygon=function(L){var le,K="polygon-"+L.join("$");return(le=this[K])?le:c.generatePolygon(K,L)}}},vp={timeToRender:function(){return this.redrawTotalTime/this.redrawCount},redraw:function(f){f=f||yi();var c=this;void 0===c.averageRedrawTime&&(c.averageRedrawTime=0),void 0===c.lastRedrawTime&&(c.lastRedrawTime=0),void 0===c.lastDrawTime&&(c.lastDrawTime=0),c.requestedFrame=!0,c.renderOptions=f},beforeRender:function(f,c){if(!this.destroyed){null==c&&it("Priority is not optional for beforeRender");var h=this.beforeRenderCallbacks;h.push({fn:f,priority:c}),h.sort(function(m,_){return _.priority-m.priority})}}},Hm=function(c,h,m){for(var _=c.beforeRenderCallbacks,C=0;C<_.length;C++)_[C].fn(h,m)};vp.startRenderLoop=function(){var f=this,c=f.cy;f.renderLoopStarted||(f.renderLoopStarted=!0,au(function m(_){if(!f.destroyed){if(!c.batching())if(f.requestedFrame&&!f.skipFrame){Hm(f,!0,_);var C=Ia();f.render(f.renderOptions);var w=f.lastDrawTime=Ia();void 0===f.averageRedrawTime&&(f.averageRedrawTime=w-C),void 0===f.redrawCount&&(f.redrawCount=0),f.redrawCount++,void 0===f.redrawTotalTime&&(f.redrawTotalTime=0);var E=w-C;f.redrawTotalTime+=E,f.lastRedrawTime=E,f.averageRedrawTime=f.averageRedrawTime/2+E/2,f.requestedFrame=!1}else Hm(f,!1,_);f.skipFrame=!1,au(m)}}))};var tm=function(c){this.init(c)},yl=tm.prototype;yl.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],yl.init=function(f){var c=this;c.options=f,c.cy=f.cy;var h=c.container=f.cy.container();if(ge){var m=ge.document,_=m.head,C="__________cytoscape_stylesheet",w="__________cytoscape_container",E=null!=m.getElementById(C);if(h.className.indexOf(w)<0&&(h.className=(h.className||"")+" "+w),!E){var k=m.createElement("style");k.id=C,k.innerHTML="."+w+" { position: relative; }",_.insertBefore(k,_.children[0])}"static"===ge.getComputedStyle(h).getPropertyValue("position")&&de("A Cytoscape container has style position:static and so can not use UI extensions properly")}c.selection=[void 0,void 0,void 0,void 0,0],c.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],c.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},c.dragData={possibleDragElements:[]},c.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},c.redraws=0,c.showFps=f.showFps,c.debug=f.debug,c.hideEdgesOnViewport=f.hideEdgesOnViewport,c.textureOnViewport=f.textureOnViewport,c.wheelSensitivity=f.wheelSensitivity,c.motionBlurEnabled=f.motionBlur,c.forcedPixelRatio=Ut(f.pixelRatio)?f.pixelRatio:null,c.motionBlur=f.motionBlur,c.motionBlurOpacity=f.motionBlurOpacity,c.motionBlurTransparency=1-c.motionBlurOpacity,c.motionBlurPxRatio=1,c.mbPxRBlurry=1,c.minMbLowQualFrames=4,c.fullQualityMb=!1,c.clearedForMotionBlur=[],c.desktopTapThreshold=f.desktopTapThreshold,c.desktopTapThreshold2=f.desktopTapThreshold*f.desktopTapThreshold,c.touchTapThreshold=f.touchTapThreshold,c.touchTapThreshold2=f.touchTapThreshold*f.touchTapThreshold,c.tapholdDuration=500,c.bindings=[],c.beforeRenderCallbacks=[],c.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},c.registerNodeShapes(),c.registerArrowShapes(),c.registerCalculationListeners()},yl.notify=function(f,c){var h=this,m=h.cy;if(!this.destroyed){if("init"===f)return void h.load();if("destroy"===f)return void h.destroy();("add"===f||"remove"===f||"move"===f&&m.hasCompoundNodes()||"load"===f||"zorder"===f||"mount"===f)&&h.invalidateCachedZSortedEles(),"viewport"===f&&h.redrawHint("select",!0),("load"===f||"resize"===f||"mount"===f)&&(h.invalidateContainerClientCoordsCache(),h.matchCanvasSize(h.container)),h.redrawHint("eles",!0),h.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}},yl.destroy=function(){var f=this;f.destroyed=!0,f.cy.stopAnimationLoop();for(var c=0;c<f.bindings.length;c++){var h=f.bindings[c],_=h.target;(_.off||_.removeEventListener).apply(_,h.args)}if(f.bindings=[],f.beforeRenderCallbacks=[],f.onUpdateEleCalcsFns=[],f.removeObserver&&f.removeObserver.disconnect(),f.styleObserver&&f.styleObserver.disconnect(),f.resizeObserver&&f.resizeObserver.disconnect(),f.labelCalcDiv)try{document.body.removeChild(f.labelCalcDiv)}catch{}},yl.isHeadless=function(){return!1},[eg,vd,Zh,nu,mh,vp].forEach(function(f){tr(yl,f)});var ca=1e3/60,Pf_setupDequeueing=function(c){return function(){var m=this,_=this.renderer;if(!m.dequeueingSetup){m.dequeueingSetup=!0;var C=O.default(function(){_.redrawHint("eles",!0),_.redrawHint("drag",!0),_.redraw()},c.deqRedrawThreshold);_.beforeRender(function(L,G){var K=Ia(),le=_.averageRedrawTime,he=_.lastRedrawTime,pe=[],Ie=_.cy.extent(),Ne=_.getPixelRatio();for(L||_.flushRenderedStyleQueue();;){var ze=Ia(),Qe=ze-K,qe=ze-G;if(he<ca){if(qe>=c.deqFastCost*(ca-(L?le:0)))break}else if(L){if(Qe>=c.deqCost*he||Qe>=c.deqAvgCost*le)break}else if(qe>=c.deqNoDrawCost*ca)break;var Lt=c.deq(m,Ne,Ie);if(!(Lt.length>0))break;for(var kt=0;kt<Lt.length;kt++)pe.push(Lt[kt])}pe.length>0&&(c.onDeqd(m,pe),!L&&c.shouldRedraw(m,pe,Ne,Ie)&&C())},(c.priority||Ge)(m))}}},ig=function(){function f(c){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Wf;Q(this,f),this.idsByKey=new wo,this.keyForId=new wo,this.cachesByLvl=new wo,this.lvls=[],this.getKey=c,this.doesEleInvalidateKey=h}return ae(f,[{key:"getIdsFor",value:function(h){null==h&&it("Can not get id list for null key");var m=this.idsByKey,_=this.idsByKey.get(h);return _||(_=new us,m.set(h,_)),_}},{key:"addIdForKey",value:function(h,m){null!=h&&this.getIdsFor(h).add(m)}},{key:"deleteIdForKey",value:function(h,m){null!=h&&this.getIdsFor(h).delete(m)}},{key:"getNumberOfIdsForKey",value:function(h){return null==h?0:this.getIdsFor(h).size}},{key:"updateKeyMappingFor",value:function(h){var m=h.id(),_=this.keyForId.get(m),C=this.getKey(h);this.deleteIdForKey(_,m),this.addIdForKey(C,m),this.keyForId.set(m,C)}},{key:"deleteKeyMappingFor",value:function(h){var m=h.id(),_=this.keyForId.get(m);this.deleteIdForKey(_,m),this.keyForId.delete(m)}},{key:"keyHasChangedFor",value:function(h){var m=h.id();return this.keyForId.get(m)!==this.getKey(h)}},{key:"isInvalid",value:function(h){return this.keyHasChangedFor(h)||this.doesEleInvalidateKey(h)}},{key:"getCachesAt",value:function(h){var m=this.cachesByLvl,_=this.lvls,C=m.get(h);return C||(C=new wo,m.set(h,C),_.push(h)),C}},{key:"getCache",value:function(h,m){return this.getCachesAt(m).get(h)}},{key:"get",value:function(h,m){var _=this.getKey(h),C=this.getCache(_,m);return null!=C&&this.updateKeyMappingFor(h),C}},{key:"getForCachedKey",value:function(h,m){var _=this.keyForId.get(h.id());return this.getCache(_,m)}},{key:"hasCache",value:function(h,m){return this.getCachesAt(m).has(h)}},{key:"has",value:function(h,m){var _=this.getKey(h);return this.hasCache(_,m)}},{key:"setCache",value:function(h,m,_){_.key=h,this.getCachesAt(m).set(h,_)}},{key:"set",value:function(h,m,_){var C=this.getKey(h);this.setCache(C,m,_),this.updateKeyMappingFor(h)}},{key:"deleteCache",value:function(h,m){this.getCachesAt(m).delete(h)}},{key:"delete",value:function(h,m){var _=this.getKey(h);this.deleteCache(_,m)}},{key:"invalidateKey",value:function(h){var m=this;this.lvls.forEach(function(_){return m.deleteCache(h,_)})}},{key:"invalidate",value:function(h){var m=h.id(),_=this.keyForId.get(m);this.deleteKeyMappingFor(h);var C=this.doesEleInvalidateKey(h);return C&&this.invalidateKey(_),C||0===this.getNumberOfIdsForKey(_)}}]),f}(),im={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},hb=ti({getKey:null,doesEleInvalidateKey:Wf,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:tl,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),yp=function(c,h){var m=this;m.renderer=c,m.onDequeues=[];var _=hb(h);tr(m,_),m.lookup=new ig(_.getKey,_.doesEleInvalidateKey),m.setupDequeueing()},ll=yp.prototype;ll.reasons=im,ll.getTextureQueue=function(f){var c=this;return c.eleImgCaches=c.eleImgCaches||{},c.eleImgCaches[f]=c.eleImgCaches[f]||[]},ll.getRetiredTextureQueue=function(f){var h=this.eleImgCaches.retired=this.eleImgCaches.retired||{};return h[f]=h[f]||[]},ll.getElementQueue=function(){return this.eleCacheQueue=this.eleCacheQueue||new q.default(function(h,m){return m.reqs-h.reqs})},ll.getElementKeyToQueue=function(){return this.eleKeyToCacheQueue=this.eleKeyToCacheQueue||{}},ll.getElement=function(f,c,h,m,_){var C=this,w=this.renderer,E=w.cy.zoom(),k=this.lookup;if(!c||0===c.w||0===c.h||isNaN(c.w)||isNaN(c.h)||!f.visible()||f.removed()||!C.allowEdgeTxrCaching&&f.isEdge()||!C.allowParentTxrCaching&&f.isParent())return null;if(null==m&&(m=Math.ceil(vv(E*h))),m<-4)m=-4;else if(E>=7.99||m>3)return null;var L=Math.pow(2,m),G=c.h*L,K=c.w*L,le=w.eleTextBiggerThanMin(f,L);if(!this.isVisible(f,le))return null;var pe,he=k.get(f,m);if(he&&he.invalidated&&(he.invalidated=!1,he.texture.invalidatedWidth-=he.width),he)return he;if(pe=G<=25?25:G<=50?50:50*Math.ceil(G/50),G>1024||K>1024)return null;var Ie=C.getTextureQueue(pe),Ne=Ie[Ie.length-2],ze=function(){return C.recycleTexture(pe,K)||C.addTexture(pe,K)};Ne||(Ne=Ie[Ie.length-1]),Ne||(Ne=ze()),Ne.width-Ne.usedWidth<K&&(Ne=ze());for(var kt,Qe=function(Yt){return Yt&&Yt.scaledLabelShown===le},qe=_&&_===im.dequeue,ht=_&&_===im.highQuality,Lt=_&&_===im.downscale,mt=m+1;mt<=3;mt++){var Ft=k.get(f,mt);if(Ft){kt=Ft;break}}var Ct=kt&&kt.level===m+1?kt:null,Ht=function(){Ne.context.drawImage(Ct.texture.canvas,Ct.x,0,Ct.width,Ct.height,Ne.usedWidth,0,K,G)};if(Ne.context.setTransform(1,0,0,1,0,0),Ne.context.clearRect(Ne.usedWidth,0,K,pe),Qe(Ct))Ht();else if(Qe(kt)){if(!ht)return C.queueElement(f,kt.level-1),kt;for(var Vt=kt.level;Vt>m;Vt--)Ct=C.getElement(f,c,h,Vt,im.downscale);Ht()}else{var et;if(!qe&&!ht&&!Lt)for(var Gt=m-1;Gt>=-4;Gt--){var Tt=k.get(f,Gt);if(Tt){et=Tt;break}}if(Qe(et))return C.queueElement(f,m),et;Ne.context.translate(Ne.usedWidth,0),Ne.context.scale(L,L),this.drawElement(Ne.context,f,c,le,!1),Ne.context.scale(1/L,1/L),Ne.context.translate(-Ne.usedWidth,0)}return he={x:Ne.usedWidth,texture:Ne,level:m,scale:L,width:K,height:G,scaledLabelShown:le},Ne.usedWidth+=Math.ceil(K+8),Ne.eleCaches.push(he),k.set(f,m,he),C.checkTextureFullness(Ne),he},ll.invalidateElements=function(f){for(var c=0;c<f.length;c++)this.invalidateElement(f[c])},ll.invalidateElement=function(f){var c=this,h=c.lookup,m=[];if(h.isInvalid(f)){for(var C=-4;C<=3;C++){var w=h.getForCachedKey(f,C);w&&m.push(w)}if(h.invalidate(f))for(var k=0;k<m.length;k++){var L=m[k],G=L.texture;G.invalidatedWidth+=L.width,L.invalidated=!0,c.checkTextureUtility(G)}c.removeFromQueue(f)}},ll.checkTextureUtility=function(f){f.invalidatedWidth>=.2*f.width&&this.retireTexture(f)},ll.checkTextureFullness=function(f){var h=this.getTextureQueue(f.height);f.usedWidth/f.width>.8&&f.fullnessChecks>=10?hi(h,f):f.fullnessChecks++},ll.retireTexture=function(f){var h=f.height,m=this.getTextureQueue(h),_=this.lookup;hi(m,f),f.retired=!0;for(var C=f.eleCaches,w=0;w<C.length;w++){var E=C[w];_.deleteCache(E.key,E.level)}pr(C),this.getRetiredTextureQueue(h).push(f)},ll.addTexture=function(f,c){var _={};return this.getTextureQueue(f).push(_),_.eleCaches=[],_.height=f,_.width=Math.max(1024,c),_.usedWidth=0,_.invalidatedWidth=0,_.fullnessChecks=0,_.canvas=this.renderer.makeOffscreenCanvas(_.width,_.height),_.context=_.canvas.getContext("2d"),_},ll.recycleTexture=function(f,c){for(var m=this.getTextureQueue(f),_=this.getRetiredTextureQueue(f),C=0;C<_.length;C++){var w=_[C];if(w.width>=c)return w.retired=!1,w.usedWidth=0,w.invalidatedWidth=0,w.fullnessChecks=0,pr(w.eleCaches),w.context.setTransform(1,0,0,1,0,0),w.context.clearRect(0,0,w.width,w.height),hi(_,w),m.push(w),w}},ll.queueElement=function(f,c){var m=this.getElementQueue(),_=this.getElementKeyToQueue(),C=this.getKey(f),w=_[C];if(w)w.level=Math.max(w.level,c),w.eles.merge(f),w.reqs++,m.updateItem(w);else{var E={eles:f.spawn().merge(f),level:c,reqs:1,key:C};m.push(E),_[C]=E}},ll.dequeue=function(f){for(var c=this,h=c.getElementQueue(),m=c.getElementKeyToQueue(),_=[],C=c.lookup,w=0;w<1&&h.size()>0;w++){var E=h.pop(),k=E.key,L=E.eles[0],G=C.hasCache(L,E.level);if(m[k]=null,!G){_.push(E);var K=c.getBoundingBox(L);c.getElement(L,K,f,E.level,im.dequeue)}}return _},ll.removeFromQueue=function(f){var h=this.getElementQueue(),m=this.getElementKeyToQueue(),_=this.getKey(f),C=m[_];null!=C&&(1===C.eles.length?(C.reqs=Ac,h.updateItem(C),h.pop(),m[_]=null):C.eles.unmerge(f))},ll.onDequeue=function(f){this.onDequeues.push(f)},ll.offDequeue=function(f){hi(this.onDequeues,f)},ll.setupDequeueing=Pf_setupDequeueing({deqRedrawThreshold:100,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(c,h,m){return c.dequeue(h,m)},onDeqd:function(c,h){for(var m=0;m<c.onDequeues.length;m++)(0,c.onDequeues[m])(h)},shouldRedraw:function(c,h,m,_){for(var C=0;C<h.length;C++)for(var w=h[C].eles,E=0;E<w.length;E++){var k=w[E].boundingBox();if(wm(k,_))return!0}return!1},priority:function(c){return c.renderer.beforeRenderPriorities.eleTxrDeq}});var fa=function(c){var h=this,m=h.renderer=c,_=m.cy;h.layersByLevel={},h.firstGet=!0,h.lastInvalidationTime=Ia()-500,h.skipping=!1,h.eleTxrDeqs=_.collection(),h.scheduleElementRefinement=O.default(function(){h.refineElementTextures(h.eleTxrDeqs),h.eleTxrDeqs.unmerge(h.eleTxrDeqs)},50),m.beforeRender(function(w,E){h.skipping=E-h.lastInvalidationTime<=250},m.beforeRenderPriorities.lyrTxrSkip),h.layersQueue=new q.default(function(E,k){return k.reqs-E.reqs}),h.setupDequeueing()},wa=fa.prototype,Nv=0,qd=Math.pow(2,53)-1;wa.makeLayer=function(f,c){var h=Math.pow(2,c),m=Math.ceil(f.w*h),_=Math.ceil(f.h*h),C=this.renderer.makeOffscreenCanvas(m,_),w={id:Nv=++Nv%qd,bb:f,level:c,width:m,height:_,canvas:C,context:C.getContext("2d"),eles:[],elesQueue:[],reqs:0},E=w.context,k=-w.bb.x1,L=-w.bb.y1;return E.scale(h,h),E.translate(k,L),w},wa.getLayers=function(f,c,h){var m=this,w=m.renderer.cy.zoom(),E=m.firstGet;if(m.firstGet=!1,null==h)if((h=Math.ceil(vv(w*c)))<-4)h=-4;else if(w>=3.99||h>2)return null;m.validateLayersElesOrdering(h,f);var K,he,k=m.layersByLevel,L=Math.pow(2,h),G=k[h]=k[h]||[];if(m.levelIsComplete(h,f))return G;!function(){var Ht=function(mn){if(m.validateLayersElesOrdering(mn,f),m.levelIsComplete(mn,f))return he=k[mn],!0},Vt=function(mn){if(!he)for(var Yt=h+mn;-4<=Yt&&Yt<=2&&!Ht(Yt);Yt+=mn);};Vt(1),Vt(-1);for(var et=G.length-1;et>=0;et--){var Gt=G[et];Gt.invalid&&hi(G,Gt)}}();var Ne=function(Ht){var Vt=(Ht=Ht||{}).after;if(function(){if(!K){K=Ec();for(var Ht=0;Ht<f.length;Ht++)Ea(K,f[Ht].boundingBox())}}(),K.w*L*(K.h*L)>16e6)return null;var Gt=m.makeLayer(K,h);if(null!=Vt){var Tt=G.indexOf(Vt)+1;G.splice(Tt,0,Gt)}else(void 0===Ht.insert||Ht.insert)&&G.unshift(Gt);return Gt};if(m.skipping&&!E)return null;for(var ze=null,Qe=f.length/1,qe=!E,ht=0;ht<f.length;ht++){var Lt=f[ht],kt=Lt._private.rscratch,mt=kt.imgLayerCaches=kt.imgLayerCaches||{},Ft=mt[h];if(Ft)ze=Ft;else{if((!ze||ze.eles.length>=Qe||!_v(ze.bb,Lt.boundingBox()))&&!(ze=Ne({insert:!0,after:ze})))return null;he||qe?m.queueLayer(ze,Lt):m.drawEleInLayer(ze,Lt,h,c),ze.eles.push(Lt),mt[h]=ze}}return he||(qe?null:G)},wa.getEleLevelForLayerLevel=function(f,c){return f},wa.drawEleInLayer=function(f,c,h,m){var C=this.renderer,w=f.context,E=c.boundingBox();0===E.w||0===E.h||!c.visible()||(h=this.getEleLevelForLayerLevel(h,m),C.setImgSmoothing(w,!1),C.drawCachedElement(w,c,null,null,h,!0),C.setImgSmoothing(w,!0))},wa.levelIsComplete=function(f,c){var m=this.layersByLevel[f];if(!m||0===m.length)return!1;for(var _=0,C=0;C<m.length;C++){var w=m[C];if(w.reqs>0||w.invalid)return!1;_+=w.eles.length}return _===c.length},wa.validateLayersElesOrdering=function(f,c){var h=this.layersByLevel[f];if(h)for(var m=0;m<h.length;m++){for(var _=h[m],C=-1,w=0;w<c.length;w++)if(_.eles[0]===c[w]){C=w;break}if(C<0)this.invalidateLayer(_);else{var E=C;for(w=0;w<_.eles.length;w++)if(_.eles[w]!==c[E+w]){this.invalidateLayer(_);break}}}},wa.updateElementsInLayers=function(f,c){for(var m=Ln(f[0]),_=0;_<f.length;_++)for(var C=m?null:f[_],w=m?f[_]:f[_].ele,E=w._private.rscratch,k=E.imgLayerCaches=E.imgLayerCaches||{},L=-4;L<=2;L++){var G=k[L];!G||C&&this.getEleLevelForLayerLevel(G.level)!==C.level||c(G,w,C)}},wa.haveLayers=function(){for(var c=!1,h=-4;h<=2;h++){var m=this.layersByLevel[h];if(m&&m.length>0){c=!0;break}}return c},wa.invalidateElements=function(f){var c=this;0!==f.length&&(c.lastInvalidationTime=Ia(),0!==f.length&&c.haveLayers()&&c.updateElementsInLayers(f,function(m,_,C){c.invalidateLayer(m)}))},wa.invalidateLayer=function(f){if(this.lastInvalidationTime=Ia(),!f.invalid){var c=f.level,h=f.eles;hi(this.layersByLevel[c],f),f.elesQueue=[],f.invalid=!0,f.replacement&&(f.replacement.invalid=!0);for(var _=0;_<h.length;_++){var C=h[_]._private.rscratch.imgLayerCaches;C&&(C[c]=null)}}},wa.refineElementTextures=function(f){var c=this;c.updateElementsInLayers(f,function(m,_,C){var w=m.replacement;if(w||((w=m.replacement=c.makeLayer(m.bb,m.level)).replaces=m,w.eles=m.eles),!w.reqs)for(var E=0;E<w.eles.length;E++)c.queueLayer(w,w.eles[E])})},wa.enqueueElementRefinement=function(f){this.eleTxrDeqs.merge(f),this.scheduleElementRefinement()},wa.queueLayer=function(f,c){var m=this.layersQueue,_=f.elesQueue,C=_.hasId=_.hasId||{};if(!f.replacement){if(c){if(C[c.id()])return;_.push(c),C[c.id()]=!0}f.reqs?(f.reqs++,m.updateItem(f)):(f.reqs=1,m.push(f))}},wa.dequeue=function(f){for(var c=this,h=c.layersQueue,m=[],_=0;_<1&&0!==h.size();){var C=h.peek();if(C.replacement)h.pop();else if(C.replaces&&C!==C.replaces.replacement)h.pop();else if(C.invalid)h.pop();else{var w=C.elesQueue.shift();w&&(c.drawEleInLayer(C,w,C.level,f),_++),0===m.length&&m.push(!0),0===C.elesQueue.length&&(h.pop(),C.reqs=0,C.replaces&&c.applyLayerReplacement(C),c.requestRedraw())}}return m},wa.applyLayerReplacement=function(f){var h=this.layersByLevel[f.level],m=f.replaces,_=h.indexOf(m);if(!(_<0||m.invalid)){h[_]=f;for(var C=0;C<f.eles.length;C++){var w=f.eles[C]._private,E=w.imgLayerCaches=w.imgLayerCaches||{};E&&(E[f.level]=f)}this.requestRedraw()}},wa.requestRedraw=O.default(function(){var f=this.renderer;f.redrawHint("eles",!0),f.redrawHint("drag",!0),f.redraw()},100),wa.setupDequeueing=Pf_setupDequeueing({deqRedrawThreshold:50,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(c,h){return c.dequeue(h)},onDeqd:Ge,shouldRedraw:tl,priority:function(c){return c.renderer.beforeRenderPriorities.lyrTxrDeq}});var jy,Bv={};function X_(f,c){for(var h=0;h<c.length;h++){var m=c[h];f.lineTo(m.x,m.y)}}function $m(f,c,h){for(var m,_=0;_<c.length;_++){var C=c[_];0===_&&(m=C),f.lineTo(C.x,C.y)}f.quadraticCurveTo(h.x,h.y,m.x,m.y)}function $y(f,c,h){f.beginPath&&f.beginPath();for(var m=c,_=0;_<m.length;_++)f.lineTo((C=m[_]).x,C.y);var w=h,E=h[0];for(f.moveTo(E.x,E.y),_=1;_<w.length;_++){var C;f.lineTo((C=w[_]).x,C.y)}f.closePath&&f.closePath()}function Y_(f,c,h,m,_){f.beginPath&&f.beginPath(),f.arc(h,m,_,0,2*Math.PI,!1);var C=c,w=C[0];f.moveTo(w.x,w.y);for(var E=0;E<C.length;E++){var k=C[E];f.lineTo(k.x,k.y)}f.closePath&&f.closePath()}function pb(f,c,h,m){f.arc(c,h,m,0,2*Math.PI,!1)}Bv.arrowShapeImpl=function(f){return(jy||(jy={polygon:X_,"triangle-backcurve":$m,"triangle-tee":$y,"circle-triangle":Y_,"triangle-cross":$y,circle:pb}))[f]};var Jh={drawElement:function(f,c,h,m,_,C){c.isNode()?this.drawNode(f,c,h,m,_,C):this.drawEdge(f,c,h,m,_,C)},drawElementOverlay:function(f,c){c.isNode()?this.drawNodeOverlay(f,c):this.drawEdgeOverlay(f,c)},drawElementUnderlay:function(f,c){c.isNode()?this.drawNodeUnderlay(f,c):this.drawEdgeUnderlay(f,c)},drawCachedElementPortion:function(f,c,h,m,_,C,w,E){var k=this,L=h.getBoundingBox(c);if(0!==L.w&&0!==L.h){var G=h.getElement(c,L,m,_,C);if(null!=G){var K=E(k,c);if(0===K)return;var ze,Qe,qe,ht,Lt,Ft,le=w(k,c),he=L.x1,pe=L.y1,Ie=L.w,Ne=L.h;if(0!==le){var kt=h.getRotationPoint(c);f.translate(qe=kt.x,ht=kt.y),f.rotate(le),(Lt=k.getImgSmoothing(f))||k.setImgSmoothing(f,!0);var mt=h.getRotationOffset(c);ze=mt.x,Qe=mt.y}else ze=he,Qe=pe;1!==K&&(f.globalAlpha=(Ft=f.globalAlpha)*K),f.drawImage(G.texture.canvas,G.x,0,G.width,G.height,ze,Qe,Ie,Ne),1!==K&&(f.globalAlpha=Ft),0!==le&&(f.rotate(-le),f.translate(-qe,-ht),Lt||k.setImgSmoothing(f,!1))}else h.drawElement(f,c)}}},rm=function(){return 0},zv=function(c,h){return c.getTextAngle(h,null)},qy=function(c,h){return c.getTextAngle(h,"source")},Xy=function(c,h){return c.getTextAngle(h,"target")},a=function(c,h){return h.effectiveOpacity()},d=function(c,h){return h.pstyle("text-opacity").pfValue*h.effectiveOpacity()};Jh.drawCachedElement=function(f,c,h,m,_,C){var w=this,E=w.data,k=E.eleTxrCache,L=E.lblTxrCache,G=E.slbTxrCache,K=E.tlbTxrCache,le=c.boundingBox(),he=!0===C?k.reasons.highQuality:null;if(0!==le.w&&0!==le.h&&c.visible()&&(!m||wm(le,m))){var pe=c.isEdge(),Ie=c.element()._private.rscratch.badLine;w.drawElementUnderlay(f,c),w.drawCachedElementPortion(f,c,k,h,_,he,rm,a),(!pe||!Ie)&&w.drawCachedElementPortion(f,c,L,h,_,he,zv,d),pe&&!Ie&&(w.drawCachedElementPortion(f,c,G,h,_,he,qy,d),w.drawCachedElementPortion(f,c,K,h,_,he,Xy,d)),w.drawElementOverlay(f,c)}},Jh.drawElements=function(f,c){for(var m=0;m<c.length;m++)this.drawElement(f,c[m])},Jh.drawCachedElements=function(f,c,h,m){for(var C=0;C<c.length;C++)this.drawCachedElement(f,c[C],h,m)},Jh.drawCachedNodes=function(f,c,h,m){for(var C=0;C<c.length;C++){var w=c[C];!w.isNode()||this.drawCachedElement(f,w,h,m)}},Jh.drawLayeredElements=function(f,c,h,m){var C=this.data.lyrTxrCache.getLayers(c,h);if(C)for(var w=0;w<C.length;w++){var E=C[w],k=E.bb;0===k.w||0===k.h||f.drawImage(E.canvas,k.x1,k.y1,k.w,k.h)}else this.drawCachedElements(f,c,h,m)};var g={drawEdge:function(f,c,h){var m=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],_=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],C=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],w=this,E=c._private.rscratch;if((!C||c.visible())&&!E.badLine&&null!=E.allpts&&!isNaN(E.allpts[0])){var k;h&&f.translate(-(k=h).x1,-k.y1);var L=C?c.pstyle("opacity").value:1,G=C?c.pstyle("line-opacity").value:1,K=c.pstyle("curve-style").value,le=c.pstyle("line-style").value,he=c.pstyle("width").pfValue,pe=c.pstyle("line-cap").value,Ie=L*G,Ne=L*G,ze=function(){var et=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie;"straight-triangle"===K?(w.eleStrokeStyle(f,c,et),w.drawEdgeTrianglePath(c,f,E.allpts)):(f.lineWidth=he,f.lineCap=pe,w.eleStrokeStyle(f,c,et),w.drawEdgePath(c,f,E.allpts,le),f.lineCap="butt")},Qe=function(){!_||w.drawEdgeOverlay(f,c)},qe=function(){!_||w.drawEdgeUnderlay(f,c)},ht=function(){var et=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne;w.drawArrowheads(f,c,et)},Lt=function(){w.drawElementText(f,c,null,m)};f.lineJoin="round";var kt="yes"===c.pstyle("ghost").value;if(kt){var mt=c.pstyle("ghost-offset-x").pfValue,Ft=c.pstyle("ghost-offset-y").pfValue,Ct=c.pstyle("ghost-opacity").value,Ht=Ie*Ct;f.translate(mt,Ft),ze(Ht),ht(Ht),f.translate(-mt,-Ft)}qe(),ze(),ht(),Qe(),Lt(),h&&f.translate(k.x1,k.y1)}}},y=function(c){if(!["overlay","underlay"].includes(c))throw new Error("Invalid state");return function(h,m){if(m.visible()){var _=m.pstyle("".concat(c,"-opacity")).value;if(0!==_){var C=this,w=C.usePaths(),E=m._private.rscratch,L=2*m.pstyle("".concat(c,"-padding")).pfValue,G=m.pstyle("".concat(c,"-color")).value;h.lineWidth=L,h.lineCap="self"!==E.edgeType||w?"round":"butt",C.colorStrokeStyle(h,G[0],G[1],G[2],_),C.drawEdgePath(m,h,E.allpts,"solid")}}}};g.drawEdgeOverlay=y("overlay"),g.drawEdgeUnderlay=y("underlay"),g.drawEdgePath=function(f,c,h,m){var w,_=f._private.rscratch,C=c,E=!1,k=this.usePaths(),L=f.pstyle("line-dash-pattern").pfValue,G=f.pstyle("line-dash-offset").pfValue;if(k){var K=h.join("$");_.pathCacheKey&&_.pathCacheKey===K?(w=c=_.pathCache,E=!0):(w=c=new Path2D,_.pathCacheKey=K,_.pathCache=w)}if(C.setLineDash)switch(m){case"dotted":C.setLineDash([1,1]);break;case"dashed":C.setLineDash(L),C.lineDashOffset=G;break;case"solid":C.setLineDash([])}if(!E&&!_.badLine)switch(c.beginPath&&c.beginPath(),c.moveTo(h[0],h[1]),_.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var he=2;he+3<h.length;he+=4)c.quadraticCurveTo(h[he],h[he+1],h[he+2],h[he+3]);break;case"straight":case"segments":case"haystack":for(var pe=2;pe+1<h.length;pe+=2)c.lineTo(h[pe],h[pe+1])}c=C,k?c.stroke(w):c.stroke(),c.setLineDash&&c.setLineDash([])},g.drawEdgeTrianglePath=function(f,c,h){c.fillStyle=c.strokeStyle;for(var m=f.pstyle("width").pfValue,_=0;_+1<h.length;_+=2){var C=[h[_+2]-h[_],h[_+3]-h[_+1]],w=Math.sqrt(C[0]*C[0]+C[1]*C[1]),E=[C[1]/w,-C[0]/w],k=[E[0]*m/2,E[1]*m/2];c.beginPath(),c.moveTo(h[_]-k[0],h[_+1]-k[1]),c.lineTo(h[_]+k[0],h[_+1]+k[1]),c.lineTo(h[_+2],h[_+3]),c.closePath(),c.fill()}},g.drawArrowheads=function(f,c,h){var m=c._private.rscratch,_="haystack"===m.edgeType;_||this.drawArrowhead(f,c,"source",m.arrowStartX,m.arrowStartY,m.srcArrowAngle,h),this.drawArrowhead(f,c,"mid-target",m.midX,m.midY,m.midtgtArrowAngle,h),this.drawArrowhead(f,c,"mid-source",m.midX,m.midY,m.midsrcArrowAngle,h),_||this.drawArrowhead(f,c,"target",m.arrowEndX,m.arrowEndY,m.tgtArrowAngle,h)},g.drawArrowhead=function(f,c,h,m,_,C,w){if(!(isNaN(m)||null==m||isNaN(_)||null==_||isNaN(C)||null==C)){var E=this,k=c.pstyle(h+"-arrow-shape").value;if("none"!==k){var L="hollow"===c.pstyle(h+"-arrow-fill").value?"both":"filled",G=c.pstyle(h+"-arrow-fill").value,K=c.pstyle("width").pfValue,le=c.pstyle("opacity").value;void 0===w&&(w=le);var he=f.globalCompositeOperation;(1!==w||"hollow"===G)&&(f.globalCompositeOperation="destination-out",E.colorFillStyle(f,255,255,255,1),E.colorStrokeStyle(f,255,255,255,1),E.drawArrowShape(c,f,L,K,k,m,_,C),f.globalCompositeOperation=he);var pe=c.pstyle(h+"-arrow-color").value;E.colorFillStyle(f,pe[0],pe[1],pe[2],w),E.colorStrokeStyle(f,pe[0],pe[1],pe[2],w),E.drawArrowShape(c,f,G,K,k,m,_,C)}}},g.drawArrowShape=function(f,c,h,m,_,C,w,E){var K,k=this,L=this.usePaths()&&"triangle-cross"!==_,G=!1,le=c,he={x:C,y:w},pe=f.pstyle("arrow-scale").value,Ie=this.getArrowWidth(m,pe),Ne=k.arrowShapes[_];if(L){var ze=k.arrowPathCache=k.arrowPathCache||[],Qe=wc(_),qe=ze[Qe];null!=qe?(K=c=qe,G=!0):(K=c=new Path2D,ze[Qe]=K)}G||(c.beginPath&&c.beginPath(),L?Ne.draw(c,1,0,{x:0,y:0},1):Ne.draw(c,Ie,E,he,m),c.closePath&&c.closePath()),c=le,L&&(c.translate(C,w),c.rotate(E),c.scale(Ie,Ie)),("filled"===h||"both"===h)&&(L?c.fill(K):c.fill()),("hollow"===h||"both"===h)&&(c.lineWidth=(Ne.matchEdgeWidth?m:1)/(L?Ie:1),c.lineJoin="miter",L?c.stroke(K):c.stroke()),L&&(c.scale(1/Ie,1/Ie),c.rotate(-E),c.translate(-C,-w))};var A={safeDrawImage:function(f,c,h,m,_,C,w,E,k,L){if(!(_<=0||C<=0||k<=0||L<=0))try{f.drawImage(c,h,m,_,C,w,E,k,L)}catch(G){de(G)}},drawInscribedImage:function(f,c,h,m,_){var C=this,w=h.position(),E=w.x,k=w.y,L=h.cy().style(),G=L.getIndexedStyle.bind(L),K=G(h,"background-fit","value",m),le=G(h,"background-repeat","value",m),he=h.width(),pe=h.height(),Ie=2*h.padding(),Ne=he+("inner"===G(h,"background-width-relative-to","value",m)?0:Ie),ze=pe+("inner"===G(h,"background-height-relative-to","value",m)?0:Ie),Qe=h._private.rscratch,ht="node"===G(h,"background-clip","value",m),Lt=G(h,"background-image-opacity","value",m)*_,kt=G(h,"background-image-smoothing","value",m),mt=c.width||c.cachedW,Ft=c.height||c.cachedH;(null==mt||null==Ft)&&(document.body.appendChild(c),mt=c.cachedW=c.width||c.offsetWidth,Ft=c.cachedH=c.height||c.offsetHeight,document.body.removeChild(c));var Ct=mt,Ht=Ft;if("auto"!==G(h,"background-width","value",m)&&(Ct="%"===G(h,"background-width","units",m)?G(h,"background-width","pfValue",m)*Ne:G(h,"background-width","pfValue",m)),"auto"!==G(h,"background-height","value",m)&&(Ht="%"===G(h,"background-height","units",m)?G(h,"background-height","pfValue",m)*ze:G(h,"background-height","pfValue",m)),0!==Ct&&0!==Ht){if("contain"===K)Ct*=Vt=Math.min(Ne/Ct,ze/Ht),Ht*=Vt;else if("cover"===K){var Vt;Ct*=Vt=Math.max(Ne/Ct,ze/Ht),Ht*=Vt}var et=E-Ne/2,Gt=G(h,"background-position-x","units",m),Tt=G(h,"background-position-x","pfValue",m);et+="%"===Gt?(Ne-Ct)*Tt:Tt;var mn=G(h,"background-offset-x","units",m),Yt=G(h,"background-offset-x","pfValue",m);et+="%"===mn?(Ne-Ct)*Yt:Yt;var ln=k-ze/2,Sn=G(h,"background-position-y","units",m),Rn=G(h,"background-position-y","pfValue",m);ln+="%"===Sn?(ze-Ht)*Rn:Rn;var Jn=G(h,"background-offset-y","units",m),En=G(h,"background-offset-y","pfValue",m);ln+="%"===Jn?(ze-Ht)*En:En,Qe.pathCache&&(et-=E,ln-=k,E=0,k=0);var Yn=f.globalAlpha;f.globalAlpha=Lt;var li=C.getImgSmoothing(f),bi=!1;if("no"===kt&&li?(C.setImgSmoothing(f,!1),bi=!0):"yes"===kt&&!li&&(C.setImgSmoothing(f,!0),bi=!0),"no-repeat"===le)ht&&(f.save(),Qe.pathCache?f.clip(Qe.pathCache):(C.nodeShapes[C.getNodeShape(h)].draw(f,E,k,Ne,ze),f.clip())),C.safeDrawImage(f,c,0,0,mt,Ft,et,ln,Ct,Ht),ht&&f.restore();else{var pi=f.createPattern(c,le);f.fillStyle=pi,C.nodeShapes[C.getNodeShape(h)].draw(f,E,k,Ne,ze),f.translate(et,ln),f.fill(),f.translate(-et,-ln)}f.globalAlpha=Yn,bi&&C.setImgSmoothing(f,li)}}},M={};function R(f,c,h,m,_){var C=arguments.length>5&&void 0!==arguments[5]?arguments[5]:5;f.beginPath(),f.moveTo(c+C,h),f.lineTo(c+m-C,h),f.quadraticCurveTo(c+m,h,c+m,h+C),f.lineTo(c+m,h+_-C),f.quadraticCurveTo(c+m,h+_,c+m-C,h+_),f.lineTo(c+C,h+_),f.quadraticCurveTo(c,h+_,c,h+_-C),f.lineTo(c,h+C),f.quadraticCurveTo(c,h,c+C,h),f.closePath(),f.fill()}M.eleTextBiggerThanMin=function(f,c){if(!c){var h=f.cy().zoom(),m=this.getPixelRatio(),_=Math.ceil(vv(h*m));c=Math.pow(2,_)}return!(f.pstyle("font-size").pfValue*c<f.pstyle("min-zoomed-font-size").pfValue)},M.drawElementText=function(f,c,h,m,_){var C=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],w=this;if(null==m){if(C&&!w.eleTextBiggerThanMin(c))return}else if(!1===m)return;if(c.isNode()){var E=c.pstyle("label");if(!E||!E.value)return;var k=w.getLabelJustification(c);f.textAlign=k,f.textBaseline="bottom"}else{var L=c.element()._private.rscratch.badLine,G=c.pstyle("label"),K=c.pstyle("source-label"),le=c.pstyle("target-label");if(L||(!G||!G.value)&&(!K||!K.value)&&(!le||!le.value))return;f.textAlign="center",f.textBaseline="bottom"}var pe,he=!h;h&&f.translate(-(pe=h).x1,-pe.y1),null==_?(w.drawText(f,c,null,he,C),c.isEdge()&&(w.drawText(f,c,"source",he,C),w.drawText(f,c,"target",he,C))):w.drawText(f,c,_,he,C),h&&f.translate(pe.x1,pe.y1)},M.getFontCache=function(f){var c;this.fontCaches=this.fontCaches||[];for(var h=0;h<this.fontCaches.length;h++)if((c=this.fontCaches[h]).context===f)return c;return this.fontCaches.push(c={context:f}),c},M.setupTextStyle=function(f,c){var h=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],m=c.pstyle("font-style").strValue,_=c.pstyle("font-size").pfValue+"px",C=c.pstyle("font-family").strValue,w=c.pstyle("font-weight").strValue,E=h?c.effectiveOpacity()*c.pstyle("text-opacity").value:1,k=c.pstyle("text-outline-opacity").value*E,L=c.pstyle("color").value,G=c.pstyle("text-outline-color").value;f.font=m+" "+w+" "+_+" "+C,f.lineJoin="round",this.colorFillStyle(f,L[0],L[1],L[2],E),this.colorStrokeStyle(f,G[0],G[1],G[2],k)},M.getTextAngle=function(f,c){var _=f._private.rscratch,w=f.pstyle((c?c+"-":"")+"text-rotation"),E=or(_,"labelAngle",c);return"autorotate"===w.strValue?f.isEdge()?E:0:"none"===w.strValue?0:w.pfValue},M.drawText=function(f,c,h){var m=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],_=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],C=c._private,w=C.rscratch,E=_?c.effectiveOpacity():1;if(!_||0!==E&&0!==c.pstyle("text-opacity").value){"main"===h&&(h=null);var G,K,k=or(w,"labelX",h),L=or(w,"labelY",h),le=this.getLabelText(c,h);if(null!=le&&""!==le&&!isNaN(k)&&!isNaN(L)){this.setupTextStyle(f,c,_);var Lt,he=h?h+"-":"",pe=or(w,"labelWidth",h),Ie=or(w,"labelHeight",h),Ne=c.pstyle(he+"text-margin-x").pfValue,ze=c.pstyle(he+"text-margin-y").pfValue,Qe=c.isEdge(),qe=c.pstyle("text-halign").value,ht=c.pstyle("text-valign").value;switch(Qe&&(qe="center",ht="center"),k+=Ne,L+=ze,0!==(Lt=m?this.getTextAngle(c,h):0)&&(f.translate(G=k,K=L),f.rotate(Lt),k=0,L=0),ht){case"top":break;case"center":L+=Ie/2;break;case"bottom":L+=Ie}var kt=c.pstyle("text-background-opacity").value,mt=c.pstyle("text-border-opacity").value,Ft=c.pstyle("text-border-width").pfValue,Ct=c.pstyle("text-background-padding").pfValue;if(kt>0||Ft>0&&mt>0){var Ht=k-Ct;switch(qe){case"left":Ht-=pe;break;case"center":Ht-=pe/2}var Vt=L-Ie-Ct,et=pe+2*Ct,Gt=Ie+2*Ct;if(kt>0){var Tt=f.fillStyle,mn=c.pstyle("text-background-color").value;f.fillStyle="rgba("+mn[0]+","+mn[1]+","+mn[2]+","+kt*E+")";var Yt=c.pstyle("text-background-shape").strValue;0===Yt.indexOf("round")?R(f,Ht,Vt,et,Gt,2):f.fillRect(Ht,Vt,et,Gt),f.fillStyle=Tt}if(Ft>0&&mt>0){var ln=f.strokeStyle,Sn=f.lineWidth,Rn=c.pstyle("text-border-color").value,Jn=c.pstyle("text-border-style").value;if(f.strokeStyle="rgba("+Rn[0]+","+Rn[1]+","+Rn[2]+","+mt*E+")",f.lineWidth=Ft,f.setLineDash)switch(Jn){case"dotted":f.setLineDash([1,1]);break;case"dashed":f.setLineDash([4,2]);break;case"double":f.lineWidth=Ft/4,f.setLineDash([]);break;case"solid":f.setLineDash([])}if(f.strokeRect(Ht,Vt,et,Gt),"double"===Jn){var En=Ft/2;f.strokeRect(Ht+En,Vt+En,et-2*En,Gt-2*En)}f.setLineDash&&f.setLineDash([]),f.lineWidth=Sn,f.strokeStyle=ln}}var Yn=2*c.pstyle("text-outline-width").pfValue;if(Yn>0&&(f.lineWidth=Yn),"wrap"===c.pstyle("text-wrap").value){var li=or(w,"labelWrapCachedLines",h),bi=or(w,"labelLineHeight",h),pi=pe/2,di=this.getLabelJustification(c);switch("auto"===di||("left"===qe?"left"===di?k+=-pe:"center"===di&&(k+=-pi):"center"===qe?"left"===di?k+=-pi:"right"===di&&(k+=pi):"right"===qe&&("center"===di?k+=pi:"right"===di&&(k+=pe))),ht){case"top":case"center":case"bottom":L-=(li.length-1)*bi}for(var Mn=0;Mn<li.length;Mn++)Yn>0&&f.strokeText(li[Mn],k,L),f.fillText(li[Mn],k,L),L+=bi}else Yn>0&&f.strokeText(le,k,L),f.fillText(le,k,L);0!==Lt&&(f.rotate(-Lt),f.translate(-G,-K))}}};var N={drawNode:function(f,c,h){var E,k,m=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],_=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],C=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],w=this,L=c._private,G=L.rscratch,K=c.position();if(Ut(K.x)&&Ut(K.y)&&(!C||c.visible())){var pe,ze,le=C?c.effectiveOpacity():1,he=w.usePaths(),Ie=!1,Ne=c.padding();E=c.width()+2*Ne,k=c.height()+2*Ne,h&&f.translate(-(ze=h).x1,-ze.y1);for(var Qe=c.pstyle("background-image"),qe=Qe.value,ht=new Array(qe.length),Lt=new Array(qe.length),kt=0,mt=0;mt<qe.length;mt++){var Ft=qe[mt],Ct=ht[mt]=null!=Ft&&"none"!==Ft;if(Ct){var Ht=c.cy().style().getIndexedStyle(c,"background-image-crossorigin","value",mt);kt++,Lt[mt]=w.getCachedImage(Ft,Ht,function(){L.backgroundTimestamp=Date.now(),c.emitAndNotify("background")})}}var Vt=c.pstyle("background-blacken").value,et=c.pstyle("border-width").pfValue,Gt=c.pstyle("background-opacity").value*le,Tt=c.pstyle("border-color").value,mn=c.pstyle("border-style").value,Yt=c.pstyle("border-opacity").value*le;f.lineJoin="miter";var ln=function(){var gr=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gt;w.eleFillStyle(f,c,gr)},Sn=function(){var gr=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yt;w.colorStrokeStyle(f,Tt[0],Tt[1],Tt[2],gr)},Rn=c.pstyle("shape").strValue,Jn=c.pstyle("shape-polygon-points").pfValue;if(he){f.translate(K.x,K.y);var En=w.nodePathCache=w.nodePathCache||[],Yn=Tg("polygon"===Rn?Rn+","+Jn.join(","):Rn,""+k,""+E),li=En[Yn];null!=li?(Ie=!0,G.pathCache=pe=li):(pe=new Path2D,En[Yn]=G.pathCache=pe)}var bi=function(){if(!Ie){var gr=K;he&&(gr={x:0,y:0}),w.nodeShapes[w.getNodeShape(c)].draw(pe||f,gr.x,gr.y,E,k)}he?f.fill(pe):f.fill()},pi=function(){for(var gr=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,Cr=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],Zr=L.backgrounding,Fs=0,Qr=0;Qr<Lt.length;Qr++){var Ui=c.cy().style().getIndexedStyle(c,"background-image-containment","value",Qr);Cr&&"over"===Ui||!Cr&&"inside"===Ui?Fs++:ht[Qr]&&Lt[Qr].complete&&!Lt[Qr].error&&(Fs++,w.drawInscribedImage(f,Lt[Qr],c,Qr,gr))}L.backgrounding=Fs!==kt,Zr!==L.backgrounding&&c.updateStyle(!1)},di=function(){var gr=arguments.length>0&&void 0!==arguments[0]&&arguments[0],Cr=arguments.length>1&&void 0!==arguments[1]?arguments[1]:le;w.hasPie(c)&&(w.drawPie(f,c,Cr),gr&&(he||w.nodeShapes[w.getNodeShape(c)].draw(f,K.x,K.y,E,k)))},Mn=function(){var gr=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,Cr=(Vt>0?Vt:-Vt)*gr,Zr=Vt>0?0:255;0!==Vt&&(w.colorFillStyle(f,Zr,Zr,Zr,Cr),he?f.fill(pe):f.fill())},si=function(){if(et>0){if(f.lineWidth=et,f.lineCap="butt",f.setLineDash)switch(mn){case"dotted":f.setLineDash([1,1]);break;case"dashed":f.setLineDash([4,2]);break;case"solid":case"double":f.setLineDash([])}if(he?f.stroke(pe):f.stroke(),"double"===mn){f.lineWidth=et/3;var gr=f.globalCompositeOperation;f.globalCompositeOperation="destination-out",he?f.stroke(pe):f.stroke(),f.globalCompositeOperation=gr}f.setLineDash&&f.setLineDash([])}},xi=function(){_&&w.drawNodeOverlay(f,c,K,E,k)},ji=function(){_&&w.drawNodeUnderlay(f,c,K,E,k)},rr=function(){w.drawElementText(f,c,null,m)},Br="yes"===c.pstyle("ghost").value;if(Br){var Kr=c.pstyle("ghost-offset-x").pfValue,hr=c.pstyle("ghost-offset-y").pfValue,nr=c.pstyle("ghost-opacity").value,jr=nr*le;f.translate(Kr,hr),ln(nr*Gt),bi(),pi(jr,!0),Sn(nr*Yt),si(),di(0!==Vt||0!==et),pi(jr,!1),Mn(jr),f.translate(-Kr,-hr)}he&&f.translate(-K.x,-K.y),ji(),he&&f.translate(K.x,K.y),ln(),bi(),pi(le,!0),Sn(),si(),di(0!==Vt||0!==et),pi(le,!1),Mn(),he&&f.translate(-K.x,-K.y),rr(),xi(),h&&f.translate(ze.x1,ze.y1)}}},ie=function(c){if(!["overlay","underlay"].includes(c))throw new Error("Invalid state");return function(h,m,_,C,w){if(m.visible()){var k=m.pstyle("".concat(c,"-padding")).pfValue,L=m.pstyle("".concat(c,"-opacity")).value,G=m.pstyle("".concat(c,"-color")).value,K=m.pstyle("".concat(c,"-shape")).value;if(L>0){if(_=_||m.position(),null==C||null==w){var le=m.padding();C=m.width()+2*le,w=m.height()+2*le}this.colorFillStyle(h,G[0],G[1],G[2],L),this.nodeShapes[K].draw(h,_.x,_.y,C+2*k,w+2*k),h.fill()}}}};N.drawNodeOverlay=ie("overlay"),N.drawNodeUnderlay=ie("underlay"),N.hasPie=function(f){return(f=f[0])._private.hasPie},N.drawPie=function(f,c,h,m){c=c[0],m=m||c.position();var _=c.cy().style(),C=c.pstyle("pie-size"),w=m.x,E=m.y,k=c.width(),L=c.height(),G=Math.min(k,L)/2,K=0;this.usePaths()&&(w=0,E=0),"%"===C.units?G*=C.pfValue:void 0!==C.pfValue&&(G=C.pfValue/2);for(var he=1;he<=_.pieBackgroundN;he++){var pe=c.pstyle("pie-"+he+"-background-size").value,Ie=c.pstyle("pie-"+he+"-background-color").value,Ne=c.pstyle("pie-"+he+"-background-opacity").value*h,ze=pe/100;ze+K>1&&(ze=1-K);var Qe=1.5*Math.PI+2*Math.PI*K,ht=Qe+2*Math.PI*ze;0===pe||K>=1||K+ze>1||(f.beginPath(),f.moveTo(w,E),f.arc(w,E,G,Qe,ht),f.closePath(),this.colorFillStyle(f,Ie[0],Ie[1],Ie[2],Ne),f.fill(),K+=ze)}};for(var ee={getPixelRatio:function(){var f=this.data.contexts[0];return null!=this.forcedPixelRatio?this.forcedPixelRatio:(window.devicePixelRatio||1)/(f.backingStorePixelRatio||f.webkitBackingStorePixelRatio||f.mozBackingStorePixelRatio||f.msBackingStorePixelRatio||f.oBackingStorePixelRatio||f.backingStorePixelRatio||1)},paintCache:function(f){for(var m,c=this.paintCaches=this.paintCaches||[],h=!0,_=0;_<c.length;_++)if((m=c[_]).context===f){h=!1;break}return h&&c.push(m={context:f}),m},createGradientStyleFor:function(f,c,h,m,_){var C,w=this.usePaths(),E=h.pstyle(c+"-gradient-stop-colors").value,k=h.pstyle(c+"-gradient-stop-positions").pfValue;if("radial-gradient"===m)if(h.isEdge()){var L=h.sourceEndpoint(),G=h.targetEndpoint(),K=h.midpoint(),le=no(L,K),he=no(G,K);C=f.createRadialGradient(K.x,K.y,0,K.x,K.y,Math.max(le,he))}else{var pe=w?{x:0,y:0}:h.position(),Ie=h.paddedWidth(),Ne=h.paddedHeight();C=f.createRadialGradient(pe.x,pe.y,0,pe.x,pe.y,Math.max(Ie,Ne))}else if(h.isEdge()){var ze=h.sourceEndpoint(),Qe=h.targetEndpoint();C=f.createLinearGradient(ze.x,ze.y,Qe.x,Qe.y)}else{var qe=w?{x:0,y:0}:h.position(),kt=h.paddedWidth()/2,mt=h.paddedHeight()/2;switch(h.pstyle("background-gradient-direction").value){case"to-bottom":C=f.createLinearGradient(qe.x,qe.y-mt,qe.x,qe.y+mt);break;case"to-top":C=f.createLinearGradient(qe.x,qe.y+mt,qe.x,qe.y-mt);break;case"to-left":C=f.createLinearGradient(qe.x+kt,qe.y,qe.x-kt,qe.y);break;case"to-right":C=f.createLinearGradient(qe.x-kt,qe.y,qe.x+kt,qe.y);break;case"to-bottom-right":case"to-right-bottom":C=f.createLinearGradient(qe.x-kt,qe.y-mt,qe.x+kt,qe.y+mt);break;case"to-top-right":case"to-right-top":C=f.createLinearGradient(qe.x-kt,qe.y+mt,qe.x+kt,qe.y-mt);break;case"to-bottom-left":case"to-left-bottom":C=f.createLinearGradient(qe.x+kt,qe.y-mt,qe.x-kt,qe.y+mt);break;case"to-top-left":case"to-left-top":C=f.createLinearGradient(qe.x+kt,qe.y+mt,qe.x-kt,qe.y-mt)}}if(!C)return null;for(var Ct=k.length===E.length,Ht=E.length,Vt=0;Vt<Ht;Vt++)C.addColorStop(Ct?k[Vt]:Vt/(Ht-1),"rgba("+E[Vt][0]+","+E[Vt][1]+","+E[Vt][2]+","+_+")");return C},gradientFillStyle:function(f,c,h,m){var _=this.createGradientStyleFor(f,"background",c,h,m);if(!_)return null;f.fillStyle=_},colorFillStyle:function(f,c,h,m,_){f.fillStyle="rgba("+c+","+h+","+m+","+_+")"},eleFillStyle:function(f,c,h){var m=c.pstyle("background-fill").value;if("linear-gradient"===m||"radial-gradient"===m)this.gradientFillStyle(f,c,m,h);else{var _=c.pstyle("background-color").value;this.colorFillStyle(f,_[0],_[1],_[2],h)}},gradientStrokeStyle:function(f,c,h,m){var _=this.createGradientStyleFor(f,"line",c,h,m);if(!_)return null;f.strokeStyle=_},colorStrokeStyle:function(f,c,h,m,_){f.strokeStyle="rgba("+c+","+h+","+m+","+_+")"},eleStrokeStyle:function(f,c,h){var m=c.pstyle("line-fill").value;if("linear-gradient"===m||"radial-gradient"===m)this.gradientStrokeStyle(f,c,m,h);else{var _=c.pstyle("line-color").value;this.colorStrokeStyle(f,_[0],_[1],_[2],h)}},matchCanvasSize:function(f){var c=this,h=c.data,m=c.findContainerClientCoords(),_=m[2],C=m[3],w=c.getPixelRatio();(f===c.data.bufferCanvases[c.MOTIONBLUR_BUFFER_NODE]||f===c.data.bufferCanvases[c.MOTIONBLUR_BUFFER_DRAG])&&(w=c.motionBlurPxRatio);var G,k=_*w,L=C*w;if(k!==c.canvasWidth||L!==c.canvasHeight){c.fontCaches=null;var K=h.canvasContainer;K.style.width=_+"px",K.style.height=C+"px";for(var le=0;le<c.CANVAS_LAYERS;le++)(G=h.canvases[le]).width=k,G.height=L,G.style.width=_+"px",G.style.height=C+"px";for(le=0;le<c.BUFFER_COUNT;le++)(G=h.bufferCanvases[le]).width=k,G.height=L,G.style.width=_+"px",G.style.height=C+"px";c.textureMult=1,w<=1&&(G=h.bufferCanvases[c.TEXTURE_BUFFER],c.textureMult=2,G.width=k*c.textureMult,G.height=L*c.textureMult),c.canvasWidth=k,c.canvasHeight=L}},renderTo:function(f,c,h,m){this.render({forcedContext:f,forcedZoom:c,forcedPan:h,drawAllLayers:!0,forcedPxRatio:m})},render:function(f){var c=(f=f||yi()).forcedContext,h=f.drawAllLayers,m=f.drawOnlyNodeLayer,_=f.forcedZoom,C=f.forcedPan,w=this,E=void 0===f.forcedPxRatio?this.getPixelRatio():f.forcedPxRatio,k=w.cy,L=w.data,G=L.canvasNeedsRedraw,K=w.textureOnViewport&&!c&&(w.pinching||w.hoverData.dragging||w.swipePanning||w.data.wheelZooming),le=void 0!==f.motionBlur?f.motionBlur:w.motionBlur,he=w.motionBlurPxRatio,pe=k.hasCompoundNodes(),Ie=w.hoverData.draggingEles,ze=le=le&&!c&&w.motionBlurEnabled&&!(w.hoverData.selecting||w.touchData.selecting);c||(w.prevPxRatio!==E&&(w.invalidateContainerClientCoordsCache(),w.matchCanvasSize(w.container),w.redrawHint("eles",!0),w.redrawHint("drag",!0)),w.prevPxRatio=E),!c&&w.motionBlurTimeout&&clearTimeout(w.motionBlurTimeout),le&&(null==w.mbFrames&&(w.mbFrames=0),w.mbFrames++,w.mbFrames<3&&(ze=!1),w.mbFrames>w.minMbLowQualFrames&&(w.motionBlurPxRatio=w.mbPxRBlurry)),w.clearingMotionBlur&&(w.motionBlurPxRatio=1),w.textureDrawLastFrame&&!K&&(G[w.NODE]=!0,G[w.SELECT_BOX]=!0);var Qe=k.style(),qe=k.zoom(),ht=void 0!==_?_:qe,Lt=k.pan(),kt={x:Lt.x,y:Lt.y},mt={zoom:qe,pan:{x:Lt.x,y:Lt.y}},Ft=w.prevViewport;!(void 0===Ft||mt.zoom!==Ft.zoom||mt.pan.x!==Ft.pan.x||mt.pan.y!==Ft.pan.y)&&!(Ie&&!pe)&&(w.motionBlurPxRatio=1),C&&(kt=C),ht*=E,kt.x*=E,kt.y*=E;var Ht=w.getCachedZSortedEles();function Vt(hr,nr,jr,Mi,gr){var Cr=hr.globalCompositeOperation;hr.globalCompositeOperation="destination-out",w.colorFillStyle(hr,255,255,255,w.motionBlurTransparency),hr.fillRect(nr,jr,Mi,gr),hr.globalCompositeOperation=Cr}function et(hr,nr){var jr,Mi,gr,Cr;w.clearingMotionBlur||hr!==L.bufferContexts[w.MOTIONBLUR_BUFFER_NODE]&&hr!==L.bufferContexts[w.MOTIONBLUR_BUFFER_DRAG]?(jr=kt,Mi=ht,gr=w.canvasWidth,Cr=w.canvasHeight):(jr={x:Lt.x*he,y:Lt.y*he},Mi=qe*he,gr=w.canvasWidth*he,Cr=w.canvasHeight*he),hr.setTransform(1,0,0,1,0,0),"motionBlur"===nr?Vt(hr,0,0,gr,Cr):!c&&(void 0===nr||nr)&&hr.clearRect(0,0,gr,Cr),h||(hr.translate(jr.x,jr.y),hr.scale(Mi,Mi)),C&&hr.translate(C.x,C.y),_&&hr.scale(_,_)}if(K||(w.textureDrawLastFrame=!1),K){if(w.textureDrawLastFrame=!0,!w.textureCache){w.textureCache={},w.textureCache.bb=k.mutableElements().boundingBox(),w.textureCache.texture=w.data.bufferCanvases[w.TEXTURE_BUFFER];var Gt=w.data.bufferContexts[w.TEXTURE_BUFFER];Gt.setTransform(1,0,0,1,0,0),Gt.clearRect(0,0,w.canvasWidth*w.textureMult,w.canvasHeight*w.textureMult),w.render({forcedContext:Gt,drawOnlyNodeLayer:!0,forcedPxRatio:E*w.textureMult}),(mt=w.textureCache.viewport={zoom:k.zoom(),pan:k.pan(),width:w.canvasWidth,height:w.canvasHeight}).mpan={x:(0-mt.pan.x)/mt.zoom,y:(0-mt.pan.y)/mt.zoom}}G[w.DRAG]=!1,G[w.NODE]=!1;var mn=w.textureCache.texture;mt=w.textureCache.viewport,(Tt=L.contexts[w.NODE]).setTransform(1,0,0,1,0,0),le?Vt(Tt,0,0,mt.width,mt.height):Tt.clearRect(0,0,mt.width,mt.height);var Yt=Qe.core("outside-texture-bg-color").value,ln=Qe.core("outside-texture-bg-opacity").value;w.colorFillStyle(Tt,Yt[0],Yt[1],Yt[2],ln),Tt.fillRect(0,0,mt.width,mt.height),qe=k.zoom(),et(Tt,!1),Tt.clearRect(mt.mpan.x,mt.mpan.y,mt.width/mt.zoom/E,mt.height/mt.zoom/E),Tt.drawImage(mn,mt.mpan.x,mt.mpan.y,mt.width/mt.zoom/E,mt.height/mt.zoom/E)}else w.textureOnViewport&&!c&&(w.textureCache=null);var Sn=k.extent(),Rn=w.pinching||w.hoverData.dragging||w.swipePanning||w.data.wheelZooming||w.hoverData.draggingEles||w.cy.animated(),Jn=w.hideEdgesOnViewport&&Rn,En=[];if(En[w.NODE]=!G[w.NODE]&&le&&!w.clearedForMotionBlur[w.NODE]||w.clearingMotionBlur,En[w.NODE]&&(w.clearedForMotionBlur[w.NODE]=!0),En[w.DRAG]=!G[w.DRAG]&&le&&!w.clearedForMotionBlur[w.DRAG]||w.clearingMotionBlur,En[w.DRAG]&&(w.clearedForMotionBlur[w.DRAG]=!0),G[w.NODE]||h||m||En[w.NODE]){var Yn=le&&!En[w.NODE]&&1!==he;et(Tt=c||(Yn?w.data.bufferContexts[w.MOTIONBLUR_BUFFER_NODE]:L.contexts[w.NODE]),le&&!Yn?"motionBlur":void 0),Jn?w.drawCachedNodes(Tt,Ht.nondrag,E,Sn):w.drawLayeredElements(Tt,Ht.nondrag,E,Sn),w.debug&&w.drawDebugPoints(Tt,Ht.nondrag),!h&&!le&&(G[w.NODE]=!1)}if(!m&&(G[w.DRAG]||h||En[w.DRAG])&&(Yn=le&&!En[w.DRAG]&&1!==he,et(Tt=c||(Yn?w.data.bufferContexts[w.MOTIONBLUR_BUFFER_DRAG]:L.contexts[w.DRAG]),le&&!Yn?"motionBlur":void 0),Jn?w.drawCachedNodes(Tt,Ht.drag,E,Sn):w.drawCachedElements(Tt,Ht.drag,E,Sn),w.debug&&w.drawDebugPoints(Tt,Ht.drag),!h&&!le&&(G[w.DRAG]=!1)),w.showFps||!m&&G[w.SELECT_BOX]&&!h){var Tt;if(et(Tt=c||L.contexts[w.SELECT_BOX]),1==w.selection[4]&&(w.hoverData.selecting||w.touchData.selecting)){qe=w.cy.zoom();var bi=Qe.core("selection-box-border-width").value/qe;Tt.lineWidth=bi,Tt.fillStyle="rgba("+Qe.core("selection-box-color").value[0]+","+Qe.core("selection-box-color").value[1]+","+Qe.core("selection-box-color").value[2]+","+Qe.core("selection-box-opacity").value+")",Tt.fillRect(w.selection[0],w.selection[1],w.selection[2]-w.selection[0],w.selection[3]-w.selection[1]),bi>0&&(Tt.strokeStyle="rgba("+Qe.core("selection-box-border-color").value[0]+","+Qe.core("selection-box-border-color").value[1]+","+Qe.core("selection-box-border-color").value[2]+","+Qe.core("selection-box-opacity").value+")",Tt.strokeRect(w.selection[0],w.selection[1],w.selection[2]-w.selection[0],w.selection[3]-w.selection[1]))}if(L.bgActivePosistion&&!w.hoverData.selecting){qe=w.cy.zoom();var pi=L.bgActivePosistion;Tt.fillStyle="rgba("+Qe.core("active-bg-color").value[0]+","+Qe.core("active-bg-color").value[1]+","+Qe.core("active-bg-color").value[2]+","+Qe.core("active-bg-opacity").value+")",Tt.beginPath(),Tt.arc(pi.x,pi.y,Qe.core("active-bg-size").pfValue/qe,0,2*Math.PI),Tt.fill()}var di=w.lastRedrawTime;if(w.showFps&&di){di=Math.round(di);var Mn=Math.round(1e3/di);Tt.setTransform(1,0,0,1,0,0),Tt.fillStyle="rgba(255, 0, 0, 0.75)",Tt.strokeStyle="rgba(255, 0, 0, 0.75)",Tt.lineWidth=1,Tt.fillText("1 frame = "+di+" ms = "+Mn+" fps",0,20),Tt.strokeRect(0,30,250,20),Tt.fillRect(0,30,250*Math.min(Mn/60,1),20)}h||(G[w.SELECT_BOX]=!1)}if(le&&1!==he){var rr=L.contexts[w.DRAG],Br=w.data.bufferCanvases[w.MOTIONBLUR_BUFFER_DRAG],Kr=function(nr,jr,Mi){nr.setTransform(1,0,0,1,0,0),Mi||!ze?nr.clearRect(0,0,w.canvasWidth,w.canvasHeight):Vt(nr,0,0,w.canvasWidth,w.canvasHeight),nr.drawImage(jr,0,0,w.canvasWidth*he,w.canvasHeight*he,0,0,w.canvasWidth,w.canvasHeight)};(G[w.NODE]||En[w.NODE])&&(Kr(L.contexts[w.NODE],w.data.bufferCanvases[w.MOTIONBLUR_BUFFER_NODE],En[w.NODE]),G[w.NODE]=!1),(G[w.DRAG]||En[w.DRAG])&&(Kr(rr,Br,En[w.DRAG]),G[w.DRAG]=!1)}w.prevViewport=mt,w.clearingMotionBlur&&(w.clearingMotionBlur=!1,w.motionBlurCleared=!0,w.motionBlur=!0),le&&(w.motionBlurTimeout=setTimeout(function(){w.motionBlurTimeout=null,w.clearedForMotionBlur[w.NODE]=!1,w.clearedForMotionBlur[w.DRAG]=!1,w.motionBlur=!1,w.clearingMotionBlur=!K,w.mbFrames=0,G[w.NODE]=!0,G[w.DRAG]=!0,w.redraw()},100)),c||k.emit("render")}},me={drawPolygonPath:function(f,c,h,m,_,C){var w=m/2,E=_/2;f.beginPath&&f.beginPath(),f.moveTo(c+w*C[0],h+E*C[1]);for(var k=1;k<C.length/2;k++)f.lineTo(c+w*C[2*k],h+E*C[2*k+1]);f.closePath()},drawRoundPolygonPath:function(f,c,h,m,_,C){var w=m/2,E=_/2,k=Pr(m,_);f.beginPath&&f.beginPath();for(var L=0;L<C.length/4;L++){var K,G;G=0===L?C.length-2:4*L-2,K=4*L+2;var le=c+w*C[4*L],he=h+E*C[4*L+1],Ie=k/Math.tan(Math.acos(-C[G]*C[K]-C[G+1]*C[K+1])/2),Ne=le-Ie*C[G],ze=he-Ie*C[G+1],Qe=le+Ie*C[K],qe=he+Ie*C[K+1];0===L?f.moveTo(Ne,ze):f.lineTo(Ne,ze),f.arcTo(le,he,Qe,qe,k)}f.closePath()},drawRoundRectanglePath:function(f,c,h,m,_){var C=m/2,w=_/2,E=gf(m,_);f.beginPath&&f.beginPath(),f.moveTo(c,h-w),f.arcTo(c+C,h-w,c+C,h,E),f.arcTo(c+C,h+w,c,h+w,E),f.arcTo(c-C,h+w,c-C,h,E),f.arcTo(c-C,h-w,c,h-w,E),f.lineTo(c,h-w),f.closePath()},drawBottomRoundRectanglePath:function(f,c,h,m,_){var C=m/2,w=_/2,E=gf(m,_);f.beginPath&&f.beginPath(),f.moveTo(c,h-w),f.lineTo(c+C,h-w),f.lineTo(c+C,h),f.arcTo(c+C,h+w,c,h+w,E),f.arcTo(c-C,h+w,c-C,h,E),f.lineTo(c-C,h-w),f.lineTo(c,h-w),f.closePath()},drawCutRectanglePath:function(f,c,h,m,_){var C=m/2,w=_/2;f.beginPath&&f.beginPath(),f.moveTo(c-C+8,h-w),f.lineTo(c+C-8,h-w),f.lineTo(c+C,h-w+8),f.lineTo(c+C,h+w-8),f.lineTo(c+C-8,h+w),f.lineTo(c-C+8,h+w),f.lineTo(c-C,h+w-8),f.lineTo(c-C,h-w+8),f.closePath()},drawBarrelPath:function(f,c,h,m,_){var C=m/2,w=_/2,E=c-C,k=c+C,L=h-w,G=h+w,K=$r(m,_),le=K.widthOffset,he=K.heightOffset,pe=K.ctrlPtOffsetPct*le;f.beginPath&&f.beginPath(),f.moveTo(E,L+he),f.lineTo(E,G-he),f.quadraticCurveTo(E+pe,G,E+le,G),f.lineTo(k-le,G),f.quadraticCurveTo(k-pe,G,k,G-he),f.lineTo(k,L+he),f.quadraticCurveTo(k-pe,L,k-le,L),f.lineTo(E+le,L),f.quadraticCurveTo(E+pe,L,E,L+he),f.closePath()}},Le=Math.sin(0),ke=Math.cos(0),Fe={},nt={},tt=Math.PI/40,Ke=0*Math.PI;Ke<2*Math.PI;Ke+=tt)Fe[Ke]=Math.sin(Ke),nt[Ke]=Math.cos(Ke);me.drawEllipsePath=function(f,c,h,m,_){if(f.beginPath&&f.beginPath(),f.ellipse)f.ellipse(c,h,m/2,_/2,0,0,2*Math.PI);else for(var C,w,E=m/2,k=_/2,L=0*Math.PI;L<2*Math.PI;L+=tt)C=c-E*Fe[L]*Le+E*nt[L]*ke,w=h+k*nt[L]*Le+k*Fe[L]*ke,0===L?f.moveTo(C,w):f.lineTo(C,w);f.closePath()};var pt={};function qt(f){var c=f.indexOf(",");return f.substr(c+1)}function Bt(f,c,h){var m=function(){return c.toDataURL(h,f.quality)};switch(f.output){case"blob-promise":return new ra(function(_,C){try{c.toBlob(function(w){null!=w?_(w):C(new Error("`canvas.toBlob()` sent a null value in its callback"))},h,f.quality)}catch(w){C(w)}});case"blob":return function vt(f,c){for(var h=atob(f),m=new ArrayBuffer(h.length),_=new Uint8Array(m),C=0;C<h.length;C++)_[C]=h.charCodeAt(C);return new Blob([m],{type:c})}(qt(m()),h);case"base64":return qt(m());default:return m()}}pt.createBuffer=function(f,c){var h=document.createElement("canvas");return h.width=f,h.height=c,[h,h.getContext("2d")]},pt.bufferCanvasImage=function(f){var c=this.cy,m=c.mutableElements().boundingBox(),_=this.findContainerClientCoords(),C=f.full?Math.ceil(m.w):_[2],w=f.full?Math.ceil(m.h):_[3],E=Ut(f.maxWidth)||Ut(f.maxHeight),k=this.getPixelRatio(),L=1;if(void 0!==f.scale)C*=f.scale,w*=f.scale,L=f.scale;else if(E){var G=1/0,K=1/0;Ut(f.maxWidth)&&(G=L*f.maxWidth/C),Ut(f.maxHeight)&&(K=L*f.maxHeight/w),C*=L=Math.min(G,K),w*=L}E||(C*=k,w*=k,L*=k);var le=document.createElement("canvas");le.width=C,le.height=w,le.style.width=C+"px",le.style.height=w+"px";var he=le.getContext("2d");if(C>0&&w>0){he.clearRect(0,0,C,w),he.globalCompositeOperation="source-over";var pe=this.getCachedZSortedEles();if(f.full)he.translate(-m.x1*L,-m.y1*L),he.scale(L,L),this.drawElements(he,pe),he.scale(1/L,1/L),he.translate(m.x1*L,m.y1*L);else{var Ie=c.pan(),Ne={x:Ie.x*L,y:Ie.y*L};L*=c.zoom(),he.translate(Ne.x,Ne.y),he.scale(L,L),this.drawElements(he,pe),he.scale(1/L,1/L),he.translate(-Ne.x,-Ne.y)}f.bg&&(he.globalCompositeOperation="destination-over",he.fillStyle=f.bg,he.rect(0,0,C,w),he.fill())}return le},pt.png=function(f){return Bt(f,this.bufferCanvasImage(f),"image/png")},pt.jpg=function(f){return Bt(f,this.bufferCanvasImage(f),"image/jpeg")};var sn=dn,en=dn.prototype;function dn(f){var c=this;c.data={canvases:new Array(en.CANVAS_LAYERS),contexts:new Array(en.CANVAS_LAYERS),canvasNeedsRedraw:new Array(en.CANVAS_LAYERS),bufferCanvases:new Array(en.BUFFER_COUNT),bufferContexts:new Array(en.CANVAS_LAYERS)};var h="-webkit-tap-highlight-color",m="rgba(0,0,0,0)";c.data.canvasContainer=document.createElement("div");var _=c.data.canvasContainer.style;c.data.canvasContainer.style[h]=m,_.position="relative",_.zIndex="0",_.overflow="hidden";var C=f.cy.container();C.appendChild(c.data.canvasContainer),C.style[h]=m;var w={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};Ue&&Ue.userAgent.match(/msie|trident|edge/i)&&(w["-ms-touch-action"]="none",w["touch-action"]="none");for(var E=0;E<en.CANVAS_LAYERS;E++){var k=c.data.canvases[E]=document.createElement("canvas");c.data.contexts[E]=k.getContext("2d"),Object.keys(w).forEach(function(di){k.style[di]=w[di]}),k.style.position="absolute",k.setAttribute("data-id","layer"+E),k.style.zIndex=String(en.CANVAS_LAYERS-E),c.data.canvasContainer.appendChild(k),c.data.canvasNeedsRedraw[E]=!1}for(c.data.topCanvas=c.data.canvases[0],c.data.canvases[en.NODE].setAttribute("data-id","layer"+en.NODE+"-node"),c.data.canvases[en.SELECT_BOX].setAttribute("data-id","layer"+en.SELECT_BOX+"-selectbox"),c.data.canvases[en.DRAG].setAttribute("data-id","layer"+en.DRAG+"-drag"),E=0;E<en.BUFFER_COUNT;E++)c.data.bufferCanvases[E]=document.createElement("canvas"),c.data.bufferContexts[E]=c.data.bufferCanvases[E].getContext("2d"),c.data.bufferCanvases[E].style.position="absolute",c.data.bufferCanvases[E].setAttribute("data-id","buffer"+E),c.data.bufferCanvases[E].style.zIndex=String(-E-1),c.data.bufferCanvases[E].style.visibility="hidden";c.pathsEnabled=!0;var L=Ec(),K=function(Mn){return{x:-Mn.w/2,y:-Mn.h/2}},Lt=function(Mn){return Mn.boundingBox(),Mn[0]._private.bodyBounds},kt=function(Mn){return Mn.boundingBox(),Mn[0]._private.labelBounds.main||L},mt=function(Mn){return Mn.boundingBox(),Mn[0]._private.labelBounds.source||L},Ft=function(Mn){return Mn.boundingBox(),Mn[0]._private.labelBounds.target||L},Ct=function(Mn,si){return si},Vt=function(Mn,si,xi){var ji=Mn?Mn+"-":"";return{x:si.x+xi.pstyle(ji+"text-margin-x").pfValue,y:si.y+xi.pstyle(ji+"text-margin-y").pfValue}},et=function(Mn,si,xi){var ji=Mn[0]._private.rscratch;return{x:ji[si],y:ji[xi]}},Jn=c.data.eleTxrCache=new yp(c,{getKey:function(Mn){return Mn[0]._private.nodeKey},doesEleInvalidateKey:function(Mn){var si=Mn[0]._private;return!(si.oldBackgroundTimestamp===si.backgroundTimestamp)},drawElement:function(Mn,si,xi,ji,rr){return c.drawElement(Mn,si,xi,!1,!1,rr)},getBoundingBox:Lt,getRotationPoint:function(Mn){return function(Mn){return{x:(Mn.x1+Mn.x2)/2,y:(Mn.y1+Mn.y2)/2}}(Lt(Mn))},getRotationOffset:function(Mn){return K(Lt(Mn))},allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),En=c.data.lblTxrCache=new yp(c,{getKey:function(Mn){return Mn[0]._private.labelStyleKey},drawElement:function(Mn,si,xi,ji,rr){return c.drawElementText(Mn,si,xi,ji,"main",rr)},getBoundingBox:kt,getRotationPoint:function(Mn){return Vt("",et(Mn,"labelX","labelY"),Mn)},getRotationOffset:function(Mn){var si=kt(Mn),xi=K(kt(Mn));if(Mn.isNode()){switch(Mn.pstyle("text-halign").value){case"left":xi.x=-si.w;break;case"right":xi.x=0}switch(Mn.pstyle("text-valign").value){case"top":xi.y=-si.h;break;case"bottom":xi.y=0}}return xi},isVisible:Ct}),Yn=c.data.slbTxrCache=new yp(c,{getKey:function(Mn){return Mn[0]._private.sourceLabelStyleKey},drawElement:function(Mn,si,xi,ji,rr){return c.drawElementText(Mn,si,xi,ji,"source",rr)},getBoundingBox:mt,getRotationPoint:function(Mn){return Vt("source",et(Mn,"sourceLabelX","sourceLabelY"),Mn)},getRotationOffset:function(Mn){return K(mt(Mn))},isVisible:Ct}),li=c.data.tlbTxrCache=new yp(c,{getKey:function(Mn){return Mn[0]._private.targetLabelStyleKey},drawElement:function(Mn,si,xi,ji,rr){return c.drawElementText(Mn,si,xi,ji,"target",rr)},getBoundingBox:Ft,getRotationPoint:function(Mn){return Vt("target",et(Mn,"targetLabelX","targetLabelY"),Mn)},getRotationOffset:function(Mn){return K(Ft(Mn))},isVisible:Ct}),bi=c.data.lyrTxrCache=new fa(c);c.onUpdateEleCalcs(function(Mn,si){Jn.invalidateElements(si),En.invalidateElements(si),Yn.invalidateElements(si),li.invalidateElements(si),bi.invalidateElements(si);for(var xi=0;xi<si.length;xi++){var ji=si[xi]._private;ji.oldBackgroundTimestamp=ji.backgroundTimestamp}});var pi=function(Mn){for(var si=0;si<Mn.length;si++)bi.enqueueElementRefinement(Mn[si].ele)};Jn.onDequeue(pi),En.onDequeue(pi),Yn.onDequeue(pi),li.onDequeue(pi)}en.CANVAS_LAYERS=3,en.SELECT_BOX=0,en.DRAG=1,en.NODE=2,en.BUFFER_COUNT=3,en.TEXTURE_BUFFER=0,en.MOTIONBLUR_BUFFER_NODE=1,en.MOTIONBLUR_BUFFER_DRAG=2,en.redrawHint=function(f,c){var h=this;switch(f){case"eles":h.data.canvasNeedsRedraw[en.NODE]=c;break;case"drag":h.data.canvasNeedsRedraw[en.DRAG]=c;break;case"select":h.data.canvasNeedsRedraw[en.SELECT_BOX]=c}};var On=typeof Path2D<"u";en.path2dEnabled=function(f){if(void 0===f)return this.pathsEnabled;this.pathsEnabled=!!f},en.usePaths=function(){return On&&this.pathsEnabled},en.setImgSmoothing=function(f,c){null!=f.imageSmoothingEnabled?f.imageSmoothingEnabled=c:(f.webkitImageSmoothingEnabled=c,f.mozImageSmoothingEnabled=c,f.msImageSmoothingEnabled=c)},en.getImgSmoothing=function(f){return null!=f.imageSmoothingEnabled?f.imageSmoothingEnabled:f.webkitImageSmoothingEnabled||f.mozImageSmoothingEnabled||f.msImageSmoothingEnabled},en.makeOffscreenCanvas=function(f,c){var h;return"undefined"!==(typeof OffscreenCanvas>"u"?"undefined":se(OffscreenCanvas))?h=new OffscreenCanvas(f,c):((h=document.createElement("canvas")).width=f,h.height=c),h},[Bv,Jh,g,A,M,N,ee,me,pt,{nodeShapeImpl:function(f,c,h,m,_,C,w){switch(f){case"ellipse":return this.drawEllipsePath(c,h,m,_,C);case"polygon":return this.drawPolygonPath(c,h,m,_,C,w);case"round-polygon":return this.drawRoundPolygonPath(c,h,m,_,C,w);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(c,h,m,_,C);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(c,h,m,_,C);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(c,h,m,_,C);case"barrel":return this.drawBarrelPath(c,h,m,_,C)}}}].forEach(function(f){tr(en,f)});var ui=[{type:"layout",extensions:em},{type:"renderer",extensions:[{name:"null",impl:Kh},{name:"base",impl:tm},{name:"canvas",impl:sn}]}],Wt={},$t={};function Wn(f,c,h){var m=h,_=function(Ft){de("Can not register `"+c+"` for `"+f+"` since `"+Ft+"` already exists in the prototype and can not be overridden")};if("core"===f){if(fc.prototype[c])return _(c);fc.prototype[c]=h}else if("collection"===f){if(la.prototype[c])return _(c);la.prototype[c]=h}else if("layout"===f){for(var C=function(Ft){this.options=Ft,h.call(this,Ft),bt(this._private)||(this._private={}),this._private.cy=Ft.cy,this._private.listeners=[],this.createEmitter()},w=C.prototype=Object.create(h.prototype),E=[],k=0;k<E.length;k++){var L=E[k];w[L]=w[L]||function(){return this}}w.start&&!w.run?w.run=function(){return this.start(),this}:!w.start&&w.run&&(w.start=function(){return this.run(),this});var G=h.prototype.stop;w.stop=function(){var mt=this.options;if(mt&&mt.animate){var Ft=this.animations;if(Ft)for(var Ct=0;Ct<Ft.length;Ct++)Ft[Ct].stop()}return G?G.call(this):this.emit("layoutstop"),this},w.destroy||(w.destroy=function(){return this}),w.cy=function(){return this._private.cy};var K=function(Ft){return Ft._private.cy},le={addEventFields:function(Ft,Ct){Ct.layout=Ft,Ct.cy=K(Ft),Ct.target=Ft},bubble:function(){return!0},parent:function(Ft){return K(Ft)}};tr(w,{createEmitter:function(){return this._private.emitter=new fu(le,this),this},emitter:function(){return this._private.emitter},on:function(Ft,Ct){return this.emitter().on(Ft,Ct),this},one:function(Ft,Ct){return this.emitter().one(Ft,Ct),this},once:function(Ft,Ct){return this.emitter().one(Ft,Ct),this},removeListener:function(Ft,Ct){return this.emitter().removeListener(Ft,Ct),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(Ft,Ct){return this.emitter().emit(Ft,Ct),this}}),ms.eventAliasesOn(w),m=C}else if("renderer"===f&&"null"!==c&&"base"!==c){var he=ei("renderer","base"),pe=he.prototype,Ie=h,Ne=h.prototype,ze=function(){he.apply(this,arguments),Ie.apply(this,arguments)},Qe=ze.prototype;for(var qe in pe){var ht=pe[qe];if(null!=Ne[qe])return _(qe);Qe[qe]=ht}for(var kt in Ne)Qe[kt]=Ne[kt];pe.clientFunctions.forEach(function(mt){Qe[mt]=Qe[mt]||function(){it("Renderer does not implement `renderer."+mt+"()` on its prototype")}}),m=ze}else if("__proto__"===f||"constructor"===f||"prototype"===f)return it(f+" is an illegal type to be registered, possibly lead to prototype pollutions");return lc({map:Wt,keys:[f,c],value:m})}function ei(f,c){return Id({map:Wt,keys:[f,c]})}function Ii(f,c,h,m,_){return lc({map:$t,keys:[f,c,h,m],value:_})}function _i(f,c,h,m){return Id({map:$t,keys:[f,c,h,m]})}var fi=function(){return 2===arguments.length?ei.apply(null,arguments):3===arguments.length?Wn.apply(null,arguments):4===arguments.length?_i.apply(null,arguments):5===arguments.length?Ii.apply(null,arguments):void it("Invalid extension access syntax")};fc.prototype.extension=fi,ui.forEach(function(f){f.extensions.forEach(function(c){Wn(f.type,c.name,c.impl)})});var ir=function f(){if(!(this instanceof f))return new f;this.length=0},zi=ir.prototype;zi.instanceString=function(){return"stylesheet"},zi.selector=function(f){return this[this.length++]={selector:f,properties:[]},this},zi.css=function(f,c){var h=this.length-1;if(He(f))this[h].properties.push({name:f,value:c});else if(bt(f))for(var m=f,_=Object.keys(m),C=0;C<_.length;C++){var w=_[C],E=m[w];if(null!=E){var k=ec.properties[w]||ec.properties[un(w)];null!=k&&this[h].properties.push({name:k.name,value:E})}}return this},zi.style=zi.css,zi.generateStyle=function(f){var c=new ec(f);return this.appendToStyle(c)},zi.appendToStyle=function(f){for(var c=0;c<this.length;c++){var h=this[c],_=h.properties;f.selector(h.selector);for(var C=0;C<_.length;C++){var w=_[C];f.css(w.name,w.value)}}return f};var Hn=function(c){return void 0===c&&(c={}),bt(c)?new fc(c):He(c)?fi.apply(fi,arguments):void 0};Hn.use=function(f){var c=Array.prototype.slice.call(arguments,1);return c.unshift(Hn),f.apply(null,c),this},Hn.warnings=function(f){return Ye(f)},Hn.version="3.22.1",Hn.stylesheet=Hn.Stylesheet=ir,Be.exports=Hn},9069:Be=>{"use strict";var Y,Ce="object"==typeof Reflect?Reflect:null,V=Ce&&"function"==typeof Ce.apply?Ce.apply:function(z,$,ne){return Function.prototype.apply.call(z,$,ne)};Y=Ce&&"function"==typeof Ce.ownKeys?Ce.ownKeys:Object.getOwnPropertySymbols?function(z){return Object.getOwnPropertyNames(z).concat(Object.getOwnPropertySymbols(z))}:function(z){return Object.getOwnPropertyNames(z)};var H=Number.isNaN||function(z){return z!=z};function B(){B.init.call(this)}Be.exports=B,Be.exports.once=function xe(ue,z){return new Promise(function($,ne){function ge(Re){ue.removeListener(z,Ue),ne(Re)}function Ue(){"function"==typeof ue.removeListener&&ue.removeListener("error",ge),$([].slice.call(arguments))}re(ue,z,Ue,{once:!0}),"error"!==z&&function Oe(ue,z,$){"function"==typeof ue.on&&re(ue,"error",z,$)}(ue,ge,{once:!0})})},B.EventEmitter=B,B.prototype._events=void 0,B.prototype._eventsCount=0,B.prototype._maxListeners=void 0;var W=10;function P(ue){if("function"!=typeof ue)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof ue)}function O(ue){return void 0===ue._maxListeners?B.defaultMaxListeners:ue._maxListeners}function q(ue,z,$,ne){var ge,Ue,Re;if(P($),void 0===(Ue=ue._events)?(Ue=ue._events=Object.create(null),ue._eventsCount=0):(void 0!==Ue.newListener&&(ue.emit("newListener",z,$.listener?$.listener:$),Ue=ue._events),Re=Ue[z]),void 0===Re)Re=Ue[z]=$,++ue._eventsCount;else if("function"==typeof Re?Re=Ue[z]=ne?[$,Re]:[Re,$]:ne?Re.unshift($):Re.push($),(ge=O(ue))>0&&Re.length>ge&&!Re.warned){Re.warned=!0;var rt=new Error("Possible EventEmitter memory leak detected. "+Re.length+" "+String(z)+" listeners added. Use emitter.setMaxListeners() to increase limit");rt.name="MaxListenersExceededWarning",rt.emitter=ue,rt.type=z,rt.count=Re.length,function D(ue){console&&console.warn&&console.warn(ue)}(rt)}return ue}function te(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function J(ue,z,$){var ne={fired:!1,wrapFn:void 0,target:ue,type:z,listener:$},ge=te.bind(ne);return ge.listener=$,ne.wrapFn=ge,ge}function oe(ue,z,$){var ne=ue._events;if(void 0===ne)return[];var ge=ne[z];return void 0===ge?[]:"function"==typeof ge?$?[ge.listener||ge]:[ge]:$?function ae(ue){for(var z=new Array(ue.length),$=0;$<z.length;++$)z[$]=ue[$].listener||ue[$];return z}(ge):Q(ge,ge.length)}function se(ue){var z=this._events;if(void 0!==z){var $=z[ue];if("function"==typeof $)return 1;if(void 0!==$)return $.length}return 0}function Q(ue,z){for(var $=new Array(z),ne=0;ne<z;++ne)$[ne]=ue[ne];return $}function re(ue,z,$,ne){if("function"==typeof ue.on)ne.once?ue.once(z,$):ue.on(z,$);else{if("function"!=typeof ue.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof ue);ue.addEventListener(z,function ge(Ue){ne.once&&ue.removeEventListener(z,ge),$(Ue)})}}Object.defineProperty(B,"defaultMaxListeners",{enumerable:!0,get:function(){return W},set:function(ue){if("number"!=typeof ue||ue<0||H(ue))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+ue+".");W=ue}}),B.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},B.prototype.setMaxListeners=function(z){if("number"!=typeof z||z<0||H(z))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+z+".");return this._maxListeners=z,this},B.prototype.getMaxListeners=function(){return O(this)},B.prototype.emit=function(z){for(var $=[],ne=1;ne<arguments.length;ne++)$.push(arguments[ne]);var ge="error"===z,Ue=this._events;if(void 0!==Ue)ge=ge&&void 0===Ue.error;else if(!ge)return!1;if(ge){var Re;if($.length>0&&(Re=$[0]),Re instanceof Error)throw Re;var rt=new Error("Unhandled error."+(Re?" ("+Re.message+")":""));throw rt.context=Re,rt}var Pe=Ue[z];if(void 0===Pe)return!1;if("function"==typeof Pe)V(Pe,this,$);else{var at=Pe.length,xt=Q(Pe,at);for(ne=0;ne<at;++ne)V(xt[ne],this,$)}return!0},B.prototype.on=B.prototype.addListener=function(z,$){return q(this,z,$,!1)},B.prototype.prependListener=function(z,$){return q(this,z,$,!0)},B.prototype.once=function(z,$){return P($),this.on(z,J(this,z,$)),this},B.prototype.prependOnceListener=function(z,$){return P($),this.prependListener(z,J(this,z,$)),this},B.prototype.off=B.prototype.removeListener=function(z,$){var ne,ge,Ue,Re,rt;if(P($),void 0===(ge=this._events))return this;if(void 0===(ne=ge[z]))return this;if(ne===$||ne.listener===$)0==--this._eventsCount?this._events=Object.create(null):(delete ge[z],ge.removeListener&&this.emit("removeListener",z,ne.listener||$));else if("function"!=typeof ne){for(Ue=-1,Re=ne.length-1;Re>=0;Re--)if(ne[Re]===$||ne[Re].listener===$){rt=ne[Re].listener,Ue=Re;break}if(Ue<0)return this;0===Ue?ne.shift():function U(ue,z){for(;z+1<ue.length;z++)ue[z]=ue[z+1];ue.pop()}(ne,Ue),1===ne.length&&(ge[z]=ne[0]),void 0!==ge.removeListener&&this.emit("removeListener",z,rt||$)}return this},B.prototype.removeAllListeners=function(z){var $,ne,ge;if(void 0===(ne=this._events))return this;if(void 0===ne.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==ne[z]&&(0==--this._eventsCount?this._events=Object.create(null):delete ne[z]),this;if(0===arguments.length){var Re,Ue=Object.keys(ne);for(ge=0;ge<Ue.length;++ge)"removeListener"!==(Re=Ue[ge])&&this.removeAllListeners(Re);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof($=ne[z]))this.removeListener(z,$);else if(void 0!==$)for(ge=$.length-1;ge>=0;ge--)this.removeListener(z,$[ge]);return this},B.prototype.listeners=function(z){return oe(this,z,!0)},B.prototype.rawListeners=function(z){return oe(this,z,!1)},B.listenerCount=function(ue,z){return"function"==typeof ue.listenerCount?ue.listenerCount(z):se.call(ue,z)},B.prototype.listenerCount=se,B.prototype.eventNames=function(){return this._eventsCount>0?Y(this._events):[]}},2698:Be=>{Be.exports={nodeXAttribute:"x",nodeYAttribute:"y",isNodeFixed:"fixed",shouldSkipNode:null,shouldSkipEdge:null,settings:{attraction:5e-4,repulsion:.1,gravity:1e-4,inertia:.6,maxMove:200}}},4570:(Be,Ce)=>{Ce.assignLayoutChanges=function(V,Y,D){const{nodeXAttribute:H,nodeYAttribute:B}=D;V.updateEachNodeAttributes((W,P)=>{const O=Y[W];return!O||O.fixed||(P[H]=O.x,P[B]=O.y),P},{attributes:["x","y"]})},Ce.collectLayoutChanges=function(V){const Y={};for(const D in V){const H=V[D];Y[D]={x:H.x,y:H.y}}return Y}},8031:(Be,Ce,V)=>{const{createNodeValueGetter:Y,createEdgeValueGetter:D}=V(2954);Be.exports=function(B,W,P){const{nodeXAttribute:O,nodeYAttribute:q}=P,{attraction:te,repulsion:J,gravity:oe,inertia:se,maxMove:Q}=P.settings;let{shouldSkipNode:U,shouldSkipEdge:ae,isNodeFixed:xe}=P;xe=Y(xe),U=Y(U,!1),ae=D(ae,!1);const Oe=B.filterNodes((z,$)=>!U.fromEntry(z,$)),re=Oe.length;for(let z=0;z<re;z++){const $=Oe[z],ne=B.getNodeAttributes($),ge=W[$];W[$]=ge?{dx:ge.dx*se,dy:ge.dy*se,x:ne[O]||0,y:ne[q]||0}:{dx:0,dy:0,x:ne[O]||0,y:ne[q]||0}}if(J)for(let z=0;z<re;z++){const ne=W[Oe[z]];for(let ge=z+1;ge<re;ge++){const Re=W[Oe[ge]],rt=Re.x-ne.x,Pe=Re.y-ne.y,at=Math.sqrt(rt*rt+Pe*Pe)||1,xt=J/at*rt,He=J/at*Pe;ne.dx-=xt,ne.dy-=He,Re.dx+=xt,Re.dy+=He}}if(te&&B.forEachEdge((z,$,ne,ge,Ue,Re,rt)=>{if(ne===ge||U.fromEntry(ne,Ue)||U.fromEntry(ge,Re)||ae.fromEntry(z,$,ne,ge,Ue,Re,rt))return;const Pe=W[ne],at=W[ge],xt=at.x-Pe.x,He=at.y-Pe.y,ft=Math.sqrt(xt*xt+He*He)||1,gt=te*ft*xt,bt=te*ft*He;Pe.dx+=gt,Pe.dy+=bt,at.dx-=gt,at.dy-=bt}),oe)for(let z=0;z<re;z++){const $=Oe[z],ne=W[$],{x:ge,y:Ue}=ne,Re=Math.sqrt(ge*ge+Ue*Ue)||1;W[$].dx-=ge*oe*Re,W[$].dy-=Ue*oe*Re}for(let z=0;z<re;z++){const $=Oe[z],ne=W[$],ge=Math.sqrt(ne.dx*ne.dx+ne.dy*ne.dy);ge>Q&&(ne.dx*=Q/ge,ne.dy*=Q/ge),xe.fromGraph(B,$)?ne.fixed=!0:(ne.x+=ne.dx,ne.y+=ne.dy,ne.fixed=!1)}return{converged:!1}}},3424:(Be,Ce,V)=>{const Y=V(6714),D=V(8487),H=V(8031),B=V(4570),W=V(2698);function P(O,q){if(!Y(O))throw new Error("graphology-layout-force/worker: the given graph is not a valid graphology instance.");q=D(q,W),this.callbacks={},q.onConverged&&(this.callbacks.onConverged=q.onConverged),this.graph=O,this.params=q,this.nodeStates={},this.frameID=null,this.running=!1,this.killed=!1}P.prototype.isRunning=function(){return this.running},P.prototype.runFrame=function(){let{converged:O}=H(this.graph,this.nodeStates,this.params);B.assignLayoutChanges(this.graph,this.nodeStates,this.params),O=!1,O?(this.callbacks.onConverged&&this.callbacks.onConverged(),this.stop()):this.frameID=window.requestAnimationFrame(()=>this.runFrame())},P.prototype.stop=function(){return this.running=!1,null!==this.frameID&&(window.cancelAnimationFrame(this.frameID),this.frameID=null),this},P.prototype.start=function(){if(this.killed)throw new Error("graphology-layout-force/worker.start: layout was killed.");this.running||(this.running=!0,this.runFrame())},P.prototype.kill=function(){this.stop(),delete this.nodeStates,this.killed=!0},Be.exports=P},8487:Be=>{function Ce(Y){return!Y||"object"!=typeof Y||"function"==typeof Y||Array.isArray(Y)||Y instanceof Set||Y instanceof Map||Y instanceof RegExp||Y instanceof Date}Be.exports=function V(Y,D){Y=Y||{};var H={};for(var B in D){var W=Y[B],P=D[B];H[B]=Ce(P)?void 0===W?P:W:V(W,P)}return H}},2954:(Be,Ce)=>{function V(H){return"number"!=typeof H||isNaN(H)?1:H}function D(H,B){var W={},P=function(te){return typeof te>"u"?B:te};"function"==typeof B&&(P=B);var O=function(te){return P(te[H])},q=function(){return P(void 0)};return"string"==typeof H?(W.fromAttributes=O,W.fromGraph=function(te,J){return O(te.getEdgeAttributes(J))},W.fromEntry=function(te,J){return O(J)},W.fromPartialEntry=W.fromEntry,W.fromMinimalEntry=W.fromEntry):"function"==typeof H?(W.fromAttributes=function(){throw new Error("graphology-utils/getters/createEdgeValueGetter: irrelevant usage.")},W.fromGraph=function(te,J){var oe=te.extremities(J);return P(H(J,te.getEdgeAttributes(J),oe[0],oe[1],te.getNodeAttributes(oe[0]),te.getNodeAttributes(oe[1]),te.isUndirected(J)))},W.fromEntry=function(te,J,oe,se,Q,U,ae){return P(H(te,J,oe,se,Q,U,ae))},W.fromPartialEntry=function(te,J,oe,se){return P(H(te,J,oe,se))},W.fromMinimalEntry=function(te,J){return P(H(te,J))}):(W.fromAttributes=q,W.fromGraph=q,W.fromEntry=q,W.fromMinimalEntry=q),W}Ce.createNodeValueGetter=function Y(H,B){var W={},P=function(te){return typeof te>"u"?B:te};"function"==typeof B&&(P=B);var O=function(te){return P(te[H])},q=function(){return P(void 0)};return"string"==typeof H?(W.fromAttributes=O,W.fromGraph=function(te,J){return O(te.getNodeAttributes(J))},W.fromEntry=function(te,J){return O(J)}):"function"==typeof H?(W.fromAttributes=function(){throw new Error("graphology-utils/getters/createNodeValueGetter: irrelevant usage.")},W.fromGraph=function(te,J){return P(H(J,te.getNodeAttributes(J)))},W.fromEntry=function(te,J){return P(H(te,J))}):(W.fromAttributes=q,W.fromGraph=q,W.fromEntry=q),W},Ce.createEdgeValueGetter=D,Ce.createEdgeWeightGetter=function(H){return D(H,V)}},6714:Be=>{Be.exports=function(V){return null!==V&&"object"==typeof V&&"function"==typeof V.addUndirectedEdgeWithKey&&"function"==typeof V.dropNode&&"boolean"==typeof V.multi}},5595:function(Be){Be.exports=function(){"use strict";function Ce(Ge){return(Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(it){return typeof it}:function(it){return it&&"function"==typeof Symbol&&it.constructor===Symbol&&it!==Symbol.prototype?"symbol":typeof it})(Ge)}function V(Ge,it){Ge.prototype=Object.create(it.prototype),Ge.prototype.constructor=Ge,D(Ge,it)}function Y(Ge){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(it){return it.__proto__||Object.getPrototypeOf(it)})(Ge)}function D(Ge,it){return(D=Object.setPrototypeOf||function(Ye,de){return Ye.__proto__=de,Ye})(Ge,it)}function H(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function B(Ge,it,Ye){return(B=H()?Reflect.construct:function(de,Se,$e){var _t=[null];_t.push.apply(_t,Se);var zt=new(Function.bind.apply(de,_t));return $e&&D(zt,$e.prototype),zt}).apply(null,arguments)}function W(Ge){var it="function"==typeof Map?new Map:void 0;return W=function(Ye){if(null===Ye||-1===Function.toString.call(Ye).indexOf("[native code]"))return Ye;if("function"!=typeof Ye)throw new TypeError("Super expression must either be null or a function");if(void 0!==it){if(it.has(Ye))return it.get(Ye);it.set(Ye,Se)}function Se(){return B(Ye,arguments,Y(this).constructor)}return Se.prototype=Object.create(Ye.prototype,{constructor:{value:Se,enumerable:!1,writable:!0,configurable:!0}}),D(Se,Ye)},W(Ge)}function P(Ge){if(void 0===Ge)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ge}var O=function(){for(var Ge=arguments[0],it=1,Ye=arguments.length;it<Ye;it++)if(arguments[it])for(var de in arguments[it])Ge[de]=arguments[it][de];return Ge};function q(Ge,it,Ye,de){var Se=Ge._nodes.get(it),$e=null;return Se?$e="mixed"===de?Se.out&&Se.out[Ye]||Se.undirected&&Se.undirected[Ye]:"directed"===de?Se.out&&Se.out[Ye]:Se.undirected&&Se.undirected[Ye]:$e}function te(Ge){return null!==Ge&&"object"===Ce(Ge)&&"function"==typeof Ge.addUndirectedEdgeWithKey&&"function"==typeof Ge.dropNode}function J(Ge){return"object"===Ce(Ge)&&null!==Ge&&Ge.constructor===Object}function oe(Ge){var it;for(it in Ge)return!1;return!0}function se(Ge,it,Ye){Object.defineProperty(Ge,it,{enumerable:!1,configurable:!1,writable:!0,value:Ye})}function Q(Ge,it,Ye){var de={enumerable:!0,configurable:!0};"function"==typeof Ye?de.get=Ye:(de.value=Ye,de.writable=!1),Object.defineProperty(Ge,it,de)}function U(Ge){return!(!J(Ge)||Ge.attributes&&!Array.isArray(Ge.attributes))}"function"==typeof Object.assign&&(O=Object.assign);var ae,xe={exports:{}},Oe="object"==typeof Reflect?Reflect:null,re=Oe&&"function"==typeof Oe.apply?Oe.apply:function(Ge,it,Ye){return Function.prototype.apply.call(Ge,it,Ye)};ae=Oe&&"function"==typeof Oe.ownKeys?Oe.ownKeys:Object.getOwnPropertySymbols?function(Ge){return Object.getOwnPropertyNames(Ge).concat(Object.getOwnPropertySymbols(Ge))}:function(Ge){return Object.getOwnPropertyNames(Ge)};var ue=Number.isNaN||function(Ge){return Ge!=Ge};function z(){z.init.call(this)}xe.exports=z,xe.exports.once=function(Ge,it){return new Promise(function(Ye,de){function Se(_t){Ge.removeListener(it,$e),de(_t)}function $e(){"function"==typeof Ge.removeListener&&Ge.removeListener("error",Se),Ye([].slice.call(arguments))}var _t;He(Ge,it,$e,{once:!0}),"error"!==it&&("function"==typeof(_t=Ge).on&&He(_t,"error",Se,{once:!0}))})},z.EventEmitter=z,z.prototype._events=void 0,z.prototype._eventsCount=0,z.prototype._maxListeners=void 0;var $=10;function ne(Ge){if("function"!=typeof Ge)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof Ge)}function ge(Ge){return void 0===Ge._maxListeners?z.defaultMaxListeners:Ge._maxListeners}function Ue(Ge,it,Ye,de){var Se,$e,_t;if(ne(Ye),void 0===($e=Ge._events)?($e=Ge._events=Object.create(null),Ge._eventsCount=0):(void 0!==$e.newListener&&(Ge.emit("newListener",it,Ye.listener?Ye.listener:Ye),$e=Ge._events),_t=$e[it]),void 0===_t)_t=$e[it]=Ye,++Ge._eventsCount;else if("function"==typeof _t?_t=$e[it]=de?[Ye,_t]:[_t,Ye]:de?_t.unshift(Ye):_t.push(Ye),(Se=ge(Ge))>0&&_t.length>Se&&!_t.warned){_t.warned=!0;var In=new Error("Possible EventEmitter memory leak detected. "+_t.length+" "+String(it)+" listeners added. Use emitter.setMaxListeners() to increase limit");In.name="MaxListenersExceededWarning",In.emitter=Ge,In.type=it,In.count=_t.length,console&&console.warn&&console.warn(In)}return Ge}function Re(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function rt(Ge,it,Ye){var de={fired:!1,wrapFn:void 0,target:Ge,type:it,listener:Ye},Se=Re.bind(de);return Se.listener=Ye,de.wrapFn=Se,Se}function Pe(Ge,it,Ye){var de=Ge._events;if(void 0===de)return[];var Se=de[it];return void 0===Se?[]:"function"==typeof Se?Ye?[Se.listener||Se]:[Se]:Ye?function($e){for(var _t=new Array($e.length),zt=0;zt<_t.length;++zt)_t[zt]=$e[zt].listener||$e[zt];return _t}(Se):xt(Se,Se.length)}function at(Ge){var it=this._events;if(void 0!==it){var Ye=it[Ge];if("function"==typeof Ye)return 1;if(void 0!==Ye)return Ye.length}return 0}function xt(Ge,it){for(var Ye=new Array(it),de=0;de<it;++de)Ye[de]=Ge[de];return Ye}function He(Ge,it,Ye,de){if("function"==typeof Ge.on)de.once?Ge.once(it,Ye):Ge.on(it,Ye);else{if("function"!=typeof Ge.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof Ge);Ge.addEventListener(it,function Se($e){de.once&&Ge.removeEventListener(it,Se),Ye($e)})}}function ft(Ge){if("function"!=typeof Ge)throw new Error("obliterator/iterator: expecting a function!");this.next=Ge}Object.defineProperty(z,"defaultMaxListeners",{enumerable:!0,get:function(){return $},set:function(Ge){if("number"!=typeof Ge||Ge<0||ue(Ge))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+Ge+".");$=Ge}}),z.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},z.prototype.setMaxListeners=function(Ge){if("number"!=typeof Ge||Ge<0||ue(Ge))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+Ge+".");return this._maxListeners=Ge,this},z.prototype.getMaxListeners=function(){return ge(this)},z.prototype.emit=function(Ge){for(var it=[],Ye=1;Ye<arguments.length;Ye++)it.push(arguments[Ye]);var de="error"===Ge,Se=this._events;if(void 0!==Se)de=de&&void 0===Se.error;else if(!de)return!1;if(de){var $e;if(it.length>0&&($e=it[0]),$e instanceof Error)throw $e;var _t=new Error("Unhandled error."+($e?" ("+$e.message+")":""));throw _t.context=$e,_t}var zt=Se[Ge];if(void 0===zt)return!1;if("function"==typeof zt)re(zt,this,it);else{var In=zt.length,yi=xt(zt,In);for(Ye=0;Ye<In;++Ye)re(yi[Ye],this,it)}return!0},z.prototype.on=z.prototype.addListener=function(Ge,it){return Ue(this,Ge,it,!1)},z.prototype.prependListener=function(Ge,it){return Ue(this,Ge,it,!0)},z.prototype.once=function(Ge,it){return ne(it),this.on(Ge,rt(this,Ge,it)),this},z.prototype.prependOnceListener=function(Ge,it){return ne(it),this.prependListener(Ge,rt(this,Ge,it)),this},z.prototype.off=z.prototype.removeListener=function(Ge,it){var Ye,de,Se,$e,_t;if(ne(it),void 0===(de=this._events))return this;if(void 0===(Ye=de[Ge]))return this;if(Ye===it||Ye.listener===it)0==--this._eventsCount?this._events=Object.create(null):(delete de[Ge],de.removeListener&&this.emit("removeListener",Ge,Ye.listener||it));else if("function"!=typeof Ye){for(Se=-1,$e=Ye.length-1;$e>=0;$e--)if(Ye[$e]===it||Ye[$e].listener===it){_t=Ye[$e].listener,Se=$e;break}if(Se<0)return this;0===Se?Ye.shift():function(zt,In){for(;In+1<zt.length;In++)zt[In]=zt[In+1];zt.pop()}(Ye,Se),1===Ye.length&&(de[Ge]=Ye[0]),void 0!==de.removeListener&&this.emit("removeListener",Ge,_t||it)}return this},z.prototype.removeAllListeners=function(Ge){var it,Ye,de;if(void 0===(Ye=this._events))return this;if(void 0===Ye.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==Ye[Ge]&&(0==--this._eventsCount?this._events=Object.create(null):delete Ye[Ge]),this;if(0===arguments.length){var Se,$e=Object.keys(Ye);for(de=0;de<$e.length;++de)"removeListener"!==(Se=$e[de])&&this.removeAllListeners(Se);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(it=Ye[Ge]))this.removeListener(Ge,it);else if(void 0!==it)for(de=it.length-1;de>=0;de--)this.removeListener(Ge,it[de]);return this},z.prototype.listeners=function(Ge){return Pe(this,Ge,!0)},z.prototype.rawListeners=function(Ge){return Pe(this,Ge,!1)},z.listenerCount=function(Ge,it){return"function"==typeof Ge.listenerCount?Ge.listenerCount(it):at.call(Ge,it)},z.prototype.listenerCount=at,z.prototype.eventNames=function(){return this._eventsCount>0?ae(this._events):[]},typeof Symbol<"u"&&(ft.prototype[Symbol.iterator]=function(){return this}),ft.of=function(){var Ge=arguments,it=Ge.length,Ye=0;return new ft(function(){return Ye>=it?{done:!0}:{done:!1,value:Ge[Ye++]}})},ft.empty=function(){return new ft(function(){return{done:!0}})},ft.fromSequence=function(Ge){var it=0,Ye=Ge.length;return new ft(function(){return it>=Ye?{done:!0}:{done:!1,value:Ge[it++]}})},ft.is=function(Ge){return Ge instanceof ft||"object"==typeof Ge&&null!==Ge&&"function"==typeof Ge.next};var gt=ft,bt={};bt.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u",bt.SYMBOL_SUPPORT=typeof Symbol<"u";var kn=gt,Dn=bt.ARRAY_BUFFER_SUPPORT,Jt=bt.SYMBOL_SUPPORT,nn=function(Ge){var Ye,it="string"==typeof(Ye=Ge)||Array.isArray(Ye)||Dn&&ArrayBuffer.isView(Ye)?kn.fromSequence(Ye):"object"!=typeof Ye||null===Ye?null:Jt&&"function"==typeof Ye[Symbol.iterator]?Ye[Symbol.iterator]():"function"==typeof Ye.next?Ye:null;if(!it)throw new Error("obliterator: target is not iterable nor a valid iterator.");return it},Ln=nn,xn=function(Ge,it){for(var Ye,de=arguments.length>1?it:1/0,Se=de!==1/0?new Array(de):[],$e=0,_t=Ln(Ge);;){if($e===de)return Se;if((Ye=_t.next()).done)return $e!==it&&(Se.length=$e),Se;Se[$e++]=Ye.value}},Cn=function(Ge){function it(Ye){var de;return(de=Ge.call(this)||this).name="GraphError",de.message=Ye,de}return V(it,Ge),it}(W(Error)),yn=function(Ge){function it(Ye){var de;return(de=Ge.call(this,Ye)||this).name="InvalidArgumentsGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(P(de),it.prototype.constructor),de}return V(it,Ge),it}(Cn),je=function(Ge){function it(Ye){var de;return(de=Ge.call(this,Ye)||this).name="NotFoundGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(P(de),it.prototype.constructor),de}return V(it,Ge),it}(Cn),be=function(Ge){function it(Ye){var de;return(de=Ge.call(this,Ye)||this).name="UsageGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(P(de),it.prototype.constructor),de}return V(it,Ge),it}(Cn);function Dt(Ge,it){this.key=Ge,this.attributes=it,this.clear()}function Rt(Ge,it){this.key=Ge,this.attributes=it,this.clear()}function ci(Ge,it){this.key=Ge,this.attributes=it,this.clear()}function $i(Ge,it,Ye,de,Se){this.key=it,this.attributes=Se,this.undirected=Ge,this.source=Ye,this.target=de}function It(Ge,it,Ye,de,Se,$e,_t){var zt,In,yi,ti;if(de=""+de,0===Ye){if(!(zt=Ge._nodes.get(de)))throw new je("Graph.".concat(it,': could not find the "').concat(de,'" node in the graph.'));yi=Se,ti=$e}else if(3===Ye){if(!(In=Ge._edges.get(Se=""+Se)))throw new je("Graph.".concat(it,': could not find the "').concat(Se,'" edge in the graph.'));var hi=In.source.key,pr=In.target.key;if(de===hi)zt=In.target;else{if(de!==pr)throw new je("Graph.".concat(it,': the "').concat(de,'" node is not attached to the "').concat(Se,'" edge (').concat(hi,", ").concat(pr,")."));zt=In.source}yi=$e,ti=_t}else{if(!(In=Ge._edges.get(de)))throw new je("Graph.".concat(it,': could not find the "').concat(de,'" edge in the graph.'));zt=1===Ye?In.source:In.target,yi=Se,ti=$e}return[zt,yi,ti]}Dt.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.in={},this.out={},this.undirected={}},Rt.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.in={},this.out={}},ci.prototype.clear=function(){this.undirectedDegree=0,this.undirected={}},$i.prototype.attach=function(){var Ge="out",it="in";this.undirected&&(Ge=it="undirected");var Ye=this.source.key,de=this.target.key;this.source[Ge][de]=this,this.undirected&&Ye===de||(this.target[it][Ye]=this)},$i.prototype.attachMulti=function(){var Ge="out",it="in",Ye=this.source.key,de=this.target.key;this.undirected&&(Ge=it="undirected");var Se=this.source[Ge],$e=Se[de];if(void 0===$e)return Se[de]=this,void(this.undirected&&Ye===de||(this.target[it][Ye]=this));$e.previous=this,this.next=$e,Se[de]=this,this.target[it][Ye]=this},$i.prototype.detach=function(){var Ge=this.source.key,Ye="out",de="in";this.undirected&&(Ye=de="undirected"),delete this.source[Ye][this.target.key],delete this.target[de][Ge]},$i.prototype.detachMulti=function(){var Ge=this.source.key,it=this.target.key,Ye="out",de="in";this.undirected&&(Ye=de="undirected"),void 0===this.previous?void 0===this.next?(delete this.source[Ye][it],delete this.target[de][Ge]):(this.next.previous=void 0,this.source[Ye][it]=this.next,this.target[de][Ge]=this.next):(this.previous.next=this.next,void 0!==this.next&&(this.next.previous=this.previous))};var Pt=[{name:function(Ge){return"get".concat(Ge,"Attribute")},attacher:function(Ge,it,Ye){Ge.prototype[it]=function(de,Se,$e){var _t=It(this,it,Ye,de,Se,$e);return _t[0].attributes[_t[1]]}}},{name:function(Ge){return"get".concat(Ge,"Attributes")},attacher:function(Ge,it,Ye){Ge.prototype[it]=function(de,Se){return It(this,it,Ye,de,Se)[0].attributes}}},{name:function(Ge){return"has".concat(Ge,"Attribute")},attacher:function(Ge,it,Ye){Ge.prototype[it]=function(de,Se,$e){var _t=It(this,it,Ye,de,Se,$e);return _t[0].attributes.hasOwnProperty(_t[1])}}},{name:function(Ge){return"set".concat(Ge,"Attribute")},attacher:function(Ge,it,Ye){Ge.prototype[it]=function(de,Se,$e,_t){var zt=It(this,it,Ye,de,Se,$e,_t),In=zt[0],yi=zt[1];return In.attributes[yi]=zt[2],this.emit("nodeAttributesUpdated",{key:In.key,type:"set",attributes:In.attributes,name:yi}),this}}},{name:function(Ge){return"update".concat(Ge,"Attribute")},attacher:function(Ge,it,Ye){Ge.prototype[it]=function(de,Se,$e,_t){var zt=It(this,it,Ye,de,Se,$e,_t),In=zt[0],yi=zt[1],ti=zt[2];if("function"!=typeof ti)throw new yn("Graph.".concat(it,": updater should be a function."));var hi=In.attributes,pr=ti(hi[yi]);return hi[yi]=pr,this.emit("nodeAttributesUpdated",{key:In.key,type:"set",attributes:In.attributes,name:yi}),this}}},{name:function(Ge){return"remove".concat(Ge,"Attribute")},attacher:function(Ge,it,Ye){Ge.prototype[it]=function(de,Se,$e){var _t=It(this,it,Ye,de,Se,$e),zt=_t[0],In=_t[1];return delete zt.attributes[In],this.emit("nodeAttributesUpdated",{key:zt.key,type:"remove",attributes:zt.attributes,name:In}),this}}},{name:function(Ge){return"replace".concat(Ge,"Attributes")},attacher:function(Ge,it,Ye){Ge.prototype[it]=function(de,Se,$e){var _t=It(this,it,Ye,de,Se,$e),zt=_t[0],In=_t[1];if(!J(In))throw new yn("Graph.".concat(it,": provided attributes are not a plain object."));return zt.attributes=In,this.emit("nodeAttributesUpdated",{key:zt.key,type:"replace",attributes:zt.attributes}),this}}},{name:function(Ge){return"merge".concat(Ge,"Attributes")},attacher:function(Ge,it,Ye){Ge.prototype[it]=function(de,Se,$e){var _t=It(this,it,Ye,de,Se,$e),zt=_t[0],In=_t[1];if(!J(In))throw new yn("Graph.".concat(it,": provided attributes are not a plain object."));return O(zt.attributes,In),this.emit("nodeAttributesUpdated",{key:zt.key,type:"merge",attributes:zt.attributes,data:In}),this}}},{name:function(Ge){return"update".concat(Ge,"Attributes")},attacher:function(Ge,it,Ye){Ge.prototype[it]=function(de,Se,$e){var _t=It(this,it,Ye,de,Se,$e),zt=_t[0],In=_t[1];if("function"!=typeof In)throw new yn("Graph.".concat(it,": provided updater is not a function."));return zt.attributes=In(zt.attributes),this.emit("nodeAttributesUpdated",{key:zt.key,type:"update",attributes:zt.attributes}),this}}}],un=[{name:function(Ge){return"get".concat(Ge,"Attribute")},attacher:function(Ge,it,Ye){Ge.prototype[it]=function(de,Se){var $e;if("mixed"!==this.type&&"mixed"!==Ye&&Ye!==this.type)throw new be("Graph.".concat(it,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new be("Graph.".concat(it,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var _t=""+de,zt=""+Se;if(Se=arguments[2],!($e=q(this,_t,zt,Ye)))throw new je("Graph.".concat(it,': could not find an edge for the given path ("').concat(_t,'" - "').concat(zt,'").'))}else{if("mixed"!==Ye)throw new be("Graph.".concat(it,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!($e=this._edges.get(de=""+de)))throw new je("Graph.".concat(it,': could not find the "').concat(de,'" edge in the graph.'))}return $e.attributes[Se]}}},{name:function(Ge){return"get".concat(Ge,"Attributes")},attacher:function(Ge,it,Ye){Ge.prototype[it]=function(de){var Se;if("mixed"!==this.type&&"mixed"!==Ye&&Ye!==this.type)throw new be("Graph.".concat(it,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>1){if(this.multi)throw new be("Graph.".concat(it,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var $e=""+de,_t=""+arguments[1];if(!(Se=q(this,$e,_t,Ye)))throw new je("Graph.".concat(it,': could not find an edge for the given path ("').concat($e,'" - "').concat(_t,'").'))}else{if("mixed"!==Ye)throw new be("Graph.".concat(it,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(Se=this._edges.get(de=""+de)))throw new je("Graph.".concat(it,': could not find the "').concat(de,'" edge in the graph.'))}return Se.attributes}}},{name:function(Ge){return"has".concat(Ge,"Attribute")},attacher:function(Ge,it,Ye){Ge.prototype[it]=function(de,Se){var $e;if("mixed"!==this.type&&"mixed"!==Ye&&Ye!==this.type)throw new be("Graph.".concat(it,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new be("Graph.".concat(it,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var _t=""+de,zt=""+Se;if(Se=arguments[2],!($e=q(this,_t,zt,Ye)))throw new je("Graph.".concat(it,': could not find an edge for the given path ("').concat(_t,'" - "').concat(zt,'").'))}else{if("mixed"!==Ye)throw new be("Graph.".concat(it,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!($e=this._edges.get(de=""+de)))throw new je("Graph.".concat(it,': could not find the "').concat(de,'" edge in the graph.'))}return $e.attributes.hasOwnProperty(Se)}}},{name:function(Ge){return"set".concat(Ge,"Attribute")},attacher:function(Ge,it,Ye){Ge.prototype[it]=function(de,Se,$e){var _t;if("mixed"!==this.type&&"mixed"!==Ye&&Ye!==this.type)throw new be("Graph.".concat(it,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new be("Graph.".concat(it,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var zt=""+de,In=""+Se;if(Se=arguments[2],$e=arguments[3],!(_t=q(this,zt,In,Ye)))throw new je("Graph.".concat(it,': could not find an edge for the given path ("').concat(zt,'" - "').concat(In,'").'))}else{if("mixed"!==Ye)throw new be("Graph.".concat(it,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(_t=this._edges.get(de=""+de)))throw new je("Graph.".concat(it,': could not find the "').concat(de,'" edge in the graph.'))}return _t.attributes[Se]=$e,this.emit("edgeAttributesUpdated",{key:_t.key,type:"set",attributes:_t.attributes,name:Se}),this}}},{name:function(Ge){return"update".concat(Ge,"Attribute")},attacher:function(Ge,it,Ye){Ge.prototype[it]=function(de,Se,$e){var _t;if("mixed"!==this.type&&"mixed"!==Ye&&Ye!==this.type)throw new be("Graph.".concat(it,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new be("Graph.".concat(it,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var zt=""+de,In=""+Se;if(Se=arguments[2],$e=arguments[3],!(_t=q(this,zt,In,Ye)))throw new je("Graph.".concat(it,': could not find an edge for the given path ("').concat(zt,'" - "').concat(In,'").'))}else{if("mixed"!==Ye)throw new be("Graph.".concat(it,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(_t=this._edges.get(de=""+de)))throw new je("Graph.".concat(it,': could not find the "').concat(de,'" edge in the graph.'))}if("function"!=typeof $e)throw new yn("Graph.".concat(it,": updater should be a function."));return _t.attributes[Se]=$e(_t.attributes[Se]),this.emit("edgeAttributesUpdated",{key:_t.key,type:"set",attributes:_t.attributes,name:Se}),this}}},{name:function(Ge){return"remove".concat(Ge,"Attribute")},attacher:function(Ge,it,Ye){Ge.prototype[it]=function(de,Se){var $e;if("mixed"!==this.type&&"mixed"!==Ye&&Ye!==this.type)throw new be("Graph.".concat(it,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new be("Graph.".concat(it,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var _t=""+de,zt=""+Se;if(Se=arguments[2],!($e=q(this,_t,zt,Ye)))throw new je("Graph.".concat(it,': could not find an edge for the given path ("').concat(_t,'" - "').concat(zt,'").'))}else{if("mixed"!==Ye)throw new be("Graph.".concat(it,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!($e=this._edges.get(de=""+de)))throw new je("Graph.".concat(it,': could not find the "').concat(de,'" edge in the graph.'))}return delete $e.attributes[Se],this.emit("edgeAttributesUpdated",{key:$e.key,type:"remove",attributes:$e.attributes,name:Se}),this}}},{name:function(Ge){return"replace".concat(Ge,"Attributes")},attacher:function(Ge,it,Ye){Ge.prototype[it]=function(de,Se){var $e;if("mixed"!==this.type&&"mixed"!==Ye&&Ye!==this.type)throw new be("Graph.".concat(it,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new be("Graph.".concat(it,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var _t=""+de,zt=""+Se;if(Se=arguments[2],!($e=q(this,_t,zt,Ye)))throw new je("Graph.".concat(it,': could not find an edge for the given path ("').concat(_t,'" - "').concat(zt,'").'))}else{if("mixed"!==Ye)throw new be("Graph.".concat(it,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!($e=this._edges.get(de=""+de)))throw new je("Graph.".concat(it,': could not find the "').concat(de,'" edge in the graph.'))}if(!J(Se))throw new yn("Graph.".concat(it,": provided attributes are not a plain object."));return $e.attributes=Se,this.emit("edgeAttributesUpdated",{key:$e.key,type:"replace",attributes:$e.attributes}),this}}},{name:function(Ge){return"merge".concat(Ge,"Attributes")},attacher:function(Ge,it,Ye){Ge.prototype[it]=function(de,Se){var $e;if("mixed"!==this.type&&"mixed"!==Ye&&Ye!==this.type)throw new be("Graph.".concat(it,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new be("Graph.".concat(it,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var _t=""+de,zt=""+Se;if(Se=arguments[2],!($e=q(this,_t,zt,Ye)))throw new je("Graph.".concat(it,': could not find an edge for the given path ("').concat(_t,'" - "').concat(zt,'").'))}else{if("mixed"!==Ye)throw new be("Graph.".concat(it,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!($e=this._edges.get(de=""+de)))throw new je("Graph.".concat(it,': could not find the "').concat(de,'" edge in the graph.'))}if(!J(Se))throw new yn("Graph.".concat(it,": provided attributes are not a plain object."));return O($e.attributes,Se),this.emit("edgeAttributesUpdated",{key:$e.key,type:"merge",attributes:$e.attributes,data:Se}),this}}},{name:function(Ge){return"update".concat(Ge,"Attributes")},attacher:function(Ge,it,Ye){Ge.prototype[it]=function(de,Se){var $e;if("mixed"!==this.type&&"mixed"!==Ye&&Ye!==this.type)throw new be("Graph.".concat(it,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new be("Graph.".concat(it,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var _t=""+de,zt=""+Se;if(Se=arguments[2],!($e=q(this,_t,zt,Ye)))throw new je("Graph.".concat(it,': could not find an edge for the given path ("').concat(_t,'" - "').concat(zt,'").'))}else{if("mixed"!==Ye)throw new be("Graph.".concat(it,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!($e=this._edges.get(de=""+de)))throw new je("Graph.".concat(it,': could not find the "').concat(de,'" edge in the graph.'))}if("function"!=typeof Se)throw new yn("Graph.".concat(it,": provided updater is not a function."));return $e.attributes=Se($e.attributes),this.emit("edgeAttributesUpdated",{key:$e.key,type:"update",attributes:$e.attributes}),this}}}],Je=gt,Te=nn,De=function(){var Ge=arguments,it=null,Ye=-1;return new Je(function(){for(var de=null;;){if(null===it){if(++Ye>=Ge.length)return{done:!0};it=Te(Ge[Ye])}if(!0!==(de=it.next()).done)break;it=null}return de})},Ot=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function vn(Ge,it,Ye,de){var Se=!1;for(var $e in it)if($e!==de){var _t=it[$e];if(Se=Ye(_t.key,_t.attributes,_t.source.key,_t.target.key,_t.source.attributes,_t.target.attributes,_t.undirected),Ge&&Se)return _t.key}}function ri(Ge,it,Ye,de){var Se,$e,_t,zt=!1;for(var In in it)if(In!==de){Se=it[In];do{if(zt=Ye(Se.key,Se.attributes,($e=Se.source).key,(_t=Se.target).key,$e.attributes,_t.attributes,Se.undirected),Ge&&zt)return Se.key;Se=Se.next}while(void 0!==Se)}}function Fi(Ge,it){var Ye,de=Object.keys(Ge),Se=de.length,$e=0;return new gt(function(){do{if(Ye)Ye=Ye.next;else{if($e>=Se)return{done:!0};var _t=de[$e++];if(_t===it){Ye=void 0;continue}Ye=Ge[_t]}}while(!Ye);return{done:!1,value:{edge:Ye.key,attributes:Ye.attributes,source:Ye.source.key,target:Ye.target.key,sourceAttributes:Ye.source.attributes,targetAttributes:Ye.target.attributes,undirected:Ye.undirected}}})}function Hs(Ge,it,Ye,de){var Se=it[Ye];if(Se){var $e=Se.source,_t=Se.target;return de(Se.key,Se.attributes,$e.key,_t.key,$e.attributes,_t.attributes,Se.undirected)&&Ge?Se.key:void 0}}function so(Ge,it,Ye,de){var Se=it[Ye];if(Se){var $e=!1;do{if($e=de(Se.key,Se.attributes,Se.source.key,Se.target.key,Se.source.attributes,Se.target.attributes,Se.undirected),Ge&&$e)return Se.key;Se=Se.next}while(void 0!==Se)}}function Cs(Ge,it){var Ye=Ge[it];return void 0!==Ye.next?new gt(function(){if(!Ye)return{done:!0};var de={edge:Ye.key,attributes:Ye.attributes,source:Ye.source.key,target:Ye.target.key,sourceAttributes:Ye.source.attributes,targetAttributes:Ye.target.attributes,undirected:Ye.undirected};return Ye=Ye.next,{done:!1,value:de}}):gt.of({edge:Ye.key,attributes:Ye.attributes,source:Ye.source.key,target:Ye.target.key,sourceAttributes:Ye.source.attributes,targetAttributes:Ye.target.attributes,undirected:Ye.undirected})}function ua(Ge,it){if(0===Ge.size)return[];if("mixed"===it||it===Ge.type)return"function"==typeof Array.from?Array.from(Ge._edges.keys()):xn(Ge._edges.keys(),Ge._edges.size);for(var Ye,de,$e=new Array("undirected"===it?Ge.undirectedSize:Ge.directedSize),_t="undirected"===it,zt=Ge._edges.values(),In=0;!0!==(Ye=zt.next()).done;)(de=Ye.value).undirected===_t&&($e[In++]=de.key);return $e}function tr(Ge,it,Ye,de){if(0!==it.size)for(var Se,$e,_t="mixed"!==Ye&&Ye!==it.type,zt="undirected"===Ye,In=!1,yi=it._edges.values();!0!==(Se=yi.next()).done;)if($e=Se.value,!_t||$e.undirected===zt){var hi=$e.key,ur=$e.source,or=$e.target;if(In=de(hi,$e.attributes,ur.key,or.key,ur.attributes,or.attributes,$e.undirected),Ge&&In)return hi}}function el(Ge,it){if(0===Ge.size)return gt.empty();var Ye="mixed"!==it&&it!==Ge.type,de="undirected"===it,Se=Ge._edges.values();return new gt(function(){for(var $e,_t;;){if(($e=Se.next()).done)return $e;if(_t=$e.value,!Ye||_t.undirected===de)break}return{value:{edge:_t.key,attributes:_t.attributes,source:_t.source.key,target:_t.target.key,sourceAttributes:_t.source.attributes,targetAttributes:_t.target.attributes,undirected:_t.undirected},done:!1}})}function jl(Ge,it,Ye,de,Se,$e){var _t,zt=it?ri:vn;if("undirected"!==Ye&&("out"!==de&&(_t=zt(Ge,Se.in,$e),Ge&&_t)||"in"!==de&&(_t=zt(Ge,Se.out,$e,de?void 0:Se.key),Ge&&_t))||"directed"!==Ye&&(_t=zt(Ge,Se.undirected,$e),Ge&&_t))return _t}function $l(Ge,it,Ye,de){var Se=[];return jl(!1,Ge,it,Ye,de,function($e){Se.push($e)}),Se}function Hf(Ge,it,Ye){var de=gt.empty();return"undirected"!==Ge&&("out"!==it&&void 0!==Ye.in&&(de=De(de,Fi(Ye.in))),"in"!==it&&void 0!==Ye.out&&(de=De(de,Fi(Ye.out,it?void 0:Ye.key)))),"directed"!==Ge&&void 0!==Ye.undirected&&(de=De(de,Fi(Ye.undirected))),de}function Gf(Ge,it,Ye,de,Se,$e,_t){var zt,In=Ye?so:Hs;if("undirected"!==it&&(void 0!==Se.in&&"out"!==de&&(zt=In(Ge,Se.in,$e,_t),Ge&&zt)||void 0!==Se.out&&"in"!==de&&(de||Se.key!==$e)&&(zt=In(Ge,Se.out,$e,_t),Ge&&zt))||"directed"!==it&&void 0!==Se.undirected&&(zt=In(Ge,Se.undirected,$e,_t),Ge&&zt))return zt}function td(Ge,it,Ye,de,Se){var $e=[];return Gf(!1,Ge,it,Ye,de,Se,function(_t){$e.push(_t)}),$e}function lc(Ge,it,Ye,de){var Se=gt.empty();return"undirected"!==Ge&&(void 0!==Ye.in&&"out"!==it&&de in Ye.in&&(Se=De(Se,Cs(Ye.in,de))),void 0!==Ye.out&&"in"!==it&&de in Ye.out&&(it||Ye.key!==de)&&(Se=De(Se,Cs(Ye.out,de)))),"directed"!==Ge&&void 0!==Ye.undirected&&de in Ye.undirected&&(Se=De(Se,Cs(Ye.undirected,de))),Se}var Id=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function Lu(){this.A=null,this.B=null}function $a(Ge,it,Ye,de,Se){for(var $e in de){var _t=de[$e],zt=_t.source,yi=zt===Ye?_t.target:zt;if(!it||!it.has(yi.key)){var ti=Se(yi.key,yi.attributes);if(Ge&&ti)return yi.key}}}function Lh(Ge,it,Ye,de,Se){if("mixed"!==it){if("undirected"===it)return $a(Ge,null,de,de.undirected,Se);if("string"==typeof Ye)return $a(Ge,null,de,de[Ye],Se)}var $e,_t=new Lu;if("undirected"!==it){if("out"!==Ye){if($e=$a(Ge,null,de,de.in,Se),Ge&&$e)return $e;_t.wrap(de.in)}if("in"!==Ye){if($e=$a(Ge,_t,de,de.out,Se),Ge&&$e)return $e;_t.wrap(de.out)}}if("directed"!==it&&($e=$a(Ge,_t,de,de.undirected,Se),Ge&&$e))return $e}function au(Ge,it,Ye){var de=Object.keys(Ye),Se=de.length,$e=0;return new gt(function(){var _t=null;do{if($e>=Se)return Ge&&Ge.wrap(Ye),{done:!0};var zt=Ye[de[$e++]],In=zt.source;_t=In===it?zt.target:In,Ge&&Ge.has(_t.key)&&(_t=null)}while(null===_t);return{done:!1,value:{neighbor:_t.key,attributes:_t.attributes}}})}function Pu(Ge,it,Ye,de,Se){for(var $e,_t,zt,In,yi,ti,hi,pr=de._nodes.values(),ur=de.type;!0!==($e=pr.next()).done;){var or=!1;if(_t=$e.value,"undirected"!==ur)for(zt in In=_t.out){yi=In[zt];do{if(or=!0,hi=Se(_t.key,(ti=yi.target).key,_t.attributes,ti.attributes,yi.key,yi.attributes,yi.undirected),Ge&&hi)return yi;yi=yi.next}while(yi)}if("directed"!==ur)for(zt in In=_t.undirected)if(!(it&&_t.key>zt)){yi=In[zt];do{if((ti=yi.target).key!==zt&&(ti=yi.source),or=!0,hi=Se(_t.key,ti.key,_t.attributes,ti.attributes,yi.key,yi.attributes,yi.undirected),Ge&&hi)return yi;yi=yi.next}while(yi)}if(Ye&&!or&&(hi=Se(_t.key,null,_t.attributes,null,null,null,null),Ge&&hi))return null}}function th(Ge){if(!J(Ge))throw new yn('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in Ge))throw new yn("Graph.import: serialized node is missing its key.");if("attributes"in Ge&&(!J(Ge.attributes)||null===Ge.attributes))throw new yn("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function df(Ge){if(!J(Ge))throw new yn('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in Ge))throw new yn("Graph.import: serialized edge is missing its source.");if(!("target"in Ge))throw new yn("Graph.import: serialized edge is missing its target.");if("attributes"in Ge&&(!J(Ge.attributes)||null===Ge.attributes))throw new yn("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in Ge&&"boolean"!=typeof Ge.undirected)throw new yn("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}Lu.prototype.wrap=function(Ge){null===this.A?this.A=Ge:null===this.B&&(this.B=Ge)},Lu.prototype.has=function(Ge){return null!==this.A&&Ge in this.A||null!==this.B&&Ge in this.B};var nh,hl=(nh=255&Math.floor(256*Math.random()),function(){return nh++}),hf=new Set(["directed","undirected","mixed"]),nd=new Set(["domain","_events","_eventsCount","_maxListeners"]),ff={allowSelfLoops:!0,multi:!1,type:"mixed"};function Ph(Ge,it,Ye){var de=new Ge.NodeDataClass(it,Ye);return Ge._nodes.set(it,de),Ge.emit("nodeAdded",{key:it,attributes:Ye}),de}function wc(Ge,it,Ye,de,Se,$e,_t,zt){if(!de&&"undirected"===Ge.type)throw new be("Graph.".concat(it,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(de&&"directed"===Ge.type)throw new be("Graph.".concat(it,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if(zt&&!J(zt))throw new yn("Graph.".concat(it,': invalid attributes. Expecting an object but got "').concat(zt,'"'));if($e=""+$e,_t=""+_t,zt=zt||{},!Ge.allowSelfLoops&&$e===_t)throw new be("Graph.".concat(it,': source & target are the same ("').concat($e,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var In=Ge._nodes.get($e),yi=Ge._nodes.get(_t);if(!In)throw new je("Graph.".concat(it,': source node "').concat($e,'" not found.'));if(!yi)throw new je("Graph.".concat(it,': target node "').concat(_t,'" not found.'));var ti={key:null,undirected:de,source:$e,target:_t,attributes:zt};if(Ye)Se=Ge._edgeKeyGenerator();else if(Ge._edges.has(Se=""+Se))throw new be("Graph.".concat(it,': the "').concat(Se,'" edge already exists in the graph.'));if(!Ge.multi&&(de?void 0!==In.undirected[_t]:void 0!==In.out[_t]))throw new be("Graph.".concat(it,': an edge linking "').concat($e,'" to "').concat(_t,"\" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option."));var hi=new $i(de,Se,In,yi,zt);Ge._edges.set(Se,hi);var pr=$e===_t;return de?(In.undirectedDegree++,yi.undirectedDegree++,pr&&Ge._undirectedSelfLoopCount++):(In.outDegree++,yi.inDegree++,pr&&Ge._directedSelfLoopCount++),Ge.multi?hi.attachMulti():hi.attach(),de?Ge._undirectedSize++:Ge._directedSize++,ti.key=Se,Ge.emit("edgeAdded",ti),Se}function Tg(Ge,it,Ye,de,Se,$e,_t,zt,In){if(!de&&"undirected"===Ge.type)throw new be("Graph.".concat(it,": you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead."));if(de&&"directed"===Ge.type)throw new be("Graph.".concat(it,": you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead."));if(zt)if(In){if("function"!=typeof zt)throw new yn("Graph.".concat(it,': invalid updater function. Expecting a function but got "').concat(zt,'"'))}else if(!J(zt))throw new yn("Graph.".concat(it,': invalid attributes. Expecting an object but got "').concat(zt,'"'));var yi;if($e=""+$e,_t=""+_t,In&&(yi=zt,zt=void 0),!Ge.allowSelfLoops&&$e===_t)throw new be("Graph.".concat(it,': source & target are the same ("').concat($e,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var ti,hi,pr=Ge._nodes.get($e),ur=Ge._nodes.get(_t);if(!Ye&&(ti=Ge._edges.get(Se))){if(!(ti.source.key===$e&&ti.target.key===_t||de&&ti.source.key===_t&&ti.target.key===$e))throw new be("Graph.".concat(it,': inconsistency detected when attempting to merge the "').concat(Se,'" edge with "').concat($e,'" source & "').concat(_t,'" target vs. ("').concat(ti.source.key,'", "').concat(ti.target.key,'").'));hi=ti}if(hi||Ge.multi||!pr||(hi=de?pr.undirected[_t]:pr.out[_t]),hi){var or=[hi.key,!1,!1,!1];return(In?yi:zt)?(In?(hi.attributes=yi(hi.attributes),Ge.emit("edgeAttributesUpdated",{type:"replace",key:hi.key,attributes:hi.attributes})):(O(hi.attributes,zt),Ge.emit("edgeAttributesUpdated",{type:"merge",key:hi.key,attributes:hi.attributes,data:zt})),or):or}zt=zt||{},In&&yi&&(zt=yi(zt));var xo={key:null,undirected:de,source:$e,target:_t,attributes:zt};if(Ye)Se=Ge._edgeKeyGenerator();else if(Ge._edges.has(Se=""+Se))throw new be("Graph.".concat(it,': the "').concat(Se,'" edge already exists in the graph.'));var wo=!1,cs=!1;pr||(pr=Ph(Ge,$e,{}),wo=!0,$e===_t&&(ur=pr,cs=!0)),ur||(ur=Ph(Ge,_t,{}),cs=!0),ti=new $i(de,Se,pr,ur,zt),Ge._edges.set(Se,ti);var Sa=$e===_t;return de?(pr.undirectedDegree++,ur.undirectedDegree++,Sa&&Ge._undirectedSelfLoopCount++):(pr.outDegree++,ur.inDegree++,Sa&&Ge._directedSelfLoopCount++),Ge.multi?ti.attachMulti():ti.attach(),de?Ge._undirectedSize++:Ge._directedSize++,xo.key=Se,Ge.emit("edgeAdded",xo),[Se,!0,wo,cs]}function Ed(Ge,it){Ge._edges.delete(it.key);var Ye=it.source,de=it.target,Se=it.attributes,$e=it.undirected,_t=Ye===de;$e?(Ye.undirectedDegree--,de.undirectedDegree--,_t&&Ge._undirectedSelfLoopCount--):(Ye.outDegree--,de.inDegree--,_t&&Ge._directedSelfLoopCount--),Ge.multi?it.detachMulti():it.detach(),$e?Ge._undirectedSize--:Ge._directedSize--,Ge.emit("edgeDropped",{key:it.key,attributes:Se,source:Ye.key,target:de.key,undirected:$e})}var Ge,to=function(Ge){function it(de){var Se;if(Se=Ge.call(this)||this,"boolean"!=typeof(de=O({},ff,de)).multi)throw new yn("Graph.constructor: invalid 'multi' option. Expecting a boolean but got \"".concat(de.multi,'".'));if(!hf.has(de.type))throw new yn('Graph.constructor: invalid \'type\' option. Should be one of "mixed", "directed" or "undirected" but got "'.concat(de.type,'".'));if("boolean"!=typeof de.allowSelfLoops)throw new yn("Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got \"".concat(de.allowSelfLoops,'".'));var $e="mixed"===de.type?Dt:"directed"===de.type?Rt:ci;se(P(Se),"NodeDataClass",$e);var _t="geid_"+hl()+"_",zt=0;return se(P(Se),"_attributes",{}),se(P(Se),"_nodes",new Map),se(P(Se),"_edges",new Map),se(P(Se),"_directedSize",0),se(P(Se),"_undirectedSize",0),se(P(Se),"_directedSelfLoopCount",0),se(P(Se),"_undirectedSelfLoopCount",0),se(P(Se),"_edgeKeyGenerator",function(){var In;do{In=_t+zt++}while(Se._edges.has(In));return In}),se(P(Se),"_options",de),nd.forEach(function(In){return se(P(Se),In,Se[In])}),Q(P(Se),"order",function(){return Se._nodes.size}),Q(P(Se),"size",function(){return Se._edges.size}),Q(P(Se),"directedSize",function(){return Se._directedSize}),Q(P(Se),"undirectedSize",function(){return Se._undirectedSize}),Q(P(Se),"selfLoopCount",function(){return Se._directedSelfLoopCount+Se._undirectedSelfLoopCount}),Q(P(Se),"directedSelfLoopCount",function(){return Se._directedSelfLoopCount}),Q(P(Se),"undirectedSelfLoopCount",function(){return Se._undirectedSelfLoopCount}),Q(P(Se),"multi",Se._options.multi),Q(P(Se),"type",Se._options.type),Q(P(Se),"allowSelfLoops",Se._options.allowSelfLoops),Q(P(Se),"implementation",function(){return"graphology"}),Se}V(it,Ge);var Ye=it.prototype;return Ye._resetInstanceCounters=function(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0},Ye.hasNode=function(de){return this._nodes.has(""+de)},Ye.hasDirectedEdge=function(de,Se){if("undirected"===this.type)return!1;if(1===arguments.length){var _t=this._edges.get(""+de);return!!_t&&!_t.undirected}if(2===arguments.length){Se=""+Se;var zt=this._nodes.get(de=""+de);if(!zt)return!1;var In=zt.out[Se];return!(!In||this.multi&&!In.size)}throw new yn("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},Ye.hasUndirectedEdge=function(de,Se){if("directed"===this.type)return!1;if(1===arguments.length){var _t=this._edges.get(""+de);return!!_t&&_t.undirected}if(2===arguments.length){Se=""+Se;var zt=this._nodes.get(de=""+de);if(!zt)return!1;var In=zt.undirected[Se];return!(!In||this.multi&&!In.size)}throw new yn("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},Ye.hasEdge=function(de,Se){if(1===arguments.length)return this._edges.has(""+de);if(2===arguments.length){Se=""+Se;var _t=this._nodes.get(de=""+de);if(!_t)return!1;var zt=void 0!==_t.out&&_t.out[Se];return zt||(zt=void 0!==_t.undirected&&_t.undirected[Se]),!(!zt||this.multi&&!zt.size)}throw new yn("Graph.hasEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},Ye.directedEdge=function(de,Se){if("undirected"!==this.type){if(de=""+de,Se=""+Se,this.multi)throw new be("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");var $e=this._nodes.get(de);if(!$e)throw new je('Graph.directedEdge: could not find the "'.concat(de,'" source node in the graph.'));if(!this._nodes.has(Se))throw new je('Graph.directedEdge: could not find the "'.concat(Se,'" target node in the graph.'));var _t=$e.out&&$e.out[Se]||void 0;return _t?_t.key:void 0}},Ye.undirectedEdge=function(de,Se){if("directed"!==this.type){if(de=""+de,Se=""+Se,this.multi)throw new be("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");var $e=this._nodes.get(de);if(!$e)throw new je('Graph.undirectedEdge: could not find the "'.concat(de,'" source node in the graph.'));if(!this._nodes.has(Se))throw new je('Graph.undirectedEdge: could not find the "'.concat(Se,'" target node in the graph.'));var _t=$e.undirected&&$e.undirected[Se]||void 0;return _t?_t.key:void 0}},Ye.edge=function(de,Se){if(this.multi)throw new be("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");Se=""+Se;var $e=this._nodes.get(de=""+de);if(!$e)throw new je('Graph.edge: could not find the "'.concat(de,'" source node in the graph.'));if(!this._nodes.has(Se))throw new je('Graph.edge: could not find the "'.concat(Se,'" target node in the graph.'));var _t=$e.out&&$e.out[Se]||$e.undirected&&$e.undirected[Se]||void 0;if(_t)return _t.key},Ye.areDirectedNeighbors=function(de,Se){Se=""+Se;var $e=this._nodes.get(de=""+de);if(!$e)throw new je('Graph.areDirectedNeighbors: could not find the "'.concat(de,'" node in the graph.'));return"undirected"!==this.type&&(Se in $e.in||Se in $e.out)},Ye.areOutNeighbors=function(de,Se){Se=""+Se;var $e=this._nodes.get(de=""+de);if(!$e)throw new je('Graph.areOutNeighbors: could not find the "'.concat(de,'" node in the graph.'));return"undirected"!==this.type&&Se in $e.out},Ye.areInNeighbors=function(de,Se){Se=""+Se;var $e=this._nodes.get(de=""+de);if(!$e)throw new je('Graph.areInNeighbors: could not find the "'.concat(de,'" node in the graph.'));return"undirected"!==this.type&&Se in $e.in},Ye.areUndirectedNeighbors=function(de,Se){Se=""+Se;var $e=this._nodes.get(de=""+de);if(!$e)throw new je('Graph.areUndirectedNeighbors: could not find the "'.concat(de,'" node in the graph.'));return"directed"!==this.type&&Se in $e.undirected},Ye.areNeighbors=function(de,Se){Se=""+Se;var $e=this._nodes.get(de=""+de);if(!$e)throw new je('Graph.areNeighbors: could not find the "'.concat(de,'" node in the graph.'));return"undirected"!==this.type&&(Se in $e.in||Se in $e.out)||"directed"!==this.type&&Se in $e.undirected},Ye.areInboundNeighbors=function(de,Se){Se=""+Se;var $e=this._nodes.get(de=""+de);if(!$e)throw new je('Graph.areInboundNeighbors: could not find the "'.concat(de,'" node in the graph.'));return"undirected"!==this.type&&Se in $e.in||"directed"!==this.type&&Se in $e.undirected},Ye.areOutboundNeighbors=function(de,Se){Se=""+Se;var $e=this._nodes.get(de=""+de);if(!$e)throw new je('Graph.areOutboundNeighbors: could not find the "'.concat(de,'" node in the graph.'));return"undirected"!==this.type&&Se in $e.out||"directed"!==this.type&&Se in $e.undirected},Ye.inDegree=function(de){var Se=this._nodes.get(de=""+de);if(!Se)throw new je('Graph.inDegree: could not find the "'.concat(de,'" node in the graph.'));return"undirected"===this.type?0:Se.inDegree},Ye.outDegree=function(de){var Se=this._nodes.get(de=""+de);if(!Se)throw new je('Graph.outDegree: could not find the "'.concat(de,'" node in the graph.'));return"undirected"===this.type?0:Se.outDegree},Ye.directedDegree=function(de){var Se=this._nodes.get(de=""+de);if(!Se)throw new je('Graph.directedDegree: could not find the "'.concat(de,'" node in the graph.'));return"undirected"===this.type?0:Se.inDegree+Se.outDegree},Ye.undirectedDegree=function(de){var Se=this._nodes.get(de=""+de);if(!Se)throw new je('Graph.undirectedDegree: could not find the "'.concat(de,'" node in the graph.'));return"directed"===this.type?0:Se.undirectedDegree},Ye.inboundDegree=function(de){var Se=this._nodes.get(de=""+de);if(!Se)throw new je('Graph.inboundDegree: could not find the "'.concat(de,'" node in the graph.'));var $e=0;return"directed"!==this.type&&($e+=Se.undirectedDegree),"undirected"!==this.type&&($e+=Se.inDegree),$e},Ye.outboundDegree=function(de){var Se=this._nodes.get(de=""+de);if(!Se)throw new je('Graph.outboundDegree: could not find the "'.concat(de,'" node in the graph.'));var $e=0;return"directed"!==this.type&&($e+=Se.undirectedDegree),"undirected"!==this.type&&($e+=Se.outDegree),$e},Ye.degree=function(de){var Se=this._nodes.get(de=""+de);if(!Se)throw new je('Graph.degree: could not find the "'.concat(de,'" node in the graph.'));var $e=0;return"directed"!==this.type&&($e+=Se.undirectedDegree),"undirected"!==this.type&&($e+=Se.inDegree+Se.outDegree),$e},Ye.inDegreeWithoutSelfLoops=function(de){var Se=this._nodes.get(de=""+de);if(!Se)throw new je('Graph.inDegreeWithoutSelfLoops: could not find the "'.concat(de,'" node in the graph.'));if("undirected"===this.type)return 0;var $e=Se.in[de];return Se.inDegree-($e?this.multi?$e.size:1:0)},Ye.outDegreeWithoutSelfLoops=function(de){var Se=this._nodes.get(de=""+de);if(!Se)throw new je('Graph.outDegreeWithoutSelfLoops: could not find the "'.concat(de,'" node in the graph.'));if("undirected"===this.type)return 0;var $e=Se.out[de];return Se.outDegree-($e?this.multi?$e.size:1:0)},Ye.directedDegreeWithoutSelfLoops=function(de){var Se=this._nodes.get(de=""+de);if(!Se)throw new je('Graph.directedDegreeWithoutSelfLoops: could not find the "'.concat(de,'" node in the graph.'));if("undirected"===this.type)return 0;var $e=Se.out[de];return Se.inDegree+Se.outDegree-2*($e?this.multi?$e.size:1:0)},Ye.undirectedDegreeWithoutSelfLoops=function(de){var Se=this._nodes.get(de=""+de);if(!Se)throw new je('Graph.undirectedDegreeWithoutSelfLoops: could not find the "'.concat(de,'" node in the graph.'));if("directed"===this.type)return 0;var $e=Se.undirected[de];return Se.undirectedDegree-2*($e?this.multi?$e.size:1:0)},Ye.inboundDegreeWithoutSelfLoops=function(de){var Se,$e=this._nodes.get(de=""+de);if(!$e)throw new je('Graph.inboundDegreeWithoutSelfLoops: could not find the "'.concat(de,'" node in the graph.'));var _t=0,zt=0;return"directed"!==this.type&&(_t+=$e.undirectedDegree,zt+=2*((Se=$e.undirected[de])?this.multi?Se.size:1:0)),"undirected"!==this.type&&(_t+=$e.inDegree,zt+=(Se=$e.out[de])?this.multi?Se.size:1:0),_t-zt},Ye.outboundDegreeWithoutSelfLoops=function(de){var Se,$e=this._nodes.get(de=""+de);if(!$e)throw new je('Graph.outboundDegreeWithoutSelfLoops: could not find the "'.concat(de,'" node in the graph.'));var _t=0,zt=0;return"directed"!==this.type&&(_t+=$e.undirectedDegree,zt+=2*((Se=$e.undirected[de])?this.multi?Se.size:1:0)),"undirected"!==this.type&&(_t+=$e.outDegree,zt+=(Se=$e.in[de])?this.multi?Se.size:1:0),_t-zt},Ye.degreeWithoutSelfLoops=function(de){var Se,$e=this._nodes.get(de=""+de);if(!$e)throw new je('Graph.degreeWithoutSelfLoops: could not find the "'.concat(de,'" node in the graph.'));var _t=0,zt=0;return"directed"!==this.type&&(_t+=$e.undirectedDegree,zt+=2*((Se=$e.undirected[de])?this.multi?Se.size:1:0)),"undirected"!==this.type&&(_t+=$e.inDegree+$e.outDegree,zt+=2*((Se=$e.out[de])?this.multi?Se.size:1:0)),_t-zt},Ye.source=function(de){var Se=this._edges.get(de=""+de);if(!Se)throw new je('Graph.source: could not find the "'.concat(de,'" edge in the graph.'));return Se.source.key},Ye.target=function(de){var Se=this._edges.get(de=""+de);if(!Se)throw new je('Graph.target: could not find the "'.concat(de,'" edge in the graph.'));return Se.target.key},Ye.extremities=function(de){var Se=this._edges.get(de=""+de);if(!Se)throw new je('Graph.extremities: could not find the "'.concat(de,'" edge in the graph.'));return[Se.source.key,Se.target.key]},Ye.opposite=function(de,Se){de=""+de;var $e=this._edges.get(Se=""+Se);if(!$e)throw new je('Graph.opposite: could not find the "'.concat(Se,'" edge in the graph.'));var _t=$e.source.key,zt=$e.target.key;if(de===_t)return zt;if(de===zt)return _t;throw new je('Graph.opposite: the "'.concat(de,'" node is not attached to the "').concat(Se,'" edge (').concat(_t,", ").concat(zt,")."))},Ye.hasExtremity=function(de,Se){Se=""+Se;var $e=this._edges.get(de=""+de);if(!$e)throw new je('Graph.hasExtremity: could not find the "'.concat(de,'" edge in the graph.'));return $e.source.key===Se||$e.target.key===Se},Ye.isUndirected=function(de){var Se=this._edges.get(de=""+de);if(!Se)throw new je('Graph.isUndirected: could not find the "'.concat(de,'" edge in the graph.'));return Se.undirected},Ye.isDirected=function(de){var Se=this._edges.get(de=""+de);if(!Se)throw new je('Graph.isDirected: could not find the "'.concat(de,'" edge in the graph.'));return!Se.undirected},Ye.isSelfLoop=function(de){var Se=this._edges.get(de=""+de);if(!Se)throw new je('Graph.isSelfLoop: could not find the "'.concat(de,'" edge in the graph.'));return Se.source===Se.target},Ye.addNode=function(de,Se){return function(_t,zt,In){if(In&&!J(In))throw new yn('Graph.addNode: invalid attributes. Expecting an object but got "'.concat(In,'"'));if(In=In||{},_t._nodes.has(zt=""+zt))throw new be('Graph.addNode: the "'.concat(zt,'" node already exist in the graph.'));var yi=new _t.NodeDataClass(zt,In);return _t._nodes.set(zt,yi),_t.emit("nodeAdded",{key:zt,attributes:In}),yi}(this,de,Se).key},Ye.mergeNode=function(de,Se){if(Se&&!J(Se))throw new yn('Graph.mergeNode: invalid attributes. Expecting an object but got "'.concat(Se,'"'));Se=Se||{};var $e=this._nodes.get(de=""+de);return $e?(Se&&(O($e.attributes,Se),this.emit("nodeAttributesUpdated",{type:"merge",key:de,attributes:$e.attributes,data:Se})),[de,!1]):($e=new this.NodeDataClass(de,Se),this._nodes.set(de,$e),this.emit("nodeAdded",{key:de,attributes:Se}),[de,!0])},Ye.updateNode=function(de,Se){if(Se&&"function"!=typeof Se)throw new yn('Graph.updateNode: invalid updater function. Expecting a function but got "'.concat(Se,'"'));var $e=this._nodes.get(de=""+de);if($e)return Se&&($e.attributes=Se($e.attributes),this.emit("nodeAttributesUpdated",{type:"replace",key:de,attributes:$e.attributes})),[de,!1];var zt=Se?Se({}):{};return $e=new this.NodeDataClass(de,zt),this._nodes.set(de,$e),this.emit("nodeAdded",{key:de,attributes:zt}),[de,!0]},Ye.dropNode=function(de){var Se,$e=this._nodes.get(de=""+de);if(!$e)throw new je('Graph.dropNode: could not find the "'.concat(de,'" node in the graph.'));if("undirected"!==this.type){for(var _t in $e.out){Se=$e.out[_t];do{Ed(this,Se),Se=Se.next}while(Se)}for(var zt in $e.in){Se=$e.in[zt];do{Ed(this,Se),Se=Se.next}while(Se)}}if("directed"!==this.type)for(var In in $e.undirected){Se=$e.undirected[In];do{Ed(this,Se),Se=Se.next}while(Se)}this._nodes.delete(de),this.emit("nodeDropped",{key:de,attributes:$e.attributes})},Ye.dropEdge=function(de){var Se;if(arguments.length>1){var $e=""+arguments[0],_t=""+arguments[1];if(!(Se=q(this,$e,_t,this.type)))throw new je('Graph.dropEdge: could not find the "'.concat($e,'" -> "').concat(_t,'" edge in the graph.'))}else if(!(Se=this._edges.get(de=""+de)))throw new je('Graph.dropEdge: could not find the "'.concat(de,'" edge in the graph.'));return Ed(this,Se),this},Ye.dropDirectedEdge=function(de,Se){if(arguments.length<2)throw new be("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new be("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");var $e=q(this,de=""+de,Se=""+Se,"directed");if(!$e)throw new je('Graph.dropDirectedEdge: could not find a "'.concat(de,'" -> "').concat(Se,'" edge in the graph.'));return Ed(this,$e),this},Ye.dropUndirectedEdge=function(de,Se){if(arguments.length<2)throw new be("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new be("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");var $e=q(this,de,Se,"undirected");if(!$e)throw new je('Graph.dropUndirectedEdge: could not find a "'.concat(de,'" -> "').concat(Se,'" edge in the graph.'));return Ed(this,$e),this},Ye.clear=function(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")},Ye.clearEdges=function(){for(var de,Se=this._nodes.values();!0!==(de=Se.next()).done;)de.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")},Ye.getAttribute=function(de){return this._attributes[de]},Ye.getAttributes=function(){return this._attributes},Ye.hasAttribute=function(de){return this._attributes.hasOwnProperty(de)},Ye.setAttribute=function(de,Se){return this._attributes[de]=Se,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:de}),this},Ye.updateAttribute=function(de,Se){if("function"!=typeof Se)throw new yn("Graph.updateAttribute: updater should be a function.");return this._attributes[de]=Se(this._attributes[de]),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:de}),this},Ye.removeAttribute=function(de){return delete this._attributes[de],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:de}),this},Ye.replaceAttributes=function(de){if(!J(de))throw new yn("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=de,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this},Ye.mergeAttributes=function(de){if(!J(de))throw new yn("Graph.mergeAttributes: provided attributes are not a plain object.");return O(this._attributes,de),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:de}),this},Ye.updateAttributes=function(de){if("function"!=typeof de)throw new yn("Graph.updateAttributes: provided updater is not a function.");return this._attributes=de(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this},Ye.updateEachNodeAttributes=function(de,Se){if("function"!=typeof de)throw new yn("Graph.updateEachNodeAttributes: expecting an updater function.");if(Se&&!U(Se))throw new yn("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var $e,_t,zt=this._nodes.values();!0!==($e=zt.next()).done;)(_t=$e.value).attributes=de(_t.key,_t.attributes);this.emit("eachNodeAttributesUpdated",{hints:Se||null})},Ye.updateEachEdgeAttributes=function(de,Se){if("function"!=typeof de)throw new yn("Graph.updateEachEdgeAttributes: expecting an updater function.");if(Se&&!U(Se))throw new yn("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var $e,_t,zt,In,yi=this._edges.values();!0!==($e=yi.next()).done;)zt=(_t=$e.value).source,_t.attributes=de(_t.key,_t.attributes,zt.key,(In=_t.target).key,zt.attributes,In.attributes,_t.undirected);this.emit("eachEdgeAttributesUpdated",{hints:Se||null})},Ye.forEachAdjacencyEntry=function(de){if("function"!=typeof de)throw new yn("Graph.forEachAdjacencyEntry: expecting a callback.");Pu(!1,!1,!1,this,de)},Ye.forEachAdjacencyEntryWithOrphans=function(de){if("function"!=typeof de)throw new yn("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");Pu(!1,!1,!0,this,de)},Ye.forEachAssymetricAdjacencyEntry=function(de){if("function"!=typeof de)throw new yn("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");Pu(!1,!0,!1,this,de)},Ye.forEachAssymetricAdjacencyEntryWithOrphans=function(de){if("function"!=typeof de)throw new yn("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");Pu(!1,!0,!0,this,de)},Ye.nodes=function(){return"function"==typeof Array.from?Array.from(this._nodes.keys()):xn(this._nodes.keys(),this._nodes.size)},Ye.forEachNode=function(de){if("function"!=typeof de)throw new yn("Graph.forEachNode: expecting a callback.");for(var Se,$e,_t=this._nodes.values();!0!==(Se=_t.next()).done;)de(($e=Se.value).key,$e.attributes)},Ye.findNode=function(de){if("function"!=typeof de)throw new yn("Graph.findNode: expecting a callback.");for(var Se,$e,_t=this._nodes.values();!0!==(Se=_t.next()).done;)if(de(($e=Se.value).key,$e.attributes))return $e.key},Ye.mapNodes=function(de){if("function"!=typeof de)throw new yn("Graph.mapNode: expecting a callback.");for(var Se,$e,_t=this._nodes.values(),zt=new Array(this.order),In=0;!0!==(Se=_t.next()).done;)zt[In++]=de(($e=Se.value).key,$e.attributes);return zt},Ye.someNode=function(de){if("function"!=typeof de)throw new yn("Graph.someNode: expecting a callback.");for(var Se,$e,_t=this._nodes.values();!0!==(Se=_t.next()).done;)if(de(($e=Se.value).key,$e.attributes))return!0;return!1},Ye.everyNode=function(de){if("function"!=typeof de)throw new yn("Graph.everyNode: expecting a callback.");for(var Se,$e,_t=this._nodes.values();!0!==(Se=_t.next()).done;)if(!de(($e=Se.value).key,$e.attributes))return!1;return!0},Ye.filterNodes=function(de){if("function"!=typeof de)throw new yn("Graph.filterNodes: expecting a callback.");for(var Se,$e,_t=this._nodes.values(),zt=[];!0!==(Se=_t.next()).done;)de(($e=Se.value).key,$e.attributes)&&zt.push($e.key);return zt},Ye.reduceNodes=function(de,Se){if("function"!=typeof de)throw new yn("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new yn("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");for(var $e,_t,zt=Se,In=this._nodes.values();!0!==($e=In.next()).done;)zt=de(zt,(_t=$e.value).key,_t.attributes);return zt},Ye.nodeEntries=function(){var de=this._nodes.values();return new gt(function(){var Se=de.next();if(Se.done)return Se;var $e=Se.value;return{value:{node:$e.key,attributes:$e.attributes},done:!1}})},Ye.export=function(){var de=new Array(this._nodes.size),Se=0;this._nodes.forEach(function(_t,zt){var yi,ti;de[Se++]=(ti={key:zt},oe((yi=_t).attributes)||(ti.attributes=O({},yi.attributes)),ti)});var $e=new Array(this._edges.size);return Se=0,this._edges.forEach(function(_t,zt){var yi,ti;$e[Se++]=(ti={key:zt,source:(yi=_t).source.key,target:yi.target.key},oe(yi.attributes)||(ti.attributes=O({},yi.attributes)),yi.undirected&&(ti.undirected=!0),ti)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:de,edges:$e}},Ye.import=function(de){var Se,$e,_t,zt,In,yi=this,ti=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(te(de))return de.forEachNode(function(us,qa){ti?yi.mergeNode(us,qa):yi.addNode(us,qa)}),de.forEachEdge(function(us,qa,Ru,ds,ts,Mg,zp){ti?zp?yi.mergeUndirectedEdgeWithKey(us,Ru,ds,qa):yi.mergeDirectedEdgeWithKey(us,Ru,ds,qa):zp?yi.addUndirectedEdgeWithKey(us,Ru,ds,qa):yi.addDirectedEdgeWithKey(us,Ru,ds,qa)}),this;if(!J(de))throw new yn("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(de.attributes){if(!J(de.attributes))throw new yn("Graph.import: invalid attributes. Expecting a plain object.");ti?this.mergeAttributes(de.attributes):this.replaceAttributes(de.attributes)}if(de.nodes){if(_t=de.nodes,!Array.isArray(_t))throw new yn("Graph.import: invalid nodes. Expecting an array.");for(Se=0,$e=_t.length;Se<$e;Se++){th(zt=_t[Se]);var pr=zt.key,ur=zt.attributes;ti?this.mergeNode(pr,ur):this.addNode(pr,ur)}}if(de.edges){if(_t=de.edges,!Array.isArray(_t))throw new yn("Graph.import: invalid edges. Expecting an array.");for(Se=0,$e=_t.length;Se<$e;Se++){df(In=_t[Se]);var Gs=In.source,xo=In.target,wo=In.attributes,cs=In.undirected,Sa=void 0!==cs&&cs;"key"in In?(ti?Sa?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:Sa?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey).call(this,In.key,Gs,xo,wo):(ti?Sa?this.mergeUndirectedEdge:this.mergeDirectedEdge:Sa?this.addUndirectedEdge:this.addDirectedEdge).call(this,Gs,xo,wo)}}return this},Ye.nullCopy=function(de){var Se=new it(O({},this._options,de));return Se.replaceAttributes(O({},this.getAttributes())),Se},Ye.emptyCopy=function(de){var Se=this.nullCopy(de);return this._nodes.forEach(function($e,_t){var zt=O({},$e.attributes);$e=new Se.NodeDataClass(_t,zt),Se._nodes.set(_t,$e)}),Se},Ye.copy=function(de){if("string"==typeof(de=de||{}).type&&de.type!==this.type&&"mixed"!==de.type)throw new be('Graph.copy: cannot create an incompatible copy from "'.concat(this.type,'" type to "').concat(de.type,'" because this would mean losing information about the current graph.'));if("boolean"==typeof de.multi&&de.multi!==this.multi&&!0!==de.multi)throw new be("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if("boolean"==typeof de.allowSelfLoops&&de.allowSelfLoops!==this.allowSelfLoops&&!0!==de.allowSelfLoops)throw new be("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");for(var Se,$e,_t=this.emptyCopy(de),zt=this._edges.values();!0!==(Se=zt.next()).done;)wc(_t,"copy",!1,($e=Se.value).undirected,$e.key,$e.source.key,$e.target.key,O({},$e.attributes));return _t},Ye.toJSON=function(){return this.export()},Ye.toString=function(){return"[object Graph]"},Ye.inspect=function(){var de=this,Se={};this._nodes.forEach(function(yi,ti){Se[ti]=yi.attributes});var $e={},_t={};this._edges.forEach(function(yi,ti){var hi,pr=yi.undirected?"--":"->",ur="",or=yi.source.key,Gs=yi.target.key;yi.undirected&&or>Gs&&(hi=or,or=Gs,Gs=hi);var xo="(".concat(or,")").concat(pr,"(").concat(Gs,")");ti.startsWith("geid_")?de.multi&&(void 0===_t[xo]?_t[xo]=0:_t[xo]++,ur+="".concat(_t[xo],". ")):ur+="[".concat(ti,"]: "),$e[ur+=xo]=yi.attributes});var zt={};for(var In in this)this.hasOwnProperty(In)&&!nd.has(In)&&"function"!=typeof this[In]&&"symbol"!==Ce(In)&&(zt[In]=this[In]);return zt.attributes=this._attributes,zt.nodes=Se,zt.edges=$e,se(zt,"constructor",this.constructor),zt},it}(xe.exports.EventEmitter);typeof Symbol<"u"&&(to.prototype[Symbol.for("nodejs.util.inspect.custom")]=to.prototype.inspect),[{name:function(Ge){return"".concat(Ge,"Edge")},generateKey:!0},{name:function(Ge){return"".concat(Ge,"DirectedEdge")},generateKey:!0,type:"directed"},{name:function(Ge){return"".concat(Ge,"UndirectedEdge")},generateKey:!0,type:"undirected"},{name:function(Ge){return"".concat(Ge,"EdgeWithKey")}},{name:function(Ge){return"".concat(Ge,"DirectedEdgeWithKey")},type:"directed"},{name:function(Ge){return"".concat(Ge,"UndirectedEdgeWithKey")},type:"undirected"}].forEach(function(Ge){["add","merge","update"].forEach(function(it){var Ye=Ge.name(it),de="add"===it?wc:Tg;to.prototype[Ye]=Ge.generateKey?function(Se,$e,_t){return de(this,Ye,!0,"undirected"===(Ge.type||this.type),null,Se,$e,_t,"update"===it)}:function(Se,$e,_t,zt){return de(this,Ye,!1,"undirected"===(Ge.type||this.type),Se,$e,_t,zt,"update"===it)}})}),Ge=to,Pt.forEach(function(it){var Ye=it.name,de=it.attacher;de(Ge,Ye("Node"),0),de(Ge,Ye("Source"),1),de(Ge,Ye("Target"),2),de(Ge,Ye("Opposite"),3)}),function(Ge){un.forEach(function(it){var Ye=it.name,de=it.attacher;de(Ge,Ye("Edge"),"mixed"),de(Ge,Ye("DirectedEdge"),"directed"),de(Ge,Ye("UndirectedEdge"),"undirected")})}(to),function(Ge){Ot.forEach(function(it){var de,Se,$e,_t;$e=(de=it).type,_t=de.direction,Ge.prototype[Se=de.name]=function(zt,In){if("mixed"!==$e&&"mixed"!==this.type&&$e!==this.type)return[];if(!arguments.length)return ua(this,$e);if(1===arguments.length){var yi=this._nodes.get(zt=""+zt);if(void 0===yi)throw new je("Graph.".concat(Se,': could not find the "').concat(zt,'" node in the graph.'));return $l(this.multi,"mixed"===$e?this.type:$e,_t,yi)}if(2===arguments.length){In=""+In;var ti=this._nodes.get(zt=""+zt);if(!ti)throw new je("Graph.".concat(Se,':  could not find the "').concat(zt,'" source node in the graph.'));if(!this._nodes.has(In))throw new je("Graph.".concat(Se,':  could not find the "').concat(In,'" target node in the graph.'));return td($e,this.multi,_t,ti,In)}throw new yn("Graph.".concat(Se,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))},function(Ye,de){var Se=de.name,$e=de.type,_t=de.direction,zt="forEach"+Se[0].toUpperCase()+Se.slice(1,-1);Ye.prototype[zt]=function(hi,pr,ur){if("mixed"===$e||"mixed"===this.type||$e===this.type){if(1===arguments.length)return tr(!1,this,$e,ur=hi);if(2===arguments.length){ur=pr;var or=this._nodes.get(hi=""+hi);if(void 0===or)throw new je("Graph.".concat(zt,': could not find the "').concat(hi,'" node in the graph.'));return jl(!1,this.multi,"mixed"===$e?this.type:$e,_t,or,ur)}if(3===arguments.length){pr=""+pr;var Gs=this._nodes.get(hi=""+hi);if(!Gs)throw new je("Graph.".concat(zt,':  could not find the "').concat(hi,'" source node in the graph.'));if(!this._nodes.has(pr))throw new je("Graph.".concat(zt,':  could not find the "').concat(pr,'" target node in the graph.'));return Gf(!1,$e,this.multi,_t,Gs,pr,ur)}throw new yn("Graph.".concat(zt,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}};var In="map"+Se[0].toUpperCase()+Se.slice(1);Ye.prototype[In]=function(){var hi,pr=Array.prototype.slice.call(arguments),ur=pr.pop();if(0===pr.length){var or=0;"directed"!==$e&&(or+=this.undirectedSize),"undirected"!==$e&&(or+=this.directedSize),hi=new Array(or);var Gs=0;pr.push(function(xo,wo,cs,Sa,us,qa,Ru){hi[Gs++]=ur(xo,wo,cs,Sa,us,qa,Ru)})}else hi=[],pr.push(function(xo,wo,cs,Sa,us,qa,Ru){hi.push(ur(xo,wo,cs,Sa,us,qa,Ru))});return this[zt].apply(this,pr),hi};var yi="filter"+Se[0].toUpperCase()+Se.slice(1);Ye.prototype[yi]=function(){var hi=Array.prototype.slice.call(arguments),pr=hi.pop(),ur=[];return hi.push(function(or,Gs,xo,wo,cs,Sa,us){pr(or,Gs,xo,wo,cs,Sa,us)&&ur.push(or)}),this[zt].apply(this,hi),ur};var ti="reduce"+Se[0].toUpperCase()+Se.slice(1);Ye.prototype[ti]=function(){var hi,pr,ur=Array.prototype.slice.call(arguments);if(ur.length<2||ur.length>4)throw new yn("Graph.".concat(ti,": invalid number of arguments (expecting 2, 3 or 4 and got ").concat(ur.length,")."));if("function"==typeof ur[ur.length-1]&&"function"!=typeof ur[ur.length-2])throw new yn("Graph.".concat(ti,": missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array."));2===ur.length?(hi=ur[0],pr=ur[1],ur=[]):3===ur.length?(hi=ur[1],pr=ur[2],ur=[ur[0]]):4===ur.length&&(hi=ur[2],pr=ur[3],ur=[ur[0],ur[1]]);var or=pr;return ur.push(function(Gs,xo,wo,cs,Sa,us,qa){or=hi(or,Gs,xo,wo,cs,Sa,us,qa)}),this[zt].apply(this,ur),or}}(Ge,it),function(Ye,de){var Se=de.name,$e=de.type,_t=de.direction,zt="find"+Se[0].toUpperCase()+Se.slice(1,-1);Ye.prototype[zt]=function(ti,hi,pr){if("mixed"!==$e&&"mixed"!==this.type&&$e!==this.type)return!1;if(1===arguments.length)return tr(!0,this,$e,pr=ti);if(2===arguments.length){pr=hi;var ur=this._nodes.get(ti=""+ti);if(void 0===ur)throw new je("Graph.".concat(zt,': could not find the "').concat(ti,'" node in the graph.'));return jl(!0,this.multi,"mixed"===$e?this.type:$e,_t,ur,pr)}if(3===arguments.length){hi=""+hi;var or=this._nodes.get(ti=""+ti);if(!or)throw new je("Graph.".concat(zt,':  could not find the "').concat(ti,'" source node in the graph.'));if(!this._nodes.has(hi))throw new je("Graph.".concat(zt,':  could not find the "').concat(hi,'" target node in the graph.'));return Gf(!0,$e,this.multi,_t,or,hi,pr)}throw new yn("Graph.".concat(zt,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))};var In="some"+Se[0].toUpperCase()+Se.slice(1,-1);Ye.prototype[In]=function(){var ti=Array.prototype.slice.call(arguments),hi=ti.pop();return ti.push(function(pr,ur,or,Gs,xo,wo,cs){return hi(pr,ur,or,Gs,xo,wo,cs)}),!!this[zt].apply(this,ti)};var yi="every"+Se[0].toUpperCase()+Se.slice(1,-1);Ye.prototype[yi]=function(){var ti=Array.prototype.slice.call(arguments),hi=ti.pop();return ti.push(function(pr,ur,or,Gs,xo,wo,cs){return!hi(pr,ur,or,Gs,xo,wo,cs)}),!this[zt].apply(this,ti)}}(Ge,it),function(Ye,de){var $e=de.type,_t=de.direction,zt=de.name.slice(0,-1)+"Entries";Ye.prototype[zt]=function(In,yi){if("mixed"!==$e&&"mixed"!==this.type&&$e!==this.type)return gt.empty();if(!arguments.length)return el(this,$e);if(1===arguments.length){var ti=this._nodes.get(In=""+In);if(!ti)throw new je("Graph.".concat(zt,': could not find the "').concat(In,'" node in the graph.'));return Hf($e,_t,ti)}if(2===arguments.length){yi=""+yi;var hi=this._nodes.get(In=""+In);if(!hi)throw new je("Graph.".concat(zt,':  could not find the "').concat(In,'" source node in the graph.'));if(!this._nodes.has(yi))throw new je("Graph.".concat(zt,':  could not find the "').concat(yi,'" target node in the graph.'));return lc($e,_t,hi,yi)}throw new yn("Graph.".concat(zt,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))}}(Ge,it)})}(to),function(Ge){Id.forEach(function(it){var Ye,de,Se,$e,_t,zt,In;(function Ia(Ge,it){var Ye=it.name,de=it.type,Se=it.direction;Ge.prototype[Ye]=function($e){if("mixed"!==de&&"mixed"!==this.type&&de!==this.type)return[];var _t=this._nodes.get($e=""+$e);if(void 0===_t)throw new je("Graph.".concat(Ye,': could not find the "').concat($e,'" node in the graph.'));return function(zt,In,yi){if("mixed"!==zt){if("undirected"===zt)return Object.keys(yi.undirected);if("string"==typeof In)return Object.keys(yi[In])}var ti=[];return Lh(!1,zt,In,yi,function(hi){ti.push(hi)}),ti}("mixed"===de?this.type:de,Se,_t)}})(Ge,it),function(Ye,de){var Se=de.name,$e=de.type,_t=de.direction,zt="forEach"+Se[0].toUpperCase()+Se.slice(1,-1);Ye.prototype[zt]=function(hi,pr){if("mixed"===$e||"mixed"===this.type||$e===this.type){var ur=this._nodes.get(hi=""+hi);if(void 0===ur)throw new je("Graph.".concat(zt,': could not find the "').concat(hi,'" node in the graph.'));Lh(!1,"mixed"===$e?this.type:$e,_t,ur,pr)}};var In="map"+Se[0].toUpperCase()+Se.slice(1);Ye.prototype[In]=function(hi,pr){var ur=[];return this[zt](hi,function(or,Gs){ur.push(pr(or,Gs))}),ur};var yi="filter"+Se[0].toUpperCase()+Se.slice(1);Ye.prototype[yi]=function(hi,pr){var ur=[];return this[zt](hi,function(or,Gs){pr(or,Gs)&&ur.push(or)}),ur};var ti="reduce"+Se[0].toUpperCase()+Se.slice(1);Ye.prototype[ti]=function(hi,pr,ur){if(arguments.length<3)throw new yn("Graph.".concat(ti,": missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array."));var or=ur;return this[zt](hi,function(Gs,xo){or=pr(or,Gs,xo)}),or}}(Ge,it),Ye=Ge,$e=(de=it).type,_t=de.direction,zt=(Se=de.name)[0].toUpperCase()+Se.slice(1,-1),Ye.prototype[In="find"+zt]=function(hi,pr){if("mixed"===$e||"mixed"===this.type||$e===this.type){var ur=this._nodes.get(hi=""+hi);if(void 0===ur)throw new je("Graph.".concat(In,': could not find the "').concat(hi,'" node in the graph.'));return Lh(!0,"mixed"===$e?this.type:$e,_t,ur,pr)}},Ye.prototype["some"+zt]=function(hi,pr){return!!this[In](hi,pr)},Ye.prototype["every"+zt]=function(hi,pr){return!this[In](hi,function(ur,or){return!pr(ur,or)})},function Sd(Ge,it){var de=it.type,Se=it.direction,$e=it.name.slice(0,-1)+"Entries";Ge.prototype[$e]=function(_t){if("mixed"!==de&&"mixed"!==this.type&&de!==this.type)return gt.empty();var zt=this._nodes.get(_t=""+_t);if(void 0===zt)throw new je("Graph.".concat($e,': could not find the "').concat(_t,'" node in the graph.'));return function(In,yi,ti){if("mixed"!==In){if("undirected"===In)return au(null,ti,ti.undirected);if("string"==typeof yi)return au(null,ti,ti[yi])}var hi=gt.empty(),pr=new Lu;return"undirected"!==In&&("out"!==yi&&(hi=De(hi,au(pr,ti,ti.in))),"in"!==yi&&(hi=De(hi,au(pr,ti,ti.out)))),"directed"!==In&&(hi=De(hi,au(pr,ti,ti.undirected))),hi}("mixed"===de?this.type:de,Se,zt)}}(Ge,it)})}(to);var pf=function(Ge){function it(Ye){var de=O({type:"directed"},Ye);if("multi"in de&&!1!==de.multi)throw new yn("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("directed"!==de.type)throw new yn('DirectedGraph.from: inconsistent "'+de.type+'" type in given options!');return Ge.call(this,de)||this}return V(it,Ge),it}(to),fl=function(Ge){function it(Ye){var de=O({type:"undirected"},Ye);if("multi"in de&&!1!==de.multi)throw new yn("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("undirected"!==de.type)throw new yn('UndirectedGraph.from: inconsistent "'+de.type+'" type in given options!');return Ge.call(this,de)||this}return V(it,Ge),it}(to),Ac=function(Ge){function it(Ye){var de=O({multi:!0},Ye);if("multi"in de&&!0!==de.multi)throw new yn("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");return Ge.call(this,de)||this}return V(it,Ge),it}(to),tl=function(Ge){function it(Ye){var de=O({type:"directed",multi:!0},Ye);if("multi"in de&&!0!==de.multi)throw new yn("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("directed"!==de.type)throw new yn('MultiDirectedGraph.from: inconsistent "'+de.type+'" type in given options!');return Ge.call(this,de)||this}return V(it,Ge),it}(to),Wf=function(Ge){function it(Ye){var de=O({type:"undirected",multi:!0},Ye);if("multi"in de&&!0!==de.multi)throw new yn("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("undirected"!==de.type)throw new yn('MultiUndirectedGraph.from: inconsistent "'+de.type+'" type in given options!');return Ge.call(this,de)||this}return V(it,Ge),it}(to);function ih(Ge){Ge.from=function(it,Ye){var de=O({},it.options,Ye),Se=new Ge(de);return Se.import(it),Se}}return ih(to),ih(pf),ih(fl),ih(Ac),ih(tl),ih(Wf),to.Graph=to,to.DirectedGraph=pf,to.UndirectedGraph=fl,to.MultiGraph=Ac,to.MultiDirectedGraph=tl,to.MultiUndirectedGraph=Wf,to.InvalidArgumentsGraphError=yn,to.NotFoundGraphError=je,to.UsageGraphError=be,to}()},5203:(Be,Ce,V)=>{Be.exports=V(8732)},8732:function(Be,Ce){var V,Y,D;(function(){var H,B,W,P,O,q,te,J,oe,se,Q,U,ae,xe,Oe;W=Math.floor,se=Math.min,B=function(re,ue){return re<ue?-1:re>ue?1:0},oe=function(re,ue,z,$,ne){var ge;if(null==z&&(z=0),null==ne&&(ne=B),z<0)throw new Error("lo must be non-negative");for(null==$&&($=re.length);z<$;)ne(ue,re[ge=W((z+$)/2)])<0?$=ge:z=ge+1;return[].splice.apply(re,[z,z-z].concat(ue)),ue},q=function(re,ue,z){return null==z&&(z=B),re.push(ue),xe(re,0,re.length-1,z)},O=function(re,ue){var z,$;return null==ue&&(ue=B),z=re.pop(),re.length?($=re[0],re[0]=z,Oe(re,0,ue)):$=z,$},J=function(re,ue,z){var $;return null==z&&(z=B),$=re[0],re[0]=ue,Oe(re,0,z),$},te=function(re,ue,z){var $;return null==z&&(z=B),re.length&&z(re[0],ue)<0&&(ue=($=[re[0],ue])[0],re[0]=$[1],Oe(re,0,z)),ue},P=function(re,ue){var $,ge,Re,rt,Pe;for(null==ue&&(ue=B),rt=[],$=0,ge=(Re=function(){Pe=[];for(var at=0,xt=W(re.length/2);0<=xt?at<xt:at>xt;0<=xt?at++:at--)Pe.push(at);return Pe}.apply(this).reverse()).length;$<ge;$++)rt.push(Oe(re,Re[$],ue));return rt},ae=function(re,ue,z){var $;if(null==z&&(z=B),-1!==($=re.indexOf(ue)))return xe(re,0,$,z),Oe(re,$,z)},Q=function(re,ue,z){var ne,ge,Ue,Re;if(null==z&&(z=B),!(ne=re.slice(0,ue)).length)return ne;for(P(ne,z),ge=0,Ue=(Re=re.slice(ue)).length;ge<Ue;ge++)te(ne,Re[ge],z);return ne.sort(z).reverse()},U=function(re,ue,z){var $,ge,Ue,Re,rt,Pe,at,xt,He;if(null==z&&(z=B),10*ue<=re.length){if(!(Ue=re.slice(0,ue).sort(z)).length)return Ue;for(ge=Ue[Ue.length-1],Re=0,Pe=(at=re.slice(ue)).length;Re<Pe;Re++)z($=at[Re],ge)<0&&(oe(Ue,$,0,null,z),Ue.pop(),ge=Ue[Ue.length-1]);return Ue}for(P(re,z),He=[],rt=0,xt=se(ue,re.length);0<=xt?rt<xt:rt>xt;0<=xt?++rt:--rt)He.push(O(re,z));return He},xe=function(re,ue,z,$){var ne,ge,Ue;for(null==$&&($=B),ne=re[z];z>ue&&$(ne,ge=re[Ue=z-1>>1])<0;)re[z]=ge,z=Ue;return re[z]=ne},Oe=function(re,ue,z){var $,ne,ge,Ue,Re;for(null==z&&(z=B),ne=re.length,Re=ue,ge=re[ue],$=2*ue+1;$<ne;)(Ue=$+1)<ne&&!(z(re[$],re[Ue])<0)&&($=Ue),re[ue]=re[$],$=2*(ue=$)+1;return re[ue]=ge,xe(re,Re,ue,z)},H=function(){function re(ue){this.cmp=ue??B,this.nodes=[]}return re.push=q,re.pop=O,re.replace=J,re.pushpop=te,re.heapify=P,re.updateItem=ae,re.nlargest=Q,re.nsmallest=U,re.prototype.push=function(ue){return q(this.nodes,ue,this.cmp)},re.prototype.pop=function(){return O(this.nodes,this.cmp)},re.prototype.peek=function(){return this.nodes[0]},re.prototype.contains=function(ue){return-1!==this.nodes.indexOf(ue)},re.prototype.replace=function(ue){return J(this.nodes,ue,this.cmp)},re.prototype.pushpop=function(ue){return te(this.nodes,ue,this.cmp)},re.prototype.heapify=function(){return P(this.nodes,this.cmp)},re.prototype.updateItem=function(ue){return ae(this.nodes,ue,this.cmp)},re.prototype.clear=function(){return this.nodes=[]},re.prototype.empty=function(){return 0===this.nodes.length},re.prototype.size=function(){return this.nodes.length},re.prototype.clone=function(){var ue;return(ue=new re).nodes=this.nodes.slice(0),ue},re.prototype.toArray=function(){return this.nodes.slice(0)},re.prototype.insert=re.prototype.push,re.prototype.top=re.prototype.peek,re.prototype.front=re.prototype.peek,re.prototype.has=re.prototype.contains,re.prototype.copy=re.prototype.clone,re}(),Y=[],void 0===(D="function"==typeof(V=function(){return H})?V.apply(Ce,Y):V)||(Be.exports=D)}).call(this)},8461:(Be,Ce)=>{Ce.read=function(V,Y,D,H,B){var W,P,O=8*B-H-1,q=(1<<O)-1,te=q>>1,J=-7,oe=D?B-1:0,se=D?-1:1,Q=V[Y+oe];for(oe+=se,W=Q&(1<<-J)-1,Q>>=-J,J+=O;J>0;W=256*W+V[Y+oe],oe+=se,J-=8);for(P=W&(1<<-J)-1,W>>=-J,J+=H;J>0;P=256*P+V[Y+oe],oe+=se,J-=8);if(0===W)W=1-te;else{if(W===q)return P?NaN:1/0*(Q?-1:1);P+=Math.pow(2,H),W-=te}return(Q?-1:1)*P*Math.pow(2,W-H)},Ce.write=function(V,Y,D,H,B,W){var P,O,q,te=8*W-B-1,J=(1<<te)-1,oe=J>>1,se=23===B?Math.pow(2,-24)-Math.pow(2,-77):0,Q=H?0:W-1,U=H?1:-1,ae=Y<0||0===Y&&1/Y<0?1:0;for(Y=Math.abs(Y),isNaN(Y)||Y===1/0?(O=isNaN(Y)?1:0,P=J):(P=Math.floor(Math.log(Y)/Math.LN2),Y*(q=Math.pow(2,-P))<1&&(P--,q*=2),(Y+=P+oe>=1?se/q:se*Math.pow(2,1-oe))*q>=2&&(P++,q/=2),P+oe>=J?(O=0,P=J):P+oe>=1?(O=(Y*q-1)*Math.pow(2,B),P+=oe):(O=Y*Math.pow(2,oe-1)*Math.pow(2,B),P=0));B>=8;V[D+Q]=255&O,Q+=U,O/=256,B-=8);for(P=P<<B|O,te+=B;te>0;V[D+Q]=255&P,Q+=U,P/=256,te-=8);V[D+Q-U]|=128*ae}},3894:Be=>{Be.exports="function"==typeof Object.create?function(V,Y){Y&&(V.super_=Y,V.prototype=Object.create(Y.prototype,{constructor:{value:V,enumerable:!1,writable:!0,configurable:!0}}))}:function(V,Y){if(Y){V.super_=Y;var D=function(){};D.prototype=Y.prototype,V.prototype=new D,V.prototype.constructor=V}}},3353:(Be,Ce,V)=>{"use strict";function Y(z){var $=Array.prototype.slice.call(arguments,1);return $.forEach(function(ne){!ne||Object.keys(ne).forEach(function(ge){z[ge]=ne[ge]})}),z}function D(z){return Object.prototype.toString.call(z)}function P(z){return"[object Function]"===D(z)}function O(z){return z.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var q={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1},J={"http:":{validate:function(z,$,ne){var ge=z.slice($);return ne.re.http||(ne.re.http=new RegExp("^\\/\\/"+ne.re.src_auth+ne.re.src_host_port_strict+ne.re.src_path,"i")),ne.re.http.test(ge)?ge.match(ne.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(z,$,ne){var ge=z.slice($);return ne.re.no_http||(ne.re.no_http=new RegExp("^"+ne.re.src_auth+"(?:localhost|(?:(?:"+ne.re.src_domain+")\\.)+"+ne.re.src_domain_root+")"+ne.re.src_port+ne.re.src_host_terminator+ne.re.src_path,"i")),ne.re.no_http.test(ge)?$>=3&&":"===z[$-3]||$>=3&&"/"===z[$-3]?0:ge.match(ne.re.no_http)[0].length:0}},"mailto:":{validate:function(z,$,ne){var ge=z.slice($);return ne.re.mailto||(ne.re.mailto=new RegExp("^"+ne.re.src_email_name+"@"+ne.re.src_host_strict,"i")),ne.re.mailto.test(ge)?ge.match(ne.re.mailto)[0].length:0}}},se="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|\u0440\u0444".split("|");function xe(z){var $=z.re=V(9234)(z.__opts__),ne=z.__tlds__.slice();function ge(Pe){return Pe.replace("%TLDS%",$.src_tlds)}z.onCompile(),z.__tlds_replaced__||ne.push("a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]"),ne.push($.src_xn),$.src_tlds=ne.join("|"),$.email_fuzzy=RegExp(ge($.tpl_email_fuzzy),"i"),$.link_fuzzy=RegExp(ge($.tpl_link_fuzzy),"i"),$.link_no_ip_fuzzy=RegExp(ge($.tpl_link_no_ip_fuzzy),"i"),$.host_fuzzy_test=RegExp(ge($.tpl_host_fuzzy_test),"i");var Ue=[];function Re(Pe,at){throw new Error('(LinkifyIt) Invalid schema "'+Pe+'": '+at)}z.__compiled__={},Object.keys(z.__schemas__).forEach(function(Pe){var at=z.__schemas__[Pe];if(null!==at){var xt={validate:null,link:null};if(z.__compiled__[Pe]=xt,function B(z){return"[object Object]"===D(z)}(at))return function W(z){return"[object RegExp]"===D(z)}(at.validate)?xt.validate=function U(z){return function($,ne){var ge=$.slice(ne);return z.test(ge)?ge.match(z)[0].length:0}}(at.validate):P(at.validate)?xt.validate=at.validate:Re(Pe,at),void(P(at.normalize)?xt.normalize=at.normalize:at.normalize?Re(Pe,at):xt.normalize=function(z,$){$.normalize(z)});if(function H(z){return"[object String]"===D(z)}(at))return void Ue.push(Pe);Re(Pe,at)}}),Ue.forEach(function(Pe){!z.__compiled__[z.__schemas__[Pe]]||(z.__compiled__[Pe].validate=z.__compiled__[z.__schemas__[Pe]].validate,z.__compiled__[Pe].normalize=z.__compiled__[z.__schemas__[Pe]].normalize)}),z.__compiled__[""]={validate:null,normalize:function(z,$){$.normalize(z)}};var rt=Object.keys(z.__compiled__).filter(function(Pe){return Pe.length>0&&z.__compiled__[Pe]}).map(O).join("|");z.re.schema_test=RegExp("(^|(?!_)(?:[><\uff5c]|"+$.src_ZPCc+"))("+rt+")","i"),z.re.schema_search=RegExp("(^|(?!_)(?:[><\uff5c]|"+$.src_ZPCc+"))("+rt+")","ig"),z.re.schema_at_start=RegExp("^"+z.re.schema_search.source,"i"),z.re.pretest=RegExp("("+z.re.schema_test.source+")|("+z.re.host_fuzzy_test.source+")|@","i"),function Q(z){z.__index__=-1,z.__text_cache__=""}(z)}function Oe(z,$){var ne=z.__index__,ge=z.__last_index__,Ue=z.__text_cache__.slice(ne,ge);this.schema=z.__schema__.toLowerCase(),this.index=ne+$,this.lastIndex=ge+$,this.raw=Ue,this.text=Ue,this.url=Ue}function re(z,$){var ne=new Oe(z,$);return z.__compiled__[ne.schema].normalize(ne,z),ne}function ue(z,$){if(!(this instanceof ue))return new ue(z,$);$||function te(z){return Object.keys(z||{}).reduce(function($,ne){return $||q.hasOwnProperty(ne)},!1)}(z)&&($=z,z={}),this.__opts__=Y({},q,$),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=Y({},J,z),this.__compiled__={},this.__tlds__=se,this.__tlds_replaced__=!1,this.re={},xe(this)}ue.prototype.add=function($,ne){return this.__schemas__[$]=ne,xe(this),this},ue.prototype.set=function($){return this.__opts__=Y(this.__opts__,$),this},ue.prototype.test=function($){if(this.__text_cache__=$,this.__index__=-1,!$.length)return!1;var ne,ge,Ue,Re,rt,Pe,at,xt;if(this.re.schema_test.test($))for((at=this.re.schema_search).lastIndex=0;null!==(ne=at.exec($));)if(Re=this.testSchemaAt($,ne[2],at.lastIndex)){this.__schema__=ne[2],this.__index__=ne.index+ne[1].length,this.__last_index__=ne.index+ne[0].length+Re;break}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(xt=$.search(this.re.host_fuzzy_test))>=0&&(this.__index__<0||xt<this.__index__)&&null!==(ge=$.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))&&(rt=ge.index+ge[1].length,(this.__index__<0||rt<this.__index__)&&(this.__schema__="",this.__index__=rt,this.__last_index__=ge.index+ge[0].length)),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&$.indexOf("@")>=0&&null!==(Ue=$.match(this.re.email_fuzzy))&&(rt=Ue.index+Ue[1].length,Pe=Ue.index+Ue[0].length,(this.__index__<0||rt<this.__index__||rt===this.__index__&&Pe>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=rt,this.__last_index__=Pe)),this.__index__>=0},ue.prototype.pretest=function($){return this.re.pretest.test($)},ue.prototype.testSchemaAt=function($,ne,ge){return this.__compiled__[ne.toLowerCase()]?this.__compiled__[ne.toLowerCase()].validate($,ge,this):0},ue.prototype.match=function($){var ne=0,ge=[];this.__index__>=0&&this.__text_cache__===$&&(ge.push(re(this,ne)),ne=this.__last_index__);for(var Ue=ne?$.slice(ne):$;this.test(Ue);)ge.push(re(this,ne)),Ue=Ue.slice(this.__last_index__),ne+=this.__last_index__;return ge.length?ge:null},ue.prototype.matchAtStart=function($){if(this.__text_cache__=$,this.__index__=-1,!$.length)return null;var ne=this.re.schema_at_start.exec($);if(!ne)return null;var ge=this.testSchemaAt($,ne[2],ne[0].length);return ge?(this.__schema__=ne[2],this.__index__=ne.index+ne[1].length,this.__last_index__=ne.index+ne[0].length+ge,re(this,0)):null},ue.prototype.tlds=function($,ne){return $=Array.isArray($)?$:[$],ne?(this.__tlds__=this.__tlds__.concat($).sort().filter(function(ge,Ue,Re){return ge!==Re[Ue-1]}).reverse(),xe(this),this):(this.__tlds__=$.slice(),this.__tlds_replaced__=!0,xe(this),this)},ue.prototype.normalize=function($){$.schema||($.url="http://"+$.url),"mailto:"===$.schema&&!/^mailto:/i.test($.url)&&($.url="mailto:"+$.url)},ue.prototype.onCompile=function(){},Be.exports=ue},9234:(Be,Ce,V)=>{"use strict";Be.exports=function(Y){var D={};Y=Y||{},D.src_Any=V(1129).source,D.src_Cc=V(9699).source,D.src_Z=V(5450).source,D.src_P=V(6020).source,D.src_ZPCc=[D.src_Z,D.src_P,D.src_Cc].join("|"),D.src_ZCc=[D.src_Z,D.src_Cc].join("|");return D.src_pseudo_letter="(?:(?![><\uff5c]|"+D.src_ZPCc+")"+D.src_Any+")",D.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",D.src_auth="(?:(?:(?!"+D.src_ZCc+"|[@/\\[\\]()]).)+@)?",D.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",D.src_host_terminator="(?=$|[><\uff5c]|"+D.src_ZPCc+")(?!"+(Y["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+D.src_ZPCc+"))",D.src_path="(?:[/?#](?:(?!"+D.src_ZCc+"|[><\uff5c]|[()[\\]{}.,\"'?!\\-;]).|\\[(?:(?!"+D.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+D.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+D.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+D.src_ZCc+'|["]).)+\\"|\\\'(?:(?!'+D.src_ZCc+"|[']).)+\\'|\\'(?="+D.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+D.src_ZCc+"|[.]|$)|"+(Y["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+D.src_ZCc+"|$)|;(?!"+D.src_ZCc+"|$)|\\!+(?!"+D.src_ZCc+"|[!]|$)|\\?(?!"+D.src_ZCc+"|[?]|$))+|\\/)?",D.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',D.src_xn="xn--[a-z0-9\\-]{1,59}",D.src_domain_root="(?:"+D.src_xn+"|"+D.src_pseudo_letter+"{1,63})",D.src_domain="(?:"+D.src_xn+"|(?:"+D.src_pseudo_letter+")|(?:"+D.src_pseudo_letter+"(?:-|"+D.src_pseudo_letter+"){0,61}"+D.src_pseudo_letter+"))",D.src_host="(?:(?:(?:(?:"+D.src_domain+")\\.)*"+D.src_domain+"))",D.tpl_host_fuzzy="(?:"+D.src_ip4+"|(?:(?:(?:"+D.src_domain+")\\.)+(?:%TLDS%)))",D.tpl_host_no_ip_fuzzy="(?:(?:(?:"+D.src_domain+")\\.)+(?:%TLDS%))",D.src_host_strict=D.src_host+D.src_host_terminator,D.tpl_host_fuzzy_strict=D.tpl_host_fuzzy+D.src_host_terminator,D.src_host_port_strict=D.src_host+D.src_port+D.src_host_terminator,D.tpl_host_port_fuzzy_strict=D.tpl_host_fuzzy+D.src_port+D.src_host_terminator,D.tpl_host_port_no_ip_fuzzy_strict=D.tpl_host_no_ip_fuzzy+D.src_port+D.src_host_terminator,D.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+D.src_ZPCc+"|>|$))",D.tpl_email_fuzzy='(^|[><\uff5c]|"|\\(|'+D.src_ZCc+")("+D.src_email_name+"@"+D.tpl_host_fuzzy_strict+")",D.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uff5c]|"+D.src_ZPCc+"))((?![$+<=>^`|\uff5c])"+D.tpl_host_port_fuzzy_strict+D.src_path+")",D.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uff5c]|"+D.src_ZPCc+"))((?![$+<=>^`|\uff5c])"+D.tpl_host_port_no_ip_fuzzy_strict+D.src_path+")",D}},8132:Be=>{var un,V="__lodash_hash_undefined__",B=/^\[object .+?Constructor\]$/,W="object"==typeof global&&global&&global.Object===Object&&global,P="object"==typeof self&&self&&self.Object===Object&&self,O=W||P||Function("return this")(),J=Array.prototype,oe=Function.prototype,se=Object.prototype,Q=O["__core-js_shared__"],U=(un=/[^.]+$/.exec(Q&&Q.keys&&Q.keys.IE_PROTO||""))?"Symbol(src)_1."+un:"",ae=oe.toString,xe=se.hasOwnProperty,Oe=se.toString,re=RegExp("^"+ae.call(xe).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ue=J.splice,z=je(O,"Map"),$=je(Object,"create");function ne(un){var Je=-1,Te=un?un.length:0;for(this.clear();++Je<Te;){var De=un[Je];this.set(De[0],De[1])}}function at(un){var Je=-1,Te=un?un.length:0;for(this.clear();++Je<Te;){var De=un[Je];this.set(De[0],De[1])}}function kn(un){var Je=-1,Te=un?un.length:0;for(this.clear();++Je<Te;){var De=un[Je];this.set(De[0],De[1])}}function xn(un,Je){for(var Te=un.length;Te--;)if($i(un[Te][0],Je))return Te;return-1}function yn(un,Je){var Te=un.__data__;return function be(un){var Je=typeof un;return"string"==Je||"number"==Je||"symbol"==Je||"boolean"==Je?"__proto__"!==un:null===un}(Je)?Te["string"==typeof Je?"string":"hash"]:Te.map}function je(un,Je){var Te=function q(un,Je){return un?.[Je]}(un,Je);return function Cn(un){if(!Pt(un)||function Dt(un){return!!U&&U in un}(un))return!1;var Je=function It(un){var Je=Pt(un)?Oe.call(un):"";return"[object Function]"==Je||"[object GeneratorFunction]"==Je}(un)||function te(un){var Je=!1;if(null!=un&&"function"!=typeof un.toString)try{Je=!!(un+"")}catch{}return Je}(un)?re:B;return Je.test(function Rt(un){if(null!=un){try{return ae.call(un)}catch{}try{return un+""}catch{}}return""}(un))}(Te)?Te:void 0}function ci(un,Je){if("function"!=typeof un||Je&&"function"!=typeof Je)throw new TypeError("Expected a function");var Te=function(){var De=arguments,Ot=Je?Je.apply(this,De):De[0],vn=Te.cache;if(vn.has(Ot))return vn.get(Ot);var ri=un.apply(this,De);return Te.cache=vn.set(Ot,ri),ri};return Te.cache=new(ci.Cache||kn),Te}function $i(un,Je){return un===Je||un!=un&&Je!=Je}function Pt(un){var Je=typeof un;return!!un&&("object"==Je||"function"==Je)}ne.prototype.clear=function ge(){this.__data__=$?$(null):{}},ne.prototype.delete=function Ue(un){return this.has(un)&&delete this.__data__[un]},ne.prototype.get=function Re(un){var Je=this.__data__;if($){var Te=Je[un];return Te===V?void 0:Te}return xe.call(Je,un)?Je[un]:void 0},ne.prototype.has=function rt(un){var Je=this.__data__;return $?void 0!==Je[un]:xe.call(Je,un)},ne.prototype.set=function Pe(un,Je){return this.__data__[un]=$&&void 0===Je?V:Je,this},at.prototype.clear=function xt(){this.__data__=[]},at.prototype.delete=function He(un){var Je=this.__data__,Te=xn(Je,un);return!(Te<0||(Te==Je.length-1?Je.pop():ue.call(Je,Te,1),0))},at.prototype.get=function ft(un){var Je=this.__data__,Te=xn(Je,un);return Te<0?void 0:Je[Te][1]},at.prototype.has=function gt(un){return xn(this.__data__,un)>-1},at.prototype.set=function bt(un,Je){var Te=this.__data__,De=xn(Te,un);return De<0?Te.push([un,Je]):Te[De][1]=Je,this},kn.prototype.clear=function Ut(){this.__data__={hash:new ne,map:new(z||at),string:new ne}},kn.prototype.delete=function Dn(un){return yn(this,un).delete(un)},kn.prototype.get=function Jt(un){return yn(this,un).get(un)},kn.prototype.has=function nn(un){return yn(this,un).has(un)},kn.prototype.set=function Ln(un,Je){return yn(this,un).set(un,Je),this},ci.Cache=kn,Be.exports=ci},8078:Be=>{var Ce="Expected a function",D=/^\s+|\s+$/g,H=/^[-+]0x[0-9a-f]+$/i,B=/^0b[01]+$/i,W=/^0o[0-7]+$/i,P=parseInt,O="object"==typeof global&&global&&global.Object===Object&&global,q="object"==typeof self&&self&&self.Object===Object&&self,te=O||q||Function("return this")(),oe=Object.prototype.toString,se=Math.max,Q=Math.min,U=function(){return te.Date.now()};function Oe($){var ne=typeof $;return!!$&&("object"==ne||"function"==ne)}function z($){if("number"==typeof $)return $;if(function ue($){return"symbol"==typeof $||function re($){return!!$&&"object"==typeof $}($)&&"[object Symbol]"==oe.call($)}($))return NaN;if(Oe($)){var ne="function"==typeof $.valueOf?$.valueOf():$;$=Oe(ne)?ne+"":ne}if("string"!=typeof $)return 0===$?$:+$;$=$.replace(D,"");var ge=B.test($);return ge||W.test($)?P($.slice(2),ge?2:8):H.test($)?NaN:+$}Be.exports=function xe($,ne,ge){var Ue=!0,Re=!0;if("function"!=typeof $)throw new TypeError(Ce);return Oe(ge)&&(Ue="leading"in ge?!!ge.leading:Ue,Re="trailing"in ge?!!ge.trailing:Re),function ae($,ne,ge){var Ue,Re,rt,Pe,at,xt,He=0,ft=!1,gt=!1,bt=!0;if("function"!=typeof $)throw new TypeError(Ce);function kn(je){var be=Ue,Dt=Re;return Ue=Re=void 0,He=je,Pe=$.apply(Dt,be)}function Ut(je){return He=je,at=setTimeout(nn,ne),ft?kn(je):Pe}function Jt(je){var be=je-xt;return void 0===xt||be>=ne||be<0||gt&&je-He>=rt}function nn(){var je=U();if(Jt(je))return Ln(je);at=setTimeout(nn,function Dn(je){var Rt=ne-(je-xt);return gt?Q(Rt,rt-(je-He)):Rt}(je))}function Ln(je){return at=void 0,bt&&Ue?kn(je):(Ue=Re=void 0,Pe)}function yn(){var je=U(),be=Jt(je);if(Ue=arguments,Re=this,xt=je,be){if(void 0===at)return Ut(xt);if(gt)return at=setTimeout(nn,ne),kn(xt)}return void 0===at&&(at=setTimeout(nn,ne)),Pe}return ne=z(ne)||0,Oe(ge)&&(ft=!!ge.leading,rt=(gt="maxWait"in ge)?se(z(ge.maxWait)||0,ne):rt,bt="trailing"in ge?!!ge.trailing:bt),yn.cancel=function xn(){void 0!==at&&clearTimeout(at),He=0,Ue=xt=Re=at=void 0},yn.flush=function Cn(){return void 0===at?Pe:Ln(U())},yn}($,ne,{leading:Ue,maxWait:ne,trailing:Re})}},4994:(Be,Ce,V)=>{var Y=V(4312),D=V(6421),H=V(5764),B=V(8685),W=V(6676);function P(O){var q=-1,te=null==O?0:O.length;for(this.clear();++q<te;){var J=O[q];this.set(J[0],J[1])}}P.prototype.clear=Y,P.prototype.delete=D,P.prototype.get=H,P.prototype.has=B,P.prototype.set=W,Be.exports=P},9215:(Be,Ce,V)=>{var Y=V(1840),D=V(4378),H=V(4981),B=V(7343),W=V(8895);function P(O){var q=-1,te=null==O?0:O.length;for(this.clear();++q<te;){var J=O[q];this.set(J[0],J[1])}}P.prototype.clear=Y,P.prototype.delete=D,P.prototype.get=H,P.prototype.has=B,P.prototype.set=W,Be.exports=P},1501:(Be,Ce,V)=>{var H=V(3436)(V(2119),"Map");Be.exports=H},9850:(Be,Ce,V)=>{var Y=V(638),D=V(1184),H=V(866),B=V(3771),W=V(1772);function P(O){var q=-1,te=null==O?0:O.length;for(this.clear();++q<te;){var J=O[q];this.set(J[0],J[1])}}P.prototype.clear=Y,P.prototype.delete=D,P.prototype.get=H,P.prototype.has=B,P.prototype.set=W,Be.exports=P},443:(Be,Ce,V)=>{var Y=V(2119);Be.exports=Y.Symbol},4633:Be=>{Be.exports=function Ce(V,Y){for(var D=-1,H=null==V?0:V.length,B=Array(H);++D<H;)B[D]=Y(V[D],D,V);return B}},9719:(Be,Ce,V)=>{var Y=V(5683),D=V(217),B=Object.prototype.hasOwnProperty;Be.exports=function W(P,O,q){var te=P[O];(!B.call(P,O)||!D(te,q)||void 0===q&&!(O in P))&&Y(P,O,q)}},3503:(Be,Ce,V)=>{var Y=V(217);Be.exports=function D(H,B){for(var W=H.length;W--;)if(Y(H[W][0],B))return W;return-1}},5683:(Be,Ce,V)=>{var Y=V(6713);Be.exports=function D(H,B,W){"__proto__"==B&&Y?Y(H,B,{configurable:!0,enumerable:!0,value:W,writable:!0}):H[B]=W}},5456:(Be,Ce,V)=>{var Y=V(6884),D=V(8533);Be.exports=function H(B,W){for(var P=0,O=(W=Y(W,B)).length;null!=B&&P<O;)B=B[D(W[P++])];return P&&P==O?B:void 0}},3337:(Be,Ce,V)=>{var Y=V(443),D=V(1318),H=V(2902),P=Y?Y.toStringTag:void 0;Be.exports=function O(q){return null==q?void 0===q?"[object Undefined]":"[object Null]":P&&P in Object(q)?D(q):H(q)}},7304:(Be,Ce,V)=>{var Y=V(5946),D=V(1943),H=V(5940),B=V(2827),P=/^\[object .+?Constructor\]$/,oe=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");Be.exports=function se(Q){return!(!H(Q)||D(Q))&&(Y(Q)?oe:P).test(B(Q))}},5963:(Be,Ce,V)=>{var Y=V(9719),D=V(6884),H=V(8442),B=V(5940),W=V(8533);Be.exports=function P(O,q,te,J){if(!B(O))return O;for(var oe=-1,se=(q=D(q,O)).length,Q=se-1,U=O;null!=U&&++oe<se;){var ae=W(q[oe]),xe=te;if("__proto__"===ae||"constructor"===ae||"prototype"===ae)return O;if(oe!=Q){var Oe=U[ae];void 0===(xe=J?J(Oe,ae,U):void 0)&&(xe=B(Oe)?Oe:H(q[oe+1])?[]:{})}Y(U,ae,xe),U=U[ae]}return O}},3935:(Be,Ce,V)=>{var Y=V(443),D=V(4633),H=V(9460),B=V(4129),P=Y?Y.prototype:void 0,O=P?P.toString:void 0;Be.exports=function q(te){if("string"==typeof te)return te;if(H(te))return D(te,q)+"";if(B(te))return O?O.call(te):"";var J=te+"";return"0"==J&&1/te==-1/0?"-0":J}},3348:(Be,Ce,V)=>{var Y=V(2760),D=/^\s+/;Be.exports=function H(B){return B&&B.slice(0,Y(B)+1).replace(D,"")}},6884:(Be,Ce,V)=>{var Y=V(9460),D=V(5352),H=V(2855),B=V(3943);Be.exports=function W(P,O){return Y(P)?P:D(P,O)?[P]:H(B(P))}},9454:Be=>{Be.exports=function Ce(V,Y){var D=-1,H=V.length;for(Y||(Y=Array(H));++D<H;)Y[D]=V[D];return Y}},4610:(Be,Ce,V)=>{var Y=V(2119);Be.exports=Y["__core-js_shared__"]},6713:(Be,Ce,V)=>{var Y=V(3436),D=function(){try{var H=Y(Object,"defineProperty");return H({},"",{}),H}catch{}}();Be.exports=D},9122:Be=>{var Ce="object"==typeof global&&global&&global.Object===Object&&global;Be.exports=Ce},4537:(Be,Ce,V)=>{var Y=V(3819);Be.exports=function D(H,B){var W=H.__data__;return Y(B)?W["string"==typeof B?"string":"hash"]:W.map}},3436:(Be,Ce,V)=>{var Y=V(7304),D=V(1990);Be.exports=function H(B,W){var P=D(B,W);return Y(P)?P:void 0}},1318:(Be,Ce,V)=>{var Y=V(443),D=Object.prototype,H=D.hasOwnProperty,B=D.toString,W=Y?Y.toStringTag:void 0;Be.exports=function P(O){var q=H.call(O,W),te=O[W];try{O[W]=void 0;var J=!0}catch{}var oe=B.call(O);return J&&(q?O[W]=te:delete O[W]),oe}},1990:Be=>{Be.exports=function Ce(V,Y){return V?.[Y]}},4312:(Be,Ce,V)=>{var Y=V(862);Be.exports=function D(){this.__data__=Y?Y(null):{},this.size=0}},6421:Be=>{Be.exports=function Ce(V){var Y=this.has(V)&&delete this.__data__[V];return this.size-=Y?1:0,Y}},5764:(Be,Ce,V)=>{var Y=V(862),B=Object.prototype.hasOwnProperty;Be.exports=function W(P){var O=this.__data__;if(Y){var q=O[P];return"__lodash_hash_undefined__"===q?void 0:q}return B.call(O,P)?O[P]:void 0}},8685:(Be,Ce,V)=>{var Y=V(862),H=Object.prototype.hasOwnProperty;Be.exports=function B(W){var P=this.__data__;return Y?void 0!==P[W]:H.call(P,W)}},6676:(Be,Ce,V)=>{var Y=V(862);Be.exports=function H(B,W){var P=this.__data__;return this.size+=this.has(B)?0:1,P[B]=Y&&void 0===W?"__lodash_hash_undefined__":W,this}},8442:Be=>{var V=/^(?:0|[1-9]\d*)$/;Be.exports=function Y(D,H){var B=typeof D;return!!(H=H??9007199254740991)&&("number"==B||"symbol"!=B&&V.test(D))&&D>-1&&D%1==0&&D<H}},5352:(Be,Ce,V)=>{var Y=V(9460),D=V(4129),H=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,B=/^\w*$/;Be.exports=function W(P,O){if(Y(P))return!1;var q=typeof P;return!("number"!=q&&"symbol"!=q&&"boolean"!=q&&null!=P&&!D(P))||B.test(P)||!H.test(P)||null!=O&&P in Object(O)}},3819:Be=>{Be.exports=function Ce(V){var Y=typeof V;return"string"==Y||"number"==Y||"symbol"==Y||"boolean"==Y?"__proto__"!==V:null===V}},1943:(Be,Ce,V)=>{var B,Y=V(4610),D=(B=/[^.]+$/.exec(Y&&Y.keys&&Y.keys.IE_PROTO||""))?"Symbol(src)_1."+B:"";Be.exports=function H(B){return!!D&&D in B}},1840:Be=>{Be.exports=function Ce(){this.__data__=[],this.size=0}},4378:(Be,Ce,V)=>{var Y=V(3503),H=Array.prototype.splice;Be.exports=function B(W){var P=this.__data__,O=Y(P,W);return!(O<0||(O==P.length-1?P.pop():H.call(P,O,1),--this.size,0))}},4981:(Be,Ce,V)=>{var Y=V(3503);Be.exports=function D(H){var B=this.__data__,W=Y(B,H);return W<0?void 0:B[W][1]}},7343:(Be,Ce,V)=>{var Y=V(3503);Be.exports=function D(H){return Y(this.__data__,H)>-1}},8895:(Be,Ce,V)=>{var Y=V(3503);Be.exports=function D(H,B){var W=this.__data__,P=Y(W,H);return P<0?(++this.size,W.push([H,B])):W[P][1]=B,this}},638:(Be,Ce,V)=>{var Y=V(4994),D=V(9215),H=V(1501);Be.exports=function B(){this.size=0,this.__data__={hash:new Y,map:new(H||D),string:new Y}}},1184:(Be,Ce,V)=>{var Y=V(4537);Be.exports=function D(H){var B=Y(this,H).delete(H);return this.size-=B?1:0,B}},866:(Be,Ce,V)=>{var Y=V(4537);Be.exports=function D(H){return Y(this,H).get(H)}},3771:(Be,Ce,V)=>{var Y=V(4537);Be.exports=function D(H){return Y(this,H).has(H)}},1772:(Be,Ce,V)=>{var Y=V(4537);Be.exports=function D(H,B){var W=Y(this,H),P=W.size;return W.set(H,B),this.size+=W.size==P?0:1,this}},719:(Be,Ce,V)=>{var Y=V(535);Be.exports=function H(B){var W=Y(B,function(O){return 500===P.size&&P.clear(),O}),P=W.cache;return W}},862:(Be,Ce,V)=>{var D=V(3436)(Object,"create");Be.exports=D},2902:Be=>{var V=Object.prototype.toString;Be.exports=function Y(D){return V.call(D)}},2119:(Be,Ce,V)=>{var Y=V(9122),D="object"==typeof self&&self&&self.Object===Object&&self,H=Y||D||Function("return this")();Be.exports=H},2855:(Be,Ce,V)=>{var Y=V(719),D=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,H=/\\(\\)?/g,B=Y(function(W){var P=[];return 46===W.charCodeAt(0)&&P.push(""),W.replace(D,function(O,q,te,J){P.push(te?J.replace(H,"$1"):q||O)}),P});Be.exports=B},8533:(Be,Ce,V)=>{var Y=V(4129);Be.exports=function H(B){if("string"==typeof B||Y(B))return B;var W=B+"";return"0"==W&&1/B==-1/0?"-0":W}},2827:Be=>{var V=Function.prototype.toString;Be.exports=function Y(D){if(null!=D){try{return V.call(D)}catch{}try{return D+""}catch{}}return""}},2760:Be=>{var Ce=/\s/;Be.exports=function V(Y){for(var D=Y.length;D--&&Ce.test(Y.charAt(D)););return D}},406:(Be,Ce,V)=>{var Y=V(5940),D=V(1710),H=V(1467),W=Math.max,P=Math.min;Be.exports=function O(q,te,J){var oe,se,Q,U,ae,xe,Oe=0,re=!1,ue=!1,z=!0;if("function"!=typeof q)throw new TypeError("Expected a function");function $(He){var ft=oe,gt=se;return oe=se=void 0,Oe=He,U=q.apply(gt,ft)}function ne(He){return Oe=He,ae=setTimeout(Re,te),re?$(He):U}function Ue(He){var ft=He-xe;return void 0===xe||ft>=te||ft<0||ue&&He-Oe>=Q}function Re(){var He=D();if(Ue(He))return rt(He);ae=setTimeout(Re,function ge(He){var bt=te-(He-xe);return ue?P(bt,Q-(He-Oe)):bt}(He))}function rt(He){return ae=void 0,z&&oe?$(He):(oe=se=void 0,U)}function xt(){var He=D(),ft=Ue(He);if(oe=arguments,se=this,xe=He,ft){if(void 0===ae)return ne(xe);if(ue)return clearTimeout(ae),ae=setTimeout(Re,te),$(xe)}return void 0===ae&&(ae=setTimeout(Re,te)),U}return te=H(te)||0,Y(J)&&(re=!!J.leading,Q=(ue="maxWait"in J)?W(H(J.maxWait)||0,te):Q,z="trailing"in J?!!J.trailing:z),xt.cancel=function Pe(){void 0!==ae&&clearTimeout(ae),Oe=0,oe=xe=se=ae=void 0},xt.flush=function at(){return void 0===ae?U:rt(D())},xt}},217:Be=>{Be.exports=function Ce(V,Y){return V===Y||V!=V&&Y!=Y}},8817:(Be,Ce,V)=>{var Y=V(5456);Be.exports=function D(H,B,W){var P=null==H?void 0:Y(H,B);return void 0===P?W:P}},9460:Be=>{Be.exports=Array.isArray},5946:(Be,Ce,V)=>{var Y=V(3337),D=V(5940);Be.exports=function O(q){if(!D(q))return!1;var te=Y(q);return"[object Function]"==te||"[object GeneratorFunction]"==te||"[object AsyncFunction]"==te||"[object Proxy]"==te}},5940:Be=>{Be.exports=function Ce(V){var Y=typeof V;return null!=V&&("object"==Y||"function"==Y)}},2671:Be=>{Be.exports=function Ce(V){return null!=V&&"object"==typeof V}},4129:(Be,Ce,V)=>{var Y=V(3337),D=V(2671);Be.exports=function B(W){return"symbol"==typeof W||D(W)&&"[object Symbol]"==Y(W)}},7489:function(Be,Ce,V){var Y;Be=V.nmd(Be),function(){var D,P="Expected a function",q="__lodash_hash_undefined__",J="__lodash_placeholder__",$=32,bt=1/0,kn=9007199254740991,Jt=4294967295,xn=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",$],["partialRight",64],["rearg",256]],Cn="[object Arguments]",yn="[object Array]",be="[object Boolean]",Dt="[object Date]",ci="[object Error]",$i="[object Function]",It="[object GeneratorFunction]",Pt="[object Map]",un="[object Number]",Te="[object Object]",De="[object Promise]",vn="[object RegExp]",ri="[object Set]",Fi="[object String]",Hs="[object Symbol]",Cs="[object WeakMap]",tr="[object ArrayBuffer]",el="[object DataView]",jl="[object Float32Array]",$l="[object Float64Array]",Hf="[object Int8Array]",Gf="[object Int16Array]",td="[object Int32Array]",lc="[object Uint8Array]",Id="[object Uint8ClampedArray]",Lu="[object Uint16Array]",$a="[object Uint32Array]",Lh=/\b__p \+= '';/g,au=/\b(__p \+=) '' \+/g,Ia=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Sd=/&(?:amp|lt|gt|quot|#39);/g,Pu=/[&<>"']/g,th=RegExp(Sd.source),df=RegExp(Pu.source),nh=/<%-([\s\S]+?)%>/g,hl=/<%([\s\S]+?)%>/g,hf=/<%=([\s\S]+?)%>/g,nd=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ff=/^\w*$/,Ph=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,wc=/[\\^$.*+?()[\]{}|]/g,Tg=RegExp(wc.source),Ed=/^\s+/,to=/\s/,pf=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,fl=/\{\n\/\* \[wrapped with (.+)\] \*/,Ac=/,? & /,tl=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Wf=/[()=,{}\[\]\/\s]/,ih=/\\(\\)?/g,Ge=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,it=/\w*$/,Ye=/^[-+]0x[0-9a-f]+$/i,de=/^0b[01]+$/i,Se=/^\[object .+?Constructor\]$/,$e=/^0o[0-7]+$/i,_t=/^(?:0|[1-9]\d*)$/,zt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,In=/($^)/,yi=/['\n\r\u2028\u2029\\]/g,ti="\\ud800-\\udfff",or="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Gs="\\u2700-\\u27bf",xo="a-z\\xdf-\\xf6\\xf8-\\xff",qa="A-Z\\xc0-\\xd6\\xd8-\\xde",Ru="\\ufe0e\\ufe0f",ds="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Mg="["+ti+"]",zp="["+ds+"]",gi="["+or+"]",Dg="\\d+",Ls="["+Gs+"]",Ao="["+xo+"]",gv="[^"+ti+ds+Dg+Gs+xo+qa+"]",mv="\\ud83c[\\udffb-\\udfff]",xs="[^"+ti+"]",Xi="(?:\\ud83c[\\udde6-\\uddff]){2}",Ey="[\\ud800-\\udbff][\\udc00-\\udfff]",jo="["+qa+"]",Ic="(?:"+Ao+"|"+gv+")",rh="(?:"+jo+"|"+gv+")",Rl="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Qt="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",gs="(?:"+gi+"|"+mv+")?",Rh="["+Ru+"]?",Sc=Rh+gs+"(?:\\u200d(?:"+[xs,Xi,Ey].join("|")+")"+Rh+gs+")*",no="(?:"+[Ls,Xi,Ey].join("|")+")"+Sc,Td="(?:"+[xs+gi+"?",gi,Xi,Ey,Mg].join("|")+")",k_=RegExp("['\u2019]","g"),cc=RegExp(gi,"g"),Yi=RegExp(mv+"(?="+mv+")|"+Td+Sc,"g"),cb=RegExp([jo+"?"+Ao+"+"+Rl+"(?="+[zp,jo,"$"].join("|")+")",rh+"+"+Qt+"(?="+[zp,jo+Ic,"$"].join("|")+")",jo+"?"+Ic+"+"+Rl,jo+"+"+Qt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Dg,no].join("|"),"g"),Tr=RegExp("[\\u200d"+ti+or+Ru+"]"),Ec=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ty=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],O_=-1,Ea={};Ea[jl]=Ea[$l]=Ea[Hf]=Ea[Gf]=Ea[td]=Ea[lc]=Ea[Id]=Ea[Lu]=Ea[$a]=!0,Ea[Cn]=Ea[yn]=Ea[tr]=Ea[be]=Ea[el]=Ea[Dt]=Ea[ci]=Ea[$i]=Ea[Pt]=Ea[un]=Ea[Te]=Ea[vn]=Ea[ri]=Ea[Fi]=Ea[Cs]=!1;var da={};da[Cn]=da[yn]=da[tr]=da[el]=da[be]=da[Dt]=da[jl]=da[$l]=da[Hf]=da[Gf]=da[td]=da[Pt]=da[un]=da[Te]=da[vn]=da[ri]=da[Fi]=da[Hs]=da[lc]=da[Id]=da[Lu]=da[$a]=!0,da[ci]=da[$i]=da[Cs]=!1;var wm={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ns=parseFloat,yv=parseInt,_v="object"==typeof global&&global&&global.Object===Object&&global,ku="object"==typeof self&&self&&self.Object===Object&&self,ql=_v||ku||Function("return this")(),F_=Ce&&!Ce.nodeType&&Ce,id=F_&&Be&&!Be.nodeType&&Be,rd=id&&id.exports===F_,My=rd&&_v.process,Md=function(){try{return id&&id.require&&id.require("util").types||My&&My.binding&&My.binding("util")}catch{}}(),Ta=Md&&Md.isArrayBuffer,io=Md&&Md.isDate,N_=Md&&Md.isMap,Dy=Md&&Md.isRegExp,kh=Md&&Md.isSet,mo=Md&&Md.isTypedArray;function Xa(wn,oi,Zn){switch(Zn.length){case 0:return wn.call(oi);case 1:return wn.call(oi,Zn[0]);case 2:return wn.call(oi,Zn[0],Zn[1]);case 3:return wn.call(oi,Zn[0],Zn[1],Zn[2])}return wn.apply(oi,Zn)}function $f(wn,oi,Zn,Rr){for(var zs=-1,Xo=null==wn?0:wn.length;++zs<Xo;){var Kl=wn[zs];oi(Rr,Kl,Zn(Kl),wn)}return Rr}function Ya(wn,oi){for(var Zn=-1,Rr=null==wn?0:wn.length;++Zn<Rr&&!1!==oi(wn[Zn],Zn,wn););return wn}function nl(wn,oi){for(var Zn=null==wn?0:wn.length;Zn--&&!1!==oi(wn[Zn],Zn,wn););return wn}function lu(wn,oi){for(var Zn=-1,Rr=null==wn?0:wn.length;++Zn<Rr;)if(!oi(wn[Zn],Zn,wn))return!1;return!0}function sd(wn,oi){for(var Zn=-1,Rr=null==wn?0:wn.length,zs=0,Xo=[];++Zn<Rr;){var Kl=wn[Zn];oi(Kl,Zn,wn)&&(Xo[zs++]=Kl)}return Xo}function qf(wn,oi){return!(null==wn||!wn.length)&&Da(wn,oi,0)>-1}function Ir(wn,oi,Zn){for(var Rr=-1,zs=null==wn?0:wn.length;++Rr<zs;)if(Zn(oi,wn[Rr]))return!0;return!1}function Ma(wn,oi){for(var Zn=-1,Rr=null==wn?0:wn.length,zs=Array(Rr);++Zn<Rr;)zs[Zn]=oi(wn[Zn],Zn,wn);return zs}function Dd(wn,oi){for(var Zn=-1,Rr=oi.length,zs=wn.length;++Zn<Rr;)wn[zs+Zn]=oi[Zn];return wn}function gf(wn,oi,Zn,Rr){var zs=-1,Xo=null==wn?0:wn.length;for(Rr&&Xo&&(Zn=wn[++zs]);++zs<Xo;)Zn=oi(Zn,wn[zs],zs,wn);return Zn}function Pr(wn,oi,Zn,Rr){var zs=null==wn?0:wn.length;for(Rr&&zs&&(Zn=wn[--zs]);zs--;)Zn=oi(Zn,wn[zs],zs,wn);return Zn}function Am(wn,oi){for(var Zn=-1,Rr=null==wn?0:wn.length;++Zn<Rr;)if(oi(wn[Zn],Zn,wn))return!0;return!1}var Ly=Ss("length");function qo(wn,oi,Zn){var Rr;return Zn(wn,function(zs,Xo,Kl){if(oi(zs,Xo,Kl))return Rr=Xo,!1}),Rr}function kl(wn,oi,Zn,Rr){for(var zs=wn.length,Xo=Zn+(Rr?1:-1);Rr?Xo--:++Xo<zs;)if(oi(wn[Xo],Xo,wn))return Xo;return-1}function Da(wn,oi,Zn){return oi==oi?function ep(wn,oi,Zn){for(var Rr=Zn-1,zs=wn.length;++Rr<zs;)if(wn[Rr]===oi)return Rr;return-1}(wn,oi,Zn):kl(wn,Xl,Zn)}function uu(wn,oi,Zn,Rr){for(var zs=Zn-1,Xo=wn.length;++zs<Xo;)if(Rr(wn[zs],oi))return zs;return-1}function Xl(wn){return wn!=wn}function Ar(wn,oi){var Zn=null==wn?0:wn.length;return Zn?xl(wn,oi)/Zn:NaN}function Ss(wn){return function(oi){return null==oi?D:oi[wn]}}function ma(wn){return function(oi){return null==wn?D:wn[oi]}}function du(wn,oi,Zn,Rr,zs){return zs(wn,function(Xo,Kl,ya){Zn=Rr?(Rr=!1,Xo):oi(Zn,Xo,Kl,ya)}),Zn}function xl(wn,oi){for(var Zn,Rr=-1,zs=wn.length;++Rr<zs;){var Xo=oi(wn[Rr]);Xo!==D&&(Zn=Zn===D?Xo:Zn+Xo)}return Zn}function sh(wn,oi){for(var Zn=-1,Rr=Array(wn);++Zn<wn;)Rr[Zn]=oi(Zn);return Rr}function Up(wn){return wn&&wn.slice(0,Zc(wn)+1).replace(Ed,"")}function Yl(wn){return function(oi){return wn(oi)}}function Ws(wn,oi){return Ma(oi,function(Zn){return wn[Zn]})}function mf(wn,oi){return wn.has(oi)}function Yf(wn,oi){for(var Zn=-1,Rr=wn.length;++Zn<Rr&&Da(oi,wn[Zn],0)>-1;);return Zn}function Im(wn,oi){for(var Zn=wn.length;Zn--&&Da(oi,wn[Zn],0)>-1;);return Zn}function vf(wn,oi){for(var Zn=wn.length,Rr=0;Zn--;)wn[Zn]===oi&&++Rr;return Rr}var Tc=ma({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),Pg=ma({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Kf(wn){return"\\"+wm[wn]}function ad(wn){return Tr.test(wn)}function Zf(wn){var oi=-1,Zn=Array(wn.size);return wn.forEach(function(Rr,zs){Zn[++oi]=[zs,Rr]}),Zn}function Qf(wn,oi){return function(Zn){return wn(oi(Zn))}}function hu(wn,oi){for(var Zn=-1,Rr=wn.length,zs=0,Xo=[];++Zn<Rr;){var Kl=wn[Zn];(Kl===oi||Kl===J)&&(wn[Zn]=J,Xo[zs++]=Zn)}return Xo}function Hp(wn){var oi=-1,Zn=Array(wn.size);return wn.forEach(function(Rr){Zn[++oi]=Rr}),Zn}function rl(wn){return ad(wn)?function bv(wn){for(var oi=Yi.lastIndex=0;Yi.test(wn);)++oi;return oi}(wn):Ly(wn)}function ld(wn){return ad(wn)?function Rg(wn){return wn.match(Yi)||[]}(wn):function $r(wn){return wn.split("")}(wn)}function Zc(wn){for(var oi=wn.length;oi--&&to.test(wn.charAt(oi)););return oi}var Ld=ma({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Sm=function wn(oi){var b,Zn=(oi=null==oi?ql:Sm.defaults(ql.Object(),oi,Sm.pick(ql,Ty))).Array,Rr=oi.Date,zs=oi.Error,Xo=oi.Function,Kl=oi.Math,ya=oi.Object,Cv=oi.RegExp,xv=oi.String,Rd=oi.TypeError,wv=Zn.prototype,Og=ya.prototype,Av=oi["__core-js_shared__"],Iv=Xo.prototype.toString,ia=Og.hasOwnProperty,Ry=0,Em=(b=/[^.]+$/.exec(Av&&Av.keys&&Av.keys.IE_PROTO||""))?"Symbol(src)_1."+b:"",Tm=Og.toString,ub=Iv.call(ya),z_=ql._,tp=Cv("^"+Iv.call(ia).replace(wc,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Mm=rd?oi.Buffer:D,_a=oi.Symbol,yf=oi.Uint8Array,ky=Mm?Mm.allocUnsafe:D,np=Qf(ya.getPrototypeOf,ya),Sv=ya.create,Dm=Og.propertyIsEnumerable,Fg=wv.splice,Ng=_a?_a.isConcatSpreadable:D,Gp=_a?_a.iterator:D,ba=_a?_a.toStringTag:D,ip=function(){try{var b=Kh(ya,"defineProperty");return b({},"",{}),b}catch{}}(),Oy=oi.clearTimeout!==ql.clearTimeout&&oi.clearTimeout,Lm=Rr&&Rr.now!==ql.Date.now&&Rr.now,Fy=oi.setTimeout!==ql.setTimeout&&oi.setTimeout,Ev=Kl.ceil,ra=Kl.floor,Bg=ya.getOwnPropertySymbols,Wp=Mm?Mm.isBuffer:D,zg=oi.isFinite,cd=wv.join,V_=Qf(ya.keys,ya),ms=Kl.max,pl=Kl.min,Mc=Rr.now,vo=oi.parseInt,Ro=Kl.random,Or=wv.reverse,$s=Kh(oi,"DataView"),Wr=Kh(oi,"Map"),Vg=Kh(oi,"Promise"),es=Kh(oi,"Set"),os=Kh(oi,"WeakMap"),Dc=Kh(ya,"create"),oh=os&&new os,jp={},U_=$d($s),Ny=$d(Wr),Ks=$d(Vg),Qc=$d(es),mi=$d(os),Es=_a?_a.prototype:D,wt=Es?Es.valueOf:D,At=Es?Es.toString:D;function dt(b){if(ni(b)&&!Mi(b)&&!(b instanceof Ps)){if(b instanceof sa)return b;if(ia.call(b,"__wrapped__"))return nm(b)}return new sa(b)}var ko=function(){function b(){}return function(S){if(!sr(S))return{};if(Sv)return Sv(S);b.prototype=S;var Z=new b;return b.prototype=D,Z}}();function Io(){}function sa(b,S){this.__wrapped__=b,this.__actions__=[],this.__chain__=!!S,this.__index__=0,this.__values__=D}function Ps(b){this.__wrapped__=b,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Jt,this.__views__=[]}function Ol(b){var S=-1,Z=null==b?0:b.length;for(this.clear();++S<Z;){var Ee=b[S];this.set(Ee[0],Ee[1])}}function gl(b){var S=-1,Z=null==b?0:b.length;for(this.clear();++S<Z;){var Ee=b[S];this.set(Ee[0],Ee[1])}}function is(b){var S=-1,Z=null==b?0:b.length;for(this.clear();++S<Z;){var Ee=b[S];this.set(Ee[0],Ee[1])}}function Mr(b){var S=-1,Z=null==b?0:b.length;for(this.__data__=new is;++S<Z;)this.add(b[S])}function oa(b){var S=this.__data__=new gl(b);this.size=S.size}function Va(b,S){var Z=Mi(b),Ee=!Z&&jr(b),st=!Z&&!Ee&&Qr(b),Et=!Z&&!Ee&&!st&&Nc(b),on=Z||Ee||st||Et,pn=on?sh(b.length,xv):[],Pn=pn.length;for(var Ti in b)(S||ia.call(b,Ti))&&(!on||!("length"==Ti||st&&("offset"==Ti||"parent"==Ti)||Et&&("buffer"==Ti||"byteLength"==Ti||"byteOffset"==Ti)||gc(Ti,Pn)))&&pn.push(Ti);return pn}function Mv(b){var S=b.length;return S?b[dh(0,S-1)]:D}function Dv(b,S){return yh(Js(b),Af(S,0,b.length))}function Gg(b){return yh(Js(b))}function Wg(b,S,Z){(Z!==D&&!Kr(b[S],Z)||Z===D&&!(S in b))&&Od(b,S,Z)}function Cf(b,S,Z){var Ee=b[S];(!ia.call(b,S)||!Kr(Ee,Z)||Z===D&&!(S in b))&&Od(b,S,Z)}function Pm(b,S){for(var Z=b.length;Z--;)if(Kr(b[Z][0],S))return Z;return-1}function xf(b,S,Z,Ee){return ah(b,function(st,Et,on){S(Ee,st,Z(st),on)}),Ee}function zh(b,S){return b&&fc(S,Uc(S),b)}function Od(b,S,Z){"__proto__"==S&&ip?ip(b,S,{configurable:!0,enumerable:!0,value:Z,writable:!0}):b[S]=Z}function wf(b,S){for(var Z=-1,Ee=S.length,st=Zn(Ee),Et=null==b;++Z<Ee;)st[Z]=Et?D:bb(b,S[Z]);return st}function Af(b,S,Z){return b==b&&(Z!==D&&(b=b<=Z?b:Z),S!==D&&(b=b>=S?b:S)),b}function ml(b,S,Z,Ee,st,Et){var on,pn=1&S,Pn=2&S,Ti=4&S;if(Z&&(on=st?Z(b,Ee,st,Et):Z(b)),on!==D)return on;if(!sr(b))return b;var Di=Mi(b);if(Di){if(on=function md(b){var S=b.length,Z=new b.constructor(S);return S&&"string"==typeof b[0]&&ia.call(b,"index")&&(Z.index=b.index,Z.input=b.input),Z}(b),!pn)return Js(b,on)}else{var Hi=ka(b),Dr=Hi==$i||Hi==It;if(Qr(b))return mu(b,pn);if(Hi==Te||Hi==Cn||Dr&&!st){if(on=Pn||Dr?{}:tg(b),!pn)return Pn?function dp(b,S){return fc(b,eg(b),S)}(b,function jg(b,S){return b&&fc(S,Cu(S),b)}(on,b)):function fd(b,S){return fc(b,mp(b),S)}(b,zh(on,b))}else{if(!da[Hi])return st?b:{};on=function Vm(b,S,Z){var Ee=b.constructor;switch(S){case tr:return Sl(b);case be:case Dt:return new Ee(+b);case el:return function hc(b,S){var Z=S?Sl(b.buffer):b.buffer;return new b.constructor(Z,b.byteOffset,b.byteLength)}(b,Z);case jl:case $l:case Hf:case Gf:case td:case lc:case Id:case Lu:case $a:return ec(b,Z);case Pt:return new Ee;case un:case Fi:return new Ee(b);case vn:return function So(b){var S=new b.constructor(b.source,it.exec(b));return S.lastIndex=b.lastIndex,S}(b);case ri:return new Ee;case Hs:return function Om(b){return wt?ya(wt.call(b)):{}}(b)}}(b,Hi,pn)}}Et||(Et=new oa);var Vr=Et.get(b);if(Vr)return Vr;Et.set(b,on),Ha(b)?b.forEach(function(As){on.add(ml(As,S,Z,As,b,Et))}):Fr(b)&&b.forEach(function(As,lo){on.set(lo,ml(As,S,Z,lo,b,Et))});var oo=Di?D:(Ti?Pn?Yh:_u:Pn?Cu:Uc)(b);return Ya(oo||b,function(As,lo){oo&&(As=b[lo=As]),Cf(on,lo,ml(As,S,Z,lo,b,Et))}),on}function By(b,S,Z){var Ee=Z.length;if(null==b)return!Ee;for(b=ya(b);Ee--;){var st=Z[Ee],on=b[st];if(on===D&&!(st in b)||!(0,S[st])(on))return!1}return!0}function zy(b,S,Z){if("function"!=typeof b)throw new Rd(P);return Wd(function(){b.apply(D,Z)},S)}function Vh(b,S,Z,Ee){var st=-1,Et=qf,on=!0,pn=b.length,Pn=[],Ti=S.length;if(!pn)return Pn;Z&&(S=Ma(S,Yl(Z))),Ee?(Et=Ir,on=!1):S.length>=200&&(Et=mf,on=!1,S=new Mr(S));e:for(;++st<pn;){var Di=b[st],Hi=null==Z?Di:Z(Di);if(Di=Ee||0!==Di?Di:0,on&&Hi==Hi){for(var Dr=Ti;Dr--;)if(S[Dr]===Hi)continue e;Pn.push(Di)}else Et(S,Hi,Ee)||Pn.push(Di)}return Pn}dt.templateSettings={escape:nh,evaluate:hl,interpolate:hf,variable:"",imports:{_:dt}},(dt.prototype=Io.prototype).constructor=dt,(sa.prototype=ko(Io.prototype)).constructor=sa,(Ps.prototype=ko(Io.prototype)).constructor=Ps,Ol.prototype.clear=function Ca(){this.__data__=Dc?Dc(null):{},this.size=0},Ol.prototype.delete=function Oo(b){var S=this.has(b)&&delete this.__data__[b];return this.size-=S?1:0,S},Ol.prototype.get=function Ba(b){var S=this.__data__;if(Dc){var Z=S[b];return Z===q?D:Z}return ia.call(S,b)?S[b]:D},Ol.prototype.has=function dr(b){var S=this.__data__;return Dc?S[b]!==D:ia.call(S,b)},Ol.prototype.set=function kd(b,S){var Z=this.__data__;return this.size+=this.has(b)?0:1,Z[b]=Dc&&S===D?q:S,this},gl.prototype.clear=function Fh(){this.__data__=[],this.size=0},gl.prototype.delete=function sp(b){var S=this.__data__,Z=Pm(S,b);return!(Z<0||(Z==S.length-1?S.pop():Fg.call(S,Z,1),--this.size,0))},gl.prototype.get=function Nh(b){var S=this.__data__,Z=Pm(S,b);return Z<0?D:S[Z][1]},gl.prototype.has=function _f(b){return Pm(this.__data__,b)>-1},gl.prototype.set=function Ou(b,S){var Z=this.__data__,Ee=Pm(Z,b);return Ee<0?(++this.size,Z.push([b,S])):Z[Ee][1]=S,this},is.prototype.clear=function Lc(){this.size=0,this.__data__={hash:new Ol,map:new(Wr||gl),string:new Ol}},is.prototype.delete=function Ug(b){var S=gp(this,b).delete(b);return this.size-=S?1:0,S},is.prototype.get=function Ts(b){return gp(this,b).get(b)},is.prototype.has=function Tv(b){return gp(this,b).has(b)},is.prototype.set=function Hg(b,S){var Z=gp(this,b),Ee=Z.size;return Z.set(b,S),this.size+=Z.size==Ee?0:1,this},Mr.prototype.add=Mr.prototype.push=function xa(b){return this.__data__.set(b,q),this},Mr.prototype.has=function Fl(b){return this.__data__.has(b)},oa.prototype.clear=function za(){this.__data__=new gl,this.size=0},oa.prototype.delete=function wl(b){var S=this.__data__,Z=S.delete(b);return this.size=S.size,Z},oa.prototype.get=function Bh(b){return this.__data__.get(b)},oa.prototype.has=function uc(b){return this.__data__.has(b)},oa.prototype.set=function bf(b,S){var Z=this.__data__;if(Z instanceof gl){var Ee=Z.__data__;if(!Wr||Ee.length<199)return Ee.push([b,S]),this.size=++Z.size,this;Z=this.__data__=new is(Ee)}return Z.set(b,S),this.size=Z.size,this};var ah=Ef(Pc),Lv=Ef(Nd,!0);function H_(b,S){var Z=!0;return ah(b,function(Ee,st,Et){return Z=!!S(Ee,st,Et)}),Z}function Pv(b,S,Z){for(var Ee=-1,st=b.length;++Ee<st;){var Et=b[Ee],on=S(Et);if(null!=on&&(pn===D?on==on&&!Hl(on):Z(on,pn)))var pn=on,Pn=Et}return Pn}function Xp(b,S){var Z=[];return ah(b,function(Ee,st,Et){S(Ee,st,Et)&&Z.push(Ee)}),Z}function sl(b,S,Z,Ee,st){var Et=-1,on=b.length;for(Z||(Z=Oa),st||(st=[]);++Et<on;){var pn=b[Et];S>0&&Z(pn)?S>1?sl(pn,S-1,Z,Ee,st):Dd(st,pn):Ee||(st[st.length]=pn)}return st}var Uh=Tf(),Fd=Tf(!0);function Pc(b,S){return b&&Uh(b,S,Uc)}function Nd(b,S){return b&&Fd(b,S,Uc)}function ud(b,S){return sd(S,function(Z){return hn(b[Z])})}function Fu(b,S){for(var Z=0,Ee=(S=Jl(S,b)).length;null!=b&&Z<Ee;)b=b[ju(S[Z++])];return Z&&Z==Ee?b:D}function fu(b,S,Z){var Ee=S(b);return Mi(b)?Ee:Dd(Ee,Z(b))}function aa(b){return null==b?b===D?"[object Undefined]":"[object Null]":ba&&ba in ya(b)?function Df(b){var S=ia.call(b,ba),Z=b[ba];try{b[ba]=D;var Ee=!0}catch{}var st=Tm.call(b);return Ee&&(S?b[ba]=Z:delete b[ba]),st}(b):function G_(b){return Tm.call(b)}(b)}function lh(b,S){return b>S}function Rm(b,S){return null!=b&&ia.call(b,S)}function $g(b,S){return null!=b&&S in ya(b)}function pu(b,S,Z){for(var Ee=Z?Ir:qf,st=b[0].length,Et=b.length,on=Et,pn=Zn(Et),Pn=1/0,Ti=[];on--;){var Di=b[on];on&&S&&(Di=Ma(Di,Yl(S))),Pn=pl(Di.length,Pn),pn[on]=!Z&&(S||st>=120&&Di.length>=120)?new Mr(on&&Di):D}Di=b[0];var Hi=-1,Dr=pn[0];e:for(;++Hi<st&&Ti.length<Pn;){var Vr=Di[Hi],ws=S?S(Vr):Vr;if(Vr=Z||0!==Vr?Vr:0,!(Dr?mf(Dr,ws):Ee(Ti,ws,Z))){for(on=Et;--on;){var oo=pn[on];if(!(oo?mf(oo,ws):Ee(b[on],ws,Z)))continue e}Dr&&Dr.push(ws),Ti.push(Vr)}}return Ti}function Rc(b,S,Z){var Ee=null==(b=yl(b,S=Jl(S,b)))?b:b[ju(bu(S))];return null==Ee?D:Xa(Ee,b,Z)}function js(b){return ni(b)&&aa(b)==Cn}function kc(b,S,Z,Ee,st){return b===S||(null==b||null==S||!ni(b)&&!ni(S)?b!=b&&S!=S:function lp(b,S,Z,Ee,st,Et){var on=Mi(b),pn=Mi(S),Pn=on?yn:ka(b),Ti=pn?yn:ka(S),Di=(Pn=Pn==Cn?Te:Pn)==Te,Hi=(Ti=Ti==Cn?Te:Ti)==Te,Dr=Pn==Ti;if(Dr&&Qr(b)){if(!Qr(S))return!1;on=!0,Di=!1}if(Dr&&!Di)return Et||(Et=new oa),on||Nc(b)?gd(b,S,Z,Ee,st,Et):function Jg(b,S,Z,Ee,st,Et,on){switch(Z){case el:if(b.byteLength!=S.byteLength||b.byteOffset!=S.byteOffset)return!1;b=b.buffer,S=S.buffer;case tr:return!(b.byteLength!=S.byteLength||!Et(new yf(b),new yf(S)));case be:case Dt:case un:return Kr(+b,+S);case ci:return b.name==S.name&&b.message==S.message;case vn:case Fi:return b==S+"";case Pt:var pn=Zf;case ri:if(pn||(pn=Hp),b.size!=S.size&&!(1&Ee))return!1;var Ti=on.get(b);if(Ti)return Ti==S;Ee|=2,on.set(b,S);var Di=gd(pn(b),pn(S),Ee,st,Et,on);return on.delete(b),Di;case Hs:if(wt)return wt.call(b)==wt.call(S)}return!1}(b,S,Pn,Z,Ee,st,Et);if(!(1&Z)){var Vr=Di&&ia.call(b,"__wrapped__"),ws=Hi&&ia.call(S,"__wrapped__");if(Vr||ws){var oo=Vr?b.value():b,As=ws?S.value():S;return Et||(Et=new oa),st(oo,As,Z,Ee,Et)}}return!!Dr&&(Et||(Et=new oa),function fh(b,S,Z,Ee,st,Et){var on=1&Z,pn=_u(b),Pn=pn.length;if(Pn!=_u(S).length&&!on)return!1;for(var Hi=Pn;Hi--;){var Dr=pn[Hi];if(!(on?Dr in S:ia.call(S,Dr)))return!1}var Vr=Et.get(b),ws=Et.get(S);if(Vr&&ws)return Vr==S&&ws==b;var oo=!0;Et.set(b,S),Et.set(S,b);for(var As=on;++Hi<Pn;){var lo=b[Dr=pn[Hi]],Fo=S[Dr];if(Ee)var Xd=on?Ee(Fo,lo,Dr,S,b,Et):Ee(lo,Fo,Dr,b,S,Et);if(!(Xd===D?lo===Fo||st(lo,Fo,Z,Ee,Et):Xd)){oo=!1;break}As||(As="constructor"==Dr)}if(oo&&!As){var Yd=b.constructor,Hc=S.constructor;Yd!=Hc&&"constructor"in b&&"constructor"in S&&!("function"==typeof Yd&&Yd instanceof Yd&&"function"==typeof Hc&&Hc instanceof Hc)&&(oo=!1)}return Et.delete(b),Et.delete(S),oo}(b,S,Z,Ee,st,Et))}(b,S,Z,Ee,kc,st))}function dd(b,S,Z,Ee){var st=Z.length,Et=st,on=!Ee;if(null==b)return!Et;for(b=ya(b);st--;){var pn=Z[st];if(on&&pn[2]?pn[1]!==b[pn[0]]:!(pn[0]in b))return!1}for(;++st<Et;){var Pn=(pn=Z[st])[0],Ti=b[Pn],Di=pn[1];if(on&&pn[2]){if(Ti===D&&!(Pn in b))return!1}else{var Hi=new oa;if(Ee)var Dr=Ee(Ti,Di,Pn,b,S,Hi);if(!(Dr===D?kc(Di,Ti,3,Ee,Hi):Dr))return!1}}return!0}function Hh(b){return!(!sr(b)||function Lf(b){return!!Em&&Em in b}(b))&&(hn(b)?tp:Se).test($d(b))}function Bd(b){return"function"==typeof b?b:null==b?Ch:"object"==typeof b?Mi(b)?Yp(b[0],b[1]):hd(b):e0(b)}function Jc(b){if(!vd(b))return V_(b);var S=[];for(var Z in ya(b))ia.call(b,Z)&&"constructor"!=Z&&S.push(Z);return S}function Wh(b,S){return b<S}function cp(b,S){var Z=-1,Ee=Cr(b)?Zn(b.length):[];return ah(b,function(st,Et,on){Ee[++Z]=S(st,Et,on)}),Ee}function hd(b){var S=em(b);return 1==S.length&&S[0][2]?nu(S[0][0],S[0][1]):function(Z){return Z===b||dd(Z,b,S)}}function Yp(b,S){return ng(b)&&Zh(S)?nu(ju(b),S):function(Z){var Ee=bb(Z,b);return Ee===D&&Ee===S?Ky(Z,b):kc(S,Ee,3)}}function Vo(b,S,Z,Ee,st){b!==S&&Uh(S,function(Et,on){if(st||(st=new oa),sr(Et))!function jh(b,S,Z,Ee,st,Et,on){var pn=Pf(b,Z),Pn=Pf(S,Z),Ti=on.get(Pn);if(Ti)Wg(b,Z,Ti);else{var Di=Et?Et(pn,Pn,Z+"",b,S,on):D,Hi=Di===D;if(Hi){var Dr=Mi(Pn),Vr=!Dr&&Qr(Pn),ws=!Dr&&!Vr&&Nc(Pn);Di=Pn,Dr||Vr||ws?Mi(pn)?Di=pn:Zr(pn)?Di=Js(pn):Vr?(Hi=!1,Di=mu(Pn,!0)):ws?(Hi=!1,Di=ec(Pn,!0)):Di=[]:Eo(Pn)||jr(Pn)?(Di=pn,jr(pn)?Di=K_(pn):(!sr(pn)||hn(pn))&&(Di=tg(Pn))):Hi=!1}Hi&&(on.set(Pn,Di),st(Di,Pn,Ee,Et,on),on.delete(Pn)),Wg(b,Z,Di)}}(b,S,on,Z,Vo,Ee,st);else{var pn=Ee?Ee(Pf(b,on),Et,on+"",b,S,st):D;pn===D&&(pn=Et),Wg(b,on,pn)}},Cu)}function zd(b,S){var Z=b.length;if(Z)return gc(S+=S<0?Z:0,Z)?b[S]:D}function Ka(b,S,Z){S=S.length?Ma(S,function(Et){return Mi(Et)?function(on){return Fu(on,1===Et.length?Et[0]:Et)}:Et}):[Ch];var Ee=-1;return S=Ma(S,Yl(rs())),function Xf(wn,oi){var Zn=wn.length;for(wn.sort(oi);Zn--;)wn[Zn]=wn[Zn].value;return wn}(cp(b,function(Et,on,pn){return{criteria:Ma(S,function(Ti){return Ti(Et)}),index:++Ee,value:Et}}),function(Et,on){return function Xg(b,S,Z){for(var Ee=-1,st=b.criteria,Et=S.criteria,on=st.length,pn=Z.length;++Ee<on;){var Pn=Bl(st[Ee],Et[Ee]);if(Pn)return Ee>=pn?Pn:Pn*("desc"==Z[Ee]?-1:1)}return b.index-S.index}(Et,on,Z)})}function Nu(b,S,Z){for(var Ee=-1,st=S.length,Et={};++Ee<st;){var on=S[Ee],pn=Fu(b,on);Z(pn,on)&&_o(Et,Jl(on,b),pn)}return Et}function La(b,S,Z,Ee){var st=Ee?uu:Da,Et=-1,on=S.length,pn=b;for(b===S&&(S=Js(S)),Z&&(pn=Ma(b,Yl(Z)));++Et<on;)for(var Pn=0,Ti=S[Et],Di=Z?Z(Ti):Ti;(Pn=st(pn,Di,Pn,Ee))>-1;)pn!==b&&Fg.call(pn,Pn,1),Fg.call(b,Pn,1);return b}function eu(b,S){for(var Z=b?S.length:0,Ee=Z-1;Z--;){var st=S[Z];if(Z==Ee||st!==Et){var Et=st;gc(st)?Fg.call(b,st,1):Bu(b,st)}}return b}function dh(b,S){return b+ra(Ro()*(S-b+1))}function Uo(b,S){var Z="";if(!b||S<1||S>kn)return Z;do{S%2&&(Z+=b),(S=ra(S/2))&&(b+=b)}while(S);return Z}function Os(b,S){return jd(tm(b,S,Ch),b+"")}function Ji(b){return Mv(Zy(b))}function km(b,S){var Z=Zy(b);return yh(Z,Af(S,0,Z.length))}function _o(b,S,Z,Ee){if(!sr(b))return b;for(var st=-1,Et=(S=Jl(S,b)).length,on=Et-1,pn=b;null!=pn&&++st<Et;){var Pn=ju(S[st]),Ti=Z;if("__proto__"===Pn||"constructor"===Pn||"prototype"===Pn)return b;if(st!=on){var Di=pn[Pn];(Ti=Ee?Ee(Di,Pn,pn):D)===D&&(Ti=sr(Di)?Di:gc(S[st+1])?[]:{})}Cf(pn,Pn,Ti),pn=pn[Pn]}return b}var If=oh?function(b,S){return oh.set(b,S),b}:Ch,Kp=ip?function(b,S){return ip(b,"toString",{configurable:!0,enumerable:!1,value:fx(S),writable:!0})}:Ch;function Zp(b){return yh(Zy(b))}function vl(b,S,Z){var Ee=-1,st=b.length;S<0&&(S=-S>st?0:st+S),(Z=Z>st?st:Z)<0&&(Z+=st),st=S>Z?0:Z-S>>>0,S>>>=0;for(var Et=Zn(st);++Ee<st;)Et[Ee]=b[Ee+S];return Et}function Sf(b,S){var Z;return ah(b,function(Ee,st,Et){return!(Z=S(Ee,st,Et))}),!!Z}function Ql(b,S,Z){var Ee=0,st=null==b?Ee:b.length;if("number"==typeof S&&S==S&&st<=2147483647){for(;Ee<st;){var Et=Ee+st>>>1,on=b[Et];null!==on&&!Hl(on)&&(Z?on<=S:on<S)?Ee=Et+1:st=Et}return st}return Qp(b,S,Ch,Z)}function Qp(b,S,Z,Ee){var st=0,Et=null==b?0:b.length;if(0===Et)return 0;for(var on=(S=Z(S))!=S,pn=null===S,Pn=Hl(S),Ti=S===D;st<Et;){var Di=ra((st+Et)/2),Hi=Z(b[Di]),Dr=Hi!==D,Vr=null===Hi,ws=Hi==Hi,oo=Hl(Hi);if(on)var As=Ee||ws;else As=Ti?ws&&(Ee||Dr):pn?ws&&Dr&&(Ee||!Vr):Pn?ws&&Dr&&!Vr&&(Ee||!oo):!Vr&&!oo&&(Ee?Hi<=S:Hi<S);As?st=Di+1:Et=Di}return pl(Et,4294967294)}function Jp(b,S){for(var Z=-1,Ee=b.length,st=0,Et=[];++Z<Ee;){var on=b[Z],pn=S?S(on):on;if(!Z||!Kr(pn,Pn)){var Pn=pn;Et[st++]=0===on?0:on}}return Et}function Pa(b){return"number"==typeof b?b:Hl(b)?NaN:+b}function Nl(b){if("string"==typeof b)return b;if(Mi(b))return Ma(b,Nl)+"";if(Hl(b))return At?At.call(b):"";var S=b+"";return"0"==S&&1/b==-bt?"-0":S}function Al(b,S,Z){var Ee=-1,st=qf,Et=b.length,on=!0,pn=[],Pn=pn;if(Z)on=!1,st=Ir;else if(Et>=200){var Ti=S?null:Zg(b);if(Ti)return Hp(Ti);on=!1,st=mf,Pn=new Mr}else Pn=S?[]:pn;e:for(;++Ee<Et;){var Di=b[Ee],Hi=S?S(Di):Di;if(Di=Z||0!==Di?Di:0,on&&Hi==Hi){for(var Dr=Pn.length;Dr--;)if(Pn[Dr]===Hi)continue e;S&&Pn.push(Hi),pn.push(Di)}else st(Pn,Hi,Z)||(Pn!==pn&&Pn.push(Hi),pn.push(Di))}return pn}function Bu(b,S){return null==(b=yl(b,S=Jl(S,b)))||delete b[ju(bu(S))]}function $h(b,S,Z,Ee){return _o(b,S,Z(Fu(b,S)),Ee)}function Ua(b,S,Z,Ee){for(var st=b.length,Et=Ee?st:-1;(Ee?Et--:++Et<st)&&S(b[Et],Et,b););return Z?vl(b,Ee?0:Et,Ee?Et+1:st):vl(b,Ee?Et+1:0,Ee?st:Et)}function gu(b,S){var Z=b;return Z instanceof Ps&&(Z=Z.value()),gf(S,function(Ee,st){return st.func.apply(st.thisArg,Dd([Ee],st.args))},Z)}function zu(b,S,Z){var Ee=b.length;if(Ee<2)return Ee?Al(b[0]):[];for(var st=-1,Et=Zn(Ee);++st<Ee;)for(var on=b[st],pn=-1;++pn<Ee;)pn!=st&&(Et[st]=Vh(Et[st]||on,b[pn],S,Z));return Al(sl(Et,1),S,Z)}function Vu(b,S,Z){for(var Ee=-1,st=b.length,Et=S.length,on={};++Ee<st;)Z(on,b[Ee],Ee<Et?S[Ee]:D);return on}function Il(b){return Zr(b)?b:[]}function Ra(b){return"function"==typeof b?b:Ch}function Jl(b,S){return Mi(b)?b:ng(b,S)?[b]:rg(ta(b))}var up=Os;function dc(b,S,Z){var Ee=b.length;return Z=Z===D?Ee:Z,!S&&Z>=Ee?b:vl(b,S,Z)}var Rv=Oy||function(b){return ql.clearTimeout(b)};function mu(b,S){if(S)return b.slice();var Z=b.length,Ee=ky?ky(Z):new b.constructor(Z);return b.copy(Ee),Ee}function Sl(b){var S=new b.constructor(b.byteLength);return new yf(S).set(new yf(b)),S}function ec(b,S){var Z=S?Sl(b.buffer):b.buffer;return new b.constructor(Z,b.byteOffset,b.length)}function Bl(b,S){if(b!==S){var Z=b!==D,Ee=null===b,st=b==b,Et=Hl(b),on=S!==D,pn=null===S,Pn=S==S,Ti=Hl(S);if(!pn&&!Ti&&!Et&&b>S||Et&&on&&Pn&&!pn&&!Ti||Ee&&on&&Pn||!Z&&Pn||!st)return 1;if(!Ee&&!Et&&!Ti&&b<S||Ti&&Z&&st&&!Ee&&!Et||pn&&Z&&st||!on&&st||!Pn)return-1}return 0}function Fm(b,S,Z,Ee){for(var st=-1,Et=b.length,on=Z.length,pn=-1,Pn=S.length,Ti=ms(Et-on,0),Di=Zn(Pn+Ti),Hi=!Ee;++pn<Pn;)Di[pn]=S[pn];for(;++st<on;)(Hi||st<Et)&&(Di[Z[st]]=b[st]);for(;Ti--;)Di[pn++]=b[st++];return Di}function Ud(b,S,Z,Ee){for(var st=-1,Et=b.length,on=-1,pn=Z.length,Pn=-1,Ti=S.length,Di=ms(Et-pn,0),Hi=Zn(Di+Ti),Dr=!Ee;++st<Di;)Hi[st]=b[st];for(var Vr=st;++Pn<Ti;)Hi[Vr+Pn]=S[Pn];for(;++on<pn;)(Dr||st<Et)&&(Hi[Vr+Z[on]]=b[st++]);return Hi}function Js(b,S){var Z=-1,Ee=b.length;for(S||(S=Zn(Ee));++Z<Ee;)S[Z]=b[Z];return S}function fc(b,S,Z,Ee){var st=!Z;Z||(Z={});for(var Et=-1,on=S.length;++Et<on;){var pn=S[Et],Pn=Ee?Ee(Z[pn],b[pn],pn,Z,b):D;Pn===D&&(Pn=b[pn]),st?Od(Z,pn,Pn):Cf(Z,pn,Pn)}return Z}function Hd(b,S){return function(Z,Ee){var st=Mi(Z)?$f:xf,Et=S?S():{};return st(Z,b,rs(Ee,2),Et)}}function vu(b){return Os(function(S,Z){var Ee=-1,st=Z.length,Et=st>1?Z[st-1]:D,on=st>2?Z[2]:D;for(Et=b.length>3&&"function"==typeof Et?(st--,Et):D,on&&mc(Z[0],Z[1],on)&&(Et=st<3?D:Et,st=1),S=ya(S);++Ee<st;){var pn=Z[Ee];pn&&b(S,pn,Ee,Et)}return S})}function Ef(b,S){return function(Z,Ee){if(null==Z)return Z;if(!Cr(Z))return b(Z,Ee);for(var st=Z.length,Et=S?st:-1,on=ya(Z);(S?Et--:++Et<st)&&!1!==Ee(on[Et],Et,on););return Z}}function Tf(b){return function(S,Z,Ee){for(var st=-1,Et=ya(S),on=Ee(S),pn=on.length;pn--;){var Pn=on[b?pn:++st];if(!1===Z(Et[Pn],Pn,Et))break}return S}}function pc(b){return function(S){var Z=ad(S=ta(S))?ld(S):D,Ee=Z?Z[0]:S.charAt(0),st=Z?dc(Z,1).join(""):S.slice(1);return Ee[b]()+st}}function El(b){return function(S){return gf(KA(qs(S).replace(k_,"")),b,"")}}function Gd(b){return function(){var S=arguments;switch(S.length){case 0:return new b;case 1:return new b(S[0]);case 2:return new b(S[0],S[1]);case 3:return new b(S[0],S[1],S[2]);case 4:return new b(S[0],S[1],S[2],S[3]);case 5:return new b(S[0],S[1],S[2],S[3],S[4]);case 6:return new b(S[0],S[1],S[2],S[3],S[4],S[5]);case 7:return new b(S[0],S[1],S[2],S[3],S[4],S[5],S[6])}var Z=ko(b.prototype),Ee=b.apply(Z,S);return sr(Ee)?Ee:Z}}function Uu(b){return function(S,Z,Ee){var st=ya(S);if(!Cr(S)){var Et=rs(Z,3);S=Uc(S),Z=function(pn){return Et(st[pn],pn,st)}}var on=b(S,Z,Ee);return on>-1?st[Et?S[on]:on]:D}}function hh(b){return tc(function(S){var Z=S.length,Ee=Z,st=sa.prototype.thru;for(b&&S.reverse();Ee--;){var Et=S[Ee];if("function"!=typeof Et)throw new Rd(P);if(st&&!on&&"wrapper"==pp(Et))var on=new sa([],!0)}for(Ee=on?Ee:Z;++Ee<Z;){var pn=pp(Et=S[Ee]),Pn="wrapper"==pn?ph(Et):D;on=Pn&&Wu(Pn[0])&&424==Pn[1]&&!Pn[4].length&&1==Pn[9]?on[pp(Pn[0])].apply(on,Pn[3]):1==Et.length&&Wu(Et)?on[pn]():on.thru(Et)}return function(){var Ti=arguments,Di=Ti[0];if(on&&1==Ti.length&&Mi(Di))return on.plant(Di).value();for(var Hi=0,Dr=Z?S[Hi].apply(this,Ti):Di;++Hi<Z;)Dr=S[Hi].call(this,Dr);return Dr}})}function jn(b,S,Z,Ee,st,Et,on,pn,Pn,Ti){var Di=128&S,Hi=1&S,Dr=2&S,Vr=24&S,ws=512&S,oo=Dr?D:Gd(b);return function As(){for(var lo=arguments.length,Fo=Zn(lo),Xd=lo;Xd--;)Fo[Xd]=arguments[Xd];if(Vr)var Yd=Gu(As),Hc=vf(Fo,Yd);if(Ee&&(Fo=Fm(Fo,Ee,st,Vr)),Et&&(Fo=Ud(Fo,Et,on,Vr)),lo-=Hc,Vr&&lo<Ti){var ic=hu(Fo,Yd);return Hu(b,S,jn,As.placeholder,Z,Fo,ic,pn,Pn,Ti-lo)}var Ap=Hi?Z:this,Ip=Dr?Ap[b]:b;return lo=Fo.length,pn?Fo=ca(Fo,pn):ws&&lo>1&&Fo.reverse(),Di&&Pn<lo&&(Fo.length=Pn),this&&this!==ql&&this instanceof As&&(Ip=oo||Gd(Ip)),Ip.apply(Ap,Fo)}}function Mf(b,S){return function(Z,Ee){return function yo(b,S,Z,Ee){return Pc(b,function(st,Et,on){S(Ee,Z(st),Et,on)}),Ee}(Z,b,S(Ee),{})}}function ha(b,S){return function(Z,Ee){var st;if(Z===D&&Ee===D)return S;if(Z!==D&&(st=Z),Ee!==D){if(st===D)return Ee;"string"==typeof Z||"string"==typeof Ee?(Z=Nl(Z),Ee=Nl(Ee)):(Z=Pa(Z),Ee=Pa(Ee)),st=b(Z,Ee)}return st}}function Xh(b){return tc(function(S){return S=Ma(S,Yl(rs())),Os(function(Z){var Ee=this;return b(S,function(st){return Xa(st,Ee,Z)})})})}function yu(b,S){var Z=(S=S===D?" ":Nl(S)).length;if(Z<2)return Z?Uo(S,b):S;var Ee=Uo(S,Ev(b/rl(S)));return ad(S)?dc(ld(Ee),0,b).join(""):Ee.slice(0,b)}function Kg(b){return function(S,Z,Ee){return Ee&&"number"!=typeof Ee&&mc(S,Z,Ee)&&(Z=Ee=D),S=Vc(S),Z===D?(Z=S,S=0):Z=Vc(Z),function la(b,S,Z,Ee){for(var st=-1,Et=ms(Ev((S-b)/(Z||1)),0),on=Zn(Et);Et--;)on[Ee?Et:++st]=b,b+=Z;return on}(S,Z,Ee=Ee===D?S<Z?1:-1:Vc(Ee),b)}}function hp(b){return function(S,Z){return"string"==typeof S&&"string"==typeof Z||(S=_h(S),Z=_h(Z)),b(S,Z)}}function Hu(b,S,Z,Ee,st,Et,on,pn,Pn,Ti){var Di=8&S;S|=Di?$:64,4&(S&=~(Di?64:$))||(S&=-4);var oo=[b,S,st,Di?Et:D,Di?on:D,Di?D:Et,Di?D:on,pn,Pn,Ti],As=Z.apply(D,oo);return Wu(b)&&ig(As,oo),As.placeholder=Ee,vh(As,b,S)}function Tl(b){var S=Kl[b];return function(Z,Ee){if(Z=_h(Z),(Ee=null==Ee?0:pl(Zs(Ee),292))&&zg(Z)){var st=(ta(Z)+"e").split("e");return+((st=(ta(S(st[0]+"e"+(+st[1]+Ee)))+"e").split("e"))[0]+"e"+(+st[1]-Ee))}return S(Z)}}var Zg=es&&1/Hp(new es([,-0]))[1]==bt?function(b){return new es(b)}:mx;function pd(b){return function(S){var Z=ka(S);return Z==Pt?Zf(S):Z==ri?function Jf(wn){var oi=-1,Zn=Array(wn.size);return wn.forEach(function(Rr){Zn[++oi]=[Rr,Rr]}),Zn}(S):function il(wn,oi){return Ma(oi,function(Zn){return[Zn,wn[Zn]]})}(S,b(S))}}function tu(b,S,Z,Ee,st,Et,on,pn){var Pn=2&S;if(!Pn&&"function"!=typeof b)throw new Rd(P);var Ti=Ee?Ee.length:0;if(Ti||(S&=-97,Ee=st=D),on=on===D?on:ms(Zs(on),0),pn=pn===D?pn:Zs(pn),Ti-=st?st.length:0,64&S){var Di=Ee,Hi=st;Ee=st=D}var Dr=Pn?D:ph(b),Vr=[b,S,Z,Ee,st,Di,Hi,Et,on,pn];if(Dr&&function vp(b,S){var Z=b[1],Ee=S[1],st=Z|Ee;if(!(st<131||(128==Ee&&8==Z||128==Ee&&256==Z&&b[7].length<=S[8]||384==Ee&&S[7].length<=S[8]&&8==Z)))return b;1&Ee&&(b[2]=S[2],st|=1&Z?0:4);var pn=S[3];if(pn){var Pn=b[3];b[3]=Pn?Fm(Pn,pn,S[4]):pn,b[4]=Pn?hu(b[3],J):S[4]}(pn=S[5])&&(b[5]=(Pn=b[5])?Ud(Pn,pn,S[6]):pn,b[6]=Pn?hu(b[5],J):S[6]),(pn=S[7])&&(b[7]=pn),128&Ee&&(b[8]=null==b[8]?S[8]:pl(b[8],S[8])),null==b[9]&&(b[9]=S[9]),b[0]=S[0],b[1]=st}(Vr,Dr),b=Vr[0],S=Vr[1],Z=Vr[2],Ee=Vr[3],st=Vr[4],!(pn=Vr[9]=Vr[9]===D?Pn?0:b.length:ms(Vr[9]-Ti,0))&&24&S&&(S&=-25),S&&1!=S)ws=8==S||16==S?function qh(b,S,Z){var Ee=Gd(b);return function st(){for(var Et=arguments.length,on=Zn(Et),pn=Et,Pn=Gu(st);pn--;)on[pn]=arguments[pn];var Ti=Et<3&&on[0]!==Pn&&on[Et-1]!==Pn?[]:hu(on,Pn);return(Et-=Ti.length)<Z?Hu(b,S,jn,st.placeholder,D,on,Ti,D,D,Z-Et):Xa(this&&this!==ql&&this instanceof st?Ee:b,this,on)}}(b,S,pn):S!=$&&33!=S||st.length?jn.apply(D,Vr):function Nm(b,S,Z,Ee){var st=1&S,Et=Gd(b);return function on(){for(var pn=-1,Pn=arguments.length,Ti=-1,Di=Ee.length,Hi=Zn(Di+Pn),Dr=this&&this!==ql&&this instanceof on?Et:b;++Ti<Di;)Hi[Ti]=Ee[Ti];for(;Pn--;)Hi[Ti++]=arguments[++pn];return Xa(Dr,st?Z:this,Hi)}}(b,S,Z,Ee);else var ws=function Yg(b,S,Z){var Ee=1&S,st=Gd(b);return function Et(){return(this&&this!==ql&&this instanceof Et?st:b).apply(Ee?Z:this,arguments)}}(b,S,Z);return vh((Dr?If:ig)(ws,Vr),b,S)}function Qg(b,S,Z,Ee){return b===D||Kr(b,Og[Z])&&!ia.call(Ee,Z)?S:b}function fp(b,S,Z,Ee,st,Et){return sr(b)&&sr(S)&&(Et.set(S,b),Vo(b,S,D,fp,Et),Et.delete(S)),b}function zl(b){return Eo(b)?D:b}function gd(b,S,Z,Ee,st,Et){var on=1&Z,pn=b.length,Pn=S.length;if(pn!=Pn&&!(on&&Pn>pn))return!1;var Ti=Et.get(b),Di=Et.get(S);if(Ti&&Di)return Ti==S&&Di==b;var Hi=-1,Dr=!0,Vr=2&Z?new Mr:D;for(Et.set(b,S),Et.set(S,b);++Hi<pn;){var ws=b[Hi],oo=S[Hi];if(Ee)var As=on?Ee(oo,ws,Hi,S,b,Et):Ee(ws,oo,Hi,b,S,Et);if(As!==D){if(As)continue;Dr=!1;break}if(Vr){if(!Am(S,function(lo,Fo){if(!mf(Vr,Fo)&&(ws===lo||st(ws,lo,Z,Ee,Et)))return Vr.push(Fo)})){Dr=!1;break}}else if(ws!==oo&&!st(ws,oo,Z,Ee,Et)){Dr=!1;break}}return Et.delete(b),Et.delete(S),Dr}function tc(b){return jd(tm(b,D,kf),b+"")}function _u(b){return fu(b,Uc,mp)}function Yh(b){return fu(b,Cu,eg)}var ph=oh?function(b){return oh.get(b)}:mx;function pp(b){for(var S=b.name+"",Z=jp[S],Ee=ia.call(jp,S)?Z.length:0;Ee--;){var st=Z[Ee],Et=st.func;if(null==Et||Et==b)return st.name}return S}function Gu(b){return(ia.call(dt,"placeholder")?dt:b).placeholder}function rs(){var b=dt.iteratee||wb;return b=b===wb?Bd:b,arguments.length?b(arguments[0],arguments[1]):b}function gp(b,S){var Z=b.__data__;return function Um(b){var S=typeof b;return"string"==S||"number"==S||"symbol"==S||"boolean"==S?"__proto__"!==b:null===b}(S)?Z["string"==typeof S?"string":"hash"]:Z.map}function em(b){for(var S=Uc(b),Z=S.length;Z--;){var Ee=S[Z],st=b[Ee];S[Z]=[Ee,st,Zh(st)]}return S}function Kh(b,S){var Z=function od(wn,oi){return null==wn?D:wn[oi]}(b,S);return Hh(Z)?Z:D}var mp=Bg?function(b){return null==b?[]:(b=ya(b),sd(Bg(b),function(S){return Dm.call(b,S)}))}:t0,eg=Bg?function(b){for(var S=[];b;)Dd(S,mp(b)),b=np(b);return S}:t0,ka=aa;function zm(b,S,Z){for(var Ee=-1,st=(S=Jl(S,b)).length,Et=!1;++Ee<st;){var on=ju(S[Ee]);if(!(Et=null!=b&&Z(b,on)))break;b=b[on]}return Et||++Ee!=st?Et:!!(st=null==b?0:b.length)&&Qi(st)&&gc(on,st)&&(Mi(b)||jr(b))}function tg(b){return"function"!=typeof b.constructor||vd(b)?{}:ko(np(b))}function Oa(b){return Mi(b)||jr(b)||!!(Ng&&b&&b[Ng])}function gc(b,S){var Z=typeof b;return!!(S=S??kn)&&("number"==Z||"symbol"!=Z&&_t.test(b))&&b>-1&&b%1==0&&b<S}function mc(b,S,Z){if(!sr(Z))return!1;var Ee=typeof S;return!!("number"==Ee?Cr(Z)&&gc(S,Z.length):"string"==Ee&&S in Z)&&Kr(Z[S],b)}function ng(b,S){if(Mi(b))return!1;var Z=typeof b;return!("number"!=Z&&"symbol"!=Z&&"boolean"!=Z&&null!=b&&!Hl(b))||ff.test(b)||!nd.test(b)||null!=S&&b in ya(S)}function Wu(b){var S=pp(b),Z=dt[S];if("function"!=typeof Z||!(S in Ps.prototype))return!1;if(b===Z)return!0;var Ee=ph(Z);return!!Ee&&b===Ee[0]}($s&&ka(new $s(new ArrayBuffer(1)))!=el||Wr&&ka(new Wr)!=Pt||Vg&&ka(Vg.resolve())!=De||es&&ka(new es)!=ri||os&&ka(new os)!=Cs)&&(ka=function(b){var S=aa(b),Z=S==Te?b.constructor:D,Ee=Z?$d(Z):"";if(Ee)switch(Ee){case U_:return el;case Ny:return Pt;case Ks:return De;case Qc:return ri;case mi:return Cs}return S});var gh=Av?hn:wp;function vd(b){var S=b&&b.constructor;return b===("function"==typeof S&&S.prototype||Og)}function Zh(b){return b==b&&!sr(b)}function nu(b,S){return function(Z){return null!=Z&&Z[b]===S&&(S!==D||b in ya(Z))}}function tm(b,S,Z){return S=ms(S===D?b.length-1:S,0),function(){for(var Ee=arguments,st=-1,Et=ms(Ee.length-S,0),on=Zn(Et);++st<Et;)on[st]=Ee[S+st];st=-1;for(var pn=Zn(S+1);++st<S;)pn[st]=Ee[st];return pn[S]=Z(on),Xa(b,this,pn)}}function yl(b,S){return S.length<2?b:Fu(b,vl(S,0,-1))}function ca(b,S){for(var Z=b.length,Ee=pl(S.length,Z),st=Js(b);Ee--;){var Et=S[Ee];b[Ee]=gc(Et,Z)?st[Et]:D}return b}function Pf(b,S){if(("constructor"!==S||"function"!=typeof b[S])&&"__proto__"!=S)return b[S]}var ig=Qh(If),Wd=Fy||function(b,S){return ql.setTimeout(b,S)},jd=Qh(Kp);function vh(b,S,Z){var Ee=S+"";return jd(b,function Oc(b,S){var Z=S.length;if(!Z)return b;var Ee=Z-1;return S[Ee]=(Z>1?"& ":"")+S[Ee],S=S.join(Z>2?", ":" "),b.replace(pf,"{\n/* [wrapped with "+S+"] */\n")}(Ee,function sg(b,S){return Ya(xn,function(Z){var Ee="_."+Z[0];S&Z[1]&&!qf(b,Ee)&&b.push(Ee)}),b.sort()}(function Vl(b){var S=b.match(fl);return S?S[1].split(Ac):[]}(Ee),Z)))}function Qh(b){var S=0,Z=0;return function(){var Ee=Mc(),st=16-(Ee-Z);if(Z=Ee,st>0){if(++S>=800)return arguments[0]}else S=0;return b.apply(D,arguments)}}function yh(b,S){var Z=-1,Ee=b.length,st=Ee-1;for(S=S===D?Ee:S;++Z<S;){var Et=dh(Z,st),on=b[Et];b[Et]=b[Z],b[Z]=on}return b.length=S,b}var rg=function mh(b){var S=mn(b,function(Ee){return 500===Z.size&&Z.clear(),Ee}),Z=S.cache;return S}(function(b){var S=[];return 46===b.charCodeAt(0)&&S.push(""),b.replace(Ph,function(Z,Ee,st,Et){S.push(st?Et.replace(ih,"$1"):Ee||Z)}),S});function ju(b){if("string"==typeof b||Hl(b))return b;var S=b+"";return"0"==S&&1/b==-bt?"-0":S}function $d(b){if(null!=b){try{return Iv.call(b)}catch{}try{return b+""}catch{}}return""}function nm(b){if(b instanceof Ps)return b.clone();var S=new sa(b.__wrapped__,b.__chain__);return S.__actions__=Js(b.__actions__),S.__index__=b.__index__,S.__values__=b.__values__,S}var Fc=Os(function(b,S){return Zr(b)?Vh(b,sl(S,1,Zr,!0)):[]}),Rf=Os(function(b,S){var Z=bu(S);return Zr(Z)&&(Z=D),Zr(b)?Vh(b,sl(S,1,Zr,!0),rs(Z,2)):[]}),Gm=Os(function(b,S){var Z=bu(S);return Zr(Z)&&(Z=D),Zr(b)?Vh(b,sl(S,1,Zr,!0),D,Z):[]});function ll(b,S,Z){var Ee=null==b?0:b.length;if(!Ee)return-1;var st=null==Z?0:Zs(Z);return st<0&&(st=ms(Ee+st,0)),kl(b,rs(S,3),st)}function Wm(b,S,Z){var Ee=null==b?0:b.length;if(!Ee)return-1;var st=Ee-1;return Z!==D&&(st=Zs(Z),st=Z<0?ms(Ee+st,0):pl(st,Ee-1)),kl(b,rs(S,3),st,!0)}function kf(b){return null!=b&&b.length?sl(b,1):[]}function Gy(b){return b&&b.length?b[0]:D}var $_=Os(function(b){var S=Ma(b,Il);return S.length&&S[0]===b[0]?pu(S):[]}),Wy=Os(function(b){var S=bu(b),Z=Ma(b,Il);return S===bu(Z)?S=D:Z.pop(),Z.length&&Z[0]===b[0]?pu(Z,rs(S,2)):[]}),jm=Os(function(b){var S=bu(b),Z=Ma(b,Il);return(S="function"==typeof S?S:D)&&Z.pop(),Z.length&&Z[0]===b[0]?pu(Z,D,S):[]});function bu(b){var S=null==b?0:b.length;return S?b[S-1]:D}var wa=Os(Nv);function Nv(b,S){return b&&b.length&&S&&S.length?La(b,S):b}var jy=tc(function(b,S){var Z=null==b?0:b.length,Ee=wf(b,S);return eu(b,Ma(S,function(st){return gc(st,Z)?+st:st}).sort(Bl)),Ee});function $m(b){return null==b?b:Or.call(b)}var R=Os(function(b){return Al(sl(b,1,Zr,!0))}),N=Os(function(b){var S=bu(b);return Zr(S)&&(S=D),Al(sl(b,1,Zr,!0),rs(S,2))}),ie=Os(function(b){var S=bu(b);return S="function"==typeof S?S:D,Al(sl(b,1,Zr,!0),D,S)});function Le(b){if(!b||!b.length)return[];var S=0;return b=sd(b,function(Z){if(Zr(Z))return S=ms(Z.length,S),!0}),sh(S,function(Z){return Ma(b,Ss(Z))})}function ke(b,S){if(!b||!b.length)return[];var Z=Le(b);return null==S?Z:Ma(Z,function(Ee){return Xa(S,D,Ee)})}var Fe=Os(function(b,S){return Zr(b)?Vh(b,S):[]}),nt=Os(function(b){return zu(sd(b,Zr))}),tt=Os(function(b){var S=bu(b);return Zr(S)&&(S=D),zu(sd(b,Zr),rs(S,2))}),Ke=Os(function(b){var S=bu(b);return S="function"==typeof S?S:D,zu(sd(b,Zr),D,S)}),pt=Os(Le),Bt=Os(function(b){var S=b.length,Z=S>1?b[S-1]:D;return Z="function"==typeof Z?(b.pop(),Z):D,ke(b,Z)});function cn(b){var S=dt(b);return S.__chain__=!0,S}function en(b,S){return S(b)}var dn=tc(function(b){var S=b.length,Z=S?b[0]:0,Ee=this.__wrapped__,st=function(Et){return wf(Et,b)};return!(S>1||this.__actions__.length)&&Ee instanceof Ps&&gc(Z)?((Ee=Ee.slice(Z,+Z+(S?1:0))).__actions__.push({func:en,args:[st],thisArg:D}),new sa(Ee,this.__chain__).thru(function(Et){return S&&!Et.length&&Et.push(D),Et})):this.thru(st)}),Ii=Hd(function(b,S,Z){ia.call(b,Z)?++b[Z]:Od(b,Z,1)}),ir=Uu(ll),zi=Uu(Wm);function c(b,S){return(Mi(b)?Ya:ah)(b,rs(S,3))}function h(b,S){return(Mi(b)?nl:Lv)(b,rs(S,3))}var m=Hd(function(b,S,Z){ia.call(b,Z)?b[Z].push(S):Od(b,Z,[S])}),C=Os(function(b,S,Z){var Ee=-1,st="function"==typeof S,Et=Cr(b)?Zn(b.length):[];return ah(b,function(on){Et[++Ee]=st?Xa(S,on,Z):Rc(on,S,Z)}),Et}),w=Hd(function(b,S,Z){Od(b,Z,S)});function E(b,S){return(Mi(b)?Ma:cp)(b,rs(S,3))}var L=Hd(function(b,S,Z){b[Z?0:1].push(S)},function(){return[[],[]]}),Qe=Os(function(b,S){if(null==b)return[];var Z=S.length;return Z>1&&mc(b,S[0],S[1])?S=[]:Z>2&&mc(S[0],S[1],S[2])&&(S=[S[0]]),Ka(b,sl(S,1),[])}),qe=Lm||function(){return ql.Date.now()};function Lt(b,S,Z){return S=Z?D:S,tu(b,128,D,D,D,D,S=b&&null==S?b.length:S)}function kt(b,S){var Z;if("function"!=typeof S)throw new Rd(P);return b=Zs(b),function(){return--b>0&&(Z=S.apply(this,arguments)),b<=1&&(S=D),Z}}var mt=Os(function(b,S,Z){var Ee=1;if(Z.length){var st=hu(Z,Gu(mt));Ee|=$}return tu(b,Ee,S,Z,st)}),Ft=Os(function(b,S,Z){var Ee=3;if(Z.length){var st=hu(Z,Gu(Ft));Ee|=$}return tu(S,Ee,b,Z,st)});function Vt(b,S,Z){var Ee,st,Et,on,pn,Pn,Ti=0,Di=!1,Hi=!1,Dr=!0;if("function"!=typeof b)throw new Rd(P);function Vr(ic){var Ap=Ee,Ip=st;return Ee=st=D,Ti=ic,on=b.apply(Ip,Ap)}function ws(ic){return Ti=ic,pn=Wd(lo,S),Di?Vr(ic):on}function As(ic){var Ap=ic-Pn;return Pn===D||Ap>=S||Ap<0||Hi&&ic-Ti>=Et}function lo(){var ic=qe();if(As(ic))return Fo(ic);pn=Wd(lo,function oo(ic){var aI=S-(ic-Pn);return Hi?pl(aI,Et-(ic-Ti)):aI}(ic))}function Fo(ic){return pn=D,Dr&&Ee?Vr(ic):(Ee=st=D,on)}function Hc(){var ic=qe(),Ap=As(ic);if(Ee=arguments,st=this,Pn=ic,Ap){if(pn===D)return ws(Pn);if(Hi)return Rv(pn),pn=Wd(lo,S),Vr(Pn)}return pn===D&&(pn=Wd(lo,S)),on}return S=_h(S)||0,sr(Z)&&(Di=!!Z.leading,Et=(Hi="maxWait"in Z)?ms(_h(Z.maxWait)||0,S):Et,Dr="trailing"in Z?!!Z.trailing:Dr),Hc.cancel=function Xd(){pn!==D&&Rv(pn),Ti=0,Ee=Pn=st=pn=D},Hc.flush=function Yd(){return pn===D?on:Fo(qe())},Hc}var et=Os(function(b,S){return zy(b,1,S)}),Gt=Os(function(b,S,Z){return zy(b,_h(S)||0,Z)});function mn(b,S){if("function"!=typeof b||null!=S&&"function"!=typeof S)throw new Rd(P);var Z=function(){var Ee=arguments,st=S?S.apply(this,Ee):Ee[0],Et=Z.cache;if(Et.has(st))return Et.get(st);var on=b.apply(this,Ee);return Z.cache=Et.set(st,on)||Et,on};return Z.cache=new(mn.Cache||is),Z}function Yt(b){if("function"!=typeof b)throw new Rd(P);return function(){var S=arguments;switch(S.length){case 0:return!b.call(this);case 1:return!b.call(this,S[0]);case 2:return!b.call(this,S[0],S[1]);case 3:return!b.call(this,S[0],S[1],S[2])}return!b.apply(this,S)}}mn.Cache=is;var Sn=up(function(b,S){var Z=(S=1==S.length&&Mi(S[0])?Ma(S[0],Yl(rs())):Ma(sl(S,1),Yl(rs()))).length;return Os(function(Ee){for(var st=-1,Et=pl(Ee.length,Z);++st<Et;)Ee[st]=S[st].call(this,Ee[st]);return Xa(b,this,Ee)})}),Rn=Os(function(b,S){var Z=hu(S,Gu(Rn));return tu(b,$,D,S,Z)}),Jn=Os(function(b,S){var Z=hu(S,Gu(Jn));return tu(b,64,D,S,Z)}),En=tc(function(b,S){return tu(b,256,D,D,D,S)});function Kr(b,S){return b===S||b!=b&&S!=S}var hr=hp(lh),nr=hp(function(b,S){return b>=S}),jr=js(function(){return arguments}())?js:function(b){return ni(b)&&ia.call(b,"callee")&&!Dm.call(b,"callee")},Mi=Zn.isArray,gr=Ta?Yl(Ta):function op(b){return ni(b)&&aa(b)==tr};function Cr(b){return null!=b&&Qi(b.length)&&!hn(b)}function Zr(b){return ni(b)&&Cr(b)}var Qr=Wp||wp,Ui=io?Yl(io):function ap(b){return ni(b)&&aa(b)==Dt};function ut(b){if(!ni(b))return!1;var S=aa(b);return S==ci||"[object DOMException]"==S||"string"==typeof b.message&&"string"==typeof b.name&&!Eo(b)}function hn(b){if(!sr(b))return!1;var S=aa(b);return S==$i||S==It||"[object AsyncFunction]"==S||"[object Proxy]"==S}function gn(b){return"number"==typeof b&&b==Zs(b)}function Qi(b){return"number"==typeof b&&b>-1&&b%1==0&&b<=kn}function sr(b){var S=typeof b;return null!=b&&("object"==S||"function"==S)}function ni(b){return null!=b&&"object"==typeof b}var Fr=N_?Yl(N_):function qg(b){return ni(b)&&ka(b)==Pt};function Ho(b){return"number"==typeof b||ni(b)&&aa(b)==un}function Eo(b){if(!ni(b)||aa(b)!=Te)return!1;var S=np(b);if(null===S)return!0;var Z=ia.call(S,"constructor")&&S.constructor;return"function"==typeof Z&&Z instanceof Z&&Iv.call(Z)==ub}var Yo=Dy?Yl(Dy):function Gh(b){return ni(b)&&aa(b)==vn},Ha=kh?Yl(kh):function Zl(b){return ni(b)&&ka(b)==ri};function Ul(b){return"string"==typeof b||!Mi(b)&&ni(b)&&aa(b)==Fi}function Hl(b){return"symbol"==typeof b||ni(b)&&aa(b)==Hs}var Nc=mo?Yl(mo):function al(b){return ni(b)&&Qi(b.length)&&!!Ea[aa(b)]},nc=hp(Wh),zc=hp(function(b,S){return b<=S});function bp(b){if(!b)return[];if(Cr(b))return Ul(b)?ld(b):Js(b);if(Gp&&b[Gp])return function va(wn){for(var oi,Zn=[];!(oi=wn.next()).done;)Zn.push(oi.value);return Zn}(b[Gp]());var S=ka(b);return(S==Pt?Zf:S==ri?Hp:Zy)(b)}function Vc(b){return b?(b=_h(b))===bt||b===-bt?17976931348623157e292*(b<0?-1:1):b==b?b:0:0===b?b:0}function Zs(b){var S=Vc(b),Z=S%1;return S==S?Z?S-Z:S:0}function gb(b){return b?Af(Zs(b),0,Jt):0}function _h(b){if("number"==typeof b)return b;if(Hl(b))return NaN;if(sr(b)){var S="function"==typeof b.valueOf?b.valueOf():b;b=sr(S)?S+"":S}if("string"!=typeof b)return 0===b?b:+b;b=Up(b);var Z=de.test(b);return Z||$e.test(b)?yv(b.slice(2),Z?2:8):Ye.test(b)?NaN:+b}function K_(b){return fc(b,Cu(b))}function ta(b){return null==b?"":Nl(b)}var Q_=vu(function(b,S){if(vd(S)||Cr(S))fc(S,Uc(S),b);else for(var Z in S)ia.call(S,Z)&&Cf(b,Z,S[Z])}),mb=vu(function(b,S){fc(S,Cu(S),b)}),lg=vu(function(b,S,Z,Ee){fc(S,Cu(S),b,Ee)}),Yy=vu(function(b,S,Z,Ee){fc(S,Uc(S),b,Ee)}),Vv=tc(wf),J_=Os(function(b,S){b=ya(b);var Z=-1,Ee=S.length,st=Ee>2?S[2]:D;for(st&&mc(S[0],S[1],st)&&(Ee=1);++Z<Ee;)for(var Et=S[Z],on=Cu(Et),pn=-1,Pn=on.length;++pn<Pn;){var Ti=on[pn],Di=b[Ti];(Di===D||Kr(Di,Og[Ti])&&!ia.call(b,Ti))&&(b[Ti]=Et[Ti])}return b}),vb=Os(function(b){return b.push(D,fp),Xa(RA,D,b)});function bb(b,S,Z){var Ee=null==b?D:Fu(b,S);return Ee===D?Z:Ee}function Ky(b,S){return null!=b&&zm(b,S,$g)}var DA=Mf(function(b,S,Z){null!=S&&"function"!=typeof S.toString&&(S=Tm.call(S)),b[S]=Z},fx(Ch)),lx=Mf(function(b,S,Z){null!=S&&"function"!=typeof S.toString&&(S=Tm.call(S)),ia.call(b,S)?b[S].push(Z):b[S]=[Z]},rs),LA=Os(Rc);function Uc(b){return Cr(b)?Va(b):Jc(b)}function Cu(b){return Cr(b)?Va(b,!0):function ch(b){if(!sr(b))return function Hm(b){var S=[];if(null!=b)for(var Z in ya(b))S.push(Z);return S}(b);var S=vd(b),Z=[];for(var Ee in b)"constructor"==Ee&&(S||!ia.call(b,Ee))||Z.push(Ee);return Z}(b)}var lT=vu(function(b,S,Z){Vo(b,S,Z)}),RA=vu(function(b,S,Z,Ee){Vo(b,S,Z,Ee)}),kA=tc(function(b,S){var Z={};if(null==b)return Z;var Ee=!1;S=Ma(S,function(Et){return Et=Jl(Et,b),Ee||(Ee=Et.length>1),Et}),fc(b,Yh(b),Z),Ee&&(Z=ml(Z,7,zl));for(var st=S.length;st--;)Bu(Z,S[st]);return Z}),OA=tc(function(b,S){return null==b?{}:function uh(b,S){return Nu(b,S,function(Z,Ee){return Ky(b,Ee)})}(b,S)});function cT(b,S){if(null==b)return{};var Z=Ma(Yh(b),function(Ee){return[Ee]});return S=rs(S),Nu(b,Z,function(Ee,st){return S(Ee,st[0])})}var BA=pd(Uc),zA=pd(Cu);function Zy(b){return null==b?[]:Ws(b,Uc(b))}var mT=El(function(b,S,Z){return S=S.toLowerCase(),b+(Z?HA(S):S)});function HA(b){return qm(ta(b).toLowerCase())}function qs(b){return(b=ta(b))&&b.replace(zt,Tc).replace(cc,"")}var vT=El(function(b,S,Z){return b+(Z?"-":"")+S.toLowerCase()}),yT=El(function(b,S,Z){return b+(Z?" ":"")+S.toLowerCase()}),jA=pc("toLowerCase"),XA=El(function(b,S,Z){return b+(Z?"_":"")+S.toLowerCase()}),xT=El(function(b,S,Z){return b+(Z?" ":"")+qm(S)}),IT=El(function(b,S,Z){return b+(Z?" ":"")+S.toUpperCase()}),qm=pc("toUpperCase");function KA(b,S,Z){return b=ta(b),(S=Z?D:S)===D?function Py(wn){return Ec.test(wn)}(b)?function kg(wn){return wn.match(cb)||[]}(b):function cu(wn){return wn.match(tl)||[]}(b):b.match(S)||[]}var hx=Os(function(b,S){try{return Xa(b,D,S)}catch(Z){return ut(Z)?Z:new zs(Z)}}),xb=tc(function(b,S){return Ya(S,function(Z){Z=ju(Z),Od(b,Z,mt(b[Z],b))}),b});function fx(b){return function(){return b}}var TT=hh(),MT=hh(!0);function Ch(b){return b}function wb(b){return Bd("function"==typeof b?b:ml(b,1))}var JA=Os(function(b,S){return function(Z){return Rc(Z,b,S)}}),px=Os(function(b,S){return function(Z){return Rc(b,Z,S)}});function eI(b,S,Z){var Ee=Uc(S),st=ud(S,Ee);null==Z&&(!sr(S)||!st.length&&Ee.length)&&(Z=S,S=b,b=this,st=ud(S,Uc(S)));var Et=!(sr(Z)&&"chain"in Z&&!Z.chain),on=hn(b);return Ya(st,function(pn){var Pn=S[pn];b[pn]=Pn,on&&(b.prototype[pn]=function(){var Ti=this.__chain__;if(Et||Ti){var Di=b(this.__wrapped__),Hi=Di.__actions__=Js(this.__actions__);return Hi.push({func:Pn,args:arguments,thisArg:b}),Di.__chain__=Ti,Di}return Pn.apply(b,Dd([this.value()],arguments))})}),b}function mx(){}var Zt=Xh(Ma),vx=Xh(lu),tI=Xh(Am);function e0(b){return ng(b)?Ss(ju(b)):function Vd(b){return function(S){return Fu(S,b)}}(b)}var nI=Kg(),LT=Kg(!0);function t0(){return[]}function wp(){return!1}var Ab=ha(function(b,S){return b+S},0),Ib=Tl("ceil"),bx=ha(function(b,S){return b/S},1),Cx=Tl("floor"),sI=ha(function(b,S){return b*S},1),XR=Tl("round"),FT=ha(function(b,S){return b-S},0);return dt.after=function ht(b,S){if("function"!=typeof S)throw new Rd(P);return b=Zs(b),function(){if(--b<1)return S.apply(this,arguments)}},dt.ary=Lt,dt.assign=Q_,dt.assignIn=mb,dt.assignInWith=lg,dt.assignWith=Yy,dt.at=Vv,dt.before=kt,dt.bind=mt,dt.bindAll=xb,dt.bindKey=Ft,dt.castArray=function Mn(){if(!arguments.length)return[];var b=arguments[0];return Mi(b)?b:[b]},dt.chain=cn,dt.chunk=function og(b,S,Z){S=(Z?mc(b,S,Z):S===D)?1:ms(Zs(S),0);var Ee=null==b?0:b.length;if(!Ee||S<1)return[];for(var st=0,Et=0,on=Zn(Ev(Ee/S));st<Ee;)on[Et++]=vl(b,st,st+=S);return on},dt.compact=function ag(b){for(var S=-1,Z=null==b?0:b.length,Ee=0,st=[];++S<Z;){var Et=b[S];Et&&(st[Ee++]=Et)}return st},dt.concat=function kv(){var b=arguments.length;if(!b)return[];for(var S=Zn(b-1),Z=arguments[0],Ee=b;Ee--;)S[Ee-1]=arguments[Ee];return Dd(Mi(Z)?Js(Z):[Z],sl(S,1))},dt.cond=function ST(b){var S=null==b?0:b.length,Z=rs();return b=S?Ma(b,function(Ee){if("function"!=typeof Ee[1])throw new Rd(P);return[Z(Ee[0]),Ee[1]]}):[],Os(function(Ee){for(var st=-1;++st<S;){var Et=b[st];if(Xa(Et[0],this,Ee))return Xa(Et[1],this,Ee)}})},dt.conforms=function ZA(b){return function qp(b){var S=Uc(b);return function(Z){return By(Z,b,S)}}(ml(b,1))},dt.constant=fx,dt.countBy=Ii,dt.create=function cg(b,S){var Z=ko(b);return null==S?Z:zh(Z,S)},dt.curry=function Ct(b,S,Z){var Ee=tu(b,8,D,D,D,D,D,S=Z?D:S);return Ee.placeholder=Ct.placeholder,Ee},dt.curryRight=function Ht(b,S,Z){var Ee=tu(b,16,D,D,D,D,D,S=Z?D:S);return Ee.placeholder=Ht.placeholder,Ee},dt.debounce=Vt,dt.defaults=J_,dt.defaultsDeep=vb,dt.defer=et,dt.delay=Gt,dt.difference=Fc,dt.differenceBy=Rf,dt.differenceWith=Gm,dt.drop=function Vy(b,S,Z){var Ee=null==b?0:b.length;return Ee?vl(b,(S=Z||S===D?1:Zs(S))<0?0:S,Ee):[]},dt.dropRight=function Uy(b,S,Z){var Ee=null==b?0:b.length;return Ee?vl(b,0,(S=Ee-(S=Z||S===D?1:Zs(S)))<0?0:S):[]},dt.dropRightWhile=function im(b,S){return b&&b.length?Ua(b,rs(S,3),!0,!0):[]},dt.dropWhile=function hb(b,S){return b&&b.length?Ua(b,rs(S,3),!0):[]},dt.fill=function yp(b,S,Z,Ee){var st=null==b?0:b.length;return st?(Z&&"number"!=typeof Z&&mc(b,S,Z)&&(Z=0,Ee=st),function db(b,S,Z,Ee){var st=b.length;for((Z=Zs(Z))<0&&(Z=-Z>st?0:st+Z),(Ee=Ee===D||Ee>st?st:Zs(Ee))<0&&(Ee+=st),Ee=Z>Ee?0:gb(Ee);Z<Ee;)b[Z++]=S;return b}(b,S,Z,Ee)):[]},dt.filter=function fi(b,S){return(Mi(b)?sd:Xp)(b,rs(S,3))},dt.flatMap=function Xn(b,S){return sl(E(b,S),1)},dt.flatMapDeep=function Hn(b,S){return sl(E(b,S),bt)},dt.flatMapDepth=function f(b,S,Z){return Z=Z===D?1:Zs(Z),sl(E(b,S),Z)},dt.flatten=kf,dt.flattenDeep=function Ov(b){return null!=b&&b.length?sl(b,bt):[]},dt.flattenDepth=function fb(b,S){return null!=b&&b.length?sl(b,S=S===D?1:Zs(S)):[]},dt.flip=function Tt(b){return tu(b,512)},dt.flow=TT,dt.flowRight=MT,dt.fromPairs=function Hy(b){for(var S=-1,Z=null==b?0:b.length,Ee={};++S<Z;){var st=b[S];Ee[st[0]]=st[1]}return Ee},dt.functions=function MA(b){return null==b?[]:ud(b,Uc(b))},dt.functionsIn=function ax(b){return null==b?[]:ud(b,Cu(b))},dt.groupBy=m,dt.initial=function j_(b){return null!=b&&b.length?vl(b,0,-1):[]},dt.intersection=$_,dt.intersectionBy=Wy,dt.intersectionWith=jm,dt.invert=DA,dt.invertBy=lx,dt.invokeMap=C,dt.iteratee=wb,dt.keyBy=w,dt.keys=Uc,dt.keysIn=Cu,dt.map=E,dt.mapKeys=function aT(b,S){var Z={};return S=rs(S,3),Pc(b,function(Ee,st,Et){Od(Z,S(Ee,st,Et),Ee)}),Z},dt.mapValues=function PA(b,S){var Z={};return S=rs(S,3),Pc(b,function(Ee,st,Et){Od(Z,st,S(Ee,st,Et))}),Z},dt.matches=function DT(b){return hd(ml(b,1))},dt.matchesProperty=function QA(b,S){return Yp(b,ml(S,1))},dt.memoize=mn,dt.merge=lT,dt.mergeWith=RA,dt.method=JA,dt.methodOf=px,dt.mixin=eI,dt.negate=Yt,dt.nthArg=function WR(b){return b=Zs(b),Os(function(S){return zd(S,b)})},dt.omit=kA,dt.omitBy=function cx(b,S){return cT(b,Yt(rs(S)))},dt.once=function ln(b){return kt(2,b)},dt.orderBy=function k(b,S,Z,Ee){return null==b?[]:(Mi(S)||(S=null==S?[]:[S]),Mi(Z=Ee?D:Z)||(Z=null==Z?[]:[Z]),Ka(b,S,Z))},dt.over=Zt,dt.overArgs=Sn,dt.overEvery=vx,dt.overSome=tI,dt.partial=Rn,dt.partialRight=Jn,dt.partition=L,dt.pick=OA,dt.pickBy=cT,dt.property=e0,dt.propertyOf=function xp(b){return function(S){return null==b?D:Fu(b,S)}},dt.pull=wa,dt.pullAll=Nv,dt.pullAllBy=function qd(b,S,Z){return b&&b.length&&S&&S.length?La(b,S,rs(Z,2)):b},dt.pullAllWith=function Bv(b,S,Z){return b&&b.length&&S&&S.length?La(b,S,D,Z):b},dt.pullAt=jy,dt.range=nI,dt.rangeRight=LT,dt.rearg=En,dt.reject=function le(b,S){return(Mi(b)?sd:Xp)(b,Yt(rs(S,3)))},dt.remove=function X_(b,S){var Z=[];if(!b||!b.length)return Z;var Ee=-1,st=[],Et=b.length;for(S=rs(S,3);++Ee<Et;){var on=b[Ee];S(on,Ee,b)&&(Z.push(on),st.push(Ee))}return eu(b,st),Z},dt.rest=function Yn(b,S){if("function"!=typeof b)throw new Rd(P);return Os(b,S=S===D?S:Zs(S))},dt.reverse=$m,dt.sampleSize=function pe(b,S,Z){return S=(Z?mc(b,S,Z):S===D)?1:Zs(S),(Mi(b)?Dv:km)(b,S)},dt.set=function uT(b,S,Z){return null==b?b:_o(b,S,Z)},dt.setWith=function NA(b,S,Z,Ee){return Ee="function"==typeof Ee?Ee:D,null==b?b:_o(b,S,Z,Ee)},dt.shuffle=function Ie(b){return(Mi(b)?Gg:Zp)(b)},dt.slice=function $y(b,S,Z){var Ee=null==b?0:b.length;return Ee?(Z&&"number"!=typeof Z&&mc(b,S,Z)?(S=0,Z=Ee):(S=null==S?0:Zs(S),Z=Z===D?Ee:Zs(Z)),vl(b,S,Z)):[]},dt.sortBy=Qe,dt.sortedUniq=function Xy(b){return b&&b.length?Jp(b):[]},dt.sortedUniqBy=function a(b,S){return b&&b.length?Jp(b,rs(S,2)):[]},dt.split=function xu(b,S,Z){return Z&&"number"!=typeof Z&&mc(b,S,Z)&&(S=Z=D),(Z=Z===D?Jt:Z>>>0)?(b=ta(b))&&("string"==typeof S||null!=S&&!Yo(S))&&!(S=Nl(S))&&ad(b)?dc(ld(b),0,Z):b.split(S,Z):[]},dt.spread=function li(b,S){if("function"!=typeof b)throw new Rd(P);return S=null==S?0:ms(Zs(S),0),Os(function(Z){var Ee=Z[S],st=dc(Z,0,S);return Ee&&Dd(st,Ee),Xa(b,this,st)})},dt.tail=function d(b){var S=null==b?0:b.length;return S?vl(b,1,S):[]},dt.take=function g(b,S,Z){return b&&b.length?vl(b,0,(S=Z||S===D?1:Zs(S))<0?0:S):[]},dt.takeRight=function y(b,S,Z){var Ee=null==b?0:b.length;return Ee?vl(b,(S=Ee-(S=Z||S===D?1:Zs(S)))<0?0:S,Ee):[]},dt.takeRightWhile=function A(b,S){return b&&b.length?Ua(b,rs(S,3),!1,!0):[]},dt.takeWhile=function M(b,S){return b&&b.length?Ua(b,rs(S,3)):[]},dt.tap=function sn(b,S){return S(b),b},dt.throttle=function bi(b,S,Z){var Ee=!0,st=!0;if("function"!=typeof b)throw new Rd(P);return sr(Z)&&(Ee="leading"in Z?!!Z.leading:Ee,st="trailing"in Z?!!Z.trailing:st),Vt(b,S,{leading:Ee,maxWait:S,trailing:st})},dt.thru=en,dt.toArray=bp,dt.toPairs=BA,dt.toPairsIn=zA,dt.toPath=function rI(b){return Mi(b)?Ma(b,ju):Hl(b)?[b]:Js(rg(ta(b)))},dt.toPlainObject=K_,dt.transform=function Cp(b,S,Z){var Ee=Mi(b),st=Ee||Qr(b)||Nc(b);if(S=rs(S,4),null==Z){var Et=b&&b.constructor;Z=st?Ee?new Et:[]:sr(b)&&hn(Et)?ko(np(b)):{}}return(st?Ya:Pc)(b,function(on,pn,Pn){return S(Z,on,pn,Pn)}),Z},dt.unary=function pi(b){return Lt(b,1)},dt.union=R,dt.unionBy=N,dt.unionWith=ie,dt.uniq=function ee(b){return b&&b.length?Al(b):[]},dt.uniqBy=function fe(b,S){return b&&b.length?Al(b,rs(S,2)):[]},dt.uniqWith=function me(b,S){return S="function"==typeof S?S:D,b&&b.length?Al(b,D,S):[]},dt.unset=function dT(b,S){return null==b||Bu(b,S)},dt.unzip=Le,dt.unzipWith=ke,dt.update=function VA(b,S,Z){return null==b?b:$h(b,S,Ra(Z))},dt.updateWith=function hT(b,S,Z,Ee){return Ee="function"==typeof Ee?Ee:D,null==b?b:$h(b,S,Ra(Z),Ee)},dt.values=Zy,dt.valuesIn=function fT(b){return null==b?[]:Ws(b,Cu(b))},dt.without=Fe,dt.words=KA,dt.wrap=function di(b,S){return Rn(Ra(S),b)},dt.xor=nt,dt.xorBy=tt,dt.xorWith=Ke,dt.zip=pt,dt.zipObject=function vt(b,S){return Vu(b||[],S||[],Cf)},dt.zipObjectDeep=function qt(b,S){return Vu(b||[],S||[],_o)},dt.zipWith=Bt,dt.entries=BA,dt.entriesIn=zA,dt.extend=mb,dt.extendWith=lg,eI(dt,dt),dt.add=Ab,dt.attempt=hx,dt.camelCase=mT,dt.capitalize=HA,dt.ceil=Ib,dt.clamp=function pT(b,S,Z){return Z===D&&(Z=S,S=D),Z!==D&&(Z=(Z=_h(Z))==Z?Z:0),S!==D&&(S=(S=_h(S))==S?S:0),Af(_h(b),S,Z)},dt.clone=function si(b){return ml(b,4)},dt.cloneDeep=function ji(b){return ml(b,5)},dt.cloneDeepWith=function rr(b,S){return ml(b,5,S="function"==typeof S?S:D)},dt.cloneWith=function xi(b,S){return ml(b,4,S="function"==typeof S?S:D)},dt.conformsTo=function Br(b,S){return null==S||By(b,S,Uc(S))},dt.deburr=qs,dt.defaultTo=function ET(b,S){return null==b||b!=b?S:b},dt.divide=bx,dt.endsWith=function Me(b,S,Z){b=ta(b),S=Nl(S);var Ee=b.length,st=Z=Z===D?Ee:Af(Zs(Z),0,Ee);return(Z-=S.length)>=0&&b.slice(Z,st)==S},dt.eq=Kr,dt.escape=function GA(b){return(b=ta(b))&&df.test(b)?b.replace(Pu,Pg):b},dt.escapeRegExp=function WA(b){return(b=ta(b))&&Tg.test(b)?b.replace(wc,"\\$&"):b},dt.every=function _i(b,S,Z){var Ee=Mi(b)?lu:H_;return Z&&mc(b,S,Z)&&(S=D),Ee(b,rs(S,3))},dt.find=ir,dt.findIndex=ll,dt.findKey=function ef(b,S){return qo(b,rs(S,3),Pc)},dt.findLast=zi,dt.findLastIndex=Wm,dt.findLastKey=function yb(b,S){return qo(b,rs(S,3),Nd)},dt.floor=Cx,dt.forEach=c,dt.forEachRight=h,dt.forIn=function Uv(b,S){return null==b?b:Uh(b,rs(S,3),Cu)},dt.forInRight=function Hv(b,S){return null==b?b:Fd(b,rs(S,3),Cu)},dt.forOwn=function bh(b,S){return b&&Pc(b,rs(S,3))},dt.forOwnRight=function _b(b,S){return b&&Nd(b,rs(S,3))},dt.get=bb,dt.gt=hr,dt.gte=nr,dt.has=function Cb(b,S){return null!=b&&zm(b,S,Rm)},dt.hasIn=Ky,dt.head=Gy,dt.identity=Ch,dt.includes=function _(b,S,Z,Ee){b=Cr(b)?b:Zy(b),Z=Z&&!Ee?Zs(Z):0;var st=b.length;return Z<0&&(Z=ms(st+Z,0)),Ul(b)?Z<=st&&b.indexOf(S,Z)>-1:!!st&&Da(b,S,Z)>-1},dt.indexOf=function W_(b,S,Z){var Ee=null==b?0:b.length;if(!Ee)return-1;var st=null==Z?0:Zs(Z);return st<0&&(st=ms(Ee+st,0)),Da(b,S,st)},dt.inRange=function UA(b,S,Z){return S=Vc(S),Z===D?(Z=S,S=0):Z=Vc(Z),function ol(b,S,Z){return b>=pl(S,Z)&&b<ms(S,Z)}(b=_h(b),S,Z)},dt.invoke=LA,dt.isArguments=jr,dt.isArray=Mi,dt.isArrayBuffer=gr,dt.isArrayLike=Cr,dt.isArrayLikeObject=Zr,dt.isBoolean=function Fs(b){return!0===b||!1===b||ni(b)&&aa(b)==be},dt.isBuffer=Qr,dt.isDate=Ui,dt.isElement=function St(b){return ni(b)&&1===b.nodeType&&!Eo(b)},dt.isEmpty=function $n(b){if(null==b)return!0;if(Cr(b)&&(Mi(b)||"string"==typeof b||"function"==typeof b.splice||Qr(b)||Nc(b)||jr(b)))return!b.length;var S=ka(b);if(S==Pt||S==ri)return!b.size;if(vd(b))return!Jc(b).length;for(var Z in b)if(ia.call(b,Z))return!1;return!0},dt.isEqual=function Ei(b,S){return kc(b,S)},dt.isEqualWith=function Ve(b,S,Z){var Ee=(Z="function"==typeof Z?Z:D)?Z(b,S):D;return Ee===D?kc(b,S,D,Z):!!Ee},dt.isError=ut,dt.isFinite=function an(b){return"number"==typeof b&&zg(b)},dt.isFunction=hn,dt.isInteger=gn,dt.isLength=Qi,dt.isMap=Fr,dt.isMatch=function Oi(b,S){return b===S||dd(b,S,em(S))},dt.isMatchWith=function Ni(b,S,Z){return Z="function"==typeof Z?Z:D,dd(b,S,em(S),Z)},dt.isNaN=function Zi(b){return Ho(b)&&b!=+b},dt.isNative=function eo(b){if(gh(b))throw new zs("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Hh(b)},dt.isNil=function Fa(b){return null==b},dt.isNull=function ao(b){return null===b},dt.isNumber=Ho,dt.isObject=sr,dt.isObjectLike=ni,dt.isPlainObject=Eo,dt.isRegExp=Yo,dt.isSafeInteger=function Sr(b){return gn(b)&&b>=-kn&&b<=kn},dt.isSet=Ha,dt.isString=Ul,dt.isSymbol=Hl,dt.isTypedArray=Nc,dt.isUndefined=function _p(b){return b===D},dt.isWeakMap=function Of(b){return ni(b)&&ka(b)==Cs},dt.isWeakSet=function Bc(b){return ni(b)&&"[object WeakSet]"==aa(b)},dt.join=function Fv(b,S){return null==b?"":cd.call(b,S)},dt.kebabCase=vT,dt.last=bu,dt.lastIndexOf=function q_(b,S,Z){var Ee=null==b?0:b.length;if(!Ee)return-1;var st=Ee;return Z!==D&&(st=(st=Zs(Z))<0?ms(Ee+st,0):pl(st,Ee-1)),S==S?function Oh(wn,oi,Zn){for(var Rr=Zn+1;Rr--;)if(wn[Rr]===oi)return Rr;return Rr}(b,S,st):kl(b,Xl,st,!0)},dt.lowerCase=yT,dt.lowerFirst=jA,dt.lt=nc,dt.lte=zc,dt.max=function xx(b){return b&&b.length?Pv(b,Ch,lh):D},dt.maxBy=function qR(b,S){return b&&b.length?Pv(b,rs(S,2),lh):D},dt.mean=function PT(b){return Ar(b,Ch)},dt.meanBy=function RT(b,S){return Ar(b,rs(S,2))},dt.min=function kT(b){return b&&b.length?Pv(b,Ch,Wh):D},dt.minBy=function OT(b,S){return b&&b.length?Pv(b,rs(S,2),Wh):D},dt.stubArray=t0,dt.stubFalse=wp,dt.stubObject=function yx(){return{}},dt.stubString=function iI(){return""},dt.stubTrue=function _x(){return!0},dt.multiply=sI,dt.nth=function fa(b,S){return b&&b.length?zd(b,Zs(S)):D},dt.noConflict=function gx(){return ql._===this&&(ql._=z_),this},dt.noop=mx,dt.now=qe,dt.pad=function _T(b,S,Z){b=ta(b);var Ee=(S=Zs(S))?rl(b):0;if(!S||Ee>=S)return b;var st=(S-Ee)/2;return yu(ra(st),Z)+b+yu(Ev(st),Z)},dt.padEnd=function $A(b,S,Z){b=ta(b);var Ee=(S=Zs(S))?rl(b):0;return S&&Ee<S?b+yu(S-Ee,Z):b},dt.padStart=function bT(b,S,Z){b=ta(b);var Ee=(S=Zs(S))?rl(b):0;return S&&Ee<S?yu(S-Ee,Z)+b:b},dt.parseInt=function CT(b,S,Z){return Z||null==S?S=0:S&&(S=+S),vo(ta(b).replace(Ed,""),S||0)},dt.random=function gT(b,S,Z){if(Z&&"boolean"!=typeof Z&&mc(b,S,Z)&&(S=Z=D),Z===D&&("boolean"==typeof S?(Z=S,S=D):"boolean"==typeof b&&(Z=b,b=D)),b===D&&S===D?(b=0,S=1):(b=Vc(b),S===D?(S=b,b=0):S=Vc(S)),b>S){var Ee=b;b=S,S=Ee}if(Z||b%1||S%1){var st=Ro();return pl(b+st*(S-b+ns("1e-"+((st+"").length-1))),S)}return dh(b,S)},dt.reduce=function G(b,S,Z){var Ee=Mi(b)?gf:du,st=arguments.length<3;return Ee(b,rs(S,4),Z,st,ah)},dt.reduceRight=function K(b,S,Z){var Ee=Mi(b)?Pr:du,st=arguments.length<3;return Ee(b,rs(S,4),Z,st,Lv)},dt.repeat=function zR(b,S,Z){return S=(Z?mc(b,S,Z):S===D)?1:Zs(S),Uo(ta(b),S)},dt.replace=function qA(){var b=arguments,S=ta(b[0]);return b.length<3?S:S.replace(b[1],b[2])},dt.result=function FA(b,S,Z){var Ee=-1,st=(S=Jl(S,b)).length;for(st||(st=1,b=D);++Ee<st;){var Et=null==b?D:b[ju(S[Ee])];Et===D&&(Ee=st,Et=Z),b=hn(Et)?Et.call(b):Et}return b},dt.round=XR,dt.runInContext=wn,dt.sample=function he(b){return(Mi(b)?Mv:Ji)(b)},dt.size=function Ne(b){if(null==b)return 0;if(Cr(b))return Ul(b)?rl(b):b.length;var S=ka(b);return S==Pt||S==ri?b.size:Jc(b).length},dt.snakeCase=XA,dt.some=function ze(b,S,Z){var Ee=Mi(b)?Am:Sf;return Z&&mc(b,S,Z)&&(S=D),Ee(b,rs(S,3))},dt.sortedIndex=function Y_(b,S){return Ql(b,S)},dt.sortedIndexBy=function pb(b,S,Z){return Qp(b,S,rs(Z,2))},dt.sortedIndexOf=function Jh(b,S){var Z=null==b?0:b.length;if(Z){var Ee=Ql(b,S);if(Ee<Z&&Kr(b[Ee],S))return Ee}return-1},dt.sortedLastIndex=function rm(b,S){return Ql(b,S,!0)},dt.sortedLastIndexBy=function zv(b,S,Z){return Qp(b,S,rs(Z,2),!0)},dt.sortedLastIndexOf=function qy(b,S){if(null!=b&&b.length){var Ee=Ql(b,S,!0)-1;if(Kr(b[Ee],S))return Ee}return-1},dt.startCase=xT,dt.startsWith=function ux(b,S,Z){return b=ta(b),Z=null==Z?0:Af(Zs(Z),0,b.length),S=Nl(S),b.slice(Z,Z+S.length)==S},dt.subtract=FT,dt.sum=function YR(b){return b&&b.length?xl(b,Ch):0},dt.sumBy=function oI(b,S){return b&&b.length?xl(b,rs(S,2)):0},dt.template=function dx(b,S,Z){var Ee=dt.templateSettings;Z&&mc(b,S,Z)&&(S=D),b=ta(b),S=lg({},S,Ee,Qg);var pn,Pn,st=lg({},S.imports,Ee.imports,Qg),Et=Uc(st),on=Ws(st,Et),Ti=0,Di=S.interpolate||In,Hi="__p += '",Dr=Cv((S.escape||In).source+"|"+Di.source+"|"+(Di===hf?Ge:In).source+"|"+(S.evaluate||In).source+"|$","g"),Vr="//# sourceURL="+(ia.call(S,"sourceURL")?(S.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++O_+"]")+"\n";b.replace(Dr,function(As,lo,Fo,Xd,Yd,Hc){return Fo||(Fo=Xd),Hi+=b.slice(Ti,Hc).replace(yi,Kf),lo&&(pn=!0,Hi+="' +\n__e("+lo+") +\n'"),Yd&&(Pn=!0,Hi+="';\n"+Yd+";\n__p += '"),Fo&&(Hi+="' +\n((__t = ("+Fo+")) == null ? '' : __t) +\n'"),Ti=Hc+As.length,As}),Hi+="';\n";var ws=ia.call(S,"variable")&&S.variable;if(ws){if(Wf.test(ws))throw new zs("Invalid `variable` option passed into `_.template`")}else Hi="with (obj) {\n"+Hi+"\n}\n";Hi=(Pn?Hi.replace(Lh,""):Hi).replace(au,"$1").replace(Ia,"$1;"),Hi="function("+(ws||"obj")+") {\n"+(ws?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(pn?", __e = _.escape":"")+(Pn?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+Hi+"return __p\n}";var oo=hx(function(){return Xo(Et,Vr+"return "+Hi).apply(D,on)});if(oo.source=Hi,ut(oo))throw oo;return oo},dt.times=function jR(b,S){if((b=Zs(b))<1||b>kn)return[];var Z=Jt,Ee=pl(b,Jt);S=rs(S),b-=Jt;for(var st=sh(Ee,S);++Z<b;)S(Z);return st},dt.toFinite=Vc,dt.toInteger=Zs,dt.toLength=gb,dt.toLower=function wT(b){return ta(b).toLowerCase()},dt.toNumber=_h,dt.toSafeInteger=function Z_(b){return b?Af(Zs(b),-kn,kn):0===b?b:0},dt.toString=ta,dt.toUpper=function VR(b){return ta(b).toUpperCase()},dt.trim=function UR(b,S,Z){if((b=ta(b))&&(Z||S===D))return Up(b);if(!b||!(S=Nl(S)))return b;var Ee=ld(b),st=ld(S);return dc(Ee,Yf(Ee,st),Im(Ee,st)+1).join("")},dt.trimEnd=function HR(b,S,Z){if((b=ta(b))&&(Z||S===D))return b.slice(0,Zc(b)+1);if(!b||!(S=Nl(S)))return b;var Ee=ld(b);return dc(Ee,0,Im(Ee,ld(S))+1).join("")},dt.trimStart=function AT(b,S,Z){if((b=ta(b))&&(Z||S===D))return b.replace(Ed,"");if(!b||!(S=Nl(S)))return b;var Ee=ld(b);return dc(Ee,Yf(Ee,ld(S))).join("")},dt.truncate=function YA(b,S){var Z=30,Ee="...";if(sr(S)){var st="separator"in S?S.separator:st;Z="length"in S?Zs(S.length):Z,Ee="omission"in S?Nl(S.omission):Ee}var Et=(b=ta(b)).length;if(ad(b)){var on=ld(b);Et=on.length}if(Z>=Et)return b;var pn=Z-rl(Ee);if(pn<1)return Ee;var Pn=on?dc(on,0,pn).join(""):b.slice(0,pn);if(st===D)return Pn+Ee;if(on&&(pn+=Pn.length-pn),Yo(st)){if(b.slice(pn).search(st)){var Ti,Di=Pn;for(st.global||(st=Cv(st.source,ta(it.exec(st))+"g")),st.lastIndex=0;Ti=st.exec(Di);)var Hi=Ti.index;Pn=Pn.slice(0,Hi===D?pn:Hi)}}else if(b.indexOf(Nl(st),pn)!=pn){var Dr=Pn.lastIndexOf(st);Dr>-1&&(Pn=Pn.slice(0,Dr))}return Pn+Ee},dt.unescape=function GR(b){return(b=ta(b))&&th.test(b)?b.replace(Sd,Ld):b},dt.uniqueId=function $R(b){var S=++Ry;return ta(b)+S},dt.upperCase=IT,dt.upperFirst=qm,dt.each=c,dt.eachRight=h,dt.first=Gy,eI(dt,function(){var b={};return Pc(dt,function(S,Z){ia.call(dt.prototype,Z)||(b[Z]=S)}),b}(),{chain:!1}),dt.VERSION="4.17.21",Ya(["bind","bindKey","curry","curryRight","partial","partialRight"],function(b){dt[b].placeholder=dt}),Ya(["drop","take"],function(b,S){Ps.prototype[b]=function(Z){Z=Z===D?1:ms(Zs(Z),0);var Ee=this.__filtered__&&!S?new Ps(this):this.clone();return Ee.__filtered__?Ee.__takeCount__=pl(Z,Ee.__takeCount__):Ee.__views__.push({size:pl(Z,Jt),type:b+(Ee.__dir__<0?"Right":"")}),Ee},Ps.prototype[b+"Right"]=function(Z){return this.reverse()[b](Z).reverse()}}),Ya(["filter","map","takeWhile"],function(b,S){var Z=S+1,Ee=1==Z||3==Z;Ps.prototype[b]=function(st){var Et=this.clone();return Et.__iteratees__.push({iteratee:rs(st,3),type:Z}),Et.__filtered__=Et.__filtered__||Ee,Et}}),Ya(["head","last"],function(b,S){var Z="take"+(S?"Right":"");Ps.prototype[b]=function(){return this[Z](1).value()[0]}}),Ya(["initial","tail"],function(b,S){var Z="drop"+(S?"":"Right");Ps.prototype[b]=function(){return this.__filtered__?new Ps(this):this[Z](1)}}),Ps.prototype.compact=function(){return this.filter(Ch)},Ps.prototype.find=function(b){return this.filter(b).head()},Ps.prototype.findLast=function(b){return this.reverse().find(b)},Ps.prototype.invokeMap=Os(function(b,S){return"function"==typeof b?new Ps(this):this.map(function(Z){return Rc(Z,b,S)})}),Ps.prototype.reject=function(b){return this.filter(Yt(rs(b)))},Ps.prototype.slice=function(b,S){b=Zs(b);var Z=this;return Z.__filtered__&&(b>0||S<0)?new Ps(Z):(b<0?Z=Z.takeRight(-b):b&&(Z=Z.drop(b)),S!==D&&(Z=(S=Zs(S))<0?Z.dropRight(-S):Z.take(S-b)),Z)},Ps.prototype.takeRightWhile=function(b){return this.reverse().takeWhile(b).reverse()},Ps.prototype.toArray=function(){return this.take(Jt)},Pc(Ps.prototype,function(b,S){var Z=/^(?:filter|find|map|reject)|While$/.test(S),Ee=/^(?:head|last)$/.test(S),st=dt[Ee?"take"+("last"==S?"Right":""):S],Et=Ee||/^find/.test(S);!st||(dt.prototype[S]=function(){var on=this.__wrapped__,pn=Ee?[1]:arguments,Pn=on instanceof Ps,Ti=pn[0],Di=Pn||Mi(on),Hi=function(lo){var Fo=st.apply(dt,Dd([lo],pn));return Ee&&Dr?Fo[0]:Fo};Di&&Z&&"function"==typeof Ti&&1!=Ti.length&&(Pn=Di=!1);var Dr=this.__chain__,Vr=!!this.__actions__.length,ws=Et&&!Dr,oo=Pn&&!Vr;if(!Et&&Di){on=oo?on:new Ps(this);var As=b.apply(on,pn);return As.__actions__.push({func:en,args:[Hi],thisArg:D}),new sa(As,Dr)}return ws&&oo?b.apply(this,pn):(As=this.thru(Hi),ws?Ee?As.value()[0]:As.value():As)})}),Ya(["pop","push","shift","sort","splice","unshift"],function(b){var S=wv[b],Z=/^(?:push|sort|unshift)$/.test(b)?"tap":"thru",Ee=/^(?:pop|shift)$/.test(b);dt.prototype[b]=function(){var st=arguments;if(Ee&&!this.__chain__){var Et=this.value();return S.apply(Mi(Et)?Et:[],st)}return this[Z](function(on){return S.apply(Mi(on)?on:[],st)})}}),Pc(Ps.prototype,function(b,S){var Z=dt[S];if(Z){var Ee=Z.name+"";ia.call(jp,Ee)||(jp[Ee]=[]),jp[Ee].push({name:S,func:Z})}}),jp[jn(D,2).name]=[{name:"wrapper",func:D}],Ps.prototype.clone=function $p(){var b=new Ps(this.__wrapped__);return b.__actions__=Js(this.__actions__),b.__dir__=this.__dir__,b.__filtered__=this.__filtered__,b.__iteratees__=Js(this.__iteratees__),b.__takeCount__=this.__takeCount__,b.__views__=Js(this.__views__),b},Ps.prototype.reverse=function rp(){if(this.__filtered__){var b=new Ps(this);b.__dir__=-1,b.__filtered__=!0}else(b=this.clone()).__dir__*=-1;return b},Ps.prototype.value=function br(){var b=this.__wrapped__.value(),S=this.__dir__,Z=Mi(b),Ee=S<0,st=Z?b.length:0,Et=function Bm(b,S,Z){for(var Ee=-1,st=Z.length;++Ee<st;){var Et=Z[Ee],on=Et.size;switch(Et.type){case"drop":b+=on;break;case"dropRight":S-=on;break;case"take":S=pl(S,b+on);break;case"takeRight":b=ms(b,S-on)}}return{start:b,end:S}}(0,st,this.__views__),on=Et.start,pn=Et.end,Pn=pn-on,Ti=Ee?pn:on-1,Di=this.__iteratees__,Hi=Di.length,Dr=0,Vr=pl(Pn,this.__takeCount__);if(!Z||!Ee&&st==Pn&&Vr==Pn)return gu(b,this.__actions__);var ws=[];e:for(;Pn--&&Dr<Vr;){for(var oo=-1,As=b[Ti+=S];++oo<Hi;){var lo=Di[oo],Xd=lo.type,Yd=(0,lo.iteratee)(As);if(2==Xd)As=Yd;else if(!Yd){if(1==Xd)continue e;break e}}ws[Dr++]=As}return ws},dt.prototype.at=dn,dt.prototype.chain=function On(){return cn(this)},dt.prototype.commit=function Ai(){return new sa(this.value(),this.__chain__)},dt.prototype.next=function ui(){this.__values__===D&&(this.__values__=bp(this.value()));var b=this.__index__>=this.__values__.length;return{done:b,value:b?D:this.__values__[this.__index__++]}},dt.prototype.plant=function $t(b){for(var S,Z=this;Z instanceof Io;){var Ee=nm(Z);Ee.__index__=0,Ee.__values__=D,S?st.__wrapped__=Ee:S=Ee;var st=Ee;Z=Z.__wrapped__}return st.__wrapped__=b,S},dt.prototype.reverse=function Wn(){var b=this.__wrapped__;if(b instanceof Ps){var S=b;return this.__actions__.length&&(S=new Ps(this)),(S=S.reverse()).__actions__.push({func:en,args:[$m],thisArg:D}),new sa(S,this.__chain__)}return this.thru($m)},dt.prototype.toJSON=dt.prototype.valueOf=dt.prototype.value=function ei(){return gu(this.__wrapped__,this.__actions__)},dt.prototype.first=dt.prototype.head,Gp&&(dt.prototype[Gp]=function Wt(){return this}),dt}();ql._=Sm,(Y=function(){return Sm}.call(Ce,V,Ce,Be))!==D&&(Be.exports=Y)}.call(this)},535:(Be,Ce,V)=>{var Y=V(9850);function H(B,W){if("function"!=typeof B||null!=W&&"function"!=typeof W)throw new TypeError("Expected a function");var P=function(){var O=arguments,q=W?W.apply(this,O):O[0],te=P.cache;if(te.has(q))return te.get(q);var J=B.apply(this,O);return P.cache=te.set(q,J)||te,J};return P.cache=new(H.Cache||Y),P}H.Cache=Y,Be.exports=H},1710:(Be,Ce,V)=>{var Y=V(2119);Be.exports=function(){return Y.Date.now()}},4793:(Be,Ce,V)=>{var Y=V(5963);Be.exports=function D(H,B,W){return null==H?H:Y(H,B,W)}},1467:(Be,Ce,V)=>{var Y=V(3348),D=V(5940),H=V(4129),W=/^[-+]0x[0-9a-f]+$/i,P=/^0b[01]+$/i,O=/^0o[0-7]+$/i,q=parseInt;Be.exports=function te(J){if("number"==typeof J)return J;if(H(J))return NaN;if(D(J)){var oe="function"==typeof J.valueOf?J.valueOf():J;J=D(oe)?oe+"":oe}if("string"!=typeof J)return 0===J?J:+J;J=Y(J);var se=P.test(J);return se||O.test(J)?q(J.slice(2),se?2:8):W.test(J)?NaN:+J}},4152:(Be,Ce,V)=>{var Y=V(4633),D=V(9454),H=V(9460),B=V(4129),W=V(2855),P=V(8533),O=V(3943);Be.exports=function q(te){return H(te)?Y(te,P):B(te)?[te]:D(W(O(te)))}},3943:(Be,Ce,V)=>{var Y=V(3935);Be.exports=function D(H){return null==H?"":Y(H)}},4826:(Be,Ce,V)=>{"use strict";Be.exports=V(6776)},6798:(Be,Ce,V)=>{"use strict";Be.exports=V(5485)},2484:Be=>{"use strict";Be.exports=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"]},3266:Be=>{"use strict";var W="<[A-Za-z][A-Za-z0-9\\-]*(?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:[^\"'=<>`\\x00-\\x20]+|'[^']*'|\"[^\"]*\"))?)*\\s*\\/?>",P="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",oe=new RegExp("^(?:"+W+"|"+P+"|\x3c!----\x3e|\x3c!--(?:-?[^>-])(?:-?[^-])*--\x3e|<[?][\\s\\S]*?[?]>|<![A-Z]+\\s+[^>]*>|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>)"),se=new RegExp("^(?:"+W+"|"+P+")");Be.exports.n=oe,Be.exports.q=se},3332:(Be,Ce,V)=>{"use strict";var H=Object.prototype.hasOwnProperty;function B(He,ft){return H.call(He,ft)}function O(He){return!(He>=55296&&He<=57343||He>=64976&&He<=65007||65535==(65535&He)||65534==(65535&He)||He>=0&&He<=8||11===He||He>=14&&He<=31||He>=127&&He<=159||He>1114111)}function q(He){return He>65535?(He-=65536,String.fromCharCode(55296+(He>>10),56320+(1023&He))):String.fromCharCode(He)}var te=/\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g,oe=new RegExp(te.source+"|"+/&([a-z#][a-z0-9]{1,31});/gi.source,"gi"),se=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i,Q=V(6798),Oe=/[&<>"]/,re=/[&<>"]/g,ue={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function z(He){return ue[He]}var ne=/[.?*+^$[\]\\(){}|-]/g,rt=V(6020);Ce.lib={},Ce.lib.mdurl=V(7214),Ce.lib.ucmicro=V(9315),Ce.assign=function W(He){var ft=Array.prototype.slice.call(arguments,1);return ft.forEach(function(gt){if(gt){if("object"!=typeof gt)throw new TypeError(gt+"must be object");Object.keys(gt).forEach(function(bt){He[bt]=gt[bt]})}}),He},Ce.isString=function D(He){return"[object String]"===function Y(He){return Object.prototype.toString.call(He)}(He)},Ce.has=B,Ce.unescapeMd=function ae(He){return He.indexOf("\\")<0?He:He.replace(te,"$1")},Ce.unescapeAll=function xe(He){return He.indexOf("\\")<0&&He.indexOf("&")<0?He:He.replace(oe,function(ft,gt,bt){return gt||function U(He,ft){var gt=0;return B(Q,ft)?Q[ft]:35===ft.charCodeAt(0)&&se.test(ft)&&O(gt="x"===ft[1].toLowerCase()?parseInt(ft.slice(2),16):parseInt(ft.slice(1),10))?q(gt):He}(ft,bt)})},Ce.isValidEntityCode=O,Ce.fromCodePoint=q,Ce.escapeHtml=function $(He){return Oe.test(He)?He.replace(re,z):He},Ce.arrayReplaceAt=function P(He,ft,gt){return[].concat(He.slice(0,ft),gt,He.slice(ft+1))},Ce.isSpace=function Ue(He){switch(He){case 9:case 32:return!0}return!1},Ce.isWhiteSpace=function Re(He){if(He>=8192&&He<=8202)return!0;switch(He){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1},Ce.isMdAsciiPunct=function at(He){switch(He){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}},Ce.isPunctChar=function Pe(He){return rt.test(He)},Ce.escapeRE=function ge(He){return He.replace(ne,"\\$&")},Ce.normalizeReference=function xt(He){return He=He.trim().replace(/\s+/g," "),"\u1e7e"==="\u1e9e".toLowerCase()&&(He=He.replace(/\u1e9e/g,"\xdf")),He.toLowerCase().toUpperCase()}},8198:(Be,Ce,V)=>{"use strict";Ce.parseLinkLabel=V(9605),Ce.parseLinkDestination=V(4072),Ce.parseLinkTitle=V(4658)},4072:(Be,Ce,V)=>{"use strict";var Y=V(3332).unescapeAll;Be.exports=function(H,B,W){var P,O,te=B,J={ok:!1,pos:0,lines:0,str:""};if(60===H.charCodeAt(B)){for(B++;B<W;){if(10===(P=H.charCodeAt(B))||60===P)return J;if(62===P)return J.pos=B+1,J.str=Y(H.slice(te+1,B)),J.ok=!0,J;92===P&&B+1<W?B+=2:B++}return J}for(O=0;B<W&&!(32===(P=H.charCodeAt(B))||P<32||127===P);)if(92===P&&B+1<W){if(32===H.charCodeAt(B+1))break;B+=2}else{if(40===P&&++O>32)return J;if(41===P){if(0===O)break;O--}B++}return te===B||0!==O||(J.str=Y(H.slice(te,B)),J.lines=0,J.pos=B,J.ok=!0),J}},9605:Be=>{"use strict";Be.exports=function(V,Y,D){var H,B,W,P,O=-1,q=V.posMax,te=V.pos;for(V.pos=Y+1,H=1;V.pos<q;){if(93===(W=V.src.charCodeAt(V.pos))&&0==--H){B=!0;break}if(P=V.pos,V.md.inline.skipToken(V),91===W)if(P===V.pos-1)H++;else if(D)return V.pos=te,-1}return B&&(O=V.pos),V.pos=te,O}},4658:(Be,Ce,V)=>{"use strict";var Y=V(3332).unescapeAll;Be.exports=function(H,B,W){var P,O,q=0,te=B,J={ok:!1,pos:0,lines:0,str:""};if(B>=W||34!==(O=H.charCodeAt(B))&&39!==O&&40!==O)return J;for(B++,40===O&&(O=41);B<W;){if((P=H.charCodeAt(B))===O)return J.pos=B+1,J.lines=q,J.str=Y(H.slice(te+1,B)),J.ok=!0,J;if(40===P&&41===O)return J;10===P?q++:92===P&&B+1<W&&(B++,10===H.charCodeAt(B)&&q++),B++}return J}},6776:(Be,Ce,V)=>{"use strict";var Y=V(3332),D=V(8198),H=V(7172),B=V(2080),W=V(4223),P=V(2900),O=V(3353),q=V(7214),te=V(4879),J={default:V(4210),zero:V(7020),commonmark:V(8687)},oe=/^(vbscript|javascript|file|data):/,se=/^data:image\/(gif|png|jpeg|webp);/;function Q(re){var ue=re.trim().toLowerCase();return!oe.test(ue)||!!se.test(ue)}var U=["http:","https:","mailto:"];function ae(re){var ue=q.parse(re,!0);if(ue.hostname&&(!ue.protocol||U.indexOf(ue.protocol)>=0))try{ue.hostname=te.toASCII(ue.hostname)}catch{}return q.encode(q.format(ue))}function xe(re){var ue=q.parse(re,!0);if(ue.hostname&&(!ue.protocol||U.indexOf(ue.protocol)>=0))try{ue.hostname=te.toUnicode(ue.hostname)}catch{}return q.decode(q.format(ue),q.decode.defaultChars+"%")}function Oe(re,ue){if(!(this instanceof Oe))return new Oe(re,ue);ue||Y.isString(re)||(ue=re||{},re="default"),this.inline=new P,this.block=new W,this.core=new B,this.renderer=new H,this.linkify=new O,this.validateLink=Q,this.normalizeLink=ae,this.normalizeLinkText=xe,this.utils=Y,this.helpers=Y.assign({},D),this.options={},this.configure(re),ue&&this.set(ue)}Oe.prototype.set=function(re){return Y.assign(this.options,re),this},Oe.prototype.configure=function(re){var z,ue=this;if(Y.isString(re)&&!(re=J[z=re]))throw new Error('Wrong `markdown-it` preset "'+z+'", check name');if(!re)throw new Error("Wrong `markdown-it` preset, can't be empty");return re.options&&ue.set(re.options),re.components&&Object.keys(re.components).forEach(function($){re.components[$].rules&&ue[$].ruler.enableOnly(re.components[$].rules),re.components[$].rules2&&ue[$].ruler2.enableOnly(re.components[$].rules2)}),this},Oe.prototype.enable=function(re,ue){var z=[];Array.isArray(re)||(re=[re]),["core","block","inline"].forEach(function(ne){z=z.concat(this[ne].ruler.enable(re,!0))},this),z=z.concat(this.inline.ruler2.enable(re,!0));var $=re.filter(function(ne){return z.indexOf(ne)<0});if($.length&&!ue)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+$);return this},Oe.prototype.disable=function(re,ue){var z=[];Array.isArray(re)||(re=[re]),["core","block","inline"].forEach(function(ne){z=z.concat(this[ne].ruler.disable(re,!0))},this),z=z.concat(this.inline.ruler2.disable(re,!0));var $=re.filter(function(ne){return z.indexOf(ne)<0});if($.length&&!ue)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+$);return this},Oe.prototype.use=function(re){var ue=[this].concat(Array.prototype.slice.call(arguments,1));return re.apply(re,ue),this},Oe.prototype.parse=function(re,ue){if("string"!=typeof re)throw new Error("Input data should be a String");var z=new this.core.State(re,this,ue);return this.core.process(z),z.tokens},Oe.prototype.render=function(re,ue){return this.renderer.render(this.parse(re,ue=ue||{}),this.options,ue)},Oe.prototype.parseInline=function(re,ue){var z=new this.core.State(re,this,ue);return z.inlineMode=!0,this.core.process(z),z.tokens},Oe.prototype.renderInline=function(re,ue){return this.renderer.render(this.parseInline(re,ue=ue||{}),this.options,ue)},Be.exports=Oe},4223:(Be,Ce,V)=>{"use strict";var Y=V(1368),D=[["table",V(2281),["paragraph","reference"]],["code",V(6372)],["fence",V(7931),["paragraph","reference","blockquote","list"]],["blockquote",V(72),["paragraph","reference","blockquote","list"]],["hr",V(8570),["paragraph","reference","blockquote","list"]],["list",V(7827),["paragraph","reference","blockquote"]],["reference",V(5886)],["html_block",V(5134),["paragraph","reference","blockquote"]],["heading",V(3462),["paragraph","reference","blockquote"]],["lheading",V(5920)],["paragraph",V(851)]];function H(){this.ruler=new Y;for(var B=0;B<D.length;B++)this.ruler.push(D[B][0],D[B][1],{alt:(D[B][2]||[]).slice()})}H.prototype.tokenize=function(B,W,P){for(var q,te=this.ruler.getRules(""),J=te.length,oe=W,se=!1,Q=B.md.options.maxNesting;oe<P&&(B.line=oe=B.skipEmptyLines(oe),!(oe>=P||B.sCount[oe]<B.blkIndent));){if(B.level>=Q){B.line=P;break}for(q=0;q<J&&!te[q](B,oe,P,!1);q++);B.tight=!se,B.isEmpty(B.line-1)&&(se=!0),(oe=B.line)<P&&B.isEmpty(oe)&&(se=!0,oe++,B.line=oe)}},H.prototype.parse=function(B,W,P,O){var q;!B||(q=new this.State(B,W,P,O),this.tokenize(q,q.line,q.lineMax))},H.prototype.State=V(1845),Be.exports=H},2080:(Be,Ce,V)=>{"use strict";var Y=V(1368),D=[["normalize",V(7398)],["block",V(8905)],["inline",V(3591)],["linkify",V(9212)],["replacements",V(1982)],["smartquotes",V(8157)],["text_join",V(2245)]];function H(){this.ruler=new Y;for(var B=0;B<D.length;B++)this.ruler.push(D[B][0],D[B][1])}H.prototype.process=function(B){var W,P,O;for(W=0,P=(O=this.ruler.getRules("")).length;W<P;W++)O[W](B)},H.prototype.State=V(1076),Be.exports=H},2900:(Be,Ce,V)=>{"use strict";var Y=V(1368),D=[["text",V(1767)],["linkify",V(6234)],["newline",V(2921)],["escape",V(8763)],["backticks",V(415)],["strikethrough",V(8165).w],["emphasis",V(425).w],["link",V(7219)],["image",V(7936)],["autolink",V(6973)],["html_inline",V(3722)],["entity",V(3559)]],H=[["balance_pairs",V(9269)],["strikethrough",V(8165).g],["emphasis",V(425).g],["fragments_join",V(5767)]];function B(){var W;for(this.ruler=new Y,W=0;W<D.length;W++)this.ruler.push(D[W][0],D[W][1]);for(this.ruler2=new Y,W=0;W<H.length;W++)this.ruler2.push(H[W][0],H[W][1])}B.prototype.skipToken=function(W){var P,O,q=W.pos,te=this.ruler.getRules(""),J=te.length,oe=W.md.options.maxNesting,se=W.cache;if(typeof se[q]<"u")W.pos=se[q];else{if(W.level<oe)for(O=0;O<J&&(W.level++,P=te[O](W,!0),W.level--,!P);O++);else W.pos=W.posMax;P||W.pos++,se[q]=W.pos}},B.prototype.tokenize=function(W){for(var P,O,q=this.ruler.getRules(""),te=q.length,J=W.posMax,oe=W.md.options.maxNesting;W.pos<J;){if(W.level<oe)for(O=0;O<te&&!(P=q[O](W,!1));O++);if(P){if(W.pos>=J)break}else W.pending+=W.src[W.pos++]}W.pending&&W.pushPending()},B.prototype.parse=function(W,P,O,q){var te,J,oe,se=new this.State(W,P,O,q);for(this.tokenize(se),oe=(J=this.ruler2.getRules("")).length,te=0;te<oe;te++)J[te](se)},B.prototype.State=V(630),Be.exports=B},8687:Be=>{"use strict";Be.exports={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201c\u201d\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}}},4210:Be=>{"use strict";Be.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201c\u201d\u2018\u2019",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}}},7020:Be=>{"use strict";Be.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201c\u201d\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}}},7172:(Be,Ce,V)=>{"use strict";var Y=V(3332).assign,D=V(3332).unescapeAll,H=V(3332).escapeHtml,B={};function W(){this.rules=Y({},B)}B.code_inline=function(P,O,q,te,J){return"<code"+J.renderAttrs(P[O])+">"+H(P[O].content)+"</code>"},B.code_block=function(P,O,q,te,J){return"<pre"+J.renderAttrs(P[O])+"><code>"+H(P[O].content)+"</code></pre>\n"},B.fence=function(P,O,q,te,J){var ae,xe,Oe,re,oe=P[O],se=oe.info?D(oe.info).trim():"",Q="",U="";return se&&(Q=(Oe=se.split(/(\s+)/g))[0],U=Oe.slice(2).join("")),0===(ae=q.highlight&&q.highlight(oe.content,Q,U)||H(oe.content)).indexOf("<pre")?ae+"\n":se?(xe=oe.attrIndex("class"),re=oe.attrs?oe.attrs.slice():[],xe<0?re.push(["class",q.langPrefix+Q]):(re[xe]=re[xe].slice(),re[xe][1]+=" "+q.langPrefix+Q),"<pre><code"+J.renderAttrs({attrs:re})+">"+ae+"</code></pre>\n"):"<pre><code"+J.renderAttrs(oe)+">"+ae+"</code></pre>\n"},B.image=function(P,O,q,te,J){var oe=P[O];return oe.attrs[oe.attrIndex("alt")][1]=J.renderInlineAsText(oe.children,q,te),J.renderToken(P,O,q)},B.hardbreak=function(P,O,q){return q.xhtmlOut?"<br />\n":"<br>\n"},B.softbreak=function(P,O,q){return q.breaks?q.xhtmlOut?"<br />\n":"<br>\n":"\n"},B.text=function(P,O){return H(P[O].content)},B.html_block=function(P,O){return P[O].content},B.html_inline=function(P,O){return P[O].content},W.prototype.renderAttrs=function(O){var q,te,J;if(!O.attrs)return"";for(J="",q=0,te=O.attrs.length;q<te;q++)J+=" "+H(O.attrs[q][0])+'="'+H(O.attrs[q][1])+'"';return J},W.prototype.renderToken=function(O,q,te){var J,oe="",se=!1,Q=O[q];return Q.hidden?"":(Q.block&&-1!==Q.nesting&&q&&O[q-1].hidden&&(oe+="\n"),oe+=(-1===Q.nesting?"</":"<")+Q.tag,oe+=this.renderAttrs(Q),0===Q.nesting&&te.xhtmlOut&&(oe+=" /"),Q.block&&(se=!0,1===Q.nesting&&q+1<O.length&&("inline"===(J=O[q+1]).type||J.hidden||-1===J.nesting&&J.tag===Q.tag)&&(se=!1)),oe+=se?">\n":">")},W.prototype.renderInline=function(P,O,q){for(var te,J="",oe=this.rules,se=0,Q=P.length;se<Q;se++)J+=typeof oe[te=P[se].type]<"u"?oe[te](P,se,O,q,this):this.renderToken(P,se,O);return J},W.prototype.renderInlineAsText=function(P,O,q){for(var te="",J=0,oe=P.length;J<oe;J++)"text"===P[J].type?te+=P[J].content:"image"===P[J].type?te+=this.renderInlineAsText(P[J].children,O,q):"softbreak"===P[J].type&&(te+="\n");return te},W.prototype.render=function(P,O,q){var te,J,oe,se="",Q=this.rules;for(te=0,J=P.length;te<J;te++)se+="inline"===(oe=P[te].type)?this.renderInline(P[te].children,O,q):typeof Q[oe]<"u"?Q[P[te].type](P,te,O,q,this):this.renderToken(P,te,O,q);return se},Be.exports=W},1368:Be=>{"use strict";function Ce(){this.__rules__=[],this.__cache__=null}Ce.prototype.__find__=function(V){for(var Y=0;Y<this.__rules__.length;Y++)if(this.__rules__[Y].name===V)return Y;return-1},Ce.prototype.__compile__=function(){var V=this,Y=[""];V.__rules__.forEach(function(D){!D.enabled||D.alt.forEach(function(H){Y.indexOf(H)<0&&Y.push(H)})}),V.__cache__={},Y.forEach(function(D){V.__cache__[D]=[],V.__rules__.forEach(function(H){!H.enabled||D&&H.alt.indexOf(D)<0||V.__cache__[D].push(H.fn)})})},Ce.prototype.at=function(V,Y,D){var H=this.__find__(V),B=D||{};if(-1===H)throw new Error("Parser rule not found: "+V);this.__rules__[H].fn=Y,this.__rules__[H].alt=B.alt||[],this.__cache__=null},Ce.prototype.before=function(V,Y,D,H){var B=this.__find__(V),W=H||{};if(-1===B)throw new Error("Parser rule not found: "+V);this.__rules__.splice(B,0,{name:Y,enabled:!0,fn:D,alt:W.alt||[]}),this.__cache__=null},Ce.prototype.after=function(V,Y,D,H){var B=this.__find__(V),W=H||{};if(-1===B)throw new Error("Parser rule not found: "+V);this.__rules__.splice(B+1,0,{name:Y,enabled:!0,fn:D,alt:W.alt||[]}),this.__cache__=null},Ce.prototype.push=function(V,Y,D){this.__rules__.push({name:V,enabled:!0,fn:Y,alt:(D||{}).alt||[]}),this.__cache__=null},Ce.prototype.enable=function(V,Y){Array.isArray(V)||(V=[V]);var D=[];return V.forEach(function(H){var B=this.__find__(H);if(B<0){if(Y)return;throw new Error("Rules manager: invalid rule name "+H)}this.__rules__[B].enabled=!0,D.push(H)},this),this.__cache__=null,D},Ce.prototype.enableOnly=function(V,Y){Array.isArray(V)||(V=[V]),this.__rules__.forEach(function(D){D.enabled=!1}),this.enable(V,Y)},Ce.prototype.disable=function(V,Y){Array.isArray(V)||(V=[V]);var D=[];return V.forEach(function(H){var B=this.__find__(H);if(B<0){if(Y)return;throw new Error("Rules manager: invalid rule name "+H)}this.__rules__[B].enabled=!1,D.push(H)},this),this.__cache__=null,D},Ce.prototype.getRules=function(V){return null===this.__cache__&&this.__compile__(),this.__cache__[V]||[]},Be.exports=Ce},72:(Be,Ce,V)=>{"use strict";var Y=V(3332).isSpace;Be.exports=function(H,B,W,P){var O,q,te,J,oe,se,Q,U,ae,xe,Oe,re,ue,z,$,ne,ge,Ue,Re,rt,Pe=H.lineMax,at=H.bMarks[B]+H.tShift[B],xt=H.eMarks[B];if(H.sCount[B]-H.blkIndent>=4||62!==H.src.charCodeAt(at++))return!1;if(P)return!0;for(J=ae=H.sCount[B]+1,32===H.src.charCodeAt(at)?(at++,J++,ae++,O=!1,ne=!0):9===H.src.charCodeAt(at)?(ne=!0,(H.bsCount[B]+ae)%4==3?(at++,J++,ae++,O=!1):O=!0):ne=!1,xe=[H.bMarks[B]],H.bMarks[B]=at;at<xt&&(q=H.src.charCodeAt(at),Y(q));)9===q?ae+=4-(ae+H.bsCount[B]+(O?1:0))%4:ae++,at++;for(Oe=[H.bsCount[B]],H.bsCount[B]=H.sCount[B]+1+(ne?1:0),se=at>=xt,z=[H.sCount[B]],H.sCount[B]=ae-J,$=[H.tShift[B]],H.tShift[B]=at-H.bMarks[B],Ue=H.md.block.ruler.getRules("blockquote"),ue=H.parentType,H.parentType="blockquote",U=B+1;U<W&&(rt=H.sCount[U]<H.blkIndent,!((at=H.bMarks[U]+H.tShift[U])>=(xt=H.eMarks[U])));U++)if(62!==H.src.charCodeAt(at++)||rt){if(se)break;for(ge=!1,te=0,oe=Ue.length;te<oe;te++)if(Ue[te](H,U,W,!0)){ge=!0;break}if(ge){H.lineMax=U,0!==H.blkIndent&&(xe.push(H.bMarks[U]),Oe.push(H.bsCount[U]),$.push(H.tShift[U]),z.push(H.sCount[U]),H.sCount[U]-=H.blkIndent);break}xe.push(H.bMarks[U]),Oe.push(H.bsCount[U]),$.push(H.tShift[U]),z.push(H.sCount[U]),H.sCount[U]=-1}else{for(J=ae=H.sCount[U]+1,32===H.src.charCodeAt(at)?(at++,J++,ae++,O=!1,ne=!0):9===H.src.charCodeAt(at)?(ne=!0,(H.bsCount[U]+ae)%4==3?(at++,J++,ae++,O=!1):O=!0):ne=!1,xe.push(H.bMarks[U]),H.bMarks[U]=at;at<xt&&(q=H.src.charCodeAt(at),Y(q));)9===q?ae+=4-(ae+H.bsCount[U]+(O?1:0))%4:ae++,at++;se=at>=xt,Oe.push(H.bsCount[U]),H.bsCount[U]=H.sCount[U]+1+(ne?1:0),z.push(H.sCount[U]),H.sCount[U]=ae-J,$.push(H.tShift[U]),H.tShift[U]=at-H.bMarks[U]}for(re=H.blkIndent,H.blkIndent=0,(Re=H.push("blockquote_open","blockquote",1)).markup=">",Re.map=Q=[B,0],H.md.block.tokenize(H,B,U),(Re=H.push("blockquote_close","blockquote",-1)).markup=">",H.lineMax=Pe,H.parentType=ue,Q[1]=H.line,te=0;te<$.length;te++)H.bMarks[te+B]=xe[te],H.tShift[te+B]=$[te],H.sCount[te+B]=z[te],H.bsCount[te+B]=Oe[te];return H.blkIndent=re,!0}},6372:Be=>{"use strict";Be.exports=function(V,Y,D){var H,B,W;if(V.sCount[Y]-V.blkIndent<4)return!1;for(B=H=Y+1;H<D;)if(V.isEmpty(H))H++;else{if(!(V.sCount[H]-V.blkIndent>=4))break;B=++H}return V.line=B,(W=V.push("code_block","code",0)).content=V.getLines(Y,B,4+V.blkIndent,!1)+"\n",W.map=[Y,V.line],!0}},7931:Be=>{"use strict";Be.exports=function(V,Y,D,H){var B,W,P,O,q,te,J,oe=!1,se=V.bMarks[Y]+V.tShift[Y],Q=V.eMarks[Y];if(V.sCount[Y]-V.blkIndent>=4||se+3>Q||126!==(B=V.src.charCodeAt(se))&&96!==B||(q=se,(W=(se=V.skipChars(se,B))-q)<3)||(J=V.src.slice(q,se),P=V.src.slice(se,Q),96===B&&P.indexOf(String.fromCharCode(B))>=0))return!1;if(H)return!0;for(O=Y;!(++O>=D||(se=q=V.bMarks[O]+V.tShift[O],Q=V.eMarks[O],se<Q&&V.sCount[O]<V.blkIndent));)if(!(V.src.charCodeAt(se)!==B||V.sCount[O]-V.blkIndent>=4||(se=V.skipChars(se,B),se-q<W||(se=V.skipSpaces(se),se<Q)))){oe=!0;break}return W=V.sCount[Y],V.line=O+(oe?1:0),(te=V.push("fence","code",0)).info=P,te.content=V.getLines(Y+1,O,W,!0),te.markup=J,te.map=[Y,V.line],!0}},3462:(Be,Ce,V)=>{"use strict";var Y=V(3332).isSpace;Be.exports=function(H,B,W,P){var O,q,te,J,oe=H.bMarks[B]+H.tShift[B],se=H.eMarks[B];if(H.sCount[B]-H.blkIndent>=4||35!==(O=H.src.charCodeAt(oe))||oe>=se)return!1;for(q=1,O=H.src.charCodeAt(++oe);35===O&&oe<se&&q<=6;)q++,O=H.src.charCodeAt(++oe);return!(q>6||oe<se&&!Y(O)||(P||(se=H.skipSpacesBack(se,oe),(te=H.skipCharsBack(se,35,oe))>oe&&Y(H.src.charCodeAt(te-1))&&(se=te),H.line=B+1,(J=H.push("heading_open","h"+String(q),1)).markup="########".slice(0,q),J.map=[B,H.line],(J=H.push("inline","",0)).content=H.src.slice(oe,se).trim(),J.map=[B,H.line],J.children=[],(J=H.push("heading_close","h"+String(q),-1)).markup="########".slice(0,q)),0))}},8570:(Be,Ce,V)=>{"use strict";var Y=V(3332).isSpace;Be.exports=function(H,B,W,P){var O,q,te,J,oe=H.bMarks[B]+H.tShift[B],se=H.eMarks[B];if(H.sCount[B]-H.blkIndent>=4||42!==(O=H.src.charCodeAt(oe++))&&45!==O&&95!==O)return!1;for(q=1;oe<se;){if((te=H.src.charCodeAt(oe++))!==O&&!Y(te))return!1;te===O&&q++}return!(q<3||(P||(H.line=B+1,(J=H.push("hr","hr",0)).map=[B,H.line],J.markup=Array(q+1).join(String.fromCharCode(O))),0))}},5134:(Be,Ce,V)=>{"use strict";var Y=V(2484),D=V(3266).q,H=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+Y.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(D.source+"\\s*$"),/^$/,!1]];Be.exports=function(W,P,O,q){var te,J,oe,se,Q=W.bMarks[P]+W.tShift[P],U=W.eMarks[P];if(W.sCount[P]-W.blkIndent>=4||!W.md.options.html||60!==W.src.charCodeAt(Q))return!1;for(se=W.src.slice(Q,U),te=0;te<H.length&&!H[te][0].test(se);te++);if(te===H.length)return!1;if(q)return H[te][2];if(J=P+1,!H[te][1].test(se))for(;J<O&&!(W.sCount[J]<W.blkIndent);J++)if(se=W.src.slice(Q=W.bMarks[J]+W.tShift[J],U=W.eMarks[J]),H[te][1].test(se)){0!==se.length&&J++;break}return W.line=J,(oe=W.push("html_block","",0)).map=[P,J],oe.content=W.getLines(P,J,W.blkIndent,!0),!0}},5920:Be=>{"use strict";Be.exports=function(V,Y,D){var H,B,W,P,O,q,te,J,oe,Q,se=Y+1,U=V.md.block.ruler.getRules("paragraph");if(V.sCount[Y]-V.blkIndent>=4)return!1;for(Q=V.parentType,V.parentType="paragraph";se<D&&!V.isEmpty(se);se++)if(!(V.sCount[se]-V.blkIndent>3)){if(V.sCount[se]>=V.blkIndent&&(q=V.bMarks[se]+V.tShift[se])<(te=V.eMarks[se])&&(45===(oe=V.src.charCodeAt(q))||61===oe)&&(q=V.skipChars(q,oe),(q=V.skipSpaces(q))>=te)){J=61===oe?1:2;break}if(!(V.sCount[se]<0)){for(B=!1,W=0,P=U.length;W<P;W++)if(U[W](V,se,D,!0)){B=!0;break}if(B)break}}return!!J&&(H=V.getLines(Y,se,V.blkIndent,!1).trim(),V.line=se+1,(O=V.push("heading_open","h"+String(J),1)).markup=String.fromCharCode(oe),O.map=[Y,V.line],(O=V.push("inline","",0)).content=H,O.map=[Y,V.line-1],O.children=[],(O=V.push("heading_close","h"+String(J),-1)).markup=String.fromCharCode(oe),V.parentType=Q,!0)}},7827:(Be,Ce,V)=>{"use strict";var Y=V(3332).isSpace;function D(W,P){var O,q,te,J;return q=W.bMarks[P]+W.tShift[P],te=W.eMarks[P],42!==(O=W.src.charCodeAt(q++))&&45!==O&&43!==O||q<te&&(J=W.src.charCodeAt(q),!Y(J))?-1:q}function H(W,P){var O,q=W.bMarks[P]+W.tShift[P],te=q,J=W.eMarks[P];if(te+1>=J||(O=W.src.charCodeAt(te++))<48||O>57)return-1;for(;;){if(te>=J)return-1;if(!((O=W.src.charCodeAt(te++))>=48&&O<=57)){if(41===O||46===O)break;return-1}if(te-q>=10)return-1}return te<J&&(O=W.src.charCodeAt(te),!Y(O))?-1:te}Be.exports=function(P,O,q,te){var J,oe,se,Q,U,ae,xe,Oe,re,ue,z,$,ne,ge,Ue,Re,rt,Pe,at,xt,He,ft,gt,bt,kn,Ut,Dn,Jt,nn=!1,Ln=!0;if(P.sCount[O]-P.blkIndent>=4||P.listIndent>=0&&P.sCount[O]-P.listIndent>=4&&P.sCount[O]<P.blkIndent)return!1;if(te&&"paragraph"===P.parentType&&P.sCount[O]>=P.blkIndent&&(nn=!0),(gt=H(P,O))>=0){if(xe=!0,kn=P.bMarks[O]+P.tShift[O],ne=Number(P.src.slice(kn,gt-1)),nn&&1!==ne)return!1}else{if(!((gt=D(P,O))>=0))return!1;xe=!1}if(nn&&P.skipSpaces(gt)>=P.eMarks[O])return!1;if($=P.src.charCodeAt(gt-1),te)return!0;for(z=P.tokens.length,xe?(Jt=P.push("ordered_list_open","ol",1),1!==ne&&(Jt.attrs=[["start",ne]])):Jt=P.push("bullet_list_open","ul",1),Jt.map=ue=[O,0],Jt.markup=String.fromCharCode($),Ue=O,bt=!1,Dn=P.md.block.ruler.getRules("list"),Pe=P.parentType,P.parentType="list";Ue<q;){for(ft=gt,ge=P.eMarks[Ue],ae=Re=P.sCount[Ue]+gt-(P.bMarks[O]+P.tShift[O]);ft<ge;){if(9===(J=P.src.charCodeAt(ft)))Re+=4-(Re+P.bsCount[Ue])%4;else{if(32!==J)break;Re++}ft++}if((U=(oe=ft)>=ge?1:Re-ae)>4&&(U=1),Q=ae+U,(Jt=P.push("list_item_open","li",1)).markup=String.fromCharCode($),Jt.map=Oe=[O,0],xe&&(Jt.info=P.src.slice(kn,gt-1)),He=P.tight,xt=P.tShift[O],at=P.sCount[O],rt=P.listIndent,P.listIndent=P.blkIndent,P.blkIndent=Q,P.tight=!0,P.tShift[O]=oe-P.bMarks[O],P.sCount[O]=Re,oe>=ge&&P.isEmpty(O+1)?P.line=Math.min(P.line+2,q):P.md.block.tokenize(P,O,q,!0),(!P.tight||bt)&&(Ln=!1),bt=P.line-O>1&&P.isEmpty(P.line-1),P.blkIndent=P.listIndent,P.listIndent=rt,P.tShift[O]=xt,P.sCount[O]=at,P.tight=He,(Jt=P.push("list_item_close","li",-1)).markup=String.fromCharCode($),Ue=O=P.line,Oe[1]=Ue,oe=P.bMarks[O],Ue>=q||P.sCount[Ue]<P.blkIndent||P.sCount[O]-P.blkIndent>=4)break;for(Ut=!1,se=0,re=Dn.length;se<re;se++)if(Dn[se](P,Ue,q,!0)){Ut=!0;break}if(Ut)break;if(xe){if((gt=H(P,Ue))<0)break;kn=P.bMarks[Ue]+P.tShift[Ue]}else if((gt=D(P,Ue))<0)break;if($!==P.src.charCodeAt(gt-1))break}return(Jt=xe?P.push("ordered_list_close","ol",-1):P.push("bullet_list_close","ul",-1)).markup=String.fromCharCode($),ue[1]=Ue,P.line=Ue,P.parentType=Pe,Ln&&function B(W,P){var O,q,te=W.level+2;for(O=P+2,q=W.tokens.length-2;O<q;O++)W.tokens[O].level===te&&"paragraph_open"===W.tokens[O].type&&(W.tokens[O+2].hidden=!0,W.tokens[O].hidden=!0,O+=2)}(P,z),!0}},851:Be=>{"use strict";Be.exports=function(V,Y){var D,H,B,W,P,O,q=Y+1,te=V.md.block.ruler.getRules("paragraph"),J=V.lineMax;for(O=V.parentType,V.parentType="paragraph";q<J&&!V.isEmpty(q);q++)if(!(V.sCount[q]-V.blkIndent>3||V.sCount[q]<0)){for(H=!1,B=0,W=te.length;B<W;B++)if(te[B](V,q,J,!0)){H=!0;break}if(H)break}return D=V.getLines(Y,q,V.blkIndent,!1).trim(),V.line=q,(P=V.push("paragraph_open","p",1)).map=[Y,V.line],(P=V.push("inline","",0)).content=D,P.map=[Y,V.line],P.children=[],P=V.push("paragraph_close","p",-1),V.parentType=O,!0}},5886:(Be,Ce,V)=>{"use strict";var Y=V(3332).normalizeReference,D=V(3332).isSpace;Be.exports=function(B,W,P,O){var q,te,J,oe,se,Q,U,ae,xe,Oe,re,ue,z,$,ne,ge,Ue=0,Re=B.bMarks[W]+B.tShift[W],rt=B.eMarks[W],Pe=W+1;if(B.sCount[W]-B.blkIndent>=4||91!==B.src.charCodeAt(Re))return!1;for(;++Re<rt;)if(93===B.src.charCodeAt(Re)&&92!==B.src.charCodeAt(Re-1)){if(Re+1===rt||58!==B.src.charCodeAt(Re+1))return!1;break}for(oe=B.lineMax,ne=B.md.block.ruler.getRules("reference"),Oe=B.parentType,B.parentType="reference";Pe<oe&&!B.isEmpty(Pe);Pe++)if(!(B.sCount[Pe]-B.blkIndent>3||B.sCount[Pe]<0)){for($=!1,Q=0,U=ne.length;Q<U;Q++)if(ne[Q](B,Pe,oe,!0)){$=!0;break}if($)break}for(rt=(z=B.getLines(W,Pe,B.blkIndent,!1).trim()).length,Re=1;Re<rt;Re++){if(91===(q=z.charCodeAt(Re)))return!1;if(93===q){xe=Re;break}(10===q||92===q&&++Re<rt&&10===z.charCodeAt(Re))&&Ue++}if(xe<0||58!==z.charCodeAt(xe+1))return!1;for(Re=xe+2;Re<rt;Re++)if(10===(q=z.charCodeAt(Re)))Ue++;else if(!D(q))break;if(!(re=B.md.helpers.parseLinkDestination(z,Re,rt)).ok||(se=B.md.normalizeLink(re.str),!B.md.validateLink(se)))return!1;for(te=Re=re.pos,J=Ue+=re.lines,ue=Re;Re<rt;Re++)if(10===(q=z.charCodeAt(Re)))Ue++;else if(!D(q))break;for(re=B.md.helpers.parseLinkTitle(z,Re,rt),Re<rt&&ue!==Re&&re.ok?(ge=re.str,Re=re.pos,Ue+=re.lines):(ge="",Re=te,Ue=J);Re<rt&&(q=z.charCodeAt(Re),D(q));)Re++;if(Re<rt&&10!==z.charCodeAt(Re)&&ge)for(ge="",Re=te,Ue=J;Re<rt&&(q=z.charCodeAt(Re),D(q));)Re++;return!(Re<rt&&10!==z.charCodeAt(Re)||(ae=Y(z.slice(1,xe)),!ae)||(O||(typeof B.env.references>"u"&&(B.env.references={}),typeof B.env.references[ae]>"u"&&(B.env.references[ae]={title:ge,href:se}),B.parentType=Oe,B.line=W+Ue+1),0))}},1845:(Be,Ce,V)=>{"use strict";var Y=V(6263),D=V(3332).isSpace;function H(B,W,P,O){var q,te,J,oe,se,Q,U,ae;for(this.src=B,this.md=W,this.env=P,this.tokens=O,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0,this.result="",ae=!1,J=oe=Q=U=0,se=(te=this.src).length;oe<se;oe++){if(q=te.charCodeAt(oe),!ae){if(D(q)){Q++,9===q?U+=4-U%4:U++;continue}ae=!0}(10===q||oe===se-1)&&(10!==q&&oe++,this.bMarks.push(J),this.eMarks.push(oe),this.tShift.push(Q),this.sCount.push(U),this.bsCount.push(0),ae=!1,Q=0,U=0,J=oe+1)}this.bMarks.push(te.length),this.eMarks.push(te.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}H.prototype.push=function(B,W,P){var O=new Y(B,W,P);return O.block=!0,P<0&&this.level--,O.level=this.level,P>0&&this.level++,this.tokens.push(O),O},H.prototype.isEmpty=function(W){return this.bMarks[W]+this.tShift[W]>=this.eMarks[W]},H.prototype.skipEmptyLines=function(W){for(var P=this.lineMax;W<P&&!(this.bMarks[W]+this.tShift[W]<this.eMarks[W]);W++);return W},H.prototype.skipSpaces=function(W){for(var P,O=this.src.length;W<O&&(P=this.src.charCodeAt(W),D(P));W++);return W},H.prototype.skipSpacesBack=function(W,P){if(W<=P)return W;for(;W>P;)if(!D(this.src.charCodeAt(--W)))return W+1;return W},H.prototype.skipChars=function(W,P){for(var O=this.src.length;W<O&&this.src.charCodeAt(W)===P;W++);return W},H.prototype.skipCharsBack=function(W,P,O){if(W<=O)return W;for(;W>O;)if(P!==this.src.charCodeAt(--W))return W+1;return W},H.prototype.getLines=function(W,P,O,q){var te,J,oe,se,Q,U,ae,xe=W;if(W>=P)return"";for(U=new Array(P-W),te=0;xe<P;xe++,te++){for(J=0,ae=se=this.bMarks[xe],Q=xe+1<P||q?this.eMarks[xe]+1:this.eMarks[xe];se<Q&&J<O;){if(oe=this.src.charCodeAt(se),D(oe))9===oe?J+=4-(J+this.bsCount[xe])%4:J++;else{if(!(se-ae<this.tShift[xe]))break;J++}se++}U[te]=J>O?new Array(J-O+1).join(" ")+this.src.slice(se,Q):this.src.slice(se,Q)}return U.join("")},H.prototype.Token=Y,Be.exports=H},2281:(Be,Ce,V)=>{"use strict";var Y=V(3332).isSpace;function D(B,W){return B.src.slice(B.bMarks[W]+B.tShift[W],B.eMarks[W])}function H(B){var q,W=[],P=0,O=B.length,te=!1,J=0,oe="";for(q=B.charCodeAt(P);P<O;)124===q&&(te?(oe+=B.substring(J,P-1),J=P):(W.push(oe+B.substring(J,P)),oe="",J=P+1)),te=92===q,P++,q=B.charCodeAt(P);return W.push(oe+B.substring(J)),W}Be.exports=function(W,P,O,q){var te,J,oe,se,Q,U,ae,xe,Oe,re,ue,z,$,ne,ge,Ue,Re,rt;if(P+2>O||W.sCount[U=P+1]<W.blkIndent||W.sCount[U]-W.blkIndent>=4||(oe=W.bMarks[U]+W.tShift[U])>=W.eMarks[U]||124!==(Re=W.src.charCodeAt(oe++))&&45!==Re&&58!==Re||oe>=W.eMarks[U]||124!==(rt=W.src.charCodeAt(oe++))&&45!==rt&&58!==rt&&!Y(rt)||45===Re&&Y(rt))return!1;for(;oe<W.eMarks[U];){if(124!==(te=W.src.charCodeAt(oe))&&45!==te&&58!==te&&!Y(te))return!1;oe++}for(ae=(J=D(W,P+1)).split("|"),re=[],se=0;se<ae.length;se++){if(!(ue=ae[se].trim())){if(0===se||se===ae.length-1)continue;return!1}if(!/^:?-+:?$/.test(ue))return!1;58===ue.charCodeAt(ue.length-1)?re.push(58===ue.charCodeAt(0)?"center":"right"):58===ue.charCodeAt(0)?re.push("left"):re.push("")}if(-1===(J=D(W,P).trim()).indexOf("|")||W.sCount[P]-W.blkIndent>=4||((ae=H(J)).length&&""===ae[0]&&ae.shift(),ae.length&&""===ae[ae.length-1]&&ae.pop(),0===(xe=ae.length)||xe!==re.length))return!1;if(q)return!0;for(ne=W.parentType,W.parentType="table",Ue=W.md.block.ruler.getRules("blockquote"),(Oe=W.push("table_open","table",1)).map=z=[P,0],(Oe=W.push("thead_open","thead",1)).map=[P,P+1],(Oe=W.push("tr_open","tr",1)).map=[P,P+1],se=0;se<ae.length;se++)Oe=W.push("th_open","th",1),re[se]&&(Oe.attrs=[["style","text-align:"+re[se]]]),(Oe=W.push("inline","",0)).content=ae[se].trim(),Oe.children=[],Oe=W.push("th_close","th",-1);for(Oe=W.push("tr_close","tr",-1),Oe=W.push("thead_close","thead",-1),U=P+2;U<O&&!(W.sCount[U]<W.blkIndent);U++){for(ge=!1,se=0,Q=Ue.length;se<Q;se++)if(Ue[se](W,U,O,!0)){ge=!0;break}if(ge||!(J=D(W,U).trim())||W.sCount[U]-W.blkIndent>=4)break;for((ae=H(J)).length&&""===ae[0]&&ae.shift(),ae.length&&""===ae[ae.length-1]&&ae.pop(),U===P+2&&((Oe=W.push("tbody_open","tbody",1)).map=$=[P+2,0]),(Oe=W.push("tr_open","tr",1)).map=[U,U+1],se=0;se<xe;se++)Oe=W.push("td_open","td",1),re[se]&&(Oe.attrs=[["style","text-align:"+re[se]]]),(Oe=W.push("inline","",0)).content=ae[se]?ae[se].trim():"",Oe.children=[],Oe=W.push("td_close","td",-1);Oe=W.push("tr_close","tr",-1)}return $&&(Oe=W.push("tbody_close","tbody",-1),$[1]=U),Oe=W.push("table_close","table",-1),z[1]=U,W.parentType=ne,W.line=U,!0}},8905:Be=>{"use strict";Be.exports=function(V){var Y;V.inlineMode?((Y=new V.Token("inline","",0)).content=V.src,Y.map=[0,1],Y.children=[],V.tokens.push(Y)):V.md.block.parse(V.src,V.md,V.env,V.tokens)}},3591:Be=>{"use strict";Be.exports=function(V){var D,H,B,Y=V.tokens;for(H=0,B=Y.length;H<B;H++)"inline"===(D=Y[H]).type&&V.md.inline.parse(D.content,V.md,V.env,D.children)}},9212:(Be,Ce,V)=>{"use strict";var Y=V(3332).arrayReplaceAt;Be.exports=function(W){var P,O,q,te,J,oe,se,Q,U,ae,xe,Oe,re,z,$,ge,ne=W.tokens;if(W.md.options.linkify)for(O=0,q=ne.length;O<q;O++)if("inline"===ne[O].type&&W.md.linkify.pretest(ne[O].content))for(re=0,P=(te=ne[O].children).length-1;P>=0;P--)if("link_close"!==(oe=te[P]).type){if("html_inline"===oe.type&&(/^<a[>\s]/i.test(oe.content)&&re>0&&re--,/^<\/a\s*>/i.test(oe.content)&&re++),!(re>0)&&"text"===oe.type&&W.md.linkify.test(oe.content)){for(ge=W.md.linkify.match(U=oe.content),se=[],Oe=oe.level,xe=0,ge.length>0&&0===ge[0].index&&P>0&&"text_special"===te[P-1].type&&(ge=ge.slice(1)),Q=0;Q<ge.length;Q++)z=W.md.normalizeLink(ge[Q].url),W.md.validateLink(z)&&($=ge[Q].text,$=ge[Q].schema?"mailto:"!==ge[Q].schema||/^mailto:/i.test($)?W.md.normalizeLinkText($):W.md.normalizeLinkText("mailto:"+$).replace(/^mailto:/,""):W.md.normalizeLinkText("http://"+$).replace(/^http:\/\//,""),(ae=ge[Q].index)>xe&&((J=new W.Token("text","",0)).content=U.slice(xe,ae),J.level=Oe,se.push(J)),(J=new W.Token("link_open","a",1)).attrs=[["href",z]],J.level=Oe++,J.markup="linkify",J.info="auto",se.push(J),(J=new W.Token("text","",0)).content=$,J.level=Oe,se.push(J),(J=new W.Token("link_close","a",-1)).level=--Oe,J.markup="linkify",J.info="auto",se.push(J),xe=ge[Q].lastIndex);xe<U.length&&((J=new W.Token("text","",0)).content=U.slice(xe),J.level=Oe,se.push(J)),ne[O].children=te=Y(te,P,se)}}else for(P--;te[P].level!==oe.level&&"link_open"!==te[P].type;)P--}},7398:Be=>{"use strict";var Ce=/\r\n?|\n/g,V=/\0/g;Be.exports=function(D){var H;H=(H=D.src.replace(Ce,"\n")).replace(V,"\ufffd"),D.src=H}},1982:Be=>{"use strict";var Ce=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,V=/\((c|tm|r)\)/i,Y=/\((c|tm|r)\)/gi,D={c:"\xa9",r:"\xae",tm:"\u2122"};function H(P,O){return D[O.toLowerCase()]}function B(P){var O,q,te=0;for(O=P.length-1;O>=0;O--)"text"===(q=P[O]).type&&!te&&(q.content=q.content.replace(Y,H)),"link_open"===q.type&&"auto"===q.info&&te--,"link_close"===q.type&&"auto"===q.info&&te++}function W(P){var O,q,te=0;for(O=P.length-1;O>=0;O--)"text"===(q=P[O]).type&&!te&&Ce.test(q.content)&&(q.content=q.content.replace(/\+-/g,"\xb1").replace(/\.{2,}/g,"\u2026").replace(/([?!])\u2026/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/gm,"$1\u2014").replace(/(^|\s)--(?=\s|$)/gm,"$1\u2013").replace(/(^|[^-\s])--(?=[^-\s]|$)/gm,"$1\u2013")),"link_open"===q.type&&"auto"===q.info&&te--,"link_close"===q.type&&"auto"===q.info&&te++}Be.exports=function(O){var q;if(O.md.options.typographer)for(q=O.tokens.length-1;q>=0;q--)"inline"===O.tokens[q].type&&(V.test(O.tokens[q].content)&&B(O.tokens[q].children),Ce.test(O.tokens[q].content)&&W(O.tokens[q].children))}},8157:(Be,Ce,V)=>{"use strict";var Y=V(3332).isWhiteSpace,D=V(3332).isPunctChar,H=V(3332).isMdAsciiPunct,B=/['"]/,W=/['"]/g;function O(te,J,oe){return te.slice(0,J)+oe+te.slice(J+1)}function q(te,J){var oe,se,Q,U,ae,xe,Oe,re,ue,z,$,ne,ge,Ue,Re,rt,Pe,at,xt,He,ft;for(xt=[],oe=0;oe<te.length;oe++){for(se=te[oe],Oe=te[oe].level,Pe=xt.length-1;Pe>=0&&!(xt[Pe].level<=Oe);Pe--);if(xt.length=Pe+1,"text"===se.type){ae=0,xe=(Q=se.content).length;e:for(;ae<xe&&(W.lastIndex=ae,U=W.exec(Q),U);){if(Re=rt=!0,ae=U.index+1,at="'"===U[0],ue=32,U.index-1>=0)ue=Q.charCodeAt(U.index-1);else for(Pe=oe-1;Pe>=0&&"softbreak"!==te[Pe].type&&"hardbreak"!==te[Pe].type;Pe--)if(te[Pe].content){ue=te[Pe].content.charCodeAt(te[Pe].content.length-1);break}if(z=32,ae<xe)z=Q.charCodeAt(ae);else for(Pe=oe+1;Pe<te.length&&"softbreak"!==te[Pe].type&&"hardbreak"!==te[Pe].type;Pe++)if(te[Pe].content){z=te[Pe].content.charCodeAt(0);break}if($=H(ue)||D(String.fromCharCode(ue)),ne=H(z)||D(String.fromCharCode(z)),ge=Y(ue),(Ue=Y(z))?Re=!1:ne&&(ge||$||(Re=!1)),ge?rt=!1:$&&(Ue||ne||(rt=!1)),34===z&&'"'===U[0]&&ue>=48&&ue<=57&&(rt=Re=!1),Re&&rt&&(Re=$,rt=ne),Re||rt){if(rt)for(Pe=xt.length-1;Pe>=0&&(re=xt[Pe],!(xt[Pe].level<Oe));Pe--)if(re.single===at&&xt[Pe].level===Oe){re=xt[Pe],at?(He=J.md.options.quotes[2],ft=J.md.options.quotes[3]):(He=J.md.options.quotes[0],ft=J.md.options.quotes[1]),se.content=O(se.content,U.index,ft),te[re.token].content=O(te[re.token].content,re.pos,He),ae+=ft.length-1,re.token===oe&&(ae+=He.length-1),xe=(Q=se.content).length,xt.length=Pe;continue e}Re?xt.push({token:oe,pos:U.index,single:at,level:Oe}):rt&&at&&(se.content=O(se.content,U.index,"\u2019"))}else at&&(se.content=O(se.content,U.index,"\u2019"))}}}}Be.exports=function(J){var oe;if(J.md.options.typographer)for(oe=J.tokens.length-1;oe>=0;oe--)"inline"!==J.tokens[oe].type||!B.test(J.tokens[oe].content)||q(J.tokens[oe].children,J)}},1076:(Be,Ce,V)=>{"use strict";var Y=V(6263);function D(H,B,W){this.src=H,this.env=W,this.tokens=[],this.inlineMode=!1,this.md=B}D.prototype.Token=Y,Be.exports=D},2245:Be=>{"use strict";Be.exports=function(V){var Y,D,H,B,W,P,O=V.tokens;for(Y=0,D=O.length;Y<D;Y++)if("inline"===O[Y].type){for(W=(H=O[Y].children).length,B=0;B<W;B++)"text_special"===H[B].type&&(H[B].type="text");for(B=P=0;B<W;B++)"text"===H[B].type&&B+1<W&&"text"===H[B+1].type?H[B+1].content=H[B].content+H[B+1].content:(B!==P&&(H[P]=H[B]),P++);B!==P&&(H.length=P)}}},6973:Be=>{"use strict";var Ce=/^([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,V=/^([a-zA-Z][a-zA-Z0-9+.\-]{1,31}):([^<>\x00-\x20]*)$/;Be.exports=function(D,H){var B,W,P,O,q,te,J=D.pos;if(60!==D.src.charCodeAt(J))return!1;for(q=D.pos,te=D.posMax;;){if(++J>=te||60===(O=D.src.charCodeAt(J)))return!1;if(62===O)break}return B=D.src.slice(q+1,J),V.test(B)?(W=D.md.normalizeLink(B),!!D.md.validateLink(W)&&(H||((P=D.push("link_open","a",1)).attrs=[["href",W]],P.markup="autolink",P.info="auto",(P=D.push("text","",0)).content=D.md.normalizeLinkText(B),(P=D.push("link_close","a",-1)).markup="autolink",P.info="auto"),D.pos+=B.length+2,!0)):!!Ce.test(B)&&(W=D.md.normalizeLink("mailto:"+B),!!D.md.validateLink(W)&&(H||((P=D.push("link_open","a",1)).attrs=[["href",W]],P.markup="autolink",P.info="auto",(P=D.push("text","",0)).content=D.md.normalizeLinkText(B),(P=D.push("link_close","a",-1)).markup="autolink",P.info="auto"),D.pos+=B.length+2,!0))}},415:Be=>{"use strict";Be.exports=function(V,Y){var D,H,B,W,P,O,q,te,J=V.pos;if(96!==V.src.charCodeAt(J))return!1;for(D=J,J++,H=V.posMax;J<H&&96===V.src.charCodeAt(J);)J++;if(q=(B=V.src.slice(D,J)).length,V.backticksScanned&&(V.backticks[q]||0)<=D)return Y||(V.pending+=B),V.pos+=q,!0;for(P=O=J;-1!==(P=V.src.indexOf("`",O));){for(O=P+1;O<H&&96===V.src.charCodeAt(O);)O++;if((te=O-P)===q)return Y||((W=V.push("code_inline","code",0)).markup=B,W.content=V.src.slice(J,P).replace(/\n/g," ").replace(/^ (.+) $/,"$1")),V.pos=O,!0;V.backticks[te]=P}return V.backticksScanned=!0,Y||(V.pending+=B),V.pos+=q,!0}},9269:Be=>{"use strict";function Ce(V,Y){var D,H,B,W,P,O,q,te,J={},oe=Y.length;if(oe){var se=0,Q=-2,U=[];for(D=0;D<oe;D++)if(B=Y[D],U.push(0),(Y[se].marker!==B.marker||Q!==B.token-1)&&(se=D),Q=B.token,B.length=B.length||0,B.close){for(J.hasOwnProperty(B.marker)||(J[B.marker]=[-1,-1,-1,-1,-1,-1]),P=J[B.marker][(B.open?3:0)+B.length%3],O=H=se-U[se]-1;H>P;H-=U[H]+1)if((W=Y[H]).marker===B.marker&&W.open&&W.end<0&&(q=!1,(W.close||B.open)&&(W.length+B.length)%3==0&&(W.length%3!=0||B.length%3!=0)&&(q=!0),!q)){U[D]=D-H+(te=H>0&&!Y[H-1].open?U[H-1]+1:0),U[H]=te,B.open=!1,W.end=D,W.close=!1,O=-1,Q=-2;break}-1!==O&&(J[B.marker][(B.open?3:0)+(B.length||0)%3]=O)}}}Be.exports=function(Y){var D,H=Y.tokens_meta,B=Y.tokens_meta.length;for(Ce(0,Y.delimiters),D=0;D<B;D++)H[D]&&H[D].delimiters&&Ce(0,H[D].delimiters)}},425:Be=>{"use strict";function Ce(V,Y){var D,H,B,W,P,O;for(D=Y.length-1;D>=0;D--)(95===(H=Y[D]).marker||42===H.marker)&&-1!==H.end&&(B=Y[H.end],O=D>0&&Y[D-1].end===H.end+1&&Y[D-1].marker===H.marker&&Y[D-1].token===H.token-1&&Y[H.end+1].token===B.token+1,P=String.fromCharCode(H.marker),(W=V.tokens[H.token]).type=O?"strong_open":"em_open",W.tag=O?"strong":"em",W.nesting=1,W.markup=O?P+P:P,W.content="",(W=V.tokens[B.token]).type=O?"strong_close":"em_close",W.tag=O?"strong":"em",W.nesting=-1,W.markup=O?P+P:P,W.content="",O&&(V.tokens[Y[D-1].token].content="",V.tokens[Y[H.end+1].token].content="",D--))}Be.exports.w=function(Y,D){var H,B,O=Y.src.charCodeAt(Y.pos);if(D||95!==O&&42!==O)return!1;for(B=Y.scanDelims(Y.pos,42===O),H=0;H<B.length;H++)Y.push("text","",0).content=String.fromCharCode(O),Y.delimiters.push({marker:O,length:B.length,token:Y.tokens.length-1,end:-1,open:B.can_open,close:B.can_close});return Y.pos+=B.length,!0},Be.exports.g=function(Y){var D,H=Y.tokens_meta,B=Y.tokens_meta.length;for(Ce(Y,Y.delimiters),D=0;D<B;D++)H[D]&&H[D].delimiters&&Ce(Y,H[D].delimiters)}},3559:(Be,Ce,V)=>{"use strict";var Y=V(6798),D=V(3332).has,H=V(3332).isValidEntityCode,B=V(3332).fromCodePoint,W=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,P=/^&([a-z][a-z0-9]{1,31});/i;Be.exports=function(q,te){var oe,se,Q,U=q.pos,ae=q.posMax;if(38!==q.src.charCodeAt(U)||U+1>=ae)return!1;if(35===q.src.charCodeAt(U+1)){if(se=q.src.slice(U).match(W))return te||(oe="x"===se[1][0].toLowerCase()?parseInt(se[1].slice(1),16):parseInt(se[1],10),(Q=q.push("text_special","",0)).content=H(oe)?B(oe):B(65533),Q.markup=se[0],Q.info="entity"),q.pos+=se[0].length,!0}else if((se=q.src.slice(U).match(P))&&D(Y,se[1]))return te||((Q=q.push("text_special","",0)).content=Y[se[1]],Q.markup=se[0],Q.info="entity"),q.pos+=se[0].length,!0;return!1}},8763:(Be,Ce,V)=>{"use strict";for(var Y=V(3332).isSpace,D=[],H=0;H<256;H++)D.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(B){D[B.charCodeAt(0)]=1}),Be.exports=function(W,P){var O,q,te,J,oe,se=W.pos,Q=W.posMax;if(92!==W.src.charCodeAt(se)||++se>=Q)return!1;if(10===(O=W.src.charCodeAt(se))){for(P||W.push("hardbreak","br",0),se++;se<Q&&(O=W.src.charCodeAt(se),Y(O));)se++;return W.pos=se,!0}return J=W.src[se],O>=55296&&O<=56319&&se+1<Q&&(q=W.src.charCodeAt(se+1))>=56320&&q<=57343&&(J+=W.src[se+1],se++),te="\\"+J,P||((oe=W.push("text_special","",0)).content=O<256&&0!==D[O]?J:te,oe.markup=te,oe.info="escape"),W.pos=se+1,!0}},5767:Be=>{"use strict";Be.exports=function(V){var Y,D,H=0,B=V.tokens,W=V.tokens.length;for(Y=D=0;Y<W;Y++)B[Y].nesting<0&&H--,B[Y].level=H,B[Y].nesting>0&&H++,"text"===B[Y].type&&Y+1<W&&"text"===B[Y+1].type?B[Y+1].content=B[Y].content+B[Y+1].content:(Y!==D&&(B[D]=B[Y]),D++);Y!==D&&(B.length=D)}},3722:(Be,Ce,V)=>{"use strict";var Y=V(3266).n;Be.exports=function(P,O){var q,te,J,oe,se=P.pos;return!(!P.md.options.html||(J=P.posMax,60!==P.src.charCodeAt(se)||se+2>=J)||(q=P.src.charCodeAt(se+1),33!==q&&63!==q&&47!==q&&!function B(W){var P=32|W;return P>=97&&P<=122}(q))||(te=P.src.slice(se).match(Y),!te)||(O||((oe=P.push("html_inline","",0)).content=P.src.slice(se,se+te[0].length),function D(W){return/^<a[>\s]/i.test(W)}(oe.content)&&P.linkLevel++,function H(W){return/^<\/a\s*>/i.test(W)}(oe.content)&&P.linkLevel--),P.pos+=te[0].length,0))}},7936:(Be,Ce,V)=>{"use strict";var Y=V(3332).normalizeReference,D=V(3332).isSpace;Be.exports=function(B,W){var P,O,q,te,J,oe,se,Q,U,ae,xe,Oe,re,ue="",z=B.pos,$=B.posMax;if(33!==B.src.charCodeAt(B.pos)||91!==B.src.charCodeAt(B.pos+1)||(oe=B.pos+2,(J=B.md.helpers.parseLinkLabel(B,B.pos+1,!1))<0))return!1;if((se=J+1)<$&&40===B.src.charCodeAt(se)){for(se++;se<$&&(O=B.src.charCodeAt(se),D(O)||10===O);se++);if(se>=$)return!1;for(re=se,(U=B.md.helpers.parseLinkDestination(B.src,se,B.posMax)).ok&&(ue=B.md.normalizeLink(U.str),B.md.validateLink(ue)?se=U.pos:ue=""),re=se;se<$&&(O=B.src.charCodeAt(se),D(O)||10===O);se++);if(U=B.md.helpers.parseLinkTitle(B.src,se,B.posMax),se<$&&re!==se&&U.ok)for(ae=U.str,se=U.pos;se<$&&(O=B.src.charCodeAt(se),D(O)||10===O);se++);else ae="";if(se>=$||41!==B.src.charCodeAt(se))return B.pos=z,!1;se++}else{if(typeof B.env.references>"u")return!1;if(se<$&&91===B.src.charCodeAt(se)?(re=se+1,(se=B.md.helpers.parseLinkLabel(B,se))>=0?te=B.src.slice(re,se++):se=J+1):se=J+1,te||(te=B.src.slice(oe,J)),!(Q=B.env.references[Y(te)]))return B.pos=z,!1;ue=Q.href,ae=Q.title}return W||(q=B.src.slice(oe,J),B.md.inline.parse(q,B.md,B.env,Oe=[]),(xe=B.push("image","img",0)).attrs=P=[["src",ue],["alt",""]],xe.children=Oe,xe.content=q,ae&&P.push(["title",ae])),B.pos=se,B.posMax=$,!0}},7219:(Be,Ce,V)=>{"use strict";var Y=V(3332).normalizeReference,D=V(3332).isSpace;Be.exports=function(B,W){var P,O,q,te,J,oe,se,Q,ae="",xe="",Oe=B.pos,re=B.posMax,ue=B.pos,z=!0;if(91!==B.src.charCodeAt(B.pos)||(J=B.pos+1,(te=B.md.helpers.parseLinkLabel(B,B.pos,!0))<0))return!1;if((oe=te+1)<re&&40===B.src.charCodeAt(oe)){for(z=!1,oe++;oe<re&&(O=B.src.charCodeAt(oe),D(O)||10===O);oe++);if(oe>=re)return!1;if(ue=oe,(se=B.md.helpers.parseLinkDestination(B.src,oe,B.posMax)).ok){for(ae=B.md.normalizeLink(se.str),B.md.validateLink(ae)?oe=se.pos:ae="",ue=oe;oe<re&&(O=B.src.charCodeAt(oe),D(O)||10===O);oe++);if(se=B.md.helpers.parseLinkTitle(B.src,oe,B.posMax),oe<re&&ue!==oe&&se.ok)for(xe=se.str,oe=se.pos;oe<re&&(O=B.src.charCodeAt(oe),D(O)||10===O);oe++);}(oe>=re||41!==B.src.charCodeAt(oe))&&(z=!0),oe++}if(z){if(typeof B.env.references>"u")return!1;if(oe<re&&91===B.src.charCodeAt(oe)?(ue=oe+1,(oe=B.md.helpers.parseLinkLabel(B,oe))>=0?q=B.src.slice(ue,oe++):oe=te+1):oe=te+1,q||(q=B.src.slice(J,te)),!(Q=B.env.references[Y(q)]))return B.pos=Oe,!1;ae=Q.href,xe=Q.title}return W||(B.pos=J,B.posMax=te,B.push("link_open","a",1).attrs=P=[["href",ae]],xe&&P.push(["title",xe]),B.linkLevel++,B.md.inline.tokenize(B),B.linkLevel--,B.push("link_close","a",-1)),B.pos=oe,B.posMax=re,!0}},6234:Be=>{"use strict";var Ce=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;Be.exports=function(Y,D){var H,B,W,P,O,q,te,J;return!(!Y.md.options.linkify||Y.linkLevel>0||(H=Y.pos,B=Y.posMax,H+3>B)||58!==Y.src.charCodeAt(H)||47!==Y.src.charCodeAt(H+1)||47!==Y.src.charCodeAt(H+2)||(W=Y.pending.match(Ce),!W)||(P=W[1],O=Y.md.linkify.matchAtStart(Y.src.slice(H-P.length)),!O)||(q=O.url,q=q.replace(/\*+$/,""),te=Y.md.normalizeLink(q),!Y.md.validateLink(te))||(D||(Y.pending=Y.pending.slice(0,-P.length),(J=Y.push("link_open","a",1)).attrs=[["href",te]],J.markup="linkify",J.info="auto",(J=Y.push("text","",0)).content=Y.md.normalizeLinkText(q),(J=Y.push("link_close","a",-1)).markup="linkify",J.info="auto"),Y.pos+=q.length-P.length,0))}},2921:(Be,Ce,V)=>{"use strict";var Y=V(3332).isSpace;Be.exports=function(H,B){var W,P,O,q=H.pos;if(10!==H.src.charCodeAt(q))return!1;if(W=H.pending.length-1,P=H.posMax,!B)if(W>=0&&32===H.pending.charCodeAt(W))if(W>=1&&32===H.pending.charCodeAt(W-1)){for(O=W-1;O>=1&&32===H.pending.charCodeAt(O-1);)O--;H.pending=H.pending.slice(0,O),H.push("hardbreak","br",0)}else H.pending=H.pending.slice(0,-1),H.push("softbreak","br",0);else H.push("softbreak","br",0);for(q++;q<P&&Y(H.src.charCodeAt(q));)q++;return H.pos=q,!0}},630:(Be,Ce,V)=>{"use strict";var Y=V(6263),D=V(3332).isWhiteSpace,H=V(3332).isPunctChar,B=V(3332).isMdAsciiPunct;function W(P,O,q,te){this.src=P,this.env=q,this.md=O,this.tokens=te,this.tokens_meta=Array(te.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}W.prototype.pushPending=function(){var P=new Y("text","",0);return P.content=this.pending,P.level=this.pendingLevel,this.tokens.push(P),this.pending="",P},W.prototype.push=function(P,O,q){this.pending&&this.pushPending();var te=new Y(P,O,q),J=null;return q<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),te.level=this.level,q>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],J={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(te),this.tokens_meta.push(J),te},W.prototype.scanDelims=function(P,O){var te,J,oe,se,Q,U,ae,xe,Oe,q=P,re=!0,ue=!0,z=this.posMax,$=this.src.charCodeAt(P);for(te=P>0?this.src.charCodeAt(P-1):32;q<z&&this.src.charCodeAt(q)===$;)q++;return oe=q-P,J=q<z?this.src.charCodeAt(q):32,ae=B(te)||H(String.fromCharCode(te)),Oe=B(J)||H(String.fromCharCode(J)),U=D(te),(xe=D(J))?re=!1:Oe&&(U||ae||(re=!1)),U?ue=!1:ae&&(xe||Oe||(ue=!1)),O?(se=re,Q=ue):(se=re&&(!ue||ae),Q=ue&&(!re||Oe)),{can_open:se,can_close:Q,length:oe}},W.prototype.Token=Y,Be.exports=W},8165:Be=>{"use strict";function Ce(V,Y){var D,H,B,W,P,O=[],q=Y.length;for(D=0;D<q;D++)126===(B=Y[D]).marker&&-1!==B.end&&(W=Y[B.end],(P=V.tokens[B.token]).type="s_open",P.tag="s",P.nesting=1,P.markup="~~",P.content="",(P=V.tokens[W.token]).type="s_close",P.tag="s",P.nesting=-1,P.markup="~~",P.content="","text"===V.tokens[W.token-1].type&&"~"===V.tokens[W.token-1].content&&O.push(W.token-1));for(;O.length;){for(H=(D=O.pop())+1;H<V.tokens.length&&"s_close"===V.tokens[H].type;)H++;D!==--H&&(P=V.tokens[H],V.tokens[H]=V.tokens[D],V.tokens[D]=P)}}Be.exports.w=function(Y,D){var H,B,P,O,te=Y.src.charCodeAt(Y.pos);if(D||126!==te||(P=(B=Y.scanDelims(Y.pos,!0)).length,O=String.fromCharCode(te),P<2))return!1;for(P%2&&(Y.push("text","",0).content=O,P--),H=0;H<P;H+=2)Y.push("text","",0).content=O+O,Y.delimiters.push({marker:te,length:0,token:Y.tokens.length-1,end:-1,open:B.can_open,close:B.can_close});return Y.pos+=B.length,!0},Be.exports.g=function(Y){var D,H=Y.tokens_meta,B=Y.tokens_meta.length;for(Ce(Y,Y.delimiters),D=0;D<B;D++)H[D]&&H[D].delimiters&&Ce(Y,H[D].delimiters)}},1767:Be=>{"use strict";function Ce(V){switch(V){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}Be.exports=function(Y,D){for(var H=Y.pos;H<Y.posMax&&!Ce(Y.src.charCodeAt(H));)H++;return H!==Y.pos&&(D||(Y.pending+=Y.src.slice(Y.pos,H)),Y.pos=H,!0)}},6263:Be=>{"use strict";function Ce(V,Y,D){this.type=V,this.tag=Y,this.attrs=null,this.map=null,this.nesting=D,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}Ce.prototype.attrIndex=function(Y){var D,H,B;if(!this.attrs)return-1;for(H=0,B=(D=this.attrs).length;H<B;H++)if(D[H][0]===Y)return H;return-1},Ce.prototype.attrPush=function(Y){this.attrs?this.attrs.push(Y):this.attrs=[Y]},Ce.prototype.attrSet=function(Y,D){var H=this.attrIndex(Y),B=[Y,D];H<0?this.attrPush(B):this.attrs[H]=B},Ce.prototype.attrGet=function(Y){var D=this.attrIndex(Y),H=null;return D>=0&&(H=this.attrs[D][1]),H},Ce.prototype.attrJoin=function(Y,D){var H=this.attrIndex(Y);H<0?this.attrPush([Y,D]):this.attrs[H][1]=this.attrs[H][1]+" "+D},Be.exports=Ce},9801:Be=>{"use strict";var Ce={};function Y(D,H){var B;return"string"!=typeof H&&(H=Y.defaultChars),B=function V(D){var H,B,W=Ce[D];if(W)return W;for(W=Ce[D]=[],H=0;H<128;H++)B=String.fromCharCode(H),W.push(B);for(H=0;H<D.length;H++)W[B=D.charCodeAt(H)]="%"+("0"+B.toString(16).toUpperCase()).slice(-2);return W}(H),D.replace(/(%[a-f0-9]{2})+/gi,function(W){var P,O,q,te,J,oe,se,Q="";for(P=0,O=W.length;P<O;P+=3)(q=parseInt(W.slice(P+1,P+3),16))<128?Q+=B[q]:192==(224&q)&&P+3<O&&128==(192&(te=parseInt(W.slice(P+4,P+6),16)))?(Q+=(se=q<<6&1984|63&te)<128?"\ufffd\ufffd":String.fromCharCode(se),P+=3):224==(240&q)&&P+6<O&&(te=parseInt(W.slice(P+4,P+6),16),J=parseInt(W.slice(P+7,P+9),16),128==(192&te)&&128==(192&J))?(Q+=(se=q<<12&61440|te<<6&4032|63&J)<2048||se>=55296&&se<=57343?"\ufffd\ufffd\ufffd":String.fromCharCode(se),P+=6):240==(248&q)&&P+9<O&&(te=parseInt(W.slice(P+4,P+6),16),J=parseInt(W.slice(P+7,P+9),16),oe=parseInt(W.slice(P+10,P+12),16),128==(192&te)&&128==(192&J)&&128==(192&oe))?((se=q<<18&1835008|te<<12&258048|J<<6&4032|63&oe)<65536||se>1114111?Q+="\ufffd\ufffd\ufffd\ufffd":(se-=65536,Q+=String.fromCharCode(55296+(se>>10),56320+(1023&se))),P+=9):Q+="\ufffd";return Q})}Y.defaultChars=";/?:@&=+$,#",Y.componentChars="",Be.exports=Y},526:Be=>{"use strict";var Ce={};function Y(D,H,B){var W,P,O,q,te,J="";for("string"!=typeof H&&(B=H,H=Y.defaultChars),typeof B>"u"&&(B=!0),te=function V(D){var H,B,W=Ce[D];if(W)return W;for(W=Ce[D]=[],H=0;H<128;H++)B=String.fromCharCode(H),/^[0-9a-z]$/i.test(B)?W.push(B):W.push("%"+("0"+H.toString(16).toUpperCase()).slice(-2));for(H=0;H<D.length;H++)W[D.charCodeAt(H)]=D[H];return W}(H),W=0,P=D.length;W<P;W++)if(O=D.charCodeAt(W),B&&37===O&&W+2<P&&/^[0-9a-f]{2}$/i.test(D.slice(W+1,W+3)))J+=D.slice(W,W+3),W+=2;else if(O<128)J+=te[O];else if(O>=55296&&O<=57343){if(O>=55296&&O<=56319&&W+1<P&&(q=D.charCodeAt(W+1))>=56320&&q<=57343){J+=encodeURIComponent(D[W]+D[W+1]),W++;continue}J+="%EF%BF%BD"}else J+=encodeURIComponent(D[W]);return J}Y.defaultChars=";/?:@&=+$,-_.!~*'()#",Y.componentChars="-_.!~*'()",Be.exports=Y},381:Be=>{"use strict";Be.exports=function(V){var Y="";return Y+=V.protocol||"",Y+=V.slashes?"//":"",Y+=V.auth?V.auth+"@":"",V.hostname&&-1!==V.hostname.indexOf(":")?Y+="["+V.hostname+"]":Y+=V.hostname||"",Y+=V.port?":"+V.port:"",Y+=V.pathname||"",(Y+=V.search||"")+(V.hash||"")}},7214:(Be,Ce,V)=>{"use strict";Be.exports.encode=V(526),Be.exports.decode=V(9801),Be.exports.format=V(381),Be.exports.parse=V(3850)},3850:Be=>{"use strict";function Ce(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}var V=/^([a-z0-9.+-]+:)/i,Y=/:[0-9]*$/,D=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,B=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),W=["'"].concat(B),P=["%","/","?",";","#"].concat(W),O=["/","?","#"],te=/^[+a-z0-9A-Z_-]{0,63}$/,J=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,oe={javascript:!0,"javascript:":!0},se={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};Ce.prototype.parse=function(U,ae){var xe,Oe,re,ue,z,$=U;if($=$.trim(),!ae&&1===U.split("#").length){var ne=D.exec($);if(ne)return this.pathname=ne[1],ne[2]&&(this.search=ne[2]),this}var ge=V.exec($);if(ge&&(re=(ge=ge[0]).toLowerCase(),this.protocol=ge,$=$.substr(ge.length)),(ae||ge||$.match(/^\/\/[^@\/]+@[^@\/]+/))&&(z="//"===$.substr(0,2))&&!(ge&&oe[ge])&&($=$.substr(2),this.slashes=!0),!oe[ge]&&(z||ge&&!se[ge])){var Re,rt,Ue=-1;for(xe=0;xe<O.length;xe++)-1!==(ue=$.indexOf(O[xe]))&&(-1===Ue||ue<Ue)&&(Ue=ue);for(-1!==(rt=-1===Ue?$.lastIndexOf("@"):$.lastIndexOf("@",Ue))&&(Re=$.slice(0,rt),$=$.slice(rt+1),this.auth=Re),Ue=-1,xe=0;xe<P.length;xe++)-1!==(ue=$.indexOf(P[xe]))&&(-1===Ue||ue<Ue)&&(Ue=ue);-1===Ue&&(Ue=$.length),":"===$[Ue-1]&&Ue--;var Pe=$.slice(0,Ue);$=$.slice(Ue),this.parseHost(Pe),this.hostname=this.hostname||"";var at="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!at){var xt=this.hostname.split(/\./);for(xe=0,Oe=xt.length;xe<Oe;xe++){var He=xt[xe];if(He&&!He.match(te)){for(var ft="",gt=0,bt=He.length;gt<bt;gt++)He.charCodeAt(gt)>127?ft+="x":ft+=He[gt];if(!ft.match(te)){var kn=xt.slice(0,xe),Ut=xt.slice(xe+1),Dn=He.match(J);Dn&&(kn.push(Dn[1]),Ut.unshift(Dn[2])),Ut.length&&($=Ut.join(".")+$),this.hostname=kn.join(".");break}}}}this.hostname.length>255&&(this.hostname=""),at&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}var Jt=$.indexOf("#");-1!==Jt&&(this.hash=$.substr(Jt),$=$.slice(0,Jt));var nn=$.indexOf("?");return-1!==nn&&(this.search=$.substr(nn),$=$.slice(0,nn)),$&&(this.pathname=$),se[re]&&this.hostname&&!this.pathname&&(this.pathname=""),this},Ce.prototype.parseHost=function(U){var ae=Y.exec(U);ae&&(":"!==(ae=ae[0])&&(this.port=ae.substr(1)),U=U.substr(0,U.length-ae.length)),U&&(this.hostname=U)},Be.exports=function Q(U,ae){if(U&&U instanceof Ce)return U;var xe=new Ce;return xe.parse(U,ae),xe}},4879:(Be,Ce,V)=>{"use strict";V.r(Ce),V.d(Ce,{decode:()=>Re,default:()=>He,encode:()=>rt,toASCII:()=>at,toUnicode:()=>Pe,ucs2decode:()=>z,ucs2encode:()=>$});const Y=2147483647,D=36,J=/^xn--/,oe=/[^\0-\x7E]/,se=/[\x2E\u3002\uFF0E\uFF61]/g,Q={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},ae=Math.floor,xe=String.fromCharCode;function Oe(ft){throw new RangeError(Q[ft])}function ue(ft,gt){const bt=ft.split("@");let kn="";bt.length>1&&(kn=bt[0]+"@",ft=bt[1]);const Dn=function re(ft,gt){const bt=[];let kn=ft.length;for(;kn--;)bt[kn]=gt(ft[kn]);return bt}((ft=ft.replace(se,".")).split("."),gt).join(".");return kn+Dn}function z(ft){const gt=[];let bt=0;const kn=ft.length;for(;bt<kn;){const Ut=ft.charCodeAt(bt++);if(Ut>=55296&&Ut<=56319&&bt<kn){const Dn=ft.charCodeAt(bt++);56320==(64512&Dn)?gt.push(((1023&Ut)<<10)+(1023&Dn)+65536):(gt.push(Ut),bt--)}else gt.push(Ut)}return gt}const $=ft=>String.fromCodePoint(...ft),ne=function(ft){return ft-48<10?ft-22:ft-65<26?ft-65:ft-97<26?ft-97:D},ge=function(ft,gt){return ft+22+75*(ft<26)-((0!=gt)<<5)},Ue=function(ft,gt,bt){let kn=0;for(ft=bt?ae(ft/700):ft>>1,ft+=ae(ft/gt);ft>455;kn+=D)ft=ae(ft/35);return ae(kn+36*ft/(ft+38))},Re=function(ft){const gt=[],bt=ft.length;let kn=0,Ut=128,Dn=72,Jt=ft.lastIndexOf("-");Jt<0&&(Jt=0);for(let nn=0;nn<Jt;++nn)ft.charCodeAt(nn)>=128&&Oe("not-basic"),gt.push(ft.charCodeAt(nn));for(let nn=Jt>0?Jt+1:0;nn<bt;){let Ln=kn;for(let Cn=1,yn=D;;yn+=D){nn>=bt&&Oe("invalid-input");const je=ne(ft.charCodeAt(nn++));(je>=D||je>ae((Y-kn)/Cn))&&Oe("overflow"),kn+=je*Cn;const be=yn<=Dn?1:yn>=Dn+26?26:yn-Dn;if(je<be)break;const Dt=D-be;Cn>ae(Y/Dt)&&Oe("overflow"),Cn*=Dt}const xn=gt.length+1;Dn=Ue(kn-Ln,xn,0==Ln),ae(kn/xn)>Y-Ut&&Oe("overflow"),Ut+=ae(kn/xn),kn%=xn,gt.splice(kn++,0,Ut)}return String.fromCodePoint(...gt)},rt=function(ft){const gt=[];let bt=(ft=z(ft)).length,kn=128,Ut=0,Dn=72;for(const Ln of ft)Ln<128&&gt.push(xe(Ln));let Jt=gt.length,nn=Jt;for(Jt&&gt.push("-");nn<bt;){let Ln=Y;for(const Cn of ft)Cn>=kn&&Cn<Ln&&(Ln=Cn);const xn=nn+1;Ln-kn>ae((Y-Ut)/xn)&&Oe("overflow"),Ut+=(Ln-kn)*xn,kn=Ln;for(const Cn of ft)if(Cn<kn&&++Ut>Y&&Oe("overflow"),Cn==kn){let yn=Ut;for(let je=D;;je+=D){const be=je<=Dn?1:je>=Dn+26?26:je-Dn;if(yn<be)break;const Dt=yn-be,Rt=D-be;gt.push(xe(ge(be+Dt%Rt,0))),yn=ae(Dt/Rt)}gt.push(xe(ge(yn,0))),Dn=Ue(Ut,xn,nn==Jt),Ut=0,++nn}++Ut,++kn}return gt.join("")},Pe=function(ft){return ue(ft,function(gt){return J.test(gt)?Re(gt.slice(4).toLowerCase()):gt})},at=function(ft){return ue(ft,function(gt){return oe.test(gt)?"xn--"+rt(gt):gt})},He={version:"2.1.0",ucs2:{decode:z,encode:$},decode:Re,encode:rt,toASCII:at,toUnicode:Pe}},891:Be=>{"use strict";var V={};function Y(P,O,q){q||(q=Error);var J=function(oe){function se(Q,U,ae){return oe.call(this,function te(oe,se,Q){return"string"==typeof O?O:O(oe,se,Q)}(Q,U,ae))||this}return function Ce(P,O){P.prototype=Object.create(O.prototype),P.prototype.constructor=P,P.__proto__=O}(se,oe),se}(q);J.prototype.name=q.name,J.prototype.code=P,V[P]=J}function D(P,O){if(Array.isArray(P)){var q=P.length;return P=P.map(function(te){return String(te)}),q>2?"one of ".concat(O," ").concat(P.slice(0,q-1).join(", "),", or ")+P[q-1]:2===q?"one of ".concat(O," ").concat(P[0]," or ").concat(P[1]):"of ".concat(O," ").concat(P[0])}return"of ".concat(O," ").concat(String(P))}Y("ERR_INVALID_OPT_VALUE",function(P,O){return'The value "'+O+'" is invalid for option "'+P+'"'},TypeError),Y("ERR_INVALID_ARG_TYPE",function(P,O,q){var te,J;if("string"==typeof O&&function H(P,O,q){return P.substr(!q||q<0?0:+q,O.length)===O}(O,"not ")?(te="must not be",O=O.replace(/^not /,"")):te="must be",function B(P,O,q){return(void 0===q||q>P.length)&&(q=P.length),P.substring(q-O.length,q)===O}(P," argument"))J="The ".concat(P," ").concat(te," ").concat(D(O,"type"));else{var oe=function W(P,O,q){return"number"!=typeof q&&(q=0),!(q+O.length>P.length)&&-1!==P.indexOf(O,q)}(P,".")?"property":"argument";J='The "'.concat(P,'" ').concat(oe," ").concat(te," ").concat(D(O,"type"))}return J+". Received type ".concat(typeof q)},TypeError),Y("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),Y("ERR_METHOD_NOT_IMPLEMENTED",function(P){return"The "+P+" method is not implemented"}),Y("ERR_STREAM_PREMATURE_CLOSE","Premature close"),Y("ERR_STREAM_DESTROYED",function(P){return"Cannot call "+P+" after a stream was destroyed"}),Y("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),Y("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),Y("ERR_STREAM_WRITE_AFTER_END","write after end"),Y("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),Y("ERR_UNKNOWN_ENCODING",function(P){return"Unknown encoding: "+P},TypeError),Y("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),Be.exports.q=V},1339:(Be,Ce,V)=>{"use strict";var Y=Object.keys||function(J){var oe=[];for(var se in J)oe.push(se);return oe};Be.exports=O;var D=V(3154),H=V(520);V(3894)(O,D);for(var B=Y(H.prototype),W=0;W<B.length;W++){var P=B[W];O.prototype[P]||(O.prototype[P]=H.prototype[P])}function O(J){if(!(this instanceof O))return new O(J);D.call(this,J),H.call(this,J),this.allowHalfOpen=!0,J&&(!1===J.readable&&(this.readable=!1),!1===J.writable&&(this.writable=!1),!1===J.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",q)))}function q(){this._writableState.ended||process.nextTick(te,this)}function te(J){J.end()}Object.defineProperty(O.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(O.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(O.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(O.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(oe){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=oe,this._writableState.destroyed=oe)}})},6071:(Be,Ce,V)=>{"use strict";Be.exports=D;var Y=V(6025);function D(H){if(!(this instanceof D))return new D(H);Y.call(this,H)}V(3894)(D,Y),D.prototype._transform=function(H,B,W){W(null,H)}},3154:(Be,Ce,V)=>{"use strict";var Y;Be.exports=Pe,Pe.ReadableState=rt,V(9069);var J,H=function(Pt,un){return Pt.listeners(un).length},B=V(4970),W=V(3172).Buffer,P=global.Uint8Array||function(){},te=V(4616);J=te&&te.debuglog?te.debuglog("stream"):function(){};var z,$,ne,oe=V(5019),se=V(1920),U=V(7102).getHighWaterMark,ae=V(891).q,xe=ae.ERR_INVALID_ARG_TYPE,Oe=ae.ERR_STREAM_PUSH_AFTER_EOF,re=ae.ERR_METHOD_NOT_IMPLEMENTED,ue=ae.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;V(3894)(Pe,B);var ge=se.errorOrDestroy,Ue=["error","close","destroy","pause","resume"];function rt(It,Pt,un){Y=Y||V(1339),"boolean"!=typeof un&&(un=Pt instanceof Y),this.objectMode=!!(It=It||{}).objectMode,un&&(this.objectMode=this.objectMode||!!It.readableObjectMode),this.highWaterMark=U(this,It,"readableHighWaterMark",un),this.buffer=new oe,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==It.emitClose,this.autoDestroy=!!It.autoDestroy,this.destroyed=!1,this.defaultEncoding=It.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,It.encoding&&(z||(z=V(3054).s),this.decoder=new z(It.encoding),this.encoding=It.encoding)}function Pe(It){if(Y=Y||V(1339),!(this instanceof Pe))return new Pe(It);this._readableState=new rt(It,this,this instanceof Y),this.readable=!0,It&&("function"==typeof It.read&&(this._read=It.read),"function"==typeof It.destroy&&(this._destroy=It.destroy)),B.call(this)}function at(It,Pt,un,Je,Te){J("readableAddChunk",Pt);var Ot,De=It._readableState;if(null===Pt)De.reading=!1,function kn(It,Pt){if(J("onEofChunk"),!Pt.ended){if(Pt.decoder){var un=Pt.decoder.end();un&&un.length&&(Pt.buffer.push(un),Pt.length+=Pt.objectMode?1:un.length)}Pt.ended=!0,Pt.sync?Ut(It):(Pt.needReadable=!1,Pt.emittedReadable||(Pt.emittedReadable=!0,Dn(It)))}}(It,De);else if(Te||(Ot=function He(It,Pt){var un;return!function q(It){return W.isBuffer(It)||It instanceof P}(Pt)&&"string"!=typeof Pt&&void 0!==Pt&&!It.objectMode&&(un=new xe("chunk",["string","Buffer","Uint8Array"],Pt)),un}(De,Pt)),Ot)ge(It,Ot);else if(De.objectMode||Pt&&Pt.length>0)if("string"!=typeof Pt&&!De.objectMode&&Object.getPrototypeOf(Pt)!==W.prototype&&(Pt=function O(It){return W.from(It)}(Pt)),Je)De.endEmitted?ge(It,new ue):xt(It,De,Pt,!0);else if(De.ended)ge(It,new Oe);else{if(De.destroyed)return!1;De.reading=!1,De.decoder&&!un?(Pt=De.decoder.write(Pt),De.objectMode||0!==Pt.length?xt(It,De,Pt,!1):Jt(It,De)):xt(It,De,Pt,!1)}else Je||(De.reading=!1,Jt(It,De));return!De.ended&&(De.length<De.highWaterMark||0===De.length)}function xt(It,Pt,un,Je){Pt.flowing&&0===Pt.length&&!Pt.sync?(Pt.awaitDrain=0,It.emit("data",un)):(Pt.length+=Pt.objectMode?1:un.length,Je?Pt.buffer.unshift(un):Pt.buffer.push(un),Pt.needReadable&&Ut(It)),Jt(It,Pt)}Object.defineProperty(Pe.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(Pt){!this._readableState||(this._readableState.destroyed=Pt)}}),Pe.prototype.destroy=se.destroy,Pe.prototype._undestroy=se.undestroy,Pe.prototype._destroy=function(It,Pt){Pt(It)},Pe.prototype.push=function(It,Pt){var Je,un=this._readableState;return un.objectMode?Je=!0:"string"==typeof It&&((Pt=Pt||un.defaultEncoding)!==un.encoding&&(It=W.from(It,Pt),Pt=""),Je=!0),at(this,It,Pt,!1,Je)},Pe.prototype.unshift=function(It){return at(this,It,null,!0,!1)},Pe.prototype.isPaused=function(){return!1===this._readableState.flowing},Pe.prototype.setEncoding=function(It){z||(z=V(3054).s);var Pt=new z(It);this._readableState.decoder=Pt,this._readableState.encoding=this._readableState.decoder.encoding;for(var un=this._readableState.buffer.head,Je="";null!==un;)Je+=Pt.write(un.data),un=un.next;return this._readableState.buffer.clear(),""!==Je&&this._readableState.buffer.push(Je),this._readableState.length=Je.length,this};var ft=1073741824;function bt(It,Pt){return It<=0||0===Pt.length&&Pt.ended?0:Pt.objectMode?1:It!=It?Pt.flowing&&Pt.length?Pt.buffer.head.data.length:Pt.length:(It>Pt.highWaterMark&&(Pt.highWaterMark=function gt(It){return It>=ft?It=ft:(It--,It|=It>>>1,It|=It>>>2,It|=It>>>4,It|=It>>>8,It|=It>>>16,It++),It}(It)),It<=Pt.length?It:Pt.ended?Pt.length:(Pt.needReadable=!0,0))}function Ut(It){var Pt=It._readableState;J("emitReadable",Pt.needReadable,Pt.emittedReadable),Pt.needReadable=!1,Pt.emittedReadable||(J("emitReadable",Pt.flowing),Pt.emittedReadable=!0,process.nextTick(Dn,It))}function Dn(It){var Pt=It._readableState;J("emitReadable_",Pt.destroyed,Pt.length,Pt.ended),!Pt.destroyed&&(Pt.length||Pt.ended)&&(It.emit("readable"),Pt.emittedReadable=!1),Pt.needReadable=!Pt.flowing&&!Pt.ended&&Pt.length<=Pt.highWaterMark,be(It)}function Jt(It,Pt){Pt.readingMore||(Pt.readingMore=!0,process.nextTick(nn,It,Pt))}function nn(It,Pt){for(;!Pt.reading&&!Pt.ended&&(Pt.length<Pt.highWaterMark||Pt.flowing&&0===Pt.length);){var un=Pt.length;if(J("maybeReadMore read 0"),It.read(0),un===Pt.length)break}Pt.readingMore=!1}function xn(It){var Pt=It._readableState;Pt.readableListening=It.listenerCount("readable")>0,Pt.resumeScheduled&&!Pt.paused?Pt.flowing=!0:It.listenerCount("data")>0&&It.resume()}function Cn(It){J("readable nexttick read 0"),It.read(0)}function je(It,Pt){J("resume",Pt.reading),Pt.reading||It.read(0),Pt.resumeScheduled=!1,It.emit("resume"),be(It),Pt.flowing&&!Pt.reading&&It.read(0)}function be(It){var Pt=It._readableState;for(J("flow",Pt.flowing);Pt.flowing&&null!==It.read(););}function Dt(It,Pt){return 0===Pt.length?null:(Pt.objectMode?un=Pt.buffer.shift():!It||It>=Pt.length?(un=Pt.decoder?Pt.buffer.join(""):1===Pt.buffer.length?Pt.buffer.first():Pt.buffer.concat(Pt.length),Pt.buffer.clear()):un=Pt.buffer.consume(It,Pt.decoder),un);var un}function Rt(It){var Pt=It._readableState;J("endReadable",Pt.endEmitted),Pt.endEmitted||(Pt.ended=!0,process.nextTick(ci,Pt,It))}function ci(It,Pt){if(J("endReadableNT",It.endEmitted,It.length),!It.endEmitted&&0===It.length&&(It.endEmitted=!0,Pt.readable=!1,Pt.emit("end"),It.autoDestroy)){var un=Pt._writableState;(!un||un.autoDestroy&&un.finished)&&Pt.destroy()}}function $i(It,Pt){for(var un=0,Je=It.length;un<Je;un++)if(It[un]===Pt)return un;return-1}Pe.prototype.read=function(It){J("read",It),It=parseInt(It,10);var Pt=this._readableState,un=It;if(0!==It&&(Pt.emittedReadable=!1),0===It&&Pt.needReadable&&((0!==Pt.highWaterMark?Pt.length>=Pt.highWaterMark:Pt.length>0)||Pt.ended))return J("read: emitReadable",Pt.length,Pt.ended),0===Pt.length&&Pt.ended?Rt(this):Ut(this),null;if(0===(It=bt(It,Pt))&&Pt.ended)return 0===Pt.length&&Rt(this),null;var Te,Je=Pt.needReadable;return J("need readable",Je),(0===Pt.length||Pt.length-It<Pt.highWaterMark)&&J("length less than watermark",Je=!0),Pt.ended||Pt.reading?J("reading or ended",Je=!1):Je&&(J("do read"),Pt.reading=!0,Pt.sync=!0,0===Pt.length&&(Pt.needReadable=!0),this._read(Pt.highWaterMark),Pt.sync=!1,Pt.reading||(It=bt(un,Pt))),null===(Te=It>0?Dt(It,Pt):null)?(Pt.needReadable=Pt.length<=Pt.highWaterMark,It=0):(Pt.length-=It,Pt.awaitDrain=0),0===Pt.length&&(Pt.ended||(Pt.needReadable=!0),un!==It&&Pt.ended&&Rt(this)),null!==Te&&this.emit("data",Te),Te},Pe.prototype._read=function(It){ge(this,new re("_read()"))},Pe.prototype.pipe=function(It,Pt){var un=this,Je=this._readableState;switch(Je.pipesCount){case 0:Je.pipes=It;break;case 1:Je.pipes=[Je.pipes,It];break;default:Je.pipes.push(It)}Je.pipesCount+=1,J("pipe count=%d opts=%j",Je.pipesCount,Pt);var De=Pt&&!1===Pt.end||It===process.stdout||It===process.stderr?el:vn;function vn(){J("onend"),It.end()}Je.endEmitted?process.nextTick(De):un.once("end",De),It.on("unpipe",function Ot(jl,$l){J("onunpipe"),jl===un&&$l&&!1===$l.hasUnpiped&&($l.hasUnpiped=!0,function Hs(){J("cleanup"),It.removeListener("close",ua),It.removeListener("finish",tr),It.removeListener("drain",ri),It.removeListener("error",Cs),It.removeListener("unpipe",Ot),un.removeListener("end",vn),un.removeListener("end",el),un.removeListener("data",so),Fi=!0,Je.awaitDrain&&(!It._writableState||It._writableState.needDrain)&&ri()}())});var ri=function Ln(It){return function(){var un=It._readableState;J("pipeOnDrain",un.awaitDrain),un.awaitDrain&&un.awaitDrain--,0===un.awaitDrain&&H(It,"data")&&(un.flowing=!0,be(It))}}(un);It.on("drain",ri);var Fi=!1;function so(jl){J("ondata");var $l=It.write(jl);J("dest.write",$l),!1===$l&&((1===Je.pipesCount&&Je.pipes===It||Je.pipesCount>1&&-1!==$i(Je.pipes,It))&&!Fi&&(J("false write response, pause",Je.awaitDrain),Je.awaitDrain++),un.pause())}function Cs(jl){J("onerror",jl),el(),It.removeListener("error",Cs),0===H(It,"error")&&ge(It,jl)}function ua(){It.removeListener("finish",tr),el()}function tr(){J("onfinish"),It.removeListener("close",ua),el()}function el(){J("unpipe"),un.unpipe(It)}return un.on("data",so),function Re(It,Pt,un){if("function"==typeof It.prependListener)return It.prependListener(Pt,un);It._events&&It._events[Pt]?Array.isArray(It._events[Pt])?It._events[Pt].unshift(un):It._events[Pt]=[un,It._events[Pt]]:It.on(Pt,un)}(It,"error",Cs),It.once("close",ua),It.once("finish",tr),It.emit("pipe",un),Je.flowing||(J("pipe resume"),un.resume()),It},Pe.prototype.unpipe=function(It){var Pt=this._readableState,un={hasUnpiped:!1};if(0===Pt.pipesCount)return this;if(1===Pt.pipesCount)return It&&It!==Pt.pipes||(It||(It=Pt.pipes),Pt.pipes=null,Pt.pipesCount=0,Pt.flowing=!1,It&&It.emit("unpipe",this,un)),this;if(!It){var Je=Pt.pipes,Te=Pt.pipesCount;Pt.pipes=null,Pt.pipesCount=0,Pt.flowing=!1;for(var De=0;De<Te;De++)Je[De].emit("unpipe",this,{hasUnpiped:!1});return this}var Ot=$i(Pt.pipes,It);return-1===Ot||(Pt.pipes.splice(Ot,1),Pt.pipesCount-=1,1===Pt.pipesCount&&(Pt.pipes=Pt.pipes[0]),It.emit("unpipe",this,un)),this},Pe.prototype.addListener=Pe.prototype.on=function(It,Pt){var un=B.prototype.on.call(this,It,Pt),Je=this._readableState;return"data"===It?(Je.readableListening=this.listenerCount("readable")>0,!1!==Je.flowing&&this.resume()):"readable"===It&&!Je.endEmitted&&!Je.readableListening&&(Je.readableListening=Je.needReadable=!0,Je.flowing=!1,Je.emittedReadable=!1,J("on readable",Je.length,Je.reading),Je.length?Ut(this):Je.reading||process.nextTick(Cn,this)),un},Pe.prototype.removeListener=function(It,Pt){var un=B.prototype.removeListener.call(this,It,Pt);return"readable"===It&&process.nextTick(xn,this),un},Pe.prototype.removeAllListeners=function(It){var Pt=B.prototype.removeAllListeners.apply(this,arguments);return("readable"===It||void 0===It)&&process.nextTick(xn,this),Pt},Pe.prototype.resume=function(){var It=this._readableState;return It.flowing||(J("resume"),It.flowing=!It.readableListening,function yn(It,Pt){Pt.resumeScheduled||(Pt.resumeScheduled=!0,process.nextTick(je,It,Pt))}(this,It)),It.paused=!1,this},Pe.prototype.pause=function(){return J("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(J("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},Pe.prototype.wrap=function(It){var Pt=this,un=this._readableState,Je=!1;for(var Te in It.on("end",function(){if(J("wrapped end"),un.decoder&&!un.ended){var Ot=un.decoder.end();Ot&&Ot.length&&Pt.push(Ot)}Pt.push(null)}),It.on("data",function(Ot){J("wrapped data"),un.decoder&&(Ot=un.decoder.write(Ot)),un.objectMode&&null==Ot||!(un.objectMode||Ot&&Ot.length)||Pt.push(Ot)||(Je=!0,It.pause())}),It)void 0===this[Te]&&"function"==typeof It[Te]&&(this[Te]=function(vn){return function(){return It[vn].apply(It,arguments)}}(Te));for(var De=0;De<Ue.length;De++)It.on(Ue[De],this.emit.bind(this,Ue[De]));return this._read=function(Ot){J("wrapped _read",Ot),Je&&(Je=!1,It.resume())},this},"function"==typeof Symbol&&(Pe.prototype[Symbol.asyncIterator]=function(){return void 0===$&&($=V(3872)),$(this)}),Object.defineProperty(Pe.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(Pe.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(Pe.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(Pt){this._readableState&&(this._readableState.flowing=Pt)}}),Pe._fromList=Dt,Object.defineProperty(Pe.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(Pe.from=function(It,Pt){return void 0===ne&&(ne=V(7412)),ne(Pe,It,Pt)})},6025:(Be,Ce,V)=>{"use strict";Be.exports=q;var Y=V(891).q,D=Y.ERR_METHOD_NOT_IMPLEMENTED,H=Y.ERR_MULTIPLE_CALLBACK,B=Y.ERR_TRANSFORM_ALREADY_TRANSFORMING,W=Y.ERR_TRANSFORM_WITH_LENGTH_0,P=V(1339);function O(oe,se){var Q=this._transformState;Q.transforming=!1;var U=Q.writecb;if(null===U)return this.emit("error",new H);Q.writechunk=null,Q.writecb=null,null!=se&&this.push(se),U(oe);var ae=this._readableState;ae.reading=!1,(ae.needReadable||ae.length<ae.highWaterMark)&&this._read(ae.highWaterMark)}function q(oe){if(!(this instanceof q))return new q(oe);P.call(this,oe),this._transformState={afterTransform:O.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,oe&&("function"==typeof oe.transform&&(this._transform=oe.transform),"function"==typeof oe.flush&&(this._flush=oe.flush)),this.on("prefinish",te)}function te(){var oe=this;"function"!=typeof this._flush||this._readableState.destroyed?J(this,null,null):this._flush(function(se,Q){J(oe,se,Q)})}function J(oe,se,Q){if(se)return oe.emit("error",se);if(null!=Q&&oe.push(Q),oe._writableState.length)throw new W;if(oe._transformState.transforming)throw new B;return oe.push(null)}V(3894)(q,P),q.prototype.push=function(oe,se){return this._transformState.needTransform=!1,P.prototype.push.call(this,oe,se)},q.prototype._transform=function(oe,se,Q){Q(new D("_transform()"))},q.prototype._write=function(oe,se,Q){var U=this._transformState;if(U.writecb=Q,U.writechunk=oe,U.writeencoding=se,!U.transforming){var ae=this._readableState;(U.needTransform||ae.needReadable||ae.length<ae.highWaterMark)&&this._read(ae.highWaterMark)}},q.prototype._read=function(oe){var se=this._transformState;null===se.writechunk||se.transforming?se.needTransform=!0:(se.transforming=!0,this._transform(se.writechunk,se.writeencoding,se.afterTransform))},q.prototype._destroy=function(oe,se){P.prototype._destroy.call(this,oe,function(Q){se(Q)})}},520:(Be,Ce,V)=>{"use strict";function D(be){var Dt=this;this.next=null,this.entry=null,this.finish=function(){!function je(be,Dt,Rt){var ci=be.entry;for(be.entry=null;ci;){var $i=ci.callback;Dt.pendingcb--,$i(Rt),ci=ci.next}Dt.corkedRequestsFree.next=be}(Dt,be)}}var H;Be.exports=rt,rt.WritableState=Ue;var Re,B={deprecate:V(3532)},W=V(4970),P=V(3172).Buffer,O=global.Uint8Array||function(){},J=V(1920),se=V(7102).getHighWaterMark,Q=V(891).q,U=Q.ERR_INVALID_ARG_TYPE,ae=Q.ERR_METHOD_NOT_IMPLEMENTED,xe=Q.ERR_MULTIPLE_CALLBACK,Oe=Q.ERR_STREAM_CANNOT_PIPE,re=Q.ERR_STREAM_DESTROYED,ue=Q.ERR_STREAM_NULL_VALUES,z=Q.ERR_STREAM_WRITE_AFTER_END,$=Q.ERR_UNKNOWN_ENCODING,ne=J.errorOrDestroy;function ge(){}function Ue(be,Dt,Rt){H=H||V(1339),"boolean"!=typeof Rt&&(Rt=Dt instanceof H),this.objectMode=!!(be=be||{}).objectMode,Rt&&(this.objectMode=this.objectMode||!!be.writableObjectMode),this.highWaterMark=se(this,be,"writableHighWaterMark",Rt),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===be.decodeStrings),this.defaultEncoding=be.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function($i){!function kn(be,Dt){var Rt=be._writableState,ci=Rt.sync,$i=Rt.writecb;if("function"!=typeof $i)throw new xe;if(function bt(be){be.writing=!1,be.writecb=null,be.length-=be.writelen,be.writelen=0}(Rt),Dt)!function gt(be,Dt,Rt,ci,$i){--Dt.pendingcb,Rt?(process.nextTick($i,ci),process.nextTick(Cn,be,Dt),be._writableState.errorEmitted=!0,ne(be,ci)):($i(ci),be._writableState.errorEmitted=!0,ne(be,ci),Cn(be,Dt))}(be,Rt,ci,Dt,$i);else{var It=nn(Rt)||be.destroyed;!It&&!Rt.corked&&!Rt.bufferProcessing&&Rt.bufferedRequest&&Jt(be,Rt),ci?process.nextTick(Ut,be,Rt,It,$i):Ut(be,Rt,It,$i)}}(Dt,$i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==be.emitClose,this.autoDestroy=!!be.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new D(this)}function rt(be){var Dt=this instanceof(H=H||V(1339));if(!Dt&&!Re.call(rt,this))return new rt(be);this._writableState=new Ue(be,this,Dt),this.writable=!0,be&&("function"==typeof be.write&&(this._write=be.write),"function"==typeof be.writev&&(this._writev=be.writev),"function"==typeof be.destroy&&(this._destroy=be.destroy),"function"==typeof be.final&&(this._final=be.final)),W.call(this)}function ft(be,Dt,Rt,ci,$i,It,Pt){Dt.writelen=ci,Dt.writecb=Pt,Dt.writing=!0,Dt.sync=!0,Dt.destroyed?Dt.onwrite(new re("write")):Rt?be._writev($i,Dt.onwrite):be._write($i,It,Dt.onwrite),Dt.sync=!1}function Ut(be,Dt,Rt,ci){Rt||function Dn(be,Dt){0===Dt.length&&Dt.needDrain&&(Dt.needDrain=!1,be.emit("drain"))}(be,Dt),Dt.pendingcb--,ci(),Cn(be,Dt)}function Jt(be,Dt){Dt.bufferProcessing=!0;var Rt=Dt.bufferedRequest;if(be._writev&&Rt&&Rt.next){var $i=new Array(Dt.bufferedRequestCount),It=Dt.corkedRequestsFree;It.entry=Rt;for(var Pt=0,un=!0;Rt;)$i[Pt]=Rt,Rt.isBuf||(un=!1),Rt=Rt.next,Pt+=1;$i.allBuffers=un,ft(be,Dt,!0,Dt.length,$i,"",It.finish),Dt.pendingcb++,Dt.lastBufferedRequest=null,It.next?(Dt.corkedRequestsFree=It.next,It.next=null):Dt.corkedRequestsFree=new D(Dt),Dt.bufferedRequestCount=0}else{for(;Rt;){var Je=Rt.chunk;if(ft(be,Dt,!1,Dt.objectMode?1:Je.length,Je,Rt.encoding,Rt.callback),Rt=Rt.next,Dt.bufferedRequestCount--,Dt.writing)break}null===Rt&&(Dt.lastBufferedRequest=null)}Dt.bufferedRequest=Rt,Dt.bufferProcessing=!1}function nn(be){return be.ending&&0===be.length&&null===be.bufferedRequest&&!be.finished&&!be.writing}function Ln(be,Dt){be._final(function(Rt){Dt.pendingcb--,Rt&&ne(be,Rt),Dt.prefinished=!0,be.emit("prefinish"),Cn(be,Dt)})}function Cn(be,Dt){var Rt=nn(Dt);if(Rt&&(function xn(be,Dt){!Dt.prefinished&&!Dt.finalCalled&&("function"!=typeof be._final||Dt.destroyed?(Dt.prefinished=!0,be.emit("prefinish")):(Dt.pendingcb++,Dt.finalCalled=!0,process.nextTick(Ln,be,Dt)))}(be,Dt),0===Dt.pendingcb&&(Dt.finished=!0,be.emit("finish"),Dt.autoDestroy))){var ci=be._readableState;(!ci||ci.autoDestroy&&ci.endEmitted)&&be.destroy()}return Rt}V(3894)(rt,W),Ue.prototype.getBuffer=function(){for(var Dt=this.bufferedRequest,Rt=[];Dt;)Rt.push(Dt),Dt=Dt.next;return Rt},function(){try{Object.defineProperty(Ue.prototype,"buffer",{get:B.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(Re=Function.prototype[Symbol.hasInstance],Object.defineProperty(rt,Symbol.hasInstance,{value:function(Dt){return!!Re.call(this,Dt)||this===rt&&Dt&&Dt._writableState instanceof Ue}})):Re=function(Dt){return Dt instanceof this},rt.prototype.pipe=function(){ne(this,new Oe)},rt.prototype.write=function(be,Dt,Rt){var ci=this._writableState,$i=!1,It=!ci.objectMode&&function te(be){return P.isBuffer(be)||be instanceof O}(be);return It&&!P.isBuffer(be)&&(be=function q(be){return P.from(be)}(be)),"function"==typeof Dt&&(Rt=Dt,Dt=null),It?Dt="buffer":Dt||(Dt=ci.defaultEncoding),"function"!=typeof Rt&&(Rt=ge),ci.ending?function Pe(be,Dt){var Rt=new z;ne(be,Rt),process.nextTick(Dt,Rt)}(this,Rt):(It||function at(be,Dt,Rt,ci){var $i;return null===Rt?$i=new ue:"string"!=typeof Rt&&!Dt.objectMode&&($i=new U("chunk",["string","Buffer"],Rt)),!$i||(ne(be,$i),process.nextTick(ci,$i),!1)}(this,ci,be,Rt))&&(ci.pendingcb++,$i=function He(be,Dt,Rt,ci,$i,It){if(!Rt){var Pt=function xt(be,Dt,Rt){return!be.objectMode&&!1!==be.decodeStrings&&"string"==typeof Dt&&(Dt=P.from(Dt,Rt)),Dt}(Dt,ci,$i);ci!==Pt&&(Rt=!0,$i="buffer",ci=Pt)}var un=Dt.objectMode?1:ci.length;Dt.length+=un;var Je=Dt.length<Dt.highWaterMark;if(Je||(Dt.needDrain=!0),Dt.writing||Dt.corked){var Te=Dt.lastBufferedRequest;Dt.lastBufferedRequest={chunk:ci,encoding:$i,isBuf:Rt,callback:It,next:null},Te?Te.next=Dt.lastBufferedRequest:Dt.bufferedRequest=Dt.lastBufferedRequest,Dt.bufferedRequestCount+=1}else ft(be,Dt,!1,un,ci,$i,It);return Je}(this,ci,It,be,Dt,Rt)),$i},rt.prototype.cork=function(){this._writableState.corked++},rt.prototype.uncork=function(){var be=this._writableState;be.corked&&(be.corked--,!be.writing&&!be.corked&&!be.bufferProcessing&&be.bufferedRequest&&Jt(this,be))},rt.prototype.setDefaultEncoding=function(Dt){if("string"==typeof Dt&&(Dt=Dt.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((Dt+"").toLowerCase())>-1))throw new $(Dt);return this._writableState.defaultEncoding=Dt,this},Object.defineProperty(rt.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(rt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),rt.prototype._write=function(be,Dt,Rt){Rt(new ae("_write()"))},rt.prototype._writev=null,rt.prototype.end=function(be,Dt,Rt){var ci=this._writableState;return"function"==typeof be?(Rt=be,be=null,Dt=null):"function"==typeof Dt&&(Rt=Dt,Dt=null),null!=be&&this.write(be,Dt),ci.corked&&(ci.corked=1,this.uncork()),ci.ending||function yn(be,Dt,Rt){Dt.ending=!0,Cn(be,Dt),Rt&&(Dt.finished?process.nextTick(Rt):be.once("finish",Rt)),Dt.ended=!0,be.writable=!1}(this,ci,Rt),this},Object.defineProperty(rt.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(rt.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(Dt){!this._writableState||(this._writableState.destroyed=Dt)}}),rt.prototype.destroy=J.destroy,rt.prototype._undestroy=J.undestroy,rt.prototype._destroy=function(be,Dt){Dt(be)}},3872:(Be,Ce,V)=>{"use strict";var Y;function D(re,ue,z){return ue in re?Object.defineProperty(re,ue,{value:z,enumerable:!0,configurable:!0,writable:!0}):re[ue]=z,re}var H=V(7542),B=Symbol("lastResolve"),W=Symbol("lastReject"),P=Symbol("error"),O=Symbol("ended"),q=Symbol("lastPromise"),te=Symbol("handlePromise"),J=Symbol("stream");function oe(re,ue){return{value:re,done:ue}}function se(re){var ue=re[B];if(null!==ue){var z=re[J].read();null!==z&&(re[q]=null,re[B]=null,re[W]=null,ue(oe(z,!1)))}}function Q(re){process.nextTick(se,re)}var ae=Object.getPrototypeOf(function(){}),xe=Object.setPrototypeOf((D(Y={get stream(){return this[J]},next:function(){var ue=this,z=this[P];if(null!==z)return Promise.reject(z);if(this[O])return Promise.resolve(oe(void 0,!0));if(this[J].destroyed)return new Promise(function(Ue,Re){process.nextTick(function(){ue[P]?Re(ue[P]):Ue(oe(void 0,!0))})});var ne,$=this[q];if($)ne=new Promise(function U(re,ue){return function(z,$){re.then(function(){ue[O]?z(oe(void 0,!0)):ue[te](z,$)},$)}}($,this));else{var ge=this[J].read();if(null!==ge)return Promise.resolve(oe(ge,!1));ne=new Promise(this[te])}return this[q]=ne,ne}},Symbol.asyncIterator,function(){return this}),D(Y,"return",function(){var ue=this;return new Promise(function(z,$){ue[J].destroy(null,function(ne){ne?$(ne):z(oe(void 0,!0))})})}),Y),ae);Be.exports=function(ue){var z,$=Object.create(xe,(D(z={},J,{value:ue,writable:!0}),D(z,B,{value:null,writable:!0}),D(z,W,{value:null,writable:!0}),D(z,P,{value:null,writable:!0}),D(z,O,{value:ue._readableState.endEmitted,writable:!0}),D(z,te,{value:function(ge,Ue){var Re=$[J].read();Re?($[q]=null,$[B]=null,$[W]=null,ge(oe(Re,!1))):($[B]=ge,$[W]=Ue)},writable:!0}),z));return $[q]=null,H(ue,function(ne){if(ne&&"ERR_STREAM_PREMATURE_CLOSE"!==ne.code){var ge=$[W];return null!==ge&&($[q]=null,$[B]=null,$[W]=null,ge(ne)),void($[P]=ne)}var Ue=$[B];null!==Ue&&($[q]=null,$[B]=null,$[W]=null,Ue(oe(void 0,!0))),$[O]=!0}),ue.on("readable",Q.bind(null,$)),$}},5019:(Be,Ce,V)=>{"use strict";function Y(Q,U){var ae=Object.keys(Q);if(Object.getOwnPropertySymbols){var xe=Object.getOwnPropertySymbols(Q);U&&(xe=xe.filter(function(Oe){return Object.getOwnPropertyDescriptor(Q,Oe).enumerable})),ae.push.apply(ae,xe)}return ae}function H(Q,U,ae){return U in Q?Object.defineProperty(Q,U,{value:ae,enumerable:!0,configurable:!0,writable:!0}):Q[U]=ae,Q}function W(Q,U){for(var ae=0;ae<U.length;ae++){var xe=U[ae];xe.enumerable=xe.enumerable||!1,xe.configurable=!0,"value"in xe&&(xe.writable=!0),Object.defineProperty(Q,xe.key,xe)}}var q=V(3172).Buffer,J=V(2361).inspect,oe=J&&J.custom||"inspect";function se(Q,U,ae){q.prototype.copy.call(Q,U,ae)}Be.exports=function(){function Q(){(function B(Q,U){if(!(Q instanceof U))throw new TypeError("Cannot call a class as a function")})(this,Q),this.head=null,this.tail=null,this.length=0}return function P(Q,U,ae){U&&W(Q.prototype,U),ae&&W(Q,ae)}(Q,[{key:"push",value:function(ae){var xe={data:ae,next:null};this.length>0?this.tail.next=xe:this.head=xe,this.tail=xe,++this.length}},{key:"unshift",value:function(ae){var xe={data:ae,next:this.head};0===this.length&&(this.tail=xe),this.head=xe,++this.length}},{key:"shift",value:function(){if(0!==this.length){var ae=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,ae}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(ae){if(0===this.length)return"";for(var xe=this.head,Oe=""+xe.data;xe=xe.next;)Oe+=ae+xe.data;return Oe}},{key:"concat",value:function(ae){if(0===this.length)return q.alloc(0);for(var xe=q.allocUnsafe(ae>>>0),Oe=this.head,re=0;Oe;)se(Oe.data,xe,re),re+=Oe.data.length,Oe=Oe.next;return xe}},{key:"consume",value:function(ae,xe){var Oe;return ae<this.head.data.length?(Oe=this.head.data.slice(0,ae),this.head.data=this.head.data.slice(ae)):Oe=ae===this.head.data.length?this.shift():xe?this._getString(ae):this._getBuffer(ae),Oe}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(ae){var xe=this.head,Oe=1,re=xe.data;for(ae-=re.length;xe=xe.next;){var ue=xe.data,z=ae>ue.length?ue.length:ae;if(re+=z===ue.length?ue:ue.slice(0,ae),0==(ae-=z)){z===ue.length?(++Oe,this.head=xe.next?xe.next:this.tail=null):(this.head=xe,xe.data=ue.slice(z));break}++Oe}return this.length-=Oe,re}},{key:"_getBuffer",value:function(ae){var xe=q.allocUnsafe(ae),Oe=this.head,re=1;for(Oe.data.copy(xe),ae-=Oe.data.length;Oe=Oe.next;){var ue=Oe.data,z=ae>ue.length?ue.length:ae;if(ue.copy(xe,xe.length-ae,0,z),0==(ae-=z)){z===ue.length?(++re,this.head=Oe.next?Oe.next:this.tail=null):(this.head=Oe,Oe.data=ue.slice(z));break}++re}return this.length-=re,xe}},{key:oe,value:function(ae,xe){return J(this,function D(Q){for(var U=1;U<arguments.length;U++){var ae=null!=arguments[U]?arguments[U]:{};U%2?Y(Object(ae),!0).forEach(function(xe){H(Q,xe,ae[xe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Q,Object.getOwnPropertyDescriptors(ae)):Y(Object(ae)).forEach(function(xe){Object.defineProperty(Q,xe,Object.getOwnPropertyDescriptor(ae,xe))})}return Q}({},xe,{depth:0,customInspect:!1}))}}]),Q}()},1920:Be=>{"use strict";function V(W,P){H(W,P),Y(W)}function Y(W){W._writableState&&!W._writableState.emitClose||W._readableState&&!W._readableState.emitClose||W.emit("close")}function H(W,P){W.emit("error",P)}Be.exports={destroy:function Ce(W,P){var O=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(P?P(W):W&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(H,this,W)):process.nextTick(H,this,W)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(W||null,function(J){!P&&J?O._writableState?O._writableState.errorEmitted?process.nextTick(Y,O):(O._writableState.errorEmitted=!0,process.nextTick(V,O,J)):process.nextTick(V,O,J):P?(process.nextTick(Y,O),P(J)):process.nextTick(Y,O)}),this)},undestroy:function D(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function B(W,P){var O=W._readableState,q=W._writableState;O&&O.autoDestroy||q&&q.autoDestroy?W.destroy(P):W.emit("error",P)}}},7542:(Be,Ce,V)=>{"use strict";var Y=V(891).q.ERR_STREAM_PREMATURE_CLOSE;function H(){}Be.exports=function W(P,O,q){if("function"==typeof O)return W(P,null,O);O||(O={}),q=function D(P){var O=!1;return function(){if(!O){O=!0;for(var q=arguments.length,te=new Array(q),J=0;J<q;J++)te[J]=arguments[J];P.apply(this,te)}}}(q||H);var te=O.readable||!1!==O.readable&&P.readable,J=O.writable||!1!==O.writable&&P.writable,oe=function(){P.writable||Q()},se=P._writableState&&P._writableState.finished,Q=function(){J=!1,se=!0,te||q.call(P)},U=P._readableState&&P._readableState.endEmitted,ae=function(){te=!1,U=!0,J||q.call(P)},xe=function(z){q.call(P,z)},Oe=function(){var z;return te&&!U?((!P._readableState||!P._readableState.ended)&&(z=new Y),q.call(P,z)):J&&!se?((!P._writableState||!P._writableState.ended)&&(z=new Y),q.call(P,z)):void 0},re=function(){P.req.on("finish",Q)};return function B(P){return P.setHeader&&"function"==typeof P.abort}(P)?(P.on("complete",Q),P.on("abort",Oe),P.req?re():P.on("request",re)):J&&!P._writableState&&(P.on("end",oe),P.on("close",oe)),P.on("end",ae),P.on("finish",Q),!1!==O.error&&P.on("error",xe),P.on("close",Oe),function(){P.removeListener("complete",Q),P.removeListener("abort",Oe),P.removeListener("request",re),P.req&&P.req.removeListener("finish",Q),P.removeListener("end",oe),P.removeListener("close",oe),P.removeListener("finish",Q),P.removeListener("end",ae),P.removeListener("error",xe),P.removeListener("close",Oe)}}},7412:Be=>{Be.exports=function(){throw new Error("Readable.from is not available in the browser")}},954:(Be,Ce,V)=>{"use strict";var Y,H=V(891).q,B=H.ERR_MISSING_ARGS,W=H.ERR_STREAM_DESTROYED;function P(Q){if(Q)throw Q}function q(Q,U,ae,xe){xe=function D(Q){var U=!1;return function(){U||(U=!0,Q.apply(void 0,arguments))}}(xe);var Oe=!1;Q.on("close",function(){Oe=!0}),void 0===Y&&(Y=V(7542)),Y(Q,{readable:U,writable:ae},function(ue){if(ue)return xe(ue);Oe=!0,xe()});var re=!1;return function(ue){if(!Oe&&!re){if(re=!0,function O(Q){return Q.setHeader&&"function"==typeof Q.abort}(Q))return Q.abort();if("function"==typeof Q.destroy)return Q.destroy();xe(ue||new W("pipe"))}}}function te(Q){Q()}function J(Q,U){return Q.pipe(U)}function oe(Q){return Q.length&&"function"==typeof Q[Q.length-1]?Q.pop():P}Be.exports=function se(){for(var Q=arguments.length,U=new Array(Q),ae=0;ae<Q;ae++)U[ae]=arguments[ae];var xe=oe(U);if(Array.isArray(U[0])&&(U=U[0]),U.length<2)throw new B("streams");var Oe,re=U.map(function(ue,z){var $=z<U.length-1;return q(ue,$,z>0,function(ge){Oe||(Oe=ge),ge&&re.forEach(te),!$&&(re.forEach(te),xe(Oe))})});return U.reduce(J)}},7102:(Be,Ce,V)=>{"use strict";var Y=V(891).q.ERR_INVALID_OPT_VALUE;Be.exports={getHighWaterMark:function H(B,W,P,O){var q=function D(B,W,P){return null!=B.highWaterMark?B.highWaterMark:W?B[P]:null}(W,O,P);if(null!=q){if(!isFinite(q)||Math.floor(q)!==q||q<0)throw new Y(O?P:"highWaterMark",q);return Math.floor(q)}return B.objectMode?16:16384}}},4970:(Be,Ce,V)=>{Be.exports=V(9069).EventEmitter},1503:(Be,Ce,V)=>{!function(Y){Y.parser=function(je,be){return new H(je,be)},Y.SAXParser=H,Y.SAXStream=J,Y.createStream=function te(je,be){return new J(je,be)},Y.MAX_BUFFER_LENGTH=65536;var O,D=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function H(je,be){if(!(this instanceof H))return new H(je,be);var Dt=this;(function W(je){for(var be=0,Dt=D.length;be<Dt;be++)je[D[be]]=""})(Dt),Dt.q=Dt.c="",Dt.bufferCheckPosition=Y.MAX_BUFFER_LENGTH,Dt.opt=be||{},Dt.opt.lowercase=Dt.opt.lowercase||Dt.opt.lowercasetags,Dt.looseCase=Dt.opt.lowercase?"toLowerCase":"toUpperCase",Dt.tags=[],Dt.closed=Dt.closedRoot=Dt.sawRoot=!1,Dt.tag=Dt.error=null,Dt.strict=!!je,Dt.noscript=!(!je&&!Dt.opt.noscript),Dt.state=Re.BEGIN,Dt.strictEntities=Dt.opt.strictEntities,Dt.ENTITIES=Object.create(Dt.strictEntities?Y.XML_ENTITIES:Y.ENTITIES),Dt.attribList=[],Dt.opt.xmlns&&(Dt.ns=Object.create(ae)),Dt.trackPosition=!1!==Dt.opt.position,Dt.trackPosition&&(Dt.position=Dt.line=Dt.column=0),Pe(Dt,"onready")}Y.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(je){function be(){}return be.prototype=je,new be}),Object.keys||(Object.keys=function(je){var be=[];for(var Dt in je)je.hasOwnProperty(Dt)&&be.push(Dt);return be}),H.prototype={end:function(){gt(this)},write:function yn(je){var be=this;if(this.error)throw this.error;if(be.closed)return ft(be,"Cannot write after close. Assign an onready handler.");if(null===je)return gt(be);"object"==typeof je&&(je=je.toString());for(var Dt=0,Rt="";Rt=Cn(je,Dt++),be.c=Rt,Rt;)switch(be.trackPosition&&(be.position++,"\n"===Rt?(be.line++,be.column=0):be.column++),be.state){case Re.BEGIN:if(be.state=Re.BEGIN_WHITESPACE,"\ufeff"===Rt)continue;xn(be,Rt);continue;case Re.BEGIN_WHITESPACE:xn(be,Rt);continue;case Re.TEXT:if(be.sawRoot&&!be.closedRoot){for(var ci=Dt-1;Rt&&"<"!==Rt&&"&"!==Rt;)(Rt=Cn(je,Dt++))&&be.trackPosition&&(be.position++,"\n"===Rt?(be.line++,be.column=0):be.column++);be.textNode+=je.substring(ci,Dt-1)}"<"!==Rt||be.sawRoot&&be.closedRoot&&!be.strict?(!z(Rt)&&(!be.sawRoot||be.closedRoot)&&bt(be,"Text data outside of root node."),"&"===Rt?be.state=Re.TEXT_ENTITY:be.textNode+=Rt):(be.state=Re.OPEN_WAKA,be.startTagPosition=be.position);continue;case Re.SCRIPT:"<"===Rt?be.state=Re.SCRIPT_ENDING:be.script+=Rt;continue;case Re.SCRIPT_ENDING:"/"===Rt?be.state=Re.CLOSE_TAG:(be.script+="<"+Rt,be.state=Re.SCRIPT);continue;case Re.OPEN_WAKA:"!"===Rt?(be.state=Re.SGML_DECL,be.sgmlDecl=""):z(Rt)||(ge(xe,Rt)?(be.state=Re.OPEN_TAG,be.tagName=Rt):"/"===Rt?(be.state=Re.CLOSE_TAG,be.tagName=""):"?"===Rt?(be.state=Re.PROC_INST,be.procInstName=be.procInstBody=""):(bt(be,"Unencoded <"),be.startTagPosition+1<be.position&&(Rt=new Array(be.position-be.startTagPosition).join(" ")+Rt),be.textNode+="<"+Rt,be.state=Re.TEXT));continue;case Re.SGML_DECL:"[CDATA["===(be.sgmlDecl+Rt).toUpperCase()?(at(be,"onopencdata"),be.state=Re.CDATA,be.sgmlDecl="",be.cdata=""):be.sgmlDecl+Rt==="--"?(be.state=Re.COMMENT,be.comment="",be.sgmlDecl=""):"DOCTYPE"===(be.sgmlDecl+Rt).toUpperCase()?(be.state=Re.DOCTYPE,(be.doctype||be.sawRoot)&&bt(be,"Inappropriately located doctype declaration"),be.doctype="",be.sgmlDecl=""):">"===Rt?(at(be,"onsgmldeclaration",be.sgmlDecl),be.sgmlDecl="",be.state=Re.TEXT):($(Rt)&&(be.state=Re.SGML_DECL_QUOTED),be.sgmlDecl+=Rt);continue;case Re.SGML_DECL_QUOTED:Rt===be.q&&(be.state=Re.SGML_DECL,be.q=""),be.sgmlDecl+=Rt;continue;case Re.DOCTYPE:">"===Rt?(be.state=Re.TEXT,at(be,"ondoctype",be.doctype),be.doctype=!0):(be.doctype+=Rt,"["===Rt?be.state=Re.DOCTYPE_DTD:$(Rt)&&(be.state=Re.DOCTYPE_QUOTED,be.q=Rt));continue;case Re.DOCTYPE_QUOTED:be.doctype+=Rt,Rt===be.q&&(be.q="",be.state=Re.DOCTYPE);continue;case Re.DOCTYPE_DTD:be.doctype+=Rt,"]"===Rt?be.state=Re.DOCTYPE:$(Rt)&&(be.state=Re.DOCTYPE_DTD_QUOTED,be.q=Rt);continue;case Re.DOCTYPE_DTD_QUOTED:be.doctype+=Rt,Rt===be.q&&(be.state=Re.DOCTYPE_DTD,be.q="");continue;case Re.COMMENT:"-"===Rt?be.state=Re.COMMENT_ENDING:be.comment+=Rt;continue;case Re.COMMENT_ENDING:"-"===Rt?(be.state=Re.COMMENT_ENDED,be.comment=He(be.opt,be.comment),be.comment&&at(be,"oncomment",be.comment),be.comment=""):(be.comment+="-"+Rt,be.state=Re.COMMENT);continue;case Re.COMMENT_ENDED:">"!==Rt?(bt(be,"Malformed comment"),be.comment+="--"+Rt,be.state=Re.COMMENT):be.state=Re.TEXT;continue;case Re.CDATA:"]"===Rt?be.state=Re.CDATA_ENDING:be.cdata+=Rt;continue;case Re.CDATA_ENDING:"]"===Rt?be.state=Re.CDATA_ENDING_2:(be.cdata+="]"+Rt,be.state=Re.CDATA);continue;case Re.CDATA_ENDING_2:">"===Rt?(be.cdata&&at(be,"oncdata",be.cdata),at(be,"onclosecdata"),be.cdata="",be.state=Re.TEXT):"]"===Rt?be.cdata+="]":(be.cdata+="]]"+Rt,be.state=Re.CDATA);continue;case Re.PROC_INST:"?"===Rt?be.state=Re.PROC_INST_ENDING:z(Rt)?be.state=Re.PROC_INST_BODY:be.procInstName+=Rt;continue;case Re.PROC_INST_BODY:if(!be.procInstBody&&z(Rt))continue;"?"===Rt?be.state=Re.PROC_INST_ENDING:be.procInstBody+=Rt;continue;case Re.PROC_INST_ENDING:">"===Rt?(at(be,"onprocessinginstruction",{name:be.procInstName,body:be.procInstBody}),be.procInstName=be.procInstBody="",be.state=Re.TEXT):(be.procInstBody+="?"+Rt,be.state=Re.PROC_INST_BODY);continue;case Re.OPEN_TAG:ge(Oe,Rt)?be.tagName+=Rt:(kn(be),">"===Rt?Jt(be):"/"===Rt?be.state=Re.OPEN_TAG_SLASH:(z(Rt)||bt(be,"Invalid character in tag name"),be.state=Re.ATTRIB));continue;case Re.OPEN_TAG_SLASH:">"===Rt?(Jt(be,!0),nn(be)):(bt(be,"Forward-slash in opening tag not followed by >"),be.state=Re.ATTRIB);continue;case Re.ATTRIB:if(z(Rt))continue;">"===Rt?Jt(be):"/"===Rt?be.state=Re.OPEN_TAG_SLASH:ge(xe,Rt)?(be.attribName=Rt,be.attribValue="",be.state=Re.ATTRIB_NAME):bt(be,"Invalid attribute name");continue;case Re.ATTRIB_NAME:"="===Rt?be.state=Re.ATTRIB_VALUE:">"===Rt?(bt(be,"Attribute without value"),be.attribValue=be.attribName,Dn(be),Jt(be)):z(Rt)?be.state=Re.ATTRIB_NAME_SAW_WHITE:ge(Oe,Rt)?be.attribName+=Rt:bt(be,"Invalid attribute name");continue;case Re.ATTRIB_NAME_SAW_WHITE:if("="===Rt)be.state=Re.ATTRIB_VALUE;else{if(z(Rt))continue;bt(be,"Attribute without value"),be.tag.attributes[be.attribName]="",be.attribValue="",at(be,"onattribute",{name:be.attribName,value:""}),be.attribName="",">"===Rt?Jt(be):ge(xe,Rt)?(be.attribName=Rt,be.state=Re.ATTRIB_NAME):(bt(be,"Invalid attribute name"),be.state=Re.ATTRIB)}continue;case Re.ATTRIB_VALUE:if(z(Rt))continue;$(Rt)?(be.q=Rt,be.state=Re.ATTRIB_VALUE_QUOTED):(bt(be,"Unquoted attribute value"),be.state=Re.ATTRIB_VALUE_UNQUOTED,be.attribValue=Rt);continue;case Re.ATTRIB_VALUE_QUOTED:if(Rt!==be.q){"&"===Rt?be.state=Re.ATTRIB_VALUE_ENTITY_Q:be.attribValue+=Rt;continue}Dn(be),be.q="",be.state=Re.ATTRIB_VALUE_CLOSED;continue;case Re.ATTRIB_VALUE_CLOSED:z(Rt)?be.state=Re.ATTRIB:">"===Rt?Jt(be):"/"===Rt?be.state=Re.OPEN_TAG_SLASH:ge(xe,Rt)?(bt(be,"No whitespace between attributes"),be.attribName=Rt,be.attribValue="",be.state=Re.ATTRIB_NAME):bt(be,"Invalid attribute name");continue;case Re.ATTRIB_VALUE_UNQUOTED:if(!ne(Rt)){"&"===Rt?be.state=Re.ATTRIB_VALUE_ENTITY_U:be.attribValue+=Rt;continue}Dn(be),">"===Rt?Jt(be):be.state=Re.ATTRIB;continue;case Re.CLOSE_TAG:if(be.tagName)">"===Rt?nn(be):ge(Oe,Rt)?be.tagName+=Rt:be.script?(be.script+="</"+be.tagName,be.tagName="",be.state=Re.SCRIPT):(z(Rt)||bt(be,"Invalid tagname in closing tag"),be.state=Re.CLOSE_TAG_SAW_WHITE);else{if(z(Rt))continue;Ue(xe,Rt)?be.script?(be.script+="</"+Rt,be.state=Re.SCRIPT):bt(be,"Invalid tagname in closing tag."):be.tagName=Rt}continue;case Re.CLOSE_TAG_SAW_WHITE:if(z(Rt))continue;">"===Rt?nn(be):bt(be,"Invalid characters in closing tag");continue;case Re.TEXT_ENTITY:case Re.ATTRIB_VALUE_ENTITY_Q:case Re.ATTRIB_VALUE_ENTITY_U:var It,Pt;switch(be.state){case Re.TEXT_ENTITY:It=Re.TEXT,Pt="textNode";break;case Re.ATTRIB_VALUE_ENTITY_Q:It=Re.ATTRIB_VALUE_QUOTED,Pt="attribValue";break;case Re.ATTRIB_VALUE_ENTITY_U:It=Re.ATTRIB_VALUE_UNQUOTED,Pt="attribValue"}";"===Rt?(be[Pt]+=Ln(be),be.entity="",be.state=It):ge(be.entity.length?ue:re,Rt)?be.entity+=Rt:(bt(be,"Invalid character in entity name"),be[Pt]+="&"+be.entity+Rt,be.entity="",be.state=It);continue;default:throw new Error(be,"Unknown state: "+be.state)}return be.position>=be.bufferCheckPosition&&function B(je){for(var be=Math.max(Y.MAX_BUFFER_LENGTH,10),Dt=0,Rt=0,ci=D.length;Rt<ci;Rt++){var $i=je[D[Rt]].length;if($i>be)switch(D[Rt]){case"textNode":xt(je);break;case"cdata":at(je,"oncdata",je.cdata),je.cdata="";break;case"script":at(je,"onscript",je.script),je.script="";break;default:ft(je,"Max buffer length exceeded: "+D[Rt])}Dt=Math.max(Dt,$i)}je.bufferCheckPosition=Y.MAX_BUFFER_LENGTH-Dt+je.position}(be),be},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){!function P(je){xt(je),""!==je.cdata&&(at(je,"oncdata",je.cdata),je.cdata=""),""!==je.script&&(at(je,"onscript",je.script),je.script="")}(this)}};try{O=V(295).Stream}catch{O=function(){}}var q=Y.EVENTS.filter(function(je){return"error"!==je&&"end"!==je});function J(je,be){if(!(this instanceof J))return new J(je,be);O.apply(this),this._parser=new H(je,be),this.writable=!0,this.readable=!0;var Dt=this;this._parser.onend=function(){Dt.emit("end")},this._parser.onerror=function(Rt){Dt.emit("error",Rt),Dt._parser.error=null},this._decoder=null,q.forEach(function(Rt){Object.defineProperty(Dt,"on"+Rt,{get:function(){return Dt._parser["on"+Rt]},set:function(ci){if(!ci)return Dt.removeAllListeners(Rt),Dt._parser["on"+Rt]=ci,ci;Dt.on(Rt,ci)},enumerable:!0,configurable:!1})})}(J.prototype=Object.create(O.prototype,{constructor:{value:J}})).write=function(je){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(je)){if(!this._decoder){var be=V(3054).s;this._decoder=new be("utf8")}je=this._decoder.write(je)}return this._parser.write(je.toString()),this.emit("data",je),!0},J.prototype.end=function(je){return je&&je.length&&this.write(je),this._parser.end(),!0},J.prototype.on=function(je,be){var Dt=this;return!Dt._parser["on"+je]&&-1!==q.indexOf(je)&&(Dt._parser["on"+je]=function(){var Rt=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);Rt.splice(0,0,je),Dt.emit.apply(Dt,Rt)}),O.prototype.on.call(Dt,je,be)};var Q="http://www.w3.org/XML/1998/namespace",U="http://www.w3.org/2000/xmlns/",ae={xml:Q,xmlns:U},xe=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Oe=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,re=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,ue=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function z(je){return" "===je||"\n"===je||"\r"===je||"\t"===je}function $(je){return'"'===je||"'"===je}function ne(je){return">"===je||z(je)}function ge(je,be){return je.test(be)}function Ue(je,be){return!ge(je,be)}var je,be,Dt,Re=0;for(var rt in Y.STATE={BEGIN:Re++,BEGIN_WHITESPACE:Re++,TEXT:Re++,TEXT_ENTITY:Re++,OPEN_WAKA:Re++,SGML_DECL:Re++,SGML_DECL_QUOTED:Re++,DOCTYPE:Re++,DOCTYPE_QUOTED:Re++,DOCTYPE_DTD:Re++,DOCTYPE_DTD_QUOTED:Re++,COMMENT_STARTING:Re++,COMMENT:Re++,COMMENT_ENDING:Re++,COMMENT_ENDED:Re++,CDATA:Re++,CDATA_ENDING:Re++,CDATA_ENDING_2:Re++,PROC_INST:Re++,PROC_INST_BODY:Re++,PROC_INST_ENDING:Re++,OPEN_TAG:Re++,OPEN_TAG_SLASH:Re++,ATTRIB:Re++,ATTRIB_NAME:Re++,ATTRIB_NAME_SAW_WHITE:Re++,ATTRIB_VALUE:Re++,ATTRIB_VALUE_QUOTED:Re++,ATTRIB_VALUE_CLOSED:Re++,ATTRIB_VALUE_UNQUOTED:Re++,ATTRIB_VALUE_ENTITY_Q:Re++,ATTRIB_VALUE_ENTITY_U:Re++,CLOSE_TAG:Re++,CLOSE_TAG_SAW_WHITE:Re++,SCRIPT:Re++,SCRIPT_ENDING:Re++},Y.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},Y.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(Y.ENTITIES).forEach(function(je){var be=Y.ENTITIES[je],Dt="number"==typeof be?String.fromCharCode(be):be;Y.ENTITIES[je]=Dt}),Y.STATE)Y.STATE[Y.STATE[rt]]=rt;function Pe(je,be,Dt){je[be]&&je[be](Dt)}function at(je,be,Dt){je.textNode&&xt(je),Pe(je,be,Dt)}function xt(je){je.textNode=He(je.opt,je.textNode),je.textNode&&Pe(je,"ontext",je.textNode),je.textNode=""}function He(je,be){return je.trim&&(be=be.trim()),je.normalize&&(be=be.replace(/\s+/g," ")),be}function ft(je,be){return xt(je),je.trackPosition&&(be+="\nLine: "+je.line+"\nColumn: "+je.column+"\nChar: "+je.c),be=new Error(be),je.error=be,Pe(je,"onerror",be),je}function gt(je){return je.sawRoot&&!je.closedRoot&&bt(je,"Unclosed root tag"),je.state!==Re.BEGIN&&je.state!==Re.BEGIN_WHITESPACE&&je.state!==Re.TEXT&&ft(je,"Unexpected end"),xt(je),je.c="",je.closed=!0,Pe(je,"onend"),H.call(je,je.strict,je.opt),je}function bt(je,be){if("object"!=typeof je||!(je instanceof H))throw new Error("bad call to strictFail");je.strict&&ft(je,be)}function kn(je){je.strict||(je.tagName=je.tagName[je.looseCase]());var be=je.tags[je.tags.length-1]||je,Dt=je.tag={name:je.tagName,attributes:{}};je.opt.xmlns&&(Dt.ns=be.ns),je.attribList.length=0,at(je,"onopentagstart",Dt)}function Ut(je,be){var Rt=je.indexOf(":")<0?["",je]:je.split(":"),ci=Rt[0],$i=Rt[1];return be&&"xmlns"===je&&(ci="xmlns",$i=""),{prefix:ci,local:$i}}function Dn(je){if(je.strict||(je.attribName=je.attribName[je.looseCase]()),-1!==je.attribList.indexOf(je.attribName)||je.tag.attributes.hasOwnProperty(je.attribName))je.attribName=je.attribValue="";else{if(je.opt.xmlns){var be=Ut(je.attribName,!0),Rt=be.local;if("xmlns"===be.prefix)if("xml"===Rt&&je.attribValue!==Q)bt(je,"xml: prefix must be bound to "+Q+"\nActual: "+je.attribValue);else if("xmlns"===Rt&&je.attribValue!==U)bt(je,"xmlns: prefix must be bound to "+U+"\nActual: "+je.attribValue);else{var ci=je.tag,$i=je.tags[je.tags.length-1]||je;ci.ns===$i.ns&&(ci.ns=Object.create($i.ns)),ci.ns[Rt]=je.attribValue}je.attribList.push([je.attribName,je.attribValue])}else je.tag.attributes[je.attribName]=je.attribValue,at(je,"onattribute",{name:je.attribName,value:je.attribValue});je.attribName=je.attribValue=""}}function Jt(je,be){if(je.opt.xmlns){var Dt=je.tag,Rt=Ut(je.tagName);Dt.prefix=Rt.prefix,Dt.local=Rt.local,Dt.uri=Dt.ns[Rt.prefix]||"",Dt.prefix&&!Dt.uri&&(bt(je,"Unbound namespace prefix: "+JSON.stringify(je.tagName)),Dt.uri=Rt.prefix),Dt.ns&&(je.tags[je.tags.length-1]||je).ns!==Dt.ns&&Object.keys(Dt.ns).forEach(function(Fi){at(je,"onopennamespace",{prefix:Fi,uri:Dt.ns[Fi]})});for(var $i=0,It=je.attribList.length;$i<It;$i++){var Pt=je.attribList[$i],un=Pt[0],Je=Pt[1],Te=Ut(un,!0),De=Te.prefix,vn=""===De?"":Dt.ns[De]||"",ri={name:un,value:Je,prefix:De,local:Te.local,uri:vn};De&&"xmlns"!==De&&!vn&&(bt(je,"Unbound namespace prefix: "+JSON.stringify(De)),ri.uri=De),je.tag.attributes[un]=ri,at(je,"onattribute",ri)}je.attribList.length=0}je.tag.isSelfClosing=!!be,je.sawRoot=!0,je.tags.push(je.tag),at(je,"onopentag",je.tag),be||(je.state=je.noscript||"script"!==je.tagName.toLowerCase()?Re.TEXT:Re.SCRIPT,je.tag=null,je.tagName=""),je.attribName=je.attribValue="",je.attribList.length=0}function nn(je){if(!je.tagName)return bt(je,"Weird empty close tag."),je.textNode+="</>",void(je.state=Re.TEXT);if(je.script){if("script"!==je.tagName)return je.script+="</"+je.tagName+">",je.tagName="",void(je.state=Re.SCRIPT);at(je,"onscript",je.script),je.script=""}var be=je.tags.length,Dt=je.tagName;je.strict||(Dt=Dt[je.looseCase]());for(var Rt=Dt;be--&&je.tags[be].name!==Rt;)bt(je,"Unexpected close tag");if(be<0)return bt(je,"Unmatched closing tag: "+je.tagName),je.textNode+="</"+je.tagName+">",void(je.state=Re.TEXT);je.tagName=Dt;for(var $i=je.tags.length;$i-- >be;){var It=je.tag=je.tags.pop();je.tagName=je.tag.name,at(je,"onclosetag",je.tagName);var Pt={};for(var un in It.ns)Pt[un]=It.ns[un];je.opt.xmlns&&It.ns!==(je.tags[je.tags.length-1]||je).ns&&Object.keys(It.ns).forEach(function(Te){at(je,"onclosenamespace",{prefix:Te,uri:It.ns[Te]})})}0===be&&(je.closedRoot=!0),je.tagName=je.attribValue=je.attribName="",je.attribList.length=0,je.state=Re.TEXT}function Ln(je){var Rt,be=je.entity,Dt=be.toLowerCase(),ci="";return je.ENTITIES[be]?je.ENTITIES[be]:je.ENTITIES[Dt]?je.ENTITIES[Dt]:("#"===(be=Dt).charAt(0)&&("x"===be.charAt(1)?(be=be.slice(2),ci=(Rt=parseInt(be,16)).toString(16)):(be=be.slice(1),ci=(Rt=parseInt(be,10)).toString(10))),be=be.replace(/^0+/,""),isNaN(Rt)||ci.toLowerCase()!==be?(bt(je,"Invalid character entity"),"&"+je.entity+";"):String.fromCodePoint(Rt))}function xn(je,be){"<"===be?(je.state=Re.OPEN_WAKA,je.startTagPosition=je.position):z(be)||(bt(je,"Non-whitespace before first tag."),je.textNode=be,je.state=Re.TEXT)}function Cn(je,be){var Dt="";return be<je.length&&(Dt=je.charAt(be)),Dt}Re=Y.STATE,String.fromCodePoint||(je=String.fromCharCode,be=Math.floor,Dt=function(){var Rt=16384,ci=[],Pt=-1,un=arguments.length;if(!un)return"";for(var Je="";++Pt<un;){var Te=Number(arguments[Pt]);if(!isFinite(Te)||Te<0||Te>1114111||be(Te)!==Te)throw RangeError("Invalid code point: "+Te);Te<=65535?ci.push(Te):ci.push(55296+((Te-=65536)>>10),Te%1024+56320),(Pt+1===un||ci.length>Rt)&&(Je+=je.apply(null,ci),ci.length=0)}return Je},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:Dt,configurable:!0,writable:!0}):String.fromCodePoint=Dt)}(Ce)},6563:function(){!function(Be,Ce){"use strict";if(!Be.setImmediate){var B,V=1,Y={},D=!1,H=Be.document,ae=Object.getPrototypeOf&&Object.getPrototypeOf(Be);ae=ae&&ae.setTimeout?ae:Be,"[object process]"==={}.toString.call(Be.process)?function te(){B=function(xe){process.nextTick(function(){q(xe)})}}():function J(){if(Be.postMessage&&!Be.importScripts){var xe=!0,Oe=Be.onmessage;return Be.onmessage=function(){xe=!1},Be.postMessage("","*"),Be.onmessage=Oe,xe}}()?function oe(){var xe="setImmediate$"+Math.random()+"$",Oe=function(re){re.source===Be&&"string"==typeof re.data&&0===re.data.indexOf(xe)&&q(+re.data.slice(xe.length))};Be.addEventListener?Be.addEventListener("message",Oe,!1):Be.attachEvent("onmessage",Oe),B=function(re){Be.postMessage(xe+re,"*")}}():Be.MessageChannel?function se(){var xe=new MessageChannel;xe.port1.onmessage=function(Oe){q(Oe.data)},B=function(Oe){xe.port2.postMessage(Oe)}}():H&&"onreadystatechange"in H.createElement("script")?function Q(){var xe=H.documentElement;B=function(Oe){var re=H.createElement("script");re.onreadystatechange=function(){q(Oe),re.onreadystatechange=null,xe.removeChild(re),re=null},xe.appendChild(re)}}():function U(){B=function(xe){setTimeout(q,0,xe)}}(),ae.setImmediate=function W(xe){"function"!=typeof xe&&(xe=new Function(""+xe));for(var Oe=new Array(arguments.length-1),re=0;re<Oe.length;re++)Oe[re]=arguments[re+1];var ue={callback:xe,args:Oe};return Y[V]=ue,B(V),V++},ae.clearImmediate=P}function P(xe){delete Y[xe]}function q(xe){if(D)setTimeout(q,0,xe);else{var Oe=Y[xe];if(Oe){D=!0;try{!function O(xe){var Oe=xe.callback,re=xe.args;switch(re.length){case 0:Oe();break;case 1:Oe(re[0]);break;case 2:Oe(re[0],re[1]);break;case 3:Oe(re[0],re[1],re[2]);break;default:Oe.apply(void 0,re)}}(Oe)}finally{P(xe),D=!1}}}}}(typeof self>"u"?typeof global>"u"?this:global:self)},2002:function(Be,Ce,V){"use strict";var te,Y=this&&this.__extends||(te=function(J,oe){return(te=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(se,Q){se.__proto__=Q}||function(se,Q){for(var U in Q)Object.prototype.hasOwnProperty.call(Q,U)&&(se[U]=Q[U])})(J,oe)},function(J,oe){if("function"!=typeof oe&&null!==oe)throw new TypeError("Class extends value "+String(oe)+" is not a constructor or null");function se(){this.constructor=J}te(J,oe),J.prototype=null===oe?Object.create(oe):(se.prototype=oe.prototype,new se)}),D=this&&this.__importDefault||function(te){return te&&te.__esModule?te:{default:te}};Object.defineProperty(Ce,"__esModule",{value:!0});var H=V(2630),B=D(V(4539)),W=V(1699),P=V(57),O=1.5,q=function(te){function J(){var oe=te.call(this)||this;return oe.x=.5,oe.y=.5,oe.angle=0,oe.ratio=1,oe.minRatio=null,oe.maxRatio=null,oe.nextFrame=null,oe.previousState=null,oe.enabled=!0,oe.previousState=oe.getState(),oe}return Y(J,te),J.from=function(oe){return(new J).setState(oe)},J.prototype.enable=function(){return this.enabled=!0,this},J.prototype.disable=function(){return this.enabled=!1,this},J.prototype.getState=function(){return{x:this.x,y:this.y,angle:this.angle,ratio:this.ratio}},J.prototype.hasState=function(oe){return this.x===oe.x&&this.y===oe.y&&this.ratio===oe.ratio&&this.angle===oe.angle},J.prototype.getPreviousState=function(){var oe=this.previousState;return oe?{x:oe.x,y:oe.y,angle:oe.angle,ratio:oe.ratio}:null},J.prototype.getBoundedRatio=function(oe){var se=oe;return"number"==typeof this.minRatio&&(se=Math.max(se,this.minRatio)),"number"==typeof this.maxRatio&&(se=Math.min(se,this.maxRatio)),se},J.prototype.validateState=function(oe){var se={};return"number"==typeof oe.x&&(se.x=oe.x),"number"==typeof oe.y&&(se.y=oe.y),"number"==typeof oe.angle&&(se.angle=oe.angle),"number"==typeof oe.ratio&&(se.ratio=this.getBoundedRatio(oe.ratio)),se},J.prototype.isAnimated=function(){return!!this.nextFrame},J.prototype.setState=function(oe){if(!this.enabled)return this;this.previousState=this.getState();var se=this.validateState(oe);return"number"==typeof se.x&&(this.x=se.x),"number"==typeof se.y&&(this.y=se.y),"number"==typeof se.angle&&(this.angle=se.angle),"number"==typeof se.ratio&&(this.ratio=se.ratio),this.hasState(this.previousState)||this.emit("updated",this.getState()),this},J.prototype.animate=function(oe,se,Q){var U=this;if(this.enabled){var ae=Object.assign({},H.ANIMATE_DEFAULTS,se),xe=this.validateState(oe),Oe="function"==typeof ae.easing?ae.easing:B.default[ae.easing],re=Date.now(),ue=this.getState(),z=function(){var $=(Date.now()-re)/ae.duration;if($>=1)return U.nextFrame=null,U.setState(xe),void(U.animationCallback&&(U.animationCallback.call(null),U.animationCallback=void 0));var ne=Oe($),ge={};"number"==typeof xe.x&&(ge.x=ue.x+(xe.x-ue.x)*ne),"number"==typeof xe.y&&(ge.y=ue.y+(xe.y-ue.y)*ne),"number"==typeof xe.angle&&(ge.angle=ue.angle+(xe.angle-ue.angle)*ne),"number"==typeof xe.ratio&&(ge.ratio=ue.ratio+(xe.ratio-ue.ratio)*ne),U.setState(ge),U.nextFrame=(0,W.requestFrame)(z)};this.nextFrame?((0,W.cancelFrame)(this.nextFrame),this.animationCallback&&this.animationCallback.call(null),this.nextFrame=(0,W.requestFrame)(z)):z(),this.animationCallback=Q}},J.prototype.animatedZoom=function(oe){if(oe){if("number"==typeof oe)return this.animate({ratio:this.ratio/oe});this.animate({ratio:this.ratio/(oe.factor||O)},oe)}else this.animate({ratio:this.ratio/O})},J.prototype.animatedUnzoom=function(oe){if(oe){if("number"==typeof oe)return this.animate({ratio:this.ratio*oe});this.animate({ratio:this.ratio*(oe.factor||O)},oe)}else this.animate({ratio:this.ratio*O})},J.prototype.animatedReset=function(oe){this.animate({x:.5,y:.5,ratio:1,angle:0},oe)},J.prototype.copy=function(){return J.from(this.getState())},J}(P.TypedEventEmitter);Ce.default=q},5473:function(Be,Ce,V){"use strict";var se,Y=this&&this.__extends||(se=function(Q,U){return(se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ae,xe){ae.__proto__=xe}||function(ae,xe){for(var Oe in xe)Object.prototype.hasOwnProperty.call(xe,Oe)&&(ae[Oe]=xe[Oe])})(Q,U)},function(Q,U){if("function"!=typeof U&&null!==U)throw new TypeError("Class extends value "+String(U)+" is not a constructor or null");function ae(){this.constructor=Q}se(Q,U),Q.prototype=null===U?Object.create(U):(ae.prototype=U.prototype,new ae)}),D=this&&this.__assign||function(){return D=Object.assign||function(se){for(var Q,U=1,ae=arguments.length;U<ae;U++)for(var xe in Q=arguments[U])Object.prototype.hasOwnProperty.call(Q,xe)&&(se[xe]=Q[xe]);return se},D.apply(this,arguments)};Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.getWheelDelta=Ce.getTouchCoords=Ce.getTouchesArray=Ce.getWheelCoords=Ce.getMouseCoords=Ce.getPosition=void 0;var H=V(57);function B(se,Q){var U=Q.getBoundingClientRect();return{x:se.clientX-U.left,y:se.clientY-U.top}}function W(se,Q){var U=D(D({},B(se,Q)),{sigmaDefaultPrevented:!1,preventSigmaDefault:function(){U.sigmaDefaultPrevented=!0},original:se});return U}function q(se){for(var Q=[],U=0,ae=Math.min(se.length,2);U<ae;U++)Q.push(se[U]);return Q}function J(se){if(typeof se.deltaY<"u")return-3*se.deltaY/360;if(typeof se.detail<"u")return se.detail/-9;throw new Error("Captor: could not extract delta from event.")}Ce.getPosition=B,Ce.getMouseCoords=W,Ce.getWheelCoords=function P(se,Q){return D(D({},W(se,Q)),{delta:J(se)})},Ce.getTouchesArray=q,Ce.getTouchCoords=function te(se,Q){return{touches:q(se.touches).map(function(U){return B(U,Q)}),original:se}},Ce.getWheelDelta=J;var oe=function(se){function Q(U,ae){var xe=se.call(this)||this;return xe.container=U,xe.renderer=ae,xe}return Y(Q,se),Q}(H.TypedEventEmitter);Ce.default=oe},2465:function(Be,Ce,V){"use strict";var xe,Y=this&&this.__extends||(xe=function(Oe,re){return(xe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ue,z){ue.__proto__=z}||function(ue,z){for(var $ in z)Object.prototype.hasOwnProperty.call(z,$)&&(ue[$]=z[$])})(Oe,re)},function(Oe,re){if("function"!=typeof re&&null!==re)throw new TypeError("Class extends value "+String(re)+" is not a constructor or null");function ue(){this.constructor=Oe}xe(Oe,re),Oe.prototype=null===re?Object.create(re):(ue.prototype=re.prototype,new ue)}),D=this&&this.__createBinding||(Object.create?function(xe,Oe,re,ue){void 0===ue&&(ue=re),Object.defineProperty(xe,ue,{enumerable:!0,get:function(){return Oe[re]}})}:function(xe,Oe,re,ue){void 0===ue&&(ue=re),xe[ue]=Oe[re]}),H=this&&this.__setModuleDefault||(Object.create?function(xe,Oe){Object.defineProperty(xe,"default",{enumerable:!0,value:Oe})}:function(xe,Oe){xe.default=Oe}),B=this&&this.__importStar||function(xe){if(xe&&xe.__esModule)return xe;var Oe={};if(null!=xe)for(var re in xe)"default"!==re&&Object.prototype.hasOwnProperty.call(xe,re)&&D(Oe,xe,re);return H(Oe,xe),Oe};Object.defineProperty(Ce,"__esModule",{value:!0});var W=B(V(5473)),ae=function(xe){function Oe(re,ue){var z=xe.call(this,re,ue)||this;return z.enabled=!0,z.draggedEvents=0,z.downStartTime=null,z.lastMouseX=null,z.lastMouseY=null,z.isMouseDown=!1,z.isMoving=!1,z.movingTimeout=null,z.startCameraState=null,z.clicks=0,z.doubleClickTimeout=null,z.currentWheelDirection=0,z.handleClick=z.handleClick.bind(z),z.handleRightClick=z.handleRightClick.bind(z),z.handleDown=z.handleDown.bind(z),z.handleUp=z.handleUp.bind(z),z.handleMove=z.handleMove.bind(z),z.handleWheel=z.handleWheel.bind(z),z.handleOut=z.handleOut.bind(z),re.addEventListener("click",z.handleClick,!1),re.addEventListener("contextmenu",z.handleRightClick,!1),re.addEventListener("mousedown",z.handleDown,!1),re.addEventListener("wheel",z.handleWheel,!1),re.addEventListener("mouseout",z.handleOut,!1),document.addEventListener("mousemove",z.handleMove,!1),document.addEventListener("mouseup",z.handleUp,!1),z}return Y(Oe,xe),Oe.prototype.kill=function(){var re=this.container;re.removeEventListener("click",this.handleClick),re.removeEventListener("contextmenu",this.handleRightClick),re.removeEventListener("mousedown",this.handleDown),re.removeEventListener("wheel",this.handleWheel),re.removeEventListener("mouseout",this.handleOut),document.removeEventListener("mousemove",this.handleMove),document.removeEventListener("mouseup",this.handleUp)},Oe.prototype.handleClick=function(re){var ue=this;if(this.enabled){if(this.clicks++,2===this.clicks)return this.clicks=0,"number"==typeof this.doubleClickTimeout&&(clearTimeout(this.doubleClickTimeout),this.doubleClickTimeout=null),this.handleDoubleClick(re);setTimeout(function(){ue.clicks=0,ue.doubleClickTimeout=null},300),this.draggedEvents<3&&this.emit("click",(0,W.getMouseCoords)(re,this.container))}},Oe.prototype.handleRightClick=function(re){!this.enabled||this.emit("rightClick",(0,W.getMouseCoords)(re,this.container))},Oe.prototype.handleDoubleClick=function(re){if(this.enabled){re.preventDefault(),re.stopPropagation();var ue=(0,W.getMouseCoords)(re,this.container);if(this.emit("doubleClick",ue),!ue.sigmaDefaultPrevented){var z=this.renderer.getCamera(),$=z.getBoundedRatio(z.getState().ratio/2.2);z.animate(this.renderer.getViewportZoomedState((0,W.getPosition)(re,this.container),$),{easing:"quadraticInOut",duration:200})}}},Oe.prototype.handleDown=function(re){if(this.enabled){this.startCameraState=this.renderer.getCamera().getState();var ue=(0,W.getPosition)(re,this.container),$=ue.y;this.lastMouseX=ue.x,this.lastMouseY=$,this.draggedEvents=0,this.downStartTime=Date.now(),this.isMouseDown=!0,this.emit("mousedown",(0,W.getMouseCoords)(re,this.container))}},Oe.prototype.handleUp=function(re){var ue=this;if(this.enabled&&this.isMouseDown){var z=this.renderer.getCamera();this.isMouseDown=!1,"number"==typeof this.movingTimeout&&(clearTimeout(this.movingTimeout),this.movingTimeout=null);var $=(0,W.getPosition)(re,this.container),ne=$.x,ge=$.y,Ue=z.getState(),Re=z.getPreviousState()||{x:0,y:0};this.isMoving?z.animate({x:Ue.x+3*(Ue.x-Re.x),y:Ue.y+3*(Ue.y-Re.y)},{duration:200,easing:"quadraticOut"}):(this.lastMouseX!==ne||this.lastMouseY!==ge)&&z.setState({x:Ue.x,y:Ue.y}),this.isMoving=!1,setTimeout(function(){ue.draggedEvents=0,ue.renderer.refresh()},0),this.emit("mouseup",(0,W.getMouseCoords)(re,this.container))}},Oe.prototype.handleMove=function(re){var ue=this;if(this.enabled){var z=(0,W.getMouseCoords)(re,this.container);if(this.emit("mousemovebody",z),re.target===this.container&&this.emit("mousemove",z),!z.sigmaDefaultPrevented&&this.isMouseDown){this.isMoving=!0,this.draggedEvents++,"number"==typeof this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){ue.movingTimeout=null,ue.isMoving=!1},100);var $=this.renderer.getCamera(),ne=(0,W.getPosition)(re,this.container),ge=ne.x,Ue=ne.y,Re=this.renderer.viewportToFramedGraph({x:this.lastMouseX,y:this.lastMouseY}),rt=this.renderer.viewportToFramedGraph({x:ge,y:Ue}),Pe=Re.x-rt.x,at=Re.y-rt.y,xt=$.getState();$.setState({x:xt.x+Pe,y:xt.y+at}),this.lastMouseX=ge,this.lastMouseY=Ue,re.preventDefault(),re.stopPropagation()}}},Oe.prototype.handleWheel=function(re){var ue=this;if(this.enabled){re.preventDefault(),re.stopPropagation();var z=(0,W.getWheelDelta)(re);if(z){var $=(0,W.getWheelCoords)(re,this.container);if(this.emit("wheel",$),!$.sigmaDefaultPrevented){var ne=z>0?1/1.7:1.7,ge=this.renderer.getCamera(),Ue=ge.getBoundedRatio(ge.getState().ratio*ne),Re=z>0?1:-1,rt=Date.now();this.currentWheelDirection===Re&&this.lastWheelTriggerTime&&rt-this.lastWheelTriggerTime<50||(ge.animate(this.renderer.getViewportZoomedState((0,W.getPosition)(re,this.container),Ue),{easing:"quadraticOut",duration:250},function(){ue.currentWheelDirection=0}),this.currentWheelDirection=Re,this.lastWheelTriggerTime=rt)}}}},Oe.prototype.handleOut=function(){},Oe}(W.default);Ce.default=ae},1565:function(Be,Ce,V){"use strict";var oe,Y=this&&this.__extends||(oe=function(se,Q){return(oe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,ae){U.__proto__=ae}||function(U,ae){for(var xe in ae)Object.prototype.hasOwnProperty.call(ae,xe)&&(U[xe]=ae[xe])})(se,Q)},function(se,Q){if("function"!=typeof Q&&null!==Q)throw new TypeError("Class extends value "+String(Q)+" is not a constructor or null");function U(){this.constructor=se}oe(se,Q),se.prototype=null===Q?Object.create(Q):(U.prototype=Q.prototype,new U)}),D=this&&this.__createBinding||(Object.create?function(oe,se,Q,U){void 0===U&&(U=Q),Object.defineProperty(oe,U,{enumerable:!0,get:function(){return se[Q]}})}:function(oe,se,Q,U){void 0===U&&(U=Q),oe[U]=se[Q]}),H=this&&this.__setModuleDefault||(Object.create?function(oe,se){Object.defineProperty(oe,"default",{enumerable:!0,value:se})}:function(oe,se){oe.default=se}),B=this&&this.__importStar||function(oe){if(oe&&oe.__esModule)return oe;var se={};if(null!=oe)for(var Q in oe)"default"!==Q&&Object.prototype.hasOwnProperty.call(oe,Q)&&D(se,oe,Q);return H(se,oe),se},W=this&&this.__read||function(oe,se){var Q="function"==typeof Symbol&&oe[Symbol.iterator];if(!Q)return oe;var ae,Oe,U=Q.call(oe),xe=[];try{for(;(void 0===se||se-- >0)&&!(ae=U.next()).done;)xe.push(ae.value)}catch(re){Oe={error:re}}finally{try{ae&&!ae.done&&(Q=U.return)&&Q.call(U)}finally{if(Oe)throw Oe.error}}return xe};Object.defineProperty(Ce,"__esModule",{value:!0});var P=B(V(5473)),J=function(oe){function se(Q,U){var ae=oe.call(this,Q,U)||this;return ae.enabled=!0,ae.isMoving=!1,ae.touchMode=0,ae.handleStart=ae.handleStart.bind(ae),ae.handleLeave=ae.handleLeave.bind(ae),ae.handleMove=ae.handleMove.bind(ae),Q.addEventListener("touchstart",ae.handleStart,!1),Q.addEventListener("touchend",ae.handleLeave,!1),Q.addEventListener("touchcancel",ae.handleLeave,!1),Q.addEventListener("touchmove",ae.handleMove,!1),ae}return Y(se,oe),se.prototype.kill=function(){var Q=this.container;Q.removeEventListener("touchstart",this.handleStart),Q.removeEventListener("touchend",this.handleLeave),Q.removeEventListener("touchcancel",this.handleLeave),Q.removeEventListener("touchmove",this.handleMove)},se.prototype.getDimensions=function(){return{width:this.container.offsetWidth,height:this.container.offsetHeight}},se.prototype.dispatchRelatedMouseEvent=function(Q,U,ae,xe){var Oe=ae||(0,P.getPosition)(U.touches[0],this.container),re=new MouseEvent(Q,{clientX:Oe.x,clientY:Oe.y,altKey:U.altKey,ctrlKey:U.ctrlKey});re.isFakeSigmaMouseEvent=!0,(xe||this.container).dispatchEvent(re)},se.prototype.handleStart=function(Q){var U=this;if(this.enabled){Q.preventDefault(),1===Q.touches.length&&this.dispatchRelatedMouseEvent("mousedown",Q);var ae=(0,P.getTouchesArray)(Q.touches);if(this.isMoving=!0,this.touchMode=ae.length,this.startCameraState=this.renderer.getCamera().getState(),this.startTouchesPositions=ae.map(function(ge){return(0,P.getPosition)(ge,U.container)}),this.lastTouchesPositions=this.startTouchesPositions,2===this.touchMode){var xe=W(this.startTouchesPositions,2),Oe=xe[0],re=Oe.x,ue=Oe.y,z=xe[1],$=z.x,ne=z.y;this.startTouchesAngle=Math.atan2(ne-ue,$-re),this.startTouchesDistance=Math.sqrt(Math.pow($-re,2)+Math.pow(ne-ue,2))}this.emit("touchdown",(0,P.getTouchCoords)(Q,this.container))}},se.prototype.handleLeave=function(Q){if(this.enabled){switch(Q.preventDefault(),0===Q.touches.length&&this.lastTouchesPositions&&this.lastTouchesPositions.length&&(this.dispatchRelatedMouseEvent("mouseup",Q,this.lastTouchesPositions[0],document),this.dispatchRelatedMouseEvent("click",Q,this.lastTouchesPositions[0])),this.movingTimeout&&(this.isMoving=!1,clearTimeout(this.movingTimeout)),this.touchMode){case 2:if(1===Q.touches.length){this.handleStart(Q),Q.preventDefault();break}case 1:if(this.isMoving){var U=this.renderer.getCamera(),ae=U.getState(),xe=U.getPreviousState()||{x:0,y:0};U.animate({x:ae.x+3*(ae.x-xe.x),y:ae.y+3*(ae.y-xe.y)},{duration:200,easing:"quadraticOut"})}this.isMoving=!1,this.touchMode=0}this.emit("touchup",(0,P.getTouchCoords)(Q,this.container))}},se.prototype.handleMove=function(Q){var U,ae=this;if(this.enabled){Q.preventDefault(),1===Q.touches.length&&this.dispatchRelatedMouseEvent("mousemove",Q);var xe=this.renderer.getCamera(),Oe=this.startCameraState,ue=(0,P.getTouchesArray)(Q.touches).map(function(yn){return(0,P.getPosition)(yn,ae.container)});switch(this.lastTouchesPositions=ue,this.isMoving=!0,this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){ae.isMoving=!1},200),this.touchMode){case 1:var z=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0]),$=z.x,ne=z.y,ge=this.renderer.viewportToFramedGraph(ue[0]);xe.setState({x:Oe.x+$-(Ue=ge.x),y:Oe.y+ne-(Re=ge.y)});break;case 2:var rt={},Pe=ue[0],at=Pe.x,xt=Pe.y,He=ue[1],ft=He.x,gt=He.y,bt=Math.atan2(gt-xt,ft-at)-this.startTouchesAngle,kn=Math.hypot(gt-xt,ft-at)/this.startTouchesDistance,Ut=xe.getBoundedRatio(Oe.ratio/kn);rt.ratio=Ut,rt.angle=Oe.angle+bt;var Ue,Dn=this.getDimensions(),Jt=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0],{cameraState:Oe}),nn=Math.min(Dn.width,Dn.height),Cn=Ut/nn,Re=xt-nn/2/(nn/Dn.height);Re=(U=W([(Ue=at-nn/2/(nn/Dn.width))*Math.cos(-rt.angle)-Re*Math.sin(-rt.angle),Re*Math.cos(-rt.angle)+Ue*Math.sin(-rt.angle)],2))[1],rt.x=Jt.x-(Ue=U[0])*Cn,rt.y=Jt.y+Re*Cn,xe.setState(rt)}this.emit("touchmove",(0,P.getTouchCoords)(Q,this.container))}},se}(P.default);Ce.default=J},4942:(Be,Ce)=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.edgeLabelsToDisplayFromNodes=Ce.LabelGrid=void 0;var V=function(){function H(B,W){this.key=B,this.size=W}return H.compare=function(B,W){return B.size>W.size?-1:B.size<W.size||B.key>W.key?1:-1},H}(),Y=function(){function H(){this.width=0,this.height=0,this.cellSize=0,this.columns=0,this.rows=0,this.cells={}}return H.prototype.resizeAndClear=function(B,W){this.width=B.width,this.height=B.height,this.cellSize=W,this.columns=Math.ceil(B.width/W),this.rows=Math.ceil(B.height/W),this.cells={}},H.prototype.getIndex=function(B){var W=Math.floor(B.x/this.cellSize);return Math.floor(B.y/this.cellSize)*this.columns+W},H.prototype.add=function(B,W,P){var O=new V(B,W),q=this.getIndex(P),te=this.cells[q];te||(this.cells[q]=te=[]),te.push(O)},H.prototype.organize=function(){for(var B in this.cells)this.cells[B].sort(V.compare)},H.prototype.getLabelsToDisplay=function(B,W){var P=this.cellSize*this.cellSize,te=Math.ceil(P/B/B*W/P),J=[];for(var oe in this.cells)for(var se=this.cells[oe],Q=0;Q<Math.min(te,se.length);Q++)J.push(se[Q].key);return J},H}();Ce.LabelGrid=Y,Ce.edgeLabelsToDisplayFromNodes=function D(H){var W=H.hoveredNode,P=H.highlightedNodes,O=H.displayedNodeLabels,q=[];return H.graph.forEachEdge(function(te,J,oe,se){(oe===W||se===W||P.has(oe)||P.has(se)||O.has(oe)&&O.has(se))&&q.push(te)}),q}},3650:function(Be,Ce,V){"use strict";var Y=this&&this.__read||function(rt,Pe){var at="function"==typeof Symbol&&rt[Symbol.iterator];if(!at)return rt;var He,gt,xt=at.call(rt),ft=[];try{for(;(void 0===Pe||Pe-- >0)&&!(He=xt.next()).done;)ft.push(He.value)}catch(bt){gt={error:bt}}finally{try{He&&!He.done&&(at=xt.return)&&at.call(xt)}finally{if(gt)throw gt.error}}return ft},D=this&&this.__spreadArray||function(rt,Pe,at){if(at||2===arguments.length)for(var ft,xt=0,He=Pe.length;xt<He;xt++)(ft||!(xt in Pe))&&(ft||(ft=Array.prototype.slice.call(Pe,0,xt)),ft[xt]=Pe[xt]);return rt.concat(ft||Array.prototype.slice.call(Pe))},H=this&&this.__importDefault||function(rt){return rt&&rt.__esModule?rt:{default:rt}};Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.rectangleCollidesWithQuad=Ce.squareCollidesWithQuad=Ce.getCircumscribedAlignedRectangle=Ce.isRectangleAligned=void 0;var B=H(V(3333)),O="outside",xe=!1;function Oe(rt){return rt.x1===rt.x2||rt.y1===rt.y2}function re(rt){var Pe=Math.sqrt(Math.pow(rt.x2-rt.x1,2)+Math.pow(rt.y2-rt.y1,2)),at_x=(rt.y1-rt.y2)*rt.height/Pe,at_y=(rt.x2-rt.x1)*rt.height/Pe,xt={x:rt.x1,y:rt.y1},He={x:rt.x2,y:rt.y2},ft={x:rt.x1+at_x,y:rt.y1+at_y},gt={x:rt.x2+at_x,y:rt.y2+at_y},bt=Math.min(xt.x,He.x,ft.x,gt.x),kn=Math.max(xt.x,He.x,ft.x,gt.x),Ut=Math.min(xt.y,He.y,ft.y,gt.y);return{x1:bt,y1:Ut,x2:kn,y2:Ut,height:Math.max(xt.y,He.y,ft.y,gt.y)-Ut}}function ue(rt,Pe,at,xt,He,ft,gt){return rt<xt+ft&&rt+at>xt&&Pe<He+gt&&Pe+at>He}function z(rt,Pe,at,xt,He,ft,gt,bt){return rt<He+gt&&rt+at>He&&Pe<ft+bt&&Pe+xt>ft}function $(rt,Pe,at,xt,He,ft){var Ut=rt<at+He/2;return Pe<xt+ft/2?Ut?1:2:Ut?3:4}Ce.isRectangleAligned=Oe,Ce.getCircumscribedAlignedRectangle=re,Ce.squareCollidesWithQuad=ue,Ce.rectangleCollidesWithQuad=z;var Re=function(){function rt(Pe){var at;void 0===Pe&&(Pe={}),this.containers=((at={})[O]=[],at),this.cache=null,this.lastRectangle=null;var xt=Math.pow(4,5);this.data=new Float32Array((4*xt-1)/3*4),this.resize(Pe.boundaries?Pe.boundaries:{x:0,y:0,width:1,height:1})}return rt.prototype.add=function(Pe,at,xt,He){return function ge(rt,Pe,at,xt,He,ft,gt){for(var bt=He-gt,kn=ft-gt,Ut=2*gt,Dn=0,Jt=0;;){if(Dn>=rt)return at[Jt]=at[Jt]||[],void at[Jt].push(xt);var nn=4*Jt+4,Ln=4*Jt+8,xn=4*Jt+12,Cn=4*Jt+16,yn=ue(bt,kn,Ut,Pe[nn+0],Pe[nn+1],Pe[nn+2],Pe[nn+3]),je=ue(bt,kn,Ut,Pe[Ln+0],Pe[Ln+1],Pe[Ln+2],Pe[Ln+3]),be=ue(bt,kn,Ut,Pe[xn+0],Pe[xn+1],Pe[xn+2],Pe[xn+3]),Dt=ue(bt,kn,Ut,Pe[Cn+0],Pe[Cn+1],Pe[Cn+2],Pe[Cn+3]),Rt=[yn,je,be,Dt].reduce(function(ci,$i){return $i?ci+1:ci},0);if(0===Rt&&0===Dn)return at[O].push(xt),void(!xe&&at[O].length>=5&&(xe=!0,console.warn("sigma/quadtree.insertNode: At least 5 nodes are outside the global quadtree zone. You might have a problem with the normalization function or the custom bounding box.")));if(0===Rt)throw new Error("sigma/quadtree.insertNode: no collision (level: ".concat(Dn,", key: ").concat(xt,", x: ").concat(He,", y: ").concat(ft,", size: ").concat(gt,")."));if(3===Rt)throw new Error("sigma/quadtree.insertNode: 3 impossible collisions (level: ".concat(Dn,", key: ").concat(xt,", x: ").concat(He,", y: ").concat(ft,", size: ").concat(gt,")."));if(Rt>1)return at[Jt]=at[Jt]||[],void at[Jt].push(xt);Dn++,yn&&(Jt=nn),je&&(Jt=Ln),be&&(Jt=xn),Dt&&(Jt=Cn)}}(5,this.data,this.containers,Pe,at,xt,He),this},rt.prototype.resize=function(Pe){this.clear(),this.data[0]=Pe.x,this.data[1]=Pe.y,this.data[2]=Pe.width,this.data[3]=Pe.height,function ne(rt,Pe){for(var at=[0,0];at.length;){var xt=at.pop(),He=at.pop(),ft=4*He+4,gt=4*He+8,bt=4*He+12,kn=4*He+16,Ut=Pe[He+0],Dn=Pe[He+1],Ln=Pe[He+2]/2,xn=Pe[He+3]/2;Pe[ft+0]=Ut,Pe[ft+1]=Dn,Pe[ft+2]=Ln,Pe[ft+3]=xn,Pe[gt+0]=Ut+Ln,Pe[gt+1]=Dn,Pe[gt+2]=Ln,Pe[gt+3]=xn,Pe[bt+0]=Ut,Pe[bt+1]=Dn+xn,Pe[bt+2]=Ln,Pe[bt+3]=xn,Pe[kn+0]=Ut+Ln,Pe[kn+1]=Dn+xn,Pe[kn+2]=Ln,Pe[kn+3]=xn,xt<rt-1&&(at.push(kn,xt+1),at.push(bt,xt+1),at.push(gt,xt+1),at.push(ft,xt+1))}}(5,this.data)},rt.prototype.clear=function(){var Pe;return this.containers=((Pe={})[O]=[],Pe),this},rt.prototype.point=function(Pe,at){var xt=this.containers[O],He=0,ft=0;do{this.containers[He]&&xt.push.apply(xt,D([],Y(this.containers[He]),!1)),He=4*He+4*$(Pe,at,this.data[He+0],this.data[He+1],this.data[He+2],this.data[He+3]),ft++}while(ft<=5);return xt},rt.prototype.rectangle=function(Pe,at,xt,He,ft){var gt,bt=this.lastRectangle;return bt&&Pe===bt.x1&&xt===bt.x2&&at===bt.y1&&He===bt.y2&&ft===bt.height||(this.lastRectangle={x1:Pe,y1:at,x2:xt,y2:He,height:ft},Oe(this.lastRectangle)||(this.lastRectangle=re(this.lastRectangle)),this.cache=function Ue(rt,Pe,at,xt,He,ft,gt){for(var Ut,bt=[0,0],kn=[];bt.length;){var Dn=bt.pop(),Jt=bt.pop();if((Ut=at[Jt])&&(0,B.default)(kn,Ut),!(Dn>=rt)){var nn=4*Jt+4,Ln=4*Jt+8,xn=4*Jt+12,Cn=4*Jt+16,yn=z(xt,He,ft,gt,Pe[nn+0],Pe[nn+1],Pe[nn+2],Pe[nn+3]),je=z(xt,He,ft,gt,Pe[Ln+0],Pe[Ln+1],Pe[Ln+2],Pe[Ln+3]),be=z(xt,He,ft,gt,Pe[xn+0],Pe[xn+1],Pe[xn+2],Pe[xn+3]),Dt=z(xt,He,ft,gt,Pe[Cn+0],Pe[Cn+1],Pe[Cn+2],Pe[Cn+3]);yn&&bt.push(nn,Dn+1),je&&bt.push(Ln,Dn+1),be&&bt.push(xn,Dn+1),Dt&&bt.push(Cn,Dn+1)}}return kn}(5,this.data,this.containers,Pe,at,Math.abs(Pe-xt)||Math.abs(at-He),ft),(gt=this.cache).push.apply(gt,D([],Y(this.containers[O]),!1))),this.cache},rt}();Ce.default=Re},756:function(Be,Ce,V){"use strict";var Y=this&&this.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.Sigma=Ce.MouseCaptor=Ce.QuadTree=Ce.Camera=void 0;var D=Y(V(4870));Ce.Sigma=D.default;var H=Y(V(2002));Ce.Camera=H.default;var B=Y(V(3650));Ce.QuadTree=B.default;var W=Y(V(2465));Ce.MouseCaptor=W.default,Ce.default=D.default},1285:(Be,Ce)=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.default=function V(Y,D,H,B,W){var P=W.edgeLabelSize,O=W.edgeLabelFont,q=W.edgeLabelWeight,J=D.label;if(J){Y.fillStyle=W.edgeLabelColor.attribute?D[W.edgeLabelColor.attribute]||W.edgeLabelColor.color||"#000":W.edgeLabelColor.color,Y.font="".concat(q," ").concat(P,"px ").concat(O);var oe=H.size,se=B.size,Q=H.x,U=H.y,ae=B.x,xe=B.y,Oe=(Q+ae)/2,re=(U+xe)/2,ue=ae-Q,z=xe-U,$=Math.sqrt(ue*ue+z*z);if(!($<oe+se)){Oe=((Q+=ue*oe/$)+(ae-=ue*se/$))/2,re=((U+=z*oe/$)+(xe-=z*se/$))/2,ue=ae-Q,z=xe-U,$=Math.sqrt(ue*ue+z*z);var Ue,ne=Y.measureText(J).width;if(ne>$){for(ne=Y.measureText(J+="\u2026").width;ne>$&&J.length>1;)J=J.slice(0,-2)+"\u2026",ne=Y.measureText(J).width;if(J.length<4)return}Ue=ue>0?z>0?Math.acos(ue/$):Math.asin(z/$):z>0?Math.acos(ue/$)+Math.PI:Math.asin(ue/$)+Math.PI/2,Y.save(),Y.translate(Oe,re),Y.rotate(Ue),Y.fillText(J,-ne/2,D.size/2+P),Y.restore()}}}},4997:function(Be,Ce,V){"use strict";var Y=this&&this.__importDefault||function(B){return B&&B.__esModule?B:{default:B}};Object.defineProperty(Ce,"__esModule",{value:!0});var D=Y(V(9597));Ce.default=function H(B,W,P){var O=P.labelSize,q=P.labelFont;if(B.font="".concat(P.labelWeight," ").concat(O,"px ").concat(q),B.fillStyle="#FFF",B.shadowOffsetX=0,B.shadowOffsetY=0,B.shadowBlur=8,B.shadowColor="#000","string"==typeof W.label){var oe=B.measureText(W.label).width,se=Math.round(oe+5),Q=Math.round(O+4),U=Math.max(W.size,O/2)+2,ae=Math.asin(Q/2/U),xe=Math.sqrt(Math.abs(Math.pow(U,2)-Math.pow(Q/2,2)));B.beginPath(),B.moveTo(W.x+xe,W.y+Q/2),B.lineTo(W.x+U+se,W.y+Q/2),B.lineTo(W.x+U+se,W.y-Q/2),B.lineTo(W.x+xe,W.y-Q/2),B.arc(W.x,W.y,U,ae,-ae),B.closePath(),B.fill()}else B.beginPath(),B.arc(W.x,W.y,W.size+2,0,2*Math.PI),B.closePath(),B.fill();B.shadowOffsetX=0,B.shadowOffsetY=0,B.shadowBlur=0,(0,D.default)(B,W,P)}},9597:(Be,Ce)=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.default=function V(Y,D,H){if(D.label){var B=H.labelSize,W=H.labelFont,P=H.labelWeight;Y.fillStyle=H.labelColor.attribute?D[H.labelColor.attribute]||H.labelColor.color||"#000":H.labelColor.color,Y.font="".concat(P," ").concat(B,"px ").concat(W),Y.fillText(D.label,D.x+D.size+3,D.y+B/3)}}},6160:function(Be,Ce,V){"use strict";var W,Y=this&&this.__extends||(W=function(P,O){return(W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,te){q.__proto__=te}||function(q,te){for(var J in te)Object.prototype.hasOwnProperty.call(te,J)&&(q[J]=te[J])})(P,O)},function(P,O){if("function"!=typeof O&&null!==O)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function q(){this.constructor=P}W(P,O),P.prototype=null===O?Object.create(O):(q.prototype=O.prototype,new q)});Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.createEdgeCompoundProgram=Ce.AbstractEdgeProgram=void 0;var H=function(W){function P(O,q,te,J,oe){return W.call(this,O,q,te,J,oe)||this}return Y(P,W),P}(V(727).AbstractProgram);Ce.AbstractEdgeProgram=H,Ce.createEdgeCompoundProgram=function B(W){return function(){function P(O,q){this.programs=W.map(function(te){return new te(O,q)})}return P.prototype.bufferData=function(){this.programs.forEach(function(O){return O.bufferData()})},P.prototype.allocate=function(O){this.programs.forEach(function(q){return q.allocate(O)})},P.prototype.bind=function(){},P.prototype.computeIndices=function(){this.programs.forEach(function(O){return O.computeIndices()})},P.prototype.render=function(O){this.programs.forEach(function(q){q.bind(),q.bufferData(),q.render(O)})},P.prototype.process=function(O,q,te,J,oe){this.programs.forEach(function(se){return se.process(O,q,te,J,oe)})},P}()}},4588:function(Be,Ce,V){"use strict";var W,Y=this&&this.__extends||(W=function(P,O){return(W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,te){q.__proto__=te}||function(q,te){for(var J in te)Object.prototype.hasOwnProperty.call(te,J)&&(q[J]=te[J])})(P,O)},function(P,O){if("function"!=typeof O&&null!==O)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function q(){this.constructor=P}W(P,O),P.prototype=null===O?Object.create(O):(q.prototype=O.prototype,new q)});Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.createNodeCompoundProgram=Ce.AbstractNodeProgram=void 0;var H=function(W){function P(O,q,te,J,oe){var se=W.call(this,O,q,te,J,oe)||this;se.positionLocation=O.getAttribLocation(se.program,"a_position"),se.sizeLocation=O.getAttribLocation(se.program,"a_size"),se.colorLocation=O.getAttribLocation(se.program,"a_color");var Q=O.getUniformLocation(se.program,"u_matrix");if(null===Q)throw new Error("AbstractNodeProgram: error while getting matrixLocation");se.matrixLocation=Q;var U=O.getUniformLocation(se.program,"u_ratio");if(null===U)throw new Error("AbstractNodeProgram: error while getting ratioLocation");se.ratioLocation=U;var ae=O.getUniformLocation(se.program,"u_scale");if(null===ae)throw new Error("AbstractNodeProgram: error while getting scaleLocation");return se.scaleLocation=ae,se}return Y(P,W),P.prototype.bind=function(){var O=this.gl;O.enableVertexAttribArray(this.positionLocation),O.enableVertexAttribArray(this.sizeLocation),O.enableVertexAttribArray(this.colorLocation),O.vertexAttribPointer(this.positionLocation,2,O.FLOAT,!1,this.attributes*Float32Array.BYTES_PER_ELEMENT,0),O.vertexAttribPointer(this.sizeLocation,1,O.FLOAT,!1,this.attributes*Float32Array.BYTES_PER_ELEMENT,8),O.vertexAttribPointer(this.colorLocation,4,O.UNSIGNED_BYTE,!0,this.attributes*Float32Array.BYTES_PER_ELEMENT,12)},P}(V(727).AbstractProgram);Ce.AbstractNodeProgram=H,Ce.createNodeCompoundProgram=function B(W){return function(){function P(O,q){this.programs=W.map(function(te){return new te(O,q)})}return P.prototype.bufferData=function(){this.programs.forEach(function(O){return O.bufferData()})},P.prototype.allocate=function(O){this.programs.forEach(function(q){return q.allocate(O)})},P.prototype.bind=function(){},P.prototype.render=function(O){this.programs.forEach(function(q){q.bind(),q.bufferData(),q.render(O)})},P.prototype.process=function(O,q,te){this.programs.forEach(function(J){return J.process(O,q,te)})},P}()}},727:(Be,Ce,V)=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.AbstractProgram=void 0;var Y=V(5166),D=function(){function H(B,W,P,O,q){this.array=new Float32Array,this.points=O,this.attributes=q,this.gl=B,this.vertexShaderSource=W,this.fragmentShaderSource=P;var te=B.createBuffer();if(null===te)throw new Error("AbstractProgram: error while creating the buffer");this.buffer=te,B.bindBuffer(B.ARRAY_BUFFER,this.buffer),this.vertexShader=(0,Y.loadVertexShader)(B,this.vertexShaderSource),this.fragmentShader=(0,Y.loadFragmentShader)(B,this.fragmentShaderSource),this.program=(0,Y.loadProgram)(B,[this.vertexShader,this.fragmentShader])}return H.prototype.bufferData=function(){var B=this.gl;B.bufferData(B.ARRAY_BUFFER,this.array,B.DYNAMIC_DRAW)},H.prototype.allocate=function(B){this.array=new Float32Array(this.points*this.attributes*B)},H.prototype.hasNothingToRender=function(){return 0===this.array.length},H}();Ce.AbstractProgram=D},1391:function(Be,Ce,V){"use strict";var Y=this&&this.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(Ce,"__esModule",{value:!0});var D=V(6160),H=Y(V(1034)),B=Y(V(2542)),W=(0,D.createEdgeCompoundProgram)([B.default,H.default]);Ce.default=W},1034:function(Be,Ce,V){"use strict";var oe,Y=this&&this.__extends||(oe=function(se,Q){return(oe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,ae){U.__proto__=ae}||function(U,ae){for(var xe in ae)Object.prototype.hasOwnProperty.call(ae,xe)&&(U[xe]=ae[xe])})(se,Q)},function(se,Q){if("function"!=typeof Q&&null!==Q)throw new TypeError("Class extends value "+String(Q)+" is not a constructor or null");function U(){this.constructor=se}oe(se,Q),se.prototype=null===Q?Object.create(Q):(U.prototype=Q.prototype,new U)}),D=this&&this.__importDefault||function(oe){return oe&&oe.__esModule?oe:{default:oe}};Object.defineProperty(Ce,"__esModule",{value:!0});var H=V(1699),B=D(V(4647)),W=D(V(2018)),J=function(oe){function se(Q){var U=oe.call(this,Q,B.default,W.default,3,9)||this;U.positionLocation=Q.getAttribLocation(U.program,"a_position"),U.colorLocation=Q.getAttribLocation(U.program,"a_color"),U.normalLocation=Q.getAttribLocation(U.program,"a_normal"),U.radiusLocation=Q.getAttribLocation(U.program,"a_radius"),U.barycentricLocation=Q.getAttribLocation(U.program,"a_barycentric");var ae=Q.getUniformLocation(U.program,"u_matrix");if(null===ae)throw new Error("EdgeArrowHeadProgram: error while getting matrixLocation");U.matrixLocation=ae;var xe=Q.getUniformLocation(U.program,"u_sqrtZoomRatio");if(null===xe)throw new Error("EdgeArrowHeadProgram: error while getting sqrtZoomRatioLocation");U.sqrtZoomRatioLocation=xe;var Oe=Q.getUniformLocation(U.program,"u_correctionRatio");if(null===Oe)throw new Error("EdgeArrowHeadProgram: error while getting correctionRatioLocation");return U.correctionRatioLocation=Oe,U.bind(),U}return Y(se,oe),se.prototype.bind=function(){var Q=this.gl;Q.enableVertexAttribArray(this.positionLocation),Q.enableVertexAttribArray(this.normalLocation),Q.enableVertexAttribArray(this.radiusLocation),Q.enableVertexAttribArray(this.colorLocation),Q.enableVertexAttribArray(this.barycentricLocation),Q.vertexAttribPointer(this.positionLocation,2,Q.FLOAT,!1,9*Float32Array.BYTES_PER_ELEMENT,0),Q.vertexAttribPointer(this.normalLocation,2,Q.FLOAT,!1,9*Float32Array.BYTES_PER_ELEMENT,8),Q.vertexAttribPointer(this.radiusLocation,1,Q.FLOAT,!1,9*Float32Array.BYTES_PER_ELEMENT,16),Q.vertexAttribPointer(this.colorLocation,4,Q.UNSIGNED_BYTE,!0,9*Float32Array.BYTES_PER_ELEMENT,20),Q.vertexAttribPointer(this.barycentricLocation,3,Q.FLOAT,!1,9*Float32Array.BYTES_PER_ELEMENT,24)},se.prototype.computeIndices=function(){},se.prototype.process=function(Q,U,ae,xe,Oe){if(xe)for(var re=27*Oe,ue=re+27;re<ue;re++)this.array[re]=0;else{var z=ae.size||1,$=U.size||1,ne=Q.x,ge=Q.y,Ue=U.x,Re=U.y,rt=(0,H.floatColor)(ae.color),Pe=Ue-ne,at=Re-ge,xt=Pe*Pe+at*at,He=0,ft=0;xt&&(He=-at*(xt=1/Math.sqrt(xt))*z,ft=Pe*xt*z);var gt=27*Oe,bt=this.array;bt[gt++]=Ue,bt[gt++]=Re,bt[gt++]=-He,bt[gt++]=-ft,bt[gt++]=$,bt[gt++]=rt,bt[gt++]=1,bt[gt++]=0,bt[gt++]=0,bt[gt++]=Ue,bt[gt++]=Re,bt[gt++]=-He,bt[gt++]=-ft,bt[gt++]=$,bt[gt++]=rt,bt[gt++]=0,bt[gt++]=1,bt[gt++]=0,bt[gt++]=Ue,bt[gt++]=Re,bt[gt++]=-He,bt[gt++]=-ft,bt[gt++]=$,bt[gt++]=rt,bt[gt++]=0,bt[gt++]=0,bt[gt]=1}},se.prototype.render=function(Q){if(!this.hasNothingToRender()){var U=this.gl;U.useProgram(this.program),U.uniformMatrix3fv(this.matrixLocation,!1,Q.matrix),U.uniform1f(this.sqrtZoomRatioLocation,Math.sqrt(Q.ratio)),U.uniform1f(this.correctionRatioLocation,Q.correctionRatio),U.drawArrays(U.TRIANGLES,0,this.array.length/9)}},se}(V(6160).AbstractEdgeProgram);Ce.default=J},2542:function(Be,Ce,V){"use strict";var oe,Y=this&&this.__extends||(oe=function(se,Q){return(oe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,ae){U.__proto__=ae}||function(U,ae){for(var xe in ae)Object.prototype.hasOwnProperty.call(ae,xe)&&(U[xe]=ae[xe])})(se,Q)},function(se,Q){if("function"!=typeof Q&&null!==Q)throw new TypeError("Class extends value "+String(Q)+" is not a constructor or null");function U(){this.constructor=se}oe(se,Q),se.prototype=null===Q?Object.create(Q):(U.prototype=Q.prototype,new U)}),D=this&&this.__importDefault||function(oe){return oe&&oe.__esModule?oe:{default:oe}};Object.defineProperty(Ce,"__esModule",{value:!0});var H=V(6160),B=V(1699),W=D(V(2529)),P=D(V(427)),J=function(oe){function se(Q){var U=oe.call(this,Q,W.default,P.default,4,6)||this,ae=Q.createBuffer();if(null===ae)throw new Error("EdgeClampedProgram: error while getting resolutionLocation");U.indicesBuffer=ae,U.positionLocation=Q.getAttribLocation(U.program,"a_position"),U.colorLocation=Q.getAttribLocation(U.program,"a_color"),U.normalLocation=Q.getAttribLocation(U.program,"a_normal"),U.radiusLocation=Q.getAttribLocation(U.program,"a_radius");var xe=Q.getUniformLocation(U.program,"u_matrix");if(null===xe)throw new Error("EdgeClampedProgram: error while getting matrixLocation");U.matrixLocation=xe;var Oe=Q.getUniformLocation(U.program,"u_sqrtZoomRatio");if(null===Oe)throw new Error("EdgeClampedProgram: error while getting cameraRatioLocation");U.sqrtZoomRatioLocation=Oe;var re=Q.getUniformLocation(U.program,"u_correctionRatio");if(null===re)throw new Error("EdgeClampedProgram: error while getting viewportRatioLocation");return U.correctionRatioLocation=re,U.canUse32BitsIndices=(0,B.canUse32BitsIndices)(Q),U.IndicesArray=U.canUse32BitsIndices?Uint32Array:Uint16Array,U.indicesArray=new U.IndicesArray,U.indicesType=U.canUse32BitsIndices?Q.UNSIGNED_INT:Q.UNSIGNED_SHORT,U.bind(),U}return Y(se,oe),se.prototype.bind=function(){var Q=this.gl;Q.bindBuffer(Q.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),Q.enableVertexAttribArray(this.positionLocation),Q.enableVertexAttribArray(this.normalLocation),Q.enableVertexAttribArray(this.colorLocation),Q.enableVertexAttribArray(this.radiusLocation),Q.vertexAttribPointer(this.positionLocation,2,Q.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,0),Q.vertexAttribPointer(this.normalLocation,2,Q.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,8),Q.vertexAttribPointer(this.colorLocation,4,Q.UNSIGNED_BYTE,!0,6*Float32Array.BYTES_PER_ELEMENT,16),Q.vertexAttribPointer(this.radiusLocation,1,Q.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,20)},se.prototype.process=function(Q,U,ae,xe,Oe){if(xe)for(var re=24*Oe,ue=re+24;re<ue;re++)this.array[re]=0;else{var z=ae.size||1,$=Q.x,ne=Q.y,ge=U.x,Ue=U.y,Re=U.size||1,rt=(0,B.floatColor)(ae.color),Pe=ge-$,at=Ue-ne,xt=Pe*Pe+at*at,He=0,ft=0;xt&&(He=-at*(xt=1/Math.sqrt(xt))*z,ft=Pe*xt*z);var gt=24*Oe,bt=this.array;bt[gt++]=$,bt[gt++]=ne,bt[gt++]=He,bt[gt++]=ft,bt[gt++]=rt,bt[gt++]=0,bt[gt++]=$,bt[gt++]=ne,bt[gt++]=-He,bt[gt++]=-ft,bt[gt++]=rt,bt[gt++]=0,bt[gt++]=ge,bt[gt++]=Ue,bt[gt++]=He,bt[gt++]=ft,bt[gt++]=rt,bt[gt++]=Re,bt[gt++]=ge,bt[gt++]=Ue,bt[gt++]=-He,bt[gt++]=-ft,bt[gt++]=rt,bt[gt]=-Re}},se.prototype.computeIndices=function(){for(var Q=this.array.length/6,ae=new this.IndicesArray(Q+Q/2),xe=0,Oe=0;xe<Q;xe+=4)ae[Oe++]=xe,ae[Oe++]=xe+1,ae[Oe++]=xe+2,ae[Oe++]=xe+2,ae[Oe++]=xe+1,ae[Oe++]=xe+3;this.indicesArray=ae},se.prototype.bufferData=function(){oe.prototype.bufferData.call(this);var Q=this.gl;Q.bufferData(Q.ELEMENT_ARRAY_BUFFER,this.indicesArray,Q.STATIC_DRAW)},se.prototype.render=function(Q){if(!this.hasNothingToRender()){var U=this.gl;U.useProgram(this.program),U.uniformMatrix3fv(this.matrixLocation,!1,Q.matrix),U.uniform1f(this.sqrtZoomRatioLocation,Math.sqrt(Q.ratio)),U.uniform1f(this.correctionRatioLocation,Q.correctionRatio),U.drawElements(U.TRIANGLES,this.indicesArray.length,this.indicesType,0)}},se}(H.AbstractEdgeProgram);Ce.default=J},8959:function(Be,Ce,V){"use strict";var oe,Y=this&&this.__extends||(oe=function(se,Q){return(oe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,ae){U.__proto__=ae}||function(U,ae){for(var xe in ae)Object.prototype.hasOwnProperty.call(ae,xe)&&(U[xe]=ae[xe])})(se,Q)},function(se,Q){if("function"!=typeof Q&&null!==Q)throw new TypeError("Class extends value "+String(Q)+" is not a constructor or null");function U(){this.constructor=se}oe(se,Q),se.prototype=null===Q?Object.create(Q):(U.prototype=Q.prototype,new U)}),D=this&&this.__importDefault||function(oe){return oe&&oe.__esModule?oe:{default:oe}};Object.defineProperty(Ce,"__esModule",{value:!0});var H=V(1699),B=D(V(3364)),W=D(V(427)),J=function(oe){function se(Q){var U=oe.call(this,Q,B.default,W.default,4,5)||this,ae=Q.createBuffer();if(null===ae)throw new Error("EdgeProgram: error while creating indicesBuffer");U.indicesBuffer=ae,U.positionLocation=Q.getAttribLocation(U.program,"a_position"),U.colorLocation=Q.getAttribLocation(U.program,"a_color"),U.normalLocation=Q.getAttribLocation(U.program,"a_normal");var xe=Q.getUniformLocation(U.program,"u_matrix");if(null===xe)throw new Error("EdgeProgram: error while getting matrixLocation");U.matrixLocation=xe;var Oe=Q.getUniformLocation(U.program,"u_correctionRatio");if(null===Oe)throw new Error("EdgeProgram: error while getting correctionRatioLocation");U.correctionRatioLocation=Oe;var re=Q.getUniformLocation(U.program,"u_sqrtZoomRatio");if(null===re)throw new Error("EdgeProgram: error while getting sqrtZoomRatioLocation");return U.sqrtZoomRatioLocation=re,U.canUse32BitsIndices=(0,H.canUse32BitsIndices)(Q),U.IndicesArray=U.canUse32BitsIndices?Uint32Array:Uint16Array,U.indicesArray=new U.IndicesArray,U.indicesType=U.canUse32BitsIndices?Q.UNSIGNED_INT:Q.UNSIGNED_SHORT,U.bind(),U}return Y(se,oe),se.prototype.bind=function(){var Q=this.gl;Q.bindBuffer(Q.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),Q.enableVertexAttribArray(this.positionLocation),Q.enableVertexAttribArray(this.normalLocation),Q.enableVertexAttribArray(this.colorLocation),Q.vertexAttribPointer(this.positionLocation,2,Q.FLOAT,!1,5*Float32Array.BYTES_PER_ELEMENT,0),Q.vertexAttribPointer(this.normalLocation,2,Q.FLOAT,!1,5*Float32Array.BYTES_PER_ELEMENT,8),Q.vertexAttribPointer(this.colorLocation,4,Q.UNSIGNED_BYTE,!0,5*Float32Array.BYTES_PER_ELEMENT,16)},se.prototype.computeIndices=function(){for(var Q=this.array.length/5,ae=new this.IndicesArray(Q+Q/2),xe=0,Oe=0;xe<Q;xe+=4)ae[Oe++]=xe,ae[Oe++]=xe+1,ae[Oe++]=xe+2,ae[Oe++]=xe+2,ae[Oe++]=xe+1,ae[Oe++]=xe+3;this.indicesArray=ae},se.prototype.bufferData=function(){oe.prototype.bufferData.call(this);var Q=this.gl;Q.bufferData(Q.ELEMENT_ARRAY_BUFFER,this.indicesArray,Q.STATIC_DRAW)},se.prototype.process=function(Q,U,ae,xe,Oe){if(xe)for(var re=20*Oe,ue=re+20;re<ue;re++)this.array[re]=0;else{var z=ae.size||1,$=Q.x,ne=Q.y,ge=U.x,Ue=U.y,Re=(0,H.floatColor)(ae.color),rt=ge-$,Pe=Ue-ne,at=rt*rt+Pe*Pe,xt=0,He=0;at&&(xt=-Pe*(at=1/Math.sqrt(at))*z,He=rt*at*z);var ft=20*Oe,gt=this.array;gt[ft++]=$,gt[ft++]=ne,gt[ft++]=xt,gt[ft++]=He,gt[ft++]=Re,gt[ft++]=$,gt[ft++]=ne,gt[ft++]=-xt,gt[ft++]=-He,gt[ft++]=Re,gt[ft++]=ge,gt[ft++]=Ue,gt[ft++]=xt,gt[ft++]=He,gt[ft++]=Re,gt[ft++]=ge,gt[ft++]=Ue,gt[ft++]=-xt,gt[ft++]=-He,gt[ft]=Re}},se.prototype.render=function(Q){if(!this.hasNothingToRender()){var U=this.gl;U.useProgram(this.program),U.uniformMatrix3fv(this.matrixLocation,!1,Q.matrix),U.uniform1f(this.sqrtZoomRatioLocation,Math.sqrt(Q.ratio)),U.uniform1f(this.correctionRatioLocation,Q.correctionRatio),U.drawElements(U.TRIANGLES,this.indicesArray.length,this.indicesType,0)}},se}(V(6160).AbstractEdgeProgram);Ce.default=J},105:function(Be,Ce,V){"use strict";var J,Y=this&&this.__extends||(J=function(oe,se){return(J=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Q,U){Q.__proto__=U}||function(Q,U){for(var ae in U)Object.prototype.hasOwnProperty.call(U,ae)&&(Q[ae]=U[ae])})(oe,se)},function(oe,se){if("function"!=typeof se&&null!==se)throw new TypeError("Class extends value "+String(se)+" is not a constructor or null");function Q(){this.constructor=oe}J(oe,se),oe.prototype=null===se?Object.create(se):(Q.prototype=se.prototype,new Q)}),D=this&&this.__importDefault||function(J){return J&&J.__esModule?J:{default:J}};Object.defineProperty(Ce,"__esModule",{value:!0});var H=V(1699),B=D(V(7768)),W=D(V(2181)),te=function(J){function oe(se){var Q=J.call(this,se,B.default,W.default,1,4)||this;return Q.bind(),Q}return Y(oe,J),oe.prototype.process=function(se,Q,U){var ae=this.array,xe=1*U*4;if(Q)return ae[xe++]=0,ae[xe++]=0,ae[xe++]=0,void(ae[xe++]=0);var Oe=(0,H.floatColor)(se.color);ae[xe++]=se.x,ae[xe++]=se.y,ae[xe++]=se.size,ae[xe]=Oe},oe.prototype.render=function(se){if(!this.hasNothingToRender()){var Q=this.gl;Q.useProgram(this.program),Q.uniform1f(this.ratioLocation,1/Math.sqrt(se.ratio)),Q.uniform1f(this.scaleLocation,se.scalingRatio),Q.uniformMatrix3fv(this.matrixLocation,!1,se.matrix),Q.drawArrays(Q.POINTS,0,this.array.length/4)}},oe}(V(4588).AbstractNodeProgram);Ce.default=te},2018:Be=>{(()=>{"use strict";var Ce={d:(D,H)=>{for(var B in H)Ce.o(H,B)&&!Ce.o(D,B)&&Object.defineProperty(D,B,{enumerable:!0,get:H[B]})},o:(D,H)=>Object.prototype.hasOwnProperty.call(D,H),r:D=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(D,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(D,"__esModule",{value:!0})}},V={};Ce.r(V),Ce.d(V,{default:()=>Y});const Y="precision mediump float;\n\nvarying vec4 v_color;\n\nvoid main(void) {\n  gl_FragColor = v_color;\n}\n";Be.exports=V})()},4647:Be=>{(()=>{"use strict";var Ce={d:(D,H)=>{for(var B in H)Ce.o(H,B)&&!Ce.o(D,B)&&Object.defineProperty(D,B,{enumerable:!0,get:H[B]})},o:(D,H)=>Object.prototype.hasOwnProperty.call(D,H),r:D=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(D,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(D,"__esModule",{value:!0})}},V={};Ce.r(V),Ce.d(V,{default:()=>Y});const Y="attribute vec2 a_position;\nattribute vec2 a_normal;\nattribute float a_radius;\nattribute vec4 a_color;\nattribute vec3 a_barycentric;\n\nuniform mat3 u_matrix;\nuniform float u_sqrtZoomRatio;\nuniform float u_correctionRatio;\n\nvarying vec4 v_color;\n\nconst float minThickness = 1.7;\nconst float bias = 255.0 / 254.0;\nconst float arrowHeadWidthLengthRatio = 0.66;\nconst float arrowHeadLengthThicknessRatio = 2.5;\n\nvoid main() {\n  float normalLength = length(a_normal);\n  vec2 unitNormal = a_normal / normalLength;\n\n  // These first computations are taken from edge.vert.glsl and\n  // edge.clamped.vert.glsl. Please read it to get better comments on what's\n  // happening:\n  float pixelsThickness = max(normalLength, minThickness * u_sqrtZoomRatio);\n  float webGLThickness = pixelsThickness * u_correctionRatio;\n  float adaptedWebGLThickness = webGLThickness * u_sqrtZoomRatio;\n  float adaptedWebGLNodeRadius = a_radius * 2.0 * u_correctionRatio * u_sqrtZoomRatio;\n  float adaptedWebGLArrowHeadLength = adaptedWebGLThickness * 2.0 * arrowHeadLengthThicknessRatio;\n  float adaptedWebGLArrowHeadHalfWidth = adaptedWebGLArrowHeadLength * arrowHeadWidthLengthRatio / 2.0;\n\n  float da = a_barycentric.x;\n  float db = a_barycentric.y;\n  float dc = a_barycentric.z;\n\n  vec2 delta = vec2(\n      da * (adaptedWebGLNodeRadius * unitNormal.y)\n    + db * ((adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.y + adaptedWebGLArrowHeadHalfWidth * unitNormal.x)\n    + dc * ((adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.y - adaptedWebGLArrowHeadHalfWidth * unitNormal.x),\n\n      da * (-adaptedWebGLNodeRadius * unitNormal.x)\n    + db * (-(adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.x + adaptedWebGLArrowHeadHalfWidth * unitNormal.y)\n    + dc * (-(adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.x - adaptedWebGLArrowHeadHalfWidth * unitNormal.y)\n  );\n\n  vec2 position = (u_matrix * vec3(a_position + delta, 1)).xy;\n\n  gl_Position = vec4(position, 0, 1);\n\n  // Extract the color:\n  v_color = a_color;\n  v_color.a *= bias;\n}\n";Be.exports=V})()},2529:Be=>{(()=>{"use strict";var Ce={d:(D,H)=>{for(var B in H)Ce.o(H,B)&&!Ce.o(D,B)&&Object.defineProperty(D,B,{enumerable:!0,get:H[B]})},o:(D,H)=>Object.prototype.hasOwnProperty.call(D,H),r:D=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(D,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(D,"__esModule",{value:!0})}},V={};Ce.r(V),Ce.d(V,{default:()=>Y});const Y="attribute vec4 a_color;\nattribute vec2 a_normal;\nattribute vec2 a_position;\nattribute float a_radius;\n\nuniform mat3 u_matrix;\nuniform float u_sqrtZoomRatio;\nuniform float u_correctionRatio;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\n\nconst float minThickness = 1.7;\nconst float bias = 255.0 / 254.0;\nconst float arrowHeadLengthThicknessRatio = 2.5;\n\nvoid main() {\n  float normalLength = length(a_normal);\n  vec2 unitNormal = a_normal / normalLength;\n\n  // These first computations are taken from edge.vert.glsl. Please read it to\n  // get better comments on what's happening:\n  float pixelsThickness = max(normalLength, minThickness * u_sqrtZoomRatio);\n  float webGLThickness = pixelsThickness * u_correctionRatio;\n  float adaptedWebGLThickness = webGLThickness * u_sqrtZoomRatio;\n\n  // Here, we move the point to leave space for the arrow head:\n  float direction = sign(a_radius);\n  float adaptedWebGLNodeRadius = direction * a_radius * 2.0 * u_correctionRatio * u_sqrtZoomRatio;\n  float adaptedWebGLArrowHeadLength = adaptedWebGLThickness * 2.0 * arrowHeadLengthThicknessRatio;\n\n  vec2 compensationVector = vec2(-direction * unitNormal.y, direction * unitNormal.x) * (adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength);\n\n  // Here is the proper position of the vertex\n  gl_Position = vec4((u_matrix * vec3(a_position + unitNormal * adaptedWebGLThickness + compensationVector, 1)).xy, 0, 1);\n\n  v_thickness = webGLThickness / u_sqrtZoomRatio;\n\n  v_normal = unitNormal;\n  v_color = a_color;\n  v_color.a *= bias;\n}\n";Be.exports=V})()},427:Be=>{(()=>{"use strict";var Ce={d:(D,H)=>{for(var B in H)Ce.o(H,B)&&!Ce.o(D,B)&&Object.defineProperty(D,B,{enumerable:!0,get:H[B]})},o:(D,H)=>Object.prototype.hasOwnProperty.call(D,H),r:D=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(D,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(D,"__esModule",{value:!0})}},V={};Ce.r(V),Ce.d(V,{default:()=>Y});const Y="precision mediump float;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\n\nconst float feather = 0.001;\nconst vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\n\nvoid main(void) {\n  float dist = length(v_normal) * v_thickness;\n\n  float t = smoothstep(\n    v_thickness - feather,\n    v_thickness,\n    dist\n  );\n\n  gl_FragColor = mix(v_color, transparent, t);\n}\n";Be.exports=V})()},3364:Be=>{(()=>{"use strict";var Ce={d:(D,H)=>{for(var B in H)Ce.o(H,B)&&!Ce.o(D,B)&&Object.defineProperty(D,B,{enumerable:!0,get:H[B]})},o:(D,H)=>Object.prototype.hasOwnProperty.call(D,H),r:D=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(D,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(D,"__esModule",{value:!0})}},V={};Ce.r(V),Ce.d(V,{default:()=>Y});const Y='attribute vec4 a_color;\nattribute vec2 a_normal;\nattribute vec2 a_position;\n\nuniform mat3 u_matrix;\nuniform float u_sqrtZoomRatio;\nuniform float u_correctionRatio;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\n\nconst float minThickness = 1.7;\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n  float normalLength = length(a_normal);\n  vec2 unitNormal = a_normal / normalLength;\n\n  // We require edges to be at least `minThickness` pixels thick *on screen*\n  // (so we need to compensate the SQRT zoom ratio):\n  float pixelsThickness = max(normalLength, minThickness * u_sqrtZoomRatio);\n\n  // Then, we need to retrieve the normalized thickness of the edge in the WebGL\n  // referential (in a ([0, 1], [0, 1]) space), using our "magic" correction\n  // ratio:\n  float webGLThickness = pixelsThickness * u_correctionRatio;\n\n  // Finally, we adapt the edge thickness to the "SQRT rule" in sigma (so that\n  // items are not too big when zoomed in, and not too small when zoomed out).\n  // The exact computation should be `adapted = value * zoom / sqrt(zoom)`, but\n  // it\'s simpler like this:\n  float adaptedWebGLThickness = webGLThickness * u_sqrtZoomRatio;\n\n  // Here is the proper position of the vertex\n  gl_Position = vec4((u_matrix * vec3(a_position + unitNormal * adaptedWebGLThickness, 1)).xy, 0, 1);\n\n  // For the fragment shader though, we need a thickness that takes the "magic"\n  // correction ratio into account (as in webGLThickness), but so that the\n  // antialiasint effect does not depend on the zoom level. So here\'s yet\n  // another thickness version:\n  v_thickness = webGLThickness / u_sqrtZoomRatio;\n\n  v_normal = unitNormal;\n  v_color = a_color;\n  v_color.a *= bias;\n}\n';Be.exports=V})()},2181:Be=>{(()=>{"use strict";var Ce={d:(D,H)=>{for(var B in H)Ce.o(H,B)&&!Ce.o(D,B)&&Object.defineProperty(D,B,{enumerable:!0,get:H[B]})},o:(D,H)=>Object.prototype.hasOwnProperty.call(D,H),r:D=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(D,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(D,"__esModule",{value:!0})}},V={};Ce.r(V),Ce.d(V,{default:()=>Y});const Y="precision mediump float;\n\nvarying vec4 v_color;\nvarying float v_border;\n\nconst float radius = 0.5;\nconst vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\n\nvoid main(void) {\n  vec2 m = gl_PointCoord - vec2(0.5, 0.5);\n  float dist = radius - length(m);\n\n  float t = 0.0;\n  if (dist > v_border)\n    t = 1.0;\n  else if (dist > 0.0)\n    t = dist / v_border;\n\n  gl_FragColor = mix(transparent, v_color, t);\n}\n";Be.exports=V})()},7768:Be=>{(()=>{"use strict";var Ce={d:(D,H)=>{for(var B in H)Ce.o(H,B)&&!Ce.o(D,B)&&Object.defineProperty(D,B,{enumerable:!0,get:H[B]})},o:(D,H)=>Object.prototype.hasOwnProperty.call(D,H),r:D=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(D,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(D,"__esModule",{value:!0})}},V={};Ce.r(V),Ce.d(V,{default:()=>Y});const Y="attribute vec2 a_position;\nattribute float a_size;\nattribute vec4 a_color;\n\nuniform float u_ratio;\nuniform float u_scale;\nuniform mat3 u_matrix;\n\nvarying vec4 v_color;\nvarying float v_border;\n\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n  gl_Position = vec4(\n    (u_matrix * vec3(a_position, 1)).xy,\n    0,\n    1\n  );\n\n  // Multiply the point size twice:\n  //  - x SCALING_RATIO to correct the canvas scaling\n  //  - x 2 to correct the formulae\n  gl_PointSize = a_size * u_ratio * u_scale * 2.0;\n\n  v_border = (1.0 / u_ratio) * (0.5 / a_size);\n\n  // Extract the color:\n  v_color = a_color;\n  v_color.a *= bias;\n}\n";Be.exports=V})()},5166:(Be,Ce)=>{"use strict";function V(B,W,P){var q=W.createShader("VERTEX"===B?W.VERTEX_SHADER:W.FRAGMENT_SHADER);if(null===q)throw new Error("loadShader: error while creating the shader");if(W.shaderSource(q,P),W.compileShader(q),!W.getShaderParameter(q,W.COMPILE_STATUS)){var J=W.getShaderInfoLog(q);throw W.deleteShader(q),new Error("loadShader: error while compiling the shader:\n".concat(J,"\n").concat(P))}return q}Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.loadProgram=Ce.loadFragmentShader=Ce.loadVertexShader=void 0,Ce.loadVertexShader=function Y(B,W){return V("VERTEX",B,W)},Ce.loadFragmentShader=function D(B,W){return V("FRAGMENT",B,W)},Ce.loadProgram=function H(B,W){var O,q,P=B.createProgram();if(null===P)throw new Error("loadProgram: error while creating the program.");for(O=0,q=W.length;O<q;O++)B.attachShader(P,W[O]);if(B.linkProgram(P),!B.getProgramParameter(P,B.LINK_STATUS))throw B.deleteProgram(P),new Error("loadProgram: error while linking the program.");return P}},2621:function(Be,Ce,V){"use strict";var Y=this&&this.__importDefault||function(te){return te&&te.__esModule?te:{default:te}};Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.DEFAULT_SETTINGS=Ce.validateSettings=void 0;var D=Y(V(9597)),H=Y(V(4997)),B=Y(V(1285)),W=Y(V(105)),P=Y(V(8959)),O=Y(V(1391));Ce.validateSettings=function q(te){if("number"!=typeof te.labelDensity||te.labelDensity<0)throw new Error("Settings: invalid `labelDensity`. Expecting a positive number.");var J=te.minCameraRatio,oe=te.maxCameraRatio;if("number"==typeof J&&"number"==typeof oe&&oe<J)throw new Error("Settings: invalid camera ratio boundaries. Expecting `maxCameraRatio` to be greater than `minCameraRatio`.")},Ce.DEFAULT_SETTINGS={hideEdgesOnMove:!1,hideLabelsOnMove:!1,renderLabels:!0,renderEdgeLabels:!1,enableEdgeClickEvents:!1,enableEdgeWheelEvents:!1,enableEdgeHoverEvents:!1,defaultNodeColor:"#999",defaultNodeType:"circle",defaultEdgeColor:"#ccc",defaultEdgeType:"line",labelFont:"Arial",labelSize:14,labelWeight:"normal",labelColor:{color:"#000"},edgeLabelFont:"Arial",edgeLabelSize:14,edgeLabelWeight:"normal",edgeLabelColor:{attribute:"color"},stagePadding:30,labelDensity:1,labelGridCellSize:100,labelRenderedSizeThreshold:6,nodeReducer:null,edgeReducer:null,zIndex:!1,minCameraRatio:null,maxCameraRatio:null,labelRenderer:D.default,hoverRenderer:H.default,edgeLabelRenderer:B.default,allowInvalidContainer:!1,nodeProgramClasses:{circle:W.default},edgeProgramClasses:{arrow:O.default,line:P.default}}},4870:function(Be,Ce,V){"use strict";var re,Y=this&&this.__extends||(re=function(ue,z){return(re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,ne){$.__proto__=ne}||function($,ne){for(var ge in ne)Object.prototype.hasOwnProperty.call(ne,ge)&&($[ge]=ne[ge])})(ue,z)},function(ue,z){if("function"!=typeof z&&null!==z)throw new TypeError("Class extends value "+String(z)+" is not a constructor or null");function $(){this.constructor=ue}re(ue,z),ue.prototype=null===z?Object.create(z):($.prototype=z.prototype,new $)}),D=this&&this.__assign||function(){return D=Object.assign||function(re){for(var ue,z=1,$=arguments.length;z<$;z++)for(var ne in ue=arguments[z])Object.prototype.hasOwnProperty.call(ue,ne)&&(re[ne]=ue[ne]);return re},D.apply(this,arguments)},H=this&&this.__values||function(re){var ue="function"==typeof Symbol&&Symbol.iterator,z=ue&&re[ue],$=0;if(z)return z.call(re);if(re&&"number"==typeof re.length)return{next:function(){return re&&$>=re.length&&(re=void 0),{value:re&&re[$++],done:!re}}};throw new TypeError(ue?"Object is not iterable.":"Symbol.iterator is not defined.")},B=this&&this.__importDefault||function(re){return re&&re.__esModule?re:{default:re}};Object.defineProperty(Ce,"__esModule",{value:!0});var W=B(V(2002)),P=B(V(2465)),O=B(V(3650)),q=V(57),te=V(1699),J=V(4942),oe=V(2621),se=B(V(1565)),Q=V(7611),U=V(3180);function ae(re,ue,z){if(!z.hasOwnProperty("x")||!z.hasOwnProperty("y"))throw new Error('Sigma: could not find a valid position (x, y) for node "'.concat(ue,'". All your nodes must have a number "x" and "y". Maybe your forgot to apply a layout or your "nodeReducer" is not returning the correct data?'));return z.color||(z.color=re.defaultNodeColor),!z.label&&""!==z.label&&(z.label=null),z.label=null!=z.label?""+z.label:null,z.size||(z.size=2),z.hasOwnProperty("hidden")||(z.hidden=!1),z.hasOwnProperty("highlighted")||(z.highlighted=!1),z.hasOwnProperty("forceLabel")||(z.forceLabel=!1),(!z.type||""===z.type)&&(z.type=re.defaultNodeType),z.zIndex||(z.zIndex=0),z}function xe(re,ue,z){return z.color||(z.color=re.defaultEdgeColor),z.label||(z.label=""),z.size||(z.size=.5),z.hasOwnProperty("hidden")||(z.hidden=!1),z.hasOwnProperty("forceLabel")||(z.forceLabel=!1),(!z.type||""===z.type)&&(z.type=re.defaultEdgeType),z.zIndex||(z.zIndex=0),z}var Oe=function(re){function ue(z,$,ne){void 0===ne&&(ne={});var ge=re.call(this)||this;if(ge.elements={},ge.canvasContexts={},ge.webGLContexts={},ge.activeListeners={},ge.quadtree=new O.default,ge.labelGrid=new J.LabelGrid,ge.nodeDataCache={},ge.edgeDataCache={},ge.nodesWithForcedLabels=[],ge.edgesWithForcedLabels=[],ge.nodeExtent={x:[0,1],y:[0,1]},ge.matrix=(0,Q.identity)(),ge.invMatrix=(0,Q.identity)(),ge.correctionRatio=1,ge.customBBox=null,ge.normalizationFunction=(0,te.createNormalizationFunction)({x:[0,1],y:[0,1]}),ge.cameraSizeRatio=1,ge.width=0,ge.height=0,ge.pixelRatio=(0,te.getPixelRatio)(),ge.displayedLabels=new Set,ge.highlightedNodes=new Set,ge.hoveredNode=null,ge.hoveredEdge=null,ge.renderFrame=null,ge.renderHighlightedNodesFrame=null,ge.needToProcess=!1,ge.needToSoftProcess=!1,ge.checkEdgesEventsFrame=null,ge.nodePrograms={},ge.hoverNodePrograms={},ge.edgePrograms={},ge.settings=(0,te.assign)({},oe.DEFAULT_SETTINGS,ne),(0,oe.validateSettings)(ge.settings),(0,te.validateGraph)(z),!($ instanceof HTMLElement))throw new Error("Sigma: container should be an html element.");for(var Ue in ge.graph=z,ge.container=$,ge.createWebGLContext("edges",{preserveDrawingBuffer:!0}),ge.createCanvasContext("edgeLabels"),ge.createWebGLContext("nodes"),ge.createCanvasContext("labels"),ge.createCanvasContext("hovers"),ge.createWebGLContext("hoverNodes"),ge.createCanvasContext("mouse"),ge.webGLContexts){var Re=ge.webGLContexts[Ue];Re.blendFunc(Re.ONE,Re.ONE_MINUS_SRC_ALPHA),Re.enable(Re.BLEND)}for(var rt in ge.settings.nodeProgramClasses){var Pe=ge.settings.nodeProgramClasses[rt];ge.nodePrograms[rt]=new Pe(ge.webGLContexts.nodes,ge),ge.hoverNodePrograms[rt]=new Pe(ge.webGLContexts.hoverNodes,ge)}for(var rt in ge.settings.edgeProgramClasses)ge.edgePrograms[rt]=new(0,ge.settings.edgeProgramClasses[rt])(ge.webGLContexts.edges,ge);return ge.resize(),ge.camera=new W.default,ge.bindCameraHandlers(),ge.mouseCaptor=new P.default(ge.elements.mouse,ge),ge.touchCaptor=new se.default(ge.elements.mouse,ge),ge.bindEventHandlers(),ge.bindGraphHandlers(),ge.handleSettingsUpdate(),ge.process(),ge.render(),ge}return Y(ue,re),ue.prototype.createCanvas=function(z){var $=(0,te.createElement)("canvas",{position:"absolute"},{class:"sigma-".concat(z)});return this.elements[z]=$,this.container.appendChild($),$},ue.prototype.createCanvasContext=function(z){var $=this.createCanvas(z);return this.canvasContexts[z]=$.getContext("2d",{preserveDrawingBuffer:!1,antialias:!1}),this},ue.prototype.createWebGLContext=function(z,$){var Ue,ne=this.createCanvas(z),ge=D({preserveDrawingBuffer:!1,antialias:!1},$||{});return(Ue=ne.getContext("webgl2",ge))||(Ue=ne.getContext("webgl",ge)),Ue||(Ue=ne.getContext("experimental-webgl",ge)),this.webGLContexts[z]=Ue,this},ue.prototype.bindCameraHandlers=function(){var z=this;return this.activeListeners.camera=function(){z._scheduleRefresh()},this.camera.on("updated",this.activeListeners.camera),this},ue.prototype.mouseIsOnNode=function(z,$,ne){var ge=z.x,Ue=z.y,Re=$.x,rt=$.y;return ge>Re-ne&&ge<Re+ne&&Ue>rt-ne&&Ue<rt+ne&&Math.sqrt(Math.pow(ge-Re,2)+Math.pow(Ue-rt,2))<ne},ue.prototype.getQuadNodes=function(z){var $=this.viewportToFramedGraph(z);return this.quadtree.point($.x,1-$.y)},ue.prototype.getNodeAtPosition=function(z){for(var $=z.x,ne=z.y,ge=this.getQuadNodes(z),Ue=1/0,Re=null,rt=0,Pe=ge.length;rt<Pe;rt++){var at=ge[rt],xt=this.nodeDataCache[at],He=this.framedGraphToViewport(xt),ft=this.scaleSize(xt.size);if(!xt.hidden&&this.mouseIsOnNode(z,He,ft)){var gt=Math.sqrt(Math.pow($-He.x,2)+Math.pow(ne-He.y,2));gt<Ue&&(Ue=gt,Re=at)}}return Re},ue.prototype.bindEventHandlers=function(){var z=this;this.activeListeners.handleResize=function(){z.needToSoftProcess=!0,z._scheduleRefresh()},window.addEventListener("resize",this.activeListeners.handleResize),this.activeListeners.handleMove=function(ne){var ge={event:ne,preventSigmaDefault:function(){ne.preventSigmaDefault()}},Ue=z.getNodeAtPosition(ne);if(Ue&&z.hoveredNode!==Ue&&!z.nodeDataCache[Ue].hidden)return z.hoveredNode&&z.emit("leaveNode",D(D({},ge),{node:z.hoveredNode})),z.hoveredNode=Ue,z.emit("enterNode",D(D({},ge),{node:Ue})),void z.scheduleHighlightedNodesRender();if(z.hoveredNode){var Re=z.nodeDataCache[z.hoveredNode],rt=z.framedGraphToViewport(Re),Pe=z.scaleSize(Re.size);if(!z.mouseIsOnNode(ne,rt,Pe)){var at=z.hoveredNode;return z.hoveredNode=null,z.emit("leaveNode",D(D({},ge),{node:at})),void z.scheduleHighlightedNodesRender()}}!0===z.settings.enableEdgeHoverEvents?z.checkEdgeHoverEvents(ge):"debounce"===z.settings.enableEdgeHoverEvents&&(z.checkEdgesEventsFrame||(z.checkEdgesEventsFrame=(0,te.requestFrame)(function(){z.checkEdgeHoverEvents(ge),z.checkEdgesEventsFrame=null})))};var $=function(ne){return function(ge){var Ue={event:ge,preventSigmaDefault:function(){ge.preventSigmaDefault()}},rt=ge.original.isFakeSigmaMouseEvent?z.getNodeAtPosition(ge):z.hoveredNode;if(rt)return z.emit("".concat(ne,"Node"),D(D({},Ue),{node:rt}));if("wheel"===ne?z.settings.enableEdgeWheelEvents:z.settings.enableEdgeClickEvents){var Pe=z.getEdgeAtPoint(ge.x,ge.y);if(Pe)return z.emit("".concat(ne,"Edge"),D(D({},Ue),{edge:Pe}))}return z.emit("".concat(ne,"Stage"),Ue)}};return this.activeListeners.handleClick=$("click"),this.activeListeners.handleRightClick=$("rightClick"),this.activeListeners.handleDoubleClick=$("doubleClick"),this.activeListeners.handleWheel=$("wheel"),this.activeListeners.handleDown=$("down"),this.mouseCaptor.on("mousemove",this.activeListeners.handleMove),this.mouseCaptor.on("click",this.activeListeners.handleClick),this.mouseCaptor.on("rightClick",this.activeListeners.handleRightClick),this.mouseCaptor.on("doubleClick",this.activeListeners.handleDoubleClick),this.mouseCaptor.on("wheel",this.activeListeners.handleWheel),this.mouseCaptor.on("mousedown",this.activeListeners.handleDown),this},ue.prototype.bindGraphHandlers=function(){var z=this,$=this.graph;return this.activeListeners.graphUpdate=function(){z.needToProcess=!0,z._scheduleRefresh()},this.activeListeners.softGraphUpdate=function(){z.needToSoftProcess=!0,z._scheduleRefresh()},this.activeListeners.dropNodeGraphUpdate=function(ne){delete z.nodeDataCache[ne.key],z.hoveredNode===ne.key&&(z.hoveredNode=null),z.activeListeners.graphUpdate()},this.activeListeners.dropEdgeGraphUpdate=function(ne){delete z.edgeDataCache[ne.key],z.hoveredEdge===ne.key&&(z.hoveredEdge=null),z.activeListeners.graphUpdate()},this.activeListeners.clearEdgesGraphUpdate=function(){z.edgeDataCache={},z.hoveredEdge=null,z.activeListeners.graphUpdate()},this.activeListeners.clearGraphUpdate=function(){z.nodeDataCache={},z.hoveredNode=null,z.activeListeners.clearEdgesGraphUpdate()},$.on("nodeAdded",this.activeListeners.graphUpdate),$.on("nodeDropped",this.activeListeners.dropNodeGraphUpdate),$.on("nodeAttributesUpdated",this.activeListeners.softGraphUpdate),$.on("eachNodeAttributesUpdated",this.activeListeners.graphUpdate),$.on("edgeAdded",this.activeListeners.graphUpdate),$.on("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),$.on("edgeAttributesUpdated",this.activeListeners.softGraphUpdate),$.on("eachEdgeAttributesUpdated",this.activeListeners.graphUpdate),$.on("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),$.on("cleared",this.activeListeners.clearGraphUpdate),this},ue.prototype.checkEdgeHoverEvents=function(z){var $=this.hoveredNode?null:this.getEdgeAtPoint(z.event.x,z.event.y);return $!==this.hoveredEdge&&(this.hoveredEdge&&this.emit("leaveEdge",D(D({},z),{edge:this.hoveredEdge})),$&&this.emit("enterEdge",D(D({},z),{edge:$})),this.hoveredEdge=$),this},ue.prototype.getEdgeAtPoint=function(z,$){var ne,ge,Ue=this,rt=this.edgeDataCache,Pe=this.nodeDataCache;if(!(0,U.isPixelColored)(this.webGLContexts.edges,z*this.pixelRatio,$*this.pixelRatio))return null;var at=this.viewportToGraph({x:z,y:$}),xt=at.x,He=at.y,ft=0;if(this.graph.someEdge(function(Ln,xn,Cn,yn,je,be){var Dt=je.x,Rt=je.y,ci=be.x,$i=be.y;if(rt[Ln].hidden||Pe[Cn].hidden||Pe[yn].hidden)return!1;if(Dt!==ci||Rt!==$i){var It=Math.sqrt(Math.pow(ci-Dt,2)+Math.pow($i-Rt,2)),Pt=Ue.graphToViewport({x:Dt,y:Rt}),un=Pt.x,Je=Pt.y,Te=Ue.graphToViewport({x:ci,y:$i}),Ot=Te.y,vn=Math.sqrt(Math.pow(Te.x-un,2)+Math.pow(Ot-Je,2));return ft=It/vn,!0}}),!ft)return null;var gt=this.graph.filterEdges(function(Ln,xn,Cn,yn,je,be){return!(rt[Ln].hidden||Pe[Cn].hidden||Pe[yn].hidden)&&(!!(0,U.doEdgeCollideWithPoint)(xt,He,je.x,je.y,be.x,be.y,rt[Ln].size*ft/Ue.cameraSizeRatio)||void 0)});if(0===gt.length)return null;var bt=gt[gt.length-1],kn=-1/0;try{for(var Ut=H(gt),Dn=Ut.next();!Dn.done;Dn=Ut.next()){var Jt=Dn.value,nn=this.graph.getEdgeAttribute(Jt,"zIndex");nn>=kn&&(bt=Jt,kn=nn)}}catch(Ln){ne={error:Ln}}finally{try{Dn&&!Dn.done&&(ge=Ut.return)&&ge.call(Ut)}finally{if(ne)throw ne.error}}return bt},ue.prototype.process=function(z){var $=this;void 0===z&&(z=!1);var ne=this.graph,ge=this.settings,Ue=this.getDimensions(),Re=[1/0,-1/0],rt=[1/0,-1/0];this.quadtree.clear(),this.labelGrid.resizeAndClear(Ue,ge.labelGridCellSize),this.highlightedNodes=new Set,this.nodeExtent=(0,te.graphExtent)(ne),this.nodesWithForcedLabels=[],this.edgesWithForcedLabels=[];var Pe=new W.default,at=(0,te.matrixFromCamera)(Pe.getState(),this.getDimensions(),this.getGraphDimensions(),this.getSetting("stagePadding")||0);this.normalizationFunction=(0,te.createNormalizationFunction)(this.customBBox||this.nodeExtent);for(var xt={},He=ne.nodes(),ft=0,gt=He.length;ft<gt;ft++){var bt=He[ft],kn=Object.assign({},ne.getNodeAttributes(bt));ge.nodeReducer&&(kn=ge.nodeReducer(bt,kn)),xt[(Ut=ae(this.settings,bt,kn)).type]=(xt[Ut.type]||0)+1,this.nodeDataCache[bt]=Ut,this.normalizationFunction.applyTo(Ut),Ut.forceLabel&&this.nodesWithForcedLabels.push(bt),this.settings.zIndex&&(Ut.zIndex<Re[0]&&(Re[0]=Ut.zIndex),Ut.zIndex>Re[1]&&(Re[1]=Ut.zIndex))}for(var Dn in this.nodePrograms){if(!this.nodePrograms.hasOwnProperty(Dn))throw new Error('Sigma: could not find a suitable program for node type "'.concat(Dn,'"!'));z||this.nodePrograms[Dn].allocate(xt[Dn]||0),xt[Dn]=0}for(this.settings.zIndex&&Re[0]!==Re[1]&&(He=(0,te.zIndexOrdering)(Re,function(Dt){return $.nodeDataCache[Dt].zIndex},He)),ft=0,gt=He.length;ft<gt;ft++)this.quadtree.add(bt=He[ft],(Ut=this.nodeDataCache[bt]).x,1-Ut.y,Ut.size/this.width),"string"==typeof Ut.label&&!Ut.hidden&&this.labelGrid.add(bt,Ut.size,this.framedGraphToViewport(Ut,{matrix:at})),this.nodePrograms[Ut.type].process(Ut,Ut.hidden,xt[Ut.type]++),Ut.highlighted&&!Ut.hidden&&this.highlightedNodes.add(bt);this.labelGrid.organize();var Jt={},nn=ne.edges();for(ft=0,gt=nn.length;ft<gt;ft++){var Ln=nn[ft];kn=Object.assign({},ne.getEdgeAttributes(Ln)),ge.edgeReducer&&(kn=ge.edgeReducer(Ln,kn)),Jt[(Ut=xe(this.settings,0,kn)).type]=(Jt[Ut.type]||0)+1,this.edgeDataCache[Ln]=Ut,Ut.forceLabel&&!Ut.hidden&&this.edgesWithForcedLabels.push(Ln),this.settings.zIndex&&(Ut.zIndex<rt[0]&&(rt[0]=Ut.zIndex),Ut.zIndex>rt[1]&&(rt[1]=Ut.zIndex))}for(var Dn in this.edgePrograms){if(!this.edgePrograms.hasOwnProperty(Dn))throw new Error('Sigma: could not find a suitable program for edge type "'.concat(Dn,'"!'));z||this.edgePrograms[Dn].allocate(Jt[Dn]||0),Jt[Dn]=0}for(this.settings.zIndex&&rt[0]!==rt[1]&&(nn=(0,te.zIndexOrdering)(rt,function(Dt){return $.edgeDataCache[Dt].zIndex},nn)),ft=0,gt=nn.length;ft<gt;ft++){var Ut=this.edgeDataCache[Ln=nn[ft]],xn=ne.extremities(Ln),Cn=this.nodeDataCache[xn[0]],yn=this.nodeDataCache[xn[1]];this.edgePrograms[Ut.type].process(Cn,yn,Ut,Ut.hidden||Cn.hidden||yn.hidden,Jt[Ut.type]++)}for(var Dn in this.edgePrograms){var be=this.edgePrograms[Dn];!z&&"function"==typeof be.computeIndices&&be.computeIndices()}return this},ue.prototype.handleSettingsUpdate=function(){return this.camera.minRatio=this.settings.minCameraRatio,this.camera.maxRatio=this.settings.maxCameraRatio,this.camera.setState(this.camera.validateState(this.camera.getState())),this},ue.prototype._refresh=function(){return this.needToProcess?this.process():this.needToSoftProcess&&this.process(!0),this.needToProcess=!1,this.needToSoftProcess=!1,this.render(),this},ue.prototype._scheduleRefresh=function(){var z=this;return this.renderFrame||(this.renderFrame=(0,te.requestFrame)(function(){z._refresh(),z.renderFrame=null})),this},ue.prototype.renderLabels=function(){if(!this.settings.renderLabels)return this;var $,z=this.camera.getState();if(z.ratio>=1)$=new Set(this.graph.nodes());else{var ne=this.viewRectangle();$=new Set(this.quadtree.rectangle(ne.x1,1-ne.y1,ne.x2,1-ne.y2,ne.height))}var ge=this.labelGrid.getLabelsToDisplay(z.ratio,this.settings.labelDensity).concat(this.nodesWithForcedLabels);this.displayedLabels=new Set;for(var Ue=this.canvasContexts.labels,Re=0,rt=ge.length;Re<rt;Re++){var Pe=ge[Re],at=this.nodeDataCache[Pe];if(!this.displayedLabels.has(Pe)&&!at.hidden){var xt=this.framedGraphToViewport(at),He=xt.x,ft=xt.y,gt=this.scaleSize(at.size);!at.forceLabel&&gt<this.settings.labelRenderedSizeThreshold||!$.has(Pe)||(this.displayedLabels.add(Pe),this.settings.labelRenderer(Ue,D(D({key:Pe},at),{size:gt,x:He,y:ft}),this.settings))}}return this},ue.prototype.renderEdgeLabels=function(){if(!this.settings.renderEdgeLabels)return this;var z=this.canvasContexts.edgeLabels;z.clearRect(0,0,this.width,this.height);for(var $=(0,J.edgeLabelsToDisplayFromNodes)({graph:this.graph,hoveredNode:this.hoveredNode,displayedNodeLabels:this.displayedLabels,highlightedNodes:this.highlightedNodes}).concat(this.edgesWithForcedLabels),ne=new Set,ge=0,Ue=$.length;ge<Ue;ge++){var Re=$[ge],rt=this.graph.extremities(Re),Pe=this.nodeDataCache[rt[0]],at=this.nodeDataCache[rt[1]],xt=this.edgeDataCache[Re];ne.has(Re)||xt.hidden||Pe.hidden||at.hidden||(this.settings.edgeLabelRenderer(z,D(D({key:Re},xt),{size:this.scaleSize(xt.size)}),D(D(D({key:rt[0]},Pe),this.framedGraphToViewport(Pe)),{size:this.scaleSize(Pe.size)}),D(D(D({key:rt[1]},at),this.framedGraphToViewport(at)),{size:this.scaleSize(at.size)}),this.settings),ne.add(Re))}return this},ue.prototype.renderHighlightedNodes=function(){var z=this,$=this.canvasContexts.hovers;$.clearRect(0,0,this.width,this.height);var ge=[];this.hoveredNode&&!this.nodeDataCache[this.hoveredNode].hidden&&ge.push(this.hoveredNode),this.highlightedNodes.forEach(function(Pe){Pe!==z.hoveredNode&&ge.push(Pe)}),ge.forEach(function(Pe){return function(Pe){var at=z.nodeDataCache[Pe],xt=z.framedGraphToViewport(at),He=xt.x,ft=xt.y,gt=z.scaleSize(at.size);z.settings.hoverRenderer($,D(D({key:Pe},at),{size:gt,x:He,y:ft}),z.settings)}(Pe)});var Ue={};for(var Re in ge.forEach(function(Pe){var at=z.nodeDataCache[Pe].type;Ue[at]=(Ue[at]||0)+1}),this.hoverNodePrograms)this.hoverNodePrograms[Re].allocate(Ue[Re]||0),Ue[Re]=0;for(var Re in ge.forEach(function(Pe){var at=z.nodeDataCache[Pe];z.hoverNodePrograms[at.type].process(at,at.hidden,Ue[at.type]++)}),this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT),this.hoverNodePrograms){var rt=this.hoverNodePrograms[Re];rt.bind(),rt.bufferData(),rt.render({matrix:this.matrix,width:this.width,height:this.height,ratio:this.camera.ratio,correctionRatio:this.correctionRatio/this.camera.ratio,scalingRatio:this.pixelRatio})}},ue.prototype.scheduleHighlightedNodesRender=function(){var z=this;this.renderHighlightedNodesFrame||this.renderFrame||(this.renderHighlightedNodesFrame=(0,te.requestFrame)(function(){z.renderHighlightedNodesFrame=null,z.renderHighlightedNodes(),z.renderEdgeLabels()}))},ue.prototype.render=function(){var z=this;this.emit("beforeRender");var $=function(){return z.emit("afterRender"),z};if(this.renderFrame&&((0,te.cancelFrame)(this.renderFrame),this.renderFrame=null,this.needToProcess=!1,this.needToSoftProcess=!1),this.resize(),this.clear(),this.updateCachedValues(),!this.graph.order)return $();var ne=this.mouseCaptor,ge=this.camera.isAnimated()||ne.isMoving||ne.draggedEvents||ne.currentWheelDirection,Ue=this.camera.getState(),Re=this.getDimensions(),rt=this.getGraphDimensions(),Pe=this.getSetting("stagePadding")||0;for(var at in this.matrix=(0,te.matrixFromCamera)(Ue,Re,rt,Pe),this.invMatrix=(0,te.matrixFromCamera)(Ue,Re,rt,Pe,!0),this.correctionRatio=(0,te.getMatrixImpact)(this.matrix,Ue,Re),this.nodePrograms)(xt=this.nodePrograms[at]).bind(),xt.bufferData(),xt.render({matrix:this.matrix,width:this.width,height:this.height,ratio:Ue.ratio,correctionRatio:this.correctionRatio/Ue.ratio,scalingRatio:this.pixelRatio});if(!this.settings.hideEdgesOnMove||!ge)for(var at in this.edgePrograms){var xt;(xt=this.edgePrograms[at]).bind(),xt.bufferData(),xt.render({matrix:this.matrix,width:this.width,height:this.height,ratio:Ue.ratio,correctionRatio:this.correctionRatio/Ue.ratio,scalingRatio:this.pixelRatio})}return this.settings.hideLabelsOnMove&&ge||(this.renderLabels(),this.renderEdgeLabels(),this.renderHighlightedNodes()),$()},ue.prototype.updateCachedValues=function(){var z=this.camera.getState().ratio;this.cameraSizeRatio=Math.sqrt(z)},ue.prototype.getCamera=function(){return this.camera},ue.prototype.getContainer=function(){return this.container},ue.prototype.getGraph=function(){return this.graph},ue.prototype.getMouseCaptor=function(){return this.mouseCaptor},ue.prototype.getTouchCaptor=function(){return this.touchCaptor},ue.prototype.getDimensions=function(){return{width:this.width,height:this.height}},ue.prototype.getGraphDimensions=function(){var z=this.customBBox||this.nodeExtent;return{width:z.x[1]-z.x[0]||1,height:z.y[1]-z.y[0]||1}},ue.prototype.getNodeDisplayData=function(z){var $=this.nodeDataCache[z];return $?Object.assign({},$):void 0},ue.prototype.getEdgeDisplayData=function(z){var $=this.edgeDataCache[z];return $?Object.assign({},$):void 0},ue.prototype.getSettings=function(){return D({},this.settings)},ue.prototype.getSetting=function(z){return this.settings[z]},ue.prototype.setSetting=function(z,$){return this.settings[z]=$,(0,oe.validateSettings)(this.settings),this.handleSettingsUpdate(),this.needToProcess=!0,this._scheduleRefresh(),this},ue.prototype.updateSetting=function(z,$){return this.settings[z]=$(this.settings[z]),(0,oe.validateSettings)(this.settings),this.handleSettingsUpdate(),this.needToProcess=!0,this._scheduleRefresh(),this},ue.prototype.resize=function(){var z=this.width,$=this.height;if(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.pixelRatio=(0,te.getPixelRatio)(),0===this.width){if(!this.settings.allowInvalidContainer)throw new Error("Sigma: Container has no width. You can set the allowInvalidContainer setting to true to stop seing this error.");this.width=1}if(0===this.height){if(!this.settings.allowInvalidContainer)throw new Error("Sigma: Container has no height. You can set the allowInvalidContainer setting to true to stop seing this error.");this.height=1}if(z===this.width&&$===this.height)return this;for(var ne in this.emit("resize"),this.elements){var ge=this.elements[ne];ge.style.width=this.width+"px",ge.style.height=this.height+"px"}for(var ne in this.canvasContexts)this.elements[ne].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[ne].setAttribute("height",this.height*this.pixelRatio+"px"),1!==this.pixelRatio&&this.canvasContexts[ne].scale(this.pixelRatio,this.pixelRatio);for(var ne in this.webGLContexts)this.elements[ne].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[ne].setAttribute("height",this.height*this.pixelRatio+"px"),this.webGLContexts[ne].viewport(0,0,this.width*this.pixelRatio,this.height*this.pixelRatio);return this},ue.prototype.clear=function(){return this.webGLContexts.nodes.clear(this.webGLContexts.nodes.COLOR_BUFFER_BIT),this.webGLContexts.edges.clear(this.webGLContexts.edges.COLOR_BUFFER_BIT),this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT),this.canvasContexts.labels.clearRect(0,0,this.width,this.height),this.canvasContexts.hovers.clearRect(0,0,this.width,this.height),this.canvasContexts.edgeLabels.clearRect(0,0,this.width,this.height),this},ue.prototype.refresh=function(){return this.needToProcess=!0,this._refresh(),this},ue.prototype.scheduleRefresh=function(){return this.needToProcess=!0,this._scheduleRefresh(),this},ue.prototype.getViewportZoomedState=function(z,$){var ne=this.camera.getState(),Ue=ne.angle,Re=ne.x,rt=ne.y,Pe=$/ne.ratio,at={x:this.width/2,y:this.height/2},xt=this.viewportToFramedGraph(z),He=this.viewportToFramedGraph(at);return{angle:Ue,x:(xt.x-He.x)*(1-Pe)+Re,y:(xt.y-He.y)*(1-Pe)+rt,ratio:$}},ue.prototype.viewRectangle=function(){var z=0*this.width/8,$=0*this.height/8,ne=this.viewportToFramedGraph({x:0-z,y:0-$}),ge=this.viewportToFramedGraph({x:this.width+z,y:0-$}),Ue=this.viewportToFramedGraph({x:0,y:this.height+$});return{x1:ne.x,y1:ne.y,x2:ge.x,y2:ge.y,height:ge.y-Ue.y}},ue.prototype.framedGraphToViewport=function(z,$){void 0===$&&($={});var ge=$.matrix?$.matrix:$.cameraState||$.viewportDimensions||$.graphDimensions?(0,te.matrixFromCamera)($.cameraState||this.camera.getState(),$.viewportDimensions||this.getDimensions(),$.graphDimensions||this.getGraphDimensions(),$.padding||this.getSetting("stagePadding")||0):this.matrix,Ue=(0,Q.multiplyVec2)(ge,z);return{x:(1+Ue.x)*this.width/2,y:(1-Ue.y)*this.height/2}},ue.prototype.viewportToFramedGraph=function(z,$){void 0===$&&($={});var ge=$.matrix?$.matrix:$.cameraState||$.viewportDimensions||!$.graphDimensions?(0,te.matrixFromCamera)($.cameraState||this.camera.getState(),$.viewportDimensions||this.getDimensions(),$.graphDimensions||this.getGraphDimensions(),$.padding||this.getSetting("stagePadding")||0,!0):this.invMatrix,Ue=(0,Q.multiplyVec2)(ge,{x:z.x/this.width*2-1,y:1-z.y/this.height*2});return isNaN(Ue.x)&&(Ue.x=0),isNaN(Ue.y)&&(Ue.y=0),Ue},ue.prototype.viewportToGraph=function(z,$){return void 0===$&&($={}),this.normalizationFunction.inverse(this.viewportToFramedGraph(z,$))},ue.prototype.graphToViewport=function(z,$){return void 0===$&&($={}),this.framedGraphToViewport(this.normalizationFunction(z),$)},ue.prototype.getBBox=function(){return(0,te.graphExtent)(this.graph)},ue.prototype.getCustomBBox=function(){return this.customBBox},ue.prototype.setCustomBBox=function(z){return this.customBBox=z,this._scheduleRefresh(),this},ue.prototype.kill=function(){var z=this.graph;this.emit("kill"),this.removeAllListeners(),this.camera.removeListener("updated",this.activeListeners.camera),window.removeEventListener("resize",this.activeListeners.handleResize),this.mouseCaptor.kill(),this.touchCaptor.kill(),z.removeListener("nodeAdded",this.activeListeners.dropNodeGraphUpdate),z.removeListener("nodeDropped",this.activeListeners.graphUpdate),z.removeListener("nodeAttributesUpdated",this.activeListeners.softGraphUpdate),z.removeListener("eachNodeAttributesUpdated",this.activeListeners.graphUpdate),z.removeListener("edgeAdded",this.activeListeners.graphUpdate),z.removeListener("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),z.removeListener("edgeAttributesUpdated",this.activeListeners.softGraphUpdate),z.removeListener("eachEdgeAttributesUpdated",this.activeListeners.graphUpdate),z.removeListener("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),z.removeListener("cleared",this.activeListeners.clearGraphUpdate),this.quadtree=new O.default,this.nodeDataCache={},this.edgeDataCache={},this.nodesWithForcedLabels=[],this.edgesWithForcedLabels=[],this.highlightedNodes.clear(),this.renderFrame&&((0,te.cancelFrame)(this.renderFrame),this.renderFrame=null),this.renderHighlightedNodesFrame&&((0,te.cancelFrame)(this.renderHighlightedNodesFrame),this.renderHighlightedNodesFrame=null);for(var $=this.container;$.firstChild;)$.removeChild($.firstChild)},ue.prototype.scaleSize=function(z){return z/this.cameraSizeRatio},ue.prototype.getCanvases=function(){return D({},this.elements)},ue}(q.TypedEventEmitter);Ce.default=Oe},57:function(Be,Ce,V){"use strict";var B,Y=this&&this.__extends||(B=function(W,P){return(B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,q){O.__proto__=q}||function(O,q){for(var te in q)Object.prototype.hasOwnProperty.call(q,te)&&(O[te]=q[te])})(W,P)},function(W,P){if("function"!=typeof P&&null!==P)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function O(){this.constructor=W}B(W,P),W.prototype=null===P?Object.create(P):(O.prototype=P.prototype,new O)});Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.TypedEventEmitter=void 0;var H=function(B){function W(){var P=B.call(this)||this;return P.rawEmitter=P,P}return Y(W,B),W}(V(9069).EventEmitter);Ce.TypedEventEmitter=H},2630:function(Be,Ce,V){"use strict";var Y=this&&this.__importDefault||function(W){return W&&W.__esModule?W:{default:W}};Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.animateNodes=Ce.ANIMATE_DEFAULTS=void 0;var D=V(1699),H=Y(V(4539));Ce.ANIMATE_DEFAULTS={easing:"quadraticInOut",duration:150},Ce.animateNodes=function B(W,P,O,q){var te=Object.assign({},Ce.ANIMATE_DEFAULTS,O),J="function"==typeof te.easing?te.easing:H.default[te.easing],oe=Date.now(),se={};for(var Q in P){var U=P[Q];for(var ae in se[Q]={},U)se[Q][ae]=W.getNodeAttribute(Q,ae)}var xe=null,Oe=function(){xe=null;var re=(Date.now()-oe)/te.duration;if(re>=1){for(var ue in P){var z=P[ue];for(var $ in z)W.setNodeAttribute(ue,$,z[$])}"function"==typeof q&&q()}else{for(var ue in re=J(re),P){z=P[ue];var ne=se[ue];for(var $ in z)W.setNodeAttribute(ue,$,z[$]*re+ne[$]*(1-re))}xe=(0,D.requestFrame)(Oe)}};return Oe(),function(){xe&&(0,D.cancelFrame)(xe)}}},5147:(Be,Ce)=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.HTML_COLORS=void 0,Ce.HTML_COLORS={black:"#000000",silver:"#C0C0C0",gray:"#808080",grey:"#808080",white:"#FFFFFF",maroon:"#800000",red:"#FF0000",purple:"#800080",fuchsia:"#FF00FF",green:"#008000",lime:"#00FF00",olive:"#808000",yellow:"#FFFF00",navy:"#000080",blue:"#0000FF",teal:"#008080",aqua:"#00FFFF",darkblue:"#00008B",mediumblue:"#0000CD",darkgreen:"#006400",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",springgreen:"#00FF7F",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",rebeccapurple:"#663399",mediumaquamarine:"#66CDAA",dimgray:"#696969",dimgrey:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",slategrey:"#708090",lightslategray:"#778899",lightslategrey:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370DB",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",palevioletred:"#DB7093",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",lightyellow:"#FFFFE0",ivory:"#FFFFF0"}},4539:(Be,Ce)=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.cubicInOut=Ce.cubicOut=Ce.cubicIn=Ce.quadraticInOut=Ce.quadraticOut=Ce.quadraticIn=Ce.linear=void 0,Ce.linear=function(q){return q},Ce.quadraticIn=function(q){return q*q},Ce.quadraticOut=function(q){return q*(2-q)},Ce.quadraticInOut=function(q){return(q*=2)<1?.5*q*q:-.5*(--q*(q-2)-1)},Ce.cubicIn=function(q){return q*q*q},Ce.cubicOut=function(q){return--q*q*q+1},Ce.cubicInOut=function(q){return(q*=2)<1?.5*q*q*q:.5*((q-=2)*q*q+2)},Ce.default={linear:Ce.linear,quadraticIn:Ce.quadraticIn,quadraticOut:Ce.quadraticOut,quadraticInOut:Ce.quadraticInOut,cubicIn:Ce.cubicIn,cubicOut:Ce.cubicOut,cubicInOut:Ce.cubicInOut}},3180:(Be,Ce)=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.doEdgeCollideWithPoint=Ce.isPixelColored=void 0,Ce.isPixelColored=function V(D,H,B){var W=new Uint8Array(4);return D.readPixels(H,D.drawingBufferHeight-B,1,1,D.RGBA,D.UNSIGNED_BYTE,W),W[3]>0},Ce.doEdgeCollideWithPoint=function Y(D,H,B,W,P,O,q){return!(D<B-q&&D<P-q||H<W-q&&H<O-q||D>B+q&&D>P+q||H>W+q&&H>O+q)&&Math.abs((P-B)*(W-H)-(B-D)*(O-W))/Math.sqrt(Math.pow(P-B,2)+Math.pow(O-W,2))<q/2}},1699:function(Be,Ce,V){"use strict";var Y=this&&this.__read||function(He,ft){var gt="function"==typeof Symbol&&He[Symbol.iterator];if(!gt)return He;var kn,Dn,bt=gt.call(He),Ut=[];try{for(;(void 0===ft||ft-- >0)&&!(kn=bt.next()).done;)Ut.push(kn.value)}catch(Jt){Dn={error:Jt}}finally{try{kn&&!kn.done&&(gt=bt.return)&&gt.call(bt)}finally{if(Dn)throw Dn.error}}return Ut},D=this&&this.__importDefault||function(He){return He&&He.__esModule?He:{default:He}};Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.validateGraph=Ce.canUse32BitsIndices=Ce.extractPixel=Ce.getMatrixImpact=Ce.matrixFromCamera=Ce.getCorrectionRatio=Ce.floatColor=Ce.floatArrayColor=Ce.parseColor=Ce.zIndexOrdering=Ce.createNormalizationFunction=Ce.graphExtent=Ce.getPixelRatio=Ce.createElement=Ce.cancelFrame=Ce.requestFrame=Ce.assignDeep=Ce.assign=Ce.isPlainObject=void 0;var H=D(V(6714)),B=V(7611),W=V(5147);function P(He){return"object"==typeof He&&null!==He&&He.constructor===Object}Ce.isPlainObject=P,Ce.assign=function O(He){for(var ft=[],gt=1;gt<arguments.length;gt++)ft[gt-1]=arguments[gt];He=He||{};for(var bt=0,kn=ft.length;bt<kn;bt++){var Ut=ft[bt];!Ut||Object.assign(He,Ut)}return He},Ce.assignDeep=function q(He){for(var ft=[],gt=1;gt<arguments.length;gt++)ft[gt-1]=arguments[gt];He=He||{};for(var bt=0,kn=ft.length;bt<kn;bt++){var Ut=ft[bt];if(Ut)for(var Dn in Ut)He[Dn]=P(Ut[Dn])?q(He[Dn],Ut[Dn]):Ut[Dn]}return He},Ce.requestFrame=typeof requestAnimationFrame<"u"?function(He){return requestAnimationFrame(He)}:function(He){return setTimeout(He,0)},Ce.cancelFrame=typeof cancelAnimationFrame<"u"?function(He){return cancelAnimationFrame(He)}:function(He){return clearTimeout(He)},Ce.createElement=function te(He,ft,gt){var bt=document.createElement(He);if(ft)for(var kn in ft)bt.style[kn]=ft[kn];if(gt)for(var kn in gt)bt.setAttribute(kn,gt[kn]);return bt},Ce.getPixelRatio=function J(){return typeof window.devicePixelRatio<"u"?window.devicePixelRatio:1},Ce.graphExtent=function oe(He){if(!He.order)return{x:[0,1],y:[0,1]};var ft=1/0,gt=-1/0,bt=1/0,kn=-1/0;return He.forEachNode(function(Ut,Dn){var Jt=Dn.x,nn=Dn.y;Jt<ft&&(ft=Jt),Jt>gt&&(gt=Jt),nn<bt&&(bt=nn),nn>kn&&(kn=nn)}),{x:[ft,gt],y:[bt,kn]}},Ce.createNormalizationFunction=function se(He){var ft=Y(He.x,2),gt=ft[0],bt=ft[1],kn=Y(He.y,2),Ut=kn[0],Dn=kn[1],Jt=Math.max(bt-gt,Dn-Ut),nn=(bt+gt)/2,Ln=(Dn+Ut)/2;(0===Jt||Math.abs(Jt)===1/0||isNaN(Jt))&&(Jt=1),isNaN(nn)&&(nn=0),isNaN(Ln)&&(Ln=0);var xn=function(Cn){return{x:.5+(Cn.x-nn)/Jt,y:.5+(Cn.y-Ln)/Jt}};return xn.applyTo=function(Cn){Cn.x=.5+(Cn.x-nn)/Jt,Cn.y=.5+(Cn.y-Ln)/Jt},xn.inverse=function(Cn){return{x:nn+Jt*(Cn.x-.5),y:Ln+Jt*(Cn.y-.5)}},xn.ratio=Jt,xn},Ce.zIndexOrdering=function Q(He,ft,gt){return gt.sort(function(bt,kn){var Ut=ft(bt)||0,Dn=ft(kn)||0;return Ut<Dn?-1:Ut>Dn?1:0})};var U=new Int8Array(4),ae=new Int32Array(U.buffer,0,1),xe=new Float32Array(U.buffer,0,1),Oe=/^\s*rgba?\s*\(/,re=/^\s*rgba?\s*\(\s*([0-9]*)\s*,\s*([0-9]*)\s*,\s*([0-9]*)(?:\s*,\s*(.*)?)?\)\s*$/;function ue(He){var ft=0,gt=0,bt=0,kn=1;if("#"===He[0])4===He.length?(ft=parseInt(He.charAt(1)+He.charAt(1),16),gt=parseInt(He.charAt(2)+He.charAt(2),16),bt=parseInt(He.charAt(3)+He.charAt(3),16)):(ft=parseInt(He.charAt(1)+He.charAt(2),16),gt=parseInt(He.charAt(3)+He.charAt(4),16),bt=parseInt(He.charAt(5)+He.charAt(6),16));else if(Oe.test(He)){var Ut=He.match(re);Ut&&(ft=+Ut[1],gt=+Ut[2],bt=+Ut[3],Ut[4]&&(kn=+Ut[4]))}return{r:ft,g:gt,b:bt,a:kn}}Ce.parseColor=ue;var z={};for(var $ in W.HTML_COLORS)z[$]=ge(W.HTML_COLORS[$]),z[W.HTML_COLORS[$]]=z[$];function ge(He){if(typeof z[He]<"u")return z[He];var ft=ue(He),Ut=ft.a;ae[0]=4278190079&((Ut=255*Ut|0)<<24|ft.b<<16|ft.g<<8|ft.r);var Dn=xe[0];return z[He]=Dn,Dn}function Ue(He,ft){var gt=He.height/He.width,bt=ft.height/ft.width;return gt<1&&bt>1||gt>1&&bt<1?1:Math.min(Math.max(bt,1/bt),Math.max(1/gt,gt))}Ce.floatArrayColor=function ne(He){var ft=ue(He=W.HTML_COLORS[He]||He);return new Float32Array([ft.r/255,ft.g/255,ft.b/255,ft.a])},Ce.floatColor=ge,Ce.getCorrectionRatio=Ue,Ce.matrixFromCamera=function Re(He,ft,gt,bt,kn){var Ut=He.angle,Dn=He.ratio,Jt=He.x,nn=He.y,Ln=ft.width,xn=ft.height,Cn=(0,B.identity)(),yn=Math.min(Ln,xn)-2*bt,je=Ue(ft,gt);return kn?((0,B.multiply)(Cn,(0,B.translate)((0,B.identity)(),Jt,nn)),(0,B.multiply)(Cn,(0,B.scale)((0,B.identity)(),Dn)),(0,B.multiply)(Cn,(0,B.rotate)((0,B.identity)(),Ut)),(0,B.multiply)(Cn,(0,B.scale)((0,B.identity)(),Ln/yn/2/je,xn/yn/2/je))):((0,B.multiply)(Cn,(0,B.scale)((0,B.identity)(),yn/Ln*2*je,yn/xn*2*je)),(0,B.multiply)(Cn,(0,B.rotate)((0,B.identity)(),-Ut)),(0,B.multiply)(Cn,(0,B.scale)((0,B.identity)(),1/Dn)),(0,B.multiply)(Cn,(0,B.translate)((0,B.identity)(),-Jt,-nn))),Cn},Ce.getMatrixImpact=function rt(He,ft,gt){var bt=(0,B.multiplyVec2)(He,{x:Math.cos(ft.angle),y:Math.sin(ft.angle)},0),Ut=bt.y;return 1/Math.sqrt(Math.pow(bt.x,2)+Math.pow(Ut,2))/gt.width},Ce.extractPixel=function Pe(He,ft,gt,bt){var kn=bt||new Uint8Array(4);return He.readPixels(ft,gt,1,1,He.RGBA,He.UNSIGNED_BYTE,kn),kn},Ce.canUse32BitsIndices=function at(He){return typeof WebGL2RenderingContext<"u"&&He instanceof WebGL2RenderingContext||!!He.getExtension("OES_element_index_uint")},Ce.validateGraph=function xt(He){if(!(0,H.default)(He))throw new Error("Sigma: invalid graph instance.");He.forEachNode(function(ft,gt){if(!Number.isFinite(gt.x)||!Number.isFinite(gt.y))throw new Error("Sigma: Coordinates of node ".concat(ft," are invalid. A node must have a numeric 'x' and 'y' attribute."))})}},7611:(Be,Ce)=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.multiplyVec2=Ce.multiply=Ce.translate=Ce.rotate=Ce.scale=Ce.identity=void 0,Ce.identity=function V(){return Float32Array.of(1,0,0,0,1,0,0,0,1)},Ce.scale=function Y(P,O,q){return P[0]=O,P[4]="number"==typeof q?q:O,P},Ce.rotate=function D(P,O){var q=Math.sin(O),te=Math.cos(O);return P[0]=te,P[1]=q,P[3]=-q,P[4]=te,P},Ce.translate=function H(P,O,q){return P[6]=O,P[7]=q,P},Ce.multiply=function B(P,O){var q=P[0],te=P[1],J=P[2],oe=P[3],se=P[4],Q=P[5],U=P[6],ae=P[7],xe=P[8],Oe=O[0],re=O[1],ue=O[2],z=O[3],$=O[4],ne=O[5],ge=O[6],Ue=O[7],Re=O[8];return P[0]=Oe*q+re*oe+ue*U,P[1]=Oe*te+re*se+ue*ae,P[2]=Oe*J+re*Q+ue*xe,P[3]=z*q+$*oe+ne*U,P[4]=z*te+$*se+ne*ae,P[5]=z*J+$*Q+ne*xe,P[6]=ge*q+Ue*oe+Re*U,P[7]=ge*te+Ue*se+Re*ae,P[8]=ge*J+Ue*Q+Re*xe,P},Ce.multiplyVec2=function W(P,O,q){void 0===q&&(q=1);var ae=O.x,xe=O.y;return{x:ae*P[0]+xe*P[3]+P[6]*q,y:ae*P[1]+xe*P[4]+P[7]*q}}},295:(Be,Ce,V)=>{Be.exports=H;var Y=V(9069).EventEmitter;function H(){Y.call(this)}V(3894)(H,Y),H.Readable=V(3154),H.Writable=V(520),H.Duplex=V(1339),H.Transform=V(6025),H.PassThrough=V(6071),H.finished=V(7542),H.pipeline=V(954),H.Stream=H,H.prototype.pipe=function(B,W){var P=this;function O(U){B.writable&&!1===B.write(U)&&P.pause&&P.pause()}function q(){P.readable&&P.resume&&P.resume()}P.on("data",O),B.on("drain",q),!B._isStdio&&(!W||!1!==W.end)&&(P.on("end",J),P.on("close",oe));var te=!1;function J(){te||(te=!0,B.end())}function oe(){te||(te=!0,"function"==typeof B.destroy&&B.destroy())}function se(U){if(Q(),0===Y.listenerCount(this,"error"))throw U}function Q(){P.removeListener("data",O),B.removeListener("drain",q),P.removeListener("end",J),P.removeListener("close",oe),P.removeListener("error",se),B.removeListener("error",se),P.removeListener("end",Q),P.removeListener("close",Q),B.removeListener("close",Q)}return P.on("error",se),B.on("error",se),P.on("end",Q),P.on("close",Q),B.on("close",Q),B.emit("pipe",P),B}},3054:(Be,Ce,V)=>{"use strict";var Y=V(858).Buffer,D=Y.isEncoding||function(re){switch((re=""+re)&&re.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function W(re){var ue;switch(this.encoding=function B(re){var ue=function H(re){if(!re)return"utf8";for(var ue;;)switch(re){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return re;default:if(ue)return;re=(""+re).toLowerCase(),ue=!0}}(re);if("string"!=typeof ue&&(Y.isEncoding===D||!D(re)))throw new Error("Unknown encoding: "+re);return ue||re}(re),this.encoding){case"utf16le":this.text=se,this.end=Q,ue=4;break;case"utf8":this.fillLast=te,ue=4;break;case"base64":this.text=U,this.end=ae,ue=3;break;default:return this.write=xe,void(this.end=Oe)}this.lastNeed=0,this.lastTotal=0,this.lastChar=Y.allocUnsafe(ue)}function P(re){return re<=127?0:re>>5==6?2:re>>4==14?3:re>>3==30?4:re>>6==2?-1:-2}function te(re){var ue=this.lastTotal-this.lastNeed,z=function q(re,ue,z){if(128!=(192&ue[0]))return re.lastNeed=0,"\ufffd";if(re.lastNeed>1&&ue.length>1){if(128!=(192&ue[1]))return re.lastNeed=1,"\ufffd";if(re.lastNeed>2&&ue.length>2&&128!=(192&ue[2]))return re.lastNeed=2,"\ufffd"}}(this,re);return void 0!==z?z:this.lastNeed<=re.length?(re.copy(this.lastChar,ue,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(re.copy(this.lastChar,ue,0,re.length),void(this.lastNeed-=re.length))}function se(re,ue){if((re.length-ue)%2==0){var z=re.toString("utf16le",ue);if(z){var $=z.charCodeAt(z.length-1);if($>=55296&&$<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=re[re.length-2],this.lastChar[1]=re[re.length-1],z.slice(0,-1)}return z}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=re[re.length-1],re.toString("utf16le",ue,re.length-1)}function Q(re){var ue=re&&re.length?this.write(re):"";return this.lastNeed?ue+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):ue}function U(re,ue){var z=(re.length-ue)%3;return 0===z?re.toString("base64",ue):(this.lastNeed=3-z,this.lastTotal=3,1===z?this.lastChar[0]=re[re.length-1]:(this.lastChar[0]=re[re.length-2],this.lastChar[1]=re[re.length-1]),re.toString("base64",ue,re.length-z))}function ae(re){var ue=re&&re.length?this.write(re):"";return this.lastNeed?ue+this.lastChar.toString("base64",0,3-this.lastNeed):ue}function xe(re){return re.toString(this.encoding)}function Oe(re){return re&&re.length?this.write(re):""}Ce.s=W,W.prototype.write=function(re){if(0===re.length)return"";var ue,z;if(this.lastNeed){if(void 0===(ue=this.fillLast(re)))return"";z=this.lastNeed,this.lastNeed=0}else z=0;return z<re.length?ue?ue+this.text(re,z):this.text(re,z):ue||""},W.prototype.end=function oe(re){var ue=re&&re.length?this.write(re):"";return this.lastNeed?ue+"\ufffd":ue},W.prototype.text=function J(re,ue){var z=function O(re,ue,z){var $=ue.length-1;if($<z)return 0;var ne=P(ue[$]);return ne>=0?(ne>0&&(re.lastNeed=ne-1),ne):--$<z||-2===ne?0:(ne=P(ue[$]))>=0?(ne>0&&(re.lastNeed=ne-2),ne):--$<z||-2===ne?0:(ne=P(ue[$]))>=0?(ne>0&&(2===ne?ne=0:re.lastNeed=ne-3),ne):0}(this,re,ue);if(!this.lastNeed)return re.toString("utf8",ue);this.lastTotal=z;var $=re.length-(z-this.lastNeed);return re.copy(this.lastChar,0,$),re.toString("utf8",ue,$)},W.prototype.fillLast=function(re){if(this.lastNeed<=re.length)return re.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);re.copy(this.lastChar,this.lastTotal-this.lastNeed,0,re.length),this.lastNeed-=re.length}},858:(Be,Ce,V)=>{var Y=V(3172),D=Y.Buffer;function H(W,P){for(var O in W)P[O]=W[O]}function B(W,P,O){return D(W,P,O)}D.from&&D.alloc&&D.allocUnsafe&&D.allocUnsafeSlow?Be.exports=Y:(H(Y,Ce),Ce.Buffer=B),B.prototype=Object.create(D.prototype),H(D,B),B.from=function(W,P,O){if("number"==typeof W)throw new TypeError("Argument must not be a number");return D(W,P,O)},B.alloc=function(W,P,O){if("number"!=typeof W)throw new TypeError("Argument must be a number");var q=D(W);return void 0!==P?"string"==typeof O?q.fill(P,O):q.fill(P):q.fill(0),q},B.allocUnsafe=function(W){if("number"!=typeof W)throw new TypeError("Argument must be a number");return D(W)},B.allocUnsafeSlow=function(W){if("number"!=typeof W)throw new TypeError("Argument must be a number");return Y.SlowBuffer(W)}},5570:function(Be,Ce,V){"use strict";var Y=this&&this.__extends||function(te,J){for(var oe in J)J.hasOwnProperty(oe)&&(te[oe]=J[oe]);function se(){this.constructor=te}te.prototype=null===J?Object.create(J):(se.prototype=J.prototype,new se)},D=V(5237),B={type:"change"},W={type:"start"},P={type:"end"},O=1e-6,q=function(te){function J(oe,se,Q){var U=te.call(this)||this;return U.object=oe,U.domElement=void 0!==se?se:document,U.window=void 0!==Q?Q:window,U.enabled=!0,U.target=new D.Vector3,U.minDistance=0,U.maxDistance=1/0,U.minZoom=0,U.maxZoom=1/0,U.minPolarAngle=0,U.maxPolarAngle=Math.PI,U.minAzimuthAngle=-1/0,U.maxAzimuthAngle=1/0,U.enableDamping=!1,U.dampingFactor=.25,U.enableZoom=!0,U.zoomSpeed=1,U.enableRotate=!0,U.rotateSpeed=1,U.enablePan=!0,U.keyPanSpeed=7,U.autoRotate=!1,U.autoRotateSpeed=2,U.enableKeys=!0,U.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},U.mouseButtons={ORBIT:D.MOUSE.LEFT,ZOOM:D.MOUSE.MIDDLE,PAN:D.MOUSE.RIGHT},U.target0=U.target.clone(),U.position0=U.object.position.clone(),U.zoom0=U.object.zoom,U.updateOffset=new D.Vector3,U.updateQuat=(new D.Quaternion).setFromUnitVectors(oe.up,new D.Vector3(0,1,0)),U.updateQuatInverse=U.updateQuat.clone().inverse(),U.updateLastPosition=new D.Vector3,U.updateLastQuaternion=new D.Quaternion,U.state=-1,U.scale=1,U.spherical=new D.Spherical,U.sphericalDelta=new D.Spherical,U.panOffset=new D.Vector3,U.zoomChanged=!1,U.rotateStart=new D.Vector2,U.rotateEnd=new D.Vector2,U.rotateDelta=new D.Vector2,U.panStart=new D.Vector2,U.panEnd=new D.Vector2,U.panDelta=new D.Vector2,U.dollyStart=new D.Vector2,U.dollyEnd=new D.Vector2,U.dollyDelta=new D.Vector2,U.panLeftV=new D.Vector3,U.panUpV=new D.Vector3,U.panInternalOffset=new D.Vector3,U.onMouseDown=function(ae){if(!1!==U.enabled){if(ae.preventDefault(),ae.button===U.mouseButtons.ORBIT){if(!1===U.enableRotate)return;U.rotateStart.set(ae.clientX,ae.clientY),U.state=0}else if(ae.button===U.mouseButtons.ZOOM){if(!1===U.enableZoom)return;U.dollyStart.set(ae.clientX,ae.clientY),U.state=1}else if(ae.button===U.mouseButtons.PAN){if(!1===U.enablePan)return;U.panStart.set(ae.clientX,ae.clientY),U.state=2}-1!==U.state&&(document.addEventListener("mousemove",U.onMouseMove,!1),document.addEventListener("mouseup",U.onMouseUp,!1),U.dispatchEvent(W))}},U.onMouseMove=function(ae){if(!1!==U.enabled)if(ae.preventDefault(),0===U.state){if(!1===U.enableRotate)return;U.rotateEnd.set(ae.clientX,ae.clientY),U.rotateDelta.subVectors(U.rotateEnd,U.rotateStart);var xe=U.domElement===document?U.domElement.body:U.domElement;U.rotateLeft(2*Math.PI*U.rotateDelta.x/xe.clientWidth*U.rotateSpeed),U.rotateUp(2*Math.PI*U.rotateDelta.y/xe.clientHeight*U.rotateSpeed),U.rotateStart.copy(U.rotateEnd),U.update()}else if(1===U.state){if(!1===U.enableZoom)return;U.dollyEnd.set(ae.clientX,ae.clientY),U.dollyDelta.subVectors(U.dollyEnd,U.dollyStart),U.dollyDelta.y>0?U.dollyIn(U.getZoomScale()):U.dollyDelta.y<0&&U.dollyOut(U.getZoomScale()),U.dollyStart.copy(U.dollyEnd),U.update()}else if(2===U.state){if(!1===U.enablePan)return;U.panEnd.set(ae.clientX,ae.clientY),U.panDelta.subVectors(U.panEnd,U.panStart),U.pan(U.panDelta.x,U.panDelta.y),U.panStart.copy(U.panEnd),U.update()}},U.onMouseUp=function(ae){!1!==U.enabled&&(document.removeEventListener("mousemove",U.onMouseMove,!1),document.removeEventListener("mouseup",U.onMouseUp,!1),U.dispatchEvent(P),U.state=-1)},U.onMouseWheel=function(ae){!1===U.enabled||!1===U.enableZoom||-1!==U.state&&0!==U.state||(ae.preventDefault(),ae.stopPropagation(),ae.deltaY<0?U.dollyOut(U.getZoomScale()):ae.deltaY>0&&U.dollyIn(U.getZoomScale()),U.update(),U.dispatchEvent(W),U.dispatchEvent(P))},U.onKeyDown=function(ae){if(!1!==U.enabled&&!1!==U.enableKeys&&!1!==U.enablePan)switch(ae.keyCode){case U.keys.UP:U.pan(0,U.keyPanSpeed),U.update();break;case U.keys.BOTTOM:U.pan(0,-U.keyPanSpeed),U.update();break;case U.keys.LEFT:U.pan(U.keyPanSpeed,0),U.update();break;case U.keys.RIGHT:U.pan(-U.keyPanSpeed,0),U.update()}},U.onTouchStart=function(ae){if(!1!==U.enabled){switch(ae.touches.length){case 1:if(!1===U.enableRotate)return;U.rotateStart.set(ae.touches[0].pageX,ae.touches[0].pageY),U.state=3;break;case 2:if(!1===U.enableZoom)return;var xe=ae.touches[0].pageX-ae.touches[1].pageX,Oe=ae.touches[0].pageY-ae.touches[1].pageY,re=Math.sqrt(xe*xe+Oe*Oe);U.dollyStart.set(0,re),U.state=4;break;case 3:if(!1===U.enablePan)return;U.panStart.set(ae.touches[0].pageX,ae.touches[0].pageY),U.state=5;break;default:U.state=-1}-1!==U.state&&U.dispatchEvent(W)}},U.onTouchMove=function(ae){if(!1!==U.enabled)switch(ae.preventDefault(),ae.stopPropagation(),ae.touches.length){case 1:if(!1===U.enableRotate||3!==U.state)return;U.rotateEnd.set(ae.touches[0].pageX,ae.touches[0].pageY),U.rotateDelta.subVectors(U.rotateEnd,U.rotateStart);var xe=U.domElement===document?U.domElement.body:U.domElement;U.rotateLeft(2*Math.PI*U.rotateDelta.x/xe.clientWidth*U.rotateSpeed),U.rotateUp(2*Math.PI*U.rotateDelta.y/xe.clientHeight*U.rotateSpeed),U.rotateStart.copy(U.rotateEnd),U.update();break;case 2:if(!1===U.enableZoom||4!==U.state)return;var Oe=ae.touches[0].pageX-ae.touches[1].pageX,re=ae.touches[0].pageY-ae.touches[1].pageY,ue=Math.sqrt(Oe*Oe+re*re);U.dollyEnd.set(0,ue),U.dollyDelta.subVectors(U.dollyEnd,U.dollyStart),U.dollyDelta.y>0?U.dollyOut(U.getZoomScale()):U.dollyDelta.y<0&&U.dollyIn(U.getZoomScale()),U.dollyStart.copy(U.dollyEnd),U.update();break;case 3:if(!1===U.enablePan||5!==U.state)return;U.panEnd.set(ae.touches[0].pageX,ae.touches[0].pageY),U.panDelta.subVectors(U.panEnd,U.panStart),U.pan(U.panDelta.x,U.panDelta.y),U.panStart.copy(U.panEnd),U.update();break;default:U.state=-1}},U.onTouchEnd=function(ae){!1!==U.enabled&&(U.dispatchEvent(P),U.state=-1)},U.onContextMenu=function(ae){ae.preventDefault()},U.domElement.addEventListener("contextmenu",U.onContextMenu,!1),U.domElement.addEventListener("mousedown",U.onMouseDown,!1),U.domElement.addEventListener("wheel",U.onMouseWheel,!1),U.domElement.addEventListener("touchstart",U.onTouchStart,!1),U.domElement.addEventListener("touchend",U.onTouchEnd,!1),U.domElement.addEventListener("touchmove",U.onTouchMove,!1),U.window.addEventListener("keydown",U.onKeyDown,!1),U.update(),U}return Y(J,te),J.prototype.update=function(){var oe=this.object.position;return this.updateOffset.copy(oe).sub(this.target),this.updateOffset.applyQuaternion(this.updateQuat),this.spherical.setFromVector3(this.updateOffset),this.autoRotate&&-1===this.state&&this.rotateLeft(this.getAutoRotationAngle()),this.spherical.theta+=this.sphericalDelta.theta,this.spherical.phi+=this.sphericalDelta.phi,this.spherical.theta=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,this.spherical.theta)),this.spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this.spherical.phi)),this.spherical.makeSafe(),this.spherical.radius*=this.scale,this.spherical.radius=Math.max(this.minDistance,Math.min(this.maxDistance,this.spherical.radius)),this.target.add(this.panOffset),this.updateOffset.setFromSpherical(this.spherical),this.updateOffset.applyQuaternion(this.updateQuatInverse),oe.copy(this.target).add(this.updateOffset),this.object.lookAt(this.target),!0===this.enableDamping?(this.sphericalDelta.theta*=1-this.dampingFactor,this.sphericalDelta.phi*=1-this.dampingFactor):this.sphericalDelta.set(0,0,0),this.scale=1,this.panOffset.set(0,0,0),!!(this.zoomChanged||this.updateLastPosition.distanceToSquared(this.object.position)>O||8*(1-this.updateLastQuaternion.dot(this.object.quaternion))>O)&&(this.dispatchEvent(B),this.updateLastPosition.copy(this.object.position),this.updateLastQuaternion.copy(this.object.quaternion),this.zoomChanged=!1,!0)},J.prototype.panLeft=function(oe,se){this.panLeftV.setFromMatrixColumn(se,0),this.panLeftV.multiplyScalar(-oe),this.panOffset.add(this.panLeftV)},J.prototype.panUp=function(oe,se){this.panUpV.setFromMatrixColumn(se,1),this.panUpV.multiplyScalar(oe),this.panOffset.add(this.panUpV)},J.prototype.pan=function(oe,se){var Q=this.domElement===document?this.domElement.body:this.domElement;if(this.object instanceof D.PerspectiveCamera){this.panInternalOffset.copy(this.object.position).sub(this.target);var ae=this.panInternalOffset.length();ae*=Math.tan(this.object.fov/2*Math.PI/180),this.panLeft(2*oe*ae/Q.clientHeight,this.object.matrix),this.panUp(2*se*ae/Q.clientHeight,this.object.matrix)}else this.object instanceof D.OrthographicCamera?(this.panLeft(oe*(this.object.right-this.object.left)/this.object.zoom/Q.clientWidth,this.object.matrix),this.panUp(se*(this.object.top-this.object.bottom)/this.object.zoom/Q.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)},J.prototype.dollyIn=function(oe){this.object instanceof D.PerspectiveCamera?this.scale/=oe:this.object instanceof D.OrthographicCamera?(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom*oe)),this.object.updateProjectionMatrix(),this.zoomChanged=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)},J.prototype.dollyOut=function(oe){this.object instanceof D.PerspectiveCamera?this.scale*=oe:this.object instanceof D.OrthographicCamera?(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/oe)),this.object.updateProjectionMatrix(),this.zoomChanged=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)},J.prototype.getAutoRotationAngle=function(){return 2*Math.PI/60/60*this.autoRotateSpeed},J.prototype.getZoomScale=function(){return Math.pow(.95,this.zoomSpeed)},J.prototype.rotateLeft=function(oe){this.sphericalDelta.theta-=oe},J.prototype.rotateUp=function(oe){this.sphericalDelta.phi-=oe},J.prototype.getPolarAngle=function(){return this.spherical.phi},J.prototype.getAzimuthalAngle=function(){return this.spherical.theta},J.prototype.dispose=function(){this.domElement.removeEventListener("contextmenu",this.onContextMenu,!1),this.domElement.removeEventListener("mousedown",this.onMouseDown,!1),this.domElement.removeEventListener("wheel",this.onMouseWheel,!1),this.domElement.removeEventListener("touchstart",this.onTouchStart,!1),this.domElement.removeEventListener("touchend",this.onTouchEnd,!1),this.domElement.removeEventListener("touchmove",this.onTouchMove,!1),document.removeEventListener("mousemove",this.onMouseMove,!1),document.removeEventListener("mouseup",this.onMouseUp,!1),this.window.removeEventListener("keydown",this.onKeyDown,!1)},J.prototype.reset=function(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(B),this.update(),this.state=-1},Object.defineProperty(J.prototype,"center",{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target},enumerable:!0,configurable:!0}),Object.defineProperty(J.prototype,"noZoom",{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(oe){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!oe},enumerable:!0,configurable:!0}),J}(D.EventDispatcher);Ce.OrbitControls=q},5237:(Be,Ce,V)=>{"use strict";function Y(){}V.r(Ce),V.d(Ce,{AddEquation:()=>at,AddOperation:()=>De,AdditiveBlending:()=>ge,AlphaFormat:()=>fl,AlwaysDepth:()=>Dt,AmbientLight:()=>Yg,AnimationClip:()=>Tl,AnimationMixer:()=>ng,AnimationObjectGroup:()=>gc,AnimationUtils:()=>pc,ArcCurve:()=>yp,ArrowHelper:()=>Fc,Audio:()=>md,AudioAnalyser:()=>Vm,AudioContext:()=>mp,AudioListener:()=>zm,AudioLoader:()=>eg,AxisHelper:()=>Rf,BackSide:()=>U,BasicDepthPacking:()=>mv,BasicShadowMap:()=>J,BinaryTextureLoader:()=>Bl,BlendingMode:()=>Pe,Bone:()=>Rm,BooleanKeyframeTrack:()=>Kg,BoundingBoxHelper:()=>$y,Box2:()=>oh,Box3:()=>Es,BoxBufferGeometry:()=>Fl,BoxGeometry:()=>Al,BoxHelper:()=>og,BufferAttribute:()=>dr,BufferGeometry:()=>Mr,BufferGeometryLoader:()=>pd,ByteType:()=>nh,Cache:()=>mu,Camera:()=>za,CameraHelper:()=>nm,CanvasRenderer:()=>Xy,CanvasTexture:()=>lp,CatmullRomCurve3:()=>Gm,CineonToneMapping:()=>Hs,CircleBufferGeometry:()=>Pa,CircleGeometry:()=>Nl,ClampToEdgeWrapping:()=>lc,Clock:()=>Hm,ClosedSplineCurve3:()=>$m,Color:()=>Wr,ColorKeyframeTrack:()=>hp,CompressedTexture:()=>kc,CompressedTextureLoader:()=>Om,ConeBufferGeometry:()=>Jp,ConeGeometry:()=>Qp,CubeCamera:()=>Vl,CubeGeometry:()=>Al,CubeReflectionMapping:()=>Cs,CubeRefractionMapping:()=>ua,CubeTexture:()=>Rh,CubeTextureLoader:()=>Fm,CubeUVReflectionMapping:()=>$l,CubeUVRefractionMapping:()=>Hf,CubicBezierCurve:()=>Yh,CubicBezierCurve3:()=>Uy,CubicInterpolant:()=>Gd,CullFaceBack:()=>W,CullFaceFront:()=>P,CullFaceFrontBack:()=>O,CullFaceNone:()=>B,Curve:()=>zl,CurvePath:()=>Jg,CurveUtils:()=>tc,CustomBlending:()=>rt,CylinderBufferGeometry:()=>Sf,CylinderGeometry:()=>Ql,Cylindrical:()=>yl,DataTexture:()=>es,DataTextureLoader:()=>ec,DefaultLoadingManager:()=>hc,DepthFormat:()=>it,DepthStencilFormat:()=>Ye,DepthTexture:()=>qg,DirectionalLight:()=>Tf,DirectionalLightHelper:()=>sg,DirectionalLightShadow:()=>Ef,DiscreteInterpolant:()=>Uu,DodecahedronBufferGeometry:()=>hd,DodecahedronGeometry:()=>Yp,DoubleSide:()=>ae,DstAlphaFactor:()=>Ln,DstColorFactor:()=>Cn,DynamicBufferAttribute:()=>Fv,EdgesGeometry:()=>vl,EdgesHelper:()=>Y_,EllipseCurve:()=>fh,EqualDepth:()=>$i,EquirectangularReflectionMapping:()=>tr,EquirectangularRefractionMapping:()=>el,Euler:()=>Ps,EventDispatcher:()=>Y,ExtrudeGeometry:()=>eu,Face3:()=>Oo,Face4:()=>Wm,FaceColors:()=>ue,FaceNormalsHelper:()=>$d,FileLoader:()=>So,FlatShading:()=>xe,Float32Attribute:()=>jy,Float32BufferAttribute:()=>is,Float64Attribute:()=>X_,Float64BufferAttribute:()=>Lc,FloatType:()=>Ph,Fog:()=>Pc,FogExp2:()=>Fd,Font:()=>em,FontLoader:()=>Kh,FrontFaceDirectionCCW:()=>te,FrontFaceDirectionCW:()=>q,FrontSide:()=>Q,Frustum:()=>ko,GammaEncoding:()=>zp,Geometry:()=>Ts,GeometryIdCount:()=>Hg,GeometryUtils:()=>rm,GreaterDepth:()=>Pt,GreaterEqualDepth:()=>It,GridHelper:()=>rg,Group:()=>op,HalfFloatType:()=>wc,HemisphereLight:()=>fc,HemisphereLightHelper:()=>yh,IcosahedronBufferGeometry:()=>Wh,IcosahedronGeometry:()=>cp,ImageLoader:()=>Xg,ImageUtils:()=>zv,ImmediateRenderObject:()=>Pf,InstancedBufferAttribute:()=>Zh,InstancedBufferGeometry:()=>Wu,InstancedInterleavedBuffer:()=>vd,Int16Attribute:()=>wa,Int16BufferAttribute:()=>sp,Int32Attribute:()=>qd,Int32BufferAttribute:()=>_f,Int8Attribute:()=>bu,Int8BufferAttribute:()=>kd,IntType:()=>nd,InterleavedBuffer:()=>gh,InterleavedBufferAttribute:()=>Lf,Interpolant:()=>El,InterpolateDiscrete:()=>Gs,InterpolateLinear:()=>xo,InterpolateSmooth:()=>wo,JSONLoader:()=>Qg,KeyframeTrack:()=>Hu,LOD:()=>aa,LatheBufferGeometry:()=>_o,LatheGeometry:()=>If,Layers:()=>$p,LensFlare:()=>ud,LessDepth:()=>Rt,LessEqualDepth:()=>ci,Light:()=>Js,LightShadow:()=>fd,Line:()=>pu,Line3:()=>Ol,LineBasicMaterial:()=>ol,LineCurve:()=>gd,LineCurve3:()=>hb,LineDashedMaterial:()=>dc,LinePieces:()=>Ov,LineSegments:()=>yo,LineStrip:()=>kf,LinearEncoding:()=>ts,LinearFilter:()=>Ia,LinearInterpolant:()=>qh,LinearMipMapLinearFilter:()=>Pu,LinearMipMapNearestFilter:()=>Sd,LinearToneMapping:()=>vn,Loader:()=>tu,LoadingManager:()=>Sl,LogLuvEncoding:()=>Dg,LoopOnce:()=>pr,LoopPingPong:()=>or,LoopRepeat:()=>ur,LuminanceAlphaFormat:()=>ih,LuminanceFormat:()=>Wf,MOUSE:()=>H,Material:()=>Ks,MaterialLoader:()=>Zg,Math:()=>xs,Matrix3:()=>At,Matrix4:()=>gs,MaxEquation:()=>gt,Mesh:()=>xa,MeshBasicMaterial:()=>Ba,MeshDepthMaterial:()=>mi,MeshFaceMaterial:()=>fb,MeshLambertMaterial:()=>up,MeshNormalMaterial:()=>Jl,MeshPhongMaterial:()=>Il,MeshPhysicalMaterial:()=>Vu,MeshStandardMaterial:()=>zu,MeshToonMaterial:()=>Ra,MinEquation:()=>ft,MirroredRepeatWrapping:()=>Id,MixOperation:()=>Te,MorphBlendMesh:()=>ca,MultiMaterial:()=>gu,MultiplyBlending:()=>Re,MultiplyOperation:()=>Je,NearestFilter:()=>$a,NearestMipMapLinearFilter:()=>au,NearestMipMapNearestFilter:()=>Lh,NeverDepth:()=>be,NoBlending:()=>$,NoColors:()=>re,NoToneMapping:()=>Ot,NormalBlending:()=>ne,NotEqualDepth:()=>un,NumberKeyframeTrack:()=>yu,Object3D:()=>br,ObjectLoader:()=>fp,OctahedronBufferGeometry:()=>Jc,OctahedronGeometry:()=>ch,OneFactor:()=>kn,OneMinusDstAlphaFactor:()=>xn,OneMinusDstColorFactor:()=>yn,OneMinusSrcAlphaFactor:()=>nn,OneMinusSrcColorFactor:()=>Dn,OrthographicCamera:()=>Bh,PCFShadowMap:()=>oe,PCFSoftShadowMap:()=>se,ParametricBufferGeometry:()=>Hh,ParametricGeometry:()=>Gh,Particle:()=>Gy,ParticleBasicMaterial:()=>$_,ParticleSystem:()=>W_,ParticleSystemMaterial:()=>Wy,Path:()=>rs,PerspectiveCamera:()=>wl,Plane:()=>dt,PlaneBufferGeometry:()=>oa,PlaneGeometry:()=>km,PointCloud:()=>Hy,PointCloudMaterial:()=>j_,PointLight:()=>vu,PointLightHelper:()=>vh,Points:()=>js,PointsMaterial:()=>Rc,PolarGridHelper:()=>ju,PolyhedronBufferGeometry:()=>Zl,PolyhedronGeometry:()=>Vo,PositionalAudio:()=>tg,Projector:()=>qy,PropertyBinding:()=>Oa,PropertyMixer:()=>Oc,QuadraticBezierCurve:()=>ph,QuadraticBezierCurve3:()=>im,Quaternion:()=>Rl,QuaternionKeyframeTrack:()=>Xh,QuaternionLinearInterpolant:()=>ha,REVISION:()=>D,RGBADepthPacking:()=>Sy,RGBAFormat:()=>tl,RGBA_PVRTC_2BPPV1_Format:()=>ti,RGBA_PVRTC_4BPPV1_Format:()=>yi,RGBA_S3TC_DXT1_Format:()=>Se,RGBA_S3TC_DXT3_Format:()=>$e,RGBA_S3TC_DXT5_Format:()=>_t,RGBDEncoding:()=>gv,RGBEEncoding:()=>gi,RGBEFormat:()=>Ge,RGBFormat:()=>Ac,RGBM16Encoding:()=>Ao,RGBM7Encoding:()=>Ls,RGB_ETC1_Format:()=>hi,RGB_PVRTC_2BPPV1_Format:()=>In,RGB_PVRTC_4BPPV1_Format:()=>zt,RGB_S3TC_DXT1_Format:()=>de,RawShaderMaterial:()=>Ua,Ray:()=>sa,Raycaster:()=>nu,RectAreaLight:()=>ka,RectAreaLightHelper:()=>Qh,ReinhardToneMapping:()=>ri,RepeatWrapping:()=>td,ReverseSubtractEquation:()=>He,RingBufferGeometry:()=>Os,RingGeometry:()=>Ji,Scene:()=>Nd,SceneUtils:()=>ll,ShaderChunk:()=>$s,ShaderLib:()=>Dc,ShaderMaterial:()=>Qc,ShadowMaterial:()=>$h,Shape:()=>Gu,ShapeBufferGeometry:()=>Kp,ShapeGeometry:()=>Zp,ShapePath:()=>gp,ShapeUtils:()=>La,ShortType:()=>hl,Skeleton:()=>lh,SkeletonHelper:()=>jd,SkinnedMesh:()=>$g,SmoothShading:()=>Oe,Sphere:()=>wt,SphereBufferGeometry:()=>la,SphereGeometry:()=>Uo,Spherical:()=>tm,SphericalReflectionMapping:()=>jl,Spline:()=>G_,SplineCurve:()=>_u,SplineCurve3:()=>Vy,SpotLight:()=>Hd,SpotLightHelper:()=>Wd,SpotLightShadow:()=>dp,Sprite:()=>fu,SpriteMaterial:()=>Fu,SrcAlphaFactor:()=>Jt,SrcAlphaSaturateFactor:()=>je,SrcColorFactor:()=>Ut,StereoCamera:()=>Bm,StringKeyframeTrack:()=>Nm,SubtractEquation:()=>xt,SubtractiveBlending:()=>Ue,TetrahedronBufferGeometry:()=>al,TetrahedronGeometry:()=>Bd,TextGeometry:()=>dh,Texture:()=>jo,TextureFilter:()=>th,TextureLoader:()=>Ud,TextureMapping:()=>Gf,TextureWrapping:()=>Lu,TorusBufferGeometry:()=>Nu,TorusGeometry:()=>Vd,TorusKnotBufferGeometry:()=>Ka,TorusKnotGeometry:()=>uh,Triangle:()=>Ca,TriangleFanDrawMode:()=>ds,TriangleStripDrawMode:()=>Ru,TrianglesDrawMode:()=>qa,TubeBufferGeometry:()=>jh,TubeGeometry:()=>zd,UVMapping:()=>so,Uint16Attribute:()=>Nv,Uint16BufferAttribute:()=>Nh,Uint32Attribute:()=>Bv,Uint32BufferAttribute:()=>Ou,Uint8Attribute:()=>q_,Uint8BufferAttribute:()=>gl,Uint8ClampedAttribute:()=>fa,Uint8ClampedBufferAttribute:()=>Fh,Uncharted2ToneMapping:()=>Fi,Uniform:()=>Um,UniformsLib:()=>os,UniformsUtils:()=>nl,UnsignedByteType:()=>df,UnsignedInt248Type:()=>pf,UnsignedIntType:()=>ff,UnsignedShort4444Type:()=>Tg,UnsignedShort5551Type:()=>Ed,UnsignedShort565Type:()=>to,UnsignedShortType:()=>hf,Vector2:()=>Xi,Vector3:()=>Qt,Vector4:()=>$o,VectorKeyframeTrack:()=>Mf,Vertex:()=>jm,VertexColors:()=>z,VertexNormalsHelper:()=>ig,VideoTexture:()=>ap,WebGLRenderTarget:()=>Ic,WebGLRenderTargetCube:()=>rh,WebGLRenderer:()=>Uh,WireframeGeometry:()=>dd,WireframeHelper:()=>pb,WrapAroundEnding:()=>us,XHRLoader:()=>Jh,ZeroCurvatureEnding:()=>cs,ZeroFactor:()=>bt,ZeroSlopeEnding:()=>Sa,sRGBEncoding:()=>Mg}),void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Math.sign&&(Math.sign=function(a){return a<0?-1:a>0?1:+a}),void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(a){if(null==a)throw new TypeError("Cannot convert undefined or null to object");for(var d=Object(a),g=1;g<arguments.length;g++){var y=arguments[g];if(null!=y)for(var A in y)Object.prototype.hasOwnProperty.call(y,A)&&(d[A]=y[A])}return d}),Object.assign(Y.prototype,{addEventListener:function(a,d){void 0===this._listeners&&(this._listeners={});var g=this._listeners;void 0===g[a]&&(g[a]=[]),-1===g[a].indexOf(d)&&g[a].push(d)},hasEventListener:function(a,d){if(void 0===this._listeners)return!1;var g=this._listeners;return void 0!==g[a]&&-1!==g[a].indexOf(d)},removeEventListener:function(a,d){if(void 0!==this._listeners){var y=this._listeners[a];if(void 0!==y){var A=y.indexOf(d);-1!==A&&y.splice(A,1)}}},dispatchEvent:function(a){if(void 0!==this._listeners){var g=this._listeners[a.type];if(void 0!==g){a.target=this;var y=[],A=0,M=g.length;for(A=0;A<M;A++)y[A]=g[A];for(A=0;A<M;A++)y[A].call(this,a)}}}});var y,a,d,g,D="83",H={LEFT:0,MIDDLE:1,RIGHT:2},B=0,W=1,P=2,O=3,q=0,te=1,J=0,oe=1,se=2,Q=0,U=1,ae=2,xe=1,Oe=2,re=0,ue=1,z=2,$=0,ne=1,ge=2,Ue=3,Re=4,rt=5,Pe={NoBlending:$,NormalBlending:ne,AdditiveBlending:ge,SubtractiveBlending:Ue,MultiplyBlending:Re,CustomBlending:rt},at=100,xt=101,He=102,ft=103,gt=104,bt=200,kn=201,Ut=202,Dn=203,Jt=204,nn=205,Ln=206,xn=207,Cn=208,yn=209,je=210,be=0,Dt=1,Rt=2,ci=3,$i=4,It=5,Pt=6,un=7,Je=0,Te=1,De=2,Ot=0,vn=1,ri=2,Fi=3,Hs=4,so=300,Cs=301,ua=302,tr=303,el=304,jl=305,$l=306,Hf=307,Gf={UVMapping:so,CubeReflectionMapping:Cs,CubeRefractionMapping:ua,EquirectangularReflectionMapping:tr,EquirectangularRefractionMapping:el,SphericalReflectionMapping:jl,CubeUVReflectionMapping:$l,CubeUVRefractionMapping:Hf},td=1e3,lc=1001,Id=1002,Lu={RepeatWrapping:td,ClampToEdgeWrapping:lc,MirroredRepeatWrapping:Id},$a=1003,Lh=1004,au=1005,Ia=1006,Sd=1007,Pu=1008,th={NearestFilter:$a,NearestMipMapNearestFilter:Lh,NearestMipMapLinearFilter:au,LinearFilter:Ia,LinearMipMapNearestFilter:Sd,LinearMipMapLinearFilter:Pu},df=1009,nh=1010,hl=1011,hf=1012,nd=1013,ff=1014,Ph=1015,wc=1016,Tg=1017,Ed=1018,to=1019,pf=1020,fl=1021,Ac=1022,tl=1023,Wf=1024,ih=1025,Ge=tl,it=1026,Ye=1027,de=2001,Se=2002,$e=2003,_t=2004,zt=2100,In=2101,yi=2102,ti=2103,hi=2151,pr=2200,ur=2201,or=2202,Gs=2300,xo=2301,wo=2302,cs=2400,Sa=2401,us=2402,qa=0,Ru=1,ds=2,ts=3e3,Mg=3001,zp=3007,gi=3002,Dg=3003,Ls=3004,Ao=3005,gv=3006,mv=3200,Sy=3201,xs={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:(a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),d=new Array(36),g=0,function(){for(var M=0;M<36;M++)8===M||13===M||18===M||23===M?d[M]="-":14===M?d[M]="4":(g<=2&&(g=33554432+16777216*Math.random()|0),y=15&g,g>>=4,d[M]=a[19===M?3&y|8:y]);return d.join("")}),clamp:function(a,d,g){return Math.max(d,Math.min(g,a))},euclideanModulo:function(a,d){return(a%d+d)%d},mapLinear:function(a,d,g,y,A){return y+(a-d)*(A-y)/(g-d)},lerp:function(a,d,g){return(1-g)*a+g*d},smoothstep:function(a,d,g){return a<=d?0:a>=g?1:(a=(a-d)/(g-d))*a*(3-2*a)},smootherstep:function(a,d,g){return a<=d?0:a>=g?1:(a=(a-d)/(g-d))*a*a*(a*(6*a-15)+10)},randInt:function(a,d){return a+Math.floor(Math.random()*(d-a+1))},randFloat:function(a,d){return a+Math.random()*(d-a)},randFloatSpread:function(a){return a*(.5-Math.random())},degToRad:function(a){return a*xs.DEG2RAD},radToDeg:function(a){return a*xs.RAD2DEG},isPowerOfTwo:function(a){return 0==(a&a-1)&&0!==a},nearestPowerOfTwo:function(a){return Math.pow(2,Math.round(Math.log(a)/Math.LN2))},nextPowerOfTwo:function(a){return a--,a|=a>>1,a|=a>>2,a|=a>>4,a|=a>>8,a|=a>>16,++a}};function Xi(a,d){this.x=a||0,this.y=d||0}Xi.prototype={constructor:Xi,isVector2:!0,get width(){return this.x},set width(a){this.x=a},get height(){return this.y},set height(a){this.y=a},set:function(a,d){return this.x=a,this.y=d,this},setScalar:function(a){return this.x=a,this.y=a,this},setX:function(a){return this.x=a,this},setY:function(a){return this.y=a,this},setComponent:function(a,d){switch(a){case 0:this.x=d;break;case 1:this.y=d;break;default:throw new Error("index is out of range: "+a)}return this},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+a)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(a){return this.x=a.x,this.y=a.y,this},add:function(a,d){return void 0!==d?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,d)):(this.x+=a.x,this.y+=a.y,this)},addScalar:function(a){return this.x+=a,this.y+=a,this},addVectors:function(a,d){return this.x=a.x+d.x,this.y=a.y+d.y,this},addScaledVector:function(a,d){return this.x+=a.x*d,this.y+=a.y*d,this},sub:function(a,d){return void 0!==d?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,d)):(this.x-=a.x,this.y-=a.y,this)},subScalar:function(a){return this.x-=a,this.y-=a,this},subVectors:function(a,d){return this.x=a.x-d.x,this.y=a.y-d.y,this},multiply:function(a){return this.x*=a.x,this.y*=a.y,this},multiplyScalar:function(a){return isFinite(a)?(this.x*=a,this.y*=a):(this.x=0,this.y=0),this},divide:function(a){return this.x/=a.x,this.y/=a.y,this},divideScalar:function(a){return this.multiplyScalar(1/a)},min:function(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this},max:function(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this},clamp:function(a,d){return this.x=Math.max(a.x,Math.min(d.x,this.x)),this.y=Math.max(a.y,Math.min(d.y,this.y)),this},clampScalar:function(){var a,d;return function(y,A){return void 0===a&&(a=new Xi,d=new Xi),a.set(y,y),d.set(A,A),this.clamp(a,d)}}(),clampLength:function(a,d){var g=this.length();return this.multiplyScalar(Math.max(a,Math.min(d,g))/g)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(a){return this.x*a.x+this.y*a.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},angle:function(){var a=Math.atan2(this.y,this.x);return a<0&&(a+=2*Math.PI),a},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var d=this.x-a.x,g=this.y-a.y;return d*d+g*g},distanceToManhattan:function(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)},setLength:function(a){return this.multiplyScalar(a/this.length())},lerp:function(a,d){return this.x+=(a.x-this.x)*d,this.y+=(a.y-this.y)*d,this},lerpVectors:function(a,d,g){return this.subVectors(d,a).multiplyScalar(g).add(a)},equals:function(a){return a.x===this.x&&a.y===this.y},fromArray:function(a,d){return void 0===d&&(d=0),this.x=a[d],this.y=a[d+1],this},toArray:function(a,d){return void 0===a&&(a=[]),void 0===d&&(d=0),a[d]=this.x,a[d+1]=this.y,a},fromAttribute:function(a,d,g){return void 0!==g&&console.warn("THREE.Vector2: offset has been removed from .fromAttribute()."),this.x=a.getX(d),this.y=a.getY(d),this},rotateAround:function(a,d){var g=Math.cos(d),y=Math.sin(d),A=this.x-a.x,M=this.y-a.y;return this.x=A*g-M*y+a.x,this.y=A*y+M*g+a.y,this}};var Ey=0;function jo(a,d,g,y,A,M,R,N,ie,ee){Object.defineProperty(this,"id",{value:Ey++}),this.uuid=xs.generateUUID(),this.name="",this.image=void 0!==a?a:jo.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==d?d:jo.DEFAULT_MAPPING,this.wrapS=void 0!==g?g:lc,this.wrapT=void 0!==y?y:lc,this.magFilter=void 0!==A?A:Ia,this.minFilter=void 0!==M?M:Pu,this.anisotropy=void 0!==ie?ie:1,this.format=void 0!==R?R:tl,this.type=void 0!==N?N:df,this.offset=new Xi(0,0),this.repeat=new Xi(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==ee?ee:ts,this.version=0,this.onUpdate=null}function $o(a,d,g,y){this.x=a||0,this.y=d||0,this.z=g||0,this.w=void 0!==y?y:1}function Ic(a,d,g){this.uuid=xs.generateUUID(),this.width=a,this.height=d,this.scissor=new $o(0,0,a,d),this.scissorTest=!1,this.viewport=new $o(0,0,a,d),void 0===(g=g||{}).minFilter&&(g.minFilter=Ia),this.texture=new jo(void 0,void 0,g.wrapS,g.wrapT,g.magFilter,g.minFilter,g.format,g.type,g.anisotropy,g.encoding),this.depthBuffer=void 0===g.depthBuffer||g.depthBuffer,this.stencilBuffer=void 0===g.stencilBuffer||g.stencilBuffer,this.depthTexture=void 0!==g.depthTexture?g.depthTexture:null}function rh(a,d,g){Ic.call(this,a,d,g),this.activeCubeFace=0,this.activeMipMapLevel=0}function Rl(a,d,g,y){this._x=a||0,this._y=d||0,this._z=g||0,this._w=void 0!==y?y:1}function Qt(a,d,g){this.x=a||0,this.y=d||0,this.z=g||0}function gs(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function Rh(a,d,g,y,A,M,R,N,ie,ee){jo.call(this,a=void 0!==a?a:[],d=void 0!==d?d:Cs,g,y,A,M,R,N,ie,ee),this.flipY=!1}jo.DEFAULT_IMAGE=void 0,jo.DEFAULT_MAPPING=so,jo.prototype={constructor:jo,isTexture:!0,set needsUpdate(a){!0===a&&this.version++},clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.image=a.image,this.mipmaps=a.mipmaps.slice(0),this.mapping=a.mapping,this.wrapS=a.wrapS,this.wrapT=a.wrapT,this.magFilter=a.magFilter,this.minFilter=a.minFilter,this.anisotropy=a.anisotropy,this.format=a.format,this.type=a.type,this.offset.copy(a.offset),this.repeat.copy(a.repeat),this.generateMipmaps=a.generateMipmaps,this.premultiplyAlpha=a.premultiplyAlpha,this.flipY=a.flipY,this.unpackAlignment=a.unpackAlignment,this.encoding=a.encoding,this},toJSON:function(a){if(void 0!==a.textures[this.uuid])return a.textures[this.uuid];var g={metadata:{version:4.4,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var y=this.image;void 0===y.uuid&&(y.uuid=xs.generateUUID()),void 0===a.images[y.uuid]&&(a.images[y.uuid]={uuid:y.uuid,url:function d(A){var M;return void 0!==A.toDataURL?M=A:((M=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")).width=A.width,M.height=A.height,M.getContext("2d").drawImage(A,0,0,A.width,A.height)),M.width>2048||M.height>2048?M.toDataURL("image/jpeg",.6):M.toDataURL("image/png")}(y)}),g.image=y.uuid}return a.textures[this.uuid]=g,g},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(a){if(this.mapping===so){if(a.multiply(this.repeat),a.add(this.offset),a.x<0||a.x>1)switch(this.wrapS){case td:a.x=a.x-Math.floor(a.x);break;case lc:a.x=a.x<0?0:1;break;case Id:a.x=1===Math.abs(Math.floor(a.x)%2)?Math.ceil(a.x)-a.x:a.x-Math.floor(a.x)}if(a.y<0||a.y>1)switch(this.wrapT){case td:a.y=a.y-Math.floor(a.y);break;case lc:a.y=a.y<0?0:1;break;case Id:a.y=1===Math.abs(Math.floor(a.y)%2)?Math.ceil(a.y)-a.y:a.y-Math.floor(a.y)}this.flipY&&(a.y=1-a.y)}}},Object.assign(jo.prototype,Y.prototype),$o.prototype={constructor:$o,isVector4:!0,set:function(a,d,g,y){return this.x=a,this.y=d,this.z=g,this.w=y,this},setScalar:function(a){return this.x=a,this.y=a,this.z=a,this.w=a,this},setX:function(a){return this.x=a,this},setY:function(a){return this.y=a,this},setZ:function(a){return this.z=a,this},setW:function(a){return this.w=a,this},setComponent:function(a,d){switch(a){case 0:this.x=d;break;case 1:this.y=d;break;case 2:this.z=d;break;case 3:this.w=d;break;default:throw new Error("index is out of range: "+a)}return this},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+a)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(a){return this.x=a.x,this.y=a.y,this.z=a.z,this.w=void 0!==a.w?a.w:1,this},add:function(a,d){return void 0!==d?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,d)):(this.x+=a.x,this.y+=a.y,this.z+=a.z,this.w+=a.w,this)},addScalar:function(a){return this.x+=a,this.y+=a,this.z+=a,this.w+=a,this},addVectors:function(a,d){return this.x=a.x+d.x,this.y=a.y+d.y,this.z=a.z+d.z,this.w=a.w+d.w,this},addScaledVector:function(a,d){return this.x+=a.x*d,this.y+=a.y*d,this.z+=a.z*d,this.w+=a.w*d,this},sub:function(a,d){return void 0!==d?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,d)):(this.x-=a.x,this.y-=a.y,this.z-=a.z,this.w-=a.w,this)},subScalar:function(a){return this.x-=a,this.y-=a,this.z-=a,this.w-=a,this},subVectors:function(a,d){return this.x=a.x-d.x,this.y=a.y-d.y,this.z=a.z-d.z,this.w=a.w-d.w,this},multiplyScalar:function(a){return isFinite(a)?(this.x*=a,this.y*=a,this.z*=a,this.w*=a):(this.x=0,this.y=0,this.z=0,this.w=0),this},applyMatrix4:function(a){var d=this.x,g=this.y,y=this.z,A=this.w,M=a.elements;return this.x=M[0]*d+M[4]*g+M[8]*y+M[12]*A,this.y=M[1]*d+M[5]*g+M[9]*y+M[13]*A,this.z=M[2]*d+M[6]*g+M[10]*y+M[14]*A,this.w=M[3]*d+M[7]*g+M[11]*y+M[15]*A,this},divideScalar:function(a){return this.multiplyScalar(1/a)},setAxisAngleFromQuaternion:function(a){this.w=2*Math.acos(a.w);var d=Math.sqrt(1-a.w*a.w);return d<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=a.x/d,this.y=a.y/d,this.z=a.z/d),this},setAxisAngleFromRotationMatrix:function(a){var d,g,y,A,M=.01,R=.1,N=a.elements,ie=N[0],ee=N[4],fe=N[8],me=N[1],Le=N[5],ke=N[9],Fe=N[2],nt=N[6],tt=N[10];if(Math.abs(ee-me)<M&&Math.abs(fe-Fe)<M&&Math.abs(ke-nt)<M){if(Math.abs(ee+me)<R&&Math.abs(fe+Fe)<R&&Math.abs(ke+nt)<R&&Math.abs(ie+Le+tt-3)<R)return this.set(1,0,0,0),this;d=Math.PI;var Ke=(ie+1)/2,pt=(Le+1)/2,vt=(tt+1)/2,qt=(ee+me)/4,Bt=(fe+Fe)/4,cn=(ke+nt)/4;return Ke>pt&&Ke>vt?Ke<M?(g=0,y=.707106781,A=.707106781):(y=qt/(g=Math.sqrt(Ke)),A=Bt/g):pt>vt?pt<M?(g=.707106781,y=0,A=.707106781):(g=qt/(y=Math.sqrt(pt)),A=cn/y):vt<M?(g=.707106781,y=.707106781,A=0):(g=Bt/(A=Math.sqrt(vt)),y=cn/A),this.set(g,y,A,d),this}var sn=Math.sqrt((nt-ke)*(nt-ke)+(fe-Fe)*(fe-Fe)+(me-ee)*(me-ee));return Math.abs(sn)<.001&&(sn=1),this.x=(nt-ke)/sn,this.y=(fe-Fe)/sn,this.z=(me-ee)/sn,this.w=Math.acos((ie+Le+tt-1)/2),this},min:function(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this.z=Math.min(this.z,a.z),this.w=Math.min(this.w,a.w),this},max:function(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this.z=Math.max(this.z,a.z),this.w=Math.max(this.w,a.w),this},clamp:function(a,d){return this.x=Math.max(a.x,Math.min(d.x,this.x)),this.y=Math.max(a.y,Math.min(d.y,this.y)),this.z=Math.max(a.z,Math.min(d.z,this.z)),this.w=Math.max(a.w,Math.min(d.w,this.w)),this},clampScalar:function(){var a,d;return function(y,A){return void 0===a&&(a=new $o,d=new $o),a.set(y,y,y,y),d.set(A,A,A,A),this.clamp(a,d)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){return this.multiplyScalar(a/this.length())},lerp:function(a,d){return this.x+=(a.x-this.x)*d,this.y+=(a.y-this.y)*d,this.z+=(a.z-this.z)*d,this.w+=(a.w-this.w)*d,this},lerpVectors:function(a,d,g){return this.subVectors(d,a).multiplyScalar(g).add(a)},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z&&a.w===this.w},fromArray:function(a,d){return void 0===d&&(d=0),this.x=a[d],this.y=a[d+1],this.z=a[d+2],this.w=a[d+3],this},toArray:function(a,d){return void 0===a&&(a=[]),void 0===d&&(d=0),a[d]=this.x,a[d+1]=this.y,a[d+2]=this.z,a[d+3]=this.w,a},fromAttribute:function(a,d,g){return void 0!==g&&console.warn("THREE.Vector4: offset has been removed from .fromAttribute()."),this.x=a.getX(d),this.y=a.getY(d),this.z=a.getZ(d),this.w=a.getW(d),this}},Object.assign(Ic.prototype,Y.prototype,{isWebGLRenderTarget:!0,setSize:function(a,d){(this.width!==a||this.height!==d)&&(this.width=a,this.height=d,this.dispose()),this.viewport.set(0,0,a,d),this.scissor.set(0,0,a,d)},clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.width=a.width,this.height=a.height,this.viewport.copy(a.viewport),this.texture=a.texture.clone(),this.depthBuffer=a.depthBuffer,this.stencilBuffer=a.stencilBuffer,this.depthTexture=a.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),(rh.prototype=Object.create(Ic.prototype)).constructor=rh,rh.prototype.isWebGLRenderTargetCube=!0,Rl.prototype={constructor:Rl,get x(){return this._x},set x(a){this._x=a,this.onChangeCallback()},get y(){return this._y},set y(a){this._y=a,this.onChangeCallback()},get z(){return this._z},set z(a){this._z=a,this.onChangeCallback()},get w(){return this._w},set w(a){this._w=a,this.onChangeCallback()},set:function(a,d,g,y){return this._x=a,this._y=d,this._z=g,this._w=y,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(a){return this._x=a.x,this._y=a.y,this._z=a.z,this._w=a.w,this.onChangeCallback(),this},setFromEuler:function(a,d){if(!1===(a&&a.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var g=Math.cos(a._x/2),y=Math.cos(a._y/2),A=Math.cos(a._z/2),M=Math.sin(a._x/2),R=Math.sin(a._y/2),N=Math.sin(a._z/2),ie=a.order;return"XYZ"===ie?(this._x=M*y*A+g*R*N,this._y=g*R*A-M*y*N,this._z=g*y*N+M*R*A,this._w=g*y*A-M*R*N):"YXZ"===ie?(this._x=M*y*A+g*R*N,this._y=g*R*A-M*y*N,this._z=g*y*N-M*R*A,this._w=g*y*A+M*R*N):"ZXY"===ie?(this._x=M*y*A-g*R*N,this._y=g*R*A+M*y*N,this._z=g*y*N+M*R*A,this._w=g*y*A-M*R*N):"ZYX"===ie?(this._x=M*y*A-g*R*N,this._y=g*R*A+M*y*N,this._z=g*y*N-M*R*A,this._w=g*y*A+M*R*N):"YZX"===ie?(this._x=M*y*A+g*R*N,this._y=g*R*A+M*y*N,this._z=g*y*N-M*R*A,this._w=g*y*A-M*R*N):"XZY"===ie&&(this._x=M*y*A-g*R*N,this._y=g*R*A-M*y*N,this._z=g*y*N+M*R*A,this._w=g*y*A+M*R*N),!1!==d&&this.onChangeCallback(),this},setFromAxisAngle:function(a,d){var g=d/2,y=Math.sin(g);return this._x=a.x*y,this._y=a.y*y,this._z=a.z*y,this._w=Math.cos(g),this.onChangeCallback(),this},setFromRotationMatrix:function(a){var Le,d=a.elements,g=d[0],y=d[4],A=d[8],M=d[1],R=d[5],N=d[9],ie=d[2],ee=d[6],fe=d[10],me=g+R+fe;return me>0?(Le=.5/Math.sqrt(me+1),this._w=.25/Le,this._x=(ee-N)*Le,this._y=(A-ie)*Le,this._z=(M-y)*Le):g>R&&g>fe?(Le=2*Math.sqrt(1+g-R-fe),this._w=(ee-N)/Le,this._x=.25*Le,this._y=(y+M)/Le,this._z=(A+ie)/Le):R>fe?(Le=2*Math.sqrt(1+R-g-fe),this._w=(A-ie)/Le,this._x=(y+M)/Le,this._y=.25*Le,this._z=(N+ee)/Le):(Le=2*Math.sqrt(1+fe-g-R),this._w=(M-y)/Le,this._x=(A+ie)/Le,this._y=(N+ee)/Le,this._z=.25*Le),this.onChangeCallback(),this},setFromUnitVectors:function(){var a,d;return function(A,M){return void 0===a&&(a=new Qt),(d=A.dot(M)+1)<1e-6?(d=0,Math.abs(A.x)>Math.abs(A.z)?a.set(-A.y,A.x,0):a.set(0,-A.z,A.y)):a.crossVectors(A,M),this._x=a.x,this._y=a.y,this._z=a.z,this._w=d,this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(a){return this._x*a._x+this._y*a._y+this._z*a._z+this._w*a._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var a=this.length();return 0===a?(this._x=0,this._y=0,this._z=0,this._w=1):(this._x=this._x*(a=1/a),this._y=this._y*a,this._z=this._z*a,this._w=this._w*a),this.onChangeCallback(),this},multiply:function(a,d){return void 0!==d?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(a,d)):this.multiplyQuaternions(this,a)},premultiply:function(a){return this.multiplyQuaternions(a,this)},multiplyQuaternions:function(a,d){var g=a._x,y=a._y,A=a._z,M=a._w,R=d._x,N=d._y,ie=d._z,ee=d._w;return this._x=g*ee+M*R+y*ie-A*N,this._y=y*ee+M*N+A*R-g*ie,this._z=A*ee+M*ie+g*N-y*R,this._w=M*ee-g*R-y*N-A*ie,this.onChangeCallback(),this},slerp:function(a,d){if(0===d)return this;if(1===d)return this.copy(a);var g=this._x,y=this._y,A=this._z,M=this._w,R=M*a._w+g*a._x+y*a._y+A*a._z;if(R<0?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=-a._z,R=-R):this.copy(a),R>=1)return this._w=M,this._x=g,this._y=y,this._z=A,this;var N=Math.sqrt(1-R*R);if(Math.abs(N)<.001)return this._w=.5*(M+this._w),this._x=.5*(g+this._x),this._y=.5*(y+this._y),this._z=.5*(A+this._z),this;var ie=Math.atan2(N,R),ee=Math.sin((1-d)*ie)/N,fe=Math.sin(d*ie)/N;return this._w=M*ee+this._w*fe,this._x=g*ee+this._x*fe,this._y=y*ee+this._y*fe,this._z=A*ee+this._z*fe,this.onChangeCallback(),this},equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._w===this._w},fromArray:function(a,d){return void 0===d&&(d=0),this._x=a[d],this._y=a[d+1],this._z=a[d+2],this._w=a[d+3],this.onChangeCallback(),this},toArray:function(a,d){return void 0===a&&(a=[]),void 0===d&&(d=0),a[d]=this._x,a[d+1]=this._y,a[d+2]=this._z,a[d+3]=this._w,a},onChange:function(a){return this.onChangeCallback=a,this},onChangeCallback:function(){}},Object.assign(Rl,{slerp:function(a,d,g,y){return g.copy(a).slerp(d,y)},slerpFlat:function(a,d,g,y,A,M,R){var N=g[y+0],ie=g[y+1],ee=g[y+2],fe=g[y+3],me=A[M+0],Le=A[M+1],ke=A[M+2],Fe=A[M+3];if(fe!==Fe||N!==me||ie!==Le||ee!==ke){var nt=1-R,tt=N*me+ie*Le+ee*ke+fe*Fe,Ke=tt>=0?1:-1,pt=1-tt*tt;if(pt>Number.EPSILON){var vt=Math.sqrt(pt),qt=Math.atan2(vt,tt*Ke);nt=Math.sin(nt*qt)/vt,R=Math.sin(R*qt)/vt}var Bt=R*Ke;if(N=N*nt+me*Bt,ie=ie*nt+Le*Bt,ee=ee*nt+ke*Bt,fe=fe*nt+Fe*Bt,nt===1-R){var cn=1/Math.sqrt(N*N+ie*ie+ee*ee+fe*fe);N*=cn,ie*=cn,ee*=cn,fe*=cn}}a[d]=N,a[d+1]=ie,a[d+2]=ee,a[d+3]=fe}}),Qt.prototype={constructor:Qt,isVector3:!0,set:function(a,d,g){return this.x=a,this.y=d,this.z=g,this},setScalar:function(a){return this.x=a,this.y=a,this.z=a,this},setX:function(a){return this.x=a,this},setY:function(a){return this.y=a,this},setZ:function(a){return this.z=a,this},setComponent:function(a,d){switch(a){case 0:this.x=d;break;case 1:this.y=d;break;case 2:this.z=d;break;default:throw new Error("index is out of range: "+a)}return this},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+a)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(a){return this.x=a.x,this.y=a.y,this.z=a.z,this},add:function(a,d){return void 0!==d?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,d)):(this.x+=a.x,this.y+=a.y,this.z+=a.z,this)},addScalar:function(a){return this.x+=a,this.y+=a,this.z+=a,this},addVectors:function(a,d){return this.x=a.x+d.x,this.y=a.y+d.y,this.z=a.z+d.z,this},addScaledVector:function(a,d){return this.x+=a.x*d,this.y+=a.y*d,this.z+=a.z*d,this},sub:function(a,d){return void 0!==d?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,d)):(this.x-=a.x,this.y-=a.y,this.z-=a.z,this)},subScalar:function(a){return this.x-=a,this.y-=a,this.z-=a,this},subVectors:function(a,d){return this.x=a.x-d.x,this.y=a.y-d.y,this.z=a.z-d.z,this},multiply:function(a,d){return void 0!==d?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(a,d)):(this.x*=a.x,this.y*=a.y,this.z*=a.z,this)},multiplyScalar:function(a){return isFinite(a)?(this.x*=a,this.y*=a,this.z*=a):(this.x=0,this.y=0,this.z=0),this},multiplyVectors:function(a,d){return this.x=a.x*d.x,this.y=a.y*d.y,this.z=a.z*d.z,this},applyEuler:function(){var a;return function(g){return!1===(g&&g.isEuler)&&console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),void 0===a&&(a=new Rl),this.applyQuaternion(a.setFromEuler(g))}}(),applyAxisAngle:function(){var a;return function(g,y){return void 0===a&&(a=new Rl),this.applyQuaternion(a.setFromAxisAngle(g,y))}}(),applyMatrix3:function(a){var d=this.x,g=this.y,y=this.z,A=a.elements;return this.x=A[0]*d+A[3]*g+A[6]*y,this.y=A[1]*d+A[4]*g+A[7]*y,this.z=A[2]*d+A[5]*g+A[8]*y,this},applyMatrix4:function(a){var d=this.x,g=this.y,y=this.z,A=a.elements;return this.x=A[0]*d+A[4]*g+A[8]*y+A[12],this.y=A[1]*d+A[5]*g+A[9]*y+A[13],this.z=A[2]*d+A[6]*g+A[10]*y+A[14],this},applyProjection:function(a){var d=this.x,g=this.y,y=this.z,A=a.elements,M=1/(A[3]*d+A[7]*g+A[11]*y+A[15]);return this.x=(A[0]*d+A[4]*g+A[8]*y+A[12])*M,this.y=(A[1]*d+A[5]*g+A[9]*y+A[13])*M,this.z=(A[2]*d+A[6]*g+A[10]*y+A[14])*M,this},applyQuaternion:function(a){var d=this.x,g=this.y,y=this.z,A=a.x,M=a.y,R=a.z,N=a.w,ie=N*d+M*y-R*g,ee=N*g+R*d-A*y,fe=N*y+A*g-M*d,me=-A*d-M*g-R*y;return this.x=ie*N+me*-A+ee*-R-fe*-M,this.y=ee*N+me*-M+fe*-A-ie*-R,this.z=fe*N+me*-R+ie*-M-ee*-A,this},project:function(){var a;return function(g){return void 0===a&&(a=new gs),a.multiplyMatrices(g.projectionMatrix,a.getInverse(g.matrixWorld)),this.applyProjection(a)}}(),unproject:function(){var a;return function(g){return void 0===a&&(a=new gs),a.multiplyMatrices(g.matrixWorld,a.getInverse(g.projectionMatrix)),this.applyProjection(a)}}(),transformDirection:function(a){var d=this.x,g=this.y,y=this.z,A=a.elements;return this.x=A[0]*d+A[4]*g+A[8]*y,this.y=A[1]*d+A[5]*g+A[9]*y,this.z=A[2]*d+A[6]*g+A[10]*y,this.normalize()},divide:function(a){return this.x/=a.x,this.y/=a.y,this.z/=a.z,this},divideScalar:function(a){return this.multiplyScalar(1/a)},min:function(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this.z=Math.min(this.z,a.z),this},max:function(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this.z=Math.max(this.z,a.z),this},clamp:function(a,d){return this.x=Math.max(a.x,Math.min(d.x,this.x)),this.y=Math.max(a.y,Math.min(d.y,this.y)),this.z=Math.max(a.z,Math.min(d.z,this.z)),this},clampScalar:function(){var a,d;return function(y,A){return void 0===a&&(a=new Qt,d=new Qt),a.set(y,y,y),d.set(A,A,A),this.clamp(a,d)}}(),clampLength:function(a,d){var g=this.length();return this.multiplyScalar(Math.max(a,Math.min(d,g))/g)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){return this.multiplyScalar(a/this.length())},lerp:function(a,d){return this.x+=(a.x-this.x)*d,this.y+=(a.y-this.y)*d,this.z+=(a.z-this.z)*d,this},lerpVectors:function(a,d,g){return this.subVectors(d,a).multiplyScalar(g).add(a)},cross:function(a,d){if(void 0!==d)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(a,d);var g=this.x,y=this.y,A=this.z;return this.x=y*a.z-A*a.y,this.y=A*a.x-g*a.z,this.z=g*a.y-y*a.x,this},crossVectors:function(a,d){var g=a.x,y=a.y,A=a.z,M=d.x,R=d.y,N=d.z;return this.x=y*N-A*R,this.y=A*M-g*N,this.z=g*R-y*M,this},projectOnVector:function(a){var d=a.dot(this)/a.lengthSq();return this.copy(a).multiplyScalar(d)},projectOnPlane:function(){var a;return function(g){return void 0===a&&(a=new Qt),a.copy(this).projectOnVector(g),this.sub(a)}}(),reflect:function(){var a;return function(g){return void 0===a&&(a=new Qt),this.sub(a.copy(g).multiplyScalar(2*this.dot(g)))}}(),angleTo:function(a){var d=this.dot(a)/Math.sqrt(this.lengthSq()*a.lengthSq());return Math.acos(xs.clamp(d,-1,1))},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var d=this.x-a.x,g=this.y-a.y,y=this.z-a.z;return d*d+g*g+y*y},distanceToManhattan:function(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)+Math.abs(this.z-a.z)},setFromSpherical:function(a){var d=Math.sin(a.phi)*a.radius;return this.x=d*Math.sin(a.theta),this.y=Math.cos(a.phi)*a.radius,this.z=d*Math.cos(a.theta),this},setFromCylindrical:function(a){return this.x=a.radius*Math.sin(a.theta),this.y=a.y,this.z=a.radius*Math.cos(a.theta),this},setFromMatrixPosition:function(a){return this.setFromMatrixColumn(a,3)},setFromMatrixScale:function(a){var d=this.setFromMatrixColumn(a,0).length(),g=this.setFromMatrixColumn(a,1).length(),y=this.setFromMatrixColumn(a,2).length();return this.x=d,this.y=g,this.z=y,this},setFromMatrixColumn:function(a,d){if("number"==typeof a){console.warn("THREE.Vector3: setFromMatrixColumn now expects ( matrix, index ).");var g=a;a=d,d=g}return this.fromArray(a.elements,4*d)},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z},fromArray:function(a,d){return void 0===d&&(d=0),this.x=a[d],this.y=a[d+1],this.z=a[d+2],this},toArray:function(a,d){return void 0===a&&(a=[]),void 0===d&&(d=0),a[d]=this.x,a[d+1]=this.y,a[d+2]=this.z,a},fromAttribute:function(a,d,g){return void 0!==g&&console.warn("THREE.Vector3: offset has been removed from .fromAttribute()."),this.x=a.getX(d),this.y=a.getY(d),this.z=a.getZ(d),this}},gs.prototype={constructor:gs,isMatrix4:!0,set:function(a,d,g,y,A,M,R,N,ie,ee,fe,me,Le,ke,Fe,nt){var tt=this.elements;return tt[0]=a,tt[4]=d,tt[8]=g,tt[12]=y,tt[1]=A,tt[5]=M,tt[9]=R,tt[13]=N,tt[2]=ie,tt[6]=ee,tt[10]=fe,tt[14]=me,tt[3]=Le,tt[7]=ke,tt[11]=Fe,tt[15]=nt,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new gs).fromArray(this.elements)},copy:function(a){return this.elements.set(a.elements),this},copyPosition:function(a){var d=this.elements,g=a.elements;return d[12]=g[12],d[13]=g[13],d[14]=g[14],this},extractBasis:function(a,d,g){return a.setFromMatrixColumn(this,0),d.setFromMatrixColumn(this,1),g.setFromMatrixColumn(this,2),this},makeBasis:function(a,d,g){return this.set(a.x,d.x,g.x,0,a.y,d.y,g.y,0,a.z,d.z,g.z,0,0,0,0,1),this},extractRotation:function(){var a;return function(g){void 0===a&&(a=new Qt);var y=this.elements,A=g.elements,M=1/a.setFromMatrixColumn(g,0).length(),R=1/a.setFromMatrixColumn(g,1).length(),N=1/a.setFromMatrixColumn(g,2).length();return y[0]=A[0]*M,y[1]=A[1]*M,y[2]=A[2]*M,y[4]=A[4]*R,y[5]=A[5]*R,y[6]=A[6]*R,y[8]=A[8]*N,y[9]=A[9]*N,y[10]=A[10]*N,this}}(),makeRotationFromEuler:function(a){!1===(a&&a.isEuler)&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var d=this.elements,g=a.x,y=a.y,A=a.z,M=Math.cos(g),R=Math.sin(g),N=Math.cos(y),ie=Math.sin(y),ee=Math.cos(A),fe=Math.sin(A);if("XYZ"===a.order){var me=M*ee,Le=M*fe,ke=R*ee,Fe=R*fe;d[0]=N*ee,d[4]=-N*fe,d[8]=ie,d[1]=Le+ke*ie,d[5]=me-Fe*ie,d[9]=-R*N,d[2]=Fe-me*ie,d[6]=ke+Le*ie,d[10]=M*N}else if("YXZ"===a.order){var tt=N*fe,Ke=ie*ee;d[0]=(nt=N*ee)+(pt=ie*fe)*R,d[4]=Ke*R-tt,d[8]=M*ie,d[1]=M*fe,d[5]=M*ee,d[9]=-R,d[2]=tt*R-Ke,d[6]=pt+nt*R,d[10]=M*N}else if("ZXY"===a.order){var nt,pt;tt=N*fe,Ke=ie*ee,d[0]=(nt=N*ee)-(pt=ie*fe)*R,d[4]=-M*fe,d[8]=Ke+tt*R,d[1]=tt+Ke*R,d[5]=M*ee,d[9]=pt-nt*R,d[2]=-M*ie,d[6]=R,d[10]=M*N}else if("ZYX"===a.order)me=M*ee,Le=M*fe,ke=R*ee,Fe=R*fe,d[0]=N*ee,d[4]=ke*ie-Le,d[8]=me*ie+Fe,d[1]=N*fe,d[5]=Fe*ie+me,d[9]=Le*ie-ke,d[2]=-ie,d[6]=R*N,d[10]=M*N;else if("YZX"===a.order){var vt=M*N,qt=M*ie,Bt=R*N,cn=R*ie;d[0]=N*ee,d[4]=cn-vt*fe,d[8]=Bt*fe+qt,d[1]=fe,d[5]=M*ee,d[9]=-R*ee,d[2]=-ie*ee,d[6]=qt*fe+Bt,d[10]=vt-cn*fe}else"XZY"===a.order&&(vt=M*N,qt=M*ie,Bt=R*N,cn=R*ie,d[0]=N*ee,d[4]=-fe,d[8]=ie*ee,d[1]=vt*fe+cn,d[5]=M*ee,d[9]=qt*fe-Bt,d[2]=Bt*fe-qt,d[6]=R*ee,d[10]=cn*fe+vt);return d[3]=0,d[7]=0,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,this},makeRotationFromQuaternion:function(a){var d=this.elements,g=a.x,y=a.y,A=a.z,M=a.w,R=g+g,N=y+y,ie=A+A,ee=g*R,fe=g*N,me=g*ie,Le=y*N,ke=y*ie,Fe=A*ie,nt=M*R,tt=M*N,Ke=M*ie;return d[0]=1-(Le+Fe),d[4]=fe-Ke,d[8]=me+tt,d[1]=fe+Ke,d[5]=1-(ee+Fe),d[9]=ke-nt,d[2]=me-tt,d[6]=ke+nt,d[10]=1-(ee+Le),d[3]=0,d[7]=0,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,this},lookAt:function(){var a,d,g;return function(A,M,R){void 0===a&&(a=new Qt,d=new Qt,g=new Qt);var N=this.elements;return g.subVectors(A,M).normalize(),0===g.lengthSq()&&(g.z=1),a.crossVectors(R,g).normalize(),0===a.lengthSq()&&(g.z+=1e-4,a.crossVectors(R,g).normalize()),d.crossVectors(g,a),N[0]=a.x,N[4]=d.x,N[8]=g.x,N[1]=a.y,N[5]=d.y,N[9]=g.y,N[2]=a.z,N[6]=d.z,N[10]=g.z,this}}(),multiply:function(a,d){return void 0!==d?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(a,d)):this.multiplyMatrices(this,a)},premultiply:function(a){return this.multiplyMatrices(a,this)},multiplyMatrices:function(a,d){var g=a.elements,y=d.elements,A=this.elements,M=g[0],R=g[4],N=g[8],ie=g[12],ee=g[1],fe=g[5],me=g[9],Le=g[13],ke=g[2],Fe=g[6],nt=g[10],tt=g[14],Ke=g[3],pt=g[7],vt=g[11],qt=g[15],Bt=y[0],cn=y[4],sn=y[8],en=y[12],dn=y[1],On=y[5],Ai=y[9],ui=y[13],Wt=y[2],$t=y[6],Wn=y[10],ei=y[14],Ii=y[3],_i=y[7],fi=y[11],ir=y[15];return A[0]=M*Bt+R*dn+N*Wt+ie*Ii,A[4]=M*cn+R*On+N*$t+ie*_i,A[8]=M*sn+R*Ai+N*Wn+ie*fi,A[12]=M*en+R*ui+N*ei+ie*ir,A[1]=ee*Bt+fe*dn+me*Wt+Le*Ii,A[5]=ee*cn+fe*On+me*$t+Le*_i,A[9]=ee*sn+fe*Ai+me*Wn+Le*fi,A[13]=ee*en+fe*ui+me*ei+Le*ir,A[2]=ke*Bt+Fe*dn+nt*Wt+tt*Ii,A[6]=ke*cn+Fe*On+nt*$t+tt*_i,A[10]=ke*sn+Fe*Ai+nt*Wn+tt*fi,A[14]=ke*en+Fe*ui+nt*ei+tt*ir,A[3]=Ke*Bt+pt*dn+vt*Wt+qt*Ii,A[7]=Ke*cn+pt*On+vt*$t+qt*_i,A[11]=Ke*sn+pt*Ai+vt*Wn+qt*fi,A[15]=Ke*en+pt*ui+vt*ei+qt*ir,this},multiplyToArray:function(a,d,g){var y=this.elements;return this.multiplyMatrices(a,d),g[0]=y[0],g[1]=y[1],g[2]=y[2],g[3]=y[3],g[4]=y[4],g[5]=y[5],g[6]=y[6],g[7]=y[7],g[8]=y[8],g[9]=y[9],g[10]=y[10],g[11]=y[11],g[12]=y[12],g[13]=y[13],g[14]=y[14],g[15]=y[15],this},multiplyScalar:function(a){var d=this.elements;return d[0]*=a,d[4]*=a,d[8]*=a,d[12]*=a,d[1]*=a,d[5]*=a,d[9]*=a,d[13]*=a,d[2]*=a,d[6]*=a,d[10]*=a,d[14]*=a,d[3]*=a,d[7]*=a,d[11]*=a,d[15]*=a,this},applyToVector3Array:function(){var a;return function(g,y,A){void 0===a&&(a=new Qt),void 0===y&&(y=0),void 0===A&&(A=g.length);for(var M=0,R=y;M<A;M+=3,R+=3)a.fromArray(g,R),a.applyMatrix4(this),a.toArray(g,R);return g}}(),applyToBufferAttribute:function(){var a;return function(g){void 0===a&&(a=new Qt);for(var y=0,A=g.count;y<A;y++)a.x=g.getX(y),a.y=g.getY(y),a.z=g.getZ(y),a.applyMatrix4(this),g.setXYZ(y,a.x,a.y,a.z);return g}}(),determinant:function(){var a=this.elements,d=a[0],g=a[4],y=a[8],A=a[12],M=a[1],R=a[5],N=a[9],ie=a[13],ee=a[2],fe=a[6],me=a[10],Le=a[14];return a[3]*(+A*N*fe-y*ie*fe-A*R*me+g*ie*me+y*R*Le-g*N*Le)+a[7]*(+d*N*Le-d*ie*me+A*M*me-y*M*Le+y*ie*ee-A*N*ee)+a[11]*(+d*ie*fe-d*R*Le-A*M*fe+g*M*Le+A*R*ee-g*ie*ee)+a[15]*(-y*R*ee-d*N*fe+d*R*me+y*M*fe-g*M*me+g*N*ee)},transpose:function(){var d,a=this.elements;return d=a[1],a[1]=a[4],a[4]=d,d=a[2],a[2]=a[8],a[8]=d,d=a[6],a[6]=a[9],a[9]=d,d=a[3],a[3]=a[12],a[12]=d,d=a[7],a[7]=a[13],a[13]=d,d=a[11],a[11]=a[14],a[14]=d,this},setPosition:function(a){var d=this.elements;return d[12]=a.x,d[13]=a.y,d[14]=a.z,this},getInverse:function(a,d){var g=this.elements,y=a.elements,A=y[0],M=y[1],R=y[2],N=y[3],ie=y[4],ee=y[5],fe=y[6],me=y[7],Le=y[8],ke=y[9],Fe=y[10],nt=y[11],tt=y[12],Ke=y[13],pt=y[14],vt=y[15],qt=ke*pt*me-Ke*Fe*me+Ke*fe*nt-ee*pt*nt-ke*fe*vt+ee*Fe*vt,Bt=tt*Fe*me-Le*pt*me-tt*fe*nt+ie*pt*nt+Le*fe*vt-ie*Fe*vt,cn=Le*Ke*me-tt*ke*me+tt*ee*nt-ie*Ke*nt-Le*ee*vt+ie*ke*vt,sn=tt*ke*fe-Le*Ke*fe-tt*ee*Fe+ie*Ke*Fe+Le*ee*pt-ie*ke*pt,en=A*qt+M*Bt+R*cn+N*sn;if(0===en){var dn="THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0";if(!0===d)throw new Error(dn);return console.warn(dn),this.identity()}var On=1/en;return g[0]=qt*On,g[1]=(Ke*Fe*N-ke*pt*N-Ke*R*nt+M*pt*nt+ke*R*vt-M*Fe*vt)*On,g[2]=(ee*pt*N-Ke*fe*N+Ke*R*me-M*pt*me-ee*R*vt+M*fe*vt)*On,g[3]=(ke*fe*N-ee*Fe*N-ke*R*me+M*Fe*me+ee*R*nt-M*fe*nt)*On,g[4]=Bt*On,g[5]=(Le*pt*N-tt*Fe*N+tt*R*nt-A*pt*nt-Le*R*vt+A*Fe*vt)*On,g[6]=(tt*fe*N-ie*pt*N-tt*R*me+A*pt*me+ie*R*vt-A*fe*vt)*On,g[7]=(ie*Fe*N-Le*fe*N+Le*R*me-A*Fe*me-ie*R*nt+A*fe*nt)*On,g[8]=cn*On,g[9]=(tt*ke*N-Le*Ke*N-tt*M*nt+A*Ke*nt+Le*M*vt-A*ke*vt)*On,g[10]=(ie*Ke*N-tt*ee*N+tt*M*me-A*Ke*me-ie*M*vt+A*ee*vt)*On,g[11]=(Le*ee*N-ie*ke*N-Le*M*me+A*ke*me+ie*M*nt-A*ee*nt)*On,g[12]=sn*On,g[13]=(Le*Ke*R-tt*ke*R+tt*M*Fe-A*Ke*Fe-Le*M*pt+A*ke*pt)*On,g[14]=(tt*ee*R-ie*Ke*R-tt*M*fe+A*Ke*fe+ie*M*pt-A*ee*pt)*On,g[15]=(ie*ke*R-Le*ee*R+Le*M*fe-A*ke*fe-ie*M*Fe+A*ee*Fe)*On,this},scale:function(a){var d=this.elements,g=a.x,y=a.y,A=a.z;return d[0]*=g,d[4]*=y,d[8]*=A,d[1]*=g,d[5]*=y,d[9]*=A,d[2]*=g,d[6]*=y,d[10]*=A,d[3]*=g,d[7]*=y,d[11]*=A,this},getMaxScaleOnAxis:function(){var a=this.elements;return Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],a[4]*a[4]+a[5]*a[5]+a[6]*a[6],a[8]*a[8]+a[9]*a[9]+a[10]*a[10]))},makeTranslation:function(a,d,g){return this.set(1,0,0,a,0,1,0,d,0,0,1,g,0,0,0,1),this},makeRotationX:function(a){var d=Math.cos(a),g=Math.sin(a);return this.set(1,0,0,0,0,d,-g,0,0,g,d,0,0,0,0,1),this},makeRotationY:function(a){var d=Math.cos(a),g=Math.sin(a);return this.set(d,0,g,0,0,1,0,0,-g,0,d,0,0,0,0,1),this},makeRotationZ:function(a){var d=Math.cos(a),g=Math.sin(a);return this.set(d,-g,0,0,g,d,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(a,d){var g=Math.cos(d),y=Math.sin(d),A=1-g,M=a.x,R=a.y,N=a.z,ie=A*M,ee=A*R;return this.set(ie*M+g,ie*R-y*N,ie*N+y*R,0,ie*R+y*N,ee*R+g,ee*N-y*M,0,ie*N-y*R,ee*N+y*M,A*N*N+g,0,0,0,0,1),this},makeScale:function(a,d,g){return this.set(a,0,0,0,0,d,0,0,0,0,g,0,0,0,0,1),this},makeShear:function(a,d,g){return this.set(1,d,g,0,a,1,g,0,a,d,1,0,0,0,0,1),this},compose:function(a,d,g){return this.makeRotationFromQuaternion(d),this.scale(g),this.setPosition(a),this},decompose:function(){var a,d;return function(y,A,M){void 0===a&&(a=new Qt,d=new gs);var R=this.elements,N=a.set(R[0],R[1],R[2]).length(),ie=a.set(R[4],R[5],R[6]).length(),ee=a.set(R[8],R[9],R[10]).length();this.determinant()<0&&(N=-N),y.x=R[12],y.y=R[13],y.z=R[14],d.elements.set(this.elements);var me=1/N,Le=1/ie,ke=1/ee;return d.elements[0]*=me,d.elements[1]*=me,d.elements[2]*=me,d.elements[4]*=Le,d.elements[5]*=Le,d.elements[6]*=Le,d.elements[8]*=ke,d.elements[9]*=ke,d.elements[10]*=ke,A.setFromRotationMatrix(d),M.x=N,M.y=ie,M.z=ee,this}}(),makeFrustum:function(a,d,g,y,A,M){var R=this.elements,ie=2*A/(y-g),ee=(d+a)/(d-a),fe=(y+g)/(y-g),me=-(M+A)/(M-A),Le=-2*M*A/(M-A);return R[0]=2*A/(d-a),R[4]=0,R[8]=ee,R[12]=0,R[1]=0,R[5]=ie,R[9]=fe,R[13]=0,R[2]=0,R[6]=0,R[10]=me,R[14]=Le,R[3]=0,R[7]=0,R[11]=-1,R[15]=0,this},makePerspective:function(a,d,g,y){var A=g*Math.tan(xs.DEG2RAD*a*.5),M=-A;return this.makeFrustum(M*d,A*d,M,A,g,y)},makeOrthographic:function(a,d,g,y,A,M){var R=this.elements,N=1/(d-a),ie=1/(g-y),ee=1/(M-A),fe=(d+a)*N,me=(g+y)*ie,Le=(M+A)*ee;return R[0]=2*N,R[4]=0,R[8]=0,R[12]=-fe,R[1]=0,R[5]=2*ie,R[9]=0,R[13]=-me,R[2]=0,R[6]=0,R[10]=-2*ee,R[14]=-Le,R[3]=0,R[7]=0,R[11]=0,R[15]=1,this},equals:function(a){for(var d=this.elements,g=a.elements,y=0;y<16;y++)if(d[y]!==g[y])return!1;return!0},fromArray:function(a,d){void 0===d&&(d=0);for(var g=0;g<16;g++)this.elements[g]=a[g+d];return this},toArray:function(a,d){void 0===a&&(a=[]),void 0===d&&(d=0);var g=this.elements;return a[d]=g[0],a[d+1]=g[1],a[d+2]=g[2],a[d+3]=g[3],a[d+4]=g[4],a[d+5]=g[5],a[d+6]=g[6],a[d+7]=g[7],a[d+8]=g[8],a[d+9]=g[9],a[d+10]=g[10],a[d+11]=g[11],a[d+12]=g[12],a[d+13]=g[13],a[d+14]=g[14],a[d+15]=g[15],a}},(Rh.prototype=Object.create(jo.prototype)).constructor=Rh,Rh.prototype.isCubeTexture=!0,Object.defineProperty(Rh.prototype,"images",{get:function(){return this.image},set:function(a){this.image=a}});var R_=new jo,Lg=new Rh;function vv(){this.seq=[],this.map={}}var Sc=[],no=[];function Td(a,d,g){var y=a[0];if(y<=0||y>0)return a;var A=d*g,M=Sc[A];if(void 0===M&&(M=new Float32Array(A),Sc[A]=M),0!==d){y.toArray(M,0);for(var R=1,N=0;R!==d;++R)a[R].toArray(M,N+=g)}return M}function k_(a,d){var g=no[d];void 0===g&&(g=new Int32Array(d),no[d]=g);for(var y=0;y!==d;++y)g[y]=a.allocTextureUnit();return g}function cc(a,d){a.uniform1f(this.addr,d)}function Yi(a,d){a.uniform1i(this.addr,d)}function cb(a,d){void 0===d.x?a.uniform2fv(this.addr,d):a.uniform2f(this.addr,d.x,d.y)}function Tr(a,d){void 0!==d.x?a.uniform3f(this.addr,d.x,d.y,d.z):void 0!==d.r?a.uniform3f(this.addr,d.r,d.g,d.b):a.uniform3fv(this.addr,d)}function Ec(a,d){void 0===d.x?a.uniform4fv(this.addr,d):a.uniform4f(this.addr,d.x,d.y,d.z,d.w)}function Ty(a,d){a.uniformMatrix2fv(this.addr,!1,d.elements||d)}function O_(a,d){a.uniformMatrix3fv(this.addr,!1,d.elements||d)}function Ea(a,d){a.uniformMatrix4fv(this.addr,!1,d.elements||d)}function da(a,d,g){var y=g.allocTextureUnit();a.uniform1i(this.addr,y),g.setTexture2D(d||R_,y)}function jf(a,d,g){var y=g.allocTextureUnit();a.uniform1i(this.addr,y),g.setTextureCube(d||Lg,y)}function Vp(a,d){a.uniform2iv(this.addr,d)}function xm(a,d){a.uniform3iv(this.addr,d)}function wm(a,d){a.uniform4iv(this.addr,d)}function yv(a,d){a.uniform1fv(this.addr,d)}function _v(a,d){a.uniform1iv(this.addr,d)}function ku(a,d){a.uniform2fv(this.addr,Td(d,this.size,2))}function ql(a,d){a.uniform3fv(this.addr,Td(d,this.size,3))}function F_(a,d){a.uniform4fv(this.addr,Td(d,this.size,4))}function id(a,d){a.uniformMatrix2fv(this.addr,!1,Td(d,this.size,4))}function rd(a,d){a.uniformMatrix3fv(this.addr,!1,Td(d,this.size,9))}function My(a,d){a.uniformMatrix4fv(this.addr,!1,Td(d,this.size,16))}function Md(a,d,g){var y=d.length,A=k_(g,y);a.uniform1iv(this.addr,A);for(var M=0;M!==y;++M)g.setTexture2D(d[M]||R_,A[M])}function Ta(a,d,g){var y=d.length,A=k_(g,y);a.uniform1iv(this.addr,A);for(var M=0;M!==y;++M)g.setTextureCube(d[M]||Lg,A[M])}function N_(a,d,g){this.id=a,this.addr=g,this.setValue=function ns(a){switch(a){case 5126:return cc;case 35664:return cb;case 35665:return Tr;case 35666:return Ec;case 35674:return Ty;case 35675:return O_;case 35676:return Ea;case 35678:return da;case 35680:return jf;case 5124:case 35670:return Yi;case 35667:case 35671:return Vp;case 35668:case 35672:return xm;case 35669:case 35673:return wm}}(d.type)}function Dy(a,d,g){this.id=a,this.addr=g,this.size=d.size,this.setValue=function io(a){switch(a){case 5126:return yv;case 35664:return ku;case 35665:return ql;case 35666:return F_;case 35674:return id;case 35675:return rd;case 35676:return My;case 35678:return Md;case 35680:return Ta;case 5124:case 35670:return _v;case 35667:case 35671:return Vp;case 35668:case 35672:return xm;case 35669:case 35673:return wm}}(d.type)}function kh(a){this.id=a,vv.call(this)}kh.prototype.setValue=function(a,d){for(var g=this.seq,y=0,A=g.length;y!==A;++y){var M=g[y];M.setValue(a,d[M.id])}};var mo=/([\w\d_]+)(\])?(\[|\.)?/g;function Xa(a,d){a.seq.push(d),a.map[d.id]=d}function $f(a,d,g){var y=a.name,A=y.length;for(mo.lastIndex=0;;){var M=mo.exec(y),N=M[1],ee=M[3];if("]"===M[2]&&(N|=0),void 0===ee||"["===ee&&mo.lastIndex+2===A){Xa(g,void 0===ee?new N_(N,a,d):new Dy(N,a,d));break}var me=g.map[N];void 0===me&&Xa(g,me=new kh(N)),g=me}}function Ya(a,d,g){vv.call(this),this.renderer=g;for(var y=a.getProgramParameter(d,a.ACTIVE_UNIFORMS),A=0;A!==y;++A){var M=a.getActiveUniform(d,A);$f(M,a.getUniformLocation(d,M.name),this)}}Ya.prototype.setValue=function(a,d,g){var y=this.map[d];void 0!==y&&y.setValue(a,g,this.renderer)},Ya.prototype.set=function(a,d,g){var y=this.map[g];void 0!==y&&y.setValue(a,d[g],this.renderer)},Ya.prototype.setOptional=function(a,d,g){var y=d[g];void 0!==y&&this.setValue(a,g,y)},Ya.upload=function(a,d,g,y){for(var A=0,M=d.length;A!==M;++A){var R=d[A],N=g[R.id];!1!==N.needsUpdate&&R.setValue(a,N.value,y)}},Ya.seqWithValue=function(a,d){for(var g=[],y=0,A=a.length;y!==A;++y){var M=a[y];M.id in d&&g.push(M)}return g};var nl={merge:function(a){for(var d={},g=0;g<a.length;g++){var y=this.clone(a[g]);for(var A in y)d[A]=y[A]}return d},clone:function(a){var d={};for(var g in a)for(var y in d[g]={},a[g]){var A=a[g][y];d[g][y]=A&&(A.isColor||A.isMatrix3||A.isMatrix4||A.isVector2||A.isVector3||A.isVector4||A.isTexture)?A.clone():Array.isArray(A)?A.slice():A}return d}},$s={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t\t}\n\t\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 ltcTextureCoords( const in GeometricContext geometry, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = (LUT_SIZE - 1.0)/LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5/LUT_SIZE;\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 P = geometry.position;\n\tfloat theta = acos( dot( N, V ) );\n\tvec2 uv = vec2(\n\t\tsqrt( saturate( roughness ) ),\n\t\tsaturate( theta / ( 0.5 * PI ) ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nvoid clipQuadToHorizon( inout vec3 L[5], out int n ) {\n\tint config = 0;\n\tif ( L[0].z > 0.0 ) config += 1;\n\tif ( L[1].z > 0.0 ) config += 2;\n\tif ( L[2].z > 0.0 ) config += 4;\n\tif ( L[3].z > 0.0 ) config += 8;\n\tn = 0;\n\tif ( config == 0 ) {\n\t} else if ( config == 1 ) {\n\t\tn = 3;\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t\tL[2] = -L[3].z * L[0] + L[0].z * L[3];\n\t} else if ( config == 2 ) {\n\t\tn = 3;\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t} else if ( config == 3 ) {\n\t\tn = 4;\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t\tL[3] = -L[3].z * L[0] + L[0].z * L[3];\n\t} else if ( config == 4 ) {\n\t\tn = 3;\n\t\tL[0] = -L[3].z * L[2] + L[2].z * L[3];\n\t\tL[1] = -L[1].z * L[2] + L[2].z * L[1];\n\t} else if ( config == 5 ) {\n\t\tn = 0;\n\t} else if ( config == 6 ) {\n\t\tn = 4;\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t\tL[3] = -L[3].z * L[2] + L[2].z * L[3];\n\t} else if ( config == 7 ) {\n\t\tn = 5;\n\t\tL[4] = -L[3].z * L[0] + L[0].z * L[3];\n\t\tL[3] = -L[3].z * L[2] + L[2].z * L[3];\n\t} else if ( config == 8 ) {\n\t\tn = 3;\n\t\tL[0] = -L[0].z * L[3] + L[3].z * L[0];\n\t\tL[1] = -L[2].z * L[3] + L[3].z * L[2];\n\t\tL[2] =  L[3];\n\t} else if ( config == 9 ) {\n\t\tn = 4;\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t\tL[2] = -L[2].z * L[3] + L[3].z * L[2];\n\t} else if ( config == 10 ) {\n\t\tn = 0;\n\t} else if ( config == 11 ) {\n\t\tn = 5;\n\t\tL[4] = L[3];\n\t\tL[3] = -L[2].z * L[3] + L[3].z * L[2];\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t} else if ( config == 12 ) {\n\t\tn = 4;\n\t\tL[1] = -L[1].z * L[2] + L[2].z * L[1];\n\t\tL[0] = -L[0].z * L[3] + L[3].z * L[0];\n\t} else if ( config == 13 ) {\n\t\tn = 5;\n\t\tL[4] = L[3];\n\t\tL[3] = L[2];\n\t\tL[2] = -L[1].z * L[2] + L[2].z * L[1];\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t} else if ( config == 14 ) {\n\t\tn = 5;\n\t\tL[4] = -L[0].z * L[3] + L[3].z * L[0];\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t} else if ( config == 15 ) {\n\t\tn = 4;\n\t}\n\tif ( n == 3 )\n\t\tL[3] = L[0];\n\tif ( n == 4 )\n\t\tL[4] = L[0];\n}\nfloat integrateLtcBrdfOverRectEdge( vec3 v1, vec3 v2 ) {\n\tfloat cosTheta = dot( v1, v2 );\n\tfloat theta = acos( cosTheta );\n\tfloat res = cross( v1, v2 ).z * ( ( theta > 0.001 ) ? theta / sin( theta ) : 1.0 );\n\treturn res;\n}\nvoid initRectPoints( const in vec3 pos, const in vec3 halfWidth, const in vec3 halfHeight, out vec3 rectPoints[4] ) {\n\trectPoints[0] = pos - halfWidth - halfHeight;\n\trectPoints[1] = pos + halfWidth - halfHeight;\n\trectPoints[2] = pos + halfWidth + halfHeight;\n\trectPoints[3] = pos - halfWidth + halfHeight;\n}\nvec3 integrateLtcBrdfOverRect( const in GeometricContext geometry, const in mat3 brdfMat, const in vec3 rectPoints[4] ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 P = geometry.position;\n\tvec3 T1, T2;\n\tT1 = normalize(V - N * dot( V, N ));\n\tT2 = - cross( N, T1 );\n\tmat3 brdfWrtSurface = brdfMat * transpose( mat3( T1, T2, N ) );\n\tvec3 clippedRect[5];\n\tclippedRect[0] = brdfWrtSurface * ( rectPoints[0] - P );\n\tclippedRect[1] = brdfWrtSurface * ( rectPoints[1] - P );\n\tclippedRect[2] = brdfWrtSurface * ( rectPoints[2] - P );\n\tclippedRect[3] = brdfWrtSurface * ( rectPoints[3] - P );\n\tint n;\n\tclipQuadToHorizon(clippedRect, n);\n\tif ( n == 0 )\n\t\treturn vec3( 0, 0, 0 );\n\tclippedRect[0] = normalize( clippedRect[0] );\n\tclippedRect[1] = normalize( clippedRect[1] );\n\tclippedRect[2] = normalize( clippedRect[2] );\n\tclippedRect[3] = normalize( clippedRect[3] );\n\tclippedRect[4] = normalize( clippedRect[4] );\n\tfloat sum = 0.0;\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[0], clippedRect[1] );\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[1], clippedRect[2] );\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[2], clippedRect[3] );\n\tif (n >= 4)\n\t\tsum += integrateLtcBrdfOverRectEdge( clippedRect[3], clippedRect[4] );\n\tif (n == 5)\n\t\tsum += integrateLtcBrdfOverRectEdge( clippedRect[4], clippedRect[0] );\n\tsum = max( 0.0, sum );\n\tvec3 Lo_i = vec3( sum, sum, sum );\n\treturn Lo_i;\n}\nvec3 Rect_Area_Light_Specular_Reflectance(\n\t\tconst in GeometricContext geometry,\n\t\tconst in vec3 lightPos, const in vec3 lightHalfWidth, const in vec3 lightHalfHeight,\n\t\tconst in float roughness,\n\t\tconst in sampler2D ltcMat, const in sampler2D ltcMag ) {\n\tvec3 rectPoints[4];\n\tinitRectPoints( lightPos, lightHalfWidth, lightHalfHeight, rectPoints );\n\tvec2 uv = ltcTextureCoords( geometry, roughness );\n\tvec4 brdfLtcApproxParams, t;\n\tbrdfLtcApproxParams = texture2D( ltcMat, uv );\n\tt = texture2D( ltcMat, uv );\n\tfloat brdfLtcScalar = texture2D( ltcMag, uv ).a;\n\tmat3 brdfLtcApproxMat = mat3(\n\t\tvec3(   1,   0, t.y ),\n\t\tvec3(   0, t.z,   0 ),\n\t\tvec3( t.w,   0, t.x )\n\t);\n\tvec3 specularReflectance = integrateLtcBrdfOverRect( geometry, brdfLtcApproxMat, rectPoints );\n\tspecularReflectance *= brdfLtcScalar;\n\treturn specularReflectance;\n}\nvec3 Rect_Area_Light_Diffuse_Reflectance(\n\t\tconst in GeometricContext geometry,\n\t\tconst in vec3 lightPos, const in vec3 lightHalfWidth, const in vec3 lightHalfHeight ) {\n\tvec3 rectPoints[4];\n\tinitRectPoints( lightPos, lightHalfWidth, lightHalfHeight, rectPoints );\n\tmat3 diffuseBrdfMat = mat3(1);\n\tvec3 diffuseReflectance = integrateLtcBrdfOverRect( geometry, diffuseBrdfMat, rectPoints );\n\treturn diffuseReflectance;\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos );\n\t\tvec3 vSigmaY = dFdy( surf_pos );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t\t\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\n\t\t\tvec4 plane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transpose( const in mat3 v ) {\n\tmat3 tmp;\n\ttmp[0] = vec3(v[0].x, v[1].x, v[2].x);\n\ttmp[1] = vec3(v[0].y, v[1].y, v[2].y);\n\ttmp[2] = vec3(v[0].z, v[1].z, v[2].z);\n\treturn tmp;\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"#ifdef FLIP_SIDED\n\tobjectNormal = -objectNormal;\n#endif\nvec3 transformedNormal = normalMatrix * objectNormal;\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n  return value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n  return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n  return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n  return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n  float maxComponent = max( max( value.r, value.g ), value.b );\n  float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n  return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n  return vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n  float maxRGB = max( value.x, max( value.g, value.b ) );\n  float M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n  M            = ceil( M * 255.0 ) / 255.0;\n  return vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n    return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n    float maxRGB = max( value.x, max( value.g, value.b ) );\n    float D      = max( maxRange / maxRGB, 1.0 );\n    D            = min( floor( D ) / 255.0, 1.0 );\n    return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n  vec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n  Xp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n  vec4 vResult;\n  vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n  float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n  vResult.w = fract(Le);\n  vResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n  return vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n  float Le = value.z * 255.0 + value.w;\n  vec3 Xp_Y_XYZp;\n  Xp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n  Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n  Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n  vec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n  return vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\t#else\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\t#endif\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltcMat;\tuniform sampler2D ltcMag;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = saturate( reflectVec.y * 0.5 + 0.5 );\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\n#if NUM_RECT_AREA_LIGHTS > 0\n    void RE_Direct_RectArea_BlinnPhong( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n        vec3 matDiffColor = material.diffuseColor;\n        vec3 matSpecColor = material.specularColor;\n        vec3 lightColor   = rectAreaLight.color;\n        float roughness = BlinnExponentToGGXRoughness( material.specularShininess );\n        vec3 spec = Rect_Area_Light_Specular_Reflectance(\n                geometry,\n                rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight,\n                roughness,\n                ltcMat, ltcMag );\n        vec3 diff = Rect_Area_Light_Diffuse_Reflectance(\n                geometry,\n                rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight );\n        reflectedLight.directSpecular += lightColor * matSpecColor * spec / PI2;\n        reflectedLight.directDiffuse  += lightColor * matDiffColor * diff / PI2;\n    }\n#endif\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n    void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n        vec3 matDiffColor = material.diffuseColor;\n        vec3 matSpecColor = material.specularColor;\n        vec3 lightColor   = rectAreaLight.color;\n        float roughness = material.specularRoughness;\n        vec3 spec = Rect_Area_Light_Specular_Reflectance(\n                geometry,\n                rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight,\n                roughness,\n                ltcMat, ltcMag );\n        vec3 diff = Rect_Area_Light_Diffuse_Reflectance(\n                geometry,\n                rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight );\n        reflectedLight.directSpecular += lightColor * matSpecColor * spec;\n        reflectedLight.directDiffuse  += lightColor * matDiffColor * diff;\n    }\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_template:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t \tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\t\t\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.r;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_flip:"#ifdef DOUBLE_SIDED\n\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n#else\n\tfloat flipNormal = 1.0;\n#endif\n",normal_fragment:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal ) * flipNormal;\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n  return normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n  return 1.0 - 2.0 * rgb.xyz;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n  return ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n  return linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n  return (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n  return ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"#ifdef USE_SKINNING\n\tvec4 mvPosition = modelViewMatrix * skinned;\n#else\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n#endif\ngl_Position = projectionMatrix * mvPosition;\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.r;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n    #if NUM_RECT_AREA_LIGHTS > 0\n    #endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn 1.0;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\tfloat dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n    #if NUM_RECT_AREA_LIGHTS > 0\n    #endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n    #if NUM_RECT_AREA_LIGHTS > 0\n    #endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n  return toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  color = max( vec3( 0.0 ), color - 0.004 );\n  return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\t#ifdef USE_SKINNING\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\t#else\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\t#endif\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"uniform vec3 lightPos;\nvarying vec4 vWorldPosition;\n#include <common>\n#include <packing>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );\n}\n",distanceRGBA_vert:"varying vec4 vWorldPosition;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED  ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#include <premultiplied_alpha_fragment>\n\t#include <encodings_fragment>\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED  ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED  ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n",shadow_frag:"uniform float opacity;\n#include <common>\n#include <packing>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( 0.0, 0.0, 0.0, opacity * ( 1.0  - getShadowMask() ) );\n}\n",shadow_vert:"#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n"};function Wr(a,d,g){return void 0===d&&void 0===g?this.set(a):this.setRGB(a,d,g)}Wr.prototype={constructor:Wr,isColor:!0,r:1,g:1,b:1,set:function(a){return a&&a.isColor?this.copy(a):"number"==typeof a?this.setHex(a):"string"==typeof a&&this.setStyle(a),this},setScalar:function(a){return this.r=a,this.g=a,this.b=a,this},setHex:function(a){return a=Math.floor(a),this.r=(a>>16&255)/255,this.g=(a>>8&255)/255,this.b=(255&a)/255,this},setRGB:function(a,d,g){return this.r=a,this.g=d,this.b=g,this},setHSL:function(){function a(d,g,y){return y<0&&(y+=1),y>1&&(y-=1),y<1/6?d+6*(g-d)*y:y<.5?g:y<2/3?d+6*(g-d)*(2/3-y):d}return function(g,y,A){if(g=xs.euclideanModulo(g,1),y=xs.clamp(y,0,1),A=xs.clamp(A,0,1),0===y)this.r=this.g=this.b=A;else{var M=A<=.5?A*(1+y):A+y-A*y,R=2*A-M;this.r=a(R,M,g+1/3),this.g=a(R,M,g),this.b=a(R,M,g-1/3)}return this}}(),setStyle:function(a){function d(me){void 0!==me&&parseFloat(me)<1&&console.warn("THREE.Color: Alpha component of "+a+" will be ignored.")}var g;if(g=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(a)){var y,M=g[2];switch(g[1]){case"rgb":case"rgba":if(y=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(M))return this.r=Math.min(255,parseInt(y[1],10))/255,this.g=Math.min(255,parseInt(y[2],10))/255,this.b=Math.min(255,parseInt(y[3],10))/255,d(y[5]),this;if(y=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(M))return this.r=Math.min(100,parseInt(y[1],10))/100,this.g=Math.min(100,parseInt(y[2],10))/100,this.b=Math.min(100,parseInt(y[3],10))/100,d(y[5]),this;break;case"hsl":case"hsla":if(y=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(M)){var R=parseFloat(y[1])/360,N=parseInt(y[2],10)/100,ie=parseInt(y[3],10)/100;return d(y[5]),this.setHSL(R,N,ie)}}}else if(g=/^\#([A-Fa-f0-9]+)$/.exec(a)){var ee,fe=(ee=g[1]).length;if(3===fe)return this.r=parseInt(ee.charAt(0)+ee.charAt(0),16)/255,this.g=parseInt(ee.charAt(1)+ee.charAt(1),16)/255,this.b=parseInt(ee.charAt(2)+ee.charAt(2),16)/255,this;if(6===fe)return this.r=parseInt(ee.charAt(0)+ee.charAt(1),16)/255,this.g=parseInt(ee.charAt(2)+ee.charAt(3),16)/255,this.b=parseInt(ee.charAt(4)+ee.charAt(5),16)/255,this}return a&&a.length>0&&(void 0!==(ee=Vg[a])?this.setHex(ee):console.warn("THREE.Color: Unknown color "+a)),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(a){return this.r=a.r,this.g=a.g,this.b=a.b,this},copyGammaToLinear:function(a,d){return void 0===d&&(d=2),this.r=Math.pow(a.r,d),this.g=Math.pow(a.g,d),this.b=Math.pow(a.b,d),this},copyLinearToGamma:function(a,d){void 0===d&&(d=2);var g=d>0?1/d:1;return this.r=Math.pow(a.r,g),this.g=Math.pow(a.g,g),this.b=Math.pow(a.b,g),this},convertGammaToLinear:function(){var a=this.r,d=this.g,g=this.b;return this.r=a*a,this.g=d*d,this.b=g*g,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(a){var N,ie,d=a||{h:0,s:0,l:0},g=this.r,y=this.g,A=this.b,M=Math.max(g,y,A),R=Math.min(g,y,A),ee=(R+M)/2;if(R===M)N=0,ie=0;else{var fe=M-R;switch(ie=ee<=.5?fe/(M+R):fe/(2-M-R),M){case g:N=(y-A)/fe+(y<A?6:0);break;case y:N=(A-g)/fe+2;break;case A:N=(g-y)/fe+4}N/=6}return d.h=N,d.s=ie,d.l=ee,d},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(a,d,g){var y=this.getHSL();return y.h+=a,y.s+=d,y.l+=g,this.setHSL(y.h,y.s,y.l),this},add:function(a){return this.r+=a.r,this.g+=a.g,this.b+=a.b,this},addColors:function(a,d){return this.r=a.r+d.r,this.g=a.g+d.g,this.b=a.b+d.b,this},addScalar:function(a){return this.r+=a,this.g+=a,this.b+=a,this},sub:function(a){return this.r=Math.max(0,this.r-a.r),this.g=Math.max(0,this.g-a.g),this.b=Math.max(0,this.b-a.b),this},multiply:function(a){return this.r*=a.r,this.g*=a.g,this.b*=a.b,this},multiplyScalar:function(a){return this.r*=a,this.g*=a,this.b*=a,this},lerp:function(a,d){return this.r+=(a.r-this.r)*d,this.g+=(a.g-this.g)*d,this.b+=(a.b-this.b)*d,this},equals:function(a){return a.r===this.r&&a.g===this.g&&a.b===this.b},fromArray:function(a,d){return void 0===d&&(d=0),this.r=a[d],this.g=a[d+1],this.b=a[d+2],this},toArray:function(a,d){return void 0===a&&(a=[]),void 0===d&&(d=0),a[d]=this.r,a[d+1]=this.g,a[d+2]=this.b,a},toJSON:function(){return this.getHex()}};var Vg={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function es(a,d,g,y,A,M,R,N,ie,ee,fe,me){jo.call(this,null,M,R,N,ie,ee,y,A,fe,me),this.image={data:a,width:d,height:g},this.magFilter=void 0!==ie?ie:$a,this.minFilter=void 0!==ee?ee:$a,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}(es.prototype=Object.create(jo.prototype)).constructor=es,es.prototype.isDataTexture=!0;var os={common:{diffuse:{value:new Wr(15658734)},opacity:{value:1},map:{value:null},offsetRepeat:{value:new $o(0,0,1,1)},specularMap:{value:null},alphaMap:{value:null},envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Xi(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Wr(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new Wr(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new $o(0,0,1,1)}}},Dc={basic:{uniforms:nl.merge([os.common,os.aomap,os.lightmap,os.fog]),vertexShader:$s.meshbasic_vert,fragmentShader:$s.meshbasic_frag},lambert:{uniforms:nl.merge([os.common,os.aomap,os.lightmap,os.emissivemap,os.fog,os.lights,{emissive:{value:new Wr(0)}}]),vertexShader:$s.meshlambert_vert,fragmentShader:$s.meshlambert_frag},phong:{uniforms:nl.merge([os.common,os.aomap,os.lightmap,os.emissivemap,os.bumpmap,os.normalmap,os.displacementmap,os.gradientmap,os.fog,os.lights,{emissive:{value:new Wr(0)},specular:{value:new Wr(1118481)},shininess:{value:30}}]),vertexShader:$s.meshphong_vert,fragmentShader:$s.meshphong_frag},standard:{uniforms:nl.merge([os.common,os.aomap,os.lightmap,os.emissivemap,os.bumpmap,os.normalmap,os.displacementmap,os.roughnessmap,os.metalnessmap,os.fog,os.lights,{emissive:{value:new Wr(0)},roughness:{value:.5},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:$s.meshphysical_vert,fragmentShader:$s.meshphysical_frag},points:{uniforms:nl.merge([os.points,os.fog]),vertexShader:$s.points_vert,fragmentShader:$s.points_frag},dashed:{uniforms:nl.merge([os.common,os.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:$s.linedashed_vert,fragmentShader:$s.linedashed_frag},depth:{uniforms:nl.merge([os.common,os.displacementmap]),vertexShader:$s.depth_vert,fragmentShader:$s.depth_frag},normal:{uniforms:nl.merge([os.common,os.bumpmap,os.normalmap,os.displacementmap,{opacity:{value:1}}]),vertexShader:$s.normal_vert,fragmentShader:$s.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:$s.cube_vert,fragmentShader:$s.cube_frag},equirect:{uniforms:{tEquirect:{value:null},tFlip:{value:-1}},vertexShader:$s.equirect_vert,fragmentShader:$s.equirect_frag},distanceRGBA:{uniforms:{lightPos:{value:new Qt}},vertexShader:$s.distanceRGBA_vert,fragmentShader:$s.distanceRGBA_frag}};function oh(a,d){this.min=void 0!==a?a:new Xi(1/0,1/0),this.max=void 0!==d?d:new Xi(-1/0,-1/0)}function jp(a,d){var A,M,R,N,ie,ee,fe,me,g=a.context,y=a.state;this.render=function(Fe,nt,tt){if(0!==d.length){var Ke=new Qt,pt=tt.w/tt.z,vt=.5*tt.z,qt=.5*tt.w,Bt=16/tt.w,cn=new Xi(Bt*pt,Bt),sn=new Qt(1,1,0),en=new Xi(1,1),dn=new oh;dn.min.set(tt.x,tt.y),dn.max.set(tt.x+(tt.z-16),tt.y+(tt.w-16)),void 0===N&&function Le(){var Fe=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),nt=new Uint16Array([0,1,2,0,2,3]);A=g.createBuffer(),M=g.createBuffer(),g.bindBuffer(g.ARRAY_BUFFER,A),g.bufferData(g.ARRAY_BUFFER,Fe,g.STATIC_DRAW),g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,M),g.bufferData(g.ELEMENT_ARRAY_BUFFER,nt,g.STATIC_DRAW),fe=g.createTexture(),me=g.createTexture(),y.bindTexture(g.TEXTURE_2D,fe),g.texImage2D(g.TEXTURE_2D,0,g.RGB,16,16,0,g.RGB,g.UNSIGNED_BYTE,null),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.NEAREST),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.NEAREST),y.bindTexture(g.TEXTURE_2D,me),g.texImage2D(g.TEXTURE_2D,0,g.RGBA,16,16,0,g.RGBA,g.UNSIGNED_BYTE,null),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.NEAREST),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.NEAREST),R={vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if ( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if ( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if ( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")},N=function ke(Fe){var nt=g.createProgram(),tt=g.createShader(g.FRAGMENT_SHADER),Ke=g.createShader(g.VERTEX_SHADER),pt="precision "+a.getPrecision()+" float;\n";return g.shaderSource(tt,pt+Fe.fragmentShader),g.shaderSource(Ke,pt+Fe.vertexShader),g.compileShader(tt),g.compileShader(Ke),g.attachShader(nt,tt),g.attachShader(nt,Ke),g.linkProgram(nt),nt}(R),ie={vertex:g.getAttribLocation(N,"position"),uv:g.getAttribLocation(N,"uv")},ee={renderType:g.getUniformLocation(N,"renderType"),map:g.getUniformLocation(N,"map"),occlusionMap:g.getUniformLocation(N,"occlusionMap"),opacity:g.getUniformLocation(N,"opacity"),color:g.getUniformLocation(N,"color"),scale:g.getUniformLocation(N,"scale"),rotation:g.getUniformLocation(N,"rotation"),screenPosition:g.getUniformLocation(N,"screenPosition")}}(),g.useProgram(N),y.initAttributes(),y.enableAttribute(ie.vertex),y.enableAttribute(ie.uv),y.disableUnusedAttributes(),g.uniform1i(ee.occlusionMap,0),g.uniform1i(ee.map,1),g.bindBuffer(g.ARRAY_BUFFER,A),g.vertexAttribPointer(ie.vertex,2,g.FLOAT,!1,16,0),g.vertexAttribPointer(ie.uv,2,g.FLOAT,!1,16,8),g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,M),y.disable(g.CULL_FACE),y.setDepthWrite(!1);for(var On=0,Ai=d.length;On<Ai;On++){cn.set((Bt=16/tt.w)*pt,Bt);var ui=d[On];if(Ke.set(ui.matrixWorld.elements[12],ui.matrixWorld.elements[13],ui.matrixWorld.elements[14]),Ke.applyMatrix4(nt.matrixWorldInverse),Ke.applyProjection(nt.projectionMatrix),sn.copy(Ke),en.x=tt.x+sn.x*vt+vt-8,en.y=tt.y+sn.y*qt+qt-8,!0===dn.containsPoint(en)){y.activeTexture(g.TEXTURE0),y.bindTexture(g.TEXTURE_2D,null),y.activeTexture(g.TEXTURE1),y.bindTexture(g.TEXTURE_2D,fe),g.copyTexImage2D(g.TEXTURE_2D,0,g.RGB,en.x,en.y,16,16,0),g.uniform1i(ee.renderType,0),g.uniform2f(ee.scale,cn.x,cn.y),g.uniform3f(ee.screenPosition,sn.x,sn.y,sn.z),y.disable(g.BLEND),y.enable(g.DEPTH_TEST),g.drawElements(g.TRIANGLES,6,g.UNSIGNED_SHORT,0),y.activeTexture(g.TEXTURE0),y.bindTexture(g.TEXTURE_2D,me),g.copyTexImage2D(g.TEXTURE_2D,0,g.RGBA,en.x,en.y,16,16,0),g.uniform1i(ee.renderType,1),y.disable(g.DEPTH_TEST),y.activeTexture(g.TEXTURE1),y.bindTexture(g.TEXTURE_2D,fe),g.drawElements(g.TRIANGLES,6,g.UNSIGNED_SHORT,0),ui.positionScreen.copy(sn),ui.customUpdateCallback?ui.customUpdateCallback(ui):ui.updateLensFlares(),g.uniform1i(ee.renderType,2),y.enable(g.BLEND);for(var Wt=0,$t=ui.lensFlares.length;Wt<$t;Wt++){var Wn=ui.lensFlares[Wt];Wn.opacity>.001&&Wn.scale>.001&&(sn.x=Wn.x,sn.y=Wn.y,sn.z=Wn.z,cn.x=(Bt=Wn.size*Wn.scale/tt.w)*pt,cn.y=Bt,g.uniform3f(ee.screenPosition,sn.x,sn.y,sn.z),g.uniform2f(ee.scale,cn.x,cn.y),g.uniform1f(ee.rotation,Wn.rotation),g.uniform1f(ee.opacity,Wn.opacity),g.uniform3f(ee.color,Wn.color.r,Wn.color.g,Wn.color.b),y.setBlending(Wn.blending,Wn.blendEquation,Wn.blendSrc,Wn.blendDst),a.setTexture2D(Wn.texture,1),g.drawElements(g.TRIANGLES,6,g.UNSIGNED_SHORT,0))}}}y.enable(g.CULL_FACE),y.enable(g.DEPTH_TEST),y.setDepthWrite(!0),a.resetGLState()}}}function U_(a,d){var A,M,R,N,ie,ee,g=a.context,y=a.state,fe=new Qt,me=new Rl,Le=new Qt;function nt(tt,Ke){return tt.renderOrder!==Ke.renderOrder?tt.renderOrder-Ke.renderOrder:tt.z!==Ke.z?Ke.z-tt.z:Ke.id-tt.id}this.render=function(tt,Ke){if(0!==d.length){void 0===R&&function ke(){var tt=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),Ke=new Uint16Array([0,1,2,0,2,3]);A=g.createBuffer(),M=g.createBuffer(),g.bindBuffer(g.ARRAY_BUFFER,A),g.bufferData(g.ARRAY_BUFFER,tt,g.STATIC_DRAW),g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,M),g.bufferData(g.ELEMENT_ARRAY_BUFFER,Ke,g.STATIC_DRAW),R=function Fe(){var tt=g.createProgram(),Ke=g.createShader(g.VERTEX_SHADER),pt=g.createShader(g.FRAGMENT_SHADER);return g.shaderSource(Ke,["precision "+a.getPrecision()+" float;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n")),g.shaderSource(pt,["precision "+a.getPrecision()+" float;","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")),g.compileShader(Ke),g.compileShader(pt),g.attachShader(tt,Ke),g.attachShader(tt,pt),g.linkProgram(tt),tt}(),N={position:g.getAttribLocation(R,"position"),uv:g.getAttribLocation(R,"uv")},ie={uvOffset:g.getUniformLocation(R,"uvOffset"),uvScale:g.getUniformLocation(R,"uvScale"),rotation:g.getUniformLocation(R,"rotation"),scale:g.getUniformLocation(R,"scale"),color:g.getUniformLocation(R,"color"),map:g.getUniformLocation(R,"map"),opacity:g.getUniformLocation(R,"opacity"),modelViewMatrix:g.getUniformLocation(R,"modelViewMatrix"),projectionMatrix:g.getUniformLocation(R,"projectionMatrix"),fogType:g.getUniformLocation(R,"fogType"),fogDensity:g.getUniformLocation(R,"fogDensity"),fogNear:g.getUniformLocation(R,"fogNear"),fogFar:g.getUniformLocation(R,"fogFar"),fogColor:g.getUniformLocation(R,"fogColor"),alphaTest:g.getUniformLocation(R,"alphaTest")};var pt=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");pt.width=8,pt.height=8;var vt=pt.getContext("2d");vt.fillStyle="white",vt.fillRect(0,0,8,8),(ee=new jo(pt)).needsUpdate=!0}(),g.useProgram(R),y.initAttributes(),y.enableAttribute(N.position),y.enableAttribute(N.uv),y.disableUnusedAttributes(),y.disable(g.CULL_FACE),y.enable(g.BLEND),g.bindBuffer(g.ARRAY_BUFFER,A),g.vertexAttribPointer(N.position,2,g.FLOAT,!1,16,0),g.vertexAttribPointer(N.uv,2,g.FLOAT,!1,16,8),g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,M),g.uniformMatrix4fv(ie.projectionMatrix,!1,Ke.projectionMatrix.elements),y.activeTexture(g.TEXTURE0),g.uniform1i(ie.map,0);var pt=0,vt=0,qt=tt.fog;qt?(g.uniform3f(ie.fogColor,qt.color.r,qt.color.g,qt.color.b),qt.isFog?(g.uniform1f(ie.fogNear,qt.near),g.uniform1f(ie.fogFar,qt.far),g.uniform1i(ie.fogType,1),pt=1,vt=1):qt.isFogExp2&&(g.uniform1f(ie.fogDensity,qt.density),g.uniform1i(ie.fogType,2),pt=2,vt=2)):(g.uniform1i(ie.fogType,0),pt=0,vt=0);for(var Bt=0,cn=d.length;Bt<cn;Bt++)(sn=d[Bt]).modelViewMatrix.multiplyMatrices(Ke.matrixWorldInverse,sn.matrixWorld),sn.z=-sn.modelViewMatrix.elements[14];d.sort(nt);var en=[];for(Bt=0,cn=d.length;Bt<cn;Bt++){var sn,dn=(sn=d[Bt]).material;if(!1!==dn.visible){g.uniform1f(ie.alphaTest,dn.alphaTest),g.uniformMatrix4fv(ie.modelViewMatrix,!1,sn.modelViewMatrix.elements),sn.matrixWorld.decompose(fe,me,Le),en[0]=Le.x,en[1]=Le.y;var On=0;tt.fog&&dn.fog&&(On=vt),pt!==On&&(g.uniform1i(ie.fogType,On),pt=On),null!==dn.map?(g.uniform2f(ie.uvOffset,dn.map.offset.x,dn.map.offset.y),g.uniform2f(ie.uvScale,dn.map.repeat.x,dn.map.repeat.y)):(g.uniform2f(ie.uvOffset,0,0),g.uniform2f(ie.uvScale,1,1)),g.uniform1f(ie.opacity,dn.opacity),g.uniform3f(ie.color,dn.color.r,dn.color.g,dn.color.b),g.uniform1f(ie.rotation,dn.rotation),g.uniform2fv(ie.scale,en),y.setBlending(dn.blending,dn.blendEquation,dn.blendSrc,dn.blendDst),y.setDepthTest(dn.depthTest),y.setDepthWrite(dn.depthWrite),a.setTexture2D(dn.map?dn.map:ee,0),g.drawElements(g.TRIANGLES,6,g.UNSIGNED_SHORT,0)}}y.enable(g.CULL_FACE),a.resetGLState()}}}Dc.physical={uniforms:nl.merge([Dc.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:$s.meshphysical_vert,fragmentShader:$s.meshphysical_frag},oh.prototype={constructor:oh,set:function(a,d){return this.min.copy(a),this.max.copy(d),this},setFromPoints:function(a){this.makeEmpty();for(var d=0,g=a.length;d<g;d++)this.expandByPoint(a[d]);return this},setFromCenterAndSize:function(){var a=new Xi;return function(g,y){var A=a.copy(y).multiplyScalar(.5);return this.min.copy(g).sub(A),this.max.copy(g).add(A),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.min.copy(a.min),this.max.copy(a.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(a){var d=a||new Xi;return this.isEmpty()?d.set(0,0):d.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(a){var d=a||new Xi;return this.isEmpty()?d.set(0,0):d.subVectors(this.max,this.min)},expandByPoint:function(a){return this.min.min(a),this.max.max(a),this},expandByVector:function(a){return this.min.sub(a),this.max.add(a),this},expandByScalar:function(a){return this.min.addScalar(-a),this.max.addScalar(a),this},containsPoint:function(a){return!(a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y)},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y},getParameter:function(a,d){return(d||new Xi).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(a){return!(a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y)},clampPoint:function(a,d){return(d||new Xi).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new Xi;return function(g){return a.copy(g).clamp(this.min,this.max).sub(g).length()}}(),intersect:function(a){return this.min.max(a.min),this.max.min(a.max),this},union:function(a){return this.min.min(a.min),this.max.max(a.max),this},translate:function(a){return this.min.add(a),this.max.add(a),this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)}};var Ny=0;function Ks(){Object.defineProperty(this,"id",{value:Ny++}),this.uuid=xs.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=ne,this.side=Q,this.shading=Oe,this.vertexColors=re,this.opacity=1,this.transparent=!1,this.blendSrc=Jt,this.blendDst=nn,this.blendEquation=at,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=ci,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this._needsUpdate=!0}function Qc(a){Ks.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,void 0!==a&&(void 0!==a.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(a))}function mi(a){Ks.call(this),this.type="MeshDepthMaterial",this.depthPacking=mv,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(a)}function Es(a,d){this.min=void 0!==a?a:new Qt(1/0,1/0,1/0),this.max=void 0!==d?d:new Qt(-1/0,-1/0,-1/0)}function wt(a,d){this.center=void 0!==a?a:new Qt,this.radius=void 0!==d?d:0}function At(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function dt(a,d){this.normal=void 0!==a?a:new Qt(1,0,0),this.constant=void 0!==d?d:0}function ko(a,d,g,y,A,M){this.planes=[void 0!==a?a:new dt,void 0!==d?d:new dt,void 0!==g?g:new dt,void 0!==y?y:new dt,void 0!==A?A:new dt,void 0!==M?M:new dt]}function Io(a,d,g,y){var A=a.context,M=a.state,R=new ko,N=new gs,ie=d.shadows,ee=new Xi,fe=new Xi(y.maxTextureSize,y.maxTextureSize),me=new Qt,Le=new Qt,ke=[],Ke=new Array(4),pt=new Array(4),vt={},qt=[new Qt(1,0,0),new Qt(-1,0,0),new Qt(0,0,1),new Qt(0,0,-1),new Qt(0,1,0),new Qt(0,-1,0)],Bt=[new Qt(0,1,0),new Qt(0,1,0),new Qt(0,1,0),new Qt(0,1,0),new Qt(0,0,1),new Qt(0,0,-1)],cn=[new $o,new $o,new $o,new $o,new $o,new $o],sn=new mi;sn.depthPacking=Sy,sn.clipping=!0;for(var en=Dc.distanceRGBA,dn=nl.clone(en.uniforms),On=0;4!==On;++On){var Ai=0!=(1&On),ui=0!=(2&On),Wt=sn.clone();Wt.morphTargets=Ai,Wt.skinning=ui,Ke[On]=Wt;var $t=new Qc({defines:{USE_SHADOWMAP:""},uniforms:dn,vertexShader:en.vertexShader,fragmentShader:en.fragmentShader,morphTargets:Ai,skinning:ui,clipping:!0});pt[On]=$t}var Wn=this;function ei(_i,fi,ir,zi){var Xn=_i.geometry,Hn=null,f=Ke,c=_i.customDepthMaterial;if(ir&&(f=pt,c=_i.customDistanceMaterial),c)Hn=c;else{var h=!1;fi.morphTargets&&(Xn&&Xn.isBufferGeometry?h=Xn.morphAttributes&&Xn.morphAttributes.position&&Xn.morphAttributes.position.length>0:Xn&&Xn.isGeometry&&(h=Xn.morphTargets&&Xn.morphTargets.length>0));var _=0;h&&(_|=1),_i.isSkinnedMesh&&fi.skinning&&(_|=2),Hn=f[_]}if(a.localClippingEnabled&&!0===fi.clipShadows&&0!==fi.clippingPlanes.length){var C=Hn.uuid,w=fi.uuid,E=vt[C];void 0===E&&(vt[C]=E={});var k=E[w];void 0===k&&(k=Hn.clone(),E[w]=k),Hn=k}Hn.visible=fi.visible,Hn.wireframe=fi.wireframe;var L=fi.side;return Wn.renderSingleSided&&L==ae&&(L=Q),Wn.renderReverseSided&&(L===Q?L=U:L===U&&(L=Q)),Hn.side=L,Hn.clipShadows=fi.clipShadows,Hn.clippingPlanes=fi.clippingPlanes,Hn.wireframeLinewidth=fi.wireframeLinewidth,Hn.linewidth=fi.linewidth,ir&&void 0!==Hn.uniforms.lightPos&&Hn.uniforms.lightPos.value.copy(zi),Hn}function Ii(_i,fi,ir){if(!1!==_i.visible){0!=(_i.layers.mask&fi.layers.mask)&&(_i.isMesh||_i.isLine||_i.isPoints)&&_i.castShadow&&(!1===_i.frustumCulled||!0===R.intersectsObject(_i))&&!0===_i.material.visible&&(_i.modelViewMatrix.multiplyMatrices(ir.matrixWorldInverse,_i.matrixWorld),ke.push(_i));for(var Hn=_i.children,f=0,c=Hn.length;f<c;f++)Ii(Hn[f],fi,ir)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=oe,this.renderReverseSided=!0,this.renderSingleSided=!0,this.render=function(_i,fi){if(!1!==Wn.enabled&&(!1!==Wn.autoUpdate||!1!==Wn.needsUpdate)&&0!==ie.length){M.buffers.color.setClear(1,1,1,1),M.disable(A.BLEND),M.setDepthTest(!0),M.setScissorTest(!1);for(var ir,zi,Xn=0,Hn=ie.length;Xn<Hn;Xn++){var f=ie[Xn],c=f.shadow;if(void 0!==c){var h=c.camera;if(ee.copy(c.mapSize),ee.min(fe),f&&f.isPointLight){ir=6,zi=!0;var m=ee.x,_=ee.y;cn[0].set(2*m,_,m,_),cn[1].set(0,_,m,_),cn[2].set(3*m,_,m,_),cn[3].set(m,_,m,_),cn[4].set(3*m,0,m,_),cn[5].set(m,0,m,_),ee.x*=4,ee.y*=2}else ir=1,zi=!1;null===c.map&&(c.map=new Ic(ee.x,ee.y,{minFilter:$a,magFilter:$a,format:tl}),h.updateProjectionMatrix()),c.isSpotLightShadow&&c.update(f),c&&c.isRectAreaLightShadow&&c.update(f);var w=c.map,E=c.matrix;Le.setFromMatrixPosition(f.matrixWorld),h.position.copy(Le),a.setRenderTarget(w),a.clear();for(var k=0;k<ir;k++){zi?(me.copy(h.position),me.add(qt[k]),h.up.copy(Bt[k]),h.lookAt(me),M.viewport(cn[k])):(me.setFromMatrixPosition(f.target.matrixWorld),h.lookAt(me)),h.updateMatrixWorld(),h.matrixWorldInverse.getInverse(h.matrixWorld),E.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),E.multiply(h.projectionMatrix),E.multiply(h.matrixWorldInverse),N.multiplyMatrices(h.projectionMatrix,h.matrixWorldInverse),R.setFromMatrix(N),ke.length=0,Ii(_i,fi,h);for(var G=0,K=ke.length;G<K;G++){var le=ke[G],he=g.update(le),pe=le.material;if(pe&&pe.isMultiMaterial)for(var Ie=he.groups,Ne=pe.materials,ze=0,Qe=Ie.length;ze<Qe;ze++){var qe=Ie[ze],ht=Ne[qe.materialIndex];if(!0===ht.visible){var Lt=ei(le,ht,zi,Le);a.renderBufferDirect(h,null,he,Lt,le,qe)}}else Lt=ei(le,pe,zi,Le),a.renderBufferDirect(h,null,he,Lt,le,null)}}}else console.warn("THREE.WebGLShadowMap:",f,"has no shadow.")}var kt=a.getClearColor(),mt=a.getClearAlpha();a.setClearColor(kt,mt),Wn.needsUpdate=!1}}}function sa(a,d){this.origin=void 0!==a?a:new Qt,this.direction=void 0!==d?d:new Qt}function Ps(a,d,g,y){this._x=a||0,this._y=d||0,this._z=g||0,this._order=y||Ps.DefaultOrder}function $p(){this.mask=1}Ks.prototype={constructor:Ks,isMaterial:!0,get needsUpdate(){return this._needsUpdate},set needsUpdate(a){!0===a&&this.update(),this._needsUpdate=a},setValues:function(a){if(void 0!==a)for(var d in a){var g=a[d];if(void 0!==g){var y=this[d];void 0!==y?y&&y.isColor?y.set(g):y&&y.isVector3&&g&&g.isVector3?y.copy(g):this[d]="overdraw"===d?Number(g):g:console.warn("THREE."+this.type+": '"+d+"' is not a property of this material.")}else console.warn("THREE.Material: '"+d+"' parameter is undefined.")}},toJSON:function(a){var d=void 0===a;d&&(a={textures:{},images:{}});var g={metadata:{version:4.4,type:"Material",generator:"Material.toJSON"}};function y(R){var N=[];for(var ie in R){var ee=R[ie];delete ee.metadata,N.push(ee)}return N}if(g.uuid=this.uuid,g.type=this.type,""!==this.name&&(g.name=this.name),this.color&&this.color.isColor&&(g.color=this.color.getHex()),void 0!==this.roughness&&(g.roughness=this.roughness),void 0!==this.metalness&&(g.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(g.emissive=this.emissive.getHex()),this.specular&&this.specular.isColor&&(g.specular=this.specular.getHex()),void 0!==this.shininess&&(g.shininess=this.shininess),void 0!==this.clearCoat&&(g.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(g.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(g.map=this.map.toJSON(a).uuid),this.alphaMap&&this.alphaMap.isTexture&&(g.alphaMap=this.alphaMap.toJSON(a).uuid),this.lightMap&&this.lightMap.isTexture&&(g.lightMap=this.lightMap.toJSON(a).uuid),this.bumpMap&&this.bumpMap.isTexture&&(g.bumpMap=this.bumpMap.toJSON(a).uuid,g.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(g.normalMap=this.normalMap.toJSON(a).uuid,g.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(g.displacementMap=this.displacementMap.toJSON(a).uuid,g.displacementScale=this.displacementScale,g.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(g.roughnessMap=this.roughnessMap.toJSON(a).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(g.metalnessMap=this.metalnessMap.toJSON(a).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(g.emissiveMap=this.emissiveMap.toJSON(a).uuid),this.specularMap&&this.specularMap.isTexture&&(g.specularMap=this.specularMap.toJSON(a).uuid),this.envMap&&this.envMap.isTexture&&(g.envMap=this.envMap.toJSON(a).uuid,g.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(g.gradientMap=this.gradientMap.toJSON(a).uuid),void 0!==this.size&&(g.size=this.size),void 0!==this.sizeAttenuation&&(g.sizeAttenuation=this.sizeAttenuation),this.blending!==ne&&(g.blending=this.blending),this.shading!==Oe&&(g.shading=this.shading),this.side!==Q&&(g.side=this.side),this.vertexColors!==re&&(g.vertexColors=this.vertexColors),this.opacity<1&&(g.opacity=this.opacity),!0===this.transparent&&(g.transparent=this.transparent),g.depthFunc=this.depthFunc,g.depthTest=this.depthTest,g.depthWrite=this.depthWrite,this.alphaTest>0&&(g.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(g.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(g.wireframe=this.wireframe),this.wireframeLinewidth>1&&(g.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(g.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(g.wireframeLinejoin=this.wireframeLinejoin),g.skinning=this.skinning,g.morphTargets=this.morphTargets,d){var A=y(a.textures),M=y(a.images);A.length>0&&(g.textures=A),M.length>0&&(g.images=M)}return g},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.name=a.name,this.fog=a.fog,this.lights=a.lights,this.blending=a.blending,this.side=a.side,this.shading=a.shading,this.vertexColors=a.vertexColors,this.opacity=a.opacity,this.transparent=a.transparent,this.blendSrc=a.blendSrc,this.blendDst=a.blendDst,this.blendEquation=a.blendEquation,this.blendSrcAlpha=a.blendSrcAlpha,this.blendDstAlpha=a.blendDstAlpha,this.blendEquationAlpha=a.blendEquationAlpha,this.depthFunc=a.depthFunc,this.depthTest=a.depthTest,this.depthWrite=a.depthWrite,this.colorWrite=a.colorWrite,this.precision=a.precision,this.polygonOffset=a.polygonOffset,this.polygonOffsetFactor=a.polygonOffsetFactor,this.polygonOffsetUnits=a.polygonOffsetUnits,this.alphaTest=a.alphaTest,this.premultipliedAlpha=a.premultipliedAlpha,this.overdraw=a.overdraw,this.visible=a.visible,this.clipShadows=a.clipShadows,this.clipIntersection=a.clipIntersection;var d=a.clippingPlanes,g=null;if(null!==d){var y=d.length;g=new Array(y);for(var A=0;A!==y;++A)g[A]=d[A].clone()}return this.clippingPlanes=g,this},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},Object.assign(Ks.prototype,Y.prototype),(Qc.prototype=Object.create(Ks.prototype)).constructor=Qc,Qc.prototype.isShaderMaterial=!0,Qc.prototype.copy=function(a){return Ks.prototype.copy.call(this,a),this.fragmentShader=a.fragmentShader,this.vertexShader=a.vertexShader,this.uniforms=nl.clone(a.uniforms),this.defines=a.defines,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.lights=a.lights,this.clipping=a.clipping,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.morphNormals=a.morphNormals,this.extensions=a.extensions,this},Qc.prototype.toJSON=function(a){var d=Ks.prototype.toJSON.call(this,a);return d.uniforms=this.uniforms,d.vertexShader=this.vertexShader,d.fragmentShader=this.fragmentShader,d},(mi.prototype=Object.create(Ks.prototype)).constructor=mi,mi.prototype.isMeshDepthMaterial=!0,mi.prototype.copy=function(a){return Ks.prototype.copy.call(this,a),this.depthPacking=a.depthPacking,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.map=a.map,this.alphaMap=a.alphaMap,this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this},Es.prototype={constructor:Es,isBox3:!0,set:function(a,d){return this.min.copy(a),this.max.copy(d),this},setFromArray:function(a){for(var d=1/0,g=1/0,y=1/0,A=-1/0,M=-1/0,R=-1/0,N=0,ie=a.length;N<ie;N+=3){var ee=a[N],fe=a[N+1],me=a[N+2];ee<d&&(d=ee),fe<g&&(g=fe),me<y&&(y=me),ee>A&&(A=ee),fe>M&&(M=fe),me>R&&(R=me)}this.min.set(d,g,y),this.max.set(A,M,R)},setFromBufferAttribute:function(a){for(var d=1/0,g=1/0,y=1/0,A=-1/0,M=-1/0,R=-1/0,N=0,ie=a.count;N<ie;N++){var ee=a.getX(N),fe=a.getY(N),me=a.getZ(N);ee<d&&(d=ee),fe<g&&(g=fe),me<y&&(y=me),ee>A&&(A=ee),fe>M&&(M=fe),me>R&&(R=me)}this.min.set(d,g,y),this.max.set(A,M,R)},setFromPoints:function(a){this.makeEmpty();for(var d=0,g=a.length;d<g;d++)this.expandByPoint(a[d]);return this},setFromCenterAndSize:function(){var a=new Qt;return function(g,y){var A=a.copy(y).multiplyScalar(.5);return this.min.copy(g).sub(A),this.max.copy(g).add(A),this}}(),setFromObject:function(){var a=new Qt;return function(g){var y=this;return g.updateMatrixWorld(!0),this.makeEmpty(),g.traverse(function(A){var M,R,N=A.geometry;if(void 0!==N)if(N.isGeometry){var ie=N.vertices;for(M=0,R=ie.length;M<R;M++)a.copy(ie[M]),a.applyMatrix4(A.matrixWorld),y.expandByPoint(a)}else if(N.isBufferGeometry){var ee=N.attributes.position;if(void 0!==ee)for(M=0,R=ee.count;M<R;M++)a.fromAttribute(ee,M).applyMatrix4(A.matrixWorld),y.expandByPoint(a)}}),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.min.copy(a.min),this.max.copy(a.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(a){var d=a||new Qt;return this.isEmpty()?d.set(0,0,0):d.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(a){var d=a||new Qt;return this.isEmpty()?d.set(0,0,0):d.subVectors(this.max,this.min)},expandByPoint:function(a){return this.min.min(a),this.max.max(a),this},expandByVector:function(a){return this.min.sub(a),this.max.add(a),this},expandByScalar:function(a){return this.min.addScalar(-a),this.max.addScalar(a),this},containsPoint:function(a){return!(a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y||a.z<this.min.z||a.z>this.max.z)},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&a.max.z<=this.max.z},getParameter:function(a,d){return(d||new Qt).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(a){return!(a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y||a.max.z<this.min.z||a.min.z>this.max.z)},intersectsSphere:function(){var a;return function(g){return void 0===a&&(a=new Qt),this.clampPoint(g.center,a),a.distanceToSquared(g.center)<=g.radius*g.radius}}(),intersectsPlane:function(a){var d,g;return a.normal.x>0?(d=a.normal.x*this.min.x,g=a.normal.x*this.max.x):(d=a.normal.x*this.max.x,g=a.normal.x*this.min.x),a.normal.y>0?(d+=a.normal.y*this.min.y,g+=a.normal.y*this.max.y):(d+=a.normal.y*this.max.y,g+=a.normal.y*this.min.y),a.normal.z>0?(d+=a.normal.z*this.min.z,g+=a.normal.z*this.max.z):(d+=a.normal.z*this.max.z,g+=a.normal.z*this.min.z),d<=a.constant&&g>=a.constant},clampPoint:function(a,d){return(d||new Qt).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new Qt;return function(g){return a.copy(g).clamp(this.min,this.max).sub(g).length()}}(),getBoundingSphere:function(){var a=new Qt;return function(g){var y=g||new wt;return this.getCenter(y.center),y.radius=.5*this.getSize(a).length(),y}}(),intersect:function(a){return this.min.max(a.min),this.max.min(a.max),this.isEmpty()&&this.makeEmpty(),this},union:function(a){return this.min.min(a.min),this.max.max(a.max),this},applyMatrix4:function(){var a=[new Qt,new Qt,new Qt,new Qt,new Qt,new Qt,new Qt,new Qt];return function(g){return this.isEmpty()||(a[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(g),a[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(g),a[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(g),a[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(g),a[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(g),a[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(g),a[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(g),a[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(g),this.setFromPoints(a)),this}}(),translate:function(a){return this.min.add(a),this.max.add(a),this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)}},wt.prototype={constructor:wt,set:function(a,d){return this.center.copy(a),this.radius=d,this},setFromPoints:function(){var a=new Es;return function(g,y){var A=this.center;void 0!==y?A.copy(y):a.setFromPoints(g).getCenter(A);for(var M=0,R=0,N=g.length;R<N;R++)M=Math.max(M,A.distanceToSquared(g[R]));return this.radius=Math.sqrt(M),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.center.copy(a.center),this.radius=a.radius,this},empty:function(){return this.radius<=0},containsPoint:function(a){return a.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(a){return a.distanceTo(this.center)-this.radius},intersectsSphere:function(a){var d=this.radius+a.radius;return a.center.distanceToSquared(this.center)<=d*d},intersectsBox:function(a){return a.intersectsSphere(this)},intersectsPlane:function(a){return Math.abs(this.center.dot(a.normal)-a.constant)<=this.radius},clampPoint:function(a,d){var g=this.center.distanceToSquared(a),y=d||new Qt;return y.copy(a),g>this.radius*this.radius&&(y.sub(this.center).normalize(),y.multiplyScalar(this.radius).add(this.center)),y},getBoundingBox:function(a){var d=a||new Es;return d.set(this.center,this.center),d.expandByScalar(this.radius),d},applyMatrix4:function(a){return this.center.applyMatrix4(a),this.radius=this.radius*a.getMaxScaleOnAxis(),this},translate:function(a){return this.center.add(a),this},equals:function(a){return a.center.equals(this.center)&&a.radius===this.radius}},At.prototype={constructor:At,isMatrix3:!0,set:function(a,d,g,y,A,M,R,N,ie){var ee=this.elements;return ee[0]=a,ee[1]=y,ee[2]=R,ee[3]=d,ee[4]=A,ee[5]=N,ee[6]=g,ee[7]=M,ee[8]=ie,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(a){var d=a.elements;return this.set(d[0],d[3],d[6],d[1],d[4],d[7],d[2],d[5],d[8]),this},setFromMatrix4:function(a){var d=a.elements;return this.set(d[0],d[4],d[8],d[1],d[5],d[9],d[2],d[6],d[10]),this},applyToVector3Array:function(){var a;return function(g,y,A){void 0===a&&(a=new Qt),void 0===y&&(y=0),void 0===A&&(A=g.length);for(var M=0,R=y;M<A;M+=3,R+=3)a.fromArray(g,R),a.applyMatrix3(this),a.toArray(g,R);return g}}(),applyToBufferAttribute:function(){var a;return function(g){void 0===a&&(a=new Qt);for(var y=0,A=g.count;y<A;y++)a.x=g.getX(y),a.y=g.getY(y),a.z=g.getZ(y),a.applyMatrix3(this),g.setXYZ(y,a.x,a.y,a.z);return g}}(),multiplyScalar:function(a){var d=this.elements;return d[0]*=a,d[3]*=a,d[6]*=a,d[1]*=a,d[4]*=a,d[7]*=a,d[2]*=a,d[5]*=a,d[8]*=a,this},determinant:function(){var a=this.elements,d=a[0],g=a[1],y=a[2],A=a[3],M=a[4],R=a[5],N=a[6],ie=a[7],ee=a[8];return d*M*ee-d*R*ie-g*A*ee+g*R*N+y*A*ie-y*M*N},getInverse:function(a,d){a&&a.isMatrix4&&console.error("THREE.Matrix3.getInverse no longer takes a Matrix4 argument.");var g=a.elements,y=this.elements,A=g[0],M=g[1],R=g[2],N=g[3],ie=g[4],ee=g[5],fe=g[6],me=g[7],Le=g[8],ke=Le*ie-ee*me,Fe=ee*fe-Le*N,nt=me*N-ie*fe,tt=A*ke+M*Fe+R*nt;if(0===tt){var Ke="THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0";if(!0===d)throw new Error(Ke);return console.warn(Ke),this.identity()}var pt=1/tt;return y[0]=ke*pt,y[1]=(R*me-Le*M)*pt,y[2]=(ee*M-R*ie)*pt,y[3]=Fe*pt,y[4]=(Le*A-R*fe)*pt,y[5]=(R*N-ee*A)*pt,y[6]=nt*pt,y[7]=(M*fe-me*A)*pt,y[8]=(ie*A-M*N)*pt,this},transpose:function(){var a,d=this.elements;return a=d[1],d[1]=d[3],d[3]=a,a=d[2],d[2]=d[6],d[6]=a,a=d[5],d[5]=d[7],d[7]=a,this},getNormalMatrix:function(a){return this.setFromMatrix4(a).getInverse(this).transpose()},transposeIntoArray:function(a){var d=this.elements;return a[0]=d[0],a[1]=d[3],a[2]=d[6],a[3]=d[1],a[4]=d[4],a[5]=d[7],a[6]=d[2],a[7]=d[5],a[8]=d[8],this},fromArray:function(a,d){void 0===d&&(d=0);for(var g=0;g<9;g++)this.elements[g]=a[g+d];return this},toArray:function(a,d){void 0===a&&(a=[]),void 0===d&&(d=0);var g=this.elements;return a[d]=g[0],a[d+1]=g[1],a[d+2]=g[2],a[d+3]=g[3],a[d+4]=g[4],a[d+5]=g[5],a[d+6]=g[6],a[d+7]=g[7],a[d+8]=g[8],a}},dt.prototype={constructor:dt,set:function(a,d){return this.normal.copy(a),this.constant=d,this},setComponents:function(a,d,g,y){return this.normal.set(a,d,g),this.constant=y,this},setFromNormalAndCoplanarPoint:function(a,d){return this.normal.copy(a),this.constant=-d.dot(this.normal),this},setFromCoplanarPoints:function(){var a=new Qt,d=new Qt;return function(y,A,M){var R=a.subVectors(M,A).cross(d.subVectors(y,A)).normalize();return this.setFromNormalAndCoplanarPoint(R,y),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.normal.copy(a.normal),this.constant=a.constant,this},normalize:function(){var a=1/this.normal.length();return this.normal.multiplyScalar(a),this.constant*=a,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(a){return this.normal.dot(a)+this.constant},distanceToSphere:function(a){return this.distanceToPoint(a.center)-a.radius},projectPoint:function(a,d){return this.orthoPoint(a,d).sub(a).negate()},orthoPoint:function(a,d){var g=this.distanceToPoint(a);return(d||new Qt).copy(this.normal).multiplyScalar(g)},intersectLine:function(){var a=new Qt;return function(g,y){var A=y||new Qt,M=g.delta(a),R=this.normal.dot(M);if(0===R)return 0===this.distanceToPoint(g.start)?A.copy(g.start):void 0;var N=-(g.start.dot(this.normal)+this.constant)/R;return N<0||N>1?void 0:A.copy(M).multiplyScalar(N).add(g.start)}}(),intersectsLine:function(a){var d=this.distanceToPoint(a.start),g=this.distanceToPoint(a.end);return d<0&&g>0||g<0&&d>0},intersectsBox:function(a){return a.intersectsPlane(this)},intersectsSphere:function(a){return a.intersectsPlane(this)},coplanarPoint:function(a){return(a||new Qt).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var a=new Qt,d=new At;return function(y,A){var M=this.coplanarPoint(a).applyMatrix4(y),R=A||d.getNormalMatrix(y),N=this.normal.applyMatrix3(R).normalize();return this.constant=-M.dot(N),this}}(),translate:function(a){return this.constant=this.constant-a.dot(this.normal),this},equals:function(a){return a.normal.equals(this.normal)&&a.constant===this.constant}},ko.prototype={constructor:ko,set:function(a,d,g,y,A,M){var R=this.planes;return R[0].copy(a),R[1].copy(d),R[2].copy(g),R[3].copy(y),R[4].copy(A),R[5].copy(M),this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){for(var d=this.planes,g=0;g<6;g++)d[g].copy(a.planes[g]);return this},setFromMatrix:function(a){var d=this.planes,g=a.elements,y=g[0],A=g[1],M=g[2],R=g[3],N=g[4],ie=g[5],ee=g[6],fe=g[7],me=g[8],Le=g[9],ke=g[10],Fe=g[11],nt=g[12],tt=g[13],Ke=g[14],pt=g[15];return d[0].setComponents(R-y,fe-N,Fe-me,pt-nt).normalize(),d[1].setComponents(R+y,fe+N,Fe+me,pt+nt).normalize(),d[2].setComponents(R+A,fe+ie,Fe+Le,pt+tt).normalize(),d[3].setComponents(R-A,fe-ie,Fe-Le,pt-tt).normalize(),d[4].setComponents(R-M,fe-ee,Fe-ke,pt-Ke).normalize(),d[5].setComponents(R+M,fe+ee,Fe+ke,pt+Ke).normalize(),this},intersectsObject:function(){var a=new wt;return function(g){var y=g.geometry;return null===y.boundingSphere&&y.computeBoundingSphere(),a.copy(y.boundingSphere).applyMatrix4(g.matrixWorld),this.intersectsSphere(a)}}(),intersectsSprite:function(){var a=new wt;return function(g){return a.center.set(0,0,0),a.radius=.7071067811865476,a.applyMatrix4(g.matrixWorld),this.intersectsSphere(a)}}(),intersectsSphere:function(a){for(var d=this.planes,g=a.center,y=-a.radius,A=0;A<6;A++)if(d[A].distanceToPoint(g)<y)return!1;return!0},intersectsBox:function(){var a=new Qt,d=new Qt;return function(y){for(var A=this.planes,M=0;M<6;M++){var R=A[M];a.x=R.normal.x>0?y.min.x:y.max.x,d.x=R.normal.x>0?y.max.x:y.min.x,a.y=R.normal.y>0?y.min.y:y.max.y,d.y=R.normal.y>0?y.max.y:y.min.y,a.z=R.normal.z>0?y.min.z:y.max.z,d.z=R.normal.z>0?y.max.z:y.min.z;var N=R.distanceToPoint(a),ie=R.distanceToPoint(d);if(N<0&&ie<0)return!1}return!0}}(),containsPoint:function(a){for(var d=this.planes,g=0;g<6;g++)if(d[g].distanceToPoint(a)<0)return!1;return!0}},sa.prototype={constructor:sa,set:function(a,d){return this.origin.copy(a),this.direction.copy(d),this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.origin.copy(a.origin),this.direction.copy(a.direction),this},at:function(a,d){return(d||new Qt).copy(this.direction).multiplyScalar(a).add(this.origin)},lookAt:function(a){return this.direction.copy(a).sub(this.origin).normalize(),this},recast:function(){var a=new Qt;return function(g){return this.origin.copy(this.at(g,a)),this}}(),closestPointToPoint:function(a,d){var g=d||new Qt;g.subVectors(a,this.origin);var y=g.dot(this.direction);return y<0?g.copy(this.origin):g.copy(this.direction).multiplyScalar(y).add(this.origin)},distanceToPoint:function(a){return Math.sqrt(this.distanceSqToPoint(a))},distanceSqToPoint:function(){var a=new Qt;return function(g){var y=a.subVectors(g,this.origin).dot(this.direction);return y<0?this.origin.distanceToSquared(g):(a.copy(this.direction).multiplyScalar(y).add(this.origin),a.distanceToSquared(g))}}(),distanceSqToSegment:function(){var a=new Qt,d=new Qt,g=new Qt;return function(A,M,R,N){a.copy(A).add(M).multiplyScalar(.5),d.copy(M).sub(A).normalize(),g.copy(this.origin).sub(a);var Fe,nt,tt,Ke,ie=.5*A.distanceTo(M),ee=-this.direction.dot(d),fe=g.dot(this.direction),me=-g.dot(d),Le=g.lengthSq(),ke=Math.abs(1-ee*ee);if(ke>0)if(nt=ee*fe-me,Ke=ie*ke,(Fe=ee*me-fe)>=0)if(nt>=-Ke)if(nt<=Ke){var pt=1/ke;tt=(Fe*=pt)*(Fe+ee*(nt*=pt)+2*fe)+nt*(ee*Fe+nt+2*me)+Le}else nt=ie,tt=-(Fe=Math.max(0,-(ee*nt+fe)))*Fe+nt*(nt+2*me)+Le;else nt=-ie,tt=-(Fe=Math.max(0,-(ee*nt+fe)))*Fe+nt*(nt+2*me)+Le;else nt<=-Ke?tt=-(Fe=Math.max(0,-(-ee*ie+fe)))*Fe+(nt=Fe>0?-ie:Math.min(Math.max(-ie,-me),ie))*(nt+2*me)+Le:nt<=Ke?(Fe=0,tt=(nt=Math.min(Math.max(-ie,-me),ie))*(nt+2*me)+Le):tt=-(Fe=Math.max(0,-(ee*ie+fe)))*Fe+(nt=Fe>0?ie:Math.min(Math.max(-ie,-me),ie))*(nt+2*me)+Le;else nt=ee>0?-ie:ie,tt=-(Fe=Math.max(0,-(ee*nt+fe)))*Fe+nt*(nt+2*me)+Le;return R&&R.copy(this.direction).multiplyScalar(Fe).add(this.origin),N&&N.copy(d).multiplyScalar(nt).add(a),tt}}(),intersectSphere:function(){var a=new Qt;return function(g,y){a.subVectors(g.center,this.origin);var A=a.dot(this.direction),M=a.dot(a)-A*A,R=g.radius*g.radius;if(M>R)return null;var N=Math.sqrt(R-M),ie=A-N,ee=A+N;return ie<0&&ee<0?null:this.at(ie<0?ee:ie,y)}}(),intersectsSphere:function(a){return this.distanceToPoint(a.center)<=a.radius},distanceToPlane:function(a){var d=a.normal.dot(this.direction);if(0===d)return 0===a.distanceToPoint(this.origin)?0:null;var g=-(this.origin.dot(a.normal)+a.constant)/d;return g>=0?g:null},intersectPlane:function(a,d){var g=this.distanceToPlane(a);return null===g?null:this.at(g,d)},intersectsPlane:function(a){var d=a.distanceToPoint(this.origin);return 0===d||a.normal.dot(this.direction)*d<0},intersectBox:function(a,d){var g,y,A,M,R,N,ie=1/this.direction.x,ee=1/this.direction.y,fe=1/this.direction.z,me=this.origin;return ie>=0?(g=(a.min.x-me.x)*ie,y=(a.max.x-me.x)*ie):(g=(a.max.x-me.x)*ie,y=(a.min.x-me.x)*ie),ee>=0?(A=(a.min.y-me.y)*ee,M=(a.max.y-me.y)*ee):(A=(a.max.y-me.y)*ee,M=(a.min.y-me.y)*ee),g>M||A>y||((A>g||g!=g)&&(g=A),(M<y||y!=y)&&(y=M),fe>=0?(R=(a.min.z-me.z)*fe,N=(a.max.z-me.z)*fe):(R=(a.max.z-me.z)*fe,N=(a.min.z-me.z)*fe),g>N||R>y)||((R>g||g!=g)&&(g=R),(N<y||y!=y)&&(y=N),y<0)?null:this.at(g>=0?g:y,d)},intersectsBox:function(){var a=new Qt;return function(g){return null!==this.intersectBox(g,a)}}(),intersectTriangle:function(){var a=new Qt,d=new Qt,g=new Qt,y=new Qt;return function(M,R,N,ie,ee){d.subVectors(R,M),g.subVectors(N,M),y.crossVectors(d,g);var me,fe=this.direction.dot(y);if(fe>0){if(ie)return null;me=1}else{if(!(fe<0))return null;me=-1,fe=-fe}a.subVectors(this.origin,M);var Le=me*this.direction.dot(g.crossVectors(a,g));if(Le<0)return null;var ke=me*this.direction.dot(d.cross(a));if(ke<0||Le+ke>fe)return null;var Fe=-me*a.dot(y);return Fe<0?null:this.at(Fe/fe,ee)}}(),applyMatrix4:function(a){return this.direction.add(this.origin).applyMatrix4(a),this.origin.applyMatrix4(a),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)}},Ps.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],Ps.DefaultOrder="XYZ",Ps.prototype={constructor:Ps,isEuler:!0,get x(){return this._x},set x(a){this._x=a,this.onChangeCallback()},get y(){return this._y},set y(a){this._y=a,this.onChangeCallback()},get z(){return this._z},set z(a){this._z=a,this.onChangeCallback()},get order(){return this._order},set order(a){this._order=a,this.onChangeCallback()},set:function(a,d,g,y){return this._x=a,this._y=d,this._z=g,this._order=y||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(a){return this._x=a._x,this._y=a._y,this._z=a._z,this._order=a._order,this.onChangeCallback(),this},setFromRotationMatrix:function(a,d,g){var y=xs.clamp,A=a.elements,M=A[0],R=A[4],N=A[8],ie=A[1],ee=A[5],fe=A[9],me=A[2],Le=A[6],ke=A[10];return"XYZ"===(d=d||this._order)?(this._y=Math.asin(y(N,-1,1)),Math.abs(N)<.99999?(this._x=Math.atan2(-fe,ke),this._z=Math.atan2(-R,M)):(this._x=Math.atan2(Le,ee),this._z=0)):"YXZ"===d?(this._x=Math.asin(-y(fe,-1,1)),Math.abs(fe)<.99999?(this._y=Math.atan2(N,ke),this._z=Math.atan2(ie,ee)):(this._y=Math.atan2(-me,M),this._z=0)):"ZXY"===d?(this._x=Math.asin(y(Le,-1,1)),Math.abs(Le)<.99999?(this._y=Math.atan2(-me,ke),this._z=Math.atan2(-R,ee)):(this._y=0,this._z=Math.atan2(ie,M))):"ZYX"===d?(this._y=Math.asin(-y(me,-1,1)),Math.abs(me)<.99999?(this._x=Math.atan2(Le,ke),this._z=Math.atan2(ie,M)):(this._x=0,this._z=Math.atan2(-R,ee))):"YZX"===d?(this._z=Math.asin(y(ie,-1,1)),Math.abs(ie)<.99999?(this._x=Math.atan2(-fe,ee),this._y=Math.atan2(-me,M)):(this._x=0,this._y=Math.atan2(N,ke))):"XZY"===d?(this._z=Math.asin(-y(R,-1,1)),Math.abs(R)<.99999?(this._x=Math.atan2(Le,ee),this._y=Math.atan2(N,M)):(this._x=Math.atan2(-fe,ke),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+d),this._order=d,!1!==g&&this.onChangeCallback(),this},setFromQuaternion:function(){var a;return function(g,y,A){return void 0===a&&(a=new gs),a.makeRotationFromQuaternion(g),this.setFromRotationMatrix(a,y,A)}}(),setFromVector3:function(a,d){return this.set(a.x,a.y,a.z,d||this._order)},reorder:function(){var a=new Rl;return function(g){return a.setFromEuler(this),this.setFromQuaternion(a,g)}}(),equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._order===this._order},fromArray:function(a){return this._x=a[0],this._y=a[1],this._z=a[2],void 0!==a[3]&&(this._order=a[3]),this.onChangeCallback(),this},toArray:function(a,d){return void 0===a&&(a=[]),void 0===d&&(d=0),a[d]=this._x,a[d+1]=this._y,a[d+2]=this._z,a[d+3]=this._order,a},toVector3:function(a){return a?a.set(this._x,this._y,this._z):new Qt(this._x,this._y,this._z)},onChange:function(a){return this.onChangeCallback=a,this},onChangeCallback:function(){}},$p.prototype={constructor:$p,set:function(a){this.mask=1<<a},enable:function(a){this.mask|=1<<a},toggle:function(a){this.mask^=1<<a},disable:function(a){this.mask&=~(1<<a)},test:function(a){return 0!=(this.mask&a.mask)}};var rp=0;function br(){Object.defineProperty(this,"id",{value:rp++}),this.uuid=xs.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=br.DefaultUp.clone();var a=new Qt,d=new Ps,g=new Rl,y=new Qt(1,1,1);d.onChange(function A(){g.setFromEuler(d,!1)}),g.onChange(function M(){d.setFromQuaternion(g,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:a},rotation:{enumerable:!0,value:d},quaternion:{enumerable:!0,value:g},scale:{enumerable:!0,value:y},modelViewMatrix:{value:new gs},normalMatrix:{value:new At}}),this.matrix=new gs,this.matrixWorld=new gs,this.matrixAutoUpdate=br.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new $p,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={},this.onBeforeRender=function(){},this.onAfterRender=function(){}}function Ol(a,d){this.start=void 0!==a?a:new Qt,this.end=void 0!==d?d:new Qt}function Ca(a,d,g){this.a=void 0!==a?a:new Qt,this.b=void 0!==d?d:new Qt,this.c=void 0!==g?g:new Qt}function Oo(a,d,g,y,A,M){this.a=a,this.b=d,this.c=g,this.normal=y&&y.isVector3?y:new Qt,this.vertexNormals=Array.isArray(y)?y:[],this.color=A&&A.isColor?A:new Wr,this.vertexColors=Array.isArray(A)?A:[],this.materialIndex=void 0!==M?M:0}function Ba(a){Ks.call(this),this.type="MeshBasicMaterial",this.color=new Wr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Je,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(a)}function dr(a,d,g){if(Array.isArray(a))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.uuid=xs.generateUUID(),this.array=a,this.itemSize=d,this.count=void 0!==a?a.length/d:0,this.normalized=!0===g,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function kd(a,d){dr.call(this,new Int8Array(a),d)}function gl(a,d){dr.call(this,new Uint8Array(a),d)}function Fh(a,d){dr.call(this,new Uint8ClampedArray(a),d)}function sp(a,d){dr.call(this,new Int16Array(a),d)}function Nh(a,d){dr.call(this,new Uint16Array(a),d)}function _f(a,d){dr.call(this,new Int32Array(a),d)}function Ou(a,d){dr.call(this,new Uint32Array(a),d)}function is(a,d){dr.call(this,new Float32Array(a),d)}function Lc(a,d){dr.call(this,new Float64Array(a),d)}function Ug(){this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Ts(){Object.defineProperty(this,"id",{value:Hg()}),this.uuid=xs.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}br.DefaultUp=new Qt(0,1,0),br.DefaultMatrixAutoUpdate=!0,Object.assign(br.prototype,Y.prototype,{isObject3D:!0,applyMatrix:function(a){this.matrix.multiplyMatrices(a,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(a,d){this.quaternion.setFromAxisAngle(a,d)},setRotationFromEuler:function(a){this.quaternion.setFromEuler(a,!0)},setRotationFromMatrix:function(a){this.quaternion.setFromRotationMatrix(a)},setRotationFromQuaternion:function(a){this.quaternion.copy(a)},rotateOnAxis:function(){var a=new Rl;return function(g,y){return a.setFromAxisAngle(g,y),this.quaternion.multiply(a),this}}(),rotateX:function(){var a=new Qt(1,0,0);return function(g){return this.rotateOnAxis(a,g)}}(),rotateY:function(){var a=new Qt(0,1,0);return function(g){return this.rotateOnAxis(a,g)}}(),rotateZ:function(){var a=new Qt(0,0,1);return function(g){return this.rotateOnAxis(a,g)}}(),translateOnAxis:function(){var a=new Qt;return function(g,y){return a.copy(g).applyQuaternion(this.quaternion),this.position.add(a.multiplyScalar(y)),this}}(),translateX:function(){var a=new Qt(1,0,0);return function(g){return this.translateOnAxis(a,g)}}(),translateY:function(){var a=new Qt(0,1,0);return function(g){return this.translateOnAxis(a,g)}}(),translateZ:function(){var a=new Qt(0,0,1);return function(g){return this.translateOnAxis(a,g)}}(),localToWorld:function(a){return a.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var a=new gs;return function(g){return g.applyMatrix4(a.getInverse(this.matrixWorld))}}(),lookAt:function(){var a=new gs;return function(g){a.lookAt(g,this.position,this.up),this.quaternion.setFromRotationMatrix(a)}}(),add:function(a){if(arguments.length>1){for(var d=0;d<arguments.length;d++)this.add(arguments[d]);return this}return a===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",a),this):(a&&a.isObject3D?(null!==a.parent&&a.parent.remove(a),a.parent=this,a.dispatchEvent({type:"added"}),this.children.push(a)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",a),this)},remove:function(a){if(arguments.length>1)for(var d=0;d<arguments.length;d++)this.remove(arguments[d]);var g=this.children.indexOf(a);-1!==g&&(a.parent=null,a.dispatchEvent({type:"removed"}),this.children.splice(g,1))},getObjectById:function(a){return this.getObjectByProperty("id",a)},getObjectByName:function(a){return this.getObjectByProperty("name",a)},getObjectByProperty:function(a,d){if(this[a]===d)return this;for(var g=0,y=this.children.length;g<y;g++){var M=this.children[g].getObjectByProperty(a,d);if(void 0!==M)return M}},getWorldPosition:function(a){var d=a||new Qt;return this.updateMatrixWorld(!0),d.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var a=new Qt,d=new Qt;return function(y){var A=y||new Rl;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(a,A,d),A}}(),getWorldRotation:function(){var a=new Rl;return function(g){var y=g||new Ps;return this.getWorldQuaternion(a),y.setFromQuaternion(a,this.rotation.order,!1)}}(),getWorldScale:function(){var a=new Qt,d=new Rl;return function(y){var A=y||new Qt;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(a,d,A),A}}(),getWorldDirection:function(){var a=new Rl;return function(g){var y=g||new Qt;return this.getWorldQuaternion(a),y.set(0,0,1).applyQuaternion(a)}}(),raycast:function(){},traverse:function(a){a(this);for(var d=this.children,g=0,y=d.length;g<y;g++)d[g].traverse(a)},traverseVisible:function(a){if(!1!==this.visible){a(this);for(var d=this.children,g=0,y=d.length;g<y;g++)d[g].traverseVisible(a)}},traverseAncestors:function(a){var d=this.parent;null!==d&&(a(d),d.traverseAncestors(a))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(a){!0===this.matrixAutoUpdate&&this.updateMatrix(),(!0===this.matrixWorldNeedsUpdate||!0===a)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0);for(var d=this.children,g=0,y=d.length;g<y;g++)d[g].updateMatrixWorld(a)},toJSON:function(a){var d=void 0===a||""===a,g={};d&&(a={geometries:{},materials:{},textures:{},images:{}},g.metadata={version:4.4,type:"Object",generator:"Object3D.toJSON"});var y={};if(y.uuid=this.uuid,y.type=this.type,""!==this.name&&(y.name=this.name),"{}"!==JSON.stringify(this.userData)&&(y.userData=this.userData),!0===this.castShadow&&(y.castShadow=!0),!0===this.receiveShadow&&(y.receiveShadow=!0),!1===this.visible&&(y.visible=!1),y.matrix=this.matrix.toArray(),void 0!==this.geometry&&(void 0===a.geometries[this.geometry.uuid]&&(a.geometries[this.geometry.uuid]=this.geometry.toJSON(a)),y.geometry=this.geometry.uuid),void 0!==this.material&&(void 0===a.materials[this.material.uuid]&&(a.materials[this.material.uuid]=this.material.toJSON(a)),y.material=this.material.uuid),this.children.length>0){y.children=[];for(var A=0;A<this.children.length;A++)y.children.push(this.children[A].toJSON(a).object)}if(d){var M=ee(a.geometries),R=ee(a.materials),N=ee(a.textures),ie=ee(a.images);M.length>0&&(g.geometries=M),R.length>0&&(g.materials=R),N.length>0&&(g.textures=N),ie.length>0&&(g.images=ie)}return g.object=y,g;function ee(fe){var me=[];for(var Le in fe){var ke=fe[Le];delete ke.metadata,me.push(ke)}return me}},clone:function(a){return(new this.constructor).copy(this,a)},copy:function(a,d){if(void 0===d&&(d=!0),this.name=a.name,this.up.copy(a.up),this.position.copy(a.position),this.quaternion.copy(a.quaternion),this.scale.copy(a.scale),this.matrix.copy(a.matrix),this.matrixWorld.copy(a.matrixWorld),this.matrixAutoUpdate=a.matrixAutoUpdate,this.matrixWorldNeedsUpdate=a.matrixWorldNeedsUpdate,this.layers.mask=a.layers.mask,this.visible=a.visible,this.castShadow=a.castShadow,this.receiveShadow=a.receiveShadow,this.frustumCulled=a.frustumCulled,this.renderOrder=a.renderOrder,this.userData=JSON.parse(JSON.stringify(a.userData)),!0===d)for(var g=0;g<a.children.length;g++)this.add(a.children[g].clone());return this}}),Ol.prototype={constructor:Ol,set:function(a,d){return this.start.copy(a),this.end.copy(d),this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.start.copy(a.start),this.end.copy(a.end),this},getCenter:function(a){return(a||new Qt).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(a){return(a||new Qt).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(a,d){var g=d||new Qt;return this.delta(g).multiplyScalar(a).add(this.start)},closestPointToPointParameter:function(){var a=new Qt,d=new Qt;return function(y,A){a.subVectors(y,this.start),d.subVectors(this.end,this.start);var M=d.dot(d),N=d.dot(a)/M;return A&&(N=xs.clamp(N,0,1)),N}}(),closestPointToPoint:function(a,d,g){var y=this.closestPointToPointParameter(a,d),A=g||new Qt;return this.delta(A).multiplyScalar(y).add(this.start)},applyMatrix4:function(a){return this.start.applyMatrix4(a),this.end.applyMatrix4(a),this},equals:function(a){return a.start.equals(this.start)&&a.end.equals(this.end)}},Ca.normal=function(){var a=new Qt;return function(g,y,A,M){var R=M||new Qt;R.subVectors(A,y),a.subVectors(g,y),R.cross(a);var N=R.lengthSq();return N>0?R.multiplyScalar(1/Math.sqrt(N)):R.set(0,0,0)}}(),Ca.barycoordFromPoint=function(){var a=new Qt,d=new Qt,g=new Qt;return function(A,M,R,N,ie){a.subVectors(N,M),d.subVectors(R,M),g.subVectors(A,M);var ee=a.dot(a),fe=a.dot(d),me=a.dot(g),Le=d.dot(d),ke=d.dot(g),Fe=ee*Le-fe*fe,nt=ie||new Qt;if(0===Fe)return nt.set(-2,-1,-1);var tt=1/Fe,Ke=(Le*me-fe*ke)*tt,pt=(ee*ke-fe*me)*tt;return nt.set(1-Ke-pt,pt,Ke)}}(),Ca.containsPoint=function(){var a=new Qt;return function(g,y,A,M){var R=Ca.barycoordFromPoint(g,y,A,M,a);return R.x>=0&&R.y>=0&&R.x+R.y<=1}}(),Ca.prototype={constructor:Ca,set:function(a,d,g){return this.a.copy(a),this.b.copy(d),this.c.copy(g),this},setFromPointsAndIndices:function(a,d,g,y){return this.a.copy(a[d]),this.b.copy(a[g]),this.c.copy(a[y]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.a.copy(a.a),this.b.copy(a.b),this.c.copy(a.c),this},area:function(){var a=new Qt,d=new Qt;return function(){return a.subVectors(this.c,this.b),d.subVectors(this.a,this.b),.5*a.cross(d).length()}}(),midpoint:function(a){return(a||new Qt).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(a){return Ca.normal(this.a,this.b,this.c,a)},plane:function(a){return(a||new dt).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(a,d){return Ca.barycoordFromPoint(a,this.a,this.b,this.c,d)},containsPoint:function(a){return Ca.containsPoint(a,this.a,this.b,this.c)},closestPointToPoint:function(){var a,d,g,y;return function(M,R){void 0===a&&(a=new dt,d=[new Ol,new Ol,new Ol],g=new Qt,y=new Qt);var N=R||new Qt,ie=1/0;if(a.setFromCoplanarPoints(this.a,this.b,this.c),a.projectPoint(M,g),!0===this.containsPoint(g))N.copy(g);else{d[0].set(this.a,this.b),d[1].set(this.b,this.c),d[2].set(this.c,this.a);for(var ee=0;ee<d.length;ee++){d[ee].closestPointToPoint(g,!0,y);var fe=g.distanceToSquared(y);fe<ie&&(ie=fe,N.copy(y))}}return N}}(),equals:function(a){return a.a.equals(this.a)&&a.b.equals(this.b)&&a.c.equals(this.c)}},Oo.prototype={constructor:Oo,clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.a=a.a,this.b=a.b,this.c=a.c,this.normal.copy(a.normal),this.color.copy(a.color),this.materialIndex=a.materialIndex;for(var d=0,g=a.vertexNormals.length;d<g;d++)this.vertexNormals[d]=a.vertexNormals[d].clone();for(d=0,g=a.vertexColors.length;d<g;d++)this.vertexColors[d]=a.vertexColors[d].clone();return this}},(Ba.prototype=Object.create(Ks.prototype)).constructor=Ba,Ba.prototype.isMeshBasicMaterial=!0,Ba.prototype.copy=function(a){return Ks.prototype.copy.call(this,a),this.color.copy(a.color),this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.specularMap=a.specularMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.combine=a.combine,this.reflectivity=a.reflectivity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this},dr.prototype={constructor:dr,isBufferAttribute:!0,set needsUpdate(a){!0===a&&this.version++},setArray:function(a){if(Array.isArray(a))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==a?a.length/this.itemSize:0,this.array=a},setDynamic:function(a){return this.dynamic=a,this},copy:function(a){return this.array=new a.array.constructor(a.array),this.itemSize=a.itemSize,this.count=a.count,this.normalized=a.normalized,this.dynamic=a.dynamic,this},copyAt:function(a,d,g){a*=this.itemSize,g*=d.itemSize;for(var y=0,A=this.itemSize;y<A;y++)this.array[a+y]=d.array[g+y];return this},copyArray:function(a){return this.array.set(a),this},copyColorsArray:function(a){for(var d=this.array,g=0,y=0,A=a.length;y<A;y++){var M=a[y];void 0===M&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",y),M=new Wr),d[g++]=M.r,d[g++]=M.g,d[g++]=M.b}return this},copyIndicesArray:function(a){for(var d=this.array,g=0,y=0,A=a.length;y<A;y++){var M=a[y];d[g++]=M.a,d[g++]=M.b,d[g++]=M.c}return this},copyVector2sArray:function(a){for(var d=this.array,g=0,y=0,A=a.length;y<A;y++){var M=a[y];void 0===M&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",y),M=new Xi),d[g++]=M.x,d[g++]=M.y}return this},copyVector3sArray:function(a){for(var d=this.array,g=0,y=0,A=a.length;y<A;y++){var M=a[y];void 0===M&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",y),M=new Qt),d[g++]=M.x,d[g++]=M.y,d[g++]=M.z}return this},copyVector4sArray:function(a){for(var d=this.array,g=0,y=0,A=a.length;y<A;y++){var M=a[y];void 0===M&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",y),M=new $o),d[g++]=M.x,d[g++]=M.y,d[g++]=M.z,d[g++]=M.w}return this},set:function(a,d){return void 0===d&&(d=0),this.array.set(a,d),this},getX:function(a){return this.array[a*this.itemSize]},setX:function(a,d){return this.array[a*this.itemSize]=d,this},getY:function(a){return this.array[a*this.itemSize+1]},setY:function(a,d){return this.array[a*this.itemSize+1]=d,this},getZ:function(a){return this.array[a*this.itemSize+2]},setZ:function(a,d){return this.array[a*this.itemSize+2]=d,this},getW:function(a){return this.array[a*this.itemSize+3]},setW:function(a,d){return this.array[a*this.itemSize+3]=d,this},setXY:function(a,d,g){return this.array[0+(a*=this.itemSize)]=d,this.array[a+1]=g,this},setXYZ:function(a,d,g,y){return this.array[0+(a*=this.itemSize)]=d,this.array[a+1]=g,this.array[a+2]=y,this},setXYZW:function(a,d,g,y,A){return this.array[0+(a*=this.itemSize)]=d,this.array[a+1]=g,this.array[a+2]=y,this.array[a+3]=A,this},onUpload:function(a){return this.onUploadCallback=a,this},clone:function(){return(new this.constructor).copy(this)}},(kd.prototype=Object.create(dr.prototype)).constructor=kd,(gl.prototype=Object.create(dr.prototype)).constructor=gl,(Fh.prototype=Object.create(dr.prototype)).constructor=Fh,(sp.prototype=Object.create(dr.prototype)).constructor=sp,(Nh.prototype=Object.create(dr.prototype)).constructor=Nh,(_f.prototype=Object.create(dr.prototype)).constructor=_f,(Ou.prototype=Object.create(dr.prototype)).constructor=Ou,(is.prototype=Object.create(dr.prototype)).constructor=is,(Lc.prototype=Object.create(dr.prototype)).constructor=Lc,Object.assign(Ug.prototype,{computeGroups:function(a){for(var d,g=[],y=void 0,A=a.faces,M=0;M<A.length;M++){var R=A[M];R.materialIndex!==y&&(y=R.materialIndex,void 0!==d&&(d.count=3*M-d.start,g.push(d)),d={start:3*M,materialIndex:y})}void 0!==d&&(d.count=3*M-d.start,g.push(d)),this.groups=g},fromGeometry:function(a){var ie,d=a.faces,g=a.vertices,y=a.faceVertexUvs,A=y[0]&&y[0].length>0,M=y[1]&&y[1].length>0,R=a.morphTargets,N=R.length;if(N>0){ie=[];for(var ee=0;ee<N;ee++)ie[ee]=[];this.morphTargets.position=ie}var Le,fe=a.morphNormals,me=fe.length;if(me>0){for(Le=[],ee=0;ee<me;ee++)Le[ee]=[];this.morphTargets.normal=Le}var ke=a.skinIndices,Fe=a.skinWeights,nt=ke.length===g.length,tt=Fe.length===g.length;for(ee=0;ee<d.length;ee++){var Ke=d[ee];this.vertices.push(g[Ke.a],g[Ke.b],g[Ke.c]);var pt=Ke.vertexNormals;if(3===pt.length)this.normals.push(pt[0],pt[1],pt[2]);else{var vt=Ke.normal;this.normals.push(vt,vt,vt)}var cn,qt=Ke.vertexColors;if(3===qt.length)this.colors.push(qt[0],qt[1],qt[2]);else{var Bt=Ke.color;this.colors.push(Bt,Bt,Bt)}!0===A&&(void 0!==(cn=y[0][ee])?this.uvs.push(cn[0],cn[1],cn[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",ee),this.uvs.push(new Xi,new Xi,new Xi))),!0===M&&(void 0!==(cn=y[1][ee])?this.uvs2.push(cn[0],cn[1],cn[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",ee),this.uvs2.push(new Xi,new Xi,new Xi)));for(var sn=0;sn<N;sn++){var en=R[sn].vertices;ie[sn].push(en[Ke.a],en[Ke.b],en[Ke.c])}for(sn=0;sn<me;sn++){var dn=fe[sn].vertexNormals[ee];Le[sn].push(dn.a,dn.b,dn.c)}nt&&this.skinIndices.push(ke[Ke.a],ke[Ke.b],ke[Ke.c]),tt&&this.skinWeights.push(Fe[Ke.a],Fe[Ke.b],Fe[Ke.c])}return this.computeGroups(a),this.verticesNeedUpdate=a.verticesNeedUpdate,this.normalsNeedUpdate=a.normalsNeedUpdate,this.colorsNeedUpdate=a.colorsNeedUpdate,this.uvsNeedUpdate=a.uvsNeedUpdate,this.groupsNeedUpdate=a.groupsNeedUpdate,this}}),Object.assign(Ts.prototype,Y.prototype,{isGeometry:!0,applyMatrix:function(a){for(var d=(new At).getNormalMatrix(a),g=0,y=this.vertices.length;g<y;g++)this.vertices[g].applyMatrix4(a);for(g=0,y=this.faces.length;g<y;g++){var M=this.faces[g];M.normal.applyMatrix3(d).normalize();for(var R=0,N=M.vertexNormals.length;R<N;R++)M.vertexNormals[R].applyMatrix3(d).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var a;return function(g){return void 0===a&&(a=new gs),a.makeRotationX(g),this.applyMatrix(a),this}}(),rotateY:function(){var a;return function(g){return void 0===a&&(a=new gs),a.makeRotationY(g),this.applyMatrix(a),this}}(),rotateZ:function(){var a;return function(g){return void 0===a&&(a=new gs),a.makeRotationZ(g),this.applyMatrix(a),this}}(),translate:function(){var a;return function(g,y,A){return void 0===a&&(a=new gs),a.makeTranslation(g,y,A),this.applyMatrix(a),this}}(),scale:function(){var a;return function(g,y,A){return void 0===a&&(a=new gs),a.makeScale(g,y,A),this.applyMatrix(a),this}}(),lookAt:function(){var a;return function(g){void 0===a&&(a=new br),a.lookAt(g),a.updateMatrix(),this.applyMatrix(a.matrix)}}(),fromBufferGeometry:function(a){var d=this,g=null!==a.index?a.index.array:void 0,y=a.attributes,A=y.position.array,M=void 0!==y.normal?y.normal.array:void 0,R=void 0!==y.color?y.color.array:void 0,N=void 0!==y.uv?y.uv.array:void 0,ie=void 0!==y.uv2?y.uv2.array:void 0;void 0!==ie&&(this.faceVertexUvs[1]=[]);for(var ee=[],fe=[],me=[],Le=0,ke=0;Le<A.length;Le+=3,ke+=2)d.vertices.push(new Qt(A[Le],A[Le+1],A[Le+2])),void 0!==M&&ee.push(new Qt(M[Le],M[Le+1],M[Le+2])),void 0!==R&&d.colors.push(new Wr(R[Le],R[Le+1],R[Le+2])),void 0!==N&&fe.push(new Xi(N[ke],N[ke+1])),void 0!==ie&&me.push(new Xi(ie[ke],ie[ke+1]));function Fe(qt,Bt,cn,sn){var On=new Oo(qt,Bt,cn,void 0!==M?[ee[qt].clone(),ee[Bt].clone(),ee[cn].clone()]:[],void 0!==R?[d.colors[qt].clone(),d.colors[Bt].clone(),d.colors[cn].clone()]:[],sn);d.faces.push(On),void 0!==N&&d.faceVertexUvs[0].push([fe[qt].clone(),fe[Bt].clone(),fe[cn].clone()]),void 0!==ie&&d.faceVertexUvs[1].push([me[qt].clone(),me[Bt].clone(),me[cn].clone()])}if(void 0!==g){var nt=a.groups;if(nt.length>0)for(Le=0;Le<nt.length;Le++)for(var tt=nt[Le],Ke=tt.start,vt=(ke=Ke,Ke+tt.count);ke<vt;ke+=3)Fe(g[ke],g[ke+1],g[ke+2],tt.materialIndex);else for(Le=0;Le<g.length;Le+=3)Fe(g[Le],g[Le+1],g[Le+2])}else for(Le=0;Le<A.length/3;Le+=3)Fe(Le,Le+1,Le+2);return this.computeFaceNormals(),null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone()),null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var a=this.boundingBox.getCenter().negate();return this.translate(a.x,a.y,a.z),a},normalize:function(){this.computeBoundingSphere();var a=this.boundingSphere.center,d=this.boundingSphere.radius,g=0===d?1:1/d,y=new gs;return y.set(g,0,0,-g*a.x,0,g,0,-g*a.y,0,0,g,-g*a.z,0,0,0,1),this.applyMatrix(y),this},computeFaceNormals:function(){for(var a=new Qt,d=new Qt,g=0,y=this.faces.length;g<y;g++){var A=this.faces[g],M=this.vertices[A.a],R=this.vertices[A.b];a.subVectors(this.vertices[A.c],R),d.subVectors(M,R),a.cross(d),a.normalize(),A.normal.copy(a)}},computeVertexNormals:function(a){var d,g,y,A,M,R;for(void 0===a&&(a=!0),R=new Array(this.vertices.length),d=0,g=this.vertices.length;d<g;d++)R[d]=new Qt;if(a){var N,ie,fe=new Qt,me=new Qt;for(y=0,A=this.faces.length;y<A;y++)N=this.vertices[(M=this.faces[y]).a],fe.subVectors(this.vertices[M.c],ie=this.vertices[M.b]),me.subVectors(N,ie),fe.cross(me),R[M.a].add(fe),R[M.b].add(fe),R[M.c].add(fe)}else for(this.computeFaceNormals(),y=0,A=this.faces.length;y<A;y++)R[(M=this.faces[y]).a].add(M.normal),R[M.b].add(M.normal),R[M.c].add(M.normal);for(d=0,g=this.vertices.length;d<g;d++)R[d].normalize();for(y=0,A=this.faces.length;y<A;y++){var Le=(M=this.faces[y]).vertexNormals;3===Le.length?(Le[0].copy(R[M.a]),Le[1].copy(R[M.b]),Le[2].copy(R[M.c])):(Le[0]=R[M.a].clone(),Le[1]=R[M.b].clone(),Le[2]=R[M.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var a,d,g;for(this.computeFaceNormals(),a=0,d=this.faces.length;a<d;a++){var y=(g=this.faces[a]).vertexNormals;3===y.length?(y[0].copy(g.normal),y[1].copy(g.normal),y[2].copy(g.normal)):(y[0]=g.normal.clone(),y[1]=g.normal.clone(),y[2]=g.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var a,d,g,y,A;for(g=0,y=this.faces.length;g<y;g++)for((A=this.faces[g]).__originalFaceNormal?A.__originalFaceNormal.copy(A.normal):A.__originalFaceNormal=A.normal.clone(),A.__originalVertexNormals||(A.__originalVertexNormals=[]),a=0,d=A.vertexNormals.length;a<d;a++)A.__originalVertexNormals[a]?A.__originalVertexNormals[a].copy(A.vertexNormals[a]):A.__originalVertexNormals[a]=A.vertexNormals[a].clone();var M=new Ts;for(M.faces=this.faces,a=0,d=this.morphTargets.length;a<d;a++){if(!this.morphNormals[a]){this.morphNormals[a]={},this.morphNormals[a].faceNormals=[],this.morphNormals[a].vertexNormals=[];var R=this.morphNormals[a].faceNormals,N=this.morphNormals[a].vertexNormals;for(g=0,y=this.faces.length;g<y;g++)ee=new Qt,fe={a:new Qt,b:new Qt,c:new Qt},R.push(ee),N.push(fe)}var ee,fe,ie=this.morphNormals[a];for(M.vertices=this.morphTargets[a].vertices,M.computeFaceNormals(),M.computeVertexNormals(),g=0,y=this.faces.length;g<y;g++)fe=ie.vertexNormals[g],(ee=ie.faceNormals[g]).copy((A=this.faces[g]).normal),fe.a.copy(A.vertexNormals[0]),fe.b.copy(A.vertexNormals[1]),fe.c.copy(A.vertexNormals[2])}for(g=0,y=this.faces.length;g<y;g++)(A=this.faces[g]).normal=A.__originalFaceNormal,A.vertexNormals=A.__originalVertexNormals},computeLineDistances:function(){for(var a=0,d=this.vertices,g=0,y=d.length;g<y;g++)g>0&&(a+=d[g].distanceTo(d[g-1])),this.lineDistances[g]=a},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Es),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new wt),this.boundingSphere.setFromPoints(this.vertices)},merge:function(a,d,g){if(!1!==(a&&a.isGeometry)){var y,A=this.vertices.length,M=this.vertices,R=a.vertices,N=this.faces,ie=a.faces,ee=this.faceVertexUvs[0],fe=a.faceVertexUvs[0],me=this.colors,Le=a.colors;void 0===g&&(g=0),void 0!==d&&(y=(new At).getNormalMatrix(d));for(var ke=0,Fe=R.length;ke<Fe;ke++){var tt=R[ke].clone();void 0!==d&&tt.applyMatrix4(d),M.push(tt)}for(ke=0,Fe=Le.length;ke<Fe;ke++)me.push(Le[ke].clone());for(ke=0,Fe=ie.length;ke<Fe;ke++){var pt,vt,Ke=ie[ke],Bt=Ke.vertexNormals,cn=Ke.vertexColors;(pt=new Oo(Ke.a+A,Ke.b+A,Ke.c+A)).normal.copy(Ke.normal),void 0!==y&&pt.normal.applyMatrix3(y).normalize();for(var sn=0,en=Bt.length;sn<en;sn++)vt=Bt[sn].clone(),void 0!==y&&vt.applyMatrix3(y).normalize(),pt.vertexNormals.push(vt);for(pt.color.copy(Ke.color),sn=0,en=cn.length;sn<en;sn++)pt.vertexColors.push(cn[sn].clone());pt.materialIndex=Ke.materialIndex+g,N.push(pt)}for(ke=0,Fe=fe.length;ke<Fe;ke++){var dn=fe[ke],On=[];if(void 0!==dn){for(sn=0,en=dn.length;sn<en;sn++)On.push(dn[sn].clone());ee.push(On)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",a)},mergeMesh:function(a){!1!==(a&&a.isMesh)?(a.matrixAutoUpdate&&a.updateMatrix(),this.merge(a.geometry,a.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",a)},mergeVertices:function(){var y,A,N,ie,ee,fe,me,Le,a={},d=[],g=[],R=Math.pow(10,4);for(N=0,ie=this.vertices.length;N<ie;N++)y=this.vertices[N],void 0===a[A=Math.round(y.x*R)+"_"+Math.round(y.y*R)+"_"+Math.round(y.z*R)]?(a[A]=N,d.push(this.vertices[N]),g[N]=d.length-1):g[N]=g[a[A]];var ke=[];for(N=0,ie=this.faces.length;N<ie;N++){(ee=this.faces[N]).a=g[ee.a],ee.b=g[ee.b],ee.c=g[ee.c],fe=[ee.a,ee.b,ee.c];for(var nt=0;nt<3;nt++)if(fe[nt]===fe[(nt+1)%3]){ke.push(N);break}}for(N=ke.length-1;N>=0;N--){var tt=ke[N];for(this.faces.splice(tt,1),me=0,Le=this.faceVertexUvs.length;me<Le;me++)this.faceVertexUvs[me].splice(tt,1)}var Ke=this.vertices.length-d.length;return this.vertices=d,Ke},sortFacesByMaterialIndex:function(){for(var a=this.faces,d=a.length,g=0;g<d;g++)a[g]._id=g;a.sort(function y(ee,fe){return ee.materialIndex-fe.materialIndex});var R,N,A=this.faceVertexUvs[0],M=this.faceVertexUvs[1];for(A&&A.length===d&&(R=[]),M&&M.length===d&&(N=[]),g=0;g<d;g++){var ie=a[g]._id;R&&R.push(A[ie]),N&&N.push(M[ie])}R&&(this.faceVertexUvs[0]=R),N&&(this.faceVertexUvs[1]=N)},toJSON:function(){var a={metadata:{version:4.4,type:"Geometry",generator:"Geometry.toJSON"}};if(a.uuid=this.uuid,a.type=this.type,""!==this.name&&(a.name=this.name),void 0!==this.parameters){var d=this.parameters;for(var g in d)void 0!==d[g]&&(a[g]=d[g]);return a}for(var y=[],A=0;A<this.vertices.length;A++){var M=this.vertices[A];y.push(M.x,M.y,M.z)}var R=[],N=[],ie={},ee=[],fe={},me=[],Le={};for(A=0;A<this.faces.length;A++){var ke=this.faces[A],tt=void 0!==this.faceVertexUvs[0][A],Ke=ke.normal.length()>0,pt=ke.vertexNormals.length>0,vt=1!==ke.color.r||1!==ke.color.g||1!==ke.color.b,qt=ke.vertexColors.length>0,Bt=0;if(Bt=dn(Bt,0,0),Bt=dn(Bt,1,!0),Bt=dn(Bt,2,!1),Bt=dn(Bt,3,tt),Bt=dn(Bt,4,Ke),Bt=dn(Bt,5,pt),Bt=dn(Bt,6,vt),Bt=dn(Bt,7,qt),R.push(Bt),R.push(ke.a,ke.b,ke.c),R.push(ke.materialIndex),tt){var cn=this.faceVertexUvs[0][A];R.push(ui(cn[0]),ui(cn[1]),ui(cn[2]))}if(Ke&&R.push(On(ke.normal)),pt){var sn=ke.vertexNormals;R.push(On(sn[0]),On(sn[1]),On(sn[2]))}if(vt&&R.push(Ai(ke.color)),qt){var en=ke.vertexColors;R.push(Ai(en[0]),Ai(en[1]),Ai(en[2]))}}function dn(Wt,$t,Wn){return Wn?Wt|1<<$t:Wt&~(1<<$t)}function On(Wt){var $t=Wt.x.toString()+Wt.y.toString()+Wt.z.toString();return void 0!==ie[$t]||(ie[$t]=N.length/3,N.push(Wt.x,Wt.y,Wt.z)),ie[$t]}function Ai(Wt){var $t=Wt.r.toString()+Wt.g.toString()+Wt.b.toString();return void 0!==fe[$t]||(fe[$t]=ee.length,ee.push(Wt.getHex())),fe[$t]}function ui(Wt){var $t=Wt.x.toString()+Wt.y.toString();return void 0!==Le[$t]||(Le[$t]=me.length/2,me.push(Wt.x,Wt.y)),Le[$t]}return a.data={},a.data.vertices=y,a.data.normals=N,ee.length>0&&(a.data.colors=ee),me.length>0&&(a.data.uvs=[me]),a.data.faces=R,a},clone:function(){return(new Ts).copy(this)},copy:function(a){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]],this.colors=[];for(var d=a.vertices,g=0,y=d.length;g<y;g++)this.vertices.push(d[g].clone());var A=a.colors;for(g=0,y=A.length;g<y;g++)this.colors.push(A[g].clone());var M=a.faces;for(g=0,y=M.length;g<y;g++)this.faces.push(M[g].clone());for(g=0,y=a.faceVertexUvs.length;g<y;g++){var R=a.faceVertexUvs[g];void 0===this.faceVertexUvs[g]&&(this.faceVertexUvs[g]=[]);for(var N=0,ie=R.length;N<ie;N++){for(var ee=R[N],fe=[],me=0,Le=ee.length;me<Le;me++)fe.push(ee[me].clone());this.faceVertexUvs[g].push(fe)}}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Tv=0;function Hg(){return Tv++}function Mr(){Object.defineProperty(this,"id",{value:Hg()}),this.uuid=xs.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}function xa(a,d){br.call(this),this.type="Mesh",this.geometry=void 0!==a?a:new Mr,this.material=void 0!==d?d:new Ba({color:16777215*Math.random()}),this.drawMode=qa,this.updateMorphTargets()}function Fl(a,d,g,y,A,M){Mr.call(this),this.type="BoxBufferGeometry",this.parameters={width:a,height:d,depth:g,widthSegments:y,heightSegments:A,depthSegments:M};var R=this,N=function pt(Bt,cn,sn){var en=0;return en+=(Bt+1)*(cn+1)*2,(en+=(Bt+1)*(sn+1)*2)+(sn+1)*(cn+1)*2}(y=Math.floor(y)||1,A=Math.floor(A)||1,M=Math.floor(M)||1),ie=function vt(Bt,cn,sn){var en=0;return en+=Bt*cn*2,6*((en+=Bt*sn*2)+sn*cn*2)}(y,A,M),ee=new(ie>65535?Uint32Array:Uint16Array)(ie),fe=new Float32Array(3*N),me=new Float32Array(3*N),Le=new Float32Array(2*N),ke=0,Fe=0,nt=0,tt=0,Ke=0;function qt(Bt,cn,sn,en,dn,On,Ai,ui,Wt,$t,Wn){for(var ei=On/Wt,Ii=Ai/$t,_i=On/2,fi=Ai/2,ir=ui/2,zi=Wt+1,Xn=$t+1,Hn=0,f=0,c=new Qt,h=0;h<Xn;h++)for(var m=h*Ii-fi,_=0;_<zi;_++)c[Bt]=(_*ei-_i)*en,c[cn]=m*dn,c[sn]=ir,fe[ke]=c.x,fe[ke+1]=c.y,fe[ke+2]=c.z,c[Bt]=0,c[cn]=0,c[sn]=ui>0?1:-1,me[ke]=c.x,me[ke+1]=c.y,me[ke+2]=c.z,Le[Fe]=_/Wt,Le[Fe+1]=1-h/$t,ke+=3,Fe+=2,Hn+=1;for(h=0;h<$t;h++)for(_=0;_<Wt;_++){var E=tt+_+zi*(h+1),k=tt+(_+1)+zi*(h+1),L=tt+(_+1)+zi*h;ee[nt]=tt+_+zi*h,ee[nt+1]=E,ee[nt+2]=L,ee[nt+3]=E,ee[nt+4]=k,ee[nt+5]=L,nt+=6,f+=6}R.addGroup(Ke,f,Wn),Ke+=f,tt+=Hn}qt("z","y","x",-1,-1,g,d,a,M,A,0),qt("z","y","x",1,-1,g,d,-a,M,A,1),qt("x","z","y",1,1,a,g,d,y,M,2),qt("x","z","y",1,-1,a,g,-d,y,M,3),qt("x","y","z",1,-1,a,d,g,y,A,4),qt("x","y","z",-1,-1,a,d,-g,y,A,5),this.setIndex(new dr(ee,1)),this.addAttribute("position",new dr(fe,3)),this.addAttribute("normal",new dr(me,3)),this.addAttribute("uv",new dr(Le,2))}function oa(a,d,g,y){Mr.call(this),this.type="PlaneBufferGeometry",this.parameters={width:a,height:d,widthSegments:g,heightSegments:y};for(var A=a/2,M=d/2,R=Math.floor(g)||1,N=Math.floor(y)||1,ie=R+1,ee=N+1,fe=a/R,me=d/N,Le=new Float32Array(ie*ee*3),ke=new Float32Array(ie*ee*3),Fe=new Float32Array(ie*ee*2),nt=0,tt=0,Ke=0;Ke<ee;Ke++)for(var pt=Ke*me-M,vt=0;vt<ie;vt++)Le[nt]=vt*fe-A,Le[nt+1]=-pt,ke[nt+2]=1,Fe[tt]=vt/R,Fe[tt+1]=1-Ke/N,nt+=3,tt+=2;nt=0;var Bt=new(Le.length/3>65535?Uint32Array:Uint16Array)(R*N*6);for(Ke=0;Ke<N;Ke++)for(vt=0;vt<R;vt++){var sn=vt+ie*(Ke+1),en=vt+1+ie*(Ke+1),dn=vt+1+ie*Ke;Bt[nt]=vt+ie*Ke,Bt[nt+1]=sn,Bt[nt+2]=dn,Bt[nt+3]=sn,Bt[nt+4]=en,Bt[nt+5]=dn,nt+=6}this.setIndex(new dr(Bt,1)),this.addAttribute("position",new dr(Le,3)),this.addAttribute("normal",new dr(ke,3)),this.addAttribute("uv",new dr(Fe,2))}function za(){br.call(this),this.type="Camera",this.matrixWorldInverse=new gs,this.projectionMatrix=new gs}function wl(a,d,g,y){za.call(this),this.type="PerspectiveCamera",this.fov=void 0!==a?a:50,this.zoom=1,this.near=void 0!==g?g:.1,this.far=void 0!==y?y:2e3,this.focus=10,this.aspect=void 0!==d?d:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Bh(a,d,g,y,A,M){za.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=a,this.right=d,this.top=g,this.bottom=y,this.near=void 0!==A?A:.1,this.far=void 0!==M?M:2e3,this.updateProjectionMatrix()}function uc(a,d,g){var y,M,R;return{setMode:function A(fe){y=fe},setIndex:function N(fe){fe.array instanceof Uint32Array&&d.get("OES_element_index_uint")?(M=a.UNSIGNED_INT,R=4):fe.array instanceof Uint16Array?(M=a.UNSIGNED_SHORT,R=2):(M=a.UNSIGNED_BYTE,R=1)},render:function ie(fe,me){a.drawElements(y,me,M,fe*R),g.calls++,g.vertices+=me,y===a.TRIANGLES&&(g.faces+=me/3)},renderInstances:function ee(fe,me,Le){var ke=d.get("ANGLE_instanced_arrays");null!==ke?(ke.drawElementsInstancedANGLE(y,Le,M,me*R,fe.maxInstancedCount),g.calls++,g.vertices+=Le*fe.maxInstancedCount,y===a.TRIANGLES&&(g.faces+=fe.maxInstancedCount*Le/3)):console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}}}function bf(a,d,g){var y;return{setMode:function A(N){y=N},render:function M(N,ie){a.drawArrays(y,N,ie),g.calls++,g.vertices+=ie,y===a.TRIANGLES&&(g.faces+=ie/3)},renderInstances:function R(N){var ie=d.get("ANGLE_instanced_arrays");if(null!==ie){var ee=N.attributes.position,fe=0;ie.drawArraysInstancedANGLE(y,0,fe=ee.isInterleavedBufferAttribute?ee.data.count:ee.count,N.maxInstancedCount),g.calls++,g.vertices+=fe*N.maxInstancedCount,y===a.TRIANGLES&&(g.faces+=N.maxInstancedCount*fe/3)}else console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}}}function Va(){var a={};return{get:function(d){if(void 0!==a[d.id])return a[d.id];var g;switch(d.type){case"DirectionalLight":g={direction:new Qt,color:new Wr,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Xi};break;case"SpotLight":g={position:new Qt,direction:new Qt,color:new Wr,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Xi};break;case"PointLight":g={position:new Qt,color:new Wr,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Xi};break;case"HemisphereLight":g={direction:new Qt,skyColor:new Wr,groundColor:new Wr};break;case"RectAreaLight":g={color:new Wr,position:new Qt,halfWidth:new Qt,halfHeight:new Qt}}return a[d.id]=g,g}}}function Dv(a,d,g){var y=a.createShader(d);return a.shaderSource(y,g),a.compileShader(y),!1===a.getShaderParameter(y,a.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==a.getShaderInfoLog(y)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",d===a.VERTEX_SHADER?"vertex":"fragment",a.getShaderInfoLog(y),function Mv(a){for(var d=a.split("\n"),g=0;g<d.length;g++)d[g]=g+1+": "+d[g];return d.join("\n")}(g)),y}Object.assign(Mr.prototype,Y.prototype,{isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(a){this.index=a},addAttribute:function(a,d){return!1===(d&&d.isBufferAttribute)&&!1===(d&&d.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(a,new dr(arguments[1],arguments[2]))):"index"===a?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(d)):(this.attributes[a]=d,this)},getAttribute:function(a){return this.attributes[a]},removeAttribute:function(a){return delete this.attributes[a],this},addGroup:function(a,d,g){this.groups.push({start:a,count:d,materialIndex:void 0!==g?g:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(a,d){this.drawRange.start=a,this.drawRange.count=d},applyMatrix:function(a){var d=this.attributes.position;void 0!==d&&(a.applyToVector3Array(d.array),d.needsUpdate=!0);var g=this.attributes.normal;return void 0!==g&&((new At).getNormalMatrix(a).applyToVector3Array(g.array),g.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var a;return function(g){return void 0===a&&(a=new gs),a.makeRotationX(g),this.applyMatrix(a),this}}(),rotateY:function(){var a;return function(g){return void 0===a&&(a=new gs),a.makeRotationY(g),this.applyMatrix(a),this}}(),rotateZ:function(){var a;return function(g){return void 0===a&&(a=new gs),a.makeRotationZ(g),this.applyMatrix(a),this}}(),translate:function(){var a;return function(g,y,A){return void 0===a&&(a=new gs),a.makeTranslation(g,y,A),this.applyMatrix(a),this}}(),scale:function(){var a;return function(g,y,A){return void 0===a&&(a=new gs),a.makeScale(g,y,A),this.applyMatrix(a),this}}(),lookAt:function(){var a;return function(g){void 0===a&&(a=new br),a.lookAt(g),a.updateMatrix(),this.applyMatrix(a.matrix)}}(),center:function(){this.computeBoundingBox();var a=this.boundingBox.getCenter().negate();return this.translate(a.x,a.y,a.z),a},setFromObject:function(a){var d=a.geometry;if(a.isPoints||a.isLine){var g=new is(3*d.vertices.length,3),y=new is(3*d.colors.length,3);if(this.addAttribute("position",g.copyVector3sArray(d.vertices)),this.addAttribute("color",y.copyColorsArray(d.colors)),d.lineDistances&&d.lineDistances.length===d.vertices.length){var A=new is(d.lineDistances.length,1);this.addAttribute("lineDistance",A.copyArray(d.lineDistances))}null!==d.boundingSphere&&(this.boundingSphere=d.boundingSphere.clone()),null!==d.boundingBox&&(this.boundingBox=d.boundingBox.clone())}else a.isMesh&&d&&d.isGeometry&&this.fromGeometry(d);return this},updateFromObject:function(a){var y,d=a.geometry;if(a.isMesh){var g=d.__directGeometry;if(!0===d.elementsNeedUpdate&&(g=void 0,d.elementsNeedUpdate=!1),void 0===g)return this.fromGeometry(d);g.verticesNeedUpdate=d.verticesNeedUpdate,g.normalsNeedUpdate=d.normalsNeedUpdate,g.colorsNeedUpdate=d.colorsNeedUpdate,g.uvsNeedUpdate=d.uvsNeedUpdate,g.groupsNeedUpdate=d.groupsNeedUpdate,d.verticesNeedUpdate=!1,d.normalsNeedUpdate=!1,d.colorsNeedUpdate=!1,d.uvsNeedUpdate=!1,d.groupsNeedUpdate=!1,d=g}return!0===d.verticesNeedUpdate&&(void 0!==(y=this.attributes.position)&&(y.copyVector3sArray(d.vertices),y.needsUpdate=!0),d.verticesNeedUpdate=!1),!0===d.normalsNeedUpdate&&(void 0!==(y=this.attributes.normal)&&(y.copyVector3sArray(d.normals),y.needsUpdate=!0),d.normalsNeedUpdate=!1),!0===d.colorsNeedUpdate&&(void 0!==(y=this.attributes.color)&&(y.copyColorsArray(d.colors),y.needsUpdate=!0),d.colorsNeedUpdate=!1),d.uvsNeedUpdate&&(void 0!==(y=this.attributes.uv)&&(y.copyVector2sArray(d.uvs),y.needsUpdate=!0),d.uvsNeedUpdate=!1),d.lineDistancesNeedUpdate&&(void 0!==(y=this.attributes.lineDistance)&&(y.copyArray(d.lineDistances),y.needsUpdate=!0),d.lineDistancesNeedUpdate=!1),d.groupsNeedUpdate&&(d.computeGroups(a.geometry),this.groups=d.groups,d.groupsNeedUpdate=!1),this},fromGeometry:function(a){return a.__directGeometry=(new Ug).fromGeometry(a),this.fromDirectGeometry(a.__directGeometry)},fromDirectGeometry:function(a){var d=new Float32Array(3*a.vertices.length);if(this.addAttribute("position",new dr(d,3).copyVector3sArray(a.vertices)),a.normals.length>0){var g=new Float32Array(3*a.normals.length);this.addAttribute("normal",new dr(g,3).copyVector3sArray(a.normals))}if(a.colors.length>0){var y=new Float32Array(3*a.colors.length);this.addAttribute("color",new dr(y,3).copyColorsArray(a.colors))}if(a.uvs.length>0){var A=new Float32Array(2*a.uvs.length);this.addAttribute("uv",new dr(A,2).copyVector2sArray(a.uvs))}if(a.uvs2.length>0){var M=new Float32Array(2*a.uvs2.length);this.addAttribute("uv2",new dr(M,2).copyVector2sArray(a.uvs2))}if(a.indices.length>0){var N=new(a.vertices.length>65535?Uint32Array:Uint16Array)(3*a.indices.length);this.setIndex(new dr(N,1).copyIndicesArray(a.indices))}for(var ie in this.groups=a.groups,a.morphTargets){for(var ee=[],fe=a.morphTargets[ie],me=0,Le=fe.length;me<Le;me++){var ke=fe[me],Fe=new is(3*ke.length,3);ee.push(Fe.copyVector3sArray(ke))}this.morphAttributes[ie]=ee}if(a.skinIndices.length>0){var nt=new is(4*a.skinIndices.length,4);this.addAttribute("skinIndex",nt.copyVector4sArray(a.skinIndices))}if(a.skinWeights.length>0){var tt=new is(4*a.skinWeights.length,4);this.addAttribute("skinWeight",tt.copyVector4sArray(a.skinWeights))}return null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone()),null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Es);var a=this.attributes.position;void 0!==a?this.boundingBox.setFromBufferAttribute(a):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var a=new Es,d=new Qt;return function(){null===this.boundingSphere&&(this.boundingSphere=new wt);var y=this.attributes.position;if(y){var A=this.boundingSphere.center;a.setFromBufferAttribute(y),a.getCenter(A);for(var M=0,R=0,N=y.count;R<N;R++)d.x=y.getX(R),d.y=y.getY(R),d.z=y.getZ(R),M=Math.max(M,A.distanceToSquared(d));this.boundingSphere.radius=Math.sqrt(M),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var a=this.index,d=this.attributes,g=this.groups;if(d.position){var y=d.position.array;if(void 0===d.normal)this.addAttribute("normal",new dr(new Float32Array(y.length),3));else for(var A=d.normal.array,M=0,R=A.length;M<R;M++)A[M]=0;var ie,ee,fe,N=d.normal.array,me=new Qt,Le=new Qt,ke=new Qt,Fe=new Qt,nt=new Qt;if(a){var tt=a.array;0===g.length&&this.addGroup(0,tt.length);for(var Ke=0,pt=g.length;Ke<pt;++Ke){var vt=g[Ke],qt=vt.start;for(M=qt,R=qt+vt.count;M<R;M+=3)ee=3*tt[M+1],fe=3*tt[M+2],me.fromArray(y,ie=3*tt[M+0]),Le.fromArray(y,ee),ke.fromArray(y,fe),Fe.subVectors(ke,Le),nt.subVectors(me,Le),Fe.cross(nt),N[ie]+=Fe.x,N[ie+1]+=Fe.y,N[ie+2]+=Fe.z,N[ee]+=Fe.x,N[ee+1]+=Fe.y,N[ee+2]+=Fe.z,N[fe]+=Fe.x,N[fe+1]+=Fe.y,N[fe+2]+=Fe.z}}else for(M=0,R=y.length;M<R;M+=9)me.fromArray(y,M),Le.fromArray(y,M+3),ke.fromArray(y,M+6),Fe.subVectors(ke,Le),nt.subVectors(me,Le),Fe.cross(nt),N[M]=Fe.x,N[M+1]=Fe.y,N[M+2]=Fe.z,N[M+3]=Fe.x,N[M+4]=Fe.y,N[M+5]=Fe.z,N[M+6]=Fe.x,N[M+7]=Fe.y,N[M+8]=Fe.z;this.normalizeNormals(),d.normal.needsUpdate=!0}},merge:function(a,d){if(!1!==(a&&a.isBufferGeometry)){void 0===d&&(d=0);var g=this.attributes;for(var y in g)if(void 0!==a.attributes[y])for(var M=g[y].array,R=a.attributes[y],N=R.array,ee=0,fe=R.itemSize*d;ee<N.length;ee++,fe++)M[fe]=N[ee];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",a)},normalizeNormals:function(){for(var d,g,y,A,a=this.attributes.normal.array,M=0,R=a.length;M<R;M+=3)d=a[M],g=a[M+1],y=a[M+2],A=1/Math.sqrt(d*d+g*g+y*y),a[M]*=A,a[M+1]*=A,a[M+2]*=A},toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var a=new Mr,d=this.index.array,g=this.attributes;for(var y in g){for(var A=g[y],M=A.array,R=A.itemSize,N=new M.constructor(d.length*R),ie=0,ee=0,fe=0,me=d.length;fe<me;fe++){ie=d[fe]*R;for(var Le=0;Le<R;Le++)N[ee++]=M[ie++]}a.addAttribute(y,new dr(N,R))}return a},toJSON:function(){var a={metadata:{version:4.4,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(a.uuid=this.uuid,a.type=this.type,""!==this.name&&(a.name=this.name),void 0!==this.parameters){var d=this.parameters;for(var g in d)void 0!==d[g]&&(a[g]=d[g]);return a}a.data={attributes:{}};var y=this.index;if(null!==y){var A=Array.prototype.slice.call(y.array);a.data.index={type:y.array.constructor.name,array:A}}var M=this.attributes;for(var g in M){var R=M[g];A=Array.prototype.slice.call(R.array),a.data.attributes[g]={itemSize:R.itemSize,type:R.array.constructor.name,array:A,normalized:R.normalized}}var N=this.groups;N.length>0&&(a.data.groups=JSON.parse(JSON.stringify(N)));var ie=this.boundingSphere;return null!==ie&&(a.data.boundingSphere={center:ie.center.toArray(),radius:ie.radius}),a},clone:function(){return(new Mr).copy(this)},copy:function(a){var d=a.index;null!==d&&this.setIndex(d.clone());var g=a.attributes;for(var y in g)this.addAttribute(y,g[y].clone());for(var M=a.groups,R=0,N=M.length;R<N;R++){var ie=M[R];this.addGroup(ie.start,ie.count,ie.materialIndex)}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Mr.MaxIndex=65535,xa.prototype=Object.assign(Object.create(br.prototype),{constructor:xa,isMesh:!0,setDrawMode:function(a){this.drawMode=a},copy:function(a){return br.prototype.copy.call(this,a),this.drawMode=a.drawMode,this},updateMorphTargets:function(){var a=this.geometry.morphTargets;if(void 0!==a&&a.length>0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var d=0,g=a.length;d<g;d++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[a[d].name]=d}},raycast:function(){var a=new gs,d=new sa,g=new wt,y=new Qt,A=new Qt,M=new Qt,R=new Qt,N=new Qt,ie=new Qt,ee=new Xi,fe=new Xi,me=new Xi,Le=new Qt,ke=new Qt,Fe=new Qt;function nt(pt,vt,qt,Bt,cn,sn,en){return Ca.barycoordFromPoint(pt,vt,qt,Bt,Le),cn.multiplyScalar(Le.x),sn.multiplyScalar(Le.y),en.multiplyScalar(Le.z),cn.add(sn).add(en),cn.clone()}function tt(pt,vt,qt,Bt,cn,sn,en){var On=pt.material;if(null===(On.side===U?qt.intersectTriangle(sn,cn,Bt,!0,en):qt.intersectTriangle(Bt,cn,sn,On.side!==ae,en)))return null;Fe.copy(en),Fe.applyMatrix4(pt.matrixWorld);var Ai=vt.ray.origin.distanceTo(Fe);return Ai<vt.near||Ai>vt.far?null:{distance:Ai,point:Fe.clone(),object:pt}}function Ke(pt,vt,qt,Bt,cn,sn,en,dn){y.fromArray(Bt,3*sn),A.fromArray(Bt,3*en),M.fromArray(Bt,3*dn);var On=tt(pt,vt,qt,y,A,M,ke);return On&&(cn&&(ee.fromArray(cn,2*sn),fe.fromArray(cn,2*en),me.fromArray(cn,2*dn),On.uv=nt(ke,y,A,M,ee,fe,me)),On.face=new Oo(sn,en,dn,Ca.normal(y,A,M)),On.faceIndex=sn),On}return function(vt,qt){var en,dn,Bt=this.geometry,cn=this.material,sn=this.matrixWorld;if(void 0!==cn&&(null===Bt.boundingSphere&&Bt.computeBoundingSphere(),g.copy(Bt.boundingSphere),g.applyMatrix4(sn),!1!==vt.ray.intersectsSphere(g)&&(a.getInverse(sn),d.copy(vt.ray).applyMatrix4(a),null===Bt.boundingBox||!1!==d.intersectsBox(Bt.boundingBox))))if(Bt.isBufferGeometry){var On,Wt=Bt.index,$t=Bt.attributes,Wn=$t.position.array;if(void 0!==$t.uv&&(en=$t.uv.array),null!==Wt)for(var ei=Wt.array,Ii=0,_i=ei.length;Ii<_i;Ii+=3)(dn=Ke(this,vt,d,Wn,en,On=ei[Ii],ei[Ii+1],ei[Ii+2]))&&(dn.faceIndex=Math.floor(Ii/3),qt.push(dn));else for(Ii=0,_i=Wn.length;Ii<_i;Ii+=9)(dn=Ke(this,vt,d,Wn,en,On=Ii/3,On+1,On+2))&&(dn.index=On,qt.push(dn))}else if(Bt.isGeometry){var fi,ir,zi,Xn=cn&&cn.isMultiMaterial,Hn=!0===Xn?cn.materials:null,f=Bt.vertices,c=Bt.faces,h=Bt.faceVertexUvs[0];h.length>0&&(en=h);for(var m=0,_=c.length;m<_;m++){var C=c[m],w=!0===Xn?Hn[C.materialIndex]:cn;if(void 0!==w){if(fi=f[C.a],ir=f[C.b],zi=f[C.c],!0===w.morphTargets){var E=Bt.morphTargets,k=this.morphTargetInfluences;y.set(0,0,0),A.set(0,0,0),M.set(0,0,0);for(var L=0,G=E.length;L<G;L++){var K=k[L];if(0!==K){var le=E[L].vertices;y.addScaledVector(R.subVectors(le[C.a],fi),K),A.addScaledVector(N.subVectors(le[C.b],ir),K),M.addScaledVector(ie.subVectors(le[C.c],zi),K)}}y.add(fi),A.add(ir),M.add(zi),fi=y,ir=A,zi=M}if(dn=tt(this,vt,d,fi,ir,zi,ke)){if(en){var he=en[m];ee.copy(he[0]),fe.copy(he[1]),me.copy(he[2]),dn.uv=nt(ke,fi,ir,zi,ee,fe,me)}dn.face=C,dn.faceIndex=m,qt.push(dn)}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),(Fl.prototype=Object.create(Mr.prototype)).constructor=Fl,(oa.prototype=Object.create(Mr.prototype)).constructor=oa,(za.prototype=Object.create(br.prototype)).constructor=za,za.prototype.isCamera=!0,za.prototype.getWorldDirection=function(){var a=new Rl;return function(g){var y=g||new Qt;return this.getWorldQuaternion(a),y.set(0,0,-1).applyQuaternion(a)}}(),za.prototype.lookAt=function(){var a=new gs;return function(g){a.lookAt(this.position,g,this.up),this.quaternion.setFromRotationMatrix(a)}}(),za.prototype.clone=function(){return(new this.constructor).copy(this)},za.prototype.copy=function(a){return br.prototype.copy.call(this,a),this.matrixWorldInverse.copy(a.matrixWorldInverse),this.projectionMatrix.copy(a.projectionMatrix),this},wl.prototype=Object.assign(Object.create(za.prototype),{constructor:wl,isPerspectiveCamera:!0,copy:function(a){return za.prototype.copy.call(this,a),this.fov=a.fov,this.zoom=a.zoom,this.near=a.near,this.far=a.far,this.focus=a.focus,this.aspect=a.aspect,this.view=null===a.view?null:Object.assign({},a.view),this.filmGauge=a.filmGauge,this.filmOffset=a.filmOffset,this},setFocalLength:function(a){var d=.5*this.getFilmHeight()/a;this.fov=2*xs.RAD2DEG*Math.atan(d),this.updateProjectionMatrix()},getFocalLength:function(){var a=Math.tan(.5*xs.DEG2RAD*this.fov);return.5*this.getFilmHeight()/a},getEffectiveFOV:function(){return 2*xs.RAD2DEG*Math.atan(Math.tan(.5*xs.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(a,d,g,y,A,M){this.aspect=a/d,this.view={fullWidth:a,fullHeight:d,offsetX:g,offsetY:y,width:A,height:M},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var a=this.near,d=a*Math.tan(.5*xs.DEG2RAD*this.fov)/this.zoom,g=2*d,y=this.aspect*g,A=-.5*y,M=this.view;if(null!==M){var R=M.fullWidth,N=M.fullHeight;A+=M.offsetX*y/R,d-=M.offsetY*g/N,y*=M.width/R,g*=M.height/N}var ie=this.filmOffset;0!==ie&&(A+=a*ie/this.getFilmWidth()),this.projectionMatrix.makeFrustum(A,A+y,d-g,d,a,this.far)},toJSON:function(a){var d=br.prototype.toJSON.call(this,a);return d.object.fov=this.fov,d.object.zoom=this.zoom,d.object.near=this.near,d.object.far=this.far,d.object.focus=this.focus,d.object.aspect=this.aspect,null!==this.view&&(d.object.view=Object.assign({},this.view)),d.object.filmGauge=this.filmGauge,d.object.filmOffset=this.filmOffset,d}}),Bh.prototype=Object.assign(Object.create(za.prototype),{constructor:Bh,isOrthographicCamera:!0,copy:function(a){return za.prototype.copy.call(this,a),this.left=a.left,this.right=a.right,this.top=a.top,this.bottom=a.bottom,this.near=a.near,this.far=a.far,this.zoom=a.zoom,this.view=null===a.view?null:Object.assign({},a.view),this},setViewOffset:function(a,d,g,y,A,M){this.view={fullWidth:a,fullHeight:d,offsetX:g,offsetY:y,width:A,height:M},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var a=(this.right-this.left)/(2*this.zoom),d=(this.top-this.bottom)/(2*this.zoom),g=(this.right+this.left)/2,y=(this.top+this.bottom)/2,A=g-a,M=g+a,R=y+d,N=y-d;if(null!==this.view){var ie=this.zoom/(this.view.width/this.view.fullWidth),ee=this.zoom/(this.view.height/this.view.fullHeight),fe=(this.right-this.left)/this.view.width,me=(this.top-this.bottom)/this.view.height;M=(A+=fe*(this.view.offsetX/ie))+fe*(this.view.width/ie),N=(R-=me*(this.view.offsetY/ee))-me*(this.view.height/ee)}this.projectionMatrix.makeOrthographic(A,M,R,N,this.near,this.far)},toJSON:function(a){var d=br.prototype.toJSON.call(this,a);return d.object.zoom=this.zoom,d.object.left=this.left,d.object.right=this.right,d.object.top=this.top,d.object.bottom=this.bottom,d.object.near=this.near,d.object.far=this.far,null!==this.view&&(d.object.view=Object.assign({},this.view)),d}});var Gg=0;function Wg(a){switch(a){case ts:return["Linear","( value )"];case Mg:return["sRGB","( value )"];case gi:return["RGBE","( value )"];case Ls:return["RGBM","( value, 7.0 )"];case Ao:return["RGBM","( value, 16.0 )"];case gv:return["RGBD","( value, 256.0 )"];case zp:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+a)}}function Cf(a,d){var g=Wg(d);return"vec4 "+a+"( vec4 value ) { return "+g[0]+"ToLinear"+g[1]+"; }"}function Pm(a,d){var g=Wg(d);return"vec4 "+a+"( vec4 value ) { return LinearTo"+g[0]+g[1]+"; }"}function xf(a,d){var g;switch(d){case vn:g="Linear";break;case ri:g="Reinhard";break;case Fi:g="Uncharted2";break;case Hs:g="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+d)}return"vec3 "+a+"( vec3 color ) { return "+g+"ToneMapping( color ); }"}function wf(a){return""!==a}function Af(a,d){return a.replace(/NUM_DIR_LIGHTS/g,d.numDirLights).replace(/NUM_SPOT_LIGHTS/g,d.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,d.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,d.numPointLights).replace(/NUM_HEMI_LIGHTS/g,d.numHemiLights)}function ml(a){return a.replace(/#include +<([\w\d.]+)>/g,function g(y,A){var M=$s[A];if(void 0===M)throw new Error("Can not resolve #include <"+A+">");return ml(M)})}function qp(a){return a.replace(/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function g(y,A,M,R){for(var N="",ie=parseInt(A);ie<parseInt(M);ie++)N+=R.replace(/\[ i \]/g,"[ "+ie+" ]");return N})}function By(a,d,g,y){var A=a.context,M=g.extensions,R=g.defines,N=g.__webglShader.vertexShader,ie=g.__webglShader.fragmentShader,ee="SHADOWMAP_TYPE_BASIC";y.shadowMapType===oe?ee="SHADOWMAP_TYPE_PCF":y.shadowMapType===se&&(ee="SHADOWMAP_TYPE_PCF_SOFT");var fe="ENVMAP_TYPE_CUBE",me="ENVMAP_MODE_REFLECTION",Le="ENVMAP_BLENDING_MULTIPLY";if(y.envMap){switch(g.envMap.mapping){case Cs:case ua:fe="ENVMAP_TYPE_CUBE";break;case $l:case Hf:fe="ENVMAP_TYPE_CUBE_UV";break;case tr:case el:fe="ENVMAP_TYPE_EQUIREC";break;case jl:fe="ENVMAP_TYPE_SPHERE"}switch(g.envMap.mapping){case ua:case el:me="ENVMAP_MODE_REFRACTION"}switch(g.combine){case Je:Le="ENVMAP_BLENDING_MULTIPLY";break;case Te:Le="ENVMAP_BLENDING_MIX";break;case De:Le="ENVMAP_BLENDING_ADD"}}var Ke,pt,ke=a.gammaFactor>0?a.gammaFactor:1,Fe=function zh(a,d,g){return[(a=a||{}).derivatives||d.envMapCubeUV||d.bumpMap||d.normalMap||d.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(a.fragDepth||d.logarithmicDepthBuffer)&&g.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",a.drawBuffers&&g.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(a.shaderTextureLOD||d.envMap)&&g.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(wf).join("\n")}(M,y,a.extensions),nt=function jg(a){var d=[];for(var g in a){var y=a[g];!1!==y&&d.push("#define "+g+" "+y)}return d.join("\n")}(R),tt=A.createProgram();g.isRawShaderMaterial?(Ke=[nt,"\n"].filter(wf).join("\n"),pt=[Fe,nt,"\n"].filter(wf).join("\n")):(Ke=["precision "+y.precision+" float;","precision "+y.precision+" int;","#define SHADER_NAME "+g.__webglShader.name,nt,y.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+ke,"#define MAX_BONES "+y.maxBones,y.map?"#define USE_MAP":"",y.envMap?"#define USE_ENVMAP":"",y.envMap?"#define "+me:"",y.lightMap?"#define USE_LIGHTMAP":"",y.aoMap?"#define USE_AOMAP":"",y.emissiveMap?"#define USE_EMISSIVEMAP":"",y.bumpMap?"#define USE_BUMPMAP":"",y.normalMap?"#define USE_NORMALMAP":"",y.displacementMap&&y.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",y.specularMap?"#define USE_SPECULARMAP":"",y.roughnessMap?"#define USE_ROUGHNESSMAP":"",y.metalnessMap?"#define USE_METALNESSMAP":"",y.alphaMap?"#define USE_ALPHAMAP":"",y.vertexColors?"#define USE_COLOR":"",y.flatShading?"#define FLAT_SHADED":"",y.skinning?"#define USE_SKINNING":"",y.useVertexTexture?"#define BONE_TEXTURE":"",y.morphTargets?"#define USE_MORPHTARGETS":"",y.morphNormals&&!1===y.flatShading?"#define USE_MORPHNORMALS":"",y.doubleSided?"#define DOUBLE_SIDED":"",y.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+y.numClippingPlanes,y.shadowMapEnabled?"#define USE_SHADOWMAP":"",y.shadowMapEnabled?"#define "+ee:"",y.sizeAttenuation?"#define USE_SIZEATTENUATION":"",y.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",y.logarithmicDepthBuffer&&a.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(wf).join("\n"),pt=[Fe,"precision "+y.precision+" float;","precision "+y.precision+" int;","#define SHADER_NAME "+g.__webglShader.name,nt,y.alphaTest?"#define ALPHATEST "+y.alphaTest:"","#define GAMMA_FACTOR "+ke,y.useFog&&y.fog?"#define USE_FOG":"",y.useFog&&y.fogExp?"#define FOG_EXP2":"",y.map?"#define USE_MAP":"",y.envMap?"#define USE_ENVMAP":"",y.envMap?"#define "+fe:"",y.envMap?"#define "+me:"",y.envMap?"#define "+Le:"",y.lightMap?"#define USE_LIGHTMAP":"",y.aoMap?"#define USE_AOMAP":"",y.emissiveMap?"#define USE_EMISSIVEMAP":"",y.bumpMap?"#define USE_BUMPMAP":"",y.normalMap?"#define USE_NORMALMAP":"",y.specularMap?"#define USE_SPECULARMAP":"",y.roughnessMap?"#define USE_ROUGHNESSMAP":"",y.metalnessMap?"#define USE_METALNESSMAP":"",y.alphaMap?"#define USE_ALPHAMAP":"",y.vertexColors?"#define USE_COLOR":"",y.gradientMap?"#define USE_GRADIENTMAP":"",y.flatShading?"#define FLAT_SHADED":"",y.doubleSided?"#define DOUBLE_SIDED":"",y.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+y.numClippingPlanes,"#define UNION_CLIPPING_PLANES "+(y.numClippingPlanes-y.numClipIntersection),y.shadowMapEnabled?"#define USE_SHADOWMAP":"",y.shadowMapEnabled?"#define "+ee:"",y.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",y.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",y.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",y.logarithmicDepthBuffer&&a.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",y.envMap&&a.extensions.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",y.toneMapping!==Ot?"#define TONE_MAPPING":"",y.toneMapping!==Ot?$s.tonemapping_pars_fragment:"",y.toneMapping!==Ot?xf("toneMapping",y.toneMapping):"",y.outputEncoding||y.mapEncoding||y.envMapEncoding||y.emissiveMapEncoding?$s.encodings_pars_fragment:"",y.mapEncoding?Cf("mapTexelToLinear",y.mapEncoding):"",y.envMapEncoding?Cf("envMapTexelToLinear",y.envMapEncoding):"",y.emissiveMapEncoding?Cf("emissiveMapTexelToLinear",y.emissiveMapEncoding):"",y.outputEncoding?Pm("linearToOutputTexel",y.outputEncoding):"",y.depthPacking?"#define DEPTH_PACKING "+g.depthPacking:"","\n"].filter(wf).join("\n")),N=Af(N=ml(N),y),ie=Af(ie=ml(ie),y),g.isShaderMaterial||(N=qp(N),ie=qp(ie));var qt=pt+ie,Bt=Dv(A,A.VERTEX_SHADER,Ke+N),cn=Dv(A,A.FRAGMENT_SHADER,qt);A.attachShader(tt,Bt),A.attachShader(tt,cn),void 0!==g.index0AttributeName?A.bindAttribLocation(tt,0,g.index0AttributeName):!0===y.morphTargets&&A.bindAttribLocation(tt,0,"position"),A.linkProgram(tt);var ui,Wt,sn=A.getProgramInfoLog(tt),en=A.getShaderInfoLog(Bt),dn=A.getShaderInfoLog(cn),On=!0,Ai=!0;return!1===A.getProgramParameter(tt,A.LINK_STATUS)?(On=!1,console.error("THREE.WebGLProgram: shader error: ",A.getError(),"gl.VALIDATE_STATUS",A.getProgramParameter(tt,A.VALIDATE_STATUS),"gl.getProgramInfoLog",sn,en,dn)):""!==sn?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",sn):(""===en||""===dn)&&(Ai=!1),Ai&&(this.diagnostics={runnable:On,material:g,programLog:sn,vertexShader:{log:en,prefix:Ke},fragmentShader:{log:dn,prefix:pt}}),A.deleteShader(Bt),A.deleteShader(cn),this.getUniforms=function(){return void 0===ui&&(ui=new Ya(A,tt,a)),ui},this.getAttributes=function(){return void 0===Wt&&(Wt=function Od(a,d,g){for(var y={},A=a.getProgramParameter(d,a.ACTIVE_ATTRIBUTES),M=0;M<A;M++){var N=a.getActiveAttrib(d,M).name;y[N]=a.getAttribLocation(d,N)}return y}(A,tt)),Wt},this.destroy=function(){A.deleteProgram(tt),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=Gg++,this.code=d,this.usedTimes=1,this.program=tt,this.vertexShader=Bt,this.fragmentShader=cn,this}function zy(a,d){var g=[],y={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},A=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking"];function R(N,ie){var ee;return N?N.isTexture?ee=N.encoding:N.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),ee=N.texture.encoding):ee=ts,ee===ts&&ie&&(ee=zp),ee}this.getParameters=function(N,ie,ee,fe,me,Le){var ke=y[N.type],Fe=function M(N){if(d.floatVertexTextures&&N&&N.skeleton&&N.skeleton.useVertexTexture)return 1024;var fe=Math.floor((d.maxVertexUniforms-20)/4);return void 0!==N&&N&&N.isSkinnedMesh&&(fe=Math.min(N.skeleton.bones.length,fe))<N.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+N.skeleton.bones.length+", this GPU supports just "+fe+" (try OpenGL instead of ANGLE)"),fe}(Le),nt=a.getPrecision();null!==N.precision&&(nt=d.getMaxPrecision(N.precision))!==N.precision&&console.warn("THREE.WebGLProgram.getParameters:",N.precision,"not supported, using",nt,"instead.");var tt=a.getCurrentRenderTarget();return{shaderID:ke,precision:nt,supportsVertexTextures:d.vertexTextures,outputEncoding:R(tt?tt.texture:null,a.gammaOutput),map:!!N.map,mapEncoding:R(N.map,a.gammaInput),envMap:!!N.envMap,envMapMode:N.envMap&&N.envMap.mapping,envMapEncoding:R(N.envMap,a.gammaInput),envMapCubeUV:!!N.envMap&&(N.envMap.mapping===$l||N.envMap.mapping===Hf),lightMap:!!N.lightMap,aoMap:!!N.aoMap,emissiveMap:!!N.emissiveMap,emissiveMapEncoding:R(N.emissiveMap,a.gammaInput),bumpMap:!!N.bumpMap,normalMap:!!N.normalMap,displacementMap:!!N.displacementMap,roughnessMap:!!N.roughnessMap,metalnessMap:!!N.metalnessMap,specularMap:!!N.specularMap,alphaMap:!!N.alphaMap,gradientMap:!!N.gradientMap,combine:N.combine,vertexColors:N.vertexColors,fog:!!ee,useFog:N.fog,fogExp:ee&&ee.isFogExp2,flatShading:N.shading===xe,sizeAttenuation:N.sizeAttenuation,logarithmicDepthBuffer:d.logarithmicDepthBuffer,skinning:N.skinning,maxBones:Fe,useVertexTexture:d.floatVertexTextures&&Le&&Le.skeleton&&Le.skeleton.useVertexTexture,morphTargets:N.morphTargets,morphNormals:N.morphNormals,maxMorphTargets:a.maxMorphTargets,maxMorphNormals:a.maxMorphNormals,numDirLights:ie.directional.length,numPointLights:ie.point.length,numSpotLights:ie.spot.length,numRectAreaLights:ie.rectArea.length,numHemiLights:ie.hemi.length,numClippingPlanes:fe,numClipIntersection:me,shadowMapEnabled:a.shadowMap.enabled&&Le.receiveShadow&&ie.shadows.length>0,shadowMapType:a.shadowMap.type,toneMapping:a.toneMapping,physicallyCorrectLights:a.physicallyCorrectLights,premultipliedAlpha:N.premultipliedAlpha,alphaTest:N.alphaTest,doubleSided:N.side===ae,flipSided:N.side===U,depthPacking:void 0!==N.depthPacking&&N.depthPacking}},this.getProgramCode=function(N,ie){var ee=[];if(ie.shaderID?ee.push(ie.shaderID):(ee.push(N.fragmentShader),ee.push(N.vertexShader)),void 0!==N.defines)for(var fe in N.defines)ee.push(fe),ee.push(N.defines[fe]);for(var me=0;me<A.length;me++)ee.push(ie[A[me]]);return ee.join()},this.acquireProgram=function(N,ie,ee){for(var fe,me=0,Le=g.length;me<Le;me++){var ke=g[me];if(ke.code===ee){++(fe=ke).usedTimes;break}}return void 0===fe&&(fe=new By(a,ee,N,ie),g.push(fe)),fe},this.releaseProgram=function(N){if(0==--N.usedTimes){var ie=g.indexOf(N);g[ie]=g[g.length-1],g.pop(),N.destroy()}},this.programs=g}function Vh(a,d,g){var y={};function A(ee){var fe=ee.target,me=y[fe.id];null!==me.index&&R(me.index),function N(ee){for(var fe in ee)R(ee[fe])}(me.attributes),fe.removeEventListener("dispose",A),delete y[fe.id];var Le=d.get(fe);Le.wireframe&&R(Le.wireframe),d.delete(fe);var ke=d.get(me);ke.wireframe&&R(ke.wireframe),d.delete(me),g.memory.geometries--}function R(ee){var fe=function M(ee){return ee.isInterleavedBufferAttribute?d.get(ee.data).__webglBuffer:d.get(ee).__webglBuffer}(ee);void 0!==fe&&(a.deleteBuffer(fe),function ie(ee){d.delete(ee.isInterleavedBufferAttribute?ee.data:ee)}(ee))}return{get:function(ee){var me,fe=ee.geometry;return void 0!==y[fe.id]?y[fe.id]:(fe.addEventListener("dispose",A),fe.isBufferGeometry?me=fe:fe.isGeometry&&(void 0===fe._bufferGeometry&&(fe._bufferGeometry=(new Mr).setFromObject(ee)),me=fe._bufferGeometry),y[fe.id]=me,g.memory.geometries++,me)}}}function ah(a,d,g){var y=new Vh(a,d,g);function M(me,Le){var ke=me.isInterleavedBufferAttribute?me.data:me,Fe=d.get(ke);void 0===Fe.__webglBuffer?function R(me,Le,ke){me.__webglBuffer=a.createBuffer(),a.bindBuffer(ke,me.__webglBuffer),a.bufferData(ke,Le.array,Le.dynamic?a.DYNAMIC_DRAW:a.STATIC_DRAW);var nt=a.FLOAT,tt=Le.array;tt instanceof Float32Array?nt=a.FLOAT:tt instanceof Float64Array?console.warn("Unsupported data buffer format: Float64Array"):tt instanceof Uint16Array?nt=a.UNSIGNED_SHORT:tt instanceof Int16Array?nt=a.SHORT:tt instanceof Uint32Array?nt=a.UNSIGNED_INT:tt instanceof Int32Array?nt=a.INT:tt instanceof Int8Array?nt=a.BYTE:tt instanceof Uint8Array&&(nt=a.UNSIGNED_BYTE),me.bytesPerElement=tt.BYTES_PER_ELEMENT,me.type=nt,me.version=Le.version,Le.onUploadCallback()}(Fe,ke,Le):Fe.version!==ke.version&&function N(me,Le,ke){a.bindBuffer(ke,me.__webglBuffer),!1===Le.dynamic?a.bufferData(ke,Le.array,a.STATIC_DRAW):-1===Le.updateRange.count?a.bufferSubData(ke,0,Le.array):0===Le.updateRange.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(a.bufferSubData(ke,Le.updateRange.offset*Le.array.BYTES_PER_ELEMENT,Le.array.subarray(Le.updateRange.offset,Le.updateRange.offset+Le.updateRange.count)),Le.updateRange.count=0),me.version=Le.version}(Fe,ke,Le)}return{getAttributeBuffer:function ie(me){return me.isInterleavedBufferAttribute?d.get(me.data).__webglBuffer:d.get(me).__webglBuffer},getAttributeProperties:function ee(me){return d.get(me.isInterleavedBufferAttribute?me.data:me)},getWireframeAttribute:function fe(me){var Le=d.get(me);if(void 0!==Le.wireframe)return Le.wireframe;var pt,ke=[],Fe=me.index,nt=me.attributes,tt=nt.position;if(null!==Fe)for(var vt=0,qt=(pt=Fe.array).length;vt<qt;vt+=3)ke.push(Bt=pt[vt+0],cn=pt[vt+1],cn,sn=pt[vt+2],sn,Bt);else for(vt=0,qt=(pt=nt.position.array).length/3-1;vt<qt;vt+=3){var Bt,cn,sn;ke.push(Bt=vt+0,cn=vt+1,cn,sn=vt+2,sn,Bt)}var dn=new dr(new(tt.count>65535?Uint32Array:Uint16Array)(ke),1);return M(dn,a.ELEMENT_ARRAY_BUFFER),Le.wireframe=dn,dn},update:function A(me){var Le=y.get(me);me.geometry.isGeometry&&Le.updateFromObject(me);var ke=Le.index,Fe=Le.attributes;for(var nt in null!==ke&&M(ke,a.ELEMENT_ARRAY_BUFFER),Fe)M(Fe[nt],a.ARRAY_BUFFER);var tt=Le.morphAttributes;for(var nt in tt)for(var Ke=tt[nt],pt=0,vt=Ke.length;pt<vt;pt++)M(Ke[pt],a.ARRAY_BUFFER);return Le}}}function Lv(a,d,g,y,A,M,R){var N=R.memory,ie=typeof WebGL2RenderingContext<"u"&&a instanceof WebGL2RenderingContext;function ee(Wt,$t){if(Wt.width>$t||Wt.height>$t){var Wn=$t/Math.max(Wt.width,Wt.height),ei=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return ei.width=Math.floor(Wt.width*Wn),ei.height=Math.floor(Wt.height*Wn),ei.getContext("2d").drawImage(Wt,0,0,Wt.width,Wt.height,0,0,ei.width,ei.height),console.warn("THREE.WebGLRenderer: image is too big ("+Wt.width+"x"+Wt.height+"). Resized to "+ei.width+"x"+ei.height,Wt),ei}return Wt}function fe(Wt){return xs.isPowerOfTwo(Wt.width)&&xs.isPowerOfTwo(Wt.height)}function ke(Wt){return Wt===$a||Wt===Lh||Wt===au?a.NEAREST:a.LINEAR}function Fe(Wt){var $t=Wt.target;$t.removeEventListener("dispose",Fe),function tt(Wt){var $t=y.get(Wt);if(Wt.image&&$t.__image__webglTextureCube)a.deleteTexture($t.__image__webglTextureCube);else{if(void 0===$t.__webglInit)return;a.deleteTexture($t.__webglTexture)}y.delete(Wt)}($t),N.textures--}function nt(Wt){var $t=Wt.target;$t.removeEventListener("dispose",nt),function Ke(Wt){var $t=y.get(Wt),Wn=y.get(Wt.texture);if(Wt){if(void 0!==Wn.__webglTexture&&a.deleteTexture(Wn.__webglTexture),Wt.depthTexture&&Wt.depthTexture.dispose(),Wt.isWebGLRenderTargetCube)for(var ei=0;ei<6;ei++)a.deleteFramebuffer($t.__webglFramebuffer[ei]),$t.__webglDepthbuffer&&a.deleteRenderbuffer($t.__webglDepthbuffer[ei]);else a.deleteFramebuffer($t.__webglFramebuffer),$t.__webglDepthbuffer&&a.deleteRenderbuffer($t.__webglDepthbuffer);y.delete(Wt.texture),y.delete(Wt)}}($t),N.textures--}function pt(Wt,$t){var Wn=y.get(Wt);if(Wt.version>0&&Wn.__version!==Wt.version){var ei=Wt.image;if(void 0===ei)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",Wt);else{if(!1!==ei.complete)return void function cn(Wt,$t,Wn){void 0===Wt.__webglInit&&(Wt.__webglInit=!0,$t.addEventListener("dispose",Fe),Wt.__webglTexture=a.createTexture(),N.textures++),g.activeTexture(a.TEXTURE0+Wn),g.bindTexture(a.TEXTURE_2D,Wt.__webglTexture),a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,$t.flipY),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,$t.premultiplyAlpha),a.pixelStorei(a.UNPACK_ALIGNMENT,$t.unpackAlignment);var ei=ee($t.image,A.maxTextureSize);(function Le(Wt){return Wt.wrapS!==lc||Wt.wrapT!==lc||Wt.minFilter!==$a&&Wt.minFilter!==Ia})($t)&&!1===fe(ei)&&(ei=function me(Wt){if(Wt instanceof HTMLImageElement||Wt instanceof HTMLCanvasElement){var $t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return $t.width=xs.nearestPowerOfTwo(Wt.width),$t.height=xs.nearestPowerOfTwo(Wt.height),$t.getContext("2d").drawImage(Wt,0,0,$t.width,$t.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+Wt.width+"x"+Wt.height+"). Resized to "+$t.width+"x"+$t.height,Wt),$t}return Wt}(ei));var Ii=fe(ei),_i=M($t.format),fi=M($t.type);Bt(a.TEXTURE_2D,$t,Ii);var ir,zi=$t.mipmaps;if($t.isDepthTexture){var Xn=a.DEPTH_COMPONENT;if($t.type===Ph){if(!ie)throw new Error("Float Depth Texture only supported in WebGL2.0");Xn=a.DEPTH_COMPONENT32F}else ie&&(Xn=a.DEPTH_COMPONENT16);$t.format===it&&Xn===a.DEPTH_COMPONENT&&$t.type!==hf&&$t.type!==ff&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),$t.type=hf,fi=M($t.type)),$t.format===Ye&&(Xn=a.DEPTH_STENCIL,$t.type!==pf&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),$t.type=pf,fi=M($t.type))),g.texImage2D(a.TEXTURE_2D,0,Xn,ei.width,ei.height,0,_i,fi,null)}else if($t.isDataTexture)if(zi.length>0&&Ii){for(var Hn=0,f=zi.length;Hn<f;Hn++)g.texImage2D(a.TEXTURE_2D,Hn,_i,(ir=zi[Hn]).width,ir.height,0,_i,fi,ir.data);$t.generateMipmaps=!1}else g.texImage2D(a.TEXTURE_2D,0,_i,ei.width,ei.height,0,_i,fi,ei.data);else if($t.isCompressedTexture)for(Hn=0,f=zi.length;Hn<f;Hn++)ir=zi[Hn],$t.format!==tl&&$t.format!==Ac?g.getCompressedTextureFormats().indexOf(_i)>-1?g.compressedTexImage2D(a.TEXTURE_2D,Hn,_i,ir.width,ir.height,0,ir.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):g.texImage2D(a.TEXTURE_2D,Hn,_i,ir.width,ir.height,0,_i,fi,ir.data);else if(zi.length>0&&Ii){for(Hn=0,f=zi.length;Hn<f;Hn++)g.texImage2D(a.TEXTURE_2D,Hn,_i,_i,fi,ir=zi[Hn]);$t.generateMipmaps=!1}else g.texImage2D(a.TEXTURE_2D,0,_i,_i,fi,ei);$t.generateMipmaps&&Ii&&a.generateMipmap(a.TEXTURE_2D),Wt.__version=$t.version,$t.onUpdate&&$t.onUpdate($t)}(Wn,Wt,$t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",Wt)}}g.activeTexture(a.TEXTURE0+$t),g.bindTexture(a.TEXTURE_2D,Wn.__webglTexture)}function Bt(Wt,$t,Wn){var ei;if(Wn?(a.texParameteri(Wt,a.TEXTURE_WRAP_S,M($t.wrapS)),a.texParameteri(Wt,a.TEXTURE_WRAP_T,M($t.wrapT)),a.texParameteri(Wt,a.TEXTURE_MAG_FILTER,M($t.magFilter)),a.texParameteri(Wt,a.TEXTURE_MIN_FILTER,M($t.minFilter))):(a.texParameteri(Wt,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(Wt,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),($t.wrapS!==lc||$t.wrapT!==lc)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",$t),a.texParameteri(Wt,a.TEXTURE_MAG_FILTER,ke($t.magFilter)),a.texParameteri(Wt,a.TEXTURE_MIN_FILTER,ke($t.minFilter)),$t.minFilter!==$a&&$t.minFilter!==Ia&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",$t)),ei=d.get("EXT_texture_filter_anisotropic")){if($t.type===Ph&&null===d.get("OES_texture_float_linear")||$t.type===wc&&null===d.get("OES_texture_half_float_linear"))return;($t.anisotropy>1||y.get($t).__currentAnisotropy)&&(a.texParameterf(Wt,ei.TEXTURE_MAX_ANISOTROPY_EXT,Math.min($t.anisotropy,A.getMaxAnisotropy())),y.get($t).__currentAnisotropy=$t.anisotropy)}}function sn(Wt,$t,Wn,ei){var Ii=M($t.texture.format),_i=M($t.texture.type);g.texImage2D(ei,0,Ii,$t.width,$t.height,0,Ii,_i,null),a.bindFramebuffer(a.FRAMEBUFFER,Wt),a.framebufferTexture2D(a.FRAMEBUFFER,Wn,ei,y.get($t.texture).__webglTexture,0),a.bindFramebuffer(a.FRAMEBUFFER,null)}function en(Wt,$t){a.bindRenderbuffer(a.RENDERBUFFER,Wt),$t.depthBuffer&&!$t.stencilBuffer?(a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,$t.width,$t.height),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,Wt)):$t.depthBuffer&&$t.stencilBuffer?(a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,$t.width,$t.height),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,Wt)):a.renderbufferStorage(a.RENDERBUFFER,a.RGBA4,$t.width,$t.height),a.bindRenderbuffer(a.RENDERBUFFER,null)}this.setTexture2D=pt,this.setTextureCube=function vt(Wt,$t){var Wn=y.get(Wt);if(6===Wt.image.length)if(Wt.version>0&&Wn.__version!==Wt.version){Wn.__image__webglTextureCube||(Wt.addEventListener("dispose",Fe),Wn.__image__webglTextureCube=a.createTexture(),N.textures++),g.activeTexture(a.TEXTURE0+$t),g.bindTexture(a.TEXTURE_CUBE_MAP,Wn.__image__webglTextureCube),a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,Wt.flipY);for(var ei=Wt&&Wt.isCompressedTexture,Ii=Wt.image[0]&&Wt.image[0].isDataTexture,_i=[],fi=0;fi<6;fi++)_i[fi]=ei||Ii?Ii?Wt.image[fi].image:Wt.image[fi]:ee(Wt.image[fi],A.maxCubemapSize);var zi=fe(_i[0]),Xn=M(Wt.format),Hn=M(Wt.type);for(Bt(a.TEXTURE_CUBE_MAP,Wt,zi),fi=0;fi<6;fi++)if(ei)for(var f,c=_i[fi].mipmaps,h=0,m=c.length;h<m;h++)f=c[h],Wt.format!==tl&&Wt.format!==Ac?g.getCompressedTextureFormats().indexOf(Xn)>-1?g.compressedTexImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+fi,h,Xn,f.width,f.height,0,f.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):g.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+fi,h,Xn,f.width,f.height,0,Xn,Hn,f.data);else Ii?g.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+fi,0,Xn,_i[fi].width,_i[fi].height,0,Xn,Hn,_i[fi].data):g.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+fi,0,Xn,Xn,Hn,_i[fi]);Wt.generateMipmaps&&zi&&a.generateMipmap(a.TEXTURE_CUBE_MAP),Wn.__version=Wt.version,Wt.onUpdate&&Wt.onUpdate(Wt)}else g.activeTexture(a.TEXTURE0+$t),g.bindTexture(a.TEXTURE_CUBE_MAP,Wn.__image__webglTextureCube)},this.setTextureCubeDynamic=function qt(Wt,$t){g.activeTexture(a.TEXTURE0+$t),g.bindTexture(a.TEXTURE_CUBE_MAP,y.get(Wt).__webglTexture)},this.setupRenderTarget=function Ai(Wt){var $t=y.get(Wt),Wn=y.get(Wt.texture);Wt.addEventListener("dispose",nt),Wn.__webglTexture=a.createTexture(),N.textures++;var ei=!0===Wt.isWebGLRenderTargetCube,Ii=fe(Wt);if(ei){$t.__webglFramebuffer=[];for(var _i=0;_i<6;_i++)$t.__webglFramebuffer[_i]=a.createFramebuffer()}else $t.__webglFramebuffer=a.createFramebuffer();if(ei){for(g.bindTexture(a.TEXTURE_CUBE_MAP,Wn.__webglTexture),Bt(a.TEXTURE_CUBE_MAP,Wt.texture,Ii),_i=0;_i<6;_i++)sn($t.__webglFramebuffer[_i],Wt,a.COLOR_ATTACHMENT0,a.TEXTURE_CUBE_MAP_POSITIVE_X+_i);Wt.texture.generateMipmaps&&Ii&&a.generateMipmap(a.TEXTURE_CUBE_MAP),g.bindTexture(a.TEXTURE_CUBE_MAP,null)}else g.bindTexture(a.TEXTURE_2D,Wn.__webglTexture),Bt(a.TEXTURE_2D,Wt.texture,Ii),sn($t.__webglFramebuffer,Wt,a.COLOR_ATTACHMENT0,a.TEXTURE_2D),Wt.texture.generateMipmaps&&Ii&&a.generateMipmap(a.TEXTURE_2D),g.bindTexture(a.TEXTURE_2D,null);Wt.depthBuffer&&function On(Wt){var $t=y.get(Wt),Wn=!0===Wt.isWebGLRenderTargetCube;if(Wt.depthTexture){if(Wn)throw new Error("target.depthTexture not supported in Cube render targets");!function dn(Wt,$t){if($t&&$t.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported!");if(a.bindFramebuffer(a.FRAMEBUFFER,Wt),!$t.depthTexture||!$t.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!y.get($t.depthTexture).__webglTexture||$t.depthTexture.image.width!==$t.width||$t.depthTexture.image.height!==$t.height)&&($t.depthTexture.image.width=$t.width,$t.depthTexture.image.height=$t.height,$t.depthTexture.needsUpdate=!0),pt($t.depthTexture,0);var ei=y.get($t.depthTexture).__webglTexture;if($t.depthTexture.format===it)a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.TEXTURE_2D,ei,0);else{if($t.depthTexture.format!==Ye)throw new Error("Unknown depthTexture format");a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.TEXTURE_2D,ei,0)}}($t.__webglFramebuffer,Wt)}else if(Wn){$t.__webglDepthbuffer=[];for(var ei=0;ei<6;ei++)a.bindFramebuffer(a.FRAMEBUFFER,$t.__webglFramebuffer[ei]),$t.__webglDepthbuffer[ei]=a.createRenderbuffer(),en($t.__webglDepthbuffer[ei],Wt)}else a.bindFramebuffer(a.FRAMEBUFFER,$t.__webglFramebuffer),$t.__webglDepthbuffer=a.createRenderbuffer(),en($t.__webglDepthbuffer,Wt);a.bindFramebuffer(a.FRAMEBUFFER,null)}(Wt)},this.updateRenderTargetMipmap=function ui(Wt){var $t=Wt.texture;if($t.generateMipmaps&&fe(Wt)&&$t.minFilter!==$a&&$t.minFilter!==Ia){var Wn=Wt&&Wt.isWebGLRenderTargetCube?a.TEXTURE_CUBE_MAP:a.TEXTURE_2D,ei=y.get($t).__webglTexture;g.bindTexture(Wn,ei),a.generateMipmap(Wn),g.bindTexture(Wn,null)}}}function H_(){var a={};return{get:function(d){var g=d.uuid,y=a[g];return void 0===y&&(a[g]=y={}),y},delete:function(d){delete a[d.uuid]},clear:function(){a={}}}}function Pv(a,d,g){var R=new function y(){var et=!1,Gt=new $o,Tt=null,mn=new $o;return{setMask:function(Yt){Tt!==Yt&&!et&&(a.colorMask(Yt,Yt,Yt,Yt),Tt=Yt)},setLocked:function(Yt){et=Yt},setClear:function(Yt,ln,Sn,Rn,Jn){!0===Jn&&(Yt*=Rn,ln*=Rn,Sn*=Rn),Gt.set(Yt,ln,Sn,Rn),!1===mn.equals(Gt)&&(a.clearColor(Yt,ln,Sn,Rn),mn.copy(Gt))},reset:function(){et=!1,Tt=null,mn.set(0,0,0,1)}}},N=new function A(){var et=!1,Gt=null,Tt=null,mn=null;return{setTest:function(Yt){Yt?m(a.DEPTH_TEST):_(a.DEPTH_TEST)},setMask:function(Yt){Gt!==Yt&&!et&&(a.depthMask(Yt),Gt=Yt)},setFunc:function(Yt){if(Tt!==Yt){if(Yt)switch(Yt){case be:a.depthFunc(a.NEVER);break;case Dt:a.depthFunc(a.ALWAYS);break;case Rt:a.depthFunc(a.LESS);break;case ci:a.depthFunc(a.LEQUAL);break;case $i:a.depthFunc(a.EQUAL);break;case It:a.depthFunc(a.GEQUAL);break;case Pt:a.depthFunc(a.GREATER);break;case un:a.depthFunc(a.NOTEQUAL);break;default:a.depthFunc(a.LEQUAL)}else a.depthFunc(a.LEQUAL);Tt=Yt}},setLocked:function(Yt){et=Yt},setClear:function(Yt){mn!==Yt&&(a.clearDepth(Yt),mn=Yt)},reset:function(){et=!1,Gt=null,Tt=null,mn=null}}},ie=new function M(){var et=!1,Gt=null,Tt=null,mn=null,Yt=null,ln=null,Sn=null,Rn=null,Jn=null;return{setTest:function(En){En?m(a.STENCIL_TEST):_(a.STENCIL_TEST)},setMask:function(En){Gt!==En&&!et&&(a.stencilMask(En),Gt=En)},setFunc:function(En,Yn,li){(Tt!==En||mn!==Yn||Yt!==li)&&(a.stencilFunc(En,Yn,li),Tt=En,mn=Yn,Yt=li)},setOp:function(En,Yn,li){(ln!==En||Sn!==Yn||Rn!==li)&&(a.stencilOp(En,Yn,li),ln=En,Sn=Yn,Rn=li)},setLocked:function(En){et=En},setClear:function(En){Jn!==En&&(a.clearStencil(En),Jn=En)},reset:function(){et=!1,Gt=null,Tt=null,mn=null,Yt=null,ln=null,Sn=null,Rn=null,Jn=null}}},ee=a.getParameter(a.MAX_VERTEX_ATTRIBS),fe=new Uint8Array(ee),me=new Uint8Array(ee),Le=new Uint8Array(ee),ke={},Fe=null,nt=null,tt=null,Ke=null,pt=null,vt=null,qt=null,Bt=null,cn=!1,sn=null,en=null,dn=null,On=null,Ai=null,ui=null,Wt=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),$t=parseFloat(/^WebGL\ ([0-9])/.exec(a.getParameter(a.VERSION))[1]),Wn=parseFloat($t)>=1,ei=null,Ii={},_i=new $o,fi=new $o;function ir(et,Gt,Tt){var mn=new Uint8Array(4),Yt=a.createTexture();a.bindTexture(et,Yt),a.texParameteri(et,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(et,a.TEXTURE_MAG_FILTER,a.NEAREST);for(var ln=0;ln<Tt;ln++)a.texImage2D(Gt+ln,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,mn);return Yt}var zi={};function m(et){!0!==ke[et]&&(a.enable(et),ke[et]=!0)}function _(et){!1!==ke[et]&&(a.disable(et),ke[et]=!1)}function w(et,Gt,Tt,mn,Yt,ln,Sn,Rn){et!==$?m(a.BLEND):_(a.BLEND),(et!==nt||Rn!==cn)&&(et===ge?Rn?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ONE,a.ONE,a.ONE,a.ONE)):(a.blendEquation(a.FUNC_ADD),a.blendFunc(a.SRC_ALPHA,a.ONE)):et===Ue?Rn?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ZERO,a.ZERO,a.ONE_MINUS_SRC_COLOR,a.ONE_MINUS_SRC_ALPHA)):(a.blendEquation(a.FUNC_ADD),a.blendFunc(a.ZERO,a.ONE_MINUS_SRC_COLOR)):et===Re?Rn?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ZERO,a.SRC_COLOR,a.ZERO,a.SRC_ALPHA)):(a.blendEquation(a.FUNC_ADD),a.blendFunc(a.ZERO,a.SRC_COLOR)):Rn?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ONE,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA)):(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA)),nt=et,cn=Rn),et===rt?(Yt=Yt||Gt,ln=ln||Tt,Sn=Sn||mn,(Gt!==tt||Yt!==vt)&&(a.blendEquationSeparate(g(Gt),g(Yt)),tt=Gt,vt=Yt),(Tt!==Ke||mn!==pt||ln!==qt||Sn!==Bt)&&(a.blendFuncSeparate(g(Tt),g(mn),g(ln),g(Sn)),Ke=Tt,pt=mn,qt=ln,Bt=Sn)):(tt=null,Ke=null,pt=null,vt=null,qt=null,Bt=null)}function G(et){N.setFunc(et)}function Ie(et){sn!==et&&(a.frontFace(et?a.CW:a.CCW),sn=et)}function Ne(et){et!==B?(m(a.CULL_FACE),et!==en&&a.cullFace(et===W?a.BACK:et===P?a.FRONT:a.FRONT_AND_BACK)):_(a.CULL_FACE),en=et}function Lt(et){void 0===et&&(et=a.TEXTURE0+Wt-1),ei!==et&&(a.activeTexture(et),ei=et)}return zi[a.TEXTURE_2D]=ir(a.TEXTURE_2D,a.TEXTURE_2D,1),zi[a.TEXTURE_CUBE_MAP]=ir(a.TEXTURE_CUBE_MAP,a.TEXTURE_CUBE_MAP_POSITIVE_X,6),{buffers:{color:R,depth:N,stencil:ie},init:function Xn(){R.setClear(0,0,0,1),N.setClear(1),ie.setClear(0),m(a.DEPTH_TEST),G(ci),Ie(!1),Ne(W),m(a.CULL_FACE),m(a.BLEND),w(ne)},initAttributes:function Hn(){for(var et=0,Gt=fe.length;et<Gt;et++)fe[et]=0},enableAttribute:function f(et){fe[et]=1,0===me[et]&&(a.enableVertexAttribArray(et),me[et]=1),0!==Le[et]&&(d.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(et,0),Le[et]=0)},enableAttributeAndDivisor:function c(et,Gt,Tt){fe[et]=1,0===me[et]&&(a.enableVertexAttribArray(et),me[et]=1),Le[et]!==Gt&&(Tt.vertexAttribDivisorANGLE(et,Gt),Le[et]=Gt)},disableUnusedAttributes:function h(){for(var et=0,Gt=me.length;et!==Gt;++et)me[et]!==fe[et]&&(a.disableVertexAttribArray(et),me[et]=0)},enable:m,disable:_,getCompressedTextureFormats:function C(){if(null===Fe&&(Fe=[],d.get("WEBGL_compressed_texture_pvrtc")||d.get("WEBGL_compressed_texture_s3tc")||d.get("WEBGL_compressed_texture_etc1")))for(var et=a.getParameter(a.COMPRESSED_TEXTURE_FORMATS),Gt=0;Gt<et.length;Gt++)Fe.push(et[Gt]);return Fe},setBlending:w,setColorWrite:function E(et){R.setMask(et)},setDepthTest:function k(et){N.setTest(et)},setDepthWrite:function L(et){N.setMask(et)},setDepthFunc:G,setStencilTest:function K(et){ie.setTest(et)},setStencilWrite:function le(et){ie.setMask(et)},setStencilFunc:function he(et,Gt,Tt){ie.setFunc(et,Gt,Tt)},setStencilOp:function pe(et,Gt,Tt){ie.setOp(et,Gt,Tt)},setFlipSided:Ie,setCullFace:Ne,setLineWidth:function ze(et){et!==dn&&(Wn&&a.lineWidth(et),dn=et)},setPolygonOffset:function Qe(et,Gt,Tt){et?(m(a.POLYGON_OFFSET_FILL),(On!==Gt||Ai!==Tt)&&(a.polygonOffset(Gt,Tt),On=Gt,Ai=Tt)):_(a.POLYGON_OFFSET_FILL)},getScissorTest:function qe(){return ui},setScissorTest:function ht(et){ui=et,et?m(a.SCISSOR_TEST):_(a.SCISSOR_TEST)},activeTexture:Lt,bindTexture:function kt(et,Gt){null===ei&&Lt();var Tt=Ii[ei];void 0===Tt&&(Ii[ei]=Tt={type:void 0,texture:void 0}),(Tt.type!==et||Tt.texture!==Gt)&&(a.bindTexture(et,Gt||zi[et]),Tt.type=et,Tt.texture=Gt)},compressedTexImage2D:function mt(){try{a.compressedTexImage2D.apply(a,arguments)}catch(et){console.error(et)}},texImage2D:function Ft(){try{a.texImage2D.apply(a,arguments)}catch(et){console.error(et)}},scissor:function Ct(et){!1===_i.equals(et)&&(a.scissor(et.x,et.y,et.z,et.w),_i.copy(et))},viewport:function Ht(et){!1===fi.equals(et)&&(a.viewport(et.x,et.y,et.z,et.w),fi.copy(et))},reset:function Vt(){for(var et=0;et<me.length;et++)1===me[et]&&(a.disableVertexAttribArray(et),me[et]=0);ke={},Fe=null,ei=null,Ii={},nt=null,sn=null,en=null,R.reset(),N.reset(),ie.reset()}}}function db(a,d,g){var y;function M(qt){if("highp"===qt){if(a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.HIGH_FLOAT).precision>0&&a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT).precision>0)return"highp";qt="mediump"}return"mediump"===qt&&a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.MEDIUM_FLOAT).precision>0&&a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var R=void 0!==g.precision?g.precision:"highp",N=M(R);N!==R&&(console.warn("THREE.WebGLRenderer:",R,"not supported, using",N,"instead."),R=N);var ie=!0===g.logarithmicDepthBuffer&&!!d.get("EXT_frag_depth"),ee=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),fe=a.getParameter(a.MAX_VERTEX_TEXTURE_IMAGE_UNITS),me=a.getParameter(a.MAX_TEXTURE_SIZE),Le=a.getParameter(a.MAX_CUBE_MAP_TEXTURE_SIZE),ke=a.getParameter(a.MAX_VERTEX_ATTRIBS),Fe=a.getParameter(a.MAX_VERTEX_UNIFORM_VECTORS),nt=a.getParameter(a.MAX_VARYING_VECTORS),tt=a.getParameter(a.MAX_FRAGMENT_UNIFORM_VECTORS),Ke=fe>0,pt=!!d.get("OES_texture_float");return{getMaxAnisotropy:function A(){if(void 0!==y)return y;var qt=d.get("EXT_texture_filter_anisotropic");return y=null!==qt?a.getParameter(qt.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:M,precision:R,logarithmicDepthBuffer:ie,maxTextures:ee,maxVertexTextures:fe,maxTextureSize:me,maxCubemapSize:Le,maxAttributes:ke,maxVertexUniforms:Fe,maxVaryings:nt,maxFragmentUniforms:tt,vertexTextures:Ke,floatFragmentTextures:pt,floatVertexTextures:Ke&&pt}}function Xp(a){var d={};return{get:function(g){if(void 0!==d[g])return d[g];var y;switch(g){case"WEBGL_depth_texture":y=a.getExtension("WEBGL_depth_texture")||a.getExtension("MOZ_WEBGL_depth_texture")||a.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":y=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":y=a.getExtension("WEBGL_compressed_texture_s3tc")||a.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":y=a.getExtension("WEBGL_compressed_texture_pvrtc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":y=a.getExtension("WEBGL_compressed_texture_etc1");break;default:y=a.getExtension(g)}return null===y&&console.warn("THREE.WebGLRenderer: "+g+" extension not supported."),d[g]=y,y}}}function sl(){var a=this,d=null,g=0,y=!1,A=!1,M=new dt,R=new At,N={value:null,needsUpdate:!1};function ie(){N.value!==d&&(N.value=d,N.needsUpdate=g>0),a.numPlanes=g,a.numIntersection=0}function ee(fe,me,Le,ke){var Fe=null!==fe?fe.length:0,nt=null;if(0!==Fe){if(nt=N.value,!0!==ke||null===nt){var tt=Le+4*Fe,Ke=me.matrixWorldInverse;R.getNormalMatrix(Ke),(null===nt||nt.length<tt)&&(nt=new Float32Array(tt));for(var pt=0,vt=Le;pt!==Fe;++pt,vt+=4)M.copy(fe[pt]).applyMatrix4(Ke,R),M.normal.toArray(nt,vt),nt[vt+3]=M.constant}N.value=nt,N.needsUpdate=!0}return a.numPlanes=Fe,nt}this.uniform=N,this.numPlanes=0,this.numIntersection=0,this.init=function(fe,me,Le){var ke=0!==fe.length||me||0!==g||y;return y=me,d=ee(fe,Le,0),g=fe.length,ke},this.beginShadows=function(){A=!0,ee(null)},this.endShadows=function(){A=!1,ie()},this.setState=function(fe,me,Le,ke,Fe,nt){if(!y||null===fe||0===fe.length||A&&!Le)A?ee(null):ie();else{var tt=A?0:g,Ke=4*tt,pt=Fe.clippingState||null;N.value=pt,pt=ee(fe,ke,Ke,nt);for(var vt=0;vt!==Ke;++vt)pt[vt]=d[vt];Fe.clippingState=pt,this.numIntersection=me?this.numPlanes:0,this.numPlanes+=tt}}}function Uh(a){console.log("THREE.WebGLRenderer",D);var d=void 0!==(a=a||{}).canvas?a.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),g=void 0!==a.context?a.context:null,y=void 0!==a.alpha&&a.alpha,A=void 0===a.depth||a.depth,M=void 0===a.stencil||a.stencil,R=void 0!==a.antialias&&a.antialias,N=void 0===a.premultipliedAlpha||a.premultipliedAlpha,ie=void 0!==a.preserveDrawingBuffer&&a.preserveDrawingBuffer,ee=[],fe=[],me=-1,Le=[],ke=-1,Fe=new Float32Array(8),nt=[],tt=[];this.domElement=d,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=vn,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var E,Ke=this,pt=null,vt=null,qt=null,Bt=-1,cn="",sn=null,en=new $o,dn=null,On=new $o,Ai=0,ui=new Wr(0),Wt=0,$t=d.width,Wn=d.height,ei=1,Ii=new $o(0,0,$t,Wn),_i=!1,fi=new $o(0,0,$t,Wn),ir=new ko,zi=new sl,Xn=!1,Hn=!1,f=new wt,c=new gs,h=new Qt,m=new gs,_=new gs,C={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],shadows:[]},w={calls:0,vertices:0,faces:0,points:0};this.info={render:w,memory:{geometries:0,textures:0},programs:null};try{var k={alpha:y,depth:A,stencil:M,antialias:R,premultipliedAlpha:N,preserveDrawingBuffer:ie};if(null===(E=g||d.getContext("webgl",k)||d.getContext("experimental-webgl",k)))throw null!==d.getContext("webgl")?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context.";void 0===E.getShaderPrecisionFormat&&(E.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}),d.addEventListener("webglcontextlost",Tt,!1)}catch(Ve){console.error("THREE.WebGLRenderer: "+Ve)}var L=new Xp(E);L.get("WEBGL_depth_texture"),L.get("OES_texture_float"),L.get("OES_texture_float_linear"),L.get("OES_texture_half_float"),L.get("OES_texture_half_float_linear"),L.get("OES_standard_derivatives"),L.get("ANGLE_instanced_arrays"),L.get("OES_element_index_uint")&&(Mr.MaxIndex=4294967296);var G=new db(E,L,a),K=new Pv(E,L,Ei),le=new H_,he=new Lv(E,L,K,le,G,Ei,this.info),pe=new ah(E,le,this.info),Ie=new zy(this,G),Ne=new Va;this.info.programs=Ie.programs;var ze=new bf(E,L,w),Qe=new uc(E,L,w),qe=new Bh(-1,1,1,-1,0,1),ht=new wl,Lt=new xa(new oa(2,2),new Ba({depthTest:!1,depthWrite:!1,fog:!1})),kt=Dc.cube,mt=new xa(new Fl(5,5,5),new Qc({uniforms:kt.uniforms,vertexShader:kt.vertexShader,fragmentShader:kt.fragmentShader,side:U,depthTest:!1,depthWrite:!1,fog:!1}));function Ft(){return null===vt?ei:1}function Ct(){K.init(),K.scissor(en.copy(Ii).multiplyScalar(ei)),K.viewport(On.copy(fi).multiplyScalar(ei)),K.buffers.color.setClear(ui.r,ui.g,ui.b,Wt,N)}function Ht(){pt=null,sn=null,cn="",Bt=-1,K.reset()}Ct(),this.context=E,this.capabilities=G,this.extensions=L,this.properties=le,this.state=K;var Vt=new Io(this,C,pe,G);this.shadowMap=Vt;var Ve,et=new U_(this,nt),Gt=new jp(this,tt);function Tt(Ve){Ve.preventDefault(),Ht(),Ct(),le.clear()}function mn(Ve){var ut=Ve.target;ut.removeEventListener("dispose",mn),function Yt(Ve){ln(Ve),le.delete(Ve)}(ut)}function ln(Ve){var ut=le.get(Ve).program;Ve.program=void 0,void 0!==ut&&Ie.releaseProgram(ut)}function Rn(Ve,ut){return Math.abs(ut[0])-Math.abs(Ve[0])}function Jn(Ve,ut){return Ve.object.renderOrder!==ut.object.renderOrder?Ve.object.renderOrder-ut.object.renderOrder:Ve.material.program&&ut.material.program&&Ve.material.program!==ut.material.program?Ve.material.program.id-ut.material.program.id:Ve.material.id!==ut.material.id?Ve.material.id-ut.material.id:Ve.z!==ut.z?Ve.z-ut.z:Ve.id-ut.id}function En(Ve,ut){return Ve.object.renderOrder!==ut.object.renderOrder?Ve.object.renderOrder-ut.object.renderOrder:Ve.z!==ut.z?ut.z-Ve.z:Ve.id-ut.id}function Yn(Ve,ut,an,hn,gn){var Qi,sr;an.transparent?(Qi=Le,sr=++ke):(Qi=fe,sr=++me);var ni=Qi[sr];void 0!==ni?(ni.id=Ve.id,ni.object=Ve,ni.geometry=ut,ni.material=an,ni.z=h.z,ni.group=gn):Qi.push(ni={id:Ve.id,object:Ve,geometry:ut,material:an,z:h.z,group:gn})}function pi(Ve){if(!ir.intersectsSphere(Ve))return!1;var ut=zi.numPlanes;if(0===ut)return!0;var an=Ke.clippingPlanes,hn=Ve.center,gn=-Ve.radius,Qi=0;do{if(an[Qi].distanceToPoint(hn)<gn)return!1}while(++Qi!==ut);return!0}function di(Ve,ut){if(!1!==Ve.visible){if(0!=(Ve.layers.mask&ut.layers.mask))if(Ve.isLight)ee.push(Ve);else if(Ve.isSprite)(!1===Ve.frustumCulled||!0===function bi(Ve){return f.center.set(0,0,0),f.radius=.7071067811865476,f.applyMatrix4(Ve.matrixWorld),pi(f)}(Ve))&&nt.push(Ve);else if(Ve.isLensFlare)tt.push(Ve);else if(Ve.isImmediateRenderObject)!0===Ke.sortObjects&&(h.setFromMatrixPosition(Ve.matrixWorld),h.applyProjection(c)),Yn(Ve,null,Ve.material,0,null);else if((Ve.isMesh||Ve.isLine||Ve.isPoints)&&(Ve.isSkinnedMesh&&Ve.skeleton.update(),!1===Ve.frustumCulled||!0===function li(Ve){var ut=Ve.geometry;return null===ut.boundingSphere&&ut.computeBoundingSphere(),f.copy(ut.boundingSphere).applyMatrix4(Ve.matrixWorld),pi(f)}(Ve))){var hn=Ve.material;if(!0===hn.visible){!0===Ke.sortObjects&&(h.setFromMatrixPosition(Ve.matrixWorld),h.applyProjection(c));var gn=pe.update(Ve);if(hn.isMultiMaterial)for(var Qi=gn.groups,sr=hn.materials,ni=0,Fr=Qi.length;ni<Fr;ni++){var Oi=Qi[ni],Ni=sr[Oi.materialIndex];!0===Ni.visible&&Yn(Ve,gn,Ni,0,Oi)}else Yn(Ve,gn,hn,0,null)}}var Zi=Ve.children;for(ni=0,Fr=Zi.length;ni<Fr;ni++)di(Zi[ni],ut)}}function Mn(Ve,ut,an,hn){for(var gn=0,Qi=Ve.length;gn<Qi;gn++){var sr=Ve[gn],ni=sr.object,Fr=sr.geometry,Oi=void 0===hn?sr.material:hn,Ni=sr.group;if(ni.modelViewMatrix.multiplyMatrices(an.matrixWorldInverse,ni.matrixWorld),ni.normalMatrix.getNormalMatrix(ni.modelViewMatrix),ni.onBeforeRender(Ke,ut,an,Fr,Oi,Ni),ni.isImmediateRenderObject){xi(Oi);var Zi=ji(an,ut.fog,Oi,ni);cn="",ni.render(function(eo){Ke.renderBufferImmediate(eo,Zi,Oi)})}else Ke.renderBufferDirect(an,ut.fog,Fr,Oi,ni,Ni);ni.onAfterRender(Ke,ut,an,Fr,Oi,Ni)}}function xi(Ve){Ve.side===ae?K.disable(E.CULL_FACE):K.enable(E.CULL_FACE),K.setFlipSided(Ve.side===U),!0===Ve.transparent?K.setBlending(Ve.blending,Ve.blendEquation,Ve.blendSrc,Ve.blendDst,Ve.blendEquationAlpha,Ve.blendSrcAlpha,Ve.blendDstAlpha,Ve.premultipliedAlpha):K.setBlending($),K.setDepthFunc(Ve.depthFunc),K.setDepthTest(Ve.depthTest),K.setDepthWrite(Ve.depthWrite),K.setColorWrite(Ve.colorWrite),K.setPolygonOffset(Ve.polygonOffset,Ve.polygonOffsetFactor,Ve.polygonOffsetUnits)}function ji(Ve,ut,an,hn){Ai=0;var gn=le.get(an);Xn&&(Hn||Ve!==sn)&&zi.setState(an.clippingPlanes,an.clipIntersection,an.clipShadows,Ve,gn,Ve===sn&&an.id===Bt),!1===an.needsUpdate&&(void 0===gn.program||an.fog&&gn.fog!==ut||an.lights&&gn.lightsHash!==C.hash||void 0!==gn.numClippingPlanes&&(gn.numClippingPlanes!==zi.numPlanes||gn.numIntersection!==zi.numIntersection))&&(an.needsUpdate=!0),an.needsUpdate&&(function si(Ve,ut,an){var hn=le.get(Ve),gn=Ie.getParameters(Ve,C,ut,zi.numPlanes,zi.numIntersection,an),Qi=Ie.getProgramCode(Ve,gn),sr=hn.program,ni=!0;if(void 0===sr)Ve.addEventListener("dispose",mn);else if(sr.code!==Qi)ln(Ve);else{if(void 0!==gn.shaderID)return;ni=!1}if(ni){if(gn.shaderID){var Fr=Dc[gn.shaderID];hn.__webglShader={name:Ve.type,uniforms:nl.clone(Fr.uniforms),vertexShader:Fr.vertexShader,fragmentShader:Fr.fragmentShader}}else hn.__webglShader={name:Ve.type,uniforms:Ve.uniforms,vertexShader:Ve.vertexShader,fragmentShader:Ve.fragmentShader};Ve.__webglShader=hn.__webglShader,sr=Ie.acquireProgram(Ve,gn,Qi),hn.program=sr,Ve.program=sr}var Oi=sr.getAttributes();if(Ve.morphTargets){Ve.numSupportedMorphTargets=0;for(var Ni=0;Ni<Ke.maxMorphTargets;Ni++)Oi["morphTarget"+Ni]>=0&&Ve.numSupportedMorphTargets++}if(Ve.morphNormals)for(Ve.numSupportedMorphNormals=0,Ni=0;Ni<Ke.maxMorphNormals;Ni++)Oi["morphNormal"+Ni]>=0&&Ve.numSupportedMorphNormals++;var Zi=hn.__webglShader.uniforms;(!Ve.isShaderMaterial&&!Ve.isRawShaderMaterial||!0===Ve.clipping)&&(hn.numClippingPlanes=zi.numPlanes,hn.numIntersection=zi.numIntersection,Zi.clippingPlanes=zi.uniform),hn.fog=ut,hn.lightsHash=C.hash,Ve.lights&&(Zi.ambientLightColor.value=C.ambient,Zi.directionalLights.value=C.directional,Zi.spotLights.value=C.spot,Zi.rectAreaLights.value=C.rectArea,Zi.pointLights.value=C.point,Zi.hemisphereLights.value=C.hemi,Zi.directionalShadowMap.value=C.directionalShadowMap,Zi.directionalShadowMatrix.value=C.directionalShadowMatrix,Zi.spotShadowMap.value=C.spotShadowMap,Zi.spotShadowMatrix.value=C.spotShadowMatrix,Zi.pointShadowMap.value=C.pointShadowMap,Zi.pointShadowMatrix.value=C.pointShadowMatrix);var eo=hn.program.getUniforms(),ao=Ya.seqWithValue(eo.seq,Zi);hn.uniformsList=ao}(an,ut,hn),an.needsUpdate=!1);var sr=!1,ni=!1,Fr=!1,Oi=gn.program,Ni=Oi.getUniforms(),Zi=gn.__webglShader.uniforms;if(Oi.id!==pt&&(E.useProgram(Oi.program),pt=Oi.id,sr=!0,ni=!0,Fr=!0),an.id!==Bt&&(Bt=an.id,ni=!0),sr||Ve!==sn){if(Ni.set(E,Ve,"projectionMatrix"),G.logarithmicDepthBuffer&&Ni.setValue(E,"logDepthBufFC",2/(Math.log(Ve.far+1)/Math.LN2)),Ve!==sn&&(sn=Ve,ni=!0,Fr=!0),an.isShaderMaterial||an.isMeshPhongMaterial||an.isMeshStandardMaterial||an.envMap){var eo=Ni.map.cameraPosition;void 0!==eo&&eo.setValue(E,h.setFromMatrixPosition(Ve.matrixWorld))}(an.isMeshPhongMaterial||an.isMeshLambertMaterial||an.isMeshBasicMaterial||an.isMeshStandardMaterial||an.isShaderMaterial||an.skinning)&&Ni.setValue(E,"viewMatrix",Ve.matrixWorldInverse),Ni.set(E,Ke,"toneMappingExposure"),Ni.set(E,Ke,"toneMappingWhitePoint")}if(an.skinning){Ni.setOptional(E,hn,"bindMatrix"),Ni.setOptional(E,hn,"bindMatrixInverse");var ao=hn.skeleton;ao&&(G.floatVertexTextures&&ao.useVertexTexture?(Ni.set(E,ao,"boneTexture"),Ni.set(E,ao,"boneTextureWidth"),Ni.set(E,ao,"boneTextureHeight")):Ni.setOptional(E,ao,"boneMatrices"))}return ni&&(an.lights&&function Qr(Ve,ut){Ve.ambientLightColor.needsUpdate=ut,Ve.directionalLights.needsUpdate=ut,Ve.pointLights.needsUpdate=ut,Ve.spotLights.needsUpdate=ut,Ve.rectAreaLights.needsUpdate=ut,Ve.hemisphereLights.needsUpdate=ut}(Zi,Fr),ut&&an.fog&&function nr(Ve,ut){Ve.fogColor.value=ut.color,ut.isFog?(Ve.fogNear.value=ut.near,Ve.fogFar.value=ut.far):ut.isFogExp2&&(Ve.fogDensity.value=ut.density)}(Zi,ut),(an.isMeshBasicMaterial||an.isMeshLambertMaterial||an.isMeshPhongMaterial||an.isMeshStandardMaterial||an.isMeshNormalMaterial||an.isMeshDepthMaterial)&&function rr(Ve,ut){var an;if(Ve.opacity.value=ut.opacity,Ve.diffuse.value=ut.color,ut.emissive&&Ve.emissive.value.copy(ut.emissive).multiplyScalar(ut.emissiveIntensity),Ve.map.value=ut.map,Ve.specularMap.value=ut.specularMap,Ve.alphaMap.value=ut.alphaMap,ut.lightMap&&(Ve.lightMap.value=ut.lightMap,Ve.lightMapIntensity.value=ut.lightMapIntensity),ut.aoMap&&(Ve.aoMap.value=ut.aoMap,Ve.aoMapIntensity.value=ut.aoMapIntensity),ut.map?an=ut.map:ut.specularMap?an=ut.specularMap:ut.displacementMap?an=ut.displacementMap:ut.normalMap?an=ut.normalMap:ut.bumpMap?an=ut.bumpMap:ut.roughnessMap?an=ut.roughnessMap:ut.metalnessMap?an=ut.metalnessMap:ut.alphaMap?an=ut.alphaMap:ut.emissiveMap&&(an=ut.emissiveMap),void 0!==an){an.isWebGLRenderTarget&&(an=an.texture);var hn=an.offset,gn=an.repeat;Ve.offsetRepeat.value.set(hn.x,hn.y,gn.x,gn.y)}Ve.envMap.value=ut.envMap,Ve.flipEnvMap.value=ut.envMap&&ut.envMap.isCubeTexture?-1:1,Ve.reflectivity.value=ut.reflectivity,Ve.refractionRatio.value=ut.refractionRatio}(Zi,an),an.isLineBasicMaterial?Br(Zi,an):an.isLineDashedMaterial?(Br(Zi,an),function Kr(Ve,ut){Ve.dashSize.value=ut.dashSize,Ve.totalSize.value=ut.dashSize+ut.gapSize,Ve.scale.value=ut.scale}(Zi,an)):an.isPointsMaterial?function hr(Ve,ut){if(Ve.diffuse.value=ut.color,Ve.opacity.value=ut.opacity,Ve.size.value=ut.size*ei,Ve.scale.value=.5*Wn,Ve.map.value=ut.map,null!==ut.map){var an=ut.map.offset,hn=ut.map.repeat;Ve.offsetRepeat.value.set(an.x,an.y,hn.x,hn.y)}}(Zi,an):an.isMeshLambertMaterial?function jr(Ve,ut){ut.emissiveMap&&(Ve.emissiveMap.value=ut.emissiveMap)}(Zi,an):an.isMeshToonMaterial?function gr(Ve,ut){Mi(Ve,ut),ut.gradientMap&&(Ve.gradientMap.value=ut.gradientMap)}(Zi,an):an.isMeshPhongMaterial?Mi(Zi,an):an.isMeshPhysicalMaterial?function Zr(Ve,ut){Ve.clearCoat.value=ut.clearCoat,Ve.clearCoatRoughness.value=ut.clearCoatRoughness,Cr(Ve,ut)}(Zi,an):an.isMeshStandardMaterial?Cr(Zi,an):an.isMeshDepthMaterial?an.displacementMap&&(Zi.displacementMap.value=an.displacementMap,Zi.displacementScale.value=an.displacementScale,Zi.displacementBias.value=an.displacementBias):an.isMeshNormalMaterial&&function Fs(Ve,ut){ut.bumpMap&&(Ve.bumpMap.value=ut.bumpMap,Ve.bumpScale.value=ut.bumpScale),ut.normalMap&&(Ve.normalMap.value=ut.normalMap,Ve.normalScale.value.copy(ut.normalScale)),ut.displacementMap&&(Ve.displacementMap.value=ut.displacementMap,Ve.displacementScale.value=ut.displacementScale,Ve.displacementBias.value=ut.displacementBias)}(Zi,an),void 0!==Zi.ltcMat&&(Zi.ltcMat.value=THREE.UniformsLib.LTC_MAT_TEXTURE),void 0!==Zi.ltcMag&&(Zi.ltcMag.value=THREE.UniformsLib.LTC_MAG_TEXTURE),Ya.upload(E,gn.uniformsList,Zi,Ke)),Ni.set(E,hn,"modelViewMatrix"),Ni.set(E,hn,"normalMatrix"),Ni.setValue(E,"modelMatrix",hn.matrixWorld),Oi}function Br(Ve,ut){Ve.diffuse.value=ut.color,Ve.opacity.value=ut.opacity}function Mi(Ve,ut){Ve.specular.value=ut.specular,Ve.shininess.value=Math.max(ut.shininess,1e-4),ut.emissiveMap&&(Ve.emissiveMap.value=ut.emissiveMap),ut.bumpMap&&(Ve.bumpMap.value=ut.bumpMap,Ve.bumpScale.value=ut.bumpScale),ut.normalMap&&(Ve.normalMap.value=ut.normalMap,Ve.normalScale.value.copy(ut.normalScale)),ut.displacementMap&&(Ve.displacementMap.value=ut.displacementMap,Ve.displacementScale.value=ut.displacementScale,Ve.displacementBias.value=ut.displacementBias)}function Cr(Ve,ut){Ve.roughness.value=ut.roughness,Ve.metalness.value=ut.metalness,ut.roughnessMap&&(Ve.roughnessMap.value=ut.roughnessMap),ut.metalnessMap&&(Ve.metalnessMap.value=ut.metalnessMap),ut.emissiveMap&&(Ve.emissiveMap.value=ut.emissiveMap),ut.bumpMap&&(Ve.bumpMap.value=ut.bumpMap,Ve.bumpScale.value=ut.bumpScale),ut.normalMap&&(Ve.normalMap.value=ut.normalMap,Ve.normalScale.value.copy(ut.normalScale)),ut.displacementMap&&(Ve.displacementMap.value=ut.displacementMap,Ve.displacementScale.value=ut.displacementScale,Ve.displacementBias.value=ut.displacementBias),ut.envMap&&(Ve.envMapIntensity.value=ut.envMapIntensity)}function Ei(Ve){var ut;if(Ve===td)return E.REPEAT;if(Ve===lc)return E.CLAMP_TO_EDGE;if(Ve===Id)return E.MIRRORED_REPEAT;if(Ve===$a)return E.NEAREST;if(Ve===Lh)return E.NEAREST_MIPMAP_NEAREST;if(Ve===au)return E.NEAREST_MIPMAP_LINEAR;if(Ve===Ia)return E.LINEAR;if(Ve===Sd)return E.LINEAR_MIPMAP_NEAREST;if(Ve===Pu)return E.LINEAR_MIPMAP_LINEAR;if(Ve===df)return E.UNSIGNED_BYTE;if(Ve===Tg)return E.UNSIGNED_SHORT_4_4_4_4;if(Ve===Ed)return E.UNSIGNED_SHORT_5_5_5_1;if(Ve===to)return E.UNSIGNED_SHORT_5_6_5;if(Ve===nh)return E.BYTE;if(Ve===hl)return E.SHORT;if(Ve===hf)return E.UNSIGNED_SHORT;if(Ve===nd)return E.INT;if(Ve===ff)return E.UNSIGNED_INT;if(Ve===Ph)return E.FLOAT;if(Ve===wc&&null!==(ut=L.get("OES_texture_half_float")))return ut.HALF_FLOAT_OES;if(Ve===fl)return E.ALPHA;if(Ve===Ac)return E.RGB;if(Ve===tl)return E.RGBA;if(Ve===Wf)return E.LUMINANCE;if(Ve===ih)return E.LUMINANCE_ALPHA;if(Ve===it)return E.DEPTH_COMPONENT;if(Ve===Ye)return E.DEPTH_STENCIL;if(Ve===at)return E.FUNC_ADD;if(Ve===xt)return E.FUNC_SUBTRACT;if(Ve===He)return E.FUNC_REVERSE_SUBTRACT;if(Ve===bt)return E.ZERO;if(Ve===kn)return E.ONE;if(Ve===Ut)return E.SRC_COLOR;if(Ve===Dn)return E.ONE_MINUS_SRC_COLOR;if(Ve===Jt)return E.SRC_ALPHA;if(Ve===nn)return E.ONE_MINUS_SRC_ALPHA;if(Ve===Ln)return E.DST_ALPHA;if(Ve===xn)return E.ONE_MINUS_DST_ALPHA;if(Ve===Cn)return E.DST_COLOR;if(Ve===yn)return E.ONE_MINUS_DST_COLOR;if(Ve===je)return E.SRC_ALPHA_SATURATE;if((Ve===de||Ve===Se||Ve===$e||Ve===_t)&&null!==(ut=L.get("WEBGL_compressed_texture_s3tc"))){if(Ve===de)return ut.COMPRESSED_RGB_S3TC_DXT1_EXT;if(Ve===Se)return ut.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(Ve===$e)return ut.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(Ve===_t)return ut.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((Ve===zt||Ve===In||Ve===yi||Ve===ti)&&null!==(ut=L.get("WEBGL_compressed_texture_pvrtc"))){if(Ve===zt)return ut.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(Ve===In)return ut.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(Ve===yi)return ut.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(Ve===ti)return ut.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(Ve===hi&&null!==(ut=L.get("WEBGL_compressed_texture_etc1")))return ut.COMPRESSED_RGB_ETC1_WEBGL;if((Ve===ft||Ve===gt)&&null!==(ut=L.get("EXT_blend_minmax"))){if(Ve===ft)return ut.MIN_EXT;if(Ve===gt)return ut.MAX_EXT}return Ve===pf&&null!==(ut=L.get("WEBGL_depth_texture"))?ut.UNSIGNED_INT_24_8_WEBGL:0}this.getContext=function(){return E},this.getContextAttributes=function(){return E.getContextAttributes()},this.forceContextLoss=function(){L.get("WEBGL_lose_context").loseContext()},this.getMaxAnisotropy=function(){return G.getMaxAnisotropy()},this.getPrecision=function(){return G.precision},this.getPixelRatio=function(){return ei},this.setPixelRatio=function(Ve){void 0!==Ve&&(ei=Ve,this.setSize(fi.z,fi.w,!1))},this.getSize=function(){return{width:$t,height:Wn}},this.setSize=function(Ve,ut,an){$t=Ve,Wn=ut,d.width=Ve*ei,d.height=ut*ei,!1!==an&&(d.style.width=Ve+"px",d.style.height=ut+"px"),this.setViewport(0,0,Ve,ut)},this.setViewport=function(Ve,ut,an,hn){K.viewport(fi.set(Ve,ut,an,hn))},this.setScissor=function(Ve,ut,an,hn){K.scissor(Ii.set(Ve,ut,an,hn))},this.setScissorTest=function(Ve){K.setScissorTest(_i=Ve)},this.getClearColor=function(){return ui},this.setClearColor=function(Ve,ut){ui.set(Ve),K.buffers.color.setClear(ui.r,ui.g,ui.b,Wt=void 0!==ut?ut:1,N)},this.getClearAlpha=function(){return Wt},this.setClearAlpha=function(Ve){K.buffers.color.setClear(ui.r,ui.g,ui.b,Wt=Ve,N)},this.clear=function(Ve,ut,an){var hn=0;(void 0===Ve||Ve)&&(hn|=E.COLOR_BUFFER_BIT),(void 0===ut||ut)&&(hn|=E.DEPTH_BUFFER_BIT),(void 0===an||an)&&(hn|=E.STENCIL_BUFFER_BIT),E.clear(hn)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(Ve,ut,an,hn){this.setRenderTarget(Ve),this.clear(ut,an,hn)},this.resetGLState=Ht,this.dispose=function(){Le=[],ke=-1,fe=[],me=-1,d.removeEventListener("webglcontextlost",Tt,!1)},this.renderBufferImmediate=function(Ve,ut,an){K.initAttributes();var hn=le.get(Ve);Ve.hasPositions&&!hn.position&&(hn.position=E.createBuffer()),Ve.hasNormals&&!hn.normal&&(hn.normal=E.createBuffer()),Ve.hasUvs&&!hn.uv&&(hn.uv=E.createBuffer()),Ve.hasColors&&!hn.color&&(hn.color=E.createBuffer());var gn=ut.getAttributes();if(Ve.hasPositions&&(E.bindBuffer(E.ARRAY_BUFFER,hn.position),E.bufferData(E.ARRAY_BUFFER,Ve.positionArray,E.DYNAMIC_DRAW),K.enableAttribute(gn.position),E.vertexAttribPointer(gn.position,3,E.FLOAT,!1,0,0)),Ve.hasNormals){if(E.bindBuffer(E.ARRAY_BUFFER,hn.normal),!an.isMeshPhongMaterial&&!an.isMeshStandardMaterial&&!an.isMeshNormalMaterial&&an.shading===xe)for(var Qi=0,sr=3*Ve.count;Qi<sr;Qi+=9){var ni=Ve.normalArray,Fr=(ni[Qi+0]+ni[Qi+3]+ni[Qi+6])/3,Oi=(ni[Qi+1]+ni[Qi+4]+ni[Qi+7])/3,Ni=(ni[Qi+2]+ni[Qi+5]+ni[Qi+8])/3;ni[Qi+0]=Fr,ni[Qi+1]=Oi,ni[Qi+2]=Ni,ni[Qi+3]=Fr,ni[Qi+4]=Oi,ni[Qi+5]=Ni,ni[Qi+6]=Fr,ni[Qi+7]=Oi,ni[Qi+8]=Ni}E.bufferData(E.ARRAY_BUFFER,Ve.normalArray,E.DYNAMIC_DRAW),K.enableAttribute(gn.normal),E.vertexAttribPointer(gn.normal,3,E.FLOAT,!1,0,0)}Ve.hasUvs&&an.map&&(E.bindBuffer(E.ARRAY_BUFFER,hn.uv),E.bufferData(E.ARRAY_BUFFER,Ve.uvArray,E.DYNAMIC_DRAW),K.enableAttribute(gn.uv),E.vertexAttribPointer(gn.uv,2,E.FLOAT,!1,0,0)),Ve.hasColors&&an.vertexColors!==re&&(E.bindBuffer(E.ARRAY_BUFFER,hn.color),E.bufferData(E.ARRAY_BUFFER,Ve.colorArray,E.DYNAMIC_DRAW),K.enableAttribute(gn.color),E.vertexAttribPointer(gn.color,3,E.FLOAT,!1,0,0)),K.disableUnusedAttributes(),E.drawArrays(E.TRIANGLES,0,Ve.count),Ve.count=0},this.renderBufferDirect=function(Ve,ut,an,hn,gn,Qi){xi(hn);var sr=ji(Ve,ut,hn,gn),ni=!1,Fr=an.id+"_"+sr.id+"_"+hn.wireframe;Fr!==cn&&(cn=Fr,ni=!0);var Oi=gn.morphTargetInfluences;if(void 0!==Oi){for(var Ni=[],Zi=0,eo=Oi.length;Zi<eo;Zi++)Ni.push([ao=Oi[Zi],Zi]);Ni.sort(Rn),Ni.length>8&&(Ni.length=8);var Fa=an.morphAttributes;for(Zi=0,eo=Ni.length;Zi<eo;Zi++){var ao;if(Fe[Zi]=(ao=Ni[Zi])[0],0!==ao[0]){var Eo=ao[1];!0===hn.morphTargets&&Fa.position&&an.addAttribute("morphTarget"+Zi,Fa.position[Eo]),!0===hn.morphNormals&&Fa.normal&&an.addAttribute("morphNormal"+Zi,Fa.normal[Eo])}else!0===hn.morphTargets&&an.removeAttribute("morphTarget"+Zi),!0===hn.morphNormals&&an.removeAttribute("morphNormal"+Zi)}Zi=Ni.length;for(var Ho=Fe.length;Zi<Ho;Zi++)Fe[Zi]=0;sr.getUniforms().setValue(E,"morphTargetInfluences",Fe),ni=!0}Eo=an.index;var Ha,Yo=an.attributes.position,Sr=1;!0===hn.wireframe&&(Eo=pe.getWireframeAttribute(an),Sr=2),null!==Eo?(Ha=Qe).setIndex(Eo):Ha=ze,ni&&(function Sn(Ve,ut,an,hn){var gn;if(an&&an.isInstancedBufferGeometry&&null===(gn=L.get("ANGLE_instanced_arrays")))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{void 0===hn&&(hn=0),K.initAttributes();var Qi=an.attributes,sr=ut.getAttributes(),ni=Ve.defaultAttributeValues;for(var Fr in sr){var Oi=sr[Fr];if(Oi>=0){var Ni=Qi[Fr];if(void 0!==Ni){var Zi=Ni.normalized,eo=Ni.itemSize,ao=pe.getAttributeProperties(Ni),Fa=ao.__webglBuffer,Ho=ao.type,Eo=ao.bytesPerElement;if(Ni.isInterleavedBufferAttribute){var Yo=Ni.data,Sr=Yo.stride,Ha=Ni.offset;Yo&&Yo.isInstancedInterleavedBuffer?(K.enableAttributeAndDivisor(Oi,Yo.meshPerAttribute,gn),void 0===an.maxInstancedCount&&(an.maxInstancedCount=Yo.meshPerAttribute*Yo.count)):K.enableAttribute(Oi),E.bindBuffer(E.ARRAY_BUFFER,Fa),E.vertexAttribPointer(Oi,eo,Ho,Zi,Sr*Eo,(hn*Sr+Ha)*Eo)}else Ni.isInstancedBufferAttribute?(K.enableAttributeAndDivisor(Oi,Ni.meshPerAttribute,gn),void 0===an.maxInstancedCount&&(an.maxInstancedCount=Ni.meshPerAttribute*Ni.count)):K.enableAttribute(Oi),E.bindBuffer(E.ARRAY_BUFFER,Fa),E.vertexAttribPointer(Oi,eo,Ho,Zi,0,hn*eo*Eo)}else if(void 0!==ni){var Ul=ni[Fr];if(void 0!==Ul)switch(Ul.length){case 2:E.vertexAttrib2fv(Oi,Ul);break;case 3:E.vertexAttrib3fv(Oi,Ul);break;case 4:E.vertexAttrib4fv(Oi,Ul);break;default:E.vertexAttrib1fv(Oi,Ul)}}}}K.disableUnusedAttributes()}}(hn,sr,an),null!==Eo&&E.bindBuffer(E.ELEMENT_ARRAY_BUFFER,pe.getAttributeBuffer(Eo)));var Ul=0;null!==Eo?Ul=Eo.count:void 0!==Yo&&(Ul=Yo.count);var Hl=an.drawRange.start*Sr,Nc=an.drawRange.count*Sr,_p=null!==Qi?Qi.start*Sr:0,Of=null!==Qi?Qi.count*Sr:1/0,Bc=Math.max(Hl,_p),nc=Math.min(Ul,Hl+Nc,_p+Of)-1,zc=Math.max(0,nc-Bc+1);if(0!==zc){if(gn.isMesh)if(!0===hn.wireframe)K.setLineWidth(hn.wireframeLinewidth*Ft()),Ha.setMode(E.LINES);else switch(gn.drawMode){case qa:Ha.setMode(E.TRIANGLES);break;case Ru:Ha.setMode(E.TRIANGLE_STRIP);break;case ds:Ha.setMode(E.TRIANGLE_FAN)}else if(gn.isLine){var bp=hn.linewidth;void 0===bp&&(bp=1),K.setLineWidth(bp*Ft()),Ha.setMode(gn.isLineSegments?E.LINES:E.LINE_STRIP)}else gn.isPoints&&Ha.setMode(E.POINTS);an&&an.isInstancedBufferGeometry?an.maxInstancedCount>0&&Ha.renderInstances(an,Bc,zc):Ha.render(Bc,zc)}},this.render=function(Ve,ut,an,hn){if(void 0===ut||!0===ut.isCamera){cn="",Bt=-1,sn=null,!0===Ve.autoUpdate&&Ve.updateMatrixWorld(),null===ut.parent&&ut.updateMatrixWorld(),ut.matrixWorldInverse.getInverse(ut.matrixWorld),c.multiplyMatrices(ut.projectionMatrix,ut.matrixWorldInverse),ir.setFromMatrix(c),ee.length=0,me=-1,ke=-1,nt.length=0,tt.length=0,Xn=zi.init(this.clippingPlanes,Hn=this.localClippingEnabled,ut),di(Ve,ut),fe.length=me+1,Le.length=ke+1,!0===Ke.sortObjects&&(fe.sort(Jn),Le.sort(En)),Xn&&zi.beginShadows(),function Ui(Ve){for(var ut=0,an=0,hn=Ve.length;an<hn;an++){var gn=Ve[an];gn.castShadow&&(C.shadows[ut++]=gn)}C.shadows.length=ut}(ee),Vt.render(Ve,ut),function St(Ve,ut){var an,hn,gn,Fr,Oi,Ni,Zi,Qi=0,sr=0,ni=0,eo=ut.matrixWorldInverse,ao=0,Fa=0,Ho=0,Eo=0,Yo=0;for(an=0,hn=Ve.length;an<hn;an++)if(Fr=(gn=Ve[an]).color,Oi=gn.intensity,Ni=gn.distance,Zi=gn.shadow&&gn.shadow.map?gn.shadow.map.texture:null,gn.isAmbientLight)Qi+=Fr.r*Oi,sr+=Fr.g*Oi,ni+=Fr.b*Oi;else if(gn.isDirectionalLight)(Sr=Ne.get(gn)).color.copy(gn.color).multiplyScalar(gn.intensity),Sr.direction.setFromMatrixPosition(gn.matrixWorld),h.setFromMatrixPosition(gn.target.matrixWorld),Sr.direction.sub(h),Sr.direction.transformDirection(eo),Sr.shadow=gn.castShadow,gn.castShadow&&(Sr.shadowBias=gn.shadow.bias,Sr.shadowRadius=gn.shadow.radius,Sr.shadowMapSize=gn.shadow.mapSize),C.directionalShadowMap[ao]=Zi,C.directionalShadowMatrix[ao]=gn.shadow.matrix,C.directional[ao++]=Sr;else if(gn.isSpotLight)(Sr=Ne.get(gn)).position.setFromMatrixPosition(gn.matrixWorld),Sr.position.applyMatrix4(eo),Sr.color.copy(Fr).multiplyScalar(Oi),Sr.distance=Ni,Sr.direction.setFromMatrixPosition(gn.matrixWorld),h.setFromMatrixPosition(gn.target.matrixWorld),Sr.direction.sub(h),Sr.direction.transformDirection(eo),Sr.coneCos=Math.cos(gn.angle),Sr.penumbraCos=Math.cos(gn.angle*(1-gn.penumbra)),Sr.decay=0===gn.distance?0:gn.decay,Sr.shadow=gn.castShadow,gn.castShadow&&(Sr.shadowBias=gn.shadow.bias,Sr.shadowRadius=gn.shadow.radius,Sr.shadowMapSize=gn.shadow.mapSize),C.spotShadowMap[Ho]=Zi,C.spotShadowMatrix[Ho]=gn.shadow.matrix,C.spot[Ho++]=Sr;else if(gn.isRectAreaLight)(Sr=Ne.get(gn)).color.copy(Fr).multiplyScalar(Oi/(gn.width*gn.height)),Sr.position.setFromMatrixPosition(gn.matrixWorld),Sr.position.applyMatrix4(eo),_.identity(),m.copy(gn.matrixWorld),m.premultiply(eo),_.extractRotation(m),Sr.halfWidth.set(.5*gn.width,0,0),Sr.halfHeight.set(0,.5*gn.height,0),Sr.halfWidth.applyMatrix4(_),Sr.halfHeight.applyMatrix4(_),C.rectArea[Eo++]=Sr;else if(gn.isPointLight)(Sr=Ne.get(gn)).position.setFromMatrixPosition(gn.matrixWorld),Sr.position.applyMatrix4(eo),Sr.color.copy(gn.color).multiplyScalar(gn.intensity),Sr.distance=gn.distance,Sr.decay=0===gn.distance?0:gn.decay,Sr.shadow=gn.castShadow,gn.castShadow&&(Sr.shadowBias=gn.shadow.bias,Sr.shadowRadius=gn.shadow.radius,Sr.shadowMapSize=gn.shadow.mapSize),C.pointShadowMap[Fa]=Zi,void 0===C.pointShadowMatrix[Fa]&&(C.pointShadowMatrix[Fa]=new gs),h.setFromMatrixPosition(gn.matrixWorld).negate(),C.pointShadowMatrix[Fa].identity().setPosition(h),C.point[Fa++]=Sr;else if(gn.isHemisphereLight){var Sr;(Sr=Ne.get(gn)).direction.setFromMatrixPosition(gn.matrixWorld),Sr.direction.transformDirection(eo),Sr.direction.normalize(),Sr.skyColor.copy(gn.color).multiplyScalar(Oi),Sr.groundColor.copy(gn.groundColor).multiplyScalar(Oi),C.hemi[Yo++]=Sr}C.ambient[0]=Qi,C.ambient[1]=sr,C.ambient[2]=ni,C.directional.length=ao,C.spot.length=Ho,C.rectArea.length=Eo,C.point.length=Fa,C.hemi.length=Yo,C.hash=ao+","+Fa+","+Ho+","+Eo+","+Yo+","+C.shadows.length}(ee,ut),Xn&&zi.endShadows(),w.calls=0,w.vertices=0,w.faces=0,w.points=0,void 0===an&&(an=null),this.setRenderTarget(an);var gn=Ve.background;if(null===gn?K.buffers.color.setClear(ui.r,ui.g,ui.b,Wt,N):gn&&gn.isColor&&(K.buffers.color.setClear(gn.r,gn.g,gn.b,1,N),hn=!0),(this.autoClear||hn)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),gn&&gn.isCubeTexture?(ht.projectionMatrix.copy(ut.projectionMatrix),ht.matrixWorld.extractRotation(ut.matrixWorld),ht.matrixWorldInverse.getInverse(ht.matrixWorld),mt.material.uniforms.tCube.value=gn,mt.modelViewMatrix.multiplyMatrices(ht.matrixWorldInverse,mt.matrixWorld),pe.update(mt),Ke.renderBufferDirect(ht,null,mt.geometry,mt.material,mt,null)):gn&&gn.isTexture&&(Lt.material.map=gn,pe.update(Lt),Ke.renderBufferDirect(qe,null,Lt.geometry,Lt.material,Lt,null)),Ve.overrideMaterial){var Qi=Ve.overrideMaterial;Mn(fe,Ve,ut,Qi),Mn(Le,Ve,ut,Qi)}else K.setBlending($),Mn(fe,Ve,ut),Mn(Le,Ve,ut);et.render(Ve,ut),Gt.render(Ve,ut,On),an&&he.updateRenderTargetMipmap(an),K.setDepthTest(!0),K.setDepthWrite(!0),K.setColorWrite(!0)}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFaceCulling=function(Ve,ut){K.setCullFace(Ve),K.setFlipSided(ut===q)},this.allocTextureUnit=function $n(){var Ve=Ai;return Ve>=G.maxTextures&&console.warn("WebGLRenderer: trying to use "+Ve+" texture units while this GPU supports only "+G.maxTextures),Ai+=1,Ve},this.setTexture2D=(Ve=!1,function(an,hn){an&&an.isWebGLRenderTarget&&(Ve||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),Ve=!0),an=an.texture),he.setTexture2D(an,hn)}),this.setTexture=function(){var Ve=!1;return function(an,hn){Ve||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),Ve=!0),he.setTexture2D(an,hn)}}(),this.setTextureCube=function(){var Ve=!1;return function(an,hn){an&&an.isWebGLRenderTargetCube&&(Ve||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),Ve=!0),an=an.texture),an&&an.isCubeTexture||Array.isArray(an.image)&&6===an.image.length?he.setTextureCube(an,hn):he.setTextureCubeDynamic(an,hn)}}(),this.getCurrentRenderTarget=function(){return vt},this.setRenderTarget=function(Ve){vt=Ve,Ve&&void 0===le.get(Ve).__webglFramebuffer&&he.setupRenderTarget(Ve);var an,ut=Ve&&Ve.isWebGLRenderTargetCube;if(Ve){var hn=le.get(Ve);an=ut?hn.__webglFramebuffer[Ve.activeCubeFace]:hn.__webglFramebuffer,en.copy(Ve.scissor),dn=Ve.scissorTest,On.copy(Ve.viewport)}else an=null,en.copy(Ii).multiplyScalar(ei),dn=_i,On.copy(fi).multiplyScalar(ei);if(qt!==an&&(E.bindFramebuffer(E.FRAMEBUFFER,an),qt=an),K.scissor(en),K.setScissorTest(dn),K.viewport(On),ut){var gn=le.get(Ve.texture);E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_CUBE_MAP_POSITIVE_X+Ve.activeCubeFace,gn.__webglTexture,Ve.activeMipMapLevel)}},this.readRenderTargetPixels=function(Ve,ut,an,hn,gn,Qi){if(!1!==(Ve&&Ve.isWebGLRenderTarget)){var sr=le.get(Ve).__webglFramebuffer;if(sr){var ni=!1;sr!==qt&&(E.bindFramebuffer(E.FRAMEBUFFER,sr),ni=!0);try{var Fr=Ve.texture,Oi=Fr.format,Ni=Fr.type;if(Oi!==tl&&Ei(Oi)!==E.getParameter(E.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(Ni===df||Ei(Ni)===E.getParameter(E.IMPLEMENTATION_COLOR_READ_TYPE)||Ni===Ph&&(L.get("OES_texture_float")||L.get("WEBGL_color_buffer_float"))||Ni===wc&&L.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");E.checkFramebufferStatus(E.FRAMEBUFFER)===E.FRAMEBUFFER_COMPLETE?ut>=0&&ut<=Ve.width-hn&&an>=0&&an<=Ve.height-gn&&E.readPixels(ut,an,hn,gn,Ei(Oi),Ei(Ni),Qi):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{ni&&E.bindFramebuffer(E.FRAMEBUFFER,qt)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")}}function Fd(a,d){this.name="",this.color=new Wr(a),this.density=void 0!==d?d:25e-5}function Pc(a,d,g){this.name="",this.color=new Wr(a),this.near=void 0!==d?d:1,this.far=void 0!==g?g:1e3}function Nd(){br.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function ud(a,d,g,y,A){br.call(this),this.lensFlares=[],this.positionScreen=new Qt,this.customUpdateCallback=void 0,void 0!==a&&this.add(a,d,g,y,A)}function Fu(a){Ks.call(this),this.type="SpriteMaterial",this.color=new Wr(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(a)}function fu(a){br.call(this),this.type="Sprite",this.material=void 0!==a?a:new Fu}function aa(){br.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function lh(a,d,g){if(this.useVertexTexture=void 0===g||g,this.identityMatrix=new gs,this.bones=(a=a||[]).slice(0),this.useVertexTexture){var y=Math.sqrt(4*this.bones.length);y=xs.nextPowerOfTwo(Math.ceil(y)),y=Math.max(y,4),this.boneTextureWidth=y,this.boneTextureHeight=y,this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new es(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,tl,Ph)}else this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===d)this.calculateInverses();else if(this.bones.length===d.length)this.boneInverses=d.slice(0);else{console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[];for(var A=0,M=this.bones.length;A<M;A++)this.boneInverses.push(new gs)}}function Rm(){br.call(this),this.type="Bone"}function $g(a,d,g){xa.call(this,a,d),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new gs,this.bindMatrixInverse=new gs;var y=[];if(this.geometry&&void 0!==this.geometry.bones){for(var A,M,R=0,N=this.geometry.bones.length;R<N;++R)M=this.geometry.bones[R],A=new Rm,y.push(A),A.name=M.name,A.position.fromArray(M.pos),A.quaternion.fromArray(M.rotq),void 0!==M.scl&&A.scale.fromArray(M.scl);for(R=0,N=this.geometry.bones.length;R<N;++R)-1!==(M=this.geometry.bones[R]).parent&&null!==M.parent&&void 0!==y[M.parent]?y[M.parent].add(y[R]):this.add(y[R])}this.normalizeSkinWeights(),this.updateMatrixWorld(!0),this.bind(new lh(y,void 0,g),this.matrixWorld)}function ol(a){Ks.call(this),this.type="LineBasicMaterial",this.color=new Wr(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(a)}function pu(a,d,g){if(1===g)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new yo(a,d);br.call(this),this.type="Line",this.geometry=void 0!==a?a:new Mr,this.material=void 0!==d?d:new ol({color:16777215*Math.random()})}function yo(a,d){pu.call(this,a,d),this.type="LineSegments"}function Rc(a){Ks.call(this),this.type="PointsMaterial",this.color=new Wr(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(a)}function js(a,d){br.call(this),this.type="Points",this.geometry=void 0!==a?a:new Mr,this.material=void 0!==d?d:new Rc({color:16777215*Math.random()})}function op(){br.call(this),this.type="Group"}function ap(a,d,g,y,A,M,R,N,ie){jo.call(this,a,d,g,y,A,M,R,N,ie),this.generateMipmaps=!1;var ee=this;!function fe(){requestAnimationFrame(fe),a.readyState>=a.HAVE_CURRENT_DATA&&(ee.needsUpdate=!0)}()}function kc(a,d,g,y,A,M,R,N,ie,ee,fe,me){jo.call(this,null,M,R,N,ie,ee,y,A,fe,me),this.image={width:d,height:g},this.mipmaps=a,this.flipY=!1,this.generateMipmaps=!1}function lp(a,d,g,y,A,M,R,N,ie){jo.call(this,a,d,g,y,A,M,R,N,ie),this.needsUpdate=!0}function qg(a,d,g,y,A,M,R,N,ie,ee){if((ee=void 0!==ee?ee:it)!==it&&ee!==Ye)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===g&&ee===it&&(g=hf),void 0===g&&ee===Ye&&(g=pf),jo.call(this,null,y,A,M,R,N,ee,g,ie),this.image={width:a,height:d},this.magFilter=void 0!==R?R:$a,this.minFilter=void 0!==N?N:$a,this.flipY=!1,this.generateMipmaps=!1}function dd(a){Mr.call(this);var d=[0,0],g={};function y(ui,Wt){return ui-Wt}var A=["a","b","c"];if(a&&a.isGeometry){for(var M=a.vertices,R=a.faces,N=0,ie=new Uint32Array(6*R.length),ee=0,fe=R.length;ee<fe;ee++)for(var me=R[ee],Le=0;Le<3;Le++)d[0]=me[A[Le]],d[1]=me[A[(Le+1)%3]],d.sort(y),void 0===g[ke=d.toString()]&&(ie[2*N]=d[0],ie[2*N+1]=d[1],g[ke]=!0,N++);var Fe=new Float32Array(2*N*3);for(ee=0,fe=N;ee<fe;ee++)for(Le=0;Le<2;Le++){var nt=M[ie[2*ee+Le]];Fe[0+(tt=6*ee+3*Le)]=nt.x,Fe[tt+1]=nt.y,Fe[tt+2]=nt.z}this.addAttribute("position",new dr(Fe,3))}else if(a&&a.isBufferGeometry)if(null!==a.index){var Ke=a.index.array,pt=(M=a.attributes.position,a.groups);N=0,0===pt.length&&a.addGroup(0,Ke.length),ie=new Uint32Array(2*Ke.length);for(var vt=0,qt=pt.length;vt<qt;++vt)for(var Bt=pt[vt],cn=Bt.start,en=(ee=cn,cn+Bt.count);ee<en;ee+=3)for(Le=0;Le<3;Le++){var ke;d[0]=Ke[ee+Le],d[1]=Ke[ee+(Le+1)%3],d.sort(y),void 0===g[ke=d.toString()]&&(ie[2*N]=d[0],ie[2*N+1]=d[1],g[ke]=!0,N++)}for(Fe=new Float32Array(2*N*3),ee=0,fe=N;ee<fe;ee++)for(Le=0;Le<2;Le++)Fe[0+(tt=6*ee+3*Le)]=M.getX(dn=ie[2*ee+Le]),Fe[tt+1]=M.getY(dn),Fe[tt+2]=M.getZ(dn);this.addAttribute("position",new dr(Fe,3))}else{var On=(N=(M=a.attributes.position.array).length/3)/3;for(Fe=new Float32Array(2*N*3),ee=0,fe=On;ee<fe;ee++)for(Le=0;Le<3;Le++){var tt,dn,Ai=9*ee+3*Le;Fe[0+(tt=18*ee+6*Le)]=M[Ai],Fe[tt+1]=M[Ai+1],Fe[tt+2]=M[Ai+2],Fe[tt+3]=M[dn=9*ee+(Le+1)%3*3],Fe[tt+4]=M[dn+1],Fe[tt+5]=M[dn+2]}this.addAttribute("position",new dr(Fe,3))}}function Hh(a,d,g){Mr.call(this),this.type="ParametricBufferGeometry",this.parameters={func:a,slices:d,stacks:g};var M,R,N,ie,ee,y=[],A=[],fe=d+1;for(M=0;M<=g;M++)for(ee=M/g,R=0;R<=d;R++)N=a(ie=R/d,ee),y.push(N.x,N.y,N.z),A.push(ie,ee);var ke,Fe,nt,me=[];for(M=0;M<g;M++)for(R=0;R<d;R++)Fe=(M+1)*fe+R+1,me.push(M*fe+R,ke=M*fe+R+1,nt=(M+1)*fe+R),me.push(ke,Fe,nt);this.setIndex(new(me.length>65535?Ou:Nh)(me,1)),this.addAttribute("position",new is(y,3)),this.addAttribute("uv",new is(A,2)),this.computeVertexNormals()}function Gh(a,d,g){Ts.call(this),this.type="ParametricGeometry",this.parameters={func:a,slices:d,stacks:g},this.fromBufferGeometry(new Hh(a,d,g)),this.mergeVertices()}function Zl(a,d,g,y){Mr.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:a,indices:d,radius:g,detail:y},g=g||1;var A=[],M=[];function N(Ke,pt,vt,qt){var sn,en,Bt=Math.pow(2,qt),cn=[];for(sn=0;sn<=Bt;sn++){cn[sn]=[];var dn=Ke.clone().lerp(vt,sn/Bt),On=pt.clone().lerp(vt,sn/Bt),Ai=Bt-sn;for(en=0;en<=Ai;en++)cn[sn][en]=0===en&&sn===Bt?dn:dn.clone().lerp(On,en/Ai)}for(sn=0;sn<Bt;sn++)for(en=0;en<2*(Bt-sn)-1;en++){var ui=Math.floor(en/2);en%2==0?(me(cn[sn][ui+1]),me(cn[sn+1][ui]),me(cn[sn][ui])):(me(cn[sn][ui+1]),me(cn[sn+1][ui+1]),me(cn[sn+1][ui]))}}function me(Ke){A.push(Ke.x,Ke.y,Ke.z)}function Le(Ke,pt){var vt=3*Ke;pt.x=a[vt+0],pt.y=a[vt+1],pt.z=a[vt+2]}function Fe(Ke,pt,vt,qt){qt<0&&1===Ke.x&&(M[pt]=Ke.x-1),0===vt.x&&0===vt.z&&(M[pt]=qt/2/Math.PI+.5)}function nt(Ke){return Math.atan2(Ke.z,-Ke.x)}function tt(Ke){return Math.atan2(-Ke.y,Math.sqrt(Ke.x*Ke.x+Ke.z*Ke.z))}(function R(Ke){for(var pt=new Qt,vt=new Qt,qt=new Qt,Bt=0;Bt<d.length;Bt+=3)Le(d[Bt+0],pt),Le(d[Bt+1],vt),Le(d[Bt+2],qt),N(pt,vt,qt,Ke)})(y=y||0),function ie(Ke){for(var pt=new Qt,vt=0;vt<A.length;vt+=3)pt.x=A[vt+0],pt.y=A[vt+1],pt.z=A[vt+2],pt.normalize().multiplyScalar(Ke),A[vt+0]=pt.x,A[vt+1]=pt.y,A[vt+2]=pt.z}(g),function ee(){for(var Ke=new Qt,pt=0;pt<A.length;pt+=3){Ke.x=A[pt+0],Ke.y=A[pt+1],Ke.z=A[pt+2];var vt=nt(Ke)/2/Math.PI+.5,qt=tt(Ke)/Math.PI+.5;M.push(vt,1-qt)}(function ke(){for(var Ke=new Qt,pt=new Qt,vt=new Qt,qt=new Qt,Bt=new Xi,cn=new Xi,sn=new Xi,en=0,dn=0;en<A.length;en+=9,dn+=6){Ke.set(A[en+0],A[en+1],A[en+2]),pt.set(A[en+3],A[en+4],A[en+5]),vt.set(A[en+6],A[en+7],A[en+8]),Bt.set(M[dn+0],M[dn+1]),cn.set(M[dn+2],M[dn+3]),sn.set(M[dn+4],M[dn+5]),qt.copy(Ke).add(pt).add(vt).divideScalar(3);var On=nt(qt);Fe(Bt,dn+0,Ke,On),Fe(cn,dn+2,pt,On),Fe(sn,dn+4,vt,On)}})(),function fe(){for(var Ke=0;Ke<M.length;Ke+=6){var pt=M[Ke+0],vt=M[Ke+2],qt=M[Ke+4],Bt=Math.max(pt,vt,qt),cn=Math.min(pt,vt,qt);Bt>.9&&cn<.1&&(pt<.2&&(M[Ke+0]+=1),vt<.2&&(M[Ke+2]+=1),qt<.2&&(M[Ke+4]+=1))}}()}(),this.addAttribute("position",new is(A,3)),this.addAttribute("normal",new is(A.slice(),3)),this.addAttribute("uv",new is(M,2)),this.normalizeNormals(),this.boundingSphere=new wt(new Qt,g)}function al(a,d){Zl.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],a,d),this.type="TetrahedronBufferGeometry",this.parameters={radius:a,detail:d}}function Bd(a,d){Ts.call(this),this.type="TetrahedronGeometry",this.parameters={radius:a,detail:d},this.fromBufferGeometry(new al(a,d)),this.mergeVertices()}function Jc(a,d){Zl.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],a,d),this.type="OctahedronBufferGeometry",this.parameters={radius:a,detail:d}}function ch(a,d){Ts.call(this),this.type="OctahedronGeometry",this.parameters={radius:a,detail:d},this.fromBufferGeometry(new Jc(a,d)),this.mergeVertices()}function Wh(a,d){var g=(1+Math.sqrt(5))/2;Zl.call(this,[-1,g,0,1,g,0,-1,-g,0,1,-g,0,0,-1,g,0,1,g,0,-1,-g,0,1,-g,g,0,-1,g,0,1,-g,0,-1,-g,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],a,d),this.type="IcosahedronBufferGeometry",this.parameters={radius:a,detail:d}}function cp(a,d){Ts.call(this),this.type="IcosahedronGeometry",this.parameters={radius:a,detail:d},this.fromBufferGeometry(new Wh(a,d)),this.mergeVertices()}function hd(a,d){var g=(1+Math.sqrt(5))/2,y=1/g;Zl.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-y,-g,0,-y,g,0,y,-g,0,y,g,-y,-g,0,-y,g,0,y,-g,0,y,g,0,-g,0,-y,g,0,-y,-g,0,y,g,0,y],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],a,d),this.type="DodecahedronBufferGeometry",this.parameters={radius:a,detail:d}}function Yp(a,d){Ts.call(this),this.type="DodecahedronGeometry",this.parameters={radius:a,detail:d},this.fromBufferGeometry(new hd(a,d)),this.mergeVertices()}function Vo(a,d,g,y){Ts.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:a,indices:d,radius:g,detail:y},this.fromBufferGeometry(new Zl(a,d,g,y)),this.mergeVertices()}function jh(a,d,g,y,A){Mr.call(this),this.type="TubeBufferGeometry",this.parameters={path:a,tubularSegments:d,radius:g,radialSegments:y,closed:A},g=g||1,y=y||8;var M=a.computeFrenetFrames(d=d||64,A=A||!1);this.tangents=M.tangents,this.normals=M.normals,this.binormals=M.binormals;var ee,fe,R=new Qt,N=new Qt,ie=new Xi,me=[],Le=[],ke=[],Fe=[];function tt(vt){var qt=a.getPointAt(vt/d),Bt=M.normals[vt],cn=M.binormals[vt];for(fe=0;fe<=y;fe++){var sn=fe/y*Math.PI*2,en=Math.sin(sn),dn=-Math.cos(sn);N.x=dn*Bt.x+en*cn.x,N.y=dn*Bt.y+en*cn.y,N.z=dn*Bt.z+en*cn.z,N.normalize(),Le.push(N.x,N.y,N.z),R.x=qt.x+g*N.x,R.y=qt.y+g*N.y,R.z=qt.z+g*N.z,me.push(R.x,R.y,R.z)}}(function nt(){for(ee=0;ee<d;ee++)tt(ee);tt(!1===A?d:0),function pt(){for(ee=0;ee<=d;ee++)for(fe=0;fe<=y;fe++)ie.x=ee/d,ie.y=fe/y,ke.push(ie.x,ie.y)}(),function Ke(){for(fe=1;fe<=d;fe++)for(ee=1;ee<=y;ee++){var qt=(y+1)*fe+(ee-1),Bt=(y+1)*fe+ee,cn=(y+1)*(fe-1)+ee;Fe.push((y+1)*(fe-1)+(ee-1),qt,cn),Fe.push(qt,Bt,cn)}}()})(),this.setIndex(new(Fe.length>65535?Ou:Nh)(Fe,1)),this.addAttribute("position",new is(me,3)),this.addAttribute("normal",new is(Le,3)),this.addAttribute("uv",new is(ke,2))}function zd(a,d,g,y,A,M){Ts.call(this),this.type="TubeGeometry",this.parameters={path:a,tubularSegments:d,radius:g,radialSegments:y,closed:A},void 0!==M&&console.warn("THREE.TubeGeometry: taper has been removed.");var R=new jh(a,d,g,y,A);this.tangents=R.tangents,this.normals=R.normals,this.binormals=R.binormals,this.fromBufferGeometry(R),this.mergeVertices()}function Ka(a,d,g,y,A,M){Mr.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:a,tube:d,tubularSegments:g,radialSegments:y,p:A,q:M},a=a||100,d=d||40,g=Math.floor(g)||64,A=A||2,M=M||3;var Le,ke,R=((y=Math.floor(y)||8)+1)*(g+1),N=y*g*2*3,ie=new dr(new(N>65535?Uint32Array:Uint16Array)(N),1),ee=new dr(new Float32Array(3*R),3),fe=new dr(new Float32Array(3*R),3),me=new dr(new Float32Array(2*R),2),Fe=0,nt=0,tt=new Qt,Ke=new Qt,pt=new Xi,vt=new Qt,qt=new Qt,Bt=new Qt,cn=new Qt,sn=new Qt;for(Le=0;Le<=g;++Le){var en=Le/g*A*Math.PI*2;for(ei(en,A,M,a,vt),ei(en+.01,A,M,a,qt),cn.subVectors(qt,vt),sn.addVectors(qt,vt),Bt.crossVectors(cn,sn),sn.crossVectors(Bt,cn),Bt.normalize(),sn.normalize(),ke=0;ke<=y;++ke){var dn=ke/y*Math.PI*2,On=-d*Math.cos(dn),Ai=d*Math.sin(dn);tt.x=vt.x+(On*sn.x+Ai*Bt.x),tt.y=vt.y+(On*sn.y+Ai*Bt.y),tt.z=vt.z+(On*sn.z+Ai*Bt.z),ee.setXYZ(Fe,tt.x,tt.y,tt.z),Ke.subVectors(tt,vt).normalize(),fe.setXYZ(Fe,Ke.x,Ke.y,Ke.z),pt.x=Le/g,pt.y=ke/y,me.setXY(Fe,pt.x,pt.y),Fe++}}for(ke=1;ke<=g;ke++)for(Le=1;Le<=y;Le++){var Wt=(y+1)*ke+(Le-1),$t=(y+1)*ke+Le,Wn=(y+1)*(ke-1)+Le;ie.setX(nt,(y+1)*(ke-1)+(Le-1)),nt++,ie.setX(nt,Wt),nt++,ie.setX(nt,Wn),nt++,ie.setX(nt,Wt),nt++,ie.setX(nt,$t),nt++,ie.setX(nt,Wn),nt++}function ei(Ii,_i,fi,ir,zi){var Xn=Math.cos(Ii),Hn=Math.sin(Ii),f=fi/_i*Ii,c=Math.cos(f);zi.x=ir*(2+c)*.5*Xn,zi.y=ir*(2+c)*Hn*.5,zi.z=ir*Math.sin(f)*.5}this.setIndex(ie),this.addAttribute("position",ee),this.addAttribute("normal",fe),this.addAttribute("uv",me)}function uh(a,d,g,y,A,M,R){Ts.call(this),this.type="TorusKnotGeometry",this.parameters={radius:a,tube:d,tubularSegments:g,radialSegments:y,p:A,q:M},void 0!==R&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Ka(a,d,g,y,A,M)),this.mergeVertices()}function Nu(a,d,g,y,A){Mr.call(this),this.type="TorusBufferGeometry",this.parameters={radius:a,tube:d,radialSegments:g,tubularSegments:y,arc:A},a=a||100,d=d||40,g=Math.floor(g)||8,y=Math.floor(y)||6,A=A||2*Math.PI;var Ke,pt,M=(g+1)*(y+1),R=g*y*2*3,N=new(R>65535?Uint32Array:Uint16Array)(R),ie=new Float32Array(3*M),ee=new Float32Array(3*M),fe=new Float32Array(2*M),me=0,Le=0,ke=0,Fe=new Qt,nt=new Qt,tt=new Qt;for(Ke=0;Ke<=g;Ke++)for(pt=0;pt<=y;pt++){var vt=pt/y*A,qt=Ke/g*Math.PI*2;nt.x=(a+d*Math.cos(qt))*Math.cos(vt),nt.y=(a+d*Math.cos(qt))*Math.sin(vt),nt.z=d*Math.sin(qt),ie[me]=nt.x,ie[me+1]=nt.y,ie[me+2]=nt.z,Fe.x=a*Math.cos(vt),Fe.y=a*Math.sin(vt),tt.subVectors(nt,Fe).normalize(),ee[me]=tt.x,ee[me+1]=tt.y,ee[me+2]=tt.z,fe[Le]=pt/y,fe[Le+1]=Ke/g,me+=3,Le+=2}for(Ke=1;Ke<=g;Ke++)for(pt=1;pt<=y;pt++){var cn=(y+1)*(Ke-1)+pt-1,sn=(y+1)*(Ke-1)+pt,en=(y+1)*Ke+pt;N[ke]=(y+1)*Ke+pt-1,N[ke+1]=cn,N[ke+2]=en,N[ke+3]=cn,N[ke+4]=sn,N[ke+5]=en,ke+=6}this.setIndex(new dr(N,1)),this.addAttribute("position",new dr(ie,3)),this.addAttribute("normal",new dr(ee,3)),this.addAttribute("uv",new dr(fe,2))}function Vd(a,d,g,y,A){Ts.call(this),this.type="TorusGeometry",this.parameters={radius:a,tube:d,radialSegments:g,tubularSegments:y,arc:A},this.fromBufferGeometry(new Nu(a,d,g,y,A))}Fd.prototype.isFogExp2=!0,Fd.prototype.clone=function(){return new Fd(this.color.getHex(),this.density)},Fd.prototype.toJSON=function(a){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},Pc.prototype.isFog=!0,Pc.prototype.clone=function(){return new Pc(this.color.getHex(),this.near,this.far)},Pc.prototype.toJSON=function(a){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},(Nd.prototype=Object.create(br.prototype)).constructor=Nd,Nd.prototype.copy=function(a,d){return br.prototype.copy.call(this,a,d),null!==a.background&&(this.background=a.background.clone()),null!==a.fog&&(this.fog=a.fog.clone()),null!==a.overrideMaterial&&(this.overrideMaterial=a.overrideMaterial.clone()),this.autoUpdate=a.autoUpdate,this.matrixAutoUpdate=a.matrixAutoUpdate,this},Nd.prototype.toJSON=function(a){var d=br.prototype.toJSON.call(this,a);return null!==this.background&&(d.object.background=this.background.toJSON(a)),null!==this.fog&&(d.object.fog=this.fog.toJSON()),d},ud.prototype=Object.assign(Object.create(br.prototype),{constructor:ud,isLensFlare:!0,copy:function(a){br.prototype.copy.call(this,a),this.positionScreen.copy(a.positionScreen),this.customUpdateCallback=a.customUpdateCallback;for(var d=0,g=a.lensFlares.length;d<g;d++)this.lensFlares.push(a.lensFlares[d]);return this},add:function(a,d,g,y,A,M){void 0===d&&(d=-1),void 0===g&&(g=0),void 0===M&&(M=1),void 0===A&&(A=new Wr(16777215)),void 0===y&&(y=ne),g=Math.min(g,Math.max(0,g)),this.lensFlares.push({texture:a,size:d,distance:g,x:0,y:0,z:0,scale:1,rotation:0,opacity:M,color:A,blending:y})},updateLensFlares:function(){var a,g,d=this.lensFlares.length,y=2*-this.positionScreen.x,A=2*-this.positionScreen.y;for(a=0;a<d;a++)(g=this.lensFlares[a]).x=this.positionScreen.x+y*g.distance,g.y=this.positionScreen.y+A*g.distance,g.wantedRotation=g.x*Math.PI*.25,g.rotation+=.25*(g.wantedRotation-g.rotation)}}),(Fu.prototype=Object.create(Ks.prototype)).constructor=Fu,Fu.prototype.copy=function(a){return Ks.prototype.copy.call(this,a),this.color.copy(a.color),this.map=a.map,this.rotation=a.rotation,this},fu.prototype=Object.assign(Object.create(br.prototype),{constructor:fu,isSprite:!0,raycast:function(){var a=new Qt;return function(g,y){a.setFromMatrixPosition(this.matrixWorld);var A=g.ray.distanceSqToPoint(a);A>this.scale.x*this.scale.y/4||y.push({distance:Math.sqrt(A),point:this.position,face:null,object:this})}}(),clone:function(){return new this.constructor(this.material).copy(this)}}),aa.prototype=Object.assign(Object.create(br.prototype),{constructor:aa,copy:function(a){br.prototype.copy.call(this,a,!1);for(var d=a.levels,g=0,y=d.length;g<y;g++){var A=d[g];this.addLevel(A.object.clone(),A.distance)}return this},addLevel:function(a,d){void 0===d&&(d=0),d=Math.abs(d);for(var g=this.levels,y=0;y<g.length&&!(d<g[y].distance);y++);g.splice(y,0,{distance:d,object:a}),this.add(a)},getObjectForDistance:function(a){for(var d=this.levels,g=1,y=d.length;g<y&&!(a<d[g].distance);g++);return d[g-1].object},raycast:function(){var a=new Qt;return function(g,y){a.setFromMatrixPosition(this.matrixWorld);var A=g.ray.origin.distanceTo(a);this.getObjectForDistance(A).raycast(g,y)}}(),update:function(){var a=new Qt,d=new Qt;return function(y){var A=this.levels;if(A.length>1){a.setFromMatrixPosition(y.matrixWorld),d.setFromMatrixPosition(this.matrixWorld);var M=a.distanceTo(d);A[0].object.visible=!0;for(var R=1,N=A.length;R<N&&M>=A[R].distance;R++)A[R-1].object.visible=!1,A[R].object.visible=!0;for(;R<N;R++)A[R].object.visible=!1}}}(),toJSON:function(a){var d=br.prototype.toJSON.call(this,a);d.object.levels=[];for(var g=this.levels,y=0,A=g.length;y<A;y++){var M=g[y];d.object.levels.push({object:M.object.uuid,distance:M.distance})}return d}}),Object.assign(lh.prototype,{calculateInverses:function(){this.boneInverses=[];for(var a=0,d=this.bones.length;a<d;a++){var g=new gs;this.bones[a]&&g.getInverse(this.bones[a].matrixWorld),this.boneInverses.push(g)}},pose:function(){for(var a,d=0,g=this.bones.length;d<g;d++)(a=this.bones[d])&&a.matrixWorld.getInverse(this.boneInverses[d]);for(d=0,g=this.bones.length;d<g;d++)(a=this.bones[d])&&(a.parent&&a.parent.isBone?(a.matrix.getInverse(a.parent.matrixWorld),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale))},update:function(){var a=new gs;return function(){for(var g=0,y=this.bones.length;g<y;g++)a.multiplyMatrices(this.bones[g]?this.bones[g].matrixWorld:this.identityMatrix,this.boneInverses[g]),a.toArray(this.boneMatrices,16*g);this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}(),clone:function(){return new lh(this.bones,this.boneInverses,this.useVertexTexture)}}),Rm.prototype=Object.assign(Object.create(br.prototype),{constructor:Rm,isBone:!0}),$g.prototype=Object.assign(Object.create(xa.prototype),{constructor:$g,isSkinnedMesh:!0,bind:function(a,d){this.skeleton=a,void 0===d&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),d=this.matrixWorld),this.bindMatrix.copy(d),this.bindMatrixInverse.getInverse(d)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){if(this.geometry&&this.geometry.isGeometry)for(var a=0;a<this.geometry.skinWeights.length;a++){var d=this.geometry.skinWeights[a];(g=1/d.lengthManhattan())!=1/0?d.multiplyScalar(g):d.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var y=new $o,A=this.geometry.attributes.skinWeight;for(a=0;a<A.count;a++){var g;y.x=A.getX(a),y.y=A.getY(a),y.z=A.getZ(a),y.w=A.getW(a),(g=1/y.lengthManhattan())!=1/0?y.multiplyScalar(g):y.set(1,0,0,0),A.setXYZW(a,y.x,y.y,y.z,y.w)}}},updateMatrixWorld:function(a){xa.prototype.updateMatrixWorld.call(this,!0),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material,this.skeleton.useVertexTexture).copy(this)}}),(ol.prototype=Object.create(Ks.prototype)).constructor=ol,ol.prototype.isLineBasicMaterial=!0,ol.prototype.copy=function(a){return Ks.prototype.copy.call(this,a),this.color.copy(a.color),this.linewidth=a.linewidth,this.linecap=a.linecap,this.linejoin=a.linejoin,this},pu.prototype=Object.assign(Object.create(br.prototype),{constructor:pu,isLine:!0,raycast:function(){var a=new gs,d=new sa,g=new wt;return function(A,M){var R=A.linePrecision,N=R*R,ie=this.geometry,ee=this.matrixWorld;if(null===ie.boundingSphere&&ie.computeBoundingSphere(),g.copy(ie.boundingSphere),g.applyMatrix4(ee),!1!==A.ray.intersectsSphere(g)){a.getInverse(ee),d.copy(A.ray).applyMatrix4(a);var fe=new Qt,me=new Qt,Le=new Qt,ke=new Qt,Fe=this&&this.isLineSegments?2:1;if(ie.isBufferGeometry){var nt=ie.index,Ke=ie.attributes.position.array;if(null!==nt)for(var pt=nt.array,vt=0,qt=pt.length-1;vt<qt;vt+=Fe){var cn=pt[vt+1];fe.fromArray(Ke,3*pt[vt]),me.fromArray(Ke,3*cn),d.distanceSqToSegment(fe,me,ke,Le)>N||(ke.applyMatrix4(this.matrixWorld),(en=A.ray.origin.distanceTo(ke))<A.near||en>A.far||M.push({distance:en,point:Le.clone().applyMatrix4(this.matrixWorld),index:vt,face:null,faceIndex:null,object:this}))}else for(vt=0,qt=Ke.length/3-1;vt<qt;vt+=Fe)fe.fromArray(Ke,3*vt),me.fromArray(Ke,3*vt+3),d.distanceSqToSegment(fe,me,ke,Le)>N||(ke.applyMatrix4(this.matrixWorld),(en=A.ray.origin.distanceTo(ke))<A.near||en>A.far||M.push({distance:en,point:Le.clone().applyMatrix4(this.matrixWorld),index:vt,face:null,faceIndex:null,object:this}))}else if(ie.isGeometry){var dn=ie.vertices,On=dn.length;for(vt=0;vt<On-1;vt+=Fe){var en;d.distanceSqToSegment(dn[vt],dn[vt+1],ke,Le)>N||(ke.applyMatrix4(this.matrixWorld),(en=A.ray.origin.distanceTo(ke))<A.near||en>A.far||M.push({distance:en,point:Le.clone().applyMatrix4(this.matrixWorld),index:vt,face:null,faceIndex:null,object:this}))}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),yo.prototype=Object.assign(Object.create(pu.prototype),{constructor:yo,isLineSegments:!0}),(Rc.prototype=Object.create(Ks.prototype)).constructor=Rc,Rc.prototype.isPointsMaterial=!0,Rc.prototype.copy=function(a){return Ks.prototype.copy.call(this,a),this.color.copy(a.color),this.map=a.map,this.size=a.size,this.sizeAttenuation=a.sizeAttenuation,this},js.prototype=Object.assign(Object.create(br.prototype),{constructor:js,isPoints:!0,raycast:function(){var a=new gs,d=new sa,g=new wt;return function(A,M){var R=this,N=this.geometry,ie=this.matrixWorld,ee=A.params.Points.threshold;if(null===N.boundingSphere&&N.computeBoundingSphere(),g.copy(N.boundingSphere),g.applyMatrix4(ie),!1!==A.ray.intersectsSphere(g)){a.getInverse(ie),d.copy(A.ray).applyMatrix4(a);var fe=ee/((this.scale.x+this.scale.y+this.scale.z)/3),me=fe*fe,Le=new Qt;if(N.isBufferGeometry){var Fe=N.index,tt=N.attributes.position.array;if(null!==Fe)for(var Ke=Fe.array,pt=0,vt=Ke.length;pt<vt;pt++){var qt=Ke[pt];Le.fromArray(tt,3*qt),ke(Le,qt)}else{pt=0;for(var Bt=tt.length/3;pt<Bt;pt++)Le.fromArray(tt,3*pt),ke(Le,pt)}}else{var cn=N.vertices;for(pt=0,Bt=cn.length;pt<Bt;pt++)ke(cn[pt],pt)}}function ke(sn,en){var dn=d.distanceSqToPoint(sn);if(dn<me){var On=d.closestPointToPoint(sn);On.applyMatrix4(ie);var Ai=A.ray.origin.distanceTo(On);if(Ai<A.near||Ai>A.far)return;M.push({distance:Ai,distanceToRay:Math.sqrt(dn),point:On.clone(),index:en,face:null,object:R})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),op.prototype=Object.assign(Object.create(br.prototype),{constructor:op}),(ap.prototype=Object.create(jo.prototype)).constructor=ap,(kc.prototype=Object.create(jo.prototype)).constructor=kc,kc.prototype.isCompressedTexture=!0,(lp.prototype=Object.create(jo.prototype)).constructor=lp,(qg.prototype=Object.create(jo.prototype)).constructor=qg,qg.prototype.isDepthTexture=!0,(dd.prototype=Object.create(Mr.prototype)).constructor=dd,(Hh.prototype=Object.create(Mr.prototype)).constructor=Hh,(Gh.prototype=Object.create(Ts.prototype)).constructor=Gh,(Zl.prototype=Object.create(Mr.prototype)).constructor=Zl,(al.prototype=Object.create(Zl.prototype)).constructor=al,(Bd.prototype=Object.create(Ts.prototype)).constructor=Bd,(Jc.prototype=Object.create(Zl.prototype)).constructor=Jc,(ch.prototype=Object.create(Ts.prototype)).constructor=ch,(Wh.prototype=Object.create(Zl.prototype)).constructor=Wh,(cp.prototype=Object.create(Ts.prototype)).constructor=cp,(hd.prototype=Object.create(Zl.prototype)).constructor=hd,(Yp.prototype=Object.create(Ts.prototype)).constructor=Yp,(Vo.prototype=Object.create(Ts.prototype)).constructor=Vo,(jh.prototype=Object.create(Mr.prototype)).constructor=jh,(zd.prototype=Object.create(Ts.prototype)).constructor=zd,(Ka.prototype=Object.create(Mr.prototype)).constructor=Ka,(uh.prototype=Object.create(Ts.prototype)).constructor=uh,(Nu.prototype=Object.create(Mr.prototype)).constructor=Nu,(Vd.prototype=Object.create(Ts.prototype)).constructor=Vd;var La={area:function(a){for(var d=a.length,g=0,y=d-1,A=0;A<d;y=A++)g+=a[y].x*a[A].y-a[A].x*a[y].y;return.5*g},triangulate:function(){function a(d,g,y,A,M,R){var N,ie,ee,fe,me,Le,ke,Fe,nt,tt,Ke,pt,vt,qt,Bt;if(((fe=d[R[y]].x)-(ie=d[R[g]].x))*((ke=d[R[A]].y)-(ee=d[R[g]].y))-((me=d[R[y]].y)-ee)*((Le=d[R[A]].x)-ie)<=0)return!1;for(tt=Le-fe,Ke=ke-me,pt=ie-Le,vt=ee-ke,qt=fe-ie,Bt=me-ee,N=0;N<M;N++)if(nt=d[R[N]].y,!((Fe=d[R[N]].x)===ie&&nt===ee||Fe===fe&&nt===me||Fe===Le&&nt===ke)&&tt*(nt-me)-Ke*(Fe-fe)>=-Number.EPSILON&&pt*(nt-ke)-vt*(Fe-Le)>=-Number.EPSILON&&qt*(nt-ee)-Bt*(Fe-ie)>=-Number.EPSILON)return!1;return!0}return function(g,y){var A=g.length;if(A<3)return null;var ie,ee,fe,M=[],R=[],N=[];if(La.area(g)>0)for(ee=0;ee<A;ee++)R[ee]=ee;else for(ee=0;ee<A;ee++)R[ee]=A-1-ee;var me=A,Le=2*me;for(ee=me-1;me>2;){if(Le--<=0)return console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()"),y?N:M;if(me<=(ie=ee)&&(ie=0),me<=(ee=ie+1)&&(ee=0),me<=(fe=ee+1)&&(fe=0),a(g,ie,ee,fe,me,R)){var tt,Ke;for(M.push([g[R[ie]],g[R[ee]],g[R[fe]]]),N.push([R[ie],R[ee],R[fe]]),tt=ee,Ke=ee+1;Ke<me;tt++,Ke++)R[tt]=R[Ke];Le=2*--me}}return y?N:M}}(),triangulateShape:function(a,d){function g(vt){var qt=vt.length;qt>2&&vt[qt-1].equals(vt[0])&&vt.pop()}function y(vt,qt,Bt){return vt.x!==qt.x?vt.x<qt.x?vt.x<=Bt.x&&Bt.x<=qt.x:qt.x<=Bt.x&&Bt.x<=vt.x:vt.y<qt.y?vt.y<=Bt.y&&Bt.y<=qt.y:qt.y<=Bt.y&&Bt.y<=vt.y}function A(vt,qt,Bt,cn,sn){var en=qt.x-vt.x,dn=qt.y-vt.y,On=cn.x-Bt.x,Ai=cn.y-Bt.y,ui=vt.x-Bt.x,Wt=vt.y-Bt.y,$t=dn*On-en*Ai,Wn=dn*ui-en*Wt;if(Math.abs($t)>Number.EPSILON){var ei;if($t>0){if(Wn<0||Wn>$t)return[];if((ei=Ai*ui-On*Wt)<0||ei>$t)return[]}else{if(Wn>0||Wn<$t)return[];if((ei=Ai*ui-On*Wt)>0||ei<$t)return[]}if(0===ei)return!sn||0!==Wn&&Wn!==$t?[vt]:[];if(ei===$t)return!sn||0!==Wn&&Wn!==$t?[qt]:[];if(0===Wn)return[Bt];if(Wn===$t)return[cn];var Ii=ei/$t;return[{x:vt.x+Ii*en,y:vt.y+Ii*dn}]}if(0!==Wn||Ai*ui!=On*Wt)return[];var ir,zi,Xn,Hn,f,c,h,m,_i=0===en&&0===dn,fi=0===On&&0===Ai;return _i&&fi?vt.x!==Bt.x||vt.y!==Bt.y?[]:[vt]:_i?y(Bt,cn,vt)?[vt]:[]:fi?y(vt,qt,Bt)?[Bt]:[]:(0!==en?(vt.x<qt.x?(ir=vt,Xn=vt.x,zi=qt,Hn=qt.x):(ir=qt,Xn=qt.x,zi=vt,Hn=vt.x),Bt.x<cn.x?(f=Bt,h=Bt.x,c=cn,m=cn.x):(f=cn,h=cn.x,c=Bt,m=Bt.x)):(vt.y<qt.y?(ir=vt,Xn=vt.y,zi=qt,Hn=qt.y):(ir=qt,Xn=qt.y,zi=vt,Hn=vt.y),Bt.y<cn.y?(f=Bt,h=Bt.y,c=cn,m=cn.y):(f=cn,h=cn.y,c=Bt,m=Bt.y)),Xn<=h?Hn<h?[]:Hn===h?sn?[]:[f]:Hn<=m?[f,zi]:[f,c]:Xn>m?[]:Xn===m?sn?[]:[ir]:Hn<=m?[ir,zi]:[ir,c])}function M(vt,qt,Bt,cn){var sn=qt.x-vt.x,en=qt.y-vt.y,dn=Bt.x-vt.x,On=Bt.y-vt.y,Ai=cn.x-vt.x,ui=cn.y-vt.y,Wt=sn*On-en*dn,$t=sn*ui-en*Ai;if(Math.abs(Wt)>Number.EPSILON){var Wn=Ai*On-ui*dn;return Wt>0?$t>=0&&Wn>=0:$t>=0||Wn>=0}return $t>0}g(a),d.forEach(g);for(var N,ie,ee,fe,me,Le,ke={},Fe=a.concat(),nt=0,tt=d.length;nt<tt;nt++)Array.prototype.push.apply(Fe,d[nt]);for(N=0,ie=Fe.length;N<ie;N++)void 0!==ke[me=Fe[N].x+":"+Fe[N].y]&&console.warn("THREE.ShapeUtils: Duplicate point",me,N),ke[me]=N;var Ke=function R(vt,qt){var cn,Bt=vt.concat();function sn(m,_){var C=Bt.length-1,w=m-1;w<0&&(w=C);var E=m+1;E>C&&(E=0);var k=M(Bt[m],Bt[w],Bt[E],cn[_]);if(!k)return!1;var L=cn.length-1,G=_-1;G<0&&(G=L);var K=_+1;return K>L&&(K=0),!!(k=M(cn[_],cn[G],cn[K],Bt[m]))}function en(m,_){var C,w;for(C=0;C<Bt.length;C++)if(w=C+1,A(m,_,Bt[C],Bt[w%=Bt.length],!0).length>0)return!0;return!1}var dn=[];function On(m,_){var C,w,E,k;for(C=0;C<dn.length;C++)for(w=qt[dn[C]],E=0;E<w.length;E++)if(k=E+1,A(m,_,w[E],w[k%=w.length],!0).length>0)return!0;return!1}for(var Ai,ui,Wt,$t,Wn,ei,_i,fi,ir,zi,Ii=[],Xn=0,Hn=qt.length;Xn<Hn;Xn++)dn.push(Xn);for(var f=0,c=2*dn.length;dn.length>0;){if(--c<0){console.log("Infinite Loop! Holes left:"+dn.length+", Probably Hole outside Shape!");break}for(ui=f;ui<Bt.length;ui++){for(Wt=Bt[ui],Ai=-1,Xn=0;Xn<dn.length;Xn++)if(void 0===Ii[ei=Wt.x+":"+Wt.y+":"+(Wn=dn[Xn])]){cn=qt[Wn];for(var h=0;h<cn.length;h++)if($t=cn[h],sn(ui,h)&&!en(Wt,$t)&&!On(Wt,$t)){Ai=h,dn.splice(Xn,1),_i=Bt.slice(0,ui+1),fi=Bt.slice(ui),ir=cn.slice(Ai),zi=cn.slice(0,Ai+1),Bt=_i.concat(ir).concat(zi).concat(fi),f=ui;break}if(Ai>=0)break;Ii[ei]=!0}if(Ai>=0)break}}return Bt}(a,d),pt=La.triangulate(Ke,!1);for(N=0,ie=pt.length;N<ie;N++)for(fe=pt[N],ee=0;ee<3;ee++)void 0!==(Le=ke[me=fe[ee].x+":"+fe[ee].y])&&(fe[ee]=Le);return pt.concat()},isClockWise:function(a){return La.area(a)<0},b2:function(A,M,R,N){return function a(y,A){var M=1-y;return M*M*A}(A,M)+function d(y,A){return 2*(1-y)*y*A}(A,R)+function g(y,A){return y*y*A}(A,N)},b3:function(M,R,N,ie,ee){return function a(A,M){var R=1-A;return R*R*R*M}(M,R)+function d(A,M){var R=1-A;return 3*R*R*A*M}(M,N)+function g(A,M){return 3*(1-A)*A*A*M}(M,ie)+function y(A,M){return A*A*A*M}(M,ee)}};function eu(a,d){typeof a>"u"?a=[]:(Ts.call(this),this.type="ExtrudeGeometry",a=Array.isArray(a)?a:[a],this.addShapeList(a,d),this.computeFaceNormals())}function dh(a,d){var g=(d=d||{}).font;if(!1===(g&&g.isFont))return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Ts;var y=g.generateShapes(a,d.size,d.curveSegments);d.amount=void 0!==d.height?d.height:50,void 0===d.bevelThickness&&(d.bevelThickness=10),void 0===d.bevelSize&&(d.bevelSize=8),void 0===d.bevelEnabled&&(d.bevelEnabled=!1),eu.call(this,y,d),this.type="TextGeometry"}function la(a,d,g,y,A,M,R){Mr.call(this),this.type="SphereBufferGeometry",this.parameters={radius:a,widthSegments:d,heightSegments:g,phiStart:y,phiLength:A,thetaStart:M,thetaLength:R},a=a||50,d=Math.max(3,Math.floor(d)||8),g=Math.max(2,Math.floor(g)||6),y=void 0!==y?y:0,A=void 0!==A?A:2*Math.PI;for(var N=(M=void 0!==M?M:0)+(R=void 0!==R?R:Math.PI),ie=(d+1)*(g+1),ee=new dr(new Float32Array(3*ie),3),fe=new dr(new Float32Array(3*ie),3),me=new dr(new Float32Array(2*ie),2),Le=0,ke=[],Fe=new Qt,nt=0;nt<=g;nt++){for(var tt=[],Ke=nt/g,pt=0;pt<=d;pt++){var vt=pt/d,qt=-a*Math.cos(y+vt*A)*Math.sin(M+Ke*R),Bt=a*Math.cos(M+Ke*R),cn=a*Math.sin(y+vt*A)*Math.sin(M+Ke*R);Fe.set(qt,Bt,cn).normalize(),ee.setXYZ(Le,qt,Bt,cn),fe.setXYZ(Le,Fe.x,Fe.y,Fe.z),me.setXY(Le,vt,1-Ke),tt.push(Le),Le++}ke.push(tt)}var sn=[];for(nt=0;nt<g;nt++)for(pt=0;pt<d;pt++){var dn=ke[nt][pt],On=ke[nt+1][pt],Ai=ke[nt+1][pt+1];(0!==nt||M>0)&&sn.push(ke[nt][pt+1],dn,Ai),(nt!==g-1||N<Math.PI)&&sn.push(dn,On,Ai)}this.setIndex(new(ee.count>65535?Ou:Nh)(sn,1)),this.addAttribute("position",ee),this.addAttribute("normal",fe),this.addAttribute("uv",me),this.boundingSphere=new wt(new Qt,a)}function Uo(a,d,g,y,A,M,R){Ts.call(this),this.type="SphereGeometry",this.parameters={radius:a,widthSegments:d,heightSegments:g,phiStart:y,phiLength:A,thetaStart:M,thetaLength:R},this.fromBufferGeometry(new la(a,d,g,y,A,M,R))}function Os(a,d,g,y,A,M){Mr.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:a,outerRadius:d,thetaSegments:g,phiSegments:y,thetaStart:A,thetaLength:M},a=a||20,d=d||50,A=void 0!==A?A:0,M=void 0!==M?M:2*Math.PI;var Fe,vt,qt,R=((g=void 0!==g?Math.max(3,g):8)+1)*((y=void 0!==y?Math.max(1,y):1)+1),N=g*y*2*3,ie=new dr(new(N>65535?Uint32Array:Uint16Array)(N),1),ee=new dr(new Float32Array(3*R),3),fe=new dr(new Float32Array(3*R),3),me=new dr(new Float32Array(2*R),2),Le=0,ke=0,nt=a,tt=(d-a)/y,Ke=new Qt,pt=new Xi;for(vt=0;vt<=y;vt++){for(qt=0;qt<=g;qt++)Fe=A+qt/g*M,Ke.x=nt*Math.cos(Fe),Ke.y=nt*Math.sin(Fe),ee.setXYZ(Le,Ke.x,Ke.y,Ke.z),fe.setXYZ(Le,0,0,1),pt.x=(Ke.x/d+1)/2,pt.y=(Ke.y/d+1)/2,me.setXY(Le,pt.x,pt.y),Le++;nt+=tt}for(vt=0;vt<y;vt++){var Bt=vt*(g+1);for(qt=0;qt<g;qt++){var cn=Fe=qt+Bt,sn=Fe+g+1,en=Fe+g+2,dn=Fe+1;ie.setX(ke,cn),ke++,ie.setX(ke,sn),ke++,ie.setX(ke,en),ke++,ie.setX(ke,cn),ke++,ie.setX(ke,en),ke++,ie.setX(ke,dn),ke++}}this.setIndex(ie),this.addAttribute("position",ee),this.addAttribute("normal",fe),this.addAttribute("uv",me)}function Ji(a,d,g,y,A,M){Ts.call(this),this.type="RingGeometry",this.parameters={innerRadius:a,outerRadius:d,thetaSegments:g,phiSegments:y,thetaStart:A,thetaLength:M},this.fromBufferGeometry(new Os(a,d,g,y,A,M))}function km(a,d,g,y){Ts.call(this),this.type="PlaneGeometry",this.parameters={width:a,height:d,widthSegments:g,heightSegments:y},this.fromBufferGeometry(new oa(a,d,g,y))}function _o(a,d,g,y){Mr.call(this),this.type="LatheBufferGeometry",this.parameters={points:a,segments:d,phiStart:g,phiLength:y},d=Math.floor(d)||12,g=g||0,y=y||2*Math.PI,y=xs.clamp(y,0,2*Math.PI);var me,nt,tt,A=(d+1)*a.length,M=d*a.length*2*3,R=new dr(new(M>65535?Uint32Array:Uint16Array)(M),1),N=new dr(new Float32Array(3*A),3),ie=new dr(new Float32Array(2*A),2),ee=0,fe=0,Le=1/d,ke=new Qt,Fe=new Xi;for(nt=0;nt<=d;nt++){var Ke=g+nt*Le*y,pt=Math.sin(Ke),vt=Math.cos(Ke);for(tt=0;tt<=a.length-1;tt++)ke.x=a[tt].x*pt,ke.y=a[tt].y,ke.z=a[tt].x*vt,N.setXYZ(ee,ke.x,ke.y,ke.z),Fe.x=nt/d,Fe.y=tt/(a.length-1),ie.setXY(ee,Fe.x,Fe.y),ee++}for(nt=0;nt<d;nt++)for(tt=0;tt<a.length-1;tt++){var Bt=(me=tt+nt*a.length)+a.length,cn=me+a.length+1,sn=me+1;R.setX(fe,me),fe++,R.setX(fe,Bt),fe++,R.setX(fe,sn),fe++,R.setX(fe,Bt),fe++,R.setX(fe,cn),fe++,R.setX(fe,sn),fe++}if(this.setIndex(R),this.addAttribute("position",N),this.addAttribute("uv",ie),this.computeVertexNormals(),y===2*Math.PI){var en=this.attributes.normal.array,dn=new Qt,On=new Qt,Ai=new Qt;for(me=d*a.length*3,nt=0,tt=0;nt<a.length;nt++,tt+=3)dn.x=en[tt+0],dn.y=en[tt+1],dn.z=en[tt+2],On.x=en[me+tt+0],On.y=en[me+tt+1],On.z=en[me+tt+2],Ai.addVectors(dn,On).normalize(),en[tt+0]=en[me+tt+0]=Ai.x,en[tt+1]=en[me+tt+1]=Ai.y,en[tt+2]=en[me+tt+2]=Ai.z}}function If(a,d,g,y){Ts.call(this),this.type="LatheGeometry",this.parameters={points:a,segments:d,phiStart:g,phiLength:y},this.fromBufferGeometry(new _o(a,d,g,y)),this.mergeVertices()}function Kp(a,d){Mr.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:a,curveSegments:d},d=d||12;var g=[],y=[],A=[],M=[],R=0,N=0;if(!1===Array.isArray(a))ee(a);else for(var ie=0;ie<a.length;ie++)ee(a[ie]),this.addGroup(R,N,ie),R+=N,N=0;function ee(fe){var me,Le,ke,Fe=g.length/3,nt=fe.extractPoints(d),tt=nt.shape,Ke=nt.holes;if(!1===La.isClockWise(tt))for(tt=tt.reverse(),me=0,Le=Ke.length;me<Le;me++)!0===La.isClockWise(ke=Ke[me])&&(Ke[me]=ke.reverse());var pt=La.triangulateShape(tt,Ke);for(me=0,Le=Ke.length;me<Le;me++)tt=tt.concat(ke=Ke[me]);for(me=0,Le=tt.length;me<Le;me++){var vt=tt[me];g.push(vt.x,vt.y,0),y.push(0,0,1),A.push(vt.x,vt.y)}for(me=0,Le=pt.length;me<Le;me++){var qt=pt[me];M.push(qt[0]+Fe,qt[1]+Fe,qt[2]+Fe),N+=3}}this.setIndex(new(M.length>65535?Ou:Nh)(M,1)),this.addAttribute("position",new is(g,3)),this.addAttribute("normal",new is(y,3)),this.addAttribute("uv",new is(A,2))}function Zp(a,d){Ts.call(this),this.type="ShapeGeometry","object"==typeof d&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),d=d.curveSegments),this.parameters={shapes:a,curveSegments:d},this.fromBufferGeometry(new Kp(a,d)),this.mergeVertices()}function vl(a,d){Mr.call(this),d=void 0!==d?d:1;var g=Math.cos(xs.DEG2RAD*d),y=[0,0],A={};function M(pt,vt){return pt-vt}var N,R=["a","b","c"];a.isBufferGeometry?(N=new Ts).fromBufferGeometry(a):N=a.clone(),N.mergeVertices(),N.computeFaceNormals();for(var ie=N.vertices,ee=N.faces,fe=0,me=ee.length;fe<me;fe++)for(var Le=ee[fe],ke=0;ke<3;ke++)y[0]=Le[R[ke]],y[1]=Le[R[(ke+1)%3]],y.sort(M),void 0===A[Fe=y.toString()]?A[Fe]={vert1:y[0],vert2:y[1],face1:fe,face2:void 0}:A[Fe].face2=fe;var nt=[];for(var Fe in A){var tt=A[Fe];if(void 0===tt.face2||ee[tt.face1].normal.dot(ee[tt.face2].normal)<=g){var Ke=ie[tt.vert1];nt.push(Ke.x),nt.push(Ke.y),nt.push(Ke.z),nt.push((Ke=ie[tt.vert2]).x),nt.push(Ke.y),nt.push(Ke.z)}}this.addAttribute("position",new is(nt,3))}function Sf(a,d,g,y,A,M,R,N){Mr.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:a,radiusBottom:d,height:g,radialSegments:y,heightSegments:A,openEnded:M,thetaStart:R,thetaLength:N};var ie=this;a=void 0!==a?a:20,d=void 0!==d?d:20,g=void 0!==g?g:100,y=Math.floor(y)||8,A=Math.floor(A)||1,M=void 0!==M&&M,R=void 0!==R?R:0,N=void 0!==N?N:2*Math.PI;var ee=0;!1===M&&(a>0&&ee++,d>0&&ee++);var fe=function Bt(){var dn=(y+1)*(A+1);return!1===M&&(dn+=(y+1)*ee+y*ee),dn}(),me=function cn(){var dn=y*A*2*3;return!1===M&&(dn+=y*ee*3),dn}(),Le=new dr(new(me>65535?Uint32Array:Uint16Array)(me),1),ke=new dr(new Float32Array(3*fe),3),Fe=new dr(new Float32Array(3*fe),3),nt=new dr(new Float32Array(2*fe),2),tt=0,Ke=0,pt=[],vt=g/2,qt=0;function en(dn){var On,Ai,ui,Wt=new Xi,$t=new Qt,Wn=0,ei=!0===dn?a:d,Ii=!0===dn?1:-1;for(Ai=tt,On=1;On<=y;On++)ke.setXYZ(tt,0,vt*Ii,0),Fe.setXYZ(tt,0,Ii,0),Wt.x=.5,Wt.y=.5,nt.setXY(tt,Wt.x,Wt.y),tt++;for(ui=tt,On=0;On<=y;On++){var fi=On/y*N+R,ir=Math.cos(fi),zi=Math.sin(fi);$t.x=ei*zi,$t.y=vt*Ii,$t.z=ei*ir,ke.setXYZ(tt,$t.x,$t.y,$t.z),Fe.setXYZ(tt,0,Ii,0),Wt.x=.5*ir+.5,Wt.y=.5*zi*Ii+.5,nt.setXY(tt,Wt.x,Wt.y),tt++}for(On=0;On<y;On++){var Xn=Ai+On,Hn=ui+On;!0===dn?(Le.setX(Ke,Hn),Ke++,Le.setX(Ke,Hn+1),Ke++,Le.setX(Ke,Xn),Ke++):(Le.setX(Ke,Hn+1),Ke++,Le.setX(Ke,Hn),Ke++,Le.setX(Ke,Xn),Ke++),Wn+=3}ie.addGroup(qt,Wn,!0===dn?1:2),qt+=Wn}(function sn(){var dn,On,Ai=new Qt,ui=new Qt,Wt=0,$t=(d-a)/g;for(On=0;On<=A;On++){var Wn=[],ei=On/A,Ii=ei*(d-a)+a;for(dn=0;dn<=y;dn++){var _i=dn/y,fi=_i*N+R,ir=Math.sin(fi),zi=Math.cos(fi);ui.x=Ii*ir,ui.y=-ei*g+vt,ui.z=Ii*zi,ke.setXYZ(tt,ui.x,ui.y,ui.z),Ai.set(ir,$t,zi).normalize(),Fe.setXYZ(tt,Ai.x,Ai.y,Ai.z),nt.setXY(tt,_i,1-ei),Wn.push(tt),tt++}pt.push(Wn)}for(dn=0;dn<y;dn++)for(On=0;On<A;On++){var Hn=pt[On+1][dn],f=pt[On+1][dn+1],c=pt[On][dn+1];Le.setX(Ke,pt[On][dn]),Ke++,Le.setX(Ke,Hn),Ke++,Le.setX(Ke,c),Ke++,Le.setX(Ke,Hn),Ke++,Le.setX(Ke,f),Ke++,Le.setX(Ke,c),Ke++,Wt+=6}ie.addGroup(qt,Wt,0),qt+=Wt})(),!1===M&&(a>0&&en(!0),d>0&&en(!1)),this.setIndex(Le),this.addAttribute("position",ke),this.addAttribute("normal",Fe),this.addAttribute("uv",nt)}function Ql(a,d,g,y,A,M,R,N){Ts.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:a,radiusBottom:d,height:g,radialSegments:y,heightSegments:A,openEnded:M,thetaStart:R,thetaLength:N},this.fromBufferGeometry(new Sf(a,d,g,y,A,M,R,N)),this.mergeVertices()}function Qp(a,d,g,y,A,M,R){Ql.call(this,0,a,d,g,y,A,M,R),this.type="ConeGeometry",this.parameters={radius:a,height:d,radialSegments:g,heightSegments:y,openEnded:A,thetaStart:M,thetaLength:R}}function Jp(a,d,g,y,A,M,R){Sf.call(this,0,a,d,g,y,A,M,R),this.type="ConeBufferGeometry",this.parameters={radius:a,height:d,radialSegments:g,heightSegments:y,openEnded:A,thetaStart:M,thetaLength:R}}function Pa(a,d,g,y){Mr.call(this),this.type="CircleBufferGeometry",this.parameters={radius:a,segments:d,thetaStart:g,thetaLength:y},a=a||50,d=void 0!==d?Math.max(3,d):8,g=void 0!==g?g:0,y=void 0!==y?y:2*Math.PI;var A=d+2,M=new Float32Array(3*A),R=new Float32Array(3*A),N=new Float32Array(2*A);R[2]=1,N[0]=.5,N[1]=.5;for(var ie=0,ee=3,fe=2;ie<=d;ie++,ee+=3,fe+=2){var me=g+ie/d*y;M[ee]=a*Math.cos(me),M[ee+1]=a*Math.sin(me),R[ee+2]=1,N[fe]=(M[ee]/a+1)/2,N[fe+1]=(M[ee+1]/a+1)/2}var Le=[];for(ee=1;ee<=d;ee++)Le.push(ee,ee+1,0);this.setIndex(new dr(new Uint16Array(Le),1)),this.addAttribute("position",new dr(M,3)),this.addAttribute("normal",new dr(R,3)),this.addAttribute("uv",new dr(N,2)),this.boundingSphere=new wt(new Qt,a)}function Nl(a,d,g,y){Ts.call(this),this.type="CircleGeometry",this.parameters={radius:a,segments:d,thetaStart:g,thetaLength:y},this.fromBufferGeometry(new Pa(a,d,g,y))}function Al(a,d,g,y,A,M){Ts.call(this),this.type="BoxGeometry",this.parameters={width:a,height:d,depth:g,widthSegments:y,heightSegments:A,depthSegments:M},this.fromBufferGeometry(new Fl(a,d,g,y,A,M)),this.mergeVertices()}(eu.prototype=Object.create(Ts.prototype)).constructor=eu,eu.prototype.addShapeList=function(a,d){for(var g=a.length,y=0;y<g;y++)this.addShape(a[y],d)},eu.prototype.addShape=function(a,d){var fe,ke,Fe,nt,tt,g=void 0!==d.amount?d.amount:100,y=void 0!==d.bevelThickness?d.bevelThickness:6,A=void 0!==d.bevelSize?d.bevelSize:y-2,M=void 0!==d.bevelSegments?d.bevelSegments:3,R=void 0===d.bevelEnabled||d.bevelEnabled,N=void 0!==d.curveSegments?d.curveSegments:12,ie=void 0!==d.steps?d.steps:1,ee=d.extrudePath,me=!1,Le=void 0!==d.UVGenerator?d.UVGenerator:eu.WorldUVGenerator;ee&&(fe=ee.getSpacedPoints(ie),me=!0,R=!1,ke=void 0!==d.frames?d.frames:ee.computeFrenetFrames(ie,!1),Fe=new Qt,nt=new Qt,tt=new Qt),R||(M=0,y=0,A=0);var Ke,pt,vt,qt=this,Bt=this.vertices.length,cn=a.extractPoints(N),sn=cn.shape,en=cn.holes,dn=!La.isClockWise(sn);if(dn){for(sn=sn.reverse(),pt=0,vt=en.length;pt<vt;pt++)La.isClockWise(Ke=en[pt])&&(en[pt]=Ke.reverse());dn=!1}var On=La.triangulateShape(sn,en),Ai=sn;for(pt=0,vt=en.length;pt<vt;pt++)sn=sn.concat(Ke=en[pt]);function ui(he,pe,Ie){return pe||console.error("THREE.ExtrudeGeometry: vec does not exist"),pe.clone().multiplyScalar(Ie).add(he)}var Wt,$t,Wn,ei,Ii,fi,_i=sn.length,ir=On.length;function zi(he,pe,Ie){var Ne,ze,Qe=1,qe=he.x-pe.x,ht=he.y-pe.y,Lt=Ie.x-he.x,kt=Ie.y-he.y,mt=qe*qe+ht*ht;if(Math.abs(qe*kt-ht*Lt)>Number.EPSILON){var Ct=Math.sqrt(mt),Ht=Math.sqrt(Lt*Lt+kt*kt),Vt=pe.x-ht/Ct,et=pe.y+qe/Ct,mn=((Ie.x-kt/Ht-Vt)*kt-(Ie.y+Lt/Ht-et)*Lt)/(qe*kt-ht*Lt),Yt=(Ne=Vt+qe*mn-he.x)*Ne+(ze=et+ht*mn-he.y)*ze;if(Yt<=2)return new Xi(Ne,ze);Qe=Math.sqrt(Yt/2)}else{var ln=!1;qe>Number.EPSILON?Lt>Number.EPSILON&&(ln=!0):qe<-Number.EPSILON?Lt<-Number.EPSILON&&(ln=!0):Math.sign(ht)===Math.sign(kt)&&(ln=!0),ln?(Ne=-ht,ze=qe,Qe=Math.sqrt(mt)):(Ne=qe,ze=ht,Qe=Math.sqrt(mt/2))}return new Xi(Ne/Qe,ze/Qe)}for(var Xn=[],Hn=0,f=Ai.length,c=f-1,h=Hn+1;Hn<f;Hn++,c++,h++)c===f&&(c=0),h===f&&(h=0),Xn[Hn]=zi(Ai[Hn],Ai[c],Ai[h]);var _,w,m=[],C=Xn.concat();for(pt=0,vt=en.length;pt<vt;pt++){for(_=[],c=(f=(Ke=en[pt]).length)-1,h=1+(Hn=0);Hn<f;Hn++,c++,h++)c===f&&(c=0),h===f&&(h=0),_[Hn]=zi(Ke[Hn],Ke[c],Ke[h]);m.push(_),C=C.concat(_)}for(Wt=0;Wt<M;Wt++){for(Wn=Wt/M,ei=y*Math.cos(Wn*Math.PI/2),$t=A*Math.sin(Wn*Math.PI/2),Hn=0,f=Ai.length;Hn<f;Hn++)G((Ii=ui(Ai[Hn],Xn[Hn],$t)).x,Ii.y,-ei);for(pt=0,vt=en.length;pt<vt;pt++)for(_=m[pt],Hn=0,f=(Ke=en[pt]).length;Hn<f;Hn++)G((Ii=ui(Ke[Hn],_[Hn],$t)).x,Ii.y,-ei)}for($t=A,Hn=0;Hn<_i;Hn++)Ii=R?ui(sn[Hn],C[Hn],$t):sn[Hn],me?(nt.copy(ke.normals[0]).multiplyScalar(Ii.x),Fe.copy(ke.binormals[0]).multiplyScalar(Ii.y),tt.copy(fe[0]).add(nt).add(Fe),G(tt.x,tt.y,tt.z)):G(Ii.x,Ii.y,0);for(w=1;w<=ie;w++)for(Hn=0;Hn<_i;Hn++)Ii=R?ui(sn[Hn],C[Hn],$t):sn[Hn],me?(nt.copy(ke.normals[w]).multiplyScalar(Ii.x),Fe.copy(ke.binormals[w]).multiplyScalar(Ii.y),tt.copy(fe[w]).add(nt).add(Fe),G(tt.x,tt.y,tt.z)):G(Ii.x,Ii.y,g/ie*w);for(Wt=M-1;Wt>=0;Wt--){for(Wn=Wt/M,ei=y*Math.cos(Wn*Math.PI/2),$t=A*Math.sin(Wn*Math.PI/2),Hn=0,f=Ai.length;Hn<f;Hn++)G((Ii=ui(Ai[Hn],Xn[Hn],$t)).x,Ii.y,g+ei);for(pt=0,vt=en.length;pt<vt;pt++)for(_=m[pt],Hn=0,f=(Ke=en[pt]).length;Hn<f;Hn++)Ii=ui(Ke[Hn],_[Hn],$t),me?G(Ii.x,Ii.y+fe[ie-1].y,fe[ie-1].x+ei):G(Ii.x,Ii.y,g+ei)}function L(he,pe){var Ie,Ne;for(Hn=he.length;--Hn>=0;){Ie=Hn,(Ne=Hn-1)<0&&(Ne=he.length-1);var ze=0,Qe=ie+2*M;for(ze=0;ze<Qe;ze++){var qe=_i*ze,ht=_i*(ze+1);le(pe+Ie+qe,pe+Ne+qe,pe+Ne+ht,pe+Ie+ht)}}}function G(he,pe,Ie){qt.vertices.push(new Qt(he,pe,Ie))}function K(he,pe,Ie){qt.faces.push(new Oo(he+=Bt,pe+=Bt,Ie+=Bt,null,null,0));var Ne=Le.generateTopUV(qt,he,pe,Ie);qt.faceVertexUvs[0].push(Ne)}function le(he,pe,Ie,Ne,ze,Qe,qe,ht,Lt){Ie+=Bt,qt.faces.push(new Oo(he+=Bt,pe+=Bt,Ne+=Bt,null,null,1)),qt.faces.push(new Oo(pe,Ie,Ne,null,null,1));var kt=Le.generateSideWallUV(qt,he,pe,Ie,Ne);qt.faceVertexUvs[0].push([kt[0],kt[1],kt[3]]),qt.faceVertexUvs[0].push([kt[1],kt[2],kt[3]])}(function E(){if(R){var he=0,pe=_i*he;for(Hn=0;Hn<ir;Hn++)K((fi=On[Hn])[2]+pe,fi[1]+pe,fi[0]+pe);for(pe=_i*(he=ie+2*M),Hn=0;Hn<ir;Hn++)K((fi=On[Hn])[0]+pe,fi[1]+pe,fi[2]+pe)}else{for(Hn=0;Hn<ir;Hn++)K((fi=On[Hn])[2],fi[1],fi[0]);for(Hn=0;Hn<ir;Hn++)K((fi=On[Hn])[0]+_i*ie,fi[1]+_i*ie,fi[2]+_i*ie)}})(),function k(){var he=0;for(L(Ai,he),he+=Ai.length,pt=0,vt=en.length;pt<vt;pt++)L(Ke=en[pt],he),he+=Ke.length}()},eu.WorldUVGenerator={generateTopUV:function(a,d,g,y){var A=a.vertices,M=A[d],R=A[g],N=A[y];return[new Xi(M.x,M.y),new Xi(R.x,R.y),new Xi(N.x,N.y)]},generateSideWallUV:function(a,d,g,y,A){var M=a.vertices,R=M[d],N=M[g],ie=M[y],ee=M[A];return Math.abs(R.y-N.y)<.01?[new Xi(R.x,1-R.z),new Xi(N.x,1-N.z),new Xi(ie.x,1-ie.z),new Xi(ee.x,1-ee.z)]:[new Xi(R.y,1-R.z),new Xi(N.y,1-N.z),new Xi(ie.y,1-ie.z),new Xi(ee.y,1-ee.z)]}},(dh.prototype=Object.create(eu.prototype)).constructor=dh,(la.prototype=Object.create(Mr.prototype)).constructor=la,(Uo.prototype=Object.create(Ts.prototype)).constructor=Uo,(Os.prototype=Object.create(Mr.prototype)).constructor=Os,(Ji.prototype=Object.create(Ts.prototype)).constructor=Ji,(km.prototype=Object.create(Ts.prototype)).constructor=km,(_o.prototype=Object.create(Mr.prototype)).constructor=_o,(If.prototype=Object.create(Ts.prototype)).constructor=If,(Kp.prototype=Object.create(Mr.prototype)).constructor=Kp,(Zp.prototype=Object.create(Ts.prototype)).constructor=Zp,(vl.prototype=Object.create(Mr.prototype)).constructor=vl,(Sf.prototype=Object.create(Mr.prototype)).constructor=Sf,(Ql.prototype=Object.create(Ts.prototype)).constructor=Ql,(Qp.prototype=Object.create(Ql.prototype)).constructor=Qp,(Jp.prototype=Object.create(Sf.prototype)).constructor=Jp,(Pa.prototype=Object.create(Mr.prototype)).constructor=Pa,(Nl.prototype=Object.create(Ts.prototype)).constructor=Nl,(Al.prototype=Object.create(Ts.prototype)).constructor=Al;var Bu=Object.freeze({WireframeGeometry:dd,ParametricGeometry:Gh,ParametricBufferGeometry:Hh,TetrahedronGeometry:Bd,TetrahedronBufferGeometry:al,OctahedronGeometry:ch,OctahedronBufferGeometry:Jc,IcosahedronGeometry:cp,IcosahedronBufferGeometry:Wh,DodecahedronGeometry:Yp,DodecahedronBufferGeometry:hd,PolyhedronGeometry:Vo,PolyhedronBufferGeometry:Zl,TubeGeometry:zd,TubeBufferGeometry:jh,TorusKnotGeometry:uh,TorusKnotBufferGeometry:Ka,TorusGeometry:Vd,TorusBufferGeometry:Nu,TextGeometry:dh,SphereBufferGeometry:la,SphereGeometry:Uo,RingGeometry:Ji,RingBufferGeometry:Os,PlaneBufferGeometry:oa,PlaneGeometry:km,LatheGeometry:If,LatheBufferGeometry:_o,ShapeGeometry:Zp,ShapeBufferGeometry:Kp,ExtrudeGeometry:eu,EdgesGeometry:vl,ConeGeometry:Qp,ConeBufferGeometry:Jp,CylinderGeometry:Ql,CylinderBufferGeometry:Sf,CircleBufferGeometry:Pa,CircleGeometry:Nl,BoxBufferGeometry:Fl,BoxGeometry:Al});function $h(){Qc.call(this,{uniforms:nl.merge([os.lights,{opacity:{value:1}}]),vertexShader:$s.shadow_vert,fragmentShader:$s.shadow_frag}),this.lights=!0,this.transparent=!0,Object.defineProperties(this,{opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(a){this.uniforms.opacity.value=a}}})}function Ua(a){Qc.call(this,a),this.type="RawShaderMaterial"}function gu(a){this.uuid=xs.generateUUID(),this.type="MultiMaterial",this.materials=Array.isArray(a)?a:[],this.visible=!0}function zu(a){Ks.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Wr(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Wr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Xi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(a)}function Vu(a){zu.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(a)}function Il(a){Ks.call(this),this.type="MeshPhongMaterial",this.color=new Wr(16777215),this.specular=new Wr(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Wr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Xi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Je,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(a)}function Ra(a){Il.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(a)}function Jl(a){Ks.call(this,a),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Xi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(a)}function up(a){Ks.call(this),this.type="MeshLambertMaterial",this.color=new Wr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Wr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Je,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(a)}function dc(a){Ks.call(this),this.type="LineDashedMaterial",this.color=new Wr(16777215),this.linewidth=1,this.scale=1,this.dashSize=3,this.gapSize=1,this.lights=!1,this.setValues(a)}($h.prototype=Object.create(Qc.prototype)).constructor=$h,$h.prototype.isShadowMaterial=!0,(Ua.prototype=Object.create(Qc.prototype)).constructor=Ua,Ua.prototype.isRawShaderMaterial=!0,gu.prototype={constructor:gu,isMultiMaterial:!0,toJSON:function(a){for(var d={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},g=this.materials,y=0,A=g.length;y<A;y++){var M=g[y].toJSON(a);delete M.metadata,d.materials.push(M)}return d.visible=this.visible,d},clone:function(){for(var a=new this.constructor,d=0;d<this.materials.length;d++)a.materials.push(this.materials[d].clone());return a.visible=this.visible,a}},(zu.prototype=Object.create(Ks.prototype)).constructor=zu,zu.prototype.isMeshStandardMaterial=!0,zu.prototype.copy=function(a){return Ks.prototype.copy.call(this,a),this.defines={STANDARD:""},this.color.copy(a.color),this.roughness=a.roughness,this.metalness=a.metalness,this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.roughnessMap=a.roughnessMap,this.metalnessMap=a.metalnessMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.envMapIntensity=a.envMapIntensity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.morphNormals=a.morphNormals,this},(Vu.prototype=Object.create(zu.prototype)).constructor=Vu,Vu.prototype.isMeshPhysicalMaterial=!0,Vu.prototype.copy=function(a){return zu.prototype.copy.call(this,a),this.defines={PHYSICAL:""},this.reflectivity=a.reflectivity,this.clearCoat=a.clearCoat,this.clearCoatRoughness=a.clearCoatRoughness,this},(Il.prototype=Object.create(Ks.prototype)).constructor=Il,Il.prototype.isMeshPhongMaterial=!0,Il.prototype.copy=function(a){return Ks.prototype.copy.call(this,a),this.color.copy(a.color),this.specular.copy(a.specular),this.shininess=a.shininess,this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.specularMap=a.specularMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.combine=a.combine,this.reflectivity=a.reflectivity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.morphNormals=a.morphNormals,this},(Ra.prototype=Object.create(Il.prototype)).constructor=Ra,Ra.prototype.isMeshToonMaterial=!0,Ra.prototype.copy=function(a){return Il.prototype.copy.call(this,a),this.gradientMap=a.gradientMap,this},(Jl.prototype=Object.create(Ks.prototype)).constructor=Jl,Jl.prototype.isMeshNormalMaterial=!0,Jl.prototype.copy=function(a){return Ks.prototype.copy.call(this,a),this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.morphNormals=a.morphNormals,this},(up.prototype=Object.create(Ks.prototype)).constructor=up,up.prototype.isMeshLambertMaterial=!0,up.prototype.copy=function(a){return Ks.prototype.copy.call(this,a),this.color.copy(a.color),this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.specularMap=a.specularMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.combine=a.combine,this.reflectivity=a.reflectivity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.morphNormals=a.morphNormals,this},(dc.prototype=Object.create(Ks.prototype)).constructor=dc,dc.prototype.isLineDashedMaterial=!0,dc.prototype.copy=function(a){return Ks.prototype.copy.call(this,a),this.color.copy(a.color),this.linewidth=a.linewidth,this.scale=a.scale,this.dashSize=a.dashSize,this.gapSize=a.gapSize,this};var Rv=Object.freeze({ShadowMaterial:$h,SpriteMaterial:Fu,RawShaderMaterial:Ua,ShaderMaterial:Qc,PointsMaterial:Rc,MultiMaterial:gu,MeshPhysicalMaterial:Vu,MeshStandardMaterial:zu,MeshPhongMaterial:Il,MeshToonMaterial:Ra,MeshNormalMaterial:Jl,MeshLambertMaterial:up,MeshDepthMaterial:mi,MeshBasicMaterial:Ba,LineDashedMaterial:dc,LineBasicMaterial:ol,Material:Ks}),mu={enabled:!1,files:{},add:function(a,d){!1!==this.enabled&&(this.files[a]=d)},get:function(a){if(!1!==this.enabled)return this.files[a]},remove:function(a){delete this.files[a]},clear:function(){this.files={}}};function Sl(a,d,g){var y=this,A=!1,M=0,R=0;this.onStart=void 0,this.onLoad=a,this.onProgress=d,this.onError=g,this.itemStart=function(N){R++,!1===A&&void 0!==y.onStart&&y.onStart(N,M,R),A=!0},this.itemEnd=function(N){M++,void 0!==y.onProgress&&y.onProgress(N,M,R),M===R&&(A=!1,void 0!==y.onLoad&&y.onLoad())},this.itemError=function(N){void 0!==y.onError&&y.onError(N)}}var hc=new Sl;function So(a){this.manager=void 0!==a?a:hc}function Om(a){this.manager=void 0!==a?a:hc,this._parser=null}Object.assign(So.prototype,{load:function(a,d,g,y){void 0===a&&(a=""),void 0!==this.path&&(a=this.path+a);var A=this,M=mu.get(a);if(void 0!==M)return A.manager.itemStart(a),setTimeout(function(){d&&d(M),A.manager.itemEnd(a)},0),M;var N=a.match(/^data:(.*?)(;base64)?,(.*)$/);if(N){var ie=N[1],ee=!!N[2],fe=N[3];fe=window.decodeURIComponent(fe),ee&&(fe=window.atob(fe));try{var me,Le=(this.responseType||"").toLowerCase();switch(Le){case"arraybuffer":case"blob":me=new ArrayBuffer(fe.length);for(var ke=new Uint8Array(me),Fe=0;Fe<fe.length;Fe++)ke[Fe]=fe.charCodeAt(Fe);"blob"===Le&&(me=new Blob([me],{type:ie}));break;case"document":var nt=new DOMParser;me=nt.parseFromString(fe,ie);break;case"json":me=JSON.parse(fe);break;default:me=fe}window.setTimeout(function(){d&&d(me),A.manager.itemEnd(a)},0)}catch(Ke){window.setTimeout(function(){y&&y(Ke),A.manager.itemError(a)},0)}}else{var tt=new XMLHttpRequest;tt.open("GET",a,!0),tt.addEventListener("load",function(Ke){var pt=Ke.target.response;mu.add(a,pt),200===this.status?(d&&d(pt),A.manager.itemEnd(a)):0===this.status?(console.warn("THREE.FileLoader: HTTP Status 0 received."),d&&d(pt),A.manager.itemEnd(a)):(y&&y(Ke),A.manager.itemError(a))},!1),void 0!==g&&tt.addEventListener("progress",function(Ke){g(Ke)},!1),tt.addEventListener("error",function(Ke){y&&y(Ke),A.manager.itemError(a)},!1),void 0!==this.responseType&&(tt.responseType=this.responseType),void 0!==this.withCredentials&&(tt.withCredentials=this.withCredentials),tt.overrideMimeType&&tt.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),tt.send(null)}return A.manager.itemStart(a),tt},setPath:function(a){return this.path=a,this},setResponseType:function(a){return this.responseType=a,this},setWithCredentials:function(a){return this.withCredentials=a,this},setMimeType:function(a){return this.mimeType=a,this}}),Object.assign(Om.prototype,{load:function(a,d,g,y){var A=this,M=[],R=new kc;R.image=M;var N=new So(this.manager);function ie(Le){N.load(a[Le],function(ke){var Fe=A._parser(ke,!0);M[Le]={width:Fe.width,height:Fe.height,format:Fe.format,mipmaps:Fe.mipmaps},6===(ee+=1)&&(1===Fe.mipmapCount&&(R.minFilter=Ia),R.format=Fe.format,R.needsUpdate=!0,d&&d(R))},g,y)}if(N.setPath(this.path),N.setResponseType("arraybuffer"),Array.isArray(a))for(var ee=0,fe=0,me=a.length;fe<me;++fe)ie(fe);else N.load(a,function(Le){var ke=A._parser(Le,!0);if(ke.isCubemap)for(var Fe=ke.mipmaps.length/ke.mipmapCount,nt=0;nt<Fe;nt++){M[nt]={mipmaps:[]};for(var tt=0;tt<ke.mipmapCount;tt++)M[nt].mipmaps.push(ke.mipmaps[nt*ke.mipmapCount+tt]),M[nt].format=ke.format,M[nt].width=ke.width,M[nt].height=ke.height}else R.image.width=ke.width,R.image.height=ke.height,R.mipmaps=ke.mipmaps;1===ke.mipmapCount&&(R.minFilter=Ia),R.format=ke.format,R.needsUpdate=!0,d&&d(R)},g,y);return R},setPath:function(a){return this.path=a,this}});var ec=Bl;function Bl(a){this.manager=void 0!==a?a:hc,this._parser=null}function Xg(a){this.manager=void 0!==a?a:hc}function Fm(a){this.manager=void 0!==a?a:hc}function Ud(a){this.manager=void 0!==a?a:hc}function Js(a,d){br.call(this),this.type="Light",this.color=new Wr(a),this.intensity=void 0!==d?d:1,this.receiveShadow=void 0}function fc(a,d,g){Js.call(this,a,g),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(br.DefaultUp),this.updateMatrix(),this.groundColor=new Wr(d)}function fd(a){this.camera=a,this.bias=0,this.radius=1,this.mapSize=new Xi(512,512),this.map=null,this.matrix=new gs}function dp(){fd.call(this,new wl(50,1,.5,500))}function Hd(a,d,g,y,A,M){Js.call(this,a,d),this.type="SpotLight",this.position.copy(br.DefaultUp),this.updateMatrix(),this.target=new br,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(R){this.intensity=R/Math.PI}}),this.distance=void 0!==g?g:0,this.angle=void 0!==y?y:Math.PI/3,this.penumbra=void 0!==A?A:0,this.decay=void 0!==M?M:1,this.shadow=new dp}function vu(a,d,g,y){Js.call(this,a,d),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(A){this.intensity=A/(4*Math.PI)}}),this.distance=void 0!==g?g:0,this.decay=void 0!==y?y:1,this.shadow=new fd(new wl(90,1,.5,500))}function Ef(a){fd.call(this,new Bh(-5,5,5,-5,.5,500))}function Tf(a,d){Js.call(this,a,d),this.type="DirectionalLight",this.position.copy(br.DefaultUp),this.updateMatrix(),this.target=new br,this.shadow=new Ef}function Yg(a,d){Js.call(this,a,d),this.type="AmbientLight",this.castShadow=void 0}Object.assign(Bl.prototype,{load:function(a,d,g,y){var A=this,M=new es,R=new So(this.manager);return R.setResponseType("arraybuffer"),R.load(a,function(N){var ie=A._parser(N);!ie||(void 0!==ie.image?M.image=ie.image:void 0!==ie.data&&(M.image.width=ie.width,M.image.height=ie.height,M.image.data=ie.data),M.wrapS=void 0!==ie.wrapS?ie.wrapS:lc,M.wrapT=void 0!==ie.wrapT?ie.wrapT:lc,M.magFilter=void 0!==ie.magFilter?ie.magFilter:Ia,M.minFilter=void 0!==ie.minFilter?ie.minFilter:Pu,M.anisotropy=void 0!==ie.anisotropy?ie.anisotropy:1,void 0!==ie.format&&(M.format=ie.format),void 0!==ie.type&&(M.type=ie.type),void 0!==ie.mipmaps&&(M.mipmaps=ie.mipmaps),1===ie.mipmapCount&&(M.minFilter=Ia),M.needsUpdate=!0,d&&d(M,ie))},g,y),M}}),Object.assign(Xg.prototype,{load:function(a,d,g,y){var A=this,M=document.createElementNS("http://www.w3.org/1999/xhtml","img");if(M.onload=function(){M.onload=null,URL.revokeObjectURL(M.src),d&&d(M),A.manager.itemEnd(a)},M.onerror=y,0===a.indexOf("data:"))M.src=a;else if(void 0!==this.crossOrigin)M.crossOrigin=this.crossOrigin,M.src=a;else{var R=new So;R.setPath(this.path),R.setResponseType("blob"),R.setWithCredentials(this.withCredentials),R.load(a,function(N){M.src=URL.createObjectURL(N)},g,y)}return A.manager.itemStart(a),M},setCrossOrigin:function(a){return this.crossOrigin=a,this},setWithCredentials:function(a){return this.withCredentials=a,this},setPath:function(a){return this.path=a,this}}),Object.assign(Fm.prototype,{load:function(a,d,g,y){var A=new Rh,M=new Xg(this.manager);M.setCrossOrigin(this.crossOrigin),M.setPath(this.path);var R=0;function N(ee){M.load(a[ee],function(fe){A.images[ee]=fe,6==++R&&(A.needsUpdate=!0,d&&d(A))},void 0,y)}for(var ie=0;ie<a.length;++ie)N(ie);return A},setCrossOrigin:function(a){return this.crossOrigin=a,this},setPath:function(a){return this.path=a,this}}),Object.assign(Ud.prototype,{load:function(a,d,g,y){var A=new jo,M=new Xg(this.manager);return M.setCrossOrigin(this.crossOrigin),M.setWithCredentials(this.withCredentials),M.setPath(this.path),M.load(a,function(R){var N=a.search(/\.(jpg|jpeg)$/)>0||0===a.search(/^data\:image\/jpeg/);A.format=N?Ac:tl,A.image=R,A.needsUpdate=!0,void 0!==d&&d(A)},g,y),A},setCrossOrigin:function(a){return this.crossOrigin=a,this},setWithCredentials:function(a){return this.withCredentials=a,this},setPath:function(a){return this.path=a,this}}),Js.prototype=Object.assign(Object.create(br.prototype),{constructor:Js,isLight:!0,copy:function(a){return br.prototype.copy.call(this,a),this.color.copy(a.color),this.intensity=a.intensity,this},toJSON:function(a){var d=br.prototype.toJSON.call(this,a);return d.object.color=this.color.getHex(),d.object.intensity=this.intensity,void 0!==this.groundColor&&(d.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(d.object.distance=this.distance),void 0!==this.angle&&(d.object.angle=this.angle),void 0!==this.decay&&(d.object.decay=this.decay),void 0!==this.penumbra&&(d.object.penumbra=this.penumbra),void 0!==this.shadow&&(d.object.shadow=this.shadow.toJSON()),d}}),fc.prototype=Object.assign(Object.create(Js.prototype),{constructor:fc,isHemisphereLight:!0,copy:function(a){return Js.prototype.copy.call(this,a),this.groundColor.copy(a.groundColor),this}}),Object.assign(fd.prototype,{copy:function(a){return this.camera=a.camera.clone(),this.bias=a.bias,this.radius=a.radius,this.mapSize.copy(a.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var a={};return 0!==this.bias&&(a.bias=this.bias),1!==this.radius&&(a.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(a.mapSize=this.mapSize.toArray()),a.camera=this.camera.toJSON(!1).object,delete a.camera.matrix,a}}),dp.prototype=Object.assign(Object.create(fd.prototype),{constructor:dp,isSpotLightShadow:!0,update:function(a){var d=2*xs.RAD2DEG*a.angle,g=this.mapSize.width/this.mapSize.height,y=a.distance||500,A=this.camera;(d!==A.fov||g!==A.aspect||y!==A.far)&&(A.fov=d,A.aspect=g,A.far=y,A.updateProjectionMatrix())}}),Hd.prototype=Object.assign(Object.create(Js.prototype),{constructor:Hd,isSpotLight:!0,copy:function(a){return Js.prototype.copy.call(this,a),this.distance=a.distance,this.angle=a.angle,this.penumbra=a.penumbra,this.decay=a.decay,this.target=a.target.clone(),this.shadow=a.shadow.clone(),this}}),vu.prototype=Object.assign(Object.create(Js.prototype),{constructor:vu,isPointLight:!0,copy:function(a){return Js.prototype.copy.call(this,a),this.distance=a.distance,this.decay=a.decay,this.shadow=a.shadow.clone(),this}}),Ef.prototype=Object.assign(Object.create(fd.prototype),{constructor:Ef}),Tf.prototype=Object.assign(Object.create(Js.prototype),{constructor:Tf,isDirectionalLight:!0,copy:function(a){return Js.prototype.copy.call(this,a),this.target=a.target.clone(),this.shadow=a.shadow.clone(),this}}),Yg.prototype=Object.assign(Object.create(Js.prototype),{constructor:Yg,isAmbientLight:!0});var hh,pc={arraySlice:function(a,d,g){return pc.isTypedArray(a)?new a.constructor(a.subarray(d,g)):a.slice(d,g)},convertArray:function(a,d,g){return!a||!g&&a.constructor===d?a:"number"==typeof d.BYTES_PER_ELEMENT?new d(a):Array.prototype.slice.call(a)},isTypedArray:function(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)},getKeyframeOrder:function(a){for(var g=a.length,y=new Array(g),A=0;A!==g;++A)y[A]=A;return y.sort(function d(M,R){return a[M]-a[R]}),y},sortedArray:function(a,d,g){for(var y=a.length,A=new a.constructor(y),M=0,R=0;R!==y;++M)for(var N=g[M]*d,ie=0;ie!==d;++ie)A[R++]=a[N+ie];return A},flattenJSON:function(a,d,g,y){for(var A=1,M=a[0];void 0!==M&&void 0===M[y];)M=a[A++];if(void 0!==M){var R=M[y];if(void 0!==R)if(Array.isArray(R))do{void 0!==(R=M[y])&&(d.push(M.time),g.push.apply(g,R)),M=a[A++]}while(void 0!==M);else if(void 0!==R.toArray)do{void 0!==(R=M[y])&&(d.push(M.time),R.toArray(g,g.length)),M=a[A++]}while(void 0!==M);else do{void 0!==(R=M[y])&&(d.push(M.time),g.push(R)),M=a[A++]}while(void 0!==M)}}};function El(a,d,g,y){this.parameterPositions=a,this._cachedIndex=0,this.resultBuffer=void 0!==y?y:new d.constructor(g),this.sampleValues=d,this.valueSize=g}function Gd(a,d,g,y){El.call(this,a,d,g,y),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function qh(a,d,g,y){El.call(this,a,d,g,y)}function Uu(a,d,g,y){El.call(this,a,d,g,y)}function jn(a,d,g,y){if(void 0===a)throw new Error("track name is undefined");if(void 0===d||0===d.length)throw new Error("no keyframes in track named "+a);this.name=a,this.times=pc.convertArray(d,this.TimeBufferType),this.values=pc.convertArray(g,this.ValueBufferType),this.setInterpolation(y||this.DefaultInterpolation),this.validate(),this.optimize()}function Mf(a,d,g,y){jn.call(this,a,d,g,y)}function ha(a,d,g,y){El.call(this,a,d,g,y)}function Xh(a,d,g,y){jn.call(this,a,d,g,y)}function yu(a,d,g,y){jn.call(this,a,d,g,y)}function Nm(a,d,g,y){jn.call(this,a,d,g,y)}function Kg(a,d,g){jn.call(this,a,d,g)}function hp(a,d,g,y){jn.call(this,a,d,g,y)}function Hu(a,d,g,y){jn.apply(this,arguments)}function Tl(a,d,g){this.name=a,this.tracks=g,this.duration=void 0!==d?d:-1,this.uuid=xs.generateUUID(),this.duration<0&&this.resetDuration(),this.optimize()}function Zg(a){this.manager=void 0!==a?a:hc,this.textures={}}function pd(a){this.manager=void 0!==a?a:hc}function tu(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}}function Qg(a){"boolean"==typeof a&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),a=void 0),this.manager=void 0!==a?a:hc,this.withCredentials=!1}function fp(a){this.manager=void 0!==a?a:hc,this.texturePath=""}function zl(){}function gd(a,d){this.v1=a,this.v2=d}function Jg(){this.curves=[],this.autoClose=!1}function fh(a,d,g,y,A,M,R,N){this.aX=a,this.aY=d,this.xRadius=g,this.yRadius=y,this.aStartAngle=A,this.aEndAngle=M,this.aClockwise=R,this.aRotation=N||0}El.prototype={constructor:El,evaluate:function(a){var d=this.parameterPositions,g=this._cachedIndex,y=d[g],A=d[g-1];e:{t:{var M;n:{i:if(!(a<y)){for(var R=g+2;;){if(void 0===y){if(a<A)break i;return this._cachedIndex=g=d.length,this.afterEnd_(g-1,a,A)}if(g===R)break;if(A=y,a<(y=d[++g]))break t}M=d.length;break n}if(a>=A)break e;var N=d[1];for(a<N&&(g=2,A=N),R=g-2;;){if(void 0===A)return this._cachedIndex=0,this.beforeStart_(0,a,y);if(g===R)break;if(y=A,a>=(A=d[--g-1]))break t}M=g,g=0}for(;g<M;){var ie=g+M>>>1;a<d[ie]?M=ie:g=ie+1}if(y=d[g],void 0===(A=d[g-1]))return this._cachedIndex=0,this.beforeStart_(0,a,y);if(void 0===y)return this._cachedIndex=g=d.length,this.afterEnd_(g-1,A,a)}this._cachedIndex=g,this.intervalChanged_(g,A,y)}return this.interpolate_(g,A,a,y)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(a){for(var d=this.resultBuffer,g=this.sampleValues,y=this.valueSize,A=a*y,M=0;M!==y;++M)d[M]=g[A+M];return d},interpolate_:function(a,d,g,y){throw new Error("call to abstract method")},intervalChanged_:function(a,d,g){}},Object.assign(El.prototype,{beforeStart_:El.prototype.copySampleValue_,afterEnd_:El.prototype.copySampleValue_}),Gd.prototype=Object.assign(Object.create(El.prototype),{constructor:Gd,DefaultSettings_:{endingStart:cs,endingEnd:cs},intervalChanged_:function(a,d,g){var y=this.parameterPositions,A=a-2,M=a+1,R=y[A],N=y[M];if(void 0===R)switch(this.getSettings_().endingStart){case Sa:A=a,R=2*d-g;break;case us:R=d+y[A=y.length-2]-y[A+1];break;default:A=a,R=g}if(void 0===N)switch(this.getSettings_().endingEnd){case Sa:M=a,N=2*g-d;break;case us:M=1,N=g+y[1]-y[0];break;default:M=a-1,N=d}var ie=.5*(g-d),ee=this.valueSize;this._weightPrev=ie/(d-R),this._weightNext=ie/(N-g),this._offsetPrev=A*ee,this._offsetNext=M*ee},interpolate_:function(a,d,g,y){for(var A=this.resultBuffer,M=this.sampleValues,R=this.valueSize,N=a*R,ie=N-R,ee=this._offsetPrev,fe=this._offsetNext,me=this._weightPrev,Le=this._weightNext,ke=(g-d)/(y-d),Fe=ke*ke,nt=Fe*ke,tt=-me*nt+2*me*Fe-me*ke,Ke=(1+me)*nt+(-1.5-2*me)*Fe+(-.5+me)*ke+1,pt=(-1-Le)*nt+(1.5+Le)*Fe+.5*ke,vt=Le*nt-Le*Fe,qt=0;qt!==R;++qt)A[qt]=tt*M[ee+qt]+Ke*M[ie+qt]+pt*M[N+qt]+vt*M[fe+qt];return A}}),qh.prototype=Object.assign(Object.create(El.prototype),{constructor:qh,interpolate_:function(a,d,g,y){for(var A=this.resultBuffer,M=this.sampleValues,R=this.valueSize,N=a*R,ie=N-R,ee=(g-d)/(y-d),fe=1-ee,me=0;me!==R;++me)A[me]=M[ie+me]*fe+M[N+me]*ee;return A}}),Uu.prototype=Object.assign(Object.create(El.prototype),{constructor:Uu,interpolate_:function(a,d,g,y){return this.copySampleValue_(a-1)}}),hh={TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:xo,InterpolantFactoryMethodDiscrete:function(a){return new Uu(this.times,this.values,this.getValueSize(),a)},InterpolantFactoryMethodLinear:function(a){return new qh(this.times,this.values,this.getValueSize(),a)},InterpolantFactoryMethodSmooth:function(a){return new Gd(this.times,this.values,this.getValueSize(),a)},setInterpolation:function(a){var d;switch(a){case Gs:d=this.InterpolantFactoryMethodDiscrete;break;case xo:d=this.InterpolantFactoryMethodLinear;break;case wo:d=this.InterpolantFactoryMethodSmooth}if(void 0!==d)this.createInterpolant=d;else{var g="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(a===this.DefaultInterpolation)throw new Error(g);this.setInterpolation(this.DefaultInterpolation)}console.warn(g)}},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Gs;case this.InterpolantFactoryMethodLinear:return xo;case this.InterpolantFactoryMethodSmooth:return wo}},getValueSize:function(){return this.values.length/this.times.length},shift:function(a){if(0!==a)for(var d=this.times,g=0,y=d.length;g!==y;++g)d[g]+=a;return this},scale:function(a){if(1!==a)for(var d=this.times,g=0,y=d.length;g!==y;++g)d[g]*=a;return this},trim:function(a,d){for(var g=this.times,y=g.length,A=0,M=y-1;A!==y&&g[A]<a;)++A;for(;-1!==M&&g[M]>d;)--M;if(++M,0!==A||M!==y){A>=M&&(A=(M=Math.max(M,1))-1);var R=this.getValueSize();this.times=pc.arraySlice(g,A,M),this.values=pc.arraySlice(this.values,A*R,M*R)}return this},validate:function(){var a=!0,d=this.getValueSize();d-Math.floor(d)!=0&&(console.error("invalid value size in track",this),a=!1);var g=this.times,y=this.values,A=g.length;0===A&&(console.error("track is empty",this),a=!1);for(var M=null,R=0;R!==A;R++){var N=g[R];if("number"==typeof N&&isNaN(N)){console.error("time is not a valid number",this,R,N),a=!1;break}if(null!==M&&M>N){console.error("out of order keys",this,R,N,M),a=!1;break}M=N}if(void 0!==y&&pc.isTypedArray(y)){R=0;for(var ie=y.length;R!==ie;++R){var ee=y[R];if(isNaN(ee)){console.error("value is not a valid number",this,R,ee),a=!1;break}}}return a},optimize:function(){for(var a=this.times,d=this.values,g=this.getValueSize(),y=this.getInterpolation()===wo,A=1,M=a.length-1,R=1;R<M;++R){var N=!1,ie=a[R];if(ie!==a[R+1]&&(1!==R||ie!==ie[0]))if(y)N=!0;else for(var fe=R*g,me=fe-g,Le=fe+g,ke=0;ke!==g;++ke){var Fe=d[fe+ke];if(Fe!==d[me+ke]||Fe!==d[Le+ke]){N=!0;break}}if(N){if(R!==A){a[A]=a[R];var nt=R*g,tt=A*g;for(ke=0;ke!==g;++ke)d[tt+ke]=d[nt+ke]}++A}}if(M>0){for(a[A]=a[M],nt=M*g,tt=A*g,ke=0;ke!==g;++ke)d[tt+ke]=d[nt+ke];++A}return A!==a.length&&(this.times=pc.arraySlice(a,0,A),this.values=pc.arraySlice(d,0,A*g)),this}},Mf.prototype=Object.assign(Object.create(hh),{constructor:Mf,ValueTypeName:"vector"}),ha.prototype=Object.assign(Object.create(El.prototype),{constructor:ha,interpolate_:function(a,d,g,y){for(var A=this.resultBuffer,M=this.sampleValues,R=this.valueSize,N=a*R,ie=(g-d)/(y-d),ee=N+R;N!==ee;N+=4)Rl.slerpFlat(A,0,M,N-R,M,N,ie);return A}}),Xh.prototype=Object.assign(Object.create(hh),{constructor:Xh,ValueTypeName:"quaternion",DefaultInterpolation:xo,InterpolantFactoryMethodLinear:function(a){return new ha(this.times,this.values,this.getValueSize(),a)},InterpolantFactoryMethodSmooth:void 0}),yu.prototype=Object.assign(Object.create(hh),{constructor:yu,ValueTypeName:"number"}),Nm.prototype=Object.assign(Object.create(hh),{constructor:Nm,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:Gs,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Kg.prototype=Object.assign(Object.create(hh),{constructor:Kg,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:Gs,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),hp.prototype=Object.assign(Object.create(hh),{constructor:hp,ValueTypeName:"color"}),Hu.prototype=hh,hh.constructor=Hu,Object.assign(Hu,{parse:function(a){if(void 0===a.type)throw new Error("track type undefined, can not parse");var d=Hu._getTrackTypeForValueTypeName(a.type);if(void 0===a.times){var g=[],y=[];pc.flattenJSON(a.keys,g,y,"value"),a.times=g,a.values=y}return void 0!==d.parse?d.parse(a):new d(a.name,a.times,a.values,a.interpolation)},toJSON:function(a){var g,d=a.constructor;if(void 0!==d.toJSON)g=d.toJSON(a);else{g={name:a.name,times:pc.convertArray(a.times,Array),values:pc.convertArray(a.values,Array)};var y=a.getInterpolation();y!==a.DefaultInterpolation&&(g.interpolation=y)}return g.type=a.ValueTypeName,g},_getTrackTypeForValueTypeName:function(a){switch(a.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return yu;case"vector":case"vector2":case"vector3":case"vector4":return Mf;case"color":return hp;case"quaternion":return Xh;case"bool":case"boolean":return Kg;case"string":return Nm}throw new Error("Unsupported typeName: "+a)}}),Tl.prototype={constructor:Tl,resetDuration:function(){for(var d=0,g=0,y=this.tracks.length;g!==y;++g){var A=this.tracks[g];d=Math.max(d,A.times[A.times.length-1])}this.duration=d},trim:function(){for(var a=0;a<this.tracks.length;a++)this.tracks[a].trim(0,this.duration);return this},optimize:function(){for(var a=0;a<this.tracks.length;a++)this.tracks[a].optimize();return this}},Object.assign(Tl,{parse:function(a){for(var d=[],g=a.tracks,y=1/(a.fps||1),A=0,M=g.length;A!==M;++A)d.push(Hu.parse(g[A]).scale(y));return new Tl(a.name,a.duration,d)},toJSON:function(a){for(var d=[],g=a.tracks,y={name:a.name,duration:a.duration,tracks:d},A=0,M=g.length;A!==M;++A)d.push(Hu.toJSON(g[A]));return y},CreateFromMorphTargetSequence:function(a,d,g,y){for(var A=d.length,M=[],R=0;R<A;R++){var N=[],ie=[];N.push((R+A-1)%A,R,(R+1)%A),ie.push(0,1,0);var ee=pc.getKeyframeOrder(N);N=pc.sortedArray(N,1,ee),ie=pc.sortedArray(ie,1,ee),!y&&0===N[0]&&(N.push(A),ie.push(ie[0])),M.push(new yu(".morphTargetInfluences["+d[R].name+"]",N,ie).scale(1/g))}return new Tl(a,-1,M)},findByName:function(a,d){var g=a;Array.isArray(a)||(g=a.geometry&&a.geometry.animations||a.animations);for(var A=0;A<g.length;A++)if(g[A].name===d)return g[A];return null},CreateClipsFromMorphTargetSequences:function(a,d,g){for(var y={},A=/^([\w-]*?)([\d]+)$/,M=0,R=a.length;M<R;M++){var N=a[M],ie=N.name.match(A);if(ie&&ie.length>1){var fe=y[ee=ie[1]];fe||(y[ee]=fe=[]),fe.push(N)}}var me=[];for(var ee in y)me.push(Tl.CreateFromMorphTargetSequence(ee,y[ee],d,g));return me},parseAnimation:function(a,d){if(!a)return console.error("  no animation in JSONLoader data"),null;for(var g=function(vt,qt,Bt,cn,sn){if(0!==Bt.length){var en=[],dn=[];pc.flattenJSON(Bt,en,dn,cn),0!==en.length&&sn.push(new vt(qt,en,dn))}},y=[],A=a.name||"default",M=a.length||-1,R=a.fps||30,N=a.hierarchy||[],ie=0;ie<N.length;ie++){var ee=N[ie].keys;if(ee&&0!==ee.length)if(ee[0].morphTargets){for(var fe={},me=0;me<ee.length;me++)if(ee[me].morphTargets)for(var Le=0;Le<ee[me].morphTargets.length;Le++)fe[ee[me].morphTargets[Le]]=-1;for(var ke in fe){var Fe=[],nt=[];for(Le=0;Le!==ee[me].morphTargets.length;++Le){var tt=ee[me];Fe.push(tt.time),nt.push(tt.morphTarget===ke?1:0)}y.push(new yu(".morphTargetInfluence["+ke+"]",Fe,nt))}M=fe.length*(R||1)}else{var Ke=".bones["+d[ie].name+"]";g(Mf,Ke+".position",ee,"pos",y),g(Xh,Ke+".quaternion",ee,"rot",y),g(Mf,Ke+".scale",ee,"scl",y)}}return 0===y.length?null:new Tl(A,M,y)}}),Object.assign(Zg.prototype,{load:function(a,d,g,y){var A=this;new So(A.manager).load(a,function(R){d(A.parse(JSON.parse(R)))},g,y)},setTextures:function(a){this.textures=a},parse:function(a){var d=this.textures;function g(N){return void 0===d[N]&&console.warn("THREE.MaterialLoader: Undefined texture",N),d[N]}var y=new Rv[a.type];if(void 0!==a.uuid&&(y.uuid=a.uuid),void 0!==a.name&&(y.name=a.name),void 0!==a.color&&y.color.setHex(a.color),void 0!==a.roughness&&(y.roughness=a.roughness),void 0!==a.metalness&&(y.metalness=a.metalness),void 0!==a.emissive&&y.emissive.setHex(a.emissive),void 0!==a.specular&&y.specular.setHex(a.specular),void 0!==a.shininess&&(y.shininess=a.shininess),void 0!==a.clearCoat&&(y.clearCoat=a.clearCoat),void 0!==a.clearCoatRoughness&&(y.clearCoatRoughness=a.clearCoatRoughness),void 0!==a.uniforms&&(y.uniforms=a.uniforms),void 0!==a.vertexShader&&(y.vertexShader=a.vertexShader),void 0!==a.fragmentShader&&(y.fragmentShader=a.fragmentShader),void 0!==a.vertexColors&&(y.vertexColors=a.vertexColors),void 0!==a.fog&&(y.fog=a.fog),void 0!==a.shading&&(y.shading=a.shading),void 0!==a.blending&&(y.blending=a.blending),void 0!==a.side&&(y.side=a.side),void 0!==a.opacity&&(y.opacity=a.opacity),void 0!==a.transparent&&(y.transparent=a.transparent),void 0!==a.alphaTest&&(y.alphaTest=a.alphaTest),void 0!==a.depthTest&&(y.depthTest=a.depthTest),void 0!==a.depthWrite&&(y.depthWrite=a.depthWrite),void 0!==a.colorWrite&&(y.colorWrite=a.colorWrite),void 0!==a.wireframe&&(y.wireframe=a.wireframe),void 0!==a.wireframeLinewidth&&(y.wireframeLinewidth=a.wireframeLinewidth),void 0!==a.wireframeLinecap&&(y.wireframeLinecap=a.wireframeLinecap),void 0!==a.wireframeLinejoin&&(y.wireframeLinejoin=a.wireframeLinejoin),void 0!==a.skinning&&(y.skinning=a.skinning),void 0!==a.morphTargets&&(y.morphTargets=a.morphTargets),void 0!==a.size&&(y.size=a.size),void 0!==a.sizeAttenuation&&(y.sizeAttenuation=a.sizeAttenuation),void 0!==a.map&&(y.map=g(a.map)),void 0!==a.alphaMap&&(y.alphaMap=g(a.alphaMap),y.transparent=!0),void 0!==a.bumpMap&&(y.bumpMap=g(a.bumpMap)),void 0!==a.bumpScale&&(y.bumpScale=a.bumpScale),void 0!==a.normalMap&&(y.normalMap=g(a.normalMap)),void 0!==a.normalScale){var A=a.normalScale;!1===Array.isArray(A)&&(A=[A,A]),y.normalScale=(new Xi).fromArray(A)}if(void 0!==a.displacementMap&&(y.displacementMap=g(a.displacementMap)),void 0!==a.displacementScale&&(y.displacementScale=a.displacementScale),void 0!==a.displacementBias&&(y.displacementBias=a.displacementBias),void 0!==a.roughnessMap&&(y.roughnessMap=g(a.roughnessMap)),void 0!==a.metalnessMap&&(y.metalnessMap=g(a.metalnessMap)),void 0!==a.emissiveMap&&(y.emissiveMap=g(a.emissiveMap)),void 0!==a.emissiveIntensity&&(y.emissiveIntensity=a.emissiveIntensity),void 0!==a.specularMap&&(y.specularMap=g(a.specularMap)),void 0!==a.envMap&&(y.envMap=g(a.envMap)),void 0!==a.reflectivity&&(y.reflectivity=a.reflectivity),void 0!==a.lightMap&&(y.lightMap=g(a.lightMap)),void 0!==a.lightMapIntensity&&(y.lightMapIntensity=a.lightMapIntensity),void 0!==a.aoMap&&(y.aoMap=g(a.aoMap)),void 0!==a.aoMapIntensity&&(y.aoMapIntensity=a.aoMapIntensity),void 0!==a.gradientMap&&(y.gradientMap=g(a.gradientMap)),void 0!==a.materials)for(var M=0,R=a.materials.length;M<R;M++)y.materials.push(this.parse(a.materials[M]));return y}}),Object.assign(pd.prototype,{load:function(a,d,g,y){var A=this;new So(A.manager).load(a,function(R){d(A.parse(JSON.parse(R)))},g,y)},parse:function(a){var d=new Mr,g=a.data.index,y={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};if(void 0!==g){var A=new y[g.type](g.array);d.setIndex(new dr(A,1))}var M=a.data.attributes;for(var R in M){var N=M[R];A=new y[N.type](N.array),d.addAttribute(R,new dr(A,N.itemSize,N.normalized))}var ie=a.data.groups||a.data.drawcalls||a.data.offsets;if(void 0!==ie)for(var ee=0,fe=ie.length;ee!==fe;++ee){var me=ie[ee];d.addGroup(me.start,me.count,me.materialIndex)}var Le=a.data.boundingSphere;if(void 0!==Le){var ke=new Qt;void 0!==Le.center&&ke.fromArray(Le.center),d.boundingSphere=new wt(ke,Le.radius)}return d}}),tu.prototype={constructor:tu,crossOrigin:void 0,extractUrlBase:function(a){var d=a.split("/");return 1===d.length?"./":(d.pop(),d.join("/")+"/")},initMaterials:function(a,d,g){for(var y=[],A=0;A<a.length;++A)y[A]=this.createMaterial(a[A],d,g);return y},createMaterial:function(){var a,d,g;return function(A,M,R){void 0===a&&(a=new Wr),void 0===d&&(d=new Ud),void 0===g&&(g=new Zg);var N={};function ie(Le,ke,Fe,nt,tt){var vt,Ke=M+Le,pt=tu.Handlers.get(Ke);null!==pt?vt=pt.load(Ke):(d.setCrossOrigin(R),vt=d.load(Ke)),void 0!==ke&&(vt.repeat.fromArray(ke),1!==ke[0]&&(vt.wrapS=td),1!==ke[1]&&(vt.wrapT=td)),void 0!==Fe&&vt.offset.fromArray(Fe),void 0!==nt&&("repeat"===nt[0]&&(vt.wrapS=td),"mirror"===nt[0]&&(vt.wrapS=Id),"repeat"===nt[1]&&(vt.wrapT=td),"mirror"===nt[1]&&(vt.wrapT=Id)),void 0!==tt&&(vt.anisotropy=tt);var qt=xs.generateUUID();return N[qt]=vt,qt}var ee={uuid:xs.generateUUID(),type:"MeshLambertMaterial"};for(var fe in A){var me=A[fe];switch(fe){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"DbgName":ee.name=me;break;case"blending":ee.blending=Pe[me];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",fe,"is no longer supported.");break;case"colorDiffuse":ee.color=a.fromArray(me).getHex();break;case"colorSpecular":ee.specular=a.fromArray(me).getHex();break;case"colorEmissive":ee.emissive=a.fromArray(me).getHex();break;case"specularCoef":ee.shininess=me;break;case"shading":"basic"===me.toLowerCase()&&(ee.type="MeshBasicMaterial"),"phong"===me.toLowerCase()&&(ee.type="MeshPhongMaterial"),"standard"===me.toLowerCase()&&(ee.type="MeshStandardMaterial");break;case"mapDiffuse":ee.map=ie(me,A.mapDiffuseRepeat,A.mapDiffuseOffset,A.mapDiffuseWrap,A.mapDiffuseAnisotropy);break;case"mapEmissive":ee.emissiveMap=ie(me,A.mapEmissiveRepeat,A.mapEmissiveOffset,A.mapEmissiveWrap,A.mapEmissiveAnisotropy);break;case"mapLight":ee.lightMap=ie(me,A.mapLightRepeat,A.mapLightOffset,A.mapLightWrap,A.mapLightAnisotropy);break;case"mapAO":ee.aoMap=ie(me,A.mapAORepeat,A.mapAOOffset,A.mapAOWrap,A.mapAOAnisotropy);break;case"mapBump":ee.bumpMap=ie(me,A.mapBumpRepeat,A.mapBumpOffset,A.mapBumpWrap,A.mapBumpAnisotropy);break;case"mapBumpScale":ee.bumpScale=me;break;case"mapNormal":ee.normalMap=ie(me,A.mapNormalRepeat,A.mapNormalOffset,A.mapNormalWrap,A.mapNormalAnisotropy);break;case"mapNormalFactor":ee.normalScale=[me,me];break;case"mapSpecular":ee.specularMap=ie(me,A.mapSpecularRepeat,A.mapSpecularOffset,A.mapSpecularWrap,A.mapSpecularAnisotropy);break;case"mapMetalness":ee.metalnessMap=ie(me,A.mapMetalnessRepeat,A.mapMetalnessOffset,A.mapMetalnessWrap,A.mapMetalnessAnisotropy);break;case"mapRoughness":ee.roughnessMap=ie(me,A.mapRoughnessRepeat,A.mapRoughnessOffset,A.mapRoughnessWrap,A.mapRoughnessAnisotropy);break;case"mapAlpha":ee.alphaMap=ie(me,A.mapAlphaRepeat,A.mapAlphaOffset,A.mapAlphaWrap,A.mapAlphaAnisotropy);break;case"flipSided":ee.side=U;break;case"doubleSided":ee.side=ae;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),ee.opacity=me;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":ee[fe]=me;break;case"vertexColors":!0===me&&(ee.vertexColors=z),"face"===me&&(ee.vertexColors=ue);break;default:console.error("THREE.Loader.createMaterial: Unsupported",fe,me)}}return"MeshBasicMaterial"===ee.type&&delete ee.emissive,"MeshPhongMaterial"!==ee.type&&delete ee.specular,ee.opacity<1&&(ee.transparent=!0),g.setTextures(N),g.parse(ee)}}()},tu.Handlers={handlers:[],add:function(a,d){this.handlers.push(a,d)},get:function(a){for(var d=this.handlers,g=0,y=d.length;g<y;g+=2){var M=d[g+1];if(d[g].test(a))return M}return null}},Object.assign(Qg.prototype,{load:function(a,d,g,y){var A=this,M=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:tu.prototype.extractUrlBase(a),R=new So(this.manager);R.setWithCredentials(this.withCredentials),R.load(a,function(N){var ie=JSON.parse(N),ee=ie.metadata;if(void 0!==ee){var fe=ee.type;if(void 0!==fe){if("object"===fe.toLowerCase())return void console.error("THREE.JSONLoader: "+a+" should be loaded with THREE.ObjectLoader instead.");if("scene"===fe.toLowerCase())return void console.error("THREE.JSONLoader: "+a+" should be loaded with THREE.SceneLoader instead.")}}var me=A.parse(ie,M);d(me.geometry,me.materials)},g,y)},setTexturePath:function(a){this.texturePath=a},parse:function(a,d){var g=new Ts,y=void 0!==a.scale?1/a.scale:1;if(function A(ee){function fe(m,_){return m&1<<_}var me,Le,ke,Fe,nt,tt,Ke,pt,vt,qt,Bt,cn,sn,en,dn,On,Ai,ui,Wt,$t,Wn,ei,Ii,_i,fi,Xn=a.faces,Hn=a.vertices,f=a.normals,c=a.colors,h=0;if(void 0!==a.uvs){for(me=0;me<a.uvs.length;me++)a.uvs[me].length&&h++;for(me=0;me<h;me++)g.faceVertexUvs[me]=[]}for(Fe=0,nt=Hn.length;Fe<nt;)(ui=new Qt).x=Hn[Fe++]*ee,ui.y=Hn[Fe++]*ee,ui.z=Hn[Fe++]*ee,g.vertices.push(ui);for(Fe=0,nt=Xn.length;Fe<nt;)if(Bt=fe(qt=Xn[Fe++],0),cn=fe(qt,1),sn=fe(qt,3),en=fe(qt,4),dn=fe(qt,5),On=fe(qt,6),Ai=fe(qt,7),Bt){if(($t=new Oo).a=Xn[Fe],$t.b=Xn[Fe+1],$t.c=Xn[Fe+3],(Wn=new Oo).a=Xn[Fe+1],Wn.b=Xn[Fe+2],Wn.c=Xn[Fe+3],Fe+=4,cn&&(vt=Xn[Fe++],$t.materialIndex=vt,Wn.materialIndex=vt),ke=g.faces.length,sn)for(me=0;me<h;me++)for(_i=a.uvs[me],g.faceVertexUvs[me][ke]=[],g.faceVertexUvs[me][ke+1]=[],Le=0;Le<4;Le++)fi=new Xi(_i[2*(pt=Xn[Fe++])],_i[2*pt+1]),2!==Le&&g.faceVertexUvs[me][ke].push(fi),0!==Le&&g.faceVertexUvs[me][ke+1].push(fi);if(en&&(Ke=3*Xn[Fe++],$t.normal.set(f[Ke++],f[Ke++],f[Ke]),Wn.normal.copy($t.normal)),dn)for(me=0;me<4;me++)Ke=3*Xn[Fe++],Ii=new Qt(f[Ke++],f[Ke++],f[Ke]),2!==me&&$t.vertexNormals.push(Ii),0!==me&&Wn.vertexNormals.push(Ii);if(On&&(tt=Xn[Fe++],$t.color.setHex(ei=c[tt]),Wn.color.setHex(ei)),Ai)for(me=0;me<4;me++)ei=c[tt=Xn[Fe++]],2!==me&&$t.vertexColors.push(new Wr(ei)),0!==me&&Wn.vertexColors.push(new Wr(ei));g.faces.push($t),g.faces.push(Wn)}else{if((Wt=new Oo).a=Xn[Fe++],Wt.b=Xn[Fe++],Wt.c=Xn[Fe++],cn&&(vt=Xn[Fe++],Wt.materialIndex=vt),ke=g.faces.length,sn)for(me=0;me<h;me++)for(_i=a.uvs[me],g.faceVertexUvs[me][ke]=[],Le=0;Le<3;Le++)fi=new Xi(_i[2*(pt=Xn[Fe++])],_i[2*pt+1]),g.faceVertexUvs[me][ke].push(fi);if(en&&(Ke=3*Xn[Fe++],Wt.normal.set(f[Ke++],f[Ke++],f[Ke])),dn)for(me=0;me<3;me++)Ke=3*Xn[Fe++],Ii=new Qt(f[Ke++],f[Ke++],f[Ke]),Wt.vertexNormals.push(Ii);if(On&&(tt=Xn[Fe++],Wt.color.setHex(c[tt])),Ai)for(me=0;me<3;me++)tt=Xn[Fe++],Wt.vertexColors.push(new Wr(c[tt]));g.faces.push(Wt)}}(y),function M(){var ee=void 0!==a.influencesPerVertex?a.influencesPerVertex:2;if(a.skinWeights)for(var fe=0,me=a.skinWeights.length;fe<me;fe+=ee)g.skinWeights.push(new $o(a.skinWeights[fe],ee>1?a.skinWeights[fe+1]:0,ee>2?a.skinWeights[fe+2]:0,ee>3?a.skinWeights[fe+3]:0));if(a.skinIndices)for(fe=0,me=a.skinIndices.length;fe<me;fe+=ee)g.skinIndices.push(new $o(a.skinIndices[fe],ee>1?a.skinIndices[fe+1]:0,ee>2?a.skinIndices[fe+2]:0,ee>3?a.skinIndices[fe+3]:0));g.bones=a.bones,g.bones&&g.bones.length>0&&(g.skinWeights.length!==g.skinIndices.length||g.skinIndices.length!==g.vertices.length)&&console.warn("When skinning, number of vertices ("+g.vertices.length+"), skinIndices ("+g.skinIndices.length+"), and skinWeights ("+g.skinWeights.length+") should match.")}(),function R(ee){if(void 0!==a.morphTargets)for(var fe=0,me=a.morphTargets.length;fe<me;fe++){g.morphTargets[fe]={},g.morphTargets[fe].name=a.morphTargets[fe].name,g.morphTargets[fe].vertices=[];for(var Le=g.morphTargets[fe].vertices,ke=a.morphTargets[fe].vertices,Fe=0,nt=ke.length;Fe<nt;Fe+=3){var tt=new Qt;tt.x=ke[Fe]*ee,tt.y=ke[Fe+1]*ee,tt.z=ke[Fe+2]*ee,Le.push(tt)}}if(void 0!==a.morphColors&&a.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');var Ke=g.faces,pt=a.morphColors[0].colors;for(fe=0,me=Ke.length;fe<me;fe++)Ke[fe].color.fromArray(pt,3*fe)}}(y),function N(){var ee=[],fe=[];void 0!==a.animation&&fe.push(a.animation),void 0!==a.animations&&(a.animations.length?fe=fe.concat(a.animations):fe.push(a.animations));for(var me=0;me<fe.length;me++){var Le=Tl.parseAnimation(fe[me],g.bones);Le&&ee.push(Le)}if(g.morphTargets){var ke=Tl.CreateClipsFromMorphTargetSequences(g.morphTargets,10);ee=ee.concat(ke)}ee.length>0&&(g.animations=ee)}(),g.computeFaceNormals(),g.computeBoundingSphere(),void 0===a.materials||0===a.materials.length)return{geometry:g};var ie=tu.prototype.initMaterials(a.materials,d,this.crossOrigin);return{geometry:g,materials:ie}}}),Object.assign(fp.prototype,{load:function(a,d,g,y){""===this.texturePath&&(this.texturePath=a.substring(0,a.lastIndexOf("/")+1));var A=this;new So(A.manager).load(a,function(R){var N=null;try{N=JSON.parse(R)}catch(ee){return void console.error("THREE:ObjectLoader: Can't parse "+a+".",ee.message)}var ie=N.metadata;void 0!==ie&&void 0!==ie.type&&"geometry"!==ie.type.toLowerCase()?A.parse(N,d):console.error("THREE.ObjectLoader: Can't load "+a+". Use THREE.JSONLoader instead.")},g,y)},setTexturePath:function(a){this.texturePath=a},setCrossOrigin:function(a){this.crossOrigin=a},parse:function(a,d){var g=this.parseGeometries(a.geometries),y=this.parseImages(a.images,function(){void 0!==d&&d(R)}),A=this.parseTextures(a.textures,y),M=this.parseMaterials(a.materials,A),R=this.parseObject(a.object,g,M);return a.animations&&(R.animations=this.parseAnimations(a.animations)),(void 0===a.images||0===a.images.length)&&void 0!==d&&d(R),R},parseGeometries:function(a){var d={};if(void 0!==a)for(var g=new Qg,y=new pd,A=0,M=a.length;A<M;A++){var R,N=a[A];switch(N.type){case"PlaneGeometry":case"PlaneBufferGeometry":R=new Bu[N.type](N.width,N.height,N.widthSegments,N.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":R=new Bu[N.type](N.width,N.height,N.depth,N.widthSegments,N.heightSegments,N.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":R=new Bu[N.type](N.radius,N.segments,N.thetaStart,N.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":R=new Bu[N.type](N.radiusTop,N.radiusBottom,N.height,N.radialSegments,N.heightSegments,N.openEnded,N.thetaStart,N.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":R=new Bu[N.type](N.radius,N.height,N.radialSegments,N.heightSegments,N.openEnded,N.thetaStart,N.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":R=new Bu[N.type](N.radius,N.widthSegments,N.heightSegments,N.phiStart,N.phiLength,N.thetaStart,N.thetaLength);break;case"DodecahedronGeometry":case"IcosahedronGeometry":case"OctahedronGeometry":case"TetrahedronGeometry":R=new Bu[N.type](N.radius,N.detail);break;case"RingGeometry":case"RingBufferGeometry":R=new Bu[N.type](N.innerRadius,N.outerRadius,N.thetaSegments,N.phiSegments,N.thetaStart,N.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":R=new Bu[N.type](N.radius,N.tube,N.radialSegments,N.tubularSegments,N.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":R=new Bu[N.type](N.radius,N.tube,N.tubularSegments,N.radialSegments,N.p,N.q);break;case"LatheGeometry":case"LatheBufferGeometry":R=new Bu[N.type](N.points,N.segments,N.phiStart,N.phiLength);break;case"BufferGeometry":R=y.parse(N);break;case"Geometry":R=g.parse(N.data,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+N.type+'"');continue}R.uuid=N.uuid,void 0!==N.name&&(R.name=N.name),d[N.uuid]=R}return d},parseMaterials:function(a,d){var g={};if(void 0!==a){var y=new Zg;y.setTextures(d);for(var A=0,M=a.length;A<M;A++){var R=y.parse(a[A]);g[R.uuid]=R}}return g},parseAnimations:function(a){for(var d=[],g=0;g<a.length;g++){var y=Tl.parse(a[g]);d.push(y)}return d},parseImages:function(a,d){var g=this,y={};function A(me){return g.manager.itemStart(me),R.load(me,function(){g.manager.itemEnd(me)},void 0,function(){g.manager.itemError(me)})}if(void 0!==a&&a.length>0){var R=new Xg(new Sl(d));R.setCrossOrigin(this.crossOrigin);for(var N=0,ie=a.length;N<ie;N++){var ee=a[N],fe=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(ee.url)?ee.url:g.texturePath+ee.url;y[ee.uuid]=A(fe)}}return y},parseTextures:function(a,d){function g(ie,ee){return"number"==typeof ie?ie:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",ie),ee[ie])}var y={};if(void 0!==a)for(var A=0,M=a.length;A<M;A++){var R=a[A];void 0===R.image&&console.warn('THREE.ObjectLoader: No "image" specified for',R.uuid),void 0===d[R.image]&&console.warn("THREE.ObjectLoader: Undefined image",R.image);var N=new jo(d[R.image]);N.needsUpdate=!0,N.uuid=R.uuid,void 0!==R.name&&(N.name=R.name),void 0!==R.mapping&&(N.mapping=g(R.mapping,Gf)),void 0!==R.offset&&N.offset.fromArray(R.offset),void 0!==R.repeat&&N.repeat.fromArray(R.repeat),void 0!==R.wrap&&(N.wrapS=g(R.wrap[0],Lu),N.wrapT=g(R.wrap[1],Lu)),void 0!==R.minFilter&&(N.minFilter=g(R.minFilter,th)),void 0!==R.magFilter&&(N.magFilter=g(R.magFilter,th)),void 0!==R.anisotropy&&(N.anisotropy=R.anisotropy),void 0!==R.flipY&&(N.flipY=R.flipY),y[R.uuid]=N}return y},parseObject:function(){var a=new gs;return function(g,y,A){var M;function R(Fe){return void 0===y[Fe]&&console.warn("THREE.ObjectLoader: Undefined geometry",Fe),y[Fe]}function N(Fe){if(void 0!==Fe)return void 0===A[Fe]&&console.warn("THREE.ObjectLoader: Undefined material",Fe),A[Fe]}switch(g.type){case"Scene":M=new Nd,void 0!==g.background&&Number.isInteger(g.background)&&(M.background=new Wr(g.background)),void 0!==g.fog&&("Fog"===g.fog.type?M.fog=new Pc(g.fog.color,g.fog.near,g.fog.far):"FogExp2"===g.fog.type&&(M.fog=new Fd(g.fog.color,g.fog.density)));break;case"PerspectiveCamera":M=new wl(g.fov,g.aspect,g.near,g.far),void 0!==g.focus&&(M.focus=g.focus),void 0!==g.zoom&&(M.zoom=g.zoom),void 0!==g.filmGauge&&(M.filmGauge=g.filmGauge),void 0!==g.filmOffset&&(M.filmOffset=g.filmOffset),void 0!==g.view&&(M.view=Object.assign({},g.view));break;case"OrthographicCamera":M=new Bh(g.left,g.right,g.top,g.bottom,g.near,g.far);break;case"AmbientLight":M=new Yg(g.color,g.intensity);break;case"DirectionalLight":M=new Tf(g.color,g.intensity);break;case"PointLight":M=new vu(g.color,g.intensity,g.distance,g.decay);break;case"SpotLight":M=new Hd(g.color,g.intensity,g.distance,g.angle,g.penumbra,g.decay);break;case"HemisphereLight":M=new fc(g.color,g.groundColor,g.intensity);break;case"Mesh":var ie=R(g.geometry),ee=N(g.material);M=ie.bones&&ie.bones.length>0?new $g(ie,ee):new xa(ie,ee);break;case"LOD":M=new aa;break;case"Line":M=new pu(R(g.geometry),N(g.material),g.mode);break;case"LineSegments":M=new yo(R(g.geometry),N(g.material));break;case"PointCloud":case"Points":M=new js(R(g.geometry),N(g.material));break;case"Sprite":M=new fu(N(g.material));break;case"Group":M=new op;break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh type. Instantiates Object3D instead.");default:M=new br}if(M.uuid=g.uuid,void 0!==g.name&&(M.name=g.name),void 0!==g.matrix?(a.fromArray(g.matrix),a.decompose(M.position,M.quaternion,M.scale)):(void 0!==g.position&&M.position.fromArray(g.position),void 0!==g.rotation&&M.rotation.fromArray(g.rotation),void 0!==g.quaternion&&M.quaternion.fromArray(g.quaternion),void 0!==g.scale&&M.scale.fromArray(g.scale)),void 0!==g.castShadow&&(M.castShadow=g.castShadow),void 0!==g.receiveShadow&&(M.receiveShadow=g.receiveShadow),g.shadow&&(void 0!==g.shadow.bias&&(M.shadow.bias=g.shadow.bias),void 0!==g.shadow.radius&&(M.shadow.radius=g.shadow.radius),void 0!==g.shadow.mapSize&&M.shadow.mapSize.fromArray(g.shadow.mapSize),void 0!==g.shadow.camera&&(M.shadow.camera=this.parseObject(g.shadow.camera))),void 0!==g.visible&&(M.visible=g.visible),void 0!==g.userData&&(M.userData=g.userData),void 0!==g.children)for(var fe in g.children)M.add(this.parseObject(g.children[fe],y,A));if("LOD"===g.type)for(var me=g.levels,Le=0;Le<me.length;Le++){var ke=me[Le];void 0!==(fe=M.getObjectByProperty("uuid",ke.object))&&M.addLevel(fe,ke.distance)}return M}}()}),zl.prototype={constructor:zl,getPoint:function(a){return console.warn("THREE.Curve: Warning, getPoint() not implemented!"),null},getPointAt:function(a){var d=this.getUtoTmapping(a);return this.getPoint(d)},getPoints:function(a){a||(a=5);for(var d=[],g=0;g<=a;g++)d.push(this.getPoint(g/a));return d},getSpacedPoints:function(a){a||(a=5);for(var d=[],g=0;g<=a;g++)d.push(this.getPointAt(g/a));return d},getLength:function(){var a=this.getLengths();return a[a.length-1]},getLengths:function(a){if(a||(a=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length===a+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var g,A,d=[],y=this.getPoint(0),M=0;for(d.push(0),A=1;A<=a;A++)M+=(g=this.getPoint(A/a)).distanceTo(y),d.push(M),y=g;return this.cacheArcLengths=d,d},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(a,d){var M,g=this.getLengths(),y=0,A=g.length;M=d||a*g[A-1];for(var ie,R=0,N=A-1;R<=N;)if((ie=g[y=Math.floor(R+(N-R)/2)]-M)<0)R=y+1;else{if(!(ie>0)){N=y;break}N=y-1}if(g[y=N]===M)return y/(A-1);var ee=g[y];return(y+(M-ee)/(g[y+1]-ee))/(A-1)},getTangent:function(a){var d=1e-4,g=a-d,y=a+d;g<0&&(g=0),y>1&&(y=1);var A=this.getPoint(g);return this.getPoint(y).clone().sub(A).normalize()},getTangentAt:function(a){var d=this.getUtoTmapping(a);return this.getTangent(d)},computeFrenetFrames:function(a,d){var ie,fe,g=new Qt,y=[],A=[],M=[],R=new Qt,N=new gs;for(ie=0;ie<=a;ie++)y[ie]=this.getTangentAt(ie/a),y[ie].normalize();A[0]=new Qt,M[0]=new Qt;var me=Number.MAX_VALUE,Le=Math.abs(y[0].x),ke=Math.abs(y[0].y),Fe=Math.abs(y[0].z);for(Le<=me&&(me=Le,g.set(1,0,0)),ke<=me&&(me=ke,g.set(0,1,0)),Fe<=me&&g.set(0,0,1),R.crossVectors(y[0],g).normalize(),A[0].crossVectors(y[0],R),M[0].crossVectors(y[0],A[0]),ie=1;ie<=a;ie++)A[ie]=A[ie-1].clone(),M[ie]=M[ie-1].clone(),R.crossVectors(y[ie-1],y[ie]),R.length()>Number.EPSILON&&(R.normalize(),fe=Math.acos(xs.clamp(y[ie-1].dot(y[ie]),-1,1)),A[ie].applyMatrix4(N.makeRotationAxis(R,fe))),M[ie].crossVectors(y[ie],A[ie]);if(!0===d)for(fe=Math.acos(xs.clamp(A[0].dot(A[a]),-1,1)),fe/=a,y[0].dot(R.crossVectors(A[0],A[a]))>0&&(fe=-fe),ie=1;ie<=a;ie++)A[ie].applyMatrix4(N.makeRotationAxis(y[ie],fe*ie)),M[ie].crossVectors(y[ie],A[ie]);return{tangents:y,normals:A,binormals:M}}},zl.create=function(a,d){return a.prototype=Object.create(zl.prototype),a.prototype.constructor=a,a.prototype.getPoint=d,a},(gd.prototype=Object.create(zl.prototype)).constructor=gd,gd.prototype.isLineCurve=!0,gd.prototype.getPoint=function(a){if(1===a)return this.v2.clone();var d=this.v2.clone().sub(this.v1);return d.multiplyScalar(a).add(this.v1),d},gd.prototype.getPointAt=function(a){return this.getPoint(a)},gd.prototype.getTangent=function(a){return this.v2.clone().sub(this.v1).normalize()},Jg.prototype=Object.assign(Object.create(zl.prototype),{constructor:Jg,add:function(a){this.curves.push(a)},closePath:function(){var a=this.curves[0].getPoint(0),d=this.curves[this.curves.length-1].getPoint(1);a.equals(d)||this.curves.push(new gd(d,a))},getPoint:function(a){for(var d=a*this.getLength(),g=this.getCurveLengths(),y=0;y<g.length;){if(g[y]>=d){var A=g[y]-d,M=this.curves[y],R=M.getLength();return M.getPointAt(0===R?0:1-A/R)}y++}return null},getLength:function(){var a=this.getCurveLengths();return a[a.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var a=[],d=0,g=0,y=this.curves.length;g<y;g++)d+=this.curves[g].getLength(),a.push(d);return this.cacheLengths=a,a},getSpacedPoints:function(a){a||(a=40);for(var d=[],g=0;g<=a;g++)d.push(this.getPoint(g/a));return this.autoClose&&d.push(d[0]),d},getPoints:function(a){a=a||12;for(var g,d=[],y=0,A=this.curves;y<A.length;y++)for(var M=A[y],N=M.getPoints(M&&M.isEllipseCurve?2*a:M&&M.isLineCurve?1:M&&M.isSplineCurve?a*M.points.length:a),ie=0;ie<N.length;ie++){var ee=N[ie];g&&g.equals(ee)||(d.push(ee),g=ee)}return this.autoClose&&d.length>1&&!d[d.length-1].equals(d[0])&&d.push(d[0]),d},createPointsGeometry:function(a){var d=this.getPoints(a);return this.createGeometry(d)},createSpacedPointsGeometry:function(a){var d=this.getSpacedPoints(a);return this.createGeometry(d)},createGeometry:function(a){for(var d=new Ts,g=0,y=a.length;g<y;g++){var A=a[g];d.vertices.push(new Qt(A.x,A.y,A.z||0))}return d}}),(fh.prototype=Object.create(zl.prototype)).constructor=fh,fh.prototype.isEllipseCurve=!0,fh.prototype.getPoint=function(a){for(var d=2*Math.PI,g=this.aEndAngle-this.aStartAngle,y=Math.abs(g)<Number.EPSILON;g<0;)g+=d;for(;g>d;)g-=d;g<Number.EPSILON&&(g=y?0:d),!0===this.aClockwise&&!y&&(g===d?g=-d:g-=d);var A=this.aStartAngle+a*g,M=this.aX+this.xRadius*Math.cos(A),R=this.aY+this.yRadius*Math.sin(A);if(0!==this.aRotation){var N=Math.cos(this.aRotation),ie=Math.sin(this.aRotation),ee=M-this.aX,fe=R-this.aY;M=ee*N-fe*ie+this.aX,R=ee*ie+fe*N+this.aY}return new Xi(M,R)};var tc={tangentQuadraticBezier:function(a,d,g,y){return 2*(1-a)*(g-d)+2*a*(y-g)},tangentCubicBezier:function(a,d,g,y,A){return-3*d*(1-a)*(1-a)+3*g*(1-a)*(1-a)-6*a*g*(1-a)+6*a*y*(1-a)-3*a*a*y+3*a*a*A},tangentSpline:function(a,d,g,y,A){return 6*a*a-6*a+(3*a*a-4*a+1)+(-6*a*a+6*a)+(3*a*a-2*a)},interpolate:function(a,d,g,y,A){var M=.5*(g-a),R=.5*(y-d),N=A*A;return(2*d-2*g+M+R)*(A*N)+(-3*d+3*g-2*M-R)*N+M*A+d}};function _u(a){this.points=void 0===a?[]:a}function Yh(a,d,g,y){this.v0=a,this.v1=d,this.v2=g,this.v3=y}function ph(a,d,g){this.v0=a,this.v1=d,this.v2=g}(_u.prototype=Object.create(zl.prototype)).constructor=_u,_u.prototype.isSplineCurve=!0,_u.prototype.getPoint=function(a){var d=this.points,g=(d.length-1)*a,y=Math.floor(g),A=g-y,M=d[0===y?y:y-1],R=d[y],N=d[y>d.length-2?d.length-1:y+1],ie=d[y>d.length-3?d.length-1:y+2],ee=tc.interpolate;return new Xi(ee(M.x,R.x,N.x,ie.x,A),ee(M.y,R.y,N.y,ie.y,A))},(Yh.prototype=Object.create(zl.prototype)).constructor=Yh,Yh.prototype.getPoint=function(a){var d=La.b3;return new Xi(d(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x),d(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y))},Yh.prototype.getTangent=function(a){var d=tc.tangentCubicBezier;return new Xi(d(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x),d(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y)).normalize()},(ph.prototype=Object.create(zl.prototype)).constructor=ph,ph.prototype.getPoint=function(a){var d=La.b2;return new Xi(d(a,this.v0.x,this.v1.x,this.v2.x),d(a,this.v0.y,this.v1.y,this.v2.y))},ph.prototype.getTangent=function(a){var d=tc.tangentQuadraticBezier;return new Xi(d(a,this.v0.x,this.v1.x,this.v2.x),d(a,this.v0.y,this.v1.y,this.v2.y)).normalize()};var pp=Object.assign(Object.create(Jg.prototype),{fromPoints:function(a){this.moveTo(a[0].x,a[0].y);for(var d=1,g=a.length;d<g;d++)this.lineTo(a[d].x,a[d].y)},moveTo:function(a,d){this.currentPoint.set(a,d)},lineTo:function(a,d){var g=new gd(this.currentPoint.clone(),new Xi(a,d));this.curves.push(g),this.currentPoint.set(a,d)},quadraticCurveTo:function(a,d,g,y){var A=new ph(this.currentPoint.clone(),new Xi(a,d),new Xi(g,y));this.curves.push(A),this.currentPoint.set(g,y)},bezierCurveTo:function(a,d,g,y,A,M){var R=new Yh(this.currentPoint.clone(),new Xi(a,d),new Xi(g,y),new Xi(A,M));this.curves.push(R),this.currentPoint.set(A,M)},splineThru:function(a){var g=new _u([this.currentPoint.clone()].concat(a));this.curves.push(g),this.currentPoint.copy(a[a.length-1])},arc:function(a,d,g,y,A,M){this.absarc(a+this.currentPoint.x,d+this.currentPoint.y,g,y,A,M)},absarc:function(a,d,g,y,A,M){this.absellipse(a,d,g,g,y,A,M)},ellipse:function(a,d,g,y,A,M,R,N){this.absellipse(a+this.currentPoint.x,d+this.currentPoint.y,g,y,A,M,R,N)},absellipse:function(a,d,g,y,A,M,R,N){var ie=new fh(a,d,g,y,A,M,R,N);if(this.curves.length>0){var ee=ie.getPoint(0);ee.equals(this.currentPoint)||this.lineTo(ee.x,ee.y)}this.curves.push(ie);var fe=ie.getPoint(1);this.currentPoint.copy(fe)}});function Gu(){rs.apply(this,arguments),this.holes=[]}function rs(a){Jg.call(this),this.currentPoint=new Xi,a&&this.fromPoints(a)}function gp(){this.subPaths=[],this.currentPath=null}function em(a){this.data=a}function Kh(a){this.manager=void 0!==a?a:hc}Gu.prototype=Object.assign(Object.create(pp),{constructor:Gu,getPointsHoles:function(a){for(var d=[],g=0,y=this.holes.length;g<y;g++)d[g]=this.holes[g].getPoints(a);return d},extractAllPoints:function(a){return{shape:this.getPoints(a),holes:this.getPointsHoles(a)}},extractPoints:function(a){return this.extractAllPoints(a)}}),rs.prototype=pp,pp.constructor=rs,gp.prototype={moveTo:function(a,d){this.currentPath=new rs,this.subPaths.push(this.currentPath),this.currentPath.moveTo(a,d)},lineTo:function(a,d){this.currentPath.lineTo(a,d)},quadraticCurveTo:function(a,d,g,y){this.currentPath.quadraticCurveTo(a,d,g,y)},bezierCurveTo:function(a,d,g,y,A,M){this.currentPath.bezierCurveTo(a,d,g,y,A,M)},splineThru:function(a){this.currentPath.splineThru(a)},toShapes:function(a,d){function g(Wn){for(var ei=[],Ii=0,_i=Wn.length;Ii<_i;Ii++){var fi=Wn[Ii],ir=new Gu;ir.curves=fi.curves,ei.push(ir)}return ei}function y(Wn,ei){for(var Ii=ei.length,_i=!1,fi=Ii-1,ir=0;ir<Ii;fi=ir++){var zi=ei[fi],Xn=ei[ir],Hn=Xn.x-zi.x,f=Xn.y-zi.y;if(Math.abs(f)>Number.EPSILON){if(f<0&&(zi=ei[ir],Hn=-Hn,Xn=ei[fi],f=-f),Wn.y<zi.y||Wn.y>Xn.y)continue;if(Wn.y===zi.y){if(Wn.x===zi.x)return!0}else{var c=f*(Wn.x-zi.x)-Hn*(Wn.y-zi.y);if(0===c)return!0;if(c<0)continue;_i=!_i}}else{if(Wn.y!==zi.y)continue;if(Xn.x<=Wn.x&&Wn.x<=zi.x||zi.x<=Wn.x&&Wn.x<=Xn.x)return!0}}return _i}var A=La.isClockWise,M=this.subPaths;if(0===M.length)return[];if(!0===d)return g(M);var R,N,ie,ee=[];if(1===M.length)return N=M[0],(ie=new Gu).curves=N.curves,ee.push(ie),ee;var fe=!A(M[0].getPoints());fe=a?!fe:fe;var nt,me=[],Le=[],ke=[],Fe=0;Le[Fe]=void 0,ke[Fe]=[];for(var tt=0,Ke=M.length;tt<Ke;tt++)R=A(nt=(N=M[tt]).getPoints()),(R=a?!R:R)?(!fe&&Le[Fe]&&Fe++,Le[Fe]={s:new Gu,p:nt},Le[Fe].s.curves=N.curves,fe&&Fe++,ke[Fe]=[]):ke[Fe].push({h:N,p:nt[0]});if(!Le[0])return g(M);if(Le.length>1){for(var pt=!1,vt=[],qt=0,Bt=Le.length;qt<Bt;qt++)me[qt]=[];for(qt=0,Bt=Le.length;qt<Bt;qt++)for(var cn=ke[qt],sn=0;sn<cn.length;sn++){for(var en=cn[sn],dn=!0,On=0;On<Le.length;On++)y(en.p,Le[On].p)&&(qt!==On&&vt.push({froms:qt,tos:On,hole:sn}),dn?(dn=!1,me[On].push(en)):pt=!0);dn&&me[qt].push(en)}vt.length>0&&(pt||(ke=me))}tt=0;for(var Ai,ui=Le.length;tt<ui;tt++){ee.push(ie=Le[tt].s);for(var Wt=0,$t=(Ai=ke[tt]).length;Wt<$t;Wt++)ie.holes.push(Ai[Wt].h)}return ee}},Object.assign(em.prototype,{isFont:!0,generateShapes:function(a,d,g){function A(fe,me,Le){var ke=M.glyphs[fe]||M.glyphs["?"];if(ke){var pt,vt,qt,Bt,cn,sn,en,dn,On,Ai,ui,Fe=new gp,nt=[],tt=La.b2,Ke=La.b3;if(ke.o)for(var Wt=ke._cachedOutline||(ke._cachedOutline=ke.o.split(" ")),$t=0,Wn=Wt.length;$t<Wn;)switch(Wt[$t++]){case"m":pt=Wt[$t++]*me+Le,vt=Wt[$t++]*me,Fe.moveTo(pt,vt);break;case"l":pt=Wt[$t++]*me+Le,vt=Wt[$t++]*me,Fe.lineTo(pt,vt);break;case"q":if(qt=Wt[$t++]*me+Le,Bt=Wt[$t++]*me,en=Wt[$t++]*me+Le,dn=Wt[$t++]*me,Fe.quadraticCurveTo(en,dn,qt,Bt),ui=nt[nt.length-1]){cn=ui.x,sn=ui.y;for(var Ii=1;Ii<=g;Ii++)tt(_i=Ii/g,cn,en,qt),tt(_i,sn,dn,Bt)}break;case"b":if(qt=Wt[$t++]*me+Le,Bt=Wt[$t++]*me,en=Wt[$t++]*me+Le,dn=Wt[$t++]*me,On=Wt[$t++]*me+Le,Ai=Wt[$t++]*me,Fe.bezierCurveTo(en,dn,On,Ai,qt,Bt),ui=nt[nt.length-1])for(cn=ui.x,sn=ui.y,Ii=1;Ii<=g;Ii++){var _i;Ke(_i=Ii/g,cn,en,On,qt),Ke(_i,sn,dn,Ai,Bt)}}return{offset:ke.ha*me,path:Fe}}}void 0===d&&(d=100),void 0===g&&(g=4);for(var M=this.data,R=function y(fe){for(var me=String(fe).split(""),Le=d/M.resolution,ke=0,Fe=[],nt=0;nt<me.length;nt++){var tt=A(me[nt],Le,ke);ke+=tt.offset,Fe.push(tt.path)}return Fe}(a),N=[],ie=0,ee=R.length;ie<ee;ie++)Array.prototype.push.apply(N,R[ie].toShapes());return N}}),Object.assign(Kh.prototype,{load:function(a,d,g,y){var A=this;new So(this.manager).load(a,function(R){var N;try{N=JSON.parse(R)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),N=JSON.parse(R.substring(65,R.length-2))}var ie=A.parse(N);d&&d(ie)},g,y)},parse:function(a){return new em(a)}});var Df,mp={getContext:function(){return void 0===Df&&(Df=new(window.AudioContext||window.webkitAudioContext)),Df},setContext:function(a){Df=a}};function eg(a){this.manager=void 0!==a?a:hc}function ka(a,d,g,y){Js.call(this,a,d),this.type="RectAreaLight",this.position.set(0,1,0),this.updateMatrix(),this.width=void 0!==g?g:10,this.height=void 0!==y?y:10}function Bm(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new wl,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new wl,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function Vl(a,d,g){br.call(this),this.type="CubeCamera";var y=90,M=new wl(y,1,a,d);M.up.set(0,-1,0),M.lookAt(new Qt(1,0,0)),this.add(M);var R=new wl(y,1,a,d);R.up.set(0,-1,0),R.lookAt(new Qt(-1,0,0)),this.add(R);var N=new wl(y,1,a,d);N.up.set(0,0,1),N.lookAt(new Qt(0,1,0)),this.add(N);var ie=new wl(y,1,a,d);ie.up.set(0,0,-1),ie.lookAt(new Qt(0,-1,0)),this.add(ie);var ee=new wl(y,1,a,d);ee.up.set(0,-1,0),ee.lookAt(new Qt(0,0,1)),this.add(ee);var fe=new wl(y,1,a,d);fe.up.set(0,-1,0),fe.lookAt(new Qt(0,0,-1)),this.add(fe),this.renderTarget=new rh(g,g,{format:Ac,magFilter:Ia,minFilter:Ia}),this.updateCubeMap=function(Le,ke){null===this.parent&&this.updateMatrixWorld();var Fe=this.renderTarget,nt=Fe.texture.generateMipmaps;Fe.texture.generateMipmaps=!1,Fe.activeCubeFace=0,Le.render(ke,M,Fe),Fe.activeCubeFace=1,Le.render(ke,R,Fe),Fe.activeCubeFace=2,Le.render(ke,N,Fe),Fe.activeCubeFace=3,Le.render(ke,ie,Fe),Fe.activeCubeFace=4,Le.render(ke,ee,Fe),Fe.texture.generateMipmaps=nt,Fe.activeCubeFace=5,Le.render(ke,fe,Fe),Le.setRenderTarget(null)}}function zm(){br.call(this),this.type="AudioListener",this.context=mp.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function md(a){br.call(this),this.type="Audio",this.context=a.context,this.gain=this.context.createGain(),this.gain.connect(a.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function tg(a){md.call(this,a),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function Vm(a,d){this.analyser=a.context.createAnalyser(),this.analyser.fftSize=void 0!==d?d:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),a.getOutput().connect(this.analyser)}function Oc(a,d,g){this.binding=a,this.valueSize=g;var A,y=Float64Array;switch(d){case"quaternion":A=this._slerp;break;case"string":case"bool":y=Array,A=this._select;break;default:A=this._lerp}this.buffer=new y(4*g),this._mixBufferRegion=A,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function Oa(a,d,g){this.path=d,this.parsedPath=g||Oa.parseTrackName(d),this.node=Oa.findNode(a,this.parsedPath.nodeName)||a,this.rootNode=a}function gc(a){this.uuid=xs.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var d={};this._indicesByUUID=d;for(var g=0,y=arguments.length;g!==y;++g)d[arguments[g].uuid]=g;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var A=this;this.stats={objects:{get total(){return A._objects.length},get inUse(){return this.total-A.nCachedObjects_}},get bindingsPerObject(){return A._bindings.length}}}function mc(a,d,g){this._mixer=a,this._clip=d,this._localRoot=g||null;for(var y=d.tracks,A=y.length,M=new Array(A),R={endingStart:cs,endingEnd:cs},N=0;N!==A;++N){var ie=y[N].createInterpolant(null);M[N]=ie,ie.settings=R}this._interpolantSettings=R,this._interpolants=M,this._propertyBindings=new Array(A),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=ur,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function ng(a){this._root=a,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Um(a){"string"==typeof a&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),a=arguments[1]),this.value=a}function Wu(){Mr.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Lf(a,d,g,y){this.uuid=xs.generateUUID(),this.data=a,this.itemSize=d,this.offset=g,this.normalized=!0===y}function gh(a,d){this.uuid=xs.generateUUID(),this.array=a,this.stride=d,this.count=void 0!==a?a.length/d:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function vd(a,d,g){gh.call(this,a,d),this.meshPerAttribute=g||1}function Zh(a,d,g){dr.call(this,a,d),this.meshPerAttribute=g||1}function nu(a,d,g,y){this.ray=new sa(a,d),this.near=g||0,this.far=y||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function mh(a,d){return a.distance-d.distance}function vp(a,d,g,y){if(!1!==a.visible&&(a.raycast(d,g),!0===y))for(var A=a.children,M=0,R=A.length;M<R;M++)vp(A[M],d,g,!0)}function Hm(a){this.autoStart=void 0===a||a,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function G_(a){this.points=a;var y,A,M,R,N,ie,ee,fe,me,d=[],g={x:0,y:0,z:0};function Le(ke,Fe,nt,tt,Ke,pt,vt){var qt=.5*(nt-ke),Bt=.5*(tt-Fe);return(2*(Fe-nt)+qt+Bt)*vt+(-3*(Fe-nt)-2*qt-Bt)*pt+qt*Ke+Fe}this.initFromArray=function(ke){this.points=[];for(var Fe=0;Fe<ke.length;Fe++)this.points[Fe]={x:ke[Fe][0],y:ke[Fe][1],z:ke[Fe][2]}},this.getPoint=function(ke){return y=(this.points.length-1)*ke,A=Math.floor(y),M=y-A,d[0]=0===A?A:A-1,d[1]=A,d[2]=A>this.points.length-2?this.points.length-1:A+1,d[3]=A>this.points.length-3?this.points.length-1:A+2,g.x=Le((ie=this.points[d[0]]).x,(ee=this.points[d[1]]).x,(fe=this.points[d[2]]).x,(me=this.points[d[3]]).x,M,R=M*M,N=M*R),g.y=Le(ie.y,ee.y,fe.y,me.y,M,R,N),g.z=Le(ie.z,ee.z,fe.z,me.z,M,R,N),g},this.getControlPointsArray=function(){var ke,Fe,nt=this.points.length,tt=[];for(ke=0;ke<nt;ke++)tt[ke]=[(Fe=this.points[ke]).x,Fe.y,Fe.z];return tt},this.getLength=function(ke){var Fe,nt,tt,Ke,vt=0,qt=0,Bt=new Qt,cn=new Qt,sn=[],en=0;for(sn[0]=0,ke||(ke=100),tt=this.points.length*ke,Bt.copy(this.points[0]),Fe=1;Fe<tt;Fe++)Ke=this.getPoint(nt=Fe/tt),cn.copy(Ke),en+=cn.distanceTo(Bt),Bt.copy(Ke),(vt=Math.floor((this.points.length-1)*nt))!==qt&&(sn[vt]=en,qt=vt);return sn[sn.length]=en,{chunks:sn,total:en}},this.reparametrizeByArcLength=function(ke){var Fe,nt,Ke,pt,qt,Bt,cn=[],sn=new Qt,en=this.getLength();for(cn.push(sn.copy(this.points[0]).clone()),Fe=1;Fe<this.points.length;Fe++){for(qt=Math.ceil(ke*(en.chunks[Fe]-en.chunks[Fe-1])/en.total),Ke=(Fe-1)/(this.points.length-1),pt=Fe/(this.points.length-1),nt=1;nt<qt-1;nt++)Bt=this.getPoint(Ke+nt*(1/qt)*(pt-Ke)),cn.push(sn.copy(Bt).clone());cn.push(sn.copy(this.points[Fe]).clone())}this.points=cn}}function tm(a,d,g){return this.radius=void 0!==a?a:1,this.phi=void 0!==d?d:0,this.theta=void 0!==g?g:0,this}function yl(a,d,g){return this.radius=void 0!==a?a:1,this.theta=void 0!==d?d:0,this.y=void 0!==g?g:0,this}function ca(a,d){xa.call(this,a,d),this.animationsMap={},this.animationsList=[];var g=this.geometry.morphTargets.length,y="__default";this.createAnimation(y,0,g-1,g/1),this.setAnimationWeight(y,1)}function Pf(a){br.call(this),this.material=a,this.render=function(d){}}function ig(a,d,g,y){this.object=a,this.size=void 0!==d?d:1;var A=void 0!==g?g:16711680,M=void 0!==y?y:1,R=0,N=this.object.geometry;N&&N.isGeometry?R=3*N.faces.length:N&&N.isBufferGeometry&&(R=N.attributes.normal.count);var ie=new Mr,ee=new is(2*R*3,3);ie.addAttribute("position",ee),yo.call(this,ie,new ol({color:A,linewidth:M})),this.matrixAutoUpdate=!1,this.update()}function Wd(a){br.call(this),this.light=a,this.light.updateMatrixWorld(),this.matrix=a.matrixWorld,this.matrixAutoUpdate=!1;for(var d=new Mr,g=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],y=0,A=1;y<32;y++,A++){var R=y/32*Math.PI*2,N=A/32*Math.PI*2;g.push(Math.cos(R),Math.sin(R),1,Math.cos(N),Math.sin(N),1)}d.addAttribute("position",new is(g,3));var ie=new ol({fog:!1});this.cone=new yo(d,ie),this.add(this.cone),this.update()}function jd(a){this.bones=this.getBoneList(a);for(var d=new Mr,g=[],y=[],A=new Wr(0,0,1),M=new Wr(0,1,0),R=0;R<this.bones.length;R++){var N=this.bones[R];N.parent&&N.parent.isBone&&(g.push(0,0,0),g.push(0,0,0),y.push(A.r,A.g,A.b),y.push(M.r,M.g,M.b))}d.addAttribute("position",new is(g,3)),d.addAttribute("color",new is(y,3));var ie=new ol({vertexColors:z,depthTest:!1,depthWrite:!1,transparent:!0});yo.call(this,d,ie),this.root=a,this.matrix=a.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function vh(a,d){this.light=a,this.light.updateMatrixWorld();var g=new la(d,4,2),y=new Ba({wireframe:!0,fog:!1});y.color.copy(this.light.color).multiplyScalar(this.light.intensity),xa.call(this,g,y),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1}function Qh(a){br.call(this),this.light=a,this.light.updateMatrixWorld();var d=new Ba({color:a.color,fog:!1}),g=new Ba({color:a.color,fog:!1,wireframe:!0}),y=new Mr;y.addAttribute("position",new dr(new Float32Array(18),3)),this.add(new xa(y,d)),this.add(new xa(y,g)),this.update()}function yh(a,d){br.call(this),this.light=a,this.light.updateMatrixWorld(),this.matrix=a.matrixWorld,this.matrixAutoUpdate=!1;var g=new Jc(d);g.rotateY(.5*Math.PI);var y=new Ba({vertexColors:z,wireframe:!0}),A=g.getAttribute("position"),M=new Float32Array(3*A.count);g.addAttribute("color",new dr(M,3)),this.add(new xa(g,y)),this.update()}function rg(a,d,g,y){a=a||10,d=d||10,g=new Wr(void 0!==g?g:4473924),y=new Wr(void 0!==y?y:8947848);for(var A=d/2,M=2*a/d,R=[],N=[],ie=0,ee=0,fe=-a;ie<=d;ie++,fe+=M){R.push(-a,0,fe,a,0,fe),R.push(fe,0,-a,fe,0,a);var me=ie===A?g:y;me.toArray(N,ee),me.toArray(N,ee+=3),me.toArray(N,ee+=3),me.toArray(N,ee+=3),ee+=3}var Le=new Mr;Le.addAttribute("position",new is(R,3)),Le.addAttribute("color",new is(N,3));var ke=new ol({vertexColors:z});yo.call(this,Le,ke)}function ju(a,d,g,y,A,M){a=a||10,d=d||16,g=g||8,y=y||64,A=new Wr(void 0!==A?A:4473924),M=new Wr(void 0!==M?M:8947848);var ie,ee,fe,me,Le,ke,Fe,R=[],N=[];for(me=0;me<=d;me++)fe=me/d*(2*Math.PI),ie=Math.sin(fe)*a,ee=Math.cos(fe)*a,R.push(0,0,0),R.push(ie,0,ee),N.push((Fe=1&me?A:M).r,Fe.g,Fe.b),N.push(Fe.r,Fe.g,Fe.b);for(me=0;me<=g;me++)for(Fe=1&me?A:M,ke=a-a/g*me,Le=0;Le<y;Le++)fe=Le/y*(2*Math.PI),ie=Math.sin(fe)*ke,ee=Math.cos(fe)*ke,R.push(ie,0,ee),N.push(Fe.r,Fe.g,Fe.b),fe=(Le+1)/y*(2*Math.PI),ie=Math.sin(fe)*ke,ee=Math.cos(fe)*ke,R.push(ie,0,ee),N.push(Fe.r,Fe.g,Fe.b);var nt=new Mr;nt.addAttribute("position",new is(R,3)),nt.addAttribute("color",new is(N,3));var tt=new ol({vertexColors:z});yo.call(this,nt,tt)}function $d(a,d,g,y){this.object=a,this.size=void 0!==d?d:1;var A=void 0!==g?g:16776960,M=void 0!==y?y:1,R=0,N=this.object.geometry;N&&N.isGeometry?R=N.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var ie=new Mr,ee=new is(2*R*3,3);ie.addAttribute("position",ee),yo.call(this,ie,new ol({color:A,linewidth:M})),this.matrixAutoUpdate=!1,this.update()}function sg(a,d){br.call(this),this.light=a,this.light.updateMatrixWorld(),this.matrix=a.matrixWorld,this.matrixAutoUpdate=!1,void 0===d&&(d=1);var g=new Mr;g.addAttribute("position",new is([-d,d,0,d,d,0,d,-d,0,-d,-d,0,-d,d,0],3));var y=new ol({fog:!1});this.add(new pu(g,y)),(g=new Mr).addAttribute("position",new is([0,0,0,0,0,1],3)),this.add(new pu(g,y)),this.update()}function nm(a){var d=new Mr,g=new ol({color:16777215,vertexColors:ue}),y=[],A=[],M={},R=new Wr(16755200),N=new Wr(16711680),ie=new Wr(43775),ee=new Wr(16777215),fe=new Wr(3355443);function me(ke,Fe,nt){Le(ke,nt),Le(Fe,nt)}function Le(ke,Fe){y.push(0,0,0),A.push(Fe.r,Fe.g,Fe.b),void 0===M[ke]&&(M[ke]=[]),M[ke].push(y.length/3-1)}me("n1","n2",R),me("n2","n4",R),me("n4","n3",R),me("n3","n1",R),me("f1","f2",R),me("f2","f4",R),me("f4","f3",R),me("f3","f1",R),me("n1","f1",R),me("n2","f2",R),me("n3","f3",R),me("n4","f4",R),me("p","n1",N),me("p","n2",N),me("p","n3",N),me("p","n4",N),me("u1","u2",ie),me("u2","u3",ie),me("u3","u1",ie),me("c","t",ee),me("p","c",fe),me("cn1","cn2",fe),me("cn3","cn4",fe),me("cf1","cf2",fe),me("cf3","cf4",fe),d.addAttribute("position",new is(y,3)),d.addAttribute("color",new is(A,3)),yo.call(this,d,g),this.camera=a,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=a.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=M,this.update()}function og(a,d){void 0===d&&(d=16776960);var g=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),y=new Float32Array(24),A=new Mr;A.setIndex(new dr(g,1)),A.addAttribute("position",new dr(y,3)),yo.call(this,A,new ol({color:d})),void 0!==a&&this.update(a)}Object.assign(eg.prototype,{load:function(a,d,g,y){var A=new So(this.manager);A.setResponseType("arraybuffer"),A.load(a,function(M){mp.getContext().decodeAudioData(M,function(N){d(N)})},g,y)}}),ka.prototype=Object.assign(Object.create(Js.prototype),{constructor:ka,isRectAreaLight:!0,copy:function(a){return Js.prototype.copy.call(this,a),this.width=a.width,this.height=a.height,this}}),Object.assign(Bm.prototype,{update:function(){var a,d,g,y,A,M,R,N=new gs,ie=new gs;return function(fe){if(a!==this||d!==fe.focus||g!==fe.fov||y!==fe.aspect*this.aspect||A!==fe.near||M!==fe.far||R!==fe.zoom){a=this,d=fe.focus,g=fe.fov,y=fe.aspect*this.aspect,A=fe.near,M=fe.far,R=fe.zoom;var tt,Ke,Le=fe.projectionMatrix.clone(),ke=this.eyeSep/2,Fe=ke*A/d,nt=A*Math.tan(xs.DEG2RAD*g*.5)/R;ie.elements[12]=-ke,N.elements[12]=ke,Le.elements[0]=2*A/((Ke=nt*y+Fe)-(tt=-nt*y+Fe)),Le.elements[8]=(Ke+tt)/(Ke-tt),this.cameraL.projectionMatrix.copy(Le),Le.elements[0]=2*A/((Ke=nt*y-Fe)-(tt=-nt*y-Fe)),Le.elements[8]=(Ke+tt)/(Ke-tt),this.cameraR.projectionMatrix.copy(Le)}this.cameraL.matrixWorld.copy(fe.matrixWorld).multiply(ie),this.cameraR.matrixWorld.copy(fe.matrixWorld).multiply(N)}}()}),(Vl.prototype=Object.create(br.prototype)).constructor=Vl,zm.prototype=Object.assign(Object.create(br.prototype),{constructor:zm,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(a){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=a,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(a){this.gain.gain.value=a},updateMatrixWorld:function(){var a=new Qt,d=new Rl,g=new Qt,y=new Qt;return function(M){br.prototype.updateMatrixWorld.call(this,M);var R=this.context.listener,N=this.up;this.matrixWorld.decompose(a,d,g),y.set(0,0,-1).applyQuaternion(d),R.positionX?(R.positionX.setValueAtTime(a.x,this.context.currentTime),R.positionY.setValueAtTime(a.y,this.context.currentTime),R.positionZ.setValueAtTime(a.z,this.context.currentTime),R.forwardX.setValueAtTime(y.x,this.context.currentTime),R.forwardY.setValueAtTime(y.y,this.context.currentTime),R.forwardZ.setValueAtTime(y.z,this.context.currentTime),R.upX.setValueAtTime(N.x,this.context.currentTime),R.upY.setValueAtTime(N.y,this.context.currentTime),R.upZ.setValueAtTime(N.z,this.context.currentTime)):(R.setPosition(a.x,a.y,a.z),R.setOrientation(y.x,y.y,y.z,N.x,N.y,N.z))}}()}),md.prototype=Object.assign(Object.create(br.prototype),{constructor:md,getOutput:function(){return this.gain},setNodeSource:function(a){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=a,this.connect(),this},setBuffer:function(a){return this.buffer=a,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var a=this.context.createBufferSource();return a.buffer=this.buffer,a.loop=this.loop,a.onended=this.onEnded.bind(this),a.playbackRate.setValueAtTime(this.playbackRate,this.startTime),a.start(0,this.startTime),this.isPlaying=!0,this.source=a,this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.startTime=this.context.currentTime,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.startTime=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var a=1,d=this.filters.length;a<d;a++)this.filters[a-1].connect(this.filters[a]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var a=1,d=this.filters.length;a<d;a++)this.filters[a-1].disconnect(this.filters[a]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(a){return a||(a=[]),!0===this.isPlaying?(this.disconnect(),this.filters=a,this.connect()):this.filters=a,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(a){return this.setFilters(a?[a]:[])},setPlaybackRate:function(a){if(!1!==this.hasPlaybackControl)return this.playbackRate=a,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(a){if(!1!==this.hasPlaybackControl)return this.loop=a,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(a){return this.gain.gain.value=a,this}}),tg.prototype=Object.assign(Object.create(md.prototype),{constructor:tg,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(a){this.panner.refDistance=a},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(a){this.panner.rolloffFactor=a},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(a){this.panner.distanceModel=a},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(a){this.panner.maxDistance=a},updateMatrixWorld:function(){var a=new Qt;return function(g){br.prototype.updateMatrixWorld.call(this,g),a.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(a.x,a.y,a.z)}}()}),Object.assign(Vm.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var a=0,d=this.getFrequencyData(),g=0;g<d.length;g++)a+=d[g];return a/d.length}}),Oc.prototype={constructor:Oc,accumulate:function(a,d){var g=this.buffer,y=this.valueSize,A=a*y+y,M=this.cumulativeWeight;if(0===M){for(var R=0;R!==y;++R)g[A+R]=g[R];M=d}else this._mixBufferRegion(g,A,0,d/(M+=d),y);this.cumulativeWeight=M},apply:function(a){var d=this.valueSize,g=this.buffer,y=a*d+d,A=this.cumulativeWeight,M=this.binding;this.cumulativeWeight=0,A<1&&this._mixBufferRegion(g,y,3*d,1-A,d);for(var N=d,ie=d+d;N!==ie;++N)if(g[N]!==g[N+d]){M.setValue(g,y);break}},saveOriginalState:function(){var d=this.buffer,g=this.valueSize,y=3*g;this.binding.getValue(d,y);for(var A=g,M=y;A!==M;++A)d[A]=d[y+A%g];this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_select:function(a,d,g,y,A){if(y>=.5)for(var M=0;M!==A;++M)a[d+M]=a[g+M]},_slerp:function(a,d,g,y,A){Rl.slerpFlat(a,d,a,d,a,g,y)},_lerp:function(a,d,g,y,A){for(var M=1-y,R=0;R!==A;++R){var N=d+R;a[N]=a[N]*M+a[g+R]*y}}},Oa.prototype={constructor:Oa,getValue:function(d,g){this.bind(),this.getValue(d,g)},setValue:function(d,g){this.bind(),this.setValue(d,g)},bind:function(){var a=this.node,d=this.parsedPath,g=d.objectName,y=d.propertyName,A=d.propertyIndex;if(a||(a=Oa.findNode(this.rootNode,d.nodeName)||this.rootNode,this.node=a),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,a){if(g){var M=d.objectIndex;switch(g){case"materials":if(!a.material)return void console.error("  can not bind to material as node does not have a material",this);if(!a.material.materials)return void console.error("  can not bind to material.materials as node.material does not have a materials array",this);a=a.material.materials;break;case"bones":if(!a.skeleton)return void console.error("  can not bind to bones as node does not have a skeleton",this);a=a.skeleton.bones;for(var R=0;R<a.length;R++)if(a[R].name===M){M=R;break}break;default:if(void 0===a[g])return void console.error("  can not bind to objectName of node, undefined",this);a=a[g]}if(void 0!==M){if(void 0===a[M])return void console.error("  trying to bind to objectIndex of objectName, but is undefined:",this,a);a=a[M]}}var N=a[y];if(void 0!==N){var ee=this.Versioning.None;void 0!==a.needsUpdate?(ee=this.Versioning.NeedsUpdate,this.targetObject=a):void 0!==a.matrixWorldNeedsUpdate&&(ee=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=a);var fe=this.BindingType.Direct;if(void 0!==A){if("morphTargetInfluences"===y){if(!a.geometry)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry",this);if(!a.geometry.morphTargets)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets",this);for(R=0;R<this.node.geometry.morphTargets.length;R++)if(a.geometry.morphTargets[R].name===A){A=R;break}}fe=this.BindingType.ArrayElement,this.resolvedProperty=N,this.propertyIndex=A}else void 0!==N.fromArray&&void 0!==N.toArray?(fe=this.BindingType.HasFromToArray,this.resolvedProperty=N):void 0!==N.length?(fe=this.BindingType.EntireArray,this.resolvedProperty=N):this.propertyName=y;this.getValue=this.GetterByBindingType[fe],this.setValue=this.SetterByBindingTypeAndVersioning[fe][ee]}else console.error("  trying to update property for track: "+d.nodeName+"."+y+" but it wasn't found.",a)}else console.error("  trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}},Object.assign(Oa.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},_getValue_unbound:Oa.prototype.getValue,_setValue_unbound:Oa.prototype.setValue,BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(d,g){d[g]=this.node[this.propertyName]},function(d,g){for(var y=this.resolvedProperty,A=0,M=y.length;A!==M;++A)d[g++]=y[A]},function(d,g){d[g]=this.resolvedProperty[this.propertyIndex]},function(d,g){this.resolvedProperty.toArray(d,g)}],SetterByBindingTypeAndVersioning:[[function(d,g){this.node[this.propertyName]=d[g]},function(d,g){this.node[this.propertyName]=d[g],this.targetObject.needsUpdate=!0},function(d,g){this.node[this.propertyName]=d[g],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(d,g){for(var y=this.resolvedProperty,A=0,M=y.length;A!==M;++A)y[A]=d[g++]},function(d,g){for(var y=this.resolvedProperty,A=0,M=y.length;A!==M;++A)y[A]=d[g++];this.targetObject.needsUpdate=!0},function(d,g){for(var y=this.resolvedProperty,A=0,M=y.length;A!==M;++A)y[A]=d[g++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(d,g){this.resolvedProperty[this.propertyIndex]=d[g]},function(d,g){this.resolvedProperty[this.propertyIndex]=d[g],this.targetObject.needsUpdate=!0},function(d,g){this.resolvedProperty[this.propertyIndex]=d[g],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(d,g){this.resolvedProperty.fromArray(d,g)},function(d,g){this.resolvedProperty.fromArray(d,g),this.targetObject.needsUpdate=!0},function(d,g){this.resolvedProperty.fromArray(d,g),this.targetObject.matrixWorldNeedsUpdate=!0}]]}),(Oa.Composite=function(a,d,g){var y=g||Oa.parseTrackName(d);this._targetGroup=a,this._bindings=a.subscribe_(d,y)}).prototype={constructor:Oa.Composite,getValue:function(a,d){this.bind();var y=this._bindings[this._targetGroup.nCachedObjects_];void 0!==y&&y.getValue(a,d)},setValue:function(a,d){for(var g=this._bindings,y=this._targetGroup.nCachedObjects_,A=g.length;y!==A;++y)g[y].setValue(a,d)},bind:function(){for(var a=this._bindings,d=this._targetGroup.nCachedObjects_,g=a.length;d!==g;++d)a[d].bind()},unbind:function(){for(var a=this._bindings,d=this._targetGroup.nCachedObjects_,g=a.length;d!==g;++d)a[d].unbind()}},Oa.create=function(a,d,g){return a&&a.isAnimationObjectGroup?new Oa.Composite(a,d,g):new Oa(a,d,g)},Oa.parseTrackName=function(a){var g=/^((?:[\w-]+[\/:])*)([\w-]+)?(?:\.([\w-]+)(?:\[(.+)\])?)?\.([\w-]+)(?:\[(.+)\])?$/.exec(a);if(!g)throw new Error("cannot parse trackName at all: "+a);var y={nodeName:g[2],objectName:g[3],objectIndex:g[4],propertyName:g[5],propertyIndex:g[6]};if(null===y.propertyName||0===y.propertyName.length)throw new Error("can not parse propertyName from trackName: "+a);return y},Oa.findNode=function(a,d){if(!d||""===d||"root"===d||"."===d||-1===d||d===a.name||d===a.uuid)return a;if(a.skeleton){var y=function(R){for(var N=0;N<R.bones.length;N++){var ie=R.bones[N];if(ie.name===d)return ie}return null}(a.skeleton);if(y)return y}if(a.children){var A=function(R){for(var N=0;N<R.length;N++){var ie=R[N];if(ie.name===d||ie.uuid===d)return ie;var ee=A(ie.children);if(ee)return ee}return null},M=A(a.children);if(M)return M}return null},gc.prototype={constructor:gc,isAnimationObjectGroup:!0,add:function(a){for(var d=this._objects,g=d.length,y=this.nCachedObjects_,A=this._indicesByUUID,M=this._paths,R=this._parsedPaths,N=this._bindings,ie=N.length,ee=0,fe=arguments.length;ee!==fe;++ee){var me=arguments[ee],Le=me.uuid,ke=A[Le],Fe=void 0;if(void 0===ke){ke=g++,A[Le]=ke,d.push(me);for(var nt=0,tt=ie;nt!==tt;++nt)N[nt].push(new Oa(me,M[nt],R[nt]))}else if(ke<y){Fe=d[ke];var Ke=--y,pt=d[Ke];for(A[pt.uuid]=ke,d[ke]=pt,A[Le]=Ke,d[Ke]=me,nt=0,tt=ie;nt!==tt;++nt){var vt=N[nt],qt=vt[Ke],Bt=vt[ke];vt[ke]=qt,void 0===Bt&&(Bt=new Oa(me,M[nt],R[nt])),vt[Ke]=Bt}}else d[ke]!==Fe&&console.error("Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes...")}this.nCachedObjects_=y},remove:function(a){for(var d=this._objects,g=this.nCachedObjects_,y=this._indicesByUUID,A=this._bindings,M=A.length,R=0,N=arguments.length;R!==N;++R){var ie=arguments[R],ee=ie.uuid,fe=y[ee];if(void 0!==fe&&fe>=g){var me=g++,Le=d[me];y[Le.uuid]=fe,d[fe]=Le,y[ee]=me,d[me]=ie;for(var ke=0,Fe=M;ke!==Fe;++ke){var nt=A[ke],tt=nt[me],Ke=nt[fe];nt[fe]=tt,nt[me]=Ke}}}this.nCachedObjects_=g},uncache:function(a){for(var d=this._objects,g=d.length,y=this.nCachedObjects_,A=this._indicesByUUID,M=this._bindings,R=M.length,N=0,ie=arguments.length;N!==ie;++N){var ee=arguments[N],fe=ee.uuid,me=A[fe];if(void 0!==me)if(delete A[fe],me<y){var Le=--y,ke=d[Le],nt=d[Fe=--g];A[ke.uuid]=me,d[me]=ke,A[nt.uuid]=Le,d[Le]=nt,d.pop();for(var tt=0,Ke=R;tt!==Ke;++tt){var vt=(pt=M[tt])[Le],qt=pt[Fe];pt[me]=vt,pt[Le]=qt,pt.pop()}}else{var Fe;for(A[(nt=d[Fe=--g]).uuid]=me,d[me]=nt,d.pop(),tt=0,Ke=R;tt!==Ke;++tt){var pt;(pt=M[tt])[me]=pt[Fe],pt.pop()}}}this.nCachedObjects_=y},subscribe_:function(a,d){var g=this._bindingsIndicesByPath,y=g[a],A=this._bindings;if(void 0!==y)return A[y];var M=this._paths,R=this._parsedPaths,N=this._objects,ee=this.nCachedObjects_,fe=new Array(N.length);g[a]=y=A.length,M.push(a),R.push(d),A.push(fe);for(var me=ee,Le=N.length;me!==Le;++me)fe[me]=new Oa(N[me],a,d);return fe},unsubscribe_:function(a){var d=this._bindingsIndicesByPath,g=d[a];if(void 0!==g){var y=this._paths,A=this._parsedPaths,M=this._bindings,R=M.length-1,N=M[R];d[a[R]]=g,M[g]=N,M.pop(),A[g]=A[R],A.pop(),y[g]=y[R],y.pop()}}},mc.prototype={constructor:mc,play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(a){return this._startTime=a,this},setLoop:function(a,d){return this.loop=a,this.repetitions=d,this},setEffectiveWeight:function(a){return this.weight=a,this._effectiveWeight=this.enabled?a:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(a){return this._scheduleFading(a,0,1)},fadeOut:function(a){return this._scheduleFading(a,1,0)},crossFadeFrom:function(a,d,g){if(a.fadeOut(d),this.fadeIn(d),g){var y=this._clip.duration,A=a._clip.duration,R=y/A;a.warp(1,A/y,d),this.warp(R,1,d)}return this},crossFadeTo:function(a,d,g){return a.crossFadeFrom(this,d,g)},stopFading:function(){var a=this._weightInterpolant;return null!==a&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(a)),this},setEffectiveTimeScale:function(a){return this.timeScale=a,this._effectiveTimeScale=this.paused?0:a,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(a){return this.timeScale=this._clip.duration/a,this.stopWarping()},syncWith:function(a){return this.time=a.time,this.timeScale=a.timeScale,this.stopWarping()},halt:function(a){return this.warp(this._effectiveTimeScale,0,a)},warp:function(a,d,g){var y=this._mixer,A=y.time,M=this._timeScaleInterpolant,R=this.timeScale;null===M&&(M=y._lendControlInterpolant(),this._timeScaleInterpolant=M);var N=M.parameterPositions,ie=M.sampleValues;return N[0]=A,N[1]=A+g,ie[0]=a/R,ie[1]=d/R,this},stopWarping:function(){var a=this._timeScaleInterpolant;return null!==a&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(a)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(a,d,g,y){var A=this._startTime;if(null!==A){var M=(a-A)*g;if(M<0||0===g)return;this._startTime=null,d=g*M}d*=this._updateTimeScale(a);var R=this._updateTime(d),N=this._updateWeight(a);if(N>0)for(var ie=this._interpolants,ee=this._propertyBindings,fe=0,me=ie.length;fe!==me;++fe)ie[fe].evaluate(R),ee[fe].accumulate(y,N)},_updateWeight:function(a){var d=0;if(this.enabled){d=this.weight;var g=this._weightInterpolant;if(null!==g){var y=g.evaluate(a)[0];d*=y,a>g.parameterPositions[1]&&(this.stopFading(),0===y&&(this.enabled=!1))}}return this._effectiveWeight=d,d},_updateTimeScale:function(a){var d=0;if(!this.paused){d=this.timeScale;var g=this._timeScaleInterpolant;null!==g&&(d*=g.evaluate(a)[0],a>g.parameterPositions[1]&&(this.stopWarping(),0===d?this.paused=!0:this.timeScale=d))}return this._effectiveTimeScale=d,d},_updateTime:function(a){var d=this.time+a;if(0===a)return d;var g=this._clip.duration,y=this.loop,A=this._loopCount;if(y===pr){-1===A&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(d>=g)d=g;else{if(!(d<0))break e;d=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:a<0?-1:1})}}else{var M=y===or;if(-1===A&&(a>=0?(A=0,this._setEndings(!0,0===this.repetitions,M)):this._setEndings(0===this.repetitions,!0,M)),d>=g||d<0){var R=Math.floor(d/g);d-=g*R,A+=Math.abs(R);var N=this.repetitions-A;if(N<0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,d=a>0?g:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:a>0?1:-1});else{if(0===N){var ie=a<0;this._setEndings(ie,!ie,M)}else this._setEndings(!1,!1,M);this._loopCount=A,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:R})}}if(M&&1==(1&A))return this.time=d,g-d}return this.time=d,d},_setEndings:function(a,d,g){var y=this._interpolantSettings;g?(y.endingStart=Sa,y.endingEnd=Sa):(y.endingStart=a?this.zeroSlopeAtStart?Sa:cs:us,y.endingEnd=d?this.zeroSlopeAtEnd?Sa:cs:us)},_scheduleFading:function(a,d,g){var y=this._mixer,A=y.time,M=this._weightInterpolant;null===M&&(M=y._lendControlInterpolant(),this._weightInterpolant=M);var R=M.parameterPositions,N=M.sampleValues;return R[0]=A,N[0]=d,R[1]=A+a,N[1]=g,this}},Object.assign(ng.prototype,Y.prototype,{clipAction:function(a,d){var g=d||this._root,y=g.uuid,A="string"==typeof a?Tl.findByName(g,a):a,M=null!==A?A.uuid:a,R=this._actionsByClip[M],N=null;if(void 0!==R){var ie=R.actionByRoot[y];if(void 0!==ie)return ie;N=R.knownActions[0],null===A&&(A=N._clip)}if(null===A)return null;var ee=new mc(this,A,d);return this._bindAction(ee,N),this._addInactiveAction(ee,M,y),ee},existingAction:function(a,d){var g=d||this._root,y=g.uuid,A="string"==typeof a?Tl.findByName(g,a):a,R=this._actionsByClip[A?A.uuid:a];return void 0!==R&&R.actionByRoot[y]||null},stopAllAction:function(){var a=this._actions,d=this._nActiveActions,g=this._bindings,y=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var A=0;A!==d;++A)a[A].reset();for(A=0;A!==y;++A)g[A].useCount=0;return this},update:function(a){for(var d=this._actions,g=this._nActiveActions,y=this.time+=a*=this.timeScale,A=Math.sign(a),M=this._accuIndex^=1,R=0;R!==g;++R){var N=d[R];N.enabled&&N._update(y,a,A,M)}var ie=this._bindings,ee=this._nActiveBindings;for(R=0;R!==ee;++R)ie[R].apply(M);return this},getRoot:function(){return this._root},uncacheClip:function(a){var d=this._actions,g=a.uuid,y=this._actionsByClip,A=y[g];if(void 0!==A){for(var M=A.knownActions,R=0,N=M.length;R!==N;++R){var ie=M[R];this._deactivateAction(ie);var ee=ie._cacheIndex,fe=d[d.length-1];ie._cacheIndex=null,ie._byClipCacheIndex=null,fe._cacheIndex=ee,d[ee]=fe,d.pop(),this._removeInactiveBindingsForAction(ie)}delete y[g]}},uncacheRoot:function(a){var d=a.uuid,g=this._actionsByClip;for(var y in g){var M=g[y].actionByRoot[d];void 0!==M&&(this._deactivateAction(M),this._removeInactiveAction(M))}var N=this._bindingsByRootAndName[d];if(void 0!==N)for(var ie in N){var ee=N[ie];ee.restoreOriginalState(),this._removeInactiveBinding(ee)}},uncacheAction:function(a,d){var g=this.existingAction(a,d);null!==g&&(this._deactivateAction(g),this._removeInactiveAction(g))}}),Object.assign(ng.prototype,{_bindAction:function(a,d){var g=a._localRoot||this._root,y=a._clip.tracks,A=y.length,M=a._propertyBindings,R=a._interpolants,N=g.uuid,ie=this._bindingsByRootAndName,ee=ie[N];void 0===ee&&(ie[N]=ee={});for(var fe=0;fe!==A;++fe){var me=y[fe],Le=me.name,ke=ee[Le];if(void 0!==ke)M[fe]=ke;else{if(void 0!==(ke=M[fe])){null===ke._cacheIndex&&(++ke.referenceCount,this._addInactiveBinding(ke,N,Le));continue}++(ke=new Oc(Oa.create(g,Le,d&&d._propertyBindings[fe].binding.parsedPath),me.ValueTypeName,me.getValueSize())).referenceCount,this._addInactiveBinding(ke,N,Le),M[fe]=ke}R[fe].resultBuffer=ke.buffer}},_activateAction:function(a){if(!this._isActiveAction(a)){if(null===a._cacheIndex){var d=(a._localRoot||this._root).uuid,g=a._clip.uuid,y=this._actionsByClip[g];this._bindAction(a,y&&y.knownActions[0]),this._addInactiveAction(a,g,d)}for(var A=a._propertyBindings,M=0,R=A.length;M!==R;++M){var N=A[M];0==N.useCount++&&(this._lendBinding(N),N.saveOriginalState())}this._lendAction(a)}},_deactivateAction:function(a){if(this._isActiveAction(a)){for(var d=a._propertyBindings,g=0,y=d.length;g!==y;++g){var A=d[g];0==--A.useCount&&(A.restoreOriginalState(),this._takeBackBinding(A))}this._takeBackAction(a)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var a=this;this.stats={actions:{get total(){return a._actions.length},get inUse(){return a._nActiveActions}},bindings:{get total(){return a._bindings.length},get inUse(){return a._nActiveBindings}},controlInterpolants:{get total(){return a._controlInterpolants.length},get inUse(){return a._nActiveControlInterpolants}}}},_isActiveAction:function(a){var d=a._cacheIndex;return null!==d&&d<this._nActiveActions},_addInactiveAction:function(a,d,g){var y=this._actions,A=this._actionsByClip,M=A[d];if(void 0===M)M={knownActions:[a],actionByRoot:{}},a._byClipCacheIndex=0,A[d]=M;else{var R=M.knownActions;a._byClipCacheIndex=R.length,R.push(a)}a._cacheIndex=y.length,y.push(a),M.actionByRoot[g]=a},_removeInactiveAction:function(a){var d=this._actions,g=d[d.length-1],y=a._cacheIndex;g._cacheIndex=y,d[y]=g,d.pop(),a._cacheIndex=null;var A=a._clip.uuid,M=this._actionsByClip,R=M[A],N=R.knownActions,ie=N[N.length-1],ee=a._byClipCacheIndex;ie._byClipCacheIndex=ee,N[ee]=ie,N.pop(),a._byClipCacheIndex=null,delete R.actionByRoot[(d._localRoot||this._root).uuid],0===N.length&&delete M[A],this._removeInactiveBindingsForAction(a)},_removeInactiveBindingsForAction:function(a){for(var d=a._propertyBindings,g=0,y=d.length;g!==y;++g){var A=d[g];0==--A.referenceCount&&this._removeInactiveBinding(A)}},_lendAction:function(a){var d=this._actions,g=a._cacheIndex,y=this._nActiveActions++,A=d[y];a._cacheIndex=y,d[y]=a,A._cacheIndex=g,d[g]=A},_takeBackAction:function(a){var d=this._actions,g=a._cacheIndex,y=--this._nActiveActions,A=d[y];a._cacheIndex=y,d[y]=a,A._cacheIndex=g,d[g]=A},_addInactiveBinding:function(a,d,g){var y=this._bindingsByRootAndName,A=y[d],M=this._bindings;void 0===A&&(y[d]=A={}),A[g]=a,a._cacheIndex=M.length,M.push(a)},_removeInactiveBinding:function(a){var d=this._bindings,g=a.binding,y=g.rootNode.uuid,A=g.path,M=this._bindingsByRootAndName,R=M[y],N=d[d.length-1],ie=a._cacheIndex;N._cacheIndex=ie,d[ie]=N,d.pop(),delete R[A];e:{for(var ee in R)break e;delete M[y]}},_lendBinding:function(a){var d=this._bindings,g=a._cacheIndex,y=this._nActiveBindings++,A=d[y];a._cacheIndex=y,d[y]=a,A._cacheIndex=g,d[g]=A},_takeBackBinding:function(a){var d=this._bindings,g=a._cacheIndex,y=--this._nActiveBindings,A=d[y];a._cacheIndex=y,d[y]=a,A._cacheIndex=g,d[g]=A},_lendControlInterpolant:function(){var a=this._controlInterpolants,d=this._nActiveControlInterpolants++,g=a[d];return void 0===g&&((g=new qh(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=d,a[d]=g),g},_takeBackControlInterpolant:function(a){var d=this._controlInterpolants,g=a.__cacheIndex,y=--this._nActiveControlInterpolants,A=d[y];a.__cacheIndex=y,d[y]=a,A.__cacheIndex=g,d[g]=A},_controlInterpolantsResultBuffer:new Float32Array(1)}),Um.prototype.clone=function(){return new Um(void 0===this.value.clone?this.value:this.value.clone())},(Wu.prototype=Object.create(Mr.prototype)).constructor=Wu,Wu.prototype.isInstancedBufferGeometry=!0,Wu.prototype.addGroup=function(a,d,g){this.groups.push({start:a,count:d,materialIndex:g})},Wu.prototype.copy=function(a){var d=a.index;null!==d&&this.setIndex(d.clone());var g=a.attributes;for(var y in g)this.addAttribute(y,g[y].clone());for(var M=a.groups,R=0,N=M.length;R<N;R++){var ie=M[R];this.addGroup(ie.start,ie.count,ie.materialIndex)}return this},Lf.prototype={constructor:Lf,isInterleavedBufferAttribute:!0,get count(){return this.data.count},get array(){return this.data.array},setX:function(a,d){return this.data.array[a*this.data.stride+this.offset]=d,this},setY:function(a,d){return this.data.array[a*this.data.stride+this.offset+1]=d,this},setZ:function(a,d){return this.data.array[a*this.data.stride+this.offset+2]=d,this},setW:function(a,d){return this.data.array[a*this.data.stride+this.offset+3]=d,this},getX:function(a){return this.data.array[a*this.data.stride+this.offset]},getY:function(a){return this.data.array[a*this.data.stride+this.offset+1]},getZ:function(a){return this.data.array[a*this.data.stride+this.offset+2]},getW:function(a){return this.data.array[a*this.data.stride+this.offset+3]},setXY:function(a,d,g){return this.data.array[(a=a*this.data.stride+this.offset)+0]=d,this.data.array[a+1]=g,this},setXYZ:function(a,d,g,y){return this.data.array[(a=a*this.data.stride+this.offset)+0]=d,this.data.array[a+1]=g,this.data.array[a+2]=y,this},setXYZW:function(a,d,g,y,A){return this.data.array[(a=a*this.data.stride+this.offset)+0]=d,this.data.array[a+1]=g,this.data.array[a+2]=y,this.data.array[a+3]=A,this}},gh.prototype={constructor:gh,isInterleavedBuffer:!0,set needsUpdate(a){!0===a&&this.version++},setArray:function(a){if(Array.isArray(a))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==a?a.length/this.stride:0,this.array=a},setDynamic:function(a){return this.dynamic=a,this},copy:function(a){return this.array=new a.array.constructor(a.array),this.count=a.count,this.stride=a.stride,this.dynamic=a.dynamic,this},copyAt:function(a,d,g){a*=this.stride,g*=d.stride;for(var y=0,A=this.stride;y<A;y++)this.array[a+y]=d.array[g+y];return this},set:function(a,d){return void 0===d&&(d=0),this.array.set(a,d),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(a){return this.onUploadCallback=a,this}},(vd.prototype=Object.create(gh.prototype)).constructor=vd,vd.prototype.isInstancedInterleavedBuffer=!0,vd.prototype.copy=function(a){return gh.prototype.copy.call(this,a),this.meshPerAttribute=a.meshPerAttribute,this},(Zh.prototype=Object.create(dr.prototype)).constructor=Zh,Zh.prototype.isInstancedBufferAttribute=!0,Zh.prototype.copy=function(a){return dr.prototype.copy.call(this,a),this.meshPerAttribute=a.meshPerAttribute,this},nu.prototype={constructor:nu,linePrecision:1,set:function(a,d){this.ray.set(a,d)},setFromCamera:function(a,d){d&&d.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(d.matrixWorld),this.ray.direction.set(a.x,a.y,.5).unproject(d).sub(this.ray.origin).normalize()):d&&d.isOrthographicCamera?(this.ray.origin.set(a.x,a.y,(d.near+d.far)/(d.near-d.far)).unproject(d),this.ray.direction.set(0,0,-1).transformDirection(d.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(a,d){var g=[];return vp(a,this,g,d),g.sort(mh),g},intersectObjects:function(a,d){var g=[];if(!1===Array.isArray(a))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),g;for(var y=0,A=a.length;y<A;y++)vp(a[y],this,g,d);return g.sort(mh),g}},Hm.prototype={constructor:Hm,start:function(){this.startTime=(performance||Date).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var a=0;if(this.autoStart&&!this.running&&this.start(),this.running){var d=(performance||Date).now();a=(d-this.oldTime)/1e3,this.oldTime=d,this.elapsedTime+=a}return a}},tm.prototype={constructor:tm,set:function(a,d,g){return this.radius=a,this.phi=d,this.theta=g,this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.radius=a.radius,this.phi=a.phi,this.theta=a.theta,this},makeSafe:function(){var a=1e-6;return this.phi=Math.max(a,Math.min(Math.PI-a,this.phi)),this},setFromVector3:function(a){return this.radius=a.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(a.x,a.z),this.phi=Math.acos(xs.clamp(a.y/this.radius,-1,1))),this}},yl.prototype={constructor:yl,set:function(a,d,g){return this.radius=a,this.theta=d,this.y=g,this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.radius=a.radius,this.theta=a.theta,this.y=a.y,this},setFromVector3:function(a){return this.radius=Math.sqrt(a.x*a.x+a.z*a.z),this.theta=Math.atan2(a.x,a.z),this.y=a.y,this}},(ca.prototype=Object.create(xa.prototype)).constructor=ca,ca.prototype.createAnimation=function(a,d,g,y){var A={start:d,end:g,length:g-d+1,fps:y,duration:(g-d)/y,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[a]=A,this.animationsList.push(A)},ca.prototype.autoCreateAnimations=function(a){for(var g,d=/([a-z]+)_?(\d+)/i,y={},A=this.geometry,M=0,R=A.morphTargets.length;M<R;M++){var ie=A.morphTargets[M].name.match(d);ie&&ie.length>1&&(y[ee=ie[1]]||(y[ee]={start:1/0,end:-1/0}),M<(fe=y[ee]).start&&(fe.start=M),M>fe.end&&(fe.end=M),g||(g=ee))}for(var ee in y){var fe;this.createAnimation(ee,(fe=y[ee]).start,fe.end,a)}this.firstAnimation=g},ca.prototype.setAnimationDirectionForward=function(a){var d=this.animationsMap[a];d&&(d.direction=1,d.directionBackwards=!1)},ca.prototype.setAnimationDirectionBackward=function(a){var d=this.animationsMap[a];d&&(d.direction=-1,d.directionBackwards=!0)},ca.prototype.setAnimationFPS=function(a,d){var g=this.animationsMap[a];g&&(g.fps=d,g.duration=(g.end-g.start)/g.fps)},ca.prototype.setAnimationDuration=function(a,d){var g=this.animationsMap[a];g&&(g.duration=d,g.fps=(g.end-g.start)/g.duration)},ca.prototype.setAnimationWeight=function(a,d){var g=this.animationsMap[a];g&&(g.weight=d)},ca.prototype.setAnimationTime=function(a,d){var g=this.animationsMap[a];g&&(g.time=d)},ca.prototype.getAnimationTime=function(a){var d=0,g=this.animationsMap[a];return g&&(d=g.time),d},ca.prototype.getAnimationDuration=function(a){var d=-1,g=this.animationsMap[a];return g&&(d=g.duration),d},ca.prototype.playAnimation=function(a){var d=this.animationsMap[a];d?(d.time=0,d.active=!0):console.warn("THREE.MorphBlendMesh: animation["+a+"] undefined in .playAnimation()")},ca.prototype.stopAnimation=function(a){var d=this.animationsMap[a];d&&(d.active=!1)},ca.prototype.update=function(a){for(var d=0,g=this.animationsList.length;d<g;d++){var y=this.animationsList[d];if(y.active){var A=y.duration/y.length;y.time+=y.direction*a,y.mirroredLoop?(y.time>y.duration||y.time<0)&&(y.direction*=-1,y.time>y.duration&&(y.time=y.duration,y.directionBackwards=!0),y.time<0&&(y.time=0,y.directionBackwards=!1)):(y.time=y.time%y.duration,y.time<0&&(y.time+=y.duration));var M=y.start+xs.clamp(Math.floor(y.time/A),0,y.length-1),R=y.weight;M!==y.currentFrame&&(this.morphTargetInfluences[y.lastFrame]=0,this.morphTargetInfluences[y.currentFrame]=1*R,this.morphTargetInfluences[M]=0,y.lastFrame=y.currentFrame,y.currentFrame=M);var N=y.time%A/A;y.directionBackwards&&(N=1-N),y.currentFrame!==y.lastFrame?(this.morphTargetInfluences[y.currentFrame]=N*R,this.morphTargetInfluences[y.lastFrame]=(1-N)*R):this.morphTargetInfluences[y.currentFrame]=R}}},(Pf.prototype=Object.create(br.prototype)).constructor=Pf,Pf.prototype.isImmediateRenderObject=!0,(ig.prototype=Object.create(yo.prototype)).constructor=ig,ig.prototype.update=function(){var a=new Qt,d=new Qt,g=new At;return function(){var A=["a","b","c"];this.object.updateMatrixWorld(!0),g.getNormalMatrix(this.object.matrixWorld);var M=this.object.matrixWorld,R=this.geometry.attributes.position,N=this.object.geometry;if(N&&N.isGeometry)for(var ie=N.vertices,ee=N.faces,fe=0,me=0,Le=ee.length;me<Le;me++)for(var ke=ee[me],Fe=0,nt=ke.vertexNormals.length;Fe<nt;Fe++){var Ke=ke.vertexNormals[Fe];a.copy(ie[ke[A[Fe]]]).applyMatrix4(M),d.copy(Ke).applyMatrix3(g).normalize().multiplyScalar(this.size).add(a),R.setXYZ(fe,a.x,a.y,a.z),R.setXYZ(fe+=1,d.x,d.y,d.z),fe+=1}else if(N&&N.isBufferGeometry){var pt=N.attributes.position,vt=N.attributes.normal;for(fe=0,Fe=0,nt=pt.count;Fe<nt;Fe++)a.set(pt.getX(Fe),pt.getY(Fe),pt.getZ(Fe)).applyMatrix4(M),d.set(vt.getX(Fe),vt.getY(Fe),vt.getZ(Fe)),d.applyMatrix3(g).normalize().multiplyScalar(this.size).add(a),R.setXYZ(fe,a.x,a.y,a.z),R.setXYZ(fe+=1,d.x,d.y,d.z),fe+=1}return R.needsUpdate=!0,this}}(),(Wd.prototype=Object.create(br.prototype)).constructor=Wd,Wd.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Wd.prototype.update=function(){var a=new Qt,d=new Qt;return function(){var y=this.light.distance?this.light.distance:1e3,A=y*Math.tan(this.light.angle);this.cone.scale.set(A,A,y),a.setFromMatrixPosition(this.light.matrixWorld),d.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(d.sub(a)),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}(),(jd.prototype=Object.create(yo.prototype)).constructor=jd,jd.prototype.getBoneList=function(a){var d=[];a&&a.isBone&&d.push(a);for(var g=0;g<a.children.length;g++)d.push.apply(d,this.getBoneList(a.children[g]));return d},jd.prototype.update=function(){var a=new Qt,d=new gs,g=new gs;return function(){var A=this.geometry,M=A.getAttribute("position");g.getInverse(this.root.matrixWorld);for(var R=0,N=0;R<this.bones.length;R++){var ie=this.bones[R];ie.parent&&ie.parent.isBone&&(d.multiplyMatrices(g,ie.matrixWorld),a.setFromMatrixPosition(d),M.setXYZ(N,a.x,a.y,a.z),d.multiplyMatrices(g,ie.parent.matrixWorld),a.setFromMatrixPosition(d),M.setXYZ(N+1,a.x,a.y,a.z),N+=2)}A.getAttribute("position").needsUpdate=!0}}(),(vh.prototype=Object.create(xa.prototype)).constructor=vh,vh.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},vh.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)},(Qh.prototype=Object.create(br.prototype)).constructor=Qh,Qh.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose(),this.children[1].geometry.dispose(),this.children[1].material.dispose()},Qh.prototype.update=function(){var a=new Qt,d=new Qt;return function(){var y=this.children[0],A=this.children[1];if(this.light.target){a.setFromMatrixPosition(this.light.matrixWorld),d.setFromMatrixPosition(this.light.target.matrixWorld);var M=d.clone().sub(a);y.lookAt(M),A.lookAt(M)}y.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),A.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var R=.5*this.light.width,N=.5*this.light.height,ie=y.geometry.getAttribute("position"),ee=ie.array;ee[0]=R,ee[1]=-N,ee[2]=0,ee[3]=R,ee[4]=N,ee[5]=0,ee[6]=-R,ee[7]=N,ee[8]=0,ee[9]=-R,ee[10]=N,ee[11]=0,ee[12]=-R,ee[13]=-N,ee[14]=0,ee[15]=R,ee[16]=-N,ee[17]=0,ie.needsUpdate=!0}}(),(yh.prototype=Object.create(br.prototype)).constructor=yh,yh.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},yh.prototype.update=function(){var a=new Qt,d=new Wr,g=new Wr;return function(){var A=this.children[0],M=A.geometry.getAttribute("color");d.copy(this.light.color).multiplyScalar(this.light.intensity),g.copy(this.light.groundColor).multiplyScalar(this.light.intensity);for(var R=0,N=M.count;R<N;R++){var ie=R<N/2?d:g;M.setXYZ(R,ie.r,ie.g,ie.b)}A.lookAt(a.setFromMatrixPosition(this.light.matrixWorld).negate()),M.needsUpdate=!0}}(),(rg.prototype=Object.create(yo.prototype)).constructor=rg,(ju.prototype=Object.create(yo.prototype)).constructor=ju,($d.prototype=Object.create(yo.prototype)).constructor=$d,$d.prototype.update=function(){var a=new Qt,d=new Qt,g=new At;return function(){this.object.updateMatrixWorld(!0),g.getNormalMatrix(this.object.matrixWorld);for(var A=this.object.matrixWorld,M=this.geometry.attributes.position,R=this.object.geometry,N=R.vertices,ie=R.faces,ee=0,fe=0,me=ie.length;fe<me;fe++){var Le=ie[fe],ke=Le.normal;a.copy(N[Le.a]).add(N[Le.b]).add(N[Le.c]).divideScalar(3).applyMatrix4(A),d.copy(ke).applyMatrix3(g).normalize().multiplyScalar(this.size).add(a),M.setXYZ(ee,a.x,a.y,a.z),M.setXYZ(ee+=1,d.x,d.y,d.z),ee+=1}return M.needsUpdate=!0,this}}(),(sg.prototype=Object.create(br.prototype)).constructor=sg,sg.prototype.dispose=function(){var a=this.children[0],d=this.children[1];a.geometry.dispose(),a.material.dispose(),d.geometry.dispose(),d.material.dispose()},sg.prototype.update=function(){var a=new Qt,d=new Qt,g=new Qt;return function(){a.setFromMatrixPosition(this.light.matrixWorld),d.setFromMatrixPosition(this.light.target.matrixWorld),g.subVectors(d,a);var A=this.children[0],M=this.children[1];A.lookAt(g),A.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),M.lookAt(g),M.scale.z=g.length()}}(),(nm.prototype=Object.create(yo.prototype)).constructor=nm,nm.prototype.update=function(){var a,d,g=new Qt,y=new za;function A(M,R,N,ie){g.set(R,N,ie).unproject(y);var ee=d[M];if(void 0!==ee)for(var fe=a.getAttribute("position"),me=0,Le=ee.length;me<Le;me++)fe.setXYZ(ee[me],g.x,g.y,g.z)}return function(){a=this.geometry,d=this.pointMap,y.projectionMatrix.copy(this.camera.projectionMatrix),A("c",0,0,-1),A("t",0,0,1),A("n1",-1,-1,-1),A("n2",1,-1,-1),A("n3",-1,1,-1),A("n4",1,1,-1),A("f1",-1,-1,1),A("f2",1,-1,1),A("f3",-1,1,1),A("f4",1,1,1),A("u1",.7,1.1,-1),A("u2",-.7,1.1,-1),A("u3",0,2,-1),A("cf1",-1,0,1),A("cf2",1,0,1),A("cf3",0,-1,1),A("cf4",0,1,1),A("cn1",-1,0,-1),A("cn2",1,0,-1),A("cn3",0,-1,-1),A("cn4",0,1,-1),a.getAttribute("position").needsUpdate=!0}}(),(og.prototype=Object.create(yo.prototype)).constructor=og,og.prototype.update=function(){var a=new Es;return function(g){if(g&&g.isBox3?a.copy(g):a.setFromObject(g),!a.isEmpty()){var y=a.min,A=a.max,M=this.geometry.attributes.position,R=M.array;R[0]=A.x,R[1]=A.y,R[2]=A.z,R[3]=y.x,R[4]=A.y,R[5]=A.z,R[6]=y.x,R[7]=y.y,R[8]=A.z,R[9]=A.x,R[10]=y.y,R[11]=A.z,R[12]=A.x,R[13]=A.y,R[14]=y.z,R[15]=y.x,R[16]=A.y,R[17]=y.z,R[18]=y.x,R[19]=y.y,R[20]=y.z,R[21]=A.x,R[22]=y.y,R[23]=y.z,M.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}();var ag=new Mr;ag.addAttribute("position",new is([0,0,0,0,1,0],3));var kv=new Sf(0,.5,1,5,1);function Fc(a,d,g,y,A,M){br.call(this),void 0===y&&(y=16776960),void 0===g&&(g=1),void 0===A&&(A=.2*g),void 0===M&&(M=.2*A),this.position.copy(d),this.line=new pu(ag,new ol({color:y})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new xa(kv,new Ba({color:y})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(a),this.setLength(g,A,M)}function Rf(a){var d=[0,0,0,a=a||1,0,0,0,0,0,0,a,0,0,0,0,0,0,a],y=new Mr;y.addAttribute("position",new is(d,3)),y.addAttribute("color",new is([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var A=new ol({vertexColors:z});yo.call(this,y,A)}kv.translate(0,-.5,0),(Fc.prototype=Object.create(br.prototype)).constructor=Fc,Fc.prototype.setDirection=function(){var d,a=new Qt;return function(y){y.y>.99999?this.quaternion.set(0,0,0,1):y.y<-.99999?this.quaternion.set(1,0,0,0):(a.set(y.z,0,-y.x).normalize(),d=Math.acos(y.y),this.quaternion.setFromAxisAngle(a,d))}}(),Fc.prototype.setLength=function(a,d,g){void 0===d&&(d=.2*a),void 0===g&&(g=.2*d),this.line.scale.set(1,Math.max(0,a-d),1),this.line.updateMatrix(),this.cone.scale.set(g,d,g),this.cone.position.y=a,this.cone.updateMatrix()},Fc.prototype.setColor=function(a){this.line.material.color.copy(a),this.cone.material.color.copy(a)},(Rf.prototype=Object.create(yo.prototype)).constructor=Rf;var Gm=function(){var a=new Qt,d=new A,g=new A,y=new A;function A(){}return A.prototype.init=function(M,R,N,ie){this.c0=M,this.c1=N,this.c2=-3*M+3*R-2*N-ie,this.c3=2*M-2*R+N+ie},A.prototype.initNonuniformCatmullRom=function(M,R,N,ie,ee,fe,me){var Le=(R-M)/ee-(N-M)/(ee+fe)+(N-R)/fe,ke=(N-R)/fe-(ie-R)/(fe+me)+(ie-N)/me;this.init(R,N,Le*=fe,ke*=fe)},A.prototype.initCatmullRom=function(M,R,N,ie,ee){this.init(R,N,ee*(N-M),ee*(ie-R))},A.prototype.calc=function(M){var R=M*M;return this.c0+this.c1*M+this.c2*R+this.c3*(R*M)},zl.create(function(M){this.points=M||[],this.closed=!1},function(M){var N,ie,ee,fe,me,Le,ke,Fe,R=this.points;if((fe=R.length)<2&&console.log("duh, you need at least 2 points"),ee=(N=(fe-(this.closed?0:1))*M)-(ie=Math.floor(N)),this.closed?ie+=ie>0?0:(Math.floor(Math.abs(ie)/R.length)+1)*R.length:0===ee&&ie===fe-1&&(ie=fe-2,ee=1),this.closed||ie>0?me=R[(ie-1)%fe]:(a.subVectors(R[0],R[1]).add(R[0]),me=a),Le=R[ie%fe],ke=R[(ie+1)%fe],this.closed||ie+2<fe?Fe=R[(ie+2)%fe]:(a.subVectors(R[fe-1],R[fe-2]).add(R[fe-1]),Fe=a),void 0===this.type||"centripetal"===this.type||"chordal"===this.type){var nt="chordal"===this.type?.5:.25,tt=Math.pow(me.distanceToSquared(Le),nt),Ke=Math.pow(Le.distanceToSquared(ke),nt),pt=Math.pow(ke.distanceToSquared(Fe),nt);Ke<1e-4&&(Ke=1),tt<1e-4&&(tt=Ke),pt<1e-4&&(pt=Ke),d.initNonuniformCatmullRom(me.x,Le.x,ke.x,Fe.x,tt,Ke,pt),g.initNonuniformCatmullRom(me.y,Le.y,ke.y,Fe.y,tt,Ke,pt),y.initNonuniformCatmullRom(me.z,Le.z,ke.z,Fe.z,tt,Ke,pt)}else if("catmullrom"===this.type){var vt=void 0!==this.tension?this.tension:.5;d.initCatmullRom(me.x,Le.x,ke.x,Fe.x,vt),g.initCatmullRom(me.y,Le.y,ke.y,Fe.y,vt),y.initCatmullRom(me.z,Le.z,ke.z,Fe.z,vt)}return new Qt(d.calc(ee),g.calc(ee),y.calc(ee))})}(),Vy=zl.create(function(a){console.warn("THREE.SplineCurve3 will be deprecated. Please use THREE.CatmullRomCurve3"),this.points=void 0===a?[]:a},function(a){var d=this.points,g=(d.length-1)*a,y=Math.floor(g),A=g-y,M=d[0==y?y:y-1],R=d[y],N=d[y>d.length-2?d.length-1:y+1],ie=d[y>d.length-3?d.length-1:y+2],ee=tc.interpolate;return new Qt(ee(M.x,R.x,N.x,ie.x,A),ee(M.y,R.y,N.y,ie.y,A),ee(M.z,R.z,N.z,ie.z,A))}),Uy=zl.create(function(a,d,g,y){this.v0=a,this.v1=d,this.v2=g,this.v3=y},function(a){var d=La.b3;return new Qt(d(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x),d(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y),d(a,this.v0.z,this.v1.z,this.v2.z,this.v3.z))}),im=zl.create(function(a,d,g){this.v0=a,this.v1=d,this.v2=g},function(a){var d=La.b2;return new Qt(d(a,this.v0.x,this.v1.x,this.v2.x),d(a,this.v0.y,this.v1.y,this.v2.y),d(a,this.v0.z,this.v1.z,this.v2.z))}),hb=zl.create(function(a,d){this.v1=a,this.v2=d},function(a){if(1===a)return this.v2.clone();var d=new Qt;return d.subVectors(this.v2,this.v1),d.multiplyScalar(a),d.add(this.v1),d});function yp(a,d,g,y,A,M){fh.call(this,a,d,g,g,y,A,M)}(yp.prototype=Object.create(fh.prototype)).constructor=yp;var ll={createMultiMaterialObject:function(a,d){for(var g=new op,y=0,A=d.length;y<A;y++)g.add(new xa(a,d[y]));return g},detach:function(a,d,g){a.applyMatrix(d.matrixWorld),d.remove(a),g.add(a)},attach:function(a,d,g){var y=new gs;y.getInverse(g.matrixWorld),a.applyMatrix(y),d.remove(a),g.add(a)}};function Wm(a,d,g,y,A,M,R){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new Oo(a,d,g,A,M,R)}var kf=0,Ov=1;function fb(a){return console.warn("THREE.MeshFaceMaterial has been renamed to THREE.MultiMaterial."),new gu(a)}function Hy(a,d){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new js(a,d)}function Gy(a){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new fu(a)}function W_(a,d){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new js(a,d)}function j_(a){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Rc(a)}function $_(a){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Rc(a)}function Wy(a){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Rc(a)}function jm(a,d,g){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Qt(a,d,g)}function Fv(a,d){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new dr(a,d).setDynamic(!0)}function bu(a,d){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new kd(a,d)}function q_(a,d){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new gl(a,d)}function fa(a,d){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Fh(a,d)}function wa(a,d){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new sp(a,d)}function Nv(a,d){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Nh(a,d)}function qd(a,d){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new _f(a,d)}function Bv(a,d){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Ou(a,d)}function jy(a,d){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new is(a,d)}function X_(a,d){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Lc(a,d)}function $m(a){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Gm.call(this,a),this.type="catmullrom",this.closed=!0}function $y(a,d){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new og(a,d)}function Y_(a,d){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new yo(new vl(a.geometry),new ol({color:void 0!==d?d:16777215}))}function pb(a,d){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new yo(new dd(a.geometry),new ol({color:void 0!==d?d:16777215}))}function Jh(a){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new So(a)}$m.prototype=Object.create(Gm.prototype),rg.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Object.assign(oh.prototype,{center:function(a){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(a)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(a){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(a)},size:function(a){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(a)}}),Object.assign(Es.prototype,{center:function(a){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(a)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(a){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(a)},isIntersectionSphere:function(a){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(a)},size:function(a){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(a)}}),Ol.prototype.center=function(a){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(a)},xs.random16=function(){return console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead."),Math.random()},Object.assign(At.prototype,{flattenToArrayOffset:function(a,d){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(a,d)},multiplyVector3:function(a){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),a.applyMatrix3(this)},multiplyVector3Array:function(a){return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(a)},applyToBuffer:function(a,d,g){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(a)}}),Object.assign(gs.prototype,{extractPosition:function(a){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(a)},flattenToArrayOffset:function(a,d){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(a,d)},getPosition:function(){var a;return function(){return void 0===a&&(a=new Qt),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),a.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(a){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(a)},multiplyVector3:function(a){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."),a.applyProjection(this)},multiplyVector4:function(a){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),a.applyMatrix4(this)},multiplyVector3Array:function(a){return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(a)},rotateAxis:function(a){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),a.transformDirection(this)},crossVector:function(a){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),a.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(a,d,g){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(a)}}),dt.prototype.isIntersectionLine=function(a){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(a)},Rl.prototype.multiplyVector3=function(a){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),a.applyQuaternion(this)},Object.assign(sa.prototype,{isIntersectionBox:function(a){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(a)},isIntersectionPlane:function(a){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(a)},isIntersectionSphere:function(a){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(a)}}),Object.assign(Gu.prototype,{extrude:function(a){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new eu(this,a)},makeGeometry:function(a){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Zp(this,a)}}),Object.assign(Qt.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(a){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(a)},getScaleFromMatrix:function(a){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(a)},getColumnFromMatrix:function(a,d){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(d,a)}}),Ts.prototype.computeTangents=function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")},Object.assign(br.prototype,{getChildByName:function(a){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(a)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(a,d){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(d,a)}}),Object.defineProperties(br.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(a){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=a}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(aa.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),wl.prototype.setLens=function(a,d){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==d&&(this.filmGauge=d),this.setFocalLength(a)},Object.defineProperties(Js.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(a){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=a}},shadowCameraLeft:{set:function(a){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=a}},shadowCameraRight:{set:function(a){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=a}},shadowCameraTop:{set:function(a){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=a}},shadowCameraBottom:{set:function(a){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=a}},shadowCameraNear:{set:function(a){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=a}},shadowCameraFar:{set:function(a){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=a}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(a){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=a}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(a){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=a}},shadowMapHeight:{set:function(a){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=a}}}),Object.defineProperties(dr.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}}}),Object.assign(Mr.prototype,{addIndex:function(a){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(a)},addDrawCall:function(a,d,g){void 0!==g&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(a,d)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(Mr.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Um.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(Ks.prototype,{wrapAround:{get:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")},set:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE."+this.type+": .wrapRGB has been removed."),new Wr}}}),Object.defineProperties(Il.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(Qc.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(a){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=a}}}),Y.prototype=Object.assign(Object.create({constructor:Y,apply:function(a){console.warn("THREE.EventDispatcher: .apply is deprecated, just inherit or Object.assign the prototype to mix-in."),Object.assign(a,this)}}),Y.prototype),Object.assign(Uh.prototype,{supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(a){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(a)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}}),Object.defineProperties(Uh.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=a}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=a}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."),this.shadowMap.cullFace=a}}}),Object.defineProperties(Io.prototype,{cullFace:{get:function(){return this.renderReverseSided?P:W},set:function(a){var d=a!==W;console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+d+"."),this.renderReverseSided=d}}}),Object.defineProperties(Ic.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(a){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=a}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(a){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=a}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(a){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=a}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(a){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=a}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(a){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=a}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(a){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=a}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(a){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=a}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(a){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=a}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(a){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=a}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(a){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=a}}}),md.prototype.load=function(a){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var d=this;return(new eg).load(a,function(y){d.setBuffer(y)}),this},Vm.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};var rm={merge:function(a,d,g){var y;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),d.isMesh&&(d.matrixAutoUpdate&&d.updateMatrix(),y=d.matrix,d=d.geometry),a.merge(d,y,g)},center:function(a){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),a.center()}},zv={crossOrigin:void 0,loadTexture:function(a,d,g,y){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var A=new Ud;A.setCrossOrigin(this.crossOrigin);var M=A.load(a,g,void 0,y);return d&&(M.mapping=d),M},loadTextureCube:function(a,d,g,y){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var A=new Fm;A.setCrossOrigin(this.crossOrigin);var M=A.load(a,g,void 0,y);return d&&(M.mapping=d),M},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}};function qy(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(a,d){console.warn("THREE.Projector: .projectVector() is now vector.project()."),a.project(d)},this.unprojectVector=function(a,d){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),a.unproject(d)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}}function Xy(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}}},2944:function(Be,Ce,V){var Y=typeof global<"u"&&global||typeof self<"u"&&self||window,D=Function.prototype.apply;function H(B,W){this._id=B,this._clearFn=W}Ce.setTimeout=function(){return new H(D.call(setTimeout,Y,arguments),clearTimeout)},Ce.setInterval=function(){return new H(D.call(setInterval,Y,arguments),clearInterval)},Ce.clearTimeout=Ce.clearInterval=function(B){B&&B.close()},H.prototype.unref=H.prototype.ref=function(){},H.prototype.close=function(){this._clearFn.call(Y,this._id)},Ce.enroll=function(B,W){clearTimeout(B._idleTimeoutId),B._idleTimeout=W},Ce.unenroll=function(B){clearTimeout(B._idleTimeoutId),B._idleTimeout=-1},Ce._unrefActive=Ce.active=function(B){clearTimeout(B._idleTimeoutId);var W=B._idleTimeout;W>=0&&(B._idleTimeoutId=setTimeout(function(){B._onTimeout&&B._onTimeout()},W))},V(6563),Ce.setImmediate=typeof self<"u"&&self.setImmediate||typeof global<"u"&&global.setImmediate||this&&this.setImmediate,Ce.clearImmediate=typeof self<"u"&&self.clearImmediate||typeof global<"u"&&global.clearImmediate||this&&this.clearImmediate},9699:Be=>{Be.exports=/[\0-\x1F\x7F-\x9F]/},9127:Be=>{Be.exports=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/},6020:Be=>{Be.exports=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/},5450:Be=>{Be.exports=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/},9315:(Be,Ce,V)=>{"use strict";Ce.Any=V(1129),Ce.Cc=V(9699),Ce.Cf=V(9127),Ce.P=V(6020),Ce.Z=V(5450)},1129:Be=>{Be.exports=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/},3532:Be=>{function V(Y){try{if(!global.localStorage)return!1}catch{return!1}var D=global.localStorage[Y];return null!=D&&"true"===String(D).toLowerCase()}Be.exports=function Ce(Y,D){if(V("noDeprecation"))return Y;var H=!1;return function B(){if(!H){if(V("throwDeprecation"))throw new Error(D);V("traceDeprecation")?console.trace(D):console.warn(D),H=!0}return Y.apply(this,arguments)}}},4922:function(Be,Ce){(function(){"use strict";Ce.stripBOM=function(V){return"\ufeff"===V[0]?V.substring(1):V}}).call(this)},4032:function(Be,Ce,V){(function(){"use strict";var Y,D,H,B,W,P={}.hasOwnProperty;Y=V(7904),D=V(7067).defaults,B=function(O){return"string"==typeof O&&(O.indexOf("&")>=0||O.indexOf(">")>=0||O.indexOf("<")>=0)},W=function(O){return"<![CDATA["+H(O)+"]]>"},H=function(O){return O.replace("]]>","]]]]><![CDATA[>")},Ce.Builder=function(){function O(q){var te,J;for(te in this.options={},J=D[.2])!P.call(J,te)||(this.options[te]=J[te]);for(te in q)!P.call(q,te)||(this.options[te]=q[te])}return O.prototype.buildObject=function(q){var te,J,oe,se,Q,U;return te=this.options.attrkey,J=this.options.charkey,1===Object.keys(q).length&&this.options.rootName===D[.2].rootName?q=q[Q=Object.keys(q)[0]]:Q=this.options.rootName,U=this,oe=function(ae,xe){var Oe,re,ue,z,$;if("object"!=typeof xe)U.options.cdata&&B(xe)?ae.raw(W(xe)):ae.txt(xe);else if(Array.isArray(xe)){for(z in xe)if(P.call(xe,z))for($ in re=xe[z])ue=re[$],ae=oe(ae.ele($),ue).up()}else for($ in xe)if(P.call(xe,$))if(re=xe[$],$===te){if("object"==typeof re)for(Oe in re)ae=ae.att(Oe,re[Oe])}else if($===J)ae=U.options.cdata&&B(re)?ae.raw(W(re)):ae.txt(re);else if(Array.isArray(re))for(z in re)!P.call(re,z)||(ae="string"==typeof(ue=re[z])?U.options.cdata&&B(ue)?ae.ele($).raw(W(ue)).up():ae.ele($,ue).up():oe(ae.ele($),ue).up());else"object"==typeof re?ae=oe(ae.ele($),re).up():"string"==typeof re&&U.options.cdata&&B(re)?ae=ae.ele($).raw(W(re)).up():(null==re&&(re=""),ae=ae.ele($,re.toString()).up());return ae},se=Y.create(Q,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),oe(se,q).end(this.options.renderOpts)},O}()}).call(this)},7067:function(Be,Ce){(function(){Ce.defaults={.1:{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},.2:{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:"\n"},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(this)},2238:function(Be,Ce,V){(function(){"use strict";var Y,D,H,B,W,P,O,q,te=function(se,Q){return function(){return se.apply(Q,arguments)}},oe={}.hasOwnProperty;O=V(1503),H=V(9069),Y=V(4922),P=V(3749),q=V(2944).setImmediate,D=V(7067).defaults,B=function(se){return"object"==typeof se&&null!=se&&0===Object.keys(se).length},W=function(se,Q,U){var ae,xe;for(ae=0,xe=se.length;ae<xe;ae++)Q=(0,se[ae])(Q,U);return Q},Ce.Parser=function(se){function Q(U){var ae,xe;if(this.parseStringPromise=te(this.parseStringPromise,this),this.parseString=te(this.parseString,this),this.reset=te(this.reset,this),this.assignOrPush=te(this.assignOrPush,this),this.processAsync=te(this.processAsync,this),!(this instanceof Ce.Parser))return new Ce.Parser(U);for(ae in this.options={},xe=D[.2])!oe.call(xe,ae)||(this.options[ae]=xe[ae]);for(ae in U)!oe.call(U,ae)||(this.options[ae]=U[ae]);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(P.normalize)),this.reset()}return function(se,Q){for(var U in Q)oe.call(Q,U)&&(se[U]=Q[U]);function ae(){this.constructor=se}ae.prototype=Q.prototype,se.prototype=new ae,se.__super__=Q.prototype}(Q,se),Q.prototype.processAsync=function(){var U,ae;try{return this.remaining.length<=this.options.chunkSize?(U=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(U),this.saxParser.close()):(U=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(U),q(this.processAsync))}catch(xe){if(ae=xe,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(ae)}},Q.prototype.assignOrPush=function(U,ae,xe){return ae in U?(U[ae]instanceof Array||(U[ae]=[U[ae]]),U[ae].push(xe)):U[ae]=this.options.explicitArray?[xe]:xe},Q.prototype.reset=function(){var U,ae,xe,Oe,re;return this.removeAllListeners(),this.saxParser=O.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=(re=this,function(ue){if(re.saxParser.resume(),!re.saxParser.errThrown)return re.saxParser.errThrown=!0,re.emit("error",ue)}),this.saxParser.onend=function(re){return function(){if(!re.saxParser.ended)return re.saxParser.ended=!0,re.emit("end",re.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,Oe=[],U=this.options.attrkey,ae=this.options.charkey,this.saxParser.onopentag=function(re){return function(ue){var z,$,ne,ge,Ue;if((ne={})[ae]="",!re.options.ignoreAttrs)for(z in Ue=ue.attributes)!oe.call(Ue,z)||(!(U in ne)&&!re.options.mergeAttrs&&(ne[U]={}),$=re.options.attrValueProcessors?W(re.options.attrValueProcessors,ue.attributes[z],z):ue.attributes[z],ge=re.options.attrNameProcessors?W(re.options.attrNameProcessors,z):z,re.options.mergeAttrs?re.assignOrPush(ne,ge,$):ne[U][ge]=$);return ne["#name"]=re.options.tagNameProcessors?W(re.options.tagNameProcessors,ue.name):ue.name,re.options.xmlns&&(ne[re.options.xmlnskey]={uri:ue.uri,local:ue.local}),Oe.push(ne)}}(this),this.saxParser.onclosetag=function(re){return function(){var ue,z,$,ne,ge,Ue,Re,rt,Pe,at;if(Ue=Oe.pop(),ge=Ue["#name"],(!re.options.explicitChildren||!re.options.preserveChildrenOrder)&&delete Ue["#name"],!0===Ue.cdata&&(ue=Ue.cdata,delete Ue.cdata),Pe=Oe[Oe.length-1],Ue[ae].match(/^\s*$/)&&!ue?(z=Ue[ae],delete Ue[ae]):(re.options.trim&&(Ue[ae]=Ue[ae].trim()),re.options.normalize&&(Ue[ae]=Ue[ae].replace(/\s{2,}/g," ").trim()),Ue[ae]=re.options.valueProcessors?W(re.options.valueProcessors,Ue[ae],ge):Ue[ae],1===Object.keys(Ue).length&&ae in Ue&&!re.EXPLICIT_CHARKEY&&(Ue=Ue[ae])),B(Ue)&&(Ue=""!==re.options.emptyTag?re.options.emptyTag:z),null!=re.options.validator&&(at="/"+function(){var xt,He,ft;for(ft=[],xt=0,He=Oe.length;xt<He;xt++)ft.push((ne=Oe[xt])["#name"]);return ft}().concat(ge).join("/"),function(){try{Ue=re.options.validator(at,Pe&&Pe[ge],Ue)}catch(He){return re.emit("error",He)}}()),re.options.explicitChildren&&!re.options.mergeAttrs&&"object"==typeof Ue)if(re.options.preserveChildrenOrder){if(Pe){for($ in Pe[re.options.childkey]=Pe[re.options.childkey]||[],Re={},Ue)!oe.call(Ue,$)||(Re[$]=Ue[$]);Pe[re.options.childkey].push(Re),delete Ue["#name"],1===Object.keys(Ue).length&&ae in Ue&&!re.EXPLICIT_CHARKEY&&(Ue=Ue[ae])}}else ne={},re.options.attrkey in Ue&&(ne[re.options.attrkey]=Ue[re.options.attrkey],delete Ue[re.options.attrkey]),!re.options.charsAsChildren&&re.options.charkey in Ue&&(ne[re.options.charkey]=Ue[re.options.charkey],delete Ue[re.options.charkey]),Object.getOwnPropertyNames(Ue).length>0&&(ne[re.options.childkey]=Ue),Ue=ne;return Oe.length>0?re.assignOrPush(Pe,ge,Ue):(re.options.explicitRoot&&(rt=Ue,(Ue={})[ge]=rt),re.resultObject=Ue,re.saxParser.ended=!0,re.emit("end",re.resultObject))}}(this),xe=function(re){return function(ue){var z,$;if($=Oe[Oe.length-1])return $[ae]+=ue,re.options.explicitChildren&&re.options.preserveChildrenOrder&&re.options.charsAsChildren&&(re.options.includeWhiteChars||""!==ue.replace(/\\n/g,"").trim())&&($[re.options.childkey]=$[re.options.childkey]||[],(z={"#name":"__text__"})[ae]=ue,re.options.normalize&&(z[ae]=z[ae].replace(/\s{2,}/g," ").trim()),$[re.options.childkey].push(z)),$}}(this),this.saxParser.ontext=xe,this.saxParser.oncdata=function(ue){var z;if(z=xe(ue))return z.cdata=!0}},Q.prototype.parseString=function(U,ae){var xe;null!=ae&&"function"==typeof ae&&(this.on("end",function(Oe){return this.reset(),ae(null,Oe)}),this.on("error",function(Oe){return this.reset(),ae(Oe)}));try{return""===(U=U.toString()).trim()?(this.emit("end",null),!0):(U=Y.stripBOM(U),this.options.async?(this.remaining=U,q(this.processAsync),this.saxParser):this.saxParser.write(U).close())}catch(Oe){if(xe=Oe,!this.saxParser.errThrown&&!this.saxParser.ended)return this.emit("error",xe),this.saxParser.errThrown=!0;if(this.saxParser.ended)throw xe}},Q.prototype.parseStringPromise=function(U){return new Promise((ae=this,function(xe,Oe){return ae.parseString(U,function(re,ue){return re?Oe(re):xe(ue)})}));var ae},Q}(H),Ce.parseString=function(se,Q,U){var ae,xe;return null!=U?("function"==typeof U&&(ae=U),"object"==typeof Q&&(xe=Q)):("function"==typeof Q&&(ae=Q),xe={}),new Ce.Parser(xe).parseString(se,ae)},Ce.parseStringPromise=function(se,Q){var U;return"object"==typeof Q&&(U=Q),new Ce.Parser(U).parseStringPromise(se)}}).call(this)},3749:function(Be,Ce){(function(){"use strict";var V;V=new RegExp(/(?!xmlns)^.*:/),Ce.normalize=function(Y){return Y.toLowerCase()},Ce.firstCharLowerCase=function(Y){return Y.charAt(0).toLowerCase()+Y.slice(1)},Ce.stripPrefix=function(Y){return Y.replace(V,"")},Ce.parseNumbers=function(Y){return isNaN(Y)||(Y=Y%1==0?parseInt(Y,10):parseFloat(Y)),Y},Ce.parseBooleans=function(Y){return/^(?:true|false)$/i.test(Y)&&(Y="true"===Y.toLowerCase()),Y}}).call(this)},5452:function(Be,Ce,V){(function(){"use strict";var Y,D,H,B,P={}.hasOwnProperty;D=V(7067),Y=V(4032),H=V(2238),B=V(3749),Ce.defaults=D.defaults,Ce.processors=B,Ce.ValidationError=function(O){function q(te){this.message=te}return function(O,q){for(var te in q)P.call(q,te)&&(O[te]=q[te]);function J(){this.constructor=O}J.prototype=q.prototype,O.prototype=new J,O.__super__=q.prototype}(q,Error),q}(),Ce.Builder=Y.Builder,Ce.Parser=H.Parser,Ce.parseString=H.parseString,Ce.parseStringPromise=H.parseStringPromise}).call(this)},599:function(Be){(function(){Be.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(this)},2269:function(Be){(function(){Be.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(this)},3452:function(Be){(function(){var Ce,V,Y,D,H,B,W,P=[].slice,O={}.hasOwnProperty;Ce=function(){var q,te,J,oe,se,Q;if(Q=arguments[0],se=2<=arguments.length?P.call(arguments,1):[],H(Object.assign))Object.assign.apply(null,arguments);else for(q=0,J=se.length;q<J;q++)if(null!=(oe=se[q]))for(te in oe)!O.call(oe,te)||(Q[te]=oe[te]);return Q},H=function(q){return!!q&&"[object Function]"===Object.prototype.toString.call(q)},B=function(q){var te;return!!q&&("function"==(te=typeof q)||"object"===te)},Y=function(q){return H(Array.isArray)?Array.isArray(q):"[object Array]"===Object.prototype.toString.call(q)},D=function(q){var te;if(Y(q))return!q.length;for(te in q)if(O.call(q,te))return!1;return!0},W=function(q){var te,J;return B(q)&&(J=Object.getPrototypeOf(q))&&(te=J.constructor)&&"function"==typeof te&&te instanceof te&&Function.prototype.toString.call(te)===Function.prototype.toString.call(Object)},V=function(q){return H(q.valueOf)?q.valueOf():q},Be.exports.assign=Ce,Be.exports.isFunction=H,Be.exports.isObject=B,Be.exports.isArray=Y,Be.exports.isEmpty=D,Be.exports.isPlainObject=W,Be.exports.getValue=V}).call(this)},6316:function(Be){(function(){Be.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(this)},5968:function(Be,Ce,V){(function(){var Y;Y=V(2269),V(8563),Be.exports=function(){function B(W,P,O){if(this.parent=W,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),null==P)throw new Error("Missing attribute name. "+this.debugInfo(P));this.name=this.stringify.name(P),this.value=this.stringify.attValue(O),this.type=Y.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(B.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(B.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(B.prototype,"textContent",{get:function(){return this.value},set:function(W){return this.value=W||""}}),Object.defineProperty(B.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(B.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(B.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(B.prototype,"specified",{get:function(){return!0}}),B.prototype.clone=function(){return Object.create(this)},B.prototype.toString=function(W){return this.options.writer.attribute(this,this.options.writer.filterOptions(W))},B.prototype.debugInfo=function(W){return null==(W=W||this.name)?"parent: <"+this.parent.name+">":"attribute: {"+W+"}, parent: <"+this.parent.name+">"},B.prototype.isEqualNode=function(W){return!(W.namespaceURI!==this.namespaceURI||W.prefix!==this.prefix||W.localName!==this.localName||W.value!==this.value)},B}()}).call(this)},1361:function(Be,Ce,V){(function(){var Y,H,W={}.hasOwnProperty;Y=V(2269),H=V(2182),Be.exports=function(P){function O(q,te){if(O.__super__.constructor.call(this,q),null==te)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=Y.CData,this.value=this.stringify.cdata(te)}return function(P,O){for(var q in O)W.call(O,q)&&(P[q]=O[q]);function te(){this.constructor=P}te.prototype=O.prototype,P.prototype=new te,P.__super__=O.prototype}(O,P),O.prototype.clone=function(){return Object.create(this)},O.prototype.toString=function(q){return this.options.writer.cdata(this,this.options.writer.filterOptions(q))},O}(H)}).call(this)},2182:function(Be,Ce,V){(function(){var D,B={}.hasOwnProperty;D=V(8563),Be.exports=function(W){function P(O){P.__super__.constructor.call(this,O),this.value=""}return function(W,P){for(var O in P)B.call(P,O)&&(W[O]=P[O]);function q(){this.constructor=W}q.prototype=P.prototype,W.prototype=new q,W.__super__=P.prototype}(P,W),Object.defineProperty(P.prototype,"data",{get:function(){return this.value},set:function(O){return this.value=O||""}}),Object.defineProperty(P.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(P.prototype,"textContent",{get:function(){return this.value},set:function(O){return this.value=O||""}}),P.prototype.clone=function(){return Object.create(this)},P.prototype.substringData=function(O,q){throw new Error("This DOM method is not implemented."+this.debugInfo())},P.prototype.appendData=function(O){throw new Error("This DOM method is not implemented."+this.debugInfo())},P.prototype.insertData=function(O,q){throw new Error("This DOM method is not implemented."+this.debugInfo())},P.prototype.deleteData=function(O,q){throw new Error("This DOM method is not implemented."+this.debugInfo())},P.prototype.replaceData=function(O,q,te){throw new Error("This DOM method is not implemented."+this.debugInfo())},P.prototype.isEqualNode=function(O){return!(!P.__super__.isEqualNode.apply(this,arguments).isEqualNode(O)||O.data!==this.data)},P}(D)}).call(this)},2516:function(Be,Ce,V){(function(){var Y,D,W={}.hasOwnProperty;Y=V(2269),D=V(2182),Be.exports=function(P){function O(q,te){if(O.__super__.constructor.call(this,q),null==te)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=Y.Comment,this.value=this.stringify.comment(te)}return function(P,O){for(var q in O)W.call(O,q)&&(P[q]=O[q]);function te(){this.constructor=P}te.prototype=O.prototype,P.prototype=new te,P.__super__=O.prototype}(O,P),O.prototype.clone=function(){return Object.create(this)},O.prototype.toString=function(q){return this.options.writer.comment(this,this.options.writer.filterOptions(q))},O}(D)}).call(this)},5806:function(Be,Ce,V){(function(){var D,H;D=V(9276),H=V(3735),Be.exports=function(){function B(){this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new D,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=Object.create(this.defaultParams)}return Object.defineProperty(B.prototype,"parameterNames",{get:function(){return new H(Object.keys(this.defaultParams))}}),B.prototype.getParameter=function(W){return this.params.hasOwnProperty(W)?this.params[W]:null},B.prototype.canSetParameter=function(W,P){return!0},B.prototype.setParameter=function(W,P){return null!=P?this.params[W]=P:delete this.params[W]},B}()}).call(this)},9276:function(Be){(function(){Be.exports=function(){function V(){}return V.prototype.handleError=function(Y){throw new Error(Y)},V}()}).call(this)},9906:function(Be){(function(){Be.exports=function(){function V(){}return V.prototype.hasFeature=function(Y,D){return!0},V.prototype.createDocumentType=function(Y,D,H){throw new Error("This DOM method is not implemented.")},V.prototype.createDocument=function(Y,D,H){throw new Error("This DOM method is not implemented.")},V.prototype.createHTMLDocument=function(Y){throw new Error("This DOM method is not implemented.")},V.prototype.getFeature=function(Y,D){throw new Error("This DOM method is not implemented.")},V}()}).call(this)},3735:function(Be){(function(){Be.exports=function(){function V(Y){this.arr=Y||[]}return Object.defineProperty(V.prototype,"length",{get:function(){return this.arr.length}}),V.prototype.item=function(Y){return this.arr[Y]||null},V.prototype.contains=function(Y){return-1!==this.arr.indexOf(Y)},V}()}).call(this)},7274:function(Be,Ce,V){(function(){var Y,H,W={}.hasOwnProperty;H=V(8563),Y=V(2269),Be.exports=function(P){function O(q,te,J,oe,se,Q){if(O.__super__.constructor.call(this,q),null==te)throw new Error("Missing DTD element name. "+this.debugInfo());if(null==J)throw new Error("Missing DTD attribute name. "+this.debugInfo(te));if(!oe)throw new Error("Missing DTD attribute type. "+this.debugInfo(te));if(!se)throw new Error("Missing DTD attribute default. "+this.debugInfo(te));if(0!==se.indexOf("#")&&(se="#"+se),!se.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(te));if(Q&&!se.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(te));this.elementName=this.stringify.name(te),this.type=Y.AttributeDeclaration,this.attributeName=this.stringify.name(J),this.attributeType=this.stringify.dtdAttType(oe),Q&&(this.defaultValue=this.stringify.dtdAttDefault(Q)),this.defaultValueType=se}return function(P,O){for(var q in O)W.call(O,q)&&(P[q]=O[q]);function te(){this.constructor=P}te.prototype=O.prototype,P.prototype=new te,P.__super__=O.prototype}(O,P),O.prototype.toString=function(q){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(q))},O}(H)}).call(this)},2068:function(Be,Ce,V){(function(){var Y,H,W={}.hasOwnProperty;H=V(8563),Y=V(2269),Be.exports=function(P){function O(q,te,J){if(O.__super__.constructor.call(this,q),null==te)throw new Error("Missing DTD element name. "+this.debugInfo());J||(J="(#PCDATA)"),Array.isArray(J)&&(J="("+J.join(",")+")"),this.name=this.stringify.name(te),this.type=Y.ElementDeclaration,this.value=this.stringify.dtdElementValue(J)}return function(P,O){for(var q in O)W.call(O,q)&&(P[q]=O[q]);function te(){this.constructor=P}te.prototype=O.prototype,P.prototype=new te,P.__super__=O.prototype}(O,P),O.prototype.toString=function(q){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(q))},O}(H)}).call(this)},8349:function(Be,Ce,V){(function(){var Y,H,B,P={}.hasOwnProperty;B=V(3452).isObject,H=V(8563),Y=V(2269),Be.exports=function(O){function q(te,J,oe,se){if(q.__super__.constructor.call(this,te),null==oe)throw new Error("Missing DTD entity name. "+this.debugInfo(oe));if(null==se)throw new Error("Missing DTD entity value. "+this.debugInfo(oe));if(this.pe=!!J,this.name=this.stringify.name(oe),this.type=Y.EntityDeclaration,B(se)){if(!se.pubID&&!se.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(oe));if(se.pubID&&!se.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(oe));if(this.internal=!1,null!=se.pubID&&(this.pubID=this.stringify.dtdPubID(se.pubID)),null!=se.sysID&&(this.sysID=this.stringify.dtdSysID(se.sysID)),null!=se.nData&&(this.nData=this.stringify.dtdNData(se.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(oe))}else this.value=this.stringify.dtdEntityValue(se),this.internal=!0}return function(O,q){for(var te in q)P.call(q,te)&&(O[te]=q[te]);function J(){this.constructor=O}J.prototype=q.prototype,O.prototype=new J,O.__super__=q.prototype}(q,O),Object.defineProperty(q.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(q.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(q.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(q.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(q.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(q.prototype,"xmlVersion",{get:function(){return null}}),q.prototype.toString=function(te){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(te))},q}(H)}).call(this)},3087:function(Be,Ce,V){(function(){var Y,H,W={}.hasOwnProperty;H=V(8563),Y=V(2269),Be.exports=function(P){function O(q,te,J){if(O.__super__.constructor.call(this,q),null==te)throw new Error("Missing DTD notation name. "+this.debugInfo(te));if(!J.pubID&&!J.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(te));this.name=this.stringify.name(te),this.type=Y.NotationDeclaration,null!=J.pubID&&(this.pubID=this.stringify.dtdPubID(J.pubID)),null!=J.sysID&&(this.sysID=this.stringify.dtdSysID(J.sysID))}return function(P,O){for(var q in O)W.call(O,q)&&(P[q]=O[q]);function te(){this.constructor=P}te.prototype=O.prototype,P.prototype=new te,P.__super__=O.prototype}(O,P),Object.defineProperty(O.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(O.prototype,"systemId",{get:function(){return this.sysID}}),O.prototype.toString=function(q){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(q))},O}(H)}).call(this)},4789:function(Be,Ce,V){(function(){var Y,H,B,P={}.hasOwnProperty;B=V(3452).isObject,H=V(8563),Y=V(2269),Be.exports=function(O){function q(te,J,oe,se){var Q;q.__super__.constructor.call(this,te),B(J)&&(J=(Q=J).version,oe=Q.encoding,se=Q.standalone),J||(J="1.0"),this.type=Y.Declaration,this.version=this.stringify.xmlVersion(J),null!=oe&&(this.encoding=this.stringify.xmlEncoding(oe)),null!=se&&(this.standalone=this.stringify.xmlStandalone(se))}return function(O,q){for(var te in q)P.call(q,te)&&(O[te]=q[te]);function J(){this.constructor=O}J.prototype=q.prototype,O.prototype=new J,O.__super__=q.prototype}(q,O),q.prototype.toString=function(te){return this.options.writer.declaration(this,this.options.writer.filterOptions(te))},q}(H)}).call(this)},9195:function(Be,Ce,V){(function(){var Y,D,H,B,W,O,q,te,oe={}.hasOwnProperty;te=V(3452).isObject,q=V(8563),Y=V(2269),D=V(7274),B=V(8349),H=V(2068),W=V(3087),O=V(5264),Be.exports=function(se){function Q(U,ae,xe){var Oe,re,ue,z,$,ne;if(Q.__super__.constructor.call(this,U),this.type=Y.DocType,U.children)for(re=0,ue=(z=U.children).length;re<ue;re++)if((Oe=z[re]).type===Y.Element){this.name=Oe.name;break}this.documentObject=U,te(ae)&&(ae=($=ae).pubID,xe=$.sysID),null==xe&&(xe=(ne=[ae,xe])[0],ae=ne[1]),null!=ae&&(this.pubID=this.stringify.dtdPubID(ae)),null!=xe&&(this.sysID=this.stringify.dtdSysID(xe))}return function(se,Q){for(var U in Q)oe.call(Q,U)&&(se[U]=Q[U]);function ae(){this.constructor=se}ae.prototype=Q.prototype,se.prototype=new ae,se.__super__=Q.prototype}(Q,se),Object.defineProperty(Q.prototype,"entities",{get:function(){var U,ae,xe,Oe,re;for(Oe={},ae=0,xe=(re=this.children).length;ae<xe;ae++)(U=re[ae]).type===Y.EntityDeclaration&&!U.pe&&(Oe[U.name]=U);return new O(Oe)}}),Object.defineProperty(Q.prototype,"notations",{get:function(){var U,ae,xe,Oe,re;for(Oe={},ae=0,xe=(re=this.children).length;ae<xe;ae++)(U=re[ae]).type===Y.NotationDeclaration&&(Oe[U.name]=U);return new O(Oe)}}),Object.defineProperty(Q.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(Q.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(Q.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Q.prototype.element=function(U,ae){var xe;return xe=new H(this,U,ae),this.children.push(xe),this},Q.prototype.attList=function(U,ae,xe,Oe,re){var ue;return ue=new D(this,U,ae,xe,Oe,re),this.children.push(ue),this},Q.prototype.entity=function(U,ae){var xe;return xe=new B(this,!1,U,ae),this.children.push(xe),this},Q.prototype.pEntity=function(U,ae){var xe;return xe=new B(this,!0,U,ae),this.children.push(xe),this},Q.prototype.notation=function(U,ae){var xe;return xe=new W(this,U,ae),this.children.push(xe),this},Q.prototype.toString=function(U){return this.options.writer.docType(this,this.options.writer.filterOptions(U))},Q.prototype.ele=function(U,ae){return this.element(U,ae)},Q.prototype.att=function(U,ae,xe,Oe,re){return this.attList(U,ae,xe,Oe,re)},Q.prototype.ent=function(U,ae){return this.entity(U,ae)},Q.prototype.pent=function(U,ae){return this.pEntity(U,ae)},Q.prototype.not=function(U,ae){return this.notation(U,ae)},Q.prototype.up=function(){return this.root()||this.documentObject},Q.prototype.isEqualNode=function(U){return!(!Q.__super__.isEqualNode.apply(this,arguments).isEqualNode(U)||U.name!==this.name||U.publicId!==this.publicId||U.systemId!==this.systemId)},Q}(q)}).call(this)},519:function(Be,Ce,V){(function(){var Y,D,H,W,P,O,q,J={}.hasOwnProperty;q=V(3452).isPlainObject,H=V(9906),D=V(5806),W=V(8563),Y=V(2269),O=V(5041),P=V(4354),Be.exports=function(oe){function se(Q){se.__super__.constructor.call(this,null),this.name="#document",this.type=Y.Document,this.documentURI=null,this.domConfig=new D,Q||(Q={}),Q.writer||(Q.writer=new P),this.options=Q,this.stringify=new O(Q)}return function(oe,se){for(var Q in se)J.call(se,Q)&&(oe[Q]=se[Q]);function U(){this.constructor=oe}U.prototype=se.prototype,oe.prototype=new U,oe.__super__=se.prototype}(se,oe),Object.defineProperty(se.prototype,"implementation",{value:new H}),Object.defineProperty(se.prototype,"doctype",{get:function(){var Q,U,ae,xe;for(U=0,ae=(xe=this.children).length;U<ae;U++)if((Q=xe[U]).type===Y.DocType)return Q;return null}}),Object.defineProperty(se.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(se.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(se.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(se.prototype,"xmlEncoding",{get:function(){return 0!==this.children.length&&this.children[0].type===Y.Declaration?this.children[0].encoding:null}}),Object.defineProperty(se.prototype,"xmlStandalone",{get:function(){return 0!==this.children.length&&this.children[0].type===Y.Declaration&&"yes"===this.children[0].standalone}}),Object.defineProperty(se.prototype,"xmlVersion",{get:function(){return 0!==this.children.length&&this.children[0].type===Y.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(se.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(se.prototype,"origin",{get:function(){return null}}),Object.defineProperty(se.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(se.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(se.prototype,"contentType",{get:function(){return null}}),se.prototype.end=function(Q){var U;return U={},Q?q(Q)&&(U=Q,Q=this.options.writer):Q=this.options.writer,Q.document(this,Q.filterOptions(U))},se.prototype.toString=function(Q){return this.options.writer.document(this,this.options.writer.filterOptions(Q))},se.prototype.createElement=function(Q){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.createTextNode=function(Q){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.createComment=function(Q){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.createCDATASection=function(Q){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.createProcessingInstruction=function(Q,U){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.createAttribute=function(Q){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.createEntityReference=function(Q){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.getElementsByTagName=function(Q){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.importNode=function(Q,U){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.createElementNS=function(Q,U){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.createAttributeNS=function(Q,U){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.getElementsByTagNameNS=function(Q,U){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.getElementById=function(Q){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.adoptNode=function(Q){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.renameNode=function(Q,U,ae){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.getElementsByClassName=function(Q){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.createEvent=function(Q){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.createNodeIterator=function(Q,U,ae){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.createTreeWalker=function(Q,U,ae){throw new Error("This DOM method is not implemented."+this.debugInfo())},se}(W)}).call(this)},1105:function(Be,Ce,V){(function(){var Y,D,H,B,W,P,O,q,te,J,oe,se,U,ae,xe,Oe,re,ue,z,$,ne,ge,Ue,Re={}.hasOwnProperty;Ue=V(3452),ne=Ue.isObject,$=Ue.isFunction,ge=Ue.isPlainObject,z=Ue.getValue,Y=V(2269),se=V(519),U=V(3352),B=V(1361),W=V(2516),xe=V(9942),ue=V(474),ae=V(4666),J=V(4789),oe=V(9195),P=V(7274),q=V(8349),O=V(2068),te=V(3087),H=V(5968),re=V(5041),Oe=V(4354),D=V(6316),Be.exports=function(){function rt(Pe,at,xt){var He;this.name="?xml",this.type=Y.Document,Pe||(Pe={}),He={},Pe.writer?ge(Pe.writer)&&(He=Pe.writer,Pe.writer=new Oe):Pe.writer=new Oe,this.options=Pe,this.writer=Pe.writer,this.writerOptions=this.writer.filterOptions(He),this.stringify=new re(Pe),this.onDataCallback=at||function(){},this.onEndCallback=xt||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return rt.prototype.createChildNode=function(Pe){var xt,He,ft,gt,bt,kn,Ut;switch(Pe.type){case Y.CData:this.cdata(Pe.value);break;case Y.Comment:this.comment(Pe.value);break;case Y.Element:for(xt in He={},kn=Pe.attribs)!Re.call(kn,xt)||(He[xt]=kn[xt].value);this.node(Pe.name,He);break;case Y.Dummy:this.dummy();break;case Y.Raw:this.raw(Pe.value);break;case Y.Text:this.text(Pe.value);break;case Y.ProcessingInstruction:this.instruction(Pe.target,Pe.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+Pe.constructor.name)}for(gt=0,bt=(Ut=Pe.children).length;gt<bt;gt++)this.createChildNode(ft=Ut[gt]),ft.type===Y.Element&&this.up();return this},rt.prototype.dummy=function(){return this},rt.prototype.node=function(Pe,at,xt){var He;if(null==Pe)throw new Error("Missing node name.");if(this.root&&-1===this.currentLevel)throw new Error("Document can only have one root node. "+this.debugInfo(Pe));return this.openCurrent(),Pe=z(Pe),null==at&&(at={}),at=z(at),ne(at)||(xt=(He=[at,xt])[0],at=He[1]),this.currentNode=new U(this,Pe,at),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,null!=xt&&this.text(xt),this},rt.prototype.element=function(Pe,at,xt){var He,ft,gt,bt,kn,Ut;if(this.currentNode&&this.currentNode.type===Y.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(Pe)||ne(Pe)||$(Pe))for(bt=this.options.noValidation,this.options.noValidation=!0,(Ut=new se(this.options).element("TEMP_ROOT")).element(Pe),this.options.noValidation=bt,ft=0,gt=(kn=Ut.children).length;ft<gt;ft++)this.createChildNode(He=kn[ft]),He.type===Y.Element&&this.up();else this.node(Pe,at,xt);return this},rt.prototype.attribute=function(Pe,at){var xt;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(Pe));if(null!=Pe&&(Pe=z(Pe)),ne(Pe))for(xt in Pe)!Re.call(Pe,xt)||this.attribute(xt,Pe[xt]);else $(at)&&(at=at.apply()),this.options.keepNullAttributes&&null==at?this.currentNode.attribs[Pe]=new H(this,Pe,""):null!=at&&(this.currentNode.attribs[Pe]=new H(this,Pe,at));return this},rt.prototype.text=function(Pe){var at;return this.openCurrent(),at=new ue(this,Pe),this.onData(this.writer.text(at,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},rt.prototype.cdata=function(Pe){var at;return this.openCurrent(),at=new B(this,Pe),this.onData(this.writer.cdata(at,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},rt.prototype.comment=function(Pe){var at;return this.openCurrent(),at=new W(this,Pe),this.onData(this.writer.comment(at,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},rt.prototype.raw=function(Pe){var at;return this.openCurrent(),at=new xe(this,Pe),this.onData(this.writer.raw(at,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},rt.prototype.instruction=function(Pe,at){var xt,He,gt,bt;if(this.openCurrent(),null!=Pe&&(Pe=z(Pe)),null!=at&&(at=z(at)),Array.isArray(Pe))for(xt=0,gt=Pe.length;xt<gt;xt++)this.instruction(He=Pe[xt]);else if(ne(Pe))for(He in Pe)!Re.call(Pe,He)||this.instruction(He,Pe[He]);else $(at)&&(at=at.apply()),bt=new ae(this,Pe,at),this.onData(this.writer.processingInstruction(bt,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},rt.prototype.declaration=function(Pe,at,xt){var He;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return He=new J(this,Pe,at,xt),this.onData(this.writer.declaration(He,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},rt.prototype.doctype=function(Pe,at,xt){if(this.openCurrent(),null==Pe)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new oe(this,at,xt),this.currentNode.rootNodeName=Pe,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},rt.prototype.dtdElement=function(Pe,at){var xt;return this.openCurrent(),xt=new O(this,Pe,at),this.onData(this.writer.dtdElement(xt,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},rt.prototype.attList=function(Pe,at,xt,He,ft){var gt;return this.openCurrent(),gt=new P(this,Pe,at,xt,He,ft),this.onData(this.writer.dtdAttList(gt,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},rt.prototype.entity=function(Pe,at){var xt;return this.openCurrent(),xt=new q(this,!1,Pe,at),this.onData(this.writer.dtdEntity(xt,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},rt.prototype.pEntity=function(Pe,at){var xt;return this.openCurrent(),xt=new q(this,!0,Pe,at),this.onData(this.writer.dtdEntity(xt,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},rt.prototype.notation=function(Pe,at){var xt;return this.openCurrent(),xt=new te(this,Pe,at),this.onData(this.writer.dtdNotation(xt,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},rt.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},rt.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},rt.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},rt.prototype.openNode=function(Pe){var xt,He,ft;if(!Pe.isOpen){if(!this.root&&0===this.currentLevel&&Pe.type===Y.Element&&(this.root=Pe),xt="",Pe.type===Y.Element){for(He in this.writerOptions.state=D.OpenTag,xt=this.writer.indent(Pe,this.writerOptions,this.currentLevel)+"<"+Pe.name,ft=Pe.attribs)!Re.call(ft,He)||(xt+=this.writer.attribute(ft[He],this.writerOptions,this.currentLevel));xt+=(Pe.children?">":"/>")+this.writer.endline(Pe,this.writerOptions,this.currentLevel),this.writerOptions.state=D.InsideTag}else this.writerOptions.state=D.OpenTag,xt=this.writer.indent(Pe,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+Pe.rootNodeName,Pe.pubID&&Pe.sysID?xt+=' PUBLIC "'+Pe.pubID+'" "'+Pe.sysID+'"':Pe.sysID&&(xt+=' SYSTEM "'+Pe.sysID+'"'),Pe.children?(xt+=" [",this.writerOptions.state=D.InsideTag):(this.writerOptions.state=D.CloseTag,xt+=">"),xt+=this.writer.endline(Pe,this.writerOptions,this.currentLevel);return this.onData(xt,this.currentLevel),Pe.isOpen=!0}},rt.prototype.closeNode=function(Pe){var at;if(!Pe.isClosed)return"",this.writerOptions.state=D.CloseTag,at=Pe.type===Y.Element?this.writer.indent(Pe,this.writerOptions,this.currentLevel)+"</"+Pe.name+">"+this.writer.endline(Pe,this.writerOptions,this.currentLevel):this.writer.indent(Pe,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(Pe,this.writerOptions,this.currentLevel),this.writerOptions.state=D.None,this.onData(at,this.currentLevel),Pe.isClosed=!0},rt.prototype.onData=function(Pe,at){return this.documentStarted=!0,this.onDataCallback(Pe,at+1)},rt.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},rt.prototype.debugInfo=function(Pe){return null==Pe?"":"node: <"+Pe+">"},rt.prototype.ele=function(){return this.element.apply(this,arguments)},rt.prototype.nod=function(Pe,at,xt){return this.node(Pe,at,xt)},rt.prototype.txt=function(Pe){return this.text(Pe)},rt.prototype.dat=function(Pe){return this.cdata(Pe)},rt.prototype.com=function(Pe){return this.comment(Pe)},rt.prototype.ins=function(Pe,at){return this.instruction(Pe,at)},rt.prototype.dec=function(Pe,at,xt){return this.declaration(Pe,at,xt)},rt.prototype.dtd=function(Pe,at,xt){return this.doctype(Pe,at,xt)},rt.prototype.e=function(Pe,at,xt){return this.element(Pe,at,xt)},rt.prototype.n=function(Pe,at,xt){return this.node(Pe,at,xt)},rt.prototype.t=function(Pe){return this.text(Pe)},rt.prototype.d=function(Pe){return this.cdata(Pe)},rt.prototype.c=function(Pe){return this.comment(Pe)},rt.prototype.r=function(Pe){return this.raw(Pe)},rt.prototype.i=function(Pe,at){return this.instruction(Pe,at)},rt.prototype.att=function(){return this.currentNode&&this.currentNode.type===Y.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},rt.prototype.a=function(){return this.currentNode&&this.currentNode.type===Y.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},rt.prototype.ent=function(Pe,at){return this.entity(Pe,at)},rt.prototype.pent=function(Pe,at){return this.pEntity(Pe,at)},rt.prototype.not=function(Pe,at){return this.notation(Pe,at)},rt}()}).call(this)},4173:function(Be,Ce,V){(function(){var Y,H,W={}.hasOwnProperty;H=V(8563),Y=V(2269),Be.exports=function(P){function O(q){O.__super__.constructor.call(this,q),this.type=Y.Dummy}return function(P,O){for(var q in O)W.call(O,q)&&(P[q]=O[q]);function te(){this.constructor=P}te.prototype=O.prototype,P.prototype=new te,P.__super__=O.prototype}(O,P),O.prototype.clone=function(){return Object.create(this)},O.prototype.toString=function(q){return""},O}(H)}).call(this)},3352:function(Be,Ce,V){(function(){var Y,D,B,W,P,O,q,te,oe={}.hasOwnProperty;te=V(3452),q=te.isObject,O=te.isFunction,P=te.getValue,W=V(8563),Y=V(2269),D=V(5968),B=V(5264),Be.exports=function(se){function Q(U,ae,xe){var Oe,re,ue,z;if(Q.__super__.constructor.call(this,U),null==ae)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(ae),this.type=Y.Element,this.attribs={},this.schemaTypeInfo=null,null!=xe&&this.attribute(xe),U.type===Y.Document&&(this.isRoot=!0,this.documentObject=U,U.rootObject=this,U.children))for(re=0,ue=(z=U.children).length;re<ue;re++)if((Oe=z[re]).type===Y.DocType){Oe.name=this.name;break}}return function(se,Q){for(var U in Q)oe.call(Q,U)&&(se[U]=Q[U]);function ae(){this.constructor=se}ae.prototype=Q.prototype,se.prototype=new ae,se.__super__=Q.prototype}(Q,se),Object.defineProperty(Q.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(Q.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(Q.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(Q.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(Q.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(Q.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(Q.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(Q.prototype,"attributes",{get:function(){return(!this.attributeMap||!this.attributeMap.nodes)&&(this.attributeMap=new B(this.attribs)),this.attributeMap}}),Q.prototype.clone=function(){var ae,xe,Oe;for(ae in(xe=Object.create(this)).isRoot&&(xe.documentObject=null),xe.attribs={},Oe=this.attribs)!oe.call(Oe,ae)||(xe.attribs[ae]=Oe[ae].clone());return xe.children=[],this.children.forEach(function(re){var ue;return(ue=re.clone()).parent=xe,xe.children.push(ue)}),xe},Q.prototype.attribute=function(U,ae){var xe;if(null!=U&&(U=P(U)),q(U))for(xe in U)!oe.call(U,xe)||this.attribute(xe,U[xe]);else O(ae)&&(ae=ae.apply()),this.options.keepNullAttributes&&null==ae?this.attribs[U]=new D(this,U,""):null!=ae&&(this.attribs[U]=new D(this,U,ae));return this},Q.prototype.removeAttribute=function(U){var xe,Oe;if(null==U)throw new Error("Missing attribute name. "+this.debugInfo());if(U=P(U),Array.isArray(U))for(xe=0,Oe=U.length;xe<Oe;xe++)delete this.attribs[U[xe]];else delete this.attribs[U];return this},Q.prototype.toString=function(U){return this.options.writer.element(this,this.options.writer.filterOptions(U))},Q.prototype.att=function(U,ae){return this.attribute(U,ae)},Q.prototype.a=function(U,ae){return this.attribute(U,ae)},Q.prototype.getAttribute=function(U){return this.attribs.hasOwnProperty(U)?this.attribs[U].value:null},Q.prototype.setAttribute=function(U,ae){throw new Error("This DOM method is not implemented."+this.debugInfo())},Q.prototype.getAttributeNode=function(U){return this.attribs.hasOwnProperty(U)?this.attribs[U]:null},Q.prototype.setAttributeNode=function(U){throw new Error("This DOM method is not implemented."+this.debugInfo())},Q.prototype.removeAttributeNode=function(U){throw new Error("This DOM method is not implemented."+this.debugInfo())},Q.prototype.getElementsByTagName=function(U){throw new Error("This DOM method is not implemented."+this.debugInfo())},Q.prototype.getAttributeNS=function(U,ae){throw new Error("This DOM method is not implemented."+this.debugInfo())},Q.prototype.setAttributeNS=function(U,ae,xe){throw new Error("This DOM method is not implemented."+this.debugInfo())},Q.prototype.removeAttributeNS=function(U,ae){throw new Error("This DOM method is not implemented."+this.debugInfo())},Q.prototype.getAttributeNodeNS=function(U,ae){throw new Error("This DOM method is not implemented."+this.debugInfo())},Q.prototype.setAttributeNodeNS=function(U){throw new Error("This DOM method is not implemented."+this.debugInfo())},Q.prototype.getElementsByTagNameNS=function(U,ae){throw new Error("This DOM method is not implemented."+this.debugInfo())},Q.prototype.hasAttribute=function(U){return this.attribs.hasOwnProperty(U)},Q.prototype.hasAttributeNS=function(U,ae){throw new Error("This DOM method is not implemented."+this.debugInfo())},Q.prototype.setIdAttribute=function(U,ae){return this.attribs.hasOwnProperty(U)?this.attribs[U].isId:ae},Q.prototype.setIdAttributeNS=function(U,ae,xe){throw new Error("This DOM method is not implemented."+this.debugInfo())},Q.prototype.setIdAttributeNode=function(U,ae){throw new Error("This DOM method is not implemented."+this.debugInfo())},Q.prototype.getElementsByTagName=function(U){throw new Error("This DOM method is not implemented."+this.debugInfo())},Q.prototype.getElementsByTagNameNS=function(U,ae){throw new Error("This DOM method is not implemented."+this.debugInfo())},Q.prototype.getElementsByClassName=function(U){throw new Error("This DOM method is not implemented."+this.debugInfo())},Q.prototype.isEqualNode=function(U){var ae,xe,Oe;if(!Q.__super__.isEqualNode.apply(this,arguments).isEqualNode(U)||U.namespaceURI!==this.namespaceURI||U.prefix!==this.prefix||U.localName!==this.localName||U.attribs.length!==this.attribs.length)return!1;for(ae=xe=0,Oe=this.attribs.length-1;0<=Oe?xe<=Oe:xe>=Oe;ae=0<=Oe?++xe:--xe)if(!this.attribs[ae].isEqualNode(U.attribs[ae]))return!1;return!0},Q}(W)}).call(this)},5264:function(Be){(function(){Be.exports=function(){function V(Y){this.nodes=Y}return Object.defineProperty(V.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),V.prototype.clone=function(){return this.nodes=null},V.prototype.getNamedItem=function(Y){return this.nodes[Y]},V.prototype.setNamedItem=function(Y){var D;return D=this.nodes[Y.nodeName],this.nodes[Y.nodeName]=Y,D||null},V.prototype.removeNamedItem=function(Y){var D;return D=this.nodes[Y],delete this.nodes[Y],D||null},V.prototype.item=function(Y){return this.nodes[Object.keys(this.nodes)[Y]]||null},V.prototype.getNamedItemNS=function(Y,D){throw new Error("This DOM method is not implemented.")},V.prototype.setNamedItemNS=function(Y){throw new Error("This DOM method is not implemented.")},V.prototype.removeNamedItemNS=function(Y,D){throw new Error("This DOM method is not implemented.")},V}()}).call(this)},8563:function(Be,Ce,V){(function(){var Y,D,H,B,W,P,O,q,oe,se,Q,U,ae,xe,Oe,re,ue,z={}.hasOwnProperty;ue=V(3452),re=ue.isObject,Oe=ue.isFunction,xe=ue.isEmpty,ae=ue.getValue,q=null,H=null,B=null,W=null,P=null,Q=null,U=null,se=null,O=null,D=null,oe=null,Y=null,Be.exports=function(){function $(ne){this.parent=ne,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,q||(q=V(3352),H=V(1361),B=V(2516),W=V(4789),P=V(9195),Q=V(9942),U=V(474),se=V(4666),O=V(4173),D=V(2269),oe=V(5112),V(5264),Y=V(599))}return Object.defineProperty($.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty($.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty($.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty($.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty($.prototype,"childNodes",{get:function(){return(!this.childNodeList||!this.childNodeList.nodes)&&(this.childNodeList=new oe(this.children)),this.childNodeList}}),Object.defineProperty($.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty($.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty($.prototype,"previousSibling",{get:function(){var ne;return ne=this.parent.children.indexOf(this),this.parent.children[ne-1]||null}}),Object.defineProperty($.prototype,"nextSibling",{get:function(){var ne;return ne=this.parent.children.indexOf(this),this.parent.children[ne+1]||null}}),Object.defineProperty($.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty($.prototype,"textContent",{get:function(){var ne,ge,Ue,Re,rt;if(this.nodeType===D.Element||this.nodeType===D.DocumentFragment){for(rt="",ge=0,Ue=(Re=this.children).length;ge<Ue;ge++)(ne=Re[ge]).textContent&&(rt+=ne.textContent);return rt}return null},set:function(ne){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),$.prototype.setParent=function(ne){var Ue,Re,rt,Pe;for(this.parent=ne,ne&&(this.options=ne.options,this.stringify=ne.stringify),Pe=[],Ue=0,Re=(rt=this.children).length;Ue<Re;Ue++)Pe.push(rt[Ue].setParent(this));return Pe},$.prototype.element=function(ne,ge,Ue){var Re,Pe,at,xt,He,ft,gt,bt,kn,Ut;if(He=null,null===ge&&null==Ue&&(ge=(bt=[{},null])[0],Ue=bt[1]),null==ge&&(ge={}),ge=ae(ge),re(ge)||(Ue=(kn=[ge,Ue])[0],ge=kn[1]),null!=ne&&(ne=ae(ne)),Array.isArray(ne))for(Pe=0,ft=ne.length;Pe<ft;Pe++)He=this.element(ne[Pe]);else if(Oe(ne))He=this.element(ne.apply());else if(re(ne)){for(xt in ne)if(z.call(ne,xt))if(Oe(Ut=ne[xt])&&(Ut=Ut.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&0===xt.indexOf(this.stringify.convertAttKey))He=this.attribute(xt.substr(this.stringify.convertAttKey.length),Ut);else if(!this.options.separateArrayItems&&Array.isArray(Ut)&&xe(Ut))He=this.dummy();else if(re(Ut)&&xe(Ut))He=this.element(xt);else if(this.options.keepNullNodes||null!=Ut)if(!this.options.separateArrayItems&&Array.isArray(Ut))for(at=0,gt=Ut.length;at<gt;at++)(Re={})[xt]=Ut[at],He=this.element(Re);else re(Ut)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===xt.indexOf(this.stringify.convertTextKey)?He=this.element(Ut):(He=this.element(xt)).element(Ut):He=this.element(xt,Ut);else He=this.dummy()}else He=this.options.keepNullNodes||null!==Ue?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===ne.indexOf(this.stringify.convertTextKey)?this.text(Ue):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&0===ne.indexOf(this.stringify.convertCDataKey)?this.cdata(Ue):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&0===ne.indexOf(this.stringify.convertCommentKey)?this.comment(Ue):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&0===ne.indexOf(this.stringify.convertRawKey)?this.raw(Ue):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&0===ne.indexOf(this.stringify.convertPIKey)?this.instruction(ne.substr(this.stringify.convertPIKey.length),Ue):this.node(ne,ge,Ue):this.dummy();if(null==He)throw new Error("Could not create any elements with: "+ne+". "+this.debugInfo());return He},$.prototype.insertBefore=function(ne,ge,Ue){var Re,rt,Pe,at,xt;if(ne?.type)return at=ge,(Pe=ne).setParent(this),at?(rt=children.indexOf(at),xt=children.splice(rt),children.push(Pe),Array.prototype.push.apply(children,xt)):children.push(Pe),Pe;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(ne));return rt=this.parent.children.indexOf(this),xt=this.parent.children.splice(rt),Re=this.parent.element(ne,ge,Ue),Array.prototype.push.apply(this.parent.children,xt),Re},$.prototype.insertAfter=function(ne,ge,Ue){var Re,rt,Pe;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(ne));return rt=this.parent.children.indexOf(this),Pe=this.parent.children.splice(rt+1),Re=this.parent.element(ne,ge,Ue),Array.prototype.push.apply(this.parent.children,Pe),Re},$.prototype.remove=function(){var ne;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return ne=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[ne,ne-ne+1].concat([])),this.parent},$.prototype.node=function(ne,ge,Ue){var Re,rt;return null!=ne&&(ne=ae(ne)),ge||(ge={}),ge=ae(ge),re(ge)||(Ue=(rt=[ge,Ue])[0],ge=rt[1]),Re=new q(this,ne,ge),null!=Ue&&Re.text(Ue),this.children.push(Re),Re},$.prototype.text=function(ne){var ge;return re(ne)&&this.element(ne),ge=new U(this,ne),this.children.push(ge),this},$.prototype.cdata=function(ne){var ge;return ge=new H(this,ne),this.children.push(ge),this},$.prototype.comment=function(ne){var ge;return ge=new B(this,ne),this.children.push(ge),this},$.prototype.commentBefore=function(ne){var Ue,Re;return Ue=this.parent.children.indexOf(this),Re=this.parent.children.splice(Ue),this.parent.comment(ne),Array.prototype.push.apply(this.parent.children,Re),this},$.prototype.commentAfter=function(ne){var Ue,Re;return Ue=this.parent.children.indexOf(this),Re=this.parent.children.splice(Ue+1),this.parent.comment(ne),Array.prototype.push.apply(this.parent.children,Re),this},$.prototype.raw=function(ne){var ge;return ge=new Q(this,ne),this.children.push(ge),this},$.prototype.dummy=function(){return new O(this)},$.prototype.instruction=function(ne,ge){var Ue,rt,Pe,at;if(null!=ne&&(ne=ae(ne)),null!=ge&&(ge=ae(ge)),Array.isArray(ne))for(Pe=0,at=ne.length;Pe<at;Pe++)this.instruction(Ue=ne[Pe]);else if(re(ne))for(Ue in ne)!z.call(ne,Ue)||this.instruction(Ue,ne[Ue]);else Oe(ge)&&(ge=ge.apply()),rt=new se(this,ne,ge),this.children.push(rt);return this},$.prototype.instructionBefore=function(ne,ge){var Re,rt;return Re=this.parent.children.indexOf(this),rt=this.parent.children.splice(Re),this.parent.instruction(ne,ge),Array.prototype.push.apply(this.parent.children,rt),this},$.prototype.instructionAfter=function(ne,ge){var Re,rt;return Re=this.parent.children.indexOf(this),rt=this.parent.children.splice(Re+1),this.parent.instruction(ne,ge),Array.prototype.push.apply(this.parent.children,rt),this},$.prototype.declaration=function(ne,ge,Ue){var Re,rt;return Re=this.document(),rt=new W(Re,ne,ge,Ue),0===Re.children.length?Re.children.unshift(rt):Re.children[0].type===D.Declaration?Re.children[0]=rt:Re.children.unshift(rt),Re.root()||Re},$.prototype.dtd=function(ne,ge){var Re,rt,Pe,at,xt,He,ft,gt,bt;for(Re=this.document(),rt=new P(Re,ne,ge),Pe=at=0,He=(gt=Re.children).length;at<He;Pe=++at)if(gt[Pe].type===D.DocType)return Re.children[Pe]=rt,rt;for(Pe=xt=0,ft=(bt=Re.children).length;xt<ft;Pe=++xt)if(bt[Pe].isRoot)return Re.children.splice(Pe,0,rt),rt;return Re.children.push(rt),rt},$.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},$.prototype.root=function(){var ne;for(ne=this;ne;){if(ne.type===D.Document)return ne.rootObject;if(ne.isRoot)return ne;ne=ne.parent}},$.prototype.document=function(){var ne;for(ne=this;ne;){if(ne.type===D.Document)return ne;ne=ne.parent}},$.prototype.end=function(ne){return this.document().end(ne)},$.prototype.prev=function(){var ne;if((ne=this.parent.children.indexOf(this))<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[ne-1]},$.prototype.next=function(){var ne;if(-1===(ne=this.parent.children.indexOf(this))||ne===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[ne+1]},$.prototype.importDocument=function(ne){var ge;return(ge=ne.root().clone()).parent=this,ge.isRoot=!1,this.children.push(ge),this},$.prototype.debugInfo=function(ne){var ge,Ue;return null!=(ne=ne||this.name)||null!=(ge=this.parent)&&ge.name?null==ne?"parent: <"+this.parent.name+">":null!=(Ue=this.parent)&&Ue.name?"node: <"+ne+">, parent: <"+this.parent.name+">":"node: <"+ne+">":""},$.prototype.ele=function(ne,ge,Ue){return this.element(ne,ge,Ue)},$.prototype.nod=function(ne,ge,Ue){return this.node(ne,ge,Ue)},$.prototype.txt=function(ne){return this.text(ne)},$.prototype.dat=function(ne){return this.cdata(ne)},$.prototype.com=function(ne){return this.comment(ne)},$.prototype.ins=function(ne,ge){return this.instruction(ne,ge)},$.prototype.doc=function(){return this.document()},$.prototype.dec=function(ne,ge,Ue){return this.declaration(ne,ge,Ue)},$.prototype.e=function(ne,ge,Ue){return this.element(ne,ge,Ue)},$.prototype.n=function(ne,ge,Ue){return this.node(ne,ge,Ue)},$.prototype.t=function(ne){return this.text(ne)},$.prototype.d=function(ne){return this.cdata(ne)},$.prototype.c=function(ne){return this.comment(ne)},$.prototype.r=function(ne){return this.raw(ne)},$.prototype.i=function(ne,ge){return this.instruction(ne,ge)},$.prototype.u=function(){return this.up()},$.prototype.importXMLBuilder=function(ne){return this.importDocument(ne)},$.prototype.replaceChild=function(ne,ge){throw new Error("This DOM method is not implemented."+this.debugInfo())},$.prototype.removeChild=function(ne){throw new Error("This DOM method is not implemented."+this.debugInfo())},$.prototype.appendChild=function(ne){throw new Error("This DOM method is not implemented."+this.debugInfo())},$.prototype.hasChildNodes=function(){return 0!==this.children.length},$.prototype.cloneNode=function(ne){throw new Error("This DOM method is not implemented."+this.debugInfo())},$.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},$.prototype.isSupported=function(ne,ge){return!0},$.prototype.hasAttributes=function(){return 0!==this.attribs.length},$.prototype.compareDocumentPosition=function(ne){var Ue;return this===ne?0:this.document()!==ne.document()?(Ue=Y.Disconnected|Y.ImplementationSpecific,Math.random()<.5?Ue|=Y.Preceding:Ue|=Y.Following,Ue):this.isAncestor(ne)?Y.Contains|Y.Preceding:this.isDescendant(ne)?Y.Contains|Y.Following:this.isPreceding(ne)?Y.Preceding:Y.Following},$.prototype.isSameNode=function(ne){throw new Error("This DOM method is not implemented."+this.debugInfo())},$.prototype.lookupPrefix=function(ne){throw new Error("This DOM method is not implemented."+this.debugInfo())},$.prototype.isDefaultNamespace=function(ne){throw new Error("This DOM method is not implemented."+this.debugInfo())},$.prototype.lookupNamespaceURI=function(ne){throw new Error("This DOM method is not implemented."+this.debugInfo())},$.prototype.isEqualNode=function(ne){var ge,Ue,Re;if(ne.nodeType!==this.nodeType||ne.children.length!==this.children.length)return!1;for(ge=Ue=0,Re=this.children.length-1;0<=Re?Ue<=Re:Ue>=Re;ge=0<=Re?++Ue:--Ue)if(!this.children[ge].isEqualNode(ne.children[ge]))return!1;return!0},$.prototype.getFeature=function(ne,ge){throw new Error("This DOM method is not implemented."+this.debugInfo())},$.prototype.setUserData=function(ne,ge,Ue){throw new Error("This DOM method is not implemented."+this.debugInfo())},$.prototype.getUserData=function(ne){throw new Error("This DOM method is not implemented."+this.debugInfo())},$.prototype.contains=function(ne){return!!ne&&(ne===this||this.isDescendant(ne))},$.prototype.isDescendant=function(ne){var ge,Re,rt,Pe;for(Re=0,rt=(Pe=this.children).length;Re<rt;Re++)if(ne===(ge=Pe[Re])||ge.isDescendant(ne))return!0;return!1},$.prototype.isAncestor=function(ne){return ne.isDescendant(this)},$.prototype.isPreceding=function(ne){var ge,Ue;return ge=this.treePosition(ne),Ue=this.treePosition(this),-1!==ge&&-1!==Ue&&ge<Ue},$.prototype.isFollowing=function(ne){var ge,Ue;return ge=this.treePosition(ne),Ue=this.treePosition(this),-1!==ge&&-1!==Ue&&ge>Ue},$.prototype.treePosition=function(ne){var ge,Ue;return Ue=0,ge=!1,this.foreachTreeNode(this.document(),function(Re){if(Ue++,!ge&&Re===ne)return ge=!0}),ge?Ue:-1},$.prototype.foreachTreeNode=function(ne,ge){var Ue,Re,rt,Pe,at;for(ne||(ne=this.document()),Re=0,rt=(Pe=ne.children).length;Re<rt;Re++){if(at=ge(Ue=Pe[Re]))return at;if(at=this.foreachTreeNode(Ue,ge))return at}},$}()}).call(this)},5112:function(Be){(function(){Be.exports=function(){function V(Y){this.nodes=Y}return Object.defineProperty(V.prototype,"length",{get:function(){return this.nodes.length||0}}),V.prototype.clone=function(){return this.nodes=null},V.prototype.item=function(Y){return this.nodes[Y]||null},V}()}).call(this)},4666:function(Be,Ce,V){(function(){var Y,D,W={}.hasOwnProperty;Y=V(2269),D=V(2182),Be.exports=function(P){function O(q,te,J){if(O.__super__.constructor.call(this,q),null==te)throw new Error("Missing instruction target. "+this.debugInfo());this.type=Y.ProcessingInstruction,this.target=this.stringify.insTarget(te),this.name=this.target,J&&(this.value=this.stringify.insValue(J))}return function(P,O){for(var q in O)W.call(O,q)&&(P[q]=O[q]);function te(){this.constructor=P}te.prototype=O.prototype,P.prototype=new te,P.__super__=O.prototype}(O,P),O.prototype.clone=function(){return Object.create(this)},O.prototype.toString=function(q){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(q))},O.prototype.isEqualNode=function(q){return!(!O.__super__.isEqualNode.apply(this,arguments).isEqualNode(q)||q.target!==this.target)},O}(D)}).call(this)},9942:function(Be,Ce,V){(function(){var Y,D,W={}.hasOwnProperty;Y=V(2269),D=V(8563),Be.exports=function(P){function O(q,te){if(O.__super__.constructor.call(this,q),null==te)throw new Error("Missing raw text. "+this.debugInfo());this.type=Y.Raw,this.value=this.stringify.raw(te)}return function(P,O){for(var q in O)W.call(O,q)&&(P[q]=O[q]);function te(){this.constructor=P}te.prototype=O.prototype,P.prototype=new te,P.__super__=O.prototype}(O,P),O.prototype.clone=function(){return Object.create(this)},O.prototype.toString=function(q){return this.options.writer.raw(this,this.options.writer.filterOptions(q))},O}(D)}).call(this)},7647:function(Be,Ce,V){(function(){var Y,D,B,P={}.hasOwnProperty;Y=V(2269),B=V(3576),D=V(6316),Be.exports=function(O){function q(te,J){this.stream=te,q.__super__.constructor.call(this,J)}return function(O,q){for(var te in q)P.call(q,te)&&(O[te]=q[te]);function J(){this.constructor=O}J.prototype=q.prototype,O.prototype=new J,O.__super__=q.prototype}(q,O),q.prototype.endline=function(te,J,oe){return te.isLastRootNode&&J.state===D.CloseTag?"":q.__super__.endline.call(this,te,J,oe)},q.prototype.document=function(te,J){var se,Q,U,ae,xe,Oe,re,ue;for(se=Q=0,ae=(Oe=te.children).length;Q<ae;se=++Q)Oe[se].isLastRootNode=se===te.children.length-1;for(J=this.filterOptions(J),ue=[],U=0,xe=(re=te.children).length;U<xe;U++)ue.push(this.writeChildNode(re[U],J,0));return ue},q.prototype.attribute=function(te,J,oe){return this.stream.write(q.__super__.attribute.call(this,te,J,oe))},q.prototype.cdata=function(te,J,oe){return this.stream.write(q.__super__.cdata.call(this,te,J,oe))},q.prototype.comment=function(te,J,oe){return this.stream.write(q.__super__.comment.call(this,te,J,oe))},q.prototype.declaration=function(te,J,oe){return this.stream.write(q.__super__.declaration.call(this,te,J,oe))},q.prototype.docType=function(te,J,oe){var Q,U,ae;if(oe||(oe=0),this.openNode(te,J,oe),J.state=D.OpenTag,this.stream.write(this.indent(te,J,oe)),this.stream.write("<!DOCTYPE "+te.root().name),te.pubID&&te.sysID?this.stream.write(' PUBLIC "'+te.pubID+'" "'+te.sysID+'"'):te.sysID&&this.stream.write(' SYSTEM "'+te.sysID+'"'),te.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(te,J,oe)),J.state=D.InsideTag,Q=0,U=(ae=te.children).length;Q<U;Q++)this.writeChildNode(ae[Q],J,oe+1);J.state=D.CloseTag,this.stream.write("]")}return J.state=D.CloseTag,this.stream.write(J.spaceBeforeSlash+">"),this.stream.write(this.endline(te,J,oe)),J.state=D.None,this.closeNode(te,J,oe)},q.prototype.element=function(te,J,oe){var U,ae,xe,Oe,re,z,$;for(re in oe||(oe=0),this.openNode(te,J,oe),J.state=D.OpenTag,this.stream.write(this.indent(te,J,oe)+"<"+te.name),z=te.attribs)!P.call(z,re)||this.attribute(z[re],J,oe);if(ae=0===(U=te.children.length)?null:te.children[0],0===U||te.children.every(function(ne){return(ne.type===Y.Text||ne.type===Y.Raw)&&""===ne.value}))J.allowEmpty?(this.stream.write(">"),J.state=D.CloseTag,this.stream.write("</"+te.name+">")):(J.state=D.CloseTag,this.stream.write(J.spaceBeforeSlash+"/>"));else if(!J.pretty||1!==U||ae.type!==Y.Text&&ae.type!==Y.Raw||null==ae.value){for(this.stream.write(">"+this.endline(te,J,oe)),J.state=D.InsideTag,xe=0,Oe=($=te.children).length;xe<Oe;xe++)this.writeChildNode($[xe],J,oe+1);J.state=D.CloseTag,this.stream.write(this.indent(te,J,oe)+"</"+te.name+">")}else this.stream.write(">"),J.state=D.InsideTag,J.suppressPrettyCount++,this.writeChildNode(ae,J,oe+1),J.suppressPrettyCount--,J.state=D.CloseTag,this.stream.write("</"+te.name+">");return this.stream.write(this.endline(te,J,oe)),J.state=D.None,this.closeNode(te,J,oe)},q.prototype.processingInstruction=function(te,J,oe){return this.stream.write(q.__super__.processingInstruction.call(this,te,J,oe))},q.prototype.raw=function(te,J,oe){return this.stream.write(q.__super__.raw.call(this,te,J,oe))},q.prototype.text=function(te,J,oe){return this.stream.write(q.__super__.text.call(this,te,J,oe))},q.prototype.dtdAttList=function(te,J,oe){return this.stream.write(q.__super__.dtdAttList.call(this,te,J,oe))},q.prototype.dtdElement=function(te,J,oe){return this.stream.write(q.__super__.dtdElement.call(this,te,J,oe))},q.prototype.dtdEntity=function(te,J,oe){return this.stream.write(q.__super__.dtdEntity.call(this,te,J,oe))},q.prototype.dtdNotation=function(te,J,oe){return this.stream.write(q.__super__.dtdNotation.call(this,te,J,oe))},q}(B)}).call(this)},4354:function(Be,Ce,V){(function(){var D,B={}.hasOwnProperty;D=V(3576),Be.exports=function(W){function P(O){P.__super__.constructor.call(this,O)}return function(W,P){for(var O in P)B.call(P,O)&&(W[O]=P[O]);function q(){this.constructor=W}q.prototype=P.prototype,W.prototype=new q,W.__super__=P.prototype}(P,W),P.prototype.document=function(O,q){var J,oe,se,Q;for(q=this.filterOptions(q),se="",J=0,oe=(Q=O.children).length;J<oe;J++)se+=this.writeChildNode(Q[J],q,0);return q.pretty&&se.slice(-q.newline.length)===q.newline&&(se=se.slice(0,-q.newline.length)),se},P}(D)}).call(this)},5041:function(Be){(function(){var V=function(D,H){return function(){return D.apply(H,arguments)}},Y={}.hasOwnProperty;Be.exports=function(){function D(H){var B,W;for(B in this.assertLegalName=V(this.assertLegalName,this),this.assertLegalChar=V(this.assertLegalChar,this),H||(H={}),this.options=H,this.options.version||(this.options.version="1.0"),W=H.stringify||{})!Y.call(W,B)||(this[B]=W[B])}return D.prototype.name=function(H){return this.options.noValidation?H:this.assertLegalName(""+H||"")},D.prototype.text=function(H){return this.options.noValidation?H:this.assertLegalChar(this.textEscape(""+H||""))},D.prototype.cdata=function(H){return this.options.noValidation?H:(H=(H=""+H||"").replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(H))},D.prototype.comment=function(H){if(this.options.noValidation)return H;if((H=""+H||"").match(/--/))throw new Error("Comment text cannot contain double-hypen: "+H);return this.assertLegalChar(H)},D.prototype.raw=function(H){return this.options.noValidation?H:""+H||""},D.prototype.attValue=function(H){return this.options.noValidation?H:this.assertLegalChar(this.attEscape(H=""+H||""))},D.prototype.insTarget=function(H){return this.options.noValidation?H:this.assertLegalChar(""+H||"")},D.prototype.insValue=function(H){if(this.options.noValidation)return H;if((H=""+H||"").match(/\?>/))throw new Error("Invalid processing instruction value: "+H);return this.assertLegalChar(H)},D.prototype.xmlVersion=function(H){if(this.options.noValidation)return H;if(!(H=""+H||"").match(/1\.[0-9]+/))throw new Error("Invalid version number: "+H);return H},D.prototype.xmlEncoding=function(H){if(this.options.noValidation)return H;if(!(H=""+H||"").match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+H);return this.assertLegalChar(H)},D.prototype.xmlStandalone=function(H){return this.options.noValidation?H:H?"yes":"no"},D.prototype.dtdPubID=function(H){return this.options.noValidation?H:this.assertLegalChar(""+H||"")},D.prototype.dtdSysID=function(H){return this.options.noValidation?H:this.assertLegalChar(""+H||"")},D.prototype.dtdElementValue=function(H){return this.options.noValidation?H:this.assertLegalChar(""+H||"")},D.prototype.dtdAttType=function(H){return this.options.noValidation?H:this.assertLegalChar(""+H||"")},D.prototype.dtdAttDefault=function(H){return this.options.noValidation?H:this.assertLegalChar(""+H||"")},D.prototype.dtdEntityValue=function(H){return this.options.noValidation?H:this.assertLegalChar(""+H||"")},D.prototype.dtdNData=function(H){return this.options.noValidation?H:this.assertLegalChar(""+H||"")},D.prototype.convertAttKey="@",D.prototype.convertPIKey="?",D.prototype.convertTextKey="#text",D.prototype.convertCDataKey="#cdata",D.prototype.convertCommentKey="#comment",D.prototype.convertRawKey="#raw",D.prototype.assertLegalChar=function(H){var W;if(this.options.noValidation)return H;if("1.0"===this.options.version){if(W=H.match(/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/))throw new Error("Invalid character in string: "+H+" at index "+W.index)}else if("1.1"===this.options.version&&(W=H.match(/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/)))throw new Error("Invalid character in string: "+H+" at index "+W.index);return H},D.prototype.assertLegalName=function(H){if(this.options.noValidation)return H;if(this.assertLegalChar(H),!H.match(/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/))throw new Error("Invalid character in name");return H},D.prototype.textEscape=function(H){return this.options.noValidation?H:H.replace(this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;")},D.prototype.attEscape=function(H){return this.options.noValidation?H:H.replace(this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;")},D}()}).call(this)},474:function(Be,Ce,V){(function(){var Y,D,W={}.hasOwnProperty;Y=V(2269),D=V(2182),Be.exports=function(P){function O(q,te){if(O.__super__.constructor.call(this,q),null==te)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=Y.Text,this.value=this.stringify.text(te)}return function(P,O){for(var q in O)W.call(O,q)&&(P[q]=O[q]);function te(){this.constructor=P}te.prototype=O.prototype,P.prototype=new te,P.__super__=O.prototype}(O,P),Object.defineProperty(O.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(O.prototype,"wholeText",{get:function(){var q,te,J;for(J="",te=this.previousSibling;te;)J=te.data+J,te=te.previousSibling;for(J+=this.data,q=this.nextSibling;q;)J+=q.data,q=q.nextSibling;return J}}),O.prototype.clone=function(){return Object.create(this)},O.prototype.toString=function(q){return this.options.writer.text(this,this.options.writer.filterOptions(q))},O.prototype.splitText=function(q){throw new Error("This DOM method is not implemented."+this.debugInfo())},O.prototype.replaceWholeText=function(q){throw new Error("This DOM method is not implemented."+this.debugInfo())},O}(D)}).call(this)},3576:function(Be,Ce,V){(function(){var Y,D,Oe,re={}.hasOwnProperty;Oe=V(3452).assign,Y=V(2269),V(4789),V(9195),V(1361),V(2516),V(3352),V(9942),V(474),V(4666),V(4173),V(7274),V(2068),V(8349),V(3087),D=V(6316),Be.exports=function(){function ue(z){var $,ne,ge;for($ in z||(z={}),this.options=z,ne=z.writer||{})!re.call(ne,$)||(ge=ne[$],this["_"+$]=this[$],this[$]=ge)}return ue.prototype.filterOptions=function(z){var $,ne,ge,Ue,Re,rt,Pe,at;return z||(z={}),z=Oe({},this.options,z),($={writer:this}).pretty=z.pretty||!1,$.allowEmpty=z.allowEmpty||!1,$.indent=null!=(ne=z.indent)?ne:"  ",$.newline=null!=(ge=z.newline)?ge:"\n",$.offset=null!=(Ue=z.offset)?Ue:0,$.dontPrettyTextNodes=null!=(Re=null!=(rt=z.dontPrettyTextNodes)?rt:z.dontprettytextnodes)?Re:0,$.spaceBeforeSlash=null!=(Pe=null!=(at=z.spaceBeforeSlash)?at:z.spacebeforeslash)?Pe:"",!0===$.spaceBeforeSlash&&($.spaceBeforeSlash=" "),$.suppressPrettyCount=0,$.user={},$.state=D.None,$},ue.prototype.indent=function(z,$,ne){var ge;return!$.pretty||$.suppressPrettyCount?"":$.pretty&&(ge=(ne||0)+$.offset+1)>0?new Array(ge).join($.indent):""},ue.prototype.endline=function(z,$,ne){return!$.pretty||$.suppressPrettyCount?"":$.newline},ue.prototype.attribute=function(z,$,ne){var ge;return this.openAttribute(z,$,ne),ge=" "+z.name+'="'+z.value+'"',this.closeAttribute(z,$,ne),ge},ue.prototype.cdata=function(z,$,ne){var ge;return this.openNode(z,$,ne),$.state=D.OpenTag,ge=this.indent(z,$,ne)+"<![CDATA[",$.state=D.InsideTag,ge+=z.value,$.state=D.CloseTag,ge+="]]>"+this.endline(z,$,ne),$.state=D.None,this.closeNode(z,$,ne),ge},ue.prototype.comment=function(z,$,ne){var ge;return this.openNode(z,$,ne),$.state=D.OpenTag,ge=this.indent(z,$,ne)+"\x3c!-- ",$.state=D.InsideTag,ge+=z.value,$.state=D.CloseTag,ge+=" --\x3e"+this.endline(z,$,ne),$.state=D.None,this.closeNode(z,$,ne),ge},ue.prototype.declaration=function(z,$,ne){var ge;return this.openNode(z,$,ne),$.state=D.OpenTag,ge=this.indent(z,$,ne)+"<?xml",$.state=D.InsideTag,ge+=' version="'+z.version+'"',null!=z.encoding&&(ge+=' encoding="'+z.encoding+'"'),null!=z.standalone&&(ge+=' standalone="'+z.standalone+'"'),$.state=D.CloseTag,ge+=$.spaceBeforeSlash+"?>",ge+=this.endline(z,$,ne),$.state=D.None,this.closeNode(z,$,ne),ge},ue.prototype.docType=function(z,$,ne){var Ue,Re,rt,Pe;if(ne||(ne=0),this.openNode(z,$,ne),$.state=D.OpenTag,rt=this.indent(z,$,ne),rt+="<!DOCTYPE "+z.root().name,z.pubID&&z.sysID?rt+=' PUBLIC "'+z.pubID+'" "'+z.sysID+'"':z.sysID&&(rt+=' SYSTEM "'+z.sysID+'"'),z.children.length>0){for(rt+=" [",rt+=this.endline(z,$,ne),$.state=D.InsideTag,Ue=0,Re=(Pe=z.children).length;Ue<Re;Ue++)rt+=this.writeChildNode(Pe[Ue],$,ne+1);$.state=D.CloseTag,rt+="]"}return $.state=D.CloseTag,rt+=$.spaceBeforeSlash+">",rt+=this.endline(z,$,ne),$.state=D.None,this.closeNode(z,$,ne),rt},ue.prototype.element=function(z,$,ne){var Ue,Re,rt,Pe,at,xt,He,ft,gt,bt,kn,Ut,Dn;for(ft in ne||(ne=0),gt=!1,bt="",this.openNode(z,$,ne),$.state=D.OpenTag,bt+=this.indent(z,$,ne)+"<"+z.name,kn=z.attribs)!re.call(kn,ft)||(bt+=this.attribute(kn[ft],$,ne));if(rt=0===(Re=z.children.length)?null:z.children[0],0===Re||z.children.every(function(Jt){return(Jt.type===Y.Text||Jt.type===Y.Raw)&&""===Jt.value}))$.allowEmpty?(bt+=">",$.state=D.CloseTag,bt+="</"+z.name+">"+this.endline(z,$,ne)):($.state=D.CloseTag,bt+=$.spaceBeforeSlash+"/>"+this.endline(z,$,ne));else if(!$.pretty||1!==Re||rt.type!==Y.Text&&rt.type!==Y.Raw||null==rt.value){if($.dontPrettyTextNodes)for(Pe=0,xt=(Ut=z.children).length;Pe<xt;Pe++)if(((Ue=Ut[Pe]).type===Y.Text||Ue.type===Y.Raw)&&null!=Ue.value){$.suppressPrettyCount++,gt=!0;break}for(bt+=">"+this.endline(z,$,ne),$.state=D.InsideTag,at=0,He=(Dn=z.children).length;at<He;at++)bt+=this.writeChildNode(Ue=Dn[at],$,ne+1);$.state=D.CloseTag,bt+=this.indent(z,$,ne)+"</"+z.name+">",gt&&$.suppressPrettyCount--,bt+=this.endline(z,$,ne),$.state=D.None}else bt+=">",$.state=D.InsideTag,$.suppressPrettyCount++,gt=!0,bt+=this.writeChildNode(rt,$,ne+1),$.suppressPrettyCount--,gt=!1,$.state=D.CloseTag,bt+="</"+z.name+">"+this.endline(z,$,ne);return this.closeNode(z,$,ne),bt},ue.prototype.writeChildNode=function(z,$,ne){switch(z.type){case Y.CData:return this.cdata(z,$,ne);case Y.Comment:return this.comment(z,$,ne);case Y.Element:return this.element(z,$,ne);case Y.Raw:return this.raw(z,$,ne);case Y.Text:return this.text(z,$,ne);case Y.ProcessingInstruction:return this.processingInstruction(z,$,ne);case Y.Dummy:return"";case Y.Declaration:return this.declaration(z,$,ne);case Y.DocType:return this.docType(z,$,ne);case Y.AttributeDeclaration:return this.dtdAttList(z,$,ne);case Y.ElementDeclaration:return this.dtdElement(z,$,ne);case Y.EntityDeclaration:return this.dtdEntity(z,$,ne);case Y.NotationDeclaration:return this.dtdNotation(z,$,ne);default:throw new Error("Unknown XML node type: "+z.constructor.name)}},ue.prototype.processingInstruction=function(z,$,ne){var ge;return this.openNode(z,$,ne),$.state=D.OpenTag,ge=this.indent(z,$,ne)+"<?",$.state=D.InsideTag,ge+=z.target,z.value&&(ge+=" "+z.value),$.state=D.CloseTag,ge+=$.spaceBeforeSlash+"?>",ge+=this.endline(z,$,ne),$.state=D.None,this.closeNode(z,$,ne),ge},ue.prototype.raw=function(z,$,ne){var ge;return this.openNode(z,$,ne),$.state=D.OpenTag,ge=this.indent(z,$,ne),$.state=D.InsideTag,ge+=z.value,$.state=D.CloseTag,ge+=this.endline(z,$,ne),$.state=D.None,this.closeNode(z,$,ne),ge},ue.prototype.text=function(z,$,ne){var ge;return this.openNode(z,$,ne),$.state=D.OpenTag,ge=this.indent(z,$,ne),$.state=D.InsideTag,ge+=z.value,$.state=D.CloseTag,ge+=this.endline(z,$,ne),$.state=D.None,this.closeNode(z,$,ne),ge},ue.prototype.dtdAttList=function(z,$,ne){var ge;return this.openNode(z,$,ne),$.state=D.OpenTag,ge=this.indent(z,$,ne)+"<!ATTLIST",$.state=D.InsideTag,ge+=" "+z.elementName+" "+z.attributeName+" "+z.attributeType,"#DEFAULT"!==z.defaultValueType&&(ge+=" "+z.defaultValueType),z.defaultValue&&(ge+=' "'+z.defaultValue+'"'),$.state=D.CloseTag,ge+=$.spaceBeforeSlash+">"+this.endline(z,$,ne),$.state=D.None,this.closeNode(z,$,ne),ge},ue.prototype.dtdElement=function(z,$,ne){var ge;return this.openNode(z,$,ne),$.state=D.OpenTag,ge=this.indent(z,$,ne)+"<!ELEMENT",$.state=D.InsideTag,ge+=" "+z.name+" "+z.value,$.state=D.CloseTag,ge+=$.spaceBeforeSlash+">"+this.endline(z,$,ne),$.state=D.None,this.closeNode(z,$,ne),ge},ue.prototype.dtdEntity=function(z,$,ne){var ge;return this.openNode(z,$,ne),$.state=D.OpenTag,ge=this.indent(z,$,ne)+"<!ENTITY",$.state=D.InsideTag,z.pe&&(ge+=" %"),ge+=" "+z.name,z.value?ge+=' "'+z.value+'"':(z.pubID&&z.sysID?ge+=' PUBLIC "'+z.pubID+'" "'+z.sysID+'"':z.sysID&&(ge+=' SYSTEM "'+z.sysID+'"'),z.nData&&(ge+=" NDATA "+z.nData)),$.state=D.CloseTag,ge+=$.spaceBeforeSlash+">"+this.endline(z,$,ne),$.state=D.None,this.closeNode(z,$,ne),ge},ue.prototype.dtdNotation=function(z,$,ne){var ge;return this.openNode(z,$,ne),$.state=D.OpenTag,ge=this.indent(z,$,ne)+"<!NOTATION",$.state=D.InsideTag,ge+=" "+z.name,z.pubID&&z.sysID?ge+=' PUBLIC "'+z.pubID+'" "'+z.sysID+'"':z.pubID?ge+=' PUBLIC "'+z.pubID+'"':z.sysID&&(ge+=' SYSTEM "'+z.sysID+'"'),$.state=D.CloseTag,ge+=$.spaceBeforeSlash+">"+this.endline(z,$,ne),$.state=D.None,this.closeNode(z,$,ne),ge},ue.prototype.openNode=function(z,$,ne){},ue.prototype.closeNode=function(z,$,ne){},ue.prototype.openAttribute=function(z,$,ne){},ue.prototype.closeAttribute=function(z,$,ne){},ue}()}).call(this)},7904:function(Be,Ce,V){(function(){var Y,D,H,B,W,P,O,q,te,J;J=V(3452),q=J.assign,te=J.isFunction,H=V(9906),B=V(519),W=V(1105),O=V(4354),P=V(7647),Y=V(2269),D=V(6316),Be.exports.create=function(oe,se,Q,U){var ae,xe;if(null==oe)throw new Error("Root element needs a name.");return U=q({},se,Q,U),xe=(ae=new B(U)).element(oe),U.headless||(ae.declaration(U),(null!=U.pubID||null!=U.sysID)&&ae.dtd(U)),xe},Be.exports.begin=function(oe,se,Q){var U;return te(oe)&&(se=(U=[oe,se])[0],Q=U[1],oe={}),se?new W(oe,se,Q):new B(oe)},Be.exports.stringWriter=function(oe){return new O(oe)},Be.exports.streamWriter=function(oe,se){return new P(oe,se)},Be.exports.implementation=new H,Be.exports.nodeType=Y,Be.exports.writerState=D}).call(this)},2361:()=>{},4616:()=>{},5485:Be=>{"use strict";Be.exports=JSON.parse('{"Aacute":"\xc1","aacute":"\xe1","Abreve":"\u0102","abreve":"\u0103","ac":"\u223e","acd":"\u223f","acE":"\u223e\u0333","Acirc":"\xc2","acirc":"\xe2","acute":"\xb4","Acy":"\u0410","acy":"\u0430","AElig":"\xc6","aelig":"\xe6","af":"\u2061","Afr":"\u{1d504}","afr":"\u{1d51e}","Agrave":"\xc0","agrave":"\xe0","alefsym":"\u2135","aleph":"\u2135","Alpha":"\u0391","alpha":"\u03b1","Amacr":"\u0100","amacr":"\u0101","amalg":"\u2a3f","amp":"&","AMP":"&","andand":"\u2a55","And":"\u2a53","and":"\u2227","andd":"\u2a5c","andslope":"\u2a58","andv":"\u2a5a","ang":"\u2220","ange":"\u29a4","angle":"\u2220","angmsdaa":"\u29a8","angmsdab":"\u29a9","angmsdac":"\u29aa","angmsdad":"\u29ab","angmsdae":"\u29ac","angmsdaf":"\u29ad","angmsdag":"\u29ae","angmsdah":"\u29af","angmsd":"\u2221","angrt":"\u221f","angrtvb":"\u22be","angrtvbd":"\u299d","angsph":"\u2222","angst":"\xc5","angzarr":"\u237c","Aogon":"\u0104","aogon":"\u0105","Aopf":"\u{1d538}","aopf":"\u{1d552}","apacir":"\u2a6f","ap":"\u2248","apE":"\u2a70","ape":"\u224a","apid":"\u224b","apos":"\'","ApplyFunction":"\u2061","approx":"\u2248","approxeq":"\u224a","Aring":"\xc5","aring":"\xe5","Ascr":"\u{1d49c}","ascr":"\u{1d4b6}","Assign":"\u2254","ast":"*","asymp":"\u2248","asympeq":"\u224d","Atilde":"\xc3","atilde":"\xe3","Auml":"\xc4","auml":"\xe4","awconint":"\u2233","awint":"\u2a11","backcong":"\u224c","backepsilon":"\u03f6","backprime":"\u2035","backsim":"\u223d","backsimeq":"\u22cd","Backslash":"\u2216","Barv":"\u2ae7","barvee":"\u22bd","barwed":"\u2305","Barwed":"\u2306","barwedge":"\u2305","bbrk":"\u23b5","bbrktbrk":"\u23b6","bcong":"\u224c","Bcy":"\u0411","bcy":"\u0431","bdquo":"\u201e","becaus":"\u2235","because":"\u2235","Because":"\u2235","bemptyv":"\u29b0","bepsi":"\u03f6","bernou":"\u212c","Bernoullis":"\u212c","Beta":"\u0392","beta":"\u03b2","beth":"\u2136","between":"\u226c","Bfr":"\u{1d505}","bfr":"\u{1d51f}","bigcap":"\u22c2","bigcirc":"\u25ef","bigcup":"\u22c3","bigodot":"\u2a00","bigoplus":"\u2a01","bigotimes":"\u2a02","bigsqcup":"\u2a06","bigstar":"\u2605","bigtriangledown":"\u25bd","bigtriangleup":"\u25b3","biguplus":"\u2a04","bigvee":"\u22c1","bigwedge":"\u22c0","bkarow":"\u290d","blacklozenge":"\u29eb","blacksquare":"\u25aa","blacktriangle":"\u25b4","blacktriangledown":"\u25be","blacktriangleleft":"\u25c2","blacktriangleright":"\u25b8","blank":"\u2423","blk12":"\u2592","blk14":"\u2591","blk34":"\u2593","block":"\u2588","bne":"=\u20e5","bnequiv":"\u2261\u20e5","bNot":"\u2aed","bnot":"\u2310","Bopf":"\u{1d539}","bopf":"\u{1d553}","bot":"\u22a5","bottom":"\u22a5","bowtie":"\u22c8","boxbox":"\u29c9","boxdl":"\u2510","boxdL":"\u2555","boxDl":"\u2556","boxDL":"\u2557","boxdr":"\u250c","boxdR":"\u2552","boxDr":"\u2553","boxDR":"\u2554","boxh":"\u2500","boxH":"\u2550","boxhd":"\u252c","boxHd":"\u2564","boxhD":"\u2565","boxHD":"\u2566","boxhu":"\u2534","boxHu":"\u2567","boxhU":"\u2568","boxHU":"\u2569","boxminus":"\u229f","boxplus":"\u229e","boxtimes":"\u22a0","boxul":"\u2518","boxuL":"\u255b","boxUl":"\u255c","boxUL":"\u255d","boxur":"\u2514","boxuR":"\u2558","boxUr":"\u2559","boxUR":"\u255a","boxv":"\u2502","boxV":"\u2551","boxvh":"\u253c","boxvH":"\u256a","boxVh":"\u256b","boxVH":"\u256c","boxvl":"\u2524","boxvL":"\u2561","boxVl":"\u2562","boxVL":"\u2563","boxvr":"\u251c","boxvR":"\u255e","boxVr":"\u255f","boxVR":"\u2560","bprime":"\u2035","breve":"\u02d8","Breve":"\u02d8","brvbar":"\xa6","bscr":"\u{1d4b7}","Bscr":"\u212c","bsemi":"\u204f","bsim":"\u223d","bsime":"\u22cd","bsolb":"\u29c5","bsol":"\\\\","bsolhsub":"\u27c8","bull":"\u2022","bullet":"\u2022","bump":"\u224e","bumpE":"\u2aae","bumpe":"\u224f","Bumpeq":"\u224e","bumpeq":"\u224f","Cacute":"\u0106","cacute":"\u0107","capand":"\u2a44","capbrcup":"\u2a49","capcap":"\u2a4b","cap":"\u2229","Cap":"\u22d2","capcup":"\u2a47","capdot":"\u2a40","CapitalDifferentialD":"\u2145","caps":"\u2229\ufe00","caret":"\u2041","caron":"\u02c7","Cayleys":"\u212d","ccaps":"\u2a4d","Ccaron":"\u010c","ccaron":"\u010d","Ccedil":"\xc7","ccedil":"\xe7","Ccirc":"\u0108","ccirc":"\u0109","Cconint":"\u2230","ccups":"\u2a4c","ccupssm":"\u2a50","Cdot":"\u010a","cdot":"\u010b","cedil":"\xb8","Cedilla":"\xb8","cemptyv":"\u29b2","cent":"\xa2","centerdot":"\xb7","CenterDot":"\xb7","cfr":"\u{1d520}","Cfr":"\u212d","CHcy":"\u0427","chcy":"\u0447","check":"\u2713","checkmark":"\u2713","Chi":"\u03a7","chi":"\u03c7","circ":"\u02c6","circeq":"\u2257","circlearrowleft":"\u21ba","circlearrowright":"\u21bb","circledast":"\u229b","circledcirc":"\u229a","circleddash":"\u229d","CircleDot":"\u2299","circledR":"\xae","circledS":"\u24c8","CircleMinus":"\u2296","CirclePlus":"\u2295","CircleTimes":"\u2297","cir":"\u25cb","cirE":"\u29c3","cire":"\u2257","cirfnint":"\u2a10","cirmid":"\u2aef","cirscir":"\u29c2","ClockwiseContourIntegral":"\u2232","CloseCurlyDoubleQuote":"\u201d","CloseCurlyQuote":"\u2019","clubs":"\u2663","clubsuit":"\u2663","colon":":","Colon":"\u2237","Colone":"\u2a74","colone":"\u2254","coloneq":"\u2254","comma":",","commat":"@","comp":"\u2201","compfn":"\u2218","complement":"\u2201","complexes":"\u2102","cong":"\u2245","congdot":"\u2a6d","Congruent":"\u2261","conint":"\u222e","Conint":"\u222f","ContourIntegral":"\u222e","copf":"\u{1d554}","Copf":"\u2102","coprod":"\u2210","Coproduct":"\u2210","copy":"\xa9","COPY":"\xa9","copysr":"\u2117","CounterClockwiseContourIntegral":"\u2233","crarr":"\u21b5","cross":"\u2717","Cross":"\u2a2f","Cscr":"\u{1d49e}","cscr":"\u{1d4b8}","csub":"\u2acf","csube":"\u2ad1","csup":"\u2ad0","csupe":"\u2ad2","ctdot":"\u22ef","cudarrl":"\u2938","cudarrr":"\u2935","cuepr":"\u22de","cuesc":"\u22df","cularr":"\u21b6","cularrp":"\u293d","cupbrcap":"\u2a48","cupcap":"\u2a46","CupCap":"\u224d","cup":"\u222a","Cup":"\u22d3","cupcup":"\u2a4a","cupdot":"\u228d","cupor":"\u2a45","cups":"\u222a\ufe00","curarr":"\u21b7","curarrm":"\u293c","curlyeqprec":"\u22de","curlyeqsucc":"\u22df","curlyvee":"\u22ce","curlywedge":"\u22cf","curren":"\xa4","curvearrowleft":"\u21b6","curvearrowright":"\u21b7","cuvee":"\u22ce","cuwed":"\u22cf","cwconint":"\u2232","cwint":"\u2231","cylcty":"\u232d","dagger":"\u2020","Dagger":"\u2021","daleth":"\u2138","darr":"\u2193","Darr":"\u21a1","dArr":"\u21d3","dash":"\u2010","Dashv":"\u2ae4","dashv":"\u22a3","dbkarow":"\u290f","dblac":"\u02dd","Dcaron":"\u010e","dcaron":"\u010f","Dcy":"\u0414","dcy":"\u0434","ddagger":"\u2021","ddarr":"\u21ca","DD":"\u2145","dd":"\u2146","DDotrahd":"\u2911","ddotseq":"\u2a77","deg":"\xb0","Del":"\u2207","Delta":"\u0394","delta":"\u03b4","demptyv":"\u29b1","dfisht":"\u297f","Dfr":"\u{1d507}","dfr":"\u{1d521}","dHar":"\u2965","dharl":"\u21c3","dharr":"\u21c2","DiacriticalAcute":"\xb4","DiacriticalDot":"\u02d9","DiacriticalDoubleAcute":"\u02dd","DiacriticalGrave":"`","DiacriticalTilde":"\u02dc","diam":"\u22c4","diamond":"\u22c4","Diamond":"\u22c4","diamondsuit":"\u2666","diams":"\u2666","die":"\xa8","DifferentialD":"\u2146","digamma":"\u03dd","disin":"\u22f2","div":"\xf7","divide":"\xf7","divideontimes":"\u22c7","divonx":"\u22c7","DJcy":"\u0402","djcy":"\u0452","dlcorn":"\u231e","dlcrop":"\u230d","dollar":"$","Dopf":"\u{1d53b}","dopf":"\u{1d555}","Dot":"\xa8","dot":"\u02d9","DotDot":"\u20dc","doteq":"\u2250","doteqdot":"\u2251","DotEqual":"\u2250","dotminus":"\u2238","dotplus":"\u2214","dotsquare":"\u22a1","doublebarwedge":"\u2306","DoubleContourIntegral":"\u222f","DoubleDot":"\xa8","DoubleDownArrow":"\u21d3","DoubleLeftArrow":"\u21d0","DoubleLeftRightArrow":"\u21d4","DoubleLeftTee":"\u2ae4","DoubleLongLeftArrow":"\u27f8","DoubleLongLeftRightArrow":"\u27fa","DoubleLongRightArrow":"\u27f9","DoubleRightArrow":"\u21d2","DoubleRightTee":"\u22a8","DoubleUpArrow":"\u21d1","DoubleUpDownArrow":"\u21d5","DoubleVerticalBar":"\u2225","DownArrowBar":"\u2913","downarrow":"\u2193","DownArrow":"\u2193","Downarrow":"\u21d3","DownArrowUpArrow":"\u21f5","DownBreve":"\u0311","downdownarrows":"\u21ca","downharpoonleft":"\u21c3","downharpoonright":"\u21c2","DownLeftRightVector":"\u2950","DownLeftTeeVector":"\u295e","DownLeftVectorBar":"\u2956","DownLeftVector":"\u21bd","DownRightTeeVector":"\u295f","DownRightVectorBar":"\u2957","DownRightVector":"\u21c1","DownTeeArrow":"\u21a7","DownTee":"\u22a4","drbkarow":"\u2910","drcorn":"\u231f","drcrop":"\u230c","Dscr":"\u{1d49f}","dscr":"\u{1d4b9}","DScy":"\u0405","dscy":"\u0455","dsol":"\u29f6","Dstrok":"\u0110","dstrok":"\u0111","dtdot":"\u22f1","dtri":"\u25bf","dtrif":"\u25be","duarr":"\u21f5","duhar":"\u296f","dwangle":"\u29a6","DZcy":"\u040f","dzcy":"\u045f","dzigrarr":"\u27ff","Eacute":"\xc9","eacute":"\xe9","easter":"\u2a6e","Ecaron":"\u011a","ecaron":"\u011b","Ecirc":"\xca","ecirc":"\xea","ecir":"\u2256","ecolon":"\u2255","Ecy":"\u042d","ecy":"\u044d","eDDot":"\u2a77","Edot":"\u0116","edot":"\u0117","eDot":"\u2251","ee":"\u2147","efDot":"\u2252","Efr":"\u{1d508}","efr":"\u{1d522}","eg":"\u2a9a","Egrave":"\xc8","egrave":"\xe8","egs":"\u2a96","egsdot":"\u2a98","el":"\u2a99","Element":"\u2208","elinters":"\u23e7","ell":"\u2113","els":"\u2a95","elsdot":"\u2a97","Emacr":"\u0112","emacr":"\u0113","empty":"\u2205","emptyset":"\u2205","EmptySmallSquare":"\u25fb","emptyv":"\u2205","EmptyVerySmallSquare":"\u25ab","emsp13":"\u2004","emsp14":"\u2005","emsp":"\u2003","ENG":"\u014a","eng":"\u014b","ensp":"\u2002","Eogon":"\u0118","eogon":"\u0119","Eopf":"\u{1d53c}","eopf":"\u{1d556}","epar":"\u22d5","eparsl":"\u29e3","eplus":"\u2a71","epsi":"\u03b5","Epsilon":"\u0395","epsilon":"\u03b5","epsiv":"\u03f5","eqcirc":"\u2256","eqcolon":"\u2255","eqsim":"\u2242","eqslantgtr":"\u2a96","eqslantless":"\u2a95","Equal":"\u2a75","equals":"=","EqualTilde":"\u2242","equest":"\u225f","Equilibrium":"\u21cc","equiv":"\u2261","equivDD":"\u2a78","eqvparsl":"\u29e5","erarr":"\u2971","erDot":"\u2253","escr":"\u212f","Escr":"\u2130","esdot":"\u2250","Esim":"\u2a73","esim":"\u2242","Eta":"\u0397","eta":"\u03b7","ETH":"\xd0","eth":"\xf0","Euml":"\xcb","euml":"\xeb","euro":"\u20ac","excl":"!","exist":"\u2203","Exists":"\u2203","expectation":"\u2130","exponentiale":"\u2147","ExponentialE":"\u2147","fallingdotseq":"\u2252","Fcy":"\u0424","fcy":"\u0444","female":"\u2640","ffilig":"\ufb03","fflig":"\ufb00","ffllig":"\ufb04","Ffr":"\u{1d509}","ffr":"\u{1d523}","filig":"\ufb01","FilledSmallSquare":"\u25fc","FilledVerySmallSquare":"\u25aa","fjlig":"fj","flat":"\u266d","fllig":"\ufb02","fltns":"\u25b1","fnof":"\u0192","Fopf":"\u{1d53d}","fopf":"\u{1d557}","forall":"\u2200","ForAll":"\u2200","fork":"\u22d4","forkv":"\u2ad9","Fouriertrf":"\u2131","fpartint":"\u2a0d","frac12":"\xbd","frac13":"\u2153","frac14":"\xbc","frac15":"\u2155","frac16":"\u2159","frac18":"\u215b","frac23":"\u2154","frac25":"\u2156","frac34":"\xbe","frac35":"\u2157","frac38":"\u215c","frac45":"\u2158","frac56":"\u215a","frac58":"\u215d","frac78":"\u215e","frasl":"\u2044","frown":"\u2322","fscr":"\u{1d4bb}","Fscr":"\u2131","gacute":"\u01f5","Gamma":"\u0393","gamma":"\u03b3","Gammad":"\u03dc","gammad":"\u03dd","gap":"\u2a86","Gbreve":"\u011e","gbreve":"\u011f","Gcedil":"\u0122","Gcirc":"\u011c","gcirc":"\u011d","Gcy":"\u0413","gcy":"\u0433","Gdot":"\u0120","gdot":"\u0121","ge":"\u2265","gE":"\u2267","gEl":"\u2a8c","gel":"\u22db","geq":"\u2265","geqq":"\u2267","geqslant":"\u2a7e","gescc":"\u2aa9","ges":"\u2a7e","gesdot":"\u2a80","gesdoto":"\u2a82","gesdotol":"\u2a84","gesl":"\u22db\ufe00","gesles":"\u2a94","Gfr":"\u{1d50a}","gfr":"\u{1d524}","gg":"\u226b","Gg":"\u22d9","ggg":"\u22d9","gimel":"\u2137","GJcy":"\u0403","gjcy":"\u0453","gla":"\u2aa5","gl":"\u2277","glE":"\u2a92","glj":"\u2aa4","gnap":"\u2a8a","gnapprox":"\u2a8a","gne":"\u2a88","gnE":"\u2269","gneq":"\u2a88","gneqq":"\u2269","gnsim":"\u22e7","Gopf":"\u{1d53e}","gopf":"\u{1d558}","grave":"`","GreaterEqual":"\u2265","GreaterEqualLess":"\u22db","GreaterFullEqual":"\u2267","GreaterGreater":"\u2aa2","GreaterLess":"\u2277","GreaterSlantEqual":"\u2a7e","GreaterTilde":"\u2273","Gscr":"\u{1d4a2}","gscr":"\u210a","gsim":"\u2273","gsime":"\u2a8e","gsiml":"\u2a90","gtcc":"\u2aa7","gtcir":"\u2a7a","gt":">","GT":">","Gt":"\u226b","gtdot":"\u22d7","gtlPar":"\u2995","gtquest":"\u2a7c","gtrapprox":"\u2a86","gtrarr":"\u2978","gtrdot":"\u22d7","gtreqless":"\u22db","gtreqqless":"\u2a8c","gtrless":"\u2277","gtrsim":"\u2273","gvertneqq":"\u2269\ufe00","gvnE":"\u2269\ufe00","Hacek":"\u02c7","hairsp":"\u200a","half":"\xbd","hamilt":"\u210b","HARDcy":"\u042a","hardcy":"\u044a","harrcir":"\u2948","harr":"\u2194","hArr":"\u21d4","harrw":"\u21ad","Hat":"^","hbar":"\u210f","Hcirc":"\u0124","hcirc":"\u0125","hearts":"\u2665","heartsuit":"\u2665","hellip":"\u2026","hercon":"\u22b9","hfr":"\u{1d525}","Hfr":"\u210c","HilbertSpace":"\u210b","hksearow":"\u2925","hkswarow":"\u2926","hoarr":"\u21ff","homtht":"\u223b","hookleftarrow":"\u21a9","hookrightarrow":"\u21aa","hopf":"\u{1d559}","Hopf":"\u210d","horbar":"\u2015","HorizontalLine":"\u2500","hscr":"\u{1d4bd}","Hscr":"\u210b","hslash":"\u210f","Hstrok":"\u0126","hstrok":"\u0127","HumpDownHump":"\u224e","HumpEqual":"\u224f","hybull":"\u2043","hyphen":"\u2010","Iacute":"\xcd","iacute":"\xed","ic":"\u2063","Icirc":"\xce","icirc":"\xee","Icy":"\u0418","icy":"\u0438","Idot":"\u0130","IEcy":"\u0415","iecy":"\u0435","iexcl":"\xa1","iff":"\u21d4","ifr":"\u{1d526}","Ifr":"\u2111","Igrave":"\xcc","igrave":"\xec","ii":"\u2148","iiiint":"\u2a0c","iiint":"\u222d","iinfin":"\u29dc","iiota":"\u2129","IJlig":"\u0132","ijlig":"\u0133","Imacr":"\u012a","imacr":"\u012b","image":"\u2111","ImaginaryI":"\u2148","imagline":"\u2110","imagpart":"\u2111","imath":"\u0131","Im":"\u2111","imof":"\u22b7","imped":"\u01b5","Implies":"\u21d2","incare":"\u2105","in":"\u2208","infin":"\u221e","infintie":"\u29dd","inodot":"\u0131","intcal":"\u22ba","int":"\u222b","Int":"\u222c","integers":"\u2124","Integral":"\u222b","intercal":"\u22ba","Intersection":"\u22c2","intlarhk":"\u2a17","intprod":"\u2a3c","InvisibleComma":"\u2063","InvisibleTimes":"\u2062","IOcy":"\u0401","iocy":"\u0451","Iogon":"\u012e","iogon":"\u012f","Iopf":"\u{1d540}","iopf":"\u{1d55a}","Iota":"\u0399","iota":"\u03b9","iprod":"\u2a3c","iquest":"\xbf","iscr":"\u{1d4be}","Iscr":"\u2110","isin":"\u2208","isindot":"\u22f5","isinE":"\u22f9","isins":"\u22f4","isinsv":"\u22f3","isinv":"\u2208","it":"\u2062","Itilde":"\u0128","itilde":"\u0129","Iukcy":"\u0406","iukcy":"\u0456","Iuml":"\xcf","iuml":"\xef","Jcirc":"\u0134","jcirc":"\u0135","Jcy":"\u0419","jcy":"\u0439","Jfr":"\u{1d50d}","jfr":"\u{1d527}","jmath":"\u0237","Jopf":"\u{1d541}","jopf":"\u{1d55b}","Jscr":"\u{1d4a5}","jscr":"\u{1d4bf}","Jsercy":"\u0408","jsercy":"\u0458","Jukcy":"\u0404","jukcy":"\u0454","Kappa":"\u039a","kappa":"\u03ba","kappav":"\u03f0","Kcedil":"\u0136","kcedil":"\u0137","Kcy":"\u041a","kcy":"\u043a","Kfr":"\u{1d50e}","kfr":"\u{1d528}","kgreen":"\u0138","KHcy":"\u0425","khcy":"\u0445","KJcy":"\u040c","kjcy":"\u045c","Kopf":"\u{1d542}","kopf":"\u{1d55c}","Kscr":"\u{1d4a6}","kscr":"\u{1d4c0}","lAarr":"\u21da","Lacute":"\u0139","lacute":"\u013a","laemptyv":"\u29b4","lagran":"\u2112","Lambda":"\u039b","lambda":"\u03bb","lang":"\u27e8","Lang":"\u27ea","langd":"\u2991","langle":"\u27e8","lap":"\u2a85","Laplacetrf":"\u2112","laquo":"\xab","larrb":"\u21e4","larrbfs":"\u291f","larr":"\u2190","Larr":"\u219e","lArr":"\u21d0","larrfs":"\u291d","larrhk":"\u21a9","larrlp":"\u21ab","larrpl":"\u2939","larrsim":"\u2973","larrtl":"\u21a2","latail":"\u2919","lAtail":"\u291b","lat":"\u2aab","late":"\u2aad","lates":"\u2aad\ufe00","lbarr":"\u290c","lBarr":"\u290e","lbbrk":"\u2772","lbrace":"{","lbrack":"[","lbrke":"\u298b","lbrksld":"\u298f","lbrkslu":"\u298d","Lcaron":"\u013d","lcaron":"\u013e","Lcedil":"\u013b","lcedil":"\u013c","lceil":"\u2308","lcub":"{","Lcy":"\u041b","lcy":"\u043b","ldca":"\u2936","ldquo":"\u201c","ldquor":"\u201e","ldrdhar":"\u2967","ldrushar":"\u294b","ldsh":"\u21b2","le":"\u2264","lE":"\u2266","LeftAngleBracket":"\u27e8","LeftArrowBar":"\u21e4","leftarrow":"\u2190","LeftArrow":"\u2190","Leftarrow":"\u21d0","LeftArrowRightArrow":"\u21c6","leftarrowtail":"\u21a2","LeftCeiling":"\u2308","LeftDoubleBracket":"\u27e6","LeftDownTeeVector":"\u2961","LeftDownVectorBar":"\u2959","LeftDownVector":"\u21c3","LeftFloor":"\u230a","leftharpoondown":"\u21bd","leftharpoonup":"\u21bc","leftleftarrows":"\u21c7","leftrightarrow":"\u2194","LeftRightArrow":"\u2194","Leftrightarrow":"\u21d4","leftrightarrows":"\u21c6","leftrightharpoons":"\u21cb","leftrightsquigarrow":"\u21ad","LeftRightVector":"\u294e","LeftTeeArrow":"\u21a4","LeftTee":"\u22a3","LeftTeeVector":"\u295a","leftthreetimes":"\u22cb","LeftTriangleBar":"\u29cf","LeftTriangle":"\u22b2","LeftTriangleEqual":"\u22b4","LeftUpDownVector":"\u2951","LeftUpTeeVector":"\u2960","LeftUpVectorBar":"\u2958","LeftUpVector":"\u21bf","LeftVectorBar":"\u2952","LeftVector":"\u21bc","lEg":"\u2a8b","leg":"\u22da","leq":"\u2264","leqq":"\u2266","leqslant":"\u2a7d","lescc":"\u2aa8","les":"\u2a7d","lesdot":"\u2a7f","lesdoto":"\u2a81","lesdotor":"\u2a83","lesg":"\u22da\ufe00","lesges":"\u2a93","lessapprox":"\u2a85","lessdot":"\u22d6","lesseqgtr":"\u22da","lesseqqgtr":"\u2a8b","LessEqualGreater":"\u22da","LessFullEqual":"\u2266","LessGreater":"\u2276","lessgtr":"\u2276","LessLess":"\u2aa1","lesssim":"\u2272","LessSlantEqual":"\u2a7d","LessTilde":"\u2272","lfisht":"\u297c","lfloor":"\u230a","Lfr":"\u{1d50f}","lfr":"\u{1d529}","lg":"\u2276","lgE":"\u2a91","lHar":"\u2962","lhard":"\u21bd","lharu":"\u21bc","lharul":"\u296a","lhblk":"\u2584","LJcy":"\u0409","ljcy":"\u0459","llarr":"\u21c7","ll":"\u226a","Ll":"\u22d8","llcorner":"\u231e","Lleftarrow":"\u21da","llhard":"\u296b","lltri":"\u25fa","Lmidot":"\u013f","lmidot":"\u0140","lmoustache":"\u23b0","lmoust":"\u23b0","lnap":"\u2a89","lnapprox":"\u2a89","lne":"\u2a87","lnE":"\u2268","lneq":"\u2a87","lneqq":"\u2268","lnsim":"\u22e6","loang":"\u27ec","loarr":"\u21fd","lobrk":"\u27e6","longleftarrow":"\u27f5","LongLeftArrow":"\u27f5","Longleftarrow":"\u27f8","longleftrightarrow":"\u27f7","LongLeftRightArrow":"\u27f7","Longleftrightarrow":"\u27fa","longmapsto":"\u27fc","longrightarrow":"\u27f6","LongRightArrow":"\u27f6","Longrightarrow":"\u27f9","looparrowleft":"\u21ab","looparrowright":"\u21ac","lopar":"\u2985","Lopf":"\u{1d543}","lopf":"\u{1d55d}","loplus":"\u2a2d","lotimes":"\u2a34","lowast":"\u2217","lowbar":"_","LowerLeftArrow":"\u2199","LowerRightArrow":"\u2198","loz":"\u25ca","lozenge":"\u25ca","lozf":"\u29eb","lpar":"(","lparlt":"\u2993","lrarr":"\u21c6","lrcorner":"\u231f","lrhar":"\u21cb","lrhard":"\u296d","lrm":"\u200e","lrtri":"\u22bf","lsaquo":"\u2039","lscr":"\u{1d4c1}","Lscr":"\u2112","lsh":"\u21b0","Lsh":"\u21b0","lsim":"\u2272","lsime":"\u2a8d","lsimg":"\u2a8f","lsqb":"[","lsquo":"\u2018","lsquor":"\u201a","Lstrok":"\u0141","lstrok":"\u0142","ltcc":"\u2aa6","ltcir":"\u2a79","lt":"<","LT":"<","Lt":"\u226a","ltdot":"\u22d6","lthree":"\u22cb","ltimes":"\u22c9","ltlarr":"\u2976","ltquest":"\u2a7b","ltri":"\u25c3","ltrie":"\u22b4","ltrif":"\u25c2","ltrPar":"\u2996","lurdshar":"\u294a","luruhar":"\u2966","lvertneqq":"\u2268\ufe00","lvnE":"\u2268\ufe00","macr":"\xaf","male":"\u2642","malt":"\u2720","maltese":"\u2720","Map":"\u2905","map":"\u21a6","mapsto":"\u21a6","mapstodown":"\u21a7","mapstoleft":"\u21a4","mapstoup":"\u21a5","marker":"\u25ae","mcomma":"\u2a29","Mcy":"\u041c","mcy":"\u043c","mdash":"\u2014","mDDot":"\u223a","measuredangle":"\u2221","MediumSpace":"\u205f","Mellintrf":"\u2133","Mfr":"\u{1d510}","mfr":"\u{1d52a}","mho":"\u2127","micro":"\xb5","midast":"*","midcir":"\u2af0","mid":"\u2223","middot":"\xb7","minusb":"\u229f","minus":"\u2212","minusd":"\u2238","minusdu":"\u2a2a","MinusPlus":"\u2213","mlcp":"\u2adb","mldr":"\u2026","mnplus":"\u2213","models":"\u22a7","Mopf":"\u{1d544}","mopf":"\u{1d55e}","mp":"\u2213","mscr":"\u{1d4c2}","Mscr":"\u2133","mstpos":"\u223e","Mu":"\u039c","mu":"\u03bc","multimap":"\u22b8","mumap":"\u22b8","nabla":"\u2207","Nacute":"\u0143","nacute":"\u0144","nang":"\u2220\u20d2","nap":"\u2249","napE":"\u2a70\u0338","napid":"\u224b\u0338","napos":"\u0149","napprox":"\u2249","natural":"\u266e","naturals":"\u2115","natur":"\u266e","nbsp":"\xa0","nbump":"\u224e\u0338","nbumpe":"\u224f\u0338","ncap":"\u2a43","Ncaron":"\u0147","ncaron":"\u0148","Ncedil":"\u0145","ncedil":"\u0146","ncong":"\u2247","ncongdot":"\u2a6d\u0338","ncup":"\u2a42","Ncy":"\u041d","ncy":"\u043d","ndash":"\u2013","nearhk":"\u2924","nearr":"\u2197","neArr":"\u21d7","nearrow":"\u2197","ne":"\u2260","nedot":"\u2250\u0338","NegativeMediumSpace":"\u200b","NegativeThickSpace":"\u200b","NegativeThinSpace":"\u200b","NegativeVeryThinSpace":"\u200b","nequiv":"\u2262","nesear":"\u2928","nesim":"\u2242\u0338","NestedGreaterGreater":"\u226b","NestedLessLess":"\u226a","NewLine":"\\n","nexist":"\u2204","nexists":"\u2204","Nfr":"\u{1d511}","nfr":"\u{1d52b}","ngE":"\u2267\u0338","nge":"\u2271","ngeq":"\u2271","ngeqq":"\u2267\u0338","ngeqslant":"\u2a7e\u0338","nges":"\u2a7e\u0338","nGg":"\u22d9\u0338","ngsim":"\u2275","nGt":"\u226b\u20d2","ngt":"\u226f","ngtr":"\u226f","nGtv":"\u226b\u0338","nharr":"\u21ae","nhArr":"\u21ce","nhpar":"\u2af2","ni":"\u220b","nis":"\u22fc","nisd":"\u22fa","niv":"\u220b","NJcy":"\u040a","njcy":"\u045a","nlarr":"\u219a","nlArr":"\u21cd","nldr":"\u2025","nlE":"\u2266\u0338","nle":"\u2270","nleftarrow":"\u219a","nLeftarrow":"\u21cd","nleftrightarrow":"\u21ae","nLeftrightarrow":"\u21ce","nleq":"\u2270","nleqq":"\u2266\u0338","nleqslant":"\u2a7d\u0338","nles":"\u2a7d\u0338","nless":"\u226e","nLl":"\u22d8\u0338","nlsim":"\u2274","nLt":"\u226a\u20d2","nlt":"\u226e","nltri":"\u22ea","nltrie":"\u22ec","nLtv":"\u226a\u0338","nmid":"\u2224","NoBreak":"\u2060","NonBreakingSpace":"\xa0","nopf":"\u{1d55f}","Nopf":"\u2115","Not":"\u2aec","not":"\xac","NotCongruent":"\u2262","NotCupCap":"\u226d","NotDoubleVerticalBar":"\u2226","NotElement":"\u2209","NotEqual":"\u2260","NotEqualTilde":"\u2242\u0338","NotExists":"\u2204","NotGreater":"\u226f","NotGreaterEqual":"\u2271","NotGreaterFullEqual":"\u2267\u0338","NotGreaterGreater":"\u226b\u0338","NotGreaterLess":"\u2279","NotGreaterSlantEqual":"\u2a7e\u0338","NotGreaterTilde":"\u2275","NotHumpDownHump":"\u224e\u0338","NotHumpEqual":"\u224f\u0338","notin":"\u2209","notindot":"\u22f5\u0338","notinE":"\u22f9\u0338","notinva":"\u2209","notinvb":"\u22f7","notinvc":"\u22f6","NotLeftTriangleBar":"\u29cf\u0338","NotLeftTriangle":"\u22ea","NotLeftTriangleEqual":"\u22ec","NotLess":"\u226e","NotLessEqual":"\u2270","NotLessGreater":"\u2278","NotLessLess":"\u226a\u0338","NotLessSlantEqual":"\u2a7d\u0338","NotLessTilde":"\u2274","NotNestedGreaterGreater":"\u2aa2\u0338","NotNestedLessLess":"\u2aa1\u0338","notni":"\u220c","notniva":"\u220c","notnivb":"\u22fe","notnivc":"\u22fd","NotPrecedes":"\u2280","NotPrecedesEqual":"\u2aaf\u0338","NotPrecedesSlantEqual":"\u22e0","NotReverseElement":"\u220c","NotRightTriangleBar":"\u29d0\u0338","NotRightTriangle":"\u22eb","NotRightTriangleEqual":"\u22ed","NotSquareSubset":"\u228f\u0338","NotSquareSubsetEqual":"\u22e2","NotSquareSuperset":"\u2290\u0338","NotSquareSupersetEqual":"\u22e3","NotSubset":"\u2282\u20d2","NotSubsetEqual":"\u2288","NotSucceeds":"\u2281","NotSucceedsEqual":"\u2ab0\u0338","NotSucceedsSlantEqual":"\u22e1","NotSucceedsTilde":"\u227f\u0338","NotSuperset":"\u2283\u20d2","NotSupersetEqual":"\u2289","NotTilde":"\u2241","NotTildeEqual":"\u2244","NotTildeFullEqual":"\u2247","NotTildeTilde":"\u2249","NotVerticalBar":"\u2224","nparallel":"\u2226","npar":"\u2226","nparsl":"\u2afd\u20e5","npart":"\u2202\u0338","npolint":"\u2a14","npr":"\u2280","nprcue":"\u22e0","nprec":"\u2280","npreceq":"\u2aaf\u0338","npre":"\u2aaf\u0338","nrarrc":"\u2933\u0338","nrarr":"\u219b","nrArr":"\u21cf","nrarrw":"\u219d\u0338","nrightarrow":"\u219b","nRightarrow":"\u21cf","nrtri":"\u22eb","nrtrie":"\u22ed","nsc":"\u2281","nsccue":"\u22e1","nsce":"\u2ab0\u0338","Nscr":"\u{1d4a9}","nscr":"\u{1d4c3}","nshortmid":"\u2224","nshortparallel":"\u2226","nsim":"\u2241","nsime":"\u2244","nsimeq":"\u2244","nsmid":"\u2224","nspar":"\u2226","nsqsube":"\u22e2","nsqsupe":"\u22e3","nsub":"\u2284","nsubE":"\u2ac5\u0338","nsube":"\u2288","nsubset":"\u2282\u20d2","nsubseteq":"\u2288","nsubseteqq":"\u2ac5\u0338","nsucc":"\u2281","nsucceq":"\u2ab0\u0338","nsup":"\u2285","nsupE":"\u2ac6\u0338","nsupe":"\u2289","nsupset":"\u2283\u20d2","nsupseteq":"\u2289","nsupseteqq":"\u2ac6\u0338","ntgl":"\u2279","Ntilde":"\xd1","ntilde":"\xf1","ntlg":"\u2278","ntriangleleft":"\u22ea","ntrianglelefteq":"\u22ec","ntriangleright":"\u22eb","ntrianglerighteq":"\u22ed","Nu":"\u039d","nu":"\u03bd","num":"#","numero":"\u2116","numsp":"\u2007","nvap":"\u224d\u20d2","nvdash":"\u22ac","nvDash":"\u22ad","nVdash":"\u22ae","nVDash":"\u22af","nvge":"\u2265\u20d2","nvgt":">\u20d2","nvHarr":"\u2904","nvinfin":"\u29de","nvlArr":"\u2902","nvle":"\u2264\u20d2","nvlt":"<\u20d2","nvltrie":"\u22b4\u20d2","nvrArr":"\u2903","nvrtrie":"\u22b5\u20d2","nvsim":"\u223c\u20d2","nwarhk":"\u2923","nwarr":"\u2196","nwArr":"\u21d6","nwarrow":"\u2196","nwnear":"\u2927","Oacute":"\xd3","oacute":"\xf3","oast":"\u229b","Ocirc":"\xd4","ocirc":"\xf4","ocir":"\u229a","Ocy":"\u041e","ocy":"\u043e","odash":"\u229d","Odblac":"\u0150","odblac":"\u0151","odiv":"\u2a38","odot":"\u2299","odsold":"\u29bc","OElig":"\u0152","oelig":"\u0153","ofcir":"\u29bf","Ofr":"\u{1d512}","ofr":"\u{1d52c}","ogon":"\u02db","Ograve":"\xd2","ograve":"\xf2","ogt":"\u29c1","ohbar":"\u29b5","ohm":"\u03a9","oint":"\u222e","olarr":"\u21ba","olcir":"\u29be","olcross":"\u29bb","oline":"\u203e","olt":"\u29c0","Omacr":"\u014c","omacr":"\u014d","Omega":"\u03a9","omega":"\u03c9","Omicron":"\u039f","omicron":"\u03bf","omid":"\u29b6","ominus":"\u2296","Oopf":"\u{1d546}","oopf":"\u{1d560}","opar":"\u29b7","OpenCurlyDoubleQuote":"\u201c","OpenCurlyQuote":"\u2018","operp":"\u29b9","oplus":"\u2295","orarr":"\u21bb","Or":"\u2a54","or":"\u2228","ord":"\u2a5d","order":"\u2134","orderof":"\u2134","ordf":"\xaa","ordm":"\xba","origof":"\u22b6","oror":"\u2a56","orslope":"\u2a57","orv":"\u2a5b","oS":"\u24c8","Oscr":"\u{1d4aa}","oscr":"\u2134","Oslash":"\xd8","oslash":"\xf8","osol":"\u2298","Otilde":"\xd5","otilde":"\xf5","otimesas":"\u2a36","Otimes":"\u2a37","otimes":"\u2297","Ouml":"\xd6","ouml":"\xf6","ovbar":"\u233d","OverBar":"\u203e","OverBrace":"\u23de","OverBracket":"\u23b4","OverParenthesis":"\u23dc","para":"\xb6","parallel":"\u2225","par":"\u2225","parsim":"\u2af3","parsl":"\u2afd","part":"\u2202","PartialD":"\u2202","Pcy":"\u041f","pcy":"\u043f","percnt":"%","period":".","permil":"\u2030","perp":"\u22a5","pertenk":"\u2031","Pfr":"\u{1d513}","pfr":"\u{1d52d}","Phi":"\u03a6","phi":"\u03c6","phiv":"\u03d5","phmmat":"\u2133","phone":"\u260e","Pi":"\u03a0","pi":"\u03c0","pitchfork":"\u22d4","piv":"\u03d6","planck":"\u210f","planckh":"\u210e","plankv":"\u210f","plusacir":"\u2a23","plusb":"\u229e","pluscir":"\u2a22","plus":"+","plusdo":"\u2214","plusdu":"\u2a25","pluse":"\u2a72","PlusMinus":"\xb1","plusmn":"\xb1","plussim":"\u2a26","plustwo":"\u2a27","pm":"\xb1","Poincareplane":"\u210c","pointint":"\u2a15","popf":"\u{1d561}","Popf":"\u2119","pound":"\xa3","prap":"\u2ab7","Pr":"\u2abb","pr":"\u227a","prcue":"\u227c","precapprox":"\u2ab7","prec":"\u227a","preccurlyeq":"\u227c","Precedes":"\u227a","PrecedesEqual":"\u2aaf","PrecedesSlantEqual":"\u227c","PrecedesTilde":"\u227e","preceq":"\u2aaf","precnapprox":"\u2ab9","precneqq":"\u2ab5","precnsim":"\u22e8","pre":"\u2aaf","prE":"\u2ab3","precsim":"\u227e","prime":"\u2032","Prime":"\u2033","primes":"\u2119","prnap":"\u2ab9","prnE":"\u2ab5","prnsim":"\u22e8","prod":"\u220f","Product":"\u220f","profalar":"\u232e","profline":"\u2312","profsurf":"\u2313","prop":"\u221d","Proportional":"\u221d","Proportion":"\u2237","propto":"\u221d","prsim":"\u227e","prurel":"\u22b0","Pscr":"\u{1d4ab}","pscr":"\u{1d4c5}","Psi":"\u03a8","psi":"\u03c8","puncsp":"\u2008","Qfr":"\u{1d514}","qfr":"\u{1d52e}","qint":"\u2a0c","qopf":"\u{1d562}","Qopf":"\u211a","qprime":"\u2057","Qscr":"\u{1d4ac}","qscr":"\u{1d4c6}","quaternions":"\u210d","quatint":"\u2a16","quest":"?","questeq":"\u225f","quot":"\\"","QUOT":"\\"","rAarr":"\u21db","race":"\u223d\u0331","Racute":"\u0154","racute":"\u0155","radic":"\u221a","raemptyv":"\u29b3","rang":"\u27e9","Rang":"\u27eb","rangd":"\u2992","range":"\u29a5","rangle":"\u27e9","raquo":"\xbb","rarrap":"\u2975","rarrb":"\u21e5","rarrbfs":"\u2920","rarrc":"\u2933","rarr":"\u2192","Rarr":"\u21a0","rArr":"\u21d2","rarrfs":"\u291e","rarrhk":"\u21aa","rarrlp":"\u21ac","rarrpl":"\u2945","rarrsim":"\u2974","Rarrtl":"\u2916","rarrtl":"\u21a3","rarrw":"\u219d","ratail":"\u291a","rAtail":"\u291c","ratio":"\u2236","rationals":"\u211a","rbarr":"\u290d","rBarr":"\u290f","RBarr":"\u2910","rbbrk":"\u2773","rbrace":"}","rbrack":"]","rbrke":"\u298c","rbrksld":"\u298e","rbrkslu":"\u2990","Rcaron":"\u0158","rcaron":"\u0159","Rcedil":"\u0156","rcedil":"\u0157","rceil":"\u2309","rcub":"}","Rcy":"\u0420","rcy":"\u0440","rdca":"\u2937","rdldhar":"\u2969","rdquo":"\u201d","rdquor":"\u201d","rdsh":"\u21b3","real":"\u211c","realine":"\u211b","realpart":"\u211c","reals":"\u211d","Re":"\u211c","rect":"\u25ad","reg":"\xae","REG":"\xae","ReverseElement":"\u220b","ReverseEquilibrium":"\u21cb","ReverseUpEquilibrium":"\u296f","rfisht":"\u297d","rfloor":"\u230b","rfr":"\u{1d52f}","Rfr":"\u211c","rHar":"\u2964","rhard":"\u21c1","rharu":"\u21c0","rharul":"\u296c","Rho":"\u03a1","rho":"\u03c1","rhov":"\u03f1","RightAngleBracket":"\u27e9","RightArrowBar":"\u21e5","rightarrow":"\u2192","RightArrow":"\u2192","Rightarrow":"\u21d2","RightArrowLeftArrow":"\u21c4","rightarrowtail":"\u21a3","RightCeiling":"\u2309","RightDoubleBracket":"\u27e7","RightDownTeeVector":"\u295d","RightDownVectorBar":"\u2955","RightDownVector":"\u21c2","RightFloor":"\u230b","rightharpoondown":"\u21c1","rightharpoonup":"\u21c0","rightleftarrows":"\u21c4","rightleftharpoons":"\u21cc","rightrightarrows":"\u21c9","rightsquigarrow":"\u219d","RightTeeArrow":"\u21a6","RightTee":"\u22a2","RightTeeVector":"\u295b","rightthreetimes":"\u22cc","RightTriangleBar":"\u29d0","RightTriangle":"\u22b3","RightTriangleEqual":"\u22b5","RightUpDownVector":"\u294f","RightUpTeeVector":"\u295c","RightUpVectorBar":"\u2954","RightUpVector":"\u21be","RightVectorBar":"\u2953","RightVector":"\u21c0","ring":"\u02da","risingdotseq":"\u2253","rlarr":"\u21c4","rlhar":"\u21cc","rlm":"\u200f","rmoustache":"\u23b1","rmoust":"\u23b1","rnmid":"\u2aee","roang":"\u27ed","roarr":"\u21fe","robrk":"\u27e7","ropar":"\u2986","ropf":"\u{1d563}","Ropf":"\u211d","roplus":"\u2a2e","rotimes":"\u2a35","RoundImplies":"\u2970","rpar":")","rpargt":"\u2994","rppolint":"\u2a12","rrarr":"\u21c9","Rrightarrow":"\u21db","rsaquo":"\u203a","rscr":"\u{1d4c7}","Rscr":"\u211b","rsh":"\u21b1","Rsh":"\u21b1","rsqb":"]","rsquo":"\u2019","rsquor":"\u2019","rthree":"\u22cc","rtimes":"\u22ca","rtri":"\u25b9","rtrie":"\u22b5","rtrif":"\u25b8","rtriltri":"\u29ce","RuleDelayed":"\u29f4","ruluhar":"\u2968","rx":"\u211e","Sacute":"\u015a","sacute":"\u015b","sbquo":"\u201a","scap":"\u2ab8","Scaron":"\u0160","scaron":"\u0161","Sc":"\u2abc","sc":"\u227b","sccue":"\u227d","sce":"\u2ab0","scE":"\u2ab4","Scedil":"\u015e","scedil":"\u015f","Scirc":"\u015c","scirc":"\u015d","scnap":"\u2aba","scnE":"\u2ab6","scnsim":"\u22e9","scpolint":"\u2a13","scsim":"\u227f","Scy":"\u0421","scy":"\u0441","sdotb":"\u22a1","sdot":"\u22c5","sdote":"\u2a66","searhk":"\u2925","searr":"\u2198","seArr":"\u21d8","searrow":"\u2198","sect":"\xa7","semi":";","seswar":"\u2929","setminus":"\u2216","setmn":"\u2216","sext":"\u2736","Sfr":"\u{1d516}","sfr":"\u{1d530}","sfrown":"\u2322","sharp":"\u266f","SHCHcy":"\u0429","shchcy":"\u0449","SHcy":"\u0428","shcy":"\u0448","ShortDownArrow":"\u2193","ShortLeftArrow":"\u2190","shortmid":"\u2223","shortparallel":"\u2225","ShortRightArrow":"\u2192","ShortUpArrow":"\u2191","shy":"\xad","Sigma":"\u03a3","sigma":"\u03c3","sigmaf":"\u03c2","sigmav":"\u03c2","sim":"\u223c","simdot":"\u2a6a","sime":"\u2243","simeq":"\u2243","simg":"\u2a9e","simgE":"\u2aa0","siml":"\u2a9d","simlE":"\u2a9f","simne":"\u2246","simplus":"\u2a24","simrarr":"\u2972","slarr":"\u2190","SmallCircle":"\u2218","smallsetminus":"\u2216","smashp":"\u2a33","smeparsl":"\u29e4","smid":"\u2223","smile":"\u2323","smt":"\u2aaa","smte":"\u2aac","smtes":"\u2aac\ufe00","SOFTcy":"\u042c","softcy":"\u044c","solbar":"\u233f","solb":"\u29c4","sol":"/","Sopf":"\u{1d54a}","sopf":"\u{1d564}","spades":"\u2660","spadesuit":"\u2660","spar":"\u2225","sqcap":"\u2293","sqcaps":"\u2293\ufe00","sqcup":"\u2294","sqcups":"\u2294\ufe00","Sqrt":"\u221a","sqsub":"\u228f","sqsube":"\u2291","sqsubset":"\u228f","sqsubseteq":"\u2291","sqsup":"\u2290","sqsupe":"\u2292","sqsupset":"\u2290","sqsupseteq":"\u2292","square":"\u25a1","Square":"\u25a1","SquareIntersection":"\u2293","SquareSubset":"\u228f","SquareSubsetEqual":"\u2291","SquareSuperset":"\u2290","SquareSupersetEqual":"\u2292","SquareUnion":"\u2294","squarf":"\u25aa","squ":"\u25a1","squf":"\u25aa","srarr":"\u2192","Sscr":"\u{1d4ae}","sscr":"\u{1d4c8}","ssetmn":"\u2216","ssmile":"\u2323","sstarf":"\u22c6","Star":"\u22c6","star":"\u2606","starf":"\u2605","straightepsilon":"\u03f5","straightphi":"\u03d5","strns":"\xaf","sub":"\u2282","Sub":"\u22d0","subdot":"\u2abd","subE":"\u2ac5","sube":"\u2286","subedot":"\u2ac3","submult":"\u2ac1","subnE":"\u2acb","subne":"\u228a","subplus":"\u2abf","subrarr":"\u2979","subset":"\u2282","Subset":"\u22d0","subseteq":"\u2286","subseteqq":"\u2ac5","SubsetEqual":"\u2286","subsetneq":"\u228a","subsetneqq":"\u2acb","subsim":"\u2ac7","subsub":"\u2ad5","subsup":"\u2ad3","succapprox":"\u2ab8","succ":"\u227b","succcurlyeq":"\u227d","Succeeds":"\u227b","SucceedsEqual":"\u2ab0","SucceedsSlantEqual":"\u227d","SucceedsTilde":"\u227f","succeq":"\u2ab0","succnapprox":"\u2aba","succneqq":"\u2ab6","succnsim":"\u22e9","succsim":"\u227f","SuchThat":"\u220b","sum":"\u2211","Sum":"\u2211","sung":"\u266a","sup1":"\xb9","sup2":"\xb2","sup3":"\xb3","sup":"\u2283","Sup":"\u22d1","supdot":"\u2abe","supdsub":"\u2ad8","supE":"\u2ac6","supe":"\u2287","supedot":"\u2ac4","Superset":"\u2283","SupersetEqual":"\u2287","suphsol":"\u27c9","suphsub":"\u2ad7","suplarr":"\u297b","supmult":"\u2ac2","supnE":"\u2acc","supne":"\u228b","supplus":"\u2ac0","supset":"\u2283","Supset":"\u22d1","supseteq":"\u2287","supseteqq":"\u2ac6","supsetneq":"\u228b","supsetneqq":"\u2acc","supsim":"\u2ac8","supsub":"\u2ad4","supsup":"\u2ad6","swarhk":"\u2926","swarr":"\u2199","swArr":"\u21d9","swarrow":"\u2199","swnwar":"\u292a","szlig":"\xdf","Tab":"\\t","target":"\u2316","Tau":"\u03a4","tau":"\u03c4","tbrk":"\u23b4","Tcaron":"\u0164","tcaron":"\u0165","Tcedil":"\u0162","tcedil":"\u0163","Tcy":"\u0422","tcy":"\u0442","tdot":"\u20db","telrec":"\u2315","Tfr":"\u{1d517}","tfr":"\u{1d531}","there4":"\u2234","therefore":"\u2234","Therefore":"\u2234","Theta":"\u0398","theta":"\u03b8","thetasym":"\u03d1","thetav":"\u03d1","thickapprox":"\u2248","thicksim":"\u223c","ThickSpace":"\u205f\u200a","ThinSpace":"\u2009","thinsp":"\u2009","thkap":"\u2248","thksim":"\u223c","THORN":"\xde","thorn":"\xfe","tilde":"\u02dc","Tilde":"\u223c","TildeEqual":"\u2243","TildeFullEqual":"\u2245","TildeTilde":"\u2248","timesbar":"\u2a31","timesb":"\u22a0","times":"\xd7","timesd":"\u2a30","tint":"\u222d","toea":"\u2928","topbot":"\u2336","topcir":"\u2af1","top":"\u22a4","Topf":"\u{1d54b}","topf":"\u{1d565}","topfork":"\u2ada","tosa":"\u2929","tprime":"\u2034","trade":"\u2122","TRADE":"\u2122","triangle":"\u25b5","triangledown":"\u25bf","triangleleft":"\u25c3","trianglelefteq":"\u22b4","triangleq":"\u225c","triangleright":"\u25b9","trianglerighteq":"\u22b5","tridot":"\u25ec","trie":"\u225c","triminus":"\u2a3a","TripleDot":"\u20db","triplus":"\u2a39","trisb":"\u29cd","tritime":"\u2a3b","trpezium":"\u23e2","Tscr":"\u{1d4af}","tscr":"\u{1d4c9}","TScy":"\u0426","tscy":"\u0446","TSHcy":"\u040b","tshcy":"\u045b","Tstrok":"\u0166","tstrok":"\u0167","twixt":"\u226c","twoheadleftarrow":"\u219e","twoheadrightarrow":"\u21a0","Uacute":"\xda","uacute":"\xfa","uarr":"\u2191","Uarr":"\u219f","uArr":"\u21d1","Uarrocir":"\u2949","Ubrcy":"\u040e","ubrcy":"\u045e","Ubreve":"\u016c","ubreve":"\u016d","Ucirc":"\xdb","ucirc":"\xfb","Ucy":"\u0423","ucy":"\u0443","udarr":"\u21c5","Udblac":"\u0170","udblac":"\u0171","udhar":"\u296e","ufisht":"\u297e","Ufr":"\u{1d518}","ufr":"\u{1d532}","Ugrave":"\xd9","ugrave":"\xf9","uHar":"\u2963","uharl":"\u21bf","uharr":"\u21be","uhblk":"\u2580","ulcorn":"\u231c","ulcorner":"\u231c","ulcrop":"\u230f","ultri":"\u25f8","Umacr":"\u016a","umacr":"\u016b","uml":"\xa8","UnderBar":"_","UnderBrace":"\u23df","UnderBracket":"\u23b5","UnderParenthesis":"\u23dd","Union":"\u22c3","UnionPlus":"\u228e","Uogon":"\u0172","uogon":"\u0173","Uopf":"\u{1d54c}","uopf":"\u{1d566}","UpArrowBar":"\u2912","uparrow":"\u2191","UpArrow":"\u2191","Uparrow":"\u21d1","UpArrowDownArrow":"\u21c5","updownarrow":"\u2195","UpDownArrow":"\u2195","Updownarrow":"\u21d5","UpEquilibrium":"\u296e","upharpoonleft":"\u21bf","upharpoonright":"\u21be","uplus":"\u228e","UpperLeftArrow":"\u2196","UpperRightArrow":"\u2197","upsi":"\u03c5","Upsi":"\u03d2","upsih":"\u03d2","Upsilon":"\u03a5","upsilon":"\u03c5","UpTeeArrow":"\u21a5","UpTee":"\u22a5","upuparrows":"\u21c8","urcorn":"\u231d","urcorner":"\u231d","urcrop":"\u230e","Uring":"\u016e","uring":"\u016f","urtri":"\u25f9","Uscr":"\u{1d4b0}","uscr":"\u{1d4ca}","utdot":"\u22f0","Utilde":"\u0168","utilde":"\u0169","utri":"\u25b5","utrif":"\u25b4","uuarr":"\u21c8","Uuml":"\xdc","uuml":"\xfc","uwangle":"\u29a7","vangrt":"\u299c","varepsilon":"\u03f5","varkappa":"\u03f0","varnothing":"\u2205","varphi":"\u03d5","varpi":"\u03d6","varpropto":"\u221d","varr":"\u2195","vArr":"\u21d5","varrho":"\u03f1","varsigma":"\u03c2","varsubsetneq":"\u228a\ufe00","varsubsetneqq":"\u2acb\ufe00","varsupsetneq":"\u228b\ufe00","varsupsetneqq":"\u2acc\ufe00","vartheta":"\u03d1","vartriangleleft":"\u22b2","vartriangleright":"\u22b3","vBar":"\u2ae8","Vbar":"\u2aeb","vBarv":"\u2ae9","Vcy":"\u0412","vcy":"\u0432","vdash":"\u22a2","vDash":"\u22a8","Vdash":"\u22a9","VDash":"\u22ab","Vdashl":"\u2ae6","veebar":"\u22bb","vee":"\u2228","Vee":"\u22c1","veeeq":"\u225a","vellip":"\u22ee","verbar":"|","Verbar":"\u2016","vert":"|","Vert":"\u2016","VerticalBar":"\u2223","VerticalLine":"|","VerticalSeparator":"\u2758","VerticalTilde":"\u2240","VeryThinSpace":"\u200a","Vfr":"\u{1d519}","vfr":"\u{1d533}","vltri":"\u22b2","vnsub":"\u2282\u20d2","vnsup":"\u2283\u20d2","Vopf":"\u{1d54d}","vopf":"\u{1d567}","vprop":"\u221d","vrtri":"\u22b3","Vscr":"\u{1d4b1}","vscr":"\u{1d4cb}","vsubnE":"\u2acb\ufe00","vsubne":"\u228a\ufe00","vsupnE":"\u2acc\ufe00","vsupne":"\u228b\ufe00","Vvdash":"\u22aa","vzigzag":"\u299a","Wcirc":"\u0174","wcirc":"\u0175","wedbar":"\u2a5f","wedge":"\u2227","Wedge":"\u22c0","wedgeq":"\u2259","weierp":"\u2118","Wfr":"\u{1d51a}","wfr":"\u{1d534}","Wopf":"\u{1d54e}","wopf":"\u{1d568}","wp":"\u2118","wr":"\u2240","wreath":"\u2240","Wscr":"\u{1d4b2}","wscr":"\u{1d4cc}","xcap":"\u22c2","xcirc":"\u25ef","xcup":"\u22c3","xdtri":"\u25bd","Xfr":"\u{1d51b}","xfr":"\u{1d535}","xharr":"\u27f7","xhArr":"\u27fa","Xi":"\u039e","xi":"\u03be","xlarr":"\u27f5","xlArr":"\u27f8","xmap":"\u27fc","xnis":"\u22fb","xodot":"\u2a00","Xopf":"\u{1d54f}","xopf":"\u{1d569}","xoplus":"\u2a01","xotime":"\u2a02","xrarr":"\u27f6","xrArr":"\u27f9","Xscr":"\u{1d4b3}","xscr":"\u{1d4cd}","xsqcup":"\u2a06","xuplus":"\u2a04","xutri":"\u25b3","xvee":"\u22c1","xwedge":"\u22c0","Yacute":"\xdd","yacute":"\xfd","YAcy":"\u042f","yacy":"\u044f","Ycirc":"\u0176","ycirc":"\u0177","Ycy":"\u042b","ycy":"\u044b","yen":"\xa5","Yfr":"\u{1d51c}","yfr":"\u{1d536}","YIcy":"\u0407","yicy":"\u0457","Yopf":"\u{1d550}","yopf":"\u{1d56a}","Yscr":"\u{1d4b4}","yscr":"\u{1d4ce}","YUcy":"\u042e","yucy":"\u044e","yuml":"\xff","Yuml":"\u0178","Zacute":"\u0179","zacute":"\u017a","Zcaron":"\u017d","zcaron":"\u017e","Zcy":"\u0417","zcy":"\u0437","Zdot":"\u017b","zdot":"\u017c","zeetrf":"\u2128","ZeroWidthSpace":"\u200b","Zeta":"\u0396","zeta":"\u03b6","zfr":"\u{1d537}","Zfr":"\u2128","ZHcy":"\u0416","zhcy":"\u0436","zigrarr":"\u21dd","zopf":"\u{1d56b}","Zopf":"\u2124","Zscr":"\u{1d4b5}","zscr":"\u{1d4cf}","zwj":"\u200d","zwnj":"\u200c"}')}},Be=>{Be(Be.s=429)}]);