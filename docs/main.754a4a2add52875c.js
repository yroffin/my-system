(self.webpackChunkfront=self.webpackChunkfront||[]).push([[179],{30:(He,we,U)=>{"use strict";function X(i){return"function"==typeof i}function D(i){const e=i(n=>{Error.call(n),n.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const V=D(i=>function(e){i(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((n,r)=>`${r+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function O(i,t){if(i){const e=i.indexOf(t);0<=e&&i.splice(e,1)}}class H{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const s of e)s.remove(this);else e.remove(this);const{initialTeardown:n}=this;if(X(n))try{n()}catch(s){t=s instanceof V?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{q(s)}catch(o){t=t??[],o instanceof V?t=[...t,...o.errors]:t.push(o)}}if(t)throw new V(t)}}add(t){var e;if(t&&t!==this)if(this.closed)q(t);else{if(t instanceof H){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(t)}}_hasParent(t){const{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){const{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&O(e,t)}remove(t){const{_finalizers:e}=this;e&&O(e,t),t instanceof H&&t._removeParent(this)}}H.EMPTY=(()=>{const i=new H;return i.closed=!0,i})();const L=H.EMPTY;function P(i){return i instanceof H||i&&"closed"in i&&X(i.remove)&&X(i.add)&&X(i.unsubscribe)}function q(i){X(i)?i():i.unsubscribe()}const ee={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},K={setTimeout(i,t,...e){const{delegate:n}=K;return n?.setTimeout?n.setTimeout(i,t,...e):setTimeout(i,t,...e)},clearTimeout(i){const{delegate:t}=K;return(t?.clearTimeout||clearTimeout)(i)},delegate:void 0};function ne(i){K.setTimeout(()=>{const{onUnhandledError:t}=ee;if(!t)throw i;t(i)})}function se(){}const J=_e("C",void 0,void 0);function _e(i,t,e){return{kind:i,value:t,error:e}}let Ee=null;function te(i){if(ee.useDeprecatedSynchronousErrorHandling){const t=!Ee;if(t&&(Ee={errorThrown:!1,error:null}),i(),t){const{errorThrown:e,error:n}=Ee;if(Ee=null,e)throw n}}else i()}class B extends H{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,P(t)&&t.add(this)):this.destination=Pe}static create(t,e,n){return new Be(t,e,n)}next(t){this.isStopped?ue(function ae(i){return _e("N",i,void 0)}(t),this):this._next(t)}error(t){this.isStopped?ue(function W(i){return _e("E",void 0,i)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?ue(J,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const $=Function.prototype.bind;function ie(i,t){return $.call(i,t)}class pe{constructor(t){this.partialObserver=t}next(t){const{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(n){Me(n)}}error(t){const{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(n){Me(n)}else Me(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){Me(e)}}}class Be extends B{constructor(t,e,n){let r;if(super(),X(t)||!t)r={next:t??void 0,error:e??void 0,complete:n??void 0};else{let s;this&&ee.useDeprecatedNextContext?(s=Object.create(t),s.unsubscribe=()=>this.unsubscribe(),r={next:t.next&&ie(t.next,s),error:t.error&&ie(t.error,s),complete:t.complete&&ie(t.complete,s)}):r=t}this.destination=new pe(r)}}function Me(i){ee.useDeprecatedSynchronousErrorHandling?function oe(i){ee.useDeprecatedSynchronousErrorHandling&&Ee&&(Ee.errorThrown=!0,Ee.error=i)}(i):ne(i)}function ue(i,t){const{onStoppedNotification:e}=ee;e&&K.setTimeout(()=>e(i,t))}const Pe={closed:!0,next:se,error:function xe(i){throw i},complete:se},ot="function"==typeof Symbol&&Symbol.observable||"@@observable";function Fe(i){return i}function lt(i){return 0===i.length?Fe:1===i.length?i[0]:function(e){return i.reduce((n,r)=>r(n),e)}}let vt=(()=>{class i{constructor(e){e&&(this._subscribe=e)}lift(e){const n=new i;return n.source=this,n.operator=e,n}subscribe(e,n,r){const s=function ht(i){return i&&i instanceof B||function Ne(i){return i&&X(i.next)&&X(i.error)&&X(i.complete)}(i)&&P(i)}(e)?e:new Be(e,n,r);return te(()=>{const{operator:o,source:l}=this;s.add(o?o.call(s,l):l?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(e){try{return this._subscribe(e)}catch(n){e.error(n)}}forEach(e,n){return new(n=vn(n))((r,s)=>{const o=new Be({next:l=>{try{e(l)}catch(u){s(u),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(e){var n;return null===(n=this.source)||void 0===n?void 0:n.subscribe(e)}[ot](){return this}pipe(...e){return lt(e)(this)}toPromise(e){return new(e=vn(e))((n,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>n(s))})}}return i.create=t=>new i(t),i})();function vn(i){var t;return null!==(t=i??ee.Promise)&&void 0!==t?t:Promise}const rt=D(i=>function(){i(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Ge=(()=>{class i extends vt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const n=new _t(this,this);return n.operator=e,n}_throwIfClosed(){if(this.closed)throw new rt}next(e){te(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const n of this.currentObservers)n.next(e)}})}error(e){te(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:n}=this;for(;n.length;)n.shift().error(e)}})}complete(){te(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:n,isStopped:r,observers:s}=this;return n||r?L:(this.currentObservers=null,s.push(e),new H(()=>{this.currentObservers=null,O(s,e)}))}_checkFinalizedStatuses(e){const{hasError:n,thrownError:r,isStopped:s}=this;n?e.error(r):s&&e.complete()}asObservable(){const e=new vt;return e.source=this,e}}return i.create=(t,e)=>new _t(t,e),i})();class _t extends Ge{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===n||n.call(e,t)}error(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===n||n.call(e,t)}complete(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)}_subscribe(t){var e,n;return null!==(n=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==n?n:L}}function At(i){return X(i?.lift)}function Lt(i){return t=>{if(At(t))return t.lift(function(e){try{return i(e,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ut(i,t,e,n,r){return new Oe(i,t,e,n,r)}class Oe extends B{constructor(t,e,n,r,s,o){super(t),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=e?function(l){try{e(l)}catch(u){t.error(u)}}:super._next,this._error=r?function(l){try{r(l)}catch(u){t.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=n?function(){try{n()}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function fe(i,t){return Lt((e,n)=>{let r=0;e.subscribe(Ut(n,s=>{n.next(i.call(t,s,r++))}))})}function ws(i){return this instanceof ws?(this.v=i,this):new ws(i)}function ua(i,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,n=e.apply(i,t||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(I){n[I]&&(r[I]=function(T){return new Promise(function(k,G){s.push([I,T,k,G])>1||l(I,T)})})}function l(I,T){try{!function u(I){I.value instanceof ws?Promise.resolve(I.value.v).then(p,v):w(s[0][2],I)}(n[I](T))}catch(k){w(s[0][3],k)}}function p(I){l("next",I)}function v(I){l("throw",I)}function w(I,T){I(T),s.shift(),s.length&&l(s[0][0],s[0][1])}}function il(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=i[Symbol.asyncIterator];return t?t.call(i):(i=function yn(i){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&i[t],n=0;if(e)return e.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(i),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(s){e[s]=i[s]&&function(o){return new Promise(function(l,u){!function r(s,o,l,u){Promise.resolve(u).then(function(p){s({value:p,done:l})},o)}(l,u,(o=i[s](o)).done,o.value)})}}}const ku=i=>i&&"number"==typeof i.length&&"function"!=typeof i;function Xa(i){return X(i?.then)}function Rd(i){return X(i[ot])}function uu(i){return Symbol.asyncIterator&&X(i?.[Symbol.asyncIterator])}function Sa(i){return new TypeError(`You provided ${null!==i&&"object"==typeof i?"an invalid object":`'${i}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Ou=function Eh(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function td(i){return X(i?.[Ou])}function ff(i){return ua(this,arguments,function*(){const e=i.getReader();try{for(;;){const{value:n,done:r}=yield ws(e.read());if(r)return yield ws(void 0);yield yield ws(n)}}finally{e.releaseLock()}})}function nd(i){return X(i?.getReader)}function pl(i){if(i instanceof vt)return i;if(null!=i){if(Rd(i))return function pf(i){return new vt(t=>{const e=i[ot]();if(X(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(i);if(ku(i))return function rh(i){return new vt(t=>{for(let e=0;e<i.length&&!t.closed;e++)t.next(i[e]);t.complete()})}(i);if(Xa(i))return function gf(i){return new vt(t=>{i.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,ne)})}(i);if(uu(i))return xc(i);if(td(i))return function kd(i){return new vt(t=>{for(const e of i)if(t.next(e),t.closed)return;t.complete()})}(i);if(nd(i))return function Mg(i){return xc(ff(i))}(i)}throw Sa(i)}function xc(i){return new vt(t=>{(function Th(i,t){var e,n,r,s;return function et(i,t,e,n){return new(e||(e=Promise))(function(s,o){function l(v){try{p(n.next(v))}catch(w){o(w)}}function u(v){try{p(n.throw(v))}catch(w){o(w)}}function p(v){v.done?s(v.value):function r(s){return s instanceof e?s:new e(function(o){o(s)})}(v.value).then(l,u)}p((n=n.apply(i,t||[])).next())})}(this,void 0,void 0,function*(){try{for(e=il(i);!(n=yield e.next()).done;)if(t.next(n.value),t.closed)return}catch(o){r={error:o}}finally{try{n&&!n.done&&(s=e.return)&&(yield s.call(e))}finally{if(r)throw r.error}}t.complete()})})(i,t).catch(e=>t.error(e))})}function io(i,t,e,n=0,r=!1){const s=t.schedule(function(){e(),r?i.add(this.schedule(null,n)):this.unsubscribe()},n);if(i.add(s),!r)return s}function gl(i,t,e=1/0){return X(t)?gl((n,r)=>fe((s,o)=>t(n,s,r,o))(pl(i(n,r))),e):("number"==typeof t&&(e=t),Lt((n,r)=>function mf(i,t,e,n,r,s,o,l){const u=[];let p=0,v=0,w=!1;const I=()=>{w&&!u.length&&!p&&t.complete()},T=G=>p<n?k(G):u.push(G),k=G=>{s&&t.next(G),p++;let Y=!1;pl(e(G,v++)).subscribe(Ut(t,ce=>{r?.(ce),s?T(ce):t.next(ce)},()=>{Y=!0},void 0,()=>{if(Y)try{for(p--;u.length&&p<n;){const ce=u.shift();o?io(t,o,()=>k(ce)):k(ce)}I()}catch(ce){t.error(ce)}}))};return i.subscribe(Ut(t,T,()=>{w=!0,I()})),()=>{l?.()}}(n,r,i,e)))}function Ic(i=1/0){return gl(Fe,i)}const rl=new vt(i=>i.complete());function Ze(i){return i&&X(i.schedule)}function pt(i){return i[i.length-1]}function st(i){return X(pt(i))?i.pop():void 0}function ge(i){return Ze(pt(i))?i.pop():void 0}function tt(i,t=0){return Lt((e,n)=>{e.subscribe(Ut(n,r=>io(n,i,()=>n.next(r),t),()=>io(n,i,()=>n.complete(),t),r=>io(n,i,()=>n.error(r),t)))})}function Mt(i,t=0){return Lt((e,n)=>{n.add(i.schedule(()=>e.subscribe(n),t))})}function pi(i,t){if(!i)throw new Error("Iterable cannot be null");return new vt(e=>{io(e,t,()=>{const n=i[Symbol.asyncIterator]();io(e,t,()=>{n.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function ur(i,t){return t?function pr(i,t){if(null!=i){if(Rd(i))return function Yt(i,t){return pl(i).pipe(Mt(t),tt(t))}(i,t);if(ku(i))return function wi(i,t){return new vt(e=>{let n=0;return t.schedule(function(){n===i.length?e.complete():(e.next(i[n++]),e.closed||this.schedule())})})}(i,t);if(Xa(i))return function Tn(i,t){return pl(i).pipe(Mt(t),tt(t))}(i,t);if(uu(i))return pi(i,t);if(td(i))return function si(i,t){return new vt(e=>{let n;return io(e,t,()=>{n=i[Ou](),io(e,t,()=>{let r,s;try{({value:r,done:s}=n.next())}catch(o){return void e.error(o)}s?e.complete():e.next(r)},0,!0)}),()=>X(n?.return)&&n.return()})}(i,t);if(nd(i))return function yr(i,t){return pi(ff(i),t)}(i,t)}throw Sa(i)}(i,t):pl(i)}function So(i={}){const{connector:t=(()=>new Ge),resetOnError:e=!0,resetOnComplete:n=!0,resetOnRefCountZero:r=!0}=i;return s=>{let o,l,u,p=0,v=!1,w=!1;const I=()=>{l?.unsubscribe(),l=void 0},T=()=>{I(),o=u=void 0,v=w=!1},k=()=>{const G=o;T(),G?.unsubscribe()};return Lt((G,Y)=>{p++,!w&&!v&&I();const ce=u=u??t();Y.add(()=>{p--,0===p&&!w&&!v&&(l=Eo(k,r))}),ce.subscribe(Y),!o&&p>0&&(o=new Be({next:Se=>ce.next(Se),error:Se=>{w=!0,I(),l=Eo(T,e,Se),ce.error(Se)},complete:()=>{v=!0,I(),l=Eo(T,n),ce.complete()}}),pl(G).subscribe(o))})(s)}}function Eo(i,t,...e){if(!0===t)return void i();if(!1===t)return;const n=new Be({next:()=>{n.unsubscribe(),i()}});return t(...e).subscribe(n)}function ds(i){for(let t in i)if(i[t]===ds)return t;throw Error("Could not find renamed property on target object.")}function Ea(i,t){for(const e in t)t.hasOwnProperty(e)&&!i.hasOwnProperty(e)&&(i[e]=t[e])}function fs(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(fs).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const t=i.toString();if(null==t)return""+t;const e=t.indexOf("\n");return-1===e?t:t.substring(0,e)}function Ya(i,t){return null==i||""===i?null===t?"":t:null==t||""===t?i:i+" "+t}const Fu=ds({__forward_ref__:ds});function cs(i){return i.__forward_ref__=cs,i.toString=function(){return fs(this())},i}function is(i){return Dg(i)?i():i}function Dg(i){return"function"==typeof i&&i.hasOwnProperty(Fu)&&i.__forward_ref__===cs}class yi extends Error{constructor(t,e){super(function Lg(i,t){return`NG0${Math.abs(i)}${t?": "+t.trim():""}`}(t,e)),this.code=t}}function Ps(i){return"string"==typeof i?i:null==i?"":String(i)}function As(i,t){throw new yi(-201,!1)}function Ec(i,t){null==i&&function ro(i,t,e,n){throw new Error(`ASSERTION ERROR: ${i}`+(null==n?"":` [Expected=> ${e} ${n} ${t} <=Actual]`))}(t,i,null,"!=")}function Zi(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Sr(i){return{providers:i.providers||[],imports:i.imports||[]}}function Tc(i){return Dy(i,qf)||Dy(i,wm)}function Dy(i,t){return i.hasOwnProperty(t)?i[t]:null}function ha(i){return i&&(i.hasOwnProperty(Up)||i.hasOwnProperty(Am))?i[Up]:null}const qf=ds({\u0275prov:ds}),Up=ds({\u0275inj:ds}),wm=ds({ngInjectableDef:ds}),Am=ds({ngInjectorDef:ds});var rs=(()=>((rs=rs||{})[rs.Default=0]="Default",rs[rs.Host=1]="Host",rs[rs.Self=2]="Self",rs[rs.SkipSelf=4]="SkipSelf",rs[rs.Optional=8]="Optional",rs))();let bv;function Nu(i){const t=bv;return bv=i,t}function Xl(i,t,e){const n=Tc(i);return n&&"root"==n.providedIn?void 0===n.value?n.value=n.factory():n.value:e&rs.Optional?null:void 0!==t?t:void As(fs(i))}function sh(i){return{toString:i}.toString()}var oh=(()=>((oh=oh||{})[oh.OnPush=0]="OnPush",oh[oh.Default=1]="Default",oh))(),Ma=(()=>{return(i=Ma||(Ma={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Ma;var i})();const so=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Fd={},_o=[],Ka=ds({\u0275cmp:ds}),Xf=ds({\u0275dir:ds}),Za=ds({\u0275pipe:ds}),sl=ds({\u0275mod:ds}),hu=ds({\u0275fac:ds}),ah=ds({__NG_ELEMENT_ID__:ds});let Yf=0;function _r(i){return sh(()=>{const e=!0===i.standalone,n={},r={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:n,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===oh.OnPush,directiveDefs:null,pipeDefs:null,standalone:e,dependencies:e&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||_o,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Ma.Emulated,id:"c"+Yf++,styles:i.styles||_o,_:null,setInput:null,schemas:i.schemas||null,tView:null},s=i.dependencies,o=i.features;return r.inputs=Ry(i.inputs,n),r.outputs=Ry(i.outputs),o&&o.forEach(l=>l(r)),r.directiveDefs=s?()=>("function"==typeof s?s():s).map(Lh).filter(vf):null,r.pipeDefs=s?()=>("function"==typeof s?s():s).map(La).filter(vf):null,r})}function Lh(i){return Ko(i)||Ol(i)}function vf(i){return null!==i}function Rr(i){return sh(()=>({type:i.type,bootstrap:i.bootstrap||_o,declarations:i.declarations||_o,imports:i.imports||_o,exports:i.exports||_o,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function Ry(i,t){if(null==i)return Fd;const e={};for(const n in i)if(i.hasOwnProperty(n)){let r=i[n],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),e[r]=n,t&&(t[r]=s)}return e}const qr=_r;function du(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Ko(i){return i[Ka]||null}function Ol(i){return i[Xf]||null}function La(i){return i[Za]||null}function fu(i,t){const e=i[sl]||null;if(!e&&!0===t)throw new Error(`Type ${fs(i)} does not have '\u0275mod' property.`);return e}function Jc(i){return Array.isArray(i)&&"object"==typeof i[1]}function Ph(i){return Array.isArray(i)&&!0===i[1]}function wv(i){return 0!=(8&i.flags)}function kg(i){return 2==(2&i.flags)}function Og(i){return 1==(1&i.flags)}function Rh(i){return null!==i.template}function Sm(i){return 0!=(256&i[2])}function ip(i,t){return i.hasOwnProperty(hu)?i[hu]:null}class Mm{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function da(){return bf}function bf(i){return i.type.prototype.ngOnChanges&&(i.setInput=rp),Fy}function Fy(){const i=Dm(this),t=i?.current;if(t){const e=i.previous;if(e===Fd)i.previous=t;else for(let n in t)e[n]=t[n];i.current=null,this.ngOnChanges(t)}}function rp(i,t,e,n){const r=Dm(i)||function Ng(i,t){return i[Tv]=t}(i,{previous:Fd,current:null}),s=r.current||(r.current={}),o=r.previous,l=this.declaredInputs[e],u=o[l];s[l]=new Mm(u&&u.currentValue,t,o===Fd),i[n]=t}da.ngInherit=!0;const Tv="__ngSimpleChanges__";function Dm(i){return i[Tv]||null}function ra(i){for(;Array.isArray(i);)i=i[0];return i}function Vg(i,t){return ra(t[i])}function hh(i,t){return ra(t[i.index])}function ys(i,t){return i.data[t]}function ml(i,t){return i[t]}function Dc(i,t){const e=t[i];return Jc(e)?e:e[0]}function bo(i){return 4==(4&i[2])}function Fo(i){return 64==(64&i[2])}function $s(i,t){return null==t?null:i[t]}function Xr(i){i[18]=0}function Ug(i,t){i[5]+=t;let e=i,n=i[3];for(;null!==n&&(1===t&&1===e[5]||-1===t&&0===e[5]);)n[5]+=t,e=n,n=n[3]}const ns={lFrame:wa(null),bindingsEnabled:!0};function zy(){return ns.bindingsEnabled}function bi(){return ns.lFrame.lView}function Ts(){return ns.lFrame.tView}function Pt(i){return ns.lFrame.contextLView=i,i[8]}function Rt(i){return ns.lFrame.contextLView=null,i}function bt(){let i=No();for(;null!==i&&64===i.type;)i=i.parent;return i}function No(){return ns.lFrame.currentTNode}function sa(i,t){const e=ns.lFrame;e.currentTNode=i,e.isParent=t}function Rs(){return ns.lFrame.isParent}function qp(){ns.lFrame.isParent=!1}function Bo(){const i=ns.lFrame;let t=i.bindingRootIndex;return-1===t&&(t=i.bindingRootIndex=i.tView.bindingStartIndex),t}function Oh(){return ns.lFrame.bindingIndex++}function vl(i){const t=ns.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+i,e}function zd(i,t){const e=ns.lFrame;e.bindingIndex=e.bindingRootIndex=i,Bu(t)}function Bu(i){ns.lFrame.currentDirectiveIndex=i}function Pc(){return ns.lFrame.currentQueryIndex}function Hg(i){ns.lFrame.currentQueryIndex=i}function Ms(i){const t=i[1];return 2===t.type?t.declTNode:1===t.type?i[6]:null}function Dv(i,t,e){if(e&rs.SkipSelf){let r=t,s=i;for(;!(r=r.parent,null!==r||e&rs.Host||(r=Ms(s),null===r||(s=s[15],10&r.type))););if(null===r)return!1;t=r,i=s}const n=ns.lFrame=Dr();return n.currentTNode=t,n.lView=i,!0}function Gg(i){const t=Dr(),e=i[1];ns.lFrame=t,t.currentTNode=e.firstChild,t.lView=i,t.tView=e,t.contextLView=i,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function Dr(){const i=ns.lFrame,t=null===i?null:i.child;return null===t?wa(i):t}function wa(i){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=t),t}function Nl(){const i=ns.lFrame;return ns.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const oa=Nl;function Ua(){const i=Nl();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function hc(){return ns.lFrame.selectedIndex}function wf(i){ns.lFrame.selectedIndex=i}function Ha(){const i=ns.lFrame;return ys(i.tView,i.selectedIndex)}function xf(i,t){for(let e=t.directiveStart,n=t.directiveEnd;e<n;e++){const s=i.data[e].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:l,ngAfterViewInit:u,ngAfterViewChecked:p,ngOnDestroy:v}=s;o&&(i.contentHooks||(i.contentHooks=[])).push(-e,o),l&&((i.contentHooks||(i.contentHooks=[])).push(e,l),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(e,l)),u&&(i.viewHooks||(i.viewHooks=[])).push(-e,u),p&&((i.viewHooks||(i.viewHooks=[])).push(e,p),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(e,p)),null!=v&&(i.destroyHooks||(i.destroyHooks=[])).push(e,v)}}function Ud(i,t,e){If(i,t,3,e)}function $g(i,t,e,n){(3&i[2])===e&&If(i,t,e,n)}function Fh(i,t){let e=i[2];(3&e)===t&&(e&=2047,e+=1,i[2]=e)}function If(i,t,e,n){const s=n??-1,o=t.length-1;let l=0;for(let u=void 0!==n?65535&i[18]:0;u<o;u++)if("number"==typeof t[u+1]){if(l=t[u],null!=n&&l>=n)break}else t[u]<0&&(i[18]+=65536),(l<s||-1==s)&&(Sf(i,e,t,u),i[18]=(4294901760&i[18])+u+2),u++}function Sf(i,t,e,n){const r=e[n]<0,s=e[n+1],l=i[r?-e[n]:e[n]];if(r){if(i[2]>>11<i[18]>>16&&(3&i[2])===t){i[2]+=2048;try{s.call(l)}finally{}}}else try{s.call(l)}finally{}}class Xp{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Yp(i,t,e){let n=0;for(;n<e.length;){const r=e[n];if("number"==typeof r){if(0!==r)break;n++;const s=e[n++],o=e[n++],l=e[n++];i.setAttribute(t,o,l,s)}else{const s=r,o=e[++n];Gd(s)?i.setProperty(t,s,o):i.setAttribute(t,s,o),n++}}return n}function ll(i){return 3===i||4===i||6===i}function Gd(i){return 64===i.charCodeAt(0)}function Nh(i,t){if(null!==t&&0!==t.length)if(null===i||0===i.length)i=t.slice();else{let e=-1;for(let n=0;n<t.length;n++){const r=t[n];"number"==typeof r?e=r:0===e||Rc(i,e,r,null,-1===e||2===e?t[++n]:null)}}return i}function Rc(i,t,e,n,r){let s=0,o=i.length;if(-1===t)o=-1;else for(;s<i.length;){const l=i[s++];if("number"==typeof l){if(l===t){o=-1;break}if(l>t){o=s-1;break}}}for(;s<i.length;){const l=i[s];if("number"==typeof l)break;if(l===e){if(null===n)return void(null!==r&&(i[s+1]=r));if(n===i[s+1])return void(i[s+2]=r)}s++,null!==n&&s++,null!==r&&s++}-1!==o&&(i.splice(o,0,t),s=o+1),i.splice(s++,0,e),null!==n&&i.splice(s++,0,n),null!==r&&i.splice(s++,0,r)}function Bh(i){return-1!==i}function dh(i){return 32767&i}function mu(i,t){let e=function zu(i){return i>>16}(i),n=t;for(;e>0;)n=n[15],e--;return n}let aa=!0;function ld(i){const t=aa;return aa=i,t}let vu=0;const Co={};function js(i,t){const e=cp(i,t);if(-1!==e)return e;const n=t[1];n.firstCreatePass&&(i.injectorIndex=t.length,lp(n.data,i),lp(t,null),lp(n.blueprint,null));const r=Oc(i,t),s=i.injectorIndex;if(Bh(r)){const o=dh(r),l=mu(r,t),u=l[1].data;for(let p=0;p<8;p++)t[s+p]=l[o+p]|u[o+p]}return t[s+8]=r,s}function lp(i,t){i.push(0,0,0,0,0,0,0,0,t)}function cp(i,t){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===t[i.injectorIndex+8]?-1:i.injectorIndex}function Oc(i,t){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let e=0,n=null,r=t;for(;null!==r;){if(n=Qa(r),null===n)return-1;if(e++,r=r[15],-1!==n.injectorIndex)return n.injectorIndex|e<<16}return-1}function up(i,t,e){!function kc(i,t,e){let n;"string"==typeof e?n=e.charCodeAt(0)||0:e.hasOwnProperty(ah)&&(n=e[ah]),null==n&&(n=e[ah]=vu++);const r=255&n;t.data[i+(r>>5)]|=1<<r}(i,t,e)}function fh(i,t,e){if(e&rs.Optional)return i;As()}function Wd(i,t,e,n){if(e&rs.Optional&&void 0===n&&(n=null),0==(e&(rs.Self|rs.Host))){const r=i[9],s=Nu(void 0);try{return r?r.get(t,n,e&rs.Optional):Xl(t,n,e&rs.Optional)}finally{Nu(s)}}return fh(n,0,e)}function jd(i,t,e,n=rs.Default,r){if(null!==i){if(1024&t[2]){const o=function Vh(i,t,e,n,r){let s=i,o=t;for(;null!==s&&null!==o&&1024&o[2]&&!(256&o[2]);){const l=Ql(s,o,e,n|rs.Self,Co);if(l!==Co)return l;let u=s.parent;if(!u){const p=o[21];if(p){const v=p.get(e,Co,n);if(v!==Co)return v}u=Qa(o),o=o[15]}s=u}return r}(i,t,e,n,Co);if(o!==Co)return o}const s=Ql(i,t,e,n,Co);if(s!==Co)return s}return Wd(t,e,n,r)}function Ql(i,t,e,n,r){const s=function cd(i){if("string"==typeof i)return i.charCodeAt(0)||0;const t=i.hasOwnProperty(ah)?i[ah]:void 0;return"number"==typeof t?t>=0?255&t:Kp:t}(e);if("function"==typeof s){if(!Dv(t,i,n))return n&rs.Host?fh(r,0,n):Wd(t,e,n,r);try{const o=s(n);if(null!=o||n&rs.Optional)return o;As()}finally{oa()}}else if("number"==typeof s){let o=null,l=cp(i,t),u=-1,p=n&rs.Host?t[16][6]:null;for((-1===l||n&rs.SkipSelf)&&(u=-1===l?Oc(i,t):t[l+8],-1!==u&&hp(n,!1)?(o=t[1],l=dh(u),t=mu(u,t)):l=-1);-1!==l;){const v=t[1];if($d(s,l,v.data)){const w=ul(l,t,e,o,n,p);if(w!==Co)return w}u=t[l+8],-1!==u&&hp(n,t[1].data[l+8]===p)&&$d(s,l,t)?(o=v,l=dh(u),t=mu(u,t)):l=-1}}return r}function ul(i,t,e,n,r,s){const o=t[1],l=o.data[i+8],v=zh(l,o,e,null==n?kg(l)&&aa:n!=o&&0!=(3&l.type),r&rs.Host&&s===l);return null!==v?tu(t,o,v,l):Co}function zh(i,t,e,n,r){const s=i.providerIndexes,o=t.data,l=1048575&s,u=i.directiveStart,v=s>>20,I=r?l+v:i.directiveEnd;for(let T=n?l:l+v;T<I;T++){const k=o[T];if(T<u&&e===k||T>=u&&k.type===e)return T}if(r){const T=o[u];if(T&&Rh(T)&&T.type===e)return u}return null}function tu(i,t,e,n){let r=i[e];const s=t.data;if(function Vy(i){return i instanceof Xp}(r)){const o=r;o.resolving&&function vv(i,t){const e=t?`. Dependency path: ${t.join(" > ")} > ${i}`:"";throw new yi(-200,`Circular dependency in DI detected for ${i}${e}`)}(function To(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():Ps(i)}(s[e]));const l=ld(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?Nu(o.injectImpl):null;Dv(i,n,rs.Default);try{r=i[e]=o.factory(void 0,s,i,n),t.firstCreatePass&&e>=n.directiveStart&&function Pm(i,t,e){const{ngOnChanges:n,ngOnInit:r,ngDoCheck:s}=t.type.prototype;if(n){const o=bf(t);(e.preOrderHooks||(e.preOrderHooks=[])).push(i,o),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(i,o)}r&&(e.preOrderHooks||(e.preOrderHooks=[])).push(0-i,r),s&&((e.preOrderHooks||(e.preOrderHooks=[])).push(i,s),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(i,s))}(e,s[e],t)}finally{null!==u&&Nu(u),ld(l),o.resolving=!1,oa()}}return r}function $d(i,t,e){return!!(e[t+(i>>5)]&1<<i)}function hp(i,t){return!(i&rs.Self||i&rs.Host&&t)}class ph{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,n){return jd(this._tNode,this._lView,t,n,e)}}function Kp(){return new ph(bt(),bi())}function Wo(i){return sh(()=>{const t=i.prototype.constructor,e=t[hu]||qd(t),n=Object.prototype;let r=Object.getPrototypeOf(i.prototype).constructor;for(;r&&r!==n;){const s=r[hu]||qd(r);if(s&&s!==e)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function qd(i){return Dg(i)?()=>{const t=qd(is(i));return t&&t()}:ip(i)}function Qa(i){const t=i[1],e=t.type;return 2===e?t.declTNode:1===e?i[6]:null}function ud(i){return function Xg(i,t){if("class"===t)return i.classes;if("style"===t)return i.styles;const e=i.attrs;if(e){const n=e.length;let r=0;for(;r<n;){const s=e[r];if(ll(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<n&&"string"==typeof e[r];)r++;else{if(s===t)return e[r+1];r+=2}}}return null}(bt(),i)}const Uh="__parameters__";function la(i,t,e){return sh(()=>{const n=function hd(i){return function(...e){if(i){const n=i(...e);for(const r in n)this[r]=n[r]}}}(t);function r(...s){if(this instanceof r)return n.apply(this,s),this;const o=new r(...s);return l.annotation=o,l;function l(u,p,v){const w=u.hasOwnProperty(Uh)?u[Uh]:Object.defineProperty(u,Uh,{value:[]})[Uh];for(;w.length<=v;)w.push(null);return(w[v]=w[v]||[]).push(o),u}}return e&&(r.prototype=Object.create(e.prototype)),r.prototype.ngMetadataName=i,r.annotationCls=r,r})}class ir{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=Zi({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ga(i,t){void 0===t&&(t=i);for(let e=0;e<i.length;e++){let n=i[e];Array.isArray(n)?(t===i&&(t=i.slice(0,e)),Ga(n,t)):t!==i&&t.push(n)}return t}function yu(i,t){i.forEach(e=>Array.isArray(e)?yu(e,t):t(e))}function Hu(i,t,e){t>=i.length?i.push(e):i.splice(t,0,e)}function Gu(i,t){return t>=i.length-1?i.pop():i.splice(t,1)[0]}function Sl(i,t){const e=[];for(let n=0;n<i;n++)e.push(t);return e}function El(i,t,e){let n=Do(i,t);return n>=0?i[1|n]=e:(n=~n,function dp(i,t,e,n){let r=i.length;if(r==t)i.push(e,n);else if(1===r)i.push(n,i[0]),i[0]=e;else{for(r--,i.push(i[r-1],i[r]);r>t;)i[r]=i[r-2],r--;i[t]=e,i[t+1]=n}}(i,n,t,e)),n}function fc(i,t){const e=Do(i,t);if(e>=0)return i[1|e]}function Do(i,t){return function tc(i,t,e){let n=0,r=i.length>>e;for(;r!==n;){const s=n+(r-n>>1),o=i[s<<e];if(t===o)return s<<e;o>t?r=s:n=s+1}return~(r<<e)}(i,t,1)}const bu={},Mf="__NG_DI_FLAG__",Df="ngTempTokenPath",gc=/\n/gm,Wh="__source";let Yd;function Wu(i){const t=Yd;return Yd=i,t}function dd(i,t=rs.Default){if(void 0===Yd)throw new yi(-203,!1);return null===Yd?Xl(i,void 0,t):Yd.get(i,t&rs.Optional?null:void 0,t)}function qn(i,t=rs.Default){return(function Cv(){return bv}()||dd)(is(i),t)}function fa(i,t=rs.Default){return"number"!=typeof t&&(t=0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)),qn(i,t)}function Kd(i){const t=[];for(let e=0;e<i.length;e++){const n=is(i[e]);if(Array.isArray(n)){if(0===n.length)throw new yi(900,!1);let r,s=rs.Default;for(let o=0;o<n.length;o++){const l=n[o],u=Nm(l);"number"==typeof u?-1===u?r=l.token:s|=u:r=l}t.push(qn(r,s))}else t.push(qn(n))}return t}function Cu(i,t){return i[Mf]=t,i.prototype[Mf]=t,i}function Nm(i){return i[Mf]}const ju=Cu(la("Inject",i=>({token:i})),-1),Ml=Cu(la("Optional"),8),mh=Cu(la("SkipSelf"),4);let yh,Fc,qu;function mc(i){return function Fa(){if(void 0===Fc&&(Fc=null,so.trustedTypes))try{Fc=so.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return Fc}()?.createHTML(i)||i}function gd(i){return function Rf(){if(void 0===qu&&(qu=null,so.trustedTypes))try{qu=so.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return qu}()?.createHTML(i)||i}class ru{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class md extends ru{getTypeName(){return"HTML"}}class _p extends ru{getTypeName(){return"Style"}}class Hm extends ru{getTypeName(){return"Script"}}class $_ extends ru{getTypeName(){return"URL"}}class nm extends ru{getTypeName(){return"ResourceURL"}}function bl(i){return i instanceof ru?i.changingThisBreaksApplicationSecurity:i}function ca(i,t){const e=function kf(i){return i instanceof ru&&i.getTypeName()||null}(i);if(null!=e&&e!==t){if("ResourceURL"===e&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${e} (see https://g.co/ng/security#xss)`)}return e===t}class sg{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(mc(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch{return null}}}class Xu{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const n=this.inertDocument.createElement("body");e.appendChild(n)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=mc(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=mc(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const o=e.item(r).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&t.removeAttribute(o)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const og=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,ag=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function lg(i){return(i=String(i)).match(og)||i.match(ag)?i:"unsafe:"+i}function Nc(i){const t={};for(const e of i.split(","))t[e]=!0;return t}function Of(...i){const t={};for(const e of i)for(const n in e)e.hasOwnProperty(n)&&(t[n]=!0);return t}const Gm=Nc("area,br,col,hr,img,wbr"),Hy=Nc("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Gy=Nc("rp,rt"),hl=Of(Gm,Of(Hy,Nc("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Of(Gy,Nc("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Of(Gy,Hy)),Wm=Nc("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ff=Nc("srcset"),Wy=Of(Wm,Ff,Nc("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Nc("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),jy=Nc("script,style,template");class q_{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let r=this.checkClobberedElement(e,e.nextSibling);if(r){e=r;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!hl.hasOwnProperty(e))return this.sanitizedSomething=!0,!jy.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let r=0;r<n.length;r++){const s=n.item(r),o=s.name,l=o.toLowerCase();if(!Wy.hasOwnProperty(l)){this.sanitizedSomething=!0;continue}let u=s.value;Wm[l]&&(u=lg(u)),Ff[l]&&(i=u,u=(i=String(i)).split(",").map(t=>lg(t.trim())).join(", ")),this.buf.push(" ",o,'="',$y(u),'"')}var i;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();hl.hasOwnProperty(e)&&!Gm.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push($y(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const X_=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Y_=/([^\#-~ |!])/g;function $y(i){return i.replace(/&/g,"&amp;").replace(X_,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(Y_,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let jm;function Bv(i,t){let e=null;try{jm=jm||function yd(i){const t=new Xu(i);return function qh(){try{return!!(new window.DOMParser).parseFromString(mc(""),"text/html")}catch{return!1}}()?new sg(t):t}(i);let n=t?String(t):"";e=jm.getInertBodyElement(n);let r=5,s=n;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,n=s,s=e.innerHTML,e=jm.getInertBodyElement(n)}while(n!==s);return mc((new q_).sanitizeChildren(Au(e)||e))}finally{if(e){const n=Au(e)||e;for(;n.firstChild;)n.removeChild(n.firstChild)}}}function Au(i){return"content"in i&&function K_(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var pa=(()=>((pa=pa||{})[pa.NONE=0]="NONE",pa[pa.HTML=1]="HTML",pa[pa.STYLE=2]="STYLE",pa[pa.SCRIPT=3]="SCRIPT",pa[pa.URL=4]="URL",pa[pa.RESOURCE_URL=5]="RESOURCE_URL",pa))();function Aa(i){const t=sm();return t?gd(t.sanitize(pa.HTML,i)||""):ca(i,"HTML")?gd(bl(i)):Bv(function Vm(){return void 0!==yh?yh:typeof document<"u"?document:void 0}(),Ps(i))}function Xh(i){const t=sm();return t?t.sanitize(pa.URL,i)||"":ca(i,"URL")?bl(i):lg(Ps(i))}function sm(){const i=bi();return i&&i[12]}const Uv=new ir("ENVIRONMENT_INITIALIZER"),Yy=new ir("INJECTOR",-1),Ky=new ir("INJECTOR_DEF_TYPES");class a{get(t,e=bu){if(e===bu){const n=new Error(`NullInjectorError: No provider for ${fs(t)}!`);throw n.name="NullInjectorError",n}return e}}function h(...i){return{\u0275providers:g(0,i)}}function g(i,...t){const e=[],n=new Set;let r;return yu(t,s=>{const o=s;x(o,e,[],n)&&(r||(r=[]),r.push(o))}),void 0!==r&&y(r,e),e}function y(i,t){for(let e=0;e<i.length;e++){const{providers:r}=i[e];yu(r,s=>{t.push(s)})}}function x(i,t,e,n){if(!(i=is(i)))return!1;let r=null,s=ha(i);const o=!s&&Ko(i);if(s||o){if(o&&!o.standalone)return!1;r=i}else{const u=i.ngModule;if(s=ha(u),!s)return!1;r=u}const l=n.has(r);if(o){if(l)return!1;if(n.add(r),o.dependencies){const u="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const p of u)x(p,t,e,n)}}else{if(!s)return!1;{if(null!=s.imports&&!l){let p;n.add(r);try{yu(s.imports,v=>{x(v,t,e,n)&&(p||(p=[]),p.push(v))})}finally{}void 0!==p&&y(p,t)}if(!l){const p=ip(r)||(()=>new r);t.push({provide:r,useFactory:p,deps:_o},{provide:Ky,useValue:r,multi:!0},{provide:Uv,useValue:()=>qn(r),multi:!0})}const u=s.providers;null==u||l||yu(u,v=>{t.push(v)})}}return r!==i&&void 0!==i.providers}const F=ds({provide:String,useValue:ds});function z(i){return null!==i&&"object"==typeof i&&F in i}function ve(i){return"function"==typeof i}const Ve=new ir("Set Injector scope."),Ue={},We={};let ft;function dt(){return void 0===ft&&(ft=new a),ft}class at{}class xt extends at{constructor(t,e,n,r){super(),this.parent=e,this.source=n,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,di(t,o=>this.processProvider(o)),this.records.set(Yy,un(void 0,this)),r.has("environment")&&this.records.set(at,un(void 0,this));const s=this.records.get(Ve);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Ky.multi,_o,rs.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();for(const t of this._onDestroyHooks)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(t){this._onDestroyHooks.push(t)}runInContext(t){this.assertNotDestroyed();const e=Wu(this),n=Nu(void 0);try{return t()}finally{Wu(e),Nu(n)}}get(t,e=bu,n=rs.Default){this.assertNotDestroyed();const r=Wu(this),s=Nu(void 0);try{if(!(n&rs.SkipSelf)){let l=this.records.get(t);if(void 0===l){const u=function On(i){return"function"==typeof i||"object"==typeof i&&i instanceof ir}(t)&&Tc(t);l=u&&this.injectableDefInScope(u)?un(St(t),Ue):null,this.records.set(t,l)}if(null!=l)return this.hydrate(t,l)}return(n&rs.Self?dt():this.parent).get(t,e=n&rs.Optional&&e===bu?null:e)}catch(o){if("NullInjectorError"===o.name){if((o[Df]=o[Df]||[]).unshift(fs(t)),r)throw o;return function Zg(i,t,e,n){const r=i[Df];throw t[Wh]&&r.unshift(t[Wh]),i.message=function pp(i,t,e,n=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let r=fs(t);if(Array.isArray(t))r=t.map(fs).join(" -> ");else if("object"==typeof t){let s=[];for(let o in t)if(t.hasOwnProperty(o)){let l=t[o];s.push(o+":"+("string"==typeof l?JSON.stringify(l):fs(l)))}r=`{${s.join(", ")}}`}return`${e}${n?"("+n+")":""}[${r}]: ${i.replace(gc,"\n  ")}`}("\n"+i.message,r,e,n),i.ngTokenPath=r,i[Df]=null,i}(o,t,"R3InjectorError",this.source)}throw o}finally{Nu(s),Wu(r)}}resolveInjectorInitializers(){const t=Wu(this),e=Nu(void 0);try{const n=this.get(Uv.multi,_o,rs.Self);for(const r of n)r()}finally{Wu(t),Nu(e)}}toString(){const t=[],e=this.records;for(const n of e.keys())t.push(fs(n));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new yi(205,!1)}processProvider(t){let e=ve(t=is(t))?t:is(t&&t.provide);const n=function qt(i){return z(i)?un(void 0,i.useValue):un(gn(i),Ue)}(t);if(ve(t)||!0!==t.multi)this.records.get(e);else{let r=this.records.get(e);r||(r=un(void 0,Ue,!0),r.factory=()=>Kd(r.multi),this.records.set(e,r)),e=t,r.multi.push(t)}this.records.set(e,n)}hydrate(t,e){return e.value===Ue&&(e.value=We,e.value=e.factory()),"object"==typeof e.value&&e.value&&function _n(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=is(t.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}}function St(i){const t=Tc(i),e=null!==t?t.factory:ip(i);if(null!==e)return e;if(i instanceof ir)throw new yi(204,!1);if(i instanceof Function)return function nn(i){const t=i.length;if(t>0)throw Sl(t,"?"),new yi(204,!1);const e=function B_(i){const t=i&&(i[qf]||i[wm]);if(t){const e=function Ta(i){if(i.hasOwnProperty("name"))return i.name;const t=(""+i).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${e}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${e}" class.`),t}return null}(i);return null!==e?()=>e.factory(i):()=>new i}(i);throw new yi(204,!1)}function gn(i,t,e){let n;if(ve(i)){const r=is(i);return ip(r)||St(r)}if(z(i))n=()=>is(i.useValue);else if(function re(i){return!(!i||!i.useFactory)}(i))n=()=>i.useFactory(...Kd(i.deps||[]));else if(function le(i){return!(!i||!i.useExisting)}(i))n=()=>qn(is(i.useExisting));else{const r=is(i&&(i.useClass||i.provide));if(!function an(i){return!!i.deps}(i))return ip(r)||St(r);n=()=>new r(...Kd(i.deps))}return n}function un(i,t,e=!1){return{factory:i,value:t,multi:e?[]:void 0}}function Ti(i){return!!i.\u0275providers}function di(i,t){for(const e of i)Array.isArray(e)?di(e,t):Ti(e)?di(e.\u0275providers,t):t(e)}class tn{}class Ai{resolveComponentFactory(t){throw function Xn(i){const t=Error(`No component factory found for ${fs(i)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=i,t}(t)}}let gi=(()=>{class i{}return i.NULL=new Ai,i})();function ar(){return Hi(bt(),bi())}function Hi(i,t){return new Yn(hh(i,t))}let Yn=(()=>{class i{constructor(e){this.nativeElement=e}}return i.__NG_ELEMENT_ID__=ar,i})();function jn(i){return i instanceof Yn?i.nativeElement:i}class c{}let d=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function m(){const i=bi(),e=Dc(bt().index,i);return(Jc(e)?e:i)[11]}(),i})(),_=(()=>{class i{}return i.\u0275prov=Zi({token:i,providedIn:"root",factory:()=>null}),i})();class C{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const A=new C("14.1.3"),E={};function Kt(i){return i.ngOriginalError}class ut{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t);this._console.error("ERROR",t),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&Kt(t);for(;e&&Kt(e);)e=Kt(e);return e||null}}const Dn=new Map;let Zn=0;const lr="__ngContext__";function Hr(i,t){Jc(t)?(i[lr]=t[20],function xi(i){Dn.set(i[20],i)}(t)):i[lr]=t}function Zr(i){const t=i[lr];return"number"==typeof t?function mi(i){return Dn.get(i)||null}(t):t||null}function mr(i){const t=Zr(i);return t?Jc(t)?t:t.lView:null}const Nt=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind(so))();function Kn(i){return i.ownerDocument.defaultView}function dn(i){return i instanceof Function?i():i}var Vi=(()=>((Vi=Vi||{})[Vi.Important=1]="Important",Vi[Vi.DashCase=2]="DashCase",Vi))();function tr(i,t){return undefined(i,t)}function $o(i){const t=i[3];return Ph(t)?t[3]:t}function Er(i){return Hl(i[13])}function Wa(i){return Hl(i[4])}function Hl(i){for(;null!==i&&!Ph(i);)i=i[4];return i}function Bc(i,t,e,n,r){if(null!=n){let s,o=!1;Ph(n)?s=n:Jc(n)&&(o=!0,n=n[0]);const l=ra(n);0===i&&null!==e?null==r?n0(t,e,l):ug(t,e,l,r||null,!0):1===i&&null!==e?ug(t,e,l,r||null,!0):2===i?function Fx(i,t,e){const n=Gv(i,t);n&&function nf(i,t,e,n){i.removeChild(t,e,n)}(i,n,t,e)}(t,l,o):3===i&&t.destroyNode(l),null!=s&&function hT(i,t,e,n,r){const s=e[7];s!==ra(e)&&Bc(t,i,n,s,r);for(let l=10;l<e.length;l++){const u=e[l];xu(u[1],u,i,t,n,s)}}(t,i,s,e,r)}}function ic(i,t,e){return i.createElement(t,e)}function J_(i,t){const e=i[9],n=e.indexOf(t),r=t[3];512&t[2]&&(t[2]&=-513,Ug(r,-1)),e.splice(n,1)}function e0(i,t){if(i.length<=10)return;const e=10+t,n=i[e];if(n){const r=n[17];null!==r&&r!==i&&J_(r,n),t>0&&(i[e-1][4]=n[4]);const s=Gu(i,10+t);!function Vc(i,t){xu(i,t,t[11],2,null,null),t[0]=null,t[6]=null}(n[1],n);const o=s[19];null!==o&&o.detachView(s[1]),n[3]=null,n[4]=null,n[2]&=-65}return n}function ta(i,t){if(!(128&t[2])){const e=t[11];e.destroyNode&&xu(i,t,e,3,null,null),function Zs(i){let t=i[13];if(!t)return t0(i[1],i);for(;t;){let e=null;if(Jc(t))e=t[13];else{const n=t[10];n&&(e=n)}if(!e){for(;t&&!t[4]&&t!==i;)Jc(t)&&t0(t[1],t),t=t[3];null===t&&(t=i),Jc(t)&&t0(t[1],t),e=t&&t[4]}t=e}}(t)}}function t0(i,t){if(!(128&t[2])){t[2]&=-65,t[2]|=128,function cg(i,t){let e;if(null!=i&&null!=(e=i.destroyHooks))for(let n=0;n<e.length;n+=2){const r=t[e[n]];if(!(r instanceof Xp)){const s=e[n+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const l=r[s[o]],u=s[o+1];try{u.call(l)}finally{}}else try{s.call(r)}finally{}}}}(i,t),function bb(i,t){const e=i.cleanup,n=t[7];let r=-1;if(null!==e)for(let s=0;s<e.length-1;s+=2)if("string"==typeof e[s]){const o=e[s+1],l="function"==typeof o?o(t):ra(t[o]),u=n[r=e[s+2]],p=e[s+3];"boolean"==typeof p?l.removeEventListener(e[s],u,p):p>=0?n[r=p]():n[r=-p].unsubscribe(),s+=2}else{const o=n[r=e[s+1]];e[s].call(o)}if(null!==n){for(let s=r+1;s<n.length;s++)(0,n[s])();t[7]=null}}(i,t),1===t[1].type&&t[11].destroy();const e=t[17];if(null!==e&&Ph(t[3])){e!==t[3]&&J_(e,t);const n=t[19];null!==n&&n.detachView(i)}!function fi(i){Dn.delete(i[20])}(t)}}function Zy(i,t,e){return function Hv(i,t,e){let n=t;for(;null!==n&&40&n.type;)n=(t=n).parent;if(null===n)return e[0];if(2&n.flags){const r=i.data[n.directiveStart].encapsulation;if(r===Ma.None||r===Ma.Emulated)return null}return hh(n,e)}(i,t.parent,e)}function ug(i,t,e,n,r){i.insertBefore(t,e,n,r)}function n0(i,t,e){i.appendChild(t,e)}function Cb(i,t,e,n,r){null!==n?ug(i,t,e,n,r):n0(i,t,e)}function Gv(i,t){return i.parentNode(t)}function bd(i,t,e){return kx(i,t,e)}let kx=function Ab(i,t,e){return 40&i.type?hh(i,e):null};function Ib(i,t,e,n){const r=Zy(i,n,t),s=t[11],l=bd(n.parent||t[6],n,t);if(null!=r)if(Array.isArray(e))for(let u=0;u<e.length;u++)Cb(s,r,e[u],l,!1);else Cb(s,r,e,l,!1)}function Qy(i,t){if(null!==t){const e=t.type;if(3&e)return hh(t,i);if(4&e)return hw(-1,i[t.index]);if(8&e){const n=t.child;if(null!==n)return Qy(i,n);{const r=i[t.index];return Ph(r)?hw(-1,r):ra(r)}}if(32&e)return tr(t,i)()||ra(i[t.index]);{const n=Ox(i,t);return null!==n?Array.isArray(n)?n[0]:Qy($o(i[16]),n):Qy(i,t.next)}}return null}function Ox(i,t){return null!==t?i[16][6].projection[t.projection]:null}function hw(i,t){const e=10+i+1;if(e<t.length){const n=t[e],r=n[1].firstChild;if(null!==r)return Qy(n,r)}return t[7]}function Hc(i,t,e,n,r,s,o){for(;null!=e;){const l=n[e.index],u=e.type;if(o&&0===t&&(l&&Hr(ra(l),n),e.flags|=4),64!=(64&e.flags))if(8&u)Hc(i,t,e.child,n,r,s,!1),Bc(t,i,r,l,s);else if(32&u){const p=tr(e,n);let v;for(;v=p();)Bc(t,i,r,v,s);Bc(t,i,r,l,s)}else 16&u?Nx(i,t,n,e,r,s):Bc(t,i,r,l,s);e=o?e.projectionNext:e.next}}function xu(i,t,e,n,r,s){Hc(e,n,i.firstChild,t,r,s,!1)}function Nx(i,t,e,n,r,s){const o=e[16],u=o[6].projection[n.projection];if(Array.isArray(u))for(let p=0;p<u.length;p++)Bc(t,i,r,u[p],s);else Hc(i,t,u,o[3],r,s,!0)}function zx(i,t,e){i.setAttribute(t,"style",e)}function dw(i,t,e){""===e?i.removeAttribute(t,"class"):i.setAttribute(t,"class",e)}function Vx(i,t,e){let n=i.length;for(;;){const r=i.indexOf(t,e);if(-1===r)return r;if(0===r||i.charCodeAt(r-1)<=32){const s=t.length;if(r+s===n||i.charCodeAt(r+s)<=32)return r}e=r+1}}const Ux="ng-template";function fT(i,t,e){let n=0;for(;n<i.length;){let r=i[n++];if(e&&"class"===r){if(r=i[n],-1!==Vx(r.toLowerCase(),t,0))return!0}else if(1===r){for(;n<i.length&&"string"==typeof(r=i[n++]);)if(r.toLowerCase()===t)return!0;return!1}}return!1}function Hx(i){return 4===i.type&&i.value!==Ux}function Gx(i,t,e){return t===(4!==i.type||e?i.value:Ux)}function Wx(i,t,e){let n=4;const r=i.attrs||[],s=function Jy(i){for(let t=0;t<i.length;t++)if(ll(i[t]))return t;return i.length}(r);let o=!1;for(let l=0;l<t.length;l++){const u=t[l];if("number"!=typeof u){if(!o)if(4&n){if(n=2|1&n,""!==u&&!Gx(i,u,e)||""===u&&1===t.length){if(Ap(n))return!1;o=!0}}else{const p=8&n?u:t[++l];if(8&n&&null!==i.attrs){if(!fT(i.attrs,p,e)){if(Ap(n))return!1;o=!0}continue}const w=pT(8&n?"class":u,r,Hx(i),e);if(-1===w){if(Ap(n))return!1;o=!0;continue}if(""!==p){let I;I=w>s?"":r[w+1].toLowerCase();const T=8&n?I:null;if(T&&-1!==Vx(T,p,0)||2&n&&p!==I){if(Ap(n))return!1;o=!0}}}}else{if(!o&&!Ap(n)&&!Ap(u))return!1;if(o&&Ap(u))continue;o=!1,n=u|1&n}}return Ap(n)||o}function Ap(i){return 0==(1&i)}function pT(i,t,e,n){if(null===t)return-1;let r=0;if(n||!e){let s=!1;for(;r<t.length;){const o=t[r];if(o===i)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let l=t[++r];for(;"string"==typeof l;)l=t[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function mT(i,t){let e=i.indexOf(4);if(e>-1)for(e++;e<i.length;){const n=i[e];if("number"==typeof n)return-1;if(n===t)return e;e++}return-1}(t,i)}function jx(i,t,e=!1){for(let n=0;n<t.length;n++)if(Wx(i,t[n],e))return!0;return!1}function vT(i,t){e:for(let e=0;e<t.length;e++){const n=t[e];if(i.length===n.length){for(let r=0;r<i.length;r++)if(i[r]!==n[r])continue e;return!0}}return!1}function $x(i,t){return i?":not("+t.trim()+")":t}function yT(i){let t=i[0],e=1,n=2,r="",s=!1;for(;e<i.length;){let o=i[e];if("string"==typeof o)if(2&n){const l=i[++e];r+="["+o+(l.length>0?'="'+l+'"':"")+"]"}else 8&n?r+="."+o:4&n&&(r+=" "+o);else""!==r&&!Ap(o)&&(t+=$x(s,r),r=""),n=o,s=s||!Ap(n);e++}return""!==r&&(t+=$x(s,r)),t}const qs={};function Ie(i){Xx(Ts(),bi(),hc()+i,!1)}function Xx(i,t,e,n){if(!n)if(3==(3&t[2])){const s=i.preOrderCheckHooks;null!==s&&Ud(t,s,e)}else{const s=i.preOrderHooks;null!==s&&$g(t,s,0,e)}wf(e)}function Qx(i,t=null,e=null,n){const r=Jx(i,t,e,n);return r.resolveInjectorInitializers(),r}function Jx(i,t=null,e=null,n,r=new Set){const s=[e||_o,h(i)];return n=n||("object"==typeof i?void 0:fs(i)),new xt(s,t||dt(),n||null,r)}let Iu=(()=>{class i{static create(e,n){if(Array.isArray(e))return Qx({name:""},n,e,"");{const r=e.name??"";return Qx({name:r},e.parent,e.providers,r)}}}return i.THROW_IF_NOT_FOUND=bu,i.NULL=new a,i.\u0275prov=Zi({token:i,providedIn:"any",factory:()=>qn(Yy)}),i.__NG_ELEMENT_ID__=-1,i})();function Xt(i,t=rs.Default){const e=bi();return null===e?qn(i,t):jd(bt(),e,is(i),t)}function bw(){throw new Error("invalid")}function r0(i,t){return i<<17|t<<2}function xp(i){return i>>17&32767}function s0(i){return 2|i}function Ip(i){return(131068&i)>>2}function Cw(i,t){return-131069&i|t<<2}function ww(i){return 1|i}function sk(i,t){const e=i.contentQueries;if(null!==e)for(let n=0;n<e.length;n+=2){const r=e[n],s=e[n+1];if(-1!==s){const o=i.data[s];Hg(r),o.contentQueries(2,t[s],s)}}}function fI(i,t,e,n,r,s,o,l,u,p,v){const w=t.blueprint.slice();return w[0]=r,w[2]=76|n,(null!==v||i&&1024&i[2])&&(w[2]|=1024),Xr(w),w[3]=w[15]=i,w[8]=e,w[10]=o||i&&i[10],w[11]=l||i&&i[11],w[12]=u||i&&i[12]||null,w[9]=p||i&&i[9]||null,w[6]=s,w[20]=function hi(){return Zn++}(),w[21]=v,w[16]=2==t.type?i[16]:w,w}function Db(i,t,e,n,r){let s=i.data[t];if(null===s)s=function VT(i,t,e,n,r){const s=No(),o=Rs(),u=i.data[t]=function K6(i,t,e,n,r,s){return{type:e,index:n,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,e,t,n,r);return null===i.firstChild&&(i.firstChild=u),null!==s&&(o?null==s.child&&null!==u.parent&&(s.child=u):null===s.next&&(s.next=u)),u}(i,t,e,n,r),function Bd(){return ns.lFrame.inI18n}()&&(s.flags|=64);else if(64&s.type){s.type=e,s.value=n,s.attrs=r;const o=function Mo(){const i=ns.lFrame,t=i.currentTNode;return i.isParent?t:t.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return sa(s,!0),s}function Lb(i,t,e,n){if(0===e)return-1;const r=t.length;for(let s=0;s<e;s++)t.push(n),i.blueprint.push(n),i.data.push(null);return r}function pI(i,t,e){Gg(t);try{const n=i.viewQuery;null!==n&&YT(1,n,e);const r=i.template;null!==r&&ok(i,t,r,1,e),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&sk(i,t),i.staticViewQueries&&YT(2,i.viewQuery,e);const s=i.components;null!==s&&function $6(i,t){for(let e=0;e<t.length;e++)dW(i,t[e])}(t,s)}catch(n){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),n}finally{t[2]&=-5,Ua()}}function Sw(i,t,e,n){const r=t[2];if(128!=(128&r)){Gg(t);try{Xr(t),function gr(i){return ns.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==e&&ok(i,t,e,2,n);const o=3==(3&r);if(o){const p=i.preOrderCheckHooks;null!==p&&Ud(t,p,null)}else{const p=i.preOrderHooks;null!==p&&$g(t,p,0,null),Fh(t,0)}if(function uW(i){for(let t=Er(i);null!==t;t=Wa(t)){if(!t[2])continue;const e=t[9];for(let n=0;n<e.length;n++){const r=e[n],s=r[3];0==(512&r[2])&&Ug(s,1),r[2]|=512}}}(t),function cW(i){for(let t=Er(i);null!==t;t=Wa(t))for(let e=10;e<t.length;e++){const n=t[e],r=n[1];Fo(n)&&Sw(r,n,r.template,n[8])}}(t),null!==i.contentQueries&&sk(i,t),o){const p=i.contentCheckHooks;null!==p&&Ud(t,p)}else{const p=i.contentHooks;null!==p&&$g(t,p,1),Fh(t,1)}!function dI(i,t){const e=i.hostBindingOpCodes;if(null!==e)try{for(let n=0;n<e.length;n++){const r=e[n];if(r<0)wf(~r);else{const s=r,o=e[++n],l=e[++n];zd(o,s),l(2,t[s])}}}finally{wf(-1)}}(i,t);const l=i.components;null!==l&&function j6(i,t){for(let e=0;e<t.length;e++)hW(i,t[e])}(t,l);const u=i.viewQuery;if(null!==u&&YT(2,u,n),o){const p=i.viewCheckHooks;null!==p&&Ud(t,p)}else{const p=i.viewHooks;null!==p&&$g(t,p,2),Fh(t,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),t[2]&=-41,512&t[2]&&(t[2]&=-513,Ug(t[3],-1))}finally{Ua()}}}function q6(i,t,e,n){const r=t[10],o=bo(t);try{!o&&r.begin&&r.begin(),o&&pI(i,t,n),Sw(i,t,e,n)}finally{!o&&r.end&&r.end()}}function ok(i,t,e,n,r){const s=hc(),o=2&n;try{wf(-1),o&&t.length>22&&Xx(i,t,22,!1),e(n,r)}finally{wf(s)}}function ak(i,t,e){if(wv(t)){const r=t.directiveEnd;for(let s=t.directiveStart;s<r;s++){const o=i.data[s];o.contentQueries&&o.contentQueries(1,e[s],s)}}}function UT(i,t,e){!zy()||(function tW(i,t,e,n){const r=e.directiveStart,s=e.directiveEnd;i.firstCreatePass||js(e,t),Hr(n,t);const o=e.initialInputs;for(let l=r;l<s;l++){const u=i.data[l],p=Rh(u);p&&oW(t,e,u);const v=tu(t,i,l,e);Hr(v,t),null!==o&&aW(0,l-r,v,u,0,o),p&&(Dc(e.index,t)[8]=v)}}(i,t,e,hh(e,t)),128==(128&e.flags)&&function nW(i,t,e){const n=e.directiveStart,r=e.directiveEnd,s=e.index,o=function Cf(){return ns.lFrame.currentDirectiveIndex}();try{wf(s);for(let l=n;l<r;l++){const u=i.data[l],p=t[l];Bu(l),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&pk(u,p)}}finally{wf(-1),Bu(o)}}(i,t,e))}function HT(i,t,e=hh){const n=t.localNames;if(null!==n){let r=t.index+1;for(let s=0;s<n.length;s+=2){const o=n[s+1],l=-1===o?e(t,i):i[o];i[r++]=l}}}function lk(i){const t=i.tView;return null===t||t.incompleteFirstPass?i.tView=GT(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):t}function GT(i,t,e,n,r,s,o,l,u,p){const v=22+n,w=v+r,I=function X6(i,t){const e=[];for(let n=0;n<t;n++)e.push(n<i?null:qs);return e}(v,w),T="function"==typeof p?p():p;return I[1]={type:i,blueprint:I,template:e,queries:null,viewQuery:l,declTNode:t,data:I.slice().fill(null,v),bindingStartIndex:v,expandoStartIndex:w,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:T,incompleteFirstPass:!1}}function ck(i,t,e,n){const r=Ck(t);null===e?r.push(n):(r.push(e),i.firstCreatePass&&wk(i).push(n,r.length-1))}function uk(i,t,e){for(let n in i)if(i.hasOwnProperty(n)){const r=i[n];(e=null===e?{}:e).hasOwnProperty(n)?e[n].push(t,r):e[n]=[t,r]}return e}function hk(i,t){const n=t.directiveEnd,r=i.data,s=t.attrs,o=[];let l=null,u=null;for(let p=t.directiveStart;p<n;p++){const v=r[p],w=v.inputs,I=null===s||Hx(t)?null:lW(w,s);o.push(I),l=uk(w,p,l),u=uk(v.outputs,p,u)}null!==l&&(l.hasOwnProperty("class")&&(t.flags|=16),l.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=o,t.inputs=l,t.outputs=u}function Tp(i,t,e,n,r,s,o,l){const u=hh(t,e);let v,p=t.inputs;!l&&null!=p&&(v=p[n])?(KT(i,e,v,n,r),kg(t)&&dk(e,t.index)):3&t.type&&(n=function Z6(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(n),r=null!=o?o(r,t.value||"",n):r,s.setProperty(u,n,r))}function dk(i,t){const e=Dc(t,i);16&e[2]||(e[2]|=32)}function WT(i,t,e,n){let r=!1;if(zy()){const s=function iW(i,t,e){const n=i.directiveRegistry;let r=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];jx(e,o.selectors,!1)&&(r||(r=[]),up(js(e,t),i,o.type),Rh(o)?(gk(i,e),r.unshift(o)):r.push(o))}return r}(i,t,e),o=null===n?null:{"":-1};if(null!==s){r=!0,mk(e,i.data.length,s.length);for(let v=0;v<s.length;v++){const w=s[v];w.providersResolver&&w.providersResolver(w)}let l=!1,u=!1,p=Lb(i,t,s.length,null);for(let v=0;v<s.length;v++){const w=s[v];e.mergedAttrs=Nh(e.mergedAttrs,w.hostAttrs),vk(i,e,t,p,w),sW(p,w,o),null!==w.contentQueries&&(e.flags|=8),(null!==w.hostBindings||null!==w.hostAttrs||0!==w.hostVars)&&(e.flags|=128);const I=w.type.prototype;!l&&(I.ngOnChanges||I.ngOnInit||I.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(e.index),l=!0),!u&&(I.ngOnChanges||I.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(e.index),u=!0),p++}hk(i,e)}o&&function rW(i,t,e){if(t){const n=i.localNames=[];for(let r=0;r<t.length;r+=2){const s=e[t[r+1]];if(null==s)throw new yi(-301,!1);n.push(t[r],s)}}}(e,n,o)}return e.mergedAttrs=Nh(e.mergedAttrs,e.attrs),r}function fk(i,t,e,n,r,s){const o=s.hostBindings;if(o){let l=i.hostBindingOpCodes;null===l&&(l=i.hostBindingOpCodes=[]);const u=~t.index;(function eW(i){let t=i.length;for(;t>0;){const e=i[--t];if("number"==typeof e&&e<0)return e}return 0})(l)!=u&&l.push(u),l.push(n,r,o)}}function pk(i,t){null!==i.hostBindings&&i.hostBindings(1,t)}function gk(i,t){t.flags|=2,(i.components||(i.components=[])).push(t.index)}function sW(i,t,e){if(e){if(t.exportAs)for(let n=0;n<t.exportAs.length;n++)e[t.exportAs[n]]=i;Rh(t)&&(e[""]=i)}}function mk(i,t,e){i.flags|=1,i.directiveStart=t,i.directiveEnd=t+e,i.providerIndexes=t}function vk(i,t,e,n,r){i.data[n]=r;const s=r.factory||(r.factory=ip(r.type)),o=new Xp(s,Rh(r),Xt);i.blueprint[n]=o,e[n]=o,fk(i,t,0,n,Lb(i,e,r.hostVars,qs),r)}function oW(i,t,e){const n=hh(t,i),r=lk(e),s=i[10],o=gI(i,fI(i,r,null,e.onPush?32:16,n,t,s,s.createRenderer(n,e),null,null,null));i[t.index]=o}function Xm(i,t,e,n,r,s){const o=hh(i,t);!function jT(i,t,e,n,r,s,o){if(null==s)i.removeAttribute(t,r,e);else{const l=null==o?Ps(s):o(s,n||"",r);i.setAttribute(t,r,l,e)}}(t[11],o,s,i.value,e,n,r)}function aW(i,t,e,n,r,s){const o=s[t];if(null!==o){const l=n.setInput;for(let u=0;u<o.length;){const p=o[u++],v=o[u++],w=o[u++];null!==l?n.setInput(e,w,p,v):e[v]=w}}}function lW(i,t){let e=null,n=0;for(;n<t.length;){const r=t[n];if(0!==r)if(5!==r){if("number"==typeof r)break;i.hasOwnProperty(r)&&(null===e&&(e=[]),e.push(r,i[r],t[n+1])),n+=2}else n+=2;else n+=4}return e}function yk(i,t,e,n){return new Array(i,!0,!1,t,null,0,n,e,null,null)}function hW(i,t){const e=Dc(t,i);if(Fo(e)){const n=e[1];48&e[2]?Sw(n,e,n.template,e[8]):e[5]>0&&$T(e)}}function $T(i){for(let n=Er(i);null!==n;n=Wa(n))for(let r=10;r<n.length;r++){const s=n[r];if(Fo(s))if(512&s[2]){const o=s[1];Sw(o,s,o.template,s[8])}else s[5]>0&&$T(s)}const e=i[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Dc(e[n],i);Fo(r)&&r[5]>0&&$T(r)}}function dW(i,t){const e=Dc(t,i),n=e[1];(function fW(i,t){for(let e=t.length;e<i.blueprint.length;e++)t.push(i.blueprint[e])})(n,e),pI(n,e,e[8])}function gI(i,t){return i[13]?i[14][4]=t:i[13]=t,i[14]=t,t}function qT(i){for(;i;){i[2]|=32;const t=$o(i);if(Sm(i)&&!t)return i;i=t}return null}function bk(i){!function _k(i){for(let t=0;t<i.components.length;t++){const e=i.components[t],n=mr(e);if(null!==n){const r=n[1];q6(r,n,r.template,e)}}}(i[8])}function YT(i,t,e){Hg(0),t(i,e)}const gW=(()=>Promise.resolve(null))();function Ck(i){return i[7]||(i[7]=[])}function wk(i){return i.cleanup||(i.cleanup=[])}function xk(i,t){const e=i[9],n=e?e.get(ut,null):null;n&&n.handleError(t)}function KT(i,t,e,n,r){for(let s=0;s<e.length;){const o=e[s++],l=e[s++],u=t[o],p=i.data[o];null!==p.setInput?p.setInput(u,r,n,l):u[l]=r}}function jv(i,t,e){const n=Vg(t,i);!function Nf(i,t,e){i.setValue(t,e)}(i[11],n,e)}function mI(i,t,e){let n=e?i.styles:null,r=e?i.classes:null,s=0;if(null!==t)for(let o=0;o<t.length;o++){const l=t[o];"number"==typeof l?s=l:1==s?r=Ya(r,l):2==s&&(n=Ya(n,l+": "+t[++o]+";"))}e?i.styles=n:i.stylesWithoutHost=n,e?i.classes=r:i.classesWithoutHost=r}function vI(i,t,e,n,r=!1){for(;null!==e;){const s=t[e.index];if(null!==s&&n.push(ra(s)),Ph(s))for(let l=10;l<s.length;l++){const u=s[l],p=u[1].firstChild;null!==p&&vI(u[1],u,p,n)}const o=e.type;if(8&o)vI(i,t,e.child,n);else if(32&o){const l=tr(e,t);let u;for(;u=l();)n.push(u)}else if(16&o){const l=Ox(t,e);if(Array.isArray(l))n.push(...l);else{const u=$o(t[16]);vI(u[1],u,l,n,!0)}}e=r?e.projectionNext:e.next}return n}class Ew{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return vI(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(Ph(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(e0(t,n),Gu(e,n))}this._attachedToViewContainer=!1}ta(this._lView[1],this._lView)}onDestroy(t){ck(this._lView[1],this._lView,null,t)}markForCheck(){qT(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function XT(i,t,e){const n=t[10];n.begin&&n.begin();try{Sw(i,t,i.template,e)}catch(r){throw xk(t,r),r}finally{n.end&&n.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new yi(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Uc(i,t){xu(i,t,t[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new yi(902,!1);this._appRef=t}}class mW extends Ew{constructor(t){super(t),this._view=t}detectChanges(){bk(this._view)}checkNoChanges(){}get context(){return null}}class ZT extends gi{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=Ko(t);return new Tw(e,this.ngModule)}}function Ik(i){const t=[];for(let e in i)i.hasOwnProperty(e)&&t.push({propName:i[e],templateName:e});return t}class yW{constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,n){const r=this.injector.get(t,E,n);return r!==E||e===E?r:this.parentInjector.get(t,e,n)}}class Tw extends tn{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=function _T(i){return i.map(yT).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Ik(this.componentDef.inputs)}get outputs(){return Ik(this.componentDef.outputs)}create(t,e,n,r){let s=(r=r||this.ngModule)instanceof at?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new yW(t,s):t,l=o.get(c,null);if(null===l)throw new yi(407,!1);const u=o.get(_,null),p=l.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",w=n?function Y6(i,t,e){return i.selectRootElement(t,e===Ma.ShadowDom)}(p,n,this.componentDef.encapsulation):ic(l.createRenderer(null,this.componentDef),v,function vW(i){const t=i.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(v)),I=this.componentDef.onPush?288:272,T=function AW(i,t){return{components:[],scheduler:i||Nt,clean:gW,playerHandler:t||null,flags:0}}(),k=GT(0,null,null,1,0,null,null,null,null,null),G=fI(null,k,T,I,null,null,l,p,u,o,null);let Y,ce;Gg(G);try{const Se=function CW(i,t,e,n,r,s){const o=e[1];e[22]=i;const u=Db(o,22,2,"#host",null),p=u.mergedAttrs=t.hostAttrs;null!==p&&(mI(u,p,!0),null!==i&&(Yp(r,i,p),null!==u.classes&&dw(r,i,u.classes),null!==u.styles&&zx(r,i,u.styles)));const v=n.createRenderer(i,t),w=fI(e,lk(t),null,t.onPush?32:16,e[22],u,n,v,s||null,null,null);return o.firstCreatePass&&(up(js(u,e),o,t.type),gk(o,u),mk(u,e.length,1)),gI(e,w),e[22]=w}(w,this.componentDef,G,l,p);if(w)if(n)Yp(p,w,["ng-version",A.full]);else{const{attrs:Ae,classes:Te}=function qx(i){const t=[],e=[];let n=1,r=2;for(;n<i.length;){let s=i[n];if("string"==typeof s)2===r?""!==s&&t.push(s,i[++n]):8===r&&e.push(s);else{if(!Ap(r))break;r=s}n++}return{attrs:t,classes:e}}(this.componentDef.selectors[0]);Ae&&Yp(p,w,Ae),Te&&Te.length>0&&dw(p,w,Te.join(" "))}if(ce=ys(k,22),void 0!==e){const Ae=ce.projection=[];for(let Te=0;Te<this.ngContentSelectors.length;Te++){const Qe=e[Te];Ae.push(null!=Qe?Array.from(Qe):null)}}Y=function wW(i,t,e,n,r){const s=e[1],o=function J6(i,t,e){const n=bt();i.firstCreatePass&&(e.providersResolver&&e.providersResolver(e),vk(i,n,t,Lb(i,t,1,null),e),hk(i,n));const r=tu(t,i,n.directiveStart,n);Hr(r,t);const s=hh(n,t);return s&&Hr(s,t),r}(s,e,t);if(n.components.push(o),i[8]=o,null!==r)for(const u of r)u(o,t);if(t.contentQueries){const u=bt();t.contentQueries(1,o,u.directiveStart)}const l=bt();return!s.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(wf(l.index),fk(e[1],l,0,l.directiveStart,l.directiveEnd,t),pk(t,o)),o}(Se,this.componentDef,G,T,[xW]),pI(k,G,null)}finally{Ua()}return new bW(this.componentType,Y,Hi(ce,G),G,ce)}}class bW extends class Jt{}{constructor(t,e,n,r,s){super(),this.location=n,this._rootLView=r,this._tNode=s,this.instance=e,this.hostView=this.changeDetectorRef=new mW(r),this.componentType=t}setInput(t,e){const n=this._tNode.inputs;let r;if(null!==n&&(r=n[t])){const s=this._rootLView;KT(s[1],s,r,t,e),dk(s,this._tNode.index)}}get injector(){return new ph(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function xW(){const i=bt();xf(bi()[1],i)}function Ja(i){let t=function Sk(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),e=!0;const n=[i];for(;t;){let r;if(Rh(i))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new yi(903,!1);r=t.\u0275dir}if(r){if(e){n.push(r);const o=i;o.inputs=QT(i.inputs),o.declaredInputs=QT(i.declaredInputs),o.outputs=QT(i.outputs);const l=r.hostBindings;l&&TW(i,l);const u=r.viewQuery,p=r.contentQueries;if(u&&SW(i,u),p&&EW(i,p),Ea(i.inputs,r.inputs),Ea(i.declaredInputs,r.declaredInputs),Ea(i.outputs,r.outputs),Rh(r)&&r.data.animation){const v=i.data;v.animation=(v.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const l=s[o];l&&l.ngInherit&&l(i),l===Ja&&(e=!1)}}t=Object.getPrototypeOf(t)}!function IW(i){let t=0,e=null;for(let n=i.length-1;n>=0;n--){const r=i[n];r.hostVars=t+=r.hostVars,r.hostAttrs=Nh(r.hostAttrs,e=Nh(e,r.hostAttrs))}}(n)}function QT(i){return i===Fd?{}:i===_o?[]:i}function SW(i,t){const e=i.viewQuery;i.viewQuery=e?(n,r)=>{t(n,r),e(n,r)}:t}function EW(i,t){const e=i.contentQueries;i.contentQueries=e?(n,r,s)=>{t(n,r,s),e(n,r,s)}:t}function TW(i,t){const e=i.hostBindings;i.hostBindings=e?(n,r)=>{t(n,r),e(n,r)}:t}let yI=null;function o0(){if(!yI){const i=so.Symbol;if(i&&i.iterator)yI=i.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(yI=n)}}}return yI}function Mw(i){return!!JT(i)&&(Array.isArray(i)||!(i instanceof Map)&&o0()in i)}function JT(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Ym(i,t,e){return i[t]=e}function Dw(i,t){return i[t]}function wd(i,t,e){return!Object.is(i[t],e)&&(i[t]=e,!0)}function a0(i,t,e,n){const r=wd(i,t,e);return wd(i,t+1,n)||r}function _I(i,t,e,n,r){const s=a0(i,t,e,n);return wd(i,t+2,r)||s}function hg(i,t,e,n,r,s){const o=a0(i,t,e,n);return a0(i,t+2,r,s)||o}function vr(i,t,e,n){const r=bi();return wd(r,Oh(),t)&&(Ts(),Xm(Ha(),r,i,t,e,n)),vr}function Rb(i,t,e,n){return wd(i,Oh(),e)?t+Ps(e)+n:qs}function kb(i,t,e,n,r,s){const l=a0(i,function Va(){return ns.lFrame.bindingIndex}(),e,r);return vl(2),l?t+Ps(e)+n+Ps(r)+s:qs}function $e(i,t,e,n,r,s,o,l){const u=bi(),p=Ts(),v=i+22,w=p.firstCreatePass?function NW(i,t,e,n,r,s,o,l,u){const p=t.consts,v=Db(t,i,4,o||null,$s(p,l));WT(t,e,v,$s(p,u)),xf(t,v);const w=v.tViews=GT(2,v,n,r,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,p);return null!==t.queries&&(t.queries.template(t,v),w.queries=t.queries.embeddedTView(v)),v}(v,p,u,t,e,n,r,s,o):p.data[v];sa(w,!1);const I=u[11].createComment("");Ib(p,u,I,w),Hr(I,u),gI(u,u[v]=yk(I,u,I,w)),Og(w)&&UT(p,u,w),null!=o&&HT(u,w,l)}function oo(i){return ml(function Cr(){return ns.lFrame.contextLView}(),22+i)}function de(i,t,e){const n=bi();return wd(n,Oh(),t)&&Tp(Ts(),Ha(),n,i,t,n[11],e,!1),de}function eM(i,t,e,n,r){const o=r?"class":"style";KT(i,e,t.inputs[o],o,n)}function Ke(i,t,e,n){const r=bi(),s=Ts(),o=22+i,l=r[11],u=r[o]=ic(l,t,function Af(){return ns.lFrame.currentNamespace}()),p=s.firstCreatePass?function zW(i,t,e,n,r,s,o){const l=t.consts,p=Db(t,i,2,r,$s(l,s));return WT(t,e,p,$s(l,o)),null!==p.attrs&&mI(p,p.attrs,!1),null!==p.mergedAttrs&&mI(p,p.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,p),p}(o,s,r,0,t,e,n):s.data[o];sa(p,!0);const v=p.mergedAttrs;null!==v&&Yp(l,u,v);const w=p.classes;null!==w&&dw(l,u,w);const I=p.styles;return null!==I&&zx(l,u,I),64!=(64&p.flags)&&Ib(s,r,u,p),0===function od(){return ns.lFrame.elementDepthCount}()&&Hr(u,r),function $p(){ns.lFrame.elementDepthCount++}(),Og(p)&&(UT(s,r,p),ak(s,p,r)),null!==n&&HT(r,p),Ke}function Je(){let i=bt();Rs()?qp():(i=i.parent,sa(i,!1));const t=i;!function W_(){ns.lFrame.elementDepthCount--}();const e=Ts();return e.firstCreatePass&&(xf(e,i),wv(i)&&e.queries.elementEnd(i)),null!=t.classesWithoutHost&&function Rv(i){return 0!=(16&i.flags)}(t)&&eM(e,t,bi(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function j_(i){return 0!=(32&i.flags)}(t)&&eM(e,t,bi(),t.stylesWithoutHost,!1),Je}function Bn(i,t,e,n){return Ke(i,t,e,n),Je(),Bn}function zr(i,t,e){const n=bi(),r=Ts(),s=i+22,o=r.firstCreatePass?function VW(i,t,e,n,r){const s=t.consts,o=$s(s,n),l=Db(t,i,8,"ng-container",o);return null!==o&&mI(l,o,!0),WT(t,e,l,$s(s,r)),null!==t.queries&&t.queries.elementStart(t,l),l}(s,r,n,t,e):r.data[s];sa(o,!0);const l=n[s]=n[11].createComment("");return Ib(r,n,l,o),Hr(l,n),Og(o)&&(UT(r,n,o),ak(r,o,n)),null!=e&&HT(n,o),zr}function Vr(){let i=bt();const t=Ts();return Rs()?qp():(i=i.parent,sa(i,!1)),t.firstCreatePass&&(xf(t,i),wv(i)&&t.queries.elementEnd(i)),Vr}function Ni(i,t,e){return zr(i,t,e),Vr(),Ni}function vi(){return bi()}function Lw(i){return!!i&&"function"==typeof i.then}const tM=function Fk(i){return!!i&&"function"==typeof i.subscribe};function mn(i,t,e,n){const r=bi(),s=Ts(),o=bt();return function Bk(i,t,e,n,r,s,o,l){const u=Og(n),v=i.firstCreatePass&&wk(i),w=t[8],I=Ck(t);let T=!0;if(3&n.type||l){const Y=hh(n,t),ce=l?l(Y):Y,Se=I.length,Ae=l?Qe=>l(ra(Qe[n.index])):n.index;let Te=null;if(!l&&u&&(Te=function UW(i,t,e,n){const r=i.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===e&&r[s+1]===n){const l=t[7],u=r[s+2];return l.length>u?l[u]:null}"string"==typeof o&&(s+=2)}return null}(i,t,r,n.index)),null!==Te)(Te.__ngLastListenerFn__||Te).__ngNextListenerFn__=s,Te.__ngLastListenerFn__=s,T=!1;else{s=Vk(n,t,w,s,!1);const Qe=e.listen(ce,r,s);I.push(s,Qe),v&&v.push(r,Ae,Se,Se+1)}}else s=Vk(n,t,w,s,!1);const k=n.outputs;let G;if(T&&null!==k&&(G=k[r])){const Y=G.length;if(Y)for(let ce=0;ce<Y;ce+=2){const mt=t[G[ce]][G[ce+1]].subscribe(s),zt=I.length;I.push(s,mt),v&&v.push(r,n.index,zt,-(zt+1))}}}(s,r,r[11],o,i,t,0,n),mn}function zk(i,t,e,n){try{return!1!==e(n)}catch(r){return xk(i,r),!1}}function Vk(i,t,e,n,r){return function s(o){if(o===Function)return n;qT(2&i.flags?Dc(i.index,t):t);let u=zk(t,0,n,o),p=s.__ngNextListenerFn__;for(;p;)u=zk(t,0,p,o)&&u,p=p.__ngNextListenerFn__;return r&&!1===u&&(o.preventDefault(),o.returnValue=!1),u}}function be(i=1){return function xl(i){return(ns.lFrame.contextLView=function Vd(i,t){for(;i>0;)t=t[15],i--;return t}(i,ns.lFrame.contextLView))[8]}(i)}function HW(i,t){let e=null;const n=function gT(i){const t=i.attrs;if(null!=t){const e=t.indexOf(5);if(0==(1&e))return t[e+1]}return null}(i);for(let r=0;r<t.length;r++){const s=t[r];if("*"!==s){if(null===n?jx(i,s,!0):vT(n,s))return r}else e=r}return e}function Bf(i){const t=bi()[16][6];if(!t.projection){const n=t.projection=Sl(i?i.length:1,null),r=n.slice();let s=t.child;for(;null!==s;){const o=i?HW(s,i):0;null!==o&&(r[o]?r[o].projectionNext=s:n[o]=s,r[o]=s),s=s.next}}}function su(i,t=0,e){const n=bi(),r=Ts(),s=Db(r,22+i,16,null,e||null);null===s.projection&&(s.projection=t),qp(),64!=(64&s.flags)&&function uT(i,t,e){Nx(t[11],0,t,e,Zy(i,e,t),bd(e.parent||t[6],e,t))}(r,n,s)}function l0(i,t,e){return bI(i,"",t,"",e),l0}function bI(i,t,e,n,r){const s=bi(),o=Rb(s,t,e,n);return o!==qs&&Tp(Ts(),Ha(),s,i,o,s[11],r,!1),bI}function Yk(i,t,e,n,r){const s=i[e+1],o=null===t;let l=n?xp(s):Ip(s),u=!1;for(;0!==l&&(!1===u||o);){const v=i[l+1];jW(i[l],t)&&(u=!0,i[l+1]=n?ww(v):s0(v)),l=n?xp(v):Ip(v)}u&&(i[e+1]=n?s0(s):ww(s))}function jW(i,t){return null===i||null==t||(Array.isArray(i)?i[1]:i)===t||!(!Array.isArray(i)||"string"!=typeof t)&&Do(i,t)>=0}const Yu={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Kk(i){return i.substring(Yu.key,Yu.keyEnd)}function $W(i){return i.substring(Yu.value,Yu.valueEnd)}function Zk(i,t){const e=Yu.textEnd;return e===t?-1:(t=Yu.keyEnd=function YW(i,t,e){for(;t<e&&i.charCodeAt(t)>32;)t++;return t}(i,Yu.key=t,e),Ub(i,t,e))}function Qk(i,t){const e=Yu.textEnd;let n=Yu.key=Ub(i,t,e);return e===n?-1:(n=Yu.keyEnd=function KW(i,t,e){let n;for(;t<e&&(45===(n=i.charCodeAt(t))||95===n||(-33&n)>=65&&(-33&n)<=90||n>=48&&n<=57);)t++;return t}(i,n,e),n=eO(i,n,e),n=Yu.value=Ub(i,n,e),n=Yu.valueEnd=function ZW(i,t,e){let n=-1,r=-1,s=-1,o=t,l=o;for(;o<e;){const u=i.charCodeAt(o++);if(59===u)return l;34===u||39===u?l=o=tO(i,u,o,e):t===o-4&&85===s&&82===r&&76===n&&40===u?l=o=tO(i,41,o,e):u>32&&(l=o),s=r,r=n,n=-33&u}return l}(i,n,e),eO(i,n,e))}function Jk(i){Yu.key=0,Yu.keyEnd=0,Yu.value=0,Yu.valueEnd=0,Yu.textEnd=i.length}function Ub(i,t,e){for(;t<e&&i.charCodeAt(t)<=32;)t++;return t}function eO(i,t,e,n){return(t=Ub(i,t,e))<e&&t++,t}function tO(i,t,e,n){let r=-1,s=e;for(;s<n;){const o=i.charCodeAt(s++);if(o==t&&92!==r)return s;r=92==o&&92===r?0:o}throw new Error}function Ad(i,t,e){return om(i,t,e,!1),Ad}function Mp(i,t){return om(i,t,null,!0),Mp}function to(i){am(rO,QW,i,!1)}function QW(i,t){for(let e=function XW(i){return Jk(i),Qk(i,Ub(i,0,Yu.textEnd))}(t);e>=0;e=Qk(t,e))rO(i,Kk(t),$W(t))}function kr(i){am(El,Km,i,!0)}function Km(i,t){for(let e=function qW(i){return Jk(i),Zk(i,Ub(i,0,Yu.textEnd))}(t);e>=0;e=Zk(t,e))El(i,Kk(t),!0)}function om(i,t,e,n){const r=bi(),s=Ts(),o=vl(2);s.firstUpdatePass&&iO(s,i,o,n),t!==qs&&wd(r,o,t)&&sO(s,s.data[hc()],r,r[11],i,r[o+1]=function o9(i,t){return null==i||("string"==typeof t?i+=t:"object"==typeof i&&(i=fs(bl(i)))),i}(t,e),n,o)}function am(i,t,e,n){const r=Ts(),s=vl(2);r.firstUpdatePass&&iO(r,null,s,n);const o=bi();if(e!==qs&&wd(o,s,e)){const l=r.data[hc()];if(aO(l,n)&&!nO(r,s)){let u=n?l.classesWithoutHost:l.stylesWithoutHost;null!==u&&(e=Ya(u,e||"")),eM(r,l,o,e,n)}else!function s9(i,t,e,n,r,s,o,l){r===qs&&(r=_o);let u=0,p=0,v=0<r.length?r[0]:null,w=0<s.length?s[0]:null;for(;null!==v||null!==w;){const I=u<r.length?r[u+1]:void 0,T=p<s.length?s[p+1]:void 0;let G,k=null;v===w?(u+=2,p+=2,I!==T&&(k=w,G=T)):null===w||null!==v&&v<w?(u+=2,k=v):(p+=2,k=w,G=T),null!==k&&sO(i,t,e,n,k,G,o,l),v=u<r.length?r[u]:null,w=p<s.length?s[p]:null}}(r,l,o,o[11],o[s+1],o[s+1]=function r9(i,t,e){if(null==e||""===e)return _o;const n=[],r=bl(e);if(Array.isArray(r))for(let s=0;s<r.length;s++)i(n,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&i(n,s,r[s]);else"string"==typeof r&&t(n,r);return n}(i,t,e),n,s)}}function nO(i,t){return t>=i.expandoStartIndex}function iO(i,t,e,n){const r=i.data;if(null===r[e+1]){const s=r[hc()],o=nO(i,e);aO(s,n)&&null===t&&!o&&(t=!1),t=function JW(i,t,e,n){const r=function os(i){const t=ns.lFrame.currentDirectiveIndex;return-1===t?null:i[t]}(i);let s=n?t.residualClasses:t.residualStyles;if(null===r)0===(n?t.classBindings:t.styleBindings)&&(e=Pw(e=nM(null,i,t,e,n),t.attrs,n),s=null);else{const o=t.directiveStylingLast;if(-1===o||i[o]!==r)if(e=nM(r,i,t,e,n),null===s){let u=function e9(i,t,e){const n=e?t.classBindings:t.styleBindings;if(0!==Ip(n))return i[xp(n)]}(i,t,n);void 0!==u&&Array.isArray(u)&&(u=nM(null,i,t,u[1],n),u=Pw(u,t.attrs,n),function t9(i,t,e,n){i[xp(e?t.classBindings:t.styleBindings)]=n}(i,t,n,u))}else s=function n9(i,t,e){let n;const r=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<r;s++)n=Pw(n,i[s].hostAttrs,e);return Pw(n,t.attrs,e)}(i,t,n)}return void 0!==s&&(n?t.residualClasses=s:t.residualStyles=s),e}(r,s,t,n),function GW(i,t,e,n,r,s){let o=s?t.classBindings:t.styleBindings,l=xp(o),u=Ip(o);i[n]=e;let v,p=!1;if(Array.isArray(e)){const w=e;v=w[1],(null===v||Do(w,v)>0)&&(p=!0)}else v=e;if(r)if(0!==u){const I=xp(i[l+1]);i[n+1]=r0(I,l),0!==I&&(i[I+1]=Cw(i[I+1],n)),i[l+1]=function kT(i,t){return 131071&i|t<<17}(i[l+1],n)}else i[n+1]=r0(l,0),0!==l&&(i[l+1]=Cw(i[l+1],n)),l=n;else i[n+1]=r0(u,0),0===l?l=n:i[u+1]=Cw(i[u+1],n),u=n;p&&(i[n+1]=s0(i[n+1])),Yk(i,v,n,!0),Yk(i,v,n,!1),function WW(i,t,e,n,r){const s=r?i.residualClasses:i.residualStyles;null!=s&&"string"==typeof t&&Do(s,t)>=0&&(e[n+1]=ww(e[n+1]))}(t,v,i,n,s),o=r0(l,u),s?t.classBindings=o:t.styleBindings=o}(r,s,t,e,o,n)}}function nM(i,t,e,n,r){let s=null;const o=e.directiveEnd;let l=e.directiveStylingLast;for(-1===l?l=e.directiveStart:l++;l<o&&(s=t[l],n=Pw(n,s.hostAttrs,r),s!==i);)l++;return null!==i&&(e.directiveStylingLast=l),n}function Pw(i,t,e){const n=e?1:2;let r=-1;if(null!==t)for(let s=0;s<t.length;s++){const o=t[s];"number"==typeof o?r=o:r===n&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),El(i,o,!!e||t[++s]))}return void 0===i?null:i}function rO(i,t,e){El(i,t,bl(e))}function sO(i,t,e,n,r,s,o,l){if(!(3&t.type))return;const u=i.data,p=u[l+1];CI(function lI(i){return 1==(1&i)}(p)?oO(u,t,e,r,Ip(p),o):void 0)||(CI(s)||function aI(i){return 2==(2&i)}(p)&&(s=oO(u,null,e,r,l,o)),function Bx(i,t,e,n,r){if(t)r?i.addClass(e,n):i.removeClass(e,n);else{let s=-1===n.indexOf("-")?void 0:Vi.DashCase;null==r?i.removeStyle(e,n,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=Vi.Important),i.setStyle(e,n,r,s))}}(n,o,Vg(hc(),e),r,s))}function oO(i,t,e,n,r,s){const o=null===t;let l;for(;r>0;){const u=i[r],p=Array.isArray(u),v=p?u[1]:u,w=null===v;let I=e[r+1];I===qs&&(I=w?_o:void 0);let T=w?fc(I,n):v===n?I:void 0;if(p&&!CI(T)&&(T=fc(u,n)),CI(T)&&(l=T,o))return l;const k=i[r+1];r=o?xp(k):Ip(k)}if(null!==t){let u=s?t.residualClasses:t.residualStyles;null!=u&&(l=fc(u,n))}return l}function CI(i){return void 0!==i}function aO(i,t){return 0!=(i.flags&(t?16:32))}function li(i,t=""){const e=bi(),n=Ts(),r=i+22,s=n.firstCreatePass?Db(n,r,1,t,null):n.data[r],o=e[r]=function Cp(i,t){return i.createText(t)}(e[11],t);Ib(n,e,o,s),sa(s,!1)}function ts(i){return yc("",i,""),ts}function yc(i,t,e){const n=bi(),r=Rb(n,i,t,e);return r!==qs&&jv(n,hc(),r),yc}function wI(i,t,e,n,r){const s=bi(),o=kb(s,i,t,e,n,r);return o!==qs&&jv(s,hc(),o),wI}const c0=void 0;var S9=["en",[["a","p"],["AM","PM"],c0],[["AM","PM"],c0,c0],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],c0,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],c0,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",c0,"{1} 'at' {0}",c0],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function I9(i){const e=Math.floor(Math.abs(i)),n=i.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let Hb={};function rf(i){const t=function E9(i){return i.toLowerCase().replace(/_/g,"-")}(i);let e=EO(t);if(e)return e;const n=t.split("-")[0];if(e=EO(n),e)return e;if("en"===n)return S9;throw new yi(701,!1)}function EO(i){return i in Hb||(Hb[i]=so.ng&&so.ng.common&&so.ng.common.locales&&so.ng.common.locales[i]),Hb[i]}var Ur=(()=>((Ur=Ur||{})[Ur.LocaleId=0]="LocaleId",Ur[Ur.DayPeriodsFormat=1]="DayPeriodsFormat",Ur[Ur.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ur[Ur.DaysFormat=3]="DaysFormat",Ur[Ur.DaysStandalone=4]="DaysStandalone",Ur[Ur.MonthsFormat=5]="MonthsFormat",Ur[Ur.MonthsStandalone=6]="MonthsStandalone",Ur[Ur.Eras=7]="Eras",Ur[Ur.FirstDayOfWeek=8]="FirstDayOfWeek",Ur[Ur.WeekendRange=9]="WeekendRange",Ur[Ur.DateFormat=10]="DateFormat",Ur[Ur.TimeFormat=11]="TimeFormat",Ur[Ur.DateTimeFormat=12]="DateTimeFormat",Ur[Ur.NumberSymbols=13]="NumberSymbols",Ur[Ur.NumberFormats=14]="NumberFormats",Ur[Ur.CurrencyCode=15]="CurrencyCode",Ur[Ur.CurrencySymbol=16]="CurrencySymbol",Ur[Ur.CurrencyName=17]="CurrencyName",Ur[Ur.Currencies=18]="Currencies",Ur[Ur.Directionality=19]="Directionality",Ur[Ur.PluralCase=20]="PluralCase",Ur[Ur.ExtraData=21]="ExtraData",Ur))();const Gb="en-US";let TO=Gb;function sM(i,t,e,n,r){if(i=is(i),Array.isArray(i))for(let s=0;s<i.length;s++)sM(i[s],t,e,n,r);else{const s=Ts(),o=bi();let l=ve(i)?i:is(i.provide),u=gn(i);const p=bt(),v=1048575&p.providerIndexes,w=p.directiveStart,I=p.providerIndexes>>20;if(ve(i)||!i.multi){const T=new Xp(u,r,Xt),k=aM(l,t,r?v:v+I,w);-1===k?(up(js(p,o),s,l),oM(s,i,t.length),t.push(l),p.directiveStart++,p.directiveEnd++,r&&(p.providerIndexes+=1048576),e.push(T),o.push(T)):(e[k]=T,o[k]=T)}else{const T=aM(l,t,v+I,w),k=aM(l,t,v,v+I),G=T>=0&&e[T],Y=k>=0&&e[k];if(r&&!Y||!r&&!G){up(js(p,o),s,l);const ce=function xj(i,t,e,n,r){const s=new Xp(i,e,Xt);return s.multi=[],s.index=t,s.componentProviders=0,JO(s,r,n&&!e),s}(r?Aj:wj,e.length,r,n,u);!r&&Y&&(e[k].providerFactory=ce),oM(s,i,t.length,0),t.push(l),p.directiveStart++,p.directiveEnd++,r&&(p.providerIndexes+=1048576),e.push(ce),o.push(ce)}else oM(s,i,T>-1?T:k,JO(e[r?k:T],u,!r&&n));!r&&n&&Y&&e[k].componentProviders++}}}function oM(i,t,e,n){const r=ve(t),s=function Ce(i){return!!i.useClass}(t);if(r||s){const u=(s?is(t.useClass):t).prototype.ngOnDestroy;if(u){const p=i.destroyHooks||(i.destroyHooks=[]);if(!r&&t.multi){const v=p.indexOf(e);-1===v?p.push(e,[n,u]):p[v+1].push(n,u)}else p.push(e,u)}}}function JO(i,t,e){return e&&i.componentProviders++,i.multi.push(t)-1}function aM(i,t,e,n){for(let r=e;r<n;r++)if(t[r]===i)return r;return-1}function wj(i,t,e,n){return lM(this.multi,[])}function Aj(i,t,e,n){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,l=tu(e,e[1],this.providerFactory.index,n);s=l.slice(0,o),lM(r,s);for(let u=o;u<l.length;u++)s.push(l[u])}else s=[],lM(r,s);return s}function lM(i,t){for(let e=0;e<i.length;e++)t.push((0,i[e])());return t}function Ao(i,t=[]){return e=>{e.providersResolver=(n,r)=>function Cj(i,t,e){const n=Ts();if(n.firstCreatePass){const r=Rh(i);sM(e,n.data,n.blueprint,r,!0),sM(t,n.data,n.blueprint,r,!1)}}(n,r?r(i):i,t)}}class u0{}class eF{}class tF extends u0{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ZT(this);const n=fu(t);this._bootstrapComponents=dn(n.bootstrap),this._r3Injector=Jx(t,e,[{provide:u0,useValue:this},{provide:gi,useValue:this.componentFactoryResolver}],fs(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class cM extends eF{constructor(t){super(),this.moduleType=t}create(t){return new tF(this.moduleType,t)}}class Sj extends u0{constructor(t,e,n){super(),this.componentFactoryResolver=new ZT(this),this.instance=null;const r=new xt([...t,{provide:u0,useValue:this},{provide:gi,useValue:this.componentFactoryResolver}],e||dt(),n,new Set(["environment"]));this.injector=r,r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function EI(i,t,e=null){return new Sj(i,t,e).injector}function uo(i,t,e){const n=Bo()+i,r=bi();return r[n]===qs?Ym(r,n,e?t.call(e):t()):Dw(r,n)}function _i(i,t,e,n){return cF(bi(),Bo(),i,t,e,n)}function ss(i,t,e,n,r){return function uF(i,t,e,n,r,s,o){const l=t+e;return a0(i,l,r,s)?Ym(i,l+2,o?n.call(o,r,s):n(r,s)):Nw(i,l+2)}(bi(),Bo(),i,t,e,n,r)}function Su(i,t,e,n,r,s){return function hF(i,t,e,n,r,s,o,l){const u=t+e;return _I(i,u,r,s,o)?Ym(i,u+3,l?n.call(l,r,s,o):n(r,s,o)):Nw(i,u+3)}(bi(),Bo(),i,t,e,n,r,s)}function sf(i,t,e,n,r,s,o){return function dF(i,t,e,n,r,s,o,l,u){const p=t+e;return hg(i,p,r,s,o,l)?Ym(i,p+4,u?n.call(u,r,s,o,l):n(r,s,o,l)):Nw(i,p+4)}(bi(),Bo(),i,t,e,n,r,s,o)}function h0(i,t,e,n,r,s,o,l){const u=Bo()+i,p=bi(),v=hg(p,u,e,n,r,s);return wd(p,u+4,o)||v?Ym(p,u+5,l?t.call(l,e,n,r,s,o):t(e,n,r,s,o)):Dw(p,u+5)}function jb(i,t,e,n,r,s,o,l,u){const p=Bo()+i,v=bi(),w=hg(v,p,e,n,r,s);return a0(v,p+4,o,l)||w?Ym(v,p+6,u?t.call(u,e,n,r,s,o,l):t(e,n,r,s,o,l)):Dw(v,p+6)}function hM(i,t,e,n){return function fF(i,t,e,n,r,s){let o=t+e,l=!1;for(let u=0;u<r.length;u++)wd(i,o++,r[u])&&(l=!0);return l?Ym(i,o,n.apply(s,r)):Nw(i,o)}(bi(),Bo(),i,t,e,n)}function Nw(i,t){const e=i[t];return e===qs?void 0:e}function cF(i,t,e,n,r,s){const o=t+e;return wd(i,o,r)?Ym(i,o+1,s?n.call(s,r):n(r)):Nw(i,o+1)}function dM(i){return t=>{setTimeout(i,void 0,t)}}const Fn=class Gj extends Ge{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r=t,s=e||(()=>null),o=n;if(t&&"object"==typeof t){const u=t;r=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=dM(s),r&&(r=dM(r)),o&&(o=dM(o)));const l=super.subscribe({next:r,error:s,complete:o});return t instanceof H&&t.add(l),l}};function Wj(){return this._results[o0()]()}class fM{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=o0(),n=fM.prototype;n[e]||(n[e]=Wj)}get changes(){return this._changes||(this._changes=new Fn)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=Ga(t);(this._changesDetected=!function Xd(i,t,e){if(i.length!==t.length)return!1;for(let n=0;n<i.length;n++){let r=i[n],s=t[n];if(e&&(r=e(r),s=e(s)),s!==r)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let lm=(()=>{class i{}return i.__NG_ELEMENT_ID__=qj,i})();const jj=lm,$j=class extends jj{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t,e){const n=this._declarationTContainer.tViews,r=fI(this._declarationLView,n,t,16,null,n.declTNode,null,null,null,null,e||null);r[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(r[19]=o.createEmbeddedView(n)),pI(n,r,t),new Ew(r)}};function qj(){return TI(bt(),bi())}function TI(i,t){return 4&i.type?new $j(t,i,Hi(i,t)):null}let dg=(()=>{class i{}return i.__NG_ELEMENT_ID__=Xj,i})();function Xj(){return yF(bt(),bi())}const Yj=dg,mF=class extends Yj{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return Hi(this._hostTNode,this._hostLView)}get injector(){return new ph(this._hostTNode,this._hostLView)}get parentInjector(){const t=Oc(this._hostTNode,this._hostLView);if(Bh(t)){const e=mu(t,this._hostLView),n=dh(t);return new ph(e[1].data[n+8],e)}return new ph(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=vF(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,e,n){let r,s;"number"==typeof n?r=n:null!=n&&(r=n.index,s=n.injector);const o=t.createEmbeddedView(e||{},s);return this.insert(o,r),o}createComponent(t,e,n,r,s){const o=t&&!function Il(i){return"function"==typeof i}(t);let l;if(o)l=e;else{const w=e||{};l=w.index,n=w.injector,r=w.projectableNodes,s=w.environmentInjector||w.ngModuleRef}const u=o?t:new Tw(Ko(t)),p=n||this.parentInjector;if(!s&&null==u.ngModule){const I=(o?p:this.parentInjector).get(at,null);I&&(s=I)}const v=u.create(p,r,void 0,s);return this.insert(v.hostView,l),v}insert(t,e){const n=t._lView,r=n[1];if(function Nr(i){return Ph(i[3])}(n)){const v=this.indexOf(t);if(-1!==v)this.detach(v);else{const w=n[3],I=new mF(w,w[6],w[3]);I.detach(I.indexOf(t))}}const s=this._adjustIndex(e),o=this._lContainer;!function _b(i,t,e,n){const r=10+n,s=e.length;n>0&&(e[r-1][4]=t),n<s-10?(t[4]=e[r],Hu(e,10+n,t)):(e.push(t),t[4]=null),t[3]=e;const o=t[17];null!==o&&e!==o&&function _d(i,t){const e=i[9];t[16]!==t[3][3][16]&&(i[2]=!0),null===e?i[9]=[t]:e.push(t)}(o,t);const l=t[19];null!==l&&l.insertView(i),t[2]|=64}(r,n,o,s);const l=hw(s,o),u=n[11],p=Gv(u,o[7]);return null!==p&&function wp(i,t,e,n,r,s){n[0]=r,n[6]=t,xu(i,n,e,1,r,s)}(r,o[6],u,n,p,l),t.attachToViewContainerRef(),Hu(pM(o),s,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=vF(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=e0(this._lContainer,e);n&&(Gu(pM(this._lContainer),e),ta(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=e0(this._lContainer,e);return n&&null!=Gu(pM(this._lContainer),e)?new Ew(n):null}_adjustIndex(t,e=0){return t??this.length+e}};function vF(i){return i[8]}function pM(i){return i[8]||(i[8]=[])}function yF(i,t){let e;const n=t[i.index];if(Ph(n))e=n;else{let r;if(8&i.type)r=ra(n);else{const s=t[11];r=s.createComment("");const o=hh(i,t);ug(s,Gv(s,o),r,function Wv(i,t){return i.nextSibling(t)}(s,o),!1)}t[i.index]=e=yk(n,t,r,i),gI(t,e)}return new mF(e,i,t)}class gM{constructor(t){this.queryList=t,this.matches=null}clone(){return new gM(this.queryList)}setDirty(){this.queryList.setDirty()}}class mM{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let s=0;s<n;s++){const o=e.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new mM(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==AF(t,e).matches&&this.queries[e].setDirty()}}class _F{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class vM{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,s=this.getByIndex(n).embeddedTView(t,r);s&&(s.indexInDeclarationView=n,null!==e?e.push(s):e=[s])}return null!==e?new vM(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class yM{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new yM(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const s=n[r];this.matchTNodeWithReadOption(t,e,Qj(e,s)),this.matchTNodeWithReadOption(t,e,zh(e,t,s,!1,!1))}else n===lm?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,zh(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Yn||r===dg||r===lm&&4&e.type)this.addMatch(e.index,-2);else{const s=zh(e,t,r,!1,!1);null!==s&&this.addMatch(e.index,s)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Qj(i,t){const e=i.localNames;if(null!==e)for(let n=0;n<e.length;n+=2)if(e[n]===t)return e[n+1];return null}function e7(i,t,e,n){return-1===e?function Jj(i,t){return 11&i.type?Hi(i,t):4&i.type?TI(i,t):null}(t,i):-2===e?function t7(i,t,e){return e===Yn?Hi(t,i):e===lm?TI(t,i):e===dg?yF(t,i):void 0}(i,t,n):tu(i,i[1],e,t)}function bF(i,t,e,n){const r=t[19].queries[n];if(null===r.matches){const s=i.data,o=e.matches,l=[];for(let u=0;u<o.length;u+=2){const p=o[u];l.push(p<0?null:e7(t,s[p],o[u+1],e.metadata.read))}r.matches=l}return r.matches}function _M(i,t,e,n){const r=i.queries.getByIndex(e),s=r.matches;if(null!==s){const o=bF(i,t,r,e);for(let l=0;l<s.length;l+=2){const u=s[l];if(u>0)n.push(o[l/2]);else{const p=s[l+1],v=t[-u];for(let w=10;w<v.length;w++){const I=v[w];I[17]===I[3]&&_M(I[1],I,p,n)}if(null!==v[9]){const w=v[9];for(let I=0;I<w.length;I++){const T=w[I];_M(T[1],T,p,n)}}}}}return n}function Wi(i){const t=bi(),e=Ts(),n=Pc();Hg(n+1);const r=AF(e,n);if(i.dirty&&bo(t)===(2==(2&r.metadata.flags))){if(null===r.matches)i.reset([]);else{const s=r.crossesNgTemplate?_M(e,t,n,[]):bF(e,t,r,n);i.reset(s,jn),i.notifyOnChanges()}return!0}return!1}function Tr(i,t,e){const n=Ts();n.firstCreatePass&&(wF(n,new _F(i,t,e),-1),2==(2&t)&&(n.staticViewQueries=!0)),CF(n,bi(),t)}function Ba(i,t,e,n){const r=Ts();if(r.firstCreatePass){const s=bt();wF(r,new _F(t,e,n),s.index),function r7(i,t){const e=i.contentQueries||(i.contentQueries=[]);t!==(e.length?e[e.length-1]:-1)&&e.push(i.queries.length-1,t)}(r,i),2==(2&e)&&(r.staticContentQueries=!0)}CF(r,bi(),e)}function ji(){return function n7(i,t){return i[19].queries[t].queryList}(bi(),Pc())}function CF(i,t,e){const n=new fM(4==(4&e));ck(i,t,n,n.destroy),null===t[19]&&(t[19]=new mM),t[19].queries.push(new gM(n))}function wF(i,t,e){null===i.queries&&(i.queries=new vM),i.queries.track(new yM(t,e))}function AF(i,t){return i.queries.getByIndex(t)}function sc(i,t){return TI(i,t)}function DI(...i){}const Vw=new ir("Application Initializer");let LI=(()=>{class i{constructor(e){this.appInits=e,this.resolve=DI,this.reject=DI,this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r})}runInitializers(){if(this.initialized)return;const e=[],n=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(Lw(s))e.push(s);else if(tM(s)){const o=new Promise((l,u)=>{s.subscribe({complete:l,error:u})});e.push(o)}}Promise.all(e).then(()=>{n()}).catch(r=>{this.reject(r)}),0===e.length&&n(),this.initialized=!0}}return i.\u0275fac=function(e){return new(e||i)(qn(Vw,8))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Uw=new ir("AppId",{providedIn:"root",factory:function HF(){return`${xM()}${xM()}${xM()}`}});function xM(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const GF=new ir("Platform Initializer"),Yb=new ir("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),WF=new ir("appBootstrapListener"),jF=new ir("AnimationModuleType");let x7=(()=>{class i{log(e){console.log(e)}warn(e){console.warn(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zi({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const $v=new ir("LocaleId",{providedIn:"root",factory:()=>fa($v,rs.Optional|rs.SkipSelf)||function I7(){return typeof $localize<"u"&&$localize.locale||Gb}()});class E7{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}let IM=(()=>{class i{compileModuleSync(e){return new cM(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const n=this.compileModuleSync(e),s=dn(fu(e).declarations).reduce((o,l)=>{const u=Ko(l);return u&&o.push(new Tw(u)),o},[]);return new E7(n,s)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const D7=(()=>Promise.resolve(0))();function SM(i){typeof Zone>"u"?D7.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Vo{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Fn(!1),this.onMicrotaskEmpty=new Fn(!1),this.onStable=new Fn(!1),this.onError=new Fn(!1),typeof Zone>"u")throw new yi(908,!1);Zone.assertZonePatched();const r=this;if(r._nesting=0,r._outer=r._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const s=Zone.AsyncStackTaggingZoneSpec;r._inner=r._inner.fork(new s("Angular"))}Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function L7(){let i=so.requestAnimationFrame,t=so.cancelAnimationFrame;if(typeof Zone<"u"&&i&&t){const e=i[Zone.__symbol__("OriginalDelegate")];e&&(i=e);const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function k7(i){const t=()=>{!function R7(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(so,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,TM(i),i.isCheckStableRunning=!0,EM(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),TM(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,n,r,s,o,l)=>{try{return XF(i),e.invokeTask(r,s,o,l)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||i.shouldCoalesceRunChangeDetection)&&t(),YF(i)}},onInvoke:(e,n,r,s,o,l,u)=>{try{return XF(i),e.invoke(r,s,o,l,u)}finally{i.shouldCoalesceRunChangeDetection&&t(),YF(i)}},onHasTask:(e,n,r,s)=>{e.hasTask(r,s),n===r&&("microTask"==s.change?(i._hasPendingMicrotasks=s.microTask,TM(i),EM(i)):"macroTask"==s.change&&(i.hasPendingMacrotasks=s.macroTask))},onHandleError:(e,n,r,s)=>(e.handleError(r,s),i.runOutsideAngular(()=>i.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Vo.isInAngularZone())throw new yi(909,!1)}static assertNotInAngularZone(){if(Vo.isInAngularZone())throw new yi(909,!1)}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,t,P7,DI,DI);try{return s.runTask(o,e,n)}finally{s.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const P7={};function EM(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function TM(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function XF(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function YF(i){i._nesting--,EM(i)}class O7{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Fn,this.onMicrotaskEmpty=new Fn,this.onStable=new Fn,this.onError=new Fn}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}const KF=new ir(""),PI=new ir("");let LM,MM=(()=>{class i{constructor(e,n,r){this._ngZone=e,this.registry=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,LM||(function F7(i){LM=i}(r),r.addToWindow(n)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Vo.assertNotInAngularZone(),SM(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())SM(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(n=>!n.updateCb||!n.updateCb(e)||(clearTimeout(n.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,n,r){let s=-1;n&&n>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),e(this._didWork,this.getPendingTasks())},n)),this._callbacks.push({doneCb:e,timeoutId:s,updateCb:r})}whenStable(e,n,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,n,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,n,r){return[]}}return i.\u0275fac=function(e){return new(e||i)(qn(Vo),qn(DM),qn(PI))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})(),DM=(()=>{class i{constructor(){this._applications=new Map}registerApplication(e,n){this._applications.set(e,n)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,n=!0){return LM?.findTestabilityInTree(this,e,n)??null}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zi({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),e_=null;const ZF=new ir("AllowMultipleToken"),PM=new ir("PlatformDestroyListeners");class QF{constructor(t,e){this.name=t,this.token=e}}function eN(i,t,e=[]){const n=`Platform: ${t}`,r=new ir(n);return(s=[])=>{let o=RM();if(!o||o.injector.get(ZF,!1)){const l=[...e,...s,{provide:r,useValue:!0}];i?i(l):function z7(i){if(e_&&!e_.get(ZF,!1))throw new yi(400,!1);e_=i;const t=i.get(nN);(function JF(i){const t=i.get(GF,null);t&&t.forEach(e=>e())})(i)}(function tN(i=[],t){return Iu.create({name:t,providers:[{provide:Ve,useValue:"platform"},{provide:PM,useValue:new Set([()=>e_=null])},...i]})}(l,n))}return function U7(i){const t=RM();if(!t)throw new yi(401,!1);return t}()}}function RM(){return e_?.get(nN)??null}let nN=(()=>{class i{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,n){const r=function H7(i,t){let e;return e="noop"===i?new O7:("zone.js"===i?void 0:i)||new Vo(t),e}(n?.ngZone,function iN(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(n)),s=[{provide:Vo,useValue:r}];return r.run(()=>{const o=Iu.create({providers:s,parent:this.injector,name:e.moduleType.name}),l=e.create(o),u=l.injector.get(ut,null);if(!u)throw new yi(402,!1);return r.runOutsideAngular(()=>{const p=r.onError.subscribe({next:v=>{u.handleError(v)}});l.onDestroy(()=>{RI(this._modules,l),p.unsubscribe()})}),function rN(i,t,e){try{const n=e();return Lw(n)?n.catch(r=>{throw t.runOutsideAngular(()=>i.handleError(r)),r}):n}catch(n){throw t.runOutsideAngular(()=>i.handleError(n)),n}}(u,r,()=>{const p=l.injector.get(LI);return p.runInitializers(),p.donePromise.then(()=>(function MO(i){Ec(i,"Expected localeId to be defined"),"string"==typeof i&&(TO=i.toLowerCase().replace(/_/g,"-"))}(l.injector.get($v,Gb)||Gb),this._moduleDoBootstrap(l),l))})})}bootstrapModule(e,n=[]){const r=sN({},n);return function N7(i,t,e){const n=new cM(e);return Promise.resolve(n)}(0,0,e).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(e){const n=e.injector.get(Hw);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>n.bootstrap(r));else{if(!e.instance.ngDoBootstrap)throw new yi(403,!1);e.instance.ngDoBootstrap(n)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new yi(404,!1);this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n());const e=this._injector.get(PM,null);e&&(e.forEach(n=>n()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(e){return new(e||i)(qn(Iu))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function sN(i,t){return Array.isArray(t)?t.reduce(sN,i):{...i,...t}}let Hw=(()=>{class i{constructor(e,n,r){this._zone=e,this._injector=n,this._exceptionHandler=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new vt(l=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{l.next(this._stable),l.complete()})}),o=new vt(l=>{let u;this._zone.runOutsideAngular(()=>{u=this._zone.onStable.subscribe(()=>{Vo.assertNotInAngularZone(),SM(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,l.next(!0))})})});const p=this._zone.onUnstable.subscribe(()=>{Vo.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{l.next(!1)}))});return()=>{u.unsubscribe(),p.unsubscribe()}});this.isStable=function Gs(...i){const t=ge(i),e=function Re(i,t){return"number"==typeof pt(i)?i.pop():t}(i,1/0),n=i;return n.length?1===n.length?pl(n[0]):Ic(e)(ur(n,t)):rl}(s,o.pipe(So()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(e,n){const r=e instanceof tn;if(!this._injector.get(LI).done)throw!r&&function qb(i){const t=Ko(i)||Ol(i)||La(i);return null!==t&&t.standalone}(e),new yi(405,false);let o;o=r?e:this._injector.get(gi).resolveComponentFactory(e),this.componentTypes.push(o.componentType);const l=function B7(i){return i.isBoundToModule}(o)?void 0:this._injector.get(u0),p=o.create(Iu.NULL,[],n||o.selector,l),v=p.location.nativeElement,w=p.injector.get(KF,null);return w?.registerApplication(v),p.onDestroy(()=>{this.detachView(p.hostView),RI(this.components,p),w?.unregisterApplication(v)}),this._loadComponent(p),p}tick(){if(this._runningTick)throw new yi(101,!1);try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const n=e;this._views.push(n),n.attachToAppRef(this)}detachView(e){const n=e;RI(this._views,n),n.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(WF,[]).concat(this._bootstrapListeners).forEach(r=>r(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>RI(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new yi(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(e){return new(e||i)(qn(Vo),qn(at),qn(ut))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function RI(i,t){const e=i.indexOf(t);e>-1&&i.splice(e,1)}let aN=!0,lN=!1;function cN(){return lN=!0,aN}let xo=(()=>{class i{}return i.__NG_ELEMENT_ID__=j7,i})();function j7(i){return function $7(i,t,e){if(kg(i)&&!e){const n=Dc(i.index,t);return new Ew(n,n)}return 47&i.type?new Ew(t[16],t):null}(bt(),bi(),16==(16&i))}class fN{constructor(){}supports(t){return Mw(t)}create(t){return new Q7(t)}}const Z7=(i,t)=>t;class Q7{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Z7}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,s=null;for(;e||n;){const o=!n||e&&e.currentIndex<gN(n,r,s)?e:n,l=gN(o,r,s),u=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{s||(s=[]);const p=l-r,v=u-r;if(p!=v){for(let I=0;I<p;I++){const T=I<s.length?s[I]:s[I]=0,k=T+I;v<=k&&k<p&&(s[I]=T+1)}s[o.previousIndex]=v-p}}l!==u&&t(o,l,u)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Mw(t))throw new yi(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let r,s,o,e=this._itHead,n=!1;if(Array.isArray(t)){this.length=t.length;for(let l=0;l<this.length;l++)s=t[l],o=this._trackByFn(l,s),null!==e&&Object.is(e.trackById,o)?(n&&(e=this._verifyReinsertion(e,s,o,l)),Object.is(e.item,s)||this._addIdentityChange(e,s)):(e=this._mismatch(e,s,o,l),n=!0),e=e._next}else r=0,function RW(i,t){if(Array.isArray(i))for(let e=0;e<i.length;e++)t(i[e]);else{const e=i[o0()]();let n;for(;!(n=e.next()).done;)t(n.value)}}(t,l=>{o=this._trackByFn(r,l),null!==e&&Object.is(e.trackById,o)?(n&&(e=this._verifyReinsertion(e,l,o,r)),Object.is(e.item,l)||this._addIdentityChange(e,l)):(e=this._mismatch(e,l,o,r),n=!0),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let s;return null===t?s=this._itTail:(s=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,s,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,s,r)):t=this._addAfter(new J7(e,n),s,r),t}_verifyReinsertion(t,e,n,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==s?t=this._reinsertAfter(s,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,s=t._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new pN),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new pN),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class J7{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class e${constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class pN{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new e$,this.map.set(e,n)),n.add(t)}get(t,e){const r=this.map.get(t);return r?r.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function gN(i,t,e){const n=i.previousIndex;if(null===n)return n;let r=0;return e&&n<e.length&&(r=e[n]),n+t+r}class mN{constructor(){}supports(t){return t instanceof Map||JT(t)}create(){return new t$}}class t${constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||JT(t)))throw new yi(900,!1)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(n,r)=>{if(e&&e.key===r)this._maybeAddToChanges(e,n),this._appendAfter=e,e=e._next;else{const s=this._getOrCreateRecordForKey(r,n);e=this._insertBeforeOrAppend(e,s)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let n=e;null!==n;n=n._nextRemoved)n===this._mapHead&&(this._mapHead=null),this._records.delete(n.key),n._nextRemoved=n._next,n.previousValue=n.currentValue,n.currentValue=null,n._prev=null,n._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const r=this._records.get(t);this._maybeAddToChanges(r,e);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const n=new n$(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class n${constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function vN(){return new FI([new fN])}let FI=(()=>{class i{constructor(e){this.factories=e}static create(e,n){if(null!=n){const r=n.factories.slice();e=e.concat(r)}return new i(e)}static extend(e){return{provide:i,useFactory:n=>i.create(e,n||vN()),deps:[[i,new mh,new Ml]]}}find(e){const n=this.factories.find(r=>r.supports(e));if(null!=n)return n;throw new yi(901,!1)}}return i.\u0275prov=Zi({token:i,providedIn:"root",factory:vN}),i})();function yN(){return new Gw([new mN])}let Gw=(()=>{class i{constructor(e){this.factories=e}static create(e,n){if(n){const r=n.factories.slice();e=e.concat(r)}return new i(e)}static extend(e){return{provide:i,useFactory:n=>i.create(e,n||yN()),deps:[[i,new mh,new Ml]]}}find(e){const n=this.factories.find(r=>r.supports(e));if(n)return n;throw new yi(901,!1)}}return i.\u0275prov=Zi({token:i,providedIn:"root",factory:yN}),i})();const s$=eN(null,"core",[]);let o$=(()=>{class i{constructor(e){}}return i.\u0275fac=function(e){return new(e||i)(qn(Hw))},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({}),i})();function Xv(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}let NI=null;function Zm(){return NI}const Ku=new ir("DocumentToken");let BM=(()=>{class i{historyGo(e){throw new Error("Not implemented")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zi({token:i,factory:function(){return function u$(){return qn(_N)}()},providedIn:"platform"}),i})();const h$=new ir("Location Initialized");let _N=(()=>{class i extends BM{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Zm().getBaseHref(this._doc)}onPopState(e){const n=Zm().getGlobalEventTarget(this._doc,"window");return n.addEventListener("popstate",e,!1),()=>n.removeEventListener("popstate",e)}onHashChange(e){const n=Zm().getGlobalEventTarget(this._doc,"window");return n.addEventListener("hashchange",e,!1),()=>n.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,n,r){bN()?this._history.pushState(e,n,r):this.location.hash=r}replaceState(e,n,r){bN()?this._history.replaceState(e,n,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return i.\u0275fac=function(e){return new(e||i)(qn(Ku))},i.\u0275prov=Zi({token:i,factory:function(){return function d$(){return new _N(qn(Ku))}()},providedIn:"platform"}),i})();function bN(){return!!window.history.pushState}function zM(i,t){if(0==i.length)return t;if(0==t.length)return i;let e=0;return i.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?i+t.substring(1):1==e?i+t:i+"/"+t}function CN(i){const t=i.match(/#|\?|$/),e=t&&t.index||i.length;return i.slice(0,e-("/"===i[e-1]?1:0))+i.slice(e)}function Yv(i){return i&&"?"!==i[0]?"?"+i:i}let f0=(()=>{class i{historyGo(e){throw new Error("Not implemented")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zi({token:i,factory:function(){return fa(AN)},providedIn:"root"}),i})();const wN=new ir("appBaseHref");let AN=(()=>{class i extends f0{constructor(e,n){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=n??this._platformLocation.getBaseHrefFromDOM()??fa(Ku).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return zM(this._baseHref,e)}path(e=!1){const n=this._platformLocation.pathname+Yv(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${n}${r}`:n}pushState(e,n,r,s){const o=this.prepareExternalUrl(r+Yv(s));this._platformLocation.pushState(e,n,o)}replaceState(e,n,r,s){const o=this.prepareExternalUrl(r+Yv(s));this._platformLocation.replaceState(e,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return i.\u0275fac=function(e){return new(e||i)(qn(BM),qn(wN,8))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),f$=(()=>{class i extends f0{constructor(e,n){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=n&&(this._baseHref=n)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let n=this._platformLocation.hash;return null==n&&(n="#"),n.length>0?n.substring(1):n}prepareExternalUrl(e){const n=zM(this._baseHref,e);return n.length>0?"#"+n:n}pushState(e,n,r,s){let o=this.prepareExternalUrl(r+Yv(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(e,n,o)}replaceState(e,n,r,s){let o=this.prepareExternalUrl(r+Yv(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(e,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return i.\u0275fac=function(e){return new(e||i)(qn(BM),qn(wN,8))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})(),VM=(()=>{class i{constructor(e){this._subject=new Fn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const n=this._locationStrategy.getBaseHref();this._baseHref=CN(xN(n)),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,n=""){return this.path()==this.normalize(e+Yv(n))}normalize(e){return i.stripTrailingSlash(function g$(i,t){return i&&t.startsWith(i)?t.substring(i.length):t}(this._baseHref,xN(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,n="",r=null){this._locationStrategy.pushState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Yv(n)),r)}replaceState(e,n="",r=null){this._locationStrategy.replaceState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Yv(n)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(n=>{this._notifyUrlChangeListeners(n.url,n.state)})),()=>{const n=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(n,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",n){this._urlChangeListeners.forEach(r=>r(e,n))}subscribe(e,n,r){return this._subject.subscribe({next:e,error:n,complete:r})}}return i.normalizeQueryParams=Yv,i.joinWithSlash=zM,i.stripTrailingSlash=CN,i.\u0275fac=function(e){return new(e||i)(qn(f0))},i.\u0275prov=Zi({token:i,factory:function(){return function p$(){return new VM(qn(f0))}()},providedIn:"root"}),i})();function xN(i){return i.replace(/\/index.html$/,"")}var ou=(()=>((ou=ou||{})[ou.Format=0]="Format",ou[ou.Standalone=1]="Standalone",ou))(),qo=(()=>((qo=qo||{})[qo.Narrow=0]="Narrow",qo[qo.Abbreviated=1]="Abbreviated",qo[qo.Wide=2]="Wide",qo[qo.Short=3]="Short",qo))(),_c=(()=>((_c=_c||{})[_c.Short=0]="Short",_c[_c.Medium=1]="Medium",_c[_c.Long=2]="Long",_c[_c.Full=3]="Full",_c))(),ks=(()=>((ks=ks||{})[ks.Decimal=0]="Decimal",ks[ks.Group=1]="Group",ks[ks.List=2]="List",ks[ks.PercentSign=3]="PercentSign",ks[ks.PlusSign=4]="PlusSign",ks[ks.MinusSign=5]="MinusSign",ks[ks.Exponential=6]="Exponential",ks[ks.SuperscriptingExponent=7]="SuperscriptingExponent",ks[ks.PerMille=8]="PerMille",ks[ks.Infinity=9]="Infinity",ks[ks.NaN=10]="NaN",ks[ks.TimeSeparator=11]="TimeSeparator",ks[ks.CurrencyDecimal=12]="CurrencyDecimal",ks[ks.CurrencyGroup=13]="CurrencyGroup",ks))();function BI(i,t){return pg(rf(i)[Ur.DateFormat],t)}function zI(i,t){return pg(rf(i)[Ur.TimeFormat],t)}function VI(i,t){return pg(rf(i)[Ur.DateTimeFormat],t)}function fg(i,t){const e=rf(i),n=e[Ur.NumberSymbols][t];if(typeof n>"u"){if(t===ks.CurrencyDecimal)return e[Ur.NumberSymbols][ks.Decimal];if(t===ks.CurrencyGroup)return e[Ur.NumberSymbols][ks.Group]}return n}function SN(i){if(!i[Ur.ExtraData])throw new Error(`Missing extra locale data for the locale "${i[Ur.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function pg(i,t){for(let e=t;e>-1;e--)if(typeof i[e]<"u")return i[e];throw new Error("Locale data API: locale data undefined")}function HM(i){const[t,e]=i.split(":");return{hours:+t,minutes:+e}}const T$=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Ww={},M$=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Zu=(()=>((Zu=Zu||{})[Zu.Short=0]="Short",Zu[Zu.ShortGMT=1]="ShortGMT",Zu[Zu.Long=2]="Long",Zu[Zu.Extended=3]="Extended",Zu))(),Us=(()=>((Us=Us||{})[Us.FullYear=0]="FullYear",Us[Us.Month=1]="Month",Us[Us.Date=2]="Date",Us[Us.Hours=3]="Hours",Us[Us.Minutes=4]="Minutes",Us[Us.Seconds=5]="Seconds",Us[Us.FractionalSeconds=6]="FractionalSeconds",Us[Us.Day=7]="Day",Us))(),go=(()=>((go=go||{})[go.DayPeriods=0]="DayPeriods",go[go.Days=1]="Days",go[go.Months=2]="Months",go[go.Eras=3]="Eras",go))();function D$(i,t,e,n){let r=function z$(i){if(MN(i))return i;if("number"==typeof i&&!isNaN(i))return new Date(i);if("string"==typeof i){if(i=i.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(i)){const[r,s=1,o=1]=i.split("-").map(l=>+l);return UI(r,s-1,o)}const e=parseFloat(i);if(!isNaN(i-e))return new Date(e);let n;if(n=i.match(T$))return function V$(i){const t=new Date(0);let e=0,n=0;const r=i[8]?t.setUTCFullYear:t.setFullYear,s=i[8]?t.setUTCHours:t.setHours;i[9]&&(e=Number(i[9]+i[10]),n=Number(i[9]+i[11])),r.call(t,Number(i[1]),Number(i[2])-1,Number(i[3]));const o=Number(i[4]||0)-e,l=Number(i[5]||0)-n,u=Number(i[6]||0),p=Math.floor(1e3*parseFloat("0."+(i[7]||0)));return s.call(t,o,l,u,p),t}(n)}const t=new Date(i);if(!MN(t))throw new Error(`Unable to convert "${i}" into a date`);return t}(i);t=Kv(e,t)||t;let l,o=[];for(;t;){if(l=M$.exec(t),!l){o.push(t);break}{o=o.concat(l.slice(1));const v=o.pop();if(!v)break;t=v}}let u=r.getTimezoneOffset();n&&(u=TN(n,u),r=function B$(i,t,e){const n=e?-1:1,r=i.getTimezoneOffset();return function N$(i,t){return(i=new Date(i.getTime())).setMinutes(i.getMinutes()+t),i}(i,n*(TN(t,r)-r))}(r,n,!0));let p="";return o.forEach(v=>{const w=function F$(i){if(WM[i])return WM[i];let t;switch(i){case"G":case"GG":case"GGG":t=Dl(go.Eras,qo.Abbreviated);break;case"GGGG":t=Dl(go.Eras,qo.Wide);break;case"GGGGG":t=Dl(go.Eras,qo.Narrow);break;case"y":t=Tu(Us.FullYear,1,0,!1,!0);break;case"yy":t=Tu(Us.FullYear,2,0,!0,!0);break;case"yyy":t=Tu(Us.FullYear,3,0,!1,!0);break;case"yyyy":t=Tu(Us.FullYear,4,0,!1,!0);break;case"Y":t=jI(1);break;case"YY":t=jI(2,!0);break;case"YYY":t=jI(3);break;case"YYYY":t=jI(4);break;case"M":case"L":t=Tu(Us.Month,1,1);break;case"MM":case"LL":t=Tu(Us.Month,2,1);break;case"MMM":t=Dl(go.Months,qo.Abbreviated);break;case"MMMM":t=Dl(go.Months,qo.Wide);break;case"MMMMM":t=Dl(go.Months,qo.Narrow);break;case"LLL":t=Dl(go.Months,qo.Abbreviated,ou.Standalone);break;case"LLLL":t=Dl(go.Months,qo.Wide,ou.Standalone);break;case"LLLLL":t=Dl(go.Months,qo.Narrow,ou.Standalone);break;case"w":t=GM(1);break;case"ww":t=GM(2);break;case"W":t=GM(1,!0);break;case"d":t=Tu(Us.Date,1);break;case"dd":t=Tu(Us.Date,2);break;case"c":case"cc":t=Tu(Us.Day,1);break;case"ccc":t=Dl(go.Days,qo.Abbreviated,ou.Standalone);break;case"cccc":t=Dl(go.Days,qo.Wide,ou.Standalone);break;case"ccccc":t=Dl(go.Days,qo.Narrow,ou.Standalone);break;case"cccccc":t=Dl(go.Days,qo.Short,ou.Standalone);break;case"E":case"EE":case"EEE":t=Dl(go.Days,qo.Abbreviated);break;case"EEEE":t=Dl(go.Days,qo.Wide);break;case"EEEEE":t=Dl(go.Days,qo.Narrow);break;case"EEEEEE":t=Dl(go.Days,qo.Short);break;case"a":case"aa":case"aaa":t=Dl(go.DayPeriods,qo.Abbreviated);break;case"aaaa":t=Dl(go.DayPeriods,qo.Wide);break;case"aaaaa":t=Dl(go.DayPeriods,qo.Narrow);break;case"b":case"bb":case"bbb":t=Dl(go.DayPeriods,qo.Abbreviated,ou.Standalone,!0);break;case"bbbb":t=Dl(go.DayPeriods,qo.Wide,ou.Standalone,!0);break;case"bbbbb":t=Dl(go.DayPeriods,qo.Narrow,ou.Standalone,!0);break;case"B":case"BB":case"BBB":t=Dl(go.DayPeriods,qo.Abbreviated,ou.Format,!0);break;case"BBBB":t=Dl(go.DayPeriods,qo.Wide,ou.Format,!0);break;case"BBBBB":t=Dl(go.DayPeriods,qo.Narrow,ou.Format,!0);break;case"h":t=Tu(Us.Hours,1,-12);break;case"hh":t=Tu(Us.Hours,2,-12);break;case"H":t=Tu(Us.Hours,1);break;case"HH":t=Tu(Us.Hours,2);break;case"m":t=Tu(Us.Minutes,1);break;case"mm":t=Tu(Us.Minutes,2);break;case"s":t=Tu(Us.Seconds,1);break;case"ss":t=Tu(Us.Seconds,2);break;case"S":t=Tu(Us.FractionalSeconds,1);break;case"SS":t=Tu(Us.FractionalSeconds,2);break;case"SSS":t=Tu(Us.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=GI(Zu.Short);break;case"ZZZZZ":t=GI(Zu.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=GI(Zu.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=GI(Zu.Long);break;default:return null}return WM[i]=t,t}(v);p+=w?w(r,e,u):"''"===v?"'":v.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),p}function UI(i,t,e){const n=new Date(0);return n.setFullYear(i,t,e),n.setHours(0,0,0),n}function Kv(i,t){const e=function m$(i){return rf(i)[Ur.LocaleId]}(i);if(Ww[e]=Ww[e]||{},Ww[e][t])return Ww[e][t];let n="";switch(t){case"shortDate":n=BI(i,_c.Short);break;case"mediumDate":n=BI(i,_c.Medium);break;case"longDate":n=BI(i,_c.Long);break;case"fullDate":n=BI(i,_c.Full);break;case"shortTime":n=zI(i,_c.Short);break;case"mediumTime":n=zI(i,_c.Medium);break;case"longTime":n=zI(i,_c.Long);break;case"fullTime":n=zI(i,_c.Full);break;case"short":const r=Kv(i,"shortTime"),s=Kv(i,"shortDate");n=HI(VI(i,_c.Short),[r,s]);break;case"medium":const o=Kv(i,"mediumTime"),l=Kv(i,"mediumDate");n=HI(VI(i,_c.Medium),[o,l]);break;case"long":const u=Kv(i,"longTime"),p=Kv(i,"longDate");n=HI(VI(i,_c.Long),[u,p]);break;case"full":const v=Kv(i,"fullTime"),w=Kv(i,"fullDate");n=HI(VI(i,_c.Full),[v,w])}return n&&(Ww[e][t]=n),n}function HI(i,t){return t&&(i=i.replace(/\{([^}]+)}/g,function(e,n){return null!=t&&n in t?t[n]:e})),i}function um(i,t,e="-",n,r){let s="";(i<0||r&&i<=0)&&(r?i=1-i:(i=-i,s=e));let o=String(i);for(;o.length<t;)o="0"+o;return n&&(o=o.slice(o.length-t)),s+o}function Tu(i,t,e=0,n=!1,r=!1){return function(s,o){let l=function P$(i,t){switch(i){case Us.FullYear:return t.getFullYear();case Us.Month:return t.getMonth();case Us.Date:return t.getDate();case Us.Hours:return t.getHours();case Us.Minutes:return t.getMinutes();case Us.Seconds:return t.getSeconds();case Us.FractionalSeconds:return t.getMilliseconds();case Us.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${i}".`)}}(i,s);if((e>0||l>-e)&&(l+=e),i===Us.Hours)0===l&&-12===e&&(l=12);else if(i===Us.FractionalSeconds)return function L$(i,t){return um(i,3).substring(0,t)}(l,t);const u=fg(o,ks.MinusSign);return um(l,t,u,n,r)}}function Dl(i,t,e=ou.Format,n=!1){return function(r,s){return function R$(i,t,e,n,r,s){switch(e){case go.Months:return function _$(i,t,e){const n=rf(i),s=pg([n[Ur.MonthsFormat],n[Ur.MonthsStandalone]],t);return pg(s,e)}(t,r,n)[i.getMonth()];case go.Days:return function y$(i,t,e){const n=rf(i),s=pg([n[Ur.DaysFormat],n[Ur.DaysStandalone]],t);return pg(s,e)}(t,r,n)[i.getDay()];case go.DayPeriods:const o=i.getHours(),l=i.getMinutes();if(s){const p=function A$(i){const t=rf(i);return SN(t),(t[Ur.ExtraData][2]||[]).map(n=>"string"==typeof n?HM(n):[HM(n[0]),HM(n[1])])}(t),v=function x$(i,t,e){const n=rf(i);SN(n);const s=pg([n[Ur.ExtraData][0],n[Ur.ExtraData][1]],t)||[];return pg(s,e)||[]}(t,r,n),w=p.findIndex(I=>{if(Array.isArray(I)){const[T,k]=I,G=o>=T.hours&&l>=T.minutes,Y=o<k.hours||o===k.hours&&l<k.minutes;if(T.hours<k.hours){if(G&&Y)return!0}else if(G||Y)return!0}else if(I.hours===o&&I.minutes===l)return!0;return!1});if(-1!==w)return v[w]}return function v$(i,t,e){const n=rf(i),s=pg([n[Ur.DayPeriodsFormat],n[Ur.DayPeriodsStandalone]],t);return pg(s,e)}(t,r,n)[o<12?0:1];case go.Eras:return function b$(i,t){return pg(rf(i)[Ur.Eras],t)}(t,n)[i.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${e}`)}}(r,s,i,t,e,n)}}function GI(i){return function(t,e,n){const r=-1*n,s=fg(e,ks.MinusSign),o=r>0?Math.floor(r/60):Math.ceil(r/60);switch(i){case Zu.Short:return(r>=0?"+":"")+um(o,2,s)+um(Math.abs(r%60),2,s);case Zu.ShortGMT:return"GMT"+(r>=0?"+":"")+um(o,1,s);case Zu.Long:return"GMT"+(r>=0?"+":"")+um(o,2,s)+":"+um(Math.abs(r%60),2,s);case Zu.Extended:return 0===n?"Z":(r>=0?"+":"")+um(o,2,s)+":"+um(Math.abs(r%60),2,s);default:throw new Error(`Unknown zone width "${i}"`)}}}function EN(i){return UI(i.getFullYear(),i.getMonth(),i.getDate()+(4-i.getDay()))}function GM(i,t=!1){return function(e,n){let r;if(t){const s=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,o=e.getDate();r=1+Math.floor((o+s)/7)}else{const s=EN(e),o=function O$(i){const t=UI(i,0,1).getDay();return UI(i,0,1+(t<=4?4:11)-t)}(s.getFullYear()),l=s.getTime()-o.getTime();r=1+Math.round(l/6048e5)}return um(r,i,fg(n,ks.MinusSign))}}function jI(i,t=!1){return function(e,n){return um(EN(e).getFullYear(),i,fg(n,ks.MinusSign),t)}}const WM={};function TN(i,t){i=i.replace(/:/g,"");const e=Date.parse("Jan 01, 1970 00:00:00 "+i)/6e4;return isNaN(e)?t:e}function MN(i){return i instanceof Date&&!isNaN(i.valueOf())}function RN(i,t){t=encodeURIComponent(t);for(const e of i.split(";")){const n=e.indexOf("="),[r,s]=-1==n?[e,""]:[e.slice(0,n),e.slice(n+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}let no=(()=>{class i{constructor(e,n,r,s){this._iterableDiffers=e,this._keyValueDiffers=n,this._ngEl=r,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(Mw(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(n=>this._toggleClass(n.key,n.currentValue)),e.forEachChangedItem(n=>this._toggleClass(n.key,n.currentValue)),e.forEachRemovedItem(n=>{n.previousValue&&this._toggleClass(n.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(n=>{if("string"!=typeof n.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${fs(n.item)}`);this._toggleClass(n.item,!0)}),e.forEachRemovedItem(n=>this._toggleClass(n.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(n=>this._toggleClass(n,!0)):Object.keys(e).forEach(n=>this._toggleClass(n,!!e[n])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(n=>this._toggleClass(n,!1)):Object.keys(e).forEach(n=>this._toggleClass(n,!1)))}_toggleClass(e,n){(e=e.trim())&&e.split(/\s+/g).forEach(r=>{n?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return i.\u0275fac=function(e){return new(e||i)(Xt(FI),Xt(Gw),Xt(Yn),Xt(d))},i.\u0275dir=qr({type:i,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),i})();class J${constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let jc=(()=>{class i{constructor(e,n,r){this._viewContainer=e,this._template=n,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const n=this._viewContainer;e.forEachOperation((r,s,o)=>{if(null==r.previousIndex)n.createEmbeddedView(this._template,new J$(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)n.remove(null===s?void 0:s);else if(null!==s){const l=n.get(s);n.move(l,o),FN(l,r)}});for(let r=0,s=n.length;r<s;r++){const l=n.get(r).context;l.index=r,l.count=s,l.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{FN(n.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,n){return!0}}return i.\u0275fac=function(e){return new(e||i)(Xt(dg),Xt(lm),Xt(FI))},i.\u0275dir=qr({type:i,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),i})();function FN(i,t){i.context.$implicit=t.item}let ho=(()=>{class i{constructor(e,n){this._viewContainer=e,this._context=new tq,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){NN("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){NN("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,n){return!0}}return i.\u0275fac=function(e){return new(e||i)(Xt(dg),Xt(lm))},i.\u0275dir=qr({type:i,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),i})();class tq{constructor(){this.$implicit=null,this.ngIf=null}}function NN(i,t){if(t&&!t.createEmbeddedView)throw new Error(`${i} must be a TemplateRef, but received '${fs(t)}'.`)}let Po=(()=>{class i{constructor(e,n,r){this._ngEl=e,this._differs=n,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,n){const[r,s]=e.split("."),o=-1===r.indexOf("-")?void 0:Vi.DashCase;null!=n?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${n}${s}`:n,o):this._renderer.removeStyle(this._ngEl.nativeElement,r,o)}_applyChanges(e){e.forEachRemovedItem(n=>this._setStyle(n.key,null)),e.forEachAddedItem(n=>this._setStyle(n.key,n.currentValue)),e.forEachChangedItem(n=>this._setStyle(n.key,n.currentValue))}}return i.\u0275fac=function(e){return new(e||i)(Xt(Yn),Xt(Gw),Xt(d))},i.\u0275dir=qr({type:i,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),i})(),el=(()=>{class i{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(e.ngTemplateOutlet||e.ngTemplateOutletInjector){const n=this._viewContainerRef;if(this._viewRef&&n.remove(n.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:s,ngTemplateOutletInjector:o}=this;this._viewRef=n.createEmbeddedView(r,s,o?{injector:o}:void 0)}else this._viewRef=null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return i.\u0275fac=function(e){return new(e||i)(Xt(dg))},i.\u0275dir=qr({type:i,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[da]}),i})();const pq=new ir("DATE_PIPE_DEFAULT_TIMEZONE");let zN=(()=>{class i{constructor(e,n){this.locale=e,this.defaultTimezone=n}transform(e,n="mediumDate",r,s){if(null==e||""===e||e!=e)return null;try{return D$(e,n,s||this.locale,r??this.defaultTimezone??void 0)}catch(o){throw function hm(i,t){return new yi(2100,!1)}()}}}return i.\u0275fac=function(e){return new(e||i)(Xt($v,16),Xt(pq,24))},i.\u0275pipe=du({name:"date",type:i,pure:!0,standalone:!0}),i})(),VN=(()=>{class i{transform(e){return JSON.stringify(e,null,2)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275pipe=du({name:"json",type:i,pure:!1,standalone:!0}),i})(),Os=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({}),i})();const HN="browser";function eD(i){return i===HN}let Eq=(()=>{class i{}return i.\u0275prov=Zi({token:i,providedIn:"root",factory:()=>new Tq(qn(Ku),window)}),i})();class Tq{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function Mq(i,t){const e=i.getElementById(t)||i.getElementsByName(t)[0];if(e)return e;if("function"==typeof i.createTreeWalker&&i.body&&(i.body.createShadowRoot||i.body.attachShadow)){const n=i.createTreeWalker(i.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(o)return o}r=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(n-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=GN(this.window.history)||GN(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function GN(i){return Object.getOwnPropertyDescriptor(i,"scrollRestoration")}class WN{}class tD extends class Dq extends class c${}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function l$(i){NI||(NI=i)}(new tD)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function Lq(){return $w=$w||document.querySelector("base"),$w?$w.getAttribute("href"):null}();return null==e?null:function Pq(i){qI=qI||document.createElement("a"),qI.setAttribute("href",i);const t=qI.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){$w=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return RN(document.cookie,t)}}let qI,$w=null;const jN=new ir("TRANSITION_ID"),kq=[{provide:Vw,useFactory:function Rq(i,t,e){return()=>{e.get(LI).donePromise.then(()=>{const n=Zm(),r=t.querySelectorAll(`style[ng-transition="${i}"]`);for(let s=0;s<r.length;s++)n.remove(r[s])})}},deps:[jN,Ku,Iu],multi:!0}];let Fq=(()=>{class i{build(){return new XMLHttpRequest}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})();const XI=new ir("EventManagerPlugins");let YI=(()=>{class i{constructor(e,n){this._zone=n,this._eventNameToPlugin=new Map,e.forEach(r=>r.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,n,r){return this._findPluginFor(n).addEventListener(e,n,r)}addGlobalEventListener(e,n,r){return this._findPluginFor(n).addGlobalEventListener(e,n,r)}getZone(){return this._zone}_findPluginFor(e){const n=this._eventNameToPlugin.get(e);if(n)return n;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(e))return this._eventNameToPlugin.set(e,o),o}throw new Error(`No event manager plugin found for event ${e}`)}}return i.\u0275fac=function(e){return new(e||i)(qn(XI),qn(Vo))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})();class $N{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=Zm().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let qN=(()=>{class i{constructor(){this._stylesSet=new Set}addStyles(e){const n=new Set;e.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),n.add(r))}),this.onStylesAdded(n)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})(),qw=(()=>{class i extends qN{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,n,r){e.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,r.push(n.appendChild(o))})}addHost(e){const n=[];this._addStylesToHost(this._stylesSet,e,n),this._hostNodes.set(e,n)}removeHost(e){const n=this._hostNodes.get(e);n&&n.forEach(XN),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((n,r)=>{this._addStylesToHost(e,r,n)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(XN))}}return i.\u0275fac=function(e){return new(e||i)(qn(Ku))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})();function XN(i){Zm().remove(i)}const nD={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},iD=/%COMP%/g;function KI(i,t,e){for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?KI(i,r,e):(r=r.replace(iD,i),e.push(r))}return e}function ZN(i){return t=>{if("__ngUnwrap__"===t)return i;!1===i(t)&&(t.preventDefault(),t.returnValue=!1)}}let ZI=(()=>{class i{constructor(e,n,r){this.eventManager=e,this.sharedStylesHost=n,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new rD(e)}createRenderer(e,n){if(!e||!n)return this.defaultRenderer;switch(n.encapsulation){case Ma.Emulated:{let r=this.rendererByCompId.get(n.id);return r||(r=new Hq(this.eventManager,this.sharedStylesHost,n,this.appId),this.rendererByCompId.set(n.id,r)),r.applyToHost(e),r}case 1:case Ma.ShadowDom:return new Gq(this.eventManager,this.sharedStylesHost,e,n);default:if(!this.rendererByCompId.has(n.id)){const r=KI(n.id,n.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(n.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return i.\u0275fac=function(e){return new(e||i)(qn(YI),qn(qw),qn(Uw))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})();class rD{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(nD[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){(JN(t)?t.content:t).appendChild(e)}insertBefore(t,e,n){t&&(JN(t)?t.content:t).insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const s=nD[r];s?t.setAttributeNS(s,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=nD[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&(Vi.DashCase|Vi.Important)?t.style.setProperty(e,n,r&Vi.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&Vi.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,ZN(n)):this.eventManager.addEventListener(t,e,ZN(n))}}function JN(i){return"TEMPLATE"===i.tagName&&void 0!==i.content}class Hq extends rD{constructor(t,e,n,r){super(t),this.component=n;const s=KI(r+"-"+n.id,n.styles,[]);e.addStyles(s),this.contentAttr=function zq(i){return"_ngcontent-%COMP%".replace(iD,i)}(r+"-"+n.id),this.hostAttr=function Vq(i){return"_nghost-%COMP%".replace(iD,i)}(r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class Gq extends rD{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=KI(r.id,r.styles,[]);for(let o=0;o<s.length;o++){const l=document.createElement("style");l.textContent=s[o],this.shadowRoot.appendChild(l)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Wq=(()=>{class i extends $N{constructor(e){super(e)}supports(e){return!0}addEventListener(e,n,r){return e.addEventListener(n,r,!1),()=>this.removeEventListener(e,n,r)}removeEventListener(e,n,r){return e.removeEventListener(n,r)}}return i.\u0275fac=function(e){return new(e||i)(qn(Ku))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})();const e3=["alt","control","meta","shift"],$q={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},t3={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},qq={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey};let Xq=(()=>{class i extends $N{constructor(e){super(e)}supports(e){return null!=i.parseEventName(e)}addEventListener(e,n,r){const s=i.parseEventName(n),o=i.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Zm().onAndCancel(e,s.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const s=i._normalizeKey(n.pop());let o="";if(e3.forEach(u=>{const p=n.indexOf(u);p>-1&&(n.splice(p,1),o+=u+".")}),o+=s,0!=n.length||0===s.length)return null;const l={};return l.domEventName=r,l.fullKey=o,l}static getEventFullKey(e){let n="",r=function Yq(i){let t=i.key;if(null==t){if(t=i.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===i.location&&t3.hasOwnProperty(t)&&(t=t3[t]))}return $q[t]||t}(e);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),e3.forEach(s=>{s!=r&&(0,qq[s])(e)&&(n+=s+".")}),n+=r,n}static eventCallback(e,n,r){return s=>{i.getEventFullKey(s)===e&&r.runGuarded(()=>n(s))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return i.\u0275fac=function(e){return new(e||i)(qn(Ku))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})();const Jq=eN(s$,"browser",[{provide:Yb,useValue:HN},{provide:GF,useValue:function Kq(){tD.makeCurrent()},multi:!0},{provide:Ku,useFactory:function Qq(){return function ng(i){yh=i}(document),document},deps:[]}]),r3=new ir(""),s3=[{provide:PI,useClass:class Oq{addToWindow(t){so.getAngularTestability=(n,r=!0)=>{const s=t.findTestabilityInTree(n,r);if(null==s)throw new Error("Could not find testability for element.");return s},so.getAllAngularTestabilities=()=>t.getAllTestabilities(),so.getAllAngularRootElements=()=>t.getAllRootElements(),so.frameworkStabilizers||(so.frameworkStabilizers=[]),so.frameworkStabilizers.push(n=>{const r=so.getAllAngularTestabilities();let s=r.length,o=!1;const l=function(u){o=o||u,s--,0==s&&n(o)};r.forEach(function(u){u.whenStable(l)})})}findTestabilityInTree(t,e,n){return null==e?null:t.getTestability(e)??(n?Zm().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:KF,useClass:MM,deps:[Vo,DM,PI]},{provide:MM,useClass:MM,deps:[Vo,DM,PI]}],o3=[{provide:Ve,useValue:"root"},{provide:ut,useFactory:function Zq(){return new ut},deps:[]},{provide:XI,useClass:Wq,multi:!0,deps:[Ku,Vo,Yb]},{provide:XI,useClass:Xq,multi:!0,deps:[Ku]},{provide:ZI,useClass:ZI,deps:[YI,qw,Uw]},{provide:c,useExisting:ZI},{provide:qN,useExisting:qw},{provide:qw,useClass:qw,deps:[Ku]},{provide:YI,useClass:YI,deps:[XI,Vo]},{provide:WN,useClass:Fq,deps:[]},[]];let a3=(()=>{class i{constructor(e){}static withServerTransition(e){return{ngModule:i,providers:[{provide:Uw,useValue:e.appId},{provide:jN,useExisting:Uw},kq]}}}return i.\u0275fac=function(e){return new(e||i)(qn(r3,12))},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({providers:[...o3,...s3],imports:[Os,o$]}),i})(),oD=(()=>{class i{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return i.\u0275fac=function(e){return new(e||i)(qn(Ku))},i.\u0275prov=Zi({token:i,factory:function(e){let n=null;return n=e?new e:function tX(){return new oD(qn(Ku))}(),n},providedIn:"root"}),i})();typeof window<"u"&&window;let u3=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zi({token:i,factory:function(e){let n=null;return n=e?new(e||i):qn(h3),n},providedIn:"root"}),i})(),h3=(()=>{class i extends u3{constructor(e){super(),this._doc=e}sanitize(e,n){if(null==n)return null;switch(e){case pa.NONE:return n;case pa.HTML:return ca(n,"HTML")?bl(n):Bv(this._doc,String(n)).toString();case pa.STYLE:return ca(n,"Style")?bl(n):n;case pa.SCRIPT:if(ca(n,"Script"))return bl(n);throw new Error("unsafe value used in a script context");case pa.URL:return ca(n,"URL")?bl(n):lg(String(n));case pa.RESOURCE_URL:if(ca(n,"ResourceURL"))return bl(n);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return function rg(i){return new md(i)}(e)}bypassSecurityTrustStyle(e){return function jh(i){return new _p(i)}(e)}bypassSecurityTrustScript(e){return function $h(i){return new Hm(i)}(e)}bypassSecurityTrustUrl(e){return function vd(i){return new $_(i)}(e)}bypassSecurityTrustResourceUrl(e){return function ef(i){return new nm(i)}(e)}}return i.\u0275fac=function(e){return new(e||i)(qn(Ku))},i.\u0275prov=Zi({token:i,factory:function(e){let n=null;return n=e?new e:function lX(i){return new h3(i.get(Ku))}(qn(Iu)),n},providedIn:"root"}),i})();function $r(...i){return ur(i,ge(i))}function Zv(i,t){return X(t)?gl(i,t,1):gl(i,1)}function gg(i,t){return Lt((e,n)=>{let r=0;e.subscribe(Ut(n,s=>i.call(t,s,r++)&&n.next(s)))})}class d3{}class QI{}class Qm{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const n=e.indexOf(":");if(n>0){const r=e.slice(0,n),s=r.toLowerCase(),o=e.slice(n+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Qm?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Qm;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Qm?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const s=t.value;if(s){let o=this.headers.get(e);if(!o)return;o=o.filter(l=>-1===s.indexOf(l)),0===o.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class cX{encodeKey(t){return f3(t)}encodeValue(t){return f3(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const hX=/%(\d[a-f0-9])/gi,dX={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function f3(i){return encodeURIComponent(i).replace(hX,(t,e)=>dX[e]??t)}function JI(i){return`${i}`}class Qv{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new cX,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function uX(i,t){const e=new Map;return i.length>0&&i.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,l]=-1==s?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,s)),t.decodeValue(r.slice(s+1))],u=e.get(o)||[];u.push(l),e.set(o,u)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e],r=Array.isArray(n)?n.map(JI):[JI(n)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(n=>{const r=t[n];Array.isArray(r)?r.forEach(s=>{e.push({param:n,value:s,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(n=>e+"="+this.encoder.encodeValue(n)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Qv({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(JI(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let n=this.map.get(t.param)||[];const r=n.indexOf(JI(t.value));-1!==r&&n.splice(r,1),n.length>0?this.map.set(t.param,n):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class fX{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function p3(i){return typeof ArrayBuffer<"u"&&i instanceof ArrayBuffer}function g3(i){return typeof Blob<"u"&&i instanceof Blob}function m3(i){return typeof FormData<"u"&&i instanceof FormData}class p0{constructor(t,e,n,r){let s;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function pX(i){switch(i){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,s=r):s=n,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Qm),this.context||(this.context=new fX),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=e;else{const l=e.indexOf("?");this.urlWithParams=e+(-1===l?"?":l<e.length-1?"&":"")+o}}else this.params=new Qv,this.urlWithParams=e}serializeBody(){return null===this.body?null:p3(this.body)||g3(this.body)||m3(this.body)||function gX(i){return typeof URLSearchParams<"u"&&i instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Qv?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||m3(this.body)?null:g3(this.body)?this.body.type||null:p3(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Qv?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,s=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,l=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let u=t.headers||this.headers,p=t.params||this.params;const v=t.context??this.context;return void 0!==t.setHeaders&&(u=Object.keys(t.setHeaders).reduce((w,I)=>w.set(I,t.setHeaders[I]),u)),t.setParams&&(p=Object.keys(t.setParams).reduce((w,I)=>w.set(I,t.setParams[I]),p)),new p0(e,n,s,{params:p,headers:u,context:v,reportProgress:l,responseType:r,withCredentials:o})}}var bc=(()=>((bc=bc||{})[bc.Sent=0]="Sent",bc[bc.UploadProgress=1]="UploadProgress",bc[bc.ResponseHeader=2]="ResponseHeader",bc[bc.DownloadProgress=3]="DownloadProgress",bc[bc.Response=4]="Response",bc[bc.User=5]="User",bc))();class lD{constructor(t,e=200,n="OK"){this.headers=t.headers||new Qm,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class cD extends lD{constructor(t={}){super(t),this.type=bc.ResponseHeader}clone(t={}){return new cD({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Kb extends lD{constructor(t={}){super(t),this.type=bc.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new Kb({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class v3 extends lD{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function uD(i,t){return{body:t,headers:i.headers,context:i.context,observe:i.observe,params:i.params,reportProgress:i.reportProgress,responseType:i.responseType,withCredentials:i.withCredentials}}let hD=(()=>{class i{constructor(e){this.handler=e}request(e,n,r={}){let s;if(e instanceof p0)s=e;else{let u,p;u=r.headers instanceof Qm?r.headers:new Qm(r.headers),r.params&&(p=r.params instanceof Qv?r.params:new Qv({fromObject:r.params})),s=new p0(e,n,void 0!==r.body?r.body:null,{headers:u,context:r.context,params:p,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const o=$r(s).pipe(Zv(u=>this.handler.handle(u)));if(e instanceof p0||"events"===r.observe)return o;const l=o.pipe(gg(u=>u instanceof Kb));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return l.pipe(fe(u=>{if(null!==u.body&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return l.pipe(fe(u=>{if(null!==u.body&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return l.pipe(fe(u=>{if(null!==u.body&&"string"!=typeof u.body)throw new Error("Response is not a string.");return u.body}));default:return l.pipe(fe(u=>u.body))}case"response":return l;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,n={}){return this.request("DELETE",e,n)}get(e,n={}){return this.request("GET",e,n)}head(e,n={}){return this.request("HEAD",e,n)}jsonp(e,n){return this.request("JSONP",e,{params:(new Qv).append(n,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,n={}){return this.request("OPTIONS",e,n)}patch(e,n,r={}){return this.request("PATCH",e,uD(r,n))}post(e,n,r={}){return this.request("POST",e,uD(r,n))}put(e,n,r={}){return this.request("PUT",e,uD(r,n))}}return i.\u0275fac=function(e){return new(e||i)(qn(d3))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})();class y3{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const _3=new ir("HTTP_INTERCEPTORS");let mX=(()=>{class i{intercept(e,n){return n.handle(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})();const vX=/^\)\]\}',?\n/;let b3=(()=>{class i{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new vt(n=>{const r=this.xhrFactory.build();if(r.open(e.method,e.urlWithParams),e.withCredentials&&(r.withCredentials=!0),e.headers.forEach((T,k)=>r.setRequestHeader(T,k.join(","))),e.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const T=e.detectContentTypeHeader();null!==T&&r.setRequestHeader("Content-Type",T)}if(e.responseType){const T=e.responseType.toLowerCase();r.responseType="json"!==T?T:"text"}const s=e.serializeBody();let o=null;const l=()=>{if(null!==o)return o;const T=r.statusText||"OK",k=new Qm(r.getAllResponseHeaders()),G=function yX(i){return"responseURL"in i&&i.responseURL?i.responseURL:/^X-Request-URL:/m.test(i.getAllResponseHeaders())?i.getResponseHeader("X-Request-URL"):null}(r)||e.url;return o=new cD({headers:k,status:r.status,statusText:T,url:G}),o},u=()=>{let{headers:T,status:k,statusText:G,url:Y}=l(),ce=null;204!==k&&(ce=typeof r.response>"u"?r.responseText:r.response),0===k&&(k=ce?200:0);let Se=k>=200&&k<300;if("json"===e.responseType&&"string"==typeof ce){const Ae=ce;ce=ce.replace(vX,"");try{ce=""!==ce?JSON.parse(ce):null}catch(Te){ce=Ae,Se&&(Se=!1,ce={error:Te,text:ce})}}Se?(n.next(new Kb({body:ce,headers:T,status:k,statusText:G,url:Y||void 0})),n.complete()):n.error(new v3({error:ce,headers:T,status:k,statusText:G,url:Y||void 0}))},p=T=>{const{url:k}=l(),G=new v3({error:T,status:r.status||0,statusText:r.statusText||"Unknown Error",url:k||void 0});n.error(G)};let v=!1;const w=T=>{v||(n.next(l()),v=!0);let k={type:bc.DownloadProgress,loaded:T.loaded};T.lengthComputable&&(k.total=T.total),"text"===e.responseType&&!!r.responseText&&(k.partialText=r.responseText),n.next(k)},I=T=>{let k={type:bc.UploadProgress,loaded:T.loaded};T.lengthComputable&&(k.total=T.total),n.next(k)};return r.addEventListener("load",u),r.addEventListener("error",p),r.addEventListener("timeout",p),r.addEventListener("abort",p),e.reportProgress&&(r.addEventListener("progress",w),null!==s&&r.upload&&r.upload.addEventListener("progress",I)),r.send(s),n.next({type:bc.Sent}),()=>{r.removeEventListener("error",p),r.removeEventListener("abort",p),r.removeEventListener("load",u),r.removeEventListener("timeout",p),e.reportProgress&&(r.removeEventListener("progress",w),null!==s&&r.upload&&r.upload.removeEventListener("progress",I)),r.readyState!==r.DONE&&r.abort()}})}}return i.\u0275fac=function(e){return new(e||i)(qn(WN))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})();const dD=new ir("XSRF_COOKIE_NAME"),fD=new ir("XSRF_HEADER_NAME");class C3{}let _X=(()=>{class i{constructor(e,n,r){this.doc=e,this.platform=n,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=RN(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return i.\u0275fac=function(e){return new(e||i)(qn(Ku),qn(Yb),qn(dD))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})(),pD=(()=>{class i{constructor(e,n){this.tokenService=e,this.headerName=n}intercept(e,n){const r=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||r.startsWith("http://")||r.startsWith("https://"))return n.handle(e);const s=this.tokenService.getToken();return null!==s&&!e.headers.has(this.headerName)&&(e=e.clone({headers:e.headers.set(this.headerName,s)})),n.handle(e)}}return i.\u0275fac=function(e){return new(e||i)(qn(C3),qn(fD))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})(),bX=(()=>{class i{constructor(e,n){this.backend=e,this.injector=n,this.chain=null}handle(e){if(null===this.chain){const n=this.injector.get(_3,[]);this.chain=n.reduceRight((r,s)=>new y3(r,s),this.backend)}return this.chain.handle(e)}}return i.\u0275fac=function(e){return new(e||i)(qn(QI),qn(Iu))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})(),CX=(()=>{class i{static disable(){return{ngModule:i,providers:[{provide:pD,useClass:mX}]}}static withOptions(e={}){return{ngModule:i,providers:[e.cookieName?{provide:dD,useValue:e.cookieName}:[],e.headerName?{provide:fD,useValue:e.headerName}:[]]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({providers:[pD,{provide:_3,useExisting:pD,multi:!0},{provide:C3,useClass:_X},{provide:dD,useValue:"XSRF-TOKEN"},{provide:fD,useValue:"X-XSRF-TOKEN"}]}),i})(),w3=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({providers:[hD,{provide:d3,useClass:bX},b3,{provide:QI,useExisting:b3}],imports:[CX.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),i})();class Vf extends Ge{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:n}=this;if(t)throw e;return this._throwIfClosed(),n}next(t){super.next(this._value=t)}}const e1=D(i=>function(){i(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:wX}=Array,{getPrototypeOf:AX,prototype:xX,keys:IX}=Object;function A3(i){if(1===i.length){const t=i[0];if(wX(t))return{args:t,keys:null};if(function SX(i){return i&&"object"==typeof i&&AX(i)===xX}(t)){const e=IX(t);return{args:e.map(n=>t[n]),keys:e}}}return{args:i,keys:null}}const{isArray:EX}=Array;function x3(i){return fe(t=>function TX(i,t){return EX(t)?i(...t):i(t)}(i,t))}function I3(i,t){return i.reduce((e,n,r)=>(e[n]=t[r],e),{})}function S3(...i){const t=ge(i),e=st(i),{args:n,keys:r}=A3(i);if(0===n.length)return ur([],t);const s=new vt(function MX(i,t,e=Fe){return n=>{E3(t,()=>{const{length:r}=i,s=new Array(r);let o=r,l=r;for(let u=0;u<r;u++)E3(t,()=>{const p=ur(i[u],t);let v=!1;p.subscribe(Ut(n,w=>{s[u]=w,v||(v=!0,l--),l||n.next(e(s.slice()))},()=>{--o||n.complete()}))},n)},n)}}(n,t,r?o=>I3(r,o):Fe));return e?s.pipe(x3(e)):s}function E3(i,t,e){i?io(e,i,t):t()}function gD(...i){return function DX(){return Ic(1)}()(ur(i,ge(i)))}function T3(i){return new vt(t=>{pl(i()).subscribe(t)})}function Zb(i,t){const e=X(i)?i:()=>i,n=r=>r.error(e());return new vt(t?r=>t.schedule(n,0,r):n)}function mD(){return Lt((i,t)=>{let e=null;i._refCount++;const n=Ut(t,void 0,void 0,void 0,()=>{if(!i||i._refCount<=0||0<--i._refCount)return void(e=null);const r=i._connection,s=e;e=null,r&&(!s||r===s)&&r.unsubscribe(),t.unsubscribe()});i.subscribe(n),n.closed||(e=i.connect())})}class M3 extends vt{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,At(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new H;const e=this.getSubject();t.add(this.source.subscribe(Ut(e,void 0,()=>{this._teardown(),e.complete()},n=>{this._teardown(),e.error(n)},()=>this._teardown()))),t.closed&&(this._connection=null,t=H.EMPTY)}return t}refCount(){return mD()(this)}}function dm(i,t){return Lt((e,n)=>{let r=null,s=0,o=!1;const l=()=>o&&!r&&n.complete();e.subscribe(Ut(n,u=>{r?.unsubscribe();let p=0;const v=s++;pl(i(u,v)).subscribe(r=Ut(n,w=>n.next(t?t(u,w,v,p++):w),()=>{r=null,l()}))},()=>{o=!0,l()}))})}function Qb(i){return i<=0?()=>rl:Lt((t,e)=>{let n=0;t.subscribe(Ut(e,r=>{++n<=i&&(e.next(r),i<=n&&e.complete())}))})}function t1(i){return Lt((t,e)=>{let n=!1;t.subscribe(Ut(e,r=>{n=!0,e.next(r)},()=>{n||e.next(i),e.complete()}))})}function D3(i=PX){return Lt((t,e)=>{let n=!1;t.subscribe(Ut(e,r=>{n=!0,e.next(r)},()=>n?e.complete():e.error(i())))})}function PX(){return new e1}function n_(i,t){const e=arguments.length>=2;return n=>n.pipe(i?gg((r,s)=>i(r,s,n)):Fe,Qb(1),e?t1(t):D3(()=>new e1))}function xd(i,t,e){const n=X(i)||t||e?{next:i,error:t,complete:e}:i;return n?Lt((r,s)=>{var o;null===(o=n.subscribe)||void 0===o||o.call(n);let l=!0;r.subscribe(Ut(s,u=>{var p;null===(p=n.next)||void 0===p||p.call(n,u),s.next(u)},()=>{var u;l=!1,null===(u=n.complete)||void 0===u||u.call(n),s.complete()},u=>{var p;l=!1,null===(p=n.error)||void 0===p||p.call(n,u),s.error(u)},()=>{var u,p;l&&(null===(u=n.unsubscribe)||void 0===u||u.call(n)),null===(p=n.finalize)||void 0===p||p.call(n)}))}):Fe}function Jm(i){return Lt((t,e)=>{let s,n=null,r=!1;n=t.subscribe(Ut(e,void 0,void 0,o=>{s=pl(i(o,Jm(i)(t))),n?(n.unsubscribe(),n=null,s.subscribe(e)):r=!0})),r&&(n.unsubscribe(),n=null,s.subscribe(e))})}function RX(i,t,e,n,r){return(s,o)=>{let l=e,u=t,p=0;s.subscribe(Ut(o,v=>{const w=p++;u=l?i(u,v,w):(l=!0,v),n&&o.next(u)},r&&(()=>{l&&o.next(u),o.complete()})))}}function vD(i,t){return Lt(RX(i,t,arguments.length>=2,!0))}function yD(i){return i<=0?()=>rl:Lt((t,e)=>{let n=[];t.subscribe(Ut(e,r=>{n.push(r),i<n.length&&n.shift()},()=>{for(const r of n)e.next(r);e.complete()},void 0,()=>{n=null}))})}function L3(i,t){const e=arguments.length>=2;return n=>n.pipe(i?gg((r,s)=>i(r,s,n)):Fe,yD(1),e?t1(t):D3(()=>new e1))}function _D(i){return Lt((t,e)=>{try{t.subscribe(e)}finally{e.add(i)}})}const Ro="primary";class FX{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Jb(i){return new FX(i)}function NX(i,t,e){const n=e.path.split("/");if(n.length>i.length||"full"===e.pathMatch&&(t.hasChildren()||n.length<i.length))return null;const r={};for(let s=0;s<n.length;s++){const o=n[s],l=i[s];if(o.startsWith(":"))r[o.substring(1)]=l;else if(o!==l.path)return null}return{consumed:i.slice(0,n.length),posParams:r}}function ev(i,t){const e=i?Object.keys(i):void 0,n=t?Object.keys(t):void 0;if(!e||!n||e.length!=n.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!P3(i[r],t[r]))return!1;return!0}function P3(i,t){if(Array.isArray(i)&&Array.isArray(t)){if(i.length!==t.length)return!1;const e=[...i].sort(),n=[...t].sort();return e.every((r,s)=>n[s]===r)}return i===t}function R3(i){return Array.prototype.concat.apply([],i)}function k3(i){return i.length>0?i[i.length-1]:null}function Zh(i,t){for(const e in i)i.hasOwnProperty(e)&&t(i[e],e)}function Jv(i){return tM(i)?i:Lw(i)?ur(Promise.resolve(i)):$r(i)}const VX={exact:function N3(i,t,e){if(!m0(i.segments,t.segments)||!n1(i.segments,t.segments,e)||i.numberOfChildren!==t.numberOfChildren)return!1;for(const n in t.children)if(!i.children[n]||!N3(i.children[n],t.children[n],e))return!1;return!0},subset:B3},O3={exact:function UX(i,t){return ev(i,t)},subset:function HX(i,t){return Object.keys(t).length<=Object.keys(i).length&&Object.keys(t).every(e=>P3(i[e],t[e]))},ignored:()=>!0};function F3(i,t,e){return VX[e.paths](i.root,t.root,e.matrixParams)&&O3[e.queryParams](i.queryParams,t.queryParams)&&!("exact"===e.fragment&&i.fragment!==t.fragment)}function B3(i,t,e){return z3(i,t,t.segments,e)}function z3(i,t,e,n){if(i.segments.length>e.length){const r=i.segments.slice(0,e.length);return!(!m0(r,e)||t.hasChildren()||!n1(r,e,n))}if(i.segments.length===e.length){if(!m0(i.segments,e)||!n1(i.segments,e,n))return!1;for(const r in t.children)if(!i.children[r]||!B3(i.children[r],t.children[r],n))return!1;return!0}{const r=e.slice(0,i.segments.length),s=e.slice(i.segments.length);return!!(m0(i.segments,r)&&n1(i.segments,r,n)&&i.children[Ro])&&z3(i.children[Ro],t,s,n)}}function n1(i,t,e){return t.every((n,r)=>O3[e](i[r].parameters,n.parameters))}class g0{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Jb(this.queryParams)),this._queryParamMap}toString(){return jX.serialize(this)}}class Uo{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Zh(e,(n,r)=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return r1(this)}}class Xw{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Jb(this.parameters)),this._parameterMap}toString(){return G3(this)}}function m0(i,t){return i.length===t.length&&i.every((e,n)=>e.path===t[n].path)}let V3=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zi({token:i,factory:function(){return new CD},providedIn:"root"}),i})();class CD{parse(t){const e=new eY(t);return new g0(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${Yw(t.root,!0)}`,n=function XX(i){const t=Object.keys(i).map(e=>{const n=i[e];return Array.isArray(n)?n.map(r=>`${s1(e)}=${s1(r)}`).join("&"):`${s1(e)}=${s1(n)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${n}${"string"==typeof t.fragment?`#${function $X(i){return encodeURI(i)}(t.fragment)}`:""}`}}const jX=new CD;function r1(i){return i.segments.map(t=>G3(t)).join("/")}function Yw(i,t){if(!i.hasChildren())return r1(i);if(t){const e=i.children[Ro]?Yw(i.children[Ro],!1):"",n=[];return Zh(i.children,(r,s)=>{s!==Ro&&n.push(`${s}:${Yw(r,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function WX(i,t){let e=[];return Zh(i.children,(n,r)=>{r===Ro&&(e=e.concat(t(n,r)))}),Zh(i.children,(n,r)=>{r!==Ro&&(e=e.concat(t(n,r)))}),e}(i,(n,r)=>r===Ro?[Yw(i.children[Ro],!1)]:[`${r}:${Yw(n,!1)}`]);return 1===Object.keys(i.children).length&&null!=i.children[Ro]?`${r1(i)}/${e[0]}`:`${r1(i)}/(${e.join("//")})`}}function U3(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function s1(i){return U3(i).replace(/%3B/gi,";")}function wD(i){return U3(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function o1(i){return decodeURIComponent(i)}function H3(i){return o1(i.replace(/\+/g,"%20"))}function G3(i){return`${wD(i.path)}${function qX(i){return Object.keys(i).map(t=>`;${wD(t)}=${wD(i[t])}`).join("")}(i.parameters)}`}const YX=/^[^\/()?;=#]+/;function a1(i){const t=i.match(YX);return t?t[0]:""}const KX=/^[^=?&#]+/,QX=/^[^&#]+/;class eY{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Uo([],{}):new Uo([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n[Ro]=new Uo(t,e)),n}parseSegment(){const t=a1(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new yi(4009,!1);return this.capture(t),new Xw(o1(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=a1(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const r=a1(this.remaining);r&&(n=r,this.capture(n))}t[o1(e)]=o1(n)}parseQueryParam(t){const e=function ZX(i){const t=i.match(KX);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const o=function JX(i){const t=i.match(QX);return t?t[0]:""}(this.remaining);o&&(n=o,this.capture(n))}const r=H3(e),s=H3(n);if(t.hasOwnProperty(r)){let o=t[r];Array.isArray(o)||(o=[o],t[r]=o),o.push(s)}else t[r]=s}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=a1(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new yi(4010,!1);let s;n.indexOf(":")>-1?(s=n.slice(0,n.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=Ro);const o=this.parseChildren();e[s]=1===Object.keys(o).length?o[Ro]:new Uo([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new yi(4011,!1)}}function AD(i){return i.segments.length>0?new Uo([],{[Ro]:i}):i}function l1(i){const t={};for(const n of Object.keys(i.children)){const s=l1(i.children[n]);(s.segments.length>0||s.hasChildren())&&(t[n]=s)}return function tY(i){if(1===i.numberOfChildren&&i.children[Ro]){const t=i.children[Ro];return new Uo(i.segments.concat(t.segments),t.children)}return i}(new Uo(i.segments,t))}function v0(i){return i instanceof g0}function rY(i,t,e,n,r){if(0===e.length)return eC(t.root,t.root,t.root,n,r);const s=function $3(i){if("string"==typeof i[0]&&1===i.length&&"/"===i[0])return new j3(!0,0,i);let t=0,e=!1;const n=i.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const l={};return Zh(s.outlets,(u,p)=>{l[p]="string"==typeof u?u.split("/"):u}),[...r,{outlets:l}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((l,u)=>{0==u&&"."===l||(0==u&&""===l?e=!0:".."===l?t++:""!=l&&r.push(l))}),r):[...r,s]},[]);return new j3(e,t,n)}(e);return s.toRoot()?eC(t.root,t.root,new Uo([],{}),n,r):function o(u){const p=function oY(i,t,e,n){if(i.isAbsolute)return new tC(t.root,!0,0);if(-1===n)return new tC(e,e===t.root,0);return function q3(i,t,e){let n=i,r=t,s=e;for(;s>r;){if(s-=r,n=n.parent,!n)throw new yi(4005,!1);r=n.segments.length}return new tC(n,!1,r-s)}(e,n+(Kw(i.commands[0])?0:1),i.numberOfDoubleDots)}(s,t,i.snapshot?._urlSegment,u),v=p.processChildren?Qw(p.segmentGroup,p.index,s.commands):ID(p.segmentGroup,p.index,s.commands);return eC(t.root,p.segmentGroup,v,n,r)}(i.snapshot?._lastPathIndex)}function Kw(i){return"object"==typeof i&&null!=i&&!i.outlets&&!i.segmentPath}function Zw(i){return"object"==typeof i&&null!=i&&i.outlets}function eC(i,t,e,n,r){let o,s={};n&&Zh(n,(u,p)=>{s[p]=Array.isArray(u)?u.map(v=>`${v}`):`${u}`}),o=i===t?e:W3(i,t,e);const l=AD(l1(o));return new g0(l,s,r)}function W3(i,t,e){const n={};return Zh(i.children,(r,s)=>{n[s]=r===t?e:W3(r,t,e)}),new Uo(i.segments,n)}class j3{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Kw(n[0]))throw new yi(4003,!1);const r=n.find(Zw);if(r&&r!==k3(n))throw new yi(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class tC{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function ID(i,t,e){if(i||(i=new Uo([],{})),0===i.segments.length&&i.hasChildren())return Qw(i,t,e);const n=function lY(i,t,e){let n=0,r=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<i.segments.length;){if(n>=e.length)return s;const o=i.segments[r],l=e[n];if(Zw(l))break;const u=`${l}`,p=n<e.length-1?e[n+1]:null;if(r>0&&void 0===u)break;if(u&&p&&"object"==typeof p&&void 0===p.outlets){if(!Y3(u,p,o))return s;n+=2}else{if(!Y3(u,{},o))return s;n++}r++}return{match:!0,pathIndex:r,commandIndex:n}}(i,t,e),r=e.slice(n.commandIndex);if(n.match&&n.pathIndex<i.segments.length){const s=new Uo(i.segments.slice(0,n.pathIndex),{});return s.children[Ro]=new Uo(i.segments.slice(n.pathIndex),i.children),Qw(s,0,r)}return n.match&&0===r.length?new Uo(i.segments,{}):n.match&&!i.hasChildren()?SD(i,t,e):n.match?Qw(i,0,r):SD(i,t,e)}function Qw(i,t,e){if(0===e.length)return new Uo(i.segments,{});{const n=function aY(i){return Zw(i[0])?i[0].outlets:{[Ro]:i}}(e),r={};return Zh(n,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=ID(i.children[o],t,s))}),Zh(i.children,(s,o)=>{void 0===n[o]&&(r[o]=s)}),new Uo(i.segments,r)}}function SD(i,t,e){const n=i.segments.slice(0,t);let r=0;for(;r<e.length;){const s=e[r];if(Zw(s)){const u=cY(s.outlets);return new Uo(n,u)}if(0===r&&Kw(e[0])){n.push(new Xw(i.segments[t].path,X3(e[0]))),r++;continue}const o=Zw(s)?s.outlets[Ro]:`${s}`,l=r<e.length-1?e[r+1]:null;o&&l&&Kw(l)?(n.push(new Xw(o,X3(l))),r+=2):(n.push(new Xw(o,{})),r++)}return new Uo(n,{})}function cY(i){const t={};return Zh(i,(e,n)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[n]=SD(new Uo([],{}),0,e))}),t}function X3(i){const t={};return Zh(i,(e,n)=>t[n]=`${e}`),t}function Y3(i,t,e){return i==e.path&&ev(t,e.parameters)}class ey{constructor(t,e){this.id=t,this.url=e}}class ED extends ey{constructor(t,e,n="imperative",r=null){super(t,e),this.type=0,this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class y0 extends ey{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class c1 extends ey{constructor(t,e,n,r){super(t,e),this.reason=n,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class K3 extends ey{constructor(t,e,n,r){super(t,e),this.error=n,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class uY extends ey{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hY extends ey{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class dY extends ey{constructor(t,e,n,r,s){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class fY extends ey{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pY extends ey{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gY{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class mY{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class vY{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yY{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _Y{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bY{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Z3{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Q3{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=TD(t,this._root);return e?e.children.map(n=>n.value):[]}firstChild(t){const e=TD(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=MD(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return MD(t,this._root).map(e=>e.value)}}function TD(i,t){if(i===t.value)return t;for(const e of t.children){const n=TD(i,e);if(n)return n}return null}function MD(i,t){if(i===t.value)return[t];for(const e of t.children){const n=MD(i,e);if(n.length)return n.unshift(t),n}return[]}class ty{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function nC(i){const t={};return i&&i.children.forEach(e=>t[e.value.outlet]=e),t}class J3 extends Q3{constructor(t,e){super(t),this.snapshot=e,DD(this,t)}toString(){return this.snapshot.toString()}}function eB(i,t){const e=function wY(i,t){const o=new u1([],{},{},"",{},Ro,t,null,i.root,-1,{});return new nB("",new ty(o,[]))}(i,t),n=new Vf([new Xw("",{})]),r=new Vf({}),s=new Vf({}),o=new Vf({}),l=new Vf(""),u=new i_(n,r,o,l,s,Ro,t,e.root);return u.snapshot=e.root,new J3(new ty(u,[]),e)}class i_{constructor(t,e,n,r,s,o,l,u){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=o,this.component=l,this._futureSnapshot=u}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(fe(t=>Jb(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(fe(t=>Jb(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function tB(i,t="emptyOnly"){const e=i.pathFromRoot;let n=0;if("always"!==t)for(n=e.length-1;n>=1;){const r=e[n],s=e[n-1];if(r.routeConfig&&""===r.routeConfig.path)n--;else{if(s.component)break;n--}}return function AY(i){return i.reduce((t,e)=>({params:{...t.params,...e.params},data:{...t.data,...e.data},resolve:{...e.data,...t.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(n))}class u1{constructor(t,e,n,r,s,o,l,u,p,v,w,I){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=o,this.component=l,this.routeConfig=u,this._urlSegment=p,this._lastPathIndex=v,this._correctedLastPathIndex=I??v,this._resolve=w}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Jb(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Jb(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(n=>n.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class nB extends Q3{constructor(t,e){super(e),this.url=t,DD(this,e)}toString(){return iB(this._root)}}function DD(i,t){t.value._routerState=i,t.children.forEach(e=>DD(i,e))}function iB(i){const t=i.children.length>0?` { ${i.children.map(iB).join(", ")} } `:"";return`${i.value}${t}`}function LD(i){if(i.snapshot){const t=i.snapshot,e=i._futureSnapshot;i.snapshot=e,ev(t.queryParams,e.queryParams)||i.queryParams.next(e.queryParams),t.fragment!==e.fragment&&i.fragment.next(e.fragment),ev(t.params,e.params)||i.params.next(e.params),function BX(i,t){if(i.length!==t.length)return!1;for(let e=0;e<i.length;++e)if(!ev(i[e],t[e]))return!1;return!0}(t.url,e.url)||i.url.next(e.url),ev(t.data,e.data)||i.data.next(e.data)}else i.snapshot=i._futureSnapshot,i.data.next(i._futureSnapshot.data)}function PD(i,t){const e=ev(i.params,t.params)&&function GX(i,t){return m0(i,t)&&i.every((e,n)=>ev(e.parameters,t[n].parameters))}(i.url,t.url);return e&&!(!i.parent!=!t.parent)&&(!i.parent||PD(i.parent,t.parent))}function Jw(i,t,e){if(e&&i.shouldReuseRoute(t.value,e.value.snapshot)){const n=e.value;n._futureSnapshot=t.value;const r=function IY(i,t,e){return t.children.map(n=>{for(const r of e.children)if(i.shouldReuseRoute(n.value,r.value.snapshot))return Jw(i,n,r);return Jw(i,n)})}(i,t,e);return new ty(n,r)}{if(i.shouldAttach(t.value)){const s=i.retrieve(t.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(l=>Jw(i,l)),o}}const n=function SY(i){return new i_(new Vf(i.url),new Vf(i.params),new Vf(i.queryParams),new Vf(i.fragment),new Vf(i.data),i.outlet,i.component,i)}(t.value),r=t.children.map(s=>Jw(i,s));return new ty(n,r)}}const RD="ngNavigationCancelingError";function rB(i,t){const{redirectTo:e,navigationBehaviorOptions:n}=v0(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=sB(!1,0,t);return r.url=e,r.navigationBehaviorOptions=n,r}function sB(i,t,e){const n=new Error("NavigationCancelingError: "+(i||""));return n[RD]=!0,n.cancellationCode=t,e&&(n.url=e),n}function oB(i){return aB(i)&&v0(i.url)}function aB(i){return i&&i[RD]}class EY{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new eA,this.attachRef=null}}let eA=(()=>{class i{constructor(){this.contexts=new Map}onChildOutletCreated(e,n){const r=this.getOrCreateContext(e);r.outlet=n,this.contexts.set(e,r)}onChildOutletDestroyed(e){const n=this.getContext(e);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let n=this.getContext(e);return n||(n=new EY,this.contexts.set(e,n)),n}getContext(e){return this.contexts.get(e)||null}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const h1=!1;let kD=(()=>{class i{constructor(e,n,r,s,o){this.parentContexts=e,this.location=n,this.changeDetector=s,this.environmentInjector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new Fn,this.deactivateEvents=new Fn,this.attachEvents=new Fn,this.detachEvents=new Fn,this.name=r||Ro,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new yi(4012,h1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new yi(4012,h1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new yi(4012,h1);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,n){this.activated=e,this._activatedRoute=n,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,n){if(this.isActivated)throw new yi(4013,h1);this._activatedRoute=e;const r=this.location,o=e._futureSnapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,u=new TY(e,l,r.injector);if(n&&function MY(i){return!!i.resolveComponentFactory}(n)){const p=n.resolveComponentFactory(o);this.activated=r.createComponent(p,r.length,u)}else this.activated=r.createComponent(o,{index:r.length,injector:u,environmentInjector:n??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return i.\u0275fac=function(e){return new(e||i)(Xt(eA),Xt(dg),ud("name"),Xt(xo),Xt(at))},i.\u0275dir=qr({type:i,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),i})();class TY{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===i_?this.route:t===eA?this.childContexts:this.parent.get(t,e)}}let lB=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=_r({type:i,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,n){1&e&&Bn(0,"router-outlet")},dependencies:[kD],encapsulation:2}),i})();function cB(i,t){return i.providers&&!i._injector&&(i._injector=EI(i.providers,t,`Route: ${i.path}`)),i._injector??t}function FD(i){const t=i.children&&i.children.map(FD),e=t?{...i,children:t}:{...i};return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==Ro&&(e.component=lB),e}function mg(i){return i.outlet||Ro}function uB(i,t){const e=i.filter(n=>mg(n)===t);return e.push(...i.filter(n=>mg(n)!==t)),e}function hB(i){if(!i)return null;if(i.routeConfig?._injector)return i.routeConfig._injector;for(let t=i.parent;t;t=t.parent){const e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class kY{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),LD(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=nC(e);t.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],n),delete r[o]}),Zh(r,(s,o)=>{this.deactivateRouteAndItsChildren(s,n)})}deactivateRoutes(t,e,n){const r=t.value,s=e?e.value:null;if(r===s)if(r.component){const o=n.getContext(r.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,n);else s&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,s=nC(t);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(n&&n.outlet){const o=n.outlet.detach(),l=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:l})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,s=nC(t);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=nC(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],n),this.forwardEvent(new bY(s.value.snapshot))}),t.children.length&&this.forwardEvent(new yY(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,s=e?e.value:null;if(LD(r),r===s)if(r.component){const o=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const o=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const l=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(l.contexts),o.attachRef=l.componentRef,o.route=l.route.value,o.outlet&&o.outlet.attach(l.componentRef,l.route.value),LD(l.route.value),this.activateChildRoutes(t,null,o.children)}else{const l=hB(r.snapshot),u=l?.get(gi)??null;o.attachRef=null,o.route=r,o.resolver=u,o.injector=l,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(t,null,o.children)}}else this.activateChildRoutes(t,null,n)}}class dB{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class d1{constructor(t,e){this.component=t,this.route=e}}function OY(i,t,e){const n=i._root;return tA(n,t?t._root:null,e,[n.value])}function f1(i,t,e){return(hB(t)??e).get(i)}function tA(i,t,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=nC(t);return i.children.forEach(o=>{(function NY(i,t,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=i.value,o=t?t.value:null,l=e?e.getContext(i.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function BY(i,t,e){if("function"==typeof e)return e(i,t);switch(e){case"pathParamsChange":return!m0(i.url,t.url);case"pathParamsOrQueryParamsChange":return!m0(i.url,t.url)||!ev(i.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!PD(i,t)||!ev(i.queryParams,t.queryParams);default:return!PD(i,t)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?r.canActivateChecks.push(new dB(n)):(s.data=o.data,s._resolvedData=o._resolvedData),tA(i,t,s.component?l?l.children:null:e,n,r),u&&l&&l.outlet&&l.outlet.isActivated&&r.canDeactivateChecks.push(new d1(l.outlet.component,o))}else o&&nA(t,l,r),r.canActivateChecks.push(new dB(n)),tA(i,null,s.component?l?l.children:null:e,n,r)})(o,s[o.value.outlet],e,n.concat([o.value]),r),delete s[o.value.outlet]}),Zh(s,(o,l)=>nA(o,e.getContext(l),r)),r}function nA(i,t,e){const n=nC(i),r=i.value;Zh(n,(s,o)=>{nA(s,r.component?t?t.children.getContext(o):null:t,e)}),e.canDeactivateChecks.push(new d1(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}function iA(i){return"function"==typeof i}function ND(i){return i instanceof e1||"EmptyError"===i?.name}const p1=Symbol("INITIAL_VALUE");function iC(){return dm(i=>S3(i.map(t=>t.pipe(Qb(1),function LX(...i){const t=ge(i);return Lt((e,n)=>{(t?gD(i,e,t):gD(i,e)).subscribe(n)})}(p1)))).pipe(fe(t=>{for(const e of t)if(!0!==e){if(e===p1)return p1;if(!1===e||e instanceof g0)return e}return!0}),gg(t=>t!==p1),Qb(1)))}function fB(i){return function Ye(...i){return lt(i)}(xd(t=>{if(v0(t))throw rB(0,t)}),fe(t=>!0===t))}const BD={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function pB(i,t,e,n,r){const s=zD(i,t,e);return s.matched?function tK(i,t,e,n){const r=t.canMatch;return r&&0!==r.length?$r(r.map(o=>{const l=i.get(o),u=function WY(i){return i&&iA(i.canMatch)}(l)?l.canMatch(t,e):l(t,e);return Jv(u)})).pipe(iC(),fB()):$r(!0)}(n=cB(t,n),t,e).pipe(fe(o=>!0===o?s:{...BD})):$r(s)}function zD(i,t,e){if(""===t.path)return"full"===t.pathMatch&&(i.hasChildren()||e.length>0)?{...BD}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const r=(t.matcher||NX)(e,i,t);if(!r)return{...BD};const s={};Zh(r.posParams,(l,u)=>{s[u]=l.path});const o=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function g1(i,t,e,n,r="corrected"){if(e.length>0&&function rK(i,t,e){return e.some(n=>m1(i,t,n)&&mg(n)!==Ro)}(i,e,n)){const o=new Uo(t,function iK(i,t,e,n){const r={};r[Ro]=n,n._sourceSegment=i,n._segmentIndexShift=t.length;for(const s of e)if(""===s.path&&mg(s)!==Ro){const o=new Uo([],{});o._sourceSegment=i,o._segmentIndexShift=t.length,r[mg(s)]=o}return r}(i,t,n,new Uo(e,i.children)));return o._sourceSegment=i,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:[]}}if(0===e.length&&function sK(i,t,e){return e.some(n=>m1(i,t,n))}(i,e,n)){const o=new Uo(i.segments,function nK(i,t,e,n,r,s){const o={};for(const l of n)if(m1(i,e,l)&&!r[mg(l)]){const u=new Uo([],{});u._sourceSegment=i,u._segmentIndexShift="legacy"===s?i.segments.length:t.length,o[mg(l)]=u}return{...r,...o}}(i,t,e,n,i.children,r));return o._sourceSegment=i,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:e}}const s=new Uo(i.segments,i.children);return s._sourceSegment=i,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:e}}function m1(i,t,e){return(!(i.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function gB(i,t,e,n){return!!(mg(i)===n||n!==Ro&&m1(t,e,i))&&("**"===i.path||zD(t,i,e).matched)}function mB(i,t,e){return 0===t.length&&!i.children[e]}const v1=!1;class y1{constructor(t){this.segmentGroup=t||null}}class vB{constructor(t){this.urlTree=t}}function rA(i){return Zb(new y1(i))}function yB(i){return Zb(new vB(i))}class cK{constructor(t,e,n,r,s){this.injector=t,this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const t=g1(this.urlTree.root,[],[],this.config).segmentGroup,e=new Uo(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,e,Ro).pipe(fe(s=>this.createUrlTree(l1(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Jm(s=>{if(s instanceof vB)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof y1?this.noMatchError(s):s}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,Ro).pipe(fe(r=>this.createUrlTree(l1(r),t.queryParams,t.fragment))).pipe(Jm(r=>{throw r instanceof y1?this.noMatchError(r):r}))}noMatchError(t){return new yi(4002,v1)}createUrlTree(t,e,n){const r=AD(t);return new g0(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(fe(s=>new Uo([],s))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const s of Object.keys(n.children))"primary"===s?r.unshift(s):r.push(s);return ur(r).pipe(Zv(s=>{const o=n.children[s],l=uB(e,s);return this.expandSegmentGroup(t,l,o,s).pipe(fe(u=>({segment:u,outlet:s})))}),vD((s,o)=>(s[o.outlet]=o.segment,s),{}),L3())}expandSegment(t,e,n,r,s,o){return ur(n).pipe(Zv(l=>this.expandSegmentAgainstRoute(t,e,n,l,r,s,o).pipe(Jm(p=>{if(p instanceof y1)return $r(null);throw p}))),n_(l=>!!l),Jm((l,u)=>{if(ND(l))return mB(e,r,s)?$r(new Uo([],{})):rA(e);throw l}))}expandSegmentAgainstRoute(t,e,n,r,s,o,l){return gB(r,e,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,s,o):l&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,s,o):rA(e):rA(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const s=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?yB(s):this.lineralizeSegments(n,s).pipe(gl(o=>{const l=new Uo(o,{});return this.expandSegment(t,l,e,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,s,o){const{matched:l,consumedSegments:u,remainingSegments:p,positionalParamSegments:v}=zD(e,r,s);if(!l)return rA(e);const w=this.applyRedirectCommands(u,r.redirectTo,v);return r.redirectTo.startsWith("/")?yB(w):this.lineralizeSegments(r,w).pipe(gl(I=>this.expandSegment(t,e,n,I.concat(p),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,s){return"**"===n.path?(t=cB(n,t),n.loadChildren?(n._loadedRoutes?$r({routes:n._loadedRoutes,injector:n._loadedInjector}):this.configLoader.loadChildren(t,n)).pipe(fe(l=>(n._loadedRoutes=l.routes,n._loadedInjector=l.injector,new Uo(r,{})))):$r(new Uo(r,{}))):pB(e,n,r,t).pipe(dm(({matched:o,consumedSegments:l,remainingSegments:u})=>o?this.getChildConfig(t=n._injector??t,n,r).pipe(gl(v=>{const w=v.injector??t,I=v.routes,{segmentGroup:T,slicedSegments:k}=g1(e,l,u,I),G=new Uo(T.segments,T.children);if(0===k.length&&G.hasChildren())return this.expandChildren(w,I,G).pipe(fe(Ae=>new Uo(l,Ae)));if(0===I.length&&0===k.length)return $r(new Uo(l,{}));const Y=mg(n)===s;return this.expandSegment(w,G,I,k,Y?Ro:s,!0).pipe(fe(Se=>new Uo(l.concat(Se.segments),Se.children)))})):rA(e)))}getChildConfig(t,e,n){return e.children?$r({routes:e.children,injector:t}):e.loadChildren?void 0!==e._loadedRoutes?$r({routes:e._loadedRoutes,injector:e._loadedInjector}):function eK(i,t,e,n){const r=t.canLoad;return void 0===r||0===r.length?$r(!0):$r(r.map(o=>{const l=i.get(o),u=function VY(i){return i&&iA(i.canLoad)}(l)?l.canLoad(t,e):l(t,e);return Jv(u)})).pipe(iC(),fB())}(t,e,n).pipe(gl(r=>r?this.configLoader.loadChildren(t,e).pipe(xd(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):function aK(i){return Zb(sB(v1,3))}())):$r({routes:[],injector:t})}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return $r(n);if(r.numberOfChildren>1||!r.children[Ro])return Zb(new yi(4e3,v1));r=r.children[Ro]}}applyRedirectCommands(t,e,n){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreateUrlTree(t,e,n,r){const s=this.createSegmentGroup(t,e.root,n,r);return new g0(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return Zh(t,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const l=r.substring(1);n[s]=e[l]}else n[s]=r}),n}createSegmentGroup(t,e,n,r){const s=this.createSegments(t,e.segments,n,r);let o={};return Zh(e.children,(l,u)=>{o[u]=this.createSegmentGroup(t,l,n,r)}),new Uo(s,o)}createSegments(t,e,n,r){return e.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,r):this.findOrReturn(s,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new yi(4001,v1);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}class hK{}class pK{constructor(t,e,n,r,s,o,l,u){this.injector=t,this.rootComponentType=e,this.config=n,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=l,this.urlSerializer=u}recognize(){const t=g1(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,Ro).pipe(fe(e=>{if(null===e)return null;const n=new u1([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ro,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new ty(n,e),s=new nB(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(t){const e=t.value,n=tB(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.processChildren(t,e,n):this.processSegment(t,e,n,n.segments,r)}processChildren(t,e,n){return ur(Object.keys(n.children)).pipe(Zv(r=>{const s=n.children[r],o=uB(e,r);return this.processSegmentGroup(t,o,s,r)}),vD((r,s)=>r&&s?(r.push(...s),r):null),function kX(i,t=!1){return Lt((e,n)=>{let r=0;e.subscribe(Ut(n,s=>{const o=i(s,r++);(o||t)&&n.next(s),!o&&n.complete()}))})}(r=>null!==r),t1(null),L3(),fe(r=>{if(null===r)return null;const s=_B(r);return function gK(i){i.sort((t,e)=>t.value.outlet===Ro?-1:e.value.outlet===Ro?1:t.value.outlet.localeCompare(e.value.outlet))}(s),s}))}processSegment(t,e,n,r,s){return ur(e).pipe(Zv(o=>this.processSegmentAgainstRoute(o._injector??t,o,n,r,s)),n_(o=>!!o),Jm(o=>{if(ND(o))return mB(n,r,s)?$r([]):$r(null);throw o}))}processSegmentAgainstRoute(t,e,n,r,s){if(e.redirectTo||!gB(e,n,r,s))return $r(null);let o;if("**"===e.path){const l=r.length>0?k3(r).parameters:{},u=CB(n)+r.length;o=$r({snapshot:new u1(r,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,AB(e),mg(e),e.component??e._loadedComponent??null,e,bB(n),u,xB(e),u),consumedSegments:[],remainingSegments:[]})}else o=pB(n,e,r,t).pipe(fe(({matched:l,consumedSegments:u,remainingSegments:p,parameters:v})=>{if(!l)return null;const w=CB(n)+u.length;return{snapshot:new u1(u,v,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,AB(e),mg(e),e.component??e._loadedComponent??null,e,bB(n),w,xB(e),w),consumedSegments:u,remainingSegments:p}}));return o.pipe(dm(l=>{if(null===l)return $r(null);const{snapshot:u,consumedSegments:p,remainingSegments:v}=l;t=e._injector??t;const w=e._loadedInjector??t,I=function mK(i){return i.children?i.children:i.loadChildren?i._loadedRoutes:[]}(e),{segmentGroup:T,slicedSegments:k}=g1(n,p,v,I.filter(Y=>void 0===Y.redirectTo),this.relativeLinkResolution);if(0===k.length&&T.hasChildren())return this.processChildren(w,I,T).pipe(fe(Y=>null===Y?null:[new ty(u,Y)]));if(0===I.length&&0===k.length)return $r([new ty(u,[])]);const G=mg(e)===s;return this.processSegment(w,I,T,k,G?Ro:s).pipe(fe(Y=>null===Y?null:[new ty(u,Y)]))}))}}function vK(i){const t=i.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function _B(i){const t=[],e=new Set;for(const n of i){if(!vK(n)){t.push(n);continue}const r=t.find(s=>n.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...n.children),e.add(r)):t.push(n)}for(const n of e){const r=_B(n.children);t.push(new ty(n.value,r))}return t.filter(n=>!e.has(n))}function bB(i){let t=i;for(;t._sourceSegment;)t=t._sourceSegment;return t}function CB(i){let t=i,e=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift??0;return e-1}function AB(i){return i.data||{}}function xB(i){return i.resolve||{}}const VD=Symbol("RouteTitle");function IB(i){return"string"==typeof i.title||null===i.title}function UD(i){return dm(t=>{const e=i(t);return e?ur(e).pipe(fe(()=>t)):$r(t)})}let SB=(()=>{class i{buildTitle(e){let n,r=e.root;for(;void 0!==r;)n=this.getResolvedTitleForRoute(r)??n,r=r.children.find(s=>s.outlet===Ro);return n}getResolvedTitleForRoute(e){return e.data[VD]}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zi({token:i,factory:function(){return fa(EB)},providedIn:"root"}),i})(),EB=(()=>{class i extends SB{constructor(e){super(),this.title=e}updateTitle(e){const n=this.buildTitle(e);void 0!==n&&this.title.setTitle(n)}}return i.\u0275fac=function(e){return new(e||i)(qn(oD))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class IK{}class EK extends class SK{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const HD=new ir("",{providedIn:"root",factory:()=>({})}),GD=new ir("ROUTES");let WD=(()=>{class i{constructor(e,n){this.injector=e,this.compiler=n,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return $r(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const n=Jv(e.loadComponent()).pipe(xd(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),_D(()=>{this.componentLoaders.delete(e)})),r=new M3(n,()=>new Ge).pipe(mD());return this.componentLoaders.set(e,r),r}loadChildren(e,n){if(this.childrenLoaders.get(n))return this.childrenLoaders.get(n);if(n._loadedRoutes)return $r({routes:n._loadedRoutes,injector:n._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(n);const s=this.loadModuleFactoryOrRoutes(n.loadChildren).pipe(fe(l=>{this.onLoadEndListener&&this.onLoadEndListener(n);let u,p,v=!1;Array.isArray(l)?p=l:(u=l.create(e).injector,p=R3(u.get(GD,[],rs.Self|rs.Optional)));return{routes:p.map(FD),injector:u}}),_D(()=>{this.childrenLoaders.delete(n)})),o=new M3(s,()=>new Ge).pipe(mD());return this.childrenLoaders.set(n,o),o}loadModuleFactoryOrRoutes(e){return Jv(e()).pipe(gl(n=>n instanceof eF||Array.isArray(n)?$r(n):ur(this.compiler.compileModuleAsync(n))))}}return i.\u0275fac=function(e){return new(e||i)(qn(Iu),qn(IM))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class MK{}class DK{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function LK(i){throw i}function PK(i,t,e){return t.parse("/")}const RK={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},kK={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function MB(){const i=fa(V3),t=fa(eA),e=fa(VM),n=fa(Iu),r=fa(IM),s=fa(GD,{optional:!0})??[],o=fa(HD,{optional:!0})??{},l=fa(EB),u=fa(SB,{optional:!0}),p=fa(MK,{optional:!0}),v=fa(IK,{optional:!0}),w=new bh(null,i,t,e,n,r,R3(s));return p&&(w.urlHandlingStrategy=p),v&&(w.routeReuseStrategy=v),w.titleStrategy=u??l,function OK(i,t){i.errorHandler&&(t.errorHandler=i.errorHandler),i.malformedUriErrorHandler&&(t.malformedUriErrorHandler=i.malformedUriErrorHandler),i.onSameUrlNavigation&&(t.onSameUrlNavigation=i.onSameUrlNavigation),i.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=i.paramsInheritanceStrategy),i.relativeLinkResolution&&(t.relativeLinkResolution=i.relativeLinkResolution),i.urlUpdateStrategy&&(t.urlUpdateStrategy=i.urlUpdateStrategy),i.canceledNavigationResolution&&(t.canceledNavigationResolution=i.canceledNavigationResolution)}(o,w),w}let bh=(()=>{class i{constructor(e,n,r,s,o,l,u){this.rootComponentType=e,this.urlSerializer=n,this.rootContexts=r,this.location=s,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ge,this.errorHandler=LK,this.malformedUriErrorHandler=PK,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>$r(void 0),this.urlHandlingStrategy=new DK,this.routeReuseStrategy=new EK,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=o.get(WD),this.configLoader.onLoadEndListener=I=>this.triggerEvent(new mY(I)),this.configLoader.onLoadStartListener=I=>this.triggerEvent(new gY(I)),this.ngModule=o.get(u0),this.console=o.get(x7);const w=o.get(Vo);this.isNgZoneEnabled=w instanceof Vo&&Vo.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=function zX(){return new g0(new Uo([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=eB(this.currentUrlTree,this.rootComponentType),this.transitions=new Vf({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(e){const n=this.events;return e.pipe(gg(r=>0!==r.id),fe(r=>({...r,extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),dm(r=>{let s=!1,o=!1;return $r(r).pipe(xd(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),dm(l=>{const u=this.browserUrlTree.toString(),p=!this.navigated||l.extractedUrl.toString()!==u||u!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||p)&&this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return DB(l.source)&&(this.browserUrlTree=l.extractedUrl),$r(l).pipe(dm(w=>{const I=this.transitions.getValue();return n.next(new ED(w.id,this.serializeUrl(w.extractedUrl),w.source,w.restoredState)),I!==this.transitions.getValue()?rl:Promise.resolve(w)}),function uK(i,t,e,n){return dm(r=>function lK(i,t,e,n,r){return new cK(i,t,e,n,r).apply()}(i,t,e,r.extractedUrl,n).pipe(fe(s=>({...r,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),xd(w=>{this.currentNavigation={...this.currentNavigation,finalUrl:w.urlAfterRedirects},r.urlAfterRedirects=w.urlAfterRedirects}),function _K(i,t,e,n,r,s){return gl(o=>function fK(i,t,e,n,r,s,o="emptyOnly",l="legacy"){return new pK(i,t,e,n,r,o,l,s).recognize().pipe(dm(u=>null===u?function dK(i){return new vt(t=>t.error(i))}(new hK):$r(u)))}(i,t,e,o.urlAfterRedirects,n.serialize(o.urlAfterRedirects),n,r,s).pipe(fe(l=>({...o,targetSnapshot:l}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),xd(w=>{if(r.targetSnapshot=w.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!w.extras.skipLocationChange){const T=this.urlHandlingStrategy.merge(w.urlAfterRedirects,w.rawUrl);this.setBrowserUrl(T,w)}this.browserUrlTree=w.urlAfterRedirects}const I=new uY(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);n.next(I)}));if(p&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:I,extractedUrl:T,source:k,restoredState:G,extras:Y}=l,ce=new ED(I,this.serializeUrl(T),k,G);n.next(ce);const Se=eB(T,this.rootComponentType).snapshot;return $r(r={...l,targetSnapshot:Se,urlAfterRedirects:T,extras:{...Y,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=l.rawUrl,l.resolve(null),rl}),xd(l=>{const u=new hY(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(u)}),fe(l=>r={...l,guards:OY(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function $Y(i,t){return gl(e=>{const{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=e;return 0===o.length&&0===s.length?$r({...e,guardsResult:!0}):function qY(i,t,e,n){return ur(i).pipe(gl(r=>function JY(i,t,e,n,r){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?$r(s.map(l=>{const u=f1(l,t,r);return Jv(function GY(i){return i&&iA(i.canDeactivate)}(u)?u.canDeactivate(i,t,e,n):u(i,t,e,n)).pipe(n_())})).pipe(iC()):$r(!0)}(r.component,r.route,e,t,n)),n_(r=>!0!==r,!0))}(o,n,r,i).pipe(gl(l=>l&&function zY(i){return"boolean"==typeof i}(l)?function XY(i,t,e,n){return ur(t).pipe(Zv(r=>gD(function KY(i,t){return null!==i&&t&&t(new vY(i)),$r(!0)}(r.route.parent,n),function YY(i,t){return null!==i&&t&&t(new _Y(i)),$r(!0)}(r.route,n),function QY(i,t,e){const n=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(o=>function FY(i){const t=i.routeConfig?i.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:i,guards:t}:null}(o)).filter(o=>null!==o).map(o=>T3(()=>$r(o.guards.map(u=>{const p=f1(u,o.node,e);return Jv(function HY(i){return i&&iA(i.canActivateChild)}(p)?p.canActivateChild(n,i):p(n,i)).pipe(n_())})).pipe(iC())));return $r(s).pipe(iC())}(i,r.path,e),function ZY(i,t,e){const n=t.routeConfig?t.routeConfig.canActivate:null;if(!n||0===n.length)return $r(!0);const r=n.map(s=>T3(()=>{const o=f1(s,t,e);return Jv(function UY(i){return i&&iA(i.canActivate)}(o)?o.canActivate(t,i):o(t,i)).pipe(n_())}));return $r(r).pipe(iC())}(i,r.route,e))),n_(r=>!0!==r,!0))}(n,s,i,t):$r(l)),fe(l=>({...e,guardsResult:l})))})}(this.ngModule.injector,l=>this.triggerEvent(l)),xd(l=>{if(r.guardsResult=l.guardsResult,v0(l.guardsResult))throw rB(0,l.guardsResult);const u=new dY(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.triggerEvent(u)}),gg(l=>!!l.guardsResult||(this.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),UD(l=>{if(l.guards.canActivateChecks.length)return $r(l).pipe(xd(u=>{const p=new fY(u.id,this.serializeUrl(u.extractedUrl),this.serializeUrl(u.urlAfterRedirects),u.targetSnapshot);this.triggerEvent(p)}),dm(u=>{let p=!1;return $r(u).pipe(function bK(i,t){return gl(e=>{const{targetSnapshot:n,guards:{canActivateChecks:r}}=e;if(!r.length)return $r(e);let s=0;return ur(r).pipe(Zv(o=>function CK(i,t,e,n){const r=i.routeConfig,s=i._resolve;return void 0!==r?.title&&!IB(r)&&(s[VD]=r.title),function wK(i,t,e,n){const r=function AK(i){return[...Object.keys(i),...Object.getOwnPropertySymbols(i)]}(i);if(0===r.length)return $r({});const s={};return ur(r).pipe(gl(o=>function xK(i,t,e,n){const r=f1(i,t,n);return Jv(r.resolve?r.resolve(t,e):r(t,e))}(i[o],t,e,n).pipe(n_(),xd(l=>{s[o]=l}))),yD(1),function OX(i){return fe(()=>i)}(s),Jm(o=>ND(o)?rl:Zb(o)))}(s,i,t,n).pipe(fe(o=>(i._resolvedData=o,i.data=tB(i,e).resolve,r&&IB(r)&&(i.data[VD]=r.title),null)))}(o.route,n,i,t)),xd(()=>s++),yD(1),gl(o=>s===r.length?$r(e):rl))})}(this.paramsInheritanceStrategy,this.ngModule.injector),xd({next:()=>p=!0,complete:()=>{p||(this.restoreHistory(u),this.cancelNavigationTransition(u,"",2))}}))}),xd(u=>{const p=new pY(u.id,this.serializeUrl(u.extractedUrl),this.serializeUrl(u.urlAfterRedirects),u.targetSnapshot);this.triggerEvent(p)}))}),UD(l=>{const u=p=>{const v=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&v.push(this.configLoader.loadComponent(p.routeConfig).pipe(xd(w=>{p.component=w}),fe(()=>{})));for(const w of p.children)v.push(...u(w));return v};return S3(u(l.targetSnapshot.root)).pipe(t1(),Qb(1))}),UD(()=>this.afterPreactivation()),fe(l=>{const u=function xY(i,t,e){const n=Jw(i,t._root,e?e._root:void 0);return new J3(n,t)}(this.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:u}}),xd(l=>{this.currentUrlTree=l.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),this.routerState=l.targetRouterState,"deferred"===this.urlUpdateStrategy&&(l.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,l),this.browserUrlTree=l.urlAfterRedirects)}),((i,t,e)=>fe(n=>(new kY(t,n.targetRouterState,n.currentRouterState,e).activate(i),n)))(this.rootContexts,this.routeReuseStrategy,l=>this.triggerEvent(l)),xd({next(){s=!0},complete(){s=!0}}),_D(()=>{s||o||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Jm(l=>{if(o=!0,aB(l)){oB(l)||(this.navigated=!0,this.restoreHistory(r,!0));const u=new c1(r.id,this.serializeUrl(r.extractedUrl),l.message,l.cancellationCode);if(n.next(u),oB(l)){const p=this.urlHandlingStrategy.merge(l.url,this.rawUrlTree),v={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||DB(r.source)};this.scheduleNavigation(p,"imperative",null,v,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{this.restoreHistory(r,!0);const u=new K3(r.id,this.serializeUrl(r.extractedUrl),l,r.targetSnapshot??void 0);n.next(u);try{r.resolve(this.errorHandler(l))}catch(p){r.reject(p)}}return rl}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next({...this.transitions.value,...e})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const n="popstate"===e.type?"popstate":"hashchange";"popstate"===n&&setTimeout(()=>{const r={replaceUrl:!0},s=e.state?.navigationId?e.state:null;if(s){const l={...s};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(r.state=l)}const o=this.parseUrl(e.url);this.scheduleNavigation(o,n,s,r)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){this.config=e.map(FD),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,n={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:l,preserveFragment:u}=n,p=r||this.routerState.root,v=u?this.currentUrlTree.fragment:o;let w=null;switch(l){case"merge":w={...this.currentUrlTree.queryParams,...s};break;case"preserve":w=this.currentUrlTree.queryParams;break;default:w=s||null}return null!==w&&(w=this.removeEmptyProps(w)),rY(p,this.currentUrlTree,e,w,v??null)}navigateByUrl(e,n={skipLocationChange:!1}){const r=v0(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,n)}navigate(e,n={skipLocationChange:!1}){return function FK(i){for(let t=0;t<i.length;t++){if(null==i[t])throw new yi(4008,false)}}(e),this.navigateByUrl(this.createUrlTree(e,n),n)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let n;try{n=this.urlSerializer.parse(e)}catch(r){n=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return n}isActive(e,n){let r;if(r=!0===n?{...RK}:!1===n?{...kK}:n,v0(e))return F3(this.currentUrlTree,e,r);const s=this.parseUrl(e);return F3(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.keys(e).reduce((n,r)=>{const s=e[r];return null!=s&&(n[r]=s),n},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new y0(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,n,r,s,o){if(this.disposed)return Promise.resolve(!1);let l,u,p;o?(l=o.resolve,u=o.reject,p=o.promise):p=new Promise((I,T)=>{l=I,u=T});const v=++this.navigationId;let w;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),w=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):w=0,this.setTransition({id:v,targetPageId:w,source:n,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:s,resolve:l,reject:u,promise:p,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),p.catch(I=>Promise.reject(I))}setBrowserUrl(e,n){const r=this.urlSerializer.serialize(e),s={...n.extras.state,...this.generateNgRouterState(n.id,n.targetPageId)};this.location.isCurrentPathEqualTo(r)||n.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(e,n=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===r?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===r&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(n&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,n,r){const s=new c1(e.id,this.serializeUrl(e.extractedUrl),n,r);this.triggerEvent(s),e.resolve(!1)}generateNgRouterState(e,n){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:n}:{navigationId:e}}}return i.\u0275fac=function(e){bw()},i.\u0275prov=Zi({token:i,factory:function(){return MB()},providedIn:"root"}),i})();function DB(i){return"imperative"!==i}let jD=(()=>{class i{constructor(e,n,r,s,o){this.router=e,this.route=n,this.tabIndexAttribute=r,this.renderer=s,this.el=o,this.commands=null,this.onChanges=new Ge,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(e){if(null!=this.tabIndexAttribute)return;const n=this.renderer,r=this.el.nativeElement;null!==e?n.setAttribute(r,"tabindex",e):n.removeAttribute(r,"tabindex")}ngOnChanges(e){this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const e={skipLocationChange:Xv(this.skipLocationChange),replaceUrl:Xv(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,e),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Xv(this.preserveFragment)})}}return i.\u0275fac=function(e){return new(e||i)(Xt(bh),Xt(i_),ud("tabindex"),Xt(d),Xt(Yn))},i.\u0275dir=qr({type:i,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,n){1&e&&mn("click",function(){return n.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[da]}),i})(),rC=(()=>{class i{constructor(e,n,r){this.router=e,this.route=n,this.locationStrategy=r,this.commands=null,this.href=null,this.onChanges=new Ge,this.subscription=e.events.subscribe(s=>{s instanceof y0&&this.updateTargetUrlAndHref()})}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:null}ngOnChanges(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,n,r,s,o){if(0!==e||n||r||s||o||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const l={skipLocationChange:Xv(this.skipLocationChange),replaceUrl:Xv(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,l),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Xv(this.preserveFragment)})}}return i.\u0275fac=function(e){return new(e||i)(Xt(bh),Xt(i_),Xt(f0))},i.\u0275dir=qr({type:i,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,n){1&e&&mn("click",function(s){return n.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&e&&vr("target",n.target)("href",n.href,Xh)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[da]}),i})(),$D=(()=>{class i{constructor(e,n,r,s,o,l){this.router=e,this.element=n,this.renderer=r,this.cdr=s,this.link=o,this.linkWithHref=l,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new Fn,this.routerEventsSubscription=e.events.subscribe(u=>{u instanceof y0&&this.update()})}ngAfterContentInit(){$r(this.links.changes,this.linksWithHrefs.changes,$r(null)).pipe(Ic()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const e=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(n=>!!n).map(n=>n.onChanges);this.linkInputChangesSubscription=ur(e).pipe(Ic()).subscribe(n=>{this.isActive!==this.isLinkActive(this.router)(n)&&this.update()})}set routerLinkActive(e){const n=Array.isArray(e)?e:e.split(" ");this.classes=n.filter(r=>!!r)}ngOnChanges(e){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const e=this.hasActiveLinks();this.isActive!==e&&(this.isActive=e,this.cdr.markForCheck(),this.classes.forEach(n=>{e?this.renderer.addClass(this.element.nativeElement,n):this.renderer.removeClass(this.element.nativeElement,n)}),e&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(e))})}isLinkActive(e){const n=function NK(i){return!!i.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return r=>!!r.urlTree&&e.isActive(r.urlTree,n)}hasActiveLinks(){const e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.linkWithHref&&e(this.linkWithHref)||this.links.some(e)||this.linksWithHrefs.some(e)}}return i.\u0275fac=function(e){return new(e||i)(Xt(bh),Xt(Yn),Xt(d),Xt(xo),Xt(jD,8),Xt(rC,8))},i.\u0275dir=qr({type:i,selectors:[["","routerLinkActive",""]],contentQueries:function(e,n,r){if(1&e&&(Ba(r,jD,5),Ba(r,rC,5)),2&e){let s;Wi(s=ji())&&(n.links=s),Wi(s=ji())&&(n.linksWithHrefs=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[da]}),i})();class LB{}let PB=(()=>{class i{constructor(e,n,r,s,o){this.router=e,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(gg(e=>e instanceof y0),Zv(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,n){const r=[];for(const s of n){s.providers&&!s._injector&&(s._injector=EI(s.providers,e,`Route: ${s.path}`));const o=s._injector??e,l=s._loadedInjector??o;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?r.push(this.preloadConfig(o,s)):(s.children||s._loadedRoutes)&&r.push(this.processRoutes(l,s.children??s._loadedRoutes))}return ur(r).pipe(Ic())}preloadConfig(e,n){return this.preloadingStrategy.preload(n,()=>{let r;r=n.loadChildren&&void 0===n.canLoad?this.loader.loadChildren(e,n):$r(null);const s=r.pipe(gl(o=>null===o?$r(void 0):(n._loadedRoutes=o.routes,n._loadedInjector=o.injector,this.processRoutes(o.injector??e,o.routes))));return n.loadComponent&&!n._loadedComponent?ur([s,this.loader.loadComponent(n)]).pipe(Ic()):s})}}return i.\u0275fac=function(e){return new(e||i)(qn(bh),qn(IM),qn(at),qn(LB),qn(WD))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})();const RB=new ir("");let BK=(()=>{class i{constructor(e,n,r={}){this.router=e,this.viewportScroller=n,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof ED?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof y0&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Z3&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,n){this.router.triggerEvent(new Z3(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,n))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return i.\u0275fac=function(e){bw()},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})();const kB=new ir("ROUTER_FORROOT_GUARD"),OB=new ir(""),zK=[VM,{provide:V3,useClass:CD},{provide:bh,useFactory:MB},eA,{provide:i_,useFactory:function VK(i){return i.routerState.root},deps:[bh]},WD];function UK(){return new QF("Router",bh)}let s_=(()=>{class i{constructor(e){}static forRoot(e,n){return{ngModule:i,providers:[zK,[],FB(e),{provide:kB,useFactory:jK,deps:[[bh,new Ml,new mh]]},{provide:HD,useValue:n||{}},n?.useHash?{provide:f0,useClass:f$}:{provide:f0,useClass:AN},{provide:RB,useFactory:()=>{const i=fa(bh),t=fa(Eq),e=fa(HD);return e.scrollOffset&&t.setOffset(e.scrollOffset),new BK(i,t,e)}},n?.preloadingStrategy?QK(n.preloadingStrategy):[],{provide:QF,multi:!0,useFactory:UK},n?.initialNavigation?qK(n):[],[{provide:NB,useFactory:$K},{provide:WF,multi:!0,useExisting:NB}]]}}static forChild(e){return{ngModule:i,providers:[FB(e)]}}}return i.\u0275fac=function(e){return new(e||i)(qn(kB,8))},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({}),i})();function jK(i){return"guarded"}function FB(i){return[{provide:GD,multi:!0,useValue:i}]}function $K(){const i=fa(Iu);return t=>{const e=i.get(Hw);if(t!==e.components[0])return;const n=i.get(bh),r=i.get(BB);1===i.get(qD)&&n.initialNavigation(),i.get(OB,null,rs.Optional)?.setUpPreloading(),i.get(RB,null,rs.Optional)?.init(),n.resetRootComponentType(e.componentTypes[0]),r.next(),r.complete()}}const NB=new ir("");function qK(i){return["disabled"===i.initialNavigation?[{provide:Vw,multi:!0,useFactory:()=>{const i=fa(bh);return()=>{i.setUpLocationChangeListener()}}},{provide:qD,useValue:2}]:[],"enabledBlocking"===i.initialNavigation?[{provide:qD,useValue:0},{provide:Vw,multi:!0,deps:[Iu],useFactory:i=>{const t=i.get(h$,Promise.resolve(null));let e=!1;return()=>t.then(()=>new Promise(r=>{const s=i.get(bh),o=i.get(BB);(function n(r){i.get(bh).events.pipe(gg(o=>o instanceof y0||o instanceof c1||o instanceof K3),fe(o=>o instanceof y0||o instanceof c1&&(0===o.code||1===o.code)&&null),gg(o=>null!==o),Qb(1)).subscribe(()=>{r()})})(()=>{r(!0),e=!0}),s.afterPreactivation=()=>(r(!0),e||o.closed?$r(void 0):o),s.initialNavigation()}))}}]:[]]}const BB=new ir("",{factory:()=>new Ge}),qD=new ir("",{providedIn:"root",factory:()=>1});function QK(i){return[PB,{provide:OB,useExisting:PB},{provide:LB,useExisting:i}]}var Ki=U(7489);class Ji{static equals(t,e,n){return n?this.resolveFieldData(t,n)===this.resolveFieldData(e,n):this.equalsByValue(t,e)}static equalsByValue(t,e){if(t===e)return!0;if(t&&e&&"object"==typeof t&&"object"==typeof e){var s,o,l,n=Array.isArray(t),r=Array.isArray(e);if(n&&r){if((o=t.length)!=e.length)return!1;for(s=o;0!=s--;)if(!this.equalsByValue(t[s],e[s]))return!1;return!0}if(n!=r)return!1;var u=t instanceof Date,p=e instanceof Date;if(u!=p)return!1;if(u&&p)return t.getTime()==e.getTime();var v=t instanceof RegExp,w=e instanceof RegExp;if(v!=w)return!1;if(v&&w)return t.toString()==e.toString();var I=Object.keys(t);if((o=I.length)!==Object.keys(e).length)return!1;for(s=o;0!=s--;)if(!Object.prototype.hasOwnProperty.call(e,I[s]))return!1;for(s=o;0!=s--;)if(!this.equalsByValue(t[l=I[s]],e[l]))return!1;return!0}return t!=t&&e!=e}static resolveFieldData(t,e){if(t&&e){if(this.isFunction(e))return e(t);if(-1==e.indexOf("."))return t[e];{let n=e.split("."),r=t;for(let s=0,o=n.length;s<o;++s){if(null==r)return null;r=r[n[s]]}return r}}return null}static isFunction(t){return!!(t&&t.constructor&&t.call&&t.apply)}static reorderArray(t,e,n){t&&e!==n&&(n>=t.length&&(n%=t.length,e%=t.length),t.splice(n,0,t.splice(e,1)[0]))}static insertIntoOrderedArray(t,e,n,r){if(n.length>0){let s=!1;for(let o=0;o<n.length;o++)if(this.findIndexInList(n[o],r)>e){n.splice(o,0,t),s=!0;break}s||n.push(t)}else n.push(t)}static findIndexInList(t,e){let n=-1;if(e)for(let r=0;r<e.length;r++)if(e[r]==t){n=r;break}return n}static contains(t,e){if(null!=t&&e&&e.length)for(let n of e)if(this.equals(t,n))return!0;return!1}static removeAccents(t){return t&&t.search(/[\xC0-\xFF]/g)>-1&&(t=t.replace(/[\xC0-\xC5]/g,"A").replace(/[\xC6]/g,"AE").replace(/[\xC7]/g,"C").replace(/[\xC8-\xCB]/g,"E").replace(/[\xCC-\xCF]/g,"I").replace(/[\xD0]/g,"D").replace(/[\xD1]/g,"N").replace(/[\xD2-\xD6\xD8]/g,"O").replace(/[\xD9-\xDC]/g,"U").replace(/[\xDD]/g,"Y").replace(/[\xDE]/g,"P").replace(/[\xE0-\xE5]/g,"a").replace(/[\xE6]/g,"ae").replace(/[\xE7]/g,"c").replace(/[\xE8-\xEB]/g,"e").replace(/[\xEC-\xEF]/g,"i").replace(/[\xF1]/g,"n").replace(/[\xF2-\xF6\xF8]/g,"o").replace(/[\xF9-\xFC]/g,"u").replace(/[\xFE]/g,"p").replace(/[\xFD\xFF]/g,"y")),t}static isEmpty(t){return null==t||""===t||Array.isArray(t)&&0===t.length||!(t instanceof Date)&&"object"==typeof t&&0===Object.keys(t).length}static isNotEmpty(t){return!this.isEmpty(t)}}var zB=0;function sC(){return"pr_id_"+ ++zB}var Ll=function JK(){let i=[];const r=s=>s&&parseInt(s.style.zIndex,10)||0;return{get:r,set:(s,o,l)=>{o&&(o.style.zIndex=String(((s,o)=>{let l=i.length>0?i[i.length-1]:{key:s,value:o},u=l.value+(l.key===s?0:o)+1;return i.push({key:s,value:u}),u})(s,l)))},clear:s=>{s&&((s=>{i=i.filter(o=>o.value!==s)})(r(s)),s.style.zIndex="")},getCurrent:()=>i.length>0?i[i.length-1].value:0}}();const VB=["*"];let Qh=(()=>{class i{}return i.STARTS_WITH="startsWith",i.CONTAINS="contains",i.NOT_CONTAINS="notContains",i.ENDS_WITH="endsWith",i.EQUALS="equals",i.NOT_EQUALS="notEquals",i.IN="in",i.LESS_THAN="lt",i.LESS_THAN_OR_EQUAL_TO="lte",i.GREATER_THAN="gt",i.GREATER_THAN_OR_EQUAL_TO="gte",i.BETWEEN="between",i.IS="is",i.IS_NOT="isNot",i.BEFORE="before",i.AFTER="after",i.DATE_IS="dateIs",i.DATE_IS_NOT="dateIsNot",i.DATE_BEFORE="dateBefore",i.DATE_AFTER="dateAfter",i})(),Dp=(()=>{class i{constructor(){this.ripple=!1,this.filterMatchModeOptions={text:[Qh.STARTS_WITH,Qh.CONTAINS,Qh.NOT_CONTAINS,Qh.ENDS_WITH,Qh.EQUALS,Qh.NOT_EQUALS],numeric:[Qh.EQUALS,Qh.NOT_EQUALS,Qh.LESS_THAN,Qh.LESS_THAN_OR_EQUAL_TO,Qh.GREATER_THAN,Qh.GREATER_THAN_OR_EQUAL_TO],date:[Qh.DATE_IS,Qh.DATE_IS_NOT,Qh.DATE_BEFORE,Qh.DATE_AFTER]},this.translation={startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",is:"Is",isNot:"Is not",before:"Before",after:"After",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dateFormat:"mm/dd/yy",firstDayOfWeek:0,today:"Today",weekHeader:"Wk",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyMessage:"No results found",emptyFilterMessage:"No results found"},this.zIndex={modal:1100,overlay:1e3,menu:1e3,tooltip:1100},this.translationSource=new Ge,this.translationObserver=this.translationSource.asObservable()}getTranslation(e){return this.translation[e]}setTranslation(e){this.translation={...this.translation,...e},this.translationSource.next(this.translation)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),$c=(()=>{class i{}return i.STARTS_WITH="startsWith",i.CONTAINS="contains",i.NOT_CONTAINS="notContains",i.ENDS_WITH="endsWith",i.EQUALS="equals",i.NOT_EQUALS="notEquals",i.NO_FILTER="noFilter",i.LT="lt",i.LTE="lte",i.GT="gt",i.GTE="gte",i.IS="is",i.IS_NOT="isNot",i.BEFORE="before",i.AFTER="after",i.CLEAR="clear",i.APPLY="apply",i.MATCH_ALL="matchAll",i.MATCH_ANY="matchAny",i.ADD_RULE="addRule",i.REMOVE_RULE="removeRule",i.ACCEPT="accept",i.REJECT="reject",i.CHOOSE="choose",i.UPLOAD="upload",i.CANCEL="cancel",i.DAY_NAMES="dayNames",i.DAY_NAMES_SHORT="dayNamesShort",i.DAY_NAMES_MIN="dayNamesMin",i.MONTH_NAMES="monthNames",i.MONTH_NAMES_SHORT="monthNamesShort",i.FIRST_DAY_OF_WEEK="firstDayOfWeek",i.TODAY="today",i.WEEK_HEADER="weekHeader",i.WEAK="weak",i.MEDIUM="medium",i.STRONG="strong",i.PASSWORD_PROMPT="passwordPrompt",i.EMPTY_MESSAGE="emptyMessage",i.EMPTY_FILTER_MESSAGE="emptyFilterMessage",i})(),sA=(()=>{class i{constructor(){this.requireConfirmationSource=new Ge,this.acceptConfirmationSource=new Ge,this.requireConfirmation$=this.requireConfirmationSource.asObservable(),this.accept=this.acceptConfirmationSource.asObservable()}confirm(e){return this.requireConfirmationSource.next(e),this}close(){return this.requireConfirmationSource.next(null),this}onAccept(){this.acceptConfirmationSource.next(null)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})(),oA=(()=>{class i{constructor(){this.filters={startsWith:(e,n,r)=>{if(null==n||""===n.trim())return!0;if(null==e)return!1;let s=Ji.removeAccents(n.toString()).toLocaleLowerCase(r);return Ji.removeAccents(e.toString()).toLocaleLowerCase(r).slice(0,s.length)===s},contains:(e,n,r)=>{if(null==n||"string"==typeof n&&""===n.trim())return!0;if(null==e)return!1;let s=Ji.removeAccents(n.toString()).toLocaleLowerCase(r);return-1!==Ji.removeAccents(e.toString()).toLocaleLowerCase(r).indexOf(s)},notContains:(e,n,r)=>{if(null==n||"string"==typeof n&&""===n.trim())return!0;if(null==e)return!1;let s=Ji.removeAccents(n.toString()).toLocaleLowerCase(r);return-1===Ji.removeAccents(e.toString()).toLocaleLowerCase(r).indexOf(s)},endsWith:(e,n,r)=>{if(null==n||""===n.trim())return!0;if(null==e)return!1;let s=Ji.removeAccents(n.toString()).toLocaleLowerCase(r),o=Ji.removeAccents(e.toString()).toLocaleLowerCase(r);return-1!==o.indexOf(s,o.length-s.length)},equals:(e,n,r)=>null==n||"string"==typeof n&&""===n.trim()||null!=e&&(e.getTime&&n.getTime?e.getTime()===n.getTime():Ji.removeAccents(e.toString()).toLocaleLowerCase(r)==Ji.removeAccents(n.toString()).toLocaleLowerCase(r)),notEquals:(e,n,r)=>!(null==n||"string"==typeof n&&""===n.trim()||null!=e&&(e.getTime&&n.getTime?e.getTime()===n.getTime():Ji.removeAccents(e.toString()).toLocaleLowerCase(r)==Ji.removeAccents(n.toString()).toLocaleLowerCase(r))),in:(e,n)=>{if(null==n||0===n.length)return!0;for(let r=0;r<n.length;r++)if(Ji.equals(e,n[r]))return!0;return!1},between:(e,n)=>null==n||null==n[0]||null==n[1]||null!=e&&(e.getTime?n[0].getTime()<=e.getTime()&&e.getTime()<=n[1].getTime():n[0]<=e&&e<=n[1]),lt:(e,n,r)=>null==n||null!=e&&(e.getTime&&n.getTime?e.getTime()<n.getTime():e<n),lte:(e,n,r)=>null==n||null!=e&&(e.getTime&&n.getTime?e.getTime()<=n.getTime():e<=n),gt:(e,n,r)=>null==n||null!=e&&(e.getTime&&n.getTime?e.getTime()>n.getTime():e>n),gte:(e,n,r)=>null==n||null!=e&&(e.getTime&&n.getTime?e.getTime()>=n.getTime():e>=n),is:(e,n,r)=>this.filters.equals(e,n,r),isNot:(e,n,r)=>this.filters.notEquals(e,n,r),before:(e,n,r)=>this.filters.lt(e,n,r),after:(e,n,r)=>this.filters.gt(e,n,r),dateIs:(e,n)=>null==n||null!=e&&e.toDateString()===n.toDateString(),dateIsNot:(e,n)=>null==n||null!=e&&e.toDateString()!==n.toDateString(),dateBefore:(e,n)=>null==n||null!=e&&e.getTime()<n.getTime(),dateAfter:(e,n)=>null==n||null!=e&&e.getTime()>n.getTime()}}filter(e,n,r,s,o){let l=[];if(e)for(let u of e)for(let p of n){let v=Ji.resolveFieldData(u,p);if(this.filters[s](v,r,o)){l.push(u);break}}return l}register(e,n){this.filters[e]=n}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),UB=(()=>{class i{constructor(){this.activeItemKeyChange=new Ge,this.activeItemKeyChange$=this.activeItemKeyChange.asObservable()}changeKey(e){this.activeItemKey=e,this.activeItemKeyChange.next(this.activeItemKey)}reset(){this.activeItemKey=null,this.activeItemKeyChange.next(this.activeItemKey)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})(),fm=(()=>{class i{constructor(){this.messageSource=new Ge,this.clearSource=new Ge,this.messageObserver=this.messageSource.asObservable(),this.clearObserver=this.clearSource.asObservable()}add(e){e&&this.messageSource.next(e)}addAll(e){e&&e.length&&this.messageSource.next(e)}clear(e){this.clearSource.next(e||null)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})(),aA=(()=>{class i{constructor(){this.clickSource=new Ge,this.clickObservable=this.clickSource.asObservable()}add(e){e&&this.clickSource.next(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),HB=(()=>{class i{}return i.AND="and",i.OR="or",i})(),XD=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=_r({type:i,selectors:[["p-header"]],ngContentSelectors:VB,decls:1,vars:0,template:function(e,n){1&e&&(Bf(),su(0))},encapsulation:2}),i})(),C1=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=_r({type:i,selectors:[["p-footer"]],ngContentSelectors:VB,decls:1,vars:0,template:function(e,n){1&e&&(Bf(),su(0))},encapsulation:2}),i})(),za=(()=>{class i{constructor(e){this.template=e}getType(){return this.name}}return i.\u0275fac=function(e){return new(e||i)(Xt(lm))},i.\u0275dir=qr({type:i,selectors:[["","pTemplate",""]],inputs:{type:"type",name:["pTemplate","name"]}}),i})(),xa=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({imports:[Os]}),i})(),eZ=(()=>{class i{constructor(){this.dragStartSource=new Ge,this.dragStopSource=new Ge,this.dragStart$=this.dragStartSource.asObservable(),this.dragStop$=this.dragStopSource.asObservable()}startDrag(e){this.dragStartSource.next(e)}stopDrag(e){this.dragStopSource.next(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})();class tZ extends H{constructor(t,e){super()}schedule(t,e=0){return this}}const w1={setInterval(i,t,...e){const{delegate:n}=w1;return n?.setInterval?n.setInterval(i,t,...e):setInterval(i,t,...e)},clearInterval(i){const{delegate:t}=w1;return(t?.clearInterval||clearInterval)(i)},delegate:void 0};class GB extends tZ{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return w1.setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!=n&&this.delay===n&&!1===this.pending)return e;w1.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let r,n=!1;try{this.work(t)}catch(s){n=!0,r=s||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:t,scheduler:e}=this,{actions:n}=e;this.work=this.state=this.scheduler=null,this.pending=!1,O(n,this),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}}const YD={now:()=>(YD.delegate||Date).now(),delegate:void 0};class lA{constructor(t,e=lA.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,n){return new this.schedulerActionCtor(this,t).schedule(n,e)}}lA.now=YD.now;class WB extends lA{constructor(t,e=lA.now){super(t,e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(t){const{actions:e}=this;if(this._active)return void e.push(t);let n;this._active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}const rZ=new class iZ extends WB{}(class nZ extends GB{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!=n&&n>0||null==n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}});function jB(i,t=Fe){return i=i??aZ,Lt((e,n)=>{let r,s=!0;e.subscribe(Ut(n,o=>{const l=t(o);(s||!i(r,l))&&(s=!1,r=l,n.next(o))}))})}function aZ(i,t){return i===t}const cA={};function oC(i,t){if(cA[i]=(cA[i]||0)+1,"function"==typeof t)return KD(i,(...n)=>({...t(...n),type:i}));switch(t?t._as:"empty"){case"empty":return KD(i,()=>({type:i}));case"props":return KD(i,n=>({...n,type:i}));default:throw new Error("Unexpected config.")}}function KD(i,t){return Object.defineProperty(t,"type",{value:i,writable:!1})}const $B="@ngrx/store/init";let lC=(()=>{class i extends Vf{constructor(){super({type:$B})}next(e){if("function"==typeof e)throw new TypeError("\n        Dispatch expected an object, instead it received a function.\n        If you're using the createAction function, make sure to invoke the function\n        before dispatching the action. For example, someAction should be someAction().");if(typeof e>"u")throw new TypeError("Actions must be objects");if(typeof e.type>"u")throw new TypeError("Actions must have a type property");super.next(e)}complete(){}ngOnDestroy(){super.complete()}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})();const uZ=[lC],qB=new ir("@ngrx/store Internal Root Guard"),XB=new ir("@ngrx/store Internal Initial State"),QD=new ir("@ngrx/store Initial State"),YB=new ir("@ngrx/store Reducer Factory"),KB=new ir("@ngrx/store Internal Reducer Factory Provider"),ZB=new ir("@ngrx/store Initial Reducers"),JD=new ir("@ngrx/store Internal Initial Reducers"),QB=new ir("@ngrx/store Store Features"),JB=new ir("@ngrx/store Internal Store Reducers"),e2=new ir("@ngrx/store Internal Feature Reducers"),ez=new ir("@ngrx/store Internal Feature Configs"),tz=new ir("@ngrx/store Internal Store Features"),nz=new ir("@ngrx/store Internal Feature Reducers Token"),iz=new ir("@ngrx/store Feature Reducers"),rz=new ir("@ngrx/store User Provided Meta Reducers"),A1=new ir("@ngrx/store Meta Reducers"),sz=new ir("@ngrx/store Internal Resolved Meta Reducers"),oz=new ir("@ngrx/store User Runtime Checks Config"),az=new ir("@ngrx/store Internal User Runtime Checks Config"),uA=new ir("@ngrx/store Internal Runtime Checks"),t2=new ir("@ngrx/store Check if Action types are unique");function n2(i,t={}){const e=Object.keys(i),n={};for(let s=0;s<e.length;s++){const o=e[s];"function"==typeof i[o]&&(n[o]=i[o])}const r=Object.keys(n);return function(o,l){o=void 0===o?t:o;let u=!1;const p={};for(let v=0;v<r.length;v++){const w=r[v],T=o[w],k=(0,n[w])(T,l);p[w]=k,u=u||k!==T}return u?p:o}}function lz(...i){return function(t){if(0===i.length)return t;const e=i[i.length-1];return i.slice(0,-1).reduceRight((r,s)=>s(r),e(t))}}function cz(i,t){return Array.isArray(t)&&t.length>0&&(i=lz.apply(null,[...t,i])),(e,n)=>{const r=i(e);return(s,o)=>r(s=void 0===s?n:s,o)}}class r2 extends vt{}class uz extends lC{}let x1=(()=>{class i extends Vf{constructor(e,n,r,s){super(s(r,n)),this.dispatcher=e,this.initialState=n,this.reducers=r,this.reducerFactory=s}get currentReducers(){return this.reducers}addFeature(e){this.addFeatures([e])}addFeatures(e){const n=e.reduce((r,{reducers:s,reducerFactory:o,metaReducers:l,initialState:u,key:p})=>{const v="function"==typeof s?function dZ(i){const t=Array.isArray(i)&&i.length>0?lz(...i):e=>e;return(e,n)=>(e=t(e),(r,s)=>e(r=void 0===r?n:r,s))}(l)(s,u):cz(o,l)(s,u);return r[p]=v,r},{});this.addReducers(n)}removeFeature(e){this.removeFeatures([e])}removeFeatures(e){this.removeReducers(e.map(n=>n.key))}addReducer(e,n){this.addReducers({[e]:n})}addReducers(e){this.reducers={...this.reducers,...e},this.updateReducers(Object.keys(e))}removeReducer(e){this.removeReducers([e])}removeReducers(e){e.forEach(n=>{this.reducers=function hZ(i,t){return Object.keys(i).filter(e=>e!==t).reduce((e,n)=>Object.assign(e,{[n]:i[n]}),{})}(this.reducers,n)}),this.updateReducers(e)}updateReducers(e){this.next(this.reducerFactory(this.reducers,this.initialState)),this.dispatcher.next({type:"@ngrx/store/update-reducers",features:e})}ngOnDestroy(){this.complete()}}return i.\u0275fac=function(e){return new(e||i)(qn(uz),qn(QD),qn(ZB),qn(YB))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})();const pZ=[x1,{provide:r2,useExisting:x1},{provide:uz,useExisting:lC}];let s2=(()=>{class i extends Ge{ngOnDestroy(){this.complete()}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=Wo(i)))(n||i)}}(),i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})();const gZ=[s2];class hz extends vt{}let dz=(()=>{class i extends Vf{constructor(e,n,r,s){super(s);const l=e.pipe(tt(rZ)).pipe(function sZ(...i){const t=st(i);return Lt((e,n)=>{const r=i.length,s=new Array(r);let o=i.map(()=>!1),l=!1;for(let u=0;u<r;u++)pl(i[u]).subscribe(Ut(n,p=>{s[u]=p,!l&&!o[u]&&(o[u]=!0,(l=o.every(Fe))&&(o=null))},se));e.subscribe(Ut(n,u=>{if(l){const p=[u,...s];n.next(t?t(...p):p)}}))})}(n)),p=l.pipe(vD(mZ,{state:s}));this.stateSubscription=p.subscribe(({state:v,action:w})=>{this.next(v),r.next(w)})}ngOnDestroy(){this.stateSubscription.unsubscribe(),this.complete()}}return i.INIT=$B,i.\u0275fac=function(e){return new(e||i)(qn(lC),qn(r2),qn(s2),qn(QD))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})();function mZ(i={state:void 0},[t,e]){const{state:n}=i;return{state:e(n,t),action:t}}const vZ=[dz,{provide:hz,useExisting:dz}];let ny=(()=>{class i extends vt{constructor(e,n,r){super(),this.actionsObserver=n,this.reducerManager=r,this.source=e}select(e,...n){return _Z.call(null,e,...n)(this)}lift(e){const n=new i(this,this.actionsObserver,this.reducerManager);return n.operator=e,n}dispatch(e){this.actionsObserver.next(e)}next(e){this.actionsObserver.next(e)}error(e){this.actionsObserver.error(e)}complete(){this.actionsObserver.complete()}addReducer(e,n){this.reducerManager.addReducer(e,n)}removeReducer(e){this.reducerManager.removeReducer(e)}}return i.\u0275fac=function(e){return new(e||i)(qn(hz),qn(lC),qn(x1))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})();const yZ=[ny];function _Z(i,t,...e){return function(r){let s;if("string"==typeof i){const o=[t,...e].filter(Boolean);s=r.pipe(function oZ(...i){const t=i.length;if(0===t)throw new Error("list of properties cannot be empty.");return fe(e=>{let n=e;for(let r=0;r<t;r++){const s=n?.[i[r]];if(!(typeof s<"u"))return;n=s}return n})}(i,...o))}else{if("function"!=typeof i)throw new TypeError(`Unexpected type '${typeof i}' in select operator, expected 'string' or 'function'`);s=r.pipe(fe(o=>i(o,t)))}return s.pipe(jB())}}const o2="https://ngrx.io/guide/store/configuration/runtime-checks";function fz(i){return void 0===i}function pz(i){return null===i}function gz(i){return Array.isArray(i)}function mz(i){return"object"==typeof i&&null!==i}function a2(i){return"function"==typeof i}function l2(i,t){return i===t}function EZ(i,t,e){for(let n=0;n<i.length;n++)if(!e(i[n],t[n]))return!0;return!1}function c2(i,t=l2,e=l2){let s,n=null,r=null;return{memoized:function p(){if(void 0!==s)return s.result;if(!n)return r=i.apply(null,arguments),n=arguments,r;if(!EZ(arguments,n,t))return r;const v=i.apply(null,arguments);return n=arguments,e(r,v)?r:(r=v,v)},reset:function o(){n=null,r=null},setResult:function l(v){s={result:v}},clearResult:function u(){s=void 0}}}function TZ(i,t,e,n){if(void 0===e){const s=t.map(o=>o(i));return n.memoized.apply(null,s)}const r=t.map(s=>s(i,e));return n.memoized.apply(null,[...r,e])}function hA(i){return function _z(...i){return function MZ(i,t={stateFn:TZ}){return function(...e){let n=e;if(Array.isArray(n[0])){const[v,...w]=n;n=[...v,...w]}const r=n.slice(0,n.length-1),s=n[n.length-1],o=r.filter(v=>v.release&&"function"==typeof v.release),l=i(function(...v){return s.apply(null,v)}),u=c2(function(v,w){return t.stateFn.apply(null,[v,r,w,l])});return Object.assign(u.memoized,{release:function p(){u.reset(),l.reset(),o.forEach(v=>v.release())},projector:l.memoized,setResult:u.setResult,clearResult:u.clearResult})}}(c2)(...i)}(t=>{const e=t[i];return cN()&&!(i in t)&&console.warn(`@ngrx/store: The feature name "${i}" does not exist in the state, therefore createFeatureSelector cannot access it.  Be sure it is imported in a loaded module using StoreModule.forRoot('${i}', ...) or StoreModule.forFeature('${i}', ...).  If the default state is intended to be undefined, as is the case with router state, this development-only warning message can be ignored.`),e},t=>t)}function u2(i){Object.freeze(i);const t=a2(i);return Object.getOwnPropertyNames(i).forEach(e=>{if(!e.startsWith("\u0275")&&function IZ(i,t){return Object.prototype.hasOwnProperty.call(i,t)}(i,e)&&(!t||"caller"!==e&&"callee"!==e&&"arguments"!==e)){const n=i[e];(mz(n)||a2(n))&&!Object.isFrozen(n)&&u2(n)}}),i}function h2(i,t=[]){return(fz(i)||pz(i))&&0===t.length?{path:["root"],value:i}:Object.keys(i).reduce((n,r)=>{if(n)return n;const s=i[r];return function xZ(i){return a2(i)&&i.hasOwnProperty("\u0275cmp")}(s)?n:!(fz(s)||pz(s)||function wZ(i){return"number"==typeof i}(s)||function CZ(i){return"boolean"==typeof i}(s)||function bZ(i){return"string"==typeof i}(s)||gz(s))&&(function vz(i){if(!function AZ(i){return mz(i)&&!gz(i)}(i))return!1;const t=Object.getPrototypeOf(i);return t===Object.prototype||null===t}(s)?h2(s,[...t,r]):{path:[...t,r],value:s})},!1)}function bz(i,t){if(!1===i)return;const e=i.path.join("."),n=new Error(`Detected unserializable ${t} at "${e}". ${o2}#strict${t}serializability`);throw n.value=i.value,n.unserializablePath=e,n}function OZ(i){return cN()?{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!0,strictActionImmutability:!0,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1,...i}:{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!1,strictActionImmutability:!1,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1}}function FZ({strictActionSerializability:i,strictStateSerializability:t}){return e=>i||t?function RZ(i,t){return function(e,n){t.action(n)&&bz(h2(n),"action");const r=i(e,n);return t.state()&&bz(h2(r),"state"),r}}(e,{action:n=>i&&!d2(n),state:()=>t}):e}function NZ({strictActionImmutability:i,strictStateImmutability:t}){return e=>i||t?function PZ(i,t){return function(e,n){const r=t.action(n)?u2(n):n,s=i(e,r);return t.state()?u2(s):s}}(e,{action:n=>i&&!d2(n),state:()=>t}):e}function d2(i){return i.type.startsWith("@ngrx")}function BZ({strictActionWithinNgZone:i}){return t=>i?function kZ(i,t){return function(e,n){if(t.action(n)&&!Vo.isInAngularZone())throw new Error(`Action '${n.type}' running outside NgZone. ${o2}#strictactionwithinngzone`);return i(e,n)}}(t,{action:e=>i&&!d2(e)}):t}function zZ(i){return[{provide:az,useValue:i},{provide:oz,useFactory:VZ,deps:[az]},{provide:uA,deps:[oz],useFactory:OZ},{provide:A1,multi:!0,deps:[uA],useFactory:NZ},{provide:A1,multi:!0,deps:[uA],useFactory:FZ},{provide:A1,multi:!0,deps:[uA],useFactory:BZ}]}function Cz(){return[{provide:t2,multi:!0,deps:[uA],useFactory:UZ}]}function VZ(i){return i}function UZ(i){if(!i.strictActionTypeUniqueness)return;const t=Object.entries(cA).filter(([,e])=>e>1).map(([e])=>e);if(t.length)throw new Error(`Action types are registered more than once, ${t.map(e=>`"${e}"`).join(", ")}. ${o2}#strictactiontypeuniqueness`)}let wz=(()=>{class i{constructor(e,n,r,s,o,l){}}return i.\u0275fac=function(e){return new(e||i)(qn(lC),qn(r2),qn(s2),qn(ny),qn(qB,8),qn(t2,8))},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({}),i})(),HZ=(()=>{class i{constructor(e,n,r,s,o){this.features=e,this.featureReducers=n,this.reducerManager=r;const l=e.map((u,p)=>{const w=n.shift()[p];return{...u,reducers:w,initialState:Az(u.initialState)}});r.addFeatures(l)}ngOnDestroy(){this.reducerManager.removeFeatures(this.features)}}return i.\u0275fac=function(e){return new(e||i)(qn(tz),qn(iz),qn(x1),qn(wz),qn(t2,8))},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({}),i})(),GZ=(()=>{class i{static forRoot(e,n={}){return{ngModule:wz,providers:[{provide:qB,useFactory:XZ,deps:[[ny,new Ml,new mh]]},{provide:XB,useValue:n.initialState},{provide:QD,useFactory:Az,deps:[XB]},{provide:JD,useValue:e},{provide:JB,useExisting:e instanceof ir?e:JD},{provide:ZB,deps:[Iu,JD,[new ju(JB)]],useFactory:WZ},{provide:rz,useValue:n.metaReducers?n.metaReducers:[]},{provide:sz,deps:[A1,rz],useFactory:qZ},{provide:KB,useValue:n.reducerFactory?n.reducerFactory:n2},{provide:YB,deps:[KB,sz],useFactory:cz},uZ,pZ,gZ,vZ,yZ,zZ(n.runtimeChecks),Cz()]}}static forFeature(e,n,r={}){return{ngModule:HZ,providers:[{provide:ez,multi:!0,useValue:e instanceof Object?{}:r},{provide:QB,multi:!0,useValue:{key:e instanceof Object?e.name:e,reducerFactory:r instanceof ir||!r.reducerFactory?n2:r.reducerFactory,metaReducers:r instanceof ir||!r.metaReducers?[]:r.metaReducers,initialState:r instanceof ir||!r.initialState?void 0:r.initialState}},{provide:tz,deps:[Iu,ez,QB],useFactory:jZ},{provide:e2,multi:!0,useValue:e instanceof Object?e.reducer:n},{provide:nz,multi:!0,useExisting:n instanceof ir?n:e2},{provide:iz,multi:!0,deps:[Iu,e2,[new ju(nz)]],useFactory:$Z},Cz()]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({}),i})();function WZ(i,t){return t instanceof ir?i.get(t):t}function jZ(i,t,e){return e.map((n,r)=>{if(t[r]instanceof ir){const s=i.get(t[r]);return{key:n.key,reducerFactory:s.reducerFactory?s.reducerFactory:n2,metaReducers:s.metaReducers?s.metaReducers:[],initialState:s.initialState}}return n})}function $Z(i,t){return t.map(n=>n instanceof ir?i.get(n):n)}function Az(i){return"function"==typeof i?i():i}function qZ(i,t){return i.concat(t)}function XZ(i){if(i)throw new TypeError("StoreModule.forRoot() called twice. Feature modules should use StoreModule.forFeature() instead.");return"guarded"}function dA(...i){return{reducer:i.pop(),types:i.map(n=>n.type)}}function fA(i,...t){const e=new Map;for(const n of t)for(const r of n.types){const s=e.get(r);e.set(r,s?(l,u)=>n.reducer(s(l,u),u):n.reducer)}return function(n=i,r){const s=e.get(r.type);return s?s(n,r):n}}const pA=oC("[SysGraph List/API] Retrieve Graphs Success",{_as:"props",_p:void 0}),I1=oC("[SysGraph List/API] Retrieve Graph Success",{_as:"props",_p:void 0}),f2=hA("graphs"),p2=hA("graph"),KZ=new WB(GB);class eQ extends Ge{constructor(t=1/0,e=1/0,n=YD){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=n,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:n,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:o}=this;e||(n.push(t),!r&&n.push(s.now()+o)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:n,_buffer:r}=this,s=r.slice();for(let o=0;o<s.length&&!t.closed;o+=n?1:2)t.next(s[o]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:n,_infiniteTimeWindow:r}=this,s=(r?1:2)*t;if(t<1/0&&s<n.length&&n.splice(0,n.length-s),!r){const o=e.now();let l=0;for(let u=1;u<n.length&&n[u]<=o;u+=2)l=u;l&&n.splice(0,l+1)}}}function g2(i,t,e){let n,r=!1;return i&&"object"==typeof i?({bufferSize:n=1/0,windowTime:t=1/0,refCount:r=!1,scheduler:e}=i):n=i??1/0,So({connector:()=>new eQ(n,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}var xz={},Iz={};function tQ(i){for(var t=[],e=0,n=0,r=0;r<i.length;r+=1){var s=xz[i[r]];if(void 0===s)throw new Error("Invalid character ("+i[r]+")");var o=32&s;if(n+=(s&=31)<<e,o)e+=5;else{var l=1&n;n>>>=1,t.push(l?0===n?-2147483648:-n:n),n=e=0}}return t}"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split("").forEach(function(i,t){xz[i]=t,Iz[t]=i});const S1="TOKEN_LOGGER_CONFIG";class nQ{constructor(t){this.config=this._clone(t)}get level(){return this.config.level}get serverLogLevel(){return this.config.serverLogLevel}updateConfig(t){this.config=this._clone(t)}partialUpdateConfig(t){!t||Object.keys(t).forEach(e=>{this.config[e]=t[e]})}getConfig(){return this._clone(this.config)}_clone(t){const e={level:null};return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}}const gA="TOKEN_LOGGER_CONFIG_ENGINE_FACTORY";class iQ{provideConfigEngine(t){return new nQ(t)}}const mA="TOKEN_LOGGER_MAPPER_SERVICE";let rQ=(()=>{class i{constructor(e){this.httpBackend=e,this.sourceMapCache=new Map,this.logPositionCache=new Map}getLogPosition(e,n){const r=this.getStackLine(e);if(!r)return $r({fileName:"",lineNumber:0,columnNumber:0});const s=this.getLocalPosition(r);if(!e.enableSourceMaps)return $r(s);const o=this.getSourceMapLocation(r);return this.getSourceMap(o,s)}getStackLine(e){const n=new Error;try{throw n}catch{try{let s=4;return n.stack.split("\n")[0].includes(".js:")||(s+=1),n.stack.split("\n")[s+(e.proxiedSteps||0)]}catch{return null}}}getLocalPosition(e){const n=e.lastIndexOf("/");let r=e.indexOf(")");r<0&&(r=void 0);const o=e.substring(n+1,r).split(":");return 3===o.length?{fileName:o[0],lineNumber:+o[1],columnNumber:+o[2]}:{fileName:"unknown",lineNumber:0,columnNumber:0}}getTranspileLocation(e){let n=e.indexOf("(");n<0&&(n=e.lastIndexOf("@"),n<0&&(n=e.lastIndexOf(" ")));let r=e.indexOf(")");return r<0&&(r=void 0),e.substring(n+1,r)}getSourceMapLocation(e){const n=this.getTranspileLocation(e),r=n.substring(0,n.lastIndexOf(":"));return r.substring(0,r.lastIndexOf(":"))+".map"}getMapping(e,n){let r=0,s=0,o=0;const l=e.mappings.split(";");for(let u=0;u<l.length;u++){let p=0;const v=l[u].split(",");for(let w=0;w<v.length;w++){const I=tQ(v[w]);if(I.length>=4&&(p+=I[0],r+=I[1],s+=I[2],o+=I[3]),u===n.lineNumber){if(p===n.columnNumber)return{fileName:e.sources[r],lineNumber:s,columnNumber:o};if(w+1===v.length)return{fileName:e.sources[r],lineNumber:s,columnNumber:0}}}}return{fileName:"unknown",lineNumber:0,columnNumber:0}}getSourceMap(e,n){const r=new p0("GET",e),s=`${n.fileName}:${n.lineNumber}:${n.columnNumber}`;if(this.logPositionCache.has(s))return this.logPositionCache.get(s);this.sourceMapCache.has(e)||(this.httpBackend?this.sourceMapCache.set(e,this.httpBackend.handle(r).pipe(gg(l=>l instanceof Kb),fe(l=>l.body),function JZ(i=1/0){let t;t=i&&"object"==typeof i?i:{count:i};const{count:e=1/0,delay:n,resetOnSuccess:r=!1}=t;return e<=0?Fe:Lt((s,o)=>{let u,l=0;const p=()=>{let v=!1;u=s.subscribe(Ut(o,w=>{r&&(l=0),o.next(w)},void 0,w=>{if(l++<e){const I=()=>{u?(u.unsubscribe(),u=null,p()):v=!0};if(null!=n){const T="number"==typeof n?function QZ(i=0,t,e=KZ){let n=-1;return null!=t&&(Ze(t)?e=t:n=t),new vt(r=>{let s=function ZZ(i){return i instanceof Date&&!isNaN(i)}(i)?+i-e.now():i;s<0&&(s=0);let o=0;return e.schedule(function(){r.closed||(r.next(o++),0<=n?this.schedule(void 0,n):r.complete())},s)})}(n):pl(n(w,l)),k=Ut(o,()=>{k.unsubscribe(),I()},()=>{o.complete()});T.subscribe(k)}else I()}else o.error(w)})),v&&(u.unsubscribe(),u=null,p())};p()})}(3),g2(1))):(console.error("NGXLogger : Can't get sourcemap because HttpBackend is not provided. You need to import HttpClientModule"),this.sourceMapCache.set(e,$r(null))));const o=this.sourceMapCache.get(e).pipe(fe(l=>l?this.getMapping(l,n):n),Jm(()=>$r(n)),g2(1));return this.logPositionCache.set(s,o),o}}return i.\u0275fac=function(e){return new(e||i)(qn(QI,8))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})();const vA="TOKEN_LOGGER_METADATA_SERVICE";let sQ=(()=>{class i{constructor(e){this.datePipe=e}computeTimestamp(e){const n=()=>(new Date).toISOString();return e.timestampFormat?this.datePipe?this.datePipe.transform(new Date,e.timestampFormat):(console.error("NGXLogger : Can't use timeStampFormat because DatePipe is not provided. You need to provide DatePipe"),n()):n()}getMetadata(e,n,r,s){const o={level:e,additional:s};return o.message=r&&"function"==typeof r?r():r,o.timestamp=this.computeTimestamp(n),o}}return i.\u0275fac=function(e){return new(e||i)(qn(zN,8))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})();const yA="TOKEN_LOGGER_RULES_SERVICE";let oQ=(()=>{class i{shouldCallWriter(e,n,r,s){return!n.disableConsoleLogging&&e>=n.level}shouldCallServer(e,n,r,s){return!!n.serverLoggingUrl&&e>=n.serverLogLevel}shouldCallMonitor(e,n,r,s){return this.shouldCallWriter(e,n,r,s)||this.shouldCallServer(e,n,r,s)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})();const _A="TOKEN_LOGGER_SERVER_SERVICE";let aQ=(()=>{class i{constructor(e){this.httpBackend=e}secureErrorObject(e){return e?.stack}secureAdditionalParameters(e){return null==e?null:e.map((n,r)=>{try{return n instanceof Error?this.secureErrorObject(n):("object"==typeof n&&JSON.stringify(n),n)}catch{return`The additional[${r}] value could not be parsed using JSON.stringify().`}})}secureMessage(e){try{if(e instanceof Error)return this.secureErrorObject(e);"string"!=typeof e&&(e=JSON.stringify(e,null,2))}catch{e='The provided "message" value could not be parsed with JSON.stringify().'}return e}alterHttpRequest(e){return e}logOnServer(e,n,r){if(!this.httpBackend)return console.error("NGXLogger : Can't log on server because HttpBackend is not provided. You need to import HttpClientModule"),$r(null);let s=new p0("POST",e,n,r||{}),o=$r(s);const l=this.alterHttpRequest(s);return function YZ(i){return!!i&&(i instanceof vt||X(i.lift)&&X(i.subscribe))}(l)?o=l:l?o=$r(l):console.warn("NGXLogger : alterHttpRequest returned an invalid request. Using default one instead"),o.pipe(Zv(u=>u?this.httpBackend.handle(u):(console.warn("NGXLogger : alterHttpRequest returned an invalid request (observable). Using default one instead"),this.httpBackend.handle(s))),gg(u=>u instanceof Kb),fe(u=>u.body))}customiseRequestBody(e){return e}sendToServer(e,n){const r={...e};r.additional=this.secureAdditionalParameters(r.additional),r.message=this.secureMessage(r.message);const s=this.customiseRequestBody(r),o=n.customHttpHeaders||new Qm;o.has("Content-Type")||o.set("Content-Type","application/json"),this.logOnServer(n.serverLoggingUrl,s,{headers:o,params:n.customHttpParams||new Qv,responseType:n.httpResponseType||"json",withCredentials:n.withCredentials||!1}).pipe(Jm(l=>(console.error("NGXLogger: Failed to log on server",l),Zb(l)))).subscribe()}}return i.\u0275fac=function(e){return new(e||i)(qn(QI,8))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})();const bA="TOKEN_LOGGER_WRITER_SERVICE";var qc=(()=>{return(i=qc||(qc={}))[i.TRACE=0]="TRACE",i[i.DEBUG=1]="DEBUG",i[i.INFO=2]="INFO",i[i.LOG=3]="LOG",i[i.WARN=4]="WARN",i[i.ERROR=5]="ERROR",i[i.FATAL=6]="FATAL",i[i.OFF=7]="OFF",qc;var i})();const lQ=["purple","teal","gray","gray","red","red","red"];let cQ=(()=>{class i{constructor(e){this.platformId=e,this.prepareMetaStringFuncs=[this.getTimestampToWrite,this.getLevelToWrite,this.getFileDetailsToWrite,this.getContextToWrite],this.isIE=eD(e)&&navigator&&navigator.userAgent&&!(-1===navigator.userAgent.indexOf("MSIE")&&!navigator.userAgent.match(/Trident\//)&&!navigator.userAgent.match(/Edge\//)),this.logFunc=this.isIE?this.logIE.bind(this):this.logModern.bind(this)}getTimestampToWrite(e,n){return e.timestamp}getLevelToWrite(e,n){return qc[e.level]}getFileDetailsToWrite(e,n){return!0===n.disableFileDetails?"":`[${e.fileName}:${e.lineNumber}:${e.columnNumber}]`}getContextToWrite(e,n){return n.context?`{${n.context}}`:""}prepareMetaString(e,n){let r="";return this.prepareMetaStringFuncs.forEach(s=>{const o=s(e,n);o&&(r=r+" "+o)}),r.trim()}getColor(e,n){if(e.level!==qc.OFF)return(n.colorScheme??lQ)[e.level]}logIE(e,n,r){const s=e.additional||[];switch(e.level){case qc.WARN:console.warn(`${r} `,e.message,...s);break;case qc.ERROR:case qc.FATAL:console.error(`${r} `,e.message,...s);break;case qc.INFO:console.info(`${r} `,e.message,...s);break;default:console.log(`${r} `,e.message,...s)}}logModern(e,n,r){const s=this.getColor(e,n),o=e.additional||[];switch(e.level){case qc.WARN:console.warn(`%c${r}`,`color:${s}`,e.message,...o);break;case qc.ERROR:case qc.FATAL:console.error(`%c${r}`,`color:${s}`,e.message,...o);break;case qc.INFO:console.info(`%c${r}`,`color:${s}`,e.message,...o);break;case qc.DEBUG:console.debug(`%c${r}`,`color:${s}`,e.message,...o);break;default:console.log(`%c${r}`,`color:${s}`,e.message,...o)}}writeMessage(e,n){const r=this.prepareMetaString(e,n);this.logFunc(e,n,r)}}return i.\u0275fac=function(e){return new(e||i)(qn(Yb))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})(),Id=(()=>{class i{constructor(e,n,r,s,o,l,u){this.metadataService=r,this.ruleService=s,this.mapperService=o,this.writerService=l,this.serverService=u,this.configEngine=n.provideConfigEngine(e)}get level(){return this.configEngine.level}get serverLogLevel(){return this.configEngine.serverLogLevel}trace(e,...n){this._log(qc.TRACE,e,n)}debug(e,...n){this._log(qc.DEBUG,e,n)}info(e,...n){this._log(qc.INFO,e,n)}log(e,...n){this._log(qc.LOG,e,n)}warn(e,...n){this._log(qc.WARN,e,n)}error(e,...n){this._log(qc.ERROR,e,n)}fatal(e,...n){this._log(qc.FATAL,e,n)}setCustomHttpHeaders(e){const n=this.getConfigSnapshot();n.customHttpHeaders=e,this.updateConfig(n)}setCustomParams(e){const n=this.getConfigSnapshot();n.customHttpParams=e,this.updateConfig(n)}setWithCredentialsOptionValue(e){const n=this.getConfigSnapshot();n.withCredentials=e,this.updateConfig(n)}registerMonitor(e){this._loggerMonitor=e}updateConfig(e){this.configEngine.updateConfig(e)}partialUpdateConfig(e){this.configEngine.partialUpdateConfig(e)}getConfigSnapshot(){return this.configEngine.getConfig()}_log(e,n,r=[]){const s=this.configEngine.getConfig(),o=this.ruleService.shouldCallWriter(e,s,n,r),l=this.ruleService.shouldCallServer(e,s,n,r),u=this.ruleService.shouldCallMonitor(e,s,n,r);if(!o&&!l&&!u)return;const p=this.metadataService.getMetadata(e,s,n,r);this.mapperService.getLogPosition(s,p).pipe(Qb(1)).subscribe(v=>{v&&(p.fileName=v.fileName,p.lineNumber=v.lineNumber,p.columnNumber=v.columnNumber),u&&this._loggerMonitor&&this._loggerMonitor.onLog(p,s),o&&this.writerService.writeMessage(p,s),l&&this.serverService.sendToServer(p,s)})}}return i.\u0275fac=function(e){return new(e||i)(qn(S1),qn(gA),qn(vA),qn(yA),qn(mA),qn(bA),qn(_A))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),uQ=(()=>{class i{constructor(e,n,r,s,o,l,u){this.logger=e,this.configEngineFactory=n,this.metadataService=r,this.ruleService=s,this.mapperService=o,this.writerService=l,this.serverService=u}create(e,n,r,s){return this.getNewInstance({config:e,serverService:n,logMonitor:r,mapperService:s})}getNewInstance(e){const n=new Id(e?.config??this.logger.getConfigSnapshot(),e?.configEngineFactory??this.configEngineFactory,e?.metadataService??this.metadataService,e?.ruleService??this.ruleService,e?.mapperService??this.mapperService,e?.writerService??this.writerService,e?.serverService??this.serverService);return e?.partialConfig&&n.partialUpdateConfig(e.partialConfig),e?.logMonitor&&n.registerMonitor(e.logMonitor),n}}return i.\u0275fac=function(e){return new(e||i)(qn(Id),qn(gA),qn(vA),qn(yA),qn(mA),qn(bA),qn(_A))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),hQ=(()=>{class i{static forRoot(e,n){if(n||(n={}),n.configProvider){if(n.configProvider.provide!==S1)throw new Error(`Wrong injection token for configProvider, it should be ${S1} and you used ${n.configProvider.provide}`)}else n.configProvider={provide:S1,useValue:e||{}};if(n.configEngineFactoryProvider){if(n.configEngineFactoryProvider.provide!==gA)throw new Error(`Wrong injection token for configEngineFactoryProvider, it should be '${gA}' and you used '${n.configEngineFactoryProvider.provide}'`)}else n.configEngineFactoryProvider={provide:gA,useClass:iQ};if(n.metadataProvider){if(n.metadataProvider.provide!==vA)throw new Error(`Wrong injection token for metadataProvider, it should be '${vA}' and you used '${n.metadataProvider.provide}'`)}else n.metadataProvider={provide:vA,useClass:sQ};if(n.ruleProvider){if(n.ruleProvider.provide!==yA)throw new Error(`Wrong injection token for ruleProvider, it should be '${yA}' and you used '${n.ruleProvider.provide}'`)}else n.ruleProvider={provide:yA,useClass:oQ};if(n.mapperProvider){if(n.mapperProvider.provide!==mA)throw new Error(`Wrong injection token for mapperProvider, it should be '${mA}' and you used '${n.mapperProvider.provide}'`)}else n.mapperProvider={provide:mA,useClass:rQ};if(n.writerProvider){if(n.writerProvider.provide!==bA)throw new Error(`Wrong injection token for writerProvider, it should be '${bA}' and you used '${n.writerProvider.provide}'`)}else n.writerProvider={provide:bA,useClass:cQ};if(n.serverProvider){if(n.serverProvider.provide!==_A)throw new Error(`Wrong injection token for serverProvider, it should be '${_A}' and you used '${n.writerProvider.provide}'`)}else n.serverProvider={provide:_A,useClass:aQ};return{ngModule:i,providers:[Id,n.configProvider,n.configEngineFactoryProvider,n.metadataProvider,n.ruleProvider,n.mapperProvider,n.writerProvider,n.serverProvider,uQ]}}static forChild(){return{ngModule:i}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({imports:[[Os]]}),i})();function Ez(i,t,e,n,r,s,o){try{var l=i[s](o),u=l.value}catch(p){return void e(p)}l.done?t(u):Promise.resolve(u).then(n,r)}function tv(i){return function(){var t=this,e=arguments;return new Promise(function(n,r){var s=i.apply(t,e);function o(u){Ez(s,n,r,o,l,"next",u)}function l(u){Ez(s,n,r,o,l,"throw",u)}o(void 0)})}}var Tz=U(5452);class E1{init(t,e,n){this.storage=e,this.logger=n,this.selector=`my-system-${t}`,this.findAll()||this.storage.store(this.selector,[])}findOne(t){let e=this.findAll(),n=Ki.find(e,r=>t===r.id);if(n)return this.logger.info(`${this.selector} FINDONE`,n),n}delete(t){let e=this.findAll();return Ki.remove(e,n=>t===n.id),this.storage.store(this.selector,e),this.logger.info("DELETE",t),e}store(t,e){let n=this.findAll(),r=Ki.find(n,s=>t.id===s.id);return r?(r.id=t.id,e(r),this.logger.info("STORE/UPDATE",r)):(n.push(t),this.logger.info("STORE/INSERT",t)),this.storage.store(this.selector,n),n}findAll(){let t=this.storage.retrieve(this.selector);if(t){let e=JSON.parse(JSON.stringify(t));return this.logger.info(`${this.selector} FINDALL`,e),e}return this.storage.store(this.selector,[]),[]}reset(){return this.logger.info("RESET",this.selector),this.storage.store(this.selector,[]),[]}}var pm=(()=>{return(i=pm||(pm={})).Local="local_strategy",i.Session="session_strategy",i.InMemory="in_memory_strategy",pm;var i})();function T1(){}let nv=(()=>{class i{static normalize(e){return e=i.isCaseSensitive?e:e.toLowerCase(),`${i.prefix}${i.separator}${e}`}static isNormalizedKey(e){return 0===e.indexOf(i.prefix+i.separator)}static setPrefix(e){i.prefix=e}static setSeparator(e){i.separator=e}static setCaseSensitive(e){i.isCaseSensitive=e}static consumeConfiguration(e){"prefix"in e&&this.setPrefix(e.prefix),"separator"in e&&this.setSeparator(e.separator),"caseSensitive"in e&&this.setCaseSensitive(e.caseSensitive)}}return i.prefix="ngx-webstorage",i.separator="|",i.isCaseSensitive=!1,i})();class M1{constructor(t){this.strategy=t}retrieve(t){let e;return this.strategy.get(nv.normalize(t)).subscribe(n=>e=typeof n>"u"?null:n),e}store(t,e){return this.strategy.set(nv.normalize(t),e).subscribe(T1),e}clear(t){void 0!==t?this.strategy.del(nv.normalize(t)).subscribe(T1):this.strategy.clear().subscribe(T1)}getStrategyName(){return this.strategy.name}observe(t){return t=nv.normalize(t),this.strategy.keyChanges.pipe(gg(e=>null===e||e===t),dm(()=>this.strategy.get(t)),jB(),g2({refCount:!0,bufferSize:1}))}}let m2=(()=>{class i{constructor(){this.caches={}}get(e,n){return this.getCacheStore(e)[n]}set(e,n,r){this.getCacheStore(e)[n]=r}del(e,n){delete this.getCacheStore(e)[n]}clear(e){this.caches[e]={}}getCacheStore(e){return e in this.caches?this.caches[e]:this.caches[e]={}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Mz=new ir("window_local_storage"),vQ={provide:Mz,useFactory:function mQ(){return typeof window<"u"?window.localStorage:null}},Dz=new ir("window_session_storage"),_Q={provide:Dz,useFactory:function yQ(){return typeof window<"u"?window.sessionStorage:null}};class Lz{constructor(t,e){this.storage=t,this.cache=e,this.keyChanges=new Ge}get isAvailable(){return void 0===this._isAvailable&&(this._isAvailable=class dQ{static isStorageAvailable(t){let e=!0;try{"object"==typeof t?(t.setItem("test-storage","foobar"),t.removeItem("test-storage")):e=!1}catch{e=!1}return e}}.isStorageAvailable(this.storage)),this._isAvailable}get(t){let e=this.cache.get(this.name,t);if(void 0!==e)return $r(e);try{const n=this.storage.getItem(t);null!==n&&(e=JSON.parse(n),this.cache.set(this.name,t,e))}catch(n){console.warn(n)}return $r(e)}set(t,e){const n=JSON.stringify(e);return this.storage.setItem(t,n),this.cache.set(this.name,t,e),this.keyChanges.next(t),$r(e)}del(t){return this.storage.removeItem(t),this.cache.del(this.name,t),this.keyChanges.next(t),$r(null)}clear(){return this.storage.clear(),this.cache.clear(this.name),this.keyChanges.next(null),$r(null)}}class iy extends Lz{constructor(t,e,n,r){super(t,e),this.storage=t,this.cache=e,this.platformId=n,this.zone=r,this.name=iy.strategyName,eD(this.platformId)&&this.listenExternalChanges()}listenExternalChanges(){window.addEventListener("storage",t=>this.zone.run(()=>{if(t.storageArea!==this.storage)return;const e=t.key;null!==e?this.cache.del(this.name,t.key):this.cache.clear(this.name),this.keyChanges.next(e)}))}}iy.strategyName=pm.Local,iy.\u0275fac=function(t){return new(t||iy)(qn(Mz),qn(m2),qn(Yb),qn(Vo))},iy.\u0275prov=Zi({token:iy,factory:iy.\u0275fac});class ry extends Lz{constructor(t,e,n,r){super(t,e),this.storage=t,this.cache=e,this.platformId=n,this.zone=r,this.name=ry.strategyName,eD(this.platformId)&&this.listenExternalChanges()}listenExternalChanges(){window.addEventListener("storage",t=>this.zone.run(()=>{if(t.storageArea!==this.storage)return;const e=t.key;null!==t.key?this.cache.del(this.name,t.key):this.cache.clear(this.name),this.keyChanges.next(e)}))}}ry.strategyName=pm.Session,ry.\u0275fac=function(t){return new(t||ry)(qn(Dz),qn(m2),qn(Yb),qn(Vo))},ry.\u0275prov=Zi({token:ry,factory:ry.\u0275fac});class sy{constructor(t){this.cache=t,this.keyChanges=new Ge,this.isAvailable=!0,this.name=sy.strategyName}get(t){return $r(this.cache.get(this.name,t))}set(t,e){return this.cache.set(this.name,t,e),this.keyChanges.next(t),$r(e)}del(t){return this.cache.del(this.name,t),this.keyChanges.next(t),$r(null)}clear(){return this.cache.clear(this.name),this.keyChanges.next(null),$r(null)}}sy.strategyName=pm.InMemory,sy.\u0275fac=function(t){return new(t||sy)(qn(m2))},sy.\u0275prov=Zi({token:sy,factory:sy.\u0275fac});const D1=new ir("STORAGE_STRATEGIES"),bQ=[{provide:D1,useClass:sy,multi:!0},{provide:D1,useClass:iy,multi:!0},{provide:D1,useClass:ry,multi:!0}],Pz="invalid_strategy";let _0=(()=>{class i{constructor(e){this.strategies=e,this.registration$=new Ge,e||(e=[]),this.strategies=e.reverse().map((n,r,s)=>n.name).map((n,r,s)=>s.indexOf(n)===r?r:null).filter(n=>null!==n).map(n=>e[n])}static get(e){if(!this.isStrategyRegistered(e))throw Error(Pz);let n=this.index[e];return n.isAvailable||(n=this.index[pm.InMemory]),n}static set(e,n){this.index[e]=n}static clear(e){void 0!==e?delete this.index[e]:this.index={}}static isStrategyRegistered(e){return e in this.index}static hasRegistredStrategies(){return Object.keys(this.index).length>0}getStrategy(e){return i.get(e)}indexStrategies(){this.strategies.forEach(e=>this.register(e.name,e))}indexStrategy(e,n=!1){if(i.isStrategyRegistered(e)&&!n)return i.get(e);const r=this.strategies.find(s=>s.name===e);if(!r)throw new Error(Pz);return this.register(e,r,n),r}register(e,n,r=!1){(!i.isStrategyRegistered(e)||r)&&(i.set(e,n),this.registration$.next(e))}}return i.index={},i.\u0275fac=function(e){return new(e||i)(qn(D1,8))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class cC extends M1{}const EQ=[{provide:cC,useFactory:function wQ(i){const t=i.indexStrategy(pm.Local);return new M1(t)},deps:[_0]},{provide:class xQ extends M1{},useFactory:function IQ(i){const t=i.indexStrategy(pm.Session);return new M1(t)},deps:[_0]}],kz=new ir("ngx_webstorage_config");function TQ(i){return i.indexStrategies(),()=>_0.index}let MQ=(()=>{class i{constructor(e,n){n?nv.consumeConfiguration(n):console.error("NgxWebstorage : Possible misconfiguration (The forRoot method usage is mandatory since the 3.0.0)")}static forRoot(e={}){return{ngModule:i,providers:[{provide:kz,useValue:e},vQ,_Q,...EQ,...bQ,{provide:Vw,useFactory:TQ,deps:[_0],multi:!0}]}}}return i.\u0275fac=function(e){return new(e||i)(qn(_0),qn(kz,8))},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({}),i})(),Oz=(()=>{class i{constructor(){}ascii_to_u8a(e){return new Uint8Array(e.length).map((r,s)=>e.codePointAt(s)??0)}u8a_to_hex(e){let n="";for(const r of e)n+=r.toString(16).padStart(2,"0");return n}hex_to_u8a(e){if(e.length%2)throw new Error("odd string length");const n=new Uint8Array(e.length/2);for(let r=0;r<n.length;r++){const s=e.slice(2*r,2*r+2);n[r]=parseInt(s,16)}return n}u8a_to_ascii(e){let n="";for(const r of e)n+=String.fromCharCode(r);return n}encode(e){return this.u8a_to_hex(this.ascii_to_u8a(e))}decode(e){return this.u8a_to_ascii(this.hex_to_u8a(e))}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Fz=new Tz.Parser;let L1=(()=>{class i extends E1{constructor(e,n,r,s){super(),this._logger=e,this._storage=n,this.base16=r,this.messageService=s,this.init("graphs",this._storage,this._logger)}outputNodes(e){return Ki.map(Ki.sortBy(e?.nodes,n=>n.id),n=>{let r={uid:this.base16.decode(n.id),label:n.label,x:n.x,y:n.y,group:void 0===n.group?null:n.group,tag:void 0===n.tag?null:n.tag};return n.parent&&(r.parent=this.base16.decode(n.parent)),n.cdata&&(r.cdata=n.cdata),n.alias&&(r.alias=n.alias),r})}outputEdges(e){return Ki.map(Ki.sortBy(e?.edges,n=>n.id),n=>{let r={uid:this.base16.decode(n.id),label:n.label,source:this.base16.decode(n.source),target:this.base16.decode(n.target),tag:void 0===n.tag?null:n.tag};return n.cdata&&(r.cdata=n.cdata),r})}computeInstance(e,n){return e[n]?e[n].count++:e[n]={count:1},e[n]}buildId(e,n){let r=this.computeInstance(e,`${n.source}:${n.target}`),s="";return r.count>1&&(s="@"+(r.count-1)),`${n.source}:${n.target}${s}`}toGexf(e){this._logger.info("toGexf",e);let n=[];n.push('<?xml version="1.0" encoding="UTF-8"?>'),n.push('<gexf xmlns="http://gexf.net/1.2" version="1.2">'),n.push('<meta lastmodifieddate="2009-03-20">'),n.push("<creator>Gexf.net</creator>"),n.push("<description>A hello world! file</description>"),n.push("</meta>"),n.push(`<graph mode="static" defaultedgetype="directed" style="${e?.style}">`),n.push("<nodes>"),Ki.each(Ki.sortBy(this.outputNodes(e),"uid"),o=>{let l=" />";o.cdata&&(l=">"),null==o.alias&&(o.alias=""),n.push(null===o.tag?o.parent?`<node id="${o.uid}" parent="${parent}" label="${o.label}" alias="${o.alias}" group="${o.group}" x="${o.x}" y="${o.y}"${l}`:`<node id="${o.uid}" label="${o.label}" alias="${o.alias}" group="${o.group}" x="${o.x}" y="${o.y}"${l}`:o.parent?`<node id="${o.uid}" parent="${o.parent}" label="${o.label}" alias="${o.alias}" group="${o.group}" x="${o.x}" y="${o.y}" tag="${o.tag}"${l}`:`<node id="${o.uid}" label="${o.label}" alias="${o.alias}" group="${o.group}" x="${o.x}" y="${o.y}" tag="${o.tag}"${l}`),o.cdata&&(n.push(`<![CDATA[${o.cdata}]]>`),n.push("</node>"))}),n.push("</nodes>"),n.push("<edges>");let r=Ki.map(this.outputEdges(e),o=>(o.uid=`${o.source}:${o.target}`,o)),s={};return Ki.each(Ki.sortBy(r,"uid"),o=>{let l=" />";o.cdata&&(l=">"),n.push(null===o.tag?`<edge id="${this.buildId(s,o)}" source="${o.source}" target="${o.target}" label="${o.label}"${l}`:`<edge id="${this.buildId(s,o)}" source="${o.source}" target="${o.target}" label="${o.label}" tag="${o.tag}"${l}`),o.cdata&&(n.push(`<![CDATA[${o.cdata}]]>`),n.push("</edge>"))}),n.push("</edges>"),n.push("</graph>"),n.push("</gexf>"),n}toGraphml(e){let n=[];n.push('<?xml version="1.0" encoding="UTF-8"?>'),n.push('<graphml xmlns="http://graphml.graphdrawing.org/xmlns" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://graphml.graphdrawing.org/xmlns/1.0/graphml.xsd">'),n.push(`<graph id="G" edgedefault="undirected" style="${e?.style}">`),Ki.each(this.outputNodes(e),s=>{let o=" />";s.cdata&&(o=">"),n.push(null===s.tag?s.parent?`<node id="${s.uid}" parent="${parent}" label="${s.label}" group="${s.group}" x="${s.x}" y="${s.y}"${o}`:`<node id="${s.uid}" label="${s.label}" group="${s.group}" x="${s.x}" y="${s.y}"${o}`:s.parent?`<node id="${s.uid}" parent="${s.parent}" label="${s.label}" group="${s.group}" x="${s.x}" y="${s.y}" tag="${s.tag}"${o}`:`<node id="${s.uid}" label="${s.label}" group="${s.group}" x="${s.x}" y="${s.y}" tag="${s.tag}"${o}`),s.cdata&&(n.push(`<![CDATA[${s.cdata}]]>`),n.push("</node>"))});let r={};return Ki.each(this.outputEdges(e),s=>{let o=" />";s.cdata&&(o=">"),n.push(null===s.tag?`<edge id="${this.buildId(r,s)}" source="${s.source}" target="${s.target}" label="${s.label}"${o}`:`<edge id="${this.buildId(r,s)}" source="${s.source}" target="${s.target}" label="${s.label}" tag="${s.tag}"${o}`),s.cdata&&(n.push(`<![CDATA[${s.cdata}]]>`),n.push("</edge>"))}),n.push("</graph>"),n.push("</graphml>"),n}filterCDATA(e){if(e){let n="";for(let r=1;r<e.length-1;r++)n+=e.charAt(r);return n}}loadGraphGexf(e,n,r){var s=this;return tv(function*(){return s._logger.info(`loadGraphGexf: ${e}`),new Promise(o=>{Fz.parseString(r,(l,u)=>{if(l)throw s._logger.error(l),l;let p={id:e,style:"default",rules:"default",label:n,nodes:[],edges:[]};Ki.each(u.gexf.graph,v=>{p.style=v.$.style;let w={};s._logger.info("loading nodes",v.nodes),Ki.each(v.nodes,I=>{Ki.each(I.node,T=>{let k={id:s.base16.encode(T.$.id),x:parseFloat(T.$.x),y:parseFloat(T.$.y),cdata:s.filterCDATA(T._),alias:T.$.alias?T.$.alias:"",label:T.$.label?T.$.label:"",group:T.$.group?T.$.group:"",tag:T.$.tag?T.$.tag:""};w[k.id]=!0,T.$.parent&&(k.parent=s.base16.encode(T.$.parent)),p.nodes.push(k)})}),s._logger.info("loading edges",v.edges),Ki.each(v.edges,I=>{Ki.each(I.edge,T=>{let k={id:s.base16.encode(T.$.id),source:s.base16.encode(T.$.source),target:s.base16.encode(T.$.target),cdata:s.filterCDATA(T._),label:T.$.label?T.$.label:"",tag:T.$.tag?T.$.tag:""};if(!w[k.source])throw s._logger.error("source unkown",T.$),new Error(`source unkown ${T.$.source}`);if(!w[k.target])throw s._logger.error("target unkown",T.$),new Error(`target unkown ${T.$.target}`);p.edges.push(k)})})}),s._logger.info(p),o(p)})})})()}extractMlData(e,n){let r=Ki.find(e.data,s=>{if(s.$.key===n)return s});return r?r._:0}loadGraphMl(e,n,r){var s=this;return tv(function*(){return s._logger.info(`loadGraphMl: ${e}`),new Promise(o=>{Fz.parseString(r,(l,u)=>{if(l)throw l;let p={id:e,style:"default",rules:"default",label:n,nodes:[],edges:[]},v=[];Ki.each(u.graphml.graph.key,w=>{v.push({label:w.id,type:w["attr.type"]})}),Ki.each(u.graphml.graph,w=>{Ki.each(w.node,I=>{let T={id:I.$.id,label:s.extractMlData(I,"tooltip"),x:parseFloat(s.extractMlData(I,"x")),y:parseFloat(s.extractMlData(I,"y"))};p.nodes.push(T)}),Ki.each(w.edge,I=>{p.edges.push({id:I.$.id,label:"default",source:I.$.source,target:I.$.target})})}),o(p)})})})()}uploadHandler(e,n,r){var s=this;return new Promise(o=>{let l=new FileReader;l.addEventListener("loadend",tv(function*(){let u=new String(l.result),p={id:n,style:"default",rules:"default",label:r,nodes:[],edges:[]};u.includes('xmlns="http://gexf')&&(s.messageService.add({severity:"info",summary:"Info",detail:`Load GEXF file to ${r}`}),p=yield s.loadGraphGexf(n,r,u.toString())),u.includes("http://graphml.graphdrawing.org")&&(s.messageService.add({severity:"info",summary:"Info",detail:`Load GRAPHML file to ${r}`}),p=yield s.loadGraphMl(n,r,u.toString())),0==p.nodes.length&&s.messageService.add({severity:"warn",summary:"warn",detail:`No node for ${r}`}),o(p)})),l.readAsText(e)})}}return i.\u0275fac=function(e){return new(e||i)(qn(Id),qn(cC),qn(Oz),qn(fm))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),P1=(()=>{class i{constructor(e){this.logger=e}fallbackCopyTextToClipboard(e){var n=document.createElement("textarea");n.value=e,n.style.top="0",n.style.left="0",n.style.position="fixed",document.body.appendChild(n),n.focus(),n.select();try{var r=document.execCommand("copy");this.logger.info("Fallback: Copying text command was "+(r?"successful":"unsuccessful"))}catch(o){this.logger.error("Fallback: Oops, unable to copy",o)}document.body.removeChild(n)}copyTextToClipboard(e){navigator.clipboard?navigator.clipboard.writeText(e).then(()=>{this.logger.info("Async: Copying to clipboard was successful!")},n=>{this.logger.error("Async: Could not copy text: ",n)}):this.fallbackCopyTextToClipboard(e)}}return i.\u0275fac=function(e){return new(e||i)(qn(Id))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Nz=(()=>{class i{constructor(e){this.storage=e,this.retrieveGraphs()||this.storage.store("graphs",[]),this.findAllStyles()||this.storage.store("styles",[]),this.retrievePreferences()||this.storage.store("preferences",{grid:!1})}retrievePreferences(){return JSON.parse(JSON.stringify(this.storage.retrieve("preferences")))}findAllStyles(){return this.retrieveStyles()}findStyle(e){let n=this.retrieveStyles(),r=Ki.find(n,s=>e===s.id);if(r)return r}deleteStyle(e){let n=this.retrieveStyles();return Ki.remove(n,r=>e===r.id),this.storage.store("styles",n),n}storeStyle(e){let n=this.retrieveStyles(),r=Ki.find(n,s=>e.id===s.id);r?(r.id=e.id,r.tags=e.tags):n.push(e),this.storage.store("styles",n)}retrieveStyles(){return JSON.parse(JSON.stringify(this.storage.retrieve("styles")))}retrieveGraphs(){return JSON.parse(JSON.stringify(this.storage.retrieve("graphs")))}deleteGraph(e){let n=this.retrieveGraphs();return Ki.remove(n,r=>r.id===e.id),this.storage.store("graphs",n),n}findAllGraphs(){return this.retrieveGraphs()}findGraph(e){let n=this.retrieveGraphs(),r=Ki.find(n,s=>e===s.id);if(r)return r}storeGraph(e){let n=this.retrieveGraphs(),r=Ki.find(n,s=>e.id===s.id);r?(r.id=e.id,r.style=e.style,r.rules=e.rules,r.label=e.label,r.edges=e.edges,r.nodes=e.nodes):n.push(e),this.storage.store("graphs",n)}storePreferences(e){this.storage.store("preferences",e)}}return i.\u0275fac=function(e){return new(e||i)(qn(cC))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Bz=(()=>{class i{constructor(e,n){this._renderer=e,this._elementRef=n,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,n){this._renderer.setProperty(this._elementRef.nativeElement,e,n)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return i.\u0275fac=function(e){return new(e||i)(Xt(d),Xt(Yn))},i.\u0275dir=qr({type:i}),i})(),b0=(()=>{class i extends Bz{}return i.\u0275fac=function(){let t;return function(n){return(t||(t=Wo(i)))(n||i)}}(),i.\u0275dir=qr({type:i,features:[Ja]}),i})();const Cc=new ir("NgValueAccessor"),PQ={provide:Cc,useExisting:cs(()=>C0),multi:!0},kQ=new ir("CompositionEventMode");let C0=(()=>{class i extends Bz{constructor(e,n,r){super(e,n),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function RQ(){const i=Zm()?Zm().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return i.\u0275fac=function(e){return new(e||i)(Xt(d),Xt(Yn),Xt(kQ,8))},i.\u0275dir=qr({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,n){1&e&&mn("input",function(s){return n._handleInput(s.target.value)})("blur",function(){return n.onTouched()})("compositionstart",function(){return n._compositionStart()})("compositionend",function(s){return n._compositionEnd(s.target.value)})},features:[Ao([PQ]),Ja]}),i})();const Sd=new ir("NgValidators"),a_=new ir("NgAsyncValidators");function Yz(i){return null!=i}function Kz(i){return Lw(i)?ur(i):i}function Zz(i){let t={};return i.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function Qz(i,t){return t.map(e=>e(i))}function Jz(i){return i.map(t=>function NQ(i){return!i.validate}(t)?t:e=>t.validate(e))}function v2(i){return null!=i?function eV(i){if(!i)return null;const t=i.filter(Yz);return 0==t.length?null:function(e){return Zz(Qz(e,t))}}(Jz(i)):null}function y2(i){return null!=i?function tV(i){if(!i)return null;const t=i.filter(Yz);return 0==t.length?null:function(e){return function DQ(...i){const t=st(i),{args:e,keys:n}=A3(i),r=new vt(s=>{const{length:o}=e;if(!o)return void s.complete();const l=new Array(o);let u=o,p=o;for(let v=0;v<o;v++){let w=!1;pl(e[v]).subscribe(Ut(s,I=>{w||(w=!0,p--),l[v]=I},()=>u--,void 0,()=>{(!u||!w)&&(p||s.next(n?I3(n,l):l),s.complete())}))}});return t?r.pipe(x3(t)):r}(Qz(e,t).map(Kz)).pipe(fe(Zz))}}(Jz(i)):null}function nV(i,t){return null===i?[t]:Array.isArray(i)?[...i,t]:[i,t]}function _2(i){return i?Array.isArray(i)?i:[i]:[]}function k1(i,t){return Array.isArray(i)?i.includes(t):i===t}function sV(i,t){const e=_2(t);return _2(i).forEach(r=>{k1(e,r)||e.push(r)}),e}function oV(i,t){return _2(t).filter(e=>!k1(i,e))}class aV{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=v2(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=y2(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class lf extends aV{get formDirective(){return null}get path(){return null}}class iv extends aV{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let uC=(()=>{class i extends class lV{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}{constructor(e){super(e)}}return i.\u0275fac=function(e){return new(e||i)(Xt(iv,2))},i.\u0275dir=qr({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,n){2&e&&Mp("ng-untouched",n.isUntouched)("ng-touched",n.isTouched)("ng-pristine",n.isPristine)("ng-dirty",n.isDirty)("ng-valid",n.isValid)("ng-invalid",n.isInvalid)("ng-pending",n.isPending)},features:[Ja]}),i})();const CA="VALID",F1="INVALID",hC="PENDING",wA="DISABLED";function uV(i){return Array.isArray(i)?v2(i):i||null}function hV(i){return Array.isArray(i)?y2(i):i||null}function N1(i){return null!=i&&!Array.isArray(i)&&"object"==typeof i}function AA(i,t){(function S2(i,t){const e=function iV(i){return i._rawValidators}(i);null!==t.validator?i.setValidators(nV(e,t.validator)):"function"==typeof e&&i.setValidators([e]);const n=function rV(i){return i._rawAsyncValidators}(i);null!==t.asyncValidator?i.setAsyncValidators(nV(n,t.asyncValidator)):"function"==typeof n&&i.setAsyncValidators([n]);const r=()=>i.updateValueAndValidity();V1(t._rawValidators,r),V1(t._rawAsyncValidators,r)})(i,t),t.valueAccessor.writeValue(i.value),i.disabled&&t.valueAccessor.setDisabledState?.(!0),function qQ(i,t){t.valueAccessor.registerOnChange(e=>{i._pendingValue=e,i._pendingChange=!0,i._pendingDirty=!0,"change"===i.updateOn&&gV(i,t)})}(i,t),function YQ(i,t){const e=(n,r)=>{t.valueAccessor.writeValue(n),r&&t.viewToModelUpdate(n)};i.registerOnChange(e),t._registerOnDestroy(()=>{i._unregisterOnChange(e)})}(i,t),function XQ(i,t){t.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,"blur"===i.updateOn&&i._pendingChange&&gV(i,t),"submit"!==i.updateOn&&i.markAsTouched()})}(i,t),function $Q(i,t){if(t.valueAccessor.setDisabledState){const e=n=>{t.valueAccessor.setDisabledState(n)};i.registerOnDisabledChange(e),t._registerOnDestroy(()=>{i._unregisterOnDisabledChange(e)})}}(i,t)}function V1(i,t){i.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function gV(i,t){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function _V(i,t){const e=i.indexOf(t);e>-1&&i.splice(e,1)}function bV(i){return"object"==typeof i&&null!==i&&2===Object.keys(i).length&&"value"in i&&"disabled"in i}const iJ={provide:iv,useExisting:cs(()=>oy)},xV=(()=>Promise.resolve(null))();let oy=(()=>{class i extends iv{constructor(e,n,r,s,o){super(),this._changeDetectorRef=o,this.control=new class extends class pV{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=uV(this._rawValidators),this._composedAsyncValidatorFn=hV(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===CA}get invalid(){return this.status===F1}get pending(){return this.status==hC}get disabled(){return this.status===wA}get enabled(){return this.status!==wA}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=uV(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=hV(t)}addValidators(t){this.setValidators(sV(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(sV(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(oV(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(oV(t,this._rawAsyncValidators))}hasValidator(t){return k1(this._rawValidators,t)}hasAsyncValidator(t){return k1(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=hC,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=wA,this.errors=null,this._forEachChild(n=>{n.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(n=>n(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=CA,this._forEachChild(n=>{n.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===CA||this.status===hC)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?wA:CA}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=hC,this._hasOwnPendingAsyncValidator=!0;const e=Kz(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(n=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(n,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((n,r)=>n&&n._find(r),this)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Fn,this.statusChanges=new Fn}_calculateStatus(){return this._allControlsDisabled()?wA:this.errors?F1:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(hC)?hC:this._anyControlsHaveStatus(F1)?F1:CA}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){N1(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}}{constructor(t=null,e,n){super(function A2(i){return(N1(i)?i.validators:i)||null}(e),function x2(i,t){return(N1(t)?t.asyncValidators:i)||null}(n,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),N1(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=bV(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(n=>n(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){_V(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){_V(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){bV(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},this._registered=!1,this.update=new Fn,this._parent=e,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=function T2(i,t){if(!t)return null;let e,n,r;return Array.isArray(t),t.forEach(s=>{s.constructor===C0?e=s:function QQ(i){return Object.getPrototypeOf(i.constructor)===b0}(s)?n=s:r=s}),r||n||e||null}(0,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const n=e.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),function E2(i,t){if(!i.hasOwnProperty("model"))return!1;const e=i.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){AA(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){xV.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const n=e.isDisabled.currentValue,r=0!==n&&Xv(n);xV.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?function B1(i,t){return[...t.path,i]}(e,this._parent):[e]}}return i.\u0275fac=function(e){return new(e||i)(Xt(lf,9),Xt(Sd,10),Xt(a_,10),Xt(Cc,10),Xt(xo,8))},i.\u0275dir=qr({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Ao([iJ]),Ja,da]}),i})(),SV=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({}),i})(),TJ=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({imports:[SV]}),i})(),H1=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({imports:[TJ]}),i})();class WV{}const ay="*";function ly(i,t){return{type:7,name:i,definitions:t,options:{}}}function wc(i,t=null){return{type:4,styles:t,timings:i}}function jV(i,t=null){return{type:2,steps:i,options:t}}function tl(i){return{type:6,styles:i,offset:null}}function A0(i,t,e){return{type:0,name:i,styles:t,options:e}}function Mu(i,t,e=null){return{type:1,expr:i,animation:t,options:e}}function dC(i,t=null){return{type:8,animation:i,options:t}}function LJ(i=null){return{type:9,options:i}}function $V(i,t=null){return{type:10,animation:i,options:t}}function PJ(i,t,e=null){return{type:11,selector:i,animation:t,options:e}}function qV(i){Promise.resolve(null).then(i)}class IA{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){qV(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}class XV{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const s=this.players.length;0==s?qV(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++e==s&&this._onFinish()}),o.onDestroy(()=>{++n==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,l)=>Math.max(o,l.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(n=>{const r=n.totalTime?Math.min(1,e/n.totalTime):1;n.setPosition(r)})}getPosition(){const t=this.players.reduce((e,n)=>null===e||n.totalTime>e.totalTime?n:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}let Ft=(()=>{class i{static addClass(e,n){e.classList?e.classList.add(n):e.className+=" "+n}static addMultipleClasses(e,n){if(e.classList){let r=n.trim().split(" ");for(let s=0;s<r.length;s++)e.classList.add(r[s])}else{let r=n.split(" ");for(let s=0;s<r.length;s++)e.className+=" "+r[s]}}static removeClass(e,n){e.classList?e.classList.remove(n):e.className=e.className.replace(new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi")," ")}static hasClass(e,n){return e.classList?e.classList.contains(n):new RegExp("(^| )"+n+"( |$)","gi").test(e.className)}static siblings(e){return Array.prototype.filter.call(e.parentNode.children,function(n){return n!==e})}static find(e,n){return Array.from(e.querySelectorAll(n))}static findSingle(e,n){return e?e.querySelector(n):null}static index(e){let n=e.parentNode.childNodes,r=0;for(var s=0;s<n.length;s++){if(n[s]==e)return r;1==n[s].nodeType&&r++}return-1}static indexWithinGroup(e,n){let r=e.parentNode?e.parentNode.childNodes:[],s=0;for(var o=0;o<r.length;o++){if(r[o]==e)return s;r[o].attributes&&r[o].attributes[n]&&1==r[o].nodeType&&s++}return-1}static relativePosition(e,n){let r=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:this.getHiddenElementDimensions(e);const s=n.offsetHeight,o=n.getBoundingClientRect(),l=this.getViewport();let u,p;o.top+s+r.height>l.height?(u=-1*r.height,e.style.transformOrigin="bottom",o.top+u<0&&(u=-1*o.top)):(u=s,e.style.transformOrigin="top"),p=r.width>l.width?-1*o.left:o.left+r.width>l.width?-1*(o.left+r.width-l.width):0,e.style.top=u+"px",e.style.left=p+"px"}static absolutePosition(e,n){let T,k,r=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:this.getHiddenElementDimensions(e),s=r.height,o=r.width,l=n.offsetHeight,u=n.offsetWidth,p=n.getBoundingClientRect(),v=this.getWindowScrollTop(),w=this.getWindowScrollLeft(),I=this.getViewport();p.top+l+s>I.height?(T=p.top+v-s,e.style.transformOrigin="bottom",T<0&&(T=v)):(T=l+p.top+v,e.style.transformOrigin="top"),k=p.left+o>I.width?Math.max(0,p.left+w+u-o):p.left+w,e.style.top=T+"px",e.style.left=k+"px"}static getParents(e,n=[]){return null===e.parentNode?n:this.getParents(e.parentNode,n.concat([e.parentNode]))}static getScrollableParents(e){let n=[];if(e){let r=this.getParents(e);const s=/(auto|scroll)/,o=l=>{let u=window.getComputedStyle(l,null);return s.test(u.getPropertyValue("overflow"))||s.test(u.getPropertyValue("overflowX"))||s.test(u.getPropertyValue("overflowY"))};for(let l of r){let u=1===l.nodeType&&l.dataset.scrollselectors;if(u){let p=u.split(",");for(let v of p){let w=this.findSingle(l,v);w&&o(w)&&n.push(w)}}9!==l.nodeType&&o(l)&&n.push(l)}}return n}static getHiddenElementOuterHeight(e){e.style.visibility="hidden",e.style.display="block";let n=e.offsetHeight;return e.style.display="none",e.style.visibility="visible",n}static getHiddenElementOuterWidth(e){e.style.visibility="hidden",e.style.display="block";let n=e.offsetWidth;return e.style.display="none",e.style.visibility="visible",n}static getHiddenElementDimensions(e){let n={};return e.style.visibility="hidden",e.style.display="block",n.width=e.offsetWidth,n.height=e.offsetHeight,e.style.display="none",e.style.visibility="visible",n}static scrollInView(e,n){let r=getComputedStyle(e).getPropertyValue("borderTopWidth"),s=r?parseFloat(r):0,o=getComputedStyle(e).getPropertyValue("paddingTop"),l=o?parseFloat(o):0,u=e.getBoundingClientRect(),v=n.getBoundingClientRect().top+document.body.scrollTop-(u.top+document.body.scrollTop)-s-l,w=e.scrollTop,I=e.clientHeight,T=this.getOuterHeight(n);v<0?e.scrollTop=w+v:v+T>I&&(e.scrollTop=w+v-I+T)}static fadeIn(e,n){e.style.opacity=0;let r=+new Date,s=0,o=function(){s=+e.style.opacity.replace(",",".")+((new Date).getTime()-r)/n,e.style.opacity=s,r=+new Date,+s<1&&(window.requestAnimationFrame&&requestAnimationFrame(o)||setTimeout(o,16))};o()}static fadeOut(e,n){var r=1,l=50/n;let u=setInterval(()=>{(r-=l)<=0&&(r=0,clearInterval(u)),e.style.opacity=r},50)}static getWindowScrollTop(){let e=document.documentElement;return(window.pageYOffset||e.scrollTop)-(e.clientTop||0)}static getWindowScrollLeft(){let e=document.documentElement;return(window.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}static matches(e,n){var r=Element.prototype;return(r.matches||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||function(o){return-1!==[].indexOf.call(document.querySelectorAll(o),this)}).call(e,n)}static getOuterWidth(e,n){let r=e.offsetWidth;if(n){let s=getComputedStyle(e);r+=parseFloat(s.marginLeft)+parseFloat(s.marginRight)}return r}static getHorizontalPadding(e){let n=getComputedStyle(e);return parseFloat(n.paddingLeft)+parseFloat(n.paddingRight)}static getHorizontalMargin(e){let n=getComputedStyle(e);return parseFloat(n.marginLeft)+parseFloat(n.marginRight)}static innerWidth(e){let n=e.offsetWidth,r=getComputedStyle(e);return n+=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),n}static width(e){let n=e.offsetWidth,r=getComputedStyle(e);return n-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),n}static getInnerHeight(e){let n=e.offsetHeight,r=getComputedStyle(e);return n+=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom),n}static getOuterHeight(e,n){let r=e.offsetHeight;if(n){let s=getComputedStyle(e);r+=parseFloat(s.marginTop)+parseFloat(s.marginBottom)}return r}static getHeight(e){let n=e.offsetHeight,r=getComputedStyle(e);return n-=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom)+parseFloat(r.borderTopWidth)+parseFloat(r.borderBottomWidth),n}static getWidth(e){let n=e.offsetWidth,r=getComputedStyle(e);return n-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight)+parseFloat(r.borderLeftWidth)+parseFloat(r.borderRightWidth),n}static getViewport(){let e=window,n=document,r=n.documentElement,s=n.getElementsByTagName("body")[0];return{width:e.innerWidth||r.clientWidth||s.clientWidth,height:e.innerHeight||r.clientHeight||s.clientHeight}}static getOffset(e){var n=e.getBoundingClientRect();return{top:n.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:n.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)}}static replaceElementWith(e,n){let r=e.parentNode;if(!r)throw"Can't replace element";return r.replaceChild(n,e)}static getUserAgent(){return navigator.userAgent}static isIE(){var e=window.navigator.userAgent;return e.indexOf("MSIE ")>0||(e.indexOf("Trident/")>0?(e.indexOf("rv:"),!0):e.indexOf("Edge/")>0)}static isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}static isAndroid(){return/(android)/i.test(navigator.userAgent)}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}static appendChild(e,n){if(this.isElement(n))n.appendChild(e);else{if(!n.el||!n.el.nativeElement)throw"Cannot append "+n+" to "+e;n.el.nativeElement.appendChild(e)}}static removeChild(e,n){if(this.isElement(n))n.removeChild(e);else{if(!n.el||!n.el.nativeElement)throw"Cannot remove "+e+" from "+n;n.el.nativeElement.removeChild(e)}}static removeElement(e){"remove"in Element.prototype?e.remove():e.parentNode.removeChild(e)}static isElement(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}static calculateScrollbarWidth(e){if(e){let n=getComputedStyle(e);return e.offsetWidth-e.clientWidth-parseFloat(n.borderLeftWidth)-parseFloat(n.borderRightWidth)}{if(null!==this.calculatedScrollbarWidth)return this.calculatedScrollbarWidth;let n=document.createElement("div");n.className="p-scrollbar-measure",document.body.appendChild(n);let r=n.offsetWidth-n.clientWidth;return document.body.removeChild(n),this.calculatedScrollbarWidth=r,r}}static calculateScrollbarHeight(){if(null!==this.calculatedScrollbarHeight)return this.calculatedScrollbarHeight;let e=document.createElement("div");e.className="p-scrollbar-measure",document.body.appendChild(e);let n=e.offsetHeight-e.clientHeight;return document.body.removeChild(e),this.calculatedScrollbarWidth=n,n}static invokeElementMethod(e,n,r){e[n].apply(e,r)}static clearSelection(){if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().rangeCount>0&&window.getSelection().getRangeAt(0).getClientRects().length>0&&window.getSelection().removeAllRanges();else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch{}}static getBrowser(){if(!this.browser){let e=this.resolveUserAgent();this.browser={},e.browser&&(this.browser[e.browser]=!0,this.browser.version=e.version),this.browser.chrome?this.browser.webkit=!0:this.browser.webkit&&(this.browser.safari=!0)}return this.browser}static resolveUserAgent(){let e=navigator.userAgent.toLowerCase(),n=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:n[1]||"",version:n[2]||"0"}}static isInteger(e){return Number.isInteger?Number.isInteger(e):"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}static isHidden(e){return null===e.offsetParent}static getFocusableElements(e){let n=i.find(e,'button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]):not(.p-disabled)'),r=[];for(let s of n)"none"!=getComputedStyle(s).display&&"hidden"!=getComputedStyle(s).visibility&&r.push(s);return r}static generateZIndex(){return this.zindex=this.zindex||999,++this.zindex}}return i.zindex=1e3,i.calculatedScrollbarWidth=null,i.calculatedScrollbarHeight=null,i})();class SA{constructor(t,e=(()=>{})){this.element=t,this.listener=e}bindScrollListener(){this.scrollableParents=Ft.getScrollableParents(this.element);for(let t=0;t<this.scrollableParents.length;t++)this.scrollableParents[t].addEventListener("scroll",this.listener)}unbindScrollListener(){if(this.scrollableParents)for(let t=0;t<this.scrollableParents.length;t++)this.scrollableParents[t].removeEventListener("scroll",this.listener)}destroy(){this.unbindScrollListener(),this.element=null,this.listener=null,this.scrollableParents=null}}let rv=(()=>{class i{constructor(e,n,r){this.el=e,this.zone=n,this.config=r,this.escape=!0,this.fitContent=!0,this._tooltipOptions={tooltipPosition:"right",tooltipEvent:"hover",appendTo:"body",tooltipZIndex:"auto",escape:!0,positionTop:0,positionLeft:0}}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this.deactivate()}ngAfterViewInit(){this.zone.runOutsideAngular(()=>{if("hover"===this.getOption("tooltipEvent"))this.mouseEnterListener=this.onMouseEnter.bind(this),this.mouseLeaveListener=this.onMouseLeave.bind(this),this.clickListener=this.onClick.bind(this),this.el.nativeElement.addEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.addEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.addEventListener("click",this.clickListener);else if("focus"===this.getOption("tooltipEvent")){this.focusListener=this.onFocus.bind(this),this.blurListener=this.onBlur.bind(this);let e=this.getTarget(this.el.nativeElement);e.addEventListener("focus",this.focusListener),e.addEventListener("blur",this.blurListener)}})}ngOnChanges(e){e.tooltipPosition&&this.setOption({tooltipPosition:e.tooltipPosition.currentValue}),e.tooltipEvent&&this.setOption({tooltipEvent:e.tooltipEvent.currentValue}),e.appendTo&&this.setOption({appendTo:e.appendTo.currentValue}),e.positionStyle&&this.setOption({positionStyle:e.positionStyle.currentValue}),e.tooltipStyleClass&&this.setOption({tooltipStyleClass:e.tooltipStyleClass.currentValue}),e.tooltipZIndex&&this.setOption({tooltipZIndex:e.tooltipZIndex.currentValue}),e.escape&&this.setOption({escape:e.escape.currentValue}),e.showDelay&&this.setOption({showDelay:e.showDelay.currentValue}),e.hideDelay&&this.setOption({hideDelay:e.hideDelay.currentValue}),e.life&&this.setOption({life:e.life.currentValue}),e.positionTop&&this.setOption({positionTop:e.positionTop.currentValue}),e.positionLeft&&this.setOption({positionLeft:e.positionLeft.currentValue}),e.disabled&&this.setOption({disabled:e.disabled.currentValue}),e.text&&(this.setOption({tooltipLabel:e.text.currentValue}),this.active&&(e.text.currentValue?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide())),e.tooltipOptions&&(this._tooltipOptions={...this._tooltipOptions,...e.tooltipOptions.currentValue},this.deactivate(),this.active&&(this.getOption("tooltipLabel")?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide()))}onMouseEnter(e){!this.container&&!this.showTimeout&&this.activate()}onMouseLeave(e){this.deactivate()}onFocus(e){this.activate()}onBlur(e){this.deactivate()}onClick(e){this.deactivate()}activate(){if(this.active=!0,this.clearHideTimeout(),this.getOption("showDelay")?this.showTimeout=setTimeout(()=>{this.show()},this.getOption("showDelay")):this.show(),this.getOption("life")){let e=this.getOption("showDelay")?this.getOption("life")+this.getOption("showDelay"):this.getOption("life");this.hideTimeout=setTimeout(()=>{this.hide()},e)}}deactivate(){this.active=!1,this.clearShowTimeout(),this.getOption("hideDelay")?(this.clearHideTimeout(),this.hideTimeout=setTimeout(()=>{this.hide()},this.getOption("hideDelay"))):this.hide()}create(){this.container&&(this.clearHideTimeout(),this.remove()),this.container=document.createElement("div");let e=document.createElement("div");e.className="p-tooltip-arrow",this.container.appendChild(e),this.tooltipText=document.createElement("div"),this.tooltipText.className="p-tooltip-text",this.updateText(),this.getOption("positionStyle")&&(this.container.style.position=this.getOption("positionStyle")),this.container.appendChild(this.tooltipText),"body"===this.getOption("appendTo")?document.body.appendChild(this.container):"target"===this.getOption("appendTo")?Ft.appendChild(this.container,this.el.nativeElement):Ft.appendChild(this.container,this.getOption("appendTo")),this.container.style.display="inline-block",this.fitContent&&(this.container.style.width="fit-content")}show(){!this.getOption("tooltipLabel")||this.getOption("disabled")||(this.create(),this.align(),Ft.fadeIn(this.container,250),"auto"===this.getOption("tooltipZIndex")?Ll.set("tooltip",this.container,this.config.zIndex.tooltip):this.container.style.zIndex=this.getOption("tooltipZIndex"),this.bindDocumentResizeListener(),this.bindScrollListener())}hide(){"auto"===this.getOption("tooltipZIndex")&&Ll.clear(this.container),this.remove()}updateText(){this.getOption("escape")?(this.tooltipText.innerHTML="",this.tooltipText.appendChild(document.createTextNode(this.getOption("tooltipLabel")))):this.tooltipText.innerHTML=this.getOption("tooltipLabel")}align(){switch(this.getOption("tooltipPosition")){case"top":this.alignTop(),this.isOutOfBounds()&&(this.alignBottom(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"bottom":this.alignBottom(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"left":this.alignLeft(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()));break;case"right":this.alignRight(),this.isOutOfBounds()&&(this.alignLeft(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()))}}getHostOffset(){if("body"===this.getOption("appendTo")||"target"===this.getOption("appendTo")){let e=this.el.nativeElement.getBoundingClientRect();return{left:e.left+Ft.getWindowScrollLeft(),top:e.top+Ft.getWindowScrollTop()}}return{left:0,top:0}}alignRight(){this.preAlign("right");let e=this.getHostOffset(),n=e.left+Ft.getOuterWidth(this.el.nativeElement),r=e.top+(Ft.getOuterHeight(this.el.nativeElement)-Ft.getOuterHeight(this.container))/2;this.container.style.left=n+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignLeft(){this.preAlign("left");let e=this.getHostOffset(),n=e.left-Ft.getOuterWidth(this.container),r=e.top+(Ft.getOuterHeight(this.el.nativeElement)-Ft.getOuterHeight(this.container))/2;this.container.style.left=n+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignTop(){this.preAlign("top");let e=this.getHostOffset(),n=e.left+(Ft.getOuterWidth(this.el.nativeElement)-Ft.getOuterWidth(this.container))/2,r=e.top-Ft.getOuterHeight(this.container);this.container.style.left=n+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignBottom(){this.preAlign("bottom");let e=this.getHostOffset(),n=e.left+(Ft.getOuterWidth(this.el.nativeElement)-Ft.getOuterWidth(this.container))/2,r=e.top+Ft.getOuterHeight(this.el.nativeElement);this.container.style.left=n+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}setOption(e){this._tooltipOptions={...this._tooltipOptions,...e}}getOption(e){return this._tooltipOptions[e]}getTarget(e){return Ft.hasClass(e,"p-inputwrapper")?Ft.findSingle(e,"input"):e}preAlign(e){this.container.style.left="-999px",this.container.style.top="-999px";let n="p-tooltip p-component p-tooltip-"+e;this.container.className=this.getOption("tooltipStyleClass")?n+" "+this.getOption("tooltipStyleClass"):n}isOutOfBounds(){let e=this.container.getBoundingClientRect(),n=e.top,r=e.left,s=Ft.getOuterWidth(this.container),o=Ft.getOuterHeight(this.container),l=Ft.getViewport();return r+s>l.width||r<0||n<0||n+o>l.height}onWindowResize(e){this.hide()}bindDocumentResizeListener(){this.zone.runOutsideAngular(()=>{this.resizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.resizeListener)})}unbindDocumentResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new SA(this.el.nativeElement,()=>{this.container&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}unbindEvents(){if("hover"===this.getOption("tooltipEvent"))this.el.nativeElement.removeEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.removeEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.removeEventListener("click",this.clickListener);else if("focus"===this.getOption("tooltipEvent")){let e=this.getTarget(this.el.nativeElement);e.removeEventListener("focus",this.focusListener),e.removeEventListener("blur",this.blurListener)}this.unbindDocumentResizeListener()}remove(){this.container&&this.container.parentElement&&("body"===this.getOption("appendTo")?document.body.removeChild(this.container):"target"===this.getOption("appendTo")?this.el.nativeElement.removeChild(this.container):Ft.removeChild(this.container,this.getOption("appendTo"))),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.clearTimeouts(),this.container=null,this.scrollHandler=null}clearShowTimeout(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=null)}clearHideTimeout(){this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout()}ngOnDestroy(){this.unbindEvents(),this.container&&Ll.clear(this.container),this.remove(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null)}}return i.\u0275fac=function(e){return new(e||i)(Xt(Yn),Xt(Vo),Xt(Dp))},i.\u0275dir=qr({type:i,selectors:[["","pTooltip",""]],hostAttrs:[1,"p-element"],inputs:{tooltipPosition:"tooltipPosition",tooltipEvent:"tooltipEvent",appendTo:"appendTo",positionStyle:"positionStyle",tooltipStyleClass:"tooltipStyleClass",tooltipZIndex:"tooltipZIndex",escape:"escape",showDelay:"showDelay",hideDelay:"hideDelay",life:"life",positionTop:"positionTop",positionLeft:"positionLeft",fitContent:"fitContent",text:["pTooltip","text"],disabled:["tooltipDisabled","disabled"],tooltipOptions:"tooltipOptions"},features:[da]}),i})(),sv=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({imports:[Os]}),i})();const RJ=["element"],kJ=["content"];function OJ(i,t){1&i&&Ni(0)}const N2=function(i,t){return{$implicit:i,options:t}};function FJ(i,t){if(1&i&&(zr(0),$e(1,OJ,1,0,"ng-container",7),Vr()),2&i){const e=be(2);Ie(1),de("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",ss(2,N2,e.loadedItems,e.getContentOptions()))}}function NJ(i,t){1&i&&Ni(0)}function BJ(i,t){if(1&i&&(zr(0),$e(1,NJ,1,0,"ng-container",7),Vr()),2&i){const e=t.$implicit,n=t.index,r=be(3);Ie(1),de("ngTemplateOutlet",r.itemTemplate)("ngTemplateOutletContext",ss(2,N2,e,r.getOptions(n)))}}const zJ=function(i){return{"p-scroller-loading":i}};function VJ(i,t){if(1&i&&(Ke(0,"div",8,9),$e(2,BJ,2,5,"ng-container",10),Je()),2&i){const e=be(2);de("ngClass",_i(4,zJ,e.d_loading))("ngStyle",e.contentStyle),Ie(2),de("ngForOf",e.loadedItems)("ngForTrackBy",e._trackBy||e.index)}}function UJ(i,t){1&i&&Bn(0,"div",11),2&i&&de("ngStyle",be(2).spacerStyle)}function HJ(i,t){1&i&&Ni(0)}const GJ=function(i){return{numCols:i}},YV=function(i){return{options:i}};function WJ(i,t){if(1&i&&(zr(0),$e(1,HJ,1,0,"ng-container",7),Vr()),2&i){const e=t.index,n=be(4);Ie(1),de("ngTemplateOutlet",n.loaderTemplate)("ngTemplateOutletContext",_i(4,YV,n.getLoaderOptions(e,n.both&&_i(2,GJ,n._numItemsInViewport.cols))))}}function jJ(i,t){if(1&i&&(zr(0),$e(1,WJ,2,6,"ng-container",14),Vr()),2&i){const e=be(3);Ie(1),de("ngForOf",e.loaderArr)}}function $J(i,t){1&i&&Ni(0)}const qJ=function(){return{styleClass:"p-scroller-loading-icon"}};function XJ(i,t){if(1&i&&(zr(0),$e(1,$J,1,0,"ng-container",7),Vr()),2&i){const e=be(4);Ie(1),de("ngTemplateOutlet",e.loaderIconTemplate)("ngTemplateOutletContext",_i(3,YV,uo(2,qJ)))}}function YJ(i,t){1&i&&Bn(0,"i",16)}function KJ(i,t){if(1&i&&($e(0,XJ,2,5,"ng-container",0),$e(1,YJ,1,0,"ng-template",null,15,sc)),2&i){const e=oo(2);de("ngIf",be(3).loaderIconTemplate)("ngIfElse",e)}}const ZJ=function(i){return{"p-component-overlay":i}};function QJ(i,t){if(1&i&&(Ke(0,"div",12),$e(1,jJ,2,1,"ng-container",0),$e(2,KJ,3,2,"ng-template",null,13,sc),Je()),2&i){const e=oo(3),n=be(2);de("ngClass",_i(3,ZJ,!n.loaderTemplate)),Ie(1),de("ngIf",n.loaderTemplate)("ngIfElse",e)}}const JJ=function(i,t){return{"p-scroller":!0,"p-both-scroll":i,"p-horizontal-scroll":t}};function eee(i,t){if(1&i){const e=vi();zr(0),Ke(1,"div",2,3),mn("scroll",function(r){return Pt(e),Rt(be().onContainerScroll(r))}),$e(3,FJ,2,5,"ng-container",0),$e(4,VJ,3,6,"ng-template",null,4,sc),$e(6,UJ,1,1,"div",5),$e(7,QJ,4,5,"div",6),Je(),Vr()}if(2&i){const e=oo(5),n=be();Ie(1),kr(n._styleClass),de("ngStyle",n._style)("ngClass",ss(10,JJ,n.both,n.horizontal)),vr("id",n._id)("tabindex",n.tabindex),Ie(2),de("ngIf",n.contentTemplate)("ngIfElse",e),Ie(3),de("ngIf",n._showSpacer),Ie(1),de("ngIf",!n.loaderDisabled&&n._showLoader&&n.d_loading)}}function tee(i,t){1&i&&Ni(0)}const nee=function(i,t){return{rows:i,columns:t}};function iee(i,t){if(1&i&&(zr(0),$e(1,tee,1,0,"ng-container",7),Vr()),2&i){const e=be(2);Ie(1),de("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",ss(5,N2,e.items,ss(2,nee,e._items,e.loadedColumns)))}}function ree(i,t){if(1&i&&(su(0),$e(1,iee,2,8,"ng-container",17)),2&i){const e=be();Ie(1),de("ngIf",e.contentTemplate)}}const see=["*"];let EA=(()=>{class i{constructor(e,n){this.cd=e,this.zone=n,this.onLazyLoad=new Fn,this.onScroll=new Fn,this.onScrollIndexChange=new Fn,this._tabindex=0,this._itemSize=0,this._orientation="vertical",this._delay=0,this._resizeDelay=10,this._lazy=!1,this._disabled=!1,this._loaderDisabled=!1,this._showSpacer=!0,this._showLoader=!1,this._autoSize=!1,this.d_loading=!1,this.first=0,this.last=0,this.numItemsInViewport=0,this.lastScrollPos=0,this.loaderArr=[],this.spacerStyle={},this.contentStyle={},this.initialized=!1,this._disabled||this.zone.runOutsideAngular(()=>{this.windowResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.windowResizeListener),window.addEventListener("orientationchange",this.windowResizeListener)})}get id(){return this._id}set id(e){this._id=e}get style(){return this._style}set style(e){this._style=e}get styleClass(){return this._styleClass}set styleClass(e){this._styleClass=e}get tabindex(){return this._tabindex}set tabindex(e){this._tabindex=e}get items(){return this._items}set items(e){this._items=e}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=e}get scrollHeight(){return this._scrollHeight}set scrollHeight(e){this._scrollHeight=e}get scrollWidth(){return this._scrollWidth}set scrollWidth(e){this._scrollWidth=e}get orientation(){return this._orientation}set orientation(e){this._orientation=e}get delay(){return this._delay}set delay(e){this._delay=e}get resizeDelay(){return this._resizeDelay}set resizeDelay(e){this._resizeDelay=e}get lazy(){return this._lazy}set lazy(e){this._lazy=e}get disabled(){return this._disabled}set disabled(e){this._disabled=e}get loaderDisabled(){return this._loaderDisabled}set loaderDisabled(e){this._loaderDisabled=e}get columns(){return this._columns}set columns(e){this._columns=e}get showSpacer(){return this._showSpacer}set showSpacer(e){this._showSpacer=e}get showLoader(){return this._showLoader}set showLoader(e){this._showLoader=e}get numToleratedItems(){return this._numToleratedItems}set numToleratedItems(e){this._numToleratedItems=e}get loading(){return this._loading}set loading(e){this._loading=e}get autoSize(){return this._autoSize}set autoSize(e){this._autoSize=e}get trackBy(){return this._trackBy}set trackBy(e){this._trackBy=e}get options(){return this._options}set options(e){this._options=e,e&&"object"==typeof e&&Object.entries(e).forEach(([n,r])=>this[`_${n}`]!==r&&(this[`_${n}`]=r))}get vertical(){return"vertical"===this._orientation}get horizontal(){return"horizontal"===this._orientation}get both(){return"both"===this._orientation}get loadedItems(){return this._items&&!this.d_loading?this.both?this._items.slice(this.first.rows,this.last.rows).map(e=>this._columns?e:e.slice(this.first.cols,this.last.cols)):this.horizontal&&this._columns?this._items:this._items.slice(this.first,this.last):[]}get loadedRows(){return this.d_loading?this._loaderDisabled?this.loaderArr:[]:this.loadedItems}get loadedColumns(){return this._columns&&(this.both||this.horizontal)?this.d_loading&&this._loaderDisabled?this.both?this.loaderArr[0]:this.loaderArr:this._columns.slice(this.both?this.first.cols:this.first,this.both?this.last.cols:this.last):this._columns}ngOnInit(){this.setInitialState()}ngOnChanges(e){let n=!1;if(e.loading){const{previousValue:r,currentValue:s}=e.loading;this.lazy&&r!==s&&s!==this.d_loading&&(this.d_loading=s,n=!0)}if(this.initialized&&!n&&(e.items||e.itemSize||e.scrollHeight||e.scrollWidth)&&this.init(),e.orientation&&(this.lastScrollPos=this.both?{top:0,left:0}:0),e.numToleratedItems){const{previousValue:r,currentValue:s}=e.numToleratedItems;r!==s&&s!==this.d_numToleratedItems&&(this.d_numToleratedItems=s)}if(e.options){const{previousValue:r,currentValue:s}=e.options;this.lazy&&r?.loading!==s?.loading&&s?.loading!==this.d_loading&&(this.d_loading=s.loading),r?.numToleratedItems!==s?.numToleratedItems&&s?.numToleratedItems!==this.d_numToleratedItems&&(this.d_numToleratedItems=s.numToleratedItems)}}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"content":this.contentTemplate=e.template;break;case"item":default:this.itemTemplate=e.template;break;case"loader":this.loaderTemplate=e.template;break;case"loadericon":this.loaderIconTemplate=e.template}})}ngAfterViewInit(){this.setContentEl(this.contentEl),this.init(),this.defaultWidth=Ft.getWidth(this.elementViewChild.nativeElement),this.defaultHeight=Ft.getHeight(this.elementViewChild.nativeElement),this.initialized=!0}ngAfterViewChecked(){this.calculateAutoSize()}ngOnDestroy(){this.windowResizeListener&&(window.removeEventListener("resize",this.windowResizeListener),window.removeEventListener("orientationchange",this.windowResizeListener),this.windowResizeListener=null)}init(){this._disabled||(this.setSize(),this.calculateOptions(),this.setSpacerSize(),this.cd.detectChanges())}setContentEl(e){this.contentEl=e||this.contentViewChild?.nativeElement||Ft.findSingle(this.elementViewChild?.nativeElement,".p-scroller-content")}setInitialState(){this.first=this.both?{rows:0,cols:0}:0,this.last=this.both?{rows:0,cols:0}:0,this.numItemsInViewport=this.both?{rows:0,cols:0}:0,this.lastScrollPos=this.both?{top:0,left:0}:0,this.d_loading=this._loading||!1,this.d_numToleratedItems=this._numToleratedItems}getElementRef(){return this.elementViewChild}scrollTo(e){this.lastScrollPos=this.both?{top:0,left:0}:0,this.elementViewChild?.nativeElement?.scrollTo(e)}scrollToIndex(e,n="auto"){const{numToleratedItems:r}=this.calculateNumItems(),s=this.getContentPosition(),o=(p=0,v)=>p<=v?0:p,l=(p,v,w)=>p*v+w,u=(p=0,v=0)=>this.scrollTo({left:p,top:v,behavior:n});if(this.both){const p={rows:o(e[0],r[0]),cols:o(e[1],r[1])};(p.rows!==this.first.rows||p.cols!==this.first.cols)&&u(l(p.cols,this._itemSize[1],s.left),l(p.rows,this._itemSize[0],s.top))}else{const p=o(e,r);p!==this.first&&(this.horizontal?u(l(p,this._itemSize,s.left),0):u(0,l(p,this._itemSize,s.top)))}}scrollInView(e,n,r="auto"){if(n){const{first:s,viewport:o}=this.getRenderedRange(),l=(v=0,w=0)=>this.scrollTo({left:v,top:w,behavior:r}),p="to-end"===n;if("to-start"===n){if(this.both)o.first.rows-s.rows>e[0]?l(o.first.cols*this._itemSize[1],(o.first.rows-1)*this._itemSize[0]):o.first.cols-s.cols>e[1]&&l((o.first.cols-1)*this._itemSize[1],o.first.rows*this._itemSize[0]);else if(o.first-s>e){const v=(o.first-1)*this._itemSize;this.horizontal?l(v,0):l(0,v)}}else if(p)if(this.both)o.last.rows-s.rows<=e[0]+1?l(o.first.cols*this._itemSize[1],(o.first.rows+1)*this._itemSize[0]):o.last.cols-s.cols<=e[1]+1&&l((o.first.cols+1)*this._itemSize[1],o.first.rows*this._itemSize[0]);else if(o.last-s<=e+1){const v=(o.first+1)*this._itemSize;this.horizontal?l(v,0):l(0,v)}}else this.scrollToIndex(e,r)}getRenderedRange(){const e=(s,o)=>Math.floor(s/(o||s));let n=this.first,r=0;if(this.elementViewChild?.nativeElement){const{scrollTop:s,scrollLeft:o}=this.elementViewChild.nativeElement;this.both?(n={rows:e(s,this._itemSize[0]),cols:e(o,this._itemSize[1])},r={rows:n.rows+this.numItemsInViewport.rows,cols:n.cols+this.numItemsInViewport.cols}):(n=e(this.horizontal?o:s,this._itemSize),r=n+this.numItemsInViewport)}return{first:this.first,last:this.last,viewport:{first:n,last:r}}}calculateNumItems(){const e=this.getContentPosition(),n=this.elementViewChild?.nativeElement?this.elementViewChild.nativeElement.offsetWidth-e.left:0,r=this.elementViewChild?.nativeElement?this.elementViewChild.nativeElement.offsetHeight-e.top:0,s=(p,v)=>Math.ceil(p/(v||p)),o=p=>Math.ceil(p/2),l=this.both?{rows:s(r,this._itemSize[0]),cols:s(n,this._itemSize[1])}:s(this.horizontal?n:r,this._itemSize);return{numItemsInViewport:l,numToleratedItems:this.d_numToleratedItems||(this.both?[o(l.rows),o(l.cols)]:o(l))}}calculateOptions(){const{numItemsInViewport:e,numToleratedItems:n}=this.calculateNumItems(),r=(l,u,p,v=!1)=>this.getLast(l+u+(l<p?2:3)*p,v),s=this.first,o=this.both?{rows:r(this.first.rows,e.rows,n[0]),cols:r(this.first.cols,e.cols,n[1],!0)}:r(this.first,e,n);this.last=o,this.numItemsInViewport=e,this.d_numToleratedItems=n,this.showLoader&&(this.loaderArr=this.both?Array.from({length:e.rows}).map(()=>Array.from({length:e.cols})):Array.from({length:e})),this._lazy&&this.handleEvents("onLazyLoad",{first:s,last:o})}calculateAutoSize(){this._autoSize&&!this.d_loading&&Promise.resolve().then(()=>{if(this.contentEl){this.contentEl.style.minHeight=this.contentEl.style.minWidth="auto";const{offsetWidth:e,offsetHeight:n}=this.contentEl;(this.both||this.horizontal)&&(this.elementViewChild.nativeElement.style.width=(e<this.defaultWidth?e:this.defaultWidth)+"px"),(this.both||this.vertical)&&(this.elementViewChild.nativeElement.style.height=(n<this.defaultHeight?n:this.defaultHeight)+"px"),this.contentEl.style.minHeight=this.contentEl.style.minWidth=""}})}getLast(e=0,n=!1){return this._items?Math.min(n?(this._columns||this._items[0]).length:this._items.length,e):0}getContentPosition(){if(this.contentEl){const e=getComputedStyle(this.contentEl),n=parseInt(e.paddingLeft,10)+Math.max(parseInt(e.left,10),0),r=parseInt(e.paddingRight,10)+Math.max(parseInt(e.right,10),0),s=parseInt(e.paddingTop,10)+Math.max(parseInt(e.top,10),0),o=parseInt(e.paddingBottom,10)+Math.max(parseInt(e.bottom,10),0);return{left:n,right:r,top:s,bottom:o,x:n+r,y:s+o}}return{left:0,right:0,top:0,bottom:0,x:0,y:0}}setSize(){if(this.elementViewChild?.nativeElement){const e=this.elementViewChild.nativeElement.parentElement.parentElement,n=this._scrollWidth||`${this.elementViewChild.nativeElement.offsetWidth||e.offsetWidth}px`,r=this._scrollHeight||`${this.elementViewChild.nativeElement.offsetHeight||e.offsetHeight}px`,s=(o,l)=>this.elementViewChild.nativeElement.style[o]=l;this.both||this.horizontal?(s("height",r),s("width",n)):s("height",r)}}setSpacerSize(){if(this._items){const e=this.getContentPosition(),n=(r,s,o,l=0)=>this.spacerStyle={...this.spacerStyle,[`${r}`]:(s||[]).length*o+l+"px"};this.both?(n("height",this._items,this._itemSize[0],e.y),n("width",this._columns||this._items[1],this._itemSize[1],e.x)):this.horizontal?n("width",this._columns||this._items,this._itemSize,e.x):n("height",this._items,this._itemSize,e.y)}}setContentPosition(e){if(this.contentEl){const n=e?e.first:this.first,r=(o,l)=>o*l,s=(o=0,l=0)=>this.contentStyle={...this.contentStyle,transform:`translate3d(${o}px, ${l}px, 0)`};if(this.both)s(r(n.cols,this._itemSize[1]),r(n.rows,this._itemSize[0]));else{const o=r(n,this._itemSize);this.horizontal?s(o,0):s(0,o)}}}onScrollPositionChange(e){const n=e.target,r=this.getContentPosition(),s=(Y,ce)=>Y?Y>ce?Y-ce:Y:0,o=(Y,ce)=>Math.floor(Y/(ce||Y)),l=(Y,ce,Se,Ae,Te,Qe)=>Y<=Te?Te:Qe?Se-Ae-Te:ce+Te-1,u=(Y,ce,Se,Ae,Te,Qe,mt)=>Y<=Qe?0:Math.max(0,mt?Y<ce?Se:Y-Qe:Y>ce?Se:Y-2*Qe),p=(Y,ce,Se,Ae,Te,Qe=!1)=>{let mt=ce+Ae+2*Te;return Y>=Te&&(mt+=Te+1),this.getLast(mt,Qe)},v=s(n.scrollTop,r.top),w=s(n.scrollLeft,r.left);let I=this.both?{rows:0,cols:0}:0,T=this.last,k=!1,G=this.lastScrollPos;if(this.both){const Y=this.lastScrollPos.top<=v,ce=this.lastScrollPos.left<=w,Se={rows:o(v,this._itemSize[0]),cols:o(w,this._itemSize[1])},Ae={rows:l(Se.rows,this.first.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0],Y),cols:l(Se.cols,this.first.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],ce)};I={rows:u(Se.rows,Ae.rows,this.first.rows,0,0,this.d_numToleratedItems[0],Y),cols:u(Se.cols,Ae.cols,this.first.cols,0,0,this.d_numToleratedItems[1],ce)},T={rows:p(Se.rows,I.rows,0,this.numItemsInViewport.rows,this.d_numToleratedItems[0]),cols:p(Se.cols,I.cols,0,this.numItemsInViewport.cols,this.d_numToleratedItems[1],!0)},k=I.rows!==this.first.rows||T.rows!==this.last.rows||I.cols!==this.first.cols||T.cols!==this.last.cols,G={top:v,left:w}}else{const Y=this.horizontal?w:v,ce=this.lastScrollPos<=Y,Se=o(Y,this._itemSize);I=u(Se,l(Se,this.first,this.last,this.numItemsInViewport,this.d_numToleratedItems,ce),this.first,0,0,this.d_numToleratedItems,ce),T=p(Se,I,0,this.numItemsInViewport,this.d_numToleratedItems),k=I!==this.first||T!==this.last,G=Y}return{first:I,last:T,isRangeChanged:k,scrollPos:G}}onScrollChange(e){const{first:n,last:r,isRangeChanged:s,scrollPos:o}=this.onScrollPositionChange(e);if(s){const l={first:n,last:r};this.setContentPosition(l),this.first=n,this.last=r,this.lastScrollPos=o,this.handleEvents("onScrollIndexChange",l),this._lazy&&this.handleEvents("onLazyLoad",l)}}onContainerScroll(e){if(this.handleEvents("onScroll",{originalEvent:e}),this._delay){if(this.scrollTimeout&&clearTimeout(this.scrollTimeout),!this.d_loading&&this.showLoader){const{isRangeChanged:n}=this.onScrollPositionChange(e);n&&(this.d_loading=!0,this.cd.detectChanges())}this.scrollTimeout=setTimeout(()=>{this.onScrollChange(e),this.d_loading&&this.showLoader&&(!this._lazy||void 0===this._loading)&&(this.d_loading=!1,this.cd.detectChanges())},this._delay)}else this.onScrollChange(e)}onWindowResize(){this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{if(this.elementViewChild){const[e,n]=[Ft.getWidth(this.elementViewChild.nativeElement),Ft.getHeight(this.elementViewChild.nativeElement)],[r,s]=[e!==this.defaultWidth,n!==this.defaultHeight];(this.both?r||s:this.horizontal?r:this.vertical&&s)&&this.zone.run(()=>{this.d_numToleratedItems=this._numToleratedItems,this.defaultWidth=e,this.defaultHeight=n,this.init()})}},this._resizeDelay)}handleEvents(e,n){return this.options&&this.options[e]?this.options[e](n):this[e].emit(n)}getContentOptions(){return{contentStyleClass:"p-scroller-content "+(this.d_loading?"p-scroller-loading":""),items:this.loadedItems,getItemOptions:e=>this.getOptions(e),loading:this.d_loading,getLoaderOptions:(e,n)=>this.getLoaderOptions(e,n),itemSize:this._itemSize,rows:this.loadedRows,columns:this.loadedColumns,spacerStyle:this.spacerStyle,contentStyle:this.contentStyle,vertical:this.vertical,horizontal:this.horizontal,both:this.both}}getOptions(e){const n=(this._items||[]).length,r=this.both?this.first.rows+e:this.first+e;return{index:r,count:n,first:0===r,last:r===n-1,even:r%2==0,odd:r%2!=0}}getLoaderOptions(e,n){const r=this.loaderArr.length;return{index:e,count:r,first:0===e,last:e===r-1,even:e%2==0,odd:e%2!=0,...n}}}return i.\u0275fac=function(e){return new(e||i)(Xt(xo),Xt(Vo))},i.\u0275cmp=_r({type:i,selectors:[["p-scroller"]],contentQueries:function(e,n,r){if(1&e&&Ba(r,za,4),2&e){let s;Wi(s=ji())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(Tr(RJ,5),Tr(kJ,5)),2&e){let r;Wi(r=ji())&&(n.elementViewChild=r.first),Wi(r=ji())&&(n.contentViewChild=r.first)}},hostAttrs:[1,"p-scroller-viewport","p-element"],inputs:{id:"id",style:"style",styleClass:"styleClass",tabindex:"tabindex",items:"items",itemSize:"itemSize",scrollHeight:"scrollHeight",scrollWidth:"scrollWidth",orientation:"orientation",delay:"delay",resizeDelay:"resizeDelay",lazy:"lazy",disabled:"disabled",loaderDisabled:"loaderDisabled",columns:"columns",showSpacer:"showSpacer",showLoader:"showLoader",numToleratedItems:"numToleratedItems",loading:"loading",autoSize:"autoSize",trackBy:"trackBy",options:"options"},outputs:{onLazyLoad:"onLazyLoad",onScroll:"onScroll",onScrollIndexChange:"onScrollIndexChange"},features:[da],ngContentSelectors:see,decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["disabledContainer",""],[3,"ngStyle","ngClass","scroll"],["element",""],["buildInContent",""],["class","p-scroller-spacer",3,"ngStyle",4,"ngIf"],["class","p-scroller-loader",3,"ngClass",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-scroller-content",3,"ngClass","ngStyle"],["content",""],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"p-scroller-spacer",3,"ngStyle"],[1,"p-scroller-loader",3,"ngClass"],["buildInLoader",""],[4,"ngFor","ngForOf"],["buildInLoaderIcon",""],[1,"p-scroller-loading-icon","pi","pi-spinner","pi-spin"],[4,"ngIf"]],template:function(e,n){if(1&e&&(Bf(),$e(0,eee,8,13,"ng-container",0),$e(1,ree,2,1,"ng-template",null,1,sc)),2&e){const r=oo(2);de("ngIf",!n._disabled)("ngIfElse",r)}},dependencies:[no,jc,ho,el,Po],styles:["p-scroller{flex:1;outline:0 none}.p-scroller{position:relative;overflow:auto;contain:strict;transform:translateZ(0);will-change:scroll-position;outline:0 none}.p-scroller-content{position:absolute;top:0;left:0;min-height:100%;min-width:100%;will-change:transform}.p-scroller-spacer{position:absolute;top:0;left:0;height:1px;width:1px;transform-origin:0 0;pointer-events:none}.p-scroller-loader{position:sticky;top:0;left:0;width:100%;height:100%}.p-scroller-loader.p-component-overlay{display:flex;align-items:center;justify-content:center}.p-scroller-loading-icon{font-size:2rem}\n"],encapsulation:2}),i})(),ov=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({imports:[Os]}),i})(),Du=(()=>{class i{constructor(e,n,r){this.el=e,this.zone=n,this.config=r}ngAfterViewInit(){this.config&&this.config.ripple&&this.zone.runOutsideAngular(()=>{this.create(),this.mouseDownListener=this.onMouseDown.bind(this),this.el.nativeElement.addEventListener("mousedown",this.mouseDownListener)})}onMouseDown(e){let n=this.getInk();if(!n||"none"===getComputedStyle(n,null).display)return;if(Ft.removeClass(n,"p-ink-active"),!Ft.getHeight(n)&&!Ft.getWidth(n)){let l=Math.max(Ft.getOuterWidth(this.el.nativeElement),Ft.getOuterHeight(this.el.nativeElement));n.style.height=l+"px",n.style.width=l+"px"}let r=Ft.getOffset(this.el.nativeElement),s=e.pageX-r.left+document.body.scrollTop-Ft.getWidth(n)/2,o=e.pageY-r.top+document.body.scrollLeft-Ft.getHeight(n)/2;n.style.top=o+"px",n.style.left=s+"px",Ft.addClass(n,"p-ink-active")}getInk(){for(let e=0;e<this.el.nativeElement.children.length;e++)if(-1!==this.el.nativeElement.children[e].className.indexOf("p-ink"))return this.el.nativeElement.children[e];return null}resetInk(){let e=this.getInk();e&&Ft.removeClass(e,"p-ink-active")}onAnimationEnd(e){Ft.removeClass(e.currentTarget,"p-ink-active")}create(){let e=document.createElement("span");e.className="p-ink",this.el.nativeElement.appendChild(e),this.animationListener=this.onAnimationEnd.bind(this),e.addEventListener("animationend",this.animationListener)}remove(){let e=this.getInk();e&&(this.el.nativeElement.removeEventListener("mousedown",this.mouseDownListener),e.removeEventListener("animationend",this.animationListener),Ft.removeElement(e))}ngOnDestroy(){this.config&&this.config.ripple&&this.remove()}}return i.\u0275fac=function(e){return new(e||i)(Xt(Yn),Xt(Vo),Xt(Dp,8))},i.\u0275dir=qr({type:i,selectors:[["","pRipple",""]],hostAttrs:[1,"p-ripple","p-element"]}),i})(),Xc=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({imports:[Os]}),i})(),oee=(()=>{class i{constructor(e){this.host=e,this.focused=!1}ngAfterContentChecked(){if(!this.focused&&this.autofocus){const e=Ft.getFocusableElements(this.host.nativeElement);0===e.length&&this.host.nativeElement.focus(),e.length>0&&e[0].focus(),this.focused=!0}}}return i.\u0275fac=function(e){return new(e||i)(Xt(Yn))},i.\u0275dir=qr({type:i,selectors:[["","pAutoFocus",""]],hostAttrs:[1,"p-element"],inputs:{autofocus:["pAutoFocus","autofocus"]}}),i})(),aee=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({imports:[Os]}),i})();function lee(i,t){if(1&i&&(Ke(0,"span"),li(1),Je()),2&i){const e=be();Ie(1),ts(e.label||"empty")}}function cee(i,t){1&i&&Ni(0)}const TA=function(i){return{height:i}},uee=function(i,t){return{"p-dropdown-item":!0,"p-highlight":i,"p-disabled":t}},B2=function(i){return{$implicit:i}},hee=["container"],dee=["filter"],fee=["in"],pee=["editableInput"],gee=["items"],mee=["scroller"];function vee(i,t){if(1&i&&(zr(0),li(1),Vr()),2&i){const e=be(2);Ie(1),ts(e.label||"empty")}}function yee(i,t){1&i&&Ni(0)}const _ee=function(i){return{"p-dropdown-label p-inputtext":!0,"p-dropdown-label-empty":i}};function bee(i,t){if(1&i&&(Ke(0,"span",12),$e(1,vee,2,1,"ng-container",13),$e(2,yee,1,0,"ng-container",14),Je()),2&i){const e=be();de("ngClass",_i(9,_ee,null==e.label||0===e.label.length))("pTooltip",e.tooltip)("tooltipPosition",e.tooltipPosition)("positionStyle",e.tooltipPositionStyle)("tooltipStyleClass",e.tooltipStyleClass),vr("id",e.labelId),Ie(1),de("ngIf",!e.selectedItemTemplate),Ie(1),de("ngTemplateOutlet",e.selectedItemTemplate)("ngTemplateOutletContext",_i(11,B2,e.selectedOption))}}const Cee=function(i){return{"p-dropdown-label p-inputtext p-placeholder":!0,"p-dropdown-label-empty":i}};function wee(i,t){if(1&i&&(Ke(0,"span",15),li(1),Je()),2&i){const e=be();de("ngClass",_i(2,Cee,null==e.placeholder||0===e.placeholder.length)),Ie(1),ts(e.placeholder||"empty")}}function Aee(i,t){if(1&i){const e=vi();Ke(0,"input",16,17),mn("click",function(){return Pt(e),Rt(be().onEditableInputClick())})("input",function(r){return Pt(e),Rt(be().onEditableInputChange(r))})("focus",function(r){return Pt(e),Rt(be().onEditableInputFocus(r))})("blur",function(r){return Pt(e),Rt(be().onInputBlur(r))}),Je()}if(2&i){const e=be();de("disabled",e.disabled),vr("maxlength",e.maxlength)("placeholder",e.placeholder)("aria-expanded",e.overlayVisible)}}function xee(i,t){if(1&i){const e=vi();Ke(0,"i",18),mn("click",function(r){return Pt(e),Rt(be().clear(r))}),Je()}}function Iee(i,t){1&i&&Ni(0)}function See(i,t){1&i&&Ni(0)}const KV=function(i){return{options:i}};function Eee(i,t){if(1&i&&(zr(0),$e(1,See,1,0,"ng-container",14),Vr()),2&i){const e=be(3);Ie(1),de("ngTemplateOutlet",e.filterTemplate)("ngTemplateOutletContext",_i(2,KV,e.filterOptions))}}function Tee(i,t){if(1&i){const e=vi();Ke(0,"div",27)(1,"input",28,29),mn("keydown.enter",function(r){return r.preventDefault()})("keydown",function(r){return Pt(e),Rt(be(3).onKeydown(r,!1))})("input",function(r){return Pt(e),Rt(be(3).onFilterInputChange(r))}),Je(),Bn(3,"span",30),Je()}if(2&i){const e=be(3);Ie(1),de("value",e.filterValue||""),vr("placeholder",e.filterPlaceholder)("aria-label",e.ariaFilterLabel)("aria-activedescendant",e.overlayVisible?"p-highlighted-option":e.labelId)}}function Mee(i,t){if(1&i&&(Ke(0,"div",24),mn("click",function(n){return n.stopPropagation()}),$e(1,Eee,2,4,"ng-container",25),$e(2,Tee,4,4,"ng-template",null,26,sc),Je()),2&i){const e=oo(3),n=be(2);Ie(1),de("ngIf",n.filterTemplate)("ngIfElse",e)}}function Dee(i,t){1&i&&Ni(0)}const ZV=function(i,t){return{$implicit:i,options:t}};function Lee(i,t){if(1&i&&$e(0,Dee,1,0,"ng-container",14),2&i){const e=t.$implicit,n=t.options;be(2),de("ngTemplateOutlet",oo(7))("ngTemplateOutletContext",ss(2,ZV,e,n))}}function Pee(i,t){1&i&&Ni(0)}function Ree(i,t){if(1&i&&$e(0,Pee,1,0,"ng-container",14),2&i){const e=t.options;de("ngTemplateOutlet",be(4).loaderTemplate)("ngTemplateOutletContext",_i(2,KV,e))}}function kee(i,t){1&i&&(zr(0),$e(1,Ree,1,4,"ng-template",34),Vr())}function Oee(i,t){if(1&i){const e=vi();Ke(0,"p-scroller",31,32),mn("onLazyLoad",function(r){return Pt(e),Rt(be(2).onLazyLoad.emit(r))}),$e(2,Lee,1,5,"ng-template",33),$e(3,kee,2,0,"ng-container",13),Je()}if(2&i){const e=be(2);to(_i(8,TA,e.scrollHeight)),de("items",e.optionsToDisplay)("itemSize",e.virtualScrollItemSize||e._itemSize)("autoSize",!0)("lazy",e.lazy)("options",e.virtualScrollOptions),Ie(3),de("ngIf",e.loaderTemplate)}}function Fee(i,t){1&i&&Ni(0)}const Nee=function(){return{}};function Bee(i,t){if(1&i&&(zr(0),$e(1,Fee,1,0,"ng-container",14),Vr()),2&i){be();const e=oo(7),n=be();Ie(1),de("ngTemplateOutlet",e)("ngTemplateOutletContext",ss(3,ZV,n.optionsToDisplay,uo(2,Nee)))}}function zee(i,t){if(1&i&&(Ke(0,"span"),li(1),Je()),2&i){const e=be().$implicit,n=be(4);Ie(1),ts(n.getOptionGroupLabel(e)||"empty")}}function Vee(i,t){1&i&&Ni(0)}function Uee(i,t){1&i&&Ni(0)}const QV=function(i,t){return{$implicit:i,selectedOption:t}};function Hee(i,t){if(1&i&&(Ke(0,"li",40),$e(1,zee,2,1,"span",13),$e(2,Vee,1,0,"ng-container",14),Je(),$e(3,Uee,1,0,"ng-container",14)),2&i){const e=t.$implicit,n=be(2).options,r=oo(5),s=be(2);de("ngStyle",_i(6,TA,n.itemSize+"px")),Ie(1),de("ngIf",!s.groupTemplate),Ie(1),de("ngTemplateOutlet",s.groupTemplate)("ngTemplateOutletContext",_i(8,B2,e)),Ie(1),de("ngTemplateOutlet",r)("ngTemplateOutletContext",ss(10,QV,s.getOptionGroupChildren(e),s.selectedOption))}}function Gee(i,t){if(1&i&&(zr(0),$e(1,Hee,4,13,"ng-template",39),Vr()),2&i){const e=be().$implicit;Ie(1),de("ngForOf",e)}}function Wee(i,t){1&i&&Ni(0)}function jee(i,t){if(1&i&&(zr(0),$e(1,Wee,1,0,"ng-container",14),Vr()),2&i){const e=be().$implicit,n=oo(5),r=be(2);Ie(1),de("ngTemplateOutlet",n)("ngTemplateOutletContext",ss(2,QV,e,r.selectedOption))}}function $ee(i,t){if(1&i){const e=vi();Ke(0,"p-dropdownItem",41),mn("onClick",function(r){return Pt(e),Rt(be(4).onItemClick(r))}),Je()}if(2&i){const e=t.$implicit,n=be().selectedOption,r=be(3);de("option",e)("selected",n==e)("label",r.getOptionLabel(e))("disabled",r.isOptionDisabled(e))("template",r.itemTemplate)}}function qee(i,t){1&i&&$e(0,$ee,1,5,"ng-template",39),2&i&&de("ngForOf",t.$implicit)}function Xee(i,t){if(1&i&&(zr(0),li(1),Vr()),2&i){const e=be(4);Ie(1),yc(" ",e.emptyFilterMessageLabel," ")}}function Yee(i,t){1&i&&Ni(0,null,43)}function Kee(i,t){if(1&i&&(Ke(0,"li",42),$e(1,Xee,2,1,"ng-container",25),$e(2,Yee,2,0,"ng-container",19),Je()),2&i){const e=be().options,n=be(2);de("ngStyle",_i(4,TA,e.itemSize+"px")),Ie(1),de("ngIf",!n.emptyFilterTemplate&&!n.emptyTemplate)("ngIfElse",n.emptyFilter),Ie(1),de("ngTemplateOutlet",n.emptyFilterTemplate||n.emptyTemplate)}}function Zee(i,t){if(1&i&&(zr(0),li(1),Vr()),2&i){const e=be(4);Ie(1),yc(" ",e.emptyMessageLabel," ")}}function Qee(i,t){1&i&&Ni(0,null,44)}function Jee(i,t){if(1&i&&(Ke(0,"li",42),$e(1,Zee,2,1,"ng-container",25),$e(2,Qee,2,0,"ng-container",19),Je()),2&i){const e=be().options,n=be(2);de("ngStyle",_i(4,TA,e.itemSize+"px")),Ie(1),de("ngIf",!n.emptyTemplate)("ngIfElse",n.empty),Ie(1),de("ngTemplateOutlet",n.emptyTemplate)}}function ete(i,t){if(1&i&&(Ke(0,"ul",35,36),$e(2,Gee,2,1,"ng-container",13),$e(3,jee,2,5,"ng-container",13),$e(4,qee,1,1,"ng-template",null,37,sc),$e(6,Kee,3,6,"li",38),$e(7,Jee,3,6,"li",38),Je()),2&i){const e=t.options,n=be(2);to(e.contentStyle),de("ngClass",e.contentStyleClass),vr("id",n.listId),Ie(2),de("ngIf",n.group),Ie(1),de("ngIf",!n.group),Ie(3),de("ngIf",n.filterValue&&n.isEmpty()),Ie(1),de("ngIf",!n.filterValue&&n.isEmpty())}}function tte(i,t){1&i&&Ni(0)}const nte=function(i,t){return{showTransitionParams:i,hideTransitionParams:t}},ite=function(i){return{value:"visible",params:i}};function rte(i,t){if(1&i){const e=vi();Ke(0,"div",0),mn("click",function(r){return Pt(e),Rt(be().onOverlayClick(r))})("@overlayAnimation.start",function(r){return Pt(e),Rt(be().onOverlayAnimationStart(r))})("@overlayAnimation.done",function(r){return Pt(e),Rt(be().onOverlayAnimationEnd(r))}),$e(1,Iee,1,0,"ng-container",19),$e(2,Mee,4,2,"div",20),Ke(3,"div",21),$e(4,Oee,4,10,"p-scroller",22),$e(5,Bee,2,6,"ng-container",13),$e(6,ete,8,8,"ng-template",null,23,sc),Je(),$e(8,tte,1,0,"ng-container",19),Je()}if(2&i){const e=be();kr(e.panelStyleClass),de("ngClass","p-dropdown-panel p-component")("@overlayAnimation",_i(15,ite,ss(12,nte,e.showTransitionOptions,e.hideTransitionOptions)))("ngStyle",e.panelStyle),Ie(1),de("ngTemplateOutlet",e.headerTemplate),Ie(1),de("ngIf",e.filter),Ie(1),Ad("max-height",e.virtualScroll?"auto":e.scrollHeight||"auto"),Ie(1),de("ngIf",e.virtualScroll),Ie(1),de("ngIf",!e.virtualScroll),Ie(3),de("ngTemplateOutlet",e.footerTemplate)}}const ste=function(i,t,e,n){return{"p-dropdown p-component":!0,"p-disabled":i,"p-dropdown-open":t,"p-focus":e,"p-dropdown-clearable":n}},ote={provide:Cc,useExisting:cs(()=>z2),multi:!0};let ate=(()=>{class i{constructor(){this.onClick=new Fn}onOptionClick(e){this.onClick.emit({originalEvent:e,option:this.option})}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=_r({type:i,selectors:[["p-dropdownItem"]],hostAttrs:[1,"p-element"],inputs:{option:"option",selected:"selected",label:"label",disabled:"disabled",visible:"visible",itemSize:"itemSize",template:"template"},outputs:{onClick:"onClick"},decls:3,vars:15,consts:[["role","option","pRipple","",3,"ngStyle","id","ngClass","click"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,n){1&e&&(Ke(0,"li",0),mn("click",function(s){return n.onOptionClick(s)}),$e(1,lee,2,1,"span",1),$e(2,cee,1,0,"ng-container",2),Je()),2&e&&(de("ngStyle",_i(8,TA,n.itemSize+"px"))("id",n.selected?"p-highlighted-option":"")("ngClass",ss(10,uee,n.selected,n.disabled)),vr("aria-label",n.label)("aria-selected",n.selected),Ie(1),de("ngIf",!n.template),Ie(1),de("ngTemplateOutlet",n.template)("ngTemplateOutletContext",_i(13,B2,n.option)))},dependencies:[no,ho,el,Po,Du],encapsulation:2}),i})(),z2=(()=>{class i{constructor(e,n,r,s,o,l,u){this.el=e,this.renderer=n,this.cd=r,this.zone=s,this.filterService=o,this.config=l,this.overlayService=u,this.scrollHeight="200px",this.resetFilterOnHide=!1,this.dropdownIcon="pi pi-chevron-down",this.optionGroupChildren="items",this.autoDisplayFirst=!0,this.emptyFilterMessage="",this.emptyMessage="",this.lazy=!1,this.autoZIndex=!0,this.baseZIndex=0,this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.filterMatchMode="contains",this.tooltip="",this.tooltipPosition="right",this.tooltipPositionStyle="absolute",this.autofocusFilter=!0,this.onChange=new Fn,this.onFilter=new Fn,this.onFocus=new Fn,this.onBlur=new Fn,this.onClick=new Fn,this.onShow=new Fn,this.onHide=new Fn,this.onClear=new Fn,this.onLazyLoad=new Fn,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.id=sC()}get disabled(){return this._disabled}set disabled(e){e&&(this.focused=!1,this.overlayVisible&&this.hide()),this._disabled=e,this.cd.destroyed||this.cd.detectChanges()}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=e,console.warn("The itemSize property is deprecated, use virtualScrollItemSize property instead.")}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"item":default:this.itemTemplate=e.template;break;case"selectedItem":this.selectedItemTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"filter":this.filterTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"emptyfilter":this.emptyFilterTemplate=e.template;break;case"empty":this.emptyTemplate=e.template;break;case"group":this.groupTemplate=e.template;break;case"loader":this.loaderTemplate=e.template}})}ngOnInit(){this.optionsToDisplay=this.options,this.updateSelectedOption(null),this.labelId=this.id+"_label",this.listId=this.id+"_list",this.filterBy&&(this.filterOptions={filter:e=>this.onFilterInputChange(e),reset:()=>this.resetFilter()})}get options(){return this._options}set options(e){this._options=e,this.optionsToDisplay=this._options,this.updateSelectedOption(this.value),this.selectedOption=this.findOption(this.value,this.optionsToDisplay),!this.selectedOption&&Ji.isNotEmpty(this.value)&&(this.value=null,this.onModelChange(this.value)),this.optionsChanged=!0,this._filterValue&&this._filterValue.length&&this.activateFilter()}get filterValue(){return this._filterValue}set filterValue(e){this._filterValue=e,this.activateFilter()}ngAfterViewInit(){this.editable&&this.updateEditableLabel()}get label(){return this.selectedOption?this.getOptionLabel(this.selectedOption):null}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation($c.EMPTY_MESSAGE)}get emptyFilterMessageLabel(){return this.emptyFilterMessage||this.config.getTranslation($c.EMPTY_FILTER_MESSAGE)}get filled(){return this.value||null!=this.value||null!=this.value}updateEditableLabel(){this.editableInputViewChild&&this.editableInputViewChild.nativeElement&&(this.editableInputViewChild.nativeElement.value=this.selectedOption?this.getOptionLabel(this.selectedOption):this.value||"")}getOptionLabel(e){return this.optionLabel?Ji.resolveFieldData(e,this.optionLabel):e&&void 0!==e.label?e.label:e}getOptionValue(e){return this.optionValue?Ji.resolveFieldData(e,this.optionValue):!this.optionLabel&&e&&void 0!==e.value?e.value:e}isOptionDisabled(e){return this.optionDisabled?Ji.resolveFieldData(e,this.optionDisabled):!(!e||void 0===e.disabled)&&e.disabled}getOptionGroupLabel(e){return this.optionGroupLabel?Ji.resolveFieldData(e,this.optionGroupLabel):e&&void 0!==e.label?e.label:e}getOptionGroupChildren(e){return this.optionGroupChildren?Ji.resolveFieldData(e,this.optionGroupChildren):e.items}onItemClick(e){const n=e.option;this.isOptionDisabled(n)||(this.selectItem(e.originalEvent,n),this.accessibleViewChild.nativeElement.focus({preventScroll:!0})),setTimeout(()=>{this.hide()},150)}selectItem(e,n){this.selectedOption!=n&&(this.selectedOption=n,this.value=this.getOptionValue(n),this.onModelChange(this.value),this.updateEditableLabel(),this.onChange.emit({originalEvent:e,value:this.value}))}ngAfterViewChecked(){this.optionsChanged&&this.overlayVisible&&(this.optionsChanged=!1,this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.alignOverlay()},1)})),this.selectedOptionUpdated&&this.itemsWrapper&&(Ft.findSingle(this.overlay,"li.p-highlight")&&Ft.scrollInView(this.itemsWrapper,Ft.findSingle(this.overlay,"li.p-highlight")),this.selectedOptionUpdated=!1)}writeValue(e){this.filter&&this.resetFilter(),this.value=e,this.updateSelectedOption(e),this.updateEditableLabel(),this.cd.markForCheck()}resetFilter(){this._filterValue=null,this.filterViewChild&&this.filterViewChild.nativeElement&&(this.filterViewChild.nativeElement.value=""),this.optionsToDisplay=this.options}updateSelectedOption(e){this.selectedOption=this.findOption(e,this.optionsToDisplay),this.autoDisplayFirst&&!this.placeholder&&!this.selectedOption&&this.optionsToDisplay&&this.optionsToDisplay.length&&!this.editable&&(this.selectedOption=this.group?this.optionsToDisplay[0].items[0]:this.optionsToDisplay[0],this.value=this.getOptionValue(this.selectedOption),this.onModelChange(this.value)),this.selectedOptionUpdated=!0}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onMouseclick(e){this.disabled||this.readonly||this.isInputClick(e)||(this.onClick.emit(e),this.accessibleViewChild.nativeElement.focus({preventScroll:!0}),this.overlayVisible?this.hide():this.show(),this.cd.detectChanges())}onOverlayClick(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement})}isInputClick(e){return Ft.hasClass(e.target,"p-dropdown-clear-icon")||e.target.isSameNode(this.accessibleViewChild.nativeElement)||this.editableInputViewChild&&e.target.isSameNode(this.editableInputViewChild.nativeElement)}isOutsideClicked(e){return!(this.el.nativeElement.isSameNode(e.target)||this.el.nativeElement.contains(e.target)||this.overlay&&this.overlay.contains(e.target))}isEmpty(){return!this.optionsToDisplay||this.optionsToDisplay&&0===this.optionsToDisplay.length}onEditableInputClick(){this.bindDocumentClickListener()}onEditableInputFocus(e){this.focused=!0,this.hide(),this.onFocus.emit(e)}onEditableInputChange(e){this.value=e.target.value,this.updateSelectedOption(this.value),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value})}show(){this.overlayVisible=!0,this.preventDocumentDefault=!0,this.cd.markForCheck()}onOverlayAnimationStart(e){switch(e.toState){case"visible":if(this.overlay=e.element,this.itemsWrapper=Ft.findSingle(this.overlay,this.virtualScroll?".p-scroller":".p-dropdown-items-wrapper"),this.virtualScroll&&this.scroller.setContentEl(this.itemsViewChild.nativeElement),this.appendOverlay(),this.autoZIndex&&Ll.set("overlay",this.overlay,this.baseZIndex+this.config.zIndex.overlay),this.alignOverlay(),this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener(),this.options&&this.options.length)if(this.virtualScroll){const n=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;-1!==n&&this.scroller.scrollToIndex(n)}else{let n=Ft.findSingle(this.itemsWrapper,".p-dropdown-item.p-highlight");n&&n.scrollIntoView({block:"nearest",inline:"center"})}this.filterViewChild&&this.filterViewChild.nativeElement&&(this.preventModelTouched=!0,this.autofocusFilter&&this.filterViewChild.nativeElement.focus()),this.onShow.emit(e);break;case"void":this.onOverlayHide(),this.onHide.emit(e)}}onOverlayAnimationEnd(e){"void"===e.toState&&Ll.clear(e.element)}appendOverlay(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.overlay):Ft.appendChild(this.overlay,this.appendTo),this.overlay.style.minWidth||(this.overlay.style.minWidth=Ft.getWidth(this.containerViewChild.nativeElement)+"px"))}restoreOverlayAppend(){this.overlay&&this.appendTo&&this.el.nativeElement.appendChild(this.overlay)}hide(){this.overlayVisible=!1,this.filter&&this.resetFilterOnHide&&this.resetFilter(),this.cd.markForCheck()}alignOverlay(){this.overlay&&(this.appendTo?Ft.absolutePosition(this.overlay,this.containerViewChild.nativeElement):Ft.relativePosition(this.overlay,this.containerViewChild.nativeElement))}onInputFocus(e){this.focused=!0,this.onFocus.emit(e)}onInputBlur(e){this.focused=!1,this.onBlur.emit(e),this.preventModelTouched||this.onModelTouched(),this.preventModelTouched=!1}findPrevEnabledOption(e){let n;if(this.optionsToDisplay&&this.optionsToDisplay.length){for(let r=e-1;0<=r;r--){let s=this.optionsToDisplay[r];if(!this.isOptionDisabled(s)){n=s;break}}if(!n)for(let r=this.optionsToDisplay.length-1;r>=e;r--){let s=this.optionsToDisplay[r];if(!this.isOptionDisabled(s)){n=s;break}}}return n}findNextEnabledOption(e){let n;if(this.optionsToDisplay&&this.optionsToDisplay.length){for(let r=e+1;r<this.optionsToDisplay.length;r++){let s=this.optionsToDisplay[r];if(!this.isOptionDisabled(s)){n=s;break}}if(!n)for(let r=0;r<e;r++){let s=this.optionsToDisplay[r];if(!this.isOptionDisabled(s)){n=s;break}}}return n}onKeydown(e,n){if(!this.readonly&&this.optionsToDisplay&&null!==this.optionsToDisplay.length)switch(e.which){case 40:if(!this.overlayVisible&&e.altKey)this.show();else if(this.group){let r=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;if(-1!==r){let s=r.itemIndex+1;s<this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex]).length?(this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex])[s]),this.selectedOptionUpdated=!0):this.optionsToDisplay[r.groupIndex+1]&&(this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex+1])[0]),this.selectedOptionUpdated=!0)}else this.optionsToDisplay&&this.optionsToDisplay.length>0&&this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[0])[0])}else{let r=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1,s=this.findNextEnabledOption(r);s&&(this.selectItem(e,s),this.selectedOptionUpdated=!0)}e.preventDefault();break;case 38:if(this.group){let r=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;if(-1!==r){let s=r.itemIndex-1;if(s>=0)this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex])[s]),this.selectedOptionUpdated=!0;else if(s<0){let o=this.optionsToDisplay[r.groupIndex-1];o&&(this.selectItem(e,this.getOptionGroupChildren(o)[this.getOptionGroupChildren(o).length-1]),this.selectedOptionUpdated=!0)}}}else{let r=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1,s=this.findPrevEnabledOption(r);s&&(this.selectItem(e,s),this.selectedOptionUpdated=!0)}e.preventDefault();break;case 32:n&&(this.overlayVisible?this.hide():this.show(),e.preventDefault());break;case 13:this.overlayVisible&&(!this.filter||this.optionsToDisplay&&this.optionsToDisplay.length>0)?this.hide():this.overlayVisible||this.show(),e.preventDefault();break;case 27:case 9:this.hide();break;default:n&&!e.metaKey&&this.search(e)}}search(e){this.searchTimeout&&clearTimeout(this.searchTimeout);const n=e.key;let r;if(this.previousSearchChar=this.currentSearchChar,this.currentSearchChar=n,this.searchValue=this.previousSearchChar===this.currentSearchChar?this.currentSearchChar:this.searchValue?this.searchValue+n:n,this.group){let s=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):{groupIndex:0,itemIndex:0};r=this.searchOptionWithinGroup(s)}else{let s=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;r=this.searchOption(++s)}r&&!this.isOptionDisabled(r)&&(this.selectItem(e,r),this.selectedOptionUpdated=!0),this.searchTimeout=setTimeout(()=>{this.searchValue=null},250)}searchOption(e){let n;return this.searchValue&&(n=this.searchOptionInRange(e,this.optionsToDisplay.length),n||(n=this.searchOptionInRange(0,e))),n}searchOptionInRange(e,n){for(let r=e;r<n;r++){let s=this.optionsToDisplay[r];if(this.getOptionLabel(s).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(s))return s}return null}searchOptionWithinGroup(e){if(this.searchValue){for(let r=e.groupIndex;r<this.optionsToDisplay.length;r++)for(let s=e.groupIndex===r?e.itemIndex+1:0;s<this.getOptionGroupChildren(this.optionsToDisplay[r]).length;s++){let o=this.getOptionGroupChildren(this.optionsToDisplay[r])[s];if(this.getOptionLabel(o).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(o))return o}for(let r=0;r<=e.groupIndex;r++)for(let s=0;s<(e.groupIndex===r?e.itemIndex:this.getOptionGroupChildren(this.optionsToDisplay[r]).length);s++){let o=this.getOptionGroupChildren(this.optionsToDisplay[r])[s];if(this.getOptionLabel(o).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(o))return o}}return null}findOptionIndex(e,n){let r=-1;if(n)for(let s=0;s<n.length;s++)if(null==e&&null==this.getOptionValue(n[s])||Ji.equals(e,this.getOptionValue(n[s]),this.dataKey)){r=s;break}return r}findOptionGroupIndex(e,n){let r,s;if(n)for(let o=0;o<n.length&&(r=o,s=this.findOptionIndex(e,this.getOptionGroupChildren(n[o])),-1===s);o++);return-1!==s?{groupIndex:r,itemIndex:s}:-1}findOption(e,n,r){if(this.group&&!r){let s;if(n&&n.length)for(let o of n)if(s=this.findOption(e,this.getOptionGroupChildren(o),!0),s)break;return s}{let s=this.findOptionIndex(e,n);return-1!=s?n[s]:null}}onFilterInputChange(e){let n=e.target.value;n&&n.length?(this._filterValue=n,this.activateFilter()):(this._filterValue=null,this.optionsToDisplay=this.options),this.virtualScroll&&this.scroller.scrollToIndex(0),this.optionsChanged=!0,this.onFilter.emit({originalEvent:e,filter:this._filterValue})}activateFilter(){let e=(this.filterBy||this.optionLabel||"label").split(",");if(this.options&&this.options.length){if(this.group){let n=[];for(let r of this.options){let s=this.filterService.filter(this.getOptionGroupChildren(r),e,this.filterValue,this.filterMatchMode,this.filterLocale);s&&s.length&&n.push({...r,[this.optionGroupChildren]:s})}this.optionsToDisplay=n}else this.optionsToDisplay=this.filterService.filter(this.options,e,this.filterValue,this.filterMatchMode,this.filterLocale);this.optionsChanged=!0}}applyFocus(){this.editable?Ft.findSingle(this.el.nativeElement,".p-dropdown-label.p-inputtext").focus():Ft.findSingle(this.el.nativeElement,"input[readonly]").focus()}focus(){this.applyFocus()}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","click",n=>{!this.preventDocumentDefault&&this.isOutsideClicked(n)&&(this.hide(),this.unbindDocumentClickListener()),this.preventDocumentDefault=!1}))}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener)}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}onWindowResize(){this.overlayVisible&&!Ft.isTouchDevice()&&this.hide()}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new SA(this.containerViewChild.nativeElement,e=>{this.overlayVisible&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}clear(e){this.value=null,this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}),this.updateSelectedOption(this.value),this.updateEditableLabel(),this.onClear.emit(e)}onOverlayHide(){this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.overlay=null,this.itemsWrapper=null,this.onModelTouched()}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.overlay&&Ll.clear(this.overlay),this.restoreOverlayAppend(),this.onOverlayHide()}}return i.\u0275fac=function(e){return new(e||i)(Xt(Yn),Xt(d),Xt(xo),Xt(Vo),Xt(oA),Xt(Dp),Xt(aA))},i.\u0275cmp=_r({type:i,selectors:[["p-dropdown"]],contentQueries:function(e,n,r){if(1&e&&Ba(r,za,4),2&e){let s;Wi(s=ji())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(Tr(hee,5),Tr(dee,5),Tr(fee,5),Tr(pee,5),Tr(gee,5),Tr(mee,5)),2&e){let r;Wi(r=ji())&&(n.containerViewChild=r.first),Wi(r=ji())&&(n.filterViewChild=r.first),Wi(r=ji())&&(n.accessibleViewChild=r.first),Wi(r=ji())&&(n.editableInputViewChild=r.first),Wi(r=ji())&&(n.itemsViewChild=r.first),Wi(r=ji())&&(n.scroller=r.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:4,hostBindings:function(e,n){2&e&&Mp("p-inputwrapper-filled",n.filled)("p-inputwrapper-focus",n.focused||n.overlayVisible)},inputs:{scrollHeight:"scrollHeight",filter:"filter",name:"name",style:"style",panelStyle:"panelStyle",styleClass:"styleClass",panelStyleClass:"panelStyleClass",readonly:"readonly",required:"required",editable:"editable",appendTo:"appendTo",tabindex:"tabindex",placeholder:"placeholder",filterPlaceholder:"filterPlaceholder",filterLocale:"filterLocale",inputId:"inputId",selectId:"selectId",dataKey:"dataKey",filterBy:"filterBy",autofocus:"autofocus",resetFilterOnHide:"resetFilterOnHide",dropdownIcon:"dropdownIcon",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",optionGroupLabel:"optionGroupLabel",optionGroupChildren:"optionGroupChildren",autoDisplayFirst:"autoDisplayFirst",group:"group",showClear:"showClear",emptyFilterMessage:"emptyFilterMessage",emptyMessage:"emptyMessage",lazy:"lazy",virtualScroll:"virtualScroll",virtualScrollItemSize:"virtualScrollItemSize",virtualScrollOptions:"virtualScrollOptions",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",ariaFilterLabel:"ariaFilterLabel",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",filterMatchMode:"filterMatchMode",maxlength:"maxlength",tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",autofocusFilter:"autofocusFilter",disabled:"disabled",itemSize:"itemSize",options:"options",filterValue:"filterValue"},outputs:{onChange:"onChange",onFilter:"onFilter",onFocus:"onFocus",onBlur:"onBlur",onClick:"onClick",onShow:"onShow",onHide:"onHide",onClear:"onClear",onLazyLoad:"onLazyLoad"},features:[Ao([ote])],decls:12,vars:25,consts:[[3,"ngClass","ngStyle","click"],["container",""],[1,"p-hidden-accessible"],["type","text","readonly","","aria-haspopup","listbox","aria-haspopup","listbox","role","combobox",3,"disabled","pAutoFocus","focus","blur","keydown"],["in",""],[3,"ngClass","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass",4,"ngIf"],[3,"ngClass",4,"ngIf"],["type","text","class","p-dropdown-label p-inputtext","aria-haspopup","listbox",3,"disabled","click","input","focus","blur",4,"ngIf"],["class","p-dropdown-clear-icon pi pi-times",3,"click",4,"ngIf"],["role","button","aria-label","dropdown trigger","aria-haspopup","listbox",1,"p-dropdown-trigger"],[1,"p-dropdown-trigger-icon",3,"ngClass"],[3,"ngClass","ngStyle","class","click",4,"ngIf"],[3,"ngClass","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngClass"],["type","text","aria-haspopup","listbox",1,"p-dropdown-label","p-inputtext",3,"disabled","click","input","focus","blur"],["editableInput",""],[1,"p-dropdown-clear-icon","pi","pi-times",3,"click"],[4,"ngTemplateOutlet"],["class","p-dropdown-header",3,"click",4,"ngIf"],[1,"p-dropdown-items-wrapper"],[3,"items","style","itemSize","autoSize","lazy","options","onLazyLoad",4,"ngIf"],["buildInItems",""],[1,"p-dropdown-header",3,"click"],[4,"ngIf","ngIfElse"],["builtInFilterElement",""],[1,"p-dropdown-filter-container"],["type","text","autocomplete","off",1,"p-dropdown-filter","p-inputtext","p-component",3,"value","keydown.enter","keydown","input"],["filter",""],[1,"p-dropdown-filter-icon","pi","pi-search"],[3,"items","itemSize","autoSize","lazy","options","onLazyLoad"],["scroller",""],["pTemplate","content"],["pTemplate","loader"],["role","listbox",1,"p-dropdown-items",3,"ngClass"],["items",""],["itemslist",""],["class","p-dropdown-empty-message",3,"ngStyle",4,"ngIf"],["ngFor","",3,"ngForOf"],[1,"p-dropdown-item-group",3,"ngStyle"],[3,"option","selected","label","disabled","template","onClick"],[1,"p-dropdown-empty-message",3,"ngStyle"],["emptyFilter",""],["empty",""]],template:function(e,n){1&e&&(Ke(0,"div",0,1),mn("click",function(s){return n.onMouseclick(s)}),Ke(2,"div",2)(3,"input",3,4),mn("focus",function(s){return n.onInputFocus(s)})("blur",function(s){return n.onInputBlur(s)})("keydown",function(s){return n.onKeydown(s,!0)}),Je()(),$e(5,bee,3,13,"span",5),$e(6,wee,2,4,"span",6),$e(7,Aee,2,4,"input",7),$e(8,xee,1,0,"i",8),Ke(9,"div",9),Bn(10,"span",10),Je(),$e(11,rte,9,17,"div",11),Je()),2&e&&(kr(n.styleClass),de("ngClass",sf(20,ste,n.disabled,n.overlayVisible,n.focused,n.showClear&&!n.disabled))("ngStyle",n.style),Ie(3),de("disabled",n.disabled)("pAutoFocus",n.autofocus),vr("id",n.inputId)("placeholder",n.placeholder)("aria-label",n.ariaLabel)("aria-expanded",!1)("aria-labelledby",n.ariaLabelledBy)("tabindex",n.tabindex)("aria-activedescendant",n.overlayVisible?n.labelId:null),Ie(2),de("ngIf",!n.editable&&null!=n.label),Ie(1),de("ngIf",!n.editable&&null==n.label),Ie(1),de("ngIf",n.editable),Ie(1),de("ngIf",null!=n.value&&n.showClear&&!n.disabled),Ie(1),vr("aria-expanded",n.overlayVisible),Ie(1),de("ngClass",n.dropdownIcon),Ie(1),de("ngIf",n.overlayVisible))},dependencies:[no,jc,ho,el,Po,za,rv,EA,oee,ate],styles:[".p-dropdown{display:inline-flex;cursor:pointer;position:relative;-webkit-user-select:none;user-select:none}.p-dropdown-clear-icon{position:absolute;top:50%;margin-top:-.5rem}.p-dropdown-trigger{display:flex;align-items:center;justify-content:center;flex-shrink:0}.p-dropdown-label{display:block;white-space:nowrap;overflow:hidden;flex:1 1 auto;width:1%;text-overflow:ellipsis;cursor:pointer}.p-dropdown-label-empty{overflow:hidden;visibility:hidden}input.p-dropdown-label{cursor:default}.p-dropdown .p-dropdown-panel{min-width:100%}.p-dropdown-panel{position:absolute;top:0;left:0}.p-dropdown-items-wrapper{overflow:auto}.p-dropdown-item{cursor:pointer;font-weight:400;white-space:nowrap;position:relative;overflow:hidden}.p-dropdown-items{margin:0;padding:0;list-style-type:none}.p-dropdown-filter{width:100%}.p-dropdown-filter-container{position:relative}.p-dropdown-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-fluid .p-dropdown{display:flex}.p-fluid .p-dropdown .p-dropdown-label{width:1%}\n"],encapsulation:2,data:{animation:[ly("overlayAnimation",[Mu(":enter",[tl({opacity:0,transform:"scaleY(0.8)"}),wc("{{showTransitionParams}}")]),Mu(":leave",[wc("{{hideTransitionParams}}",tl({opacity:0}))])])]},changeDetection:0}),i})(),G1=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({imports:[Os,xa,sv,Xc,ov,aee,xa,ov]}),i})(),fC=(()=>{class i{constructor(e,n,r){this.el=e,this.ngModel=n,this.cd=r}ngAfterViewInit(){this.updateFilledState(),this.cd.detectChanges()}ngDoCheck(){this.updateFilledState()}onInput(e){this.updateFilledState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length||this.ngModel&&this.ngModel.model}}return i.\u0275fac=function(e){return new(e||i)(Xt(Yn),Xt(oy,8),Xt(xo))},i.\u0275dir=qr({type:i,selectors:[["","pInputText",""]],hostAttrs:[1,"p-inputtext","p-component","p-element"],hostVars:2,hostBindings:function(e,n){1&e&&mn("input",function(s){return n.onInput(s)}),2&e&&Mp("p-filled",n.filled)}}),i})(),V2=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({imports:[Os]}),i})();function lte(i,t){1&i&&Ni(0)}const cte=function(i,t,e,n){return{"p-button-icon":!0,"p-button-icon-left":i,"p-button-icon-right":t,"p-button-icon-top":e,"p-button-icon-bottom":n}};function ute(i,t){if(1&i&&Bn(0,"span",4),2&i){const e=be();kr(e.loading?"p-button-loading-icon "+e.loadingIcon:e.icon),de("ngClass",sf(4,cte,"left"===e.iconPos&&e.label,"right"===e.iconPos&&e.label,"top"===e.iconPos&&e.label,"bottom"===e.iconPos&&e.label)),vr("aria-hidden",!0)}}function hte(i,t){if(1&i&&(Ke(0,"span",5),li(1),Je()),2&i){const e=be();vr("aria-hidden",e.icon&&!e.label),Ie(1),ts(e.label||"\xa0")}}function dte(i,t){if(1&i&&(Ke(0,"span",4),li(1),Je()),2&i){const e=be();kr(e.badgeClass),de("ngClass",e.badgeStyleClass()),Ie(1),ts(e.badge)}}const fte=function(i,t,e,n,r){return{"p-button p-component":!0,"p-button-icon-only":i,"p-button-vertical":t,"p-disabled":e,"p-button-loading":n,"p-button-loading-label-only":r}},pte=["*"];let x0=(()=>{class i{constructor(e){this.el=e,this.iconPos="left",this.loadingIcon="pi pi-spinner pi-spin",this._loading=!1}ngAfterViewInit(){this._initialStyleClass=this.el.nativeElement.className,Ft.addMultipleClasses(this.el.nativeElement,this.getStyleClass()),(this.icon||this.loading)&&this.createIconEl();let e=document.createElement("span");this.icon&&!this.label&&e.setAttribute("aria-hidden","true"),e.className="p-button-label",this.label?e.appendChild(document.createTextNode(this.label)):e.innerHTML="&nbsp;",this.el.nativeElement.appendChild(e),this.initialized=!0}getStyleClass(){let e="p-button p-component";return this.icon&&!this.label&&(e+=" p-button-icon-only"),this.loading&&(e+=" p-disabled p-button-loading",!this.icon&&this.label&&(e+=" p-button-loading-label-only")),e}setStyleClass(){let e=this.getStyleClass();this.el.nativeElement.className=e+" "+this._initialStyleClass}createIconEl(){let e=document.createElement("span");e.className="p-button-icon",e.setAttribute("aria-hidden","true");let n=this.label?"p-button-icon-"+this.iconPos:null;n&&Ft.addClass(e,n);let r=this.getIconClass();r&&Ft.addMultipleClasses(e,r);let s=Ft.findSingle(this.el.nativeElement,".p-button-label");s?this.el.nativeElement.insertBefore(e,s):this.el.nativeElement.appendChild(e)}getIconClass(){return this.loading?"p-button-loading-icon "+this.loadingIcon:this._icon}setIconClass(){let e=Ft.findSingle(this.el.nativeElement,".p-button-icon");e?e.className=this.iconPos?"p-button-icon p-button-icon-"+this.iconPos+" "+this.getIconClass():"p-button-icon "+this.getIconClass():this.createIconEl()}removeIconElement(){let e=Ft.findSingle(this.el.nativeElement,".p-button-icon");this.el.nativeElement.removeChild(e)}get label(){return this._label}set label(e){this._label=e,this.initialized&&(Ft.findSingle(this.el.nativeElement,".p-button-label").textContent=this._label||"&nbsp;",(this.loading||this.icon)&&this.setIconClass(),this.setStyleClass())}get icon(){return this._icon}set icon(e){this._icon=e,this.initialized&&(this.setIconClass(),this.setStyleClass())}get loading(){return this._loading}set loading(e){this._loading=e,this.initialized&&(this.loading||this.icon?this.setIconClass():this.removeIconElement(),this.setStyleClass())}ngOnDestroy(){this.initialized=!1}}return i.\u0275fac=function(e){return new(e||i)(Xt(Yn))},i.\u0275dir=qr({type:i,selectors:[["","pButton",""]],hostAttrs:[1,"p-element"],inputs:{iconPos:"iconPos",loadingIcon:"loadingIcon",label:"label",icon:"icon",loading:"loading"}}),i})(),W1=(()=>{class i{constructor(){this.type="button",this.iconPos="left",this.loading=!1,this.loadingIcon="pi pi-spinner pi-spin",this.onClick=new Fn,this.onFocus=new Fn,this.onBlur=new Fn}ngAfterContentInit(){this.templates.forEach(e=>{e.getType(),this.contentTemplate=e.template})}badgeStyleClass(){return{"p-badge p-component":!0,"p-badge-no-gutter":this.badge&&1===String(this.badge).length}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=_r({type:i,selectors:[["p-button"]],contentQueries:function(e,n,r){if(1&e&&Ba(r,za,4),2&e){let s;Wi(s=ji())&&(n.templates=s)}},hostAttrs:[1,"p-element"],inputs:{type:"type",iconPos:"iconPos",icon:"icon",badge:"badge",label:"label",disabled:"disabled",loading:"loading",loadingIcon:"loadingIcon",style:"style",styleClass:"styleClass",badgeClass:"badgeClass",ariaLabel:"ariaLabel"},outputs:{onClick:"onClick",onFocus:"onFocus",onBlur:"onBlur"},ngContentSelectors:pte,decls:6,vars:17,consts:[["pRipple","",3,"ngStyle","disabled","ngClass","click","focus","blur"],[4,"ngTemplateOutlet"],[3,"ngClass","class",4,"ngIf"],["class","p-button-label",4,"ngIf"],[3,"ngClass"],[1,"p-button-label"]],template:function(e,n){1&e&&(Bf(),Ke(0,"button",0),mn("click",function(s){return n.onClick.emit(s)})("focus",function(s){return n.onFocus.emit(s)})("blur",function(s){return n.onBlur.emit(s)}),su(1),$e(2,lte,1,0,"ng-container",1),$e(3,ute,1,9,"span",2),$e(4,hte,2,2,"span",3),$e(5,dte,2,4,"span",2),Je()),2&e&&(kr(n.styleClass),de("ngStyle",n.style)("disabled",n.disabled||n.loading)("ngClass",h0(11,fte,n.icon&&!n.label,("top"===n.iconPos||"bottom"===n.iconPos)&&n.label,n.disabled||n.loading,n.loading,n.loading&&!n.icon&&n.label)),vr("type",n.type)("aria-label",n.ariaLabel),Ie(2),de("ngTemplateOutlet",n.contentTemplate),Ie(1),de("ngIf",!n.contentTemplate&&(n.icon||n.loading)),Ie(1),de("ngIf",!n.contentTemplate),Ie(1),de("ngIf",!n.contentTemplate&&n.badge))},dependencies:[no,ho,el,Po,Du],encapsulation:2,changeDetection:0}),i})(),av=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({imports:[Os,Xc]}),i})();const gte=["input"];function mte(i,t){if(1&i){const e=vi();Ke(0,"i",6),mn("click",function(){return Pt(e),Rt(be().clear())}),Je()}}const JV=function(){return{"p-inputnumber-button p-inputnumber-button-up":!0}},e4=function(){return{"p-inputnumber-button p-inputnumber-button-down":!0}};function vte(i,t){if(1&i){const e=vi();Ke(0,"span",7)(1,"button",8),mn("mousedown",function(r){return Pt(e),Rt(be().onUpButtonMouseDown(r))})("mouseup",function(){return Pt(e),Rt(be().onUpButtonMouseUp())})("mouseleave",function(){return Pt(e),Rt(be().onUpButtonMouseLeave())})("keydown",function(r){return Pt(e),Rt(be().onUpButtonKeyDown(r))})("keyup",function(){return Pt(e),Rt(be().onUpButtonKeyUp())}),Je(),Ke(2,"button",8),mn("mousedown",function(r){return Pt(e),Rt(be().onDownButtonMouseDown(r))})("mouseup",function(){return Pt(e),Rt(be().onDownButtonMouseUp())})("mouseleave",function(){return Pt(e),Rt(be().onDownButtonMouseLeave())})("keydown",function(r){return Pt(e),Rt(be().onDownButtonKeyDown(r))})("keyup",function(){return Pt(e),Rt(be().onDownButtonKeyUp())}),Je()()}if(2&i){const e=be();Ie(1),kr(e.incrementButtonClass),de("ngClass",uo(10,JV))("icon",e.incrementButtonIcon)("disabled",e.disabled),Ie(1),kr(e.decrementButtonClass),de("ngClass",uo(11,e4))("icon",e.decrementButtonIcon)("disabled",e.disabled)}}function yte(i,t){if(1&i){const e=vi();Ke(0,"button",8),mn("mousedown",function(r){return Pt(e),Rt(be().onUpButtonMouseDown(r))})("mouseup",function(){return Pt(e),Rt(be().onUpButtonMouseUp())})("mouseleave",function(){return Pt(e),Rt(be().onUpButtonMouseLeave())})("keydown",function(r){return Pt(e),Rt(be().onUpButtonKeyDown(r))})("keyup",function(){return Pt(e),Rt(be().onUpButtonKeyUp())}),Je()}if(2&i){const e=be();kr(e.incrementButtonClass),de("ngClass",uo(5,JV))("icon",e.incrementButtonIcon)("disabled",e.disabled)}}function _te(i,t){if(1&i){const e=vi();Ke(0,"button",8),mn("mousedown",function(r){return Pt(e),Rt(be().onDownButtonMouseDown(r))})("mouseup",function(){return Pt(e),Rt(be().onDownButtonMouseUp())})("mouseleave",function(){return Pt(e),Rt(be().onDownButtonMouseLeave())})("keydown",function(r){return Pt(e),Rt(be().onDownButtonKeyDown(r))})("keyup",function(){return Pt(e),Rt(be().onDownButtonKeyUp())}),Je()}if(2&i){const e=be();kr(e.decrementButtonClass),de("ngClass",uo(5,e4))("icon",e.decrementButtonIcon)("disabled",e.disabled)}}const bte=function(i,t,e){return{"p-inputnumber p-component":!0,"p-inputnumber-buttons-stacked":i,"p-inputnumber-buttons-horizontal":t,"p-inputnumber-buttons-vertical":e}},Cte={provide:Cc,useExisting:cs(()=>t4),multi:!0};let t4=(()=>{class i{constructor(e,n){this.el=e,this.cd=n,this.showButtons=!1,this.format=!0,this.buttonLayout="stacked",this.incrementButtonIcon="pi pi-angle-up",this.decrementButtonIcon="pi pi-angle-down",this.readonly=!1,this.step=1,this.allowEmpty=!0,this.mode="decimal",this.useGrouping=!0,this.showClear=!1,this.onInput=new Fn,this.onFocus=new Fn,this.onBlur=new Fn,this.onKeyDown=new Fn,this.onClear=new Fn,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.groupChar="",this.prefixChar="",this.suffixChar=""}get disabled(){return this._disabled}set disabled(e){e&&(this.focused=!1),this._disabled=e,this.timer&&this.clearTimer()}ngOnChanges(e){["locale","localeMatcher","mode","currency","currencyDisplay","useGrouping","minFractionDigits","maxFractionDigits","prefix","suffix"].some(r=>!!e[r])&&this.updateConstructParser()}ngOnInit(){this.constructParser(),this.initialized=!0}getOptions(){return{localeMatcher:this.localeMatcher,style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,useGrouping:this.useGrouping,minimumFractionDigits:this.minFractionDigits,maximumFractionDigits:this.maxFractionDigits}}constructParser(){this.numberFormat=new Intl.NumberFormat(this.locale,this.getOptions());const e=[...new Intl.NumberFormat(this.locale,{useGrouping:!1}).format(9876543210)].reverse(),n=new Map(e.map((r,s)=>[r,s]));this._numeral=new RegExp(`[${e.join("")}]`,"g"),this._group=this.getGroupingExpression(),this._minusSign=this.getMinusSignExpression(),this._currency=this.getCurrencyExpression(),this._decimal=this.getDecimalExpression(),this._suffix=this.getSuffixExpression(),this._prefix=this.getPrefixExpression(),this._index=r=>n.get(r)}updateConstructParser(){this.initialized&&this.constructParser()}escapeRegExp(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}getDecimalExpression(){const e=new Intl.NumberFormat(this.locale,{...this.getOptions(),useGrouping:!1});return new RegExp(`[${e.format(1.1).replace(this._currency,"").trim().replace(this._numeral,"")}]`,"g")}getGroupingExpression(){const e=new Intl.NumberFormat(this.locale,{useGrouping:!0});return this.groupChar=e.format(1e6).trim().replace(this._numeral,"").charAt(0),new RegExp(`[${this.groupChar}]`,"g")}getMinusSignExpression(){const e=new Intl.NumberFormat(this.locale,{useGrouping:!1});return new RegExp(`[${e.format(-1).trim().replace(this._numeral,"")}]`,"g")}getCurrencyExpression(){if(this.currency){const e=new Intl.NumberFormat(this.locale,{style:"currency",currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0});return new RegExp(`[${e.format(1).replace(/\s/g,"").replace(this._numeral,"").replace(this._group,"")}]`,"g")}return new RegExp("[]","g")}getPrefixExpression(){if(this.prefix)this.prefixChar=this.prefix;else{const e=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay});this.prefixChar=e.format(1).split("1")[0]}return new RegExp(`${this.escapeRegExp(this.prefixChar||"")}`,"g")}getSuffixExpression(){if(this.suffix)this.suffixChar=this.suffix;else{const e=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0});this.suffixChar=e.format(1).split("1")[1]}return new RegExp(`${this.escapeRegExp(this.suffixChar||"")}`,"g")}formatValue(e){if(null!=e){if("-"===e)return e;if(this.format){let r=new Intl.NumberFormat(this.locale,this.getOptions()).format(e);return this.prefix&&(r=this.prefix+r),this.suffix&&(r+=this.suffix),r}return e.toString()}return""}parseValue(e){let n=e.replace(this._suffix,"").replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").replace(this._group,"").replace(this._minusSign,"-").replace(this._decimal,".").replace(this._numeral,this._index);if(n){if("-"===n)return n;let r=+n;return isNaN(r)?null:r}return null}repeat(e,n,r){if(this.readonly)return;let s=n||500;this.clearTimer(),this.timer=setTimeout(()=>{this.repeat(e,40,r)},s),this.spin(e,r)}spin(e,n){let r=this.step*n,s=this.parseValue(this.input.nativeElement.value)||0,o=this.validateValue(s+r);this.maxlength&&this.maxlength<this.formatValue(o).length||(this.updateInput(o,null,"spin",null),this.updateModel(e,o),this.handleOnInput(e,s,o))}clear(){this.value=null,this.onModelChange(this.value),this.onClear.emit()}onUpButtonMouseDown(e){this.input.nativeElement.focus(),this.repeat(e,null,1),e.preventDefault()}onUpButtonMouseUp(){this.clearTimer()}onUpButtonMouseLeave(){this.clearTimer()}onUpButtonKeyDown(e){(32===e.keyCode||13===e.keyCode)&&this.repeat(e,null,1)}onUpButtonKeyUp(){this.clearTimer()}onDownButtonMouseDown(e){this.input.nativeElement.focus(),this.repeat(e,null,-1),e.preventDefault()}onDownButtonMouseUp(){this.clearTimer()}onDownButtonMouseLeave(){this.clearTimer()}onDownButtonKeyUp(){this.clearTimer()}onDownButtonKeyDown(e){(32===e.keyCode||13===e.keyCode)&&this.repeat(e,null,-1)}onUserInput(e){this.readonly||(this.isSpecialChar&&(e.target.value=this.lastValue),this.isSpecialChar=!1)}onInputKeyDown(e){if(this.readonly)return;if(this.lastValue=e.target.value,e.shiftKey||e.altKey)return void(this.isSpecialChar=!0);let n=e.target.selectionStart,r=e.target.selectionEnd,s=e.target.value,o=null;switch(e.altKey&&e.preventDefault(),e.which){case 38:this.spin(e,1),e.preventDefault();break;case 40:this.spin(e,-1),e.preventDefault();break;case 37:this.isNumeralChar(s.charAt(n-1))||e.preventDefault();break;case 39:this.isNumeralChar(s.charAt(n))||e.preventDefault();break;case 13:o=this.validateValue(this.parseValue(this.input.nativeElement.value)),this.input.nativeElement.value=this.formatValue(o),this.input.nativeElement.setAttribute("aria-valuenow",o),this.updateModel(e,o);break;case 8:if(e.preventDefault(),n===r){const l=s.charAt(n-1),{decimalCharIndex:u,decimalCharIndexWithoutPrefix:p}=this.getDecimalCharIndexes(s);if(this.isNumeralChar(l)){const v=this.getDecimalLength(s);if(this._group.test(l))this._group.lastIndex=0,o=s.slice(0,n-2)+s.slice(n-1);else if(this._decimal.test(l))this._decimal.lastIndex=0,v?this.input.nativeElement.setSelectionRange(n-1,n-1):o=s.slice(0,n-1)+s.slice(n);else if(u>0&&n>u){const w=this.isDecimalMode()&&(this.minFractionDigits||0)<v?"":"0";o=s.slice(0,n-1)+w+s.slice(n)}else 1===p?(o=s.slice(0,n-1)+"0"+s.slice(n),o=this.parseValue(o)>0?o:""):o=s.slice(0,n-1)+s.slice(n)}this.updateValue(e,o,null,"delete-single")}else o=this.deleteRange(s,n,r),this.updateValue(e,o,null,"delete-range");break;case 46:if(e.preventDefault(),n===r){const l=s.charAt(n),{decimalCharIndex:u,decimalCharIndexWithoutPrefix:p}=this.getDecimalCharIndexes(s);if(this.isNumeralChar(l)){const v=this.getDecimalLength(s);if(this._group.test(l))this._group.lastIndex=0,o=s.slice(0,n)+s.slice(n+2);else if(this._decimal.test(l))this._decimal.lastIndex=0,v?this.input.nativeElement.setSelectionRange(n+1,n+1):o=s.slice(0,n)+s.slice(n+1);else if(u>0&&n>u){const w=this.isDecimalMode()&&(this.minFractionDigits||0)<v?"":"0";o=s.slice(0,n)+w+s.slice(n+1)}else 1===p?(o=s.slice(0,n)+"0"+s.slice(n+1),o=this.parseValue(o)>0?o:""):o=s.slice(0,n)+s.slice(n+1)}this.updateValue(e,o,null,"delete-back-single")}else o=this.deleteRange(s,n,r),this.updateValue(e,o,null,"delete-range")}this.onKeyDown.emit(e)}onInputKeyPress(e){if(this.readonly)return;e.preventDefault();let n=e.which||e.keyCode,r=String.fromCharCode(n);const s=this.isDecimalSign(r),o=this.isMinusSign(r);(48<=n&&n<=57||o||s)&&this.insert(e,r,{isDecimalSign:s,isMinusSign:o})}onPaste(e){if(!this.disabled&&!this.readonly){e.preventDefault();let n=(e.clipboardData||window.clipboardData).getData("Text");if(n){let r=this.parseValue(n);null!=r&&this.insert(e,r.toString())}}}allowMinusSign(){return null==this.min||this.min<0}isMinusSign(e){return!(!this._minusSign.test(e)&&"-"!==e||(this._minusSign.lastIndex=0,0))}isDecimalSign(e){return!!this._decimal.test(e)&&(this._decimal.lastIndex=0,!0)}isDecimalMode(){return"decimal"===this.mode}getDecimalCharIndexes(e){let n=e.search(this._decimal);this._decimal.lastIndex=0;const s=e.replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").search(this._decimal);return this._decimal.lastIndex=0,{decimalCharIndex:n,decimalCharIndexWithoutPrefix:s}}getCharIndexes(e){const n=e.search(this._decimal);this._decimal.lastIndex=0;const r=e.search(this._minusSign);this._minusSign.lastIndex=0;const s=e.search(this._suffix);this._suffix.lastIndex=0;const o=e.search(this._currency);return this._currency.lastIndex=0,{decimalCharIndex:n,minusCharIndex:r,suffixCharIndex:s,currencyCharIndex:o}}insert(e,n,r={isDecimalSign:!1,isMinusSign:!1}){const s=n.search(this._minusSign);if(this._minusSign.lastIndex=0,!this.allowMinusSign()&&-1!==s)return;let o=this.input.nativeElement.selectionStart,l=this.input.nativeElement.selectionEnd,u=this.input.nativeElement.value.trim();const{decimalCharIndex:p,minusCharIndex:v,suffixCharIndex:w,currencyCharIndex:I}=this.getCharIndexes(u);let T;if(r.isMinusSign)0===o&&(T=u,(-1===v||0!==l)&&(T=this.insertText(u,n,0,l)),this.updateValue(e,T,n,"insert"));else if(r.isDecimalSign)p>0&&o===p?this.updateValue(e,u,n,"insert"):(p>o&&p<l||-1===p&&this.maxFractionDigits)&&(T=this.insertText(u,n,o,l),this.updateValue(e,T,n,"insert"));else{const k=this.numberFormat.resolvedOptions().maximumFractionDigits,G=o!==l?"range-insert":"insert";if(p>0&&o>p){if(o+n.length-(p+1)<=k){const Y=I>=o?I-1:w>=o?w:u.length;T=u.slice(0,o)+n+u.slice(o+n.length,Y)+u.slice(Y),this.updateValue(e,T,n,G)}}else T=this.insertText(u,n,o,l),this.updateValue(e,T,n,G)}}insertText(e,n,r,s){if(2===("."===n?n:n.split(".")).length){const l=e.slice(r,s).search(this._decimal);return this._decimal.lastIndex=0,l>0?e.slice(0,r)+this.formatValue(n)+e.slice(s):e||this.formatValue(n)}return s-r===e.length?this.formatValue(n):0===r?n+e.slice(s):s===e.length?e.slice(0,r)+n:e.slice(0,r)+n+e.slice(s)}deleteRange(e,n,r){let s;return s=r-n===e.length?"":0===n?e.slice(r):r===e.length?e.slice(0,n):e.slice(0,n)+e.slice(r),s}initCursor(){let e=this.input.nativeElement.selectionStart,n=this.input.nativeElement.value,r=n.length,s=null,o=(this.prefixChar||"").length;n=n.replace(this._prefix,""),e-=o;let l=n.charAt(e);if(this.isNumeralChar(l))return e+o;let u=e-1;for(;u>=0;){if(l=n.charAt(u),this.isNumeralChar(l)){s=u+o;break}u--}if(null!==s)this.input.nativeElement.setSelectionRange(s+1,s+1);else{for(u=e;u<r;){if(l=n.charAt(u),this.isNumeralChar(l)){s=u+o;break}u++}null!==s&&this.input.nativeElement.setSelectionRange(s,s)}return s||0}onInputClick(){this.readonly||this.initCursor()}isNumeralChar(e){return!(1!==e.length||!(this._numeral.test(e)||this._decimal.test(e)||this._group.test(e)||this._minusSign.test(e))||(this.resetRegex(),0))}resetRegex(){this._numeral.lastIndex=0,this._decimal.lastIndex=0,this._group.lastIndex=0,this._minusSign.lastIndex=0}updateValue(e,n,r,s){let o=this.input.nativeElement.value,l=null;null!=n&&(l=this.parseValue(n),l=l||this.allowEmpty?l:0,this.updateInput(l,r,s,n),this.handleOnInput(e,o,l))}handleOnInput(e,n,r){this.isValueChanged(n,r)&&this.onInput.emit({originalEvent:e,value:r})}isValueChanged(e,n){return null===n&&null!==e||null!=n&&n!==("string"==typeof e?this.parseValue(e):e)}validateValue(e){return"-"===e||null==e?null:null!=this.min&&e<this.min?this.min:null!=this.max&&e>this.max?this.max:e}updateInput(e,n,r,s){n=n||"";let o=this.input.nativeElement.value,l=this.formatValue(e),u=o.length;if(l!==s&&(l=this.concatValues(l,s)),0===u){this.input.nativeElement.value=l,this.input.nativeElement.setSelectionRange(0,0);const v=this.initCursor()+n.length;this.input.nativeElement.setSelectionRange(v,v)}else{let p=this.input.nativeElement.selectionStart,v=this.input.nativeElement.selectionEnd;if(this.maxlength&&this.maxlength<l.length)return;this.input.nativeElement.value=l;let w=l.length;if("range-insert"===r){const I=this.parseValue((o||"").slice(0,p)),k=(null!==I?I.toString():"").split("").join(`(${this.groupChar})?`),G=new RegExp(k,"g");G.test(l);const Y=n.split("").join(`(${this.groupChar})?`),ce=new RegExp(Y,"g");ce.test(l.slice(G.lastIndex)),v=G.lastIndex+ce.lastIndex,this.input.nativeElement.setSelectionRange(v,v)}else if(w===u)"insert"===r||"delete-back-single"===r?this.input.nativeElement.setSelectionRange(v+1,v+1):"delete-single"===r?this.input.nativeElement.setSelectionRange(v-1,v-1):("delete-range"===r||"spin"===r)&&this.input.nativeElement.setSelectionRange(v,v);else if("delete-back-single"===r){let I=o.charAt(v-1),T=o.charAt(v),k=u-w,G=this._group.test(T);G&&1===k?v+=1:!G&&this.isNumeralChar(I)&&(v+=-1*k+1),this._group.lastIndex=0,this.input.nativeElement.setSelectionRange(v,v)}else if("-"===o&&"insert"===r){this.input.nativeElement.setSelectionRange(0,0);const T=this.initCursor()+n.length+1;this.input.nativeElement.setSelectionRange(T,T)}else v+=w-u,this.input.nativeElement.setSelectionRange(v,v)}this.input.nativeElement.setAttribute("aria-valuenow",e)}concatValues(e,n){if(e&&n){let r=n.search(this._decimal);return this._decimal.lastIndex=0,-1!==r?e.split(this._decimal)[0]+n.slice(r):e}return e}getDecimalLength(e){if(e){const n=e.split(this._decimal);if(2===n.length)return n[1].replace(this._suffix,"").trim().replace(/\s/g,"").replace(this._currency,"").length}return 0}onInputFocus(e){this.focused=!0,this.onFocus.emit(e)}onInputBlur(e){this.focused=!1;let n=this.validateValue(this.parseValue(this.input.nativeElement.value));this.input.nativeElement.value=this.formatValue(n),this.input.nativeElement.setAttribute("aria-valuenow",n),this.updateModel(e,n),this.onBlur.emit(e)}formattedValue(){return this.formatValue(this.value||this.allowEmpty?this.value:0)}updateModel(e,n){this.value!==n&&(this.value=n,this.onModelChange(n)),this.onModelTouched()}writeValue(e){this.value=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}get filled(){return null!=this.value&&this.value.toString().length>0}clearTimer(){this.timer&&clearInterval(this.timer)}getFormatter(){return this.numberFormat}}return i.\u0275fac=function(e){return new(e||i)(Xt(Yn),Xt(xo))},i.\u0275cmp=_r({type:i,selectors:[["p-inputNumber"]],viewQuery:function(e,n){if(1&e&&Tr(gte,5),2&e){let r;Wi(r=ji())&&(n.input=r.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(e,n){2&e&&Mp("p-inputwrapper-filled",n.filled)("p-inputwrapper-focus",n.focused)("p-inputnumber-clearable",n.showClear&&"vertical"!=n.buttonLayout)},inputs:{showButtons:"showButtons",format:"format",buttonLayout:"buttonLayout",inputId:"inputId",styleClass:"styleClass",style:"style",placeholder:"placeholder",size:"size",maxlength:"maxlength",tabindex:"tabindex",title:"title",ariaLabel:"ariaLabel",ariaRequired:"ariaRequired",name:"name",required:"required",autocomplete:"autocomplete",min:"min",max:"max",incrementButtonClass:"incrementButtonClass",decrementButtonClass:"decrementButtonClass",incrementButtonIcon:"incrementButtonIcon",decrementButtonIcon:"decrementButtonIcon",readonly:"readonly",step:"step",allowEmpty:"allowEmpty",locale:"locale",localeMatcher:"localeMatcher",mode:"mode",currency:"currency",currencyDisplay:"currencyDisplay",useGrouping:"useGrouping",minFractionDigits:"minFractionDigits",maxFractionDigits:"maxFractionDigits",prefix:"prefix",suffix:"suffix",inputStyle:"inputStyle",inputStyleClass:"inputStyleClass",showClear:"showClear",disabled:"disabled"},outputs:{onInput:"onInput",onFocus:"onFocus",onBlur:"onBlur",onKeyDown:"onKeyDown",onClear:"onClear"},features:[Ao([Cte]),da],decls:7,vars:32,consts:[[3,"ngClass","ngStyle"],["pInputText","","inputmode","decimal",3,"ngClass","ngStyle","value","disabled","readonly","input","keydown","keypress","paste","click","focus","blur"],["input",""],["class","p-inputnumber-clear-icon pi pi-times",3,"click",4,"ngIf"],["class","p-inputnumber-button-group",4,"ngIf"],["type","button","pButton","",3,"ngClass","class","icon","disabled","mousedown","mouseup","mouseleave","keydown","keyup",4,"ngIf"],[1,"p-inputnumber-clear-icon","pi","pi-times",3,"click"],[1,"p-inputnumber-button-group"],["type","button","pButton","",3,"ngClass","icon","disabled","mousedown","mouseup","mouseleave","keydown","keyup"]],template:function(e,n){1&e&&(Ke(0,"span",0)(1,"input",1,2),mn("input",function(s){return n.onUserInput(s)})("keydown",function(s){return n.onInputKeyDown(s)})("keypress",function(s){return n.onInputKeyPress(s)})("paste",function(s){return n.onPaste(s)})("click",function(){return n.onInputClick()})("focus",function(s){return n.onInputFocus(s)})("blur",function(s){return n.onInputBlur(s)}),Je(),$e(3,mte,1,0,"i",3),$e(4,vte,3,12,"span",4),$e(5,yte,1,6,"button",5),$e(6,_te,1,6,"button",5),Je()),2&e&&(kr(n.styleClass),de("ngClass",Su(28,bte,n.showButtons&&"stacked"===n.buttonLayout,n.showButtons&&"horizontal"===n.buttonLayout,n.showButtons&&"vertical"===n.buttonLayout))("ngStyle",n.style),Ie(1),kr(n.inputStyleClass),de("ngClass","p-inputnumber-input")("ngStyle",n.inputStyle)("value",n.formattedValue())("disabled",n.disabled)("readonly",n.readonly),vr("placeholder",n.placeholder)("title",n.title)("id",n.inputId)("size",n.size)("name",n.name)("autocomplete",n.autocomplete)("maxlength",n.maxlength)("tabindex",n.tabindex)("aria-label",n.ariaLabel)("aria-required",n.ariaRequired)("required",n.required)("min",n.min)("max",n.max),Ie(2),de("ngIf","vertical"!=n.buttonLayout&&n.showClear&&n.value),Ie(1),de("ngIf",n.showButtons&&"stacked"===n.buttonLayout),Ie(1),de("ngIf",n.showButtons&&"stacked"!==n.buttonLayout),Ie(1),de("ngIf",n.showButtons&&"stacked"!==n.buttonLayout))},dependencies:[no,ho,Po,fC,x0],styles:["p-inputnumber,.p-inputnumber{display:inline-flex}.p-inputnumber-button{display:flex;align-items:center;justify-content:center;flex:0 0 auto}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button .p-button-label,.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button .p-button-label{display:none}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-up{border-top-left-radius:0;border-bottom-left-radius:0;border-bottom-right-radius:0;padding:0}.p-inputnumber-buttons-stacked .p-inputnumber-input{border-top-right-radius:0;border-bottom-right-radius:0}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-down{border-top-left-radius:0;border-top-right-radius:0;border-bottom-left-radius:0;padding:0}.p-inputnumber-buttons-stacked .p-inputnumber-button-group{display:flex;flex-direction:column}.p-inputnumber-buttons-stacked .p-inputnumber-button-group .p-button.p-inputnumber-button{flex:1 1 auto}.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-up{order:3;border-top-left-radius:0;border-bottom-left-radius:0}.p-inputnumber-buttons-horizontal .p-inputnumber-input{order:2;border-radius:0}.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-down{order:1;border-top-right-radius:0;border-bottom-right-radius:0}.p-inputnumber-buttons-vertical{flex-direction:column}.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-up{order:1;border-bottom-left-radius:0;border-bottom-right-radius:0;width:100%}.p-inputnumber-buttons-vertical .p-inputnumber-input{order:2;border-radius:0;text-align:center}.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-down{order:3;border-top-left-radius:0;border-top-right-radius:0;width:100%}.p-inputnumber-input{flex:1 1 auto}.p-fluid p-inputnumber,.p-fluid .p-inputnumber{width:100%}.p-fluid .p-inputnumber .p-inputnumber-input{width:1%}.p-fluid .p-inputnumber-buttons-vertical .p-inputnumber-input{width:100%}.p-inputnumber-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-inputnumber-clearable{position:relative}\n"],encapsulation:2,changeDetection:0}),i})(),j1=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({imports:[Os,V2,av]}),i})();function wte(i,t){1&i&&Ni(0)}const U2=function(i){return{$implicit:i}};function Ate(i,t){if(1&i&&(Ke(0,"div",15),$e(1,wte,1,0,"ng-container",16),Je()),2&i){const e=be(2);Ie(1),de("ngTemplateOutlet",e.templateLeft)("ngTemplateOutletContext",_i(2,U2,e.paginatorState))}}function xte(i,t){if(1&i&&(Ke(0,"span",17),li(1),Je()),2&i){const e=be(2);Ie(1),ts(e.currentPageReport)}}const $1=function(i){return{"p-disabled":i}};function Ite(i,t){if(1&i){const e=vi();Ke(0,"button",18),mn("click",function(r){return Pt(e),Rt(be(2).changePageToFirst(r))}),Bn(1,"span",19),Je()}if(2&i){const e=be(2);de("disabled",e.isFirstPage()||e.empty())("ngClass",_i(2,$1,e.isFirstPage()||e.empty()))}}const Ste=function(i){return{"p-highlight":i}};function Ete(i,t){if(1&i){const e=vi();Ke(0,"button",22),mn("click",function(r){const o=Pt(e).$implicit;return Rt(be(3).onPageLinkClick(r,o-1))}),li(1),Je()}if(2&i){const e=t.$implicit,n=be(3);de("ngClass",_i(2,Ste,e-1==n.getPage())),Ie(1),ts(e)}}function Tte(i,t){if(1&i&&(Ke(0,"span",20),$e(1,Ete,2,4,"button",21),Je()),2&i){const e=be(2);Ie(1),de("ngForOf",e.pageLinks)}}function Mte(i,t){1&i&&li(0),2&i&&ts(be(3).currentPageReport)}function Dte(i,t){if(1&i){const e=vi();Ke(0,"p-dropdown",23),mn("onChange",function(r){return Pt(e),Rt(be(2).onPageDropdownChange(r))}),$e(1,Mte,1,1,"ng-template",24),Je()}if(2&i){const e=be(2);de("options",e.pageItems)("ngModel",e.getPage())("disabled",e.empty())("appendTo",e.dropdownAppendTo)("scrollHeight",e.dropdownScrollHeight)}}function Lte(i,t){if(1&i){const e=vi();Ke(0,"button",25),mn("click",function(r){return Pt(e),Rt(be(2).changePageToLast(r))}),Bn(1,"span",26),Je()}if(2&i){const e=be(2);de("disabled",e.isLastPage()||e.empty())("ngClass",_i(2,$1,e.isLastPage()||e.empty()))}}function Pte(i,t){if(1&i){const e=vi();Ke(0,"p-inputNumber",27),mn("ngModelChange",function(r){return Pt(e),Rt(be(2).changePage(r-1))}),Je()}if(2&i){const e=be(2);de("ngModel",e.currentPage())("disabled",e.empty())}}function Rte(i,t){1&i&&Ni(0)}function kte(i,t){if(1&i&&$e(0,Rte,1,0,"ng-container",16),2&i){const e=t.$implicit;de("ngTemplateOutlet",be(4).dropdownItemTemplate)("ngTemplateOutletContext",_i(2,U2,e))}}function Ote(i,t){1&i&&(zr(0),$e(1,kte,1,4,"ng-template",30),Vr())}function Fte(i,t){if(1&i){const e=vi();Ke(0,"p-dropdown",28),mn("ngModelChange",function(r){return Pt(e),Rt(be(2).rows=r)})("onChange",function(r){return Pt(e),Rt(be(2).onRppChange(r))}),$e(1,Ote,2,0,"ng-container",29),Je()}if(2&i){const e=be(2);de("options",e.rowsPerPageItems)("ngModel",e.rows)("disabled",e.empty())("appendTo",e.dropdownAppendTo)("scrollHeight",e.dropdownScrollHeight),Ie(1),de("ngIf",e.dropdownItemTemplate)}}function Nte(i,t){1&i&&Ni(0)}function Bte(i,t){if(1&i&&(Ke(0,"div",31),$e(1,Nte,1,0,"ng-container",16),Je()),2&i){const e=be(2);Ie(1),de("ngTemplateOutlet",e.templateRight)("ngTemplateOutletContext",_i(2,U2,e.paginatorState))}}function zte(i,t){if(1&i){const e=vi();Ke(0,"div",1),$e(1,Ate,2,4,"div",2),$e(2,xte,2,1,"span",3),$e(3,Ite,2,4,"button",4),Ke(4,"button",5),mn("click",function(r){return Pt(e),Rt(be().changePageToPrev(r))}),Bn(5,"span",6),Je(),$e(6,Tte,2,1,"span",7),$e(7,Dte,2,5,"p-dropdown",8),Ke(8,"button",9),mn("click",function(r){return Pt(e),Rt(be().changePageToNext(r))}),Bn(9,"span",10),Je(),$e(10,Lte,2,4,"button",11),$e(11,Pte,1,2,"p-inputNumber",12),$e(12,Fte,2,6,"p-dropdown",13),$e(13,Bte,2,4,"div",14),Je()}if(2&i){const e=be();kr(e.styleClass),de("ngStyle",e.style)("ngClass","p-paginator p-component"),Ie(1),de("ngIf",e.templateLeft),Ie(1),de("ngIf",e.showCurrentPageReport),Ie(1),de("ngIf",e.showFirstLastIcon),Ie(1),de("disabled",e.isFirstPage()||e.empty())("ngClass",_i(17,$1,e.isFirstPage()||e.empty())),Ie(2),de("ngIf",e.showPageLinks),Ie(1),de("ngIf",e.showJumpToPageDropdown),Ie(1),de("disabled",e.isLastPage()||e.empty())("ngClass",_i(19,$1,e.isLastPage()||e.empty())),Ie(2),de("ngIf",e.showFirstLastIcon),Ie(1),de("ngIf",e.showJumpToPageInput),Ie(1),de("ngIf",e.rowsPerPageOptions),Ie(1),de("ngIf",e.templateRight)}}let n4=(()=>{class i{constructor(e){this.cd=e,this.pageLinkSize=5,this.onPageChange=new Fn,this.alwaysShow=!0,this.dropdownScrollHeight="200px",this.currentPageReportTemplate="{currentPage} of {totalPages}",this.showFirstLastIcon=!0,this.totalRecords=0,this.rows=0,this.showPageLinks=!0,this._first=0,this._page=0}ngOnInit(){this.updatePaginatorState()}ngOnChanges(e){e.totalRecords&&(this.updatePageLinks(),this.updatePaginatorState(),this.updateFirst(),this.updateRowsPerPageOptions()),e.first&&(this._first=e.first.currentValue,this.updatePageLinks(),this.updatePaginatorState()),e.rows&&(this.updatePageLinks(),this.updatePaginatorState()),e.rowsPerPageOptions&&this.updateRowsPerPageOptions()}get first(){return this._first}set first(e){this._first=e}updateRowsPerPageOptions(){if(this.rowsPerPageOptions){this.rowsPerPageItems=[];for(let e of this.rowsPerPageOptions)"object"==typeof e&&e.showAll?this.rowsPerPageItems.unshift({label:e.showAll,value:this.totalRecords}):this.rowsPerPageItems.push({label:String(e),value:e})}}isFirstPage(){return 0===this.getPage()}isLastPage(){return this.getPage()===this.getPageCount()-1}getPageCount(){return Math.ceil(this.totalRecords/this.rows)}calculatePageLinkBoundaries(){let e=this.getPageCount(),n=Math.min(this.pageLinkSize,e),r=Math.max(0,Math.ceil(this.getPage()-n/2)),s=Math.min(e-1,r+n-1);return r=Math.max(0,r-(this.pageLinkSize-(s-r+1))),[r,s]}updatePageLinks(){this.pageLinks=[];let e=this.calculatePageLinkBoundaries(),r=e[1];for(let s=e[0];s<=r;s++)this.pageLinks.push(s+1);if(this.showJumpToPageDropdown){this.pageItems=[];for(let s=0;s<this.getPageCount();s++)this.pageItems.push({label:String(s+1),value:s})}}changePage(e){var n=this.getPageCount();if(e>=0&&e<n){this._first=this.rows*e;var r={page:e,first:this.first,rows:this.rows,pageCount:n};this.updatePageLinks(),this.onPageChange.emit(r),this.updatePaginatorState()}}updateFirst(){const e=this.getPage();e>0&&this.totalRecords&&this.first>=this.totalRecords&&Promise.resolve(null).then(()=>this.changePage(e-1))}getPage(){return Math.floor(this.first/this.rows)}changePageToFirst(e){this.isFirstPage()||this.changePage(0),e.preventDefault()}changePageToPrev(e){this.changePage(this.getPage()-1),e.preventDefault()}changePageToNext(e){this.changePage(this.getPage()+1),e.preventDefault()}changePageToLast(e){this.isLastPage()||this.changePage(this.getPageCount()-1),e.preventDefault()}onPageLinkClick(e,n){this.changePage(n),e.preventDefault()}onRppChange(e){this.changePage(this.getPage())}onPageDropdownChange(e){this.changePage(e.value)}updatePaginatorState(){this.paginatorState={page:this.getPage(),pageCount:this.getPageCount(),rows:this.rows,first:this.first,totalRecords:this.totalRecords}}empty(){return 0===this.getPageCount()}currentPage(){return this.getPageCount()>0?this.getPage()+1:0}get currentPageReport(){return this.currentPageReportTemplate.replace("{currentPage}",String(this.currentPage())).replace("{totalPages}",String(this.getPageCount())).replace("{first}",String(this.totalRecords>0?this._first+1:0)).replace("{last}",String(Math.min(this._first+this.rows,this.totalRecords))).replace("{rows}",String(this.rows)).replace("{totalRecords}",String(this.totalRecords))}}return i.\u0275fac=function(e){return new(e||i)(Xt(xo))},i.\u0275cmp=_r({type:i,selectors:[["p-paginator"]],hostAttrs:[1,"p-element"],inputs:{pageLinkSize:"pageLinkSize",style:"style",styleClass:"styleClass",alwaysShow:"alwaysShow",templateLeft:"templateLeft",templateRight:"templateRight",dropdownAppendTo:"dropdownAppendTo",dropdownScrollHeight:"dropdownScrollHeight",currentPageReportTemplate:"currentPageReportTemplate",showCurrentPageReport:"showCurrentPageReport",showFirstLastIcon:"showFirstLastIcon",totalRecords:"totalRecords",rows:"rows",rowsPerPageOptions:"rowsPerPageOptions",showJumpToPageDropdown:"showJumpToPageDropdown",showJumpToPageInput:"showJumpToPageInput",showPageLinks:"showPageLinks",dropdownItemTemplate:"dropdownItemTemplate",first:"first"},outputs:{onPageChange:"onPageChange"},features:[da],decls:1,vars:1,consts:[[3,"class","ngStyle","ngClass",4,"ngIf"],[3,"ngStyle","ngClass"],["class","p-paginator-left-content",4,"ngIf"],["class","p-paginator-current",4,"ngIf"],["type","button","pRipple","","class","p-paginator-first p-paginator-element p-link",3,"disabled","ngClass","click",4,"ngIf"],["type","button","pRipple","",1,"p-paginator-prev","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-left"],["class","p-paginator-pages",4,"ngIf"],["styleClass","p-paginator-page-options",3,"options","ngModel","disabled","appendTo","scrollHeight","onChange",4,"ngIf"],["type","button","pRipple","",1,"p-paginator-next","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-right"],["type","button","pRipple","","class","p-paginator-last p-paginator-element p-link",3,"disabled","ngClass","click",4,"ngIf"],["class","p-paginator-page-input",3,"ngModel","disabled","ngModelChange",4,"ngIf"],["styleClass","p-paginator-rpp-options",3,"options","ngModel","disabled","appendTo","scrollHeight","ngModelChange","onChange",4,"ngIf"],["class","p-paginator-right-content",4,"ngIf"],[1,"p-paginator-left-content"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-paginator-current"],["type","button","pRipple","",1,"p-paginator-first","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-double-left"],[1,"p-paginator-pages"],["type","button","class","p-paginator-page p-paginator-element p-link","pRipple","",3,"ngClass","click",4,"ngFor","ngForOf"],["type","button","pRipple","",1,"p-paginator-page","p-paginator-element","p-link",3,"ngClass","click"],["styleClass","p-paginator-page-options",3,"options","ngModel","disabled","appendTo","scrollHeight","onChange"],["pTemplate","selectedItem"],["type","button","pRipple","",1,"p-paginator-last","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-double-right"],[1,"p-paginator-page-input",3,"ngModel","disabled","ngModelChange"],["styleClass","p-paginator-rpp-options",3,"options","ngModel","disabled","appendTo","scrollHeight","ngModelChange","onChange"],[4,"ngIf"],["pTemplate","item"],[1,"p-paginator-right-content"]],template:function(e,n){1&e&&$e(0,zte,14,21,"div",0),2&e&&de("ngIf",!!n.alwaysShow||n.pageLinks&&n.pageLinks.length>1)},dependencies:[no,jc,ho,el,Po,z2,za,t4,uC,oy,Du],styles:[".p-paginator{display:flex;align-items:center;justify-content:center;flex-wrap:wrap}.p-paginator-left-content{margin-right:auto}.p-paginator-right-content{margin-left:auto}.p-paginator-page,.p-paginator-next,.p-paginator-last,.p-paginator-first,.p-paginator-prev,.p-paginator-current{cursor:pointer;display:inline-flex;align-items:center;justify-content:center;line-height:1;-webkit-user-select:none;user-select:none;overflow:hidden;position:relative}.p-paginator-element:focus{z-index:1;position:relative}\n"],encapsulation:2,changeDetection:0}),i})(),r4=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({imports:[Os,G1,j1,H1,xa,Xc,G1,j1,H1,xa]}),i})();function Vte(i,t){1&i&&Bn(0,"span",8),2&i&&(kr(be(2).$implicit.icon),de("ngClass","p-button-icon p-button-icon-left"))}function Ute(i,t){if(1&i&&(zr(0),$e(1,Vte,1,3,"span",6),Ke(2,"span",7),li(3),Je(),Vr()),2&i){const e=be().$implicit,n=be();Ie(1),de("ngIf",e.icon),Ie(2),ts(n.getOptionLabel(e))}}function Hte(i,t){1&i&&Ni(0)}const Gte=function(i,t){return{$implicit:i,index:t}};function Wte(i,t){if(1&i&&$e(0,Hte,1,0,"ng-container",9),2&i){const e=be(),n=e.$implicit,r=e.index;de("ngTemplateOutlet",be().itemTemplate)("ngTemplateOutletContext",ss(2,Gte,n,r))}}const jte=function(i,t,e){return{"p-highlight":i,"p-disabled":t,"p-button-icon-only":e}};function $te(i,t){if(1&i){const e=vi();Ke(0,"div",2,3),mn("click",function(r){const s=Pt(e),o=s.$implicit,l=s.index;return Rt(be().onItemClick(r,o,l))})("keydown.enter",function(r){const s=Pt(e),o=s.$implicit,l=s.index;return Rt(be().onItemClick(r,o,l))})("blur",function(){return Pt(e),Rt(be().onBlur())}),$e(2,Ute,4,2,"ng-container",4),$e(3,Wte,1,5,"ng-template",null,5,sc),Je()}if(2&i){const e=t.$implicit,n=oo(4),r=be();kr(e.styleClass),de("ngClass",Su(10,jte,r.isSelected(e),r.disabled||r.isOptionDisabled(e),e.icon&&!r.getOptionLabel(e))),vr("aria-pressed",r.isSelected(e))("title",e.title)("aria-label",e.label)("tabindex",r.disabled?null:r.tabindex)("aria-labelledby",r.getOptionLabel(e)),Ie(2),de("ngIf",!r.itemTemplate)("ngIfElse",n)}}const qte={provide:Cc,useExisting:cs(()=>Xte),multi:!0};let Xte=(()=>{class i{constructor(e){this.cd=e,this.tabindex=0,this.onOptionClick=new Fn,this.onChange=new Fn,this.onModelChange=()=>{},this.onModelTouched=()=>{}}getOptionLabel(e){return this.optionLabel?Ji.resolveFieldData(e,this.optionLabel):null!=e.label?e.label:e}getOptionValue(e){return this.optionValue?Ji.resolveFieldData(e,this.optionValue):this.optionLabel||void 0===e.value?e:e.value}isOptionDisabled(e){return this.optionDisabled?Ji.resolveFieldData(e,this.optionDisabled):void 0!==e.disabled&&e.disabled}writeValue(e){this.value=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onItemClick(e,n,r){if(!this.disabled&&!this.isOptionDisabled(n)){if(this.multiple)this.isSelected(n)?this.removeOption(n):this.value=[...this.value||[],this.getOptionValue(n)],this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value});else{let s=this.getOptionValue(n);this.value!==s&&(this.value=this.getOptionValue(n),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}))}this.onOptionClick.emit({originalEvent:e,option:n,index:r})}}onBlur(){this.onModelTouched()}removeOption(e){this.value=this.value.filter(n=>!Ji.equals(n,this.getOptionValue(e),this.dataKey))}isSelected(e){let n=!1,r=this.getOptionValue(e);if(this.multiple){if(this.value)for(let s of this.value)if(Ji.equals(s,r,this.dataKey)){n=!0;break}}else n=Ji.equals(this.getOptionValue(e),this.value,this.dataKey);return n}}return i.\u0275fac=function(e){return new(e||i)(Xt(xo))},i.\u0275cmp=_r({type:i,selectors:[["p-selectButton"]],contentQueries:function(e,n,r){if(1&e&&Ba(r,lm,5),2&e){let s;Wi(s=ji())&&(n.itemTemplate=s.first)}},hostAttrs:[1,"p-element"],inputs:{options:"options",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",tabindex:"tabindex",multiple:"multiple",style:"style",styleClass:"styleClass",ariaLabelledBy:"ariaLabelledBy",disabled:"disabled",dataKey:"dataKey"},outputs:{onOptionClick:"onOptionClick",onChange:"onChange"},features:[Ao([qte])],decls:2,vars:5,consts:[["role","group",3,"ngClass","ngStyle"],["class","p-button p-component","role","button","pRipple","",3,"class","ngClass","click","keydown.enter","blur",4,"ngFor","ngForOf"],["role","button","pRipple","",1,"p-button","p-component",3,"ngClass","click","keydown.enter","blur"],["btn",""],[4,"ngIf","ngIfElse"],["customcontent",""],[3,"ngClass","class",4,"ngIf"],[1,"p-button-label"],[3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,n){1&e&&(Ke(0,"div",0),$e(1,$te,5,14,"div",1),Je()),2&e&&(kr(n.styleClass),de("ngClass","p-selectbutton p-buttonset p-component")("ngStyle",n.style),Ie(1),de("ngForOf",n.options))},dependencies:[no,jc,ho,el,Po,Du],styles:[".p-button{margin:0;display:inline-flex;cursor:pointer;-webkit-user-select:none;user-select:none;align-items:center;vertical-align:bottom;text-align:center;overflow:hidden;position:relative}.p-button-label{flex:1 1 auto}.p-button-icon-right{order:1}.p-button:disabled{cursor:default}.p-button-icon-only{justify-content:center}.p-button-icon-only .p-button-label{visibility:hidden;width:0;flex:0 0 auto}.p-button-vertical{flex-direction:column}.p-button-icon-bottom{order:2}.p-buttonset .p-button{margin:0}.p-buttonset .p-button:not(:last-child){border-right:0 none}.p-buttonset .p-button:not(:first-of-type):not(:last-of-type){border-radius:0}.p-buttonset .p-button:first-of-type{border-top-right-radius:0;border-bottom-right-radius:0}.p-buttonset .p-button:last-of-type{border-top-left-radius:0;border-bottom-left-radius:0}.p-buttonset .p-button:focus{position:relative;z-index:1}\n"],encapsulation:2,changeDetection:0}),i})(),Yte=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({imports:[Os,Xc]}),i})();const Kte=function(i,t,e){return{"p-checkbox-label-active":i,"p-disabled":t,"p-checkbox-label-focus":e}};function Zte(i,t){if(1&i){const e=vi();Ke(0,"label",7),mn("click",function(r){Pt(e);const s=be(),o=oo(3);return Rt(s.onClick(r,o))}),li(1),Je()}if(2&i){const e=be();de("ngClass",Su(3,Kte,null!=e.value,e.disabled,e.focused)),vr("for",e.inputId),Ie(1),ts(e.label)}}const Qte=function(i,t){return{"p-checkbox p-component":!0,"p-checkbox-disabled":i,"p-checkbox-focused":t}},Jte=function(i,t,e){return{"p-highlight":i,"p-disabled":t,"p-focus":e}},ene={provide:Cc,useExisting:cs(()=>tne),multi:!0};let tne=(()=>{class i{constructor(e){this.cd=e,this.checkboxTrueIcon="pi pi-check",this.checkboxFalseIcon="pi pi-times",this.onChange=new Fn,this.onModelChange=()=>{},this.onModelTouched=()=>{}}onClick(e,n){!this.disabled&&!this.readonly&&(this.toggle(e),this.focused=!0,n.focus())}onKeydown(e){32==e.keyCode&&e.preventDefault()}onKeyup(e){32==e.keyCode&&!this.readonly&&(this.toggle(e),e.preventDefault())}toggle(e){null==this.value||null==this.value?this.value=!0:1==this.value?this.value=!1:0==this.value&&(this.value=null),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value})}onFocus(){this.focused=!0}onBlur(){this.focused=!1,this.onModelTouched()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}writeValue(e){this.value=e,this.cd.markForCheck()}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}}return i.\u0275fac=function(e){return new(e||i)(Xt(xo))},i.\u0275cmp=_r({type:i,selectors:[["p-triStateCheckbox"]],hostAttrs:[1,"p-element"],inputs:{disabled:"disabled",name:"name",ariaLabelledBy:"ariaLabelledBy",tabindex:"tabindex",inputId:"inputId",style:"style",styleClass:"styleClass",label:"label",readonly:"readonly",checkboxTrueIcon:"checkboxTrueIcon",checkboxFalseIcon:"checkboxFalseIcon"},outputs:{onChange:"onChange"},features:[Ao([ene])],decls:7,vars:21,consts:[[3,"ngStyle","ngClass"],[1,"p-hidden-accessible"],["type","text","inputmode","none",3,"name","readonly","disabled","keyup","keydown","focus","blur"],["input",""],["role","checkbox",1,"p-checkbox-box",3,"ngClass","click"],[1,"p-checkbox-icon",3,"ngClass"],["class","p-checkbox-label",3,"ngClass","click",4,"ngIf"],[1,"p-checkbox-label",3,"ngClass","click"]],template:function(e,n){if(1&e){const r=vi();Ke(0,"div",0)(1,"div",1)(2,"input",2,3),mn("keyup",function(o){return n.onKeyup(o)})("keydown",function(o){return n.onKeydown(o)})("focus",function(){return n.onFocus()})("blur",function(){return n.onBlur()}),Je()(),Ke(4,"div",4),mn("click",function(o){Pt(r);const l=oo(3);return Rt(n.onClick(o,l))}),Bn(5,"span",5),Je()(),$e(6,Zte,2,7,"label",6)}2&e&&(kr(n.styleClass),de("ngStyle",n.style)("ngClass",ss(14,Qte,n.disabled,n.focused)),Ie(2),de("name",n.name)("readonly",n.readonly)("disabled",n.disabled),vr("id",n.inputId)("tabindex",n.tabindex)("aria-labelledby",n.ariaLabelledBy),Ie(2),de("ngClass",Su(17,Jte,null!=n.value,n.disabled,n.focused)),vr("aria-checked",!0===n.value),Ie(1),de("ngClass",!0===n.value?n.checkboxTrueIcon:!1===n.value?n.checkboxFalseIcon:""),Ie(1),de("ngIf",n.label))},dependencies:[no,ho,Po],encapsulation:2,changeDetection:0}),i})(),nne=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({imports:[Os]}),i})();const ine=["container"],rne=["inputfield"],sne=["contentWrapper"];function one(i,t){if(1&i){const e=vi();Ke(0,"i",8),mn("click",function(){return Pt(e),Rt(be(2).clear())}),Je()}}function ane(i,t){if(1&i){const e=vi();Ke(0,"button",9),mn("click",function(r){Pt(e),be();const s=oo(1);return Rt(be().onButtonClick(r,s))}),Je()}if(2&i){const e=be(2);de("icon",e.icon)("disabled",e.disabled),vr("aria-label",e.iconAriaLabel)}}function lne(i,t){if(1&i){const e=vi();Ke(0,"input",4,5),mn("focus",function(r){return Pt(e),Rt(be().onInputFocus(r))})("keydown",function(r){return Pt(e),Rt(be().onInputKeydown(r))})("click",function(){return Pt(e),Rt(be().onInputClick())})("blur",function(r){return Pt(e),Rt(be().onInputBlur(r))})("input",function(r){return Pt(e),Rt(be().onUserInput(r))}),Je(),$e(2,one,1,0,"i",6),$e(3,ane,1,3,"button",7)}if(2&i){const e=be();kr(e.inputStyleClass),de("value",e.inputFieldValue)("readonly",e.readonlyInput)("ngStyle",e.inputStyle)("placeholder",e.placeholder||"")("disabled",e.disabled)("ngClass","p-inputtext p-component"),vr("id",e.inputId)("name",e.name)("required",e.required)("aria-required",e.required)("tabindex",e.tabindex)("inputmode",e.touchUI?"off":null)("aria-labelledby",e.ariaLabelledBy),Ie(2),de("ngIf",e.showClear&&!e.disabled&&null!=e.value),Ie(1),de("ngIf",e.showIcon)}}function cne(i,t){1&i&&Ni(0)}function une(i,t){if(1&i){const e=vi();Ke(0,"button",30),mn("keydown",function(r){return Pt(e),Rt(be(4).onContainerButtonKeydown(r))})("click",function(r){return Pt(e),Rt(be(4).onPrevButtonClick(r))}),Bn(1,"span",31),Je()}}function hne(i,t){if(1&i){const e=vi();Ke(0,"button",32),mn("click",function(r){return Pt(e),Rt(be(4).switchToMonthView(r))})("keydown",function(r){return Pt(e),Rt(be(4).onContainerButtonKeydown(r))}),li(1),Je()}if(2&i){const e=be().$implicit,n=be(3);de("disabled",n.switchViewButtonDisabled()),Ie(1),yc(" ",n.getMonthName(e.month)," ")}}function dne(i,t){if(1&i){const e=vi();Ke(0,"button",33),mn("click",function(r){return Pt(e),Rt(be(4).switchToYearView(r))})("keydown",function(r){return Pt(e),Rt(be(4).onContainerButtonKeydown(r))}),li(1),Je()}if(2&i){const e=be().$implicit,n=be(3);de("disabled",n.switchViewButtonDisabled()),Ie(1),yc(" ",n.getYear(e)," ")}}function fne(i,t){if(1&i&&(zr(0),li(1),Vr()),2&i){const e=be(5);Ie(1),wI("",e.yearPickerValues()[0]," - ",e.yearPickerValues()[e.yearPickerValues().length-1],"")}}function pne(i,t){1&i&&Ni(0)}const s4=function(i){return{$implicit:i}};function gne(i,t){if(1&i&&(Ke(0,"span",34),$e(1,fne,2,2,"ng-container",13),$e(2,pne,1,0,"ng-container",35),Je()),2&i){const e=be(4);Ie(1),de("ngIf",!e.decadeTemplate),Ie(1),de("ngTemplateOutlet",e.decadeTemplate)("ngTemplateOutletContext",_i(3,s4,e.yearPickerValues))}}function mne(i,t){if(1&i&&(Ke(0,"th",41)(1,"span"),li(2),Je()()),2&i){const e=be(5);Ie(2),ts(e.getTranslation("weekHeader"))}}function vne(i,t){if(1&i&&(Ke(0,"th",42)(1,"span"),li(2),Je()()),2&i){const e=t.$implicit;Ie(2),ts(e)}}function yne(i,t){if(1&i&&(Ke(0,"td",45)(1,"span",46),li(2),Je()()),2&i){const e=be().index,n=be(2).$implicit;Ie(2),yc(" ",n.weekNumbers[e]," ")}}function _ne(i,t){if(1&i&&(zr(0),li(1),Vr()),2&i){const e=be(2).$implicit;Ie(1),ts(e.day)}}function bne(i,t){1&i&&Ni(0)}const Cne=function(i,t){return{"p-highlight":i,"p-disabled":t}};function wne(i,t){if(1&i){const e=vi();zr(0),Ke(1,"span",48),mn("click",function(r){Pt(e);const s=be().$implicit;return Rt(be(6).onDateSelect(r,s))})("keydown",function(r){Pt(e);const s=be().$implicit,o=be(3).index;return Rt(be(3).onDateCellKeydown(r,s,o))}),$e(2,_ne,2,1,"ng-container",13),$e(3,bne,1,0,"ng-container",35),Je(),Vr()}if(2&i){const e=be().$implicit,n=be(6);Ie(1),de("ngClass",ss(4,Cne,n.isSelected(e),!e.selectable)),Ie(1),de("ngIf",!n.dateTemplate),Ie(1),de("ngTemplateOutlet",n.dateTemplate)("ngTemplateOutletContext",_i(7,s4,e))}}const Ane=function(i,t){return{"p-datepicker-other-month":i,"p-datepicker-today":t}};function xne(i,t){if(1&i&&(Ke(0,"td",47),$e(1,wne,4,9,"ng-container",13),Je()),2&i){const e=t.$implicit,n=be(6);de("ngClass",ss(2,Ane,e.otherMonth,e.today)),Ie(1),de("ngIf",!e.otherMonth||n.showOtherMonths)}}function Ine(i,t){if(1&i&&(Ke(0,"tr"),$e(1,yne,3,1,"td",43),$e(2,xne,2,5,"td",44),Je()),2&i){const e=t.$implicit,n=be(5);Ie(1),de("ngIf",n.showWeek),Ie(1),de("ngForOf",e)}}function Sne(i,t){if(1&i&&(Ke(0,"div",36)(1,"table",37)(2,"thead")(3,"tr"),$e(4,mne,3,1,"th",38),$e(5,vne,3,1,"th",39),Je()(),Ke(6,"tbody"),$e(7,Ine,3,2,"tr",40),Je()()()),2&i){const e=be().$implicit,n=be(3);Ie(4),de("ngIf",n.showWeek),Ie(1),de("ngForOf",n.weekDays),Ie(2),de("ngForOf",e.dates)}}function Ene(i,t){if(1&i){const e=vi();Ke(0,"div",20)(1,"div",21),$e(2,une,2,0,"button",22),Ke(3,"div",23),$e(4,hne,2,2,"button",24),$e(5,dne,2,2,"button",25),$e(6,gne,3,5,"span",26),Je(),Ke(7,"button",27),mn("keydown",function(r){return Pt(e),Rt(be(3).onContainerButtonKeydown(r))})("click",function(r){return Pt(e),Rt(be(3).onNextButtonClick(r))}),Bn(8,"span",28),Je()(),$e(9,Sne,8,3,"div",29),Je()}if(2&i){const e=t.index,n=be(3);Ie(2),de("ngIf",0===e),Ie(2),de("ngIf","date"===n.currentView),Ie(1),de("ngIf","year"!==n.currentView),Ie(1),de("ngIf","year"===n.currentView),Ie(1),Ad("display",1===n.numberOfMonths||e===n.numberOfMonths-1?"inline-flex":"none"),Ie(2),de("ngIf","date"===n.currentView)}}const o4=function(i){return{"p-highlight":i}};function Tne(i,t){if(1&i){const e=vi();Ke(0,"span",51),mn("click",function(r){const o=Pt(e).index;return Rt(be(4).onMonthSelect(r,o))})("keydown",function(r){const o=Pt(e).index;return Rt(be(4).onMonthCellKeydown(r,o))}),li(1),Je()}if(2&i){const e=t.$implicit,n=t.index,r=be(4);de("ngClass",_i(2,o4,r.isMonthSelected(n))),Ie(1),yc(" ",e," ")}}function Mne(i,t){if(1&i&&(Ke(0,"div",49),$e(1,Tne,2,4,"span",50),Je()),2&i){const e=be(3);Ie(1),de("ngForOf",e.monthPickerValues())}}function Dne(i,t){if(1&i){const e=vi();Ke(0,"span",54),mn("click",function(r){const o=Pt(e).$implicit;return Rt(be(4).onYearSelect(r,o))})("keydown",function(r){const o=Pt(e).$implicit;return Rt(be(4).onYearCellKeydown(r,o))}),li(1),Je()}if(2&i){const e=t.$implicit,n=be(4);de("ngClass",_i(2,o4,n.isYearSelected(e))),Ie(1),yc(" ",e," ")}}function Lne(i,t){if(1&i&&(Ke(0,"div",52),$e(1,Dne,2,4,"span",53),Je()),2&i){const e=be(3);Ie(1),de("ngForOf",e.yearPickerValues())}}function Pne(i,t){if(1&i&&(zr(0),Ke(1,"div",16),$e(2,Ene,10,7,"div",17),Je(),$e(3,Mne,2,1,"div",18),$e(4,Lne,2,1,"div",19),Vr()),2&i){const e=be(2);Ie(2),de("ngForOf",e.months),Ie(1),de("ngIf","month"===e.currentView),Ie(1),de("ngIf","year"===e.currentView)}}function Rne(i,t){1&i&&(zr(0),li(1,"0"),Vr())}function kne(i,t){1&i&&(zr(0),li(1,"0"),Vr())}function One(i,t){if(1&i&&(Ke(0,"div",60)(1,"span"),li(2),Je()()),2&i){const e=be(3);Ie(2),ts(e.timeSeparator)}}function Fne(i,t){1&i&&(zr(0),li(1,"0"),Vr())}function Nne(i,t){if(1&i){const e=vi();Ke(0,"div",65)(1,"button",57),mn("keydown",function(r){return Pt(e),Rt(be(3).onContainerButtonKeydown(r))})("keydown.enter",function(r){return Pt(e),Rt(be(3).incrementSecond(r))})("keydown.space",function(r){return Pt(e),Rt(be(3).incrementSecond(r))})("mousedown",function(r){return Pt(e),Rt(be(3).onTimePickerElementMouseDown(r,2,1))})("mouseup",function(r){return Pt(e),Rt(be(3).onTimePickerElementMouseUp(r))})("keyup.enter",function(r){return Pt(e),Rt(be(3).onTimePickerElementMouseUp(r))})("keyup.space",function(r){return Pt(e),Rt(be(3).onTimePickerElementMouseUp(r))})("mouseleave",function(){return Pt(e),Rt(be(3).onTimePickerElementMouseLeave())}),Bn(2,"span",58),Je(),Ke(3,"span"),$e(4,Fne,2,0,"ng-container",13),li(5),Je(),Ke(6,"button",57),mn("keydown",function(r){return Pt(e),Rt(be(3).onContainerButtonKeydown(r))})("keydown.enter",function(r){return Pt(e),Rt(be(3).decrementSecond(r))})("keydown.space",function(r){return Pt(e),Rt(be(3).decrementSecond(r))})("mousedown",function(r){return Pt(e),Rt(be(3).onTimePickerElementMouseDown(r,2,-1))})("mouseup",function(r){return Pt(e),Rt(be(3).onTimePickerElementMouseUp(r))})("keyup.enter",function(r){return Pt(e),Rt(be(3).onTimePickerElementMouseUp(r))})("keyup.space",function(r){return Pt(e),Rt(be(3).onTimePickerElementMouseUp(r))})("mouseleave",function(){return Pt(e),Rt(be(3).onTimePickerElementMouseLeave())}),Bn(7,"span",59),Je()()}if(2&i){const e=be(3);Ie(4),de("ngIf",e.currentSecond<10),Ie(1),ts(e.currentSecond)}}function Bne(i,t){if(1&i){const e=vi();Ke(0,"div",66)(1,"button",67),mn("keydown",function(r){return Pt(e),Rt(be(3).onContainerButtonKeydown(r))})("click",function(r){return Pt(e),Rt(be(3).toggleAMPM(r))})("keydown.enter",function(r){return Pt(e),Rt(be(3).toggleAMPM(r))}),Bn(2,"span",58),Je(),Ke(3,"span"),li(4),Je(),Ke(5,"button",67),mn("keydown",function(r){return Pt(e),Rt(be(3).onContainerButtonKeydown(r))})("click",function(r){return Pt(e),Rt(be(3).toggleAMPM(r))})("keydown.enter",function(r){return Pt(e),Rt(be(3).toggleAMPM(r))}),Bn(6,"span",59),Je()()}if(2&i){const e=be(3);Ie(4),ts(e.pm?"PM":"AM")}}function zne(i,t){if(1&i){const e=vi();Ke(0,"div",55)(1,"div",56)(2,"button",57),mn("keydown",function(r){return Pt(e),Rt(be(2).onContainerButtonKeydown(r))})("keydown.enter",function(r){return Pt(e),Rt(be(2).incrementHour(r))})("keydown.space",function(r){return Pt(e),Rt(be(2).incrementHour(r))})("mousedown",function(r){return Pt(e),Rt(be(2).onTimePickerElementMouseDown(r,0,1))})("mouseup",function(r){return Pt(e),Rt(be(2).onTimePickerElementMouseUp(r))})("keyup.enter",function(r){return Pt(e),Rt(be(2).onTimePickerElementMouseUp(r))})("keyup.space",function(r){return Pt(e),Rt(be(2).onTimePickerElementMouseUp(r))})("mouseleave",function(){return Pt(e),Rt(be(2).onTimePickerElementMouseLeave())}),Bn(3,"span",58),Je(),Ke(4,"span"),$e(5,Rne,2,0,"ng-container",13),li(6),Je(),Ke(7,"button",57),mn("keydown",function(r){return Pt(e),Rt(be(2).onContainerButtonKeydown(r))})("keydown.enter",function(r){return Pt(e),Rt(be(2).decrementHour(r))})("keydown.space",function(r){return Pt(e),Rt(be(2).decrementHour(r))})("mousedown",function(r){return Pt(e),Rt(be(2).onTimePickerElementMouseDown(r,0,-1))})("mouseup",function(r){return Pt(e),Rt(be(2).onTimePickerElementMouseUp(r))})("keyup.enter",function(r){return Pt(e),Rt(be(2).onTimePickerElementMouseUp(r))})("keyup.space",function(r){return Pt(e),Rt(be(2).onTimePickerElementMouseUp(r))})("mouseleave",function(){return Pt(e),Rt(be(2).onTimePickerElementMouseLeave())}),Bn(8,"span",59),Je()(),Ke(9,"div",60)(10,"span"),li(11),Je()(),Ke(12,"div",61)(13,"button",57),mn("keydown",function(r){return Pt(e),Rt(be(2).onContainerButtonKeydown(r))})("keydown.enter",function(r){return Pt(e),Rt(be(2).incrementMinute(r))})("keydown.space",function(r){return Pt(e),Rt(be(2).incrementMinute(r))})("mousedown",function(r){return Pt(e),Rt(be(2).onTimePickerElementMouseDown(r,1,1))})("mouseup",function(r){return Pt(e),Rt(be(2).onTimePickerElementMouseUp(r))})("keyup.enter",function(r){return Pt(e),Rt(be(2).onTimePickerElementMouseUp(r))})("keyup.space",function(r){return Pt(e),Rt(be(2).onTimePickerElementMouseUp(r))})("mouseleave",function(){return Pt(e),Rt(be(2).onTimePickerElementMouseLeave())}),Bn(14,"span",58),Je(),Ke(15,"span"),$e(16,kne,2,0,"ng-container",13),li(17),Je(),Ke(18,"button",57),mn("keydown",function(r){return Pt(e),Rt(be(2).onContainerButtonKeydown(r))})("keydown.enter",function(r){return Pt(e),Rt(be(2).decrementMinute(r))})("keydown.space",function(r){return Pt(e),Rt(be(2).decrementMinute(r))})("mousedown",function(r){return Pt(e),Rt(be(2).onTimePickerElementMouseDown(r,1,-1))})("mouseup",function(r){return Pt(e),Rt(be(2).onTimePickerElementMouseUp(r))})("keyup.enter",function(r){return Pt(e),Rt(be(2).onTimePickerElementMouseUp(r))})("keyup.space",function(r){return Pt(e),Rt(be(2).onTimePickerElementMouseUp(r))})("mouseleave",function(){return Pt(e),Rt(be(2).onTimePickerElementMouseLeave())}),Bn(19,"span",59),Je()(),$e(20,One,3,1,"div",62),$e(21,Nne,8,2,"div",63),$e(22,Bne,7,1,"div",64),Je()}if(2&i){const e=be(2);Ie(5),de("ngIf",e.currentHour<10),Ie(1),ts(e.currentHour),Ie(5),ts(e.timeSeparator),Ie(5),de("ngIf",e.currentMinute<10),Ie(1),ts(e.currentMinute),Ie(3),de("ngIf",e.showSeconds),Ie(1),de("ngIf",e.showSeconds),Ie(1),de("ngIf","12"==e.hourFormat)}}const a4=function(i){return[i]};function Vne(i,t){if(1&i){const e=vi();Ke(0,"div",68)(1,"button",69),mn("keydown",function(r){return Pt(e),Rt(be(2).onContainerButtonKeydown(r))})("click",function(r){return Pt(e),Rt(be(2).onTodayButtonClick(r))}),Je(),Ke(2,"button",69),mn("keydown",function(r){return Pt(e),Rt(be(2).onContainerButtonKeydown(r))})("click",function(r){return Pt(e),Rt(be(2).onClearButtonClick(r))}),Je()()}if(2&i){const e=be(2);Ie(1),de("label",e.getTranslation("today"))("ngClass",_i(4,a4,e.todayButtonStyleClass)),Ie(1),de("label",e.getTranslation("clear"))("ngClass",_i(6,a4,e.clearButtonStyleClass))}}function Une(i,t){1&i&&Ni(0)}const Hne=function(i,t,e,n,r,s){return{"p-datepicker p-component":!0,"p-datepicker-inline":i,"p-disabled":t,"p-datepicker-timeonly":e,"p-datepicker-multiple-month":n,"p-datepicker-monthpicker":r,"p-datepicker-touch-ui":s}},l4=function(i,t){return{showTransitionParams:i,hideTransitionParams:t}},Gne=function(i){return{value:"visibleTouchUI",params:i}},Wne=function(i){return{value:"visible",params:i}};function jne(i,t){if(1&i){const e=vi();Ke(0,"div",10,11),mn("@overlayAnimation.start",function(r){return Pt(e),Rt(be().onOverlayAnimationStart(r))})("@overlayAnimation.done",function(r){return Pt(e),Rt(be().onOverlayAnimationDone(r))})("click",function(r){return Pt(e),Rt(be().onOverlayClick(r))}),su(2),$e(3,cne,1,0,"ng-container",12),$e(4,Pne,5,3,"ng-container",13),$e(5,zne,23,8,"div",14),$e(6,Vne,3,8,"div",15),su(7,1),$e(8,Une,1,0,"ng-container",12),Je()}if(2&i){const e=be();kr(e.panelStyleClass),de("ngStyle",e.panelStyle)("ngClass",jb(11,Hne,e.inline,e.disabled,e.timeOnly,e.numberOfMonths>1,"month"===e.view,e.touchUI))("@overlayAnimation",e.touchUI?_i(21,Gne,ss(18,l4,e.showTransitionOptions,e.hideTransitionOptions)):_i(26,Wne,ss(23,l4,e.showTransitionOptions,e.hideTransitionOptions)))("@.disabled",!0===e.inline),Ie(3),de("ngTemplateOutlet",e.headerTemplate),Ie(1),de("ngIf",!e.timeOnly),Ie(1),de("ngIf",(e.showTime||e.timeOnly)&&"date"===e.currentView),Ie(1),de("ngIf",e.showButtonBar),Ie(2),de("ngTemplateOutlet",e.footerTemplate)}}const $ne=[[["p-header"]],[["p-footer"]]],qne=function(i,t,e,n){return{"p-calendar":!0,"p-calendar-w-btn":i,"p-calendar-timeonly":t,"p-calendar-disabled":e,"p-focus":n}},Xne=["p-header","p-footer"],Yne={provide:Cc,useExisting:cs(()=>Kne),multi:!0};let Kne=(()=>{class i{constructor(e,n,r,s,o,l){this.el=e,this.renderer=n,this.cd=r,this.zone=s,this.config=o,this.overlayService=l,this.multipleSeparator=",",this.rangeSeparator="-",this.inline=!1,this.showOtherMonths=!0,this.icon="pi pi-calendar",this.shortYearCutoff="+10",this.hourFormat="24",this.stepHour=1,this.stepMinute=1,this.stepSecond=1,this.showSeconds=!1,this.showOnFocus=!0,this.showWeek=!1,this.showClear=!1,this.dataType="date",this.selectionMode="single",this.todayButtonStyleClass="p-button-text",this.clearButtonStyleClass="p-button-text",this.autoZIndex=!0,this.baseZIndex=0,this.keepInvalid=!1,this.hideOnDateTimeSelect=!0,this.timeSeparator=":",this.focusTrap=!0,this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.onFocus=new Fn,this.onBlur=new Fn,this.onClose=new Fn,this.onSelect=new Fn,this.onClear=new Fn,this.onInput=new Fn,this.onTodayClick=new Fn,this.onClearClick=new Fn,this.onMonthChange=new Fn,this.onYearChange=new Fn,this.onClickOutside=new Fn,this.onShow=new Fn,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.inputFieldValue=null,this.navigationState=null,this._numberOfMonths=1,this._view="date",this.convertTo24Hour=function(u,p){return"12"==this.hourFormat?12===u?p?12:0:p?u+12:u:u}}set content(e){this.contentViewChild=e,this.contentViewChild&&(this.isMonthNavigate?(Promise.resolve(null).then(()=>this.updateFocus()),this.isMonthNavigate=!1):this.focus||this.initFocusableCell())}get view(){return this._view}set view(e){this._view=e,this.currentView=this._view}get defaultDate(){return this._defaultDate}set defaultDate(e){if(this._defaultDate=e,this.initialized){const n=e||new Date;this.currentMonth=n.getMonth(),this.currentYear=n.getFullYear(),this.initTime(n),this.createMonths(this.currentMonth,this.currentYear)}}get minDate(){return this._minDate}set minDate(e){this._minDate=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get disabledDates(){return this._disabledDates}set disabledDates(e){this._disabledDates=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get disabledDays(){return this._disabledDays}set disabledDays(e){this._disabledDays=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get yearRange(){return this._yearRange}set yearRange(e){if(this._yearRange=e,e){const n=e.split(":"),r=parseInt(n[0]),s=parseInt(n[1]);this.populateYearOptions(r,s)}}get showTime(){return this._showTime}set showTime(e){this._showTime=e,void 0===this.currentHour&&this.initTime(this.value||new Date),this.updateInputfield()}get locale(){return this._locale}get responsiveOptions(){return this._responsiveOptions}set responsiveOptions(e){this._responsiveOptions=e,this.destroyResponsiveStyleElement(),this.createResponsiveStyle()}get numberOfMonths(){return this._numberOfMonths}set numberOfMonths(e){this._numberOfMonths=e,this.destroyResponsiveStyleElement(),this.createResponsiveStyle()}get firstDayOfWeek(){return this._firstDayOfWeek}set firstDayOfWeek(e){this._firstDayOfWeek=e,this.createWeekDays()}set locale(e){console.warn("Locale property has no effect, use new i18n API instead.")}ngOnInit(){this.attributeSelector=sC();const e=this.defaultDate||new Date;this.createResponsiveStyle(),this.currentMonth=e.getMonth(),this.currentYear=e.getFullYear(),this.currentView=this.view,"date"===this.view&&(this.createWeekDays(),this.initTime(e),this.createMonths(this.currentMonth,this.currentYear),this.ticksTo1970=24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7),this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.createWeekDays()}),this.initialized=!0}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"date":default:this.dateTemplate=e.template;break;case"decade":this.decadeTemplate=e.template;break;case"disabledDate":this.disabledDateTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"footer":this.footerTemplate=e.template}})}ngAfterViewInit(){this.inline&&(this.contentViewChild&&this.contentViewChild.nativeElement.setAttribute(this.attributeSelector,""),this.disabled||(this.initFocusableCell(),1===this.numberOfMonths&&(this.contentViewChild.nativeElement.style.width=Ft.getOuterWidth(this.containerViewChild.nativeElement)+"px")))}getTranslation(e){return this.config.getTranslation(e)}populateYearOptions(e,n){this.yearOptions=[];for(let r=e;r<=n;r++)this.yearOptions.push(r)}createWeekDays(){this.weekDays=[];let e=this.getFirstDateOfWeek(),n=this.getTranslation($c.DAY_NAMES_MIN);for(let r=0;r<7;r++)this.weekDays.push(n[e]),e=6==e?0:++e}monthPickerValues(){let e=[];for(let n=0;n<=11;n++)e.push(this.config.getTranslation("monthNamesShort")[n]);return e}yearPickerValues(){let e=[],n=this.currentYear-this.currentYear%10;for(let r=0;r<10;r++)e.push(n+r);return e}createMonths(e,n){this.months=this.months=[];for(let r=0;r<this.numberOfMonths;r++){let s=e+r,o=n;s>11&&(s=s%11-1,o=n+1),this.months.push(this.createMonth(s,o))}}getWeekNumber(e){let n=new Date(e.getTime());n.setDate(n.getDate()+4-(n.getDay()||7));let r=n.getTime();return n.setMonth(0),n.setDate(1),Math.floor(Math.round((r-n.getTime())/864e5)/7)+1}createMonth(e,n){let r=[],s=this.getFirstDayOfMonthIndex(e,n),o=this.getDaysCountInMonth(e,n),l=this.getDaysCountInPrevMonth(e,n),u=1,p=new Date,v=[],w=Math.ceil((o+s)/7);for(let I=0;I<w;I++){let T=[];if(0==I){for(let G=l-s+1;G<=l;G++){let Y=this.getPreviousMonthAndYear(e,n);T.push({day:G,month:Y.month,year:Y.year,otherMonth:!0,today:this.isToday(p,G,Y.month,Y.year),selectable:this.isSelectable(G,Y.month,Y.year,!0)})}let k=7-T.length;for(let G=0;G<k;G++)T.push({day:u,month:e,year:n,today:this.isToday(p,u,e,n),selectable:this.isSelectable(u,e,n,!1)}),u++}else for(let k=0;k<7;k++){if(u>o){let G=this.getNextMonthAndYear(e,n);T.push({day:u-o,month:G.month,year:G.year,otherMonth:!0,today:this.isToday(p,u-o,G.month,G.year),selectable:this.isSelectable(u-o,G.month,G.year,!0)})}else T.push({day:u,month:e,year:n,today:this.isToday(p,u,e,n),selectable:this.isSelectable(u,e,n,!1)});u++}this.showWeek&&v.push(this.getWeekNumber(new Date(T[0].year,T[0].month,T[0].day))),r.push(T)}return{month:e,year:n,dates:r,weekNumbers:v}}initTime(e){this.pm=e.getHours()>11,this.showTime?(this.currentMinute=e.getMinutes(),this.currentSecond=e.getSeconds(),this.setCurrentHourPM(e.getHours())):this.timeOnly&&(this.currentMinute=0,this.currentHour=0,this.currentSecond=0)}navBackward(e){this.disabled?e.preventDefault():(this.isMonthNavigate=!0,"month"===this.currentView?(this.decrementYear(),setTimeout(()=>{this.updateFocus()},1)):"year"===this.currentView?(this.decrementDecade(),setTimeout(()=>{this.updateFocus()},1)):(0===this.currentMonth?(this.currentMonth=11,this.decrementYear()):this.currentMonth--,this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)))}navForward(e){this.disabled?e.preventDefault():(this.isMonthNavigate=!0,"month"===this.currentView?(this.incrementYear(),setTimeout(()=>{this.updateFocus()},1)):"year"===this.currentView?(this.incrementDecade(),setTimeout(()=>{this.updateFocus()},1)):(11===this.currentMonth?(this.currentMonth=0,this.incrementYear()):this.currentMonth++,this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)))}decrementYear(){if(this.currentYear--,this.yearNavigator&&this.currentYear<this.yearOptions[0]){let e=this.yearOptions[this.yearOptions.length-1]-this.yearOptions[0];this.populateYearOptions(this.yearOptions[0]-e,this.yearOptions[this.yearOptions.length-1]-e)}}decrementDecade(){this.currentYear=this.currentYear-10}incrementDecade(){this.currentYear=this.currentYear+10}incrementYear(){if(this.currentYear++,this.yearNavigator&&this.currentYear>this.yearOptions[this.yearOptions.length-1]){let e=this.yearOptions[this.yearOptions.length-1]-this.yearOptions[0];this.populateYearOptions(this.yearOptions[0]+e,this.yearOptions[this.yearOptions.length-1]+e)}}switchToMonthView(e){this.setCurrentView("month"),e.preventDefault()}switchToYearView(e){this.setCurrentView("year"),e.preventDefault()}onDateSelect(e,n){!this.disabled&&n.selectable?(this.isMultipleSelection()&&this.isSelected(n)?(this.value=this.value.filter((r,s)=>!this.isDateEquals(r,n)),0===this.value.length&&(this.value=null),this.updateModel(this.value)):this.shouldSelectDate(n)&&this.selectDate(n),this.isSingleSelection()&&this.hideOnDateTimeSelect&&setTimeout(()=>{e.preventDefault(),this.hideOverlay(),this.mask&&this.disableModality(),this.cd.markForCheck()},150),this.updateInputfield(),e.preventDefault()):e.preventDefault()}shouldSelectDate(e){return!this.isMultipleSelection()||null==this.maxDateCount||this.maxDateCount>(this.value?this.value.length:0)}onMonthSelect(e,n){"month"===this.view?this.onDateSelect(e,{year:this.currentYear,month:n,day:1,selectable:!0}):(this.currentMonth=n,this.createMonths(this.currentMonth,this.currentYear),this.setCurrentView("date"),this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}))}onYearSelect(e,n){"year"===this.view?this.onDateSelect(e,{year:n,month:0,day:1,selectable:!0}):(this.currentYear=n,this.setCurrentView("month"),this.onYearChange.emit({month:this.currentMonth+1,year:this.currentYear}))}updateInputfield(){let e="";if(this.value)if(this.isSingleSelection())e=this.formatDateTime(this.value);else if(this.isMultipleSelection())for(let n=0;n<this.value.length;n++)e+=this.formatDateTime(this.value[n]),n!==this.value.length-1&&(e+=this.multipleSeparator+" ");else if(this.isRangeSelection()&&this.value&&this.value.length){let r=this.value[1];e=this.formatDateTime(this.value[0]),r&&(e+=" "+this.rangeSeparator+" "+this.formatDateTime(r))}this.inputFieldValue=e,this.updateFilledState(),this.inputfieldViewChild&&this.inputfieldViewChild.nativeElement&&(this.inputfieldViewChild.nativeElement.value=this.inputFieldValue)}formatDateTime(e){let n=this.keepInvalid?e:null;return this.isValidDate(e)&&(this.timeOnly?n=this.formatTime(e):(n=this.formatDate(e,this.getDateFormat()),this.showTime&&(n+=" "+this.formatTime(e)))),n}setCurrentHourPM(e){"12"==this.hourFormat?(this.pm=e>11,this.currentHour=e>=12?12==e?12:e-12:0==e?12:e):this.currentHour=e}setCurrentView(e){this.currentView=e,this.cd.detectChanges(),this.alignOverlay()}selectDate(e){let n=new Date(e.year,e.month,e.day);if(this.showTime&&(n.setHours("12"==this.hourFormat?12===this.currentHour?this.pm?12:0:this.pm?this.currentHour+12:this.currentHour:this.currentHour),n.setMinutes(this.currentMinute),n.setSeconds(this.currentSecond)),this.minDate&&this.minDate>n&&(n=this.minDate,this.setCurrentHourPM(n.getHours()),this.currentMinute=n.getMinutes(),this.currentSecond=n.getSeconds()),this.maxDate&&this.maxDate<n&&(n=this.maxDate,this.setCurrentHourPM(n.getHours()),this.currentMinute=n.getMinutes(),this.currentSecond=n.getSeconds()),this.isSingleSelection())this.updateModel(n);else if(this.isMultipleSelection())this.updateModel(this.value?[...this.value,n]:[n]);else if(this.isRangeSelection())if(this.value&&this.value.length){let r=this.value[0],s=this.value[1];!s&&n.getTime()>=r.getTime()?s=n:(r=n,s=null),this.updateModel([r,s])}else this.updateModel([n,null]);this.onSelect.emit(n)}updateModel(e){if(this.value=e,"date"==this.dataType)this.onModelChange(this.value);else if("string"==this.dataType)if(this.isSingleSelection())this.onModelChange(this.formatDateTime(this.value));else{let n=null;this.value&&(n=this.value.map(r=>this.formatDateTime(r))),this.onModelChange(n)}}getFirstDayOfMonthIndex(e,n){let r=new Date;r.setDate(1),r.setMonth(e),r.setFullYear(n);let s=r.getDay()+this.getSundayIndex();return s>=7?s-7:s}getDaysCountInMonth(e,n){return 32-this.daylightSavingAdjust(new Date(n,e,32)).getDate()}getDaysCountInPrevMonth(e,n){let r=this.getPreviousMonthAndYear(e,n);return this.getDaysCountInMonth(r.month,r.year)}getPreviousMonthAndYear(e,n){let r,s;return 0===e?(r=11,s=n-1):(r=e-1,s=n),{month:r,year:s}}getNextMonthAndYear(e,n){let r,s;return 11===e?(r=0,s=n+1):(r=e+1,s=n),{month:r,year:s}}getSundayIndex(){let e=this.getFirstDateOfWeek();return e>0?7-e:0}isSelected(e){if(!this.value)return!1;if(this.isSingleSelection())return this.isDateEquals(this.value,e);if(this.isMultipleSelection()){let n=!1;for(let r of this.value)if(n=this.isDateEquals(r,e),n)break;return n}return this.isRangeSelection()?this.value[1]?this.isDateEquals(this.value[0],e)||this.isDateEquals(this.value[1],e)||this.isDateBetween(this.value[0],this.value[1],e):this.isDateEquals(this.value[0],e):void 0}isComparable(){return null!=this.value&&"string"!=typeof this.value}isMonthSelected(e){if(this.isComparable()){let n=this.isRangeSelection()?this.value[0]:this.value;return!this.isMultipleSelection()&&n.getMonth()===e&&n.getFullYear()===this.currentYear}return!1}isYearSelected(e){if(this.isComparable()){let n=this.isRangeSelection()?this.value[0]:this.value;return!this.isMultipleSelection()&&n.getFullYear()===e}return!1}isDateEquals(e,n){return!!(e&&e instanceof Date)&&e.getDate()===n.day&&e.getMonth()===n.month&&e.getFullYear()===n.year}isDateBetween(e,n,r){if(e&&n){let o=new Date(r.year,r.month,r.day);return e.getTime()<=o.getTime()&&n.getTime()>=o.getTime()}return!1}isSingleSelection(){return"single"===this.selectionMode}isRangeSelection(){return"range"===this.selectionMode}isMultipleSelection(){return"multiple"===this.selectionMode}isToday(e,n,r,s){return e.getDate()===n&&e.getMonth()===r&&e.getFullYear()===s}isSelectable(e,n,r,s){let o=!0,l=!0,u=!0,p=!0;return!(s&&!this.selectOtherMonths)&&(this.minDate&&(this.minDate.getFullYear()>r||this.minDate.getFullYear()===r&&(this.minDate.getMonth()>n||this.minDate.getMonth()===n&&this.minDate.getDate()>e))&&(o=!1),this.maxDate&&(this.maxDate.getFullYear()<r||this.maxDate.getFullYear()===r&&(this.maxDate.getMonth()<n||this.maxDate.getMonth()===n&&this.maxDate.getDate()<e))&&(l=!1),this.disabledDates&&(u=!this.isDateDisabled(e,n,r)),this.disabledDays&&(p=!this.isDayDisabled(e,n,r)),o&&l&&u&&p)}isDateDisabled(e,n,r){if(this.disabledDates)for(let s of this.disabledDates)if(s.getFullYear()===r&&s.getMonth()===n&&s.getDate()===e)return!0;return!1}isDayDisabled(e,n,r){if(this.disabledDays){let o=new Date(r,n,e).getDay();return-1!==this.disabledDays.indexOf(o)}return!1}onInputFocus(e){this.focus=!0,this.showOnFocus&&this.showOverlay(),this.onFocus.emit(e)}onInputClick(){this.showOnFocus&&!this.overlayVisible&&this.showOverlay()}onInputBlur(e){this.focus=!1,this.onBlur.emit(e),this.keepInvalid||this.updateInputfield(),this.onModelTouched()}onButtonClick(e,n){this.overlayVisible?this.hideOverlay():(n.focus(),this.showOverlay())}clear(){this.inputFieldValue=null,this.value=null,this.onModelChange(this.value),this.onClear.emit()}onOverlayClick(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement})}getMonthName(e){return this.config.getTranslation("monthNames")[e]}getYear(e){return"month"===this.currentView?this.currentYear:e.year}switchViewButtonDisabled(){return this.numberOfMonths>1||this.disabled}onPrevButtonClick(e){this.navigationState={backward:!0,button:!0},this.navBackward(e)}onNextButtonClick(e){this.navigationState={backward:!1,button:!0},this.navForward(e)}onContainerButtonKeydown(e){switch(e.which){case 9:this.inline||this.trapFocus(e);break;case 27:this.overlayVisible=!1,e.preventDefault()}}onInputKeydown(e){this.isKeydown=!0,40===e.keyCode&&this.contentViewChild?this.trapFocus(e):27===e.keyCode||13===e.keyCode?this.overlayVisible&&(this.overlayVisible=!1,e.preventDefault()):9===e.keyCode&&this.contentViewChild&&(Ft.getFocusableElements(this.contentViewChild.nativeElement).forEach(n=>n.tabIndex="-1"),this.overlayVisible&&(this.overlayVisible=!1))}onDateCellKeydown(e,n,r){const s=e.currentTarget,o=s.parentElement;switch(e.which){case 40:{s.tabIndex="-1";let l=Ft.index(o),u=o.parentElement.nextElementSibling;u?Ft.hasClass(u.children[l].children[0],"p-disabled")?(this.navigationState={backward:!1},this.navForward(e)):(u.children[l].children[0].tabIndex="0",u.children[l].children[0].focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case 38:{s.tabIndex="-1";let l=Ft.index(o),u=o.parentElement.previousElementSibling;if(u){let p=u.children[l].children[0];Ft.hasClass(p,"p-disabled")?(this.navigationState={backward:!0},this.navBackward(e)):(p.tabIndex="0",p.focus())}else this.navigationState={backward:!0},this.navBackward(e);e.preventDefault();break}case 37:{s.tabIndex="-1";let l=o.previousElementSibling;if(l){let u=l.children[0];Ft.hasClass(u,"p-disabled")||Ft.hasClass(u.parentElement,"p-datepicker-weeknumber")?this.navigateToMonth(!0,r):(u.tabIndex="0",u.focus())}else this.navigateToMonth(!0,r);e.preventDefault();break}case 39:{s.tabIndex="-1";let l=o.nextElementSibling;if(l){let u=l.children[0];Ft.hasClass(u,"p-disabled")?this.navigateToMonth(!1,r):(u.tabIndex="0",u.focus())}else this.navigateToMonth(!1,r);e.preventDefault();break}case 13:case 32:this.onDateSelect(e,n),e.preventDefault();break;case 27:this.overlayVisible=!1,e.preventDefault();break;case 9:this.inline||this.trapFocus(e)}}onMonthCellKeydown(e,n){const r=e.currentTarget;switch(e.which){case 38:case 40:{r.tabIndex="-1";var s=r.parentElement.children,o=Ft.index(r);let l=s[40===e.which?o+3:o-3];l&&(l.tabIndex="0",l.focus()),e.preventDefault();break}case 37:{r.tabIndex="-1";let l=r.previousElementSibling;l?(l.tabIndex="0",l.focus()):(this.navigationState={backward:!0},this.navBackward(e)),e.preventDefault();break}case 39:{r.tabIndex="-1";let l=r.nextElementSibling;l?(l.tabIndex="0",l.focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case 13:this.onMonthSelect(e,n),e.preventDefault();break;case 13:case 32:case 27:this.overlayVisible=!1,e.preventDefault();break;case 9:this.inline||this.trapFocus(e)}}onYearCellKeydown(e,n){const r=e.currentTarget;switch(e.which){case 38:case 40:{r.tabIndex="-1";var s=r.parentElement.children,o=Ft.index(r);let l=s[40===e.which?o+2:o-2];l&&(l.tabIndex="0",l.focus()),e.preventDefault();break}case 37:{r.tabIndex="-1";let l=r.previousElementSibling;l?(l.tabIndex="0",l.focus()):(this.navigationState={backward:!0},this.navBackward(e)),e.preventDefault();break}case 39:{r.tabIndex="-1";let l=r.nextElementSibling;l?(l.tabIndex="0",l.focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case 13:case 32:this.onYearSelect(e,n),e.preventDefault();break;case 27:this.overlayVisible=!1,e.preventDefault();break;case 9:this.trapFocus(e)}}navigateToMonth(e,n){if(e)if(1===this.numberOfMonths||0===n)this.navigationState={backward:!0},this.navBackward(event);else{let s=Ft.find(this.contentViewChild.nativeElement.children[n-1],".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)"),o=s[s.length-1];o.tabIndex="0",o.focus()}else if(1===this.numberOfMonths||n===this.numberOfMonths-1)this.navigationState={backward:!1},this.navForward(event);else{let s=Ft.findSingle(this.contentViewChild.nativeElement.children[n+1],".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)");s.tabIndex="0",s.focus()}}updateFocus(){let e;if(this.navigationState){if(this.navigationState.button)this.initFocusableCell(),this.navigationState.backward?Ft.findSingle(this.contentViewChild.nativeElement,".p-datepicker-prev").focus():Ft.findSingle(this.contentViewChild.nativeElement,".p-datepicker-next").focus();else{if(this.navigationState.backward){let n;n=Ft.find(this.contentViewChild.nativeElement,"month"===this.currentView?".p-monthpicker .p-monthpicker-month:not(.p-disabled)":"year"===this.currentView?".p-yearpicker .p-yearpicker-year:not(.p-disabled)":".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)"),n&&n.length>0&&(e=n[n.length-1])}else e=Ft.findSingle(this.contentViewChild.nativeElement,"month"===this.currentView?".p-monthpicker .p-monthpicker-month:not(.p-disabled)":"year"===this.currentView?".p-yearpicker .p-yearpicker-year:not(.p-disabled)":".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)");e&&(e.tabIndex="0",e.focus())}this.navigationState=null}else this.initFocusableCell()}initFocusableCell(){let e;if("month"===this.currentView){let n=Ft.find(this.contentViewChild.nativeElement,".p-monthpicker .p-monthpicker-month:not(.p-disabled)"),r=Ft.findSingle(this.contentViewChild.nativeElement,".p-monthpicker .p-monthpicker-month.p-highlight");n.forEach(s=>s.tabIndex=-1),e=r||n[0],0===n.length&&Ft.find(this.contentViewChild.nativeElement,'.p-monthpicker .p-monthpicker-month.p-disabled[tabindex = "0"]').forEach(o=>o.tabIndex=-1)}else if("year"===this.currentView){let n=Ft.find(this.contentViewChild.nativeElement,".p-yearpicker .p-yearpicker-year:not(.p-disabled)"),r=Ft.findSingle(this.contentViewChild.nativeElement,".p-yearpicker .p-yearpicker-year.p-highlight");n.forEach(s=>s.tabIndex=-1),e=r||n[0],0===n.length&&Ft.find(this.contentViewChild.nativeElement,'.p-yearpicker .p-yearpicker-year.p-disabled[tabindex = "0"]').forEach(o=>o.tabIndex=-1)}else if(e=Ft.findSingle(this.contentViewChild.nativeElement,"span.p-highlight"),!e){let n=Ft.findSingle(this.contentViewChild.nativeElement,"td.p-datepicker-today span:not(.p-disabled):not(.p-ink)");e=n||Ft.findSingle(this.contentViewChild.nativeElement,".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)")}e&&(e.tabIndex="0",!this.preventFocus&&(!this.navigationState||!this.navigationState.button)&&setTimeout(()=>{e.focus()},1),this.preventFocus=!1)}trapFocus(e){let n=Ft.getFocusableElements(this.contentViewChild.nativeElement);if(n&&n.length>0)if(n[0].ownerDocument.activeElement){let r=n.indexOf(n[0].ownerDocument.activeElement);if(e.shiftKey)if(-1==r||0===r)if(this.focusTrap)n[n.length-1].focus();else{if(-1===r)return this.hideOverlay();if(0===r)return}else n[r-1].focus();else if(-1==r||r===n.length-1){if(!this.focusTrap&&-1!=r)return this.hideOverlay();n[0].focus()}else n[r+1].focus()}else n[0].focus();e.preventDefault()}onMonthDropdownChange(e){this.currentMonth=parseInt(e),this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)}onYearDropdownChange(e){this.currentYear=parseInt(e),this.onYearChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)}validateTime(e,n,r,s){let o=this.value;const l=this.convertTo24Hour(e,s);this.isRangeSelection()&&(o=this.value[1]||this.value[0]),this.isMultipleSelection()&&(o=this.value[this.value.length-1]);const u=o?o.toDateString():null;return!(this.minDate&&u&&this.minDate.toDateString()===u&&(this.minDate.getHours()>l||this.minDate.getHours()===l&&(this.minDate.getMinutes()>n||this.minDate.getMinutes()===n&&this.minDate.getSeconds()>r))||this.maxDate&&u&&this.maxDate.toDateString()===u&&(this.maxDate.getHours()<l||this.maxDate.getHours()===l&&(this.maxDate.getMinutes()<n||this.maxDate.getMinutes()===n&&this.maxDate.getSeconds()<r)))}incrementHour(e){let r=this.currentHour+this.stepHour,s=this.pm;"24"==this.hourFormat?r=r>=24?r-24:r:"12"==this.hourFormat&&(this.currentHour<12&&r>11&&(s=!this.pm),r=r>=13?r-12:r),this.validateTime(r,this.currentMinute,this.currentSecond,s)&&(this.currentHour=r,this.pm=s),e.preventDefault()}onTimePickerElementMouseDown(e,n,r){this.disabled||(this.repeat(e,null,n,r),e.preventDefault())}onTimePickerElementMouseUp(e){this.disabled||(this.clearTimePickerTimer(),this.updateTime())}onTimePickerElementMouseLeave(){!this.disabled&&this.timePickerTimer&&(this.clearTimePickerTimer(),this.updateTime())}repeat(e,n,r,s){let o=n||500;switch(this.clearTimePickerTimer(),this.timePickerTimer=setTimeout(()=>{this.repeat(e,100,r,s),this.cd.markForCheck()},o),r){case 0:1===s?this.incrementHour(e):this.decrementHour(e);break;case 1:1===s?this.incrementMinute(e):this.decrementMinute(e);break;case 2:1===s?this.incrementSecond(e):this.decrementSecond(e)}this.updateInputfield()}clearTimePickerTimer(){this.timePickerTimer&&(clearTimeout(this.timePickerTimer),this.timePickerTimer=null)}decrementHour(e){let n=this.currentHour-this.stepHour,r=this.pm;"24"==this.hourFormat?n=n<0?24+n:n:"12"==this.hourFormat&&(12===this.currentHour&&(r=!this.pm),n=n<=0?12+n:n),this.validateTime(n,this.currentMinute,this.currentSecond,r)&&(this.currentHour=n,this.pm=r),e.preventDefault()}incrementMinute(e){let n=this.currentMinute+this.stepMinute;n=n>59?n-60:n,this.validateTime(this.currentHour,n,this.currentSecond,this.pm)&&(this.currentMinute=n),e.preventDefault()}decrementMinute(e){let n=this.currentMinute-this.stepMinute;n=n<0?60+n:n,this.validateTime(this.currentHour,n,this.currentSecond,this.pm)&&(this.currentMinute=n),e.preventDefault()}incrementSecond(e){let n=this.currentSecond+this.stepSecond;n=n>59?n-60:n,this.validateTime(this.currentHour,this.currentMinute,n,this.pm)&&(this.currentSecond=n),e.preventDefault()}decrementSecond(e){let n=this.currentSecond-this.stepSecond;n=n<0?60+n:n,this.validateTime(this.currentHour,this.currentMinute,n,this.pm)&&(this.currentSecond=n),e.preventDefault()}updateTime(){let e=this.value;this.isRangeSelection()&&(e=this.value[1]||this.value[0]),this.isMultipleSelection()&&(e=this.value[this.value.length-1]),e=e?new Date(e.getTime()):new Date,e.setHours("12"==this.hourFormat?12===this.currentHour?this.pm?12:0:this.pm?this.currentHour+12:this.currentHour:this.currentHour),e.setMinutes(this.currentMinute),e.setSeconds(this.currentSecond),this.isRangeSelection()&&(e=this.value[1]?[this.value[0],e]:[e,null]),this.isMultipleSelection()&&(e=[...this.value.slice(0,-1),e]),this.updateModel(e),this.onSelect.emit(e),this.updateInputfield()}toggleAMPM(e){const n=!this.pm;this.validateTime(this.currentHour,this.currentMinute,this.currentSecond,n)&&(this.pm=n,this.updateTime()),e.preventDefault()}onUserInput(e){if(!this.isKeydown)return;this.isKeydown=!1;let n=e.target.value;try{let r=this.parseValueFromString(n);this.isValidSelection(r)&&(this.updateModel(r),this.updateUI())}catch{this.updateModel(this.keepInvalid?n:null)}this.filled=null!=n&&n.length,this.onInput.emit(e)}isValidSelection(e){let n=!0;return this.isSingleSelection()?this.isSelectable(e.getDate(),e.getMonth(),e.getFullYear(),!1)||(n=!1):e.every(r=>this.isSelectable(r.getDate(),r.getMonth(),r.getFullYear(),!1))&&this.isRangeSelection()&&(n=e.length>1&&e[1]>e[0]),n}parseValueFromString(e){if(!e||0===e.trim().length)return null;let n;if(this.isSingleSelection())n=this.parseDateTime(e);else if(this.isMultipleSelection()){let r=e.split(this.multipleSeparator);n=[];for(let s of r)n.push(this.parseDateTime(s.trim()))}else if(this.isRangeSelection()){let r=e.split(" "+this.rangeSeparator+" ");n=[];for(let s=0;s<r.length;s++)n[s]=this.parseDateTime(r[s].trim())}return n}parseDateTime(e){let n,r=e.split(" ");if(this.timeOnly)n=new Date,this.populateTime(n,r[0],r[1]);else{const s=this.getDateFormat();if(this.showTime){let o="12"==this.hourFormat?r.pop():null,l=r.pop();n=this.parseDate(r.join(" "),s),this.populateTime(n,l,o)}else n=this.parseDate(e,s)}return n}populateTime(e,n,r){if("12"==this.hourFormat&&!r)throw"Invalid Time";this.pm="PM"===r||"pm"===r;let s=this.parseTime(n);e.setHours(s.hour),e.setMinutes(s.minute),e.setSeconds(s.second)}isValidDate(e){return e instanceof Date&&Ji.isNotEmpty(e)}updateUI(){let e=this.value;Array.isArray(e)&&(e=e[0]);let n=this.defaultDate&&this.isValidDate(this.defaultDate)&&!this.value?this.defaultDate:e&&this.isValidDate(e)?e:new Date;this.currentMonth=n.getMonth(),this.currentYear=n.getFullYear(),this.createMonths(this.currentMonth,this.currentYear),(this.showTime||this.timeOnly)&&(this.setCurrentHourPM(n.getHours()),this.currentMinute=n.getMinutes(),this.currentSecond=n.getSeconds())}showOverlay(){this.overlayVisible||(this.updateUI(),this.touchUI||(this.preventFocus=!0),this.overlayVisible=!0)}hideOverlay(){this.overlayVisible=!1,this.clearTimePickerTimer(),this.touchUI&&this.disableModality(),this.cd.markForCheck()}toggle(){this.inline||(this.overlayVisible?this.hideOverlay():(this.showOverlay(),this.inputfieldViewChild.nativeElement.focus()))}onOverlayAnimationStart(e){switch(e.toState){case"visible":case"visibleTouchUI":this.inline||(this.overlay=e.element,this.overlay.setAttribute(this.attributeSelector,""),this.appendOverlay(),this.updateFocus(),this.autoZIndex&&(this.touchUI?Ll.set("modal",this.overlay,this.baseZIndex||this.config.zIndex.modal):Ll.set("overlay",this.overlay,this.baseZIndex||this.config.zIndex.overlay)),this.alignOverlay(),this.onShow.emit(e));break;case"void":this.onOverlayHide(),this.onClose.emit(e)}}onOverlayAnimationDone(e){switch(e.toState){case"visible":case"visibleTouchUI":this.inline||(this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener());break;case"void":this.autoZIndex&&Ll.clear(e.element)}}appendOverlay(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.overlay):Ft.appendChild(this.overlay,this.appendTo))}restoreOverlayAppend(){this.overlay&&this.appendTo&&this.el.nativeElement.appendChild(this.overlay)}alignOverlay(){this.touchUI?this.enableModality(this.overlay):this.overlay&&(this.appendTo?("date"===this.view?(this.overlay.style.width=Ft.getOuterWidth(this.overlay)+"px",this.overlay.style.minWidth=Ft.getOuterWidth(this.inputfieldViewChild.nativeElement)+"px"):this.overlay.style.width=Ft.getOuterWidth(this.inputfieldViewChild.nativeElement)+"px",Ft.absolutePosition(this.overlay,this.inputfieldViewChild.nativeElement)):Ft.relativePosition(this.overlay,this.inputfieldViewChild.nativeElement))}enableModality(e){this.mask||this.touchUI||(this.mask=document.createElement("div"),this.mask.style.zIndex=String(parseInt(e.style.zIndex)-1),Ft.addMultipleClasses(this.mask,"p-component-overlay p-datepicker-mask p-datepicker-mask-scrollblocker p-component-overlay p-component-overlay-enter"),this.maskClickListener=this.renderer.listen(this.mask,"click",r=>{this.disableModality()}),document.body.appendChild(this.mask),Ft.addClass(document.body,"p-overflow-hidden"))}disableModality(){this.mask&&(Ft.addClass(this.mask,"p-component-overlay-leave"),this.animationEndListener=this.destroyMask.bind(this),this.mask.addEventListener("animationend",this.animationEndListener))}destroyMask(){if(!this.mask)return;document.body.removeChild(this.mask);let n,e=document.body.children;for(let r=0;r<e.length;r++)if(Ft.hasClass(e[r],"p-datepicker-mask-scrollblocker")){n=!0;break}n||Ft.removeClass(document.body,"p-overflow-hidden"),this.unbindAnimationEndListener(),this.unbindMaskClickListener(),this.mask=null}unbindMaskClickListener(){this.maskClickListener&&(this.maskClickListener(),this.maskClickListener=null)}unbindAnimationEndListener(){this.animationEndListener&&this.mask&&(this.mask.removeEventListener("animationend",this.animationEndListener),this.animationEndListener=null)}writeValue(e){if(this.value=e,this.value&&"string"==typeof this.value)try{this.value=this.parseValueFromString(this.value)}catch{this.keepInvalid&&(this.value=e)}this.updateInputfield(),this.updateUI(),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}getDateFormat(){return this.dateFormat||this.getTranslation("dateFormat")}getFirstDateOfWeek(){return this._firstDayOfWeek||this.getTranslation($c.FIRST_DAY_OF_WEEK)}formatDate(e,n){if(!e)return"";let r;const s=v=>{const w=r+1<n.length&&n.charAt(r+1)===v;return w&&r++,w},o=(v,w,I)=>{let T=""+w;if(s(v))for(;T.length<I;)T="0"+T;return T},l=(v,w,I,T)=>s(v)?T[w]:I[w];let u="",p=!1;if(e)for(r=0;r<n.length;r++)if(p)"'"!==n.charAt(r)||s("'")?u+=n.charAt(r):p=!1;else switch(n.charAt(r)){case"d":u+=o("d",e.getDate(),2);break;case"D":u+=l("D",e.getDay(),this.getTranslation($c.DAY_NAMES_SHORT),this.getTranslation($c.DAY_NAMES));break;case"o":u+=o("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=o("m",e.getMonth()+1,2);break;case"M":u+=l("M",e.getMonth(),this.getTranslation($c.MONTH_NAMES_SHORT),this.getTranslation($c.MONTH_NAMES));break;case"y":u+=s("y")?e.getFullYear():(e.getFullYear()%100<10?"0":"")+e.getFullYear()%100;break;case"@":u+=e.getTime();break;case"!":u+=1e4*e.getTime()+this.ticksTo1970;break;case"'":s("'")?u+="'":p=!0;break;default:u+=n.charAt(r)}return u}formatTime(e){if(!e)return"";let n="",r=e.getHours(),s=e.getMinutes(),o=e.getSeconds();return"12"==this.hourFormat&&r>11&&12!=r&&(r-=12),n+="12"==this.hourFormat&&0===r?12:r<10?"0"+r:r,n+=":",n+=s<10?"0"+s:s,this.showSeconds&&(n+=":",n+=o<10?"0"+o:o),"12"==this.hourFormat&&(n+=e.getHours()>11?" PM":" AM"),n}parseTime(e){let n=e.split(":");if(n.length!==(this.showSeconds?3:2))throw"Invalid time";let s=parseInt(n[0]),o=parseInt(n[1]),l=this.showSeconds?parseInt(n[2]):null;if(isNaN(s)||isNaN(o)||s>23||o>59||"12"==this.hourFormat&&s>12||this.showSeconds&&(isNaN(l)||l>59))throw"Invalid time";return"12"==this.hourFormat&&(12!==s&&this.pm?s+=12:!this.pm&&12===s&&(s-=12)),{hour:s,minute:o,second:l}}parseDate(e,n){if(null==n||null==e)throw"Invalid arguments";if(""===(e="object"==typeof e?e.toString():e+""))return null;let r,s,o,k,l=0,u="string"!=typeof this.shortYearCutoff?this.shortYearCutoff:(new Date).getFullYear()%100+parseInt(this.shortYearCutoff,10),p=-1,v=-1,w=-1,I=-1,T=!1,G=Ae=>{let Te=r+1<n.length&&n.charAt(r+1)===Ae;return Te&&r++,Te},Y=Ae=>{let Te=G(Ae),Qe="@"===Ae?14:"!"===Ae?20:"y"===Ae&&Te?4:"o"===Ae?3:2,zt=new RegExp("^\\d{"+("y"===Ae?Qe:1)+","+Qe+"}"),it=e.substring(l).match(zt);if(!it)throw"Missing number at position "+l;return l+=it[0].length,parseInt(it[0],10)},ce=(Ae,Te,Qe)=>{let mt=-1,zt=G(Ae)?Qe:Te,it=[];for(let Tt=0;Tt<zt.length;Tt++)it.push([Tt,zt[Tt]]);it.sort((Tt,ln)=>-(Tt[1].length-ln[1].length));for(let Tt=0;Tt<it.length;Tt++){let ln=it[Tt][1];if(e.substr(l,ln.length).toLowerCase()===ln.toLowerCase()){mt=it[Tt][0],l+=ln.length;break}}if(-1!==mt)return mt+1;throw"Unknown name at position "+l},Se=()=>{if(e.charAt(l)!==n.charAt(r))throw"Unexpected literal at position "+l;l++};for("month"===this.view&&(w=1),r=0;r<n.length;r++)if(T)"'"!==n.charAt(r)||G("'")?Se():T=!1;else switch(n.charAt(r)){case"d":w=Y("d");break;case"D":ce("D",this.getTranslation($c.DAY_NAMES_SHORT),this.getTranslation($c.DAY_NAMES));break;case"o":I=Y("o");break;case"m":v=Y("m");break;case"M":v=ce("M",this.getTranslation($c.MONTH_NAMES_SHORT),this.getTranslation($c.MONTH_NAMES));break;case"y":p=Y("y");break;case"@":k=new Date(Y("@")),p=k.getFullYear(),v=k.getMonth()+1,w=k.getDate();break;case"!":k=new Date((Y("!")-this.ticksTo1970)/1e4),p=k.getFullYear(),v=k.getMonth()+1,w=k.getDate();break;case"'":G("'")?Se():T=!0;break;default:Se()}if(l<e.length&&(o=e.substr(l),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===p?p=(new Date).getFullYear():p<100&&(p+=(new Date).getFullYear()-(new Date).getFullYear()%100+(p<=u?0:-100)),I>-1)for(v=1,w=I;s=this.getDaysCountInMonth(p,v-1),!(w<=s);)v++,w-=s;if("year"===this.view&&(v=-1===v?1:v,w=-1===w?1:w),k=this.daylightSavingAdjust(new Date(p,v-1,w)),k.getFullYear()!==p||k.getMonth()+1!==v||k.getDate()!==w)throw"Invalid date";return k}daylightSavingAdjust(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null}updateFilledState(){this.filled=this.inputFieldValue&&""!=this.inputFieldValue}onTodayButtonClick(e){let n=new Date,r={day:n.getDate(),month:n.getMonth(),year:n.getFullYear(),otherMonth:n.getMonth()!==this.currentMonth||n.getFullYear()!==this.currentYear,today:!0,selectable:!0};this.onDateSelect(e,r),this.onTodayClick.emit(e)}onClearButtonClick(e){this.updateModel(null),this.updateInputfield(),this.hideOverlay(),this.onClearClick.emit(e)}createResponsiveStyle(){if(this.numberOfMonths>1&&this.responsiveOptions){this.responsiveStyleElement||(this.responsiveStyleElement=document.createElement("style"),this.responsiveStyleElement.type="text/css",document.body.appendChild(this.responsiveStyleElement));let e="";if(this.responsiveOptions){let n=[...this.responsiveOptions].filter(r=>!(!r.breakpoint||!r.numMonths)).sort((r,s)=>-1*r.breakpoint.localeCompare(s.breakpoint,void 0,{numeric:!0}));for(let r=0;r<n.length;r++){let{breakpoint:s,numMonths:o}=n[r],l=`\n                        .p-datepicker[${this.attributeSelector}] .p-datepicker-group:nth-child(${o}) .p-datepicker-next {\n                            display: inline-flex !important;\n                        }\n                    `;for(let u=o;u<this.numberOfMonths;u++)l+=`\n                            .p-datepicker[${this.attributeSelector}] .p-datepicker-group:nth-child(${u+1}) {\n                                display: none !important;\n                            }\n                        `;e+=`\n                        @media screen and (max-width: ${s}) {\n                            ${l}\n                        }\n                    `}}this.responsiveStyleElement.innerHTML=e}}destroyResponsiveStyleElement(){this.responsiveStyleElement&&(this.responsiveStyleElement.remove(),this.responsiveStyleElement=null)}bindDocumentClickListener(){this.documentClickListener||this.zone.runOutsideAngular(()=>{this.documentClickListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","mousedown",n=>{this.isOutsideClicked(n)&&this.overlayVisible&&this.zone.run(()=>{this.hideOverlay(),this.onClickOutside.emit(n),this.cd.markForCheck()})})})}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){!this.documentResizeListener&&!this.touchUI&&(this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener))}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new SA(this.containerViewChild.nativeElement,()=>{this.overlayVisible&&this.hideOverlay()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}isOutsideClicked(e){return!(this.el.nativeElement.isSameNode(e.target)||this.isNavIconClicked(e)||this.el.nativeElement.contains(e.target)||this.overlay&&this.overlay.contains(e.target))}isNavIconClicked(e){return Ft.hasClass(e.target,"p-datepicker-prev")||Ft.hasClass(e.target,"p-datepicker-prev-icon")||Ft.hasClass(e.target,"p-datepicker-next")||Ft.hasClass(e.target,"p-datepicker-next-icon")}onWindowResize(){this.overlayVisible&&!Ft.isTouchDevice()&&this.hideOverlay()}onOverlayHide(){this.currentView=this.view,this.mask&&this.destroyMask(),this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.overlay=null}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.translationSubscription&&this.translationSubscription.unsubscribe(),this.overlay&&this.autoZIndex&&Ll.clear(this.overlay),this.destroyResponsiveStyleElement(),this.clearTimePickerTimer(),this.restoreOverlayAppend(),this.onOverlayHide()}}return i.\u0275fac=function(e){return new(e||i)(Xt(Yn),Xt(d),Xt(xo),Xt(Vo),Xt(Dp),Xt(aA))},i.\u0275cmp=_r({type:i,selectors:[["p-calendar"]],contentQueries:function(e,n,r){if(1&e&&Ba(r,za,4),2&e){let s;Wi(s=ji())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(Tr(ine,5),Tr(rne,5),Tr(sne,5)),2&e){let r;Wi(r=ji())&&(n.containerViewChild=r.first),Wi(r=ji())&&(n.inputfieldViewChild=r.first),Wi(r=ji())&&(n.content=r.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(e,n){2&e&&Mp("p-inputwrapper-filled",n.filled)("p-inputwrapper-focus",n.focus)("p-calendar-clearable",n.showClear&&!n.disabled)},inputs:{style:"style",styleClass:"styleClass",inputStyle:"inputStyle",inputId:"inputId",name:"name",inputStyleClass:"inputStyleClass",placeholder:"placeholder",ariaLabelledBy:"ariaLabelledBy",iconAriaLabel:"iconAriaLabel",disabled:"disabled",dateFormat:"dateFormat",multipleSeparator:"multipleSeparator",rangeSeparator:"rangeSeparator",inline:"inline",showOtherMonths:"showOtherMonths",selectOtherMonths:"selectOtherMonths",showIcon:"showIcon",icon:"icon",appendTo:"appendTo",readonlyInput:"readonlyInput",shortYearCutoff:"shortYearCutoff",monthNavigator:"monthNavigator",yearNavigator:"yearNavigator",hourFormat:"hourFormat",timeOnly:"timeOnly",stepHour:"stepHour",stepMinute:"stepMinute",stepSecond:"stepSecond",showSeconds:"showSeconds",required:"required",showOnFocus:"showOnFocus",showWeek:"showWeek",showClear:"showClear",dataType:"dataType",selectionMode:"selectionMode",maxDateCount:"maxDateCount",showButtonBar:"showButtonBar",todayButtonStyleClass:"todayButtonStyleClass",clearButtonStyleClass:"clearButtonStyleClass",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",panelStyleClass:"panelStyleClass",panelStyle:"panelStyle",keepInvalid:"keepInvalid",hideOnDateTimeSelect:"hideOnDateTimeSelect",touchUI:"touchUI",timeSeparator:"timeSeparator",focusTrap:"focusTrap",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",tabindex:"tabindex",view:"view",defaultDate:"defaultDate",minDate:"minDate",maxDate:"maxDate",disabledDates:"disabledDates",disabledDays:"disabledDays",yearRange:"yearRange",showTime:"showTime",responsiveOptions:"responsiveOptions",numberOfMonths:"numberOfMonths",firstDayOfWeek:"firstDayOfWeek",locale:"locale"},outputs:{onFocus:"onFocus",onBlur:"onBlur",onClose:"onClose",onSelect:"onSelect",onClear:"onClear",onInput:"onInput",onTodayClick:"onTodayClick",onClearClick:"onClearClick",onMonthChange:"onMonthChange",onYearChange:"onYearChange",onClickOutside:"onClickOutside",onShow:"onShow"},features:[Ao([Yne])],ngContentSelectors:Xne,decls:4,vars:11,consts:[[3,"ngClass","ngStyle"],["container",""],[3,"ngIf"],[3,"class","ngStyle","ngClass","click",4,"ngIf"],["type","text","autocomplete","off",3,"value","readonly","ngStyle","placeholder","disabled","ngClass","focus","keydown","click","blur","input"],["inputfield",""],["class","p-calendar-clear-icon pi pi-times",3,"click",4,"ngIf"],["type","button","pButton","","pRipple","","class","p-datepicker-trigger","tabindex","0",3,"icon","disabled","click",4,"ngIf"],[1,"p-calendar-clear-icon","pi","pi-times",3,"click"],["type","button","pButton","","pRipple","","tabindex","0",1,"p-datepicker-trigger",3,"icon","disabled","click"],[3,"ngStyle","ngClass","click"],["contentWrapper",""],[4,"ngTemplateOutlet"],[4,"ngIf"],["class","p-timepicker",4,"ngIf"],["class","p-datepicker-buttonbar",4,"ngIf"],[1,"p-datepicker-group-container"],["class","p-datepicker-group",4,"ngFor","ngForOf"],["class","p-monthpicker",4,"ngIf"],["class","p-yearpicker",4,"ngIf"],[1,"p-datepicker-group"],[1,"p-datepicker-header"],["class","p-datepicker-prev p-link","type","button","pRipple","",3,"keydown","click",4,"ngIf"],[1,"p-datepicker-title"],["type","button","class","p-datepicker-month p-link",3,"disabled","click","keydown",4,"ngIf"],["type","button","class","p-datepicker-year p-link",3,"disabled","click","keydown",4,"ngIf"],["class","p-datepicker-decade",4,"ngIf"],["type","button","pRipple","",1,"p-datepicker-next","p-link",3,"keydown","click"],[1,"p-datepicker-next-icon","pi","pi-chevron-right"],["class","p-datepicker-calendar-container",4,"ngIf"],["type","button","pRipple","",1,"p-datepicker-prev","p-link",3,"keydown","click"],[1,"p-datepicker-prev-icon","pi","pi-chevron-left"],["type","button",1,"p-datepicker-month","p-link",3,"disabled","click","keydown"],["type","button",1,"p-datepicker-year","p-link",3,"disabled","click","keydown"],[1,"p-datepicker-decade"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-datepicker-calendar-container"],[1,"p-datepicker-calendar"],["class","p-datepicker-weekheader p-disabled",4,"ngIf"],["scope","col",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"p-datepicker-weekheader","p-disabled"],["scope","col"],["class","p-datepicker-weeknumber",4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"p-datepicker-weeknumber"],[1,"p-disabled"],[3,"ngClass"],["draggable","false","pRipple","",3,"ngClass","click","keydown"],[1,"p-monthpicker"],["class","p-monthpicker-month","pRipple","",3,"ngClass","click","keydown",4,"ngFor","ngForOf"],["pRipple","",1,"p-monthpicker-month",3,"ngClass","click","keydown"],[1,"p-yearpicker"],["class","p-yearpicker-year","pRipple","",3,"ngClass","click","keydown",4,"ngFor","ngForOf"],["pRipple","",1,"p-yearpicker-year",3,"ngClass","click","keydown"],[1,"p-timepicker"],[1,"p-hour-picker"],["type","button","pRipple","",1,"p-link",3,"keydown","keydown.enter","keydown.space","mousedown","mouseup","keyup.enter","keyup.space","mouseleave"],[1,"pi","pi-chevron-up"],[1,"pi","pi-chevron-down"],[1,"p-separator"],[1,"p-minute-picker"],["class","p-separator",4,"ngIf"],["class","p-second-picker",4,"ngIf"],["class","p-ampm-picker",4,"ngIf"],[1,"p-second-picker"],[1,"p-ampm-picker"],["type","button","pRipple","",1,"p-link",3,"keydown","click","keydown.enter"],[1,"p-datepicker-buttonbar"],["type","button","pButton","","pRipple","",3,"label","ngClass","keydown","click"]],template:function(e,n){1&e&&(Bf($ne),Ke(0,"span",0,1),$e(2,lne,4,17,"ng-template",2),$e(3,jne,9,28,"div",3),Je()),2&e&&(kr(n.styleClass),de("ngClass",sf(6,qne,n.showIcon,n.timeOnly,n.disabled,n.focus))("ngStyle",n.style),Ie(2),de("ngIf",!n.inline),Ie(1),de("ngIf",n.inline||n.overlayVisible))},dependencies:[no,jc,ho,el,Po,x0,Du],styles:[".p-calendar{position:relative;display:inline-flex;max-width:100%}.p-calendar .p-inputtext{flex:1 1 auto;width:1%}.p-calendar-w-btn .p-inputtext{border-top-right-radius:0;border-bottom-right-radius:0}.p-calendar-w-btn .p-datepicker-trigger{border-top-left-radius:0;border-bottom-left-radius:0}.p-fluid .p-calendar{display:flex}.p-fluid .p-calendar .p-inputtext{width:1%}.p-calendar .p-datepicker{min-width:100%}.p-datepicker{width:auto;position:absolute;top:0;left:0}.p-datepicker-inline{display:inline-block;position:static;overflow-x:auto}.p-datepicker-header{display:flex;align-items:center;justify-content:space-between}.p-datepicker-header .p-datepicker-title{margin:0 auto}.p-datepicker-prev,.p-datepicker-next{cursor:pointer;display:inline-flex;justify-content:center;align-items:center;overflow:hidden;position:relative}.p-datepicker-multiple-month .p-datepicker-group-container .p-datepicker-group{flex:1 1 auto}.p-datepicker-multiple-month .p-datepicker-group-container{display:flex}.p-datepicker table{width:100%;border-collapse:collapse}.p-datepicker td>span{display:flex;justify-content:center;align-items:center;cursor:pointer;margin:0 auto;overflow:hidden;position:relative}.p-monthpicker-month{width:33.3%;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-datepicker-buttonbar{display:flex;justify-content:space-between;align-items:center}.p-timepicker{display:flex;justify-content:center;align-items:center}.p-timepicker button{display:flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-timepicker>div{display:flex;align-items:center;flex-direction:column}.p-datepicker-touch-ui,.p-calendar .p-datepicker-touch-ui{position:fixed;top:50%;left:50%;min-width:80vw;transform:translate(-50%,-50%)}.p-yearpicker-year{width:50%;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-calendar-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-calendar-clearable{position:relative}\n"],encapsulation:2,data:{animation:[ly("overlayAnimation",[A0("visibleTouchUI",tl({transform:"translate(-50%,-50%)",opacity:1})),Mu("void => visible",[tl({opacity:0,transform:"scaleY(0.8)"}),wc("{{showTransitionParams}}",tl({opacity:1,transform:"*"}))]),Mu("visible => void",[wc("{{hideTransitionParams}}",tl({opacity:0}))]),Mu("void => visibleTouchUI",[tl({opacity:0,transform:"translate3d(-50%, -40%, 0) scale(0.9)"}),wc("{{showTransitionParams}}")]),Mu("visibleTouchUI => void",[wc("{{hideTransitionParams}}",tl({opacity:0,transform:"translate3d(-50%, -40%, 0) scale(0.9)"}))])])]},changeDetection:0}),i})(),c4=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({imports:[Os,av,xa,Xc,av,xa]}),i})();const Zne=["container"],Qne=["resizeHelper"],Jne=["reorderIndicatorUp"],eie=["reorderIndicatorDown"],tie=["wrapper"],nie=["table"],iie=["tableHeader"],rie=["scroller"];function sie(i,t){if(1&i&&(Ke(0,"div",15),Bn(1,"i"),Je()),2&i){const e=be();Ie(1),kr("p-datatable-loading-icon pi-spin "+e.loadingIcon)}}function oie(i,t){1&i&&Ni(0)}function aie(i,t){if(1&i&&(Ke(0,"div",16),$e(1,oie,1,0,"ng-container",17),Je()),2&i){const e=be();Ie(1),de("ngTemplateOutlet",e.captionTemplate)}}function lie(i,t){if(1&i){const e=vi();Ke(0,"p-paginator",18),mn("onPageChange",function(r){return Pt(e),Rt(be().onPageChange(r))}),Je()}if(2&i){const e=be();de("rows",e.rows)("first",e.first)("totalRecords",e.totalRecords)("pageLinkSize",e.pageLinks)("alwaysShow",e.alwaysShowPaginator)("rowsPerPageOptions",e.rowsPerPageOptions)("templateLeft",e.paginatorLeftTemplate)("templateRight",e.paginatorRightTemplate)("dropdownAppendTo",e.paginatorDropdownAppendTo)("dropdownScrollHeight",e.paginatorDropdownScrollHeight)("currentPageReportTemplate",e.currentPageReportTemplate)("showFirstLastIcon",e.showFirstLastIcon)("dropdownItemTemplate",e.paginatorDropdownItemTemplate)("showCurrentPageReport",e.showCurrentPageReport)("showJumpToPageDropdown",e.showJumpToPageDropdown)("showJumpToPageInput",e.showJumpToPageInput)("showPageLinks",e.showPageLinks)}}function cie(i,t){1&i&&Ni(0)}const u4=function(i,t){return{$implicit:i,options:t}};function uie(i,t){if(1&i&&$e(0,cie,1,0,"ng-container",22),2&i){const e=t.$implicit,n=t.options;be(2),de("ngTemplateOutlet",oo(10))("ngTemplateOutletContext",ss(2,u4,e,n))}}const hie=function(i){return{height:i}};function die(i,t){if(1&i){const e=vi();Ke(0,"p-scroller",19,20),mn("onLazyLoad",function(r){return Pt(e),Rt(be().onLazyItemLoad(r))}),$e(2,uie,1,5,"ng-template",21),Je()}if(2&i){const e=be();to(_i(12,hie,"flex"!==e.scrollHeight?e.scrollHeight:void 0)),de("items",e.processedData)("columns",e.columns)("scrollHeight","flex"!==e.scrollHeight?void 0:"100%")("itemSize",e.virtualScrollItemSize||e._virtualRowHeight)("delay",e.lazy?e.virtualScrollDelay:0)("lazy",e.lazy)("loaderDisabled",!0)("showSpacer",!1)("showLoader",e.loadingBodyTemplate)("options",e.virtualScrollOptions)}}function fie(i,t){1&i&&Ni(0)}const pie=function(i){return{columns:i}};function gie(i,t){if(1&i&&(zr(0),$e(1,fie,1,0,"ng-container",22),Vr()),2&i){const e=be(),n=oo(10);Ie(1),de("ngTemplateOutlet",n)("ngTemplateOutletContext",ss(4,u4,e.processedData,_i(2,pie,e.columns)))}}function mie(i,t){1&i&&Ni(0)}function vie(i,t){1&i&&Ni(0)}function yie(i,t){if(1&i&&Bn(0,"tbody",29),2&i){const e=be().options,n=be();de("value",n.frozenValue)("frozenRows",!0)("pTableBody",e.columns)("pTableBodyTemplate",n.frozenBodyTemplate)("frozen",!0)}}function _ie(i,t){1&i&&Ni(0)}const MA=function(i){return{$implicit:i}};function bie(i,t){if(1&i&&(Ke(0,"tfoot",30),$e(1,_ie,1,0,"ng-container",22),Je()),2&i){const e=be().options,n=be();Ie(1),de("ngTemplateOutlet",n.footerGroupedTemplate||n.footerTemplate)("ngTemplateOutletContext",_i(2,MA,e.columns))}}function Cie(i,t){if(1&i&&(Ke(0,"table",23,24),$e(2,mie,1,0,"ng-container",22),Ke(3,"thead",25),$e(4,vie,1,0,"ng-container",22),Je(),$e(5,yie,1,5,"tbody",26),Bn(6,"tbody",27),$e(7,bie,2,4,"tfoot",28),Je()),2&i){const e=t.options,n=be();to(e.spacerStyle),de("ngClass",n.tableStyleClass)("ngStyle",n.tableStyle),vr("id",n.id+"-table"),Ie(2),de("ngTemplateOutlet",n.colGroupTemplate)("ngTemplateOutletContext",_i(18,MA,e.columns)),Ie(2),de("ngTemplateOutlet",n.headerGroupedTemplate||n.headerTemplate)("ngTemplateOutletContext",_i(20,MA,e.columns)),Ie(1),de("ngIf",n.frozenValue||n.frozenBodyTemplate),Ie(1),to(e.contentStyle),de("ngClass",e.contentStyleClass)("value",n.dataToRender(e.rows))("pTableBody",e.columns)("pTableBodyTemplate",n.bodyTemplate)("scrollerOptions",e),Ie(1),de("ngIf",n.footerGroupedTemplate||n.footerTemplate)}}function wie(i,t){if(1&i){const e=vi();Ke(0,"p-paginator",31),mn("onPageChange",function(r){return Pt(e),Rt(be().onPageChange(r))}),Je()}if(2&i){const e=be();de("rows",e.rows)("first",e.first)("totalRecords",e.totalRecords)("pageLinkSize",e.pageLinks)("alwaysShow",e.alwaysShowPaginator)("rowsPerPageOptions",e.rowsPerPageOptions)("templateLeft",e.paginatorLeftTemplate)("templateRight",e.paginatorRightTemplate)("dropdownAppendTo",e.paginatorDropdownAppendTo)("dropdownScrollHeight",e.paginatorDropdownScrollHeight)("currentPageReportTemplate",e.currentPageReportTemplate)("showFirstLastIcon",e.showFirstLastIcon)("dropdownItemTemplate",e.paginatorDropdownItemTemplate)("showCurrentPageReport",e.showCurrentPageReport)("showJumpToPageDropdown",e.showJumpToPageDropdown)("showJumpToPageInput",e.showJumpToPageInput)("showPageLinks",e.showPageLinks)}}function Aie(i,t){1&i&&Ni(0)}function xie(i,t){if(1&i&&(Ke(0,"div",32),$e(1,Aie,1,0,"ng-container",17),Je()),2&i){const e=be();Ie(1),de("ngTemplateOutlet",e.summaryTemplate)}}function Iie(i,t){1&i&&Bn(0,"div",33,34)}function Sie(i,t){1&i&&Bn(0,"span",35,36)}function Eie(i,t){1&i&&Bn(0,"span",37,38)}const Tie=function(i,t,e,n,r,s,o,l,u,p,v,w,I,T){return{"p-datatable p-component":!0,"p-datatable-hoverable-rows":i,"p-datatable-auto-layout":t,"p-datatable-resizable":e,"p-datatable-resizable-fit":n,"p-datatable-scrollable":r,"p-datatable-scrollable-vertical":s,"p-datatable-scrollable-horizontal":o,"p-datatable-scrollable-both":l,"p-datatable-flex-scrollable":u,"p-datatable-responsive-stack":p,"p-datatable-responsive-scroll":v,"p-datatable-responsive":w,"p-datatable-grouped-header":I,"p-datatable-grouped-footer":T}},Mie=function(i){return{maxHeight:i}},Die=["pTableBody",""];function Lie(i,t){1&i&&Ni(0)}const q1=function(i,t,e,n,r){return{$implicit:i,rowIndex:t,columns:e,editing:n,frozen:r}};function Pie(i,t){if(1&i&&(zr(0,3),$e(1,Lie,1,0,"ng-container",4),Vr()),2&i){const e=be(),n=e.$implicit,r=e.index,s=be(2);Ie(1),de("ngTemplateOutlet",s.dt.groupHeaderTemplate)("ngTemplateOutletContext",h0(2,q1,n,s.getRowIndex(r),s.columns,"row"===s.dt.editMode&&s.dt.isRowEditing(n),s.frozen))}}function Rie(i,t){1&i&&Ni(0)}function kie(i,t){if(1&i&&(zr(0),$e(1,Rie,1,0,"ng-container",4),Vr()),2&i){const e=be(),n=e.$implicit,r=e.index,s=be(2);Ie(1),de("ngTemplateOutlet",s.template)("ngTemplateOutletContext",h0(2,q1,n,s.getRowIndex(r),s.columns,"row"===s.dt.editMode&&s.dt.isRowEditing(n),s.frozen))}}function Oie(i,t){1&i&&Ni(0)}const Fie=function(i,t,e,n,r,s,o){return{$implicit:i,rowIndex:t,columns:e,editing:n,frozen:r,rowgroup:s,rowspan:o}};function Nie(i,t){if(1&i&&(zr(0),$e(1,Oie,1,0,"ng-container",4),Vr()),2&i){const e=be(),n=e.$implicit,r=e.index,s=be(2);Ie(1),de("ngTemplateOutlet",s.template)("ngTemplateOutletContext",function lF(i,t,e,n,r,s,o,l,u,p){const v=Bo()+i,w=bi();let I=hg(w,v,e,n,r,s);return _I(w,v+4,o,l,u)||I?Ym(w,v+7,p?t.call(p,e,n,r,s,o,l,u):t(e,n,r,s,o,l,u)):Dw(w,v+7)}(2,Fie,n,s.getRowIndex(r),s.columns,"row"===s.dt.editMode&&s.dt.isRowEditing(n),s.frozen,s.shouldRenderRowspan(s.value,n,s.getRowIndex(r)),s.calculateRowGroupSize(s.value,n,s.getRowIndex(r))))}}function Bie(i,t){1&i&&Ni(0)}function zie(i,t){if(1&i&&(zr(0,3),$e(1,Bie,1,0,"ng-container",4),Vr()),2&i){const e=be(),n=e.$implicit,r=e.index,s=be(2);Ie(1),de("ngTemplateOutlet",s.dt.groupFooterTemplate)("ngTemplateOutletContext",h0(2,q1,n,s.getRowIndex(r),s.columns,"row"===s.dt.editMode&&s.dt.isRowEditing(n),s.frozen))}}function Vie(i,t){if(1&i&&($e(0,Pie,2,8,"ng-container",2),$e(1,kie,2,8,"ng-container",0),$e(2,Nie,2,10,"ng-container",0),$e(3,zie,2,8,"ng-container",2)),2&i){const e=t.$implicit,n=t.index,r=be(2);de("ngIf",r.dt.groupHeaderTemplate&&"subheader"===r.dt.rowGroupMode&&r.shouldRenderRowGroupHeader(r.value,e,r.getRowIndex(n))),Ie(1),de("ngIf","rowspan"!==r.dt.rowGroupMode),Ie(1),de("ngIf","rowspan"===r.dt.rowGroupMode),Ie(1),de("ngIf",r.dt.groupFooterTemplate&&"subheader"===r.dt.rowGroupMode&&r.shouldRenderRowGroupFooter(r.value,e,r.getRowIndex(n)))}}function Uie(i,t){if(1&i&&(zr(0),$e(1,Vie,4,4,"ng-template",1),Vr()),2&i){const e=be();Ie(1),de("ngForOf",e.value)("ngForTrackBy",e.dt.rowTrackBy)}}function Hie(i,t){1&i&&Ni(0)}function Gie(i,t){if(1&i&&$e(0,Hie,1,0,"ng-container",4),2&i){const e=t.$implicit,n=t.index,r=be(2);de("ngTemplateOutlet",e?r.template:r.dt.loadingBodyTemplate)("ngTemplateOutletContext",h0(2,q1,e,r.getRowIndex(n),r.columns,"row"===r.dt.editMode&&r.dt.isRowEditing(e),r.frozen))}}function Wie(i,t){if(1&i&&(zr(0),$e(1,Gie,1,8,"ng-template",1),Vr()),2&i){const e=be();Ie(1),de("ngForOf",e.value)("ngForTrackBy",e.dt.rowTrackBy)}}function jie(i,t){1&i&&Ni(0)}const X1=function(i,t,e,n,r,s){return{$implicit:i,rowIndex:t,columns:e,expanded:n,editing:r,frozen:s}};function $ie(i,t){if(1&i&&(zr(0),$e(1,jie,1,0,"ng-container",4),Vr()),2&i){const e=be(),n=e.$implicit,r=e.index,s=be(2);Ie(1),de("ngTemplateOutlet",s.template)("ngTemplateOutletContext",jb(2,X1,n,s.getRowIndex(r),s.columns,s.dt.isRowExpanded(n),"row"===s.dt.editMode&&s.dt.isRowEditing(n),s.frozen))}}function qie(i,t){1&i&&Ni(0)}function Xie(i,t){if(1&i&&(zr(0,3),$e(1,qie,1,0,"ng-container",4),Vr()),2&i){const e=be(),n=e.$implicit,r=e.index,s=be(2);Ie(1),de("ngTemplateOutlet",s.dt.groupHeaderTemplate)("ngTemplateOutletContext",jb(2,X1,n,s.getRowIndex(r),s.columns,s.dt.isRowExpanded(n),"row"===s.dt.editMode&&s.dt.isRowEditing(n),s.frozen))}}function Yie(i,t){1&i&&Ni(0)}function Kie(i,t){1&i&&Ni(0)}function Zie(i,t){if(1&i&&(zr(0,3),$e(1,Kie,1,0,"ng-container",4),Vr()),2&i){const e=be(2),n=e.$implicit,r=e.index,s=be(2);Ie(1),de("ngTemplateOutlet",s.dt.groupFooterTemplate)("ngTemplateOutletContext",jb(2,X1,n,s.getRowIndex(r),s.columns,s.dt.isRowExpanded(n),"row"===s.dt.editMode&&s.dt.isRowEditing(n),s.frozen))}}const h4=function(i,t,e,n){return{$implicit:i,rowIndex:t,columns:e,frozen:n}};function Qie(i,t){if(1&i&&(zr(0),$e(1,Yie,1,0,"ng-container",4),$e(2,Zie,2,9,"ng-container",2),Vr()),2&i){const e=be(),n=e.$implicit,r=e.index,s=be(2);Ie(1),de("ngTemplateOutlet",s.dt.expandedRowTemplate)("ngTemplateOutletContext",sf(3,h4,n,s.getRowIndex(r),s.columns,s.frozen)),Ie(1),de("ngIf",s.dt.groupFooterTemplate&&"subheader"===s.dt.rowGroupMode&&s.shouldRenderRowGroupFooter(s.value,n,s.getRowIndex(r)))}}function Jie(i,t){if(1&i&&($e(0,$ie,2,9,"ng-container",0),$e(1,Xie,2,9,"ng-container",2),$e(2,Qie,3,8,"ng-container",0)),2&i){const e=t.$implicit,n=t.index,r=be(2);de("ngIf",!r.dt.groupHeaderTemplate),Ie(1),de("ngIf",r.dt.groupHeaderTemplate&&"subheader"===r.dt.rowGroupMode&&r.shouldRenderRowGroupHeader(r.value,e,r.getRowIndex(n))),Ie(1),de("ngIf",r.dt.isRowExpanded(e))}}function ere(i,t){if(1&i&&(zr(0),$e(1,Jie,3,3,"ng-template",1),Vr()),2&i){const e=be();Ie(1),de("ngForOf",e.value)("ngForTrackBy",e.dt.rowTrackBy)}}function tre(i,t){1&i&&Ni(0)}function nre(i,t){1&i&&Ni(0)}function ire(i,t){if(1&i&&(zr(0),$e(1,nre,1,0,"ng-container",4),Vr()),2&i){const e=be(),n=e.$implicit,r=e.index,s=be(2);Ie(1),de("ngTemplateOutlet",s.dt.frozenExpandedRowTemplate)("ngTemplateOutletContext",sf(2,h4,n,s.getRowIndex(r),s.columns,s.frozen))}}function rre(i,t){if(1&i&&($e(0,tre,1,0,"ng-container",4),$e(1,ire,2,7,"ng-container",0)),2&i){const e=t.$implicit,n=t.index,r=be(2);de("ngTemplateOutlet",r.template)("ngTemplateOutletContext",jb(3,X1,e,r.getRowIndex(n),r.columns,r.dt.isRowExpanded(e),"row"===r.dt.editMode&&r.dt.isRowEditing(e),r.frozen)),Ie(1),de("ngIf",r.dt.isRowExpanded(e))}}function sre(i,t){if(1&i&&(zr(0),$e(1,rre,2,10,"ng-template",1),Vr()),2&i){const e=be();Ie(1),de("ngForOf",e.value)("ngForTrackBy",e.dt.rowTrackBy)}}function ore(i,t){1&i&&Ni(0)}const d4=function(i,t){return{$implicit:i,frozen:t}};function are(i,t){if(1&i&&(zr(0),$e(1,ore,1,0,"ng-container",4),Vr()),2&i){const e=be();Ie(1),de("ngTemplateOutlet",e.dt.loadingBodyTemplate)("ngTemplateOutletContext",ss(2,d4,e.columns,e.frozen))}}function lre(i,t){1&i&&Ni(0)}function cre(i,t){if(1&i&&(zr(0),$e(1,lre,1,0,"ng-container",4),Vr()),2&i){const e=be();Ie(1),de("ngTemplateOutlet",e.dt.emptyMessageTemplate)("ngTemplateOutletContext",ss(2,d4,e.columns,e.frozen))}}function ure(i,t){if(1&i&&(Ke(0,"span",2),li(1),Je()),2&i){const e=be();Ie(1),ts(e.getBadgeValue())}}const hre=function(i,t,e){return{"pi-sort-amount-up-alt":i,"pi-sort-amount-down":t,"pi-sort-alt":e}},f4=function(i,t){return{"p-checkbox-focused":i,"p-checkbox-disabled":t}},pre=function(i,t,e){return{"p-checkbox-box p-component":!0,"p-highlight":i,"p-focus":t,"p-disabled":e}},p4=function(i){return{"pi pi-check":i}},gre=function(i,t,e){return{"p-checkbox-box":!0,"p-highlight":i,"p-focus":t,"p-disabled":e}};let DA=(()=>{class i{constructor(){this.sortSource=new Ge,this.selectionSource=new Ge,this.contextMenuSource=new Ge,this.valueSource=new Ge,this.totalRecordsSource=new Ge,this.columnsSource=new Ge,this.resetSource=new Ge,this.sortSource$=this.sortSource.asObservable(),this.selectionSource$=this.selectionSource.asObservable(),this.contextMenuSource$=this.contextMenuSource.asObservable(),this.valueSource$=this.valueSource.asObservable(),this.totalRecordsSource$=this.totalRecordsSource.asObservable(),this.columnsSource$=this.columnsSource.asObservable(),this.resetSource$=this.resetSource.asObservable()}onSort(e){this.sortSource.next(e)}onSelectionChange(){this.selectionSource.next(null)}onResetChange(){this.resetSource.next(null)}onContextMenu(e){this.contextMenuSource.next(e)}onValueChange(e){this.valueSource.next(e)}onTotalRecordsChange(e){this.totalRecordsSource.next(e)}onColumnsChange(e){this.columnsSource.next(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})(),l_=(()=>{class i{constructor(e,n,r,s,o,l){this.el=e,this.zone=n,this.tableService=r,this.cd=s,this.filterService=o,this.overlayService=l,this.pageLinks=5,this.alwaysShowPaginator=!0,this.paginatorPosition="bottom",this.paginatorDropdownScrollHeight="200px",this.currentPageReportTemplate="{currentPage} of {totalPages}",this.showFirstLastIcon=!0,this.showPageLinks=!0,this.defaultSortOrder=1,this.sortMode="single",this.resetPageOnSort=!0,this.selectAllChange=new Fn,this.selectionChange=new Fn,this.contextMenuSelectionChange=new Fn,this.contextMenuSelectionMode="separate",this.rowTrackBy=(u,p)=>p,this.lazy=!1,this.lazyLoadOnInit=!0,this.compareSelectionBy="deepEquals",this.csvSeparator=",",this.exportFilename="download",this.filters={},this.filterDelay=300,this.expandedRowKeys={},this.editingRowKeys={},this.rowExpandMode="multiple",this.scrollDirection="vertical",this.virtualScrollDelay=250,this.columnResizeMode="fit",this.loadingIcon="pi pi-spinner",this.showLoader=!0,this.showInitialSortBadge=!0,this.stateStorage="session",this.editMode="cell",this.groupRowsByOrder=1,this.responsiveLayout="stack",this.breakpoint="960px",this.onRowSelect=new Fn,this.onRowUnselect=new Fn,this.onPage=new Fn,this.onSort=new Fn,this.onFilter=new Fn,this.onLazyLoad=new Fn,this.onRowExpand=new Fn,this.onRowCollapse=new Fn,this.onContextMenuSelect=new Fn,this.onColResize=new Fn,this.onColReorder=new Fn,this.onRowReorder=new Fn,this.onEditInit=new Fn,this.onEditComplete=new Fn,this.onEditCancel=new Fn,this.onHeaderCheckboxToggle=new Fn,this.sortFunction=new Fn,this.firstChange=new Fn,this.rowsChange=new Fn,this.onStateSave=new Fn,this.onStateRestore=new Fn,this._virtualRowHeight=28,this._value=[],this._totalRecords=0,this._first=0,this.selectionKeys={},this._sortOrder=1,this._selectAll=null,this.columnResizing=!1,this.rowGroupHeaderStyleObject={},this.id=sC()}get virtualRowHeight(){return this._virtualRowHeight}set virtualRowHeight(e){this._virtualRowHeight=e,console.warn("The virtualRowHeight property is deprecated, use virtualScrollItemSize property instead.")}ngOnInit(){this.lazy&&this.lazyLoadOnInit&&(this.virtualScroll||this.onLazyLoad.emit(this.createLazyLoadMetadata()),this.restoringFilter&&(this.restoringFilter=!1)),"stack"===this.responsiveLayout&&!this.scrollable&&this.createResponsiveStyle(),this.initialized=!0}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"caption":this.captionTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"headergrouped":this.headerGroupedTemplate=e.template;break;case"body":this.bodyTemplate=e.template;break;case"loadingbody":this.loadingBodyTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"footergrouped":this.footerGroupedTemplate=e.template;break;case"summary":this.summaryTemplate=e.template;break;case"colgroup":this.colGroupTemplate=e.template;break;case"rowexpansion":this.expandedRowTemplate=e.template;break;case"groupheader":this.groupHeaderTemplate=e.template;break;case"rowspan":this.rowspanTemplate=e.template;break;case"groupfooter":this.groupFooterTemplate=e.template;break;case"frozenrows":this.frozenRowsTemplate=e.template;break;case"frozenheader":this.frozenHeaderTemplate=e.template;break;case"frozenbody":this.frozenBodyTemplate=e.template;break;case"frozenfooter":this.frozenFooterTemplate=e.template;break;case"frozencolgroup":this.frozenColGroupTemplate=e.template;break;case"frozenrowexpansion":this.frozenExpandedRowTemplate=e.template;break;case"emptymessage":this.emptyMessageTemplate=e.template;break;case"paginatorleft":this.paginatorLeftTemplate=e.template;break;case"paginatorright":this.paginatorRightTemplate=e.template;break;case"paginatordropdownitem":this.paginatorDropdownItemTemplate=e.template}})}ngAfterViewInit(){this.isStateful()&&this.resizableColumns&&this.restoreColumnWidths()}ngOnChanges(e){e.value&&(this.isStateful()&&!this.stateRestored&&this.restoreState(),this._value=e.value.currentValue,this.lazy||(this.totalRecords=this._value?this._value.length:0,"single"==this.sortMode&&(this.sortField||this.groupRowsBy)?this.sortSingle():"multiple"==this.sortMode&&(this.multiSortMeta||this.groupRowsBy)?this.sortMultiple():this.hasFilter()&&this._filter()),this.tableService.onValueChange(e.value.currentValue)),e.columns&&(this._columns=e.columns.currentValue,this.tableService.onColumnsChange(e.columns.currentValue),this._columns&&this.isStateful()&&this.reorderableColumns&&!this.columnOrderStateRestored&&this.restoreColumnOrder()),e.sortField&&(this._sortField=e.sortField.currentValue,(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle()),e.groupRowsBy&&(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle(),e.sortOrder&&(this._sortOrder=e.sortOrder.currentValue,(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle()),e.groupRowsByOrder&&(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle(),e.multiSortMeta&&(this._multiSortMeta=e.multiSortMeta.currentValue,"multiple"===this.sortMode&&(this.initialized||!this.lazy&&!this.virtualScroll)&&this.sortMultiple()),e.selection&&(this._selection=e.selection.currentValue,this.preventSelectionSetterPropagation||(this.updateSelectionKeys(),this.tableService.onSelectionChange()),this.preventSelectionSetterPropagation=!1),e.selectAll&&(this._selectAll=e.selectAll.currentValue,this.preventSelectionSetterPropagation||(this.updateSelectionKeys(),this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()),this.preventSelectionSetterPropagation=!1)}get value(){return this._value}set value(e){this._value=e}get columns(){return this._columns}set columns(e){this._columns=e}get first(){return this._first}set first(e){this._first=e}get rows(){return this._rows}set rows(e){this._rows=e}get totalRecords(){return this._totalRecords}set totalRecords(e){this._totalRecords=e,this.tableService.onTotalRecordsChange(this._totalRecords)}get sortField(){return this._sortField}set sortField(e){this._sortField=e}get sortOrder(){return this._sortOrder}set sortOrder(e){this._sortOrder=e}get multiSortMeta(){return this._multiSortMeta}set multiSortMeta(e){this._multiSortMeta=e}get selection(){return this._selection}set selection(e){this._selection=e}get selectAll(){return this._selection}set selectAll(e){this._selection=e}get processedData(){return this.filteredValue||this.value||[]}dataToRender(e){const n=e||this.processedData;if(n&&this.paginator){const r=this.lazy?0:this.first;return n.slice(r,r+this.rows)}return n}updateSelectionKeys(){if(this.dataKey&&this._selection)if(this.selectionKeys={},Array.isArray(this._selection))for(let e of this._selection)this.selectionKeys[String(Ji.resolveFieldData(e,this.dataKey))]=1;else this.selectionKeys[String(Ji.resolveFieldData(this._selection,this.dataKey))]=1}onPageChange(e){this.first=e.first,this.rows=e.rows,this.lazy&&this.onLazyLoad.emit(this.createLazyLoadMetadata()),this.onPage.emit({first:this.first,rows:this.rows}),this.firstChange.emit(this.first),this.rowsChange.emit(this.rows),this.tableService.onValueChange(this.value),this.isStateful()&&this.saveState(),this.anchorRowIndex=null,this.scrollable&&this.resetScrollTop()}sort(e){let n=e.originalEvent;if("single"===this.sortMode&&(this._sortOrder=this.sortField===e.field?-1*this.sortOrder:this.defaultSortOrder,this._sortField=e.field,this.resetPageOnSort&&(this._first=0,this.firstChange.emit(this._first),this.scrollable&&this.resetScrollTop()),this.sortSingle()),"multiple"===this.sortMode){let r=n.metaKey||n.ctrlKey,s=this.getSortMeta(e.field);s?r?s.order=-1*s.order:(this._multiSortMeta=[{field:e.field,order:-1*s.order}],this.resetPageOnSort&&(this._first=0,this.firstChange.emit(this._first),this.scrollable&&this.resetScrollTop())):((!r||!this.multiSortMeta)&&(this._multiSortMeta=[],this.resetPageOnSort&&(this._first=0,this.firstChange.emit(this._first))),this._multiSortMeta.push({field:e.field,order:this.defaultSortOrder})),this.sortMultiple()}this.isStateful()&&this.saveState(),this.anchorRowIndex=null}sortSingle(){let e=this.sortField||this.groupRowsBy,n=this.sortField?this.sortOrder:this.groupRowsByOrder;if(this.groupRowsBy&&this.sortField&&this.groupRowsBy!==this.sortField)return this._multiSortMeta=[this.getGroupRowsMeta(),{field:this.sortField,order:this.sortOrder}],void this.sortMultiple();if(e&&n){this.restoringSort&&(this.restoringSort=!1),this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.value&&(this.customSort?this.sortFunction.emit({data:this.value,mode:this.sortMode,field:e,order:n}):(this.value.sort((s,o)=>{let l=Ji.resolveFieldData(s,e),u=Ji.resolveFieldData(o,e),p=null;return p=null==l&&null!=u?-1:null!=l&&null==u?1:null==l&&null==u?0:"string"==typeof l&&"string"==typeof u?l.localeCompare(u):l<u?-1:l>u?1:0,n*p}),this._value=[...this.value]),this.hasFilter()&&this._filter());let r={field:e,order:n};this.onSort.emit(r),this.tableService.onSort(r)}}sortMultiple(){this.groupRowsBy&&(this._multiSortMeta?this.multiSortMeta[0].field!==this.groupRowsBy&&(this._multiSortMeta=[this.getGroupRowsMeta(),...this._multiSortMeta]):this._multiSortMeta=[this.getGroupRowsMeta()]),this.multiSortMeta&&(this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.value&&(this.customSort?this.sortFunction.emit({data:this.value,mode:this.sortMode,multiSortMeta:this.multiSortMeta}):(this.value.sort((e,n)=>this.multisortField(e,n,this.multiSortMeta,0)),this._value=[...this.value]),this.hasFilter()&&this._filter()),this.onSort.emit({multisortmeta:this.multiSortMeta}),this.tableService.onSort(this.multiSortMeta))}multisortField(e,n,r,s){let o=Ji.resolveFieldData(e,r[s].field),l=Ji.resolveFieldData(n,r[s].field),u=null;if(null==o&&null!=l)u=-1;else if(null!=o&&null==l)u=1;else if(null==o&&null==l)u=0;else if("string"==typeof o||o instanceof String){if(o.localeCompare&&o!=l)return r[s].order*o.localeCompare(l)}else u=o<l?-1:1;return o==l?r.length-1>s?this.multisortField(e,n,r,s+1):0:r[s].order*u}getSortMeta(e){if(this.multiSortMeta&&this.multiSortMeta.length)for(let n=0;n<this.multiSortMeta.length;n++)if(this.multiSortMeta[n].field===e)return this.multiSortMeta[n];return null}isSorted(e){if("single"===this.sortMode)return this.sortField&&this.sortField===e;if("multiple"===this.sortMode){let n=!1;if(this.multiSortMeta)for(let r=0;r<this.multiSortMeta.length;r++)if(this.multiSortMeta[r].field==e){n=!0;break}return n}}handleRowClick(e){let n=e.originalEvent.target,r=n.nodeName,s=n.parentElement&&n.parentElement.nodeName;if("INPUT"!=r&&"BUTTON"!=r&&"A"!=r&&"INPUT"!=s&&"BUTTON"!=s&&"A"!=s&&!Ft.hasClass(e.originalEvent.target,"p-clickable")){if(this.selectionMode){let o=e.rowData,l=e.rowIndex;if(this.preventSelectionSetterPropagation=!0,this.isMultipleSelectionMode()&&e.originalEvent.shiftKey&&null!=this.anchorRowIndex)Ft.clearSelection(),null!=this.rangeRowIndex&&this.clearSelectionRange(e.originalEvent),this.rangeRowIndex=l,this.selectRange(e.originalEvent,l);else{let u=this.isSelected(o);if(!u&&!this.isRowSelectable(o,l))return;let p=!this.rowTouched&&this.metaKeySelection,v=this.dataKey?String(Ji.resolveFieldData(o,this.dataKey)):null;if(this.anchorRowIndex=l,this.rangeRowIndex=l,p){let w=e.originalEvent.metaKey||e.originalEvent.ctrlKey;if(u&&w){if(this.isSingleSelectionMode())this._selection=null,this.selectionKeys={},this.selectionChange.emit(null);else{let I=this.findIndexInSelection(o);this._selection=this.selection.filter((T,k)=>k!=I),this.selectionChange.emit(this.selection),v&&delete this.selectionKeys[v]}this.onRowUnselect.emit({originalEvent:e.originalEvent,data:o,type:"row"})}else this.isSingleSelectionMode()?(this._selection=o,this.selectionChange.emit(o),v&&(this.selectionKeys={},this.selectionKeys[v]=1)):this.isMultipleSelectionMode()&&(w?this._selection=this.selection||[]:(this._selection=[],this.selectionKeys={}),this._selection=[...this.selection,o],this.selectionChange.emit(this.selection),v&&(this.selectionKeys[v]=1)),this.onRowSelect.emit({originalEvent:e.originalEvent,data:o,type:"row",index:l})}else if("single"===this.selectionMode)u?(this._selection=null,this.selectionKeys={},this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,data:o,type:"row",index:l})):(this._selection=o,this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,data:o,type:"row",index:l}),v&&(this.selectionKeys={},this.selectionKeys[v]=1));else if("multiple"===this.selectionMode)if(u){let w=this.findIndexInSelection(o);this._selection=this.selection.filter((I,T)=>T!=w),this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,data:o,type:"row",index:l}),v&&delete this.selectionKeys[v]}else this._selection=this.selection?[...this.selection,o]:[o],this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,data:o,type:"row",index:l}),v&&(this.selectionKeys[v]=1)}this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()}this.rowTouched=!1}}handleRowTouchEnd(e){this.rowTouched=!0}handleRowRightClick(e){if(this.contextMenu){const n=e.rowData,r=e.rowIndex;if("separate"===this.contextMenuSelectionMode)this.contextMenuSelection=n,this.contextMenuSelectionChange.emit(n),this.onContextMenuSelect.emit({originalEvent:e.originalEvent,data:n,index:e.rowIndex}),this.contextMenu.show(e.originalEvent),this.tableService.onContextMenu(n);else if("joint"===this.contextMenuSelectionMode){this.preventSelectionSetterPropagation=!0;let s=this.isSelected(n),o=this.dataKey?String(Ji.resolveFieldData(n,this.dataKey)):null;if(!s){if(!this.isRowSelectable(n,r))return;this.isSingleSelectionMode()?(this.selection=n,this.selectionChange.emit(n),o&&(this.selectionKeys={},this.selectionKeys[o]=1)):this.isMultipleSelectionMode()&&(this._selection=this.selection?[...this.selection,n]:[n],this.selectionChange.emit(this.selection),o&&(this.selectionKeys[o]=1))}this.tableService.onSelectionChange(),this.contextMenu.show(e.originalEvent),this.onContextMenuSelect.emit({originalEvent:e,data:n,index:e.rowIndex})}}}selectRange(e,n){let r,s;this.anchorRowIndex>n?(r=n,s=this.anchorRowIndex):this.anchorRowIndex<n?(r=this.anchorRowIndex,s=n):(r=n,s=n),this.lazy&&this.paginator&&(r-=this.first,s-=this.first);let o=[];for(let l=r;l<=s;l++){let u=this.filteredValue?this.filteredValue[l]:this.value[l];if(!this.isSelected(u)){if(!this.isRowSelectable(u,n))continue;o.push(u),this._selection=[...this.selection,u];let p=this.dataKey?String(Ji.resolveFieldData(u,this.dataKey)):null;p&&(this.selectionKeys[p]=1)}}this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e,data:o,type:"row"})}clearSelectionRange(e){let n,r;this.rangeRowIndex>this.anchorRowIndex?(n=this.anchorRowIndex,r=this.rangeRowIndex):this.rangeRowIndex<this.anchorRowIndex?(n=this.rangeRowIndex,r=this.anchorRowIndex):(n=this.rangeRowIndex,r=this.rangeRowIndex);for(let s=n;s<=r;s++){let o=this.value[s],l=this.findIndexInSelection(o);this._selection=this.selection.filter((p,v)=>v!=l);let u=this.dataKey?String(Ji.resolveFieldData(o,this.dataKey)):null;u&&delete this.selectionKeys[u],this.onRowUnselect.emit({originalEvent:e,data:o,type:"row"})}}isSelected(e){return!(!e||!this.selection)&&(this.dataKey?void 0!==this.selectionKeys[Ji.resolveFieldData(e,this.dataKey)]:this.selection instanceof Array?this.findIndexInSelection(e)>-1:this.equals(e,this.selection))}findIndexInSelection(e){let n=-1;if(this.selection&&this.selection.length)for(let r=0;r<this.selection.length;r++)if(this.equals(e,this.selection[r])){n=r;break}return n}isRowSelectable(e,n){return!(this.rowSelectable&&!this.rowSelectable({data:e,index:n}))}toggleRowWithRadio(e,n){if(this.preventSelectionSetterPropagation=!0,this.selection!=n){if(!this.isRowSelectable(n,e.rowIndex))return;this._selection=n,this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:n,type:"radiobutton"}),this.dataKey&&(this.selectionKeys={},this.selectionKeys[String(Ji.resolveFieldData(n,this.dataKey))]=1)}else this._selection=null,this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:n,type:"radiobutton"});this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()}toggleRowWithCheckbox(e,n){this.selection=this.selection||[];let r=this.isSelected(n),s=this.dataKey?String(Ji.resolveFieldData(n,this.dataKey)):null;if(this.preventSelectionSetterPropagation=!0,r){let o=this.findIndexInSelection(n);this._selection=this.selection.filter((l,u)=>u!=o),this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:n,type:"checkbox"}),s&&delete this.selectionKeys[s]}else{if(!this.isRowSelectable(n,e.rowIndex))return;this._selection=this.selection?[...this.selection,n]:[n],this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:n,type:"checkbox"}),s&&(this.selectionKeys[s]=1)}this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()}toggleRowsWithCheckbox(e,n){if(null!==this._selectAll)this.selectAllChange.emit({originalEvent:e,checked:n});else{const r=this.selectionPageOnly?this.dataToRender(this.processedData):this.processedData;let s=this.selectionPageOnly&&this._selection?this._selection.filter(o=>!r.some(l=>this.equals(o,l))):[];n&&(s=this.frozenValue?[...s,...this.frozenValue,...r]:[...s,...r],s=this.rowSelectable?s.filter((o,l)=>this.rowSelectable({data:o,index:l})):s),this._selection=s,this.preventSelectionSetterPropagation=!0,this.updateSelectionKeys(),this.selectionChange.emit(this._selection),this.tableService.onSelectionChange(),this.onHeaderCheckboxToggle.emit({originalEvent:e,checked:n}),this.isStateful()&&this.saveState()}}equals(e,n){return"equals"===this.compareSelectionBy?e===n:Ji.equals(e,n,this.dataKey)}filter(e,n,r){this.filterTimeout&&clearTimeout(this.filterTimeout),this.isFilterBlank(e)?this.filters[n]&&delete this.filters[n]:this.filters[n]={value:e,matchMode:r},this.filterTimeout=setTimeout(()=>{this._filter(),this.filterTimeout=null},this.filterDelay),this.anchorRowIndex=null}filterGlobal(e,n){this.filter(e,"global",n)}isFilterBlank(e){return null==e||"string"==typeof e&&0==e.trim().length||e instanceof Array&&0==e.length}_filter(){if(this.restoringFilter||(this.first=0,this.firstChange.emit(this.first)),this.lazy)this.onLazyLoad.emit(this.createLazyLoadMetadata());else{if(!this.value)return;if(this.hasFilter()){let e;if(this.filters.global){if(!this.columns&&!this.globalFilterFields)throw new Error("Global filtering requires dynamic columns or globalFilterFields to be defined.");e=this.globalFilterFields||this.columns}this.filteredValue=[];for(let n=0;n<this.value.length;n++){let l,r=!0,s=!1,o=!1;for(let u in this.filters)if(this.filters.hasOwnProperty(u)&&"global"!==u){o=!0;let p=u,v=this.filters[p];if(Array.isArray(v)){for(let w of v)if(r=this.executeLocalFilter(p,this.value[n],w),w.operator===HB.OR&&r||w.operator===HB.AND&&!r)break}else r=this.executeLocalFilter(p,this.value[n],v);if(!r)break}if(this.filters.global&&!s&&e)for(let u=0;u<e.length&&(s=this.filterService.filters[this.filters.global.matchMode](Ji.resolveFieldData(this.value[n],e[u].field||e[u]),this.filters.global.value,this.filterLocale),!s);u++);l=this.filters.global?o?o&&r&&s:s:o&&r,l&&this.filteredValue.push(this.value[n])}this.filteredValue.length===this.value.length&&(this.filteredValue=null),this.paginator&&(this.totalRecords=this.filteredValue?this.filteredValue.length:this.value?this.value.length:0)}else this.filteredValue=null,this.paginator&&(this.totalRecords=this.value?this.value.length:0)}this.onFilter.emit({filters:this.filters,filteredValue:this.filteredValue||this.value}),this.tableService.onValueChange(this.value),this.isStateful()&&!this.restoringFilter&&this.saveState(),this.restoringFilter&&(this.restoringFilter=!1),this.cd.markForCheck(),this.scrollable&&this.resetScrollTop()}executeLocalFilter(e,n,r){let s=r.value,o=r.matchMode||Qh.STARTS_WITH,l=Ji.resolveFieldData(n,e);return(0,this.filterService.filters[o])(l,s,this.filterLocale)}hasFilter(){let e=!0;for(let n in this.filters)if(this.filters.hasOwnProperty(n)){e=!1;break}return!e}createLazyLoadMetadata(){return{first:this.first,rows:this.rows,sortField:this.sortField,sortOrder:this.sortOrder,filters:this.filters,globalFilter:this.filters&&this.filters.global?this.filters.global.value:null,multiSortMeta:this.multiSortMeta,forceUpdate:()=>this.cd.detectChanges()}}clear(){this._sortField=null,this._sortOrder=this.defaultSortOrder,this._multiSortMeta=null,this.tableService.onSort(null),this.filters.global&&(this.filters.global.value=null),this.filteredValue=null,this.tableService.onResetChange(),this.first=0,this.firstChange.emit(this.first),this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.totalRecords=this._value?this._value.length:0}reset(){this.clear()}getExportHeader(e){return e[this.exportHeader]||e.header||e.field}exportCSV(e){let n,r="",s=this.columns;e&&e.selectionOnly?n=this.selection||[]:(n=this.filteredValue||this.value,this.frozenValue&&(n=n?[...this.frozenValue,...n]:this.frozenValue));for(let u=0;u<s.length;u++){let p=s[u];!1!==p.exportable&&p.field&&(r+='"'+this.getExportHeader(p)+'"',u<s.length-1&&(r+=this.csvSeparator))}n.forEach((u,p)=>{r+="\n";for(let v=0;v<s.length;v++){let w=s[v];if(!1!==w.exportable&&w.field){let I=Ji.resolveFieldData(u,w.field);I=null!=I?this.exportFunction?this.exportFunction({data:I,field:w.field}):String(I).replace(/"/g,'""'):"",r+='"'+I+'"',v<s.length-1&&(r+=this.csvSeparator)}}});let o=new Blob([r],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a");l.style.display="none",document.body.appendChild(l),void 0!==l.download?(l.setAttribute("href",URL.createObjectURL(o)),l.setAttribute("download",this.exportFilename+".csv"),l.click()):(r="data:text/csv;charset=utf-8,"+r,window.open(encodeURI(r))),document.body.removeChild(l)}onLazyItemLoad(e){this.onLazyLoad.emit({...this.createLazyLoadMetadata(),...e,rows:e.last-e.first})}resetScrollTop(){this.virtualScroll?this.scrollToVirtualIndex(0):this.scrollTo({top:0})}scrollToVirtualIndex(e){this.virtualScroll&&this.scroller.scrollToIndex(e)}scrollTo(e){this.virtualScroll?this.scroller.scrollTo(e):this.wrapperViewChild&&this.wrapperViewChild.nativeElement&&(this.wrapperViewChild.nativeElement.scrollTo?this.wrapperViewChild.nativeElement.scrollTo(e):(this.wrapperViewChild.nativeElement.scrollLeft=e.left,this.wrapperViewChild.nativeElement.scrollTop=e.top))}updateEditingCell(e,n,r,s){this.editingCell=e,this.editingCellData=n,this.editingCellField=r,this.editingCellRowIndex=s,this.bindDocumentEditListener()}isEditingCellValid(){return this.editingCell&&0===Ft.find(this.editingCell,".ng-invalid.ng-dirty").length}bindDocumentEditListener(){this.documentEditListener||(this.documentEditListener=e=>{this.editingCell&&!this.selfClick&&this.isEditingCellValid()&&(Ft.removeClass(this.editingCell,"p-cell-editing"),this.editingCell=null,this.onEditComplete.emit({field:this.editingCellField,data:this.editingCellData,originalEvent:e,index:this.editingCellRowIndex}),this.editingCellField=null,this.editingCellData=null,this.editingCellRowIndex=null,this.unbindDocumentEditListener(),this.cd.markForCheck(),this.overlaySubscription&&this.overlaySubscription.unsubscribe()),this.selfClick=!1},document.addEventListener("click",this.documentEditListener))}unbindDocumentEditListener(){this.documentEditListener&&(document.removeEventListener("click",this.documentEditListener),this.documentEditListener=null)}initRowEdit(e){let n=String(Ji.resolveFieldData(e,this.dataKey));this.editingRowKeys[n]=!0}saveRowEdit(e,n){if(0===Ft.find(n,".ng-invalid.ng-dirty").length){let r=String(Ji.resolveFieldData(e,this.dataKey));delete this.editingRowKeys[r]}}cancelRowEdit(e){let n=String(Ji.resolveFieldData(e,this.dataKey));delete this.editingRowKeys[n]}toggleRow(e,n){if(!this.dataKey)throw new Error("dataKey must be defined to use row expansion");let r=String(Ji.resolveFieldData(e,this.dataKey));null!=this.expandedRowKeys[r]?(delete this.expandedRowKeys[r],this.onRowCollapse.emit({originalEvent:n,data:e})):("single"===this.rowExpandMode&&(this.expandedRowKeys={}),this.expandedRowKeys[r]=!0,this.onRowExpand.emit({originalEvent:n,data:e})),n&&n.preventDefault(),this.isStateful()&&this.saveState()}isRowExpanded(e){return!0===this.expandedRowKeys[String(Ji.resolveFieldData(e,this.dataKey))]}isRowEditing(e){return!0===this.editingRowKeys[String(Ji.resolveFieldData(e,this.dataKey))]}isSingleSelectionMode(){return"single"===this.selectionMode}isMultipleSelectionMode(){return"multiple"===this.selectionMode}onColumnResizeBegin(e){let n=Ft.getOffset(this.containerViewChild.nativeElement).left;this.resizeColumnElement=e.target.parentElement,this.columnResizing=!0,this.lastResizerHelperX=e.pageX-n+this.containerViewChild.nativeElement.scrollLeft,this.onColumnResize(e),e.preventDefault()}onColumnResize(e){let n=Ft.getOffset(this.containerViewChild.nativeElement).left;Ft.addClass(this.containerViewChild.nativeElement,"p-unselectable-text"),this.resizeHelperViewChild.nativeElement.style.height=this.containerViewChild.nativeElement.offsetHeight+"px",this.resizeHelperViewChild.nativeElement.style.top="0px",this.resizeHelperViewChild.nativeElement.style.left=e.pageX-n+this.containerViewChild.nativeElement.scrollLeft+"px",this.resizeHelperViewChild.nativeElement.style.display="block"}onColumnResizeEnd(){let e=this.resizeHelperViewChild.nativeElement.offsetLeft-this.lastResizerHelperX,r=this.resizeColumnElement.offsetWidth+e;if(r>=(this.resizeColumnElement.style.minWidth||15)){if("fit"===this.columnResizeMode){let l=this.resizeColumnElement.nextElementSibling.offsetWidth-e;r>15&&l>15&&this.resizeTableCells(r,l)}else"expand"===this.columnResizeMode&&(this.setResizeTableWidth(this.tableViewChild.nativeElement.offsetWidth+e+"px"),this.resizeTableCells(r,null));this.onColResize.emit({element:this.resizeColumnElement,delta:e}),this.isStateful()&&this.saveState()}this.resizeHelperViewChild.nativeElement.style.display="none",Ft.removeClass(this.containerViewChild.nativeElement,"p-unselectable-text")}resizeTableCells(e,n){let r=Ft.index(this.resizeColumnElement),s=[];const o=Ft.findSingle(this.containerViewChild.nativeElement,".p-datatable-thead");Ft.find(o,"tr > th").forEach(p=>s.push(Ft.getOuterWidth(p))),this.destroyStyleElement(),this.createStyleElement();let u="";s.forEach((p,v)=>{let w=v===r?e:n&&v===r+1?n:p;u+=`\n                #${this.id} .p-datatable-thead > tr > th:nth-child(${v+1}),\n                #${this.id} .p-datatable-tbody > tr > td:nth-child(${v+1}),\n                #${this.id} .p-datatable-tfoot > tr > td:nth-child(${v+1}) {\n                    ${this.scrollable?`flex: 1 1 ${w}px !important`:`width: ${w}px !important`}\n                }\n            `}),this.styleElement.innerHTML=u}onColumnDragStart(e,n){this.reorderIconWidth=Ft.getHiddenElementOuterWidth(this.reorderIndicatorUpViewChild.nativeElement),this.reorderIconHeight=Ft.getHiddenElementOuterHeight(this.reorderIndicatorDownViewChild.nativeElement),this.draggedColumn=n,e.dataTransfer.setData("text","b")}onColumnDragEnter(e,n){if(this.reorderableColumns&&this.draggedColumn&&n){e.preventDefault();let r=Ft.getOffset(this.containerViewChild.nativeElement),s=Ft.getOffset(n);if(this.draggedColumn!=n){let o=Ft.indexWithinGroup(this.draggedColumn,"preorderablecolumn"),l=Ft.indexWithinGroup(n,"preorderablecolumn"),u=s.left-r.left,v=s.left+n.offsetWidth/2;this.reorderIndicatorUpViewChild.nativeElement.style.top=s.top-r.top-(this.reorderIconHeight-1)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.top=s.top-r.top+n.offsetHeight+"px",e.pageX>v?(this.reorderIndicatorUpViewChild.nativeElement.style.left=u+n.offsetWidth-Math.ceil(this.reorderIconWidth/2)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.left=u+n.offsetWidth-Math.ceil(this.reorderIconWidth/2)+"px",this.dropPosition=1):(this.reorderIndicatorUpViewChild.nativeElement.style.left=u-Math.ceil(this.reorderIconWidth/2)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.left=u-Math.ceil(this.reorderIconWidth/2)+"px",this.dropPosition=-1),l-o==1&&-1===this.dropPosition||l-o==-1&&1===this.dropPosition?(this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none"):(this.reorderIndicatorUpViewChild.nativeElement.style.display="block",this.reorderIndicatorDownViewChild.nativeElement.style.display="block")}else e.dataTransfer.dropEffect="none"}}onColumnDragLeave(e){this.reorderableColumns&&this.draggedColumn&&(e.preventDefault(),this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none")}onColumnDrop(e,n){if(e.preventDefault(),this.draggedColumn){let r=Ft.indexWithinGroup(this.draggedColumn,"preorderablecolumn"),s=Ft.indexWithinGroup(n,"preorderablecolumn"),o=r!=s;o&&(s-r==1&&-1===this.dropPosition||r-s==1&&1===this.dropPosition)&&(o=!1),o&&s<r&&1===this.dropPosition&&(s+=1),o&&s>r&&-1===this.dropPosition&&(s-=1),o&&(Ji.reorderArray(this.columns,r,s),this.onColReorder.emit({dragIndex:r,dropIndex:s,columns:this.columns}),this.isStateful()&&this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.saveState()})})),this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none",this.draggedColumn.draggable=!1,this.draggedColumn=null,this.dropPosition=null}}onRowDragStart(e,n){this.rowDragging=!0,this.draggedRowIndex=n,e.dataTransfer.setData("text","b")}onRowDragOver(e,n,r){if(this.rowDragging&&this.draggedRowIndex!==n){let s=Ft.getOffset(r).top+Ft.getWindowScrollTop(),o=e.pageY,l=s+Ft.getOuterHeight(r)/2,u=r.previousElementSibling;o<l?(Ft.removeClass(r,"p-datatable-dragpoint-bottom"),this.droppedRowIndex=n,u?Ft.addClass(u,"p-datatable-dragpoint-bottom"):Ft.addClass(r,"p-datatable-dragpoint-top")):(u?Ft.removeClass(u,"p-datatable-dragpoint-bottom"):Ft.addClass(r,"p-datatable-dragpoint-top"),this.droppedRowIndex=n+1,Ft.addClass(r,"p-datatable-dragpoint-bottom"))}}onRowDragLeave(e,n){let r=n.previousElementSibling;r&&Ft.removeClass(r,"p-datatable-dragpoint-bottom"),Ft.removeClass(n,"p-datatable-dragpoint-bottom"),Ft.removeClass(n,"p-datatable-dragpoint-top")}onRowDragEnd(e){this.rowDragging=!1,this.draggedRowIndex=null,this.droppedRowIndex=null}onRowDrop(e,n){if(null!=this.droppedRowIndex){let r=this.draggedRowIndex>this.droppedRowIndex?this.droppedRowIndex:0===this.droppedRowIndex?0:this.droppedRowIndex-1;Ji.reorderArray(this.value,this.draggedRowIndex,r),this.virtualScroll&&(this._value=[...this._value]),this.onRowReorder.emit({dragIndex:this.draggedRowIndex,dropIndex:r})}this.onRowDragLeave(e,n),this.onRowDragEnd(e)}isEmpty(){let e=this.filteredValue||this.value;return null==e||0==e.length}getBlockableElement(){return this.el.nativeElement.children[0]}getStorage(){switch(this.stateStorage){case"local":return window.localStorage;case"session":return window.sessionStorage;default:throw new Error(this.stateStorage+' is not a valid value for the state storage, supported values are "local" and "session".')}}isStateful(){return null!=this.stateKey}saveState(){const e=this.getStorage();let n={};this.paginator&&(n.first=this.first,n.rows=this.rows),this.sortField&&(n.sortField=this.sortField,n.sortOrder=this.sortOrder),this.multiSortMeta&&(n.multiSortMeta=this.multiSortMeta),this.hasFilter()&&(n.filters=this.filters),this.resizableColumns&&this.saveColumnWidths(n),this.reorderableColumns&&this.saveColumnOrder(n),this.selection&&(n.selection=this.selection),Object.keys(this.expandedRowKeys).length&&(n.expandedRowKeys=this.expandedRowKeys),e.setItem(this.stateKey,JSON.stringify(n)),this.onStateSave.emit(n)}clearState(){const e=this.getStorage();this.stateKey&&e.removeItem(this.stateKey)}restoreState(){const n=this.getStorage().getItem(this.stateKey),r=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/;if(n){let o=JSON.parse(n,function(o,l){return"string"==typeof l&&r.test(l)?new Date(l):l});this.paginator&&(void 0!==this.first&&(this.first=o.first,this.firstChange.emit(this.first)),void 0!==this.rows&&(this.rows=o.rows,this.rowsChange.emit(this.rows))),o.sortField&&(this.restoringSort=!0,this._sortField=o.sortField,this._sortOrder=o.sortOrder),o.multiSortMeta&&(this.restoringSort=!0,this._multiSortMeta=o.multiSortMeta),o.filters&&(this.restoringFilter=!0,this.filters=o.filters),this.resizableColumns&&(this.columnWidthsState=o.columnWidths,this.tableWidthState=o.tableWidth),o.expandedRowKeys&&(this.expandedRowKeys=o.expandedRowKeys),o.selection&&Promise.resolve(null).then(()=>this.selectionChange.emit(o.selection)),this.stateRestored=!0,this.onStateRestore.emit(o)}}saveColumnWidths(e){let n=[];Ft.find(this.containerViewChild.nativeElement,".p-datatable-thead > tr > th").forEach(s=>n.push(Ft.getOuterWidth(s))),e.columnWidths=n.join(","),"expand"===this.columnResizeMode&&(e.tableWidth=Ft.getOuterWidth(this.tableViewChild.nativeElement)+"px")}setResizeTableWidth(e){if(this.virtualScroll){const n=Ft.findSingle(this.containerViewChild.nativeElement,".p-scroller > table > tbody");n.style.width=e,n.style.minWidth=e}this.tableViewChild.nativeElement.style.width=e,this.tableViewChild.nativeElement.style.minWidth=e}restoreColumnWidths(){if(this.columnWidthsState){let e=this.columnWidthsState.split(",");if("expand"===this.columnResizeMode&&this.tableWidthState&&this.setResizeTableWidth(this.tableWidthState+"px"),Ji.isNotEmpty(e)){this.createStyleElement();let n="";e.forEach((r,s)=>{n+=`\n                        #${this.id} .p-datatable-thead > tr > th:nth-child(${s+1}),\n                        #${this.id} .p-datatable-tbody > tr > td:nth-child(${s+1}),\n                        #${this.id} .p-datatable-tfoot > tr > td:nth-child(${s+1}) {\n                            ${this.scrollable?`flex: 1 1 ${r}px !important`:`width: ${r}px !important`}\n                        }\n                    `}),this.styleElement.innerHTML=n}}}saveColumnOrder(e){if(this.columns){let n=[];this.columns.map(r=>{n.push(r.field||r.key)}),e.columnOrder=n}}restoreColumnOrder(){const n=this.getStorage().getItem(this.stateKey);if(n){let s=JSON.parse(n).columnOrder;if(s){let o=[];s.map(l=>{let u=this.findColumnByKey(l);u&&o.push(u)}),this.columnOrderStateRestored=!0,this.columns=o}}}findColumnByKey(e){if(!this.columns)return null;for(let n of this.columns)if(n.key===e||n.field===e)return n}createStyleElement(){this.styleElement=document.createElement("style"),this.styleElement.type="text/css",document.head.appendChild(this.styleElement)}getGroupRowsMeta(){return{field:this.groupRowsBy,order:this.groupRowsByOrder}}createResponsiveStyle(){this.responsiveStyleElement||(this.responsiveStyleElement=document.createElement("style"),this.responsiveStyleElement.type="text/css",document.head.appendChild(this.responsiveStyleElement),this.responsiveStyleElement.innerHTML=`\n@media screen and (max-width: ${this.breakpoint}) {\n    #${this.id} .p-datatable-thead > tr > th,\n    #${this.id} .p-datatable-tfoot > tr > td {\n        display: none !important;\n    }\n\n    #${this.id} .p-datatable-tbody > tr > td {\n        display: flex;\n        width: 100% !important;\n        align-items: center;\n        justify-content: space-between;\n    }\n\n    #${this.id} .p-datatable-tbody > tr > td:not(:last-child) {\n        border: 0 none;\n    }\n\n    #${this.id}.p-datatable-gridlines .p-datatable-tbody > tr > td:last-child {\n        border-top: 0;\n        border-right: 0;\n        border-left: 0;\n    }\n\n    #${this.id} .p-datatable-tbody > tr > td > .p-column-title {\n        display: block;\n    }\n}\n`)}destroyResponsiveStyle(){this.responsiveStyleElement&&(document.head.removeChild(this.responsiveStyleElement),this.responsiveStyleElement=null)}destroyStyleElement(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}ngOnDestroy(){this.unbindDocumentEditListener(),this.editingCell=null,this.initialized=null,this.destroyStyleElement(),this.destroyResponsiveStyle()}}return i.\u0275fac=function(e){return new(e||i)(Xt(Yn),Xt(Vo),Xt(DA),Xt(xo),Xt(oA),Xt(aA))},i.\u0275cmp=_r({type:i,selectors:[["p-table"]],contentQueries:function(e,n,r){if(1&e&&Ba(r,za,4),2&e){let s;Wi(s=ji())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(Tr(Zne,5),Tr(Qne,5),Tr(Jne,5),Tr(eie,5),Tr(tie,5),Tr(nie,5),Tr(iie,5),Tr(rie,5)),2&e){let r;Wi(r=ji())&&(n.containerViewChild=r.first),Wi(r=ji())&&(n.resizeHelperViewChild=r.first),Wi(r=ji())&&(n.reorderIndicatorUpViewChild=r.first),Wi(r=ji())&&(n.reorderIndicatorDownViewChild=r.first),Wi(r=ji())&&(n.wrapperViewChild=r.first),Wi(r=ji())&&(n.tableViewChild=r.first),Wi(r=ji())&&(n.tableHeaderViewChild=r.first),Wi(r=ji())&&(n.scroller=r.first)}},hostAttrs:[1,"p-element"],inputs:{frozenColumns:"frozenColumns",frozenValue:"frozenValue",style:"style",styleClass:"styleClass",tableStyle:"tableStyle",tableStyleClass:"tableStyleClass",paginator:"paginator",pageLinks:"pageLinks",rowsPerPageOptions:"rowsPerPageOptions",alwaysShowPaginator:"alwaysShowPaginator",paginatorPosition:"paginatorPosition",paginatorDropdownAppendTo:"paginatorDropdownAppendTo",paginatorDropdownScrollHeight:"paginatorDropdownScrollHeight",currentPageReportTemplate:"currentPageReportTemplate",showCurrentPageReport:"showCurrentPageReport",showJumpToPageDropdown:"showJumpToPageDropdown",showJumpToPageInput:"showJumpToPageInput",showFirstLastIcon:"showFirstLastIcon",showPageLinks:"showPageLinks",defaultSortOrder:"defaultSortOrder",sortMode:"sortMode",resetPageOnSort:"resetPageOnSort",selectionMode:"selectionMode",selectionPageOnly:"selectionPageOnly",contextMenuSelection:"contextMenuSelection",contextMenuSelectionMode:"contextMenuSelectionMode",dataKey:"dataKey",metaKeySelection:"metaKeySelection",rowSelectable:"rowSelectable",rowTrackBy:"rowTrackBy",lazy:"lazy",lazyLoadOnInit:"lazyLoadOnInit",compareSelectionBy:"compareSelectionBy",csvSeparator:"csvSeparator",exportFilename:"exportFilename",filters:"filters",globalFilterFields:"globalFilterFields",filterDelay:"filterDelay",filterLocale:"filterLocale",expandedRowKeys:"expandedRowKeys",editingRowKeys:"editingRowKeys",rowExpandMode:"rowExpandMode",scrollable:"scrollable",scrollDirection:"scrollDirection",rowGroupMode:"rowGroupMode",scrollHeight:"scrollHeight",virtualScroll:"virtualScroll",virtualScrollItemSize:"virtualScrollItemSize",virtualScrollOptions:"virtualScrollOptions",virtualScrollDelay:"virtualScrollDelay",frozenWidth:"frozenWidth",responsive:"responsive",contextMenu:"contextMenu",resizableColumns:"resizableColumns",columnResizeMode:"columnResizeMode",reorderableColumns:"reorderableColumns",loading:"loading",loadingIcon:"loadingIcon",showLoader:"showLoader",rowHover:"rowHover",customSort:"customSort",showInitialSortBadge:"showInitialSortBadge",autoLayout:"autoLayout",exportFunction:"exportFunction",exportHeader:"exportHeader",stateKey:"stateKey",stateStorage:"stateStorage",editMode:"editMode",groupRowsBy:"groupRowsBy",groupRowsByOrder:"groupRowsByOrder",responsiveLayout:"responsiveLayout",breakpoint:"breakpoint",virtualRowHeight:"virtualRowHeight",value:"value",columns:"columns",first:"first",rows:"rows",totalRecords:"totalRecords",sortField:"sortField",sortOrder:"sortOrder",multiSortMeta:"multiSortMeta",selection:"selection",selectAll:"selectAll"},outputs:{selectAllChange:"selectAllChange",selectionChange:"selectionChange",contextMenuSelectionChange:"contextMenuSelectionChange",onRowSelect:"onRowSelect",onRowUnselect:"onRowUnselect",onPage:"onPage",onSort:"onSort",onFilter:"onFilter",onLazyLoad:"onLazyLoad",onRowExpand:"onRowExpand",onRowCollapse:"onRowCollapse",onContextMenuSelect:"onContextMenuSelect",onColResize:"onColResize",onColReorder:"onColReorder",onRowReorder:"onRowReorder",onEditInit:"onEditInit",onEditComplete:"onEditComplete",onEditCancel:"onEditCancel",onHeaderCheckboxToggle:"onHeaderCheckboxToggle",sortFunction:"sortFunction",firstChange:"firstChange",rowsChange:"rowsChange",onStateSave:"onStateSave",onStateRestore:"onStateRestore"},features:[Ao([DA]),da],decls:16,vars:33,consts:[[3,"ngStyle","ngClass"],["container",""],["class","p-datatable-loading-overlay p-component-overlay",4,"ngIf"],["class","p-datatable-header",4,"ngIf"],["styleClass","p-paginator-top",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showJumpToPageInput","showPageLinks","onPageChange",4,"ngIf"],[1,"p-datatable-wrapper",3,"ngStyle"],["wrapper",""],[3,"items","columns","style","scrollHeight","itemSize","delay","lazy","loaderDisabled","showSpacer","showLoader","options","onLazyLoad",4,"ngIf"],[4,"ngIf"],["buildInTable",""],["styleClass","p-paginator-bottom",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showJumpToPageInput","showPageLinks","onPageChange",4,"ngIf"],["class","p-datatable-footer",4,"ngIf"],["class","p-column-resizer-helper","style","display:none",4,"ngIf"],["class","pi pi-arrow-down p-datatable-reorder-indicator-up","style","display:none",4,"ngIf"],["class","pi pi-arrow-up p-datatable-reorder-indicator-down","style","display:none",4,"ngIf"],[1,"p-datatable-loading-overlay","p-component-overlay"],[1,"p-datatable-header"],[4,"ngTemplateOutlet"],["styleClass","p-paginator-top",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showJumpToPageInput","showPageLinks","onPageChange"],[3,"items","columns","scrollHeight","itemSize","delay","lazy","loaderDisabled","showSpacer","showLoader","options","onLazyLoad"],["scroller",""],["pTemplate","content"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["role","table",1,"p-datatable-table",3,"ngClass","ngStyle"],["table",""],[1,"p-datatable-thead"],["class","p-datatable-tbody p-datatable-frozen-tbody",3,"value","frozenRows","pTableBody","pTableBodyTemplate","frozen",4,"ngIf"],[1,"p-datatable-tbody",3,"ngClass","value","pTableBody","pTableBodyTemplate","scrollerOptions"],["class","p-datatable-tfoot",4,"ngIf"],[1,"p-datatable-tbody","p-datatable-frozen-tbody",3,"value","frozenRows","pTableBody","pTableBodyTemplate","frozen"],[1,"p-datatable-tfoot"],["styleClass","p-paginator-bottom",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showJumpToPageInput","showPageLinks","onPageChange"],[1,"p-datatable-footer"],[1,"p-column-resizer-helper",2,"display","none"],["resizeHelper",""],[1,"pi","pi-arrow-down","p-datatable-reorder-indicator-up",2,"display","none"],["reorderIndicatorUp",""],[1,"pi","pi-arrow-up","p-datatable-reorder-indicator-down",2,"display","none"],["reorderIndicatorDown",""]],template:function(e,n){1&e&&(Ke(0,"div",0,1),$e(2,sie,2,2,"div",2),$e(3,aie,2,1,"div",3),$e(4,lie,1,17,"p-paginator",4),Ke(5,"div",5,6),$e(7,die,3,14,"p-scroller",7),$e(8,gie,2,7,"ng-container",8),$e(9,Cie,8,22,"ng-template",null,9,sc),Je(),$e(11,wie,1,17,"p-paginator",10),$e(12,xie,2,1,"div",11),$e(13,Iie,2,0,"div",12),$e(14,Sie,2,0,"span",13),$e(15,Eie,2,0,"span",14),Je()),2&e&&(kr(n.styleClass),de("ngStyle",n.style)("ngClass",hM(16,Tie,[n.rowHover||n.selectionMode,n.autoLayout,n.resizableColumns,n.resizableColumns&&"fit"===n.columnResizeMode,n.scrollable,n.scrollable&&"vertical"===n.scrollDirection,n.scrollable&&"horizontal"===n.scrollDirection,n.scrollable&&"both"===n.scrollDirection,n.scrollable&&"flex"===n.scrollHeight,"stack"===n.responsiveLayout,"scroll"===n.responsiveLayout,n.responsive,null!=n.headerGroupedTemplate,null!=n.footerGroupedTemplate])),vr("id",n.id),Ie(2),de("ngIf",n.loading&&n.showLoader),Ie(1),de("ngIf",n.captionTemplate),Ie(1),de("ngIf",n.paginator&&("top"===n.paginatorPosition||"both"==n.paginatorPosition)),Ie(1),de("ngStyle",_i(31,Mie,n.virtualScroll?"":n.scrollHeight)),Ie(2),de("ngIf",n.virtualScroll),Ie(1),de("ngIf",!n.virtualScroll),Ie(3),de("ngIf",n.paginator&&("bottom"===n.paginatorPosition||"both"==n.paginatorPosition)),Ie(1),de("ngIf",n.summaryTemplate),Ie(1),de("ngIf",n.resizableColumns),Ie(1),de("ngIf",n.reorderableColumns),Ie(1),de("ngIf",n.reorderableColumns))},dependencies:function(){return[no,ho,el,Po,n4,za,EA,Bre]},styles:[".p-datatable{position:relative}.p-datatable table{border-collapse:collapse;min-width:100%;table-layout:fixed}.p-datatable .p-sortable-column{cursor:pointer;-webkit-user-select:none;user-select:none}.p-datatable .p-sortable-column .p-column-title,.p-datatable .p-sortable-column .p-sortable-column-icon,.p-datatable .p-sortable-column .p-sortable-column-badge{vertical-align:middle}.p-datatable .p-sortable-column .p-sortable-column-badge{display:inline-flex;align-items:center;justify-content:center}.p-datatable-auto-layout>.p-datatable-wrapper{overflow-x:auto}.p-datatable-auto-layout>.p-datatable-wrapper>table{table-layout:auto}.p-datatable-responsive-scroll>.p-datatable-wrapper{overflow-x:auto}.p-datatable-responsive-scroll>.p-datatable-wrapper>table,.p-datatable-auto-layout>.p-datatable-wrapper>table{table-layout:auto}.p-datatable-hoverable-rows .p-selectable-row{cursor:pointer}.p-datatable-scrollable .p-datatable-wrapper{position:relative;overflow:auto}.p-datatable-scrollable .p-datatable-thead,.p-datatable-scrollable .p-datatable-tbody,.p-datatable-scrollable .p-datatable-tfoot{display:block}.p-datatable-scrollable .p-datatable-thead>tr,.p-datatable-scrollable .p-datatable-tbody>tr,.p-datatable-scrollable .p-datatable-tfoot>tr{display:flex;flex-wrap:nowrap;width:100%}.p-datatable-scrollable .p-datatable-thead>tr>th,.p-datatable-scrollable .p-datatable-tbody>tr>td,.p-datatable-scrollable .p-datatable-tfoot>tr>td{display:flex;flex:1 1 0;align-items:center}.p-datatable-scrollable>.p-datatable-wrapper>.p-datatable-table>.p-datatable-thead,.p-datatable-scrollable>.p-datatable-wrapper>.p-scroller-viewport>.p-scroller>.p-datatable-table>.p-datatable-thead{position:sticky;top:0;z-index:1}.p-datatable-scrollable>.p-datatable-wrapper>.p-datatable-table>.p-datatable-frozen-tbody{position:sticky;z-index:1}.p-datatable-scrollable>.p-datatable-wrapper>.p-datatable-table>.p-datatable-tfoot{position:sticky;bottom:0;z-index:1}.p-datatable-scrollable .p-frozen-column{position:sticky;background:inherit}.p-datatable-scrollable th.p-frozen-column{z-index:1}.p-datatable-scrollable-both .p-datatable-thead>tr>th,.p-datatable-scrollable-both .p-datatable-tbody>tr>td,.p-datatable-scrollable-both .p-datatable-tfoot>tr>td,.p-datatable-scrollable-horizontal .p-datatable-thead>tr>th .p-datatable-scrollable-horizontal .p-datatable-tbody>tr>td,.p-datatable-scrollable-horizontal .p-datatable-tfoot>tr>td{flex:0 0 auto}.p-datatable-flex-scrollable{display:flex;flex-direction:column;height:100%}.p-datatable-flex-scrollable .p-datatable-wrapper{display:flex;flex-direction:column;flex:1;height:100%}.p-datatable-scrollable .p-rowgroup-header{position:sticky;z-index:1}.p-datatable-scrollable.p-datatable-grouped-header .p-datatable-thead,.p-datatable-scrollable.p-datatable-grouped-footer .p-datatable-tfoot{display:table;border-collapse:collapse;width:100%;table-layout:fixed}.p-datatable-scrollable.p-datatable-grouped-header .p-datatable-thead>tr,.p-datatable-scrollable.p-datatable-grouped-footer .p-datatable-tfoot>tr{display:table-row}.p-datatable-scrollable.p-datatable-grouped-header .p-datatable-thead>tr>th,.p-datatable-scrollable.p-datatable-grouped-footer .p-datatable-tfoot>tr>td{display:table-cell}.p-datatable-scrollable .p-scroller>.p-datatable-table{display:inline-block}.p-datatable-flex-scrollable{display:flex;flex-direction:column;flex:1;height:100%}.p-datatable-flex-scrollable .p-datatable-virtual-scrollable-body{flex:1}.p-datatable-resizable>.p-datatable-wrapper{overflow-x:auto}.p-datatable-resizable .p-datatable-thead>tr>th,.p-datatable-resizable .p-datatable-tfoot>tr>td,.p-datatable-resizable .p-datatable-tbody>tr>td{overflow:hidden;white-space:nowrap}.p-datatable-resizable .p-resizable-column:not(.p-frozen-column){background-clip:padding-box;position:relative}.p-datatable-resizable-fit .p-resizable-column:last-child .p-column-resizer{display:none}.p-datatable .p-column-resizer{display:block;position:absolute!important;top:0;right:0;margin:0;width:.5rem;height:100%;padding:0;cursor:col-resize;border:1px solid transparent}.p-datatable .p-column-resizer-helper{width:1px;position:absolute;z-index:10;display:none}.p-datatable .p-row-editor-init,.p-datatable .p-row-editor-save,.p-datatable .p-row-editor-cancel,.p-datatable .p-row-toggler{display:inline-flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-datatable-reorder-indicator-up,.p-datatable-reorder-indicator-down{position:absolute;display:none}.p-datatable-reorderablerow-handle,[pReorderableColumn]{cursor:move}.p-datatable .p-datatable-loading-overlay{position:absolute;display:flex;align-items:center;justify-content:center;z-index:2}.p-column-filter-row{display:flex;align-items:center;width:100%}.p-column-filter-menu{display:inline-flex}.p-column-filter-row p-columnfilterformelement{flex:1 1 auto;width:1%}.p-column-filter-menu-button,.p-column-filter-clear-button{display:inline-flex;justify-content:center;align-items:center;cursor:pointer;text-decoration:none;overflow:hidden;position:relative}.p-column-filter-overlay{position:absolute;top:0;left:0}.p-column-filter-row-items{margin:0;padding:0;list-style:none}.p-column-filter-row-item{cursor:pointer}.p-column-filter-add-button,.p-column-filter-remove-button{justify-content:center}.p-column-filter-add-button .p-button-label,.p-column-filter-remove-button .p-button-label{flex-grow:0}.p-column-filter-buttonbar{display:flex;align-items:center;justify-content:space-between}.p-column-filter-buttonbar .p-button{width:auto}.p-datatable .p-datatable-tbody>tr>td>.p-column-title{display:none}.p-datatable .p-scroller-loading{transform:none!important;min-height:0;position:sticky;top:0;left:0}\n"],encapsulation:2}),i})(),Bre=(()=>{class i{constructor(e,n,r,s){this.dt=e,this.tableService=n,this.cd=r,this.el=s,this.subscription=this.dt.tableService.valueSource$.subscribe(()=>{this.dt.virtualScroll&&this.cd.detectChanges()})}get value(){return this._value}set value(e){this._value=e,this.frozenRows&&this.updateFrozenRowStickyPosition(),this.dt.scrollable&&"subheader"===this.dt.rowGroupMode&&this.updateFrozenRowGroupHeaderStickyPosition()}ngAfterViewInit(){this.frozenRows&&this.updateFrozenRowStickyPosition(),this.dt.scrollable&&"subheader"===this.dt.rowGroupMode&&this.updateFrozenRowGroupHeaderStickyPosition(),this.dt.virtualScroll&&this.getScrollerOption("vertical")&&this.updateScrollerPosition()}ngOnChanges(e){if(e.scrollerOptions){const{previousValue:n,currentValue:r}=e.scrollerOptions;this.dt.virtualScroll&&this.getScrollerOption("vertical")&&this.getScrollerOption("itemSize",n)!==this.getScrollerOption("itemSize",r)&&this.updateScrollerPosition()}}shouldRenderRowGroupHeader(e,n,r){let s=Ji.resolveFieldData(n,this.dt.groupRowsBy),o=e[r-1];return!o||s!==Ji.resolveFieldData(o,this.dt.groupRowsBy)}shouldRenderRowGroupFooter(e,n,r){let s=Ji.resolveFieldData(n,this.dt.groupRowsBy),o=e[r+1];return!o||s!==Ji.resolveFieldData(o,this.dt.groupRowsBy)}shouldRenderRowspan(e,n,r){let s=Ji.resolveFieldData(n,this.dt.groupRowsBy),o=e[r-1];return!o||s!==Ji.resolveFieldData(o,this.dt.groupRowsBy)}calculateRowGroupSize(e,n,r){let s=Ji.resolveFieldData(n,this.dt.groupRowsBy),o=s,l=0;for(;s===o;){l++;let u=e[++r];if(!u)break;o=Ji.resolveFieldData(u,this.dt.groupRowsBy)}return 1===l?null:l}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}updateFrozenRowStickyPosition(){this.el.nativeElement.style.top=Ft.getOuterHeight(this.el.nativeElement.previousElementSibling)+"px"}updateFrozenRowGroupHeaderStickyPosition(){if(this.el.nativeElement.previousElementSibling){let e=Ft.getOuterHeight(this.el.nativeElement.previousElementSibling);this.dt.rowGroupHeaderStyleObject.top=e+"px"}}updateScrollerPosition(){const e=Ft.getOuterHeight(this.el.nativeElement.previousElementSibling);this.el.nativeElement.style.top=(this.el.nativeElement.style.top||0)+e+"px"}getScrollerOption(e,n){return this.dt.virtualScroll&&(n=n||this.scrollerOptions)?n[e]:null}getRowIndex(e){const n=this.dt.paginator?this.dt.first+e:e,r=this.getScrollerOption("getItemOptions");return r?r(n).index:n}}return i.\u0275fac=function(e){return new(e||i)(Xt(l_),Xt(DA),Xt(xo),Xt(Yn))},i.\u0275cmp=_r({type:i,selectors:[["","pTableBody",""]],hostAttrs:[1,"p-element"],inputs:{columns:["pTableBody","columns"],template:["pTableBodyTemplate","template"],value:"value",frozen:"frozen",frozenRows:"frozenRows",scrollerOptions:"scrollerOptions"},features:[da],attrs:Die,decls:6,vars:6,consts:[[4,"ngIf"],["ngFor","",3,"ngForOf","ngForTrackBy"],["role","row",4,"ngIf"],["role","row"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,n){1&e&&($e(0,Uie,2,2,"ng-container",0),$e(1,Wie,2,2,"ng-container",0),$e(2,ere,2,2,"ng-container",0),$e(3,sre,2,2,"ng-container",0),$e(4,are,2,5,"ng-container",0),$e(5,cre,2,5,"ng-container",0)),2&e&&(de("ngIf",!n.dt.expandedRowTemplate&&!n.dt.virtualScroll),Ie(1),de("ngIf",!n.dt.expandedRowTemplate&&n.dt.virtualScroll),Ie(1),de("ngIf",n.dt.expandedRowTemplate&&!(n.frozen&&n.dt.frozenExpandedRowTemplate)),Ie(1),de("ngIf",n.dt.frozenExpandedRowTemplate&&n.frozen),Ie(1),de("ngIf",n.dt.loading),Ie(1),de("ngIf",n.dt.isEmpty()&&!n.dt.loading))},dependencies:[jc,ho,el],encapsulation:2}),i})(),H2=(()=>{class i{constructor(e){this.dt=e,this.isEnabled()&&(this.subscription=this.dt.tableService.sortSource$.subscribe(n=>{this.updateSortState()}))}ngOnInit(){this.isEnabled()&&this.updateSortState()}updateSortState(){this.sorted=this.dt.isSorted(this.field),this.sortOrder=this.sorted?1===this.dt.sortOrder?"ascending":"descending":"none"}onClick(e){this.isEnabled()&&!this.isFilterElement(e.target)&&(this.updateSortState(),this.dt.sort({originalEvent:e,field:this.field}),Ft.clearSelection())}onEnterKey(e){this.onClick(e)}isEnabled(){return!0!==this.pSortableColumnDisabled}isFilterElement(e){return Ft.hasClass(e,"pi-filter-icon")||Ft.hasClass(e,"p-column-filter-menu-button")}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(Xt(l_))},i.\u0275dir=qr({type:i,selectors:[["","pSortableColumn",""]],hostAttrs:[1,"p-element"],hostVars:7,hostBindings:function(e,n){1&e&&mn("click",function(s){return n.onClick(s)})("keydown.enter",function(s){return n.onEnterKey(s)}),2&e&&(vr("tabindex",n.isEnabled()?"0":null)("role","columnheader")("aria-sort",n.sortOrder),Mp("p-sortable-column",n.isEnabled())("p-highlight",n.sorted))},inputs:{field:["pSortableColumn","field"],pSortableColumnDisabled:"pSortableColumnDisabled"}}),i})(),G2=(()=>{class i{constructor(e,n){this.dt=e,this.cd=n,this.subscription=this.dt.tableService.sortSource$.subscribe(r=>{this.updateSortState()})}ngOnInit(){this.updateSortState()}onClick(e){e.preventDefault()}updateSortState(){if("single"===this.dt.sortMode)this.sortOrder=this.dt.isSorted(this.field)?this.dt.sortOrder:0;else if("multiple"===this.dt.sortMode){let e=this.dt.getSortMeta(this.field);this.sortOrder=e?e.order:0}this.cd.markForCheck()}getMultiSortMetaIndex(){let e=this.dt._multiSortMeta,n=-1;if(e&&"multiple"===this.dt.sortMode&&(this.dt.showInitialSortBadge||e.length>1))for(let r=0;r<e.length;r++){let s=e[r];if(s.field===this.field||s.field===this.field){n=r;break}}return n}getBadgeValue(){let e=this.getMultiSortMetaIndex();return this.dt.groupRowsBy&&e>-1?e:e+1}isMultiSorted(){return"multiple"===this.dt.sortMode&&this.getMultiSortMetaIndex()>-1}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(Xt(l_),Xt(xo))},i.\u0275cmp=_r({type:i,selectors:[["p-sortIcon"]],hostAttrs:[1,"p-element"],inputs:{field:"field"},decls:2,vars:6,consts:[[1,"p-sortable-column-icon","pi","pi-fw",3,"ngClass"],["class","p-sortable-column-badge",4,"ngIf"],[1,"p-sortable-column-badge"]],template:function(e,n){1&e&&(Bn(0,"i",0),$e(1,ure,2,1,"span",1)),2&e&&(de("ngClass",Su(2,hre,1===n.sortOrder,-1===n.sortOrder,0===n.sortOrder)),Ie(1),de("ngIf",n.isMultiSorted()))},dependencies:[no,ho],encapsulation:2,changeDetection:0}),i})(),W2=(()=>{class i{constructor(e,n,r){this.dt=e,this.tableService=n,this.cd=r,this.subscription=this.dt.tableService.selectionSource$.subscribe(()=>{this.checked=this.dt.isSelected(this.value),this.cd.markForCheck()})}ngOnInit(){this.checked=this.dt.isSelected(this.value)}onClick(e){this.disabled||this.dt.toggleRowWithCheckbox({originalEvent:e,rowIndex:this.index},this.value),Ft.clearSelection()}onFocus(){this.focused=!0}onBlur(){this.focused=!1}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(Xt(l_),Xt(DA),Xt(xo))},i.\u0275cmp=_r({type:i,selectors:[["p-tableCheckbox"]],hostAttrs:[1,"p-element"],inputs:{disabled:"disabled",value:"value",index:"index",inputId:"inputId",name:"name",required:"required",ariaLabel:"ariaLabel"},decls:6,vars:19,consts:[[1,"p-checkbox","p-component",3,"ngClass","click"],[1,"p-hidden-accessible"],["type","checkbox",3,"checked","disabled","focus","blur"],["role","checkbox",3,"ngClass"],["box",""],[1,"p-checkbox-icon",3,"ngClass"]],template:function(e,n){1&e&&(Ke(0,"div",0),mn("click",function(s){return n.onClick(s)}),Ke(1,"div",1)(2,"input",2),mn("focus",function(){return n.onFocus()})("blur",function(){return n.onBlur()}),Je()(),Ke(3,"div",3,4),Bn(5,"span",5),Je()()),2&e&&(de("ngClass",ss(10,f4,n.focused,n.disabled)),Ie(2),de("checked",n.checked)("disabled",n.disabled),vr("id",n.inputId)("name",n.name)("required",n.required)("aria-label",n.ariaLabel),Ie(1),de("ngClass",Su(13,pre,n.checked,n.focused,n.disabled)),vr("aria-checked",n.checked),Ie(2),de("ngClass",_i(17,p4,n.checked)))},dependencies:[no],encapsulation:2,changeDetection:0}),i})(),j2=(()=>{class i{constructor(e,n,r){this.dt=e,this.tableService=n,this.cd=r,this.valueChangeSubscription=this.dt.tableService.valueSource$.subscribe(()=>{this.checked=this.updateCheckedState()}),this.selectionChangeSubscription=this.dt.tableService.selectionSource$.subscribe(()=>{this.checked=this.updateCheckedState()})}ngOnInit(){this.checked=this.updateCheckedState()}onClick(e){this.disabled||this.dt.value&&this.dt.value.length>0&&this.dt.toggleRowsWithCheckbox(e,!this.checked),Ft.clearSelection()}onFocus(){this.focused=!0}onBlur(){this.focused=!1}isDisabled(){return this.disabled||!this.dt.value||!this.dt.value.length}ngOnDestroy(){this.selectionChangeSubscription&&this.selectionChangeSubscription.unsubscribe(),this.valueChangeSubscription&&this.valueChangeSubscription.unsubscribe()}updateCheckedState(){if(this.cd.markForCheck(),null!==this.dt._selectAll)return this.dt._selectAll;{const e=this.dt.selectionPageOnly?this.dt.dataToRender(this.dt.processedData):this.dt.processedData,n=this.dt.frozenValue?[...this.dt.frozenValue,...e]:e,r=this.dt.rowSelectable?n.filter((s,o)=>this.dt.rowSelectable({data:s,index:o})):n;return Ji.isNotEmpty(r)&&Ji.isNotEmpty(this.dt.selection)&&r.every(s=>this.dt.selection.some(o=>this.dt.equals(s,o)))}}}return i.\u0275fac=function(e){return new(e||i)(Xt(l_),Xt(DA),Xt(xo))},i.\u0275cmp=_r({type:i,selectors:[["p-tableHeaderCheckbox"]],hostAttrs:[1,"p-element"],inputs:{disabled:"disabled",inputId:"inputId",name:"name",ariaLabel:"ariaLabel"},decls:7,vars:18,consts:[[1,"p-checkbox","p-component",3,"ngClass","click"],[1,"p-hidden-accessible"],["type","checkbox",3,"checked","disabled","focus","blur"],["cb",""],["role","checkbox",3,"ngClass"],["box",""],[1,"p-checkbox-icon",3,"ngClass"]],template:function(e,n){1&e&&(Ke(0,"div",0),mn("click",function(s){return n.onClick(s)}),Ke(1,"div",1)(2,"input",2,3),mn("focus",function(){return n.onFocus()})("blur",function(){return n.onBlur()}),Je()(),Ke(4,"div",4,5),Bn(6,"span",6),Je()()),2&e&&(de("ngClass",ss(9,f4,n.focused,n.isDisabled())),Ie(2),de("checked",n.checked)("disabled",n.isDisabled()),vr("id",n.inputId)("name",n.name)("aria-label",n.ariaLabel),Ie(2),de("ngClass",Su(12,gre,n.checked,n.focused,n.isDisabled())),vr("aria-checked",n.checked),Ie(2),de("ngClass",_i(16,p4,n.checked)))},dependencies:[no],encapsulation:2,changeDetection:0}),i})(),zre=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({imports:[Os,r4,V2,G1,H1,av,Yte,c4,j1,nne,ov,xa,ov]}),i})(),Vre=(()=>{class i{constructor(e){this.el=e}onkeydown(e){if(!0!==this.pFocusTrapDisabled){e.preventDefault();let n=Ft.getFocusableElements(this.el.nativeElement);if(n&&n.length>0)if(n[0].ownerDocument.activeElement){let r=n.indexOf(n[0].ownerDocument.activeElement);e.shiftKey?-1==r||0===r?n[n.length-1].focus():n[r-1].focus():-1==r||r===n.length-1?n[0].focus():n[r+1].focus()}else n[0].focus()}}}return i.\u0275fac=function(e){return new(e||i)(Xt(Yn))},i.\u0275dir=qr({type:i,selectors:[["","pFocusTrap",""]],hostAttrs:[1,"p-element"],hostBindings:function(e,n){1&e&&mn("keydown.tab",function(s){return n.onkeydown(s)})("keydown.shift.tab",function(s){return n.onkeydown(s)})},inputs:{pFocusTrapDisabled:"pFocusTrapDisabled"}}),i})(),Ure=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({imports:[Os]}),i})();const Hre=["titlebar"],Gre=["content"],Wre=["footer"];function jre(i,t){if(1&i){const e=vi();Ke(0,"div",11),mn("mousedown",function(r){return Pt(e),Rt(be(3).initResize(r))}),Je()}}function $re(i,t){if(1&i&&(Ke(0,"span",18),li(1),Je()),2&i){const e=be(4);vr("id",e.id+"-label"),Ie(1),ts(e.header)}}function qre(i,t){1&i&&(Ke(0,"span",18),su(1,1),Je()),2&i&&vr("id",be(4).id+"-label")}function Xre(i,t){1&i&&Ni(0)}const Yre=function(){return{"p-dialog-header-icon p-dialog-header-maximize p-link":!0}};function Kre(i,t){if(1&i){const e=vi();Ke(0,"button",19),mn("click",function(){return Pt(e),Rt(be(4).maximize())})("keydown.enter",function(){return Pt(e),Rt(be(4).maximize())}),Bn(1,"span",20),Je()}if(2&i){const e=be(4);de("ngClass",uo(2,Yre)),Ie(1),de("ngClass",e.maximized?e.minimizeIcon:e.maximizeIcon)}}const Zre=function(){return{"p-dialog-header-icon p-dialog-header-close p-link":!0}};function Qre(i,t){if(1&i){const e=vi();Ke(0,"button",21),mn("click",function(r){return Pt(e),Rt(be(4).close(r))})("keydown.enter",function(r){return Pt(e),Rt(be(4).close(r))}),Bn(1,"span",22),Je()}if(2&i){const e=be(4);de("ngClass",uo(4,Zre)),vr("aria-label",e.closeAriaLabel)("tabindex",e.closeTabindex),Ie(1),de("ngClass",e.closeIcon)}}function Jre(i,t){if(1&i){const e=vi();Ke(0,"div",12,13),mn("mousedown",function(r){return Pt(e),Rt(be(3).initDrag(r))}),$e(2,$re,2,2,"span",14),$e(3,qre,2,1,"span",14),$e(4,Xre,1,0,"ng-container",9),Ke(5,"div",15),$e(6,Kre,2,3,"button",16),$e(7,Qre,2,5,"button",17),Je()()}if(2&i){const e=be(3);Ie(2),de("ngIf",!e.headerFacet&&!e.headerTemplate),Ie(1),de("ngIf",e.headerFacet),Ie(1),de("ngTemplateOutlet",e.headerTemplate),Ie(2),de("ngIf",e.maximizable),Ie(1),de("ngIf",e.closable)}}function ese(i,t){1&i&&Ni(0)}function tse(i,t){1&i&&Ni(0)}function nse(i,t){if(1&i&&(Ke(0,"div",23,24),su(2,2),$e(3,tse,1,0,"ng-container",9),Je()),2&i){const e=be(3);Ie(3),de("ngTemplateOutlet",e.footerTemplate)}}const ise=function(i,t,e,n){return{"p-dialog p-component":!0,"p-dialog-rtl":i,"p-dialog-draggable":t,"p-dialog-resizable":e,"p-dialog-maximized":n}},rse=function(i,t){return{transform:i,transition:t}},sse=function(i){return{value:"visible",params:i}};function ose(i,t){if(1&i){const e=vi();Ke(0,"div",3,4),mn("@animation.start",function(r){return Pt(e),Rt(be(2).onAnimationStart(r))})("@animation.done",function(r){return Pt(e),Rt(be(2).onAnimationEnd(r))}),$e(2,jre,1,0,"div",5),$e(3,Jre,8,5,"div",6),Ke(4,"div",7,8),su(6),$e(7,ese,1,0,"ng-container",9),Je(),$e(8,nse,4,1,"div",10),Je()}if(2&i){const e=be(2);kr(e.styleClass),de("ngClass",sf(15,ise,e.rtl,e.draggable,e.resizable,e.maximized))("ngStyle",e.style)("pFocusTrapDisabled",!1===e.focusTrap)("@animation",_i(23,sse,ss(20,rse,e.transformOptions,e.transitionOptions))),vr("aria-labelledby",e.id+"-label"),Ie(2),de("ngIf",e.resizable),Ie(1),de("ngIf",e.showHeader),Ie(1),kr(e.contentStyleClass),de("ngClass","p-dialog-content")("ngStyle",e.contentStyle),Ie(3),de("ngTemplateOutlet",e.contentTemplate),Ie(1),de("ngIf",e.footerFacet||e.footerTemplate)}}const ase=function(i,t,e,n,r,s,o,l,u,p){return{"p-dialog-mask":!0,"p-component-overlay p-component-overlay-enter":i,"p-dialog-mask-scrollblocker":t,"p-dialog-left":e,"p-dialog-right":n,"p-dialog-top":r,"p-dialog-top-left":s,"p-dialog-top-right":o,"p-dialog-bottom":l,"p-dialog-bottom-left":u,"p-dialog-bottom-right":p}};function lse(i,t){if(1&i&&(Ke(0,"div",1),$e(1,ose,9,25,"div",2),Je()),2&i){const e=be();kr(e.maskStyleClass),de("ngClass",hM(4,ase,[e.modal,e.modal||e.blockScroll,"left"===e.position,"right"===e.position,"top"===e.position,"topleft"===e.position||"top-left"===e.position,"topright"===e.position||"top-right"===e.position,"bottom"===e.position,"bottomleft"===e.position||"bottom-left"===e.position,"bottomright"===e.position||"bottom-right"===e.position])),Ie(1),de("ngIf",e.visible)}}const cse=["*",[["p-header"]],[["p-footer"]]],use=["*","p-header","p-footer"],hse=dC([tl({transform:"{{transform}}",opacity:0}),wc("{{transition}}")]),dse=dC([wc("{{transition}}",tl({transform:"{{transform}}",opacity:0}))]);let Y1=(()=>{class i{constructor(e,n,r,s,o){this.el=e,this.renderer=n,this.zone=r,this.cd=s,this.config=o,this.draggable=!0,this.resizable=!0,this.closeOnEscape=!0,this.closable=!0,this.showHeader=!0,this.blockScroll=!1,this.autoZIndex=!0,this.baseZIndex=0,this.minX=0,this.minY=0,this.focusOnShow=!0,this.keepInViewport=!0,this.focusTrap=!0,this.transitionOptions="150ms cubic-bezier(0, 0, 0.2, 1)",this.closeIcon="pi pi-times",this.closeTabindex="-1",this.minimizeIcon="pi pi-window-minimize",this.maximizeIcon="pi pi-window-maximize",this.onShow=new Fn,this.onHide=new Fn,this.visibleChange=new Fn,this.onResizeInit=new Fn,this.onResizeEnd=new Fn,this.onDragEnd=new Fn,this.onMaximize=new Fn,this.id=sC(),this._style={},this._position="center",this.transformOptions="scale(0.7)"}get positionLeft(){return 0}set positionLeft(e){console.log("positionLeft property is deprecated.")}get positionTop(){return 0}set positionTop(e){console.log("positionTop property is deprecated.")}get responsive(){return!1}set responsive(e){console.log("Responsive property is deprecated.")}get breakpoint(){return 649}set breakpoint(e){console.log("Breakpoint property is not utilized and deprecated, use breakpoints or CSS media queries instead.")}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"header":this.headerTemplate=e.template;break;case"content":default:this.contentTemplate=e.template;break;case"footer":this.footerTemplate=e.template}})}ngOnInit(){this.breakpoints&&this.createStyle()}get visible(){return this._visible}set visible(e){this._visible=e,this._visible&&!this.maskVisible&&(this.maskVisible=!0)}get style(){return this._style}set style(e){e&&(this._style={...e},this.originalStyle=e)}get position(){return this._position}set position(e){switch(this._position=e,e){case"topleft":case"bottomleft":case"left":this.transformOptions="translate3d(-100%, 0px, 0px)";break;case"topright":case"bottomright":case"right":this.transformOptions="translate3d(100%, 0px, 0px)";break;case"bottom":this.transformOptions="translate3d(0px, 100%, 0px)";break;case"top":this.transformOptions="translate3d(0px, -100%, 0px)";break;default:this.transformOptions="scale(0.7)"}}focus(){let e=Ft.findSingle(this.container,"[autofocus]");e&&this.zone.runOutsideAngular(()=>{setTimeout(()=>e.focus(),5)})}close(e){this.visibleChange.emit(!1),e.preventDefault()}enableModality(){this.closable&&this.dismissableMask&&(this.maskClickListener=this.renderer.listen(this.wrapper,"mousedown",e=>{this.wrapper&&this.wrapper.isSameNode(e.target)&&this.close(e)})),this.modal&&Ft.addClass(document.body,"p-overflow-hidden")}disableModality(){this.wrapper&&(this.dismissableMask&&this.unbindMaskClickListener(),this.modal&&Ft.removeClass(document.body,"p-overflow-hidden"),this.cd.destroyed||this.cd.detectChanges())}maximize(){this.maximized=!this.maximized,!this.modal&&!this.blockScroll&&(this.maximized?Ft.addClass(document.body,"p-overflow-hidden"):Ft.removeClass(document.body,"p-overflow-hidden")),this.onMaximize.emit({maximized:this.maximized})}unbindMaskClickListener(){this.maskClickListener&&(this.maskClickListener(),this.maskClickListener=null)}moveOnTop(){this.autoZIndex&&(Ll.set("modal",this.container,this.baseZIndex+this.config.zIndex.modal),this.wrapper.style.zIndex=String(parseInt(this.container.style.zIndex,10)-1))}createStyle(){if(!this.styleElement){this.styleElement=document.createElement("style"),this.styleElement.type="text/css",document.head.appendChild(this.styleElement);let e="";for(let n in this.breakpoints)e+=`\n                    @media screen and (max-width: ${n}) {\n                        .p-dialog[${this.id}] {\n                            width: ${this.breakpoints[n]} !important;\n                        }\n                    }\n                `;this.styleElement.innerHTML=e}}initDrag(e){Ft.hasClass(e.target,"p-dialog-header-icon")||Ft.hasClass(e.target.parentElement,"p-dialog-header-icon")||this.draggable&&(this.dragging=!0,this.lastPageX=e.pageX,this.lastPageY=e.pageY,this.container.style.margin="0",Ft.addClass(document.body,"p-unselectable-text"))}onKeydown(e){if(this.focusTrap&&9===e.which){e.preventDefault();let n=Ft.getFocusableElements(this.container);if(n&&n.length>0)if(n[0].ownerDocument.activeElement){let r=n.indexOf(n[0].ownerDocument.activeElement);e.shiftKey?-1==r||0===r?n[n.length-1].focus():n[r-1].focus():-1==r||r===n.length-1?n[0].focus():n[r+1].focus()}else n[0].focus()}}onDrag(e){if(this.dragging){let n=Ft.getOuterWidth(this.container),r=Ft.getOuterHeight(this.container),s=e.pageX-this.lastPageX,o=e.pageY-this.lastPageY,l=this.container.getBoundingClientRect(),u=l.left+s,p=l.top+o,v=Ft.getViewport();this.container.style.position="fixed",this.keepInViewport?(u>=this.minX&&u+n<v.width&&(this._style.left=u+"px",this.lastPageX=e.pageX,this.container.style.left=u+"px"),p>=this.minY&&p+r<v.height&&(this._style.top=p+"px",this.lastPageY=e.pageY,this.container.style.top=p+"px")):(this.lastPageX=e.pageX,this.container.style.left=u+"px",this.lastPageY=e.pageY,this.container.style.top=p+"px")}}endDrag(e){this.dragging&&(this.dragging=!1,Ft.removeClass(document.body,"p-unselectable-text"),this.cd.detectChanges(),this.onDragEnd.emit(e))}resetPosition(){this.container.style.position="",this.container.style.left="",this.container.style.top="",this.container.style.margin=""}center(){this.resetPosition()}initResize(e){this.resizable&&(this.resizing=!0,this.lastPageX=e.pageX,this.lastPageY=e.pageY,Ft.addClass(document.body,"p-unselectable-text"),this.onResizeInit.emit(e))}onResize(e){if(this.resizing){let n=e.pageX-this.lastPageX,r=e.pageY-this.lastPageY,s=Ft.getOuterWidth(this.container),o=Ft.getOuterHeight(this.container),l=Ft.getOuterHeight(this.contentViewChild.nativeElement),u=s+n,p=o+r,v=this.container.style.minWidth,w=this.container.style.minHeight,I=this.container.getBoundingClientRect(),T=Ft.getViewport();(!parseInt(this.container.style.top)||!parseInt(this.container.style.left))&&(u+=n,p+=r),(!v||u>parseInt(v))&&I.left+u<T.width&&(this._style.width=u+"px",this.container.style.width=this._style.width),(!w||p>parseInt(w))&&I.top+p<T.height&&(this.contentViewChild.nativeElement.style.height=l+p-o+"px",this._style.height&&(this._style.height=p+"px",this.container.style.height=this._style.height)),this.lastPageX=e.pageX,this.lastPageY=e.pageY}}resizeEnd(e){this.resizing&&(this.resizing=!1,Ft.removeClass(document.body,"p-unselectable-text"),this.onResizeEnd.emit(e))}bindGlobalListeners(){this.draggable&&(this.bindDocumentDragListener(),this.bindDocumentDragEndListener()),this.resizable&&this.bindDocumentResizeListeners(),this.closeOnEscape&&this.closable&&this.bindDocumentEscapeListener()}unbindGlobalListeners(){this.unbindDocumentDragListener(),this.unbindDocumentDragEndListener(),this.unbindDocumentResizeListeners(),this.unbindDocumentEscapeListener()}bindDocumentDragListener(){this.zone.runOutsideAngular(()=>{this.documentDragListener=this.onDrag.bind(this),window.document.addEventListener("mousemove",this.documentDragListener)})}unbindDocumentDragListener(){this.documentDragListener&&(window.document.removeEventListener("mousemove",this.documentDragListener),this.documentDragListener=null)}bindDocumentDragEndListener(){this.zone.runOutsideAngular(()=>{this.documentDragEndListener=this.endDrag.bind(this),window.document.addEventListener("mouseup",this.documentDragEndListener)})}unbindDocumentDragEndListener(){this.documentDragEndListener&&(window.document.removeEventListener("mouseup",this.documentDragEndListener),this.documentDragEndListener=null)}bindDocumentResizeListeners(){this.zone.runOutsideAngular(()=>{this.documentResizeListener=this.onResize.bind(this),this.documentResizeEndListener=this.resizeEnd.bind(this),window.document.addEventListener("mousemove",this.documentResizeListener),window.document.addEventListener("mouseup",this.documentResizeEndListener)})}unbindDocumentResizeListeners(){this.documentResizeListener&&this.documentResizeEndListener&&(window.document.removeEventListener("mousemove",this.documentResizeListener),window.document.removeEventListener("mouseup",this.documentResizeEndListener),this.documentResizeListener=null,this.documentResizeEndListener=null)}bindDocumentEscapeListener(){this.documentEscapeListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","keydown",n=>{27==n.which&&this.close(n)})}unbindDocumentEscapeListener(){this.documentEscapeListener&&(this.documentEscapeListener(),this.documentEscapeListener=null)}appendContainer(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.wrapper):Ft.appendChild(this.wrapper,this.appendTo))}restoreAppend(){this.container&&this.appendTo&&this.el.nativeElement.appendChild(this.wrapper)}onAnimationStart(e){switch(e.toState){case"visible":this.container=e.element,this.wrapper=this.container.parentElement,this.appendContainer(),this.moveOnTop(),this.bindGlobalListeners(),this.container.setAttribute(this.id,""),this.modal&&this.enableModality(),!this.modal&&this.blockScroll&&Ft.addClass(document.body,"p-overflow-hidden"),this.focusOnShow&&this.focus();break;case"void":this.wrapper&&this.modal&&Ft.addClass(this.wrapper,"p-component-overlay-leave")}}onAnimationEnd(e){switch(e.toState){case"void":this.onContainerDestroy(),this.onHide.emit({});break;case"visible":this.onShow.emit({})}}onContainerDestroy(){this.unbindGlobalListeners(),this.dragging=!1,this.maskVisible=!1,this.maximized&&(Ft.removeClass(document.body,"p-overflow-hidden"),this.maximized=!1),this.modal&&this.disableModality(),this.blockScroll&&Ft.removeClass(document.body,"p-overflow-hidden"),this.container&&this.autoZIndex&&Ll.clear(this.container),this.container=null,this.wrapper=null,this._style=this.originalStyle?{...this.originalStyle}:{}}destroyStyle(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}ngOnDestroy(){this.container&&(this.restoreAppend(),this.onContainerDestroy()),this.destroyStyle()}}return i.\u0275fac=function(e){return new(e||i)(Xt(Yn),Xt(d),Xt(Vo),Xt(xo),Xt(Dp))},i.\u0275cmp=_r({type:i,selectors:[["p-dialog"]],contentQueries:function(e,n,r){if(1&e&&(Ba(r,XD,5),Ba(r,C1,5),Ba(r,za,4)),2&e){let s;Wi(s=ji())&&(n.headerFacet=s.first),Wi(s=ji())&&(n.footerFacet=s.first),Wi(s=ji())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(Tr(Hre,5),Tr(Gre,5),Tr(Wre,5)),2&e){let r;Wi(r=ji())&&(n.headerViewChild=r.first),Wi(r=ji())&&(n.contentViewChild=r.first),Wi(r=ji())&&(n.footerViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{header:"header",draggable:"draggable",resizable:"resizable",positionLeft:"positionLeft",positionTop:"positionTop",contentStyle:"contentStyle",contentStyleClass:"contentStyleClass",modal:"modal",closeOnEscape:"closeOnEscape",dismissableMask:"dismissableMask",rtl:"rtl",closable:"closable",responsive:"responsive",appendTo:"appendTo",breakpoints:"breakpoints",styleClass:"styleClass",maskStyleClass:"maskStyleClass",showHeader:"showHeader",breakpoint:"breakpoint",blockScroll:"blockScroll",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",minX:"minX",minY:"minY",focusOnShow:"focusOnShow",maximizable:"maximizable",keepInViewport:"keepInViewport",focusTrap:"focusTrap",transitionOptions:"transitionOptions",closeIcon:"closeIcon",closeAriaLabel:"closeAriaLabel",closeTabindex:"closeTabindex",minimizeIcon:"minimizeIcon",maximizeIcon:"maximizeIcon",visible:"visible",style:"style",position:"position"},outputs:{onShow:"onShow",onHide:"onHide",visibleChange:"visibleChange",onResizeInit:"onResizeInit",onResizeEnd:"onResizeEnd",onDragEnd:"onDragEnd",onMaximize:"onMaximize"},ngContentSelectors:use,decls:1,vars:1,consts:[[3,"class","ngClass",4,"ngIf"],[3,"ngClass"],["pFocusTrap","","role","dialog",3,"ngClass","ngStyle","class","pFocusTrapDisabled",4,"ngIf"],["pFocusTrap","","role","dialog",3,"ngClass","ngStyle","pFocusTrapDisabled"],["container",""],["class","p-resizable-handle","style","z-index: 90;",3,"mousedown",4,"ngIf"],["class","p-dialog-header",3,"mousedown",4,"ngIf"],[3,"ngClass","ngStyle"],["content",""],[4,"ngTemplateOutlet"],["class","p-dialog-footer",4,"ngIf"],[1,"p-resizable-handle",2,"z-index","90",3,"mousedown"],[1,"p-dialog-header",3,"mousedown"],["titlebar",""],["class","p-dialog-title",4,"ngIf"],[1,"p-dialog-header-icons"],["type","button","tabindex","-1","pRipple","",3,"ngClass","click","keydown.enter",4,"ngIf"],["type","button","pRipple","",3,"ngClass","click","keydown.enter",4,"ngIf"],[1,"p-dialog-title"],["type","button","tabindex","-1","pRipple","",3,"ngClass","click","keydown.enter"],[1,"p-dialog-header-maximize-icon",3,"ngClass"],["type","button","pRipple","",3,"ngClass","click","keydown.enter"],[1,"p-dialog-header-close-icon",3,"ngClass"],[1,"p-dialog-footer"],["footer",""]],template:function(e,n){1&e&&(Bf(cse),$e(0,lse,2,15,"div",0)),2&e&&de("ngIf",n.maskVisible)},dependencies:[no,ho,el,Po,Vre,Du],styles:[".p-dialog-mask{position:fixed;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;pointer-events:none}.p-dialog-mask.p-component-overlay{pointer-events:auto}.p-dialog{display:flex;flex-direction:column;pointer-events:auto;max-height:90%;transform:scale(1);position:relative}.p-dialog-content{overflow-y:auto;flex-grow:1}.p-dialog-header{display:flex;align-items:center;justify-content:space-between;flex-shrink:0}.p-dialog-draggable .p-dialog-header{cursor:move}.p-dialog-footer{flex-shrink:0}.p-dialog .p-dialog-header-icons{display:flex;align-items:center}.p-dialog .p-dialog-header-icon{display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-fluid .p-dialog-footer .p-button{width:auto}.p-dialog-top .p-dialog,.p-dialog-bottom .p-dialog,.p-dialog-left .p-dialog,.p-dialog-right .p-dialog,.p-dialog-top-left .p-dialog,.p-dialog-top-right .p-dialog,.p-dialog-bottom-left .p-dialog,.p-dialog-bottom-right .p-dialog{margin:.75rem;transform:translate(0)}.p-dialog-maximized{transition:none;transform:none;width:100vw!important;height:100vh!important;top:0px!important;left:0px!important;max-height:100%;height:100%}.p-dialog-maximized .p-dialog-content{flex-grow:1}.p-dialog-left{justify-content:flex-start}.p-dialog-right{justify-content:flex-end}.p-dialog-top{align-items:flex-start}.p-dialog-top-left{justify-content:flex-start;align-items:flex-start}.p-dialog-top-right{justify-content:flex-end;align-items:flex-start}.p-dialog-bottom{align-items:flex-end}.p-dialog-bottom-left{justify-content:flex-start;align-items:flex-end}.p-dialog-bottom-right{justify-content:flex-end;align-items:flex-end}.p-dialog .p-resizable-handle{position:absolute;font-size:.1px;display:block;cursor:se-resize;width:12px;height:12px;right:1px;bottom:1px}.p-confirm-dialog .p-dialog-content{display:flex;align-items:center}\n"],encapsulation:2,data:{animation:[ly("animation",[Mu("void => visible",[$V(hse)]),Mu("visible => void",[$V(dse)])])]},changeDetection:0}),i})(),fse=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({imports:[Os,Ure,Xc,xa]}),i})();const g4=["container"],pse=function(i,t,e,n){return{"pi-info-circle":i,"pi-exclamation-triangle":t,"pi-times-circle":e,"pi-check":n}};function gse(i,t){if(1&i&&(zr(0),Bn(1,"span",6),Ke(2,"div",7)(3,"div",8),li(4),Je(),Ke(5,"div",9),li(6),Je()(),Vr()),2&i){const e=be();Ie(1),kr("p-toast-message-icon pi"+(e.message.icon?" "+e.message.icon:"")),de("ngClass",sf(5,pse,"info"==e.message.severity,"warn"==e.message.severity,"error"==e.message.severity,"success"==e.message.severity)),Ie(3),ts(e.message.summary),Ie(2),ts(e.message.detail)}}function mse(i,t){1&i&&Ni(0)}function vse(i,t){if(1&i){const e=vi();Ke(0,"button",10),mn("click",function(r){return Pt(e),Rt(be().onCloseIconClick(r))})("keydown.enter",function(r){return Pt(e),Rt(be().onCloseIconClick(r))}),Bn(1,"span",11),Je()}}const yse=function(i){return[i,"p-toast-message"]},_se=function(i,t,e,n){return{showTransformParams:i,hideTransformParams:t,showTransitionParams:e,hideTransitionParams:n}},bse=function(i){return{value:"visible",params:i}},Cse=function(i){return{$implicit:i}};function wse(i,t){if(1&i){const e=vi();Ke(0,"p-toastItem",3),mn("onClose",function(r){return Pt(e),Rt(be().onMessageClose(r))})("@toastAnimation.start",function(r){return Pt(e),Rt(be().onAnimationStart(r))})("@toastAnimation.done",function(r){return Pt(e),Rt(be().onAnimationEnd(r))}),Je()}if(2&i){const e=t.$implicit,n=t.index,r=be();de("message",e)("index",n)("template",r.template)("@toastAnimation",void 0)("showTransformOptions",r.showTransformOptions)("hideTransformOptions",r.hideTransformOptions)("showTransitionOptions",r.showTransitionOptions)("hideTransitionOptions",r.hideTransitionOptions)}}let Ase=(()=>{class i{constructor(e){this.zone=e,this.onClose=new Fn}ngAfterViewInit(){this.initTimeout()}initTimeout(){this.message.sticky||this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>{this.onClose.emit({index:this.index,message:this.message})},this.message.life||3e3)})}clearTimeout(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null)}onMouseEnter(){this.clearTimeout()}onMouseLeave(){this.initTimeout()}onCloseIconClick(e){this.clearTimeout(),this.onClose.emit({index:this.index,message:this.message}),e.preventDefault()}ngOnDestroy(){this.clearTimeout()}}return i.\u0275fac=function(e){return new(e||i)(Xt(Vo))},i.\u0275cmp=_r({type:i,selectors:[["p-toastItem"]],viewQuery:function(e,n){if(1&e&&Tr(g4,5),2&e){let r;Wi(r=ji())&&(n.containerViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{message:"message",index:"index",template:"template",showTransformOptions:"showTransformOptions",hideTransformOptions:"hideTransformOptions",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{onClose:"onClose"},decls:6,vars:21,consts:[[3,"ngClass","mouseenter","mouseleave"],["container",""],["role","alert","aria-live","assertive","aria-atomic","true",1,"p-toast-message-content",3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["type","button","class","p-toast-icon-close p-link","pRipple","",3,"click","keydown.enter",4,"ngIf"],[3,"ngClass"],[1,"p-toast-message-text"],[1,"p-toast-summary"],[1,"p-toast-detail"],["type","button","pRipple","",1,"p-toast-icon-close","p-link",3,"click","keydown.enter"],[1,"p-toast-icon-close-icon","pi","pi-times"]],template:function(e,n){1&e&&(Ke(0,"div",0,1),mn("mouseenter",function(){return n.onMouseEnter()})("mouseleave",function(){return n.onMouseLeave()}),Ke(2,"div",2),$e(3,gse,7,10,"ng-container",3),$e(4,mse,1,0,"ng-container",4),$e(5,vse,2,0,"button",5),Je()()),2&e&&(kr(n.message.styleClass),de("ngClass",_i(10,yse,"p-toast-message-"+n.message.severity))("@messageState",_i(17,bse,sf(12,_se,n.showTransformOptions,n.hideTransformOptions,n.showTransitionOptions,n.hideTransitionOptions))),vr("id",n.message.id),Ie(2),de("ngClass",n.message.contentStyleClass),Ie(1),de("ngIf",!n.template),Ie(1),de("ngTemplateOutlet",n.template)("ngTemplateOutletContext",_i(19,Cse,n.message)),Ie(1),de("ngIf",!1!==n.message.closable))},dependencies:[no,ho,el,Du],encapsulation:2,data:{animation:[ly("messageState",[A0("visible",tl({transform:"translateY(0)",opacity:1})),Mu("void => *",[tl({transform:"{{showTransformParams}}",opacity:0}),wc("{{showTransitionParams}}")]),Mu("* => void",[wc("{{hideTransitionParams}}",tl({height:0,opacity:0,transform:"{{hideTransformParams}}"}))])])]},changeDetection:0}),i})(),LA=(()=>{class i{constructor(e,n,r){this.messageService=e,this.cd=n,this.config=r,this.autoZIndex=!0,this.baseZIndex=0,this.position="top-right",this.preventOpenDuplicates=!1,this.preventDuplicates=!1,this.showTransformOptions="translateY(100%)",this.hideTransformOptions="translateY(-100%)",this.showTransitionOptions="300ms ease-out",this.hideTransitionOptions="250ms ease-in",this.onClose=new Fn,this.id=sC()}ngOnInit(){this.messageSubscription=this.messageService.messageObserver.subscribe(e=>{if(e)if(e instanceof Array){const n=e.filter(r=>this.canAdd(r));this.add(n)}else this.canAdd(e)&&this.add([e])}),this.clearSubscription=this.messageService.clearObserver.subscribe(e=>{e?this.key===e&&(this.messages=null):this.messages=null,this.cd.markForCheck()})}ngAfterViewInit(){this.breakpoints&&this.createStyle()}add(e){this.messages=this.messages?[...this.messages,...e]:[...e],this.preventDuplicates&&(this.messagesArchieve=this.messagesArchieve?[...this.messagesArchieve,...e]:[...e]),this.cd.markForCheck()}canAdd(e){let n=this.key===e.key;return n&&this.preventOpenDuplicates&&(n=!this.containsMessage(this.messages,e)),n&&this.preventDuplicates&&(n=!this.containsMessage(this.messagesArchieve,e)),n}containsMessage(e,n){return!!e&&null!=e.find(r=>r.summary===n.summary&&r.detail==n.detail&&r.severity===n.severity)}ngAfterContentInit(){this.templates.forEach(e=>{e.getType(),this.template=e.template})}onMessageClose(e){this.messages.splice(e.index,1),this.onClose.emit({message:e.message}),this.cd.detectChanges()}onAnimationStart(e){"void"===e.fromState&&(this.containerViewChild.nativeElement.setAttribute(this.id,""),this.autoZIndex&&""===this.containerViewChild.nativeElement.style.zIndex&&Ll.set("modal",this.containerViewChild.nativeElement,this.baseZIndex||this.config.zIndex.modal))}onAnimationEnd(e){"void"===e.toState&&this.autoZIndex&&Ji.isEmpty(this.messages)&&Ll.clear(this.containerViewChild.nativeElement)}createStyle(){if(!this.styleElement){this.styleElement=document.createElement("style"),this.styleElement.type="text/css",document.head.appendChild(this.styleElement);let e="";for(let n in this.breakpoints){let r="";for(let s in this.breakpoints[n])r+=s+":"+this.breakpoints[n][s]+" !important;";e+=`\n                    @media screen and (max-width: ${n}) {\n                        .p-toast[${this.id}] {\n                           ${r}\n                        }\n                    }\n                `}this.styleElement.innerHTML=e}}destroyStyle(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}ngOnDestroy(){this.messageSubscription&&this.messageSubscription.unsubscribe(),this.containerViewChild&&this.autoZIndex&&Ll.clear(this.containerViewChild.nativeElement),this.clearSubscription&&this.clearSubscription.unsubscribe(),this.destroyStyle()}}return i.\u0275fac=function(e){return new(e||i)(Xt(fm),Xt(xo),Xt(Dp))},i.\u0275cmp=_r({type:i,selectors:[["p-toast"]],contentQueries:function(e,n,r){if(1&e&&Ba(r,za,4),2&e){let s;Wi(s=ji())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&Tr(g4,5),2&e){let r;Wi(r=ji())&&(n.containerViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{key:"key",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",style:"style",styleClass:"styleClass",position:"position",preventOpenDuplicates:"preventOpenDuplicates",preventDuplicates:"preventDuplicates",showTransformOptions:"showTransformOptions",hideTransformOptions:"hideTransformOptions",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",breakpoints:"breakpoints"},outputs:{onClose:"onClose"},decls:3,vars:5,consts:[[3,"ngClass","ngStyle"],["container",""],[3,"message","index","template","showTransformOptions","hideTransformOptions","showTransitionOptions","hideTransitionOptions","onClose",4,"ngFor","ngForOf"],[3,"message","index","template","showTransformOptions","hideTransformOptions","showTransitionOptions","hideTransitionOptions","onClose"]],template:function(e,n){1&e&&(Ke(0,"div",0,1),$e(2,wse,1,8,"p-toastItem",2),Je()),2&e&&(kr(n.styleClass),de("ngClass","p-toast p-component p-toast-"+n.position)("ngStyle",n.style),Ie(2),de("ngForOf",n.messages))},dependencies:[no,jc,Po,Ase],styles:[".p-toast{position:fixed;width:25rem}.p-toast-message{overflow:hidden}.p-toast-message-content{display:flex;align-items:flex-start}.p-toast-message-text{flex:1 1 auto}.p-toast-top-right{top:20px;right:20px}.p-toast-top-left{top:20px;left:20px}.p-toast-bottom-left{bottom:20px;left:20px}.p-toast-bottom-right{bottom:20px;right:20px}.p-toast-top-center{top:20px;left:50%;transform:translate(-50%)}.p-toast-bottom-center{bottom:20px;left:50%;transform:translate(-50%)}.p-toast-center{left:50%;top:50%;min-width:20vw;transform:translate(-50%,-50%)}.p-toast-icon-close{display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-toast-icon-close.p-link{cursor:pointer}\n"],encapsulation:2,data:{animation:[ly("toastAnimation",[Mu(":enter, :leave",[PJ("@*",LJ())])])]},changeDetection:0}),i})(),m4=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({imports:[Os,Xc,xa]}),i})();function xse(i,t){1&i&&Bn(0,"span",11),2&i&&de("innerHTML",be(2).$implicit.summary,Aa)}function Ise(i,t){1&i&&Bn(0,"span",12),2&i&&de("innerHTML",be(2).$implicit.detail,Aa)}function Sse(i,t){if(1&i&&(zr(0),$e(1,xse,1,1,"span",9),$e(2,Ise,1,1,"span",10),Vr()),2&i){const e=be().$implicit;Ie(1),de("ngIf",e.summary),Ie(1),de("ngIf",e.detail)}}function Ese(i,t){if(1&i&&(Ke(0,"span",15),li(1),Je()),2&i){const e=be(2).$implicit;Ie(1),ts(e.summary)}}function Tse(i,t){if(1&i&&(Ke(0,"span",16),li(1),Je()),2&i){const e=be(2).$implicit;Ie(1),ts(e.detail)}}function Mse(i,t){if(1&i&&($e(0,Ese,2,1,"span",13),$e(1,Tse,2,1,"span",14)),2&i){const e=be().$implicit;de("ngIf",e.summary),Ie(1),de("ngIf",e.detail)}}function Dse(i,t){if(1&i){const e=vi();Ke(0,"button",17),mn("click",function(){Pt(e);const r=be().index;return Rt(be(2).removeMessage(r))}),Bn(1,"i",18),Je()}}const Lse=function(i,t){return{showTransitionParams:i,hideTransitionParams:t}},Pse=function(i){return{value:"visible",params:i}},Rse=function(i,t,e,n){return{"pi-info-circle":i,"pi-check":t,"pi-exclamation-triangle":e,"pi-times-circle":n}};function kse(i,t){if(1&i&&(Ke(0,"div",4)(1,"div",5),Bn(2,"span",6),$e(3,Sse,3,2,"ng-container",1),$e(4,Mse,2,2,"ng-template",null,7,sc),$e(6,Dse,2,0,"button",8),Je()()),2&i){const e=t.$implicit,n=oo(5),r=be(2);kr("p-message p-message-"+e.severity),de("@messageAnimation",_i(12,Pse,ss(9,Lse,r.showTransitionOptions,r.hideTransitionOptions))),Ie(2),kr("p-message-icon pi"+(e.icon?" "+e.icon:"")),de("ngClass",sf(14,Rse,"info"===e.severity,"success"===e.severity,"warn"===e.severity,"error"===e.severity)),Ie(1),de("ngIf",!r.escape)("ngIfElse",n),Ie(3),de("ngIf",r.closable)}}function Ose(i,t){if(1&i&&(zr(0),$e(1,kse,7,19,"div",3),Vr()),2&i){const e=be();Ie(1),de("ngForOf",e.value)}}function Fse(i,t){1&i&&Ni(0)}function Nse(i,t){if(1&i&&(Ke(0,"div",19)(1,"div",5),$e(2,Fse,1,0,"ng-container",20),Je()()),2&i){const e=be();de("ngClass","p-message p-message-"+e.severity),Ie(2),de("ngTemplateOutlet",e.contentTemplate)}}let Bse=(()=>{class i{constructor(e,n,r){this.messageService=e,this.el=n,this.cd=r,this.closable=!0,this.enableService=!0,this.escape=!0,this.showTransitionOptions="300ms ease-out",this.hideTransitionOptions="200ms cubic-bezier(0.86, 0, 0.07, 1)",this.valueChange=new Fn}ngAfterContentInit(){this.templates.forEach(e=>{e.getType(),this.contentTemplate=e.template}),this.messageService&&this.enableService&&!this.contentTemplate&&(this.messageSubscription=this.messageService.messageObserver.subscribe(e=>{if(e){if(e instanceof Array){let n=e.filter(r=>this.key===r.key);this.value=this.value?[...this.value,...n]:[...n]}else this.key===e.key&&(this.value=this.value?[...this.value,e]:[e]);this.cd.markForCheck()}}),this.clearSubscription=this.messageService.clearObserver.subscribe(e=>{e?this.key===e&&(this.value=null):this.value=null,this.cd.markForCheck()}))}hasMessages(){let e=this.el.nativeElement.parentElement;return!(!e||!e.offsetParent)&&(null!=this.contentTemplate||this.value&&this.value.length>0)}clear(){this.value=[],this.valueChange.emit(this.value)}removeMessage(e){this.value=this.value.filter((n,r)=>r!==e),this.valueChange.emit(this.value)}get icon(){const e=this.severity||(this.hasMessages()?this.value[0].severity:null);if(this.hasMessages())switch(e){case"success":return"pi-check";case"info":default:return"pi-info-circle";case"error":return"pi-times";case"warn":return"pi-exclamation-triangle"}return null}ngOnDestroy(){this.messageSubscription&&this.messageSubscription.unsubscribe(),this.clearSubscription&&this.clearSubscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(Xt(fm,8),Xt(Yn),Xt(xo))},i.\u0275cmp=_r({type:i,selectors:[["p-messages"]],contentQueries:function(e,n,r){if(1&e&&Ba(r,za,4),2&e){let s;Wi(s=ji())&&(n.templates=s)}},hostAttrs:[1,"p-element"],inputs:{value:"value",closable:"closable",style:"style",styleClass:"styleClass",enableService:"enableService",key:"key",escape:"escape",severity:"severity",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{valueChange:"valueChange"},decls:4,vars:5,consts:[["role","alert",1,"p-messages","p-component",3,"ngStyle"],[4,"ngIf","ngIfElse"],["staticMessage",""],["role","alert",3,"class",4,"ngFor","ngForOf"],["role","alert"],[1,"p-message-wrapper"],[3,"ngClass"],["escapeOut",""],["class","p-message-close p-link","type","button","pRipple","",3,"click",4,"ngIf"],["class","p-message-summary",3,"innerHTML",4,"ngIf"],["class","p-message-detail",3,"innerHTML",4,"ngIf"],[1,"p-message-summary",3,"innerHTML"],[1,"p-message-detail",3,"innerHTML"],["class","p-message-summary",4,"ngIf"],["class","p-message-detail",4,"ngIf"],[1,"p-message-summary"],[1,"p-message-detail"],["type","button","pRipple","",1,"p-message-close","p-link",3,"click"],[1,"p-message-close-icon","pi","pi-times"],["role","alert",3,"ngClass"],[4,"ngTemplateOutlet"]],template:function(e,n){if(1&e&&(Ke(0,"div",0),$e(1,Ose,2,1,"ng-container",1),$e(2,Nse,3,2,"ng-template",null,2,sc),Je()),2&e){const r=oo(3);kr(n.styleClass),de("ngStyle",n.style),Ie(1),de("ngIf",!n.contentTemplate)("ngIfElse",r)}},dependencies:[no,jc,ho,el,Po,Du],styles:[".p-message-wrapper{display:flex;align-items:center}.p-message-close{display:flex;align-items:center;justify-content:center}.p-message-close.p-link{margin-left:auto;overflow:hidden;position:relative}.p-messages .p-message.ng-animating{overflow:hidden}\n"],encapsulation:2,data:{animation:[ly("messageAnimation",[Mu(":enter",[tl({opacity:0,transform:"translateY(-25%)"}),wc("{{showTransitionParams}}")]),Mu(":leave",[wc("{{hideTransitionParams}}",tl({height:0,marginTop:0,marginBottom:0,marginLeft:0,marginRight:0,opacity:0}))])])]},changeDetection:0}),i})(),v4=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({imports:[Os,Xc]}),i})();function zse(i,t){if(1&i&&(Ke(0,"div",5),li(1),Je()),2&i){const e=be(2);Ad("display",null!=e.value&&0!==e.value?"flex":"none"),Ie(1),wI("",e.value,"",e.unit,"")}}function Vse(i,t){if(1&i&&(Ke(0,"div",3),$e(1,zse,2,4,"div",4),Je()),2&i){const e=be();Ad("width",e.value+"%"),Ie(1),de("ngIf",e.showValue)}}function Use(i,t){1&i&&(Ke(0,"div",6),Bn(1,"div",7),Je())}const Hse=function(i,t){return{"p-progressbar p-component":!0,"p-progressbar-determinate":i,"p-progressbar-indeterminate":t}};let Gse=(()=>{class i{constructor(){this.showValue=!0,this.unit="%",this.mode="determinate"}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=_r({type:i,selectors:[["p-progressBar"]],hostAttrs:[1,"p-element"],inputs:{value:"value",showValue:"showValue",style:"style",styleClass:"styleClass",unit:"unit",mode:"mode"},decls:3,vars:10,consts:[["role","progressbar","aria-valuemin","0","aria-valuemax","100",3,"ngStyle","ngClass"],["class","p-progressbar-value p-progressbar-value-animate","style","display:flex",3,"width",4,"ngIf"],["class","p-progressbar-indeterminate-container",4,"ngIf"],[1,"p-progressbar-value","p-progressbar-value-animate",2,"display","flex"],["class","p-progressbar-label",3,"display",4,"ngIf"],[1,"p-progressbar-label"],[1,"p-progressbar-indeterminate-container"],[1,"p-progressbar-value","p-progressbar-value-animate"]],template:function(e,n){1&e&&(Ke(0,"div",0),$e(1,Vse,2,3,"div",1),$e(2,Use,2,0,"div",2),Je()),2&e&&(kr(n.styleClass),de("ngStyle",n.style)("ngClass",ss(7,Hse,"determinate"===n.mode,"indeterminate"===n.mode)),vr("aria-valuenow",n.value),Ie(1),de("ngIf","determinate"===n.mode),Ie(1),de("ngIf","indeterminate"===n.mode))},dependencies:[no,ho,Po],styles:['.p-progressbar{position:relative;overflow:hidden}.p-progressbar-determinate .p-progressbar-value{height:100%;width:0%;position:absolute;display:none;border:0 none;display:flex;align-items:center;justify-content:center;overflow:hidden}.p-progressbar-determinate .p-progressbar-label{display:inline-flex}.p-progressbar-determinate .p-progressbar-value-animate{transition:width 1s ease-in-out}.p-progressbar-indeterminate .p-progressbar-value:before{content:"";position:absolute;background-color:inherit;top:0;left:0;bottom:0;will-change:left,right;animation:p-progressbar-indeterminate-anim 2.1s cubic-bezier(.65,.815,.735,.395) infinite}.p-progressbar-indeterminate .p-progressbar-value:after{content:"";position:absolute;background-color:inherit;top:0;left:0;bottom:0;will-change:left,right;animation:p-progressbar-indeterminate-anim-short 2.1s cubic-bezier(.165,.84,.44,1) infinite;animation-delay:1.15s}@keyframes p-progressbar-indeterminate-anim{0%{left:-35%;right:100%}60%{left:100%;right:-90%}to{left:100%;right:-90%}}@keyframes p-progressbar-indeterminate-anim-short{0%{left:-200%;right:100%}60%{left:107%;right:-8%}to{left:107%;right:-8%}}\n'],encapsulation:2,changeDetection:0}),i})(),$2=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({imports:[Os]}),i})();const Wse=["advancedfileinput"],jse=["basicfileinput"],$se=["content"];function qse(i,t){if(1&i){const e=vi();Ke(0,"p-button",17),mn("onClick",function(){return Pt(e),Rt(be(2).upload())}),Je()}if(2&i){const e=be(2);de("label",e.uploadButtonLabel)("icon",e.uploadIcon)("disabled",!e.hasFiles()||e.isFileLimitExceeded())}}function Xse(i,t){if(1&i){const e=vi();Ke(0,"p-button",17),mn("onClick",function(){return Pt(e),Rt(be(2).clear())}),Je()}if(2&i){const e=be(2);de("label",e.cancelButtonLabel)("icon",e.cancelIcon)("disabled",!e.hasFiles()||e.uploading)}}function Yse(i,t){1&i&&Ni(0)}function Kse(i,t){1&i&&Bn(0,"p-progressBar",18),2&i&&de("value",be(2).progress)("showValue",!1)}function Zse(i,t){if(1&i&&Bn(0,"img",26),2&i){const e=be().$implicit,n=be(4);de("src",e.objectURL,Xh)("width",n.previewWidth)}}function Qse(i,t){if(1&i){const e=vi();Ke(0,"div",22)(1,"div"),$e(2,Zse,1,2,"img",23),Je(),Ke(3,"div",24),li(4),Je(),Ke(5,"div"),li(6),Je(),Ke(7,"div")(8,"button",25),mn("click",function(r){const o=Pt(e).index;return Rt(be(4).remove(r,o))}),Je()()()}if(2&i){const e=t.$implicit,n=be(4);Ie(2),de("ngIf",n.isImage(e)),Ie(2),ts(e.name),Ie(2),ts(n.formatSize(e.size)),Ie(2),de("disabled",n.uploading)}}function Jse(i,t){if(1&i&&(Ke(0,"div"),$e(1,Qse,9,4,"div",21),Je()),2&i){const e=be(3);Ie(1),de("ngForOf",e.files)}}function eoe(i,t){}function toe(i,t){if(1&i&&(Ke(0,"div"),$e(1,eoe,0,0,"ng-template",27),Je()),2&i){const e=be(3);Ie(1),de("ngForOf",e.files)("ngForTemplate",e.fileTemplate)}}function noe(i,t){if(1&i&&(Ke(0,"div",19),$e(1,Jse,2,1,"div",20),$e(2,toe,2,2,"div",20),Je()),2&i){const e=be(2);Ie(1),de("ngIf",!e.fileTemplate),Ie(1),de("ngIf",e.fileTemplate)}}function ioe(i,t){1&i&&Ni(0)}const roe=function(i,t){return{"p-focus":i,"p-disabled":t}},soe=function(i){return{$implicit:i}};function ooe(i,t){if(1&i){const e=vi();Ke(0,"div",2)(1,"div",3)(2,"span",4),mn("focus",function(){return Pt(e),Rt(be().onFocus())})("blur",function(){return Pt(e),Rt(be().onBlur())})("click",function(){return Pt(e),Rt(be().choose())})("keydown.enter",function(){return Pt(e),Rt(be().choose())}),Ke(3,"input",5,6),mn("change",function(r){return Pt(e),Rt(be().onFileSelect(r))}),Je(),Bn(5,"span",7),Ke(6,"span",8),li(7),Je()(),$e(8,qse,1,3,"p-button",9),$e(9,Xse,1,3,"p-button",9),$e(10,Yse,1,0,"ng-container",10),Je(),Ke(11,"div",11,12),mn("dragenter",function(r){return Pt(e),Rt(be().onDragEnter(r))})("dragleave",function(r){return Pt(e),Rt(be().onDragLeave(r))})("drop",function(r){return Pt(e),Rt(be().onDrop(r))}),$e(13,Kse,1,2,"p-progressBar",13),Bn(14,"p-messages",14),$e(15,noe,3,2,"div",15),$e(16,ioe,1,0,"ng-container",16),Je()()}if(2&i){const e=be();kr(e.styleClass),de("ngClass","p-fileupload p-fileupload-advanced p-component")("ngStyle",e.style),Ie(2),de("ngClass",ss(22,roe,e.focus,e.disabled||e.isChooseDisabled())),Ie(1),de("multiple",e.multiple)("accept",e.accept)("disabled",e.disabled||e.isChooseDisabled()),vr("title",""),Ie(2),kr(e.chooseIcon),de("ngClass","p-button-icon p-button-icon-left"),Ie(2),ts(e.chooseButtonLabel),Ie(1),de("ngIf",!e.auto&&e.showUploadButton),Ie(1),de("ngIf",!e.auto&&e.showCancelButton),Ie(1),de("ngTemplateOutlet",e.toolbarTemplate),Ie(3),de("ngIf",e.hasFiles()),Ie(1),de("value",e.msgs)("enableService",!1),Ie(1),de("ngIf",e.hasFiles()),Ie(1),de("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",_i(25,soe,e.files))}}function aoe(i,t){if(1&i){const e=vi();Ke(0,"input",32,33),mn("change",function(r){return Pt(e),Rt(be(2).onFileSelect(r))})("focus",function(){return Pt(e),Rt(be(2).onFocus())})("blur",function(){return Pt(e),Rt(be(2).onBlur())}),Je()}if(2&i){const e=be(2);de("accept",e.accept)("multiple",e.multiple)("disabled",e.disabled)}}const loe=function(i,t,e,n){return{"p-button p-component p-fileupload-choose":!0,"p-button-icon-only":i,"p-fileupload-choose-selected":t,"p-focus":e,"p-disabled":n}};function coe(i,t){if(1&i){const e=vi();Ke(0,"div",28),Bn(1,"p-messages",14),Ke(2,"span",29),mn("mouseup",function(){return Pt(e),Rt(be().onBasicUploaderClick())})("keydown",function(r){return Pt(e),Rt(be().onBasicKeydown(r))}),Bn(3,"span",30),Ke(4,"span",8),li(5),Je(),$e(6,aoe,2,3,"input",31),Je()()}if(2&i){const e=be();Ie(1),de("value",e.msgs)("enableService",!1),Ie(1),kr(e.styleClass),de("ngClass",sf(9,loe,!e.chooseLabel,e.hasFiles(),e.focus,e.disabled))("ngStyle",e.style),Ie(1),de("ngClass",e.hasFiles()&&!e.auto?e.uploadIcon:e.chooseIcon),Ie(2),ts(e.auto?e.chooseLabel:e.hasFiles()?e.files[0].name:e.chooseLabel),Ie(1),de("ngIf",!e.hasFiles())}}let y4=(()=>{class i{constructor(e,n,r,s,o,l){this.el=e,this.sanitizer=n,this.zone=r,this.http=s,this.cd=o,this.config=l,this.method="post",this.invalidFileSizeMessageSummary="{0}: Invalid file size, ",this.invalidFileSizeMessageDetail="maximum upload size is {0}.",this.invalidFileTypeMessageSummary="{0}: Invalid file type, ",this.invalidFileTypeMessageDetail="allowed file types: {0}.",this.invalidFileLimitMessageDetail="limit is {0} at most.",this.invalidFileLimitMessageSummary="Maximum number of files exceeded, ",this.previewWidth=50,this.chooseIcon="pi pi-plus",this.uploadIcon="pi pi-upload",this.cancelIcon="pi pi-times",this.showUploadButton=!0,this.showCancelButton=!0,this.mode="advanced",this.onBeforeUpload=new Fn,this.onSend=new Fn,this.onUpload=new Fn,this.onError=new Fn,this.onClear=new Fn,this.onRemove=new Fn,this.onSelect=new Fn,this.onProgress=new Fn,this.uploadHandler=new Fn,this._files=[],this.progress=0,this.uploadedFileCount=0}set files(e){this._files=[];for(let n=0;n<e.length;n++){let r=e[n];this.validate(r)&&(this.isImage(r)&&(r.objectURL=this.sanitizer.bypassSecurityTrustUrl(window.URL.createObjectURL(e[n]))),this._files.push(e[n]))}}get files(){return this._files}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"file":default:this.fileTemplate=e.template;break;case"content":this.contentTemplate=e.template;break;case"toolbar":this.toolbarTemplate=e.template}})}ngOnInit(){this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.cd.markForCheck()})}ngAfterViewInit(){"advanced"===this.mode&&this.zone.runOutsideAngular(()=>{this.content&&this.content.nativeElement.addEventListener("dragover",this.onDragOver.bind(this))})}choose(){this.advancedFileInput.nativeElement.click()}onFileSelect(e){if("drop"!==e.type&&this.isIE11()&&this.duplicateIEEvent)return void(this.duplicateIEEvent=!1);this.msgs=[],this.multiple||(this.files=[]);let n=e.dataTransfer?e.dataTransfer.files:e.target.files;for(let r=0;r<n.length;r++){let s=n[r];this.isFileSelected(s)||this.validate(s)&&(this.isImage(s)&&(s.objectURL=this.sanitizer.bypassSecurityTrustUrl(window.URL.createObjectURL(n[r]))),this.files.push(n[r]))}this.onSelect.emit({originalEvent:e,files:n,currentFiles:this.files}),this.fileLimit&&"advanced"==this.mode&&this.checkFileLimit(),this.hasFiles()&&this.auto&&("advanced"!==this.mode||!this.isFileLimitExceeded())&&this.upload(),"drop"!==e.type&&this.isIE11()?this.clearIEInput():this.clearInputElement()}isFileSelected(e){for(let n of this.files)if(n.name+n.type+n.size===e.name+e.type+e.size)return!0;return!1}isIE11(){return!!window.MSInputMethodContext&&!!document.documentMode}validate(e){return this.accept&&!this.isFileTypeValid(e)?(this.msgs.push({severity:"error",summary:this.invalidFileTypeMessageSummary.replace("{0}",e.name),detail:this.invalidFileTypeMessageDetail.replace("{0}",this.accept)}),!1):!(this.maxFileSize&&e.size>this.maxFileSize&&(this.msgs.push({severity:"error",summary:this.invalidFileSizeMessageSummary.replace("{0}",e.name),detail:this.invalidFileSizeMessageDetail.replace("{0}",this.formatSize(this.maxFileSize))}),1))}isFileTypeValid(e){let n=this.accept.split(",").map(r=>r.trim());for(let r of n)if(this.isWildcard(r)?this.getTypeClass(e.type)===this.getTypeClass(r):e.type==r||this.getFileExtension(e).toLowerCase()===r.toLowerCase())return!0;return!1}getTypeClass(e){return e.substring(0,e.indexOf("/"))}isWildcard(e){return-1!==e.indexOf("*")}getFileExtension(e){return"."+e.name.split(".").pop()}isImage(e){return/^image\//.test(e.type)}onImageLoad(e){window.URL.revokeObjectURL(e.src)}upload(){if(this.customUpload)this.fileLimit&&(this.uploadedFileCount+=this.files.length),this.uploadHandler.emit({files:this.files}),this.cd.markForCheck();else{this.uploading=!0,this.msgs=[];let e=new FormData;this.onBeforeUpload.emit({formData:e});for(let n=0;n<this.files.length;n++)e.append(this.name,this.files[n],this.files[n].name);this.http[this.method](this.url,e,{headers:this.headers,reportProgress:!0,observe:"events",withCredentials:this.withCredentials}).subscribe(n=>{switch(n.type){case bc.Sent:this.onSend.emit({originalEvent:n,formData:e});break;case bc.Response:this.uploading=!1,this.progress=0,n.status>=200&&n.status<300?(this.fileLimit&&(this.uploadedFileCount+=this.files.length),this.onUpload.emit({originalEvent:n,files:this.files})):this.onError.emit({files:this.files}),this.clear();break;case bc.UploadProgress:n.loaded&&(this.progress=Math.round(100*n.loaded/n.total)),this.onProgress.emit({originalEvent:n,progress:this.progress})}this.cd.markForCheck()},n=>{this.uploading=!1,this.onError.emit({files:this.files,error:n})})}}clear(){this.files=[],this.onClear.emit(),this.clearInputElement(),this.cd.markForCheck()}remove(e,n){this.clearInputElement(),this.onRemove.emit({originalEvent:e,file:this.files[n]}),this.files.splice(n,1)}isFileLimitExceeded(){return this.fileLimit&&this.fileLimit<=this.files.length+this.uploadedFileCount&&this.focus&&(this.focus=!1),this.fileLimit&&this.fileLimit<this.files.length+this.uploadedFileCount}isChooseDisabled(){return this.fileLimit&&this.fileLimit<=this.files.length+this.uploadedFileCount}checkFileLimit(){this.isFileLimitExceeded()&&this.msgs.push({severity:"error",summary:this.invalidFileLimitMessageSummary.replace("{0}",this.fileLimit.toString()),detail:this.invalidFileLimitMessageDetail.replace("{0}",this.fileLimit.toString())})}clearInputElement(){this.advancedFileInput&&this.advancedFileInput.nativeElement&&(this.advancedFileInput.nativeElement.value=""),this.basicFileInput&&this.basicFileInput.nativeElement&&(this.basicFileInput.nativeElement.value="")}clearIEInput(){this.advancedFileInput&&this.advancedFileInput.nativeElement&&(this.duplicateIEEvent=!0,this.advancedFileInput.nativeElement.value="")}hasFiles(){return this.files&&this.files.length>0}onDragEnter(e){this.disabled||(e.stopPropagation(),e.preventDefault())}onDragOver(e){this.disabled||(Ft.addClass(this.content.nativeElement,"p-fileupload-highlight"),this.dragHighlight=!0,e.stopPropagation(),e.preventDefault())}onDragLeave(e){this.disabled||Ft.removeClass(this.content.nativeElement,"p-fileupload-highlight")}onDrop(e){if(!this.disabled){Ft.removeClass(this.content.nativeElement,"p-fileupload-highlight"),e.stopPropagation(),e.preventDefault();let n=e.dataTransfer?e.dataTransfer.files:e.target.files;(this.multiple||n&&1===n.length)&&this.onFileSelect(e)}}onFocus(){this.focus=!0}onBlur(){this.focus=!1}formatSize(e){if(0==e)return"0 B";let o=Math.floor(Math.log(e)/Math.log(1e3));return parseFloat((e/Math.pow(1e3,o)).toFixed(3))+" "+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][o]}onBasicUploaderClick(){this.hasFiles()?this.upload():this.basicFileInput.nativeElement.click()}onBasicKeydown(e){switch(e.code){case"Space":case"Enter":this.onBasicUploaderClick(),e.preventDefault()}}getBlockableElement(){return this.el.nativeElement.children[0]}get chooseButtonLabel(){return this.chooseLabel||this.config.getTranslation($c.CHOOSE)}get uploadButtonLabel(){return this.uploadLabel||this.config.getTranslation($c.UPLOAD)}get cancelButtonLabel(){return this.cancelLabel||this.config.getTranslation($c.CANCEL)}ngOnDestroy(){this.content&&this.content.nativeElement&&this.content.nativeElement.removeEventListener("dragover",this.onDragOver),this.translationSubscription&&this.translationSubscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(Xt(Yn),Xt(u3),Xt(Vo),Xt(hD),Xt(xo),Xt(Dp))},i.\u0275cmp=_r({type:i,selectors:[["p-fileUpload"]],contentQueries:function(e,n,r){if(1&e&&Ba(r,za,4),2&e){let s;Wi(s=ji())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(Tr(Wse,5),Tr(jse,5),Tr($se,5)),2&e){let r;Wi(r=ji())&&(n.advancedFileInput=r.first),Wi(r=ji())&&(n.basicFileInput=r.first),Wi(r=ji())&&(n.content=r.first)}},hostAttrs:[1,"p-element"],inputs:{name:"name",url:"url",method:"method",multiple:"multiple",accept:"accept",disabled:"disabled",auto:"auto",withCredentials:"withCredentials",maxFileSize:"maxFileSize",invalidFileSizeMessageSummary:"invalidFileSizeMessageSummary",invalidFileSizeMessageDetail:"invalidFileSizeMessageDetail",invalidFileTypeMessageSummary:"invalidFileTypeMessageSummary",invalidFileTypeMessageDetail:"invalidFileTypeMessageDetail",invalidFileLimitMessageDetail:"invalidFileLimitMessageDetail",invalidFileLimitMessageSummary:"invalidFileLimitMessageSummary",style:"style",styleClass:"styleClass",previewWidth:"previewWidth",chooseLabel:"chooseLabel",uploadLabel:"uploadLabel",cancelLabel:"cancelLabel",chooseIcon:"chooseIcon",uploadIcon:"uploadIcon",cancelIcon:"cancelIcon",showUploadButton:"showUploadButton",showCancelButton:"showCancelButton",mode:"mode",headers:"headers",customUpload:"customUpload",fileLimit:"fileLimit",files:"files"},outputs:{onBeforeUpload:"onBeforeUpload",onSend:"onSend",onUpload:"onUpload",onError:"onError",onClear:"onClear",onRemove:"onRemove",onSelect:"onSelect",onProgress:"onProgress",uploadHandler:"uploadHandler"},decls:2,vars:2,consts:[[3,"ngClass","ngStyle","class",4,"ngIf"],["class","p-fileupload p-fileupload-basic p-component",4,"ngIf"],[3,"ngClass","ngStyle"],[1,"p-fileupload-buttonbar"],["pRipple","","tabindex","0",1,"p-button","p-component","p-fileupload-choose",3,"ngClass","focus","blur","click","keydown.enter"],["type","file",3,"multiple","accept","disabled","change"],["advancedfileinput",""],[3,"ngClass"],[1,"p-button-label"],["type","button",3,"label","icon","disabled","onClick",4,"ngIf"],[4,"ngTemplateOutlet"],[1,"p-fileupload-content",3,"dragenter","dragleave","drop"],["content",""],[3,"value","showValue",4,"ngIf"],[3,"value","enableService"],["class","p-fileupload-files",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["type","button",3,"label","icon","disabled","onClick"],[3,"value","showValue"],[1,"p-fileupload-files"],[4,"ngIf"],["class","p-fileupload-row",4,"ngFor","ngForOf"],[1,"p-fileupload-row"],[3,"src","width",4,"ngIf"],[1,"p-fileupload-filename"],["type","button","icon","pi pi-times","pButton","",3,"disabled","click"],[3,"src","width"],["ngFor","",3,"ngForOf","ngForTemplate"],[1,"p-fileupload","p-fileupload-basic","p-component"],["tabindex","0","pRipple","",3,"ngClass","ngStyle","mouseup","keydown"],[1,"p-button-icon","p-button-icon-left","pi",3,"ngClass"],["type","file",3,"accept","multiple","disabled","change","focus","blur",4,"ngIf"],["type","file",3,"accept","multiple","disabled","change","focus","blur"],["basicfileinput",""]],template:function(e,n){1&e&&($e(0,ooe,17,27,"div",0),$e(1,coe,7,14,"div",1)),2&e&&(de("ngIf","advanced"===n.mode),Ie(1),de("ngIf","basic"===n.mode))},dependencies:[no,jc,ho,el,Po,x0,W1,Gse,Bse,Du],styles:[".p-fileupload-content{position:relative}.p-fileupload-row{display:flex;align-items:center}.p-fileupload-row>div{flex:1 1 auto;width:25%}.p-fileupload-row>div:last-child{text-align:right}.p-fileupload-content .p-progressbar{width:100%;position:absolute;top:0;left:0}.p-button.p-fileupload-choose{position:relative;overflow:hidden}.p-button.p-fileupload-choose input[type=file],.p-fileupload-choose.p-fileupload-choose-selected input[type=file]{display:none}.p-fluid .p-fileupload .p-button{width:auto}.p-fileupload-filename{word-break:break-all}\n"],encapsulation:2,changeDetection:0}),i})(),uoe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({imports:[Os,xa,av,$2,v4,Xc,xa,av,$2,v4]}),i})();function hoe(i,t){1&i&&Ni(0)}function doe(i,t){if(1&i&&(Ke(0,"div",3),$e(1,hoe,1,0,"ng-container",4),Je()),2&i){const e=be();Ie(1),de("ngTemplateOutlet",e.leftTemplate)}}function foe(i,t){1&i&&Ni(0)}function poe(i,t){if(1&i&&(Ke(0,"div",5),$e(1,foe,1,0,"ng-container",4),Je()),2&i){const e=be();Ie(1),de("ngTemplateOutlet",e.rightTemplate)}}const goe=["*"];let q2=(()=>{class i{constructor(e){this.el=e}getBlockableElement(){return this.el.nativeElement.children[0]}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"left":this.leftTemplate=e.template;break;case"right":this.rightTemplate=e.template}})}}return i.\u0275fac=function(e){return new(e||i)(Xt(Yn))},i.\u0275cmp=_r({type:i,selectors:[["p-toolbar"]],contentQueries:function(e,n,r){if(1&e&&Ba(r,za,4),2&e){let s;Wi(s=ji())&&(n.templates=s)}},hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass"},ngContentSelectors:goe,decls:4,vars:6,consts:[["role","toolbar",3,"ngClass","ngStyle"],["class","p-toolbar-group-left",4,"ngIf"],["class","p-toolbar-group-right",4,"ngIf"],[1,"p-toolbar-group-left"],[4,"ngTemplateOutlet"],[1,"p-toolbar-group-right"]],template:function(e,n){1&e&&(Bf(),Ke(0,"div",0),su(1),$e(2,doe,2,1,"div",1),$e(3,poe,2,1,"div",2),Je()),2&e&&(kr(n.styleClass),de("ngClass","p-toolbar p-component")("ngStyle",n.style),Ie(2),de("ngIf",n.leftTemplate),Ie(1),de("ngIf",n.rightTemplate))},dependencies:[no,ho,el,Po],styles:[".p-toolbar{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap}.p-toolbar-group-left,.p-toolbar-group-right{display:flex;align-items:center}\n"],encapsulation:2,changeDetection:0}),i})(),moe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({imports:[Os]}),i})();function voe(i,t){1&i&&Bn(0,"i",8),2&i&&(kr(be(2).confirmation.icon),de("ngClass","p-confirm-popup-icon"))}function yoe(i,t){if(1&i){const e=vi();Ke(0,"button",9),mn("click",function(){return Pt(e),Rt(be(2).reject())}),Je()}if(2&i){const e=be(2);kr(e.confirmation.rejectButtonStyleClass||"p-button-text"),de("icon",e.confirmation.rejectIcon)("label",e.rejectButtonLabel)("ngClass","p-confirm-popup-reject p-button-sm"),vr("aria-label",e.rejectButtonLabel)}}function _oe(i,t){if(1&i){const e=vi();Ke(0,"button",9),mn("click",function(){return Pt(e),Rt(be(2).accept())}),Je()}if(2&i){const e=be(2);kr(e.confirmation.acceptButtonStyleClass),de("icon",e.confirmation.acceptIcon)("label",e.acceptButtonLabel)("ngClass","p-confirm-popup-accept p-button-sm"),vr("aria-label",e.acceptButtonLabel)}}const boe=function(i,t){return{showTransitionParams:i,hideTransitionParams:t}},Coe=function(i){return{value:"open",params:i}};function woe(i,t){if(1&i){const e=vi();Ke(0,"div",1),mn("click",function(r){return Pt(e),Rt(be().onOverlayClick(r))})("@animation.start",function(r){return Pt(e),Rt(be().onAnimationStart(r))})("@animation.done",function(r){return Pt(e),Rt(be().onAnimationEnd(r))}),Ke(1,"div",2,3),$e(3,voe,1,3,"i",4),Ke(4,"span",5),li(5),Je()(),Ke(6,"div",6),$e(7,yoe,1,6,"button",7),$e(8,_oe,1,6,"button",7),Je()()}if(2&i){const e=be();kr(e.styleClass),de("ngClass","p-confirm-popup p-component")("ngStyle",e.style)("@animation",_i(12,Coe,ss(9,boe,e.showTransitionOptions,e.hideTransitionOptions))),Ie(3),de("ngIf",e.confirmation.icon),Ie(2),ts(e.confirmation.message),Ie(2),de("ngIf",!1!==e.confirmation.rejectVisible),Ie(1),de("ngIf",!1!==e.confirmation.acceptVisible)}}let X2=(()=>{class i{constructor(e,n,r,s,o,l){this.el=e,this.confirmationService=n,this.renderer=r,this.cd=s,this.config=o,this.overlayService=l,this.defaultFocus="accept",this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.autoZIndex=!0,this.baseZIndex=0,this.subscription=this.confirmationService.requireConfirmation$.subscribe(u=>{u?u.key===this.key&&(this.confirmation=u,this.confirmation.accept&&(this.confirmation.acceptEvent=new Fn,this.confirmation.acceptEvent.subscribe(this.confirmation.accept)),this.confirmation.reject&&(this.confirmation.rejectEvent=new Fn,this.confirmation.rejectEvent.subscribe(this.confirmation.reject)),this.visible=!0):this.hide()})}get visible(){return this._visible}set visible(e){this._visible=e,this.cd.markForCheck()}onAnimationStart(e){if("open"===e.toState){this.container=e.element,document.body.appendChild(this.container),this.align(),this.bindListeners();const n=this.getElementToFocus();n&&n.focus()}}onAnimationEnd(e){"void"===e.toState&&this.onContainerDestroy()}getElementToFocus(){switch(this.defaultFocus){case"accept":return Ft.findSingle(this.container,".p-confirm-popup-accept");case"reject":return Ft.findSingle(this.container,".p-confirm-popup-reject");case"none":return null}}align(){this.autoZIndex&&Ll.set("overlay",this.container,this.config.zIndex.overlay),Ft.absolutePosition(this.container,this.confirmation.target);const e=Ft.getOffset(this.container),n=Ft.getOffset(this.confirmation.target);let r=0;e.left<n.left&&(r=n.left-e.left),this.container.style.setProperty("--overlayArrowLeft",`${r}px`),e.top<n.top&&Ft.addClass(this.container,"p-confirm-popup-flipped")}hide(){this.visible=!1}accept(){this.confirmation.acceptEvent&&this.confirmation.acceptEvent.emit(),this.hide()}reject(){this.confirmation.rejectEvent&&this.confirmation.rejectEvent.emit(),this.hide()}onOverlayClick(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement})}bindListeners(){this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener()}unbindListeners(){this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener()}bindDocumentClickListener(){if(!this.documentClickListener){let e=Ft.isIOS()?"touchstart":"click";const n=this.el?this.el.nativeElement.ownerDocument:document;this.documentClickListener=this.renderer.listen(n,e,r=>{let s=this.confirmation.target;this.container!==r.target&&!this.container.contains(r.target)&&s!==r.target&&!s.contains(r.target)&&this.hide()})}}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}onWindowResize(){this.visible&&!Ft.isTouchDevice()&&this.hide()}bindDocumentResizeListener(){this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener)}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new SA(this.confirmation.target,()=>{this.visible&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}unsubscribeConfirmationSubscriptions(){this.confirmation&&(this.confirmation.acceptEvent&&this.confirmation.acceptEvent.unsubscribe(),this.confirmation.rejectEvent&&this.confirmation.rejectEvent.unsubscribe())}onContainerDestroy(){this.unbindListeners(),this.unsubscribeConfirmationSubscriptions(),this.autoZIndex&&Ll.clear(this.container),this.confirmation=null,this.container=null}restoreAppend(){this.container&&document.body.removeChild(this.container),this.onContainerDestroy()}get acceptButtonLabel(){return this.confirmation.acceptLabel||this.config.getTranslation($c.ACCEPT)}get rejectButtonLabel(){return this.confirmation.rejectLabel||this.config.getTranslation($c.REJECT)}ngOnDestroy(){this.restoreAppend(),this.subscription&&this.subscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(Xt(Yn),Xt(sA),Xt(d),Xt(xo),Xt(Dp),Xt(aA))},i.\u0275cmp=_r({type:i,selectors:[["p-confirmPopup"]],hostAttrs:[1,"p-element"],inputs:{key:"key",defaultFocus:"defaultFocus",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",style:"style",styleClass:"styleClass",visible:"visible"},decls:1,vars:1,consts:[[3,"ngClass","ngStyle","class","click",4,"ngIf"],[3,"ngClass","ngStyle","click"],[1,"p-confirm-popup-content"],["content",""],[3,"ngClass","class",4,"ngIf"],[1,"p-confirm-popup-message"],[1,"p-confirm-popup-footer"],["type","button","pButton","",3,"icon","label","ngClass","class","click",4,"ngIf"],[3,"ngClass"],["type","button","pButton","",3,"icon","label","ngClass","click"]],template:function(e,n){1&e&&$e(0,woe,9,14,"div",0),2&e&&de("ngIf",n.visible)},dependencies:[no,ho,Po,x0],styles:['.p-confirm-popup{position:absolute;margin-top:10px;top:0;left:0}.p-confirm-popup-flipped{margin-top:0;margin-bottom:10px}.p-confirm-popup:after,.p-confirm-popup:before{bottom:100%;left:calc(var(--overlayArrowLeft, 0) + 1.25rem);content:" ";height:0;width:0;position:absolute;pointer-events:none}.p-confirm-popup:after{border-width:8px;margin-left:-8px}.p-confirm-popup:before{border-width:10px;margin-left:-10px}.p-confirm-popup-flipped:after,.p-confirm-popup-flipped:before{bottom:auto;top:100%}.p-confirm-popup.p-confirm-popup-flipped:after{border-bottom-color:transparent}.p-confirm-popup.p-confirm-popup-flipped:before{border-bottom-color:transparent}.p-confirm-popup .p-confirm-popup-content{display:flex;align-items:center}\n'],encapsulation:2,data:{animation:[ly("animation",[A0("void",tl({transform:"scaleY(0.8)",opacity:0})),A0("open",tl({transform:"translateY(0)",opacity:1})),Mu("void => open",wc("{{showTransitionParams}}")),Mu("open => void",wc("{{hideTransitionParams}}"))])]},changeDetection:0}),i})(),Aoe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({imports:[Os,av]}),i})();function xoe(i,t){if(1&i){const e=vi();Ke(0,"span",13)(1,"input",14),mn("ngModelChange",function(r){return Pt(e),Rt(be().newGraph=r)}),Je(),Ke(2,"label",15),li(3,"Name"),Je(),Ke(4,"button",16),mn("click",function(){Pt(e);const r=be();return Rt(r.openNew(r.newGraph))}),Je()()}if(2&i){const e=be();Ie(1),de("ngModel",e.newGraph)}}function Ioe(i,t){}function Soe(i,t){1&i&&(Ke(0,"div",17)(1,"h5",18),li(2,"Manage Graphs"),Je(),Ke(3,"span",19),Bn(4,"i",20)(5,"input",21),Je()())}function Eoe(i,t){1&i&&(Ke(0,"tr")(1,"th",22),Bn(2,"p-tableHeaderCheckbox"),Je(),Ke(3,"th",23),li(4,"Label "),Bn(5,"p-sortIcon",24),Je(),Ke(6,"th"),li(7,"Action(s) "),Je()())}function Toe(i,t){if(1&i){const e=vi();Ke(0,"tr")(1,"td"),Bn(2,"p-tableCheckbox",25),Je(),Ke(3,"td"),li(4),Je(),Ke(5,"td")(6,"button",26),mn("click",function(){const s=Pt(e).$implicit;return Rt(be().showImport(s))}),Je(),Ke(7,"span"),li(8,"\xa0"),Je(),Ke(9,"button",27),mn("click",function(){const s=Pt(e).$implicit;return Rt(be().gexf(s))}),Je(),Ke(10,"span"),li(11,"\xa0"),Je(),Ke(12,"button",28),mn("click",function(r){const o=Pt(e).$implicit;return Rt(be().confirm(r,o))}),Je(),Ke(13,"span"),li(14,"\xa0"),Je(),Ke(15,"button",29),mn("click",function(){const s=Pt(e).$implicit;return Rt(be().selectCytoscape(s))}),Je(),Ke(16,"span"),li(17,"\xa0"),Je(),Ke(18,"button",30),mn("click",function(){const s=Pt(e).$implicit;return Rt(be().selectThreejs(s))}),Je()()()}if(2&i){const e=t.$implicit;Ie(2),de("value",e),Ie(2),ts(e.label)}}function Moe(i,t){if(1&i){const e=vi();Ke(0,"p-button",31),mn("click",function(){return Pt(e),Rt(be().displayExport=!1)}),Je()}}const Doe=function(){return["label"]},Loe=function(){return{width:"50vw"}};let Poe=(()=>{class i{constructor(e,n,r,s,o,l,u,p){this.router=e,this.logger=n,this.graphsService=r,this.clipboardService=s,this.databaseService=o,this.confirmationService=l,this.messageService=u,this.store=p,this.graph=void 0,this.graphs=[],this.displayImport=!1,this.displayExport=!1,this.exportData=[],this.exportDataHtml="",this.Delete="false",this.xml=[],this.graph$=this.store.select(p2),this.graphs$=this.store.select(f2),this.graph$.subscribe(v=>{!v||(this.graph=v)}),this.graphs$.subscribe(v=>{!v||(this.graphs=Ki.map(v,w=>({id:w.id,style:w.style,rules:w.rules,label:w.label,nodes:w.nodes,edges:w.edges})))})}ngOnInit(){let e=this.databaseService.findAllGraphs();this.store.dispatch(pA({graphs:e}))}confirm(e,n){this.confirmationService.confirm({target:e.target||void 0,message:"Are you sure that you want to proceed ?",icon:"pi pi-exclamation-triangle",accept:()=>{this.deleteGraph(n)},reject:()=>{}})}deleteGraph(e){let n=this.databaseService.deleteGraph(e);this.store.dispatch(pA({graphs:n}))}showImport(e){this.displayImport=!0,this.selectedGraph=e}openNew(e){if(e){this.databaseService.storeGraph({id:e,style:"default",rules:"default",label:e,edges:[],nodes:[]});let n=this.databaseService.findAllGraphs();this.store.dispatch(pA({graphs:n}))}}uploadHandler(e,n){n&&this.graphsService.uploadHandler(e.files[0],n.id,n.id).then(r=>{this.databaseService.storeGraph(r),this.displayImport=!1})}gexf(e){let n=this.graphsService.findOne(e.id+"");this.exportData=this.graphsService.toGexf(n),this.exportDataHtml=this.exportData.join("\n"),this.clipboardService.copyTextToClipboard(this.exportData.join("\n")),this.displayExport=!0}selectCytoscape(e){this.router.navigate(["graphs","cytoscape",e.id])}selectThreejs(e){this.router.navigate(["graphs","threejs",e.id])}}return i.\u0275fac=function(e){return new(e||i)(Xt(bh),Xt(Id),Xt(L1),Xt(P1),Xt(Nz),Xt(sA),Xt(fm),Xt(ny))},i.\u0275cmp=_r({type:i,selectors:[["app-graph-selector"]],features:[Ao([fm])],decls:17,vars:17,consts:[[1,"card"],["styleClass","mb-4"],["pTemplate","left"],["pTemplate","right"],["responsiveLayout","scroll","dataKey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","rows","paginator","globalFilterFields","rowHover","showCurrentPageReport"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[3,"modal","header","visible","visibleChange"],["name","myfile[]",3,"customUpload","uploadHandler"],["header","Gexf",3,"visible","baseZIndex","visibleChange"],["pTemplate","footer"],[1,"p-float-label"],["id","float-input","type","text","pInputText","",3,"ngModel","ngModelChange"],["for","float-input"],["pButton","","pRipple","","label","New","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],[1,"flex","align-items-center","justify-content-between"],[1,"m-0"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search..."],[2,"width","3rem"],["pSortableColumn","label"],["field","label"],[3,"value"],["pButton","","type","button","pTooltip","Import","tooltipPosition","top","icon","pi pi-cloud-upload",3,"click"],["pButton","","pRipple","","pTooltip","Copy to clipboard","tooltipPosition","top","icon","pi pi-cloud-download",3,"click"],["pButton","","pRipple","","pTooltip","Remove this graph","tooltipPosition","top","icon","pi pi-trash",1,"p-button-danger",3,"click"],["pButton","","pRipple","","pTooltip","Select this graph","tooltipPosition","top","icon","pi pi-sign-out",3,"click"],["pButton","","pRipple","","pTooltip","Select this graph for 3D preview","tooltipPosition","top","icon","pi pi-sign-out",3,"click"],["icon","pi pi-check","label","Ok","styleClass","p-button-text",3,"click"]],template:function(e,n){1&e&&(Ke(0,"div",0)(1,"p-toolbar",1),$e(2,xoe,5,1,"ng-template",2),$e(3,Ioe,0,0,"ng-template",3),Je(),Bn(4,"p-toast"),Ke(5,"p-table",4,5),$e(7,Soe,6,0,"ng-template",6),$e(8,Eoe,8,0,"ng-template",7),$e(9,Toe,19,2,"ng-template",8),Je()(),Bn(10,"p-confirmPopup"),Ke(11,"p-dialog",9),mn("visibleChange",function(s){return n.displayImport=s}),Ke(12,"p-fileUpload",10),mn("uploadHandler",function(s){return n.uploadHandler(s,n.selectedGraph)}),Je()(),Ke(13,"p-dialog",11),mn("visibleChange",function(s){return n.displayExport=s}),Ke(14,"pre"),li(15),Je(),$e(16,Moe,1,0,"ng-template",12),Je()),2&e&&(Ie(5),de("value",n.graphs)("rows",10)("paginator",!0)("globalFilterFields",uo(15,Doe))("rowHover",!0)("showCurrentPageReport",!0),Ie(6),bI("header","Import ",null==n.selectedGraph?null:n.selectedGraph.label,""),de("modal",!0)("visible",n.displayImport),Ie(1),de("customUpload",!0),Ie(1),to(uo(16,Loe)),de("visible",n.displayExport)("baseZIndex",1e4),Ie(2),ts(n.exportDataHtml))},dependencies:[l_,za,H2,G2,W2,j2,x0,W1,Y1,rv,LA,fC,y4,q2,C0,uC,oy,X2]}),i})();var Roe=U(5595),koe=U.n(Roe),Ooe=U(3424),Foe=U.n(Ooe),Noe=U(756),Boe=U.n(Noe);const zoe=["myGraph"];function Voe(i,t){if(1&i&&(Ke(0,"pre"),li(1),Je()),2&i){const e=t.$implicit;Ie(1),yc("",e,"\n")}}let Uoe=(()=>{class i{constructor(e,n,r,s){this.http=e,this.logger=n,this.graphsService=r,this.store=s,this.subscription=null,this.graph=new(koe()),this.display=!1,this.xml=[],this.graphs$=this.store.select(f2),this.graphs$.subscribe(o=>{o&&0!==o.length&&(this.graph.clear(),Ki.each(o[0].nodes,u=>{this.graph.addNode(u.id,{x:u.x,y:u.y,label:u.label,color:u.color,size:u.size,uid:u.id})}),Ki.each(o[0].edges,u=>{u.source&&u.target?this.graph.addEdge(u.source,u.target,{label:u.label,type:"arrow",size:5,uid:u.id,source:u.source,target:u.target}):this.logger.info(u)}),new(Foe())(this.graph,{isNodeFixed:(u,p)=>p.highlighted}))})}ngOnInit(){let e=this.graphsService.findAll();this.store.dispatch(pA({graphs:e}))}ngAfterViewInit(){let e=null,n=!1;this.renderer=new(Boe())(this.graph,this.myGraph?.nativeElement,{renderEdgeLabels:!0}),this.renderer.on("downNode",r=>{n=!0,e=r.node,this.graph.setNodeAttribute(e,"highlighted",!0)}),this.renderer.getMouseCaptor().on("mousemovebody",r=>{if(!n||!e||!this.renderer)return;const s=this.renderer.viewportToGraph(r);this.graph.setNodeAttribute(e,"x",s.x),this.graph.setNodeAttribute(e,"y",s.y),r.preventSigmaDefault(),r.original.preventDefault(),r.original.stopPropagation()}),this.renderer.getMouseCaptor().on("mouseup",()=>{e&&this.graph.removeNodeAttribute(e,"highlighted"),n=!1,e=null}),this.renderer.getMouseCaptor().on("mousedown",()=>{this.renderer?.getCustomBBox()||this.renderer?.setCustomBBox(this.renderer.getBBox())})}gexf(e){this.xml=[],this.xml.push('<?xml version="1.0" encoding="UTF-8"?>'),this.xml.push('<gexf xmlns="http://gexf.net/1.2" version="1.2">'),this.xml.push('<meta lastmodifieddate="2009-03-20">'),this.xml.push("<creator>Gexf.net</creator>"),this.xml.push("<description>A hello world! file</description>"),this.xml.push("</meta>"),this.xml.push(`<graph mode="static" defaultedgetype="directed" style="${e}">`),this.xml.push("<nodes>"),this.graph.forEachNode(n=>{let r=this.graph.getNodeAttribute(n,"uid"),s=this.graph.getNodeAttribute(n,"label"),o=this.graph.getNodeAttribute(n,"x"),l=this.graph.getNodeAttribute(n,"y");this.xml.push(`<node id="${r}" label="${s}" x="${o}" y="${l}" />`)}),this.xml.push("</nodes>"),this.xml.push("<edges>"),this.graph.forEachEdge(n=>{let r=this.graph.getEdgeAttribute(n,"uid"),s=this.graph.getEdgeAttribute(n,"label"),o=this.graph.getEdgeAttribute(n,"source"),l=this.graph.getEdgeAttribute(n,"target");this.xml.push(`<edge id="${r}" source="${o}" target="${l}" label="${s}" />`)}),this.xml.push("</edges>"),this.xml.push("</graph>"),this.xml.push("</gexf>"),this.display=!0}uploadHandler(e){let n=new FileReader;n.addEventListener("loadend",()=>{}),n.readAsText(e.files[0])}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(Xt(hD),Xt(Id),Xt(L1),Xt(ny))},i.\u0275cmp=_r({type:i,selectors:[["app-graph"]],viewQuery:function(e,n){if(1&e&&Tr(zoe,5),2&e){let r;Wi(r=ji())&&(n.myGraph=r.first)}},hostBindings:function(e,n){1&e&&mn("beforeunload",function(s){return n.ngOnDestroy(s)},0,Kn)},decls:6,vars:3,consts:[["name","myfile[]",3,"customUpload","uploadHandler"],["header","Gexf",3,"visible","visibleChange"],[4,"ngFor","ngForOf"],["label","Gexf",3,"onClick"],[1,"sigma-container"],["myGraph",""]],template:function(e,n){1&e&&(Ke(0,"p-fileUpload",0),mn("uploadHandler",function(s){return n.uploadHandler(s)}),Je(),Ke(1,"p-dialog",1),mn("visibleChange",function(s){return n.display=s}),$e(2,Voe,2,1,"pre",2),Je(),Ke(3,"p-button",3),mn("onClick",function(){return n.gexf("default")}),Je(),Bn(4,"div",4,5)),2&e&&(de("customUpload",!0),Ie(1),de("visible",n.display),Ie(1),de("ngForOf",n.xml))},dependencies:[jc,W1,Y1,y4],styles:[".sigma-container[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:0;overflow:hidden}"]}),i})();const _4={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let K1;const Hoe=new Uint8Array(16);function Goe(){if(!K1&&(K1=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!K1))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return K1(Hoe)}const Jh=[];for(let i=0;i<256;++i)Jh.push((i+256).toString(16).slice(1));const C4=function Woe(i,t,e){if(_4.randomUUID&&!t&&!i)return _4.randomUUID();const n=(i=i||{}).random||(i.rng||Goe)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){e=e||0;for(let r=0;r<16;++r)t[e+r]=n[r];return t}return function b4(i,t=0){return(Jh[i[t+0]]+Jh[i[t+1]]+Jh[i[t+2]]+Jh[i[t+3]]+"-"+Jh[i[t+4]]+Jh[i[t+5]]+"-"+Jh[i[t+6]]+Jh[i[t+7]]+"-"+Jh[i[t+8]]+Jh[i[t+9]]+"-"+Jh[i[t+10]]+Jh[i[t+11]]+Jh[i[t+12]]+Jh[i[t+13]]+Jh[i[t+14]]+Jh[i[t+15]]).toLowerCase()}(n)};var Z1=U(6864);class Y2 extends class $oe extends class joe{ready(t){console.debug(`layout ready, cytoscape.LayoutEventObject: ${JSON.stringify(t)}`)}stop(t){console.debug(`layout stop, cytoscape.LayoutEventObject: ${JSON.stringify(t)}`)}}{constructor(){super(...arguments),this.zoom=null,this.pan=null,this.animate=!1,this.animationDuration=500,this.animationEasing=void 0,this.animateFilter=(t,e)=>!0}}{constructor(){super(...arguments),this.fit=!0,this.padding=30,this.boundingBox=null,this.avoidOverlap=!0,this.nodeDimensionsIncludeLabels=!1,this.spacingFactor=1.75,this.sort=null,this.transform=(t,e)=>e}}class qoe extends Y2{constructor(){super(...arguments),this.name="circle",this.startAngle=1.5*Math.PI,this.sweep=null,this.clockwise=!0}}class Xoe{constructor(){this.name="concentric",this.startAngle=1.5*Math.PI,this.equidistant=!1,this.minNodeSpacing=10,this.boundingBox=null,this.height=null,this.width=null,this.spacingFactor=null}concentric(t){return 0}levelWidth(t){return 0}}class Yoe extends Y2{constructor(){super(...arguments),this.name="breadthfirst",this.directed=!1,this.circle=!1,this.maximal=!1,this.grid=!1,this.nodeDimensionsIncludeLabels=!1}}class Koe extends Y2{constructor(){super(...arguments),this.name="cose",this.animationThreshold=250,this.refresh=20,this.randomize=!1,this.componentSpacing=40,this.nodeOverlap=4e3,this.nestingFactor=1.2,this.gravity=1,this.numIter=1e3,this.initialTemp=1e3,this.coolingFactor=.99,this.minTemp=1,this.nodeRepulsion=t=>2048,this.idealEdgeLength=t=>32,this.edgeElasticity=t=>32}}const Q1=oC("[SysTags List/API] Retrieve Styles Success",{_as:"props",_p:void 0}),K2=oC("[SysTags List/API] Retrieve Style Success",{_as:"props",_p:void 0});let w4=(()=>{class i extends E1{constructor(e,n){super(),this._logger=e,this._storage=n,this.init("styles",this._storage,this._logger)}}return i.\u0275fac=function(e){return new(e||i)(qn(Id),qn(cC))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var Zoe=U(926);let A4=(()=>{class i extends E1{constructor(e,n){super(),this._logger=e,this._storage=n,this.init("rules",this._storage,this._logger)}load(e,n){this.reset(),Ki.each(n,r=>{this.store({id:e,rules:n},s=>{s.rules=n})})}ruleFactory(e,n){return this._logger.info("RULE/FACTORY",e),Ki.map(this.findOne(e)?.rules,r=>({name:r.name,priority:1,conditions:r.conditions,event:r.event,onSuccess:(o,l,u)=>{l.factValue("node").then(p=>{this._logger.info("SUCCESS",p),n.push({fact:p,ruleResult:u})})},onFailure:(o,l,u)=>{l.factValue("node").then(p=>{this._logger.info("FAIL",p),n.push({fact:p,ruleResult:u})})}}))}fact(e,n){return new Promise(r=>{e.run(n).then(({events:s})=>{this._logger.info("RESOLVE",n),r({fact:n,events:s})})})}execute(e,n){var r=this;return new Promise(s=>{let o=new Zoe.Engine,l=[],u=this.ruleFactory(e,l);this._logger.info("RULE/LOAD",u),Ki.each(u,v=>{this._logger.info("RULE",v),o.addRule(v)}),this._logger.info("FACTS",n);let p=Ki.map(n,function(){var v=tv(function*(w){return yield r.fact(o,w)});return function(w){return v.apply(this,arguments)}}());Promise.all(p).then(v=>{Ki.map(v,I=>({result:I}));let w=Ki.map(u,I=>({data:{id:I.name,fail:Ki.filter(Ki.map(l,T=>({name:T.ruleResult.name,result:T.ruleResult.result})),T=>T.name===I.name&&0==T.result),success:Ki.filter(Ki.map(l,T=>({name:T.ruleResult.name,result:T.ruleResult.result})),T=>T.name===I.name&&1==T.result)},children:Ki.filter(Ki.map(l,T=>({data:{uid:T.fact.id,id:T.fact.data.id,label:T.fact.data.label,tag:T.fact.data.tag,rule:T.ruleResult.name,valid:T.ruleResult.result},children:[]})),T=>T.data.rule===I.name)}));s({success:Ki.filter(l,I=>I.ruleResult.result),failure:Ki.filter(l,I=>!I.ruleResult.result),treenodes:w})})})}}return i.\u0275fac=function(e){return new(e||i)(qn(Id),qn(cC))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();new Tz.Parser;let x4=(()=>{class i extends E1{constructor(e,n){super(),this._logger=e,this._storage=n,this.init("preferences",this._storage,this._logger),this.findOne("default")||this.store({id:"default",full:!1,grid:!1,info:!1,maxWidth:16384,maxHeight:16384},r=>{})}}return i.\u0275fac=function(e){return new(e||i)(qn(Id),qn(cC))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Joe=["sublist"],eae=["menuitem"],tae=function(i){return{"p-hidden":i}};function nae(i,t){if(1&i&&Bn(0,"li",5,6),2&i){const e=be().$implicit;de("ngClass",_i(1,tae,!1===e.visible))}}function iae(i,t){if(1&i&&Bn(0,"span",17),2&i){const e=be(3).$implicit;de("ngClass",e.icon)("ngStyle",e.iconStyle)}}function rae(i,t){if(1&i&&(Ke(0,"span",18),li(1),Je()),2&i){const e=be(3).$implicit;Ie(1),ts(e.label)}}function sae(i,t){1&i&&Bn(0,"span",19),2&i&&de("innerHTML",be(3).$implicit.label,Aa)}function oae(i,t){if(1&i&&(Ke(0,"span",20),li(1),Je()),2&i){const e=be(3).$implicit;de("ngClass",e.badgeStyleClass),Ie(1),ts(e.badge)}}function aae(i,t){1&i&&Bn(0,"span",21)}const I4=function(i){return{"p-menuitem-link":!0,"p-disabled":i}};function lae(i,t){if(1&i){const e=vi();Ke(0,"a",11),mn("click",function(r){Pt(e),be();const s=oo(1),o=be(),l=o.$implicit,u=o.index,p=be();return Rt(p.onItemClick(r,l,s,p.getKey(u)))}),$e(1,iae,1,2,"span",12),$e(2,rae,2,1,"span",13),$e(3,sae,1,1,"ng-template",null,14,sc),$e(5,oae,2,2,"span",15),$e(6,aae,1,0,"span",16),Je()}if(2&i){const e=oo(4),n=be(2),r=n.$implicit,s=n.index,o=be();de("target",r.target)("ngClass",_i(13,I4,r.disabled)),vr("href",r.url?r.url:null,Xh)("title",r.title)("id",r.id)("tabindex",r.disabled?null:"0")("aria-haspopup",null!=o.item.items)("aria-expanded",o.isActive(o.getKey(s))),Ie(1),de("ngIf",r.icon),Ie(1),de("ngIf",!1!==r.escape)("ngIfElse",e),Ie(3),de("ngIf",r.badge),Ie(1),de("ngIf",r.items)}}function cae(i,t){if(1&i&&Bn(0,"span",17),2&i){const e=be(3).$implicit;de("ngClass",e.icon)("ngStyle",e.iconStyle)}}function uae(i,t){if(1&i&&(Ke(0,"span",18),li(1),Je()),2&i){const e=be(3).$implicit;Ie(1),ts(e.label)}}function hae(i,t){1&i&&Bn(0,"span",19),2&i&&de("innerHTML",be(3).$implicit.label,Aa)}function dae(i,t){if(1&i&&(Ke(0,"span",20),li(1),Je()),2&i){const e=be(3).$implicit;de("ngClass",e.badgeStyleClass),Ie(1),ts(e.badge)}}function fae(i,t){1&i&&Bn(0,"span",21)}const pae=function(){return{exact:!1}};function gae(i,t){if(1&i){const e=vi();Ke(0,"a",22),mn("click",function(r){Pt(e),be();const s=oo(1),o=be(),l=o.$implicit,u=o.index,p=be();return Rt(p.onItemClick(r,l,s,p.getKey(u)))}),$e(1,cae,1,2,"span",12),$e(2,uae,2,1,"span",13),$e(3,hae,1,1,"ng-template",null,23,sc),$e(5,dae,2,2,"span",15),$e(6,fae,1,0,"span",16),Je()}if(2&i){const e=oo(4),n=be(2).$implicit;de("routerLink",n.routerLink)("queryParams",n.queryParams)("routerLinkActive","p-menuitem-link-active")("routerLinkActiveOptions",n.routerLinkActiveOptions||uo(20,pae))("target",n.target)("ngClass",_i(21,I4,n.disabled))("fragment",n.fragment)("queryParamsHandling",n.queryParamsHandling)("preserveFragment",n.preserveFragment)("skipLocationChange",n.skipLocationChange)("replaceUrl",n.replaceUrl)("state",n.state),vr("title",n.title)("id",n.id)("tabindex",n.disabled?null:"0"),Ie(1),de("ngIf",n.icon),Ie(1),de("ngIf",!1!==n.escape)("ngIfElse",e),Ie(3),de("ngIf",n.badge),Ie(1),de("ngIf",n.items)}}function mae(i,t){if(1&i){const e=vi();Ke(0,"p-contextMenuSub",24),mn("leafClick",function(){return Pt(e),Rt(be(3).onLeafClick())}),Je()}if(2&i){const e=be(2),n=e.index,r=e.$implicit;de("parentItemKey",be().getKey(n))("item",r)}}const vae=function(i,t){return{"p-menuitem":!0,"p-menuitem-active":i,"p-hidden":t}};function yae(i,t){if(1&i){const e=vi();Ke(0,"li",7,6),mn("mouseenter",function(r){Pt(e);const s=be(),o=s.$implicit,l=s.index,u=be();return Rt(u.onItemMouseEnter(r,o,u.getKey(l)))})("mouseleave",function(r){Pt(e);const s=be().$implicit;return Rt(be().onItemMouseLeave(r,s))}),$e(2,lae,7,15,"a",8),$e(3,gae,7,23,"a",9),$e(4,mae,1,2,"p-contextMenuSub",10),Je()}if(2&i){const e=be(),n=e.$implicit,r=e.index,s=be();kr(n.styleClass),de("ngClass",ss(9,vae,s.isActive(s.getKey(r)),!1===n.visible))("ngStyle",n.style)("tooltipOptions",n.tooltipOptions),vr("data-ik",s.getKey(r)),Ie(2),de("ngIf",!n.routerLink),Ie(1),de("ngIf",n.routerLink),Ie(1),de("ngIf",n.items)}}function _ae(i,t){if(1&i&&($e(0,nae,2,3,"li",3),$e(1,yae,5,12,"li",4)),2&i){const e=t.$implicit;de("ngIf",e.separator),Ie(1),de("ngIf",!e.separator)}}const bae=function(i){return{"p-submenu-list":i}},Cae=["container"];let wae=(()=>{class i{constructor(e){this.leafClick=new Fn,this.contextMenu=e}ngOnInit(){this.activeItemKeyChangeSubscription=this.contextMenu.contextMenuService.activeItemKeyChange$.pipe(function Qoe(i){return Lt((t,e)=>{pl(i).subscribe(Ut(e,()=>e.complete(),se)),!e.closed&&t.subscribe(e)})}(this.contextMenu.ngDestroy$)).subscribe(e=>{this.activeItemKey=e,this.isActive(this.parentItemKey)&&Ft.hasClass(this.sublistViewChild.nativeElement,"p-submenu-list-active")&&this.contextMenu.positionSubmenu(this.sublistViewChild.nativeElement),this.contextMenu.cd.markForCheck()})}onItemMouseEnter(e,n,r){if(this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null),n.disabled)this.activeItemKey=null;else{if(n.items){let s=Ft.findSingle(e.currentTarget,".p-submenu-list");Ft.addClass(s,"p-submenu-list-active")}this.contextMenu.contextMenuService.changeKey(r)}}onItemMouseLeave(e,n){n.disabled||this.contextMenu.el.nativeElement.contains(e.toElement)&&(n.items&&this.contextMenu.removeActiveFromSubLists(e.currentTarget),this.root||this.contextMenu.contextMenuService.changeKey(this.parentItemKey))}onItemClick(e,n,r,s){if(n.disabled)e.preventDefault();else{if(!n.url&&!n.routerLink&&e.preventDefault(),n.command&&n.command({originalEvent:e,item:n}),n.items){let o=Ft.findSingle(r,".p-submenu-list");o&&(this.isActive(s)&&Ft.hasClass(o,"p-submenu-list-active")?this.contextMenu.removeActiveFromSubLists(r):Ft.addClass(o,"p-submenu-list-active"),this.contextMenu.contextMenuService.changeKey(s))}n.items||this.onLeafClick()}}onLeafClick(){this.root&&this.contextMenu.hide(),this.leafClick.emit()}getKey(e){return this.root?String(e):this.parentItemKey+"_"+e}isActive(e){return this.activeItemKey&&(this.activeItemKey.startsWith(e+"_")||this.activeItemKey===e)}}return i.\u0275fac=function(e){return new(e||i)(Xt(cs(()=>S4)))},i.\u0275cmp=_r({type:i,selectors:[["p-contextMenuSub"]],viewQuery:function(e,n){if(1&e&&(Tr(Joe,5),Tr(eae,5)),2&e){let r;Wi(r=ji())&&(n.sublistViewChild=r.first),Wi(r=ji())&&(n.menuitemViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{item:"item",root:"root",parentItemKey:"parentItemKey"},outputs:{leafClick:"leafClick"},decls:3,vars:4,consts:[[3,"ngClass"],["sublist",""],["ngFor","",3,"ngForOf"],["class","p-menu-separator","role","separator",3,"ngClass",4,"ngIf"],["pTooltip","","role","none",3,"ngClass","ngStyle","class","tooltipOptions","mouseenter","mouseleave",4,"ngIf"],["role","separator",1,"p-menu-separator",3,"ngClass"],["menuitem",""],["pTooltip","","role","none",3,"ngClass","ngStyle","tooltipOptions","mouseenter","mouseleave"],["pRipple","",3,"target","ngClass","click",4,"ngIf"],["role","menuitem","pRipple","",3,"routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","target","ngClass","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","click",4,"ngIf"],[3,"parentItemKey","item","leafClick",4,"ngIf"],["pRipple","",3,"target","ngClass","click"],["class","p-menuitem-icon",3,"ngClass","ngStyle",4,"ngIf"],["class","p-menuitem-text",4,"ngIf","ngIfElse"],["htmlLabel",""],["class","p-menuitem-badge",3,"ngClass",4,"ngIf"],["class","p-submenu-icon pi pi-angle-right",4,"ngIf"],[1,"p-menuitem-icon",3,"ngClass","ngStyle"],[1,"p-menuitem-text"],[1,"p-menuitem-text",3,"innerHTML"],[1,"p-menuitem-badge",3,"ngClass"],[1,"p-submenu-icon","pi","pi-angle-right"],["role","menuitem","pRipple","",3,"routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","target","ngClass","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","click"],["htmlRouteLabel",""],[3,"parentItemKey","item","leafClick"]],template:function(e,n){1&e&&(Ke(0,"ul",0,1),$e(2,_ae,2,2,"ng-template",2),Je()),2&e&&(de("ngClass",_i(2,bae,!n.root)),Ie(2),de("ngForOf",n.root?n.item:n.item.items))},dependencies:[no,jc,ho,Po,rC,$D,Du,rv,i],encapsulation:2}),i})(),S4=(()=>{class i{constructor(e,n,r,s,o,l){this.el=e,this.renderer=n,this.cd=r,this.zone=s,this.contextMenuService=o,this.config=l,this.autoZIndex=!0,this.baseZIndex=0,this.triggerEvent="contextmenu",this.onShow=new Fn,this.onHide=new Fn,this.ngDestroy$=new Ge,this.preventDocumentDefault=!1}ngAfterViewInit(){this.global?this.triggerEventListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document",this.triggerEvent,n=>{this.show(n),n.preventDefault()}):this.target&&(this.triggerEventListener=this.renderer.listen(this.target,this.triggerEvent,e=>{this.show(e),e.preventDefault()})),this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.containerViewChild.nativeElement):Ft.appendChild(this.containerViewChild.nativeElement,this.appendTo))}show(e){this.clearActiveItem(),this.position(e),this.moveOnTop(),this.containerViewChild.nativeElement.style.display="block",this.preventDocumentDefault=!0,Ft.fadeIn(this.containerViewChild.nativeElement,250),this.bindGlobalListeners(),e&&e.preventDefault(),this.onShow.emit()}hide(){this.containerViewChild.nativeElement.style.display="none",this.autoZIndex&&Ll.clear(this.containerViewChild.nativeElement),this.clearActiveItem(),this.unbindGlobalListeners(),this.onHide.emit()}moveOnTop(){this.autoZIndex&&this.containerViewChild&&"block"!==this.containerViewChild.nativeElement.style.display&&Ll.set("menu",this.containerViewChild.nativeElement,this.baseZIndex+this.config.zIndex.menu)}toggle(e){this.containerViewChild.nativeElement.offsetParent?this.hide():this.show(e)}position(e){if(e){let n=e.pageX+1,r=e.pageY+1,s=this.containerViewChild.nativeElement.offsetParent?this.containerViewChild.nativeElement.offsetWidth:Ft.getHiddenElementOuterWidth(this.containerViewChild.nativeElement),o=this.containerViewChild.nativeElement.offsetParent?this.containerViewChild.nativeElement.offsetHeight:Ft.getHiddenElementOuterHeight(this.containerViewChild.nativeElement),l=Ft.getViewport();n+s-document.body.scrollLeft>l.width&&(n-=s),r+o-document.body.scrollTop>l.height&&(r-=o),n<document.body.scrollLeft&&(n=document.body.scrollLeft),r<document.body.scrollTop&&(r=document.body.scrollTop),this.containerViewChild.nativeElement.style.left=n+"px",this.containerViewChild.nativeElement.style.top=r+"px"}}positionSubmenu(e){let n=e.parentElement.parentElement,r=Ft.getViewport(),s=e.offsetParent?e.offsetWidth:Ft.getHiddenElementOuterWidth(e),o=e.offsetHeight?e.offsetHeight:Ft.getHiddenElementOuterHeight(e),l=Ft.getOuterWidth(n.children[0]),u=Ft.getOuterHeight(n.children[0]),p=Ft.getOffset(n.parentElement);e.style.zIndex=++Ft.zindex,parseInt(p.top)+u+o>r.height-Ft.calculateScrollbarHeight()?(e.style.removeProperty("top"),e.style.bottom="0px"):(e.style.removeProperty("bottom"),e.style.top="0px"),e.style.left=parseInt(p.left)+l+s>r.width-Ft.calculateScrollbarWidth()?-s+"px":l+"px"}isItemMatched(e){return Ft.hasClass(e,"p-menuitem")&&!Ft.hasClass(e.children[0],"p-disabled")}findNextItem(e,n){let r=e.nextElementSibling;if(r)return this.isItemMatched(r)?r:this.findNextItem(r,n);{let s=e.parentElement.children[0];return this.isItemMatched(s)?s:n?null:this.findNextItem(s,!0)}}findPrevItem(e,n){let r=e.previousElementSibling;if(r)return this.isItemMatched(r)?r:this.findPrevItem(r,n);{let s=e.parentElement.children[e.parentElement.children.length-1];return this.isItemMatched(s)?s:n?null:this.findPrevItem(s,!0)}}getActiveItem(){let e=this.contextMenuService.activeItemKey;return null==e?null:Ft.findSingle(this.containerViewChild.nativeElement,'.p-menuitem[data-ik="'+e+'"]')}clearActiveItem(){this.contextMenuService.activeItemKey&&(this.removeActiveFromSubLists(this.containerViewChild.nativeElement),this.contextMenuService.reset())}removeActiveFromSubLists(e){let n=Ft.find(e,".p-submenu-list-active");for(let r of n)Ft.removeClass(r,"p-submenu-list-active")}removeActiveFromSublist(e){e&&Ft.findSingle(e,".p-submenu-list")&&Ft.hasClass(e,"p-submenu-list-active")&&Ft.removeClass(e,"p-submenu-list-active")}bindGlobalListeners(){if(!this.documentClickListener){const e=this.el?this.el.nativeElement.ownerDocument:"document";this.documentClickListener=this.renderer.listen(e,"click",n=>{this.containerViewChild.nativeElement.offsetParent&&this.isOutsideClicked(n)&&!n.ctrlKey&&2!==n.button&&this.hide()}),this.documentTriggerListener=this.renderer.listen(e,this.triggerEvent,n=>{this.containerViewChild.nativeElement.offsetParent&&this.isOutsideClicked(n)&&!this.preventDocumentDefault&&this.hide(),this.preventDocumentDefault=!1})}this.zone.runOutsideAngular(()=>{this.windowResizeListener||(this.windowResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.windowResizeListener))}),this.documentKeydownListener||(this.documentKeydownListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","keydown",n=>{let r=this.getActiveItem();switch(n.key){case"ArrowDown":if(r)this.removeActiveFromSublist(r),r=this.findNextItem(r);else{let s=Ft.findSingle(this.containerViewChild.nativeElement,".p-menuitem-link").parentElement;r=this.isItemMatched(s)?s:this.findNextItem(s)}r&&this.contextMenuService.changeKey(r.getAttribute("data-ik")),n.preventDefault();break;case"ArrowUp":if(r)this.removeActiveFromSublist(r),r=this.findPrevItem(r);else{let s=Ft.findSingle(this.containerViewChild.nativeElement,"ul"),o=s.children[s.children.length-1];r=this.isItemMatched(o)?o:this.findPrevItem(o)}r&&this.contextMenuService.changeKey(r.getAttribute("data-ik")),n.preventDefault();break;case"ArrowRight":if(r){let s=Ft.findSingle(r,".p-submenu-list");s&&(Ft.addClass(s,"p-submenu-list-active"),r=Ft.findSingle(s,".p-menuitem-link:not(.p-disabled)").parentElement,r&&this.contextMenuService.changeKey(r.getAttribute("data-ik")))}n.preventDefault();break;case"ArrowLeft":if(r){let s=r.parentElement;s&&Ft.hasClass(s,"p-submenu-list-active")&&(Ft.removeClass(s,"p-submenu-list-active"),r=s.parentElement.parentElement,r&&this.contextMenuService.changeKey(r.getAttribute("data-ik")))}n.preventDefault();break;case"Escape":this.hide(),n.preventDefault();break;case"Enter":r&&this.handleItemClick(n,this.findModelItemFromKey(this.contextMenuService.activeItemKey),r),n.preventDefault()}}))}findModelItemFromKey(e){return null!=e&&this.model?e.split("_").reduce((r,s)=>r?r.items[s]:this.model[s],null):null}handleItemClick(e,n,r){if(n&&!n.disabled){if(n.command&&n.command({originalEvent:e,item:n}),n.items){let s=Ft.findSingle(r,".p-submenu-list");s&&(Ft.hasClass(s,"p-submenu-list-active")?this.removeActiveFromSubLists(r):(Ft.addClass(s,"p-submenu-list-active"),this.positionSubmenu(s)))}n.items||this.hide()}}unbindGlobalListeners(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null),this.documentTriggerListener&&(this.documentTriggerListener(),this.documentTriggerListener=null),this.windowResizeListener&&(window.removeEventListener("resize",this.windowResizeListener),this.windowResizeListener=null),this.documentKeydownListener&&(this.documentKeydownListener(),this.documentKeydownListener=null)}onWindowResize(e){this.containerViewChild.nativeElement.offsetParent&&this.hide()}isOutsideClicked(e){return!(this.containerViewChild.nativeElement.isSameNode(e.target)||this.containerViewChild.nativeElement.contains(e.target))}ngOnDestroy(){this.unbindGlobalListeners(),this.triggerEventListener&&this.triggerEventListener(),this.containerViewChild&&this.autoZIndex&&Ll.clear(this.containerViewChild.nativeElement),this.appendTo&&this.el.nativeElement.appendChild(this.containerViewChild.nativeElement),this.ngDestroy$.next(!0),this.ngDestroy$.complete()}}return i.\u0275fac=function(e){return new(e||i)(Xt(Yn),Xt(d),Xt(xo),Xt(Vo),Xt(UB),Xt(Dp))},i.\u0275cmp=_r({type:i,selectors:[["p-contextMenu"]],viewQuery:function(e,n){if(1&e&&Tr(Cae,5),2&e){let r;Wi(r=ji())&&(n.containerViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{model:"model",global:"global",target:"target",style:"style",styleClass:"styleClass",appendTo:"appendTo",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",triggerEvent:"triggerEvent"},outputs:{onShow:"onShow",onHide:"onHide"},decls:3,vars:6,consts:[[3,"ngClass","ngStyle"],["container",""],[3,"item","root"]],template:function(e,n){1&e&&(Ke(0,"div",0,1),Bn(2,"p-contextMenuSub",2),Je()),2&e&&(kr(n.styleClass),de("ngClass","p-contextmenu p-component")("ngStyle",n.style),Ie(2),de("item",n.model)("root",!0))},dependencies:[no,Po,wae],styles:[".p-contextmenu{position:absolute;display:none}.p-contextmenu ul{margin:0;padding:0;list-style:none}.p-contextmenu .p-submenu-list{position:absolute;min-width:100%;z-index:1;display:none}.p-contextmenu .p-menuitem-link{cursor:pointer;display:flex;align-items:center;text-decoration:none;overflow:hidden;position:relative}.p-contextmenu .p-menuitem-text{line-height:1}.p-contextmenu .p-menuitem{position:relative}.p-contextmenu .p-menuitem-link .p-submenu-icon{margin-left:auto}.p-contextmenu .p-menuitem-active>p-contextmenusub>.p-submenu-list.p-submenu-list-active{display:block!important}\n"],encapsulation:2,changeDetection:0}),i})(),Aae=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({providers:[UB],imports:[Os,s_,Xc,sv,s_,sv]}),i})(),xae=(()=>{class i{constructor(e,n,r,s){this.el=e,this.ngModel=n,this.control=r,this.cd=s,this.onResize=new Fn}ngOnInit(){this.ngModel&&(this.ngModelSubscription=this.ngModel.valueChanges.subscribe(()=>{this.updateState()})),this.control&&(this.ngControlSubscription=this.control.valueChanges.subscribe(()=>{this.updateState()}))}ngAfterViewInit(){this.autoResize&&this.resize(),this.updateFilledState(),this.cd.detectChanges()}onInput(e){this.updateState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length}onFocus(e){this.autoResize&&this.resize(e)}onBlur(e){this.autoResize&&this.resize(e)}resize(e){this.el.nativeElement.style.height="auto",this.el.nativeElement.style.height=this.el.nativeElement.scrollHeight+"px",parseFloat(this.el.nativeElement.style.height)>=parseFloat(this.el.nativeElement.style.maxHeight)?(this.el.nativeElement.style.overflowY="scroll",this.el.nativeElement.style.height=this.el.nativeElement.style.maxHeight):this.el.nativeElement.style.overflow="hidden",this.onResize.emit(e||{})}updateState(){this.updateFilledState(),this.autoResize&&this.resize()}ngOnDestroy(){this.ngModelSubscription&&this.ngModelSubscription.unsubscribe(),this.ngControlSubscription&&this.ngControlSubscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(Xt(Yn),Xt(oy,8),Xt(iv,8),Xt(xo))},i.\u0275dir=qr({type:i,selectors:[["","pInputTextarea",""]],hostAttrs:[1,"p-inputtextarea","p-inputtext","p-component","p-element"],hostVars:4,hostBindings:function(e,n){1&e&&mn("input",function(s){return n.onInput(s)})("focus",function(s){return n.onFocus(s)})("blur",function(s){return n.onBlur(s)}),2&e&&Mp("p-filled",n.filled)("p-inputtextarea-resizable",n.autoResize)},inputs:{autoResize:"autoResize"},outputs:{onResize:"onResize"}}),i})(),Iae=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({imports:[Os]}),i})();const Sae=["container"];function Eae(i,t){1&i&&Ni(0)}function Tae(i,t){if(1&i){const e=vi();Ke(0,"div",5),mn("mousedown",function(r){Pt(e);const s=be().index;return Rt(be().onGutterMouseDown(r,s))})("touchstart",function(r){Pt(e);const s=be().index;return Rt(be().onGutterTouchStart(r,s))}),Bn(1,"div",6),Je()}2&i&&de("ngStyle",be(2).gutterStyle())}function Mae(i,t){if(1&i&&(Ke(0,"div",0),$e(1,Eae,1,0,"ng-container",3),Je(),$e(2,Tae,2,1,"div",4)),2&i){const e=t.$implicit,n=t.index,r=be();kr(r.panelStyleClass),de("ngClass",r.panelContainerClass())("ngStyle",r.panelStyle),Ie(1),de("ngTemplateOutlet",e),Ie(1),de("ngIf",n!==r.panels.length-1)}}let E4=(()=>{class i{constructor(e,n){this.cd=e,this.el=n,this.stateStorage="session",this.stateKey=null,this.layout="horizontal",this.gutterSize=4,this.minSizes=[],this.onResizeEnd=new Fn,this.onResizeStart=new Fn,this.nested=!1,this.panels=[],this.dragging=!1,this.mouseMoveListener=null,this.mouseUpListener=null,this.touchMoveListener=null,this.touchEndListener=null,this.size=null,this.gutterElement=null,this.startPos=null,this.prevPanelElement=null,this.nextPanelElement=null,this.nextPanelSize=null,this.prevPanelSize=null,this._panelSizes=[],this.prevPanelIndex=null}get panelSizes(){return this._panelSizes}set panelSizes(e){if(this._panelSizes=e,this.el&&this.el.nativeElement&&this.panels.length>0){let n=[...this.el.nativeElement.children[0].children].filter(s=>Ft.hasClass(s,"p-splitter-panel")),r=[];this.panels.map((s,o)=>{let u=(this.panelSizes.length-1>=o?this.panelSizes[o]:null)||100/this.panels.length;r[o]=u,n[o].style.flexBasis="calc("+u+"% - "+(this.panels.length-1)*this.gutterSize+"px)"})}}ngOnInit(){this.nested=this.isNested()}ngAfterContentInit(){this.templates.forEach(e=>{e.getType(),this.panels.push(e.template)})}ngAfterViewInit(){if(this.panels&&this.panels.length){let e=!1;if(this.isStateful()&&(e=this.restoreState()),!e){let n=[...this.el.nativeElement.children[0].children].filter(s=>Ft.hasClass(s,"p-splitter-panel")),r=[];this.panels.map((s,o)=>{let u=(this.panelSizes.length-1>=o?this.panelSizes[o]:null)||100/this.panels.length;r[o]=u,n[o].style.flexBasis="calc("+u+"% - "+(this.panels.length-1)*this.gutterSize+"px)"}),this._panelSizes=r}}}resizeStart(e,n){this.gutterElement=e.currentTarget,this.size=this.horizontal()?Ft.getWidth(this.containerViewChild.nativeElement):Ft.getHeight(this.containerViewChild.nativeElement),this.dragging=!0,this.startPos=this.horizontal()?e.pageX||e.changedTouches[0].pageX:e.pageY||e.changedTouches[0].pageY,this.prevPanelElement=this.gutterElement.previousElementSibling,this.nextPanelElement=this.gutterElement.nextElementSibling,this.prevPanelSize=100*(this.horizontal()?Ft.getOuterWidth(this.prevPanelElement,!0):Ft.getOuterHeight(this.prevPanelElement,!0))/this.size,this.nextPanelSize=100*(this.horizontal()?Ft.getOuterWidth(this.nextPanelElement,!0):Ft.getOuterHeight(this.nextPanelElement,!0))/this.size,this.prevPanelIndex=n,Ft.addClass(this.gutterElement,"p-splitter-gutter-resizing"),Ft.addClass(this.containerViewChild.nativeElement,"p-splitter-resizing"),this.onResizeStart.emit({originalEvent:e,sizes:this._panelSizes})}onResize(e){let n;n=this.horizontal()?100*e.pageX/this.size-100*this.startPos/this.size:100*e.pageY/this.size-100*this.startPos/this.size;let r=this.prevPanelSize+n,s=this.nextPanelSize-n;this.validateResize(r,s)&&(this.prevPanelElement.style.flexBasis="calc("+r+"% - "+(this.panels.length-1)*this.gutterSize+"px)",this.nextPanelElement.style.flexBasis="calc("+s+"% - "+(this.panels.length-1)*this.gutterSize+"px)",this._panelSizes[this.prevPanelIndex]=r,this._panelSizes[this.prevPanelIndex+1]=s)}resizeEnd(e){this.isStateful()&&this.saveState(),this.onResizeEnd.emit({originalEvent:e,sizes:this._panelSizes}),Ft.removeClass(this.gutterElement,"p-splitter-gutter-resizing"),Ft.removeClass(this.containerViewChild.nativeElement,"p-splitter-resizing"),this.clear()}onGutterMouseDown(e,n){this.resizeStart(e,n),this.bindMouseListeners()}onGutterTouchStart(e,n){e.cancelable&&(this.resizeStart(e,n),this.bindTouchListeners(),e.preventDefault())}onGutterTouchEnd(e){this.resizeEnd(e),this.unbindTouchListeners(),e.cancelable&&e.preventDefault()}validateResize(e,n){return!(this.minSizes.length>=1&&this.minSizes[0]&&this.minSizes[0]>e||this.minSizes.length>1&&this.minSizes[1]&&this.minSizes[1]>n)}bindMouseListeners(){this.mouseMoveListener||(this.mouseMoveListener=e=>this.onResize(e),document.addEventListener("mousemove",this.mouseMoveListener)),this.mouseUpListener||(this.mouseUpListener=e=>{this.resizeEnd(e),this.unbindMouseListeners()},document.addEventListener("mouseup",this.mouseUpListener))}bindTouchListeners(){this.touchMoveListener||(this.touchMoveListener=e=>this.onResize(e.changedTouches[0]),document.addEventListener("touchmove",this.touchMoveListener)),this.touchEndListener||(this.touchEndListener=e=>{this.resizeEnd(e),this.unbindTouchListeners()},document.addEventListener("touchend",this.touchEndListener))}unbindMouseListeners(){this.mouseMoveListener&&(document.removeEventListener("mousemove",this.mouseMoveListener),this.mouseMoveListener=null),this.mouseUpListener&&(document.removeEventListener("mouseup",this.mouseUpListener),this.mouseUpListener=null)}unbindTouchListeners(){this.touchMoveListener&&(document.removeEventListener("touchmove",this.touchMoveListener),this.touchMoveListener=null),this.touchEndListener&&(document.removeEventListener("touchend",this.touchEndListener),this.touchEndListener=null)}clear(){this.dragging=!1,this.size=null,this.startPos=null,this.prevPanelElement=null,this.nextPanelElement=null,this.prevPanelSize=null,this.nextPanelSize=null,this.gutterElement=null,this.prevPanelIndex=null}isNested(){if(this.el.nativeElement){let e=this.el.nativeElement.parentElement;for(;e&&!Ft.hasClass(e,"p-splitter");)e=e.parentElement;return null!==e}return!1}isStateful(){return null!=this.stateKey}getStorage(){switch(this.stateStorage){case"local":return window.localStorage;case"session":return window.sessionStorage;default:throw new Error(this.stateStorage+' is not a valid value for the state storage, supported values are "local" and "session".')}}saveState(){this.getStorage().setItem(this.stateKey,JSON.stringify(this._panelSizes))}restoreState(){const n=this.getStorage().getItem(this.stateKey);return!!n&&(this._panelSizes=JSON.parse(n),[...this.containerViewChild.nativeElement.children].filter(s=>Ft.hasClass(s,"p-splitter-panel")).forEach((s,o)=>{s.style.flexBasis="calc("+this._panelSizes[o]+"% - "+(this.panels.length-1)*this.gutterSize+"px)"}),!0)}containerClass(){return{"p-splitter p-component":!0,"p-splitter-horizontal":"horizontal"===this.layout,"p-splitter-vertical":"vertical"===this.layout}}panelContainerClass(){return{"p-splitter-panel":!0,"p-splitter-panel-nested":!0}}gutterStyle(){return this.horizontal()?{width:this.gutterSize+"px"}:{height:this.gutterSize+"px"}}horizontal(){return"horizontal"===this.layout}}return i.\u0275fac=function(e){return new(e||i)(Xt(xo),Xt(Yn))},i.\u0275cmp=_r({type:i,selectors:[["p-splitter"]],contentQueries:function(e,n,r){if(1&e&&Ba(r,za,4),2&e){let s;Wi(s=ji())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&Tr(Sae,5),2&e){let r;Wi(r=ji())&&(n.containerViewChild=r.first)}},hostAttrs:[1,"p-element"],hostVars:2,hostBindings:function(e,n){2&e&&Mp("p-splitter-panel-nested",n.nested)},inputs:{styleClass:"styleClass",panelStyleClass:"panelStyleClass",style:"style",panelStyle:"panelStyle",stateStorage:"stateStorage",stateKey:"stateKey",layout:"layout",gutterSize:"gutterSize",minSizes:"minSizes",panelSizes:"panelSizes"},outputs:{onResizeEnd:"onResizeEnd",onResizeStart:"onResizeStart"},decls:3,vars:5,consts:[[3,"ngClass","ngStyle"],["container",""],["ngFor","",3,"ngForOf"],[4,"ngTemplateOutlet"],["class","p-splitter-gutter",3,"ngStyle","mousedown","touchstart",4,"ngIf"],[1,"p-splitter-gutter",3,"ngStyle","mousedown","touchstart"],[1,"p-splitter-gutter-handle"]],template:function(e,n){1&e&&(Ke(0,"div",0,1),$e(2,Mae,3,6,"ng-template",2),Je()),2&e&&(kr(n.styleClass),de("ngClass",n.containerClass())("ngStyle",n.style),Ie(2),de("ngForOf",n.panels))},dependencies:[no,jc,ho,el,Po],styles:[".p-splitter{display:flex;flex-wrap:nowrap}.p-splitter-vertical{flex-direction:column}.p-splitter-panel{flex-grow:1}.p-splitter-panel-nested{display:flex}.p-splitter-panel p-splitter{flex-grow:1}.p-splitter-panel .p-splitter{flex-grow:1;border:0 none}.p-splitter-gutter{flex-grow:0;flex-shrink:0;display:flex;align-items:center;justify-content:center;cursor:col-resize}.p-splitter-horizontal.p-splitter-resizing{cursor:col-resize;-webkit-user-select:none;user-select:none}.p-splitter-horizontal>.p-splitter-gutter>.p-splitter-gutter-handle{height:24px;width:100%}.p-splitter-horizontal>.p-splitter-gutter{cursor:col-resize}.p-splitter-vertical.p-splitter-resizing{cursor:row-resize;-webkit-user-select:none;user-select:none}.p-splitter-vertical>.p-splitter-gutter{cursor:row-resize}.p-splitter-vertical>.p-splitter-gutter>.p-splitter-gutter-handle{width:24px;height:100%}\n"],encapsulation:2,changeDetection:0}),i})(),Dae=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({imports:[Os,xa]}),i})();function Lae(i,t){1&i&&Ni(0)}function Pae(i,t){if(1&i&&(zr(0),$e(1,Lae,1,0,"ng-container",3),Vr()),2&i){const e=be(2);Ie(1),de("ngTemplateOutlet",e.contentTemplate)}}function Rae(i,t){if(1&i&&(Ke(0,"div",1),su(1),$e(2,Pae,2,1,"ng-container",2),Je()),2&i){const e=be();de("hidden",!e.selected),vr("id",e.id)("aria-hidden",!e.selected)("aria-labelledby",e.id+"-label"),Ie(2),de("ngIf",e.contentTemplate&&(e.cache?e.loaded:e.selected))}}const T4=["*"],kae=["content"],Oae=["navbar"],Fae=["prevBtn"],Nae=["nextBtn"],Bae=["inkbar"];function zae(i,t){if(1&i){const e=vi();Ke(0,"button",12,13),mn("click",function(){return Pt(e),Rt(be().navBackward())}),Bn(2,"span",14),Je()}}function Vae(i,t){1&i&&Bn(0,"span",24),2&i&&de("ngClass",be(3).$implicit.leftIcon)}function Uae(i,t){1&i&&Bn(0,"span",25),2&i&&de("ngClass",be(3).$implicit.rightIcon)}function Hae(i,t){if(1&i&&(zr(0),$e(1,Vae,1,1,"span",21),Ke(2,"span",22),li(3),Je(),$e(4,Uae,1,1,"span",23),Vr()),2&i){const e=be(2).$implicit;Ie(1),de("ngIf",e.leftIcon),Ie(2),ts(e.header),Ie(1),de("ngIf",e.rightIcon)}}function Gae(i,t){1&i&&Ni(0)}function Wae(i,t){if(1&i){const e=vi();Ke(0,"span",26),mn("click",function(r){Pt(e);const s=be(2).$implicit;return Rt(be().close(r,s))}),Je()}}const jae=function(i,t){return{"p-highlight":i,"p-disabled":t}};function $ae(i,t){if(1&i){const e=vi();Ke(0,"li",16)(1,"a",17),mn("click",function(r){Pt(e);const s=be().$implicit;return Rt(be().open(r,s))})("keydown.enter",function(r){Pt(e);const s=be().$implicit;return Rt(be().open(r,s))}),$e(2,Hae,5,3,"ng-container",18),$e(3,Gae,1,0,"ng-container",19),$e(4,Wae,1,0,"span",20),Je()()}if(2&i){const e=be().$implicit;kr(e.headerStyleClass),de("ngClass",ss(16,jae,e.selected,e.disabled))("ngStyle",e.headerStyle),Ie(1),de("pTooltip",e.tooltip)("tooltipPosition",e.tooltipPosition)("positionStyle",e.tooltipPositionStyle)("tooltipStyleClass",e.tooltipStyleClass),vr("id",e.id+"-label")("aria-selected",e.selected)("aria-controls",e.id)("aria-selected",e.selected)("tabindex",e.disabled?null:"0"),Ie(1),de("ngIf",!e.headerTemplate),Ie(1),de("ngTemplateOutlet",e.headerTemplate),Ie(1),de("ngIf",e.closable)}}function qae(i,t){1&i&&$e(0,$ae,5,19,"li",15),2&i&&de("ngIf",!t.$implicit.closed)}function Xae(i,t){if(1&i){const e=vi();Ke(0,"button",27,28),mn("click",function(){return Pt(e),Rt(be().navForward())}),Bn(2,"span",29),Je()}}const Yae=function(i){return{"p-tabview p-component":!0,"p-tabview-scrollable":i}};let Kae=0,M4=(()=>{class i{constructor(e,n,r){this.viewContainer=n,this.cd=r,this.cache=!0,this.tooltipPosition="top",this.tooltipPositionStyle="absolute",this.id="p-tabpanel-"+Kae++,this.tabView=e}ngAfterContentInit(){this.templates.forEach(e=>{"header"===e.getType()?this.headerTemplate=e.template:this.contentTemplate=e.template})}get selected(){return this._selected}set selected(e){this._selected=e,this.loaded||this.cd.detectChanges(),e&&(this.loaded=!0)}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this.tabView.cd.markForCheck()}get header(){return this._header}set header(e){this._header=e,Promise.resolve().then(()=>{this.tabView.updateInkBar(),this.tabView.cd.markForCheck()})}get leftIcon(){return this._leftIcon}set leftIcon(e){this._leftIcon=e,this.tabView.cd.markForCheck()}get rightIcon(){return this._rightIcon}set rightIcon(e){this._rightIcon=e,this.tabView.cd.markForCheck()}ngOnDestroy(){this.view=null}}return i.\u0275fac=function(e){return new(e||i)(Xt(cs(()=>D4)),Xt(dg),Xt(xo))},i.\u0275cmp=_r({type:i,selectors:[["p-tabPanel"]],contentQueries:function(e,n,r){if(1&e&&Ba(r,za,4),2&e){let s;Wi(s=ji())&&(n.templates=s)}},hostAttrs:[1,"p-element"],inputs:{closable:"closable",headerStyle:"headerStyle",headerStyleClass:"headerStyleClass",cache:"cache",tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",selected:"selected",disabled:"disabled",header:"header",leftIcon:"leftIcon",rightIcon:"rightIcon"},ngContentSelectors:T4,decls:1,vars:1,consts:[["class","p-tabview-panel","role","tabpanel",3,"hidden",4,"ngIf"],["role","tabpanel",1,"p-tabview-panel",3,"hidden"],[4,"ngIf"],[4,"ngTemplateOutlet"]],template:function(e,n){1&e&&(Bf(),$e(0,Rae,3,5,"div",0)),2&e&&de("ngIf",!n.closed)},dependencies:[ho,el],encapsulation:2}),i})(),D4=(()=>{class i{constructor(e,n){this.el=e,this.cd=n,this.orientation="top",this.onChange=new Fn,this.onClose=new Fn,this.activeIndexChange=new Fn,this.backwardIsDisabled=!0,this.forwardIsDisabled=!1}ngAfterContentInit(){this.initTabs(),this.tabChangesSubscription=this.tabPanels.changes.subscribe(e=>{this.initTabs()})}ngAfterViewChecked(){this.tabChanged&&(this.updateInkBar(),this.tabChanged=!1)}ngOnDestroy(){this.tabChangesSubscription&&this.tabChangesSubscription.unsubscribe()}initTabs(){this.tabs=this.tabPanels.toArray(),!this.findSelectedTab()&&this.tabs.length&&(null!=this.activeIndex&&this.tabs.length>this.activeIndex?this.tabs[this.activeIndex].selected=!0:this.tabs[0].selected=!0,this.tabChanged=!0),this.cd.markForCheck()}open(e,n){if(n.disabled)e&&e.preventDefault();else{if(!n.selected){let r=this.findSelectedTab();r&&(r.selected=!1),this.tabChanged=!0,n.selected=!0;let s=this.findTabIndex(n);this.preventActiveIndexPropagation=!0,this.activeIndexChange.emit(s),this.onChange.emit({originalEvent:e,index:s}),this.updateScrollBar(s)}e&&e.preventDefault()}}close(e,n){this.controlClose?this.onClose.emit({originalEvent:e,index:this.findTabIndex(n),close:()=>{this.closeTab(n)}}):(this.closeTab(n),this.onClose.emit({originalEvent:e,index:this.findTabIndex(n)})),e.stopPropagation()}closeTab(e){if(!e.disabled){if(e.selected){this.tabChanged=!0,e.selected=!1;for(let n=0;n<this.tabs.length;n++){let r=this.tabs[n];if(!r.closed&&!e.disabled){r.selected=!0;break}}}e.closed=!0}}findSelectedTab(){for(let e=0;e<this.tabs.length;e++)if(this.tabs[e].selected)return this.tabs[e];return null}findTabIndex(e){let n=-1;for(let r=0;r<this.tabs.length;r++)if(this.tabs[r]==e){n=r;break}return n}getBlockableElement(){return this.el.nativeElement.children[0]}get activeIndex(){return this._activeIndex}set activeIndex(e){this._activeIndex=e,this.preventActiveIndexPropagation?this.preventActiveIndexPropagation=!1:this.tabs&&this.tabs.length&&null!=this._activeIndex&&this.tabs.length>this._activeIndex&&(this.findSelectedTab().selected=!1,this.tabs[this._activeIndex].selected=!0,this.tabChanged=!0,this.updateScrollBar(e))}updateInkBar(){if(this.navbar){const e=Ft.findSingle(this.navbar.nativeElement,"li.p-highlight");if(!e)return;this.inkbar.nativeElement.style.width=Ft.getWidth(e)+"px",this.inkbar.nativeElement.style.left=Ft.getOffset(e).left-Ft.getOffset(this.navbar.nativeElement).left+"px"}}updateScrollBar(e){this.navbar.nativeElement.children[e].scrollIntoView({block:"nearest"})}updateButtonState(){const e=this.content.nativeElement,{scrollLeft:n,scrollWidth:r}=e,s=Ft.getWidth(e);this.backwardIsDisabled=0===n,this.forwardIsDisabled=parseInt(n)===r-s}onScroll(e){this.scrollable&&this.updateButtonState(),e.preventDefault()}getVisibleButtonWidths(){return[this.prevBtn?.nativeElement,this.nextBtn?.nativeElement].reduce((e,n)=>n?e+Ft.getWidth(n):e,0)}navBackward(){const e=this.content.nativeElement,n=Ft.getWidth(e)-this.getVisibleButtonWidths(),r=e.scrollLeft-n;e.scrollLeft=r<=0?0:r}navForward(){const e=this.content.nativeElement,n=Ft.getWidth(e)-this.getVisibleButtonWidths(),r=e.scrollLeft+n,s=e.scrollWidth-n;e.scrollLeft=r>=s?s:r}}return i.\u0275fac=function(e){return new(e||i)(Xt(Yn),Xt(xo))},i.\u0275cmp=_r({type:i,selectors:[["p-tabView"]],contentQueries:function(e,n,r){if(1&e&&Ba(r,M4,4),2&e){let s;Wi(s=ji())&&(n.tabPanels=s)}},viewQuery:function(e,n){if(1&e&&(Tr(kae,5),Tr(Oae,5),Tr(Fae,5),Tr(Nae,5),Tr(Bae,5)),2&e){let r;Wi(r=ji())&&(n.content=r.first),Wi(r=ji())&&(n.navbar=r.first),Wi(r=ji())&&(n.prevBtn=r.first),Wi(r=ji())&&(n.nextBtn=r.first),Wi(r=ji())&&(n.inkbar=r.first)}},hostAttrs:[1,"p-element"],inputs:{orientation:"orientation",style:"style",styleClass:"styleClass",controlClose:"controlClose",scrollable:"scrollable",activeIndex:"activeIndex"},outputs:{onChange:"onChange",onClose:"onClose",activeIndexChange:"activeIndexChange"},ngContentSelectors:T4,decls:13,vars:9,consts:[[3,"ngClass","ngStyle"],[1,"p-tabview-nav-container"],["class","p-tabview-nav-prev p-tabview-nav-btn p-link","type","button","pRipple","",3,"click",4,"ngIf"],[1,"p-tabview-nav-content",3,"scroll"],["content",""],["role","tablist",1,"p-tabview-nav"],["navbar",""],["ngFor","",3,"ngForOf"],[1,"p-tabview-ink-bar"],["inkbar",""],["class","p-tabview-nav-next p-tabview-nav-btn p-link","type","button","pRipple","",3,"click",4,"ngIf"],[1,"p-tabview-panels"],["type","button","pRipple","",1,"p-tabview-nav-prev","p-tabview-nav-btn","p-link",3,"click"],["prevBtn",""],[1,"pi","pi-chevron-left"],["role","presentation",3,"ngClass","ngStyle","class",4,"ngIf"],["role","presentation",3,"ngClass","ngStyle"],["role","tab","pRipple","",1,"p-tabview-nav-link",3,"pTooltip","tooltipPosition","positionStyle","tooltipStyleClass","click","keydown.enter"],[4,"ngIf"],[4,"ngTemplateOutlet"],["class","p-tabview-close pi pi-times",3,"click",4,"ngIf"],["class","p-tabview-left-icon",3,"ngClass",4,"ngIf"],[1,"p-tabview-title"],["class","p-tabview-right-icon",3,"ngClass",4,"ngIf"],[1,"p-tabview-left-icon",3,"ngClass"],[1,"p-tabview-right-icon",3,"ngClass"],[1,"p-tabview-close","pi","pi-times",3,"click"],["type","button","pRipple","",1,"p-tabview-nav-next","p-tabview-nav-btn","p-link",3,"click"],["nextBtn",""],[1,"pi","pi-chevron-right"]],template:function(e,n){1&e&&(Bf(),Ke(0,"div",0)(1,"div",1),$e(2,zae,3,0,"button",2),Ke(3,"div",3,4),mn("scroll",function(s){return n.onScroll(s)}),Ke(5,"ul",5,6),$e(7,qae,1,1,"ng-template",7),Bn(8,"li",8,9),Je()(),$e(10,Xae,3,0,"button",10),Je(),Ke(11,"div",11),su(12),Je()()),2&e&&(kr(n.styleClass),de("ngClass",_i(7,Yae,n.scrollable))("ngStyle",n.style),Ie(2),de("ngIf",n.scrollable&&!n.backwardIsDisabled),Ie(5),de("ngForOf",n.tabs),Ie(3),de("ngIf",n.scrollable&&!n.forwardIsDisabled))},dependencies:[no,jc,ho,el,Po,rv,Du],styles:[".p-tabview-nav-container{position:relative}.p-tabview-scrollable .p-tabview-nav-container{overflow:hidden}.p-tabview-nav-content{overflow-x:auto;overflow-y:hidden;scroll-behavior:smooth;scrollbar-width:none;overscroll-behavior:contain auto}.p-tabview-nav{display:flex;margin:0;padding:0;list-style-type:none;flex:1 1 auto}.p-tabview-nav-link{cursor:pointer;-webkit-user-select:none;user-select:none;display:flex;align-items:center;position:relative;text-decoration:none;overflow:hidden}.p-tabview-ink-bar{display:none;z-index:1}.p-tabview-nav-link:focus{z-index:1}.p-tabview-title{line-height:1;white-space:nowrap}.p-tabview-nav-btn{position:absolute;top:0;z-index:2;height:100%;display:flex;align-items:center;justify-content:center}.p-tabview-nav-prev{left:0}.p-tabview-nav-next{right:0}.p-tabview-nav-content::-webkit-scrollbar{display:none}.p-tabview-close{z-index:1}\n"],encapsulation:2,changeDetection:0}),i})(),Zae=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({imports:[Os,xa,sv,Xc,xa]}),i})();const L4=function(i){return{"p-treenode-droppoint-active":i}};function Qae(i,t){if(1&i){const e=vi();Ke(0,"li",4),mn("drop",function(r){return Pt(e),Rt(be(2).onDropPoint(r,-1))})("dragover",function(r){return Pt(e),Rt(be(2).onDropPointDragOver(r))})("dragenter",function(r){return Pt(e),Rt(be(2).onDropPointDragEnter(r,-1))})("dragleave",function(r){return Pt(e),Rt(be(2).onDropPointDragLeave(r))}),Je()}if(2&i){const e=be(2);de("ngClass",_i(1,L4,e.draghoverPrev))}}const Jae=function(i){return{"p-checkbox-disabled":i}},ele=function(i,t){return{"p-highlight":i,"p-indeterminate":t}},tle=function(i,t){return{"pi-check":i,"pi-minus":t}};function nle(i,t){if(1&i&&(Ke(0,"div",13)(1,"div",14),Bn(2,"span",15),Je()()),2&i){const e=be(3);de("ngClass",_i(4,Jae,!1===e.node.selectable)),vr("aria-checked",e.isSelected()),Ie(1),de("ngClass",ss(6,ele,e.isSelected(),e.node.partialSelected)),Ie(1),de("ngClass",ss(9,tle,e.isSelected(),e.node.partialSelected))}}function ile(i,t){1&i&&Bn(0,"span"),2&i&&kr(be(3).getIcon())}function rle(i,t){if(1&i&&(Ke(0,"span"),li(1),Je()),2&i){const e=be(3);Ie(1),ts(e.node.label)}}function sle(i,t){1&i&&Ni(0)}const P4=function(i){return{$implicit:i}};function ole(i,t){if(1&i&&(Ke(0,"span"),$e(1,sle,1,0,"ng-container",16),Je()),2&i){const e=be(3);Ie(1),de("ngTemplateOutlet",e.tree.getTemplateForNode(e.node))("ngTemplateOutletContext",_i(2,P4,e.node))}}function ale(i,t){if(1&i&&Bn(0,"p-treeNode",19),2&i){const e=t.$implicit,n=t.first,r=t.last,s=t.index,o=be(4);de("node",e)("parentNode",o.node)("firstChild",n)("lastChild",r)("index",s)("itemSize",o.itemSize)("level",o.level+1)}}function lle(i,t){if(1&i&&(Ke(0,"ul",17),$e(1,ale,1,7,"p-treeNode",18),Je()),2&i){const e=be(3);Ad("display",e.node.expanded?"block":"none"),Ie(1),de("ngForOf",e.node.children)("ngForTrackBy",e.tree.trackBy)}}const cle=function(i,t){return["p-treenode",i,t]},R4=function(i){return{height:i}},ule=function(i,t,e){return{"p-treenode-selectable":i,"p-treenode-dragover":t,"p-highlight":e}},hle=function(i,t){return{"pi-chevron-right":i,"pi-chevron-down":t}};function dle(i,t){if(1&i){const e=vi();Ke(0,"li",5)(1,"div",6),mn("click",function(r){return Pt(e),Rt(be(2).onNodeClick(r))})("contextmenu",function(r){return Pt(e),Rt(be(2).onNodeRightClick(r))})("touchend",function(){return Pt(e),Rt(be(2).onNodeTouchEnd())})("drop",function(r){return Pt(e),Rt(be(2).onDropNode(r))})("dragover",function(r){return Pt(e),Rt(be(2).onDropNodeDragOver(r))})("dragenter",function(r){return Pt(e),Rt(be(2).onDropNodeDragEnter(r))})("dragleave",function(r){return Pt(e),Rt(be(2).onDropNodeDragLeave(r))})("dragstart",function(r){return Pt(e),Rt(be(2).onDragStart(r))})("dragend",function(r){return Pt(e),Rt(be(2).onDragStop(r))})("keydown",function(r){return Pt(e),Rt(be(2).onKeyDown(r))}),Ke(2,"button",7),mn("click",function(r){return Pt(e),Rt(be(2).toggle(r))}),Bn(3,"span",8),Je(),$e(4,nle,3,12,"div",9),$e(5,ile,1,2,"span",3),Ke(6,"span",10),$e(7,rle,2,1,"span",11),$e(8,ole,2,4,"span",11),Je()(),$e(9,lle,2,4,"ul",12),Je()}if(2&i){const e=be(2);de("ngClass",ss(18,cle,e.node.styleClass||"",e.isLeaf()?"p-treenode-leaf":""))("ngStyle",_i(21,R4,e.itemSize+"px")),Ie(1),Ad("padding-left",e.level*e.indentation+"rem"),de("draggable",e.tree.draggableNodes)("ngClass",Su(23,ule,e.tree.selectionMode&&!1!==e.node.selectable,e.draghoverNode,e.isSelected())),vr("tabindex",0)("aria-posinset",e.index+1)("aria-expanded",e.node.expanded)("aria-selected",e.isSelected())("aria-label",e.node.label),Ie(1),vr("aria-label",e.tree.togglerAriaLabel),Ie(1),de("ngClass",ss(27,hle,!e.node.expanded,e.node.expanded)),Ie(1),de("ngIf","checkbox"==e.tree.selectionMode),Ie(1),de("ngIf",e.node.icon||e.node.expandedIcon||e.node.collapsedIcon),Ie(2),de("ngIf",!e.tree.getTemplateForNode(e.node)),Ie(1),de("ngIf",e.tree.getTemplateForNode(e.node)),Ie(1),de("ngIf",!e.tree.virtualScroll&&e.node.children&&e.node.expanded)}}function fle(i,t){if(1&i){const e=vi();Ke(0,"li",4),mn("drop",function(r){return Pt(e),Rt(be(2).onDropPoint(r,1))})("dragover",function(r){return Pt(e),Rt(be(2).onDropPointDragOver(r))})("dragenter",function(r){return Pt(e),Rt(be(2).onDropPointDragEnter(r,1))})("dragleave",function(r){return Pt(e),Rt(be(2).onDropPointDragLeave(r))}),Je()}if(2&i){const e=be(2);de("ngClass",_i(1,L4,e.draghoverNext))}}const k4=function(i){return{"p-treenode-connector-line":i}};function ple(i,t){if(1&i&&(Ke(0,"td",25)(1,"table",26)(2,"tbody")(3,"tr"),Bn(4,"td",27),Je(),Ke(5,"tr"),Bn(6,"td",27),Je()()()()),2&i){const e=be(3);Ie(4),de("ngClass",_i(2,k4,!e.firstChild)),Ie(2),de("ngClass",_i(4,k4,!e.lastChild))}}const gle=function(i,t){return{"pi-plus":i,"pi-minus":t}};function mle(i,t){if(1&i){const e=vi();Ke(0,"span",28),mn("click",function(r){return Pt(e),Rt(be(3).toggle(r))}),Je()}if(2&i){const e=be(3);de("ngClass",ss(2,gle,!e.node.expanded,e.node.expanded)),vr("aria-label",e.tree.togglerAriaLabel)}}function vle(i,t){1&i&&Bn(0,"span"),2&i&&kr(be(3).getIcon())}function yle(i,t){if(1&i&&(Ke(0,"span"),li(1),Je()),2&i){const e=be(3);Ie(1),ts(e.node.label)}}function _le(i,t){1&i&&Ni(0)}function ble(i,t){if(1&i&&(Ke(0,"span"),$e(1,_le,1,0,"ng-container",16),Je()),2&i){const e=be(3);Ie(1),de("ngTemplateOutlet",e.tree.getTemplateForNode(e.node))("ngTemplateOutletContext",_i(2,P4,e.node))}}function Cle(i,t){if(1&i&&Bn(0,"p-treeNode",32),2&i){const n=t.first,r=t.last;de("node",t.$implicit)("firstChild",n)("lastChild",r)}}function wle(i,t){if(1&i&&(Ke(0,"td",29)(1,"div",30),$e(2,Cle,1,3,"p-treeNode",31),Je()()),2&i){const e=be(3);Ad("display",e.node.expanded?"table-cell":"none"),Ie(2),de("ngForOf",e.node.children)("ngForTrackBy",e.tree.trackBy)}}const Ale=function(i){return{"p-treenode-collapsed":i}},xle=function(i,t){return{"p-treenode-selectable":i,"p-highlight":t}};function Ile(i,t){if(1&i){const e=vi();Ke(0,"table")(1,"tbody")(2,"tr"),$e(3,ple,7,6,"td",20),Ke(4,"td",21)(5,"div",22),mn("click",function(r){return Pt(e),Rt(be(2).onNodeClick(r))})("contextmenu",function(r){return Pt(e),Rt(be(2).onNodeRightClick(r))})("touchend",function(){return Pt(e),Rt(be(2).onNodeTouchEnd())})("keydown",function(r){return Pt(e),Rt(be(2).onNodeKeydown(r))}),$e(6,mle,1,5,"span",23),$e(7,vle,1,2,"span",3),Ke(8,"span",10),$e(9,yle,2,1,"span",11),$e(10,ble,2,4,"span",11),Je()()(),$e(11,wle,3,4,"td",24),Je()()()}if(2&i){const e=be(2);kr(e.node.styleClass),Ie(3),de("ngIf",!e.root),Ie(1),de("ngClass",_i(10,Ale,!e.node.expanded)),Ie(1),de("ngClass",ss(12,xle,e.tree.selectionMode,e.isSelected())),Ie(1),de("ngIf",!e.isLeaf()),Ie(1),de("ngIf",e.node.icon||e.node.expandedIcon||e.node.collapsedIcon),Ie(2),de("ngIf",!e.tree.getTemplateForNode(e.node)),Ie(1),de("ngIf",e.tree.getTemplateForNode(e.node)),Ie(1),de("ngIf",e.node.children&&e.node.expanded)}}function Sle(i,t){if(1&i&&($e(0,Qae,1,3,"li",1),$e(1,dle,10,30,"li",2),$e(2,fle,1,3,"li",1),$e(3,Ile,12,15,"table",3)),2&i){const e=be();de("ngIf",e.tree.droppableNodes),Ie(1),de("ngIf",!e.tree.horizontal),Ie(1),de("ngIf",e.tree.droppableNodes&&e.lastChild),Ie(1),de("ngIf",e.tree.horizontal)}}const Ele=["filter"],Tle=["scroller"],Mle=["wrapper"];function Dle(i,t){if(1&i&&(Ke(0,"div",9),Bn(1,"i"),Je()),2&i){const e=be(2);Ie(1),kr("p-tree-loading-icon pi-spin "+e.loadingIcon)}}function Lle(i,t){1&i&&Ni(0)}function Ple(i,t){if(1&i){const e=vi();Ke(0,"div",10)(1,"input",11,12),mn("keydown.enter",function(r){return r.preventDefault()})("input",function(r){return Pt(e),Rt(be(2)._filter(r.target.value))}),Je(),Bn(3,"span",13),Je()}if(2&i){const e=be(2);Ie(1),vr("placeholder",e.filterPlaceholder)}}function Rle(i,t){if(1&i&&Bn(0,"p-treeNode",20),2&i){const e=t.$implicit,n=t.first,r=t.last,s=t.index,o=be(2).options,l=be(3);de("level",e.level)("rowNode",e)("node",e.node)("firstChild",n)("lastChild",r)("index",l.getIndex(o,s))("itemSize",o.itemSize)("indentation",l.indentation)}}function kle(i,t){if(1&i&&(Ke(0,"ul",18),$e(1,Rle,1,8,"p-treeNode",19),Je()),2&i){const e=be(),n=e.options,r=e.$implicit,s=be(3);to(n.contentStyle),de("ngClass",n.contentStyleClass),vr("aria-label",s.ariaLabel)("aria-labelledby",s.ariaLabelledBy),Ie(1),de("ngForOf",r)("ngForTrackBy",s.trackBy)}}function Ole(i,t){1&i&&$e(0,kle,2,7,"ul",17),2&i&&de("ngIf",t.$implicit)}function Fle(i,t){1&i&&Ni(0)}const Nle=function(i){return{options:i}};function Ble(i,t){if(1&i&&$e(0,Fle,1,0,"ng-container",22),2&i){const e=t.options;de("ngTemplateOutlet",be(4).loaderTemplate)("ngTemplateOutletContext",_i(2,Nle,e))}}function zle(i,t){1&i&&(zr(0),$e(1,Ble,1,4,"ng-template",21),Vr())}function Vle(i,t){if(1&i){const e=vi();Ke(0,"p-scroller",14,15),mn("onScroll",function(r){return Pt(e),Rt(be(2).onScroll.emit(r))})("onScrollIndexChange",function(r){return Pt(e),Rt(be(2).onScrollIndexChange.emit(r))})("onLazyLoad",function(r){return Pt(e),Rt(be(2).onLazyLoad.emit(r))}),$e(2,Ole,1,1,"ng-template",16),$e(3,zle,2,0,"ng-container",7),Je()}if(2&i){const e=be(2);to(_i(7,R4,e.scrollHeight)),de("items",e.serializedValue)("itemSize",e.virtualScrollItemSize||e._virtualNodeHeight)("lazy",e.lazy)("options",e.virtualScrollOptions),Ie(3),de("ngIf",e.loaderTemplate)}}function Ule(i,t){if(1&i&&Bn(0,"p-treeNode",28),2&i){const n=t.first,r=t.last,s=t.index;de("node",t.$implicit)("firstChild",n)("lastChild",r)("index",s)("level",0)}}function Hle(i,t){if(1&i&&(Ke(0,"ul",26),$e(1,Ule,1,5,"p-treeNode",27),Je()),2&i){const e=be(3);vr("aria-label",e.ariaLabel)("aria-labelledby",e.ariaLabelledBy),Ie(1),de("ngForOf",e.getRootNode())("ngForTrackBy",e.trackBy)}}function Gle(i,t){if(1&i&&(zr(0),Ke(1,"div",23,24),$e(3,Hle,2,4,"ul",25),Je(),Vr()),2&i){const e=be(2);Ie(1),Ad("max-height",e.scrollHeight),Ie(2),de("ngIf",e.getRootNode())}}function Wle(i,t){if(1&i&&(zr(0),li(1),Vr()),2&i){const e=be(3);Ie(1),yc(" ",e.emptyMessageLabel," ")}}function jle(i,t){1&i&&Ni(0,null,31)}function $le(i,t){if(1&i&&(Ke(0,"div",29),$e(1,Wle,2,1,"ng-container",30),$e(2,jle,2,0,"ng-container",4),Je()),2&i){const e=be(2);Ie(1),de("ngIf",!e.emptyMessageTemplate)("ngIfElse",e.emptyFilter),Ie(1),de("ngTemplateOutlet",e.emptyMessageTemplate)}}function qle(i,t){1&i&&Ni(0)}const Xle=function(i,t,e,n){return{"p-tree p-component":!0,"p-tree-selectable":i,"p-treenode-dragover":t,"p-tree-loading":e,"p-tree-flex-scrollable":n}};function Yle(i,t){if(1&i){const e=vi();Ke(0,"div",2),mn("drop",function(r){return Pt(e),Rt(be().onDrop(r))})("dragover",function(r){return Pt(e),Rt(be().onDragOver(r))})("dragenter",function(){return Pt(e),Rt(be().onDragEnter())})("dragleave",function(r){return Pt(e),Rt(be().onDragLeave(r))}),$e(1,Dle,2,2,"div",3),$e(2,Lle,1,0,"ng-container",4),$e(3,Ple,4,1,"div",5),$e(4,Vle,4,9,"p-scroller",6),$e(5,Gle,4,3,"ng-container",7),$e(6,$le,3,3,"div",8),$e(7,qle,1,0,"ng-container",4),Je()}if(2&i){const e=be();kr(e.styleClass),de("ngClass",sf(11,Xle,e.selectionMode,e.dragHover,e.loading,"flex"===e.scrollHeight))("ngStyle",e.style),Ie(1),de("ngIf",e.loading),Ie(1),de("ngTemplateOutlet",e.headerTemplate),Ie(1),de("ngIf",e.filter),Ie(1),de("ngIf",e.virtualScroll),Ie(1),de("ngIf",!e.virtualScroll),Ie(1),de("ngIf",!e.loading&&(null==e.getRootNode()||0===e.getRootNode().length)),Ie(1),de("ngTemplateOutlet",e.footerTemplate)}}function Kle(i,t){1&i&&Ni(0)}function Zle(i,t){if(1&i&&(Ke(0,"div",34),Bn(1,"i"),Je()),2&i){const e=be(2);Ie(1),kr("p-tree-loading-icon pi-spin "+e.loadingIcon)}}function Qle(i,t){if(1&i&&(Ke(0,"table"),Bn(1,"p-treeNode",35),Je()),2&i){const e=be(2);Ie(1),de("node",e.value[0])("root",!0)}}function Jle(i,t){if(1&i&&(zr(0),li(1),Vr()),2&i){const e=be(3);Ie(1),yc(" ",e.emptyMessageLabel," ")}}function ece(i,t){1&i&&Ni(0,null,31)}function tce(i,t){if(1&i&&(Ke(0,"div",29),$e(1,Jle,2,1,"ng-container",30),$e(2,ece,2,0,"ng-container",4),Je()),2&i){const e=be(2);Ie(1),de("ngIf",!e.emptyMessageTemplate)("ngIfElse",e.emptyFilter),Ie(1),de("ngTemplateOutlet",e.emptyMessageTemplate)}}function nce(i,t){1&i&&Ni(0)}const ice=function(i){return{"p-tree p-tree-horizontal p-component":!0,"p-tree-selectable":i}};function rce(i,t){if(1&i&&(Ke(0,"div",32),$e(1,Kle,1,0,"ng-container",4),$e(2,Zle,2,2,"div",33),$e(3,Qle,2,2,"table",7),$e(4,tce,3,3,"div",8),$e(5,nce,1,0,"ng-container",4),Je()),2&i){const e=be();kr(e.styleClass),de("ngClass",_i(9,ice,e.selectionMode))("ngStyle",e.style),Ie(1),de("ngTemplateOutlet",e.headerTemplate),Ie(1),de("ngIf",e.loading),Ie(1),de("ngIf",e.value&&e.value[0]),Ie(1),de("ngIf",!e.loading&&(null==e.getRootNode()||0===e.getRootNode().length)),Ie(1),de("ngTemplateOutlet",e.footerTemplate)}}let sce=(()=>{class i{constructor(e){this.tree=e}ngOnInit(){this.node.parent=this.parentNode,this.parentNode&&this.tree.syncNodeOption(this.node,this.tree.value,"parent",this.tree.getNodeWithKey(this.parentNode.key,this.tree.value))}getIcon(){let e;return e=this.node.icon?this.node.icon:this.node.expanded&&this.node.children&&this.node.children.length?this.node.expandedIcon:this.node.collapsedIcon,i.ICON_CLASS+" "+e}isLeaf(){return this.tree.isNodeLeaf(this.node)}toggle(e){this.node.expanded?this.collapse(e):this.expand(e)}expand(e){this.node.expanded=!0,this.tree.virtualScroll&&this.tree.updateSerializedValue(),this.tree.onNodeExpand.emit({originalEvent:e,node:this.node})}collapse(e){this.node.expanded=!1,this.tree.virtualScroll&&this.tree.updateSerializedValue(),this.tree.onNodeCollapse.emit({originalEvent:e,node:this.node})}onNodeClick(e){this.tree.onNodeClick(e,this.node)}onNodeKeydown(e){13===e.which&&this.tree.onNodeClick(e,this.node)}onNodeTouchEnd(){this.tree.onNodeTouchEnd()}onNodeRightClick(e){this.tree.onNodeRightClick(e,this.node)}isSelected(){return this.tree.isSelected(this.node)}onDropPoint(e,n){e.preventDefault();let r=this.tree.dragNode,l=this.tree.dragNodeTree!==this.tree||1===n||this.tree.dragNodeIndex!==this.index-1;if(this.tree.allowDrop(r,this.node,this.tree.dragNodeScope)&&l){let u={...this.createDropPointEventMetadata(n)};this.tree.validateDrop?this.tree.onNodeDrop.emit({originalEvent:e,dragNode:r,dropNode:this.node,index:this.index,accept:()=>{this.processPointDrop(u)}}):(this.processPointDrop(u),this.tree.onNodeDrop.emit({originalEvent:e,dragNode:r,dropNode:this.node,index:this.index}))}this.draghoverPrev=!1,this.draghoverNext=!1}processPointDrop(e){let n=e.dropNode.parent?e.dropNode.parent.children:this.tree.value;e.dragNodeSubNodes.splice(e.dragNodeIndex,1);let r=this.index;e.position<0?(r=e.dragNodeSubNodes===n?e.dragNodeIndex>e.index?e.index:e.index-1:e.index,n.splice(r,0,e.dragNode)):(r=n.length,n.push(e.dragNode)),this.tree.dragDropService.stopDrag({node:e.dragNode,subNodes:e.dropNode.parent?e.dropNode.parent.children:this.tree.value,index:e.dragNodeIndex})}createDropPointEventMetadata(e){return{dragNode:this.tree.dragNode,dragNodeIndex:this.tree.dragNodeIndex,dragNodeSubNodes:this.tree.dragNodeSubNodes,dropNode:this.node,index:this.index,position:e}}onDropPointDragOver(e){e.dataTransfer.dropEffect="move",e.preventDefault()}onDropPointDragEnter(e,n){this.tree.allowDrop(this.tree.dragNode,this.node,this.tree.dragNodeScope)&&(n<0?this.draghoverPrev=!0:this.draghoverNext=!0)}onDropPointDragLeave(e){this.draghoverPrev=!1,this.draghoverNext=!1}onDragStart(e){this.tree.draggableNodes&&!1!==this.node.draggable?(e.dataTransfer.setData("text","data"),this.tree.dragDropService.startDrag({tree:this,node:this.node,subNodes:this.node.parent?this.node.parent.children:this.tree.value,index:this.index,scope:this.tree.draggableScope})):e.preventDefault()}onDragStop(e){this.tree.dragDropService.stopDrag({node:this.node,subNodes:this.node.parent?this.node.parent.children:this.tree.value,index:this.index})}onDropNodeDragOver(e){e.dataTransfer.dropEffect="move",this.tree.droppableNodes&&(e.preventDefault(),e.stopPropagation())}onDropNode(e){if(this.tree.droppableNodes&&!1!==this.node.droppable){let n=this.tree.dragNode;if(this.tree.allowDrop(n,this.node,this.tree.dragNodeScope)){let r={...this.createDropNodeEventMetadata()};this.tree.validateDrop?this.tree.onNodeDrop.emit({originalEvent:e,dragNode:n,dropNode:this.node,index:this.index,accept:()=>{this.processNodeDrop(r)}}):(this.processNodeDrop(r),this.tree.onNodeDrop.emit({originalEvent:e,dragNode:n,dropNode:this.node,index:this.index}))}}e.preventDefault(),e.stopPropagation(),this.draghoverNode=!1}createDropNodeEventMetadata(){return{dragNode:this.tree.dragNode,dragNodeIndex:this.tree.dragNodeIndex,dragNodeSubNodes:this.tree.dragNodeSubNodes,dropNode:this.node}}processNodeDrop(e){let n=e.dragNodeIndex;e.dragNodeSubNodes.splice(n,1),e.dropNode.children?e.dropNode.children.push(e.dragNode):e.dropNode.children=[e.dragNode],this.tree.dragDropService.stopDrag({node:e.dragNode,subNodes:e.dropNode.parent?e.dropNode.parent.children:this.tree.value,index:n})}onDropNodeDragEnter(e){this.tree.droppableNodes&&!1!==this.node.droppable&&this.tree.allowDrop(this.tree.dragNode,this.node,this.tree.dragNodeScope)&&(this.draghoverNode=!0)}onDropNodeDragLeave(e){if(this.tree.droppableNodes){let n=e.currentTarget.getBoundingClientRect();(e.x>n.left+n.width||e.x<n.left||e.y>=Math.floor(n.top+n.height)||e.y<n.top)&&(this.draghoverNode=!1)}}onKeyDown(e){const n=e.target.parentElement.parentElement;if(!("P-TREENODE"!==n.nodeName||this.tree.contextMenu&&"block"===this.tree.contextMenu.containerViewChild.nativeElement.style.display))switch(e.which){case 40:const r=this.tree.droppableNodes?n.children[1].children[1]:n.children[0].children[1];if(r&&r.children.length>0)this.focusNode(r.children[0]);else{const s=n.nextElementSibling;if(s)this.focusNode(s);else{let o=this.findNextSiblingOfAncestor(n);o&&this.focusNode(o)}}e.preventDefault();break;case 38:if(n.previousElementSibling)this.focusNode(this.findLastVisibleDescendant(n.previousElementSibling));else{let s=this.getParentNodeElement(n);s&&this.focusNode(s)}e.preventDefault();break;case 39:!this.node.expanded&&!this.tree.isNodeLeaf(this.node)&&this.expand(e),e.preventDefault();break;case 37:if(this.node.expanded)this.collapse(e);else{let s=this.getParentNodeElement(n);s&&this.focusNode(s)}e.preventDefault();break;case 13:this.tree.onNodeClick(e,this.node),e.preventDefault()}}findNextSiblingOfAncestor(e){let n=this.getParentNodeElement(e);return n?n.nextElementSibling?n.nextElementSibling:this.findNextSiblingOfAncestor(n):null}findLastVisibleDescendant(e){const r=Array.from(e.children).find(s=>Ft.hasClass(s,"p-treenode")).children[1];return r&&r.children.length>0?this.findLastVisibleDescendant(r.children[r.children.length-1]):e}getParentNodeElement(e){const n=e.parentElement.parentElement.parentElement;return"P-TREENODE"===n.tagName?n:null}focusNode(e){this.tree.droppableNodes?e.children[1].children[0].focus():e.children[0].children[0].focus()}}return i.ICON_CLASS="p-treenode-icon ",i.\u0275fac=function(e){return new(e||i)(Xt(cs(()=>O4)))},i.\u0275cmp=_r({type:i,selectors:[["p-treeNode"]],hostAttrs:[1,"p-element"],inputs:{rowNode:"rowNode",node:"node",parentNode:"parentNode",root:"root",index:"index",firstChild:"firstChild",lastChild:"lastChild",level:"level",indentation:"indentation",itemSize:"itemSize"},decls:1,vars:1,consts:[[3,"ngIf"],["class","p-treenode-droppoint",3,"ngClass","drop","dragover","dragenter","dragleave",4,"ngIf"],[3,"ngClass","ngStyle",4,"ngIf"],[3,"class",4,"ngIf"],[1,"p-treenode-droppoint",3,"ngClass","drop","dragover","dragenter","dragleave"],[3,"ngClass","ngStyle"],["role","treeitem",1,"p-treenode-content",3,"draggable","ngClass","click","contextmenu","touchend","drop","dragover","dragenter","dragleave","dragstart","dragend","keydown"],["type","button","pRipple","","tabindex","-1",1,"p-tree-toggler","p-link",3,"click"],[1,"p-tree-toggler-icon","pi","pi-fw",3,"ngClass"],["class","p-checkbox p-component",3,"ngClass",4,"ngIf"],[1,"p-treenode-label"],[4,"ngIf"],["class","p-treenode-children","style","display: none;","role","group",3,"display",4,"ngIf"],[1,"p-checkbox","p-component",3,"ngClass"],[1,"p-checkbox-box",3,"ngClass"],[1,"p-checkbox-icon","pi",3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["role","group",1,"p-treenode-children",2,"display","none"],[3,"node","parentNode","firstChild","lastChild","index","itemSize","level",4,"ngFor","ngForOf","ngForTrackBy"],[3,"node","parentNode","firstChild","lastChild","index","itemSize","level"],["class","p-treenode-connector",4,"ngIf"],[1,"p-treenode",3,"ngClass"],["tabindex","0",1,"p-treenode-content",3,"ngClass","click","contextmenu","touchend","keydown"],["class","p-tree-toggler pi pi-fw",3,"ngClass","click",4,"ngIf"],["class","p-treenode-children-container",3,"display",4,"ngIf"],[1,"p-treenode-connector"],[1,"p-treenode-connector-table"],[3,"ngClass"],[1,"p-tree-toggler","pi","pi-fw",3,"ngClass","click"],[1,"p-treenode-children-container"],[1,"p-treenode-children"],[3,"node","firstChild","lastChild",4,"ngFor","ngForOf","ngForTrackBy"],[3,"node","firstChild","lastChild"]],template:function(e,n){1&e&&$e(0,Sle,4,4,"ng-template",0),2&e&&de("ngIf",n.node)},dependencies:[no,jc,ho,el,Po,Du,i],encapsulation:2}),i})(),O4=(()=>{class i{constructor(e,n,r){this.el=e,this.dragDropService=n,this.config=r,this.layout="vertical",this.metaKeySelection=!0,this.propagateSelectionUp=!0,this.propagateSelectionDown=!0,this.loadingIcon="pi pi-spinner",this.emptyMessage="",this.filterBy="label",this.filterMode="lenient",this.lazy=!1,this.indentation=1.5,this.trackBy=(s,o)=>o,this.selectionChange=new Fn,this.onNodeSelect=new Fn,this.onNodeUnselect=new Fn,this.onNodeExpand=new Fn,this.onNodeCollapse=new Fn,this.onNodeContextMenuSelect=new Fn,this.onNodeDrop=new Fn,this.onLazyLoad=new Fn,this.onScroll=new Fn,this.onScrollIndexChange=new Fn,this.onFilter=new Fn}get virtualNodeHeight(){return this._virtualNodeHeight}set virtualNodeHeight(e){this._virtualNodeHeight=e,console.warn("The virtualNodeHeight property is deprecated, use virtualScrollItemSize property instead.")}ngOnInit(){this.droppableNodes&&(this.dragStartSubscription=this.dragDropService.dragStart$.subscribe(e=>{this.dragNodeTree=e.tree,this.dragNode=e.node,this.dragNodeSubNodes=e.subNodes,this.dragNodeIndex=e.index,this.dragNodeScope=e.scope}),this.dragStopSubscription=this.dragDropService.dragStop$.subscribe(e=>{this.dragNodeTree=null,this.dragNode=null,this.dragNodeSubNodes=null,this.dragNodeIndex=null,this.dragNodeScope=null,this.dragHover=!1}))}ngOnChanges(e){e.value&&this.updateSerializedValue()}get horizontal(){return"horizontal"==this.layout}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation($c.EMPTY_MESSAGE)}ngAfterContentInit(){this.templates.length&&(this.templateMap={}),this.templates.forEach(e=>{switch(e.getType()){case"header":this.headerTemplate=e.template;break;case"empty":this.emptyMessageTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"loader":this.loaderTemplate=e.template;break;default:this.templateMap[e.name]=e.template}})}updateSerializedValue(){this.serializedValue=[],this.serializeNodes(null,this.getRootNode(),0,!0)}serializeNodes(e,n,r,s){if(n&&n.length)for(let o of n){o.parent=e;const l={node:o,parent:e,level:r,visible:s&&(!e||e.expanded)};this.serializedValue.push(l),l.visible&&o.expanded&&this.serializeNodes(o,o.children,r+1,l.visible)}}onNodeClick(e,n){let r=e.target;if(!Ft.hasClass(r,"p-tree-toggler")&&!Ft.hasClass(r,"p-tree-toggler-icon")){if(this.selectionMode){if(!1===n.selectable||this.hasFilteredNodes()&&!(n=this.getNodeWithKey(n.key,this.value)))return;let s=this.findIndexInSelection(n),o=s>=0;if(this.isCheckboxSelectionMode())o?(this.propagateSelectionDown?this.propagateDown(n,!1):this.selection=this.selection.filter((l,u)=>u!=s),this.propagateSelectionUp&&n.parent&&this.propagateUp(n.parent,!1),this.selectionChange.emit(this.selection),this.onNodeUnselect.emit({originalEvent:e,node:n})):(this.propagateSelectionDown?this.propagateDown(n,!0):this.selection=[...this.selection||[],n],this.propagateSelectionUp&&n.parent&&this.propagateUp(n.parent,!0),this.selectionChange.emit(this.selection),this.onNodeSelect.emit({originalEvent:e,node:n}));else if(!this.nodeTouched&&this.metaKeySelection){let u=e.metaKey||e.ctrlKey;o&&u?(this.isSingleSelectionMode()?this.selectionChange.emit(null):(this.selection=this.selection.filter((p,v)=>v!=s),this.selectionChange.emit(this.selection)),this.onNodeUnselect.emit({originalEvent:e,node:n})):(this.isSingleSelectionMode()?this.selectionChange.emit(n):this.isMultipleSelectionMode()&&(this.selection=u&&this.selection||[],this.selection=[...this.selection,n],this.selectionChange.emit(this.selection)),this.onNodeSelect.emit({originalEvent:e,node:n}))}else this.isSingleSelectionMode()?o?(this.selection=null,this.onNodeUnselect.emit({originalEvent:e,node:n})):(this.selection=n,this.onNodeSelect.emit({originalEvent:e,node:n})):o?(this.selection=this.selection.filter((u,p)=>p!=s),this.onNodeUnselect.emit({originalEvent:e,node:n})):(this.selection=[...this.selection||[],n],this.onNodeSelect.emit({originalEvent:e,node:n})),this.selectionChange.emit(this.selection)}this.nodeTouched=!1}}onNodeTouchEnd(){this.nodeTouched=!0}onNodeRightClick(e,n){if(this.contextMenu){let r=e.target;if(r.className&&0===r.className.indexOf("p-tree-toggler"))return;this.findIndexInSelection(n)>=0||(this.isSingleSelectionMode()?this.selectionChange.emit(n):this.selectionChange.emit([n])),this.contextMenu.show(e),this.onNodeContextMenuSelect.emit({originalEvent:e,node:n})}}findIndexInSelection(e){let n=-1;if(this.selectionMode&&this.selection)if(this.isSingleSelectionMode())n=this.selection.key&&this.selection.key===e.key||this.selection==e?0:-1;else for(let r=0;r<this.selection.length;r++){let s=this.selection[r];if(s.key&&s.key===e.key||s==e){n=r;break}}return n}syncNodeOption(e,n,r,s){const o=this.hasFilteredNodes()?this.getNodeWithKey(e.key,n):null;o&&(o[r]=s||e[r])}hasFilteredNodes(){return this.filter&&this.filteredNodes&&this.filteredNodes.length}getNodeWithKey(e,n){for(let r of n){if(r.key===e)return r;if(r.children){let s=this.getNodeWithKey(e,r.children);if(s)return s}}}propagateUp(e,n){if(e.children&&e.children.length){let s=0,o=!1;for(let l of e.children)this.isSelected(l)?s++:l.partialSelected&&(o=!0);if(n&&s==e.children.length)this.selection=[...this.selection||[],e],e.partialSelected=!1;else{if(!n){let l=this.findIndexInSelection(e);l>=0&&(this.selection=this.selection.filter((u,p)=>p!=l))}e.partialSelected=!!(o||s>0&&s!=e.children.length)}this.syncNodeOption(e,this.filteredNodes,"partialSelected")}let r=e.parent;r&&this.propagateUp(r,n)}propagateDown(e,n){let r=this.findIndexInSelection(e);if(n&&-1==r?this.selection=[...this.selection||[],e]:!n&&r>-1&&(this.selection=this.selection.filter((s,o)=>o!=r)),e.partialSelected=!1,this.syncNodeOption(e,this.filteredNodes,"partialSelected"),e.children&&e.children.length)for(let s of e.children)this.propagateDown(s,n)}isSelected(e){return-1!=this.findIndexInSelection(e)}isSingleSelectionMode(){return this.selectionMode&&"single"==this.selectionMode}isMultipleSelectionMode(){return this.selectionMode&&"multiple"==this.selectionMode}isCheckboxSelectionMode(){return this.selectionMode&&"checkbox"==this.selectionMode}isNodeLeaf(e){return 0!=e.leaf&&!(e.children&&e.children.length)}getRootNode(){return this.filteredNodes?this.filteredNodes:this.value}getTemplateForNode(e){return this.templateMap?e.type?this.templateMap[e.type]:this.templateMap.default:null}onDragOver(e){this.droppableNodes&&(!this.value||0===this.value.length)&&(e.dataTransfer.dropEffect="move",e.preventDefault())}onDrop(e){if(this.droppableNodes&&(!this.value||0===this.value.length)){e.preventDefault();let n=this.dragNode;if(this.allowDrop(n,null,this.dragNodeScope)){let r=this.dragNodeIndex;this.value=this.value||[],this.validateDrop?this.onNodeDrop.emit({originalEvent:e,dragNode:n,dropNode:null,index:r,accept:()=>{this.processTreeDrop(n,r)}}):(this.onNodeDrop.emit({originalEvent:e,dragNode:n,dropNode:null,index:r}),this.processTreeDrop(n,r))}}}processTreeDrop(e,n){this.dragNodeSubNodes.splice(n,1),this.value.push(e),this.dragDropService.stopDrag({node:e})}onDragEnter(){this.droppableNodes&&this.allowDrop(this.dragNode,null,this.dragNodeScope)&&(this.dragHover=!0)}onDragLeave(e){if(this.droppableNodes){let n=e.currentTarget.getBoundingClientRect();(e.x>n.left+n.width||e.x<n.left||e.y>n.top+n.height||e.y<n.top)&&(this.dragHover=!1)}}allowDrop(e,n,r){if(e){if(this.isValidDragScope(r)){let s=!0;if(n)if(e===n)s=!1;else{let o=n.parent;for(;null!=o;){if(o===e){s=!1;break}o=o.parent}}return s}return!1}return!1}isValidDragScope(e){let n=this.droppableScope;if(n){if("string"==typeof n){if("string"==typeof e)return n===e;if(e instanceof Array)return-1!=e.indexOf(n)}else if(n instanceof Array){if("string"==typeof e)return-1!=n.indexOf(e);if(e instanceof Array)for(let r of n)for(let s of e)if(r===s)return!0}return!1}return!0}_filter(e){let n=e;if(""===n)this.filteredNodes=null;else{this.filteredNodes=[];const r=this.filterBy.split(","),s=Ji.removeAccents(n).toLocaleLowerCase(this.filterLocale),o="strict"===this.filterMode;for(let l of this.value){let u={...l},p={searchFields:r,filterText:s,isStrictMode:o};(o&&(this.findFilteredNodes(u,p)||this.isFilterMatched(u,p))||!o&&(this.isFilterMatched(u,p)||this.findFilteredNodes(u,p)))&&this.filteredNodes.push(u)}}this.updateSerializedValue(),this.onFilter.emit({filter:n,filteredValue:this.filteredNodes})}resetFilter(){this.filteredNodes=null,this.filterViewChild&&this.filterViewChild.nativeElement&&(this.filterViewChild.nativeElement.value="")}scrollToVirtualIndex(e){this.virtualScroll&&this.scroller.scrollToIndex(e)}scrollTo(e){this.virtualScroll?this.scroller.scrollTo(e):this.wrapperViewChild&&this.wrapperViewChild.nativeElement&&(this.wrapperViewChild.nativeElement.scrollTo?this.wrapperViewChild.nativeElement.scrollTo(e):(this.wrapperViewChild.nativeElement.scrollLeft=e.left,this.wrapperViewChild.nativeElement.scrollTop=e.top))}findFilteredNodes(e,n){if(e){let r=!1;if(e.children){let s=[...e.children];e.children=[];for(let o of s){let l={...o};this.isFilterMatched(l,n)&&(r=!0,e.children.push(l))}}if(r)return e.expanded=!0,!0}}isFilterMatched(e,{searchFields:n,filterText:r,isStrictMode:s}){let o=!1;for(let l of n)Ji.removeAccents(String(Ji.resolveFieldData(e,l))).toLocaleLowerCase(this.filterLocale).indexOf(r)>-1&&(o=!0);return(!o||s&&!this.isNodeLeaf(e))&&(o=this.findFilteredNodes(e,{searchFields:n,filterText:r,isStrictMode:s})||o),o}getIndex(e,n){const r=e.getItemOptions;return r?r(n).index:n}getBlockableElement(){return this.el.nativeElement.children[0]}ngOnDestroy(){this.dragStartSubscription&&this.dragStartSubscription.unsubscribe(),this.dragStopSubscription&&this.dragStopSubscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(Xt(Yn),Xt(eZ,8),Xt(Dp))},i.\u0275cmp=_r({type:i,selectors:[["p-tree"]],contentQueries:function(e,n,r){if(1&e&&Ba(r,za,4),2&e){let s;Wi(s=ji())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(Tr(Ele,5),Tr(Tle,5),Tr(Mle,5)),2&e){let r;Wi(r=ji())&&(n.filterViewChild=r.first),Wi(r=ji())&&(n.scroller=r.first),Wi(r=ji())&&(n.wrapperViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{value:"value",selectionMode:"selectionMode",selection:"selection",style:"style",styleClass:"styleClass",contextMenu:"contextMenu",layout:"layout",draggableScope:"draggableScope",droppableScope:"droppableScope",draggableNodes:"draggableNodes",droppableNodes:"droppableNodes",metaKeySelection:"metaKeySelection",propagateSelectionUp:"propagateSelectionUp",propagateSelectionDown:"propagateSelectionDown",loading:"loading",loadingIcon:"loadingIcon",emptyMessage:"emptyMessage",ariaLabel:"ariaLabel",togglerAriaLabel:"togglerAriaLabel",ariaLabelledBy:"ariaLabelledBy",validateDrop:"validateDrop",filter:"filter",filterBy:"filterBy",filterMode:"filterMode",filterPlaceholder:"filterPlaceholder",filteredNodes:"filteredNodes",filterLocale:"filterLocale",scrollHeight:"scrollHeight",lazy:"lazy",virtualScroll:"virtualScroll",virtualScrollItemSize:"virtualScrollItemSize",virtualScrollOptions:"virtualScrollOptions",indentation:"indentation",trackBy:"trackBy",virtualNodeHeight:"virtualNodeHeight"},outputs:{selectionChange:"selectionChange",onNodeSelect:"onNodeSelect",onNodeUnselect:"onNodeUnselect",onNodeExpand:"onNodeExpand",onNodeCollapse:"onNodeCollapse",onNodeContextMenuSelect:"onNodeContextMenuSelect",onNodeDrop:"onNodeDrop",onLazyLoad:"onLazyLoad",onScroll:"onScroll",onScrollIndexChange:"onScrollIndexChange",onFilter:"onFilter"},features:[da],decls:2,vars:2,consts:[[3,"ngClass","ngStyle","class","drop","dragover","dragenter","dragleave",4,"ngIf"],[3,"ngClass","ngStyle","class",4,"ngIf"],[3,"ngClass","ngStyle","drop","dragover","dragenter","dragleave"],["class","p-tree-loading-overlay p-component-overlay",4,"ngIf"],[4,"ngTemplateOutlet"],["class","p-tree-filter-container",4,"ngIf"],["styleClass","p-tree-wrapper",3,"items","style","itemSize","lazy","options","onScroll","onScrollIndexChange","onLazyLoad",4,"ngIf"],[4,"ngIf"],["class","p-tree-empty-message",4,"ngIf"],[1,"p-tree-loading-overlay","p-component-overlay"],[1,"p-tree-filter-container"],["type","text","autocomplete","off",1,"p-tree-filter","p-inputtext","p-component",3,"keydown.enter","input"],["filter",""],[1,"p-tree-filter-icon","pi","pi-search"],["styleClass","p-tree-wrapper",3,"items","itemSize","lazy","options","onScroll","onScrollIndexChange","onLazyLoad"],["scroller",""],["pTemplate","content"],["class","p-tree-container","role","tree",3,"ngClass","style",4,"ngIf"],["role","tree",1,"p-tree-container",3,"ngClass"],[3,"level","rowNode","node","firstChild","lastChild","index","itemSize","indentation",4,"ngFor","ngForOf","ngForTrackBy"],[3,"level","rowNode","node","firstChild","lastChild","index","itemSize","indentation"],["pTemplate","loader"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-tree-wrapper"],["wrapper",""],["class","p-tree-container","role","tree",4,"ngIf"],["role","tree",1,"p-tree-container"],[3,"node","firstChild","lastChild","index","level",4,"ngFor","ngForOf","ngForTrackBy"],[3,"node","firstChild","lastChild","index","level"],[1,"p-tree-empty-message"],[4,"ngIf","ngIfElse"],["emptyFilter",""],[3,"ngClass","ngStyle"],["class","p-tree-loading-mask p-component-overlay",4,"ngIf"],[1,"p-tree-loading-mask","p-component-overlay"],[3,"node","root"]],template:function(e,n){1&e&&($e(0,Yle,8,16,"div",0),$e(1,rce,6,11,"div",1)),2&e&&(de("ngIf",!n.horizontal),Ie(1),de("ngIf",n.horizontal))},dependencies:[no,jc,ho,el,Po,za,EA,sce],styles:[".p-tree-container{margin:0;padding:0;list-style-type:none;overflow:auto}.p-treenode-children{margin:0;padding:0;list-style-type:none}.p-tree-wrapper{overflow:auto}.p-treenode-selectable{cursor:pointer;-webkit-user-select:none;user-select:none}.p-tree-toggler{cursor:pointer;-webkit-user-select:none;user-select:none;display:inline-flex;align-items:center;justify-content:center;overflow:hidden;position:relative;flex-shrink:0}.p-treenode-leaf>.p-treenode-content .p-tree-toggler{visibility:hidden}.p-treenode-content{display:flex;align-items:center}.p-tree-filter{width:100%}.p-tree-filter-container{position:relative;display:block;width:100%}.p-tree-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-tree-loading{position:relative;min-height:4rem}.p-tree .p-tree-loading-overlay{position:absolute;display:flex;align-items:center;justify-content:center;z-index:2}.p-tree-flex-scrollable{display:flex;flex:1;height:100%;flex-direction:column}.p-tree-flex-scrollable .p-tree-wrapper{flex:1}.p-tree .p-treenode-droppoint{height:4px;list-style-type:none}.p-tree .p-treenode-droppoint-active{border:0 none}.p-tree-horizontal{width:auto;padding-left:0;padding-right:0;overflow:auto}.p-tree.p-tree-horizontal table,.p-tree.p-tree-horizontal tr,.p-tree.p-tree-horizontal td{border-collapse:collapse;margin:0;padding:0;vertical-align:middle}.p-tree-horizontal .p-treenode-content{font-weight:400;padding:.4em 1em .4em .2em;display:flex;align-items:center}.p-tree-horizontal .p-treenode-parent .p-treenode-content{font-weight:400;white-space:nowrap}.p-tree.p-tree-horizontal .p-treenode{background:url(data:image/gif;base64,R0lGODlhAQABAIAAALGxsf///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNC4xLWMwMzQgNDYuMjcyOTc2LCBTYXQgSmFuIDI3IDIwMDcgMjI6Mzc6MzcgICAgICAgICI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnhhcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyI+CiAgICAgICAgIDx4YXA6Q3JlYXRvclRvb2w+QWRvYmUgRmlyZXdvcmtzIENTMzwveGFwOkNyZWF0b3JUb29sPgogICAgICAgICA8eGFwOkNyZWF0ZURhdGU+MjAxMC0wMy0xMVQxMDoxNjo0MVo8L3hhcDpDcmVhdGVEYXRlPgogICAgICAgICA8eGFwOk1vZGlmeURhdGU+MjAxMC0wMy0xMVQxMjo0NDoxOVo8L3hhcDpNb2RpZnlEYXRlPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIj4KICAgICAgICAgPGRjOmZvcm1hdD5pbWFnZS9naWY8L2RjOmZvcm1hdD4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgCjw/eHBhY2tldCBlbmQ9InciPz4B//79/Pv6+fj39vX08/Lx8O/u7ezr6uno5+bl5OPi4eDf3t3c29rZ2NfW1dTT0tHQz87NzMvKycjHxsXEw8LBwL++vby7urm4t7a1tLOysbCvrq2sq6qpqKempaSjoqGgn56dnJuamZiXlpWUk5KRkI+OjYyLiomIh4aFhIOCgYB/fn18e3p5eHd2dXRzcnFwb25tbGtqaWhnZmVkY2JhYF9eXVxbWllYV1ZVVFNSUVBPTk1MS0pJSEdGRURDQkFAPz49PAA6OTg3NjU0MzIxMC8uLSwrKikoJyYlJCMiISAfHh0cGxoZGBcWFRQTEhEQDw4NDAsKCQgHBgUEAwIBAAAh+QQABwD/ACwAAAAAAQABAAACAkQBADs=) repeat-x scroll center center transparent;padding:.25rem 2.5rem}.p-tree.p-tree-horizontal .p-treenode.p-treenode-leaf,.p-tree.p-tree-horizontal .p-treenode.p-treenode-collapsed{padding-right:0}.p-tree.p-tree-horizontal .p-treenode-children{padding:0;margin:0}.p-tree.p-tree-horizontal .p-treenode-connector{width:1px}.p-tree.p-tree-horizontal .p-treenode-connector-table{height:100%;width:1px}.p-tree.p-tree-horizontal .p-treenode-connector-line{background:url(data:image/gif;base64,R0lGODlhAQABAIAAALGxsf///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNC4xLWMwMzQgNDYuMjcyOTc2LCBTYXQgSmFuIDI3IDIwMDcgMjI6Mzc6MzcgICAgICAgICI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnhhcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyI+CiAgICAgICAgIDx4YXA6Q3JlYXRvclRvb2w+QWRvYmUgRmlyZXdvcmtzIENTMzwveGFwOkNyZWF0b3JUb29sPgogICAgICAgICA8eGFwOkNyZWF0ZURhdGU+MjAxMC0wMy0xMVQxMDoxNjo0MVo8L3hhcDpDcmVhdGVEYXRlPgogICAgICAgICA8eGFwOk1vZGlmeURhdGU+MjAxMC0wMy0xMVQxMjo0NDoxOVo8L3hhcDpNb2RpZnlEYXRlPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIj4KICAgICAgICAgPGRjOmZvcm1hdD5pbWFnZS9naWY8L2RjOmZvcm1hdD4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgCjw/eHBhY2tldCBlbmQ9InciPz4B//79/Pv6+fj39vX08/Lx8O/u7ezr6uno5+bl5OPi4eDf3t3c29rZ2NfW1dTT0tHQz87NzMvKycjHxsXEw8LBwL++vby7urm4t7a1tLOysbCvrq2sq6qpqKempaSjoqGgn56dnJuamZiXlpWUk5KRkI+OjYyLiomIh4aFhIOCgYB/fn18e3p5eHd2dXRzcnFwb25tbGtqaWhnZmVkY2JhYF9eXVxbWllYV1ZVVFNSUVBPTk1MS0pJSEdGRURDQkFAPz49PAA6OTg3NjU0MzIxMC8uLSwrKikoJyYlJCMiISAfHh0cGxoZGBcWFRQTEhEQDw4NDAsKCQgHBgUEAwIBAAAh+QQABwD/ACwAAAAAAQABAAACAkQBADs=) repeat-y scroll 0 0 transparent;width:1px}.p-tree.p-tree-horizontal table{height:0}.p-scroller .p-tree-container{overflow:visible}\n"],encapsulation:2}),i})(),oce=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({imports:[Os,xa,Xc,ov,xa,ov]}),i})();const ace=["container"],lce=["resizeHelper"],cce=["reorderIndicatorUp"],uce=["reorderIndicatorDown"],hce=["table"],dce=["scrollableView"],fce=["scrollableFrozenView"];function pce(i,t){if(1&i&&(Ke(0,"div",12)(1,"div",13),Bn(2,"i"),Je()()),2&i){const e=be();Ie(2),kr("p-treetable-loading-icon pi-spin "+e.loadingIcon)}}function gce(i,t){1&i&&Ni(0)}function mce(i,t){if(1&i&&(Ke(0,"div",14),$e(1,gce,1,0,"ng-container",15),Je()),2&i){const e=be();Ie(1),de("ngTemplateOutlet",e.captionTemplate)}}function vce(i,t){if(1&i){const e=vi();Ke(0,"p-paginator",16),mn("onPageChange",function(r){return Pt(e),Rt(be().onPageChange(r))}),Je()}if(2&i){const e=be();de("rows",e.rows)("first",e.first)("totalRecords",e.totalRecords)("pageLinkSize",e.pageLinks)("alwaysShow",e.alwaysShowPaginator)("rowsPerPageOptions",e.rowsPerPageOptions)("templateLeft",e.paginatorLeftTemplate)("templateRight",e.paginatorRightTemplate)("dropdownAppendTo",e.paginatorDropdownAppendTo)("currentPageReportTemplate",e.currentPageReportTemplate)("showFirstLastIcon",e.showFirstLastIcon)("dropdownItemTemplate",e.paginatorDropdownItemTemplate)("showCurrentPageReport",e.showCurrentPageReport)("showJumpToPageDropdown",e.showJumpToPageDropdown)("showPageLinks",e.showPageLinks)}}function yce(i,t){1&i&&Ni(0)}function _ce(i,t){1&i&&Ni(0)}function bce(i,t){1&i&&Ni(0)}const c_=function(i){return{$implicit:i}};function Cce(i,t){if(1&i&&(Ke(0,"div",17)(1,"table",18,19),$e(3,yce,1,0,"ng-container",20),Ke(4,"thead",21),$e(5,_ce,1,0,"ng-container",20),Je(),Bn(6,"tbody",22),Ke(7,"tfoot",23),$e(8,bce,1,0,"ng-container",20),Je()()()),2&i){const e=be();Ie(1),de("ngClass",e.tableStyleClass)("ngStyle",e.tableStyle),Ie(2),de("ngTemplateOutlet",e.colGroupTemplate)("ngTemplateOutletContext",_i(10,c_,e.columns)),Ie(2),de("ngTemplateOutlet",e.headerTemplate)("ngTemplateOutletContext",_i(12,c_,e.columns)),Ie(1),de("pTreeTableBody",e.columns)("pTreeTableBodyTemplate",e.bodyTemplate),Ie(2),de("ngTemplateOutlet",e.footerTemplate)("ngTemplateOutletContext",_i(14,c_,e.columns))}}const wce=function(i){return{width:i}};function Ace(i,t){if(1&i&&Bn(0,"div",28,29),2&i){const e=be(2);de("ttScrollableView",e.frozenColumns)("frozen",!0)("ngStyle",_i(4,wce,e.frozenWidth))("scrollHeight",e.scrollHeight)}}const xce=function(i,t){return{left:i,width:t}};function Ice(i,t){if(1&i&&(Ke(0,"div",24),$e(1,Ace,2,6,"div",25),Bn(2,"div",26,27),Je()),2&i){const e=be();Ie(1),de("ngIf",e.frozenColumns||e.frozenBodyTemplate),Ie(1),de("ttScrollableView",e.columns)("frozen",!1)("scrollHeight",e.scrollHeight)("ngStyle",ss(5,xce,e.frozenWidth,"calc(100% - "+e.frozenWidth+")"))}}function Sce(i,t){if(1&i){const e=vi();Ke(0,"p-paginator",30),mn("onPageChange",function(r){return Pt(e),Rt(be().onPageChange(r))}),Je()}if(2&i){const e=be();de("rows",e.rows)("first",e.first)("totalRecords",e.totalRecords)("pageLinkSize",e.pageLinks)("alwaysShow",e.alwaysShowPaginator)("rowsPerPageOptions",e.rowsPerPageOptions)("templateLeft",e.paginatorLeftTemplate)("templateRight",e.paginatorRightTemplate)("dropdownAppendTo",e.paginatorDropdownAppendTo)("currentPageReportTemplate",e.currentPageReportTemplate)("showFirstLastIcon",e.showFirstLastIcon)("dropdownItemTemplate",e.paginatorDropdownItemTemplate)("showCurrentPageReport",e.showCurrentPageReport)("showJumpToPageDropdown",e.showJumpToPageDropdown)("showPageLinks",e.showPageLinks)}}function Ece(i,t){1&i&&Ni(0)}function Tce(i,t){if(1&i&&(Ke(0,"div",31),$e(1,Ece,1,0,"ng-container",15),Je()),2&i){const e=be();Ie(1),de("ngTemplateOutlet",e.summaryTemplate)}}function Mce(i,t){1&i&&Bn(0,"div",32,33)}function Dce(i,t){1&i&&Bn(0,"span",34,35)}function Lce(i,t){1&i&&Bn(0,"span",36,37)}const Pce=function(i,t,e,n,r){return{"p-treetable p-component":!0,"p-treetable-hoverable-rows":i,"p-treetable-auto-layout":t,"p-treetable-resizable":e,"p-treetable-resizable-fit":n,"p-treetable-flex-scrollable":r}},Rce=["pTreeTableBody",""];function kce(i,t){1&i&&Ni(0)}const Oce=function(i,t,e,n){return{$implicit:i,node:t,rowData:e,columns:n}};function Fce(i,t){if(1&i&&(zr(0),$e(1,kce,1,0,"ng-container",2),Vr()),2&i){const e=be().$implicit,n=be();Ie(1),de("ngTemplateOutlet",n.template)("ngTemplateOutletContext",sf(2,Oce,e,e.node,e.node.data,n.columns))}}function Nce(i,t){1&i&&$e(0,Fce,2,7,"ng-container",1),2&i&&de("ngIf",t.$implicit.visible)}function Bce(i,t){1&i&&Ni(0)}const zce=function(i,t){return{$implicit:i,frozen:t}};function Vce(i,t){if(1&i&&(zr(0),$e(1,Bce,1,0,"ng-container",2),Vr()),2&i){const e=be();Ie(1),de("ngTemplateOutlet",e.tt.emptyMessageTemplate)("ngTemplateOutletContext",ss(2,zce,e.columns,e.frozen))}}const Uce=["scrollHeader"],Hce=["scrollHeaderBox"],Gce=["scrollBody"],Wce=["scrollTable"],jce=["loadingTable"],$ce=["scrollFooter"],qce=["scrollFooterBox"],Xce=["scrollableAligner"],Yce=["scroller"],Kce=["ttScrollableView",""];function Zce(i,t){1&i&&Ni(0)}function Qce(i,t){1&i&&Ni(0)}function Jce(i,t){1&i&&Ni(0)}const F4=function(i,t){return{$implicit:i,options:t}};function eue(i,t){if(1&i&&$e(0,Jce,1,0,"ng-container",5),2&i){const e=t.$implicit,n=t.options;be(2),de("ngTemplateOutlet",oo(11))("ngTemplateOutletContext",ss(2,F4,e,n))}}function tue(i,t){1&i&&Ni(0)}const nue=function(i){return{options:i}};function iue(i,t){if(1&i&&$e(0,tue,1,0,"ng-container",5),2&i){const e=t.options;de("ngTemplateOutlet",be(3).loaderTemplate)("ngTemplateOutletContext",_i(2,nue,e))}}function rue(i,t){1&i&&(zr(0),$e(1,iue,1,4,"ng-template",14),Vr())}const sue=function(i){return{height:i}};function oue(i,t){if(1&i){const e=vi();Ke(0,"p-scroller",11,12),mn("onLazyLoad",function(r){return Pt(e),Rt(be().tt.onLazyItemLoad(r))}),$e(2,eue,1,5,"ng-template",13),$e(3,rue,2,0,"ng-container",8),Je()}if(2&i){const e=be();to(_i(8,sue,"flex"!==e.tt.scrollHeight?e.tt.scrollHeight:void 0)),de("items",e.tt.serializedValue)("scrollHeight","flex"!==e.scrollHeight?void 0:"100%")("itemSize",e.tt.virtualScrollItemSize||e.tt._virtualRowHeight)("lazy",e.tt.lazy)("options",e.tt.virtualScrollOptions),Ie(3),de("ngIf",e.loaderTemplate)}}function aue(i,t){1&i&&Ni(0)}const lue=function(i,t){return{"max-height":i,"overflow-y":t}},cue=function(){return{}};function uue(i,t){if(1&i&&(zr(0),Ke(1,"div",15,16),$e(3,aue,1,0,"ng-container",5),Je(),Vr()),2&i){const e=be(),n=oo(11);Ie(1),de("ngStyle",ss(3,lue,"flex"!==e.tt.scrollHeight?e.scrollHeight:void 0,!e.frozen&&e.tt.scrollHeight?"scroll":void 0)),Ie(2),de("ngTemplateOutlet",n)("ngTemplateOutletContext",ss(7,F4,e.serializedValue,uo(6,cue)))}}function hue(i,t){1&i&&Ni(0)}function due(i,t){1&i&&Bn(0,"div",21,22)}function fue(i,t){if(1&i&&(Ke(0,"table",17,18),$e(2,hue,1,0,"ng-container",5),Bn(3,"tbody",19),Je(),$e(4,due,2,0,"div",20)),2&i){const e=t.$implicit,n=t.options,r=be();to(n.contentStyle),kr(r.tt.tableStyleClass),de("ngClass",n.contentStyleClass)("ngStyle",r.tt.tableStyle),Ie(2),de("ngTemplateOutlet",r.frozen&&r.tt.frozenColGroupTemplate||r.tt.colGroupTemplate)("ngTemplateOutletContext",_i(13,c_,r.columns)),Ie(1),de("pTreeTableBody",r.columns)("pTreeTableBodyTemplate",r.frozen&&r.tt.frozenBodyTemplate||r.tt.bodyTemplate)("serializedNodes",e)("frozen",r.frozen),Ie(1),de("ngIf",r.frozen)}}function pue(i,t){1&i&&Ni(0)}function gue(i,t){1&i&&Ni(0)}function mue(i,t){if(1&i&&(Ke(0,"div",23,24)(2,"div",25,26)(4,"table",27),$e(5,pue,1,0,"ng-container",5),Ke(6,"tfoot",28),$e(7,gue,1,0,"ng-container",5),Je()()()()),2&i){const e=be();Ie(4),de("ngClass",e.tt.tableStyleClass)("ngStyle",e.tt.tableStyle),Ie(1),de("ngTemplateOutlet",e.frozen&&e.tt.frozenColGroupTemplate||e.tt.colGroupTemplate)("ngTemplateOutletContext",_i(6,c_,e.columns)),Ie(2),de("ngTemplateOutlet",e.frozen&&e.tt.frozenFooterTemplate||e.tt.footerTemplate)("ngTemplateOutletContext",_i(8,c_,e.columns))}}let Z2=(()=>{class i{constructor(){this.sortSource=new Ge,this.selectionSource=new Ge,this.contextMenuSource=new Ge,this.uiUpdateSource=new Ge,this.totalRecordsSource=new Ge,this.sortSource$=this.sortSource.asObservable(),this.selectionSource$=this.selectionSource.asObservable(),this.contextMenuSource$=this.contextMenuSource.asObservable(),this.uiUpdateSource$=this.uiUpdateSource.asObservable(),this.totalRecordsSource$=this.totalRecordsSource.asObservable()}onSort(e){this.sortSource.next(e)}onSelectionChange(){this.selectionSource.next(null)}onContextMenu(e){this.contextMenuSource.next(e)}onUIUpdate(e){this.uiUpdateSource.next(e)}onTotalRecordsChange(e){this.totalRecordsSource.next(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})(),J1=(()=>{class i{constructor(e,n,r,s,o){this.el=e,this.cd=n,this.zone=r,this.tableService=s,this.filterService=o,this.lazy=!1,this.lazyLoadOnInit=!0,this.first=0,this.pageLinks=5,this.alwaysShowPaginator=!0,this.paginatorPosition="bottom",this.currentPageReportTemplate="{currentPage} of {totalPages}",this.showFirstLastIcon=!0,this.showPageLinks=!0,this.defaultSortOrder=1,this.sortMode="single",this.resetPageOnSort=!0,this.selectionChange=new Fn,this.contextMenuSelectionChange=new Fn,this.contextMenuSelectionMode="separate",this.compareSelectionBy="deepEquals",this.loadingIcon="pi pi-spinner",this.showLoader=!0,this.virtualScrollDelay=150,this.columnResizeMode="fit",this.rowTrackBy=(l,u)=>u,this.filters={},this.filterDelay=300,this.filterMode="lenient",this.onFilter=new Fn,this.onNodeExpand=new Fn,this.onNodeCollapse=new Fn,this.onPage=new Fn,this.onSort=new Fn,this.onLazyLoad=new Fn,this.sortFunction=new Fn,this.onColResize=new Fn,this.onColReorder=new Fn,this.onNodeSelect=new Fn,this.onNodeUnselect=new Fn,this.onContextMenuSelect=new Fn,this.onHeaderCheckboxToggle=new Fn,this.onEditInit=new Fn,this.onEditComplete=new Fn,this.onEditCancel=new Fn,this._virtualRowHeight=28,this._value=[],this._totalRecords=0,this._sortOrder=1,this.selectionKeys={}}get virtualRowHeight(){return this._virtualRowHeight}set virtualRowHeight(e){this._virtualRowHeight=e,console.warn("The virtualRowHeight property is deprecated, use virtualScrollItemSize property instead.")}ngOnInit(){this.lazy&&this.lazyLoadOnInit&&!this.virtualScroll&&this.onLazyLoad.emit(this.createLazyLoadMetadata()),this.initialized=!0}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"caption":this.captionTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"body":this.bodyTemplate=e.template;break;case"loadingbody":this.loadingBodyTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"summary":this.summaryTemplate=e.template;break;case"colgroup":this.colGroupTemplate=e.template;break;case"emptymessage":this.emptyMessageTemplate=e.template;break;case"paginatorleft":this.paginatorLeftTemplate=e.template;break;case"paginatorright":this.paginatorRightTemplate=e.template;break;case"paginatordropdownitem":this.paginatorDropdownItemTemplate=e.template;break;case"frozenheader":this.frozenHeaderTemplate=e.template;break;case"frozenbody":this.frozenBodyTemplate=e.template;break;case"frozenfooter":this.frozenFooterTemplate=e.template;break;case"frozencolgroup":this.frozenColGroupTemplate=e.template}})}ngOnChanges(e){e.value&&(this._value=e.value.currentValue,this.lazy||(this.totalRecords=this._value?this._value.length:0,"single"==this.sortMode&&this.sortField?this.sortSingle():"multiple"==this.sortMode&&this.multiSortMeta?this.sortMultiple():this.hasFilter()&&this._filter()),this.updateSerializedValue(),this.tableService.onUIUpdate(this.value)),e.sortField&&(this._sortField=e.sortField.currentValue,(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle()),e.sortOrder&&(this._sortOrder=e.sortOrder.currentValue,(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle()),e.multiSortMeta&&(this._multiSortMeta=e.multiSortMeta.currentValue,"multiple"===this.sortMode&&this.sortMultiple()),e.selection&&(this._selection=e.selection.currentValue,this.preventSelectionSetterPropagation||(this.updateSelectionKeys(),this.tableService.onSelectionChange()),this.preventSelectionSetterPropagation=!1)}get value(){return this._value}set value(e){this._value=e}updateSerializedValue(){this.serializedValue=[],this.paginator?this.serializePageNodes():this.serializeNodes(null,this.filteredNodes||this.value,0,!0)}serializeNodes(e,n,r,s){if(n&&n.length)for(let o of n){o.parent=e;const l={node:o,parent:e,level:r,visible:s&&(!e||e.expanded)};this.serializedValue.push(l),l.visible&&o.expanded&&this.serializeNodes(o,o.children,r+1,l.visible)}}serializePageNodes(){let e=this.filteredNodes||this.value;if(this.serializedValue=[],e&&e.length){const n=this.lazy?0:this.first;for(let r=n;r<n+this.rows;r++){let s=e[r];s&&(this.serializedValue.push({node:s,parent:null,level:0,visible:!0}),this.serializeNodes(s,s.children,1,!0))}}}get totalRecords(){return this._totalRecords}set totalRecords(e){this._totalRecords=e,this.tableService.onTotalRecordsChange(this._totalRecords)}get sortField(){return this._sortField}set sortField(e){this._sortField=e}get sortOrder(){return this._sortOrder}set sortOrder(e){this._sortOrder=e}get multiSortMeta(){return this._multiSortMeta}set multiSortMeta(e){this._multiSortMeta=e}get selection(){return this._selection}set selection(e){this._selection=e}updateSelectionKeys(){if(this.dataKey&&this._selection)if(this.selectionKeys={},Array.isArray(this._selection))for(let e of this._selection)this.selectionKeys[String(Ji.resolveFieldData(e.data,this.dataKey))]=1;else this.selectionKeys[String(Ji.resolveFieldData(this._selection.data,this.dataKey))]=1}onPageChange(e){this.first=e.first,this.rows=e.rows,this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.serializePageNodes(),this.onPage.emit({first:this.first,rows:this.rows}),this.tableService.onUIUpdate(this.value),this.scrollable&&this.resetScrollTop()}sort(e){let n=e.originalEvent;if("single"===this.sortMode&&(this._sortOrder=this.sortField===e.field?-1*this.sortOrder:this.defaultSortOrder,this._sortField=e.field,this.sortSingle(),this.resetPageOnSort&&this.scrollable&&this.resetScrollTop()),"multiple"===this.sortMode){let r=n.metaKey||n.ctrlKey,s=this.getSortMeta(e.field);s?r?s.order=-1*s.order:(this._multiSortMeta=[{field:e.field,order:-1*s.order}],this.resetPageOnSort&&this.scrollable&&this.resetScrollTop()):((!r||!this.multiSortMeta)&&(this._multiSortMeta=[],this.resetPageOnSort&&this.scrollable&&this.resetScrollTop()),this.multiSortMeta.push({field:e.field,order:this.defaultSortOrder})),this.sortMultiple()}}sortSingle(){if(this.sortField&&this.sortOrder){this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.value&&(this.sortNodes(this.value),this.hasFilter()&&this._filter());let e={field:this.sortField,order:this.sortOrder};this.onSort.emit(e),this.tableService.onSort(e),this.updateSerializedValue()}}sortNodes(e){if(e&&0!==e.length){this.customSort?this.sortFunction.emit({data:e,mode:this.sortMode,field:this.sortField,order:this.sortOrder}):e.sort((n,r)=>{let s=Ji.resolveFieldData(n.data,this.sortField),o=Ji.resolveFieldData(r.data,this.sortField),l=null;return l=null==s&&null!=o?-1:null!=s&&null==o?1:null==s&&null==o?0:"string"==typeof s&&"string"==typeof o?s.localeCompare(o,void 0,{numeric:!0}):s<o?-1:s>o?1:0,this.sortOrder*l});for(let n of e)this.sortNodes(n.children)}}sortMultiple(){this.multiSortMeta&&(this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.value&&(this.sortMultipleNodes(this.value),this.hasFilter()&&this._filter()),this.onSort.emit({multisortmeta:this.multiSortMeta}),this.updateSerializedValue(),this.tableService.onSort(this.multiSortMeta))}sortMultipleNodes(e){if(e&&0!==e.length){this.customSort?this.sortFunction.emit({data:this.value,mode:this.sortMode,multiSortMeta:this.multiSortMeta}):e.sort((n,r)=>this.multisortField(n,r,this.multiSortMeta,0));for(let n of e)this.sortMultipleNodes(n.children)}}multisortField(e,n,r,s){let o=Ji.resolveFieldData(e.data,r[s].field),l=Ji.resolveFieldData(n.data,r[s].field),u=null;if(null==o&&null!=l?u=-1:null!=o&&null==l?u=1:null==o&&null==l&&(u=0),"string"==typeof o||o instanceof String){if(o.localeCompare&&o!=l)return r[s].order*o.localeCompare(l,void 0,{numeric:!0})}else u=o<l?-1:1;return o==l?r.length-1>s?this.multisortField(e,n,r,s+1):0:r[s].order*u}getSortMeta(e){if(this.multiSortMeta&&this.multiSortMeta.length)for(let n=0;n<this.multiSortMeta.length;n++)if(this.multiSortMeta[n].field===e)return this.multiSortMeta[n];return null}isSorted(e){if("single"===this.sortMode)return this.sortField&&this.sortField===e;if("multiple"===this.sortMode){let n=!1;if(this.multiSortMeta)for(let r=0;r<this.multiSortMeta.length;r++)if(this.multiSortMeta[r].field==e){n=!0;break}return n}}createLazyLoadMetadata(){return{first:this.first,rows:this.rows,sortField:this.sortField,sortOrder:this.sortOrder,filters:this.filters,globalFilter:this.filters&&this.filters.global?this.filters.global.value:null,multiSortMeta:this.multiSortMeta,forceUpdate:()=>this.cd.detectChanges()}}onLazyItemLoad(e){this.onLazyLoad.emit({...this.createLazyLoadMetadata(),...e,rows:e.last-e.first})}resetScrollTop(){this.virtualScroll?this.scrollToVirtualIndex(0):this.scrollTo({top:0})}scrollToVirtualIndex(e){this.scrollableViewChild&&this.scrollableViewChild.scrollToVirtualIndex(e),this.scrollableFrozenViewChild&&this.scrollableFrozenViewChild.scrollToVirtualIndex(e)}scrollTo(e){this.scrollableViewChild&&this.scrollableViewChild.scrollTo(e),this.scrollableFrozenViewChild&&this.scrollableFrozenViewChild.scrollTo(e)}isEmpty(){let e=this.filteredNodes||this.value;return null==e||0==e.length}getBlockableElement(){return this.el.nativeElement.children[0]}onColumnResizeBegin(e){let n=Ft.getOffset(this.containerViewChild.nativeElement).left;this.lastResizerHelperX=e.pageX-n+this.containerViewChild.nativeElement.scrollLeft,e.preventDefault()}onColumnResize(e){let n=Ft.getOffset(this.containerViewChild.nativeElement).left;Ft.addClass(this.containerViewChild.nativeElement,"p-unselectable-text"),this.resizeHelperViewChild.nativeElement.style.height=this.containerViewChild.nativeElement.offsetHeight+"px",this.resizeHelperViewChild.nativeElement.style.top="0px",this.resizeHelperViewChild.nativeElement.style.left=e.pageX-n+this.containerViewChild.nativeElement.scrollLeft+"px",this.resizeHelperViewChild.nativeElement.style.display="block"}onColumnResizeEnd(e,n){let r=this.resizeHelperViewChild.nativeElement.offsetLeft-this.lastResizerHelperX,s=n.offsetWidth,o=s+r;if(s+r>parseInt(n.style.minWidth||15)){if("fit"===this.columnResizeMode){let u=n.nextElementSibling;for(;!u.offsetParent;)u=u.nextElementSibling;if(u){let p=u.offsetWidth-r,v=u.style.minWidth||15;if(o>15&&p>parseInt(v))if(this.scrollable){let w=this.findParentScrollableView(n),I=Ft.findSingle(w,".p-treetable-scrollable-body table")||Ft.findSingle(w,".p-scroller-viewport table"),T=Ft.findSingle(w,"table.p-treetable-scrollable-header-table"),k=Ft.findSingle(w,"table.p-treetable-scrollable-footer-table"),G=Ft.index(n);this.resizeColGroup(T,G,o,p),this.resizeColGroup(I,G,o,p),this.resizeColGroup(k,G,o,p)}else n.style.width=o+"px",u&&(u.style.width=p+"px")}}else if("expand"===this.columnResizeMode)if(this.scrollable){let u=this.findParentScrollableView(n),p=Ft.findSingle(u,".p-treetable-scrollable-body")||Ft.findSingle(u,".p-scroller-viewport"),v=Ft.findSingle(u,".p-treetable-scrollable-header"),w=Ft.findSingle(u,".p-treetable-scrollable-footer"),I=Ft.findSingle(u,".p-treetable-scrollable-body table")||Ft.findSingle(u,".p-scroller-viewport table"),T=Ft.findSingle(u,"table.p-treetable-scrollable-header-table"),k=Ft.findSingle(u,"table.p-treetable-scrollable-footer-table");I.style.width=I.offsetWidth+r+"px",T.style.width=T.offsetWidth+r+"px",k&&(k.style.width=k.offsetWidth+r+"px");let G=Ft.index(n);const Y=n?I.offsetWidth+r:o,ce=n?T.offsetWidth+r:o,Se=this.containerViewChild.nativeElement.offsetWidth>=Y;let Ae=(Te,Qe,mt,zt)=>{Te&&Qe&&(Te.style.width=zt?mt+Ft.calculateScrollbarWidth(p)+"px":"auto",Qe.style.width=mt+"px")};Ae(p,I,Y,Se),Ae(v,T,ce,Se),Ae(w,k,ce,Se),this.resizeColGroup(T,G,o,null),this.resizeColGroup(I,G,o,null),this.resizeColGroup(k,G,o,null)}else this.tableViewChild.nativeElement.style.width=this.tableViewChild.nativeElement.offsetWidth+r+"px",n.style.width=o+"px",this.containerViewChild.nativeElement.style.width=this.tableViewChild.nativeElement.style.width+"px";this.onColResize.emit({element:n,delta:r})}this.resizeHelperViewChild.nativeElement.style.display="none",Ft.removeClass(this.containerViewChild.nativeElement,"p-unselectable-text")}findParentScrollableView(e){if(e){let n=e.parentElement;for(;n&&!Ft.hasClass(n,"p-treetable-scrollable-view");)n=n.parentElement;return n}return null}resizeColGroup(e,n,r,s){if(e){let o="COLGROUP"===e.children[0].nodeName?e.children[0]:null;if(!o)throw"Scrollable tables require a colgroup to support resizable columns";{let l=o.children[n],u=l.nextElementSibling;l.style.width=r+"px",u&&s&&(u.style.width=s+"px")}}}onColumnDragStart(e,n){this.reorderIconWidth=Ft.getHiddenElementOuterWidth(this.reorderIndicatorUpViewChild.nativeElement),this.reorderIconHeight=Ft.getHiddenElementOuterHeight(this.reorderIndicatorDownViewChild.nativeElement),this.draggedColumn=n,e.dataTransfer.setData("text","b")}onColumnDragEnter(e,n){if(this.reorderableColumns&&this.draggedColumn&&n){e.preventDefault();let r=Ft.getOffset(this.containerViewChild.nativeElement),s=Ft.getOffset(n);if(this.draggedColumn!=n){let o=s.left-r.left,u=s.left+n.offsetWidth/2;this.reorderIndicatorUpViewChild.nativeElement.style.top=s.top-r.top-(this.reorderIconHeight-1)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.top=s.top-r.top+n.offsetHeight+"px",e.pageX>u?(this.reorderIndicatorUpViewChild.nativeElement.style.left=o+n.offsetWidth-Math.ceil(this.reorderIconWidth/2)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.left=o+n.offsetWidth-Math.ceil(this.reorderIconWidth/2)+"px",this.dropPosition=1):(this.reorderIndicatorUpViewChild.nativeElement.style.left=o-Math.ceil(this.reorderIconWidth/2)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.left=o-Math.ceil(this.reorderIconWidth/2)+"px",this.dropPosition=-1),this.reorderIndicatorUpViewChild.nativeElement.style.display="block",this.reorderIndicatorDownViewChild.nativeElement.style.display="block"}else e.dataTransfer.dropEffect="none"}}onColumnDragLeave(e){this.reorderableColumns&&this.draggedColumn&&(e.preventDefault(),this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none")}onColumnDrop(e,n){if(e.preventDefault(),this.draggedColumn){let r=Ft.indexWithinGroup(this.draggedColumn,"ttreorderablecolumn"),s=Ft.indexWithinGroup(n,"ttreorderablecolumn"),o=r!=s;o&&(s-r==1&&-1===this.dropPosition||r-s==1&&1===this.dropPosition)&&(o=!1),o&&s<r&&1===this.dropPosition&&(s+=1),o&&s>r&&-1===this.dropPosition&&(s-=1),o&&(Ji.reorderArray(this.columns,r,s),this.onColReorder.emit({dragIndex:r,dropIndex:s,columns:this.columns})),this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none",this.draggedColumn.draggable=!1,this.draggedColumn=null,this.dropPosition=null}}handleRowClick(e){let n=e.originalEvent.target.nodeName;if("INPUT"!=n&&"BUTTON"!=n&&"A"!=n&&!Ft.hasClass(e.originalEvent.target,"p-clickable")){if(this.selectionMode){this.preventSelectionSetterPropagation=!0;let r=e.rowNode,s=this.isSelected(r.node),o=!this.rowTouched&&this.metaKeySelection,l=this.dataKey?String(Ji.resolveFieldData(r.node.data,this.dataKey)):null;if(o){let u=e.originalEvent.metaKey||e.originalEvent.ctrlKey;if(s&&u){if(this.isSingleSelectionMode())this._selection=null,this.selectionKeys={},this.selectionChange.emit(null);else{let p=this.findIndexInSelection(r.node);this._selection=this.selection.filter((v,w)=>w!=p),this.selectionChange.emit(this.selection),l&&delete this.selectionKeys[l]}this.onNodeUnselect.emit({originalEvent:e.originalEvent,node:r.node,type:"row"})}else this.isSingleSelectionMode()?(this._selection=r.node,this.selectionChange.emit(r.node),l&&(this.selectionKeys={},this.selectionKeys[l]=1)):this.isMultipleSelectionMode()&&(u?this._selection=this.selection||[]:(this._selection=[],this.selectionKeys={}),this._selection=[...this.selection,r.node],this.selectionChange.emit(this.selection),l&&(this.selectionKeys[l]=1)),this.onNodeSelect.emit({originalEvent:e.originalEvent,node:r.node,type:"row",index:e.rowIndex})}else if("single"===this.selectionMode)s?(this._selection=null,this.selectionKeys={},this.selectionChange.emit(this.selection),this.onNodeUnselect.emit({originalEvent:e.originalEvent,node:r.node,type:"row"})):(this._selection=r.node,this.selectionChange.emit(this.selection),this.onNodeSelect.emit({originalEvent:e.originalEvent,node:r.node,type:"row",index:e.rowIndex}),l&&(this.selectionKeys={},this.selectionKeys[l]=1));else if("multiple"===this.selectionMode)if(s){let u=this.findIndexInSelection(r.node);this._selection=this.selection.filter((p,v)=>v!=u),this.selectionChange.emit(this.selection),this.onNodeUnselect.emit({originalEvent:e.originalEvent,node:r.node,type:"row"}),l&&delete this.selectionKeys[l]}else this._selection=this.selection?[...this.selection,r.node]:[r.node],this.selectionChange.emit(this.selection),this.onNodeSelect.emit({originalEvent:e.originalEvent,node:r.node,type:"row",index:e.rowIndex}),l&&(this.selectionKeys[l]=1);this.tableService.onSelectionChange()}this.rowTouched=!1}}handleRowTouchEnd(e){this.rowTouched=!0}handleRowRightClick(e){if(this.contextMenu){const n=e.rowNode.node;if("separate"===this.contextMenuSelectionMode)this.contextMenuSelection=n,this.contextMenuSelectionChange.emit(n),this.onContextMenuSelect.emit({originalEvent:e.originalEvent,node:n}),this.contextMenu.show(e.originalEvent),this.tableService.onContextMenu(n);else if("joint"===this.contextMenuSelectionMode){this.preventSelectionSetterPropagation=!0;let r=this.isSelected(n),s=this.dataKey?String(Ji.resolveFieldData(n.data,this.dataKey)):null;r||(this.isSingleSelectionMode()?(this.selection=n,this.selectionChange.emit(n)):this.isMultipleSelectionMode()&&(this.selection=[n],this.selectionChange.emit(this.selection)),s&&(this.selectionKeys[s]=1)),this.contextMenu.show(e.originalEvent),this.onContextMenuSelect.emit({originalEvent:e.originalEvent,node:n})}}}toggleNodeWithCheckbox(e){this.selection=this.selection||[],this.preventSelectionSetterPropagation=!0;let n=e.rowNode.node;this.isSelected(n)?(this.propagateSelectionDown(n,!1),e.rowNode.parent&&this.propagateSelectionUp(n.parent,!1),this.selectionChange.emit(this.selection),this.onNodeUnselect.emit({originalEvent:e,node:n})):(this.propagateSelectionDown(n,!0),e.rowNode.parent&&this.propagateSelectionUp(n.parent,!0),this.selectionChange.emit(this.selection),this.onNodeSelect.emit({originalEvent:e,node:n})),this.tableService.onSelectionChange()}toggleNodesWithCheckbox(e,n){let r=this.filteredNodes||this.value;if(this._selection=n&&r?r.slice():[],n){if(r&&r.length)for(let s of r)this.propagateSelectionDown(s,!0)}else this._selection=[],this.selectionKeys={};this.preventSelectionSetterPropagation=!0,this.selectionChange.emit(this._selection),this.tableService.onSelectionChange(),this.onHeaderCheckboxToggle.emit({originalEvent:e,checked:n})}propagateSelectionUp(e,n){if(e.children&&e.children.length){let s=0,o=!1,l=this.dataKey?String(Ji.resolveFieldData(e.data,this.dataKey)):null;for(let u of e.children)this.isSelected(u)?s++:u.partialSelected&&(o=!0);if(n&&s==e.children.length)this._selection=[...this.selection||[],e],e.partialSelected=!1,l&&(this.selectionKeys[l]=1);else{if(!n){let u=this.findIndexInSelection(e);u>=0&&(this._selection=this.selection.filter((p,v)=>v!=u),l&&delete this.selectionKeys[l])}e.partialSelected=!!(o||s>0&&s!=e.children.length)}}let r=e.parent;r&&this.propagateSelectionUp(r,n)}propagateSelectionDown(e,n){let r=this.findIndexInSelection(e),s=this.dataKey?String(Ji.resolveFieldData(e.data,this.dataKey)):null;if(n&&-1==r?(this._selection=[...this.selection||[],e],s&&(this.selectionKeys[s]=1)):!n&&r>-1&&(this._selection=this.selection.filter((o,l)=>l!=r),s&&delete this.selectionKeys[s]),e.partialSelected=!1,e.children&&e.children.length)for(let o of e.children)this.propagateSelectionDown(o,n)}isSelected(e){return!(!e||!this.selection)&&(this.dataKey?void 0!==this.selectionKeys[Ji.resolveFieldData(e.data,this.dataKey)]:this.selection instanceof Array?this.findIndexInSelection(e)>-1:this.equals(e,this.selection))}findIndexInSelection(e){let n=-1;if(this.selection&&this.selection.length)for(let r=0;r<this.selection.length;r++)if(this.equals(e,this.selection[r])){n=r;break}return n}isSingleSelectionMode(){return"single"===this.selectionMode}isMultipleSelectionMode(){return"multiple"===this.selectionMode}equals(e,n){return"equals"===this.compareSelectionBy?e===n:Ji.equals(e.data,n.data,this.dataKey)}filter(e,n,r){this.filterTimeout&&clearTimeout(this.filterTimeout),this.isFilterBlank(e)?this.filters[n]&&delete this.filters[n]:this.filters[n]={value:e,matchMode:r},this.filterTimeout=setTimeout(()=>{this._filter(),this.filterTimeout=null},this.filterDelay)}filterGlobal(e,n){this.filter(e,"global",n)}isFilterBlank(e){return null==e||"string"==typeof e&&0==e.trim().length||e instanceof Array&&0==e.length}_filter(){if(this.lazy)this.onLazyLoad.emit(this.createLazyLoadMetadata());else{if(!this.value)return;if(this.hasFilter()){let n;if(this.filters.global){if(!this.columns&&!this.globalFilterFields)throw new Error("Global filtering requires dynamic columns or globalFilterFields to be defined.");n=this.globalFilterFields||this.columns}this.filteredNodes=[];const r="strict"===this.filterMode;let s=!1;for(let o of this.value){let v,l={...o},u=!0,p=!1;for(let I in this.filters)if(this.filters.hasOwnProperty(I)&&"global"!==I){let T=this.filters[I];if(v={filterField:I,filterValue:T.value,filterConstraint:this.filterService.filters[T.matchMode||"startsWith"],isStrictMode:r},(r&&!(this.findFilteredNodes(l,v)||this.isFilterMatched(l,v))||!r&&!(this.isFilterMatched(l,v)||this.findFilteredNodes(l,v)))&&(u=!1),!u)break}if(this.filters.global&&!p&&n)for(let I=0;I<n.length;I++){let T={...l};v={filterField:n[I].field||n[I],filterValue:this.filters.global.value,filterConstraint:this.filterService.filters[this.filters.global.matchMode],isStrictMode:r},(r&&(this.findFilteredNodes(T,v)||this.isFilterMatched(T,v))||!r&&(this.isFilterMatched(T,v)||this.findFilteredNodes(T,v)))&&(p=!0,l=T)}let w=u;this.filters.global&&(w=u&&p),w&&this.filteredNodes.push(l),s=s||!u||p||u&&this.filteredNodes.length>0||!p&&0===this.filteredNodes.length}s||(this.filteredNodes=null),this.paginator&&(this.totalRecords=this.filteredNodes?this.filteredNodes.length:this.value?this.value.length:0)}else this.filteredNodes=null,this.paginator&&(this.totalRecords=this.value?this.value.length:0)}this.first=0;const e=this.filteredNodes||this.value;this.onFilter.emit({filters:this.filters,filteredValue:e}),this.tableService.onUIUpdate(e),this.updateSerializedValue(),this.scrollable&&this.resetScrollTop()}findFilteredNodes(e,n){if(e){let r=!1;if(e.children){let s=[...e.children];e.children=[];for(let o of s){let l={...o};this.isFilterMatched(l,n)&&(r=!0,e.children.push(l))}}if(r)return!0}}isFilterMatched(e,{filterField:n,filterValue:r,filterConstraint:s,isStrictMode:o}){let l=!1;return s(Ji.resolveFieldData(e.data,n),r,this.filterLocale)&&(l=!0),(!l||o&&!this.isNodeLeaf(e))&&(l=this.findFilteredNodes(e,{filterField:n,filterValue:r,filterConstraint:s,isStrictMode:o})||l),l}isNodeLeaf(e){return!1!==e.leaf&&!(e.children&&e.children.length)}hasFilter(){let e=!0;for(let n in this.filters)if(this.filters.hasOwnProperty(n)){e=!1;break}return!e}reset(){this._sortField=null,this._sortOrder=1,this._multiSortMeta=null,this.tableService.onSort(null),this.filteredNodes=null,this.filters={},this.first=0,this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.totalRecords=this._value?this._value.length:0}updateEditingCell(e,n,r){this.editingCell=e,this.editingCellData=n,this.editingCellField=r,this.bindDocumentEditListener()}isEditingCellValid(){return this.editingCell&&0===Ft.find(this.editingCell,".ng-invalid.ng-dirty").length}bindDocumentEditListener(){this.documentEditListener||(this.documentEditListener=e=>{this.editingCell&&!this.editingCellClick&&this.isEditingCellValid()&&(Ft.removeClass(this.editingCell,"p-cell-editing"),this.editingCell=null,this.onEditComplete.emit({field:this.editingCellField,data:this.editingCellData}),this.editingCellField=null,this.editingCellData=null,this.unbindDocumentEditListener()),this.editingCellClick=!1},document.addEventListener("click",this.documentEditListener))}unbindDocumentEditListener(){this.documentEditListener&&(document.removeEventListener("click",this.documentEditListener),this.documentEditListener=null)}ngOnDestroy(){this.unbindDocumentEditListener(),this.editingCell=null,this.editingCellField=null,this.editingCellData=null,this.initialized=null}}return i.\u0275fac=function(e){return new(e||i)(Xt(Yn),Xt(xo),Xt(Vo),Xt(Z2),Xt(oA))},i.\u0275cmp=_r({type:i,selectors:[["p-treeTable"]],contentQueries:function(e,n,r){if(1&e&&Ba(r,za,4),2&e){let s;Wi(s=ji())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(Tr(ace,5),Tr(lce,5),Tr(cce,5),Tr(uce,5),Tr(hce,5),Tr(dce,5),Tr(fce,5)),2&e){let r;Wi(r=ji())&&(n.containerViewChild=r.first),Wi(r=ji())&&(n.resizeHelperViewChild=r.first),Wi(r=ji())&&(n.reorderIndicatorUpViewChild=r.first),Wi(r=ji())&&(n.reorderIndicatorDownViewChild=r.first),Wi(r=ji())&&(n.tableViewChild=r.first),Wi(r=ji())&&(n.scrollableViewChild=r.first),Wi(r=ji())&&(n.scrollableFrozenViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{columns:"columns",style:"style",styleClass:"styleClass",tableStyle:"tableStyle",tableStyleClass:"tableStyleClass",autoLayout:"autoLayout",lazy:"lazy",lazyLoadOnInit:"lazyLoadOnInit",paginator:"paginator",rows:"rows",first:"first",pageLinks:"pageLinks",rowsPerPageOptions:"rowsPerPageOptions",alwaysShowPaginator:"alwaysShowPaginator",paginatorPosition:"paginatorPosition",paginatorDropdownAppendTo:"paginatorDropdownAppendTo",currentPageReportTemplate:"currentPageReportTemplate",showCurrentPageReport:"showCurrentPageReport",showJumpToPageDropdown:"showJumpToPageDropdown",showFirstLastIcon:"showFirstLastIcon",showPageLinks:"showPageLinks",defaultSortOrder:"defaultSortOrder",sortMode:"sortMode",resetPageOnSort:"resetPageOnSort",customSort:"customSort",selectionMode:"selectionMode",contextMenuSelection:"contextMenuSelection",contextMenuSelectionMode:"contextMenuSelectionMode",dataKey:"dataKey",metaKeySelection:"metaKeySelection",compareSelectionBy:"compareSelectionBy",rowHover:"rowHover",loading:"loading",loadingIcon:"loadingIcon",showLoader:"showLoader",scrollable:"scrollable",scrollHeight:"scrollHeight",virtualScroll:"virtualScroll",virtualScrollItemSize:"virtualScrollItemSize",virtualScrollOptions:"virtualScrollOptions",virtualScrollDelay:"virtualScrollDelay",frozenWidth:"frozenWidth",frozenColumns:"frozenColumns",resizableColumns:"resizableColumns",columnResizeMode:"columnResizeMode",reorderableColumns:"reorderableColumns",contextMenu:"contextMenu",rowTrackBy:"rowTrackBy",filters:"filters",globalFilterFields:"globalFilterFields",filterDelay:"filterDelay",filterMode:"filterMode",filterLocale:"filterLocale",virtualRowHeight:"virtualRowHeight",value:"value",totalRecords:"totalRecords",sortField:"sortField",sortOrder:"sortOrder",multiSortMeta:"multiSortMeta",selection:"selection"},outputs:{selectionChange:"selectionChange",contextMenuSelectionChange:"contextMenuSelectionChange",onFilter:"onFilter",onNodeExpand:"onNodeExpand",onNodeCollapse:"onNodeCollapse",onPage:"onPage",onSort:"onSort",onLazyLoad:"onLazyLoad",sortFunction:"sortFunction",onColResize:"onColResize",onColReorder:"onColReorder",onNodeSelect:"onNodeSelect",onNodeUnselect:"onNodeUnselect",onContextMenuSelect:"onContextMenuSelect",onHeaderCheckboxToggle:"onHeaderCheckboxToggle",onEditInit:"onEditInit",onEditComplete:"onEditComplete",onEditCancel:"onEditCancel"},features:[Ao([Z2]),da],decls:12,vars:20,consts:[["data-scrollselectors",".p-treetable-scrollable-body",3,"ngStyle","ngClass"],["container",""],["class","p-treetable-loading",4,"ngIf"],["class","p-treetable-header",4,"ngIf"],["styleClass","p-paginator-top",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showPageLinks","onPageChange",4,"ngIf"],["class","p-treetable-wrapper",4,"ngIf"],["class","p-treetable-scrollable-wrapper",4,"ngIf"],["styleClass","p-paginator-bottom",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showPageLinks","onPageChange",4,"ngIf"],["class","p-treetable-footer",4,"ngIf"],["class","p-column-resizer-helper","style","display:none",4,"ngIf"],["class","pi pi-arrow-down p-treetable-reorder-indicator-up",4,"ngIf"],["class","pi pi-arrow-up p-treetable-reorder-indicator-down",4,"ngIf"],[1,"p-treetable-loading"],[1,"p-treetable-loading-overlay","p-component-overlay"],[1,"p-treetable-header"],[4,"ngTemplateOutlet"],["styleClass","p-paginator-top",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showPageLinks","onPageChange"],[1,"p-treetable-wrapper"],[3,"ngClass","ngStyle"],["table",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-treetable-thead"],[1,"p-treetable-tbody",3,"pTreeTableBody","pTreeTableBodyTemplate"],[1,"p-treetable-tfoot"],[1,"p-treetable-scrollable-wrapper"],["class","p-treetable-scrollable-view p-treetable-frozen-view",3,"ttScrollableView","frozen","ngStyle","scrollHeight",4,"ngIf"],[1,"p-treetable-scrollable-view",3,"ttScrollableView","frozen","scrollHeight","ngStyle"],["scrollableView",""],[1,"p-treetable-scrollable-view","p-treetable-frozen-view",3,"ttScrollableView","frozen","ngStyle","scrollHeight"],["scrollableFrozenView",""],["styleClass","p-paginator-bottom",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showPageLinks","onPageChange"],[1,"p-treetable-footer"],[1,"p-column-resizer-helper",2,"display","none"],["resizeHelper",""],[1,"pi","pi-arrow-down","p-treetable-reorder-indicator-up"],["reorderIndicatorUp",""],[1,"pi","pi-arrow-up","p-treetable-reorder-indicator-down"],["reorderIndicatorDown",""]],template:function(e,n){1&e&&(Ke(0,"div",0,1),$e(2,pce,3,2,"div",2),$e(3,mce,2,1,"div",3),$e(4,vce,1,15,"p-paginator",4),$e(5,Cce,9,16,"div",5),$e(6,Ice,4,8,"div",6),$e(7,Sce,1,15,"p-paginator",7),$e(8,Tce,2,1,"div",8),$e(9,Mce,2,0,"div",9),$e(10,Dce,2,0,"span",10),$e(11,Lce,2,0,"span",11),Je()),2&e&&(kr(n.styleClass),de("ngStyle",n.style)("ngClass",h0(14,Pce,n.rowHover||"single"===n.selectionMode||"multiple"===n.selectionMode,n.autoLayout,n.resizableColumns,n.resizableColumns&&"fit"===n.columnResizeMode,n.scrollable&&"flex"===n.scrollHeight)),Ie(2),de("ngIf",n.loading&&n.showLoader),Ie(1),de("ngIf",n.captionTemplate),Ie(1),de("ngIf",n.paginator&&("top"===n.paginatorPosition||"both"==n.paginatorPosition)),Ie(1),de("ngIf",!n.scrollable),Ie(1),de("ngIf",n.scrollable),Ie(1),de("ngIf",n.paginator&&("bottom"===n.paginatorPosition||"both"==n.paginatorPosition)),Ie(1),de("ngIf",n.summaryTemplate),Ie(1),de("ngIf",n.resizableColumns),Ie(1),de("ngIf",n.reorderableColumns),Ie(1),de("ngIf",n.reorderableColumns))},dependencies:function(){return[no,ho,el,Po,n4,_ue,N4]},styles:[".p-treetable{position:relative}.p-treetable table{border-collapse:collapse;width:100%;table-layout:fixed}.p-treetable .p-sortable-column{cursor:pointer;-webkit-user-select:none;user-select:none}.p-treetable .p-sortable-column .p-column-title,.p-treetable .p-sortable-column .p-sortable-column-icon,.p-treetable .p-sortable-column .p-sortable-column-badge{vertical-align:middle}.p-treetable .p-sortable-column .p-sortable-column-badge{display:inline-flex;align-items:center;justify-content:center}.p-treetable-auto-layout>.p-treetable-wrapper{overflow-x:auto}.p-treetable-auto-layout>.p-treetable-wrapper>table{table-layout:auto}.p-treetable-hoverable-rows .p-treetable-tbody>tr{cursor:pointer}.p-treetable-toggler{cursor:pointer;-webkit-user-select:none;user-select:none;display:inline-flex;align-items:center;justify-content:center;vertical-align:middle;overflow:hidden;position:relative}p-treetabletoggler+p-treetablecheckbox .p-checkbox{vertical-align:middle}p-treetabletoggler+p-treetablecheckbox+span{vertical-align:middle}.p-treetable-scrollable-wrapper{position:relative}.p-treetable-scrollable-header,.p-treetable-scrollable-footer{overflow:hidden}.p-treetable-scrollable-body{overflow:auto;position:relative}.p-treetable-scrollable-body>table>.p-treetable-tbody>tr:first-child>td{border-top:0 none}.p-treetable-virtual-table{position:absolute}.p-treetable-frozen-view .p-treetable-scrollable-body{overflow:hidden}.p-treetable-frozen-view>.p-treetable-scrollable-body>table>.p-treetable-tbody>tr>td:last-child{border-right:0 none}.p-treetable-unfrozen-view{position:absolute;top:0}.p-treetable-flex-scrollable,.p-treetable-flex-scrollable .p-treetable-scrollable-wrapper,.p-treetable-flex-scrollable .p-treetable-scrollable-view{display:flex;flex-direction:column;flex:1;height:100%}.p-treetable-flex-scrollable .p-treetable-virtual-scrollable-body{flex:1}.p-treetable-resizable>.p-treetable-wrapper{overflow-x:auto}.p-treetable-resizable .p-treetable-thead>tr>th,.p-treetable-resizable .p-treetable-tfoot>tr>td,.p-treetable-resizable .p-treetable-tbody>tr>td{overflow:hidden}.p-treetable-resizable .p-resizable-column{background-clip:padding-box;position:relative}.p-treetable-resizable-fit .p-resizable-column:last-child .p-column-resizer{display:none}.p-treetable .p-column-resizer{display:block;position:absolute!important;top:0;right:0;margin:0;width:.5rem;height:100%;padding:0;cursor:col-resize;border:1px solid transparent}.p-treetable .p-column-resizer-helper{width:1px;position:absolute;z-index:10;display:none}.p-treetable .p-row-editor-init,.p-treetable .p-row-editor-save,.p-treetable .p-row-editor-cancel,.p-treetable .p-row-toggler{display:inline-flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-treetable-reorder-indicator-up,.p-treetable-reorder-indicator-down{position:absolute;display:none}[ttReorderableColumn]{cursor:move}.p-treetable .p-treetable-loading-overlay{position:absolute;display:flex;align-items:center;justify-content:center;z-index:2}.p-treetable .p-scroller-loading{transform:none!important;min-height:0;position:sticky;top:0;left:0}\n"],encapsulation:2}),i})(),N4=(()=>{class i{constructor(e,n,r){this.tt=e,this.treeTableService=n,this.cd=r,this.subscription=this.tt.tableService.uiUpdateSource$.subscribe(()=>{this.tt.virtualScroll&&this.cd.detectChanges()})}getScrollerOption(e,n){return this.tt.virtualScroll&&(n=n||this.scrollerOptions)?n[e]:null}getRowIndex(e){const n=this.getScrollerOption("getItemOptions");return n?n(e).index:e}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(Xt(J1),Xt(Z2),Xt(xo))},i.\u0275cmp=_r({type:i,selectors:[["","pTreeTableBody",""]],hostAttrs:[1,"p-element"],inputs:{columns:["pTreeTableBody","columns"],template:["pTreeTableBodyTemplate","template"],frozen:"frozen",serializedNodes:"serializedNodes",scrollerOptions:"scrollerOptions"},attrs:Rce,decls:2,vars:3,consts:[["ngFor","",3,"ngForOf","ngForTrackBy"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,n){1&e&&($e(0,Nce,1,1,"ng-template",0),$e(1,Vce,2,5,"ng-container",1)),2&e&&(de("ngForOf",n.serializedNodes||n.tt.serializedValue)("ngForTrackBy",n.tt.rowTrackBy),Ie(1),de("ngIf",n.tt.isEmpty()))},dependencies:[jc,ho,el],encapsulation:2}),i})(),_ue=(()=>{class i{constructor(e,n,r){this.tt=e,this.el=n,this.zone=r}get scrollHeight(){return this._scrollHeight}set scrollHeight(e){this._scrollHeight=e,null!=e&&(e.includes("%")||e.includes("calc"))&&console.log('Percentage scroll height calculation is removed in favor of the more performant CSS based flex mode, use scrollHeight="flex" instead.')}ngAfterViewInit(){if(this.frozen)this.scrollableAlignerViewChild&&this.scrollableAlignerViewChild.nativeElement&&(this.scrollableAlignerViewChild.nativeElement.style.height=Ft.calculateScrollbarHeight()+"px");else{(this.tt.frozenColumns||this.tt.frozenBodyTemplate)&&Ft.addClass(this.el.nativeElement,"p-treetable-unfrozen-view");let e=this.el.nativeElement.previousElementSibling;e&&(this.frozenSiblingBody=Ft.findSingle(e,this.tt.virtualScroll?".p-scroller-viewport":".p-treetable-scrollable-body"));let n=Ft.calculateScrollbarWidth();this.scrollHeaderBoxViewChild.nativeElement.style.paddingRight=n+"px",this.scrollFooterBoxViewChild&&this.scrollFooterBoxViewChild.nativeElement&&(this.scrollFooterBoxViewChild.nativeElement.style.paddingRight=n+"px")}this.bindEvents()}bindEvents(){this.zone.runOutsideAngular(()=>{this.scrollHeaderViewChild&&this.scrollHeaderViewChild.nativeElement&&(this.headerScrollListener=this.onHeaderScroll.bind(this),this.scrollHeaderBoxViewChild.nativeElement.addEventListener("scroll",this.headerScrollListener)),this.scrollFooterViewChild&&this.scrollFooterViewChild.nativeElement&&(this.footerScrollListener=this.onFooterScroll.bind(this),this.scrollFooterViewChild.nativeElement.addEventListener("scroll",this.footerScrollListener)),this.frozen||(this.bodyScrollListener=this.onBodyScroll.bind(this),this.tt.virtualScroll?this.scroller.getElementRef().nativeElement.addEventListener("scroll",this.bodyScrollListener):this.scrollBodyViewChild.nativeElement.addEventListener("scroll",this.bodyScrollListener))})}unbindEvents(){this.scrollHeaderViewChild&&this.scrollHeaderViewChild.nativeElement&&this.scrollHeaderBoxViewChild.nativeElement.removeEventListener("scroll",this.headerScrollListener),this.scrollFooterViewChild&&this.scrollFooterViewChild.nativeElement&&this.scrollFooterViewChild.nativeElement.removeEventListener("scroll",this.footerScrollListener),this.scrollBodyViewChild&&this.scrollBodyViewChild.nativeElement&&this.scrollBodyViewChild.nativeElement.removeEventListener("scroll",this.bodyScrollListener),this.scroller&&this.scroller.getElementRef()&&this.scroller.getElementRef().nativeElement.removeEventListener("scroll",this.bodyScrollListener)}onHeaderScroll(){const e=this.scrollHeaderViewChild.nativeElement.scrollLeft;this.scrollBodyViewChild.nativeElement.scrollLeft=e,this.scrollFooterViewChild&&this.scrollFooterViewChild.nativeElement&&(this.scrollFooterViewChild.nativeElement.scrollLeft=e),this.preventBodyScrollPropagation=!0}onFooterScroll(){const e=this.scrollFooterViewChild.nativeElement.scrollLeft;this.scrollBodyViewChild.nativeElement.scrollLeft=e,this.scrollHeaderViewChild&&this.scrollHeaderViewChild.nativeElement&&(this.scrollHeaderViewChild.nativeElement.scrollLeft=e),this.preventBodyScrollPropagation=!0}onBodyScroll(e){this.preventBodyScrollPropagation?this.preventBodyScrollPropagation=!1:(this.scrollHeaderViewChild&&this.scrollHeaderViewChild.nativeElement&&(this.scrollHeaderBoxViewChild.nativeElement.style.marginLeft=-1*e.target.scrollLeft+"px"),this.scrollFooterViewChild&&this.scrollFooterViewChild.nativeElement&&(this.scrollFooterBoxViewChild.nativeElement.style.marginLeft=-1*e.target.scrollLeft+"px"),this.frozenSiblingBody&&(this.frozenSiblingBody.scrollTop=e.target.scrollTop))}scrollToVirtualIndex(e){this.scroller&&this.scroller.scrollToIndex(e)}scrollTo(e){this.scroller?this.scroller.scrollTo(e):this.scrollBodyViewChild.nativeElement.scrollTo?this.scrollBodyViewChild.nativeElement.scrollTo(e):(this.scrollBodyViewChild.nativeElement.scrollLeft=e.left,this.scrollBodyViewChild.nativeElement.scrollTop=e.top)}ngOnDestroy(){this.unbindEvents(),this.frozenSiblingBody=null}}return i.\u0275fac=function(e){return new(e||i)(Xt(J1),Xt(Yn),Xt(Vo))},i.\u0275cmp=_r({type:i,selectors:[["","ttScrollableView",""]],viewQuery:function(e,n){if(1&e&&(Tr(Uce,5),Tr(Hce,5),Tr(Gce,5),Tr(Wce,5),Tr(jce,5),Tr($ce,5),Tr(qce,5),Tr(Xce,5),Tr(Yce,5)),2&e){let r;Wi(r=ji())&&(n.scrollHeaderViewChild=r.first),Wi(r=ji())&&(n.scrollHeaderBoxViewChild=r.first),Wi(r=ji())&&(n.scrollBodyViewChild=r.first),Wi(r=ji())&&(n.scrollTableViewChild=r.first),Wi(r=ji())&&(n.scrollLoadingTableViewChild=r.first),Wi(r=ji())&&(n.scrollFooterViewChild=r.first),Wi(r=ji())&&(n.scrollFooterBoxViewChild=r.first),Wi(r=ji())&&(n.scrollableAlignerViewChild=r.first),Wi(r=ji())&&(n.scroller=r.first)}},hostAttrs:[1,"p-element"],inputs:{columns:["ttScrollableView","columns"],frozen:"frozen",scrollHeight:"scrollHeight"},attrs:Kce,decls:13,vars:13,consts:[[1,"p-treetable-scrollable-header"],["scrollHeader",""],[1,"p-treetable-scrollable-header-box"],["scrollHeaderBox",""],[1,"p-treetable-scrollable-header-table",3,"ngClass","ngStyle"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-treetable-thead"],["styleClass","p-treetable-scrollable-body",3,"items","style","scrollHeight","itemSize","lazy","options","onLazyLoad",4,"ngIf"],[4,"ngIf"],["buildInItems",""],["class","p-treetable-scrollable-footer",4,"ngIf"],["styleClass","p-treetable-scrollable-body",3,"items","scrollHeight","itemSize","lazy","options","onLazyLoad"],["scroller",""],["pTemplate","content"],["pTemplate","loader"],[1,"p-treetable-scrollable-body",3,"ngStyle"],["scrollBody",""],[3,"ngClass","ngStyle"],["scrollTable",""],[1,"p-treetable-tbody",3,"pTreeTableBody","pTreeTableBodyTemplate","serializedNodes","frozen"],["style","background-color:transparent",4,"ngIf"],[2,"background-color","transparent"],["scrollableAligner",""],[1,"p-treetable-scrollable-footer"],["scrollFooter",""],[1,"p-treetable-scrollable-footer-box"],["scrollFooterBox",""],[1,"p-treetable-scrollable-footer-table",3,"ngClass","ngStyle"],[1,"p-treetable-tfoot"]],template:function(e,n){1&e&&(Ke(0,"div",0,1)(2,"div",2,3)(4,"table",4),$e(5,Zce,1,0,"ng-container",5),Ke(6,"thead",6),$e(7,Qce,1,0,"ng-container",5),Je()()()(),$e(8,oue,4,10,"p-scroller",7),$e(9,uue,4,10,"ng-container",8),$e(10,fue,5,15,"ng-template",null,9,sc),$e(12,mue,8,10,"div",10)),2&e&&(Ie(4),de("ngClass",n.tt.tableStyleClass)("ngStyle",n.tt.tableStyle),Ie(1),de("ngTemplateOutlet",n.frozen&&n.tt.frozenColGroupTemplate||n.tt.colGroupTemplate)("ngTemplateOutletContext",_i(9,c_,n.columns)),Ie(2),de("ngTemplateOutlet",n.frozen&&n.tt.frozenHeaderTemplate||n.tt.headerTemplate)("ngTemplateOutletContext",_i(11,c_,n.columns)),Ie(1),de("ngIf",n.tt.virtualScroll),Ie(1),de("ngIf",!n.tt.virtualScroll),Ie(3),de("ngIf",n.tt.footerTemplate))},dependencies:[no,ho,el,Po,za,EA,N4],encapsulation:2}),i})(),bue=(()=>{class i{constructor(e){this.tt=e}onClick(e){this.rowNode.node.expanded=!this.rowNode.node.expanded,this.rowNode.node.expanded?this.tt.onNodeExpand.emit({originalEvent:e,node:this.rowNode.node}):this.tt.onNodeCollapse.emit({originalEvent:e,node:this.rowNode.node}),this.tt.updateSerializedValue(),this.tt.tableService.onUIUpdate(this.tt.value),e.preventDefault()}}return i.\u0275fac=function(e){return new(e||i)(Xt(J1))},i.\u0275cmp=_r({type:i,selectors:[["p-treeTableToggler"]],hostAttrs:[1,"p-element"],inputs:{rowNode:"rowNode"},decls:2,vars:5,consts:[["type","button","tabindex","-1","pRipple","",1,"p-treetable-toggler","p-link",3,"click"],[3,"ngClass"]],template:function(e,n){1&e&&(Ke(0,"button",0),mn("click",function(s){return n.onClick(s)}),Bn(1,"i",1),Je()),2&e&&(Ad("visibility",!1===n.rowNode.node.leaf||n.rowNode.node.children&&n.rowNode.node.children.length?"visible":"hidden")("margin-left",16*n.rowNode.level+"px"),Ie(1),de("ngClass",n.rowNode.node.expanded?"pi pi-fw pi-chevron-down":"pi pi-fw pi-chevron-right"))},dependencies:[no,Du],encapsulation:2}),i})(),Cue=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({imports:[Os,r4,Xc,ov,xa,ov]}),i})();function wue(i,t){if(1&i&&Bn(0,"span",11),2&i){const e=be(2).$implicit;de("ngClass",e.icon)("ngStyle",e.iconStyle)}}function Aue(i,t){1&i&&Ni(0)}const B4=function(i){return{"p-disabled":i}},xue=function(){return{exact:!1}},z4=function(i){return{$implicit:i}};function Iue(i,t){if(1&i){const e=vi();Ke(0,"a",8),mn("click",function(r){Pt(e);const s=be().$implicit;return Rt(be().onItemClick(r,s))})("keydown.enter",function(r){Pt(e);const s=be(),o=s.$implicit,l=s.index;return Rt(be().onItemClick(r,o,l))}),$e(1,wue,1,2,"span",9),$e(2,Aue,1,0,"ng-container",10),Je()}if(2&i){const e=be().$implicit,n=be();de("routerLink",e.routerLink)("queryParams",e.queryParams)("ngClass",_i(17,B4,e.disabled))("routerLinkActiveOptions",e.routerLinkActiveOptions||uo(19,xue))("target",e.target)("tooltipOptions",e.tooltipOptions)("fragment",e.fragment)("queryParamsHandling",e.queryParamsHandling)("preserveFragment",e.preserveFragment)("skipLocationChange",e.skipLocationChange)("replaceUrl",e.replaceUrl)("state",e.state),vr("id",e.id)("tabindex",e.disabled||n.readonly?null:e.tabindex?e.tabindex:"0"),Ie(1),de("ngIf",e.icon&&!n.itemTemplate),Ie(1),de("ngTemplateOutlet",n.itemTemplate)("ngTemplateOutletContext",_i(20,z4,e))}}function Sue(i,t){if(1&i&&Bn(0,"span",11),2&i){const e=be(2).$implicit;de("ngClass",e.icon)("ngStyle",e.iconStyle)}}function Eue(i,t){1&i&&Ni(0)}function Tue(i,t){if(1&i){const e=vi();Ke(0,"a",12),mn("click",function(r){Pt(e);const s=be().$implicit;return Rt(be().onItemClick(r,s))})("keydown.enter",function(r){Pt(e);const s=be(),o=s.$implicit,l=s.index;return Rt(be().onItemClick(r,o,l))}),$e(1,Sue,1,2,"span",9),$e(2,Eue,1,0,"ng-container",10),Je()}if(2&i){const e=be(),n=e.$implicit,r=e.index,s=be();de("tooltipPosition",n.tooltipPosition)("tooltipOptions",n.tooltipOptions)("ngClass",_i(10,B4,n.disabled))("target",n.target),vr("href",n.url||null,Xh)("id",n.id)("tabindex",n.disabled||r!==s.activeIndex&&s.readonly?null:n.tabindex?n.tabindex:"0"),Ie(1),de("ngIf",n.icon&&!s.itemTemplate),Ie(1),de("ngTemplateOutlet",s.itemTemplate)("ngTemplateOutletContext",_i(12,z4,n))}}function Mue(i,t){if(1&i){const e=vi();Ke(0,"li",5),mn("mouseenter",function(){const s=Pt(e).index;return Rt(be().onItemMouseEnter(s))}),$e(1,Iue,3,22,"a",6),$e(2,Tue,3,14,"ng-template",null,7,sc),Je()}if(2&i){const e=t.$implicit,n=t.index,r=oo(3),s=be();de("ngClass",s.itemClass(n)),Ie(1),de("ngIf",s.isClickableRouterLink(e))("ngIfElse",r)}}let Due=(()=>{class i{constructor(e,n){this.el=e,this.cd=n,this.model=null,this.position="bottom",this.currentIndex=-3}ngAfterContentInit(){this.templates.forEach(e=>{e.getType(),this.itemTemplate=e.template})}onListMouseLeave(){this.currentIndex=-3,this.cd.markForCheck()}onItemMouseEnter(e){this.currentIndex=e,this.cd.markForCheck()}onItemClick(e,n){n.command&&n.command({originalEvent:e,item:n})}get containerClass(){return{[`p-dock p-component  p-dock-${this.position}`]:!0}}isClickableRouterLink(e){return e.routerLink&&!e.disabled}itemClass(e){return{"p-dock-item":!0,"p-dock-item-second-prev":this.currentIndex-2===e,"p-dock-item-prev":this.currentIndex-1===e,"p-dock-item-current":this.currentIndex===e,"p-dock-item-next":this.currentIndex+1===e,"p-dock-item-second-next":this.currentIndex+2===e}}}return i.\u0275fac=function(e){return new(e||i)(Xt(Yn),Xt(xo))},i.\u0275cmp=_r({type:i,selectors:[["p-dock"]],contentQueries:function(e,n,r){if(1&e&&Ba(r,za,4),2&e){let s;Wi(s=ji())&&(n.templates=s)}},hostAttrs:[1,"p-element"],inputs:{id:"id",style:"style",styleClass:"styleClass",model:"model",position:"position"},decls:5,vars:6,consts:[[3,"ngClass","ngStyle"],[1,"p-dock-list-container"],["role","menu",1,"p-dock-list",3,"mouseleave"],["list",""],[3,"ngClass","mouseenter",4,"ngFor","ngForOf"],[3,"ngClass","mouseenter"],["pRipple","","class","p-dock-action","role","menuitem","pTooltip","",3,"routerLink","queryParams","ngClass","routerLinkActiveOptions","target","tooltipOptions","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","click","keydown.enter",4,"ngIf","ngIfElse"],["elseBlock",""],["pRipple","","role","menuitem","pTooltip","",1,"p-dock-action",3,"routerLink","queryParams","ngClass","routerLinkActiveOptions","target","tooltipOptions","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","click","keydown.enter"],["class","p-dock-action-icon",3,"ngClass","ngStyle",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-dock-action-icon",3,"ngClass","ngStyle"],["role","menuitem","pRipple","","pTooltip","",1,"p-dock-action",3,"tooltipPosition","tooltipOptions","ngClass","target","click","keydown.enter"]],template:function(e,n){1&e&&(Ke(0,"div",0)(1,"div",1)(2,"ul",2,3),mn("mouseleave",function(){return n.onListMouseLeave()}),$e(4,Mue,4,3,"li",4),Je()()()),2&e&&(kr(n.styleClass),de("ngClass",n.containerClass)("ngStyle",n.style),vr("id",n.id),Ie(4),de("ngForOf",n.model))},dependencies:[no,jc,ho,el,Po,rC,Du,rv],styles:[".p-dock{position:absolute;z-index:1;display:flex;justify-content:center;align-items:center;pointer-events:none}.p-dock-list-container{display:flex;pointer-events:auto}.p-dock-list{margin:0;padding:0;list-style:none;display:flex;align-items:center;justify-content:center}.p-dock-item{transition:all .2s cubic-bezier(.4,0,.2,1);will-change:transform}.p-dock-action{display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative;overflow:hidden;cursor:default}.p-dock-item-second-prev,.p-dock-item-second-next{transform:scale(1.2)}.p-dock-item-prev,.p-dock-item-next{transform:scale(1.4)}.p-dock-item-current{transform:scale(1.6);z-index:1}.p-dock-top{left:0;top:0;width:100%}.p-dock-top .p-dock-item{transform-origin:center top}.p-dock-bottom{left:0;bottom:0;width:100%}.p-dock-bottom .p-dock-item{transform-origin:center bottom}.p-dock-right{right:0;top:0;height:100%}.p-dock-right .p-dock-item{transform-origin:center right}.p-dock-right .p-dock-list{flex-direction:column}.p-dock-left{left:0;top:0;height:100%}.p-dock-left .p-dock-item{transform-origin:center left}.p-dock-left .p-dock-list{flex-direction:column}\n"],encapsulation:2,changeDetection:0}),i})(),Lue=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({imports:[Os,s_,Xc,sv,xa,sv,s_]}),i})();const Pue=["cb"],Rue=function(i,t,e){return{"p-checkbox-label":!0,"p-checkbox-label-active":i,"p-disabled":t,"p-checkbox-label-focus":e}};function kue(i,t){if(1&i){const e=vi();Ke(0,"label",7),mn("click",function(r){Pt(e);const s=be(),o=oo(3);return Rt(s.onClick(r,o,!0))}),li(1),Je()}if(2&i){const e=be();kr(e.labelStyleClass),de("ngClass",Su(5,Rue,e.checked(),e.disabled,e.focused)),vr("for",e.inputId),Ie(1),ts(e.label)}}const Oue=function(i,t,e){return{"p-checkbox p-component":!0,"p-checkbox-checked":i,"p-checkbox-disabled":t,"p-checkbox-focused":e}},Fue=function(i,t,e){return{"p-highlight":i,"p-disabled":t,"p-focus":e}},Nue={provide:Cc,useExisting:cs(()=>V4),multi:!0};let V4=(()=>{class i{constructor(e){this.cd=e,this.checkboxIcon="pi pi-check",this.trueValue=!0,this.falseValue=!1,this.onChange=new Fn,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.focused=!1}onClick(e,n,r){e.preventDefault(),!this.disabled&&!this.readonly&&(this.updateModel(e),r&&n.focus())}updateModel(e){let n;this.binary?(n=this.checked()?this.falseValue:this.trueValue,this.model=n,this.onModelChange(n)):(n=this.checked()?this.model.filter(r=>!Ji.equals(r,this.value)):this.model?[...this.model,this.value]:[this.value],this.onModelChange(n),this.model=n,this.formControl&&this.formControl.setValue(n)),this.onChange.emit({checked:n,originalEvent:e})}handleChange(e){this.readonly||this.updateModel(e)}onFocus(){this.focused=!0}onBlur(){this.focused=!1,this.onModelTouched()}focus(){this.inputViewChild.nativeElement.focus()}writeValue(e){this.model=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}checked(){return this.binary?this.model===this.trueValue:Ji.contains(this.value,this.model)}}return i.\u0275fac=function(e){return new(e||i)(Xt(xo))},i.\u0275cmp=_r({type:i,selectors:[["p-checkbox"]],viewQuery:function(e,n){if(1&e&&Tr(Pue,5),2&e){let r;Wi(r=ji())&&(n.inputViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{value:"value",name:"name",disabled:"disabled",binary:"binary",label:"label",ariaLabelledBy:"ariaLabelledBy",ariaLabel:"ariaLabel",tabindex:"tabindex",inputId:"inputId",style:"style",styleClass:"styleClass",labelStyleClass:"labelStyleClass",formControl:"formControl",checkboxIcon:"checkboxIcon",readonly:"readonly",required:"required",trueValue:"trueValue",falseValue:"falseValue"},outputs:{onChange:"onChange"},features:[Ao([Nue])],decls:7,vars:26,consts:[[3,"ngStyle","ngClass"],[1,"p-hidden-accessible"],["type","checkbox",3,"readonly","value","checked","disabled","focus","blur","change"],["cb",""],[1,"p-checkbox-box",3,"ngClass","click"],[1,"p-checkbox-icon",3,"ngClass"],[3,"class","ngClass","click",4,"ngIf"],[3,"ngClass","click"]],template:function(e,n){if(1&e){const r=vi();Ke(0,"div",0)(1,"div",1)(2,"input",2,3),mn("focus",function(){return n.onFocus()})("blur",function(){return n.onBlur()})("change",function(o){return n.handleChange(o)}),Je()(),Ke(4,"div",4),mn("click",function(o){Pt(r);const l=oo(3);return Rt(n.onClick(o,l,!0))}),Bn(5,"span",5),Je()(),$e(6,kue,2,9,"label",6)}2&e&&(kr(n.styleClass),de("ngStyle",n.style)("ngClass",Su(18,Oue,n.checked(),n.disabled,n.focused)),Ie(2),de("readonly",n.readonly)("value",n.value)("checked",n.checked())("disabled",n.disabled),vr("id",n.inputId)("name",n.name)("tabindex",n.tabindex)("aria-labelledby",n.ariaLabelledBy)("aria-label",n.ariaLabel)("aria-checked",n.checked())("required",n.required),Ie(2),de("ngClass",Su(22,Fue,n.checked(),n.disabled,n.focused)),Ie(1),de("ngClass",n.checked()?n.checkboxIcon:null),Ie(1),de("ngIf",n.label))},dependencies:[no,ho,Po],styles:[".p-checkbox{display:inline-flex;cursor:pointer;-webkit-user-select:none;user-select:none;vertical-align:bottom;position:relative}.p-checkbox-disabled{cursor:default!important;pointer-events:none}.p-checkbox-box{display:flex;justify-content:center;align-items:center}p-checkbox{display:inline-flex;vertical-align:bottom;align-items:center}.p-checkbox-label{line-height:1}\n"],encapsulation:2,changeDetection:0}),i})(),Bue=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({imports:[Os]}),i})();function cy(){}const zue=function(){let i=0;return function(){return i++}}();function ga(i){return null===i||typeof i>"u"}function Pl(i){if(Array.isArray&&Array.isArray(i))return!0;const t=Object.prototype.toString.call(i);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function Jo(i){return null!==i&&"[object Object]"===Object.prototype.toString.call(i)}const au=i=>("number"==typeof i||i instanceof Number)&&isFinite(+i);function vg(i,t){return au(i)?i:t}function mo(i,t){return typeof i>"u"?t:i}const U4=(i,t)=>"string"==typeof i&&i.endsWith("%")?parseFloat(i)/100*t:+i;function Rl(i,t,e){if(i&&"function"==typeof i.call)return i.apply(e,t)}function nl(i,t,e,n){let r,s,o;if(Pl(i))if(s=i.length,n)for(r=s-1;r>=0;r--)t.call(e,i[r],r);else for(r=0;r<s;r++)t.call(e,i[r],r);else if(Jo(i))for(o=Object.keys(i),s=o.length,r=0;r<s;r++)t.call(e,i[o[r]],o[r])}function eS(i,t){let e,n,r,s;if(!i||!t||i.length!==t.length)return!1;for(e=0,n=i.length;e<n;++e)if(r=i[e],s=t[e],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function tS(i){if(Pl(i))return i.map(tS);if(Jo(i)){const t=Object.create(null),e=Object.keys(i),n=e.length;let r=0;for(;r<n;++r)t[e[r]]=tS(i[e[r]]);return t}return i}function H4(i){return-1===["__proto__","prototype","constructor"].indexOf(i)}function Uue(i,t,e,n){if(!H4(i))return;const r=t[i],s=e[i];Jo(r)&&Jo(s)?PA(r,s,n):t[i]=tS(s)}function PA(i,t,e){const n=Pl(t)?t:[t],r=n.length;if(!Jo(i))return i;const s=(e=e||{}).merger||Uue;for(let o=0;o<r;++o){if(!Jo(t=n[o]))continue;const l=Object.keys(t);for(let u=0,p=l.length;u<p;++u)s(l[u],i,t,e)}return i}function RA(i,t){return PA(i,t,{merger:Hue})}function Hue(i,t,e){if(!H4(i))return;const n=t[i],r=e[i];Jo(n)&&Jo(r)?RA(n,r):Object.prototype.hasOwnProperty.call(t,i)||(t[i]=tS(r))}const G4={"":i=>i,x:i=>i.x,y:i=>i.y};function u_(i,t){return(G4[t]||(G4[t]=function Gue(i){const t=function Wue(i){const t=i.split("."),e=[];let n="";for(const r of t)n+=r,n.endsWith("\\")?n=n.slice(0,-1)+".":(e.push(n),n="");return e}(i);return e=>{for(const n of t){if(""===n)break;e=e&&e[n]}return e}}(t)))(i)}function Q2(i){return i.charAt(0).toUpperCase()+i.slice(1)}const yg=i=>typeof i<"u",h_=i=>"function"==typeof i,W4=(i,t)=>{if(i.size!==t.size)return!1;for(const e of i)if(!t.has(e))return!1;return!0},oc=Math.PI,dl=2*oc,$ue=dl+oc,nS=Number.POSITIVE_INFINITY,que=oc/180,Yc=oc/2,kA=oc/4,j4=2*oc/3,_g=Math.log10,lv=Math.sign;function $4(i){const t=Math.round(i);i=OA(i,t,i/1e3)?t:i;const e=Math.pow(10,Math.floor(_g(i))),n=i/e;return(n<=1?1:n<=2?2:n<=5?5:10)*e}function pC(i){return!isNaN(parseFloat(i))&&isFinite(i)}function OA(i,t,e){return Math.abs(i-t)<e}function q4(i,t,e){let n,r,s;for(n=0,r=i.length;n<r;n++)s=i[n][e],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function gm(i){return i*(oc/180)}function J2(i){return i*(180/oc)}function X4(i){if(!au(i))return;let t=1,e=0;for(;Math.round(i*t)/t!==i;)t*=10,e++;return e}function Y4(i,t){const e=t.x-i.x,n=t.y-i.y,r=Math.sqrt(e*e+n*n);let s=Math.atan2(n,e);return s<-.5*oc&&(s+=dl),{angle:s,distance:r}}function eL(i,t){return Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2))}function Kue(i,t){return(i-t+$ue)%dl-oc}function Lp(i){return(i%dl+dl)%dl}function FA(i,t,e,n){const r=Lp(i),s=Lp(t),o=Lp(e),l=Lp(s-r),u=Lp(o-r),p=Lp(r-s),v=Lp(r-o);return r===s||r===o||n&&s===o||l>u&&p<v}function Ch(i,t,e){return Math.max(t,Math.min(e,i))}function uy(i,t,e,n=1e-6){return i>=Math.min(t,e)-n&&i<=Math.max(t,e)+n}function tL(i,t,e){e=e||(o=>i[o]<t);let s,n=i.length-1,r=0;for(;n-r>1;)s=r+n>>1,e(s)?r=s:n=s;return{lo:r,hi:n}}const hy=(i,t,e,n)=>tL(i,e,n?r=>i[r][t]<=e:r=>i[r][t]<e),Que=(i,t,e)=>tL(i,e,n=>i[n][t]>=e),K4=["push","pop","shift","splice","unshift"];function Z4(i,t){const e=i._chartjs;if(!e)return;const n=e.listeners,r=n.indexOf(t);-1!==r&&n.splice(r,1),!(n.length>0)&&(K4.forEach(s=>{delete i[s]}),delete i._chartjs)}function Q4(i){const t=new Set;let e,n;for(e=0,n=i.length;e<n;++e)t.add(i[e]);return t.size===n?i:Array.from(t)}const J4=typeof window>"u"?function(i){return i()}:window.requestAnimationFrame;function eU(i,t,e){const n=e||(o=>Array.prototype.slice.call(o));let r=!1,s=[];return function(...o){s=n(o),r||(r=!0,J4.call(window,()=>{r=!1,i.apply(t,s)}))}}const nL=i=>"start"===i?"left":"end"===i?"right":"center",Ed=(i,t,e)=>"start"===i?t:"end"===i?e:(t+e)/2;function tU(i,t,e){const n=t.length;let r=0,s=n;if(i._sorted){const{iScale:o,_parsed:l}=i,u=o.axis,{min:p,max:v,minDefined:w,maxDefined:I}=o.getUserBounds();w&&(r=Ch(Math.min(hy(l,o.axis,p).lo,e?n:hy(t,u,o.getPixelForValue(p)).lo),0,n-1)),s=I?Ch(Math.max(hy(l,o.axis,v,!0).hi+1,e?0:hy(t,u,o.getPixelForValue(v),!0).hi+1),r,n)-r:n-r}return{start:r,count:s}}function nU(i){const{xScale:t,yScale:e,_scaleRanges:n}=i,r={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!n)return i._scaleRanges=r,!0;const s=n.xmin!==t.min||n.xmax!==t.max||n.ymin!==e.min||n.ymax!==e.max;return Object.assign(n,r),s}const iS=i=>0===i||1===i,iU=(i,t,e)=>-Math.pow(2,10*(i-=1))*Math.sin((i-t)*dl/e),rU=(i,t,e)=>Math.pow(2,-10*i)*Math.sin((i-t)*dl/e)+1,NA={linear:i=>i,easeInQuad:i=>i*i,easeOutQuad:i=>-i*(i-2),easeInOutQuad:i=>(i/=.5)<1?.5*i*i:-.5*(--i*(i-2)-1),easeInCubic:i=>i*i*i,easeOutCubic:i=>(i-=1)*i*i+1,easeInOutCubic:i=>(i/=.5)<1?.5*i*i*i:.5*((i-=2)*i*i+2),easeInQuart:i=>i*i*i*i,easeOutQuart:i=>-((i-=1)*i*i*i-1),easeInOutQuart:i=>(i/=.5)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2),easeInQuint:i=>i*i*i*i*i,easeOutQuint:i=>(i-=1)*i*i*i*i+1,easeInOutQuint:i=>(i/=.5)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2),easeInSine:i=>1-Math.cos(i*Yc),easeOutSine:i=>Math.sin(i*Yc),easeInOutSine:i=>-.5*(Math.cos(oc*i)-1),easeInExpo:i=>0===i?0:Math.pow(2,10*(i-1)),easeOutExpo:i=>1===i?1:1-Math.pow(2,-10*i),easeInOutExpo:i=>iS(i)?i:i<.5?.5*Math.pow(2,10*(2*i-1)):.5*(2-Math.pow(2,-10*(2*i-1))),easeInCirc:i=>i>=1?i:-(Math.sqrt(1-i*i)-1),easeOutCirc:i=>Math.sqrt(1-(i-=1)*i),easeInOutCirc:i=>(i/=.5)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1),easeInElastic:i=>iS(i)?i:iU(i,.075,.3),easeOutElastic:i=>iS(i)?i:rU(i,.075,.3),easeInOutElastic:i=>iS(i)?i:i<.5?.5*iU(2*i,.1125,.45):.5+.5*rU(2*i-1,.1125,.45),easeInBack:i=>i*i*(2.70158*i-1.70158),easeOutBack:i=>(i-=1)*i*(2.70158*i+1.70158)+1,easeInOutBack(i){let t=1.70158;return(i/=.5)<1?i*i*((1+(t*=1.525))*i-t)*.5:.5*((i-=2)*i*((1+(t*=1.525))*i+t)+2)},easeInBounce:i=>1-NA.easeOutBounce(1-i),easeOutBounce:i=>i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375,easeInOutBounce:i=>i<.5?.5*NA.easeInBounce(2*i):.5*NA.easeOutBounce(2*i-1)+.5};function BA(i){return i+.5|0}const d_=(i,t,e)=>Math.max(Math.min(i,e),t);function zA(i){return d_(BA(2.55*i),0,255)}function f_(i){return d_(BA(255*i),0,255)}function dy(i){return d_(BA(i/2.55)/100,0,1)}function sU(i){return d_(BA(100*i),0,100)}const bg={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},iL=[..."0123456789ABCDEF"],ihe=i=>iL[15&i],rhe=i=>iL[(240&i)>>4]+iL[15&i],rS=i=>(240&i)>>4==(15&i);const che=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function oU(i,t,e){const n=t*Math.min(e,1-e),r=(s,o=(s+i/30)%12)=>e-n*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function uhe(i,t,e){const n=(r,s=(r+i/60)%6)=>e-e*t*Math.max(Math.min(s,4-s,1),0);return[n(5),n(3),n(1)]}function hhe(i,t,e){const n=oU(i,1,.5);let r;for(t+e>1&&(r=1/(t+e),t*=r,e*=r),r=0;r<3;r++)n[r]*=1-t-e,n[r]+=t;return n}function rL(i){const e=i.r/255,n=i.g/255,r=i.b/255,s=Math.max(e,n,r),o=Math.min(e,n,r),l=(s+o)/2;let u,p,v;return s!==o&&(v=s-o,p=l>.5?v/(2-s-o):v/(s+o),u=function dhe(i,t,e,n,r){return i===r?(t-e)/n+(t<e?6:0):t===r?(e-i)/n+2:(i-t)/n+4}(e,n,r,v,s),u=60*u+.5),[0|u,p||0,l]}function sL(i,t,e,n){return(Array.isArray(t)?i(t[0],t[1],t[2]):i(t,e,n)).map(f_)}function oL(i,t,e){return sL(oU,i,t,e)}function aU(i){return(i%360+360)%360}const lU={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},cU={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let sS;const bhe=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,aL=i=>i<=.0031308?12.92*i:1.055*Math.pow(i,1/2.4)-.055,gC=i=>i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4);function oS(i,t,e){if(i){let n=rL(i);n[t]=Math.max(0,Math.min(n[t]+n[t]*e,0===t?360:1)),n=oL(n),i.r=n[0],i.g=n[1],i.b=n[2]}}function uU(i,t){return i&&Object.assign(t||{},i)}function hU(i){var t={r:0,g:0,b:0,a:255};return Array.isArray(i)?i.length>=3&&(t={r:i[0],g:i[1],b:i[2],a:255},i.length>3&&(t.a=f_(i[3]))):(t=uU(i,{r:0,g:0,b:0,a:1})).a=f_(t.a),t}function xhe(i){return"r"===i.charAt(0)?function Che(i){const t=bhe.exec(i);let n,r,s,e=255;if(t){if(t[7]!==n){const o=+t[7];e=t[8]?zA(o):d_(255*o,0,255)}return n=+t[1],r=+t[3],s=+t[5],n=255&(t[2]?zA(n):d_(n,0,255)),r=255&(t[4]?zA(r):d_(r,0,255)),s=255&(t[6]?zA(s):d_(s,0,255)),{r:n,g:r,b:s,a:e}}}(i):function ghe(i){const t=che.exec(i);let n,e=255;if(!t)return;t[5]!==n&&(e=t[6]?zA(+t[5]):f_(+t[5]));const r=aU(+t[2]),s=+t[3]/100,o=+t[4]/100;return n="hwb"===t[1]?function fhe(i,t,e){return sL(hhe,i,t,e)}(r,s,o):"hsv"===t[1]?function phe(i,t,e){return sL(uhe,i,t,e)}(r,s,o):oL(r,s,o),{r:n[0],g:n[1],b:n[2],a:e}}(i)}class aS{constructor(t){if(t instanceof aS)return t;const e=typeof t;let n;"object"===e?n=hU(t):"string"===e&&(n=function ohe(i){var e,t=i.length;return"#"===i[0]&&(4===t||5===t?e={r:255&17*bg[i[1]],g:255&17*bg[i[2]],b:255&17*bg[i[3]],a:5===t?17*bg[i[4]]:255}:(7===t||9===t)&&(e={r:bg[i[1]]<<4|bg[i[2]],g:bg[i[3]]<<4|bg[i[4]],b:bg[i[5]]<<4|bg[i[6]],a:9===t?bg[i[7]]<<4|bg[i[8]]:255})),e}(t)||function _he(i){sS||(sS=function yhe(){const i={},t=Object.keys(cU),e=Object.keys(lU);let n,r,s,o,l;for(n=0;n<t.length;n++){for(o=l=t[n],r=0;r<e.length;r++)s=e[r],l=l.replace(s,lU[s]);s=parseInt(cU[o],16),i[l]=[s>>16&255,s>>8&255,255&s]}return i}(),sS.transparent=[0,0,0,0]);const t=sS[i.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}(t)||xhe(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=uU(this._rgb);return t&&(t.a=dy(t.a)),t}set rgb(t){this._rgb=hU(t)}rgbString(){return this._valid?function whe(i){return i&&(i.a<255?`rgba(${i.r}, ${i.g}, ${i.b}, ${dy(i.a)})`:`rgb(${i.r}, ${i.g}, ${i.b})`)}(this._rgb):void 0}hexString(){return this._valid?function lhe(i){var t=(i=>rS(i.r)&&rS(i.g)&&rS(i.b)&&rS(i.a))(i)?ihe:rhe;return i?"#"+t(i.r)+t(i.g)+t(i.b)+((i,t)=>i<255?t(i):"")(i.a,t):void 0}(this._rgb):void 0}hslString(){return this._valid?function vhe(i){if(!i)return;const t=rL(i),e=t[0],n=sU(t[1]),r=sU(t[2]);return i.a<255?`hsla(${e}, ${n}%, ${r}%, ${dy(i.a)})`:`hsl(${e}, ${n}%, ${r}%)`}(this._rgb):void 0}mix(t,e){if(t){const n=this.rgb,r=t.rgb;let s;const o=e===s?.5:e,l=2*o-1,u=n.a-r.a,p=((l*u==-1?l:(l+u)/(1+l*u))+1)/2;s=1-p,n.r=255&p*n.r+s*r.r+.5,n.g=255&p*n.g+s*r.g+.5,n.b=255&p*n.b+s*r.b+.5,n.a=o*n.a+(1-o)*r.a,this.rgb=n}return this}interpolate(t,e){return t&&(this._rgb=function Ahe(i,t,e){const n=gC(dy(i.r)),r=gC(dy(i.g)),s=gC(dy(i.b));return{r:f_(aL(n+e*(gC(dy(t.r))-n))),g:f_(aL(r+e*(gC(dy(t.g))-r))),b:f_(aL(s+e*(gC(dy(t.b))-s))),a:i.a+e*(t.a-i.a)}}(this._rgb,t._rgb,e)),this}clone(){return new aS(this.rgb)}alpha(t){return this._rgb.a=f_(t),this}clearer(t){return this._rgb.a*=1-t,this}greyscale(){const t=this._rgb,e=BA(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){return this._rgb.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return oS(this._rgb,2,t),this}darken(t){return oS(this._rgb,2,-t),this}saturate(t){return oS(this._rgb,1,t),this}desaturate(t){return oS(this._rgb,1,-t),this}rotate(t){return function mhe(i,t){var e=rL(i);e[0]=aU(e[0]+t),e=oL(e),i.r=e[0],i.g=e[1],i.b=e[2]}(this._rgb,t),this}}function dU(i){return new aS(i)}function fU(i){if(i&&"object"==typeof i){const t=i.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function pU(i){return fU(i)?i:dU(i)}function lL(i){return fU(i)?i:dU(i).saturate(.5).darken(.1).hexString()}const I0=Object.create(null),cL=Object.create(null);function VA(i,t){if(!t)return i;const e=t.split(".");for(let n=0,r=e.length;n<r;++n){const s=e[n];i=i[s]||(i[s]=Object.create(null))}return i}function uL(i,t,e){return"string"==typeof t?PA(VA(i,t),e):PA(VA(i,""),t)}var na=new class Ihe{constructor(t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,n)=>lL(n.backgroundColor),this.hoverBorderColor=(e,n)=>lL(n.borderColor),this.hoverColor=(e,n)=>lL(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t)}set(t,e){return uL(this,t,e)}get(t){return VA(this,t)}describe(t,e){return uL(cL,t,e)}override(t,e){return uL(I0,t,e)}route(t,e,n,r){const s=VA(this,t),o=VA(this,n),l="_"+e;Object.defineProperties(s,{[l]:{value:s[e],writable:!0},[e]:{enumerable:!0,get(){const u=this[l],p=o[r];return Jo(u)?Object.assign({},p,u):mo(u,p)},set(u){this[l]=u}}})}}({_scriptable:i=>!i.startsWith("on"),_indexable:i=>"events"!==i,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function lS(i,t,e,n,r){let s=t[r];return s||(s=t[r]=i.measureText(r).width,e.push(r)),s>n&&(n=s),n}function Ehe(i,t,e,n){let r=(n=n||{}).data=n.data||{},s=n.garbageCollect=n.garbageCollect||[];n.font!==t&&(r=n.data={},s=n.garbageCollect=[],n.font=t),i.save(),i.font=t;let o=0;const l=e.length;let u,p,v,w,I;for(u=0;u<l;u++)if(w=e[u],null!=w&&!0!==Pl(w))o=lS(i,r,s,o,w);else if(Pl(w))for(p=0,v=w.length;p<v;p++)I=w[p],null!=I&&!Pl(I)&&(o=lS(i,r,s,o,I));i.restore();const T=s.length/2;if(T>e.length){for(u=0;u<T;u++)delete r[s[u]];s.splice(0,T)}return o}function S0(i,t,e){const n=i.currentDevicePixelRatio,r=0!==e?Math.max(e/2,.5):0;return Math.round((t-r)*n)/n+r}function gU(i,t){(t=t||i.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,i.width,i.height),t.restore()}function hL(i,t,e,n){mU(i,t,e,n,null)}function mU(i,t,e,n,r){let s,o,l,u,p,v;const w=t.pointStyle,I=t.rotation,T=t.radius;let k=(I||0)*que;if(w&&"object"==typeof w&&(s=w.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return i.save(),i.translate(e,n),i.rotate(k),i.drawImage(w,-w.width/2,-w.height/2,w.width,w.height),void i.restore();if(!(isNaN(T)||T<=0)){switch(i.beginPath(),w){default:r?i.ellipse(e,n,r/2,T,0,0,dl):i.arc(e,n,T,0,dl),i.closePath();break;case"triangle":i.moveTo(e+Math.sin(k)*T,n-Math.cos(k)*T),k+=j4,i.lineTo(e+Math.sin(k)*T,n-Math.cos(k)*T),k+=j4,i.lineTo(e+Math.sin(k)*T,n-Math.cos(k)*T),i.closePath();break;case"rectRounded":p=.516*T,u=T-p,o=Math.cos(k+kA)*u,l=Math.sin(k+kA)*u,i.arc(e-o,n-l,p,k-oc,k-Yc),i.arc(e+l,n-o,p,k-Yc,k),i.arc(e+o,n+l,p,k,k+Yc),i.arc(e-l,n+o,p,k+Yc,k+oc),i.closePath();break;case"rect":if(!I){u=Math.SQRT1_2*T,v=r?r/2:u,i.rect(e-v,n-u,2*v,2*u);break}k+=kA;case"rectRot":o=Math.cos(k)*T,l=Math.sin(k)*T,i.moveTo(e-o,n-l),i.lineTo(e+l,n-o),i.lineTo(e+o,n+l),i.lineTo(e-l,n+o),i.closePath();break;case"crossRot":k+=kA;case"cross":o=Math.cos(k)*T,l=Math.sin(k)*T,i.moveTo(e-o,n-l),i.lineTo(e+o,n+l),i.moveTo(e+l,n-o),i.lineTo(e-l,n+o);break;case"star":o=Math.cos(k)*T,l=Math.sin(k)*T,i.moveTo(e-o,n-l),i.lineTo(e+o,n+l),i.moveTo(e+l,n-o),i.lineTo(e-l,n+o),k+=kA,o=Math.cos(k)*T,l=Math.sin(k)*T,i.moveTo(e-o,n-l),i.lineTo(e+o,n+l),i.moveTo(e+l,n-o),i.lineTo(e-l,n+o);break;case"line":o=r?r/2:Math.cos(k)*T,l=Math.sin(k)*T,i.moveTo(e-o,n-l),i.lineTo(e+o,n+l);break;case"dash":i.moveTo(e,n),i.lineTo(e+Math.cos(k)*T,n+Math.sin(k)*T)}i.fill(),t.borderWidth>0&&i.stroke()}}function UA(i,t,e){return e=e||.5,!t||i&&i.x>t.left-e&&i.x<t.right+e&&i.y>t.top-e&&i.y<t.bottom+e}function cS(i,t){i.save(),i.beginPath(),i.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),i.clip()}function uS(i){i.restore()}function The(i,t,e,n,r){if(!t)return i.lineTo(e.x,e.y);if("middle"===r){const s=(t.x+e.x)/2;i.lineTo(s,t.y),i.lineTo(s,e.y)}else"after"===r!=!!n?i.lineTo(t.x,e.y):i.lineTo(e.x,t.y);i.lineTo(e.x,e.y)}function Mhe(i,t,e,n){if(!t)return i.lineTo(e.x,e.y);i.bezierCurveTo(n?t.cp1x:t.cp2x,n?t.cp1y:t.cp2y,n?e.cp2x:e.cp1x,n?e.cp2y:e.cp1y,e.x,e.y)}function E0(i,t,e,n,r,s={}){const o=Pl(t)?t:[t],l=s.strokeWidth>0&&""!==s.strokeColor;let u,p;for(i.save(),i.font=r.string,function Dhe(i,t){t.translation&&i.translate(t.translation[0],t.translation[1]),ga(t.rotation)||i.rotate(t.rotation),t.color&&(i.fillStyle=t.color),t.textAlign&&(i.textAlign=t.textAlign),t.textBaseline&&(i.textBaseline=t.textBaseline)}(i,s),u=0;u<o.length;++u)p=o[u],l&&(s.strokeColor&&(i.strokeStyle=s.strokeColor),ga(s.strokeWidth)||(i.lineWidth=s.strokeWidth),i.strokeText(p,e,n,s.maxWidth)),i.fillText(p,e,n,s.maxWidth),Lhe(i,e,n,p,s),n+=r.lineHeight;i.restore()}function Lhe(i,t,e,n,r){if(r.strikethrough||r.underline){const s=i.measureText(n),o=t-s.actualBoundingBoxLeft,l=t+s.actualBoundingBoxRight,u=e-s.actualBoundingBoxAscent,p=e+s.actualBoundingBoxDescent,v=r.strikethrough?(u+p)/2:p;i.strokeStyle=i.fillStyle,i.beginPath(),i.lineWidth=r.decorationWidth||2,i.moveTo(o,v),i.lineTo(l,v),i.stroke()}}function HA(i,t){const{x:e,y:n,w:r,h:s,radius:o}=t;i.arc(e+o.topLeft,n+o.topLeft,o.topLeft,-Yc,oc,!0),i.lineTo(e,n+s-o.bottomLeft),i.arc(e+o.bottomLeft,n+s-o.bottomLeft,o.bottomLeft,oc,Yc,!0),i.lineTo(e+r-o.bottomRight,n+s),i.arc(e+r-o.bottomRight,n+s-o.bottomRight,o.bottomRight,Yc,0,!0),i.lineTo(e+r,n+o.topRight),i.arc(e+r-o.topRight,n+o.topRight,o.topRight,0,-Yc,!0),i.lineTo(e+o.topLeft,n)}const Phe=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),Rhe=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function khe(i,t){const e=(""+i).match(Phe);if(!e||"normal"===e[1])return 1.2*t;switch(i=+e[2],e[3]){case"px":return i;case"%":i/=100}return t*i}const Ohe=i=>+i||0;function dL(i,t){const e={},n=Jo(t),r=n?Object.keys(t):t,s=Jo(i)?n?o=>mo(i[o],i[t[o]]):o=>i[o]:()=>i;for(const o of r)e[o]=Ohe(s(o));return e}function vU(i){return dL(i,{top:"y",right:"x",bottom:"y",left:"x"})}function T0(i){return dL(i,["topLeft","topRight","bottomLeft","bottomRight"])}function Td(i){const t=vU(i);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Qu(i,t){let e=mo((i=i||{}).size,(t=t||na.font).size);"string"==typeof e&&(e=parseInt(e,10));let n=mo(i.style,t.style);n&&!(""+n).match(Rhe)&&(console.warn('Invalid font style specified: "'+n+'"'),n="");const r={family:mo(i.family,t.family),lineHeight:khe(mo(i.lineHeight,t.lineHeight),e),size:e,style:n,weight:mo(i.weight,t.weight),string:""};return r.string=function She(i){return!i||ga(i.size)||ga(i.family)?null:(i.style?i.style+" ":"")+(i.weight?i.weight+" ":"")+i.size+"px "+i.family}(r),r}function GA(i,t,e,n){let s,o,l,r=!0;for(s=0,o=i.length;s<o;++s)if(l=i[s],void 0!==l&&(void 0!==t&&"function"==typeof l&&(l=l(t),r=!1),void 0!==e&&Pl(l)&&(l=l[e%l.length],r=!1),void 0!==l))return n&&!r&&(n.cacheable=!1),l}function p_(i,t){return Object.assign(Object.create(i),t)}function fL(i,t=[""],e=i,n,r=(()=>i[0])){yg(n)||(n=wU("_fallback",i));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:i,_rootScopes:e,_fallback:n,_getTarget:r,override:o=>fL([o,...i],t,e,n)};return new Proxy(s,{deleteProperty:(o,l)=>(delete o[l],delete o._keys,delete i[0][l],!0),get:(o,l)=>_U(o,l,()=>function Whe(i,t,e,n){let r;for(const s of t)if(r=wU(Nhe(s,i),e),yg(r))return pL(i,r)?gL(e,n,i,r):r}(l,t,i,o)),getOwnPropertyDescriptor:(o,l)=>Reflect.getOwnPropertyDescriptor(o._scopes[0],l),getPrototypeOf:()=>Reflect.getPrototypeOf(i[0]),has:(o,l)=>AU(o).includes(l),ownKeys:o=>AU(o),set(o,l,u){const p=o._storage||(o._storage=r());return o[l]=p[l]=u,delete o._keys,!0}})}function mC(i,t,e,n){const r={_cacheable:!1,_proxy:i,_context:t,_subProxy:e,_stack:new Set,_descriptors:yU(i,n),setContext:s=>mC(i,s,e,n),override:s=>mC(i.override(s),t,e,n)};return new Proxy(r,{deleteProperty:(s,o)=>(delete s[o],delete i[o],!0),get:(s,o,l)=>_U(s,o,()=>function Bhe(i,t,e){const{_proxy:n,_context:r,_subProxy:s,_descriptors:o}=i;let l=n[t];return h_(l)&&o.isScriptable(t)&&(l=function zhe(i,t,e,n){const{_proxy:r,_context:s,_subProxy:o,_stack:l}=e;if(l.has(i))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+i);return l.add(i),t=t(s,o||n),l.delete(i),pL(i,t)&&(t=gL(r._scopes,r,i,t)),t}(t,l,i,e)),Pl(l)&&l.length&&(l=function Vhe(i,t,e,n){const{_proxy:r,_context:s,_subProxy:o,_descriptors:l}=e;if(yg(s.index)&&n(i))t=t[s.index%t.length];else if(Jo(t[0])){const u=t,p=r._scopes.filter(v=>v!==u);t=[];for(const v of u){const w=gL(p,r,i,v);t.push(mC(w,s,o&&o[i],l))}}return t}(t,l,i,o.isIndexable)),pL(t,l)&&(l=mC(l,r,s&&s[t],o)),l}(s,o,l)),getOwnPropertyDescriptor:(s,o)=>s._descriptors.allKeys?Reflect.has(i,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(i,o),getPrototypeOf:()=>Reflect.getPrototypeOf(i),has:(s,o)=>Reflect.has(i,o),ownKeys:()=>Reflect.ownKeys(i),set:(s,o,l)=>(i[o]=l,delete s[o],!0)})}function yU(i,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:n=t.indexable,_allKeys:r=t.allKeys}=i;return{allKeys:r,scriptable:e,indexable:n,isScriptable:h_(e)?e:()=>e,isIndexable:h_(n)?n:()=>n}}const Nhe=(i,t)=>i?i+Q2(t):t,pL=(i,t)=>Jo(t)&&"adapters"!==i&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function _U(i,t,e){if(Object.prototype.hasOwnProperty.call(i,t))return i[t];const n=e();return i[t]=n,n}function bU(i,t,e){return h_(i)?i(t,e):i}const Uhe=(i,t)=>!0===i?t:"string"==typeof i?u_(t,i):void 0;function Hhe(i,t,e,n,r){for(const s of t){const o=Uhe(e,s);if(o){i.add(o);const l=bU(o._fallback,e,r);if(yg(l)&&l!==e&&l!==n)return l}else if(!1===o&&yg(n)&&e!==n)return null}return!1}function gL(i,t,e,n){const r=t._rootScopes,s=bU(t._fallback,e,n),o=[...i,...r],l=new Set;l.add(n);let u=CU(l,o,e,s||e,n);return!(null===u||yg(s)&&s!==e&&(u=CU(l,o,s,u,n),null===u))&&fL(Array.from(l),[""],r,s,()=>function Ghe(i,t,e){const n=i._getTarget();t in n||(n[t]={});const r=n[t];return Pl(r)&&Jo(e)?e:r}(t,e,n))}function CU(i,t,e,n,r){for(;e;)e=Hhe(i,t,e,n,r);return e}function wU(i,t){for(const e of t){if(!e)continue;const n=e[i];if(yg(n))return n}}function AU(i){let t=i._keys;return t||(t=i._keys=function jhe(i){const t=new Set;for(const e of i)for(const n of Object.keys(e).filter(r=>!r.startsWith("_")))t.add(n);return Array.from(t)}(i._scopes)),t}function xU(i,t,e,n){const{iScale:r}=i,{key:s="r"}=this._parsing,o=new Array(n);let l,u,p,v;for(l=0,u=n;l<u;++l)p=l+e,v=t[p],o[l]={r:r.parse(u_(v,s),p)};return o}const $he=Number.EPSILON||1e-14,vC=(i,t)=>t<i.length&&!i[t].skip&&i[t],IU=i=>"x"===i?"y":"x";function qhe(i,t,e,n){const r=i.skip?t:i,s=t,o=e.skip?t:e,l=eL(s,r),u=eL(o,s);let p=l/(l+u),v=u/(l+u);p=isNaN(p)?0:p,v=isNaN(v)?0:v;const w=n*p,I=n*v;return{previous:{x:s.x-w*(o.x-r.x),y:s.y-w*(o.y-r.y)},next:{x:s.x+I*(o.x-r.x),y:s.y+I*(o.y-r.y)}}}function hS(i,t,e){return Math.max(Math.min(i,e),t)}function Qhe(i,t,e,n,r){let s,o,l,u;if(t.spanGaps&&(i=i.filter(p=>!p.skip)),"monotone"===t.cubicInterpolationMode)!function Khe(i,t="x"){const e=IU(t),n=i.length,r=Array(n).fill(0),s=Array(n);let o,l,u,p=vC(i,0);for(o=0;o<n;++o)if(l=u,u=p,p=vC(i,o+1),u){if(p){const v=p[t]-u[t];r[o]=0!==v?(p[e]-u[e])/v:0}s[o]=l?p?lv(r[o-1])!==lv(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}(function Xhe(i,t,e){const n=i.length;let r,s,o,l,u,p=vC(i,0);for(let v=0;v<n-1;++v)if(u=p,p=vC(i,v+1),u&&p){if(OA(t[v],0,$he)){e[v]=e[v+1]=0;continue}r=e[v]/t[v],s=e[v+1]/t[v],l=Math.pow(r,2)+Math.pow(s,2),!(l<=9)&&(o=3/Math.sqrt(l),e[v]=r*o*t[v],e[v+1]=s*o*t[v])}})(i,r,s),function Yhe(i,t,e="x"){const n=IU(e),r=i.length;let s,o,l,u=vC(i,0);for(let p=0;p<r;++p){if(o=l,l=u,u=vC(i,p+1),!l)continue;const v=l[e],w=l[n];o&&(s=(v-o[e])/3,l[`cp1${e}`]=v-s,l[`cp1${n}`]=w-s*t[p]),u&&(s=(u[e]-v)/3,l[`cp2${e}`]=v+s,l[`cp2${n}`]=w+s*t[p])}}(i,s,t)}(i,r);else{let p=n?i[i.length-1]:i[0];for(s=0,o=i.length;s<o;++s)l=i[s],u=qhe(p,l,i[Math.min(s+1,o-(n?0:1))%o],t.tension),l.cp1x=u.previous.x,l.cp1y=u.previous.y,l.cp2x=u.next.x,l.cp2y=u.next.y,p=l}t.capBezierPoints&&function Zhe(i,t){let e,n,r,s,o,l=UA(i[0],t);for(e=0,n=i.length;e<n;++e)o=s,s=l,l=e<n-1&&UA(i[e+1],t),s&&(r=i[e],o&&(r.cp1x=hS(r.cp1x,t.left,t.right),r.cp1y=hS(r.cp1y,t.top,t.bottom)),l&&(r.cp2x=hS(r.cp2x,t.left,t.right),r.cp2y=hS(r.cp2y,t.top,t.bottom)))}(i,e)}function SU(){return typeof window<"u"&&typeof document<"u"}function mL(i){let t=i.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function dS(i,t,e){let n;return"string"==typeof i?(n=parseInt(i,10),-1!==i.indexOf("%")&&(n=n/100*t.parentNode[e])):n=i,n}const fS=i=>window.getComputedStyle(i,null),ede=["top","right","bottom","left"];function M0(i,t,e){const n={};e=e?"-"+e:"";for(let r=0;r<4;r++){const s=ede[r];n[s]=parseFloat(i[t+"-"+s+e])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}function D0(i,t){if("native"in i)return i;const{canvas:e,currentDevicePixelRatio:n}=t,r=fS(e),s="border-box"===r.boxSizing,o=M0(r,"padding"),l=M0(r,"border","width"),{x:u,y:p,box:v}=function nde(i,t){const e=i.touches,n=e&&e.length?e[0]:i,{offsetX:r,offsetY:s}=n;let l,u,o=!1;if(((i,t,e)=>(i>0||t>0)&&(!e||!e.shadowRoot))(r,s,i.target))l=r,u=s;else{const p=t.getBoundingClientRect();l=n.clientX-p.left,u=n.clientY-p.top,o=!0}return{x:l,y:u,box:o}}(i,e),w=o.left+(v&&l.left),I=o.top+(v&&l.top);let{width:T,height:k}=t;return s&&(T-=o.width+l.width,k-=o.height+l.height),{x:Math.round((u-w)/T*e.width/n),y:Math.round((p-I)/k*e.height/n)}}const vL=i=>Math.round(10*i)/10;function EU(i,t,e){const n=t||1,r=Math.floor(i.height*n),s=Math.floor(i.width*n);i.height=r/n,i.width=s/n;const o=i.canvas;return o.style&&(e||!o.style.height&&!o.style.width)&&(o.style.height=`${i.height}px`,o.style.width=`${i.width}px`),(i.currentDevicePixelRatio!==n||o.height!==r||o.width!==s)&&(i.currentDevicePixelRatio=n,o.height=r,o.width=s,i.ctx.setTransform(n,0,0,n,0,0),!0)}const sde=function(){let i=!1;try{const t={get passive(){return i=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch{}return i}();function TU(i,t){const e=function Jhe(i,t){return fS(i).getPropertyValue(t)}(i,t),n=e&&e.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function L0(i,t,e,n){return{x:i.x+e*(t.x-i.x),y:i.y+e*(t.y-i.y)}}function ode(i,t,e,n){return{x:i.x+e*(t.x-i.x),y:"middle"===n?e<.5?i.y:t.y:"after"===n?e<1?i.y:t.y:e>0?t.y:i.y}}function ade(i,t,e,n){const r={x:i.cp2x,y:i.cp2y},s={x:t.cp1x,y:t.cp1y},o=L0(i,r,e),l=L0(r,s,e),u=L0(s,t,e),p=L0(o,l,e),v=L0(l,u,e);return L0(p,v,e)}const MU=new Map;function WA(i,t,e){return function lde(i,t){t=t||{};const e=i+JSON.stringify(t);let n=MU.get(e);return n||(n=new Intl.NumberFormat(i,t),MU.set(e,n)),n}(t,e).format(i)}function yC(i,t,e){return i?function(i,t){return{x:e=>i+i+t-e,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,n)=>e-n,leftForLtr:(e,n)=>e-n}}(t,e):{x:i=>i,setWidth(i){},textAlign:i=>i,xPlus:(i,t)=>i+t,leftForLtr:(i,t)=>i}}function DU(i,t){let e,n;("ltr"===t||"rtl"===t)&&(e=i.canvas.style,n=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),i.prevTextDirection=n)}function LU(i,t){void 0!==t&&(delete i.prevTextDirection,i.canvas.style.setProperty("direction",t[0],t[1]))}function PU(i){return"angle"===i?{between:FA,compare:Kue,normalize:Lp}:{between:uy,compare:(t,e)=>t-e,normalize:t=>t}}function RU({start:i,end:t,count:e,loop:n,style:r}){return{start:i%e,end:t%e,loop:n&&(t-i+1)%e==0,style:r}}function kU(i,t,e){if(!e)return[i];const{property:n,start:r,end:s}=e,o=t.length,{compare:l,between:u,normalize:p}=PU(n),{start:v,end:w,loop:I,style:T}=function hde(i,t,e){const{property:n,start:r,end:s}=e,{between:o,normalize:l}=PU(n),u=t.length;let I,T,{start:p,end:v,loop:w}=i;if(w){for(p+=u,v+=u,I=0,T=u;I<T&&o(l(t[p%u][n]),r,s);++I)p--,v--;p%=u,v%=u}return v<p&&(v+=u),{start:p,end:v,loop:w,style:i.style}}(i,t,e),k=[];let ce,Se,Ae,G=!1,Y=null;for(let it=v,Tt=v;it<=w;++it)Se=t[it%o],!Se.skip&&(ce=p(Se[n]),ce!==Ae&&(G=u(ce,r,s),null===Y&&(G||u(r,Ae,ce)&&0!==l(r,Ae))&&(Y=0===l(ce,r)?it:Tt),null!==Y&&(!G||0===l(s,ce)||u(s,Ae,ce))&&(k.push(RU({start:Y,end:it,loop:I,count:o,style:T})),Y=null),Tt=it,Ae=ce));return null!==Y&&k.push(RU({start:Y,end:w,loop:I,count:o,style:T})),k}function OU(i,t){const e=[],n=i.segments;for(let r=0;r<n.length;r++){const s=kU(n[r],i.points,t);s.length&&e.push(...s)}return e}function NU(i){return{backgroundColor:i.backgroundColor,borderCapStyle:i.borderCapStyle,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderJoinStyle:i.borderJoinStyle,borderWidth:i.borderWidth,borderColor:i.borderColor}}function mde(i,t){return t&&JSON.stringify(i)!==JSON.stringify(t)}var fy=new class vde{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,n,r){const o=e.duration;e.listeners[r].forEach(l=>l({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(n-e.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=J4.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((n,r)=>{if(!n.running||!n.items.length)return;const s=n.items;let u,o=s.length-1,l=!1;for(;o>=0;--o)u=s[o],u._active?(u._total>n.duration&&(n.duration=u._total),u.tick(t),l=!0):(s[o]=s[s.length-1],s.pop());l&&(r.draw(),this._notify(r,n,t,"progress")),s.length||(n.running=!1,this._notify(r,n,t,"complete"),n.initial=!1),e+=s.length}),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){const e=this._charts;let n=e.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,n)),n}listen(t,e,n){this._getAnims(t).listeners[e].push(n)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);!e||(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((n,r)=>Math.max(n,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const n=e.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}};const BU="transparent",yde={boolean:(i,t,e)=>e>.5?t:i,color(i,t,e){const n=pU(i||BU),r=n.valid&&pU(t||BU);return r&&r.valid?r.mix(n,e).hexString():t},number:(i,t,e)=>i+(t-i)*e};class _de{constructor(t,e,n,r){const s=e[n];r=GA([t.to,r,s,t.from]);const o=GA([t.from,s,r]);this._active=!0,this._fn=t.fn||yde[t.type||typeof o],this._easing=NA[t.easing]||NA.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=n,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(t,e,n){if(this._active){this._notify(!1);const r=this._target[this._prop],s=n-this._start,o=this._duration-s;this._start=n,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=s,this._loop=!!t.loop,this._to=GA([t.to,e,r,t.from]),this._from=GA([t.from,r,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,n=this._duration,r=this._prop,s=this._from,o=this._loop,l=this._to;let u;if(this._active=s!==l&&(o||e<n),!this._active)return this._target[r]=l,void this._notify(!0);e<0?this._target[r]=s:(u=e/n%2,u=o&&u>1?2-u:u,u=this._easing(Math.min(1,Math.max(0,u))),this._target[r]=this._fn(s,l,u))}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,n)=>{t.push({res:e,rej:n})})}_notify(t){const e=t?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][e]()}}na.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const wde=Object.keys(na.animation);na.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:i=>"onProgress"!==i&&"onComplete"!==i&&"fn"!==i}),na.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),na.describe("animations",{_fallback:"animation"}),na.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:i=>0|i}}}});class zU{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Jo(t))return;const e=this._properties;Object.getOwnPropertyNames(t).forEach(n=>{const r=t[n];if(!Jo(r))return;const s={};for(const o of wde)s[o]=r[o];(Pl(r.properties)&&r.properties||[n]).forEach(o=>{(o===n||!e.has(o))&&e.set(o,s)})})}_animateOptions(t,e){const n=e.options,r=function xde(i,t){if(!t)return;let e=i.options;if(e)return e.$shared&&(i.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e;i.options=t}(t,n);if(!r)return[];const s=this._createAnimations(r,n);return n.$shared&&function Ade(i,t){const e=[],n=Object.keys(t);for(let r=0;r<n.length;r++){const s=i[n[r]];s&&s.active()&&e.push(s.wait())}return Promise.all(e)}(t.options.$animations,n).then(()=>{t.options=n},()=>{}),s}_createAnimations(t,e){const n=this._properties,r=[],s=t.$animations||(t.$animations={}),o=Object.keys(e),l=Date.now();let u;for(u=o.length-1;u>=0;--u){const p=o[u];if("$"===p.charAt(0))continue;if("options"===p){r.push(...this._animateOptions(t,e));continue}const v=e[p];let w=s[p];const I=n.get(p);if(w){if(I&&w.active()){w.update(I,v,l);continue}w.cancel()}I&&I.duration?(s[p]=w=new _de(I,t,p,v),r.push(w)):t[p]=v}return r}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const n=this._createAnimations(t,e);return n.length?(fy.add(this._chart,n),!0):void 0}}function VU(i,t){const e=i&&i.options||{},n=e.reverse,r=void 0===e.min?t:0,s=void 0===e.max?t:0;return{start:n?s:r,end:n?r:s}}function UU(i,t){const e=[],n=i._getSortedDatasetMetas(t);let r,s;for(r=0,s=n.length;r<s;++r)e.push(n[r].index);return e}function HU(i,t,e,n={}){const r=i.keys,s="single"===n.mode;let o,l,u,p;if(null!==t){for(o=0,l=r.length;o<l;++o){if(u=+r[o],u===e){if(n.all)continue;break}p=i.values[u],au(p)&&(s||0===t||lv(t)===lv(p))&&(t+=p)}return t}}function GU(i,t){const e=i&&i.options.stacked;return e||void 0===e&&void 0!==t.stack}function Dde(i,t,e){const n=i[t]||(i[t]={});return n[e]||(n[e]={})}function WU(i,t,e,n){for(const r of t.getMatchingVisibleMetas(n).reverse()){const s=i[r.index];if(e&&s>0||!e&&s<0)return r.index}return null}function jU(i,t){const{chart:e,_cachedMeta:n}=i,r=e._stacks||(e._stacks={}),{iScale:s,vScale:o,index:l}=n,u=s.axis,p=o.axis,v=function Tde(i,t,e){return`${i.id}.${t.id}.${e.stack||e.type}`}(s,o,n),w=t.length;let I;for(let T=0;T<w;++T){const k=t[T],{[u]:G,[p]:Y}=k;I=(k._stacks||(k._stacks={}))[p]=Dde(r,v,G),I[l]=Y,I._top=WU(I,o,!0,n.type),I._bottom=WU(I,o,!1,n.type)}}function yL(i,t){const e=i.scales;return Object.keys(e).filter(n=>e[n].axis===t).shift()}function jA(i,t){const e=i.controller.index,n=i.vScale&&i.vScale.axis;if(n){t=t||i._parsed;for(const r of t){const s=r._stacks;if(!s||void 0===s[n]||void 0===s[n][e])return;delete s[n][e]}}}const _L=i=>"reset"===i||"none"===i,$U=(i,t)=>t?i:Object.assign({},i);let cv=(()=>{class i{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=GU(e.vScale,e),this.addElements()}updateIndex(e){this.index!==e&&jA(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),s=(I,T,k,G)=>"x"===I?T:"r"===I?G:k,o=n.xAxisID=mo(r.xAxisID,yL(e,"x")),l=n.yAxisID=mo(r.yAxisID,yL(e,"y")),u=n.rAxisID=mo(r.rAxisID,yL(e,"r")),p=n.indexAxis,v=n.iAxisID=s(p,o,l,u),w=n.vAxisID=s(p,l,o,u);n.xScale=this.getScaleForId(o),n.yScale=this.getScaleForId(l),n.rScale=this.getScaleForId(u),n.iScale=this.getScaleForId(v),n.vScale=this.getScaleForId(w)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Z4(this._data,this),e._stacked&&jA(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(Jo(n))this._data=function Ede(i){const t=Object.keys(i),e=new Array(t.length);let n,r,s;for(n=0,r=t.length;n<r;++n)s=t[n],e[n]={x:s,y:i[s]};return e}(n);else if(r!==n){if(r){Z4(r,this);const s=this._cachedMeta;jA(s),s._parsed=[]}n&&Object.isExtensible(n)&&function ehe(i,t){i._chartjs?i._chartjs.listeners.push(t):(Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),K4.forEach(e=>{const n="_onData"+Q2(e),r=i[e];Object.defineProperty(i,e,{configurable:!0,enumerable:!1,value(...s){const o=r.apply(this,s);return i._chartjs.listeners.forEach(l=>{"function"==typeof l[n]&&l[n](...s)}),o}})}))}(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const o=n._stacked;n._stacked=GU(n.vScale,n),n.stack!==r.stack&&(s=!0,jA(n),n.stack=r.stack),this._resyncElements(e),(s||o!==n._stacked)&&jU(this,n._parsed)}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:s}=this,{iScale:o,_stacked:l}=r,u=o.axis;let w,I,T,p=0===e&&n===s.length||r._sorted,v=e>0&&r._parsed[e-1];if(!1===this._parsing)r._parsed=s,r._sorted=!0,T=s;else{T=Pl(s[e])?this.parseArrayData(r,s,e,n):Jo(s[e])?this.parseObjectData(r,s,e,n):this.parsePrimitiveData(r,s,e,n);const k=()=>null===I[u]||v&&I[u]<v[u];for(w=0;w<n;++w)r._parsed[w+e]=I=T[w],p&&(k()&&(p=!1),v=I);r._sorted=p}l&&jU(this,T)}parsePrimitiveData(e,n,r,s){const{iScale:o,vScale:l}=e,u=o.axis,p=l.axis,v=o.getLabels(),w=o===l,I=new Array(s);let T,k,G;for(T=0,k=s;T<k;++T)G=T+r,I[T]={[u]:w||o.parse(v[G],G),[p]:l.parse(n[G],G)};return I}parseArrayData(e,n,r,s){const{xScale:o,yScale:l}=e,u=new Array(s);let p,v,w,I;for(p=0,v=s;p<v;++p)w=p+r,I=n[w],u[p]={x:o.parse(I[0],w),y:l.parse(I[1],w)};return u}parseObjectData(e,n,r,s){const{xScale:o,yScale:l}=e,{xAxisKey:u="x",yAxisKey:p="y"}=this._parsing,v=new Array(s);let w,I,T,k;for(w=0,I=s;w<I;++w)T=w+r,k=n[T],v[w]={x:o.parse(u_(k,u),T),y:l.parse(u_(k,p),T)};return v}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const o=this._cachedMeta,l=n[e.axis];return HU({keys:UU(this.chart,!0),values:n._stacks[e.axis]},l,o.index,{mode:r})}updateRangeFromParsed(e,n,r,s){const o=r[n.axis];let l=null===o?NaN:o;const u=s&&r._stacks[n.axis];s&&u&&(s.values=u,l=HU(s,o,this._cachedMeta.index)),e.min=Math.min(e.min,l),e.max=Math.max(e.max,l)}getMinMax(e,n){const r=this._cachedMeta,s=r._parsed,o=r._sorted&&e===r.iScale,l=s.length,u=this._getOtherScale(e),p=((i,t,e)=>i&&!t.hidden&&t._stacked&&{keys:UU(this.chart,!0),values:null})(n,r),v={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:w,max:I}=function Mde(i){const{min:t,max:e,minDefined:n,maxDefined:r}=i.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:r?e:Number.POSITIVE_INFINITY}}(u);let T,k;function G(){k=s[T];const Y=k[u.axis];return!au(k[e.axis])||w>Y||I<Y}for(T=0;T<l&&(G()||(this.updateRangeFromParsed(v,e,k,p),!o));++T);if(o)for(T=l-1;T>=0;--T)if(!G()){this.updateRangeFromParsed(v,e,k,p);break}return v}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let s,o,l;for(s=0,o=n.length;s<o;++s)l=n[s][e.axis],au(l)&&r.push(l);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,s=n.vScale,o=this.getParsed(e);return{label:r?""+r.getLabelForValue(o[r.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=function Sde(i){let t,e,n,r;return Jo(i)?(t=i.top,e=i.right,n=i.bottom,r=i.left):t=e=n=r=i,{top:t,right:e,bottom:n,left:r,disabled:!1===i}}(mo(this.options.clip,function Ide(i,t,e){if(!1===e)return!1;const n=VU(i,e),r=VU(t,e);return{top:r.end,right:n.end,bottom:r.start,left:n.start}}(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,r=this._cachedMeta,s=r.data||[],o=this.chart.chartArea,l=[],u=this._drawStart||0,p=this._drawCount||s.length-u,v=this.options.drawActiveElementsOnTop;let w;for(r.dataset&&r.dataset.draw(e,o,u,p),w=u;w<u+p;++w){const I=s[w];I.hidden||(I.active&&v?l.push(I):I.draw(e,o))}for(w=0;w<l.length;++w)l[w].draw(e,o)}getStyle(e,n){const r=n?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const s=this.getDataset();let o;if(e>=0&&e<this._cachedMeta.data.length){const l=this._cachedMeta.data[e];o=l.$context||(l.$context=function Pde(i,t,e){return p_(i,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}(this.getContext(),e,l)),o.parsed=this.getParsed(e),o.raw=s.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=function Lde(i,t){return p_(i,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!n,o.mode=r,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const s="active"===n,o=this._cachedDataOpts,l=e+"-"+n,u=o[l],p=this.enableOptionSharing&&yg(r);if(u)return $U(u,p);const v=this.chart.config,w=v.datasetElementScopeKeys(this._type,e),I=s?[`${e}Hover`,"hover",e,""]:[e,""],T=v.getOptionScopes(this.getDataset(),w),k=Object.keys(na.elements[e]),Y=v.resolveNamedOptions(T,k,()=>this.getContext(r,s),I);return Y.$shared&&(Y.$shared=p,o[l]=Object.freeze($U(Y,p))),Y}_resolveAnimations(e,n,r){const s=this.chart,o=this._cachedDataOpts,l=`animation-${n}`,u=o[l];if(u)return u;let p;if(!1!==s.options.animation){const w=this.chart.config,I=w.datasetAnimationScopeKeys(this._type,n),T=w.getOptionScopes(this.getDataset(),I);p=w.createResolver(T,this.getContext(e,r,n))}const v=new zU(s,p&&p.animations);return p&&p._cacheable&&(o[l]=Object.freeze(v)),v}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||_L(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),s=this._sharedOptions,o=this.getSharedOptions(r),l=this.includeOptions(n,o)||o!==s;return this.updateSharedOptions(o,n,r),{sharedOptions:o,includeOptions:l}}updateElement(e,n,r,s){_L(s)?Object.assign(e,r):this._resolveAnimations(n,s).update(e,r)}updateSharedOptions(e,n,r){e&&!_L(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,s){e.active=s;const o=this.getStyle(n,s);this._resolveAnimations(n,r,s).update(e,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[u,p,v]of this._syncList)this[u](p,v);this._syncList=[];const s=r.length,o=n.length,l=Math.min(o,s);l&&this.parse(0,l),o>s?this._insertElements(s,o-s,e):o<s&&this._removeElements(o,s-o)}_insertElements(e,n,r=!0){const s=this._cachedMeta,o=s.data,l=e+n;let u;const p=v=>{for(v.length+=n,u=v.length-1;u>=l;u--)v[u]=v[u-n]};for(p(o),u=e;u<l;++u)o[u]=new this.dataElementType;this._parsing&&p(s._parsed),this.parse(e,n),r&&this.updateElements(o,e,n,"reset")}updateElements(e,n,r,s){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(e,n);r._stacked&&jA(r,s)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,s]=e;this[n](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return i.defaults={},i})();function Ode(i){const t=i.iScale,e=function kde(i,t){if(!i._cache.$bar){const e=i.getMatchingVisibleMetas(t);let n=[];for(let r=0,s=e.length;r<s;r++)n=n.concat(e[r].controller.getAllParsedValues(i));i._cache.$bar=Q4(n.sort((r,s)=>r-s))}return i._cache.$bar}(t,i.type);let r,s,o,l,n=t._length;const u=()=>{32767===o||-32768===o||(yg(l)&&(n=Math.min(n,Math.abs(o-l)||n)),l=o)};for(r=0,s=e.length;r<s;++r)o=t.getPixelForValue(e[r]),u();for(l=void 0,r=0,s=t.ticks.length;r<s;++r)o=t.getPixelForTick(r),u();return n}function qU(i,t,e,n){return Pl(i)?function Bde(i,t,e,n){const r=e.parse(i[0],n),s=e.parse(i[1],n),o=Math.min(r,s),l=Math.max(r,s);let u=o,p=l;Math.abs(o)>Math.abs(l)&&(u=l,p=o),t[e.axis]=p,t._custom={barStart:u,barEnd:p,start:r,end:s,min:o,max:l}}(i,t,e,n):t[e.axis]=e.parse(i,n),t}function XU(i,t,e,n){const r=i.iScale,s=i.vScale,o=r.getLabels(),l=r===s,u=[];let p,v,w,I;for(p=e,v=e+n;p<v;++p)I=t[p],w={},w[r.axis]=l||r.parse(o[p],p),u.push(qU(I,w,s,p));return u}function bL(i){return i&&void 0!==i.barStart&&void 0!==i.barEnd}function Ude(i,t,e,n){let r=t.borderSkipped;const s={};if(!r)return void(i.borderSkipped=s);if(!0===r)return void(i.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:o,end:l,reverse:u,top:p,bottom:v}=function Vde(i){let t,e,n,r,s;return i.horizontal?(t=i.base>i.x,e="left",n="right"):(t=i.base<i.y,e="bottom",n="top"),t?(r="end",s="start"):(r="start",s="end"),{start:e,end:n,reverse:t,top:r,bottom:s}}(i);"middle"===r&&e&&(i.enableBorderRadius=!0,(e._top||0)===n?r=p:(e._bottom||0)===n?r=v:(s[YU(v,o,l,u)]=!0,r=p)),s[YU(r,o,l,u)]=!0,i.borderSkipped=s}function YU(i,t,e,n){return n?(i=function Hde(i,t,e){return i===t?e:i===e?t:i}(i,t,e),i=KU(i,e,t)):i=KU(i,t,e),i}function KU(i,t,e){return"start"===i?t:"end"===i?e:i}function Gde(i,{inflateAmount:t},e){i.inflateAmount="auto"===t?1===e?.33:0:t}cv.prototype.datasetElementType=null,cv.prototype.dataElementType=null;let Wde=(()=>{class i extends cv{parsePrimitiveData(e,n,r,s){return XU(e,n,r,s)}parseArrayData(e,n,r,s){return XU(e,n,r,s)}parseObjectData(e,n,r,s){const{iScale:o,vScale:l}=e,{xAxisKey:u="x",yAxisKey:p="y"}=this._parsing,v="x"===o.axis?u:p,w="x"===l.axis?u:p,I=[];let T,k,G,Y;for(T=r,k=r+s;T<k;++T)Y=n[T],G={},G[o.axis]=o.parse(u_(Y,v),T),I.push(qU(u_(Y,w),G,l,T));return I}updateRangeFromParsed(e,n,r,s){super.updateRangeFromParsed(e,n,r,s);const o=r._custom;o&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,o.min),e.max=Math.max(e.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:s}=n,o=this.getParsed(e),l=o._custom,u=bL(l)?"["+l.start+", "+l.end+"]":""+s.getLabelForValue(o[s.axis]);return{label:""+r.getLabelForValue(o[r.axis]),value:u}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,s){const o="reset"===s,{index:l,_cachedMeta:{vScale:u}}=this,p=u.getBasePixel(),v=u.isHorizontal(),w=this._getRuler(),{sharedOptions:I,includeOptions:T}=this._getSharedOptions(n,s);for(let k=n;k<n+r;k++){const G=this.getParsed(k),Y=o||ga(G[u.axis])?{base:p,head:p}:this._calculateBarValuePixels(k),ce=this._calculateBarIndexPixels(k,w),Se=(G._stacks||{})[u.axis],Ae={horizontal:v,base:Y.base,enableBorderRadius:!Se||bL(G._custom)||l===Se._top||l===Se._bottom,x:v?Y.head:ce.center,y:v?ce.center:Y.head,height:v?ce.size:Math.abs(Y.size),width:v?Math.abs(Y.size):ce.size};T&&(Ae.options=I||this.resolveDataElementOptions(k,e[k].active?"active":s));const Te=Ae.options||e[k].options;Ude(Ae,Te,Se,l),Gde(Ae,Te,w.ratio),this.updateElement(e[k],k,Ae,s)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,s=r.getMatchingVisibleMetas(this._type).filter(p=>p.controller.options.grouped),o=r.options.stacked,l=[],u=p=>{const v=p.controller.getParsed(n),w=v&&v[p.vScale.axis];if(ga(w)||isNaN(w))return!0};for(const p of s)if((void 0===n||!u(p))&&((!1===o||-1===l.indexOf(p.stack)||void 0===o&&void 0===p.stack)&&l.push(p.stack),p.index===e))break;return l.length||l.push(void 0),l}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,r){const s=this._getStacks(e,r),o=void 0!==n?s.indexOf(n):-1;return-1===o?s.length-1:o}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,s=[];let o,l;for(o=0,l=n.data.length;o<l;++o)s.push(r.getPixelForValue(this.getParsed(o)[r.axis],o));const u=e.barThickness;return{min:u||Ode(n),pixels:s,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:u?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r},options:{base:s,minBarLength:o}}=this,l=s||0,u=this.getParsed(e),p=u._custom,v=bL(p);let k,G,w=u[n.axis],I=0,T=r?this.applyStack(n,u,r):w;T!==w&&(I=T-w,T=w),v&&(w=p.barStart,T=p.barEnd-p.barStart,0!==w&&lv(w)!==lv(p.barEnd)&&(I=0),I+=w);const Y=ga(s)||v?I:s;let ce=n.getPixelForValue(Y);if(k=this.chart.getDataVisibility(e)?n.getPixelForValue(I+T):ce,G=k-ce,Math.abs(G)<o){G=function zde(i,t,e){return 0!==i?lv(i):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}(G,n,l)*o,w===l&&(ce-=G/2);const Se=n.getPixelForDecimal(0),Ae=n.getPixelForDecimal(1),Te=Math.min(Se,Ae),Qe=Math.max(Se,Ae);ce=Math.max(Math.min(ce,Qe),Te),k=ce+G}if(ce===n.getPixelForValue(l)){const Se=lv(G)*n.getLineWidthForValue(l)/2;ce+=Se,G-=Se}return{size:G,base:ce,head:k,center:k+G/2}}_calculateBarIndexPixels(e,n){const r=n.scale,s=this.options,o=s.skipNull,l=mo(s.maxBarThickness,1/0);let u,p;if(n.grouped){const v=o?this._getStackCount(e):n.stackCount,w="flex"===s.barThickness?function Nde(i,t,e,n){const r=t.pixels,s=r[i];let o=i>0?r[i-1]:null,l=i<r.length-1?r[i+1]:null;const u=e.categoryPercentage;null===o&&(o=s-(null===l?t.end-t.start:l-s)),null===l&&(l=s+s-o);const p=s-(s-Math.min(o,l))/2*u;return{chunk:Math.abs(l-o)/2*u/n,ratio:e.barPercentage,start:p}}(e,n,s,v):function Fde(i,t,e,n){const r=e.barThickness;let s,o;return ga(r)?(s=t.min*e.categoryPercentage,o=e.barPercentage):(s=r*n,o=1),{chunk:s/n,ratio:o,start:t.pixels[i]-s/2}}(e,n,s,v),I=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0);u=w.start+w.chunk*I+w.chunk/2,p=Math.min(l,w.chunk*w.ratio)}else u=r.getPixelForValue(this.getParsed(e)[r.axis],e),p=Math.min(l,n.min*n.ratio);return{base:u-p/2,head:u+p/2,center:u,size:p}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,s=r.length;let o=0;for(;o<s;++o)null!==this.getParsed(o)[n.axis]&&r[o].draw(this._ctx)}}return i.id="bar",i.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},i.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}},i})(),jde=(()=>{class i extends cv{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,n,r,s){const o=super.parsePrimitiveData(e,n,r,s);for(let l=0;l<o.length;l++)o[l]._custom=this.resolveDataElementOptions(l+r).radius;return o}parseArrayData(e,n,r,s){const o=super.parseArrayData(e,n,r,s);for(let l=0;l<o.length;l++)o[l]._custom=mo(n[r+l][2],this.resolveDataElementOptions(l+r).radius);return o}parseObjectData(e,n,r,s){const o=super.parseObjectData(e,n,r,s);for(let l=0;l<o.length;l++){const u=n[r+l];o[l]._custom=mo(u&&u.r&&+u.r,this.resolveDataElementOptions(l+r).radius)}return o}getMaxOverflow(){const e=this._cachedMeta.data;let n=0;for(let r=e.length-1;r>=0;--r)n=Math.max(n,e[r].size(this.resolveDataElementOptions(r))/2);return n>0&&n}getLabelAndValue(e){const n=this._cachedMeta,{xScale:r,yScale:s}=n,o=this.getParsed(e),l=r.getLabelForValue(o.x),u=s.getLabelForValue(o.y),p=o._custom;return{label:n.label,value:"("+l+", "+u+(p?", "+p:"")+")"}}update(e){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,e)}updateElements(e,n,r,s){const o="reset"===s,{iScale:l,vScale:u}=this._cachedMeta,{sharedOptions:p,includeOptions:v}=this._getSharedOptions(n,s),w=l.axis,I=u.axis;for(let T=n;T<n+r;T++){const k=e[T],G=!o&&this.getParsed(T),Y={},ce=Y[w]=o?l.getPixelForDecimal(.5):l.getPixelForValue(G[w]),Se=Y[I]=o?u.getBasePixel():u.getPixelForValue(G[I]);Y.skip=isNaN(ce)||isNaN(Se),v&&(Y.options=p||this.resolveDataElementOptions(T,k.active?"active":s),o&&(Y.options.radius=0)),this.updateElement(k,T,Y,s)}}resolveDataElementOptions(e,n){const r=this.getParsed(e);let s=super.resolveDataElementOptions(e,n);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const o=s.radius;return"active"!==n&&(s.radius=0),s.radius+=mo(r&&r._custom,o),s}}return i.id="bubble",i.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},i.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:()=>""}}}},i})(),ZU=(()=>{class i extends cv{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,s=this._cachedMeta;if(!1===this._parsing)s._parsed=r;else{let l,u,o=p=>+r[p];if(Jo(r[e])){const{key:p="value"}=this._parsing;o=v=>+u_(r[v],p)}for(l=e,u=e+n;l<u;++l)s._parsed[l]=o(l)}}_getRotation(){return gm(this.options.rotation-90)}_getCircumference(){return gm(this.options.circumference)}_getRotationExtents(){let e=dl,n=-dl;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)){const s=this.chart.getDatasetMeta(r).controller,o=s._getRotation(),l=s._getCircumference();e=Math.min(e,o),n=Math.max(n,o+l)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,s=this._cachedMeta,o=s.data,l=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,u=Math.max((Math.min(r.width,r.height)-l)/2,0),p=Math.min(((i,t)=>"string"==typeof i&&i.endsWith("%")?parseFloat(i)/100:i/t)(this.options.cutout,u),1),v=this._getRingWeight(this.index),{circumference:w,rotation:I}=this._getRotationExtents(),{ratioX:T,ratioY:k,offsetX:G,offsetY:Y}=function $de(i,t,e){let n=1,r=1,s=0,o=0;if(t<dl){const l=i,u=l+t,p=Math.cos(l),v=Math.sin(l),w=Math.cos(u),I=Math.sin(u),T=(Ae,Te,Qe)=>FA(Ae,l,u,!0)?1:Math.max(Te,Te*e,Qe,Qe*e),k=(Ae,Te,Qe)=>FA(Ae,l,u,!0)?-1:Math.min(Te,Te*e,Qe,Qe*e),G=T(0,p,w),Y=T(Yc,v,I),ce=k(oc,p,w),Se=k(oc+Yc,v,I);n=(G-ce)/2,r=(Y-Se)/2,s=-(G+ce)/2,o=-(Y+Se)/2}return{ratioX:n,ratioY:r,offsetX:s,offsetY:o}}(I,w,p),Ae=Math.max(Math.min((r.width-l)/T,(r.height-l)/k)/2,0),Te=U4(this.options.radius,Ae),mt=(Te-Math.max(Te*p,0))/this._getVisibleDatasetWeightTotal();this.offsetX=G*Te,this.offsetY=Y*Te,s.total=this.calculateTotal(),this.outerRadius=Te-mt*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-mt*v,0),this.updateElements(o,0,o.length,e)}_circumference(e,n){const r=this.options,s=this._cachedMeta,o=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||null===s._parsed[e]||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*o/dl)}updateElements(e,n,r,s){const o="reset"===s,l=this.chart,u=l.chartArea,w=(u.left+u.right)/2,I=(u.top+u.bottom)/2,T=o&&l.options.animation.animateScale,k=T?0:this.innerRadius,G=T?0:this.outerRadius,{sharedOptions:Y,includeOptions:ce}=this._getSharedOptions(n,s);let Ae,Se=this._getRotation();for(Ae=0;Ae<n;++Ae)Se+=this._circumference(Ae,o);for(Ae=n;Ae<n+r;++Ae){const Te=this._circumference(Ae,o),Qe=e[Ae],mt={x:w+this.offsetX,y:I+this.offsetY,startAngle:Se,endAngle:Se+Te,circumference:Te,outerRadius:G,innerRadius:k};ce&&(mt.options=Y||this.resolveDataElementOptions(Ae,Qe.active?"active":s)),Se+=Te,this.updateElement(Qe,Ae,mt,s)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let s,r=0;for(s=0;s<n.length;s++){const o=e._parsed[s];null!==o&&!isNaN(o)&&this.chart.getDataVisibility(s)&&!n[s].hidden&&(r+=Math.abs(o))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?dl*(Math.abs(e)/n):0}getLabelAndValue(e){const r=this.chart,s=r.data.labels||[],o=WA(this._cachedMeta._parsed[e],r.options.locale);return{label:s[e]||"",value:o}}getMaxBorderWidth(e){let n=0;const r=this.chart;let s,o,l,u,p;if(!e)for(s=0,o=r.data.datasets.length;s<o;++s)if(r.isDatasetVisible(s)){l=r.getDatasetMeta(s),e=l.data,u=l.controller;break}if(!e)return 0;for(s=0,o=e.length;s<o;++s)p=u.resolveDataElementOptions(s),"inner"!==p.borderAlign&&(n=Math.max(n,p.borderWidth||0,p.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,s=e.length;r<s;++r){const o=this.resolveDataElementOptions(r);n=Math.max(n,o.offset||0,o.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(mo(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return i.id="doughnut",i.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},i.descriptors={_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t},i.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n}}=t.legend.options;return e.labels.map((r,s)=>{const l=t.getDatasetMeta(0).controller.getStyle(s);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,lineWidth:l.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(s),index:s}})}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}},tooltip:{callbacks:{title:()=>"",label(t){let e=t.label;const n=": "+t.formattedValue;return Pl(e)?(e=e.slice(),e[0]+=n):e+=n,e}}}}},i})(),qde=(()=>{class i extends cv{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:s=[],_dataset:o}=n,l=this.chart._animationsDisabled;let{start:u,count:p}=tU(n,s,l);this._drawStart=u,this._drawCount=p,nU(n)&&(u=0,p=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!o._decimated,r.points=s;const v=this.resolveDatasetElementOptions(e);this.options.showLine||(v.borderWidth=0),v.segment=this.options.segment,this.updateElement(r,void 0,{animated:!l,options:v},e),this.updateElements(s,u,p,e)}updateElements(e,n,r,s){const o="reset"===s,{iScale:l,vScale:u,_stacked:p,_dataset:v}=this._cachedMeta,{sharedOptions:w,includeOptions:I}=this._getSharedOptions(n,s),T=l.axis,k=u.axis,{spanGaps:G,segment:Y}=this.options,ce=pC(G)?G:Number.POSITIVE_INFINITY,Se=this.chart._animationsDisabled||o||"none"===s;let Ae=n>0&&this.getParsed(n-1);for(let Te=n;Te<n+r;++Te){const Qe=e[Te],mt=this.getParsed(Te),zt=Se?Qe:{},it=ga(mt[k]),Tt=zt[T]=l.getPixelForValue(mt[T],Te),ln=zt[k]=o||it?u.getBasePixel():u.getPixelForValue(p?this.applyStack(u,mt,p):mt[k],Te);zt.skip=isNaN(Tt)||isNaN(ln)||it,zt.stop=Te>0&&Math.abs(mt[T]-Ae[T])>ce,Y&&(zt.parsed=mt,zt.raw=v.data[Te]),I&&(zt.options=w||this.resolveDataElementOptions(Te,Qe.active?"active":s)),Se||this.updateElement(Qe,Te,zt,s),Ae=mt}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,s=e.data||[];if(!s.length)return r;const o=s[0].size(this.resolveDataElementOptions(0)),l=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,o,l)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}return i.id="line",i.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},i.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}},i})(),Xde=(()=>{class i extends cv{constructor(e,n){super(e,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const r=this.chart,s=r.data.labels||[],o=WA(this._cachedMeta._parsed[e].r,r.options.locale);return{label:s[e]||"",value:o}}parseObjectData(e,n,r,s){return xU.bind(this)(e,n,r,s)}update(e){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,e)}getMinMax(){const n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return this._cachedMeta.data.forEach((r,s)=>{const o=this.getParsed(s).r;!isNaN(o)&&this.chart.getDataVisibility(s)&&(o<n.min&&(n.min=o),o>n.max&&(n.max=o))}),n}_updateRadius(){const e=this.chart,n=e.chartArea,r=e.options,s=Math.min(n.right-n.left,n.bottom-n.top),o=Math.max(s/2,0),u=(o-Math.max(r.cutoutPercentage?o/100*r.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=o-u*this.index,this.innerRadius=this.outerRadius-u}updateElements(e,n,r,s){const o="reset"===s,l=this.chart,p=l.options.animation,v=this._cachedMeta.rScale,w=v.xCenter,I=v.yCenter,T=v.getIndexAngle(0)-.5*oc;let G,k=T;const Y=360/this.countVisibleElements();for(G=0;G<n;++G)k+=this._computeAngle(G,s,Y);for(G=n;G<n+r;G++){const ce=e[G];let Se=k,Ae=k+this._computeAngle(G,s,Y),Te=l.getDataVisibility(G)?v.getDistanceFromCenterForValue(this.getParsed(G).r):0;k=Ae,o&&(p.animateScale&&(Te=0),p.animateRotate&&(Se=Ae=T));const Qe={x:w,y:I,innerRadius:0,outerRadius:Te,startAngle:Se,endAngle:Ae,options:this.resolveDataElementOptions(G,ce.active?"active":s)};this.updateElement(ce,G,Qe,s)}}countVisibleElements(){let n=0;return this._cachedMeta.data.forEach((r,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&n++}),n}_computeAngle(e,n,r){return this.chart.getDataVisibility(e)?gm(this.resolveDataElementOptions(e,n).angle||r):0}}return i.id="polarArea",i.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},i.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n}}=t.legend.options;return e.labels.map((r,s)=>{const l=t.getDatasetMeta(0).controller.getStyle(s);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,lineWidth:l.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(s),index:s}})}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}},tooltip:{callbacks:{title:()=>"",label:t=>t.chart.data.labels[t.dataIndex]+": "+t.formattedValue}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}},i})(),Yde=(()=>{class i extends ZU{}return i.id="pie",i.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"},i})(),Kde=(()=>{class i extends cv{getLabelAndValue(e){const n=this._cachedMeta.vScale,r=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(r[n.axis])}}parseObjectData(e,n,r,s){return xU.bind(this)(e,n,r,s)}update(e){const n=this._cachedMeta,r=n.dataset,s=n.data||[],o=n.iScale.getLabels();if(r.points=s,"resize"!==e){const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),this.updateElement(r,void 0,{_loop:!0,_fullLoop:o.length===s.length,options:l},e)}this.updateElements(s,0,s.length,e)}updateElements(e,n,r,s){const o=this._cachedMeta.rScale,l="reset"===s;for(let u=n;u<n+r;u++){const p=e[u],v=this.resolveDataElementOptions(u,p.active?"active":s),w=o.getPointPositionForValue(u,this.getParsed(u).r),I=l?o.xCenter:w.x,T=l?o.yCenter:w.y,k={x:I,y:T,angle:w.angle,skip:isNaN(I)||isNaN(T),options:v};this.updateElement(p,u,k,s)}}}return i.id="radar",i.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},i.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}},i})();class mm{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}hasValue(){return pC(this.x)&&pC(this.y)}getProps(t,e){const n=this.$animations;if(!e||!n)return this;const r={};return t.forEach(s=>{r[s]=n[s]&&n[s].active()?n[s]._to:this[s]}),r}}mm.defaults={},mm.defaultRoutes=void 0;const QU={values:i=>Pl(i)?i:""+i,numeric(i,t,e){if(0===i)return"0";const n=this.chart.options.locale;let r,s=i;if(e.length>1){const p=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(p<1e-4||p>1e15)&&(r="scientific"),s=function Zde(i,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&i!==Math.floor(i)&&(e=i-Math.floor(i)),e}(i,e)}const o=_g(Math.abs(s)),l=Math.max(Math.min(-1*Math.floor(o),20),0),u={notation:r,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(u,this.options.ticks.format),WA(i,n,u)},logarithmic(i,t,e){if(0===i)return"0";const n=i/Math.pow(10,Math.floor(_g(i)));return 1===n||2===n||5===n?QU.numeric.call(this,i,t,e):""}};var pS={formatters:QU};function gS(i,t,e,n,r){const s=mo(n,0),o=Math.min(mo(r,i.length),i.length);let u,p,v,l=0;for(e=Math.ceil(e),r&&(u=r-n,e=u/Math.floor(u/e)),v=s;v<0;)l++,v=Math.round(s+l*e);for(p=Math.max(s,0);p<o;p++)p===v&&(t.push(i[p]),l++,v=Math.round(s+l*e))}na.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(i,t)=>t.lineWidth,tickColor:(i,t)=>t.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:pS.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),na.route("scale.ticks","color","","color"),na.route("scale.grid","color","","borderColor"),na.route("scale.grid","borderColor","","borderColor"),na.route("scale.title","color","","color"),na.describe("scale",{_fallback:!1,_scriptable:i=>!i.startsWith("before")&&!i.startsWith("after")&&"callback"!==i&&"parser"!==i,_indexable:i=>"borderDash"!==i&&"tickBorderDash"!==i}),na.describe("scales",{_fallback:"scale"}),na.describe("scale.ticks",{_scriptable:i=>"backdropPadding"!==i&&"callback"!==i,_indexable:i=>"backdropPadding"!==i});const JU=(i,t,e)=>"top"===t||"left"===t?i[t]+e:i[t]-e;function eH(i,t){const e=[],n=i.length/t,r=i.length;let s=0;for(;s<r;s+=n)e.push(i[Math.floor(s)]);return e}function sfe(i,t,e){const n=i.ticks.length,r=Math.min(t,n-1),s=i._startPixel,o=i._endPixel,l=1e-6;let p,u=i.getPixelForTick(r);if(!(e&&(p=1===n?Math.max(u-s,o-u):0===t?(i.getPixelForTick(1)-u)/2:(u-i.getPixelForTick(r-1))/2,u+=r<t?p:-p,u<s-l||u>o+l)))return u}function $A(i){return i.drawTicks?i.tickLength:0}function tH(i,t){if(!i.display)return 0;const e=Qu(i.font,t),n=Td(i.padding);return(Pl(i.text)?i.text.length:1)*e.lineHeight+n.height}function cfe(i,t,e){let n=nL(i);return(e&&"right"!==t||!e&&"right"===t)&&(n=(i=>"left"===i?"right":"right"===i?"left":i)(n)),n}class P0 extends mm{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:n,_suggestedMax:r}=this;return t=vg(t,Number.POSITIVE_INFINITY),e=vg(e,Number.NEGATIVE_INFINITY),n=vg(n,Number.POSITIVE_INFINITY),r=vg(r,Number.NEGATIVE_INFINITY),{min:vg(t,n),max:vg(e,r),minDefined:au(t),maxDefined:au(e)}}getMinMax(t){let o,{min:e,max:n,minDefined:r,maxDefined:s}=this.getUserBounds();if(r&&s)return{min:e,max:n};const l=this.getMatchingVisibleMetas();for(let u=0,p=l.length;u<p;++u)o=l[u].controller.getMinMax(this,t),r||(e=Math.min(e,o.min)),s||(n=Math.max(n,o.max));return e=s&&e>n?n:e,n=r&&e>n?e:n,{min:vg(e,vg(n,e)),max:vg(n,vg(e,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Rl(this.options.beforeUpdate,[this])}update(t,e,n){const{beginAtZero:r,grace:s,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function Fhe(i,t,e){const{min:n,max:r}=i,s=U4(t,(r-n)/2),o=(l,u)=>e&&0===l?0:l+u;return{min:o(n,-Math.abs(s)),max:o(r,s)}}(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const u=l<this.ticks.length;this._convertTicksToLabels(u?eH(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=function Qde(i,t){const e=i.options.ticks,n=e.maxTicksLimit||function Jde(i){const t=i.options.offset,e=i._tickSize();return Math.floor(Math.min(i._length/e+(t?0:1),i._maxLength/e))}(i),r=e.major.enabled?function tfe(i){const t=[];let e,n;for(e=0,n=i.length;e<n;e++)i[e].major&&t.push(e);return t}(t):[],s=r.length,o=r[0],l=r[s-1],u=[];if(s>n)return function nfe(i,t,e,n){let o,r=0,s=e[0];for(n=Math.ceil(n),o=0;o<i.length;o++)o===s&&(t.push(i[o]),r++,s=e[r*n])}(t,u,r,s/n),u;const p=function efe(i,t,e){const n=function ife(i){const t=i.length;let e,n;if(t<2)return!1;for(n=i[0],e=1;e<t;++e)if(i[e]-i[e-1]!==n)return!1;return n}(i),r=t.length/e;if(!n)return Math.max(r,1);const s=function Xue(i){const t=[],e=Math.sqrt(i);let n;for(n=1;n<e;n++)i%n==0&&(t.push(n),t.push(i/n));return e===(0|e)&&t.push(e),t.sort((r,s)=>r-s).pop(),t}(n);for(let o=0,l=s.length-1;o<l;o++){const u=s[o];if(u>r)return u}return Math.max(r,1)}(r,t,n);if(s>0){let v,w;const I=s>1?Math.round((l-o)/(s-1)):null;for(gS(t,u,p,ga(I)?0:o-I,o),v=0,w=s-1;v<w;v++)gS(t,u,p,r[v],r[v+1]);return gS(t,u,p,l,ga(I)?t.length:l+I),u}return gS(t,u,p),u}(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),u&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,n,t=this.options.reverse;this.isHorizontal()?(e=this.left,n=this.right):(e=this.top,n=this.bottom,t=!t),this._startPixel=e,this._endPixel=n,this._reversePixels=t,this._length=n-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Rl(this.options.afterUpdate,[this])}beforeSetDimensions(){Rl(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Rl(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Rl(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Rl(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let n,r,s;for(n=0,r=t.length;n<r;n++)s=t[n],s.label=Rl(e.callback,[s.value,n,t],this)}afterTickToLabelConversion(){Rl(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Rl(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,n=this.ticks.length,r=e.minRotation||0,s=e.maxRotation;let l,u,p,o=r;if(!this._isVisible()||!e.display||r>=s||n<=1||!this.isHorizontal())return void(this.labelRotation=r);const v=this._getLabelSizes(),w=v.widest.width,I=v.highest.height,T=Ch(this.chart.width-w,0,this.maxWidth);l=t.offset?this.maxWidth/n:T/(n-1),w+6>l&&(l=T/(n-(t.offset?.5:1)),u=this.maxHeight-$A(t.grid)-e.padding-tH(t.title,this.chart.options.font),p=Math.sqrt(w*w+I*I),o=J2(Math.min(Math.asin(Ch((v.highest.height+6)/l,-1,1)),Math.asin(Ch(u/p,-1,1))-Math.asin(Ch(I/p,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Rl(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Rl(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:n,title:r,grid:s}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const u=tH(r,e.options.font);if(l?(t.width=this.maxWidth,t.height=$A(s)+u):(t.height=this.maxHeight,t.width=$A(s)+u),n.display&&this.ticks.length){const{first:p,last:v,widest:w,highest:I}=this._getLabelSizes(),T=2*n.padding,k=gm(this.labelRotation),G=Math.cos(k),Y=Math.sin(k);l?t.height=Math.min(this.maxHeight,t.height+(n.mirror?0:Y*w.width+G*I.height)+T):t.width=Math.min(this.maxWidth,t.width+(n.mirror?0:G*w.width+Y*I.height)+T),this._calculatePadding(p,v,Y,G)}}this._handleMargins(),l?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,n,r){const{ticks:{align:s,padding:o},position:l}=this.options,u=0!==this.labelRotation,p="top"!==l&&"x"===this.axis;if(this.isHorizontal()){const v=this.getPixelForTick(0)-this.left,w=this.right-this.getPixelForTick(this.ticks.length-1);let I=0,T=0;u?p?(I=r*t.width,T=n*e.height):(I=n*t.height,T=r*e.width):"start"===s?T=e.width:"end"===s?I=t.width:"inner"!==s&&(I=t.width/2,T=e.width/2),this.paddingLeft=Math.max((I-v+o)*this.width/(this.width-v),0),this.paddingRight=Math.max((T-w+o)*this.width/(this.width-w),0)}else{let v=e.height/2,w=t.height/2;"start"===s?(v=0,w=t.height):"end"===s&&(v=e.height,w=0),this.paddingTop=v+o,this.paddingBottom=w+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Rl(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,n=t.length;e<n;e++)ga(t[e].label)&&(t.splice(e,1),n--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let n=this.ticks;e<n.length&&(n=eH(n,e)),this._labelSizes=t=this._computeLabelSizes(n,n.length)}return t}_computeLabelSizes(t,e){const{ctx:n,_longestTextCache:r}=this,s=[],o=[];let p,v,w,I,T,k,G,Y,ce,Se,Ae,l=0,u=0;for(p=0;p<e;++p){if(I=t[p].label,T=this._resolveTickFontOptions(p),n.font=k=T.string,G=r[k]=r[k]||{data:{},gc:[]},Y=T.lineHeight,ce=Se=0,ga(I)||Pl(I)){if(Pl(I))for(v=0,w=I.length;v<w;++v)Ae=I[v],!ga(Ae)&&!Pl(Ae)&&(ce=lS(n,G.data,G.gc,ce,Ae),Se+=Y)}else ce=lS(n,G.data,G.gc,ce,I),Se=Y;s.push(ce),o.push(Se),l=Math.max(ce,l),u=Math.max(Se,u)}!function ofe(i,t){nl(i,e=>{const n=e.gc,r=n.length/2;let s;if(r>t){for(s=0;s<r;++s)delete e.data[n[s]];n.splice(0,r)}})}(r,e);const Te=s.indexOf(l),Qe=o.indexOf(u),mt=zt=>({width:s[zt]||0,height:o[zt]||0});return{first:mt(0),last:mt(e-1),widest:mt(Te),highest:mt(Qe),widths:s,heights:o}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return function Zue(i){return Ch(i,-32768,32767)}(this._alignToPixels?S0(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const n=e[t];return n.$context||(n.$context=function lfe(i,t,e){return p_(i,{tick:e,index:t,type:"tick"})}(this.getContext(),t,n))}return this.$context||(this.$context=function afe(i,t){return p_(i,{scale:t,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=gm(this.labelRotation),n=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),s=this._getLabelSizes(),o=t.autoSkipPadding||0,l=s?s.widest.width+o:0,u=s?s.highest.height+o:0;return this.isHorizontal()?u*n>l*r?l/n:u/r:u*r<l*n?u/n:l/r}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,n=this.chart,r=this.options,{grid:s,position:o}=r,l=s.offset,u=this.isHorizontal(),v=this.ticks.length+(l?1:0),w=$A(s),I=[],T=s.setContext(this.getContext()),k=T.drawBorder?T.borderWidth:0,G=k/2,Y=function(zn){return S0(n,zn,k)};let ce,Se,Ae,Te,Qe,mt,zt,it,Tt,ln,Hn,ei;if("top"===o)ce=Y(this.bottom),mt=this.bottom-w,it=ce-G,ln=Y(t.top)+G,ei=t.bottom;else if("bottom"===o)ce=Y(this.top),ln=t.top,ei=Y(t.bottom)-G,mt=ce+G,it=this.top+w;else if("left"===o)ce=Y(this.right),Qe=this.right-w,zt=ce-G,Tt=Y(t.left)+G,Hn=t.right;else if("right"===o)ce=Y(this.left),Tt=t.left,Hn=Y(t.right)-G,Qe=ce+G,zt=this.left+w;else if("x"===e){if("center"===o)ce=Y((t.top+t.bottom)/2+.5);else if(Jo(o)){const zn=Object.keys(o)[0];ce=Y(this.chart.scales[zn].getPixelForValue(o[zn]))}ln=t.top,ei=t.bottom,mt=ce+G,it=mt+w}else if("y"===e){if("center"===o)ce=Y((t.left+t.right)/2);else if(Jo(o)){const zn=Object.keys(o)[0];ce=Y(this.chart.scales[zn].getPixelForValue(o[zn]))}Qe=ce-G,zt=Qe-w,Tt=t.left,Hn=t.right}const Wn=mo(r.ticks.maxTicksLimit,v),En=Math.max(1,Math.ceil(v/Wn));for(Se=0;Se<v;Se+=En){const zn=s.setContext(this.getContext(Se)),xn=zn.lineWidth,Gn=zn.color,Nn=zn.borderDash||[],In=zn.borderDashOffset,Vn=zn.tickWidth,Yi=zn.tickColor,Ei=zn.tickBorderDash||[],rr=zn.tickBorderDashOffset;Ae=sfe(this,Se,l),void 0!==Ae&&(Te=S0(n,Ae,xn),u?Qe=zt=Tt=Hn=Te:mt=it=ln=ei=Te,I.push({tx1:Qe,ty1:mt,tx2:zt,ty2:it,x1:Tt,y1:ln,x2:Hn,y2:ei,width:xn,color:Gn,borderDash:Nn,borderDashOffset:In,tickWidth:Vn,tickColor:Yi,tickBorderDash:Ei,tickBorderDashOffset:rr}))}return this._ticksLength=v,this._borderValue=ce,I}_computeLabelItems(t){const e=this.axis,n=this.options,{position:r,ticks:s}=n,o=this.isHorizontal(),l=this.ticks,{align:u,crossAlign:p,padding:v,mirror:w}=s,I=$A(n.grid),T=I+v,k=w?-v:T,G=-gm(this.labelRotation),Y=[];let ce,Se,Ae,Te,Qe,mt,zt,it,Tt,ln,Hn,ei,Wn="middle";if("top"===r)mt=this.bottom-k,zt=this._getXAxisLabelAlignment();else if("bottom"===r)mt=this.top+k,zt=this._getXAxisLabelAlignment();else if("left"===r){const zn=this._getYAxisLabelAlignment(I);zt=zn.textAlign,Qe=zn.x}else if("right"===r){const zn=this._getYAxisLabelAlignment(I);zt=zn.textAlign,Qe=zn.x}else if("x"===e){if("center"===r)mt=(t.top+t.bottom)/2+T;else if(Jo(r)){const zn=Object.keys(r)[0];mt=this.chart.scales[zn].getPixelForValue(r[zn])+T}zt=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===r)Qe=(t.left+t.right)/2-T;else if(Jo(r)){const zn=Object.keys(r)[0];Qe=this.chart.scales[zn].getPixelForValue(r[zn])}zt=this._getYAxisLabelAlignment(I).textAlign}"y"===e&&("start"===u?Wn="top":"end"===u&&(Wn="bottom"));const En=this._getLabelSizes();for(ce=0,Se=l.length;ce<Se;++ce){Ae=l[ce],Te=Ae.label;const zn=s.setContext(this.getContext(ce));it=this.getPixelForTick(ce)+s.labelOffset,Tt=this._resolveTickFontOptions(ce),ln=Tt.lineHeight,Hn=Pl(Te)?Te.length:1;const xn=Hn/2,Gn=zn.color,Nn=zn.textStrokeColor,In=zn.textStrokeWidth;let Yi,Vn=zt;if(o?(Qe=it,"inner"===zt&&(Vn=ce===Se-1?this.options.reverse?"left":"right":0===ce?this.options.reverse?"right":"left":"center"),ei="top"===r?"near"===p||0!==G?-Hn*ln+ln/2:"center"===p?-En.highest.height/2-xn*ln+ln:ln/2-En.highest.height:"near"===p||0!==G?ln/2:"center"===p?En.highest.height/2-xn*ln:En.highest.height-Hn*ln,w&&(ei*=-1)):(mt=it,ei=(1-Hn)*ln/2),zn.showLabelBackdrop){const Ei=Td(zn.backdropPadding),rr=En.heights[ce],fr=En.widths[ce];let Ss=mt+ei-Ei.top,Di=Qe-Ei.left;switch(Wn){case"middle":Ss-=rr/2;break;case"bottom":Ss-=rr}switch(zt){case"center":Di-=fr/2;break;case"right":Di-=fr}Yi={left:Di,top:Ss,width:fr+Ei.width,height:rr+Ei.height,color:zn.backdropColor}}Y.push({rotation:G,label:Te,font:Tt,color:Gn,strokeColor:Nn,strokeWidth:In,textOffset:ei,textAlign:Vn,textBaseline:Wn,translation:[Qe,mt],backdrop:Yi})}return Y}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-gm(this.labelRotation))return"top"===t?"left":"right";let r="center";return"start"===e.align?r="left":"end"===e.align?r="right":"inner"===e.align&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:n,mirror:r,padding:s}}=this.options,l=t+s,u=this._getLabelSizes().widest.width;let p,v;return"left"===e?r?(v=this.right+s,"near"===n?p="left":"center"===n?(p="center",v+=u/2):(p="right",v+=u)):(v=this.right-l,"near"===n?p="right":"center"===n?(p="center",v-=u/2):(p="left",v=this.left)):"right"===e?r?(v=this.left+s,"near"===n?p="right":"center"===n?(p="center",v-=u/2):(p="left",v-=u)):(v=this.left+l,"near"===n?p="left":"center"===n?(p="center",v+=u/2):(p="right",v=this.right)):p="right",{textAlign:p,x:v}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:n,top:r,width:s,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(n,r,s,o),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const r=this.ticks.findIndex(s=>s.value===t);return r>=0?e.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const e=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let s,o;const l=(u,p,v)=>{!v.width||!v.color||(n.save(),n.lineWidth=v.width,n.strokeStyle=v.color,n.setLineDash(v.borderDash||[]),n.lineDashOffset=v.borderDashOffset,n.beginPath(),n.moveTo(u.x,u.y),n.lineTo(p.x,p.y),n.stroke(),n.restore())};if(e.display)for(s=0,o=r.length;s<o;++s){const u=r[s];e.drawOnChartArea&&l({x:u.x1,y:u.y1},{x:u.x2,y:u.y2},u),e.drawTicks&&l({x:u.tx1,y:u.ty1},{x:u.tx2,y:u.ty2},{color:u.tickColor,width:u.tickWidth,borderDash:u.tickBorderDash,borderDashOffset:u.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{grid:n}}=this,r=n.setContext(this.getContext()),s=n.drawBorder?r.borderWidth:0;if(!s)return;const o=n.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let u,p,v,w;this.isHorizontal()?(u=S0(t,this.left,s)-s/2,p=S0(t,this.right,o)+o/2,v=w=l):(v=S0(t,this.top,s)-s/2,w=S0(t,this.bottom,o)+o/2,u=p=l),e.save(),e.lineWidth=r.borderWidth,e.strokeStyle=r.borderColor,e.beginPath(),e.moveTo(u,v),e.lineTo(p,w),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const n=this.ctx,r=this._computeLabelArea();r&&cS(n,r);const s=this._labelItems||(this._labelItems=this._computeLabelItems(t));let o,l;for(o=0,l=s.length;o<l;++o){const u=s[o],p=u.font,v=u.label;u.backdrop&&(n.fillStyle=u.backdrop.color,n.fillRect(u.backdrop.left,u.backdrop.top,u.backdrop.width,u.backdrop.height)),E0(n,v,0,u.textOffset,p,u)}r&&uS(n)}drawTitle(){const{ctx:t,options:{position:e,title:n,reverse:r}}=this;if(!n.display)return;const s=Qu(n.font),o=Td(n.padding),l=n.align;let u=s.lineHeight/2;"bottom"===e||"center"===e||Jo(e)?(u+=o.bottom,Pl(n.text)&&(u+=s.lineHeight*(n.text.length-1))):u+=o.top;const{titleX:p,titleY:v,maxWidth:w,rotation:I}=function ufe(i,t,e,n){const{top:r,left:s,bottom:o,right:l,chart:u}=i,{chartArea:p,scales:v}=u;let I,T,k,w=0;const G=o-r,Y=l-s;if(i.isHorizontal()){if(T=Ed(n,s,l),Jo(e)){const ce=Object.keys(e)[0];k=v[ce].getPixelForValue(e[ce])+G-t}else k="center"===e?(p.bottom+p.top)/2+G-t:JU(i,e,t);I=l-s}else{if(Jo(e)){const ce=Object.keys(e)[0];T=v[ce].getPixelForValue(e[ce])-Y+t}else T="center"===e?(p.left+p.right)/2-Y+t:JU(i,e,t);k=Ed(n,o,r),w="left"===e?-Yc:Yc}return{titleX:T,titleY:k,maxWidth:I,rotation:w}}(this,u,e,l);E0(t,n.text,0,0,s,{color:n.color,maxWidth:w,rotation:I,textAlign:cfe(l,e,r),textBaseline:"middle",translation:[p,v]})}draw(t){!this._isVisible()||(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,n=mo(t.grid&&t.grid.z,-1);return this._isVisible()&&this.draw===P0.prototype.draw?[{z:n,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:n+1,draw:()=>{this.drawBorder()}},{z:e,draw:r=>{this.drawLabels(r)}}]:[{z:e,draw:r=>{this.draw(r)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let s,o;for(s=0,o=e.length;s<o;++s){const l=e[s];l[n]===this.id&&(!t||l.type===t)&&r.push(l)}return r}_resolveTickFontOptions(t){return Qu(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class mS{constructor(t,e,n){this.type=t,this.scope=e,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let n;(function ffe(i){return"id"in i&&"defaults"in i})(e)&&(n=this.register(e));const r=this.items,s=t.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+t);return s in r||(r[s]=t,function hfe(i,t,e){const n=PA(Object.create(null),[e?na.get(e):{},na.get(t),i.defaults]);na.set(t,n),i.defaultRoutes&&function dfe(i,t){Object.keys(t).forEach(e=>{const n=e.split("."),r=n.pop(),s=[i].concat(n).join("."),o=t[e].split("."),l=o.pop(),u=o.join(".");na.route(s,r,u,l)})}(t,i.defaultRoutes),i.descriptors&&na.describe(t,i.descriptors)}(t,o,n),this.override&&na.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const e=this.items,n=t.id,r=this.scope;n in e&&delete e[n],r&&n in na[r]&&(delete na[r][n],this.override&&delete I0[n])}}var uv=new class pfe{constructor(){this.controllers=new mS(cv,"datasets",!0),this.elements=new mS(mm,"elements"),this.plugins=new mS(Object,"plugins"),this.scales=new mS(P0,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,n){[...e].forEach(r=>{const s=n||this._getRegistryForType(r);n||s.isForType(r)||s===this.plugins&&r.id?this._exec(t,s,r):nl(r,o=>{const l=n||this._getRegistryForType(o);this._exec(t,l,o)})})}_exec(t,e,n){const r=Q2(t);Rl(n["before"+r],[],n),e[t](n),Rl(n["after"+r],[],n)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const n=this._typedRegistries[e];if(n.isForType(t))return n}return this.plugins}_get(t,e,n){const r=e.get(t);if(void 0===r)throw new Error('"'+t+'" is not a registered '+n+".");return r}},gfe=Object.freeze({__proto__:null,BarController:Wde,BubbleController:jde,DoughnutController:ZU,LineController:qde,PolarAreaController:Xde,PieController:Yde,RadarController:Kde,ScatterController:(()=>{class i extends cv{update(e){const n=this._cachedMeta,{data:r=[]}=n,s=this.chart._animationsDisabled;let{start:o,count:l}=tU(n,r,s);if(this._drawStart=o,this._drawCount=l,nU(n)&&(o=0,l=r.length),this.options.showLine){const{dataset:u,_dataset:p}=n;u._chart=this.chart,u._datasetIndex=this.index,u._decimated=!!p._decimated,u.points=r;const v=this.resolveDatasetElementOptions(e);v.segment=this.options.segment,this.updateElement(u,void 0,{animated:!s,options:v},e)}this.updateElements(r,o,l,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=uv.getElement("line")),super.addElements()}updateElements(e,n,r,s){const o="reset"===s,{iScale:l,vScale:u,_stacked:p,_dataset:v}=this._cachedMeta,w=this.resolveDataElementOptions(n,s),I=this.getSharedOptions(w),T=this.includeOptions(s,I),k=l.axis,G=u.axis,{spanGaps:Y,segment:ce}=this.options,Se=pC(Y)?Y:Number.POSITIVE_INFINITY,Ae=this.chart._animationsDisabled||o||"none"===s;let Te=n>0&&this.getParsed(n-1);for(let Qe=n;Qe<n+r;++Qe){const mt=e[Qe],zt=this.getParsed(Qe),it=Ae?mt:{},Tt=ga(zt[G]),ln=it[k]=l.getPixelForValue(zt[k],Qe),Hn=it[G]=o||Tt?u.getBasePixel():u.getPixelForValue(p?this.applyStack(u,zt,p):zt[G],Qe);it.skip=isNaN(ln)||isNaN(Hn)||Tt,it.stop=Qe>0&&Math.abs(zt[k]-Te[k])>Se,ce&&(it.parsed=zt,it.raw=v.data[Qe]),T&&(it.options=I||this.resolveDataElementOptions(Qe,mt.active?"active":s)),Ae||this.updateElement(mt,Qe,it,s),Te=zt}this.updateSharedOptions(I,s,w)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let u=0;for(let p=n.length-1;p>=0;--p)u=Math.max(u,n[p].size(this.resolveDataElementOptions(p))/2);return u>0&&u}const r=e.dataset,s=r.options&&r.options.borderWidth||0;if(!n.length)return s;const o=n[0].size(this.resolveDataElementOptions(0)),l=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(s,o,l)/2}}return i.id="scatter",i.defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1},i.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:()=>"",label:t=>"("+t.label+", "+t.formattedValue+")"}}},scales:{x:{type:"linear"},y:{type:"linear"}}},i})()});function R0(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var mfe={_date:(()=>{class i{constructor(e){this.options=e||{}}init(e){}formats(){return R0()}parse(e,n){return R0()}format(e,n){return R0()}add(e,n,r){return R0()}diff(e,n,r){return R0()}startOf(e,n,r){return R0()}endOf(e,n){return R0()}}return i.override=function(t){Object.assign(i.prototype,t)},i})()};function vfe(i,t,e,n){const{controller:r,data:s,_sorted:o}=i,l=r._cachedMeta.iScale;if(l&&t===l.axis&&"r"!==t&&o&&s.length){const u=l._reversePixels?Que:hy;if(!n)return u(s,t,e);if(r._sharedOptions){const p=s[0],v="function"==typeof p.getRange&&p.getRange(t);if(v){const w=u(s,t,e-v),I=u(s,t,e+v);return{lo:w.lo,hi:I.hi}}}}return{lo:0,hi:s.length-1}}function qA(i,t,e,n,r){const s=i.getSortedVisibleDatasetMetas(),o=e[t];for(let l=0,u=s.length;l<u;++l){const{index:p,data:v}=s[l],{lo:w,hi:I}=vfe(s[l],t,o,r);for(let T=w;T<=I;++T){const k=v[T];k.skip||n(k,p,T)}}}function CL(i,t,e,n,r){const s=[];return!r&&!i.isPointInArea(t)||qA(i,e,t,function(l,u,p){!r&&!UA(l,i.chartArea,0)||l.inRange(t.x,t.y,n)&&s.push({element:l,datasetIndex:u,index:p})},!0),s}function wL(i,t,e,n,r,s){return s||i.isPointInArea(t)?"r"!==e||n?function bfe(i,t,e,n,r,s){let o=[];const l=function yfe(i){const t=-1!==i.indexOf("x"),e=-1!==i.indexOf("y");return function(n,r){const s=t?Math.abs(n.x-r.x):0,o=e?Math.abs(n.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}(e);let u=Number.POSITIVE_INFINITY;return qA(i,e,t,function p(v,w,I){const T=v.inRange(t.x,t.y,r);if(n&&!T)return;const k=v.getCenterPoint(r);if(!s&&!i.isPointInArea(k)&&!T)return;const Y=l(t,k);Y<u?(o=[{element:v,datasetIndex:w,index:I}],u=Y):Y===u&&o.push({element:v,datasetIndex:w,index:I})}),o}(i,t,e,n,r,s):function _fe(i,t,e,n){let r=[];return qA(i,e,t,function s(o,l,u){const{startAngle:p,endAngle:v}=o.getProps(["startAngle","endAngle"],n),{angle:w}=Y4(o,{x:t.x,y:t.y});FA(w,p,v)&&r.push({element:o,datasetIndex:l,index:u})}),r}(i,t,e,r):[]}function nH(i,t,e,n,r){const s=[],o="x"===e?"inXRange":"inYRange";let l=!1;return qA(i,e,t,(u,p,v)=>{u[o](t[e],r)&&(s.push({element:u,datasetIndex:p,index:v}),l=l||u.inRange(t.x,t.y,r))}),n&&!l?[]:s}var Cfe={evaluateInteractionItems:qA,modes:{index(i,t,e,n){const r=D0(t,i),s=e.axis||"x",o=e.includeInvisible||!1,l=e.intersect?CL(i,r,s,n,o):wL(i,r,s,!1,n,o),u=[];return l.length?(i.getSortedVisibleDatasetMetas().forEach(p=>{const v=l[0].index,w=p.data[v];w&&!w.skip&&u.push({element:w,datasetIndex:p.index,index:v})}),u):[]},dataset(i,t,e,n){const r=D0(t,i),s=e.axis||"xy",o=e.includeInvisible||!1;let l=e.intersect?CL(i,r,s,n,o):wL(i,r,s,!1,n,o);if(l.length>0){const u=l[0].datasetIndex,p=i.getDatasetMeta(u).data;l=[];for(let v=0;v<p.length;++v)l.push({element:p[v],datasetIndex:u,index:v})}return l},point:(i,t,e,n)=>CL(i,D0(t,i),e.axis||"xy",n,e.includeInvisible||!1),nearest:(i,t,e,n)=>wL(i,D0(t,i),e.axis||"xy",e.intersect,n,e.includeInvisible||!1),x:(i,t,e,n)=>nH(i,D0(t,i),"x",e.intersect,n),y:(i,t,e,n)=>nH(i,D0(t,i),"y",e.intersect,n)}};const iH=["left","top","right","bottom"];function XA(i,t){return i.filter(e=>e.pos===t)}function rH(i,t){return i.filter(e=>-1===iH.indexOf(e.pos)&&e.box.axis===t)}function YA(i,t){return i.sort((e,n)=>{const r=t?n:e,s=t?e:n;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function sH(i,t,e,n){return Math.max(i[e],t[e])+Math.max(i[n],t[n])}function oH(i,t){i.top=Math.max(i.top,t.top),i.left=Math.max(i.left,t.left),i.bottom=Math.max(i.bottom,t.bottom),i.right=Math.max(i.right,t.right)}function Sfe(i,t,e,n){const{pos:r,box:s}=e,o=i.maxPadding;if(!Jo(r)){e.size&&(i[r]-=e.size);const w=n[e.stack]||{size:0,count:1};w.size=Math.max(w.size,e.horizontal?s.height:s.width),e.size=w.size/w.count,i[r]+=e.size}s.getPadding&&oH(o,s.getPadding());const l=Math.max(0,t.outerWidth-sH(o,i,"left","right")),u=Math.max(0,t.outerHeight-sH(o,i,"top","bottom")),p=l!==i.w,v=u!==i.h;return i.w=l,i.h=u,e.horizontal?{same:p,other:v}:{same:v,other:p}}function Tfe(i,t){const e=t.maxPadding;return function n(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(t[o],e[o])}),s}(i?["left","right"]:["top","bottom"])}function KA(i,t,e,n){const r=[];let s,o,l,u,p,v;for(s=0,o=i.length,p=0;s<o;++s){l=i[s],u=l.box,u.update(l.width||t.w,l.height||t.h,Tfe(l.horizontal,t));const{same:w,other:I}=Sfe(t,e,l,n);p|=w&&r.length,v=v||I,u.fullSize||r.push(l)}return p&&KA(r,t,e,n)||v}function vS(i,t,e,n,r){i.top=e,i.left=t,i.right=t+n,i.bottom=e+r,i.width=n,i.height=r}function aH(i,t,e,n){const r=e.padding;let{x:s,y:o}=t;for(const l of i){const u=l.box,p=n[l.stack]||{count:1,placed:0,weight:1},v=l.stackWeight/p.weight||1;if(l.horizontal){const w=t.w*v,I=p.size||u.height;yg(p.start)&&(o=p.start),u.fullSize?vS(u,r.left,o,e.outerWidth-r.right-r.left,I):vS(u,t.left+p.placed,o,w,I),p.start=o,p.placed+=w,o=u.bottom}else{const w=t.h*v,I=p.size||u.width;yg(p.start)&&(s=p.start),u.fullSize?vS(u,s,r.top,I,e.outerHeight-r.bottom-r.top):vS(u,s,t.top+p.placed,I,w),p.start=s,p.placed+=w,s=u.right}}t.x=s,t.y=o}na.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var Md={addBox(i,t){i.boxes||(i.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},i.boxes.push(t)},removeBox(i,t){const e=i.boxes?i.boxes.indexOf(t):-1;-1!==e&&i.boxes.splice(e,1)},configure(i,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(i,t,e,n){if(!i)return;const r=Td(i.options.layout.padding),s=Math.max(t-r.width,0),o=Math.max(e-r.height,0),l=function Ife(i){const t=function wfe(i){const t=[];let e,n,r,s,o,l;for(e=0,n=(i||[]).length;e<n;++e)r=i[e],({position:s,options:{stack:o,stackWeight:l=1}}=r),t.push({index:e,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:l});return t}(i),e=YA(t.filter(p=>p.box.fullSize),!0),n=YA(XA(t,"left"),!0),r=YA(XA(t,"right")),s=YA(XA(t,"top"),!0),o=YA(XA(t,"bottom")),l=rH(t,"x"),u=rH(t,"y");return{fullSize:e,leftAndTop:n.concat(s),rightAndBottom:r.concat(u).concat(o).concat(l),chartArea:XA(t,"chartArea"),vertical:n.concat(r).concat(u),horizontal:s.concat(o).concat(l)}}(i.boxes),u=l.vertical,p=l.horizontal;nl(i.boxes,G=>{"function"==typeof G.beforeLayout&&G.beforeLayout()});const v=u.reduce((G,Y)=>Y.box.options&&!1===Y.box.options.display?G:G+1,0)||1,w=Object.freeze({outerWidth:t,outerHeight:e,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/v,hBoxMaxHeight:o/2}),I=Object.assign({},r);oH(I,Td(n));const T=Object.assign({maxPadding:I,w:s,h:o,x:r.left,y:r.top},r),k=function xfe(i,t){const e=function Afe(i){const t={};for(const e of i){const{stack:n,pos:r,stackWeight:s}=e;if(!n||!iH.includes(r))continue;const o=t[n]||(t[n]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return t}(i),{vBoxMaxWidth:n,hBoxMaxHeight:r}=t;let s,o,l;for(s=0,o=i.length;s<o;++s){l=i[s];const{fullSize:u}=l.box,p=e[l.stack],v=p&&l.stackWeight/p.weight;l.horizontal?(l.width=v?v*n:u&&t.availableWidth,l.height=r):(l.width=n,l.height=v?v*r:u&&t.availableHeight)}return e}(u.concat(p),w);KA(l.fullSize,T,w,k),KA(u,T,w,k),KA(p,T,w,k)&&KA(u,T,w,k),function Efe(i){const t=i.maxPadding;function e(n){const r=Math.max(t[n]-i[n],0);return i[n]+=r,r}i.y+=e("top"),i.x+=e("left"),e("right"),e("bottom")}(T),aH(l.leftAndTop,T,w,k),T.x+=T.w,T.y+=T.h,aH(l.rightAndBottom,T,w,k),i.chartArea={left:T.left,top:T.top,right:T.left+T.w,bottom:T.top+T.h,height:T.h,width:T.w},nl(l.chartArea,G=>{const Y=G.box;Object.assign(Y,i.chartArea),Y.update(T.w,T.h,{left:0,top:0,right:0,bottom:0})})}};class lH{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,n){}removeEventListener(t,e,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,n,r){return e=Math.max(0,e||t.width),n=n||t.height,{width:e,height:Math.max(0,r?Math.floor(e/r):n)}}isAttached(t){return!0}updateConfig(t){}}class Mfe extends lH{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const yS="$chartjs",Dfe={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},cH=i=>null===i||""===i,uH=!!sde&&{passive:!0};function Rfe(i,t,e){i.canvas.removeEventListener(t,e,uH)}function _S(i,t){for(const e of i)if(e===t||e.contains(t))return!0}function Ofe(i,t,e){const n=i.canvas,r=new MutationObserver(s=>{let o=!1;for(const l of s)o=o||_S(l.addedNodes,n),o=o&&!_S(l.removedNodes,n);o&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}function Ffe(i,t,e){const n=i.canvas,r=new MutationObserver(s=>{let o=!1;for(const l of s)o=o||_S(l.removedNodes,n),o=o&&!_S(l.addedNodes,n);o&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}const ZA=new Map;let hH=0;function dH(){const i=window.devicePixelRatio;i!==hH&&(hH=i,ZA.forEach((t,e)=>{e.currentDevicePixelRatio!==i&&t()}))}function zfe(i,t,e){const n=i.canvas,r=n&&mL(n);if(!r)return;const s=eU((l,u)=>{const p=r.clientWidth;e(l,u),p<r.clientWidth&&e()},window),o=new ResizeObserver(l=>{const u=l[0],p=u.contentRect.width,v=u.contentRect.height;0===p&&0===v||s(p,v)});return o.observe(r),function Nfe(i,t){ZA.size||window.addEventListener("resize",dH),ZA.set(i,t)}(i,s),o}function AL(i,t,e){e&&e.disconnect(),"resize"===t&&function Bfe(i){ZA.delete(i),ZA.size||window.removeEventListener("resize",dH)}(i)}function Vfe(i,t,e){const n=i.canvas,r=eU(s=>{null!==i.ctx&&e(function kfe(i,t){const e=Dfe[i.type]||i.type,{x:n,y:r}=D0(i,t);return{type:e,chart:t,native:i,x:void 0!==n?n:null,y:void 0!==r?r:null}}(s,i))},i,s=>{const o=s[0];return[o,o.offsetX,o.offsetY]});return function Pfe(i,t,e){i.addEventListener(t,e,uH)}(n,t,r),r}class Ufe extends lH{acquireContext(t,e){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(function Lfe(i,t){const e=i.style,n=i.getAttribute("height"),r=i.getAttribute("width");if(i[yS]={initial:{height:n,width:r,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",cH(r)){const s=TU(i,"width");void 0!==s&&(i.width=s)}if(cH(n))if(""===i.style.height)i.height=i.width/(t||2);else{const s=TU(i,"height");void 0!==s&&(i.height=s)}}(t,e),n):null}releaseContext(t){const e=t.canvas;if(!e[yS])return!1;const n=e[yS].initial;["height","width"].forEach(s=>{const o=n[s];ga(o)?e.removeAttribute(s):e.setAttribute(s,o)});const r=n.style||{};return Object.keys(r).forEach(s=>{e.style[s]=r[s]}),e.width=e.width,delete e[yS],!0}addEventListener(t,e,n){this.removeEventListener(t,e),(t.$proxies||(t.$proxies={}))[e]=({attach:Ofe,detach:Ffe,resize:zfe}[e]||Vfe)(t,e,n)}removeEventListener(t,e){const n=t.$proxies||(t.$proxies={}),r=n[e];r&&(({attach:AL,detach:AL,resize:AL}[e]||Rfe)(t,e,r),n[e]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,n,r){return function rde(i,t,e,n){const r=fS(i),s=M0(r,"margin"),o=dS(r.maxWidth,i,"clientWidth")||nS,l=dS(r.maxHeight,i,"clientHeight")||nS,u=function ide(i,t,e){let n,r;if(void 0===t||void 0===e){const s=mL(i);if(s){const o=s.getBoundingClientRect(),l=fS(s),u=M0(l,"border","width"),p=M0(l,"padding");t=o.width-p.width-u.width,e=o.height-p.height-u.height,n=dS(l.maxWidth,s,"clientWidth"),r=dS(l.maxHeight,s,"clientHeight")}else t=i.clientWidth,e=i.clientHeight}return{width:t,height:e,maxWidth:n||nS,maxHeight:r||nS}}(i,t,e);let{width:p,height:v}=u;if("content-box"===r.boxSizing){const w=M0(r,"border","width"),I=M0(r,"padding");p-=I.width+w.width,v-=I.height+w.height}return p=Math.max(0,p-s.width),v=Math.max(0,n?Math.floor(p/n):v-s.height),p=vL(Math.min(p,o,u.maxWidth)),v=vL(Math.min(v,l,u.maxHeight)),p&&!v&&(v=vL(p/2)),{width:p,height:v}}(t,e,n,r)}isAttached(t){const e=mL(t);return!(!e||!e.isConnected)}}class Gfe{constructor(){this._init=[]}notify(t,e,n,r){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const s=r?this._descriptors(t).filter(r):this._descriptors(t),o=this._notify(s,t,e,n);return"afterDestroy"===e&&(this._notify(s,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,e,n,r){r=r||{};for(const s of t){const o=s.plugin;if(!1===Rl(o[n],[e,r,s.options],o)&&r.cancelable)return!1}return!0}invalidate(){ga(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const n=t&&t.config,r=mo(n.options&&n.options.plugins,{}),s=function Wfe(i){const t={},e=[],n=Object.keys(uv.plugins.items);for(let s=0;s<n.length;s++)e.push(uv.getPlugin(n[s]));const r=i.plugins||[];for(let s=0;s<r.length;s++){const o=r[s];-1===e.indexOf(o)&&(e.push(o),t[o.id]=!0)}return{plugins:e,localIds:t}}(n);return!1!==r||e?function $fe(i,{plugins:t,localIds:e},n,r){const s=[],o=i.getContext();for(const l of t){const u=l.id,p=jfe(n[u],r);null!==p&&s.push({plugin:l,options:qfe(i.config,{plugin:l,local:e[u]},p,o)})}return s}(t,s,r,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],n=this._cache,r=(s,o)=>s.filter(l=>!o.some(u=>l.plugin.id===u.plugin.id));this._notify(r(e,n),t,"stop"),this._notify(r(n,e),t,"start")}}function jfe(i,t){return t||!1!==i?!0===i?{}:i:null}function qfe(i,{plugin:t,local:e},n,r){const s=i.pluginScopeKeys(t),o=i.getOptionScopes(n,s);return e&&t.defaults&&o.push(t.defaults),i.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function xL(i,t){return((t.datasets||{})[i]||{}).indexAxis||t.indexAxis||(na.datasets[i]||{}).indexAxis||"x"}function IL(i,t){return"x"===i||"y"===i?i:t.axis||function Kfe(i){return"top"===i||"bottom"===i?"x":"left"===i||"right"===i?"y":void 0}(t.position)||i.charAt(0).toLowerCase()}function fH(i){const t=i.options||(i.options={});t.plugins=mo(t.plugins,{}),t.scales=function Zfe(i,t){const e=I0[i.type]||{scales:{}},n=t.scales||{},r=xL(i.type,t),s=Object.create(null),o=Object.create(null);return Object.keys(n).forEach(l=>{const u=n[l];if(!Jo(u))return console.error(`Invalid scale configuration for scale: ${l}`);if(u._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${l}`);const p=IL(l,u),v=function Yfe(i,t){return i===t?"_index_":"_value_"}(p,r),w=e.scales||{};s[p]=s[p]||l,o[l]=RA(Object.create(null),[{axis:p},u,w[p],w[v]])}),i.data.datasets.forEach(l=>{const u=l.type||i.type,p=l.indexAxis||xL(u,t),w=(I0[u]||{}).scales||{};Object.keys(w).forEach(I=>{const T=function Xfe(i,t){let e=i;return"_index_"===i?e=t:"_value_"===i&&(e="x"===t?"y":"x"),e}(I,p),k=l[T+"AxisID"]||s[T]||T;o[k]=o[k]||Object.create(null),RA(o[k],[{axis:T},n[k],w[I]])})}),Object.keys(o).forEach(l=>{const u=o[l];RA(u,[na.scales[u.type],na.scale])}),o}(i,t)}function pH(i){return(i=i||{}).datasets=i.datasets||[],i.labels=i.labels||[],i}const gH=new Map,mH=new Set;function bS(i,t){let e=gH.get(i);return e||(e=t(),gH.set(i,e),mH.add(e)),e}const QA=(i,t,e)=>{const n=u_(t,e);void 0!==n&&i.add(n)};class Jfe{constructor(t){this._config=function Qfe(i){return(i=i||{}).data=pH(i.data),fH(i),i}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=pH(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),fH(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return bS(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return bS(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return bS(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id;return bS(`${this.type}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const n=this._scopeCache;let r=n.get(t);return(!r||e)&&(r=new Map,n.set(t,r)),r}getOptionScopes(t,e,n){const{options:r,type:s}=this,o=this._cachedScopes(t,n),l=o.get(e);if(l)return l;const u=new Set;e.forEach(v=>{t&&(u.add(t),v.forEach(w=>QA(u,t,w))),v.forEach(w=>QA(u,r,w)),v.forEach(w=>QA(u,I0[s]||{},w)),v.forEach(w=>QA(u,na,w)),v.forEach(w=>QA(u,cL,w))});const p=Array.from(u);return 0===p.length&&p.push(Object.create(null)),mH.has(e)&&o.set(e,p),p}chartOptionScopes(){const{options:t,type:e}=this;return[t,I0[e]||{},na.datasets[e]||{},{type:e},na,cL]}resolveNamedOptions(t,e,n,r=[""]){const s={$shared:!0},{resolver:o,subPrefixes:l}=vH(this._resolverCache,t,r);let u=o;(function tpe(i,t){const{isScriptable:e,isIndexable:n}=yU(i);for(const r of t){const s=e(r),o=n(r),l=(o||s)&&i[r];if(s&&(h_(l)||epe(l))||o&&Pl(l))return!0}return!1})(o,e)&&(s.$shared=!1,u=mC(o,n=h_(n)?n():n,this.createResolver(t,n,l)));for(const p of e)s[p]=u[p];return s}createResolver(t,e,n=[""],r){const{resolver:s}=vH(this._resolverCache,t,n);return Jo(e)?mC(s,e,void 0,r):s}}function vH(i,t,e){let n=i.get(t);n||(n=new Map,i.set(t,n));const r=e.join();let s=n.get(r);return s||(s={resolver:fL(t,e),subPrefixes:e.filter(l=>!l.toLowerCase().includes("hover"))},n.set(r,s)),s}const epe=i=>Jo(i)&&Object.getOwnPropertyNames(i).reduce((t,e)=>t||h_(i[e]),!1),ipe=["top","bottom","left","right","chartArea"];function yH(i,t){return"top"===i||"bottom"===i||-1===ipe.indexOf(i)&&"x"===t}function _H(i,t){return function(e,n){return e[i]===n[i]?e[t]-n[t]:e[i]-n[i]}}function bH(i){const t=i.chart,e=t.options.animation;t.notifyPlugins("afterRender"),Rl(e&&e.onComplete,[i],t)}function rpe(i){const t=i.chart,e=t.options.animation;Rl(e&&e.onProgress,[i],t)}function CH(i){return SU()&&"string"==typeof i?i=document.getElementById(i):i&&i.length&&(i=i[0]),i&&i.canvas&&(i=i.canvas),i}const CS={},wH=i=>{const t=CH(i);return Object.values(CS).filter(e=>e.canvas===t).pop()};function spe(i,t,e){const n=Object.keys(i);for(const r of n){const s=+r;if(s>=t){const o=i[r];delete i[r],(e>0||s>t)&&(i[s+e]=o)}}}class wS{constructor(t,e){const n=this.config=new Jfe(e),r=CH(t),s=wH(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function Hfe(i){return!SU()||typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas?Mfe:Ufe}(r)),this.platform.updateConfig(n);const l=this.platform.acquireContext(r,o.aspectRatio),u=l&&l.canvas,p=u&&u.height,v=u&&u.width;this.id=zue(),this.ctx=l,this.canvas=u,this.width=v,this.height=p,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Gfe,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function the(i,t){let e;return function(...n){return t?(clearTimeout(e),e=setTimeout(i,t,n)):i.apply(this,n),t}}(w=>this.update(w),o.resizeDelay||0),this._dataChanges=[],CS[this.id]=this,l&&u?(fy.listen(this,"complete",bH),fy.listen(this,"progress",rpe),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:n,height:r,_aspectRatio:s}=this;return ga(t)?e&&s?s:r?n/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():EU(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return gU(this.canvas,this.ctx),this}stop(){return fy.stop(this),this}resize(t,e){fy.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const n=this.options,o=this.platform.getMaximumSize(this.canvas,t,e,n.maintainAspectRatio&&this.aspectRatio),l=n.devicePixelRatio||this.platform.getDevicePixelRatio(),u=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,EU(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),Rl(n.onResize,[this,o],this),this.attached&&this._doResize(u)&&this.render())}ensureScalesHaveIDs(){nl(this.options.scales||{},(n,r)=>{n.id=r})}buildOrUpdateScales(){const t=this.options,e=t.scales,n=this.scales,r=Object.keys(n).reduce((o,l)=>(o[l]=!1,o),{});let s=[];e&&(s=s.concat(Object.keys(e).map(o=>{const l=e[o],u=IL(o,l),p="r"===u,v="x"===u;return{options:l,dposition:p?"chartArea":v?"bottom":"left",dtype:p?"radialLinear":v?"category":"linear"}}))),nl(s,o=>{const l=o.options,u=l.id,p=IL(u,l),v=mo(l.type,o.dtype);(void 0===l.position||yH(l.position,p)!==yH(o.dposition))&&(l.position=o.dposition),r[u]=!0;let w=null;u in n&&n[u].type===v?w=n[u]:(w=new(uv.getScale(v))({id:u,type:v,ctx:this.ctx,chart:this}),n[w.id]=w),w.init(l,t)}),nl(r,(o,l)=>{o||delete n[l]}),nl(n,o=>{Md.configure(this,o,o.options),Md.addBox(this,o)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,n=t.length;if(t.sort((r,s)=>r.index-s.index),n>e){for(let r=e;r<n;++r)this._destroyDatasetMeta(r);t.splice(e,n-e)}this._sortedMetasets=t.slice(0).sort(_H("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((n,r)=>{0===e.filter(s=>s===n._dataset).length&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=e.length;n<r;n++){const s=e[n];let o=this.getDatasetMeta(n);const l=s.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(n),o=this.getDatasetMeta(n)),o.type=l,o.indexAxis=s.indexAxis||xL(l,this.options),o.order=s.order||0,o.index=n,o.label=""+s.label,o.visible=this.isDatasetVisible(n),o.controller)o.controller.updateIndex(n),o.controller.linkScales();else{const u=uv.getController(l),{datasetElementType:p,dataElementType:v}=na.datasets[l];Object.assign(u.prototype,{dataElementType:uv.getElement(v),datasetElementType:p&&uv.getElement(p)}),o.controller=new u(this,n),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){nl(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const n=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let p=0,v=this.data.datasets.length;p<v;p++){const{controller:w}=this.getDatasetMeta(p),I=!r&&-1===s.indexOf(w);w.buildOrUpdateElements(I),o=Math.max(+w.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),r||nl(s,p=>{p.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(_H("z","_idx"));const{_active:l,_lastEvent:u}=this;u?this._eventHandler(u,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){nl(this.scales,t=>{Md.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),n=new Set(t.events);(!W4(e,n)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:s}of e)spe(t,r,"_removeElements"===n?-s:s)}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,n=s=>new Set(t.filter(o=>o[0]===s).map((o,l)=>l+","+o.splice(1).join(","))),r=n(0);for(let s=1;s<e;s++)if(!W4(r,n(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Md.update(this,this.width,this.height,t);const e=this.chartArea,n=e.width<=0||e.height<=0;this._layers=[],nl(this.boxes,r=>{n&&"chartArea"===r.position||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let e=0,n=this.data.datasets.length;e<n;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,n=this.data.datasets.length;e<n;++e)this._updateDataset(e,h_(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const n=this.getDatasetMeta(t),r={meta:n,index:t,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(n.controller._update(e),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(fy.has(this)?this.attached&&!fy.running(this)&&fy.start(this):(this.draw(),bH({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:n,height:r}=this._resizeBeforeDraw;this._resize(n,r),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,n=[];let r,s;for(r=0,s=e.length;r<s;++r){const o=e[r];(!t||o.visible)&&n.push(o)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,n=t._clip,r=!n.disabled,s=this.chartArea,o={meta:t,index:t.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",o)&&(r&&cS(e,{left:!1===n.left?0:s.left-n.left,right:!1===n.right?this.width:s.right+n.right,top:!1===n.top?0:s.top-n.top,bottom:!1===n.bottom?this.height:s.bottom+n.bottom}),t.controller.draw(),r&&uS(e),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(t){return UA(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,n,r){const s=Cfe.modes[e];return"function"==typeof s?s(this,t,n,r):[]}getDatasetMeta(t){const e=this.data.datasets[t],n=this._metasets;let r=n.filter(s=>s&&s._dataset===e).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=p_(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const n=this.getDatasetMeta(t);return"boolean"==typeof n.hidden?!n.hidden:!e.hidden}setDatasetVisibility(t,e){this.getDatasetMeta(t).hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,n){const r=n?"show":"hide",s=this.getDatasetMeta(t),o=s.controller._resolveAnimations(void 0,r);yg(e)?(s.data[e].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),o.update(s,{visible:n}),this.update(l=>l.datasetIndex===t?r:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),fy.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),gU(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete CS[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,n=(s,o)=>{e.addEventListener(this,s,o),t[s]=o},r=(s,o,l)=>{s.offsetX=o,s.offsetY=l,this._eventHandler(s)};nl(this.options.events,s=>n(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,n=(u,p)=>{e.addEventListener(this,u,p),t[u]=p},r=(u,p)=>{t[u]&&(e.removeEventListener(this,u,p),delete t[u])},s=(u,p)=>{this.canvas&&this.resize(u,p)};let o;const l=()=>{r("attach",l),this.attached=!0,this.resize(),n("resize",s),n("detach",o)};o=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),n("attach",l)},e.isAttached(this.canvas)?l():o()}unbindEvents(){nl(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},nl(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,n){const r=n?"set":"remove";let s,o,l,u;for("dataset"===e&&(s=this.getDatasetMeta(t[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),l=0,u=t.length;l<u;++l){o=t[l];const p=o&&this.getDatasetMeta(o.datasetIndex).controller;p&&p[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],n=t.map(({datasetIndex:s,index:o})=>{const l=this.getDatasetMeta(s);if(!l)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:l.data[o],index:o}});!eS(n,e)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,e))}notifyPlugins(t,e,n){return this._plugins.notify(this,t,e,n)}_updateHoverStyles(t,e,n){const r=this.options.hover,s=(u,p)=>u.filter(v=>!p.some(w=>v.datasetIndex===w.datasetIndex&&v.index===w.index)),o=s(e,t),l=n?t:s(t,e);o.length&&this.updateHoverStyle(o,r.mode,!1),l.length&&r.mode&&this.updateHoverStyle(l,r.mode,!0)}_eventHandler(t,e){const n={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},r=o=>(o.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",n,r))return;const s=this._handleEvent(t,e,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(s||n.changed)&&this.render(),this}_handleEvent(t,e,n){const{_active:r=[],options:s}=this,l=this._getActiveElements(t,r,n,e),u=function jue(i){return"mouseup"===i.type||"click"===i.type||"contextmenu"===i.type}(t),p=function ope(i,t,e,n){return e&&"mouseout"!==i.type?n?t:i:null}(t,this._lastEvent,n,u);n&&(this._lastEvent=null,Rl(s.onHover,[t,l,this],this),u&&Rl(s.onClick,[t,l,this],this));const v=!eS(l,r);return(v||e)&&(this._active=l,this._updateHoverStyles(l,r,e)),this._lastEvent=p,v}_getActiveElements(t,e,n,r){if("mouseout"===t.type)return[];if(!n)return e;const s=this.options.hover;return this.getElementsAtEventForMode(t,s.mode,s,r)}}const AH=()=>nl(wS.instances,i=>i._plugins.invalidate()),g_=!0;function xH(i,t,e){const{startAngle:n,pixelMargin:r,x:s,y:o,outerRadius:l,innerRadius:u}=t;let p=r/l;i.beginPath(),i.arc(s,o,l,n-p,e+p),u>r?(p=r/u,i.arc(s,o,u,e+p,n-p,!0)):i.arc(s,o,r,e+Yc,n-Yc),i.closePath(),i.clip()}function _C(i,t,e,n){return{x:e+i*Math.cos(t),y:n+i*Math.sin(t)}}function SL(i,t,e,n,r,s){const{x:o,y:l,startAngle:u,pixelMargin:p,innerRadius:v}=t,w=Math.max(t.outerRadius+n+e-p,0),I=v>0?v+n+e+p:0;let T=0;const k=r-u;if(n){const Gn=((v>0?v-n:0)+(w>0?w-n:0))/2;T=(k-(0!==Gn?k*Gn/(Gn+n):k))/2}const Y=(k-Math.max(.001,k*w-e/oc)/w)/2,ce=u+Y+T,Se=r-Y-T,{outerStart:Ae,outerEnd:Te,innerStart:Qe,innerEnd:mt}=function lpe(i,t,e,n){const r=function ape(i){return dL(i,["outerStart","outerEnd","innerStart","innerEnd"])}(i.options.borderRadius),s=(e-t)/2,o=Math.min(s,n*t/2),l=u=>{const p=(e-Math.min(s,u))*n/2;return Ch(u,0,Math.min(s,p))};return{outerStart:l(r.outerStart),outerEnd:l(r.outerEnd),innerStart:Ch(r.innerStart,0,o),innerEnd:Ch(r.innerEnd,0,o)}}(t,I,w,Se-ce),zt=w-Ae,it=w-Te,Tt=ce+Ae/zt,ln=Se-Te/it,Hn=I+Qe,ei=I+mt,Wn=ce+Qe/Hn,En=Se-mt/ei;if(i.beginPath(),s){if(i.arc(o,l,w,Tt,ln),Te>0){const Gn=_C(it,ln,o,l);i.arc(Gn.x,Gn.y,Te,ln,Se+Yc)}const zn=_C(ei,Se,o,l);if(i.lineTo(zn.x,zn.y),mt>0){const Gn=_C(ei,En,o,l);i.arc(Gn.x,Gn.y,mt,Se+Yc,En+Math.PI)}if(i.arc(o,l,I,Se-mt/I,ce+Qe/I,!0),Qe>0){const Gn=_C(Hn,Wn,o,l);i.arc(Gn.x,Gn.y,Qe,Wn+Math.PI,ce-Yc)}const xn=_C(zt,ce,o,l);if(i.lineTo(xn.x,xn.y),Ae>0){const Gn=_C(zt,Tt,o,l);i.arc(Gn.x,Gn.y,Ae,ce-Yc,Tt)}}else{i.moveTo(o,l);const zn=Math.cos(Tt)*w+o,xn=Math.sin(Tt)*w+l;i.lineTo(zn,xn);const Gn=Math.cos(ln)*w+o,Nn=Math.sin(ln)*w+l;i.lineTo(Gn,Nn)}i.closePath()}Object.defineProperties(wS,{defaults:{enumerable:g_,value:na},instances:{enumerable:g_,value:CS},overrides:{enumerable:g_,value:I0},registry:{enumerable:g_,value:uv},version:{enumerable:g_,value:"3.9.1"},getChart:{enumerable:g_,value:wH},register:{enumerable:g_,value:(...i)=>{uv.add(...i),AH()}},unregister:{enumerable:g_,value:(...i)=>{uv.remove(...i),AH()}}});class AS extends mm{constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,n){const r=this.getProps(["x","y"],n),{angle:s,distance:o}=Y4(r,{x:t,y:e}),{startAngle:l,endAngle:u,innerRadius:p,outerRadius:v,circumference:w}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),I=this.options.spacing/2,k=mo(w,u-l)>=dl||FA(s,l,u),G=uy(o,p+I,v+I);return k&&G}getCenterPoint(t){const{x:e,y:n,startAngle:r,endAngle:s,innerRadius:o,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],t),{offset:u,spacing:p}=this.options,v=(r+s)/2,w=(o+l+p+u)/2;return{x:e+Math.cos(v)*w,y:n+Math.sin(v)*w}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:n}=this,r=(e.offset||0)/2,s=(e.spacing||0)/2,o=e.circular;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=n>dl?Math.floor(n/dl):0,0===n||this.innerRadius<0||this.outerRadius<0)return;t.save();let l=0;if(r){l=r/2;const p=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(p)*l,Math.sin(p)*l),this.circumference>=oc&&(l=r)}t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor;const u=function cpe(i,t,e,n,r){const{fullCircles:s,startAngle:o,circumference:l}=t;let u=t.endAngle;if(s){SL(i,t,e,n,o+dl,r);for(let p=0;p<s;++p)i.fill();isNaN(l)||(u=o+l%dl,l%dl==0&&(u+=dl))}return SL(i,t,e,n,u,r),i.fill(),u}(t,this,l,s,o);(function hpe(i,t,e,n,r,s){const{options:o}=t,{borderWidth:l,borderJoinStyle:u}=o,p="inner"===o.borderAlign;!l||(p?(i.lineWidth=2*l,i.lineJoin=u||"round"):(i.lineWidth=l,i.lineJoin=u||"bevel"),t.fullCircles&&function upe(i,t,e){const{x:n,y:r,startAngle:s,pixelMargin:o,fullCircles:l}=t,u=Math.max(t.outerRadius-o,0),p=t.innerRadius+o;let v;for(e&&xH(i,t,s+dl),i.beginPath(),i.arc(n,r,p,s+dl,s,!0),v=0;v<l;++v)i.stroke();for(i.beginPath(),i.arc(n,r,u,s,s+dl),v=0;v<l;++v)i.stroke()}(i,t,p),p&&xH(i,t,r),SL(i,t,e,n,r,s),i.stroke())})(t,this,l,s,u,o),t.restore()}}function IH(i,t,e=t){i.lineCap=mo(e.borderCapStyle,t.borderCapStyle),i.setLineDash(mo(e.borderDash,t.borderDash)),i.lineDashOffset=mo(e.borderDashOffset,t.borderDashOffset),i.lineJoin=mo(e.borderJoinStyle,t.borderJoinStyle),i.lineWidth=mo(e.borderWidth,t.borderWidth),i.strokeStyle=mo(e.borderColor,t.borderColor)}function dpe(i,t,e){i.lineTo(e.x,e.y)}function SH(i,t,e={}){const n=i.length,{start:r=0,end:s=n-1}=e,{start:o,end:l}=t,u=Math.max(r,o),p=Math.min(s,l);return{count:n,start:u,loop:t.loop,ilen:p<u&&!(r<o&&s<o||r>l&&s>l)?n+p-u:p-u}}function ppe(i,t,e,n){const{points:r,options:s}=t,{count:o,start:l,loop:u,ilen:p}=SH(r,e,n),v=function fpe(i){return i.stepped?The:i.tension||"monotone"===i.cubicInterpolationMode?Mhe:dpe}(s);let T,k,G,{move:w=!0,reverse:I}=n||{};for(T=0;T<=p;++T)k=r[(l+(I?p-T:T))%o],!k.skip&&(w?(i.moveTo(k.x,k.y),w=!1):v(i,G,k,I,s.stepped),G=k);return u&&(k=r[(l+(I?p:0))%o],v(i,G,k,I,s.stepped)),!!u}function gpe(i,t,e,n){const r=t.points,{count:s,start:o,ilen:l}=SH(r,e,n),{move:u=!0,reverse:p}=n||{};let I,T,k,G,Y,ce,v=0,w=0;const Se=Te=>(o+(p?l-Te:Te))%s,Ae=()=>{G!==Y&&(i.lineTo(v,Y),i.lineTo(v,G),i.lineTo(v,ce))};for(u&&(T=r[Se(0)],i.moveTo(T.x,T.y)),I=0;I<=l;++I){if(T=r[Se(I)],T.skip)continue;const Te=T.x,Qe=T.y,mt=0|Te;mt===k?(Qe<G?G=Qe:Qe>Y&&(Y=Qe),v=(w*v+Te)/++w):(Ae(),i.lineTo(Te,Qe),k=mt,w=0,G=Y=Qe),ce=Qe}Ae()}function EL(i){const t=i.options;return i._decimated||i._loop||t.tension||"monotone"===t.cubicInterpolationMode||t.stepped||t.borderDash&&t.borderDash.length?ppe:gpe}AS.id="arc",AS.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0},AS.defaultRoutes={backgroundColor:"backgroundColor"};const _pe="function"==typeof Path2D;let xS=(()=>{class i extends mm{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;!r.tension&&"monotone"!==r.cubicInterpolationMode||r.stepped||this._pointsUpdated||(Qhe(this._points,r,e,r.spanGaps?this._loop:this._fullLoop,n),this._pointsUpdated=!0)}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function pde(i,t){const e=i.points,n=i.options.spanGaps,r=e.length;if(!r)return[];const s=!!i._loop,{start:o,end:l}=function dde(i,t,e,n){let r=0,s=t-1;if(e&&!n)for(;r<t&&!i[r].skip;)r++;for(;r<t&&i[r].skip;)r++;for(r%=t,e&&(s+=r);s>r&&i[s%t].skip;)s--;return s%=t,{start:r,end:s}}(e,r,s,n);return function FU(i,t,e,n){return n&&n.setContext&&e?function gde(i,t,e,n){const r=i._chart.getContext(),s=NU(i.options),{_datasetIndex:o,options:{spanGaps:l}}=i,u=e.length,p=[];let v=s,w=t[0].start,I=w;function T(k,G,Y,ce){const Se=l?-1:1;if(k!==G){for(k+=u;e[k%u].skip;)k-=Se;for(;e[G%u].skip;)G+=Se;k%u!=G%u&&(p.push({start:k%u,end:G%u,loop:Y,style:ce}),v=ce,w=G%u)}}for(const k of t){w=l?w:k.start;let Y,G=e[w%u];for(I=w+1;I<=k.end;I++){const ce=e[I%u];Y=NU(n.setContext(p_(r,{type:"segment",p0:G,p1:ce,p0DataIndex:(I-1)%u,p1DataIndex:I%u,datasetIndex:o}))),mde(Y,v)&&T(w,I-1,k.loop,v),G=ce,v=Y}w<I-1&&T(w,I-1,k.loop,v)}return p}(i,t,e,n):t}(i,!0===n?[{start:o,end:l,loop:s}]:function fde(i,t,e,n){const r=i.length,s=[];let u,o=t,l=i[t];for(u=t+1;u<=e;++u){const p=i[u%r];p.skip||p.stop?l.skip||(s.push({start:t%r,end:(u-1)%r,loop:n=!1}),t=o=p.stop?u:null):(o=u,l.skip&&(t=u)),l=p}return null!==o&&s.push({start:t%r,end:o%r,loop:n}),s}(e,o,l<o?l+r:l,!!i._fullLoop&&0===o&&l===r-1),e,t)}(this,this.options.segment))}first(){const e=this.segments;return e.length&&this.points[e[0].start]}last(){const e=this.segments,r=e.length;return r&&this.points[e[r-1].end]}interpolate(e,n){const r=this.options,s=e[n],o=this.points,l=OU(this,{property:n,start:s,end:s});if(!l.length)return;const u=[],p=function mpe(i){return i.stepped?ode:i.tension||"monotone"===i.cubicInterpolationMode?ade:L0}(r);let v,w;for(v=0,w=l.length;v<w;++v){const{start:I,end:T}=l[v],k=o[I],G=o[T];if(k===G){u.push(k);continue}const ce=p(k,G,Math.abs((s-k[n])/(G[n]-k[n])),r.stepped);ce[n]=e[n],u.push(ce)}return 1===u.length?u[0]:u}pathSegment(e,n,r){return EL(this)(e,this,n,r)}path(e,n,r){const s=this.segments,o=EL(this);let l=this._loop;n=n||0,r=r||this.points.length-n;for(const u of s)l&=o(e,this,u,{start:n,end:n+r-1});return!!l}draw(e,n,r,s){(this.points||[]).length&&(this.options||{}).borderWidth&&(e.save(),function bpe(i,t,e,n){_pe&&!t.options.segment?function vpe(i,t,e,n){let r=t._path;r||(r=t._path=new Path2D,t.path(r,e,n)&&r.closePath()),IH(i,t.options),i.stroke(r)}(i,t,e,n):function ype(i,t,e,n){const{segments:r,options:s}=t,o=EL(t);for(const l of r)IH(i,s,l.style),i.beginPath(),o(i,t,l,{start:e,end:e+n-1})&&i.closePath(),i.stroke()}(i,t,e,n)}(e,this,r,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return i.id="line",i.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},i.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},i.descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t},i})();function EH(i,t,e,n){const r=i.options,{[e]:s}=i.getProps([e],n);return Math.abs(t-s)<r.radius+r.hitRadius}let Cpe=(()=>{class i extends mm{constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,n,r){const s=this.options,{x:o,y:l}=this.getProps(["x","y"],r);return Math.pow(e-o,2)+Math.pow(n-l,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(e,n){return EH(this,e,"x",n)}inYRange(e,n){return EH(this,e,"y",n)}getCenterPoint(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}size(e){let n=(e=e||this.options||{}).radius||0;return n=Math.max(n,n&&e.hoverRadius||0),2*(n+(n&&e.borderWidth||0))}draw(e,n){const r=this.options;this.skip||r.radius<.1||!UA(this,n,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,hL(e,r,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}return i.id="point",i.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},i.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},i})();function TH(i,t){const{x:e,y:n,base:r,width:s,height:o}=i.getProps(["x","y","base","width","height"],t);let l,u,p,v,w;return i.horizontal?(w=o/2,l=Math.min(e,r),u=Math.max(e,r),p=n-w,v=n+w):(w=s/2,l=e-w,u=e+w,p=Math.min(n,r),v=Math.max(n,r)),{left:l,top:p,right:u,bottom:v}}function m_(i,t,e,n){return i?0:Ch(t,e,n)}function TL(i,t,e,n){const r=null===t,s=null===e,l=i&&!(r&&s)&&TH(i,n);return l&&(r||uy(t,l.left,l.right))&&(s||uy(e,l.top,l.bottom))}function Spe(i,t){i.rect(t.x,t.y,t.w,t.h)}function ML(i,t,e={}){const n=i.x!==e.x?-t:0,r=i.y!==e.y?-t:0;return{x:i.x+n,y:i.y+r,w:i.w+((i.x+i.w!==e.x+e.w?t:0)-n),h:i.h+((i.y+i.h!==e.y+e.h?t:0)-r),radius:i.radius}}class IS extends mm{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:n,backgroundColor:r}}=this,{inner:s,outer:o}=function xpe(i){const t=TH(i),e=t.right-t.left,n=t.bottom-t.top,r=function wpe(i,t,e){const r=i.borderSkipped,s=vU(i.options.borderWidth);return{t:m_(r.top,s.top,0,e),r:m_(r.right,s.right,0,t),b:m_(r.bottom,s.bottom,0,e),l:m_(r.left,s.left,0,t)}}(i,e/2,n/2),s=function Ape(i,t,e){const{enableBorderRadius:n}=i.getProps(["enableBorderRadius"]),r=i.options.borderRadius,s=T0(r),o=Math.min(t,e),l=i.borderSkipped,u=n||Jo(r);return{topLeft:m_(!u||l.top||l.left,s.topLeft,0,o),topRight:m_(!u||l.top||l.right,s.topRight,0,o),bottomLeft:m_(!u||l.bottom||l.left,s.bottomLeft,0,o),bottomRight:m_(!u||l.bottom||l.right,s.bottomRight,0,o)}}(i,e/2,n/2);return{outer:{x:t.left,y:t.top,w:e,h:n,radius:s},inner:{x:t.left+r.l,y:t.top+r.t,w:e-r.l-r.r,h:n-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}(this),l=function Ipe(i){return i.topLeft||i.topRight||i.bottomLeft||i.bottomRight}(o.radius)?HA:Spe;t.save(),(o.w!==s.w||o.h!==s.h)&&(t.beginPath(),l(t,ML(o,e,s)),t.clip(),l(t,ML(s,-e,o)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),l(t,ML(s,e)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,e,n){return TL(this,t,e,n)}inXRange(t,e){return TL(this,t,null,e)}inYRange(t,e){return TL(this,null,t,e)}getCenterPoint(t){const{x:e,y:n,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],t);return{x:s?(e+r)/2:e,y:s?n:(n+r)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}}IS.id="bar",IS.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},IS.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var Epe=Object.freeze({__proto__:null,ArcElement:AS,LineElement:xS,PointElement:Cpe,BarElement:IS});function MH(i){if(i._decimated){const t=i._data;delete i._decimated,delete i._data,Object.defineProperty(i,"data",{value:t})}}function DH(i){i.data.datasets.forEach(t=>{MH(t)})}var Lpe={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(i,t,e)=>{if(!e.enabled)return void DH(i);const n=i.width;i.data.datasets.forEach((r,s)=>{const{_data:o,indexAxis:l}=r,u=i.getDatasetMeta(s),p=o||r.data;if("y"===GA([l,i.options.indexAxis])||!u.controller.supportsDecimation)return;const v=i.scales[u.xAxisID];if("linear"!==v.type&&"time"!==v.type||i.options.parsing)return;let k,{start:w,count:I}=function Dpe(i,t){const e=t.length;let r,n=0;const{iScale:s}=i,{min:o,max:l,minDefined:u,maxDefined:p}=s.getUserBounds();return u&&(n=Ch(hy(t,s.axis,o).lo,0,e-1)),r=p?Ch(hy(t,s.axis,l).hi+1,n,e)-n:e-n,{start:n,count:r}}(u,p);if(I<=(e.threshold||4*n))MH(r);else{switch(ga(o)&&(r._data=p,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(G){this._data=G}})),e.algorithm){case"lttb":k=function Tpe(i,t,e,n,r){const s=r.samples||n;if(s>=e)return i.slice(t,t+e);const o=[],l=(e-2)/(s-2);let u=0;const p=t+e-1;let w,I,T,k,G,v=t;for(o[u++]=i[v],w=0;w<s-2;w++){let Se,Y=0,ce=0;const Ae=Math.floor((w+1)*l)+1+t,Te=Math.min(Math.floor((w+2)*l)+1,e)+t,Qe=Te-Ae;for(Se=Ae;Se<Te;Se++)Y+=i[Se].x,ce+=i[Se].y;Y/=Qe,ce/=Qe;const mt=Math.floor(w*l)+1+t,zt=Math.min(Math.floor((w+1)*l)+1,e)+t,{x:it,y:Tt}=i[v];for(T=k=-1,Se=mt;Se<zt;Se++)k=.5*Math.abs((it-Y)*(i[Se].y-Tt)-(it-i[Se].x)*(ce-Tt)),k>T&&(T=k,I=i[Se],G=Se);o[u++]=I,v=G}return o[u++]=i[p],o}(p,w,I,n,e);break;case"min-max":k=function Mpe(i,t,e,n){let o,l,u,p,v,w,I,T,k,G,r=0,s=0;const Y=[],Se=i[t].x,Te=i[t+e-1].x-Se;for(o=t;o<t+e;++o){l=i[o],u=(l.x-Se)/Te*n,p=l.y;const Qe=0|u;if(Qe===v)p<k?(k=p,w=o):p>G&&(G=p,I=o),r=(s*r+l.x)/++s;else{const mt=o-1;if(!ga(w)&&!ga(I)){const zt=Math.min(w,I),it=Math.max(w,I);zt!==T&&zt!==mt&&Y.push({...i[zt],x:r}),it!==T&&it!==mt&&Y.push({...i[it],x:r})}o>0&&mt!==T&&Y.push(i[mt]),Y.push(l),v=Qe,s=0,k=G=p,w=I=T=o}}return Y}(p,w,I,n);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}r._decimated=k}})},destroy(i){DH(i)}};function DL(i,t,e,n){if(n)return;let r=t[i],s=e[i];return"angle"===i&&(r=Lp(r),s=Lp(s)),{property:i,start:r,end:s}}function LL(i,t,e){for(;t>i;t--){const n=e[t];if(!isNaN(n.x)&&!isNaN(n.y))break}return t}function LH(i,t,e,n){return i&&t?n(i[e],t[e]):i?i[e]:t?t[e]:0}function PH(i,t){let e=[],n=!1;return Pl(i)?(n=!0,e=i):e=function Rpe(i,t){const{x:e=null,y:n=null}=i||{},r=t.points,s=[];return t.segments.forEach(({start:o,end:l})=>{l=LL(o,l,r);const u=r[o],p=r[l];null!==n?(s.push({x:u.x,y:n}),s.push({x:p.x,y:n})):null!==e&&(s.push({x:e,y:u.y}),s.push({x:e,y:p.y}))}),s}(i,t),e.length?new xS({points:e,options:{tension:0},_loop:n,_fullLoop:n}):null}function RH(i){return i&&!1!==i.fill}function kpe(i,t,e){let r=i[t].fill;const s=[t];let o;if(!e)return r;for(;!1!==r&&-1===s.indexOf(r);){if(!au(r))return r;if(o=i[r],!o)return!1;if(o.visible)return r;s.push(r),r=o.fill}return!1}function Ope(i,t,e){const n=function zpe(i){const t=i.options,e=t.fill;let n=mo(e&&e.target,e);return void 0===n&&(n=!!t.backgroundColor),!1!==n&&null!==n&&(!0===n?"origin":n)}(i);if(Jo(n))return!isNaN(n.value)&&n;let r=parseFloat(n);return au(r)&&Math.floor(r)===r?function Fpe(i,t,e,n){return("-"===i||"+"===i)&&(e=t+e),!(e===t||e<0||e>=n)&&e}(n[0],t,r,e):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function Hpe(i,t,e){const n=[];for(let r=0;r<e.length;r++){const s=e[r],{first:o,last:l,point:u}=Gpe(s,t,"x");if(!(!u||o&&l))if(o)n.unshift(u);else if(i.push(u),!l)break}i.push(...n)}function Gpe(i,t,e){const n=i.interpolate(t,e);if(!n)return{};const r=n[e],s=i.segments,o=i.points;let l=!1,u=!1;for(let p=0;p<s.length;p++){const v=s[p],w=o[v.start][e],I=o[v.end][e];if(uy(r,w,I)){l=r===w,u=r===I;break}}return{first:l,last:u,point:n}}class kH{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,n){const{x:r,y:s,radius:o}=this;return t.arc(r,s,o,(e=e||{start:0,end:dl}).end,e.start,!0),!n.bounds}interpolate(t){const{x:e,y:n,radius:r}=this,s=t.angle;return{x:e+Math.cos(s)*r,y:n+Math.sin(s)*r,angle:s}}}function PL(i,t,e){const n=function Wpe(i){const{chart:t,fill:e,line:n}=i;if(au(e))return function jpe(i,t){const e=i.getDatasetMeta(t);return e&&i.isDatasetVisible(t)?e.dataset:null}(t,e);if("stack"===e)return function Vpe(i){const{scale:t,index:e,line:n}=i,r=[],s=n.segments,o=n.points,l=function Upe(i,t){const e=[],n=i.getMatchingVisibleMetas("line");for(let r=0;r<n.length;r++){const s=n[r];if(s.index===t)break;s.hidden||e.unshift(s.dataset)}return e}(t,e);l.push(PH({x:null,y:t.bottom},n));for(let u=0;u<s.length;u++){const p=s[u];for(let v=p.start;v<=p.end;v++)Hpe(r,o[v],l)}return new xS({points:r,options:{}})}(i);if("shape"===e)return!0;const r=function $pe(i){return(i.scale||{}).getPointPositionForValue?function Xpe(i){const{scale:t,fill:e}=i,n=t.options,r=t.getLabels().length,s=n.reverse?t.max:t.min,o=function Bpe(i,t,e){let n;return n="start"===i?e:"end"===i?t.options.reverse?t.min:t.max:Jo(i)?i.value:t.getBaseValue(),n}(e,t,s),l=[];if(n.grid.circular){const u=t.getPointPositionForValue(0,s);return new kH({x:u.x,y:u.y,radius:t.getDistanceFromCenterForValue(o)})}for(let u=0;u<r;++u)l.push(t.getPointPositionForValue(u,o));return l}(i):function qpe(i){const{scale:t={},fill:e}=i,n=function Npe(i,t){let e=null;return"start"===i?e=t.bottom:"end"===i?e=t.top:Jo(i)?e=t.getPixelForValue(i.value):t.getBasePixel&&(e=t.getBasePixel()),e}(e,t);if(au(n)){const r=t.isHorizontal();return{x:r?n:null,y:r?null:n}}return null}(i)}(i);return r instanceof kH?r:PH(r,n)}(t),{line:r,scale:s,axis:o}=t,l=r.options,u=l.fill,p=l.backgroundColor,{above:v=p,below:w=p}=u||{};n&&r.points.length&&(cS(i,e),function Ype(i,t){const{line:e,target:n,above:r,below:s,area:o,scale:l}=t,u=e._loop?"angle":t.axis;i.save(),"x"===u&&s!==r&&(OH(i,n,o.top),FH(i,{line:e,target:n,color:r,scale:l,property:u}),i.restore(),i.save(),OH(i,n,o.bottom)),FH(i,{line:e,target:n,color:s,scale:l,property:u}),i.restore()}(i,{line:r,target:n,above:v,below:w,area:e,scale:s,axis:o}),uS(i))}function OH(i,t,e){const{segments:n,points:r}=t;let s=!0,o=!1;i.beginPath();for(const l of n){const{start:u,end:p}=l,v=r[u],w=r[LL(u,p,r)];s?(i.moveTo(v.x,v.y),s=!1):(i.lineTo(v.x,e),i.lineTo(v.x,v.y)),o=!!t.pathSegment(i,l,{move:o}),o?i.closePath():i.lineTo(w.x,e)}i.lineTo(t.first().x,e),i.closePath(),i.clip()}function FH(i,t){const{line:e,target:n,property:r,color:s,scale:o}=t,l=function Ppe(i,t,e){const n=i.segments,r=i.points,s=t.points,o=[];for(const l of n){let{start:u,end:p}=l;p=LL(u,p,r);const v=DL(e,r[u],r[p],l.loop);if(!t.segments){o.push({source:l,target:v,start:r[u],end:r[p]});continue}const w=OU(t,v);for(const I of w){const T=DL(e,s[I.start],s[I.end],I.loop),k=kU(l,r,T);for(const G of k)o.push({source:G,target:I,start:{[e]:LH(v,T,"start",Math.max)},end:{[e]:LH(v,T,"end",Math.min)}})}}return o}(e,n,r);for(const{source:u,target:p,start:v,end:w}of l){const{style:{backgroundColor:I=s}={}}=u,T=!0!==n;i.save(),i.fillStyle=I,Kpe(i,o,T&&DL(r,v,w)),i.beginPath();const k=!!e.pathSegment(i,u);let G;if(T){k?i.closePath():NH(i,n,w,r);const Y=!!n.pathSegment(i,p,{move:k,reverse:!0});G=k&&Y,G||NH(i,n,v,r)}i.closePath(),i.fill(G?"evenodd":"nonzero"),i.restore()}}function Kpe(i,t,e){const{top:n,bottom:r}=t.chart.chartArea,{property:s,start:o,end:l}=e||{};"x"===s&&(i.beginPath(),i.rect(o,n,l-o,r-n),i.clip())}function NH(i,t,e,n){const r=t.interpolate(e,n);r&&i.lineTo(r.x,r.y)}var Zpe={id:"filler",afterDatasetsUpdate(i,t,e){const n=(i.data.datasets||[]).length,r=[];let s,o,l,u;for(o=0;o<n;++o)s=i.getDatasetMeta(o),l=s.dataset,u=null,l&&l.options&&l instanceof xS&&(u={visible:i.isDatasetVisible(o),index:o,fill:Ope(l,o,n),chart:i,axis:s.controller.options.indexAxis,scale:s.vScale,line:l}),s.$filler=u,r.push(u);for(o=0;o<n;++o)u=r[o],u&&!1!==u.fill&&(u.fill=kpe(r,o,e.propagate))},beforeDraw(i,t,e){const n="beforeDraw"===e.drawTime,r=i.getSortedVisibleDatasetMetas(),s=i.chartArea;for(let o=r.length-1;o>=0;--o){const l=r[o].$filler;!l||(l.line.updateControlPoints(s,l.axis),n&&l.fill&&PL(i.ctx,l,s))}},beforeDatasetsDraw(i,t,e){if("beforeDatasetsDraw"!==e.drawTime)return;const n=i.getSortedVisibleDatasetMetas();for(let r=n.length-1;r>=0;--r){const s=n[r].$filler;RH(s)&&PL(i.ctx,s,i.chartArea)}},beforeDatasetDraw(i,t,e){const n=t.meta.$filler;!RH(n)||"beforeDatasetDraw"!==e.drawTime||PL(i.ctx,n,i.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const BH=(i,t)=>{let{boxHeight:e=t,boxWidth:n=t}=i;return i.usePointStyle&&(e=Math.min(e,t),n=i.pointStyleWidth||Math.min(n,t)),{boxWidth:n,boxHeight:e,itemHeight:Math.max(t,e)}};class zH extends mm{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,n){this.maxWidth=t,this.maxHeight=e,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=Rl(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(n=>t.filter(n,this.chart.data))),t.sort&&(e=e.sort((n,r)=>t.sort(n,r,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display)return void(this.width=this.height=0);const n=t.labels,r=Qu(n.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:u}=BH(n,s);let p,v;e.font=r.string,this.isHorizontal()?(p=this.maxWidth,v=this._fitRows(o,s,l,u)+10):(v=this.maxHeight,p=this._fitCols(o,s,l,u)+10),this.width=Math.min(p,t.maxWidth||this.maxWidth),this.height=Math.min(v,t.maxHeight||this.maxHeight)}_fitRows(t,e,n,r){const{ctx:s,maxWidth:o,options:{labels:{padding:l}}}=this,u=this.legendHitBoxes=[],p=this.lineWidths=[0],v=r+l;let w=t;s.textAlign="left",s.textBaseline="middle";let I=-1,T=-v;return this.legendItems.forEach((k,G)=>{const Y=n+e/2+s.measureText(k.text).width;(0===G||p[p.length-1]+Y+2*l>o)&&(w+=v,p[p.length-(G>0?0:1)]=0,T+=v,I++),u[G]={left:0,top:T,row:I,width:Y,height:r},p[p.length-1]+=Y+l}),w}_fitCols(t,e,n,r){const{ctx:s,maxHeight:o,options:{labels:{padding:l}}}=this,u=this.legendHitBoxes=[],p=this.columnSizes=[],v=o-t;let w=l,I=0,T=0,k=0,G=0;return this.legendItems.forEach((Y,ce)=>{const Se=n+e/2+s.measureText(Y.text).width;ce>0&&T+r+2*l>v&&(w+=I+l,p.push({width:I,height:T}),k+=I+l,G++,I=T=0),u[ce]={left:k,top:T,col:G,width:Se,height:r},I=Math.max(I,Se),T+=r+l}),w+=I,p.push({width:I,height:T}),w}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:n,labels:{padding:r},rtl:s}}=this,o=yC(s,this.left,this.width);if(this.isHorizontal()){let l=0,u=Ed(n,this.left+r,this.right-this.lineWidths[l]);for(const p of e)l!==p.row&&(l=p.row,u=Ed(n,this.left+r,this.right-this.lineWidths[l])),p.top+=this.top+t+r,p.left=o.leftForLtr(o.x(u),p.width),u+=p.width+r}else{let l=0,u=Ed(n,this.top+t+r,this.bottom-this.columnSizes[l].height);for(const p of e)p.col!==l&&(l=p.col,u=Ed(n,this.top+t+r,this.bottom-this.columnSizes[l].height)),p.top=u,p.left+=this.left+r,p.left=o.leftForLtr(o.x(p.left),p.width),u+=p.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const t=this.ctx;cS(t,this),this._draw(),uS(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:n,ctx:r}=this,{align:s,labels:o}=t,l=na.color,u=yC(t.rtl,this.left,this.width),p=Qu(o.font),{color:v,padding:w}=o,I=p.size,T=I/2;let k;this.drawTitle(),r.textAlign=u.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=p.string;const{boxWidth:G,boxHeight:Y,itemHeight:ce}=BH(o,I),Te=this.isHorizontal(),Qe=this._computeTitleHeight();k=Te?{x:Ed(s,this.left+w,this.right-n[0]),y:this.top+w+Qe,line:0}:{x:this.left+w,y:Ed(s,this.top+Qe+w,this.bottom-e[0].height),line:0},DU(this.ctx,t.textDirection);const mt=ce+w;this.legendItems.forEach((zt,it)=>{r.strokeStyle=zt.fontColor||v,r.fillStyle=zt.fontColor||v;const Tt=r.measureText(zt.text).width,ln=u.textAlign(zt.textAlign||(zt.textAlign=o.textAlign)),Hn=G+T+Tt;let ei=k.x,Wn=k.y;u.setWidth(this.width),Te?it>0&&ei+Hn+w>this.right&&(Wn=k.y+=mt,k.line++,ei=k.x=Ed(s,this.left+w,this.right-n[k.line])):it>0&&Wn+mt>this.bottom&&(ei=k.x=ei+e[k.line].width+w,k.line++,Wn=k.y=Ed(s,this.top+Qe+w,this.bottom-e[k.line].height)),function(zt,it,Tt){if(isNaN(G)||G<=0||isNaN(Y)||Y<0)return;r.save();const ln=mo(Tt.lineWidth,1);if(r.fillStyle=mo(Tt.fillStyle,l),r.lineCap=mo(Tt.lineCap,"butt"),r.lineDashOffset=mo(Tt.lineDashOffset,0),r.lineJoin=mo(Tt.lineJoin,"miter"),r.lineWidth=ln,r.strokeStyle=mo(Tt.strokeStyle,l),r.setLineDash(mo(Tt.lineDash,[])),o.usePointStyle){const Hn={radius:Y*Math.SQRT2/2,pointStyle:Tt.pointStyle,rotation:Tt.rotation,borderWidth:ln},ei=u.xPlus(zt,G/2);mU(r,Hn,ei,it+T,o.pointStyleWidth&&G)}else{const Hn=it+Math.max((I-Y)/2,0),ei=u.leftForLtr(zt,G),Wn=T0(Tt.borderRadius);r.beginPath(),Object.values(Wn).some(En=>0!==En)?HA(r,{x:ei,y:Hn,w:G,h:Y,radius:Wn}):r.rect(ei,Hn,G,Y),r.fill(),0!==ln&&r.stroke()}r.restore()}(u.x(ei),Wn,zt),ei=((i,t,e,n)=>i===(n?"left":"right")?e:"center"===i?(t+e)/2:t)(ln,ei+G+T,Te?ei+Hn:this.right,t.rtl),function(zt,it,Tt){E0(r,Tt.text,zt,it+ce/2,p,{strikethrough:Tt.hidden,textAlign:u.textAlign(Tt.textAlign)})}(u.x(ei),Wn,zt),Te?k.x+=Hn+w:k.y+=mt}),LU(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,n=Qu(e.font),r=Td(e.padding);if(!e.display)return;const s=yC(t.rtl,this.left,this.width),o=this.ctx,l=e.position,p=r.top+n.size/2;let v,w=this.left,I=this.width;if(this.isHorizontal())I=Math.max(...this.lineWidths),v=this.top+p,w=Ed(t.align,w,this.right-I);else{const k=this.columnSizes.reduce((G,Y)=>Math.max(G,Y.height),0);v=p+Ed(t.align,this.top,this.bottom-k-t.labels.padding-this._computeTitleHeight())}const T=Ed(l,w,w+I);o.textAlign=s.textAlign(nL(l)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=n.string,E0(o,e.text,T,v,n)}_computeTitleHeight(){const t=this.options.title,e=Qu(t.font),n=Td(t.padding);return t.display?e.lineHeight+n.height:0}_getLegendItemAt(t,e){let n,r,s;if(uy(t,this.left,this.right)&&uy(e,this.top,this.bottom))for(s=this.legendHitBoxes,n=0;n<s.length;++n)if(r=s[n],uy(t,r.left,r.left+r.width)&&uy(e,r.top,r.top+r.height))return this.legendItems[n];return null}handleEvent(t){const e=this.options;if(!function Jpe(i,t){return!(("mousemove"!==i&&"mouseout"!==i||!t.onHover&&!t.onLeave)&&(!t.onClick||"click"!==i&&"mouseup"!==i))}(t.type,e))return;const n=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type||"mouseout"===t.type){const r=this._hoveredItem,s=((i,t)=>null!==i&&null!==t&&i.datasetIndex===t.datasetIndex&&i.index===t.index)(r,n);r&&!s&&Rl(e.onLeave,[t,r,this],this),this._hoveredItem=n,n&&!s&&Rl(e.onHover,[t,n,this],this)}else n&&Rl(e.onClick,[t,n,this],this)}}var ege={id:"legend",_element:zH,start(i,t,e){const n=i.legend=new zH({ctx:i.ctx,options:e,chart:i});Md.configure(i,n,e),Md.addBox(i,n)},stop(i){Md.removeBox(i,i.legend),delete i.legend},beforeUpdate(i,t,e){const n=i.legend;Md.configure(i,n,e),n.options=e},afterUpdate(i){const t=i.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(i,t){t.replay||i.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(i,t,e){const n=t.datasetIndex,r=e.chart;r.isDatasetVisible(n)?(r.hide(n),t.hidden=!0):(r.show(n),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:i=>i.chart.options.color,boxWidth:40,padding:10,generateLabels(i){const t=i.data.datasets,{labels:{usePointStyle:e,pointStyle:n,textAlign:r,color:s}}=i.legend.options;return i._getSortedDatasetMetas().map(o=>{const l=o.controller.getStyle(e?0:void 0),u=Td(l.borderWidth);return{text:t[o.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!o.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:l.borderColor,pointStyle:n||l.pointStyle,rotation:l.rotation,textAlign:r||l.textAlign,borderRadius:0,datasetIndex:o.index}},this)}},title:{color:i=>i.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:i=>!i.startsWith("on"),labels:{_scriptable:i=>!["generateLabels","filter","sort"].includes(i)}}};class RL extends mm{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=t,this.height=this.bottom=e;const r=Pl(n.text)?n.text.length:1;this._padding=Td(n.padding);const s=r*Qu(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){const{top:e,left:n,bottom:r,right:s,options:o}=this,l=o.align;let p,v,w,u=0;return this.isHorizontal()?(v=Ed(l,n,s),w=e+t,p=s-n):("left"===o.position?(v=n+t,w=Ed(l,r,e),u=-.5*oc):(v=s-t,w=Ed(l,e,r),u=.5*oc),p=r-e),{titleX:v,titleY:w,maxWidth:p,rotation:u}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const n=Qu(e.font),s=n.lineHeight/2+this._padding.top,{titleX:o,titleY:l,maxWidth:u,rotation:p}=this._drawArgs(s);E0(t,e.text,0,0,n,{color:e.color,maxWidth:u,rotation:p,textAlign:nL(e.align),textBaseline:"middle",translation:[o,l]})}}var nge={id:"title",_element:RL,start(i,t,e){!function tge(i,t){const e=new RL({ctx:i.ctx,options:t,chart:i});Md.configure(i,e,t),Md.addBox(i,e),i.titleBlock=e}(i,e)},stop(i){Md.removeBox(i,i.titleBlock),delete i.titleBlock},beforeUpdate(i,t,e){const n=i.titleBlock;Md.configure(i,n,e),n.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const SS=new WeakMap;var ige={id:"subtitle",start(i,t,e){const n=new RL({ctx:i.ctx,options:e,chart:i});Md.configure(i,n,e),Md.addBox(i,n),SS.set(i,n)},stop(i){Md.removeBox(i,SS.get(i)),SS.delete(i)},beforeUpdate(i,t,e){const n=SS.get(i);Md.configure(i,n,e),n.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const JA={average(i){if(!i.length)return!1;let t,e,n=0,r=0,s=0;for(t=0,e=i.length;t<e;++t){const o=i[t].element;if(o&&o.hasValue()){const l=o.tooltipPosition();n+=l.x,r+=l.y,++s}}return{x:n/s,y:r/s}},nearest(i,t){if(!i.length)return!1;let s,o,l,e=t.x,n=t.y,r=Number.POSITIVE_INFINITY;for(s=0,o=i.length;s<o;++s){const u=i[s].element;if(u&&u.hasValue()){const v=eL(t,u.getCenterPoint());v<r&&(r=v,l=u)}}if(l){const u=l.tooltipPosition();e=u.x,n=u.y}return{x:e,y:n}}};function hv(i,t){return t&&(Pl(t)?Array.prototype.push.apply(i,t):i.push(t)),i}function py(i){return("string"==typeof i||i instanceof String)&&i.indexOf("\n")>-1?i.split("\n"):i}function rge(i,t){const{element:e,datasetIndex:n,index:r}=t,s=i.getDatasetMeta(n).controller,{label:o,value:l}=s.getLabelAndValue(r);return{chart:i,label:o,parsed:s.getParsed(r),raw:i.data.datasets[n].data[r],formattedValue:l,dataset:s.getDataset(),dataIndex:r,datasetIndex:n,element:e}}function VH(i,t){const e=i.chart.ctx,{body:n,footer:r,title:s}=i,{boxWidth:o,boxHeight:l}=t,u=Qu(t.bodyFont),p=Qu(t.titleFont),v=Qu(t.footerFont),w=s.length,I=r.length,T=n.length,k=Td(t.padding);let G=k.height,Y=0,ce=n.reduce((Te,Qe)=>Te+Qe.before.length+Qe.lines.length+Qe.after.length,0);ce+=i.beforeBody.length+i.afterBody.length,w&&(G+=w*p.lineHeight+(w-1)*t.titleSpacing+t.titleMarginBottom),ce&&(G+=T*(t.displayColors?Math.max(l,u.lineHeight):u.lineHeight)+(ce-T)*u.lineHeight+(ce-1)*t.bodySpacing),I&&(G+=t.footerMarginTop+I*v.lineHeight+(I-1)*t.footerSpacing);let Se=0;const Ae=function(Te){Y=Math.max(Y,e.measureText(Te).width+Se)};return e.save(),e.font=p.string,nl(i.title,Ae),e.font=u.string,nl(i.beforeBody.concat(i.afterBody),Ae),Se=t.displayColors?o+2+t.boxPadding:0,nl(n,Te=>{nl(Te.before,Ae),nl(Te.lines,Ae),nl(Te.after,Ae)}),Se=0,e.font=v.string,nl(i.footer,Ae),e.restore(),Y+=k.width,{width:Y,height:G}}function age(i,t,e,n){const{x:r,width:s}=e,{width:o,chartArea:{left:l,right:u}}=i;let p="center";return"center"===n?p=r<=(l+u)/2?"left":"right":r<=s/2?p="left":r>=o-s/2&&(p="right"),function oge(i,t,e,n){const{x:r,width:s}=n,o=e.caretSize+e.caretPadding;if("left"===i&&r+s+o>t.width||"right"===i&&r-s-o<0)return!0}(p,i,t,e)&&(p="center"),p}function UH(i,t,e){const n=e.yAlign||t.yAlign||function sge(i,t){const{y:e,height:n}=t;return e<n/2?"top":e>i.height-n/2?"bottom":"center"}(i,e);return{xAlign:e.xAlign||t.xAlign||age(i,t,e,n),yAlign:n}}function HH(i,t,e,n){const{caretSize:r,caretPadding:s,cornerRadius:o}=i,{xAlign:l,yAlign:u}=e,p=r+s,{topLeft:v,topRight:w,bottomLeft:I,bottomRight:T}=T0(o);let k=function lge(i,t){let{x:e,width:n}=i;return"right"===t?e-=n:"center"===t&&(e-=n/2),e}(t,l);const G=function cge(i,t,e){let{y:n,height:r}=i;return"top"===t?n+=e:n-="bottom"===t?r+e:r/2,n}(t,u,p);return"center"===u?"left"===l?k+=p:"right"===l&&(k-=p):"left"===l?k-=Math.max(v,I)+r:"right"===l&&(k+=Math.max(w,T)+r),{x:Ch(k,0,n.width-t.width),y:Ch(G,0,n.height-t.height)}}function ES(i,t,e){const n=Td(e.padding);return"center"===t?i.x+i.width/2:"right"===t?i.x+i.width-n.right:i.x+n.left}function GH(i){return hv([],py(i))}function WH(i,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?i.override(e):i}let jH=(()=>{class i extends mm{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart||e._chart,this._chart=this.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&n.options.animation&&r.animations,o=new zU(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=function uge(i,t,e){return p_(i,{tooltip:t,tooltipItems:e,type:"tooltip"})}(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,s=r.beforeTitle.apply(this,[e]),o=r.title.apply(this,[e]),l=r.afterTitle.apply(this,[e]);let u=[];return u=hv(u,py(s)),u=hv(u,py(o)),u=hv(u,py(l)),u}getBeforeBody(e,n){return GH(n.callbacks.beforeBody.apply(this,[e]))}getBody(e,n){const{callbacks:r}=n,s=[];return nl(e,o=>{const l={before:[],lines:[],after:[]},u=WH(r,o);hv(l.before,py(u.beforeLabel.call(this,o))),hv(l.lines,u.label.call(this,o)),hv(l.after,py(u.afterLabel.call(this,o))),s.push(l)}),s}getAfterBody(e,n){return GH(n.callbacks.afterBody.apply(this,[e]))}getFooter(e,n){const{callbacks:r}=n,s=r.beforeFooter.apply(this,[e]),o=r.footer.apply(this,[e]),l=r.afterFooter.apply(this,[e]);let u=[];return u=hv(u,py(s)),u=hv(u,py(o)),u=hv(u,py(l)),u}_createItems(e){const n=this._active,r=this.chart.data,s=[],o=[],l=[];let p,v,u=[];for(p=0,v=n.length;p<v;++p)u.push(rge(this.chart,n[p]));return e.filter&&(u=u.filter((w,I,T)=>e.filter(w,I,T,r))),e.itemSort&&(u=u.sort((w,I)=>e.itemSort(w,I,r))),nl(u,w=>{const I=WH(e.callbacks,w);s.push(I.labelColor.call(this,w)),o.push(I.labelPointStyle.call(this,w)),l.push(I.labelTextColor.call(this,w))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=l,this.dataPoints=u,u}update(e,n){const r=this.options.setContext(this.getContext()),s=this._active;let o,l=[];if(s.length){const u=JA[r.position].call(this,s,this._eventPosition);l=this._createItems(r),this.title=this.getTitle(l,r),this.beforeBody=this.getBeforeBody(l,r),this.body=this.getBody(l,r),this.afterBody=this.getAfterBody(l,r),this.footer=this.getFooter(l,r);const p=this._size=VH(this,r),v=Object.assign({},u,p),w=UH(this.chart,r,v),I=HH(r,v,w,this.chart);this.xAlign=w.xAlign,this.yAlign=w.yAlign,o={opacity:1,x:I.x,y:I.y,width:p.width,height:p.height,caretX:u.x,caretY:u.y}}else 0!==this.opacity&&(o={opacity:0});this._tooltipItems=l,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,s){const o=this.getCaretPosition(e,r,s);n.lineTo(o.x1,o.y1),n.lineTo(o.x2,o.y2),n.lineTo(o.x3,o.y3)}getCaretPosition(e,n,r){const{xAlign:s,yAlign:o}=this,{caretSize:l,cornerRadius:u}=r,{topLeft:p,topRight:v,bottomLeft:w,bottomRight:I}=T0(u),{x:T,y:k}=e,{width:G,height:Y}=n;let ce,Se,Ae,Te,Qe,mt;return"center"===o?(Qe=k+Y/2,"left"===s?(ce=T,Se=ce-l,Te=Qe+l,mt=Qe-l):(ce=T+G,Se=ce+l,Te=Qe-l,mt=Qe+l),Ae=ce):(Se="left"===s?T+Math.max(p,w)+l:"right"===s?T+G-Math.max(v,I)-l:this.caretX,"top"===o?(Te=k,Qe=Te-l,ce=Se-l,Ae=Se+l):(Te=k+Y,Qe=Te+l,ce=Se+l,Ae=Se-l),mt=Te),{x1:ce,x2:Se,x3:Ae,y1:Te,y2:Qe,y3:mt}}drawTitle(e,n,r){const s=this.title,o=s.length;let l,u,p;if(o){const v=yC(r.rtl,this.x,this.width);for(e.x=ES(this,r.titleAlign,r),n.textAlign=v.textAlign(r.titleAlign),n.textBaseline="middle",l=Qu(r.titleFont),u=r.titleSpacing,n.fillStyle=r.titleColor,n.font=l.string,p=0;p<o;++p)n.fillText(s[p],v.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+u,p+1===o&&(e.y+=r.titleMarginBottom-u)}}_drawColorBox(e,n,r,s,o){const l=this.labelColors[r],u=this.labelPointStyles[r],{boxHeight:p,boxWidth:v,boxPadding:w}=o,I=Qu(o.bodyFont),T=ES(this,"left",o),k=s.x(T),Y=n.y+(p<I.lineHeight?(I.lineHeight-p)/2:0);if(o.usePointStyle){const ce={radius:Math.min(v,p)/2,pointStyle:u.pointStyle,rotation:u.rotation,borderWidth:1},Se=s.leftForLtr(k,v)+v/2,Ae=Y+p/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,hL(e,ce,Se,Ae),e.strokeStyle=l.borderColor,e.fillStyle=l.backgroundColor,hL(e,ce,Se,Ae)}else{e.lineWidth=Jo(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,e.strokeStyle=l.borderColor,e.setLineDash(l.borderDash||[]),e.lineDashOffset=l.borderDashOffset||0;const ce=s.leftForLtr(k,v-w),Se=s.leftForLtr(s.xPlus(k,1),v-w-2),Ae=T0(l.borderRadius);Object.values(Ae).some(Te=>0!==Te)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,HA(e,{x:ce,y:Y,w:v,h:p,radius:Ae}),e.fill(),e.stroke(),e.fillStyle=l.backgroundColor,e.beginPath(),HA(e,{x:Se,y:Y+1,w:v-2,h:p-2,radius:Ae}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(ce,Y,v,p),e.strokeRect(ce,Y,v,p),e.fillStyle=l.backgroundColor,e.fillRect(Se,Y+1,v-2,p-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:s}=this,{bodySpacing:o,bodyAlign:l,displayColors:u,boxHeight:p,boxWidth:v,boxPadding:w}=r,I=Qu(r.bodyFont);let T=I.lineHeight,k=0;const G=yC(r.rtl,this.x,this.width),Y=function(Tt){n.fillText(Tt,G.x(e.x+k),e.y+T/2),e.y+=T+o},ce=G.textAlign(l);let Se,Ae,Te,Qe,mt,zt,it;for(n.textAlign=l,n.textBaseline="middle",n.font=I.string,e.x=ES(this,ce,r),n.fillStyle=r.bodyColor,nl(this.beforeBody,Y),k=u&&"right"!==ce?"center"===l?v/2+w:v+2+w:0,Qe=0,zt=s.length;Qe<zt;++Qe){for(Se=s[Qe],Ae=this.labelTextColors[Qe],n.fillStyle=Ae,nl(Se.before,Y),Te=Se.lines,u&&Te.length&&(this._drawColorBox(n,e,Qe,G,r),T=Math.max(I.lineHeight,p)),mt=0,it=Te.length;mt<it;++mt)Y(Te[mt]),T=I.lineHeight;nl(Se.after,Y)}k=0,T=I.lineHeight,nl(this.afterBody,Y),e.y-=o}drawFooter(e,n,r){const s=this.footer,o=s.length;let l,u;if(o){const p=yC(r.rtl,this.x,this.width);for(e.x=ES(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=p.textAlign(r.footerAlign),n.textBaseline="middle",l=Qu(r.footerFont),n.fillStyle=r.footerColor,n.font=l.string,u=0;u<o;++u)n.fillText(s[u],p.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+r.footerSpacing}}drawBackground(e,n,r,s){const{xAlign:o,yAlign:l}=this,{x:u,y:p}=e,{width:v,height:w}=r,{topLeft:I,topRight:T,bottomLeft:k,bottomRight:G}=T0(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(u+I,p),"top"===l&&this.drawCaret(e,n,r,s),n.lineTo(u+v-T,p),n.quadraticCurveTo(u+v,p,u+v,p+T),"center"===l&&"right"===o&&this.drawCaret(e,n,r,s),n.lineTo(u+v,p+w-G),n.quadraticCurveTo(u+v,p+w,u+v-G,p+w),"bottom"===l&&this.drawCaret(e,n,r,s),n.lineTo(u+k,p+w),n.quadraticCurveTo(u,p+w,u,p+w-k),"center"===l&&"left"===o&&this.drawCaret(e,n,r,s),n.lineTo(u,p+I),n.quadraticCurveTo(u,p,u+I,p),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,s=r&&r.x,o=r&&r.y;if(s||o){const l=JA[e.position].call(this,this._active,this._eventPosition);if(!l)return;const u=this._size=VH(this,e),p=Object.assign({},l,this._size),v=UH(n,e,p),w=HH(e,p,v,n);(s._to!==w.x||o._to!==w.y)&&(this.xAlign=v.xAlign,this.yAlign=v.yAlign,this.width=u.width,this.height=u.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,w))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},o={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const l=Td(n.padding);n.enabled&&(this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length)&&(e.save(),e.globalAlpha=r,this.drawBackground(o,e,s,n),DU(e,n.textDirection),o.y+=l.top,this.drawTitle(o,e,n),this.drawBody(o,e,n),this.drawFooter(o,e,n),LU(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,s=e.map(({datasetIndex:u,index:p})=>{const v=this.chart.getDatasetMeta(u);if(!v)throw new Error("Cannot find a dataset at index "+u);return{datasetIndex:u,element:v.data[p],index:p}}),o=!eS(r,s),l=this._positionChanged(s,n);(o||l)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,o=this._active||[],l=this._getActiveElements(e,o,n,r),u=this._positionChanged(l,e),p=n||!eS(l,o)||u;return p&&(this._active=l,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),p}_getActiveElements(e,n,r,s){const o=this.options;if("mouseout"===e.type)return[];if(!s)return n;const l=this.chart.getElementsAtEventForMode(e,o.mode,o,r);return o.reverse&&l.reverse(),l}_positionChanged(e,n){const{caretX:r,caretY:s,options:o}=this,l=JA[o.position].call(this,e,n);return!1!==l&&(r!==l.x||s!==l.y)}}return i.positioners=JA,i})();var dge=Object.freeze({__proto__:null,Decimation:Lpe,Filler:Zpe,Legend:ege,SubTitle:ige,Title:nge,Tooltip:{id:"tooltip",_element:jH,positioners:JA,afterInit(i,t,e){e&&(i.tooltip=new jH({chart:i,options:e}))},beforeUpdate(i,t,e){i.tooltip&&i.tooltip.initialize(e)},reset(i,t,e){i.tooltip&&i.tooltip.initialize(e)},afterDraw(i){const t=i.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(!1===i.notifyPlugins("beforeTooltipDraw",e))return;t.draw(i.ctx),i.notifyPlugins("afterTooltipDraw",e)}},afterEvent(i,t){i.tooltip&&i.tooltip.handleEvent(t.event,t.replay,t.inChartArea)&&(t.changed=!0)},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(i,t)=>t.bodyFont.size,boxWidth:(i,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:cy,title(i){if(i.length>0){const t=i[0],e=t.chart.data.labels,n=e?e.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return e[t.dataIndex]}return""},afterTitle:cy,beforeBody:cy,beforeLabel:cy,label(i){if(this&&this.options&&"dataset"===this.options.mode)return i.label+": "+i.formattedValue||i.formattedValue;let t=i.dataset.label||"";t&&(t+=": ");const e=i.formattedValue;return ga(e)||(t+=e),t},labelColor(i){const e=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(i){const e=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:cy,afterBody:cy,beforeFooter:cy,footer:cy,afterFooter:cy}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:i=>"filter"!==i&&"itemSort"!==i&&"external"!==i,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]}});class TS extends P0{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const n=this.getLabels();for(const{index:r,label:s}of e)n[r]===s&&n.splice(r,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(ga(t))return null;const n=this.getLabels();return((i,t)=>null===i?null:Ch(Math.round(i),0,t))(e=isFinite(e)&&n[e]===t?e:function pge(i,t,e,n){const r=i.indexOf(t);return-1===r?((i,t,e,n)=>("string"==typeof t?(e=i.push(t)-1,n.unshift({index:e,label:t})):isNaN(t)&&(e=null),e))(i,t,e,n):r!==i.lastIndexOf(t)?e:r}(n,t,mo(e,t),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(n=0),e||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const t=this.min,e=this.max,n=this.options.offset,r=[];let s=this.getLabels();s=0===t&&e===s.length-1?s:s.slice(t,e+1),this._valueRange=Math.max(s.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let o=t;o<=e;o++)r.push({value:o});return r}getLabelForValue(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!=typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function $H(i,t,{horizontal:e,minRotation:n}){const r=gm(n),s=(e?Math.sin(r):Math.cos(r))||.001;return Math.min(t/s,.75*t*(""+i).length)}TS.id="category",TS.defaults={ticks:{callback:TS.prototype.getLabelForValue}};class MS extends P0{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return ga(t)||("number"==typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this;const o=u=>r=e?r:u,l=u=>s=n?s:u;if(t){const u=lv(r),p=lv(s);u<0&&p<0?l(0):u>0&&p>0&&o(0)}if(r===s){let u=1;(s>=Number.MAX_SAFE_INTEGER||r<=Number.MIN_SAFE_INTEGER)&&(u=Math.abs(.05*s)),l(s+u),t||o(r-u)}this.min=r,this.max=s}getTickLimit(){const t=this.options.ticks;let r,{maxTicksLimit:e,stepSize:n}=t;return n?(r=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),e=e||11),e&&(r=Math.min(e,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const o=function mge(i,t){const e=[],{bounds:r,step:s,min:o,max:l,precision:u,count:p,maxTicks:v,maxDigits:w,includeBounds:I}=i,T=s||1,k=v-1,{min:G,max:Y}=t,ce=!ga(o),Se=!ga(l),Ae=!ga(p),Te=(Y-G)/(w+1);let mt,zt,it,Tt,Qe=$4((Y-G)/k/T)*T;if(Qe<1e-14&&!ce&&!Se)return[{value:G},{value:Y}];Tt=Math.ceil(Y/Qe)-Math.floor(G/Qe),Tt>k&&(Qe=$4(Tt*Qe/k/T)*T),ga(u)||(mt=Math.pow(10,u),Qe=Math.ceil(Qe*mt)/mt),"ticks"===r?(zt=Math.floor(G/Qe)*Qe,it=Math.ceil(Y/Qe)*Qe):(zt=G,it=Y),ce&&Se&&s&&function Yue(i,t){const e=Math.round(i);return e-t<=i&&e+t>=i}((l-o)/s,Qe/1e3)?(Tt=Math.round(Math.min((l-o)/Qe,v)),Qe=(l-o)/Tt,zt=o,it=l):Ae?(zt=ce?o:zt,it=Se?l:it,Tt=p-1,Qe=(it-zt)/Tt):(Tt=(it-zt)/Qe,Tt=OA(Tt,Math.round(Tt),Qe/1e3)?Math.round(Tt):Math.ceil(Tt));const ln=Math.max(X4(Qe),X4(zt));mt=Math.pow(10,ga(u)?ln:u),zt=Math.round(zt*mt)/mt,it=Math.round(it*mt)/mt;let Hn=0;for(ce&&(I&&zt!==o?(e.push({value:o}),zt<o&&Hn++,OA(Math.round((zt+Hn*Qe)*mt)/mt,o,$H(o,Te,i))&&Hn++):zt<o&&Hn++);Hn<Tt;++Hn)e.push({value:Math.round((zt+Hn*Qe)*mt)/mt});return Se&&I&&it!==l?e.length&&OA(e[e.length-1].value,l,$H(l,Te,i))?e[e.length-1].value=l:e.push({value:l}):(!Se||it===l)&&e.push({value:it}),e}({maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===t.bounds&&q4(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let e=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const r=(n-e)/Math.max(t.length-1,1)/2;e-=r,n+=r}this._startValue=e,this._endValue=n,this._valueRange=n-e}getLabelForValue(t){return WA(t,this.chart.options.locale,this.options.ticks.format)}}class kL extends MS{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=au(t)?t:0,this.max=au(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,n=gm(this.options.ticks.minRotation),r=(t?Math.sin(n):Math.cos(n))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,s.lineHeight/r))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}function qH(i){return i/Math.pow(10,Math.floor(_g(i)))==1}kL.id="linear",kL.defaults={ticks:{callback:pS.formatters.numeric}};class OL extends P0{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const n=MS.prototype.parse.apply(this,[t,e]);if(0!==n)return au(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=au(t)?Math.max(0,t):null,this.max=au(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let n=this.min,r=this.max;const s=u=>n=t?n:u,o=u=>r=e?r:u,l=(u,p)=>Math.pow(10,Math.floor(_g(u))+p);n===r&&(n<=0?(s(1),o(10)):(s(l(n,-1)),o(l(r,1)))),n<=0&&s(l(r,-1)),r<=0&&o(l(n,1)),this._zero&&this.min!==this._suggestedMin&&n===l(this.min,0)&&s(l(n,-1)),this.min=n,this.max=r}buildTicks(){const t=this.options,n=function vge(i,t){const e=Math.floor(_g(t.max)),n=Math.ceil(t.max/Math.pow(10,e)),r=[];let s=vg(i.min,Math.pow(10,Math.floor(_g(t.min)))),o=Math.floor(_g(s)),l=Math.floor(s/Math.pow(10,o)),u=o<0?Math.pow(10,Math.abs(o)):1;do{r.push({value:s,major:qH(s)}),++l,10===l&&(l=1,++o,u=o>=0?1:u),s=Math.round(l*Math.pow(10,o)*u)/u}while(o<e||o===e&&l<n);const p=vg(i.max,s);return r.push({value:p,major:qH(s)}),r}({min:this._userMin,max:this._userMax},this);return"ticks"===t.bounds&&q4(n,this,"value"),t.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(t){return void 0===t?"0":WA(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=_g(t),this._valueRange=_g(this.max)-_g(t)}getPixelForValue(t){return(void 0===t||0===t)&&(t=this.min),null===t||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(_g(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function FL(i){const t=i.ticks;if(t.display&&i.display){const e=Td(t.backdropPadding);return mo(t.font&&t.font.size,na.font.size)+e.height}return 0}function yge(i,t,e){return e=Pl(e)?e:[e],{w:Ehe(i,t.string,e),h:e.length*t.lineHeight}}function XH(i,t,e,n,r){return i===n||i===r?{start:t-e/2,end:t+e/2}:i<n||i>r?{start:t-e,end:t}:{start:t,end:t+e}}function bge(i,t,e,n,r){const s=Math.abs(Math.sin(e)),o=Math.abs(Math.cos(e));let l=0,u=0;n.start<t.l?(l=(t.l-n.start)/s,i.l=Math.min(i.l,t.l-l)):n.end>t.r&&(l=(n.end-t.r)/s,i.r=Math.max(i.r,t.r+l)),r.start<t.t?(u=(t.t-r.start)/o,i.t=Math.min(i.t,t.t-u)):r.end>t.b&&(u=(r.end-t.b)/o,i.b=Math.max(i.b,t.b+u))}function wge(i){return 0===i||180===i?"center":i<180?"left":"right"}function Age(i,t,e){return"right"===e?i-=t:"center"===e&&(i-=t/2),i}function xge(i,t,e){return 90===e||270===e?i-=t/2:(e>270||e<90)&&(i-=t),i}function YH(i,t,e,n){const{ctx:r}=i;if(e)r.arc(i.xCenter,i.yCenter,t,0,dl);else{let s=i.getPointPosition(0,t);r.moveTo(s.x,s.y);for(let o=1;o<n;o++)s=i.getPointPosition(o,t),r.lineTo(s.x,s.y)}}OL.id="logarithmic",OL.defaults={ticks:{callback:pS.formatters.logarithmic,major:{enabled:!0}}};class ex extends MS{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=Td(FL(this.options)/2),e=this.width=this.maxWidth-t.width,n=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+n/2+t.top),this.drawingArea=Math.floor(Math.min(e,n)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=au(t)&&!isNaN(t)?t:0,this.max=au(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/FL(this.options))}generateTickLabels(t){MS.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,n)=>{const r=Rl(this.options.pointLabels.callback,[e,n],this);return r||0===r?r:""}).filter((e,n)=>this.chart.getDataVisibility(n))}fit(){const t=this.options;t.display&&t.pointLabels.display?function _ge(i){const t={l:i.left+i._padding.left,r:i.right-i._padding.right,t:i.top+i._padding.top,b:i.bottom-i._padding.bottom},e=Object.assign({},t),n=[],r=[],s=i._pointLabels.length,o=i.options.pointLabels,l=o.centerPointLabels?oc/s:0;for(let u=0;u<s;u++){const p=o.setContext(i.getPointLabelContext(u));r[u]=p.padding;const v=i.getPointPosition(u,i.drawingArea+r[u],l),w=Qu(p.font),I=yge(i.ctx,w,i._pointLabels[u]);n[u]=I;const T=Lp(i.getIndexAngle(u)+l),k=Math.round(J2(T));bge(e,t,T,XH(k,v.x,I.w,0,180),XH(k,v.y,I.h,90,270))}i.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),i._pointLabelItems=function Cge(i,t,e){const n=[],r=i._pointLabels.length,s=i.options,o=FL(s)/2,l=i.drawingArea,u=s.pointLabels.centerPointLabels?oc/r:0;for(let p=0;p<r;p++){const v=i.getPointPosition(p,l+o+e[p],u),w=Math.round(J2(Lp(v.angle+Yc))),I=t[p],T=xge(v.y,I.h,w),k=wge(w),G=Age(v.x,I.w,k);n.push({x:v.x,y:T,textAlign:k,left:G,top:T,right:G+I.w,bottom:T+I.h})}return n}(i,n,r)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,n,r){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,n,r))}getIndexAngle(t){return Lp(t*(dl/(this._pointLabels.length||1))+gm(this.options.startAngle||0))}getDistanceFromCenterForValue(t){if(ga(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(ga(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const n=e[t];return function Ege(i,t,e){return p_(i,{label:e,index:t,type:"pointLabel"})}(this.getContext(),t,n)}}getPointPosition(t,e,n=0){const r=this.getIndexAngle(t)-Yc+n;return{x:Math.cos(r)*e+this.xCenter,y:Math.sin(r)*e+this.yCenter,angle:r}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:n,right:r,bottom:s}=this._pointLabelItems[t];return{left:e,top:n,right:r,bottom:s}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const n=this.ctx;n.save(),n.beginPath(),YH(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),n.closePath(),n.fillStyle=t,n.fill(),n.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:n,grid:r}=e,s=this._pointLabels.length;let o,l,u;if(e.pointLabels.display&&function Ige(i,t){const{ctx:e,options:{pointLabels:n}}=i;for(let r=t-1;r>=0;r--){const s=n.setContext(i.getPointLabelContext(r)),o=Qu(s.font),{x:l,y:u,textAlign:p,left:v,top:w,right:I,bottom:T}=i._pointLabelItems[r],{backdropColor:k}=s;if(!ga(k)){const G=T0(s.borderRadius),Y=Td(s.backdropPadding);e.fillStyle=k;const ce=v-Y.left,Se=w-Y.top,Ae=I-v+Y.width,Te=T-w+Y.height;Object.values(G).some(Qe=>0!==Qe)?(e.beginPath(),HA(e,{x:ce,y:Se,w:Ae,h:Te,radius:G}),e.fill()):e.fillRect(ce,Se,Ae,Te)}E0(e,i._pointLabels[r],l,u+o.lineHeight/2,o,{color:s.color,textAlign:p,textBaseline:"middle"})}}(this,s),r.display&&this.ticks.forEach((p,v)=>{0!==v&&(l=this.getDistanceFromCenterForValue(p.value),function Sge(i,t,e,n){const r=i.ctx,s=t.circular,{color:o,lineWidth:l}=t;!s&&!n||!o||!l||e<0||(r.save(),r.strokeStyle=o,r.lineWidth=l,r.setLineDash(t.borderDash),r.lineDashOffset=t.borderDashOffset,r.beginPath(),YH(i,e,s,n),r.closePath(),r.stroke(),r.restore())}(this,r.setContext(this.getContext(v-1)),l,s))}),n.display){for(t.save(),o=s-1;o>=0;o--){const p=n.setContext(this.getPointLabelContext(o)),{color:v,lineWidth:w}=p;!w||!v||(t.lineWidth=w,t.strokeStyle=v,t.setLineDash(p.borderDash),t.lineDashOffset=p.borderDashOffset,l=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),u=this.getPointPosition(o,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(u.x,u.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,n=e.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let s,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(r),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((l,u)=>{if(0===u&&!e.reverse)return;const p=n.setContext(this.getContext(u)),v=Qu(p.font);if(s=this.getDistanceFromCenterForValue(this.ticks[u].value),p.showLabelBackdrop){t.font=v.string,o=t.measureText(l.label).width,t.fillStyle=p.backdropColor;const w=Td(p.backdropPadding);t.fillRect(-o/2-w.left,-s-v.size/2-w.top,o+w.width,v.size+w.height)}E0(t,l.label,0,-s,v,{color:p.color})}),t.restore()}drawTitle(){}}ex.id="radialLinear",ex.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:pS.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:i=>i,padding:5,centerPointLabels:!1}},ex.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},ex.descriptors={angleLines:{_fallback:"grid"}};const DS={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Uf=Object.keys(DS);function Tge(i,t){return i-t}function KH(i,t){if(ga(t))return null;const e=i._adapter,{parser:n,round:r,isoWeekday:s}=i._parseOpts;let o=t;return"function"==typeof n&&(o=n(o)),au(o)||(o="string"==typeof n?e.parse(o,n):e.parse(o)),null===o?null:(r&&(o="week"!==r||!pC(s)&&!0!==s?e.startOf(o,r):e.startOf(o,"isoWeek",s)),+o)}function ZH(i,t,e,n){const r=Uf.length;for(let s=Uf.indexOf(i);s<r-1;++s){const o=DS[Uf[s]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((e-t)/(l*o.size))<=n)return Uf[s]}return Uf[r-1]}function QH(i,t,e){if(e){if(e.length){const{lo:n,hi:r}=tL(e,t);i[e[n]>=t?e[n]:e[r]]=!0}}else i[t]=!0}function JH(i,t,e){const n=[],r={},s=t.length;let o,l;for(o=0;o<s;++o)l=t[o],r[l]=o,n.push({value:l,major:!1});return 0!==s&&e?function Lge(i,t,e,n){const r=i._adapter,s=+r.startOf(t[0].value,n),o=t[t.length-1].value;let l,u;for(l=s;l<=o;l=+r.add(l,1,n))u=e[l],u>=0&&(t[u].major=!0);return t}(i,n,r,e):n}let NL=(()=>{class i extends P0{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n){const r=e.time||(e.time={}),s=this._adapter=new mfe._date(e.adapters.date);s.init(n),RA(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return void 0===e?null:KH(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:s,max:o,minDefined:l,maxDefined:u}=this.getUserBounds();function p(v){!l&&!isNaN(v.min)&&(s=Math.min(s,v.min)),!u&&!isNaN(v.max)&&(o=Math.max(o,v.max))}(!l||!u)&&(p(this._getLabelBounds()),("ticks"!==e.bounds||"labels"!==e.ticks.source)&&p(this.getMinMax(!1))),s=au(s)&&!isNaN(s)?s:+n.startOf(Date.now(),r),o=au(o)&&!isNaN(o)?o:+n.endOf(Date.now(),r)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,s="labels"===r.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const o=this.min,u=function Jue(i,t,e){let n=0,r=i.length;for(;n<r&&i[n]<t;)n++;for(;r>n&&i[r-1]>e;)r--;return n>0||r<i.length?i.slice(n,r):i}(s,o,this.max);return this._unit=n.unit||(r.autoSkip?ZH(n.minUnit,this.min,this.max,this._getLabelCapacity(o)):function Mge(i,t,e,n,r){for(let s=Uf.length-1;s>=Uf.indexOf(e);s--){const o=Uf[s];if(DS[o].common&&i._adapter.diff(r,n,o)>=t-1)return o}return Uf[e?Uf.indexOf(e):0]}(this,u.length,n.minUnit,this.min,this.max)),this._majorUnit=r.major.enabled&&"year"!==this._unit?function Dge(i){for(let t=Uf.indexOf(i)+1,e=Uf.length;t<e;++t)if(DS[Uf[t]].common)return Uf[t]}(this._unit):void 0,this.initOffsets(s),e.reverse&&u.reverse(),JH(this,u,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e){let s,o,n=0,r=0;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),n=1===e.length?1-s:(this.getDecimalForValue(e[1])-s)/2,o=this.getDecimalForValue(e[e.length-1]),r=1===e.length?o:(o-this.getDecimalForValue(e[e.length-2]))/2);const l=e.length<3?.5:.25;n=Ch(n,0,l),r=Ch(r,0,l),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,s=this.options,o=s.time,l=o.unit||ZH(o.minUnit,n,r,this._getLabelCapacity(n)),u=mo(o.stepSize,1),p="week"===l&&o.isoWeekday,v=pC(p)||!0===p,w={};let T,k,I=n;if(v&&(I=+e.startOf(I,"isoWeek",p)),I=+e.startOf(I,v?"day":l),e.diff(r,n,l)>1e5*u)throw new Error(n+" and "+r+" are too far apart with stepSize of "+u+" "+l);const G="data"===s.ticks.source&&this.getDataTimestamps();for(T=I,k=0;T<r;T=+e.add(T,u,l),k++)QH(w,T,G);return(T===r||"ticks"===s.bounds||1===k)&&QH(w,T,G),Object.keys(w).sort((Y,ce)=>Y-ce).map(Y=>+Y)}getLabelForValue(e){const r=this.options.time;return this._adapter.format(e,r.tooltipFormat?r.tooltipFormat:r.displayFormats.datetime)}_tickFormatFunction(e,n,r,s){const o=this.options,l=o.time.displayFormats,u=this._unit,p=this._majorUnit,w=p&&l[p],I=r[n],k=this._adapter.format(e,s||(p&&w&&I&&I.major?w:u&&l[u])),G=o.ticks.callback;return G?Rl(G,[k,n,r],this):k}generateTickLabels(e){let n,r,s;for(n=0,r=e.length;n<r;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,s=gm(this.isHorizontal()?n.maxRotation:n.minRotation),o=Math.cos(s),l=Math.sin(s),u=this._resolveTickFontOptions(0).size;return{w:r*o+u*l,h:r*l+u*o}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,s=r[n.unit]||r.millisecond,o=this._tickFormatFunction(e,0,JH(this,[e],this._majorUnit),s),l=this._getLabelSize(o),u=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return u>0?u:1}getDataTimestamps(){let n,r,e=this._cache.data||[];if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,r=s.length;n<r;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const s=this.getLabels();for(n=0,r=s.length;n<r;++n)e.push(KH(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Q4(e.sort(Tge))}}return i.id="time",i.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}},i})();function LS(i,t,e){let s,o,l,u,n=0,r=i.length-1;e?(t>=i[n].pos&&t<=i[r].pos&&({lo:n,hi:r}=hy(i,"pos",t)),({pos:s,time:l}=i[n]),({pos:o,time:u}=i[r])):(t>=i[n].time&&t<=i[r].time&&({lo:n,hi:r}=hy(i,"time",t)),({time:s,pos:l}=i[n]),({time:o,pos:u}=i[r]));const p=o-s;return p?l+(u-l)*(t-s)/p:l}class BL extends NL{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=LS(e,this.min),this._tableRange=LS(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:n}=this,r=[],s=[];let o,l,u,p,v;for(o=0,l=t.length;o<l;++o)p=t[o],p>=e&&p<=n&&r.push(p);if(r.length<2)return[{time:e,pos:0},{time:n,pos:1}];for(o=0,l=r.length;o<l;++o)v=r[o+1],u=r[o-1],p=r[o],Math.round((v+u)/2)!==p&&s.push({time:p,pos:o/(l-1)});return s}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),n=this.getLabelTimestamps();return t=e.length&&n.length?this.normalize(e.concat(n)):e.length?e:n,t=this._cache.all=t,t}getDecimalForValue(t){return(LS(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return LS(this._table,n*this._tableRange+this._minPos,!0)}}BL.id="timeseries",BL.defaults=NL.defaults,wS.register(gfe,Epe,dge,Object.freeze({__proto__:null,CategoryScale:TS,LinearScale:kL,LogarithmicScale:OL,RadialLinearScale:ex,TimeScale:NL,TimeSeriesScale:BL}));const kge=wS;let Oge=(()=>{class i{constructor(e){this.el=e,this.plugins=[],this.responsive=!0,this.onDataSelect=new Fn,this._options={}}get data(){return this._data}set data(e){this._data=e,this.reinit()}get options(){return this._options}set options(e){this._options=e,this.reinit()}ngAfterViewInit(){this.initChart(),this.initialized=!0}onCanvasClick(e){if(this.chart){const n=this.chart.getElementsAtEventForMode(e,"nearest",{intersect:!0},!1),r=this.chart.getElementsAtEventForMode(e,"dataset",{intersect:!0},!1);n&&n[0]&&r&&this.onDataSelect.emit({originalEvent:e,element:n[0],dataset:r})}}initChart(){let e=this.options||{};e.responsive=this.responsive,e.responsive&&(this.height||this.width)&&(e.maintainAspectRatio=!1),this.chart=new kge(this.el.nativeElement.children[0].children[0],{type:this.type,data:this.data,options:this.options,plugins:this.plugins})}getCanvas(){return this.el.nativeElement.children[0].children[0]}getBase64Image(){return this.chart.toBase64Image()}generateLegend(){if(this.chart)return this.chart.generateLegend()}refresh(){this.chart&&this.chart.update()}reinit(){this.chart&&(this.chart.destroy(),this.initChart())}ngOnDestroy(){this.chart&&(this.chart.destroy(),this.initialized=!1,this.chart=null)}}return i.\u0275fac=function(e){return new(e||i)(Xt(Yn))},i.\u0275cmp=_r({type:i,selectors:[["p-chart"]],hostAttrs:[1,"p-element"],inputs:{type:"type",plugins:"plugins",width:"width",height:"height",responsive:"responsive",data:"data",options:"options"},outputs:{onDataSelect:"onDataSelect"},decls:2,vars:6,consts:[[2,"position","relative"],[3,"click"]],template:function(e,n){1&e&&(Ke(0,"div",0)(1,"canvas",1),mn("click",function(s){return n.onCanvasClick(s)}),Je()()),2&e&&(Ad("width",n.responsive&&!n.width?null:n.width)("height",n.responsive&&!n.height?null:n.height),Ie(1),vr("width",n.responsive&&!n.width?null:n.width)("height",n.responsive&&!n.height?null:n.height))},encapsulation:2,changeDetection:0}),i})(),Fge=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({imports:[Os]}),i})();const Nge=function(i,t){return{"p-button-icon":!0,"p-button-icon-left":i,"p-button-icon-right":t}};function Bge(i,t){if(1&i&&Bn(0,"span",3),2&i){const e=be();kr(e.checked?e.onIcon:e.offIcon),de("ngClass",ss(3,Nge,"left"===e.iconPos,"right"===e.iconPos))}}const zge=function(i,t,e){return{"p-button p-togglebutton p-component":!0,"p-button-icon-only":i,"p-highlight":t,"p-disabled":e}},Vge={provide:Cc,useExisting:cs(()=>e5),multi:!0};let e5=(()=>{class i{constructor(e){this.cd=e,this.iconPos="left",this.onChange=new Fn,this.checked=!1,this.onModelChange=()=>{},this.onModelTouched=()=>{}}toggle(e){this.disabled||(this.checked=!this.checked,this.onModelChange(this.checked),this.onModelTouched(),this.onChange.emit({originalEvent:e,checked:this.checked}),this.cd.markForCheck())}onBlur(){this.onModelTouched()}writeValue(e){this.checked=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}get hasOnLabel(){return this.onLabel&&this.onLabel.length>0}get hasOffLabel(){return this.onLabel&&this.onLabel.length>0}}return i.\u0275fac=function(e){return new(e||i)(Xt(xo))},i.\u0275cmp=_r({type:i,selectors:[["p-toggleButton"]],hostAttrs:[1,"p-element"],inputs:{onLabel:"onLabel",offLabel:"offLabel",onIcon:"onIcon",offIcon:"offIcon",ariaLabelledBy:"ariaLabelledBy",disabled:"disabled",style:"style",styleClass:"styleClass",inputId:"inputId",tabindex:"tabindex",iconPos:"iconPos"},outputs:{onChange:"onChange"},features:[Ao([Vge])],decls:4,vars:12,consts:[["role","checkbox","pRipple","",3,"ngClass","ngStyle","click","keydown.enter"],[3,"class","ngClass",4,"ngIf"],[1,"p-button-label"],[3,"ngClass"]],template:function(e,n){1&e&&(Ke(0,"div",0),mn("click",function(s){return n.toggle(s)})("keydown.enter",function(s){return n.toggle(s)}),$e(1,Bge,1,6,"span",1),Ke(2,"span",2),li(3),Je()()),2&e&&(kr(n.styleClass),de("ngClass",Su(8,zge,n.onIcon&&n.offIcon&&!n.hasOnLabel&&!n.hasOffLabel,n.checked,n.disabled))("ngStyle",n.style),vr("tabindex",n.disabled?null:"0")("aria-checked",n.checked),Ie(1),de("ngIf",n.onIcon||n.offIcon),Ie(2),ts(n.checked?n.hasOnLabel?n.onLabel:"":n.hasOffLabel?n.offLabel:""))},dependencies:[no,ho,Po,Du],styles:[".p-button[_ngcontent-%COMP%]{margin:0;display:inline-flex;cursor:pointer;-webkit-user-select:none;user-select:none;align-items:center;vertical-align:bottom;text-align:center;overflow:hidden;position:relative}.p-button-label[_ngcontent-%COMP%]{flex:1 1 auto}.p-button-icon-right[_ngcontent-%COMP%]{order:1}.p-button[_ngcontent-%COMP%]:disabled{cursor:default}.p-button-icon-only[_ngcontent-%COMP%]{justify-content:center}.p-button-icon-only[_ngcontent-%COMP%]   .p-button-label[_ngcontent-%COMP%]{visibility:hidden;width:0;flex:0 0 auto}.p-button-vertical[_ngcontent-%COMP%]{flex-direction:column}.p-button-icon-bottom[_ngcontent-%COMP%]{order:2}.p-buttonset[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]{margin:0}.p-buttonset[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]:not(:last-child){border-right:0 none}.p-buttonset[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]:not(:first-of-type):not(:last-of-type){border-radius:0}.p-buttonset[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]:first-of-type{border-top-right-radius:0;border-bottom-right-radius:0}.p-buttonset[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]:last-of-type{border-top-left-radius:0;border-bottom-left-radius:0}.p-buttonset[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]:focus{position:relative;z-index:1}"],changeDetection:0}),i})(),Uge=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({imports:[Os,Xc]}),i})(),Hge=(()=>{class i{constructor(e){this.el=e,this.iconPos="left"}ngAfterViewInit(){this.id=sC()+"_badge";let e=-1!=this.el.nativeElement.nodeName.indexOf("-")?this.el.nativeElement.firstChild:this.el.nativeElement,n=document.createElement("span");n.id=this.id,n.className="p-badge p-component",this.severity&&Ft.addClass(n,"p-badge-"+this.severity),null!=this.value?(n.appendChild(document.createTextNode(this.value)),1===String(this.value).length&&Ft.addClass(n,"p-badge-no-gutter")):Ft.addClass(n,"p-badge-dot"),Ft.addClass(e,"p-overlay-badge"),e.appendChild(n),this.initialized=!0}get value(){return this._value}set value(e){if(e!==this._value&&(this._value=e,this.initialized)){let n=document.getElementById(this.id);this._value?(Ft.hasClass(n,"p-badge-dot")&&Ft.removeClass(n,"p-badge-dot"),1===String(this._value).length?Ft.addClass(n,"p-badge-no-gutter"):Ft.removeClass(n,"p-badge-no-gutter")):!this._value&&!Ft.hasClass(n,"p-badge-dot")&&Ft.addClass(n,"p-badge-dot"),n.innerHTML="",n.appendChild(document.createTextNode(this._value))}}ngOnDestroy(){this.initialized=!1}}return i.\u0275fac=function(e){return new(e||i)(Xt(Yn))},i.\u0275dir=qr({type:i,selectors:[["","pBadge",""]],hostAttrs:[1,"p-element"],inputs:{iconPos:"iconPos",value:"value",severity:"severity"}}),i})(),Gge=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({imports:[Os,xa]}),i})(),PS=(()=>{class i{constructor(){this.fileDropped=new Fn}onDragOver(e){e.preventDefault(),e.stopPropagation(),this.fileOver=!0}onDragLeave(e){e.preventDefault(),e.stopPropagation(),this.fileOver=!1}ondrop(e){e.preventDefault(),e.stopPropagation(),this.fileOver=!1;let n=e.dataTransfer.files;n.length>0&&this.fileDropped.emit(n)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=qr({type:i,selectors:[["","dropZoneDirective",""]],hostVars:2,hostBindings:function(e,n){1&e&&mn("dragover",function(s){return n.onDragOver(s)})("dragleave",function(s){return n.onDragLeave(s)})("drop",function(s){return n.ondrop(s)}),2&e&&Mp("fileover",n.fileOver)},outputs:{fileDropped:"fileDropped"}}),i})();const Wge=["myCytoscape"],jge=["myPng"],$ge=["myTreeTable"];function qge(i,t){if(1&i&&Bn(0,"img",50),2&i){const e=t.$implicit;de("src",e.icon,Xh)("alt",e.label)}}function Xge(i,t){if(1&i&&Bn(0,"img",50),2&i){const e=t.$implicit;de("src",e.icon,Xh)("alt",e.label)}}function Yge(i,t){if(1&i&&Bn(0,"img",50),2&i){const e=t.$implicit;de("src",e.icon,Xh)("alt",e.label)}}const tx=function(){return{width:"100%"}};function Kge(i,t){if(1&i){const e=vi();Ke(0,"div",26)(1,"div",27)(2,"div",51)(3,"span",52),Bn(4,"i",53),Je(),Ke(5,"input",54),mn("ngModelChange",function(r){return Pt(e),Rt(be().captureData.clone=r)}),Je(),Ke(6,"p-button",55),mn("click",function(){Pt(e);const r=be();return Rt(r.applyLabelize(r.captureData))}),Je()()(),Ke(7,"div",27)(8,"div",51)(9,"span",52),Bn(10,"i",56),Je(),Ke(11,"input",54),mn("ngModelChange",function(r){return Pt(e),Rt(be().captureData.label=r)}),Je()()(),Ke(12,"div",27)(13,"div",57)(14,"p-dropdown",58),mn("ngModelChange",function(r){return Pt(e),Rt(be().captureData.alias=r)}),Je()()(),Ke(15,"div",27)(16,"div",59)(17,"p-dropdown",60),mn("ngModelChange",function(r){return Pt(e),Rt(be().captureData.tag=r)}),Je()()(),Ke(18,"div",27)(19,"div",51)(20,"span",52),Bn(21,"i",61),Je(),Ke(22,"input",54),mn("ngModelChange",function(r){return Pt(e),Rt(be().captureData.group=r)}),Je()()(),Ke(23,"div",27)(24,"div",51)(25,"span",62)(26,"p-checkbox",63),mn("ngModelChange",function(r){return Pt(e),Rt(be()._lockedElement=r)})("onChange",function(r){return Pt(e),Rt(be().handleChangeLock(r))}),Je()(),Bn(27,"input",64),Je()()()}if(2&i){const e=be();Ie(5),de("ngModel",e.captureData.clone),Ie(6),de("ngModel",e.captureData.label),Ie(3),to(uo(17,tx)),de("options",e.allNodes)("ngModel",e.captureData.alias)("filter",!0)("showClear",!0),Ie(3),to(uo(18,tx)),de("options",e.captureData.tags)("ngModel",e.captureData.tag)("filter",!0)("showClear",!0),Ie(5),de("ngModel",e.captureData.group),Ie(4),de("ngModel",e._lockedElement)("binary",!0)}}function Zge(i,t){if(1&i){const e=vi();Ke(0,"p-button",65),mn("click",function(){Pt(e);const r=be();return Rt(r.applyNodeUpdate(r.captureData))}),Je()}}function Qge(i,t){if(1&i){const e=vi();Ke(0,"div",26)(1,"div",27)(2,"div",51)(3,"span",52),Bn(4,"i",56),Je(),Ke(5,"input",54),mn("ngModelChange",function(r){return Pt(e),Rt(be().captureData.label=r)}),Je()()(),Ke(6,"div",27)(7,"div",59)(8,"p-dropdown",60),mn("ngModelChange",function(r){return Pt(e),Rt(be().captureData.tag=r)}),Je()()(),Ke(9,"div",27)(10,"div",51)(11,"span",52),Bn(12,"i",66),Je(),Ke(13,"input",67),mn("ngModelChange",function(r){return Pt(e),Rt(be().currentSelectedEdge.data()._source=r)}),Je()()(),Ke(14,"div",27)(15,"div",51)(16,"span",52),Bn(17,"i",68),Je(),Ke(18,"input",67),mn("ngModelChange",function(r){return Pt(e),Rt(be().currentSelectedEdge.data()._target=r)}),Je()()()()}if(2&i){const e=be();Ie(5),de("ngModel",e.captureData.label),Ie(3),to(uo(9,tx)),de("options",e.captureData.tags)("ngModel",e.captureData.tag)("filter",!0)("showClear",!0),Ie(5),de("ngModel",e.currentSelectedEdge.data()._source),Ie(5),de("ngModel",e.currentSelectedEdge.data()._target)}}function Jge(i,t){if(1&i){const e=vi();Ke(0,"p-button",65),mn("click",function(){Pt(e);const r=be();return Rt(r.applyEdgeUpdate(r.captureData))}),Je()}}function eme(i,t){if(1&i){const e=vi();Ke(0,"p-button",65),mn("click",function(){Pt(e);const r=be();return Rt(r.applyChangeProperties(r.captureData))}),Je()}}const tme=function(){return{width:"100%",height:"100%"}};function nme(i,t){if(1&i){const e=vi();Ke(0,"textarea",70),mn("keyup",function(){Pt(e);const r=be(2);return Rt(r.previewNewCData(r.captureData))})("ngModelChange",function(r){return Pt(e),Rt(be(2).captureData.selectElementRawCdata=r)}),Je()}if(2&i){const e=be(2);to(uo(3,tme)),de("ngModel",e.captureData.selectElementRawCdata)}}function ime(i,t){1&i&&Bn(0,"div",71),2&i&&de("innerHTML",be(2).captureData.selectElementCdata,Aa)}const t5=function(){return{height:"100%"}};function rme(i,t){1&i&&(Ke(0,"p-splitter"),$e(1,nme,1,4,"ng-template",69),$e(2,ime,1,1,"ng-template",69),Je()),2&i&&to(uo(2,t5))}function sme(i,t){1&i&&Bn(0,"div",71),2&i&&de("innerHTML",be(2).captureData.selectElementCdata,Aa)}function ome(i,t){1&i&&(Ke(0,"p-splitter"),$e(1,sme,1,1,"ng-template",69),Je()),2&i&&to(uo(2,t5))}function ame(i,t){if(1&i){const e=vi();Ke(0,"p-toggleButton",74),mn("ngModelChange",function(r){return Pt(e),Rt(be(2).captureData.editable=r)}),Je()}if(2&i){const e=be(2);l0("onIcon",e.onIcon),de("ngModel",e.captureData.editable)}}function lme(i,t){if(1&i){const e=vi();Ke(0,"p-button",75),mn("click",function(){Pt(e);const r=be(2);return Rt(r.applyNewCData(r.captureData))}),Je()}}function cme(i,t){if(1&i&&($e(0,ame,1,2,"p-toggleButton",72),$e(1,lme,1,0,"p-button",73)),2&i){const e=be();de("ngIf",!e.captureData.isAlias),Ie(1),de("ngIf",!e.captureData.isAlias)}}function ume(i,t){1&i&&(Ke(0,"tr")(1,"th"),li(2,"#Id"),Je(),Ke(3,"th"),li(4,"Label"),Je(),Ke(5,"th"),li(6,"Success"),Je(),Ke(7,"th"),li(8,"Fail"),Je(),Ke(9,"th"),li(10,"Find"),Je()())}function hme(i,t){1&i&&(Ke(0,"td"),Bn(1,"i",79),Je())}function dme(i,t){1&i&&Bn(0,"td")}function fme(i,t){1&i&&Bn(0,"td")}function pme(i,t){1&i&&(Ke(0,"td"),Bn(1,"i",80),Je())}function gme(i,t){if(1&i&&(Ke(0,"td"),li(1),Je()),2&i){const e=be().rowData;Ie(1),yc(" ",e.success.length," ")}}function mme(i,t){if(1&i&&(Ke(0,"td"),li(1),Je()),2&i){const e=be().rowData;Ie(1),yc(" ",e.fail.length," ")}}function vme(i,t){1&i&&Bn(0,"td")}function yme(i,t){if(1&i){const e=vi();Ke(0,"td",81),mn("click",function(){Pt(e);const r=be().$implicit;return Rt(be().onSelectItem(r))}),Bn(1,"i",82),Je()}}function _me(i,t){if(1&i&&(Ke(0,"tr")(1,"td"),Bn(2,"p-treeTableToggler",76),li(3),Je(),Ke(4,"td"),li(5),Je(),$e(6,hme,2,0,"td",77),$e(7,dme,1,0,"td",77),$e(8,fme,1,0,"td",77),$e(9,pme,2,0,"td",77),$e(10,gme,2,1,"td",77),$e(11,mme,2,1,"td",77),$e(12,vme,1,0,"td",77),$e(13,yme,2,0,"td",78),Je()),2&i){const e=t.$implicit,n=t.rowData;Ie(2),de("rowNode",e),Ie(1),yc(" ",n.id," "),Ie(2),ts(n.label),Ie(1),de("ngIf",!n.fail&&n.valid),Ie(1),de("ngIf",!n.fail&&n.valid),Ie(1),de("ngIf",!n.fail&&!n.valid),Ie(1),de("ngIf",!n.fail&&!n.valid),Ie(1),de("ngIf",n.success),Ie(1),de("ngIf",n.fail),Ie(1),de("ngIf",n.fail),Ie(1),de("ngIf",!n.fail)}}const bme=function(){return{height:"89vh"}},Cme=function(){return{width:"100vw",height:"42vw"}},wme=function(){return{width:"100vw",height:"32vw"}},Ame=function(){return{width:"45vw",height:"45vw"}},n5=function(){return{width:"60vw",height:"50vw"}},r5=function(){return{width:"40vw",height:"45vw"}},s5=function(){return{width:"40%"}},xme=function(){return{width:"55vw",height:"55vw"}},Ime=function(){return{width:"65vw",height:"55vw"}};var zL=U(4826)(),Sme=U(2960);Z1.use(Sme);var Eme=U(4147);Z1.use(Eme),U(9050)(Z1),window.localStorage.debug="json-rules-engine";let Mme=(()=>{class i{constructor(e,n,r,s,o,l,u,p,v,w){this.graphsService=e,this.styleService=n,this.rulesService=r,this.preferenceService=s,this.clipboardService=o,this.logger=l,this.messageService=u,this.base16=p,this.store=v,this.route=w,this.displaySelectionNode=!1,this.displaySelectionEdge=!1,this.displayChangeProperties=!1,this.onIcon="pi pi-check",this.displayFinder=!1,this.displayMarkdown=!1,this.displaySidebar=!1,this.subscriptions=[],this.displayExportPng=!1,this.displayTool=!0,this.searchNode="",this.graphs=[],this.jsonRules=[],this.alias=[],this.allNodes=[],this.cols=[{field:"label",header:"Label"}],this.breadFirstLayoutOptions=new Yoe,this.concentricLayoutOptions=new Xoe,this.circleLayoutOptions=new qoe,this.gridLayoutOptions={name:"grid",avoidOverlapPadding:50,condense:!0,rows:20,cols:5},this.coseLayoutOptions=new Koe,this.currentStyleCounter=0,this.items=[],this.currentRulesCounter=0,this.currentRulesFail=0,this.currentRulesSuccess=0,this.groupEnabled=!0,this.selectorDisplay="",this.drawModeEnabled=!1,this.rules=[],this.graph$=this.store.select(p2),this.graphs$=this.store.select(f2),this._lockedElement=!1,this.dockRightItems=[{label:"Export GEXF to clipboard",tooltipOptions:{tooltipLabel:"Export GEXF to clipboard",tooltipPosition:"top",positionTop:-15,positionLeft:15},icon:"assets/dock/export-gexf.png",command:()=>{this.id&&(this.gexf(this.id,this.id,this.currentStyle,this.currentRules),this.messageService.add({key:"bc",severity:"info",summary:"Info",detail:"Store GEXF in clipboard"}))}},{label:"Export GRAPHML to clipboard",tooltipOptions:{tooltipLabel:"Export GRAPHML to clipboard",tooltipPosition:"top",positionTop:-15,positionLeft:15},icon:"assets/dock/export-graphml.png",command:()=>{this.id&&(this.graphml(this.id,this.id,this.currentStyle,this.currentRules),this.messageService.add({key:"bc",severity:"info",summary:"Info",detail:"Store GRAPHML in clipboard"}))}},{label:"Export PNG",tooltipOptions:{tooltipLabel:"Export PNG",tooltipPosition:"top",positionTop:-15,positionLeft:15},icon:"assets/dock/export-png.png",command:()=>{if(document){let T=this.cy?.png({bg:"white",full:this.preferences.full,maxWidth:this.preferences.maxWidth?Number(this.preferences.maxWidth):1024,maxHeight:this.preferences.maxHeight?Number(this.preferences.maxHeight):768})||"";this.logger.info(`PNG ${this.preferences.full} ${this.preferences.maxWidth} ${this.preferences.maxHeight}`),this.myPng?.nativeElement.setAttribute("src",T)}this.displayExportPng=!0}},{label:"Save",tooltipOptions:{tooltipLabel:"Save current diagram in local storage",tooltipPosition:"top",positionTop:-15,positionLeft:15},icon:"assets/dock/save.png",command:()=>{if(this.id){this.logger.info("SAVE/META",this.currentStyle,this.currentRules);let T=this.toSysGraph(this.id,this.id,this.currentStyle,this.currentRules);this.logger.info("SAVE",T),this.graphsService.store(T,k=>{k.label=T.label,k.style=T.style,k.rules=T.rules,k.nodes=T.nodes,k.edges=T.edges}),this.messageService.add({key:"bc",severity:"info",summary:"Info",detail:`Save graph ${this.id}`})}}}],this.dockLeftItems=[{label:"Finder",tooltipOptions:{tooltipLabel:"Find node(s) or edges(s) and center on it",tooltipPosition:"right",positionTop:-15,positionLeft:15},icon:"assets/dock/find-element.png",command:()=>{let T=Ki.filter(Ki.map(this.cy?.elements("node"),G=>({alias:G.data().alias,label:G.data().label,id:this.base16.decode(G.data().id)})),G=>G.alias),k={};Ki.each(T,G=>{let Y=this.base16.encode(G.alias),ce=this.cy?.$(`#${Y}`);ce&&ce.length>0?(G.target={id:G.alias,label:ce[0].data().label},k[Y]?k[Y].aliases.push(G):k[Y]={label:ce[0].data().label,aliases:[G]}):this.raiseError("Unknown target",G.alias)}),this.alias=[],Ki.each(k,(G,Y)=>{let ce={key:Y,label:`${G.label} #${this.base16.decode(Y)}`,data:{id:this.base16.decode(Y),label:G.label},expandedIcon:"pi pi-folder-open",collapsedIcon:"pi pi-folder",children:[]};Ki.each(G.aliases,Se=>{ce.children?.push({key:this.base16.encode(Se.id),label:`${Se.label} #${Se.id}`,leaf:!0,icon:"pi pi-fw pi-clone",data:{id:Se.id,label:Se.label}})}),this.alias.push(ce)}),this.displayFinder=!0}}],this.dockBottomItems=[],this.responsiveOptions=[{breakpoint:"1024px",numVisible:3},{breakpoint:"768px",numVisible:2},{breakpoint:"560px",numVisible:1}],this.nodeItem=[{label:"Drop",icon:"pi pi-trash",command:()=>{!this.currentSelectedNode||this.cy?.$(`#${this.currentSelectedNode.data().id}`).remove()}},{label:"Clone",icon:"pi pi-clone",command:()=>{this.onCloneNode(this.currentSelectedNode),this.onClearAnySelection()}},{label:"Edit",icon:"pi pi-book",command:()=>{if(!this.currentSelectedNode||!this.currentStyle)return;let T=Ki.uniq(Ki.map(Ki.filter(this.styleService.findOne(this.currentStyle)?.tags,G=>G.label&&"node"==G.selector),G=>({label:G.label,value:G.label})));T.unshift({label:"",value:""});let k=this.currentSelectedNode.data().clone?this.currentSelectedNode.data().clone:this.currentSelectedNode.data().id;this.captureData={id:this.currentSelectedNode.data().id,clone:this.base16.decode(k),label:this.currentSelectedNode.data().label,alias:this.currentSelectedNode.data().alias,tag:this.currentSelectedNode.data().tag,group:this.currentSelectedNode.data().group,tags:T},setTimeout(()=>{this.captureData.tag=this.currentSelectedNode.data().tag},100),this.displaySelectionNode=!0}},{label:"Documentation",icon:"pi pi-eye",command:()=>{this.displayMarkdown=!0}},{label:"Link to node",icon:"pi pi-upload",command:()=>{this.edgehandles=this.cy.edgehandles(),this.edgehandles.start(this.currentSelectedNode),this.onClearAnySelection()}},{label:"Goto to alias",icon:"pi pi-arrow-right",command:()=>{this.onSelectAlias(this.currentSelectedNode)}}],this.edgeItem=[{label:"Drop",icon:"pi pi-trash",command:()=>{!this.currentSelectedEdge||this.cy?.$(`#${this.currentSelectedEdge.data().id}`).remove()}},{label:"Edit",icon:"pi pi-book",command:()=>{if(!this.currentSelectedEdge||!this.currentStyle)return;let T=Ki.uniq(Ki.map(Ki.filter(this.styleService.findOne(this.currentStyle)?.tags,k=>k.label&&"edge"==k.selector),k=>({label:k.label,value:k.label})));T.unshift({label:"",value:""}),this.captureData={id:this.currentSelectedEdge.data().id,label:this.currentSelectedEdge.data().label,tag:this.currentSelectedEdge.data().tag,tags:T},setTimeout(()=>{this.captureData.tag=this.currentSelectedEdge.data().tag},100),this.displaySelectionEdge=!0}},{label:"Documentation",icon:"pi pi-eye",command:()=>{this.displayMarkdown=!0}}],this.coreItem=[{label:"Add new node",icon:"pi pi-plus",command:()=>{this.createNewNode()}},{label:"Ruleset",icon:"pi pi-share-alt",items:[{label:"Apply rules",icon:"pi pi-wallet",command:()=>{let T=Ki.map(this.cy?.nodes(),k=>{let G=[];Ki.each(k.incomers(),ce=>{ce.source().id()&&G.push(ce)});let Y=[];return Ki.each(k.outgoers(),ce=>{ce.source().id()&&Y.push(ce)}),{node:{id:k.data().id,data:{id:this.base16.decode(k.data().id),label:k.data().label,tag:k.data().tag}},edges:{data:{incomers:Ki.map(G,ce=>({source:ce.source().data().id,target:ce.target().data().id,data:{source:this.base16.decode(ce.source().data().id),target:this.base16.decode(ce.target().data().id)}})),outgoers:Ki.map(Y,ce=>({source:ce.source().data().id,target:ce.target().data().id,data:{source:this.base16.decode(ce.source().data().id),target:this.base16.decode(ce.target().data().id)}})),indegree:k.indegree(!0),outdegree:k.outdegree(!0)}}}});this.logger.info("Execute",this.currentRules,T),this.rulesService.execute(this.currentRules,T).then(k=>{this.logger.info(k),this.jsonRules=k.treenodes,this.currentRulesFail=k.failure.length,this.currentRulesSuccess=k.success.length,this.displaySidebar=!0})}}]},{label:"Change properties",icon:"pi pi-wallet",command:()=>{this.changeProperties()}},{label:"Group",icon:"pi pi-share-alt",items:[{label:"Toggle",icon:"pi pi-undo",command:()=>{this.onToggleGroupEnabled()}},{label:"Group Statistics",icon:"pi pi-chart-pie",command:()=>{let T=Ki.sortBy(Ki.filter(Ki.map(this.cy?.nodes(),G=>G.data().group),G=>G&&""!==G)),k={};Ki.each(T,G=>{k[G]?k[G]+=1:k[G]=1}),this.dataGroupStatistics={datasets:[{data:Ki.map(k,(G,Y)=>G),backgroundColor:Ki.map(k,(G,Y)=>{switch(G){case 1:return"#42A5F5";case 2:return"#66BB6A";case 3:return"#FFA726";case 4:return"#26C6DA";default:return"#7E57C2"}}),label:"My dataset"}],labels:Ki.map(k,(G,Y)=>Y)},this.displayGroupStatistic=!0}},{label:"Tag Statistics",icon:"pi pi-chart-pie",command:()=>{let T=Ki.sortBy(Ki.filter(Ki.map(this.cy?.nodes(),G=>G.data().tag),G=>G&&""!==G&&void 0===G.alias)),k={};Ki.each(T,G=>{k[G]?k[G]+=1:k[G]=1}),this.dataTagStatistics={datasets:[{data:Ki.map(k,(G,Y)=>G),backgroundColor:Ki.map(k,(G,Y)=>{switch(G){case 1:return"#42A5F5";case 2:return"#66BB6A";case 3:return"#FFA726";case 4:return"#26C6DA";default:return"#7E57C2"}}),label:"My dataset"}],labels:Ki.map(k,(G,Y)=>Y)},this.displayTagStatistic=!0}}]},{label:"Layout",icon:"pi pi-sitemap",items:[{label:"Bread First Layout",icon:"pi pi-ellipsis-h",command:()=>{this.breadFirstLayoutOptions&&this.cy?.layout(this.breadFirstLayoutOptions).run(),this.onClearAnySelection()}},{label:"Concentric Layout",icon:"pi pi-ellipsis-h",command:()=>{this.concentricLayoutOptions&&this.cy?.layout(this.concentricLayoutOptions).run(),this.onClearAnySelection()}},{label:"Circle Layout",icon:"pi pi-ellipsis-h",command:()=>{this.circleLayoutOptions&&this.cy?.layout(this.circleLayoutOptions).run(),this.onClearAnySelection()}},{label:"Grid Layout",icon:"pi pi-ellipsis-h",command:()=>{this.gridLayoutOptions&&this.cy?.layout(this.gridLayoutOptions).run(),this.onClearAnySelection()}},{label:"Cose Layout",icon:"pi pi-ellipsis-h",command:()=>{this.coseLayoutOptions&&this.cy?.layout(this.coseLayoutOptions).run(),this.onClearAnySelection()}}]},{label:"Zoom",icon:"pi pi-circle",items:[{label:"0.1",icon:"pi pi-ellipsis-h",command:()=>{this.cy?.zoom(.1)}},{label:"0.2",icon:"pi pi-ellipsis-h",command:()=>{this.cy?.zoom(.2)}},{label:"0.3",icon:"pi pi-ellipsis-h",command:()=>{this.cy?.zoom(.3)}},{label:"0.5",icon:"pi pi-ellipsis-h",command:()=>{this.cy?.zoom(.5)}},{label:"0.6",icon:"pi pi-ellipsis-h",command:()=>{this.cy?.zoom(.6)}},{label:"0.75",icon:"pi pi-ellipsis-h",command:()=>{this.cy?.zoom(.75)}},{label:"1",icon:"pi pi-ellipsis-h",command:()=>{this.cy?.zoom(1)}},{label:"fit",icon:"pi pi-ellipsis-h",command:()=>{this.cy?.fit()}}]},{label:"Draw mode",icon:"pi pi-share-alt",items:[{label:"Toggle",icon:"pi pi-undo",command:()=>{this.onToggleDrawModeEnabled()}}]}],this.captureData={},this.currentSelectedNode=void 0,this.currentSelectedEdge=void 0,this.dataGroupStatistics={datasets:[{data:[],backgroundColor:[],label:"Dataset"}],labels:[]},this.displayGroupStatistic=!1,this.dataTagStatistics={datasets:[{data:[],backgroundColor:[],label:"Dataset"}],labels:[]},this.displayTagStatistic=!1,this.config={dark:!1};let I=this.preferenceService.findOne("default");I&&(this.preferences=I),this.subscriptions.push(this.graph$.subscribe(T=>{if(T){if(this.cy?.startBatch(),this.cy?.boxSelectionEnabled(this.boxSelectionEnabled),this.cy?.nodes().remove(),this.cy?.edges().remove(),l.info("graph",T),this.applyChangeProperties({style:T.style,rule:T.rules}),this.graphs=[],T.nodes&&(this.graphs.push(this.buildChildNodes(T)),this.allNodes=Ki.map(T.nodes,k=>({label:this.base16.decode(k.id),value:this.base16.decode(k.id)})),this.allNodes.unshift({label:"",value:""}),this.cy?.add(Ki.map(T.nodes,k=>{let G={data:{id:k.id,label:k.label,cdata:k.cdata,alias:k.alias,group:k.group,tag:k.tag},position:{x:k.x,y:k.y}};return k.parent&&(G.data.parent=k.parent),G}))),T.edges&&(this.graphs.push(this.buildChildEdges(T)),this.cy?.add(Ki.map(T.edges,k=>({data:{id:k.id,label:k.label,cdata:k.cdata,source:k.source||"",target:k.target||"",_source:p.decode(k.source||""),_target:p.decode(k.target||""),tag:k.tag}})))),this.cy){this.edgehandles&&this.edgehandles.destroy(),Ki.each(this.rules,Y=>{Y.destroy()}),this.rules=[];let k=Ki.uniq(Ki.map(Ki.filter(T.nodes,Y=>""!==Y.group),Y=>Y.group)),G=this.cy;this.edgehandles=G.edgehandles(),Ki.each(k,Y=>{let ce=this.cy?.$(`[group = "${Y}"]`);this.rules.push(G.automove({nodesMatching:ce,reposition:"drag",dragWith:ce}))})}this.cy?.endBatch(),this.cy?.fit()}}))}ngOnInit(){this.route.queryParams.subscribe(e=>{this.id=e.id}),this.items=this.coreItem}onSelectAlias(e){if(e.data()&&e.data().alias){let n=this.cy?.$(`#${this.base16.encode(e.data().alias)}`);this.logger.info("Alias",e.data().alias,n),this.cy?.center(n)}}findNode(e){if(void 0!==e.clone&&""!=e.clone){let n=this.cy?.$(`#${this.base16.encode(e.clone)}`);if(e.id!==this.base16.encode(e.clone)&&n&&n.length>0)return void this.raiseError("While checking unicity of",e.clone)}return this.cy?.$(`#${e.id}`)}applyNodeUpdate(e){this.findNode(e)?.data("clone",this.base16.encode(e.clone)).data("alias",e.alias).data("group",e.group?e.group:"").data("label",e.label).data("tag",e.tag),this.displaySelectionNode=!1}applyLabelize(e){e.clone=`${e.tag}/${e.label.toLowerCase().replace(" ","-")}`}applyEdgeUpdate(e){this.cy?.$(`#${e.id}`).data("label",e.label).data("tag",e.tag),this.displaySelectionEdge=!1}applyChangeProperties(e){this.cy?.style(this.retrieveStyle(e.style)),setTimeout(()=>{this.logger.info(`Apply style ${e.style}`),this.currentStyle=e.style;let n=this.styleService.findOne(this.currentStyle)?.tags.length;n&&(this.currentStyleCounter=n),this.logger.info("Apply ruleset",e.rule),this.currentRules=e.rule;let r=this.rulesService.findOne(this.currentRules)?.rules.length;r?this.currentRulesCounter=r:this.logger.warn(`Ruleset ${e.rules} empty`),this.displayChangeProperties=!1},1)}onSelectCurrentAlias(e){let n=this.cy?.$(`#${this.selectedAlias.key}`);this.cy?.center(n),this.displayFinder=!1}onSelectItem(e){let n=this.cy?.$(`#${e.node.data.uid}`);this.cy?.center(n),this.displaySidebar=!1}ngOnDestroy(){this.subscriptions&&Ki.each(this.subscriptions,e=>{e.unsubscribe()})}onHide(){this.onClearAnySelection()}createNewNode(){let e=this.base16.encode(`default@${C4()}`);this.cy?.add([{data:{id:e,label:"default",cdata:"TODO ...",tag:""},position:{x:0,y:0}}]);let n=this.cy?.$(`#${e}`);this.cy?.center(n)}changeProperties(){this.captureData={styles:Ki.map(this.styleService.findAll(),e=>e.id),style:"default",rules:Ki.map(this.rulesService.findAll(),e=>e.id),rule:"default"},this.displayChangeProperties=!0}nodeSelect(e){let r=this.cy?.$(`#${this.selectedNode.key}`);this.cy?.center(r),this.displayFinder=!1}onToggleGroupEnabled(){this.groupEnabled?(this.groupEnabled=!1,Ki.each(this.rules,e=>{e.disable()})):(this.groupEnabled=!0,Ki.each(this.rules,e=>{e.enable()})),this.onClearAnySelection()}onToggleDrawModeEnabled(){this.drawModeEnabled?(this.edgehandles.disableDrawMode(),this.drawModeEnabled=!1):(this.edgehandles.enableDrawMode(),this.drawModeEnabled=!0),this.onClearAnySelection()}buildChildNodes(e){return{key:"1",label:"Nodes",data:{uid:1,label:"Nodes"},expandedIcon:"pi pi-folder-open",collapsedIcon:"pi pi-folder",children:Ki.map(e.nodes,n=>({key:n.id,leaf:!0,label:n.label,data:{_id:n.id,label:n.label},icon:"pi pi-fw pi-clone",children:[]}))}}buildChildEdges(e){return{key:"1",label:"Edges",data:{uid:2,label:"Edges"},expandedIcon:"pi pi-folder-open",collapsedIcon:"pi pi-folder",children:Ki.map(e.edges,n=>({key:n.id,leaf:!0,label:n.label,data:{_id:n.id,_source:n.source,_target:n.target,label:n.label},icon:"pi pi-fw pi-share-alt",children:[]}))}}onFileDropped(e){let n=e[0].name;this.id&&n.startsWith("style")&&n.endsWith(".json")?this.onFileStyleDropped(e):this.id&&n.startsWith("rule")&&n.endsWith(".json")?this.onFileRuleDropped(e):this.id&&n.endsWith(".gexf")&&this.onFileGexfDropped(e)}onFileGexfDropped(e){this.messageService.add({key:"bc",severity:"info",summary:"Upload/GEXF",detail:`Filename ${e[0].name}`}),this.id&&this.graphsService.uploadHandler(e[0],this.id,this.id).then(n=>{this.graphsService.store(n,r=>{r.label=n.label,r.style=n.style,r.rules=n.rules,r.nodes=n.nodes,r.edges=n.edges}),this.store.dispatch(I1({graph:n}))})}onFileStyleDropped(e){var n=this;let r;if(!this.currentStyle)return void this.messageService.add({key:"bc",severity:"warning",summary:"No style selected"});r=this.currentStyle,this.messageService.add({key:"bc",severity:"info",summary:"Upload/Style",detail:`Filename ${e[0].name}`});let s=new FileReader;s.addEventListener("loadend",tv(function*(){let o={id:r,tags:JSON.parse(s.result+"")};n.styleService.store(o,l=>{l.tags=o.tags}),n.store.dispatch(K2({style:o}))})),s.readAsText(e[0])}onFileRuleDropped(e){var n=this;let r=e[0].name;this.messageService.add({key:"bc",severity:"info",summary:"Upload/Rule",detail:`Filename ${r}`});let s=new FileReader;s.addEventListener("loadend",tv(function*(){n.rulesService.load(r,JSON.parse(s.result+""))})),s.readAsText(e[0])}ngAfterViewInit(){this.cy=Z1({container:this.myGraph?.nativeElement,layout:{name:"preset"},motionBlur:!0,selectionType:"single",boxSelectionEnabled:!1}),this.preferences.grid&&this.cy?.snapToGrid(),this.cy.on("mouseover",e=>{this.logger.debug(e)}),this.cy.on("mouseout",e=>{this.logger.debug(e)}),this.cy.on("dblclick","node",e=>{this.items=this.nodeItem,this.selectorDisplay=this.base16.decode(e.target.id()),this.onDblClickNode(e)}),this.cy.on("dblclick","edge",e=>{this.items=this.edgeItem,this.selectorDisplay=this.base16.decode(e.target.id()),this.onDblClickEdge(e)}),this.cy.on("cxttap","node",e=>{this.items=this.nodeItem,this.selectorDisplay=this.base16.decode(e.target.id()),this.onRightClickNode(e)}),this.cy.on("cxttap","edge",e=>{this.items=this.edgeItem,this.selectorDisplay=this.base16.decode(e.target.id()),this.onRightClickEdge(e)}),this.cy.on("click",e=>{this.onClearAnySelection()}),this.cy.on("click","node",e=>{this.items=this.nodeItem,this.selectorDisplay=this.base16.decode(e.target.id()),this.onLeftClickNode(e)}),this.cy.on("click","edge",e=>{this.items=this.edgeItem,this.selectorDisplay=this.base16.decode(e.target.id()),this.onLeftClickEdge(e)}),this.cy.on("mouseover",e=>{}),this.route.params.subscribe(e=>{this.id=e.label;let n=this.graphsService.findOne(this.id+"");n&&this.store.dispatch(I1({graph:n}))})}onRightClickNode(e){this.logger.info("[NODE] rclick",e)}onRightClickEdge(e){this.logger.info("[EDGE] rclick",e)}onDblClickNode(e){this.logger.info("[NODE] dblclick",e)}onDblClickEdge(e){this.logger.info("[EDGE] dblclick",e)}onLeftClickNode(e){this.logger.info("[NODE] lclick",e),this.selectorDisplay=this.base16.decode(e.target.id()),this.currentSelectedEdge=void 0,this.currentSelectedNode=e.target[0];let n="";if(this.currentSelectedNode.data().cdata&&(n=this.currentSelectedNode.data().cdata,this.currentSelectedNode.data().alias)){let r=this.base16.encode(this.currentSelectedNode.data().alias),s=this.cy?.$(`#${r}`);s&&(n=s[0].data().cdata)}this.captureData=this.currentSelectedNode.data().cdata?{editable:!1,isAlias:!!this.currentSelectedNode.data().alias,selectElementId:this.currentSelectedNode.data().id,selectElementCdata:zL.render(n),selectElementRawCdata:n}:{editable:!1,isAlias:!!this.currentSelectedNode.data().alias,selectElementId:this.currentSelectedNode.data().id,selectElementCdata:"",selectElementRawCdata:n},this._lockedElement=this.currentSelectedNode.locked()}onLeftClickEdge(e){this.logger.info("[EDGE] lclick",e),this.selectorDisplay=this.base16.decode(e.target.id()),this.currentSelectedNode=void 0,this.currentSelectedEdge=e.target[0],this.captureData=this.currentSelectedEdge.data().cdata?{selectElementId:this.currentSelectedEdge.data().id,selectElementCdata:zL.render(this.currentSelectedEdge.data().cdata),selectElementRawCdata:this.currentSelectedEdge.data().cdata}:{selectElementId:this.currentSelectedEdge.data().id,selectElementCdata:"",selectElementRawCdata:this.currentSelectedEdge.data().cdata}}previewNewCData(e){e.selectElementCdata=zL.render(e.selectElementRawCdata)}applyNewCData(e){this.logger.info("Apply new data on id",this.base16.decode(e.selectElementId)),this.cy?.$(`#${e.selectElementId}`).data("cdata",e.selectElementRawCdata),this.displayMarkdown=!1}onCloneNode(e){1===e.length&&e[0].isNode()&&this.cy?.add(Ki.map(e,n=>{let s=`${this.base16.decode(n.data()?.id).split("@")[0]}@${C4()}`,o={data:{id:this.base16.encode(s),label:n.data()?.label,cdata:"TODO ...",group:"",tag:n.data()?.tag},position:{x:n.position().x+50,y:n.position().y+50}};return n.data()?.parent&&(o.data.parent=n.data()?.parent),this.logger.info("Clone node",o),o}))}onCloneEdge(e){}onClearAnySelection(){this.logger.info("Clear selection"),this.selectorDisplay="",this.currentSelectedEdge=void 0,this.currentSelectedNode=void 0,this.items=this.coreItem}retrieveStyle(e){let n=this.styleService.findOne(e)?.tags,r=[];Ki.each(n,o=>{if(o.label)r.push({selector:`${o.selector}[tag = '${o.label}']`,css:o.style?.css?o.style?.css:{}});else{let l={selector:`${o.selector}`,css:o.style?.css?o.style?.css:{}};void 0===l.css.content&&(l.css.content=u=>{let p=u.data().cdata?"*":"",v=u.data().alias?"@":"";return u.data().label&&u.data().group?`${u.data().label} (${u.data().group}) ${p} ${v}`:u.data().label?`${u.data().label} ${p} ${v}`:""}),r.push(l)}});let s=[];return Ki.each(r,o=>{s.push(o)}),s}handleChangeLock(e){if(!this.currentSelectedNode)return;this.logger.info("lock",this.currentSelectedNode.data().id);let n=this.cy?.$(`#${this.currentSelectedNode.data().id}`);this.logger.info("lock",n),e.checked?(n?.lock(),n?.animate({style:{opacity:.2}},{duration:1e3})):(n?.animate({style:{opacity:1}},{duration:1e3}),n?.unlock())}resolveClonedId(e){let n=this.cy?.$(`#${e}`)[0];return n?.data().clone||n?.data().id||void 0}toSysGraph(e,n,r,s){let o={};return this.logger.info(`toSysGraph style: ${r}`),{id:e,style:r||"default",rules:s||"default",label:n,nodes:Ki.map(this.cy?.nodes(),l=>{let u={id:l.data().clone||l.data().id||"",label:l.data().label||"",x:l.position().x||0,y:l.position().y||0,size:10,color:"0",group:l.data().group,tag:l.data().tag};return o[l.data().id||""]=u,l.data().alias&&(u.alias=l.data().alias),l.data().cdata&&(u.cdata=l.data().cdata),l.data().parent&&(u.parent=l.data().parent),u}),edges:Ki.map(this.cy?.edges(),l=>{let u=this.resolveClonedId(l.data().source),p=this.resolveClonedId(l.data().target);if(void 0===u||void 0===p)throw this.logger.error("Internal error while resolving source and target"),new String("Internal error while resolving source and target");let v={id:l.data().id||"",label:l.data().label||"",source:u,target:p,cdata:l.data().cdata,tag:l.data().tag};return l.data().cdata&&(v.cdata=l.data().cdata),v})}}gexf(e,n,r,s){let o=this.toSysGraph(e,n,r,s);this.clipboardService.copyTextToClipboard(this.graphsService.toGexf(o).join("\n"))}graphml(e,n,r,s){let o=this.toSysGraph(e,n,r,s);this.clipboardService.copyTextToClipboard(this.graphsService.toGraphml(o).join("\n"))}raiseError(e,n){this.messageService.add({key:"lc",severity:"error",summary:e,detail:n})}updateChartOptions(){this.chartOptions=this.config&&this.config.dark?this.getDarkTheme():this.getLightTheme()}getLightTheme(){return{plugins:{legend:{labels:{color:"#495057"}}},scales:{r:{grid:{color:"#ebedef"}}}}}getDarkTheme(){return{plugins:{legend:{labels:{color:"#ebedef"}}},scales:{r:{grid:{color:"rgba(255,255,255,0.2)"}}}}}}return i.\u0275fac=function(e){return new(e||i)(Xt(L1),Xt(w4),Xt(A4),Xt(x4),Xt(P1),Xt(Id),Xt(fm),Xt(Oz),Xt(ny),Xt(i_))},i.\u0275cmp=_r({type:i,selectors:[["app-graph-cytoscape"]],viewQuery:function(e,n){if(1&e&&(Tr(Wge,5),Tr(jge,5),Tr($ge,5)),2&e){let r;Wi(r=ji())&&(n.myGraph=r.first),Wi(r=ji())&&(n.myPng=r.first),Wi(r=ji())&&(n.myTreeTable=r.first)}},decls:98,vars:119,consts:[[3,"target","model"],["cm",""],["position","bottom-center","key","bc"],["position","left-center","key","lc"],[1,"dock-window"],["position","left",3,"model"],["pTemplate","item"],["position","right",3,"model"],["position","bottom",3,"model"],["area",""],[1,"flex"],["dropZoneDirective","",1,"w-12",3,"fileDropped"],["id","cytoscape",1,"cytoscape-container"],["myCytoscape",""],[1,"flex","flex-row-reverse","flex-wrap"],[1,"flex","align-items-center","justify-content-center"],["pBadge","","pTooltip","Fail ruleset","severity","danger",1,"pi","pi-thumbs-down","mr-4","p-text-secondary",2,"font-size","2rem",3,"value"],["pBadge","","pTooltip","Successful ruleset","severity","success",1,"pi","pi-thumbs-up","mr-4","p-text-secondary",2,"font-size","2rem",3,"value"],["pBadge","","pTooltip","Global ruleset counter","severity","success",1,"pi","pi-briefcase","mr-4","p-text-secondary",2,"font-size","2rem",3,"value"],["pBadge","","pTooltip","Tags",1,"pi","pi-book","mr-4","p-text-secondary",2,"font-size","2rem",3,"value"],["inputId","binary",3,"ngModel","binary","readonly","ngModelChange"],["header","Current node",3,"visible","modal","maximizable","draggable","resizable","visibleChange","onHide"],["class","grid p-fluid",4,"ngIf"],["pTemplate","footer"],["header","Current edge",3,"visible","modal","maximizable","draggable","resizable","visibleChange","onHide"],["header","Change graph properties",3,"visible","modal","maximizable","draggable","resizable","visibleChange","onHide"],[1,"grid","p-fluid"],[1,"col-12"],["pTooltip","Styles","tooltipPosition","top"],["scrollHeight","120px","defaultLabel","Select a style","filterBy","label",3,"options","ngModel","filter","showClear","ngModelChange"],["pTooltip","Rules","tooltipPosition","top"],["scrollHeight","120px","defaultLabel","Select a ruleset","filterBy","label",3,"options","ngModel","filter","showClear","ngModelChange"],["header","Documentation",3,"visible","modal","maximizable","draggable","resizable","visibleChange","onHide"],[3,"style",4,"ngIf"],["header","Group statistics",3,"visible","modal","maximizable","draggable","resizable","visibleChange"],["type","polarArea",3,"data","options"],["header","Tag statistics",3,"visible","modal","maximizable","draggable","resizable","visibleChange"],["header","Png file to export","header","Png export",3,"modal","visible","visibleChange"],["src",""],["myPng",""],["header","Find element(s)",3,"modal","visible","visibleChange"],["header","Alias"],["selectionMode","single","filterMode","strict",3,"value","selection","filter","selectionChange","onNodeSelect"],["myTreeAlias",""],["header","Node(s) and edges(s)"],["myTree",""],["header","Ruleset report",3,"modal","visible","visibleChange"],["styleClass","p-treetable-sm",3,"value"],["pTemplate","header"],["pTemplate","body"],["width","100%",3,"src","alt"],[1,"p-inputgroup"],[1,"p-inputgroup-addon"],["pTooltip","Internal ID to override current ID on next save or diagram export","tooltipPosition","top",1,"pi","pi-bookmark"],["type","text","pInputText","","placeholder","",3,"ngModel","ngModelChange"],["icon","pi pi-check","label","Labelize","styleClass","p-button-text","pTooltip","Rebuild id with tag and label","tooltipPosition","top",3,"click"],["pTooltip","Label","tooltipPosition","top",1,"pi","pi-hashtag"],["pTooltip","Alias","tooltipPosition","top"],["scrollHeight","120px","defaultLabel","Select an alias","filterBy","label",1,"p-col",3,"options","ngModel","filter","showClear","ngModelChange"],["pTooltip","Tags","tooltipPosition","top"],["scrollHeight","120px","defaultLabel","Select a tag","filterBy","label",3,"options","ngModel","filter","showClear","ngModelChange"],["pTooltip","Group","tooltipPosition","top",1,"pi","pi-clone"],["pTooltip","Locked item ?","tooltipPosition","top",1,"p-inputgroup-addon"],["inputId","binary",3,"ngModel","binary","ngModelChange","onChange"],["type","text","pInputText","","placeholder","Locked","readonly","true"],["icon","pi pi-check","label","Ok","styleClass","p-button-text",3,"click"],["pTooltip","Source","tooltipPosition","top",1,"pi","pi-cog"],["type","text","pInputText","","placeholder","","readonly","true",3,"ngModel","ngModelChange"],["pTooltip","Target","tooltipPosition","top",1,"pi","pi-cog"],["pTemplate",""],["pInputTextarea","",3,"ngModel","keyup","ngModelChange"],[3,"innerHTML"],["styleClass","p-button-text","onLabel","Editable","offLabel","Readonly","offIcon","pi pi-times",3,"ngModel","onIcon","ngModelChange",4,"ngIf"],["icon","pi pi-save","label","Update","styleClass","p-button-text",3,"click",4,"ngIf"],["styleClass","p-button-text","onLabel","Editable","offLabel","Readonly","offIcon","pi pi-times",3,"ngModel","onIcon","ngModelChange"],["icon","pi pi-save","label","Update","styleClass","p-button-text",3,"click"],[3,"rowNode"],[4,"ngIf"],[3,"click",4,"ngIf"],[1,"pi","pi-check"],[1,"pi","pi-times"],[3,"click"],[1,"pi","pi-search"]],template:function(e,n){1&e&&(Bn(0,"p-contextMenu",0,1)(2,"p-toast",2)(3,"p-toast",3),Ke(4,"div",4)(5,"p-dock",5),$e(6,qge,1,2,"ng-template",6),Je(),Ke(7,"p-dock",7),$e(8,Xge,1,2,"ng-template",6),Je(),Ke(9,"p-dock",8),$e(10,Yge,1,2,"ng-template",6),Je()(),Ke(11,"div",null,9)(13,"div",10)(14,"div",11),mn("fileDropped",function(s){return n.onFileDropped(s)}),Bn(15,"div",12,13),Je()(),Ke(17,"div")(18,"div",14)(19,"div",15),Bn(20,"i",16),Je(),Ke(21,"div",15),Bn(22,"i",17),Je(),Ke(23,"div"),li(24,"\xa0\xa0\xa0"),Je(),Ke(25,"div"),li(26,"\xa0\xa0\xa0"),Je(),Ke(27,"div",15),Bn(28,"i",18),Je(),Ke(29,"div"),li(30,"\xa0\xa0\xa0"),Je(),Ke(31,"div",15),li(32),Je(),Ke(33,"div"),li(34,"\xa0\xa0\xa0"),Je(),Ke(35,"div",15),Bn(36,"i",19),Je(),Ke(37,"div"),li(38,"\xa0\xa0\xa0"),Je(),Ke(39,"div",15),li(40),Je(),Ke(41,"div"),li(42,"\xa0\xa0\xa0"),Je(),Ke(43,"p-checkbox",20),mn("ngModelChange",function(s){return n.groupEnabled=s}),Je(),Ke(44,"div"),li(45,"\xa0\xa0\xa0"),Je(),Ke(46,"div",15),li(47,"Group enabled:"),Je(),Ke(48,"div"),li(49,"\xa0\xa0\xa0"),Je(),Ke(50,"p-checkbox",20),mn("ngModelChange",function(s){return n.drawModeEnabled=s}),Je(),Ke(51,"div"),li(52,"\xa0\xa0\xa0"),Je(),Ke(53,"div",15),li(54,"Draw mode enabled:"),Je(),Ke(55,"div"),li(56,"\xa0\xa0\xa0"),Je(),Ke(57,"div",15),li(58),Je()()(),Ke(59,"p-dialog",21),mn("visibleChange",function(s){return n.displaySelectionNode=s})("onHide",function(){return n.onHide()}),$e(60,Kge,28,19,"div",22),$e(61,Zge,1,0,"ng-template",23),Je(),Ke(62,"p-dialog",24),mn("visibleChange",function(s){return n.displaySelectionEdge=s})("onHide",function(){return n.onHide()}),$e(63,Qge,19,10,"div",22),$e(64,Jge,1,0,"ng-template",23),Je(),Ke(65,"p-dialog",25),mn("visibleChange",function(s){return n.displayChangeProperties=s})("onHide",function(){return n.onHide()}),Ke(66,"div",26)(67,"div",27)(68,"div",28)(69,"p-dropdown",29),mn("ngModelChange",function(s){return n.captureData.style=s}),Je()()(),Ke(70,"div",27)(71,"div",30)(72,"p-dropdown",31),mn("ngModelChange",function(s){return n.captureData.rule=s}),Je()()()(),$e(73,eme,1,0,"ng-template",23),Je(),Ke(74,"p-dialog",32),mn("visibleChange",function(s){return n.displayMarkdown=s})("onHide",function(){return n.onHide()}),$e(75,rme,3,3,"p-splitter",33),$e(76,ome,2,3,"p-splitter",33),$e(77,cme,2,2,"ng-template",23),Je(),Ke(78,"p-dialog",34),mn("visibleChange",function(s){return n.displayGroupStatistic=s}),Bn(79,"p-chart",35),Je(),Ke(80,"p-dialog",36),mn("visibleChange",function(s){return n.displayTagStatistic=s}),Bn(81,"p-chart",35),Je(),Ke(82,"p-dialog",37),mn("visibleChange",function(s){return n.displayExportPng=s}),Bn(83,"img",38,39)(85,"img"),Je(),Ke(86,"p-dialog",40),mn("visibleChange",function(s){return n.displayFinder=s}),Ke(87,"p-tabView")(88,"p-tabPanel",41)(89,"p-tree",42,43),mn("selectionChange",function(s){return n.selectedAlias=s})("onNodeSelect",function(s){return n.onSelectCurrentAlias(s)}),Je()(),Ke(91,"p-tabPanel",44)(92,"p-tree",42,45),mn("selectionChange",function(s){return n.selectedNode=s})("onNodeSelect",function(s){return n.nodeSelect(s)}),Je()()()(),Ke(94,"p-dialog",46),mn("visibleChange",function(s){return n.displaySidebar=s}),Ke(95,"p-treeTable",47),$e(96,ume,11,0,"ng-template",48),$e(97,_me,14,11,"ng-template",49),Je()()()),2&e&&(de("target",oo(12))("model",n.items),Ie(5),de("model",n.dockLeftItems),Ie(2),de("model",n.dockRightItems),Ie(2),de("model",n.dockBottomItems),Ie(5),to(uo(105,bme)),Ie(6),l0("value",n.currentRulesFail),Ie(2),l0("value",n.currentRulesSuccess),Ie(6),l0("value",n.currentRulesCounter),Ie(4),yc("Ruleset: ",n.currentRules,""),Ie(4),l0("value",n.currentStyleCounter),Ie(4),yc("Style: ",n.currentStyle,""),Ie(3),de("ngModel",n.groupEnabled)("binary",!0)("readonly",!0),Ie(7),de("ngModel",n.drawModeEnabled)("binary",!0)("readonly",!0),Ie(8),yc("Current selection: ",n.selectorDisplay,""),Ie(1),to(uo(106,Cme)),de("visible",n.displaySelectionNode)("modal",!0)("maximizable",!0)("draggable",!0)("resizable",!1),Ie(1),de("ngIf",n.currentSelectedNode),Ie(2),to(uo(107,wme)),de("visible",n.displaySelectionEdge)("modal",!0)("maximizable",!0)("draggable",!0)("resizable",!1),Ie(1),de("ngIf",n.currentSelectedEdge),Ie(2),to(uo(108,Ame)),de("visible",n.displayChangeProperties)("modal",!0)("maximizable",!0)("draggable",!0)("resizable",!1),Ie(4),to(uo(109,tx)),de("options",n.captureData.styles)("ngModel",n.captureData.style)("filter",!0)("showClear",!0),Ie(3),to(uo(110,tx)),de("options",n.captureData.rules)("ngModel",n.captureData.rule)("filter",!0)("showClear",!0),Ie(2),to(uo(111,n5)),de("visible",n.displayMarkdown)("modal",!0)("maximizable",!0)("draggable",!0)("resizable",!1),Ie(1),de("ngIf",!n.captureData.isAlias&&n.captureData.editable),Ie(1),de("ngIf",n.captureData.isAlias||!n.captureData.editable),Ie(2),to(uo(112,r5)),de("visible",n.displayGroupStatistic)("modal",!0)("maximizable",!0)("draggable",!0)("resizable",!1),Ie(1),to(uo(113,s5)),de("data",n.dataGroupStatistics)("options",n.chartOptions),Ie(1),to(uo(114,r5)),de("visible",n.displayTagStatistic)("modal",!0)("maximizable",!0)("draggable",!0)("resizable",!1),Ie(1),to(uo(115,s5)),de("data",n.dataTagStatistics)("options",n.chartOptions),Ie(1),to(uo(116,n5)),de("modal",!0)("visible",n.displayExportPng),Ie(4),to(uo(117,xme)),de("modal",!0)("visible",n.displayFinder),Ie(3),de("value",n.alias)("selection",n.selectedAlias)("filter",!0),Ie(3),de("value",n.graphs)("selection",n.selectedNode)("filter",!0),Ie(2),to(uo(118,Ime)),de("modal",!0)("visible",n.displaySidebar),Ie(1),de("value",n.jsonRules))},dependencies:[ho,za,W1,Y1,S4,rv,z2,LA,fC,xae,E4,C0,uC,oy,D4,M4,O4,J1,bue,Due,V4,Oge,e5,Hge,PS],styles:[".cytoscape-container[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:0;overflow:hidden}"]}),i})(),Dme=(()=>{class i{constructor(e,n,r){this.messageService=e,this.databaseService=n,this.logger=r}uploadHandler(e){return new Promise(n=>{let r=new FileReader;r.addEventListener("loadend",tv(function*(){for(var s=new Uint8Array(r.result),o=s.length,l=[];o--;)l[o]=String.fromCharCode(s[o]);var u=window.btoa(l.join(""));n(u)})),r.readAsArrayBuffer(e)})}}return i.\u0275fac=function(e){return new(e||i)(qn(fm),qn(Nz),qn(Id))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Lme=["myImg"];function Pme(i,t){1&i&&(Ke(0,"pre"),li(1,"Drop here"),Je())}function Rme(i,t){1&i&&Bn(0,"img",2,3),2&i&&de("src",be().viewer,Xh)}const kme=function(){return{height:"256px"}};let Ome=(()=>{class i{constructor(e,n,r,s){this.logger=e,this.messageService=n,this.clipboardService=r,this.converterService=s,this.viewer="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAgAElEQVR4nO3dT8hsW3rX8edUvfd27unb/iFR9NJpK90d2+hInAiJKHrVBjmke6Akk0hwboYOVFicQzqSIIZGBEVQcKLQoFwjIgYRB04jUTCgkmijgkZDHCR0MB73es9blV1v7T9rV63az289+7tgD5K367PqWWtX/Z573npX2ccf/5H3u+u97rJrRn7c0+Pf7114eHh4eHh4yl6oYvDw8PDw8PDKEbfJ8fDw8PDw8Fw918nx8PDw8PDw1vdcJ8fDw8PDw8Nb33OdHA8PDw8PD8/Hc50cDw8PDw8Pz8dznRwPDw8PDw/Px3OdHA8PDw8PD8/Hc50cDw8PDw8Pz8cLVQweHh4eHh5emReqGDw8PDw8PLwrvVDF4OHh4eHh4RH+eHh4eHh4eEqT4+Hh4eHh4RH+eHh4eHh4eHf2QhWDh4eHh4eHV+aFKgYPDw8PDw+vzAtVDB4eHh4eHl6ZF6oYPDw8PDw8vDIvVDF4eHh4eHh4xUCcYvDw8PDw8PDKEbfJ8fDw8PDw8Fw918nx8PDw8PDw1vdcJ8fDw8PDw8Nb33OdHA8PDw8PD8/Hc50cDw8PDw8Pz8dznRwPDw8PDw/Px3OdHA8PDw8PD8/Hc50cDw8PDw8Pz8cLVQweHh4eHh5emReqGDw8PDw8PLwrvVDF4OHh4eHh4RH+eHh4eHh4eEqT4+Hh4eHh4RH+eHh4eHh4eHf2QhWDh4eHh4eHV+aFKgYPDw8PDw+vzAtVDB4eHh4eHl6ZF6oYPDw8PDw8vDIvVDF4eHh4eHh4xUCcYvDw8PDw8PDKEbfJ8fDw8PDw8Fw918nx8PDw8PDw1vdcJ8fDw8PDw8Nb33OdHA8PDw8PD8/Hc50cDw8PDw8Pz8dznRwPDw8PDw/Px3OdHA8PDw8PD8/Hc50cDw8PDw8Pz8cLVQweHh4eHh5emReqGDw8PDw8PLwrvVDF4OHh4eHh4RH+eHh4eHh4eEqT4+Hh4eHh4RH+eHh4eHh4eHf2QhWDh4eHh4eHV+aFKgYPDw8PDw+vzAtVDB4eHh4eHl6ZF6oYPDw8PDw8vDIvVDF4eHh4eHh4xUCcYvDw8PDw8PDKEbfJ8fDw8PDw8Fw918nx8PDw8PDw1vdcJ8fDw5v2Hh4evrLb7f52/+p+9LeuvZ5bt3r5+SmvHx4eXoWhXgweXkRvv9+/efHixdvj1f3o6qvv1PLy81NePzw8vGHPdXI8PLx5r98AmFj4P2sAJNcPDw9v2HOdHA8Pb947NgAmGP69BkB2/fDw8IY918nx8PDmvd1u99pEwz9f+fkprx8eHt6w5zo5Hh7evNf9KJlo+D95qWa96vuBhxfFC1UMHl5QL5lu+F/VADS+H3h4IbxQxeDhBfWS6Yb/4gYgwH7g4cX0QhWDhxfDS6Yb/osagCD7gYcXzwtVDB5eHC+ZbvgXNwCB9gMPL5YXqhg8vFheMt3wL2oAgu0HHl4cL1QxeHjxvGS64T/bAAisHx4eHuGPh9ekl0w3/CcbAJH1w8PDG3lAnGLw8GJ6yXTDf7QBEFo/PDy8kQfFKQYPL6aXTDf8BxsAsfXDw8MbeWCcYvDwYnrJdMP/ogEQXD88PLyRB8cpBg8vppdMN/zPGgDR9cPDwxsB4hSDhxfTS6Yb/qcGQHj98PDwxhC3yfHw8EpGMt3wf2wAxNcPDw+v1lAvBg8vkteNJBz+xwZAdv3w8PAqDfVi8PCiebvd7rVw+L/Nz095/fDw8CoM9WLw8CJ6+/3+jWr458fn56e8fnh4eMOe6+R4eHjzXr8BMLHwf9YASK4fHh7esOc6OR4e3rx3bABMMPx7DYDs+uHh4Q17rpPj4eHNe/l37CYa/vl6+gxAtXrV9wMPL4rnOjkeHt68Z4VfBzx0rfTXA6lmver7gYcXxQtVDB5eUC+Zbvhf1QA0vh94eCG8UMXg4QX1kumG/+IGIMB+4OHF9EIVg4cXw0umG/6LGoAg+4GHF88LVQweXhwvmW74FzcAgfYDDy+WF6oYPLxYXjLd8C9qAILtBx5eHC9UMXh48bxkuuE/2wAIrB8eHh7hj4fXpJdMN/wnGwCR9cPDwxt5QJxi8PBiesl0w3+0ARBaPzw8vJEHxSkGDy+ml0w3/AcbALH1w8PDG3lgnGLw8GJ6yXTD/6IBEFw/PDy8kQfHKQYPL6aXTDf8zxoA0fXDw8MbAeIUg4cX00umG/6nBkB4/fDw8MYQt8nx8PBKRjLd8H9sAMTXDw8Pr9ZQLwYPL5LXjSQc/scGQHb98PDwKg31YvDwonm73e61cPi/zc9Pef3w8PAqDPVi8PAievv9/o1q+OfH5+envH54eHjDnuvkeHh4816/ATCx8H/WAEiuHx4e3rDnOjkeHt68d2wATDD8ew2A7Prh4eENe66T4+HhzXv5d+wmGv75evoMQLV61fcDDy+K5zo5Hh7evGeFXwc8dK301wOpZr3q+4GHF8ULVQweXlAvmW74X9UANL4feHghvFDF4OEF9ZLphv/iBiDAfuDhxfRCFYOHF8NLphv+ixqAIPuBhxfPC1UMHl4cL5lu+Bc3AIH2Aw8vlheqGDy8WF4y3fAvagCC7QceXhwvVDF4ePG8ZLrhP9sACKwfHh4e4Y+H16SXTDf8JxsAkfXDw8MbeUCcYvDwYnrJdMN/tAEQWj88PLyRB8UpBg8vppdMN/wHGwCx9cPDwxt5YJxi8PBiesl0w/+iARBcPzw8vJEHxykGDy+ml0w3/M8aANH1w8PDGwHiFIOHF9NLphv+pwZAeP3w8PDGELfJ8fDwSkYy3fB/bADE1w8PD6/WUC8GDy+S140kHP7HBkB2/fDw8CoN9WLw8KJ5u93utXD4v83PT3n98PDwKgz1YvDwInr7/f6Navjnx+fnp7x+eHh4w57r5Hh4ePNevwEwsfB/1gBIrh8eHt6w5zo5Hh7evHdsAEww/HsNgOz64eHhDXuuk+Ph4c17+XfsJhr++Xr6DEC1etX3Aw8viuc6OR4e3rxnhV8HPHSt9NcDqWa96vuBhxfFC1UMHl5QL5lu+F/VADS+H3h4IbxQxeDhBfWS6Yb/4gYgwH7g4cX0QhWDhxfDS6Yb/osagCD7gYcXzwtVDB5eHC+ZbvgXNwCB9gMPL5YXqhg8vFheMt3wL2oAgu0HHl4cL1QxeHjxvGS64T/bAAisHx4eHuGPh9ekl0w3/CcbAJH1w8PDG3lAnGLw8GJ6yXTDf7QBEFo/PDy8kQfFKQYPL6aXTDf8BxsAsfXDw8MbeWCcYvDwYnrJdMP/ogEQXD88PLyRB8cpBg8vppdMN/zPGgDR9cPDwxsB4hSDhxfTS6Yb/qcGQHj98PDwxhC3yfHw8EpGMt3wf2wAxNcPDw+v1lAvBg8vkteNJBz+xwZAdv3w8PAqDfVi8PCiebvd7rVw+L/Nz095/fDw8CoM9WLw8CJ6+/3+jWr458fn56e8fnh4eMOe6+R4eHjzXr8BMLHwf9YASK4fHh7esOc6OR4e3rx3bABMMPx7DYDs+uHh4Q17rpPj4eHNe/l37CYa/vl6+gxAtXrV9wMPL4rnOjkeHt68Z4VfBzx0rfTXA6lmver7gYcXxQtVDB5eUC+Zbvhf1QA0vh94eCG8UMXg4QX1kumG/+IGIMB+4OHF9EIVg4cXw0umG/6LGoAg+4GHF88LVQweXhwvmW74FzcAgfYDDy+WF6oYPLxYXjLd8C9qAILtBx5eHC9UMXh48bxkuuE/2wAIrB8eHh7hj4fXpJdMN/wnGwCR9cPDwxt5QJxi8PBiesl0w3+0ARBaPzw8vJEHxSkGDy+ml0w3/AcbALH1w8PDG3lgnGLw8GJ6yXTD/6IBEFw/PDy8kQfHKQYPL6aXTDf8zxoA0fXDw8MbAeIUg4cX00umG/6nBkB4/fDw8MYQt8nx8PBKRjLd8H9sAMTXDw8Pr9ZQLwYPL5LXjSQc/scGQHb98PDwKg31YvDwonm73e61cPi/zc9Pef3w8PAqDPVi8PAievv9/o1q+OfH5+envH54eHjDnuvkeHh4816/ATCx8H/WAEiuHx4e3rDnOjkeHt68d2wATDD8ew2A7Prh4eENe66T4+HhzXv5d+wmGv75evoMQLV61fcDDy+K5zo5Hh7evGeFXwc8dK301wOpZr3q+4GHF8ULVQweXlAvmW74X9UANL4feHghvFDF4OEF9ZLphv/iBiDAfuDhxfRCFYOHF8NLphv+ixqAIPuBhxfPC1UMHl4cL5lu+Bc3AIH2Aw8vlheqGDy8WF4y3fAvagCC7QceXhwvVDF4ePG8ZLrhP9sACKwfHh4e4Y+H16SXTDf8JxsAkfXDw8MbeUCcYvDwYnrJdMN/tAEQWj88PLyRB8UpBg8vppdMN/wHGwCx9cPDwxt5YJxi8PBiesl0w/+iARBcPzw8vJEHxykGDy+ml0w3/M8aANH1w8PDGwHiFIOHF9NLphv+pwZAeP3w8PDGELfJ8fDwSkYy3fB/bADE1w8PD6/WUC8GDy+S140kHP7HBkB2/fDw8CoN9WLw8KJ5u93utXD4v83PT3n98PDwKgz1YvDwInr7/f6Navjnx+fnp7x+eHh4w57r5Hh4ePNevwEwsfB/1gBIrh8eHt6w5zo5Hh7evHdsAEww/HsNgOz64eHhDXuuk+Ph4c17+XfsJhr++Xr6DEC1etX3Aw8viuc6OR4e3rxnhV8HPHSt9NcDqWa96vuBhxfFC1UMHl5QL5lu+F/VADS+H3h4IbxQxeDhBfWS6Yb/4gYgwH7g4cX0QhWDhxfDS6Yb/osagCD7gYcXzwtVDB5eHC+ZbvgXNwCB9gMPL5YXqhg8vFheMt3wL2oAgu0HHl4cL1QxeLW8j7vri8LPb0teMt3wn20ABNZvK15+vX4s/Pzw1LxQxeDV8v5Ed/1qd33TnjUBIs9va14y3fCfbABE1m8L3qG7fr67vtVdrwSfH56iF6oYvBreMfyPb+6nJkDk+W3RS6Yb/qMNgND6RfcO9i78j/sx2AQEqhevlheqGLxbvefhf2oCuiD4osDz26qXTDf8BxsAsfWL7B3sPPwHm4BA9eLV9EIVg3eLNxb+x3D45suXH3xPoHpb8pLphv9FAyC4flG9gw2H/1kTEKhevNpeqGLw7hX+x+vYBLReb2teMt3wP2sARNcvonew6fA/NQEPDw9fCVAv3j28UMXg3TP8T01A/nXAis8Pr9cACIb/qQEQXr9o3sHKwv+4p9967733vtpwvXj38kIVg3fv8D/+7OKvA+70/PDejWS64f/YAIivXyTvYMvC/9QEPP1LwL2fH16DnuvkeE2F/+ImQKTeZr1uJOHwPzYAsusXyDvYdeF/3N/JPxEUrBdvBc91crwmw7+4CRCpt2lvt9u9Fg7/t/n5Ka9fEO9gt4X/8VrUBARaP7xbh3oxeKuG/2wTIFJv895+v3+jGv758fn5Ka9fAO9gdcJ/URMQaP3wRjzXyfGaD//RJkCk3hBevwEwsfB/1gBIrl/j3sHqhn9RExBo/fAmPNfJ8Vb17hX+F02ASL1hvGMDYILh32sAZNevYe9g9wn/ySYg0PrhzXiuk+Ot5t07/E9NwAtODKzu5d+xm2j45+vpMwDV6lXfj5W8g903/AebgEDrh1fguU6Ot4q3VvgfPU4MrOxZ4dcBD10r/fVAqlmv+n6s4B1snfA/awICrR9eoReqGLyLsXb4Hy9ODKzrJdMN/6sagMb3457ewdYN/1MTwImB2/NCFYN3NrzC/9QEvODEwFpeMt3wX9wABNiPe3kH8wn/o8GJgVv3QhWzXc87/I8/48TAOl4y3fBf1AAE2Y97eAfzDf9TE8CJgRv1QhWzXU8l/Bc3ASLrp+gl0w3/4gYg0H7U9g6mEf5HjxMDt+aFKma7nlr4FzcBIuun6iXTCYerGoBg+1HTO5hW+B8vTgzciheqmO16quE/2wSIrJ+yl0wrHBY1AALrp+odTDP8FzUBgfZje16oYrbrqYf/aBMgsn7qXjK9cChqAETWT9E7mHb4FzUBgfZjm16oYrbptRL+F02AyPq14CXT3t9Uud7BEcg7WBvhP9kEBNqP7Xqhitme11r4n5qAF5wYuMRLpr2/qXK9FyOQd7C2wn+wCQi0H9v2QhWzLa/V8D96nBhY7iXT3t9Uud6zEcg7WJvhf9YEBNoPvFDFbMdrPfyPFycGlo1k2vubKtd7GoG8g7Ud/qcmgBMDA3mhitmGFyX8T03AC04MnBvJtPc3Va7XgnkHixH+R4MTA6N4oYqJ70UL/+PPODFweiTT3t8kvn6Ef32PEwMDea6T4xV5X7KY4b+4CRDZj9W8biTx/U3K6+fo5fs539eKr7caXn4/+tId1w9vBc91crxF3huL8+YxdHFi4IC32+1eK+9vfn7K6+fkHSzmf/n3vZ+44/rhreC5To53lXfWBDT85rG4CRDdj7t7+/3+jfL+5uenvH6EP+GPN+y5To53tffYBDT85rG4CRDfj7t6/QbABPe31wBIrh/hT/jjDXuuk+Nd7+12ux9t9M1jcRPQwn7c0zs2ACa6v08NgOz6Ef6EP96w5zo53m1e98b7tcbePBY3AS84MfD9/Dt209iPQe/pMwDV6lXfD8L/LuuH5+C5To53u5f/JcDaePO41tv8iYFW+HXAQ9dK+5tq1qu+H4R/9fXDc/JCFbNhb/CvA+auht6Mtn5iYDKt/Xjupcr1Lh6EP+GPt9wLVczGvUVNQINvRls+MTCZ3n70f54q17toEP6EP14lL1Qx2/OKmoCG34y2emJgMs39WNwABNmPPA5G+N+yfnhqXqhitutNNgENvxktbgJE9qOGl0x3P4obgED7cTDC/5b1w1PzQhWDx4mBWvtxq5dMez9S5XpnB+FP+ONV8kIVg3ccnBiotR+3eMm09yNVrndyEP6EP14lL1QxeM8HJwZq7ce1XjLt/UiV6x0dhD/hj1fRC1UM3oXHiYFa+3Gll0x7P1LlegcH4U/441X2QhWDN+hxYuBt6yfgJdPej1S53otB+BP+eHfwQhWDN+pxYuBt6+fsJdPej1S53rNB+BP+eHfyQhWDN+dxYuBt6+flJdPej1S53tMg/Al/vDt6oYrBK/E4MfC29fPwkmnvR6pcrzl7ByP8b1k/vFa8UMXglXqcGHjb+q3tJdPejyS+foQ/4Y9Xa6gXg1fkcWLgbeu3mteNJL4fSXn9CH/CH6/SUC8Gb5HHiYFa+zHo7Xa718r7kZ+f8voR/oQ/XoWhXgzeVR4nBmrtx4W33+/fKO9Hfn7K60f4E/54w57r5HgyHicGau3HmddvAArrXXU/eg2A5PoR/oQ/3rDnOjmejseJgVr70feODcDCelfbj6cGQHb9CP+7rR9e457r5HhaHicG3rZ+9/Ly79ivrHeV/Xj6DEC1egl/wh9vHc91cjw9jxMDb1u/e3hW+HXAI/WusR+pZr2EP+GPt44Xqhi8ah4nBt62frW9dGO9996PVLnexYPwJ/zxlnuhisGr6nFi4G3rV9NLFeq9536kyvUuGoQ/4Y9XyQtVDN6tHicG3rZ+tbxUqd577UeqXG/xIPwJf7xKXqhi8Gp5nBh42/rV8FLFeu+xH6lyvUWD8Cf88Sp5oYrBq+1xYqDvfqTK9dZev1S53tlB+BP+eJW8UMXg3cvjxEC//Uji65cq1zs5CH/CH6+SF6oYvHt7nBjosx9JfP1S5XpHB+FP+ONV9EIVg3d3jxMDXfYjia9fqlzv4CD8CX+8yl6oYvBW8Tgx8Lb1u8JL4uuXKtd7MQh/wh/vDl6oYvBW8zgx8Lb1W+gl8fVLles9G4Q/4Y93Jy9UMXhre5wYeNv6lY60Ur3XeqlyvadB+BP+eHf0QhWD5+FxYuBt61cy0or1XuOkyvXaQu9ghP8t64e3VS9UMXheHicG3rZ+cyOJr18i/Al/vHY918nxQnicGHjb+k2NJL5+ifAn/PHa9FwnxwvlcWLgHfZjt9u9Vl6//PwIf8Ifrz3PdXK8kB4nBlbej/1+/0Z5/fLzI/wJf7z2PNfJ8cJ6nBhYcT/6DYDi+vUaAMKf8MdryHOdHC+ux4mB9fbj2ACort9TA0D4E/54jXmuk+PF9jgx8Lb1O175d+wi9Q56T58BqFYv4X+X9cPDu/BcJ8eL73Fi4G3r9/G7f6ZLQvUOealmvYR/9fXDwxv0QhWDJ+txYuBt65fE6n3upcr19sfBCP9b1g8Pb+o/LuIUgyftcWLg9euXBOvt/zxVrvc4Dkb437J+eHjLvFDF4Kl5nBh43fol0XoXNwCEP+GPJ+qFKgZP1ePEwOXrl4TrLW4ACH/CH0/UC1UMnrrHiYHL1i+J15umal1Y78EI/1vWDw+P8MeT9zgxsHz9kni9aeyJL6z3YIT/LeuHh0f44zXjcWJg2fol8XrT2BMn/Al/PGEvVDF4zXmcGFi0fkm83jS2v4Q/4Y8n7IUqBq9JjxMDZ0cSrzdN7S/hT/jjiXqhisFr1uPEwMmRxOtNc/tL+JePFl+/eI16oYrBa93jxMDhkcTrTYX72x8HI/wvRuOvX7zWvFDF4EXwODHwciTxevPzI/wJf7zWvFDF4EXxODHwfCTxehPhT/jjteu5To6HNzA4MfA3RhKvNxH+hD9em57r5Hh4E4MTAz9+/FPJ18r15udH+BP+eO15rpPj4RWMzZ8YuN/v3yjXm58f4U/447XnuU6Oh1c4Nn1iYL8BUKy31wAQ/oVD/PWGtxHPdXI8vFJvyycGHhsA1XqfGgDCv3C08HrD24bnOjke3hJvqycG5t+xizy/Qe/pMwDPt+5ghP/FaOn1hhffc50cD2+pt8UTA63w64Ad603Ptu5ghP/FaPH1hhfbC1UM3ma8rZ0YmMSe33Mv9bbuYIT/xWj89YYX1AtVDN6mvC2dGJgEn1//5+npeR6M8L8YQV5veFvwQhWDF93byomBSfT59RuAgxH+FyPY6w0vsheqGLyteFs4MfDrws8vXz9phP/FEHl94OER/nihvegnBv6y+PP7JfHnR/jj4RH+eIG96CcG4hH+eHh1vVDF4G3di35iIB7hj4dXzwtVDN7mvQ2cGIhH+OPh1fFCFYOH9/EmTgzEI/zx8G73QhWDh/d0beDEQDzCHw/vNi9UMXh45170EwPxCH88vOu9UMXg4V160U8MxCP88fCu80IVg4c37EU/MRCP8MfDu9pznRwPbwUv+omBeIQ/Ht59h3oxeHgTI/qJgXiEPx7efYZ6MXh4BYMTA/EIfzy8JY9roRg8vMLBiYHb9gh/PLzu8a6T4+F5eZwYuFmP8MfDe/JcJ8fD8/Q4MXBzHuGPh9fzXCfHw/P2ODFwMx7hj4f3zAtVDB7elR4nBsb2CH88vAEvVDF4eDd4nBgY0yP88fBKvVDF4OEt8zgxMJZH+OPhEf54eMXej5lGeOHd5v3Y1CYPDZH7Dw+P8MfDc/Q4MbBtj//yx8Mj/PHwrvY4MbBNj/DHwyP88fBu9jgxsC2P8MfDW+KFKgYPr7LHiYHNeIQ/Ht5SL1QxeHh38DgxUN4j/PHwrvFCFYOHdyePEwNlPcIfD+9aL1QxeHj39TgxUMsj/PHwbvFCFYOHd3+PEwM1PMIfD+9WL1QxeHjreJwYSPjj4YXxXCfHw2vQm2wCGg5XdY/wx8Mj/PHw3D1ODCT88fCa9Vwnx8ML4HFiIOGPh9ek5zo5Hl4QjxMDCX88vOY818nx8KJ4nBhI+OPhtea5To6HF8nb73c/3li4qnt8pS8e3h0918nx8KJ5nBjIf/nj4bXihSoGD0/E48RAwh8PT94LVQwenpDHiYGEPx5eW16oYvDwfD1ODCT88fDa8EIVg4en4XFiIOGPh6fthSoGD0/L48RAwh8PT9MLVQwenqbHiYGEPx6elidazEfd9aeP18PDww901w/2rh/o/3zpVcH73sr1ngZeaI8TAwl/vNu9/P675vv9Uu+jyvUWj8We6M3wyrTf3D6pXK/hbcPjxEDCH+9mL7//qt3P/etV5XqLxlWe6M3w2AAIv7l9IrF5eE16+/3+a2L3M+GP15JX1AA4vj5mGwCZ/VC8GbrxSvzN7ROJzcNr1tvwiYGEP96t3mwD4Pz6mGwABNbv7MFyN8PDw8NXlN/cujfvfyyxeXite1s7MZDwx6vhTTYAAq+P0QZAZP3OALmboRtfVX5ze9YAyK0fXlPeVk4MJPzxanmjDYDI62OwARBav3PEbfIRr98AmOCbW68BiPBiwvP38rfeKYV1bY9v9cOr6Q02AEKvj4sGQGz9bhv3LubYAJjom9tTAyCzeXghvKgnBvJf/ni1vYsGQOz1cdYACK7f9WONYvJnAEz4ze2pAahWr9LNgOfqRTsxkPDHu4d31gAIvj5ODYDo+l031irGeucALL1Wuhk+qVmvys2AJ+FFOTGQ8Me7l3dqAERfH68q12v38lwnn/CuagBWvBkWNwAt3Ax4Ml7rJwYS/nj39B4bAOHXxyvx9Tt5rpNPeIsbgJVvhkUNQCs3A56O1/CJgYQ/3l29bnwiHP7HBkB2/fqe6+QT3qIGwOFmKG4A1F9MeLpegycGEv54d/fyZ7CEw/9t/gyb8vr1PdfJJ7ziBsCpEyxqAFp4MeFpew2dGEj4463iPW8ATOz1kf+KTXn9+p7r5BNeUQPg+M9Asw1AKy8mvCY89RMDCX+81bx+A2Bi4f+sAZBcv77nOvmEN9sAOP8OaLIBEFg/vHie6omBhD/eqt6xATDB8O81ALLrN+mJ3AyTDYDAB0BGGwCR9cOL6RU1AYQ/XmQvNwAmGv75evoMQLV6V9sPoZthtAEQCP/RBkBo/fDieionBhL+eC6eFX4d8NC10utj9uuAl9S7yn6I3QyDDYBI+A82AGLrhxfb8z4xkPDH8/SuagBWfH0sbgBc90PwZrhoAITC/6IBEFw/vPie14mBhD+et7e4AVg5PxY1AK77IXoznDUAYuF/1ri61v4AABCHSURBVACIrh/eNry1Twwk/PEUvEUNgEN+FDcA7vshejOcGgDB8D81AO6bh7d5b8UTAwl/PBWvuAFwyo+iBkBiP0RvhscGQDT8HxsAic3Dw/t4lRMDCX88Ja+oAXDMj9kGQGY/FG+GbrwSDv9jA+C/eXh4T9cdTwwk/PHUvNkGwDk/JhsAgfU7e7DczZD/jlI4/N/mv0OV2Dw8vHOv9omBhD+eojfZAAj8x+NoAyCyfmeA3M2QT1JSDf/8+GcNgNz64W3aq3ViIOGPp+qNNgAC4T/aAAit3zniNvmI128ATCz8nzUAEV5MePG8W08MJPzxlL3BBkAk/AcbALH1u23cu5hjA2CC4d9rAGQ2Dw9vYFx7YiDhj6fuXTQAQuF/0QAIrt/1Y41i8mcATDT8ew1AtXqVbga8UN7SEwMJf7wWvLMGQCz8zxoA0fW7bqxVjBV+HfDQtdLNMPt1wEvqVbkZ8EJ6pScGEv54rXinBkAw/E8NgPD6nTzXySe8qxqAFW+GxQ1ACzcDXlhv7sRAwh+vJe+xARAN/8cGQHz9Tp7r5BPe4gZg5ZthUQPQys2AF9ebODGQ8MdryuvGJ8Lhf2wAZNev77lOPuEtagAcbobiBkD9xYS3HW/gxEDCH685L38GSzj83+bPsCmvX99znXzCK24AnDrBogaghRcT3ra83omBhD9ek97zBsCEwj8/Pv8Vm/L69T3XySe8ogbA8Z+BZhuAVl5MeJv0viz+/PDwRr1+A2Bi4f+sAZBcv77nOvmEN9sAOP8OaLIBEFg/PDw8vJDesQEwwfDvNQCy6zfpidwMkw2AwAdARhsAkfXDw8PDC+nlBsBEwz9fT58BqFbvavshdDOMNgAC4T/aAAitHx4eHl5Izwq/DnjoWik/Zr8OeEm9q+yH2M0w2ACIhP9gAyC2fnh4eHhRvasagBXzY3ED4LofgjfDRQMgFP4XDYDg+uHh4eFF9RY3ACvnx6IGwHU/RG+GswZALPzPGgDR9cPDw8OL6i1qABzyo7gBcN8P0Zvh1AAIhv+pAXDfPDw8PLztecUNgFN+FDUAEvshejM8NgCi4f/YAEhsHh4eHt72vKIGwDE/ZhsAmf1QvBm68Uo4/I8NgP/m4eHh4W3Pm20AnPNjsgEQWL+zB8vdDPnvKIXD/23+O1SJzcPDw8PbnjfZAAj8x+NoAyCyfmeA3M2QT1JSDf/8+GcNgNz64eHh4QX2RhsAgfAfbQCE1u8ccZt8xOs3ACYW/s8agAgvJjw8PLyWvMEGQCT8BxsAsfW7bdy7mGMDYILh32sAZDYPDw8Pb0PeRQMgFP4XDYDg+l0/1igmfwbARMO/1wBUq1fpZsDDw8MT984aALHwP2sARNfvurFWMVb4dcBD10o3w+zXAS+pV+VmwMPDw2vAOzUAguF/agCE1+/kuU4+4V3VAKx4MyxuAFq4GfDw8PAa8B4bANHwf2wAxNfv5LlOPuEtbgBWvhkWNQCt3Ax4eHh46l43PhEO/2MDILt+fc918glvUQPgcDMUNwDqLyY8PDy8lrz8GSzh8H+bP8OmvH59z3XyCa+4AXDqBIsagBZeTHh4eHgtec8bABMK//z4/FdsyuvX91wnn/CKGgDHfwaabQBaeTHh4eHhteT1GwATC/9nDYDk+vU918knvNkGwPl3QJMNgMD64eHh4YX0jg2ACYZ/rwGQXb9JT+RmmGwABD4AMtoAiKwfHh4eXkgvNwAmGv75evoMQLV6V9sPoZthtAEQCP/RBkBo/fDw8PBCelb4dcBD10r5Mft1wEvqXWU/xG6GwQZAJPwHGwCx9cPDw8OL6l3VAKyYH4sbANf9ELwZLhoAofC/aAAE1w8PDw8vqre4AVg5PxY1AK77IXoznDUAYuF/1gCIrh8eHh5eVG9RA+CQH8UNgPt+iN4MpwZAMPxPDYD75uHh4eFtzytuAJzyo6gBkNgP0ZvhsQEQDf/HBkBi8/Dw8PC25xU1AI75MdsAyOyH4s3QjVfC4X9sAPw3Dw8PD2973mwD4Jwfkw2AwPqdPVjuZsh/Rykc/m/z36FKbB4eHh7e9rzJBkDgPx5HGwCR9TsD5G6GfJKSavjnxz9rAOTWDw8PDy+wN9oACIT/aAMgtH7niNvkI16/ATCx8H/WAER4MeHh4eG15A02ACLhP9gAiK3fbePexRwbABMM/14DILN5eHh4eBvyLhoAofC/aAAE1+/6sUYx+TMAJhr+vQagWr1KNwMeHh6euHfWAIiF/1kDILp+1421irHCrwMeula6GWa/DnhJvSo3Ax4eHl4D3qkBEAz/UwMgvH4nz3XyCe+qBmDFm2FxA9DCzYCHh4fXgPfYAIiG/2MDIL5+J8918glvcQOw8s2wqAFo5WbAw8PDU/e68Ylw+B8bANn163uuk094ixoAh5uhuAFQfzHh4eHhteTlz2AJh//b/Bk25fXre66TT3jFDYBTJ1jUALTwYsLDw8NryXveAJhQ+OfH579iU16/vuc6+YRX1AA4/jPQbAPQyosJDw8PryWv3wCYWPg/awAk16/vuU4+4c02AM6/A5psAATWDw8PDy+kd2wATDD8ew2A7PpNeiI3w2QDIPABkNEGQGT98PDw8EJ6uQEw0fDP19NnAKrVu9p+CN0Mow2AQPiPNgBC64eHh4cX0rPCrwMeulbKj9mvA15S7yr7IXYzDDYAIuE/2ACIrR8eHh5eVO+qBmDF/FjcALjuh+DNcNEACIX/RQMguH54eHh4Ub3FDcDK+bGoAXDdD9Gb4awBEAv/swZAdP3w8PDwonqLGgCH/ChuANz3Q/RmODUAguF/agDcNw8PDw9ve15xA+CUH0UNgMR+iN4Mjw2AaPg/NgASm4eHh4e3Pa+oAXDMj9kGQGY/FG+GbrwSDv9jA+C/eXh4eHjb82YbAOf8mGwABNbv7MFyN0P+O0rh8H+b/w5VYvPw8PDwtudNNgAC//E42gCIrN8ZIHczdOP7VcM/P75rAP6JxObh4eHhbc/7KdMN/3z9qcr1Do4qnuLN0I0/phr+7xqAFz8jsXl4eHh42/P+jemGf77+cOV6L0Ztz3Xy596nPvWpP6ga/k/X//30p19+QWXz8PDw8DbiHbrr1003/PP1+yvWezFqe66TD3kffPBtv9d0w//o/b1a9SrdDHh4eHjC3t837fDP1xeF1+/6sVYxu93ud5p2+B+vv6S4fnh4eHjBvBfdlUw//PP12wXXb9BznXzCy1/48GumHf7H65921/d1115o/fDw8PAiePl99Q911z8zjff7uSvn1oPQ+k16rpPPeD9n+uHfv361u/5Ld/2noat7/MU19r8tufDw8PCCe/n9NL+vKr7fj13/vpXwz47r5DOe+nGPeHh4eHh4/esfthL+sw2AcyfzE9b+zYCHh4eHtxFvt9v9eCvhP9kACPwzxg9b4zcDHh4eHt52vIeHhz/XSviPfgZAIPzz+G5r/GbAw8PDw9uO9/Llyy+1Ev6Dnkj4H8cvWMM3Ax4eHh7eZrz/TPjX9f6utXsz4OHh4eFtxNvtdn+H8K/r/Vlr9GbAw8PDw9uO9/Cw/yHCv6737d31LWvwZsDDw8PD24z3rf1+l/Nq8SD8p8c/avBmwMPDw8PbjvcNu2K4569y+OfHPTw8/JkGbwY8PDw8vO14328Lh3v4Pz1INvzz47/whe/6sFvkX2zsZsDDw8PD24b3i901f6xub0iE/9MDZcP/aO33u7/W0M2Ah4eHh7cdL59aWzxkwv/pwdLhn6/PfObD7+x+9CvWxs2Ah4eHh7cNL39Z0UdWOKTC/wmQDv+e9zdM/2bAw8PDw9uO93UrHHLhf0TcJl/mfc6e/iSw9Apwc+Hh4eHhaXq/1l2/ywqGZPhfOxyL+eumezPg4eHh4W3H+0krGIR/Pe83ddd/M82bAQ8PDw9vG95/767fYjOD8K/v/ZDp3Qx4eHh4eNvxftBmhkheTnquk1/pveiuf2laNwMeHh4e3ja8n7aZIZSXk57r5Dd439Vdv2QaNwMeHh4e3ja8/91dB5sYgnk56rlOfqP3qrv+n8W6ufDw8PDwNL2cN1+1iSGcl4Oe6+S3et34eqCbCw8PDw9P1/urNjHU83LIa7qYz33uOz/c7Xb/OsjNhYeHh4en6f0rmzjvv4W8HPKaL+Y7vuPbf9tu9+JnG7+58PDw8PA0vX/XXb/VRkZLeTnrtVjMhx9++tD96BeszZsLDw8PD0/T+2Z35e+iGRwt5mWo8O9539Nd/8Paurnw8PDw8DS9nCe/x0ZG43kpNHk97/Pd9R+sjZsLDw8PD0/T+/nu+pKNjCB5KTB5fe93dNfPmPbNhYeHh4en6f3b7vqsjYxQeRmqmN8Y+Yzmf2GaNxceHh4enqb3z7vrN9vIEMm3el6oYs7HvrtSd/266dxceHh4eHh6Xj7k56/Yu9wYHGL5VscLVczw+KP27pubIt2seHh4eHh1vPxhvz9pE0M4327zQhUzMna73Ufd9Y0gNyseHh4eXh3vH9i7z42NDvV8u8kLVcyM9/777/3x3e7FzzV8s+Lh4eHh3e79x+76ss2MlvLtKi9UMQXeZz/70We6H/1le/ZtgqVXkJsfDw8Pb4ve/+quv9hd32Yzo8V8W+yFKmaZ92F3/Yg9fT6g5Apw8+Ph4eFt0fuf9u5D4fkvxGZHgHy731AvZqH3aXvXCPys6dyseHh4eHi3e/l9/c9310srHMHyre5QL+ZG7/fZuz8FOftXgYZvfjw8PLytefmf+f9md32fLRxieXR3z3VyYS//Legf6K6/sNvtfqq7oX65oZsfDw8Pb0ver3Tv0z+93+/fvPfee19++fKD4a+5nRnCeXQ3z3XyVrzD4XOf+dSn3v/e7gb74e5HX+uub9i74yL/a3f9H4v1YsLDw8NT8/L7bH6/ze+7+f33R/P7cX5fzu/Pyvmh7LlOHszLHy7JXxv5+edXd6N//oMPPvjdL1++/NLxyv93/v8P/e/nLjw8PLwNePn99OJDeyLv9yE818nx8PDw8PDwfDzXyfHw8PDw8PB8vFDF4OHh4eHh4ZV5oYrBw8PDw8PDu9ILVQweHh4eHh4e4Y+Hh4eHh4enNDkeHh4eHh4e4Y+Hh4eHh4d3Zy9UMXh4eHh4eHhlXqhi8PDw8PDw8Mq8UMXg4eHh4eHhlXmhisHDw8PDw8Mr80IVg4eHh4eHh1cMxCkGDw8PDw8PrxxxmxwPDw8PDw/P1XOdHA8PDw8PD299z3VyPDw8PDw8vPU918nx8PDw8PDwfDzXyfHw8PDw8PB8PNfJ8fDw8PDw8Hw818nx8PDw8PDwfDzXyfHw8PDw8PB8vFDF4OHh4eHh4ZV5oYrBw8PDw8PDu9ILVQweHh4eHh4e4Y+Hh4eHh4enNDkeHh4eHh4e4Y+Hh4eHh4d3Zy9UMXh4eHh4eHhlXqhi8PDw8PDw8Mq8UMXg4eHh4eHhlXmhisHDw8PDw8Mr80IVg4eHh4eHh1cMxCkGDw8PDw8PrxxxmxwPDw8PDw/P1XOdHA8PDw8PD299z3VyPDw8PDw8vPU918nx8PDw8PDwfDzXyfHw8PDw8PB8PNfJ8fDw8PDw8Hw818nx8PDw8PDwfDzXyfHw8PDw8PB8vFDF4OHh4eHh4ZV5oYrBw8PDw8PDK/P+P4jnb7D01hqeAAAAAElFTkSuQmCC"}ngOnInit(){}onFileDropped(e){this.converterService.uploadHandler(e[0]).then(n=>{this.logger.info(n),n.startsWith("PHN2Z")&&(this.messageService.add({severity:"info",summary:"Copied to clipboard/SVG",detail:`Filename ${e[0].name}`}),this.viewer="data:image/svg+xml;base64,"+n,this.clipboardService.copyTextToClipboard("data:image/svg+xml;base64,"+n)),n.startsWith("iVBOR")&&(this.messageService.add({severity:"info",summary:"Copied to clipboard/PNG",detail:`Filename ${e[0].name}`}),this.viewer="data:image/png;base64,"+n,this.clipboardService.copyTextToClipboard("data:image/png;base64,"+n)),n.startsWith("UklGR")&&(this.messageService.add({severity:"info",summary:"Copied to clipboard/WEBP",detail:`Filename ${e[0].name}`}),this.viewer="data:image/webp;base64,"+n,this.clipboardService.copyTextToClipboard("data:image/webp;base64,"+n))})}}return i.\u0275fac=function(e){return new(e||i)(Xt(Id),Xt(fm),Xt(P1),Xt(Dme))},i.\u0275cmp=_r({type:i,selectors:[["app-converter"]],viewQuery:function(e,n){if(1&e&&Tr(Lme,5),2&e){let r;Wi(r=ji())&&(n.myImg=r.first)}},decls:4,vars:3,consts:[["dropZoneDirective","",3,"fileDropped"],["pTemplate",""],["alt","drop here",3,"src"],["myImg",""]],template:function(e,n){1&e&&(Bn(0,"p-toast"),Ke(1,"p-splitter",0),mn("fileDropped",function(s){return n.onFileDropped(s)}),$e(2,Pme,2,0,"ng-template",1),$e(3,Rme,2,1,"ng-template",1),Je()),2&e&&(Ie(1),to(uo(2,kme)))},dependencies:[za,LA,E4,PS]}),i})();const Fme=function(i,t,e){return{"p-inputswitch p-component":!0,"p-inputswitch-checked":i,"p-disabled":t,"p-focus":e}},Nme={provide:Cc,useExisting:cs(()=>o5),multi:!0};let o5=(()=>{class i{constructor(e){this.cd=e,this.trueValue=!0,this.falseValue=!1,this.onChange=new Fn,this.modelValue=!1,this.focused=!1,this.onModelChange=()=>{},this.onModelTouched=()=>{}}onClick(e,n){!this.disabled&&!this.readonly&&(e.preventDefault(),this.toggle(e),n.focus())}onInputChange(e){this.readonly||this.updateModel(e,e.target.checked)}toggle(e){this.updateModel(e,!this.checked())}updateModel(e,n){this.modelValue=n?this.trueValue:this.falseValue,this.onModelChange(this.modelValue),this.onChange.emit({originalEvent:e,checked:this.modelValue})}onFocus(e){this.focused=!0}onBlur(e){this.focused=!1,this.onModelTouched()}writeValue(e){this.modelValue=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}checked(){return this.modelValue===this.trueValue}}return i.\u0275fac=function(e){return new(e||i)(Xt(xo))},i.\u0275cmp=_r({type:i,selectors:[["p-inputSwitch"]],hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass",tabindex:"tabindex",inputId:"inputId",name:"name",disabled:"disabled",readonly:"readonly",trueValue:"trueValue",falseValue:"falseValue",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy"},outputs:{onChange:"onChange"},features:[Ao([Nme])],decls:5,vars:16,consts:[[3,"ngClass","ngStyle","click"],[1,"p-hidden-accessible"],["type","checkbox","role","switch",3,"checked","disabled","change","focus","blur"],["cb",""],[1,"p-inputswitch-slider"]],template:function(e,n){if(1&e){const r=vi();Ke(0,"div",0),mn("click",function(o){Pt(r);const l=oo(3);return Rt(n.onClick(o,l))}),Ke(1,"div",1)(2,"input",2,3),mn("change",function(o){return n.onInputChange(o)})("focus",function(o){return n.onFocus(o)})("blur",function(o){return n.onBlur(o)}),Je()(),Bn(4,"span",4),Je()}2&e&&(kr(n.styleClass),de("ngClass",Su(12,Fme,n.checked(),n.disabled,n.focused))("ngStyle",n.style),Ie(2),de("checked",n.checked())("disabled",n.disabled),vr("aria-label",n.ariaLabel)("id",n.inputId)("name",n.name)("tabindex",n.tabindex)("aria-checked",n.checked())("aria-labelledby",n.ariaLabelledBy))},dependencies:[no,Po],styles:['.p-inputswitch{position:relative;display:inline-block;-webkit-user-select:none;user-select:none}.p-inputswitch-slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0}.p-inputswitch-slider:before{position:absolute;content:"";top:50%}\n'],encapsulation:2,changeDetection:0}),i})(),Bme=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({imports:[Os]}),i})();function zme(i,t){if(1&i&&(Ke(0,"span",10),li(1),Je()),2&i){const e=be(2);vr("id",e.id+"_header"),Ie(1),ts(e.header)}}function Vme(i,t){1&i&&Ni(0)}function Ume(i,t){}function Hme(i,t){1&i&&$e(0,Ume,0,0,"ng-template")}function Gme(i,t){if(1&i){const e=vi();Ke(0,"button",11),mn("click",function(r){return Pt(e),Rt(be(2).onIconClick(r))})("keydown.enter",function(r){return Pt(e),Rt(be(2).onIconClick(r))}),Bn(1,"span"),Je()}if(2&i){const e=be(2);vr("aria-label","collapse button")("id",e.id+"-label")("aria-controls",e.id+"-content")("aria-expanded",!e.collapsed),Ie(1),kr(e.collapsed?e.expandIcon:e.collapseIcon)}}const Wme=function(i,t,e){return{"p-panel-icons-start":i,"p-panel-icons-end":t,"p-panel-icons-center":e}};function jme(i,t){if(1&i){const e=vi();Ke(0,"div",6),mn("click",function(r){return Pt(e),Rt(be().onHeaderClick(r))}),$e(1,zme,2,2,"span",7),su(2,1),$e(3,Vme,1,0,"ng-container",4),Ke(4,"div",8),$e(5,Hme,1,0,null,4),$e(6,Gme,2,6,"button",9),Je()()}if(2&i){const e=be();vr("id",e.id+"-titlebar"),Ie(1),de("ngIf",e.header),Ie(2),de("ngTemplateOutlet",e.headerTemplate),Ie(1),de("ngClass",Su(6,Wme,"start"===e.iconPos,"end"===e.iconPos,"center"===e.iconPos)),Ie(1),de("ngTemplateOutlet",e.iconTemplate),Ie(1),de("ngIf",e.toggleable)}}function $me(i,t){1&i&&Ni(0)}function qme(i,t){1&i&&Ni(0)}function Xme(i,t){if(1&i&&(Ke(0,"div",12),su(1,2),$e(2,qme,1,0,"ng-container",4),Je()),2&i){const e=be();Ie(2),de("ngTemplateOutlet",e.footerTemplate)}}const Yme=["*",[["p-header"]],[["p-footer"]]],Kme=function(i,t){return{"p-panel p-component":!0,"p-panel-toggleable":i,"p-panel-expanded":t}},Zme=function(i){return{transitionParams:i,height:"0",opacity:"0"}},Qme=function(i){return{value:"hidden",params:i}},Jme=function(i){return{transitionParams:i,height:"*",opacity:"1"}},eve=function(i){return{value:"visible",params:i}},tve=["*","p-header","p-footer"];let nve=0,ive=(()=>{class i{constructor(e){this.el=e,this.collapsed=!1,this.iconPos="end",this.expandIcon="pi pi-plus",this.collapseIcon="pi pi-minus",this.showHeader=!0,this.toggler="icon",this.collapsedChange=new Fn,this.onBeforeToggle=new Fn,this.onAfterToggle=new Fn,this.transitionOptions="400ms cubic-bezier(0.86, 0, 0.07, 1)",this.id="p-panel-"+nve++}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"header":this.headerTemplate=e.template;break;case"content":default:this.contentTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"icons":this.iconTemplate=e.template}})}onHeaderClick(e){"header"===this.toggler&&this.toggle(e)}onIconClick(e){"icon"===this.toggler&&this.toggle(e)}toggle(e){if(this.animating)return!1;this.animating=!0,this.onBeforeToggle.emit({originalEvent:e,collapsed:this.collapsed}),this.toggleable&&(this.collapsed?this.expand(e):this.collapse(e)),e.preventDefault()}expand(e){this.collapsed=!1,this.collapsedChange.emit(this.collapsed)}collapse(e){this.collapsed=!0,this.collapsedChange.emit(this.collapsed)}getBlockableElement(){return this.el.nativeElement.children[0]}onToggleDone(e){this.animating=!1,this.onAfterToggle.emit({originalEvent:e,collapsed:this.collapsed})}}return i.\u0275fac=function(e){return new(e||i)(Xt(Yn))},i.\u0275cmp=_r({type:i,selectors:[["p-panel"]],contentQueries:function(e,n,r){if(1&e&&(Ba(r,C1,5),Ba(r,za,4)),2&e){let s;Wi(s=ji())&&(n.footerFacet=s.first),Wi(s=ji())&&(n.templates=s)}},hostAttrs:[1,"p-element"],inputs:{toggleable:"toggleable",header:"header",collapsed:"collapsed",style:"style",styleClass:"styleClass",iconPos:"iconPos",expandIcon:"expandIcon",collapseIcon:"collapseIcon",showHeader:"showHeader",toggler:"toggler",transitionOptions:"transitionOptions"},outputs:{collapsedChange:"collapsedChange",onBeforeToggle:"onBeforeToggle",onAfterToggle:"onAfterToggle"},ngContentSelectors:tve,decls:7,vars:23,consts:[[3,"ngClass","ngStyle"],["class","p-panel-header",3,"click",4,"ngIf"],["role","region",1,"p-toggleable-content"],[1,"p-panel-content"],[4,"ngTemplateOutlet"],["class","p-panel-footer",4,"ngIf"],[1,"p-panel-header",3,"click"],["class","p-panel-title",4,"ngIf"],["role","tablist",1,"p-panel-icons",3,"ngClass"],["type","button","class","p-panel-header-icon p-panel-toggler p-link","pRipple","","role","tab",3,"click","keydown.enter",4,"ngIf"],[1,"p-panel-title"],["type","button","pRipple","","role","tab",1,"p-panel-header-icon","p-panel-toggler","p-link",3,"click","keydown.enter"],[1,"p-panel-footer"]],template:function(e,n){1&e&&(Bf(Yme),Ke(0,"div",0),$e(1,jme,7,10,"div",1),Ke(2,"div",2),mn("@panelContent.done",function(s){return n.onToggleDone(s)}),Ke(3,"div",3),su(4),$e(5,$me,1,0,"ng-container",4),Je(),$e(6,Xme,3,1,"div",5),Je()()),2&e&&(kr(n.styleClass),de("ngClass",ss(12,Kme,n.toggleable,!n.collapsed&&n.toggleable))("ngStyle",n.style),vr("id",n.id),Ie(1),de("ngIf",n.showHeader),Ie(1),de("@panelContent",n.collapsed?_i(17,Qme,_i(15,Zme,n.animating?n.transitionOptions:"0ms")):_i(21,eve,_i(19,Jme,n.animating?n.transitionOptions:"0ms"))),vr("id",n.id+"-content")("aria-hidden",n.collapsed)("aria-labelledby",n.id+"-titlebar"),Ie(3),de("ngTemplateOutlet",n.contentTemplate),Ie(1),de("ngIf",n.footerFacet||n.footerTemplate))},dependencies:[no,ho,el,Po,Du],styles:[".p-panel-header{display:flex;align-items:center}.p-panel-title{line-height:1;order:1}.p-panel-header-icon{display:inline-flex;justify-content:center;align-items:center;cursor:pointer;text-decoration:none;overflow:hidden;position:relative}.p-panel-toggleable.p-panel-expanded .p-toggleable-content:not(.ng-animating){overflow:visible}.p-panel-toggleable .p-toggleable-content{overflow:hidden}\n"],encapsulation:2,data:{animation:[ly("panelContent",[A0("hidden",tl({height:"0"})),A0("void",tl({height:"{{height}}"}),{params:{height:"0"}}),A0("visible",tl({height:"*"})),Mu("visible <=> hidden",[wc("{{transitionParams}}")]),Mu("void => hidden",wc("{{transitionParams}}")),Mu("void => visible",wc("{{transitionParams}}"))])]},changeDetection:0}),i})(),rve=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({imports:[Os,xa,Xc,xa]}),i})(),sve=(()=>{class i{constructor(e){this.preferenceService=e;let n=this.preferenceService.findOne("default");n&&(this.preferences=n)}ngOnInit(){}handleChange(e){this.preferenceService.store(this.preferences,n=>{n.full=this.preferences.full,n.grid=this.preferences.grid,n.info=this.preferences.info,n.maxHeight=this.preferences.maxHeight,n.maxWidth=this.preferences.maxWidth})}}return i.\u0275fac=function(e){return new(e||i)(Xt(x4))},i.\u0275cmp=_r({type:i,selectors:[["app-preference"]],decls:23,vars:6,consts:[["header","Render",3,"toggleable"],[1,"field-checkbox"],[3,"ngModel","ngModelChange","onChange"],["for","ny"],[1,"p-float-label"],["type","text","id","inputtext","pInputText","",3,"ngModel","ngModelChange","keyup"],["for","inputtext"]],template:function(e,n){1&e&&(Ke(0,"p-panel",0)(1,"div",1)(2,"p-inputSwitch",2),mn("ngModelChange",function(s){return n.preferences.grid=s})("onChange",function(s){return n.handleChange(s)}),Je(),Ke(3,"label",3),li(4,"Apply grid"),Je()(),Ke(5,"div",1)(6,"p-inputSwitch",2),mn("ngModelChange",function(s){return n.preferences.info=s})("onChange",function(s){return n.handleChange(s)}),Je(),Ke(7,"label",3),li(8,"Apply display info"),Je()(),Ke(9,"div",1)(10,"p-inputSwitch",2),mn("ngModelChange",function(s){return n.preferences.full=s})("onChange",function(s){return n.handleChange(s)}),Je(),Ke(11,"label",3),li(12,"Export full graph"),Je()(),Ke(13,"div",1)(14,"span",4)(15,"input",5),mn("ngModelChange",function(s){return n.preferences.maxWidth=s})("keyup",function(s){return n.handleChange(s)}),Je(),Ke(16,"label",6),li(17,"Max width for image export"),Je()()(),Ke(18,"div",1)(19,"span",4)(20,"input",5),mn("ngModelChange",function(s){return n.preferences.maxHeight=s})("keyup",function(s){return n.handleChange(s)}),Je(),Ke(21,"label",6),li(22,"Max height for image export"),Je()()()()),2&e&&(de("toggleable",!0),Ie(2),de("ngModel",n.preferences.grid),Ie(4),de("ngModel",n.preferences.info),Ie(4),de("ngModel",n.preferences.full),Ie(5),de("ngModel",n.preferences.maxWidth),Ie(5),de("ngModel",n.preferences.maxHeight))},dependencies:[fC,o5,C0,uC,oy,ive]}),i})();var ove=U(4826)();let ave=(()=>{class i{constructor(){this.about=ove.render('\n  ## My system\n\n  This tool aim to design complex system with a component view target\n  - based on [cytoscapejs](https://js.cytoscape.org)\n  - based on [primeng](https://www.primefaces.org/primeng/)\n  - based on [json-rules-engine](https://github.com/CacheControl/json-rules-engine)\n\n  I used it on my own to design my system\n\n  ## December 2022 : version 1.2.x\n\n  ### Features releases\n\n  - Add ruleset manager to check graph integrity\n    - ex: check each node having some tag\n    - ex: check label naming rule\n    - etc ...\n\n  ## November 2022 : version 1.1.x\n\n  ### Features releases\n\n  - Manage many style sheet\n  - Find alias by label or id (target and alias)\n  - Display alias documentation only\n  - Add alias option on node\n  - Modify inline documentation\n  - Rework any node id on next save\n  - Add 3d view of graph\n\n  ### Bugs\n  \n  - GEXF can export more than one edge over 2 nodes\n  - Rewrite with a new GUID cloned node (without infinte @.. append)\n\n  ## October 2022\n\n  ### Features releases\n\n  - Add icon to menu action (core, node and edge)\n  - Add a default content value in style if content is not defined\n\n  ![Alt text](assets/about/display-node.PNG "display node label")\n\n  ### Bugs\n\n  - Add favicon.ico (replace default angular favicon.ico)\n  - Generate error in console while mis selecting any node\n\n  ')}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=_r({type:i,selectors:[["app-about"]],decls:1,vars:1,consts:[[3,"innerHTML"]],template:function(e,n){1&e&&Bn(0,"div",0),2&e&&de("innerHTML",n.about,Aa)}}),i})();const cf=1001,Ju=1003,Lu=1006,F0=1009,N0=1014,__=1015,rx=1016,xC=1020,wg=1023,B0=1026,IC=1027,z0=3e3,Kc=3001,my="srgb",U0="srgb-linear";class TC{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const r=this._listeners[t];if(void 0!==r){const s=r.indexOf(e);-1!==s&&r.splice(s,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const n=this._listeners[t.type];if(void 0!==n){t.target=this;const r=n.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,t);t.target=null}}}const Dd=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],H0=Math.PI/180,sx=180/Math.PI;function Pp(){const i=4294967295*Math.random()|0,t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(Dd[255&i]+Dd[i>>8&255]+Dd[i>>16&255]+Dd[i>>24&255]+"-"+Dd[255&t]+Dd[t>>8&255]+"-"+Dd[t>>16&15|64]+Dd[t>>24&255]+"-"+Dd[63&e|128]+Dd[e>>8&255]+"-"+Dd[e>>16&255]+Dd[e>>24&255]+Dd[255&n]+Dd[n>>8&255]+Dd[n>>16&255]+Dd[n>>24&255]).toLowerCase()}function lu(i,t,e){return Math.max(t,Math.min(e,i))}function ox(i,t,e){return(1-e)*i+e*t}function eP(i){return 0==(i&i-1)&&0!==i}function HS(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function vy(i,t){switch(t.constructor){case Float32Array:return i;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function Cl(i,t){switch(t.constructor){case Float32Array:return i;case Uint16Array:return Math.round(65535*i);case Uint8Array:return Math.round(255*i);case Int16Array:return Math.round(32767*i);case Int8Array:return Math.round(127*i);default:throw new Error("Invalid component type.")}}class Xi{constructor(t=0,e=0){Xi.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),r=Math.sin(e),s=this.x-t.x,o=this.y-t.y;return this.x=s*n-o*r+t.x,this.y=s*r+o*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Rp{constructor(){Rp.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(t,e,n,r,s,o,l,u,p){const v=this.elements;return v[0]=t,v[1]=r,v[2]=l,v[3]=e,v[4]=s,v[5]=u,v[6]=n,v[7]=o,v[8]=p,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,s=this.elements,o=n[0],l=n[3],u=n[6],p=n[1],v=n[4],w=n[7],I=n[2],T=n[5],k=n[8],G=r[0],Y=r[3],ce=r[6],Se=r[1],Ae=r[4],Te=r[7],Qe=r[2],mt=r[5],zt=r[8];return s[0]=o*G+l*Se+u*Qe,s[3]=o*Y+l*Ae+u*mt,s[6]=o*ce+l*Te+u*zt,s[1]=p*G+v*Se+w*Qe,s[4]=p*Y+v*Ae+w*mt,s[7]=p*ce+v*Te+w*zt,s[2]=I*G+T*Se+k*Qe,s[5]=I*Y+T*Ae+k*mt,s[8]=I*ce+T*Te+k*zt,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],r=t[2],s=t[3],o=t[4],l=t[5],u=t[6],p=t[7],v=t[8];return e*o*v-e*l*p-n*s*v+n*l*u+r*s*p-r*o*u}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],s=t[3],o=t[4],l=t[5],u=t[6],p=t[7],v=t[8],w=v*o-l*p,I=l*u-v*s,T=p*s-o*u,k=e*w+n*I+r*T;if(0===k)return this.set(0,0,0,0,0,0,0,0,0);const G=1/k;return t[0]=w*G,t[1]=(r*p-v*n)*G,t[2]=(l*n-r*o)*G,t[3]=I*G,t[4]=(v*e-r*u)*G,t[5]=(r*s-l*e)*G,t[6]=T*G,t[7]=(n*u-p*e)*G,t[8]=(o*e-n*s)*G,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,r,s,o,l){const u=Math.cos(s),p=Math.sin(s);return this.set(n*u,n*p,-n*(u*o+p*l)+o+t,-r*p,r*u,-r*(-p*o+u*l)+l+e,0,0,1),this}scale(t,e){const n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this}rotate(t){const e=Math.cos(t),n=Math.sin(t),r=this.elements,s=r[0],o=r[3],l=r[6],u=r[1],p=r[4],v=r[7];return r[0]=e*s+n*u,r[3]=e*o+n*p,r[6]=e*l+n*v,r[1]=-n*s+e*u,r[4]=-n*o+e*p,r[7]=-n*l+e*v,this}translate(t,e){const n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this}equals(t){const e=this.elements,n=t.elements;for(let r=0;r<9;r++)if(e[r]!==n[r])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}function G5(i){for(let t=i.length-1;t>=0;--t)if(i[t]>=65535)return!0;return!1}function ax(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function G0(i){return i<.04045?.0773993808*i:Math.pow(.9478672986*i+.0521327014,2.4)}function GS(i){return i<.0031308?12.92*i:1.055*Math.pow(i,.41666)-.055}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const tP={[my]:{[U0]:G0},[U0]:{[my]:GS}},vm={legacyMode:!0,get workingColorSpace(){return U0},set workingColorSpace(i){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(i,t,e){if(this.legacyMode||t===e||!t||!e)return i;if(tP[t]&&void 0!==tP[t][e]){const n=tP[t][e];return i.r=n(i.r),i.g=n(i.g),i.b=n(i.b),i}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(i,t){return this.convert(i,this.workingColorSpace,t)},toWorkingColorSpace:function(i,t){return this.convert(i,t,this.workingColorSpace)}},W5={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},eh={r:0,g:0,b:0},ym={h:0,s:0,l:0},WS={h:0,s:0,l:0};function nP(i,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?i+6*(t-i)*e:e<.5?t:e<2/3?i+6*(t-i)*(2/3-e):i}function jS(i,t){return t.r=i.r,t.g=i.g,t.b=i.b,t}let DC,es=(()=>{class i{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===n&&void 0===r?this.set(e):this.setRGB(e,n,r)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=my){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,vm.toWorkingColorSpace(this,n),this}setRGB(e,n,r,s=U0){return this.r=e,this.g=n,this.b=r,vm.toWorkingColorSpace(this,s),this}setHSL(e,n,r,s=U0){if(e=function JL(i,t){return(i%t+t)%t}(e,1),n=lu(n,0,1),r=lu(r,0,1),0===n)this.r=this.g=this.b=r;else{const o=r<=.5?r*(1+n):r+n-r*n,l=2*r-o;this.r=nP(l,o,e+1/3),this.g=nP(l,o,e),this.b=nP(l,o,e-1/3)}return vm.toWorkingColorSpace(this,s),this}setStyle(e,n=my){function r(o){void 0!==o&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let o;const u=s[2];switch(s[1]){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return this.r=Math.min(255,parseInt(o[1],10))/255,this.g=Math.min(255,parseInt(o[2],10))/255,this.b=Math.min(255,parseInt(o[3],10))/255,vm.toWorkingColorSpace(this,n),r(o[4]),this;if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return this.r=Math.min(100,parseInt(o[1],10))/100,this.g=Math.min(100,parseInt(o[2],10))/100,this.b=Math.min(100,parseInt(o[3],10))/100,vm.toWorkingColorSpace(this,n),r(o[4]),this;break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u)){const p=parseFloat(o[1])/360,v=parseFloat(o[2])/100,w=parseFloat(o[3])/100;return r(o[4]),this.setHSL(p,v,w,n)}}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=s[1],l=o.length;if(3===l)return this.r=parseInt(o.charAt(0)+o.charAt(0),16)/255,this.g=parseInt(o.charAt(1)+o.charAt(1),16)/255,this.b=parseInt(o.charAt(2)+o.charAt(2),16)/255,vm.toWorkingColorSpace(this,n),this;if(6===l)return this.r=parseInt(o.charAt(0)+o.charAt(1),16)/255,this.g=parseInt(o.charAt(2)+o.charAt(3),16)/255,this.b=parseInt(o.charAt(4)+o.charAt(5),16)/255,vm.toWorkingColorSpace(this,n),this}return e&&e.length>0?this.setColorName(e,n):this}setColorName(e,n=my){const r=W5[e.toLowerCase()];return void 0!==r?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=G0(e.r),this.g=G0(e.g),this.b=G0(e.b),this}copyLinearToSRGB(e){return this.r=GS(e.r),this.g=GS(e.g),this.b=GS(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=my){return vm.fromWorkingColorSpace(jS(this,eh),e),lu(255*eh.r,0,255)<<16^lu(255*eh.g,0,255)<<8^lu(255*eh.b,0,255)<<0}getHexString(e=my){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=U0){vm.fromWorkingColorSpace(jS(this,eh),n);const r=eh.r,s=eh.g,o=eh.b,l=Math.max(r,s,o),u=Math.min(r,s,o);let p,v;const w=(u+l)/2;if(u===l)p=0,v=0;else{const I=l-u;switch(v=w<=.5?I/(l+u):I/(2-l-u),l){case r:p=(s-o)/I+(s<o?6:0);break;case s:p=(o-r)/I+2;break;case o:p=(r-s)/I+4}p/=6}return e.h=p,e.s=v,e.l=w,e}getRGB(e,n=U0){return vm.fromWorkingColorSpace(jS(this,eh),n),e.r=eh.r,e.g=eh.g,e.b=eh.b,e}getStyle(e=my){return vm.fromWorkingColorSpace(jS(this,eh),e),e!==my?`color(${e} ${eh.r} ${eh.g} ${eh.b})`:`rgb(${255*eh.r|0},${255*eh.g|0},${255*eh.b|0})`}offsetHSL(e,n,r){return this.getHSL(ym),ym.h+=e,ym.s+=n,ym.l+=r,this.setHSL(ym.h,ym.s,ym.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(ym),e.getHSL(WS);const r=ox(ym.h,WS.h,n),s=ox(ym.s,WS.s,n),o=ox(ym.l,WS.l,n);return this.setHSL(r,s,o),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}return i.NAMES=W5,i})();class j5{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===DC&&(DC=ax("canvas")),DC.width=t.width,DC.height=t.height;const n=DC.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=DC}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const e=ax("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);const r=n.getImageData(0,0,t.width,t.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=255*G0(s[o]/255);return n.putImageData(r,0,0),e}if(t.data){const e=t.data.slice(0);for(let n=0;n<e.length;n++)e[n]=e instanceof Uint8Array||e instanceof Uint8ClampedArray?Math.floor(255*G0(e[n]/255)):G0(e[n]);return{data:e,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}class LC{constructor(t=null){this.isSource=!0,this.uuid=Pp(),this.data=t,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let s;if(Array.isArray(r)){s=[];for(let o=0,l=r.length;o<l;o++)s.push(iP(r[o].isDataTexture?r[o].image:r[o]))}else s=iP(r);n.url=s}return e||(t.images[this.uuid]=n),n}}function iP(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?j5.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let bye=0,b_=(()=>{class i extends TC{constructor(e=i.DEFAULT_IMAGE,n=i.DEFAULT_MAPPING,r=cf,s=cf,o=Lu,l=1008,u=wg,p=F0,v=1,w=z0){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:bye++}),this.uuid=Pp(),this.name="",this.source=new LC(e),this.mipmaps=[],this.mapping=n,this.wrapS=r,this.wrapT=s,this.magFilter=o,this.minFilter=l,this.anisotropy=v,this.format=u,this.internalFormat=null,this.type=p,this.offset=new Xi(0,0),this.repeat=new Xi(1,1),this.center=new Xi(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Rp,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=w,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=void 0===e||"string"==typeof e;if(!n&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case 1e3:e.x=e.x-Math.floor(e.x);break;case cf:e.x=e.x<0?0:1;break;case 1002:e.x=1===Math.abs(Math.floor(e.x)%2)?Math.ceil(e.x)-e.x:e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case 1e3:e.y=e.y-Math.floor(e.y);break;case cf:e.y=e.y<0?0:1;break;case 1002:e.y=1===Math.abs(Math.floor(e.y)%2)?Math.ceil(e.y)-e.y:e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}}return i.DEFAULT_IMAGE=null,i.DEFAULT_MAPPING=300,i})();class fl{constructor(t=0,e=0,n=0,r=1){fl.prototype.isVector4=!0,this.x=t,this.y=e,this.z=n,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,s=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*r+o[12]*s,this.y=o[1]*e+o[5]*n+o[9]*r+o[13]*s,this.z=o[2]*e+o[6]*n+o[10]*r+o[14]*s,this.w=o[3]*e+o[7]*n+o[11]*r+o[15]*s,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,r,s;const u=t.elements,p=u[0],v=u[4],w=u[8],I=u[1],T=u[5],k=u[9],G=u[2],Y=u[6],ce=u[10];if(Math.abs(v-I)<.01&&Math.abs(w-G)<.01&&Math.abs(k-Y)<.01){if(Math.abs(v+I)<.1&&Math.abs(w+G)<.1&&Math.abs(k+Y)<.1&&Math.abs(p+T+ce-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const Ae=(p+1)/2,Te=(T+1)/2,Qe=(ce+1)/2,mt=(v+I)/4,zt=(w+G)/4,it=(k+Y)/4;return Ae>Te&&Ae>Qe?Ae<.01?(n=0,r=.707106781,s=.707106781):(n=Math.sqrt(Ae),r=mt/n,s=zt/n):Te>Qe?Te<.01?(n=.707106781,r=0,s=.707106781):(r=Math.sqrt(Te),n=mt/r,s=it/r):Qe<.01?(n=.707106781,r=.707106781,s=0):(s=Math.sqrt(Qe),n=zt/s,r=it/s),this.set(n,r,s,e),this}let Se=Math.sqrt((Y-k)*(Y-k)+(w-G)*(w-G)+(I-v)*(I-v));return Math.abs(Se)<.001&&(Se=1),this.x=(Y-k)/Se,this.y=(w-G)/Se,this.z=(I-v)/Se,this.w=Math.acos((p+T+ce-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class W0 extends TC{constructor(t=1,e=1,n={}){super(),this.isWebGLRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new fl(0,0,t,e),this.scissorTest=!1,this.viewport=new fl(0,0,t,e),this.texture=new b_({width:t,height:e,depth:1},n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:Lu,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(t,e,n=1){(this.width!==t||this.height!==e||this.depth!==n)&&(this.width=t,this.height=e,this.depth=n,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0;const e=Object.assign({},t.texture.image);return this.texture.source=new LC(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class rP extends b_{constructor(t=null,e=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:n,depth:r},this.magFilter=Ju,this.minFilter=Ju,this.wrapR=cf,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class $5 extends b_{constructor(t=null,e=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:n,depth:r},this.magFilter=Ju,this.minFilter=Ju,this.wrapR=cf,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class kp{constructor(t=0,e=0,n=0,r=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=r}static slerpFlat(t,e,n,r,s,o,l){let u=n[r+0],p=n[r+1],v=n[r+2],w=n[r+3];const I=s[o+0],T=s[o+1],k=s[o+2],G=s[o+3];if(0===l)return t[e+0]=u,t[e+1]=p,t[e+2]=v,void(t[e+3]=w);if(1===l)return t[e+0]=I,t[e+1]=T,t[e+2]=k,void(t[e+3]=G);if(w!==G||u!==I||p!==T||v!==k){let Y=1-l;const ce=u*I+p*T+v*k+w*G,Se=ce>=0?1:-1,Ae=1-ce*ce;if(Ae>Number.EPSILON){const Qe=Math.sqrt(Ae),mt=Math.atan2(Qe,ce*Se);Y=Math.sin(Y*mt)/Qe,l=Math.sin(l*mt)/Qe}const Te=l*Se;if(u=u*Y+I*Te,p=p*Y+T*Te,v=v*Y+k*Te,w=w*Y+G*Te,Y===1-l){const Qe=1/Math.sqrt(u*u+p*p+v*v+w*w);u*=Qe,p*=Qe,v*=Qe,w*=Qe}}t[e]=u,t[e+1]=p,t[e+2]=v,t[e+3]=w}static multiplyQuaternionsFlat(t,e,n,r,s,o){const l=n[r],u=n[r+1],p=n[r+2],v=n[r+3],w=s[o],I=s[o+1],T=s[o+2],k=s[o+3];return t[e]=l*k+v*w+u*T-p*I,t[e+1]=u*k+v*I+p*w-l*T,t[e+2]=p*k+v*T+l*I-u*w,t[e+3]=v*k-l*w-u*I-p*T,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){const n=t._x,r=t._y,s=t._z,o=t._order,l=Math.cos,u=Math.sin,p=l(n/2),v=l(r/2),w=l(s/2),I=u(n/2),T=u(r/2),k=u(s/2);switch(o){case"XYZ":this._x=I*v*w+p*T*k,this._y=p*T*w-I*v*k,this._z=p*v*k+I*T*w,this._w=p*v*w-I*T*k;break;case"YXZ":this._x=I*v*w+p*T*k,this._y=p*T*w-I*v*k,this._z=p*v*k-I*T*w,this._w=p*v*w+I*T*k;break;case"ZXY":this._x=I*v*w-p*T*k,this._y=p*T*w+I*v*k,this._z=p*v*k+I*T*w,this._w=p*v*w-I*T*k;break;case"ZYX":this._x=I*v*w-p*T*k,this._y=p*T*w+I*v*k,this._z=p*v*k-I*T*w,this._w=p*v*w+I*T*k;break;case"YZX":this._x=I*v*w+p*T*k,this._y=p*T*w+I*v*k,this._z=p*v*k-I*T*w,this._w=p*v*w-I*T*k;break;case"XZY":this._x=I*v*w-p*T*k,this._y=p*T*w-I*v*k,this._z=p*v*k+I*T*w,this._w=p*v*w+I*T*k;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],r=e[4],s=e[8],o=e[1],l=e[5],u=e[9],p=e[2],v=e[6],w=e[10],I=n+l+w;if(I>0){const T=.5/Math.sqrt(I+1);this._w=.25/T,this._x=(v-u)*T,this._y=(s-p)*T,this._z=(o-r)*T}else if(n>l&&n>w){const T=2*Math.sqrt(1+n-l-w);this._w=(v-u)/T,this._x=.25*T,this._y=(r+o)/T,this._z=(s+p)/T}else if(l>w){const T=2*Math.sqrt(1+l-n-w);this._w=(s-p)/T,this._x=(r+o)/T,this._y=.25*T,this._z=(u+v)/T}else{const T=2*Math.sqrt(1+w-n-l);this._w=(o-r)/T,this._x=(s+p)/T,this._y=(u+v)/T,this._z=.25*T}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(lu(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(0===n)return this;const r=Math.min(1,e/n);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,r=t._y,s=t._z,o=t._w,l=e._x,u=e._y,p=e._z,v=e._w;return this._x=n*v+o*l+r*p-s*u,this._y=r*v+o*u+s*l-n*p,this._z=s*v+o*p+n*u-r*l,this._w=o*v-n*l-r*u-s*p,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,r=this._y,s=this._z,o=this._w;let l=o*t._w+n*t._x+r*t._y+s*t._z;if(l<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,l=-l):this.copy(t),l>=1)return this._w=o,this._x=n,this._y=r,this._z=s,this;const u=1-l*l;if(u<=Number.EPSILON){const T=1-e;return this._w=T*o+e*this._w,this._x=T*n+e*this._x,this._y=T*r+e*this._y,this._z=T*s+e*this._z,this.normalize(),this._onChangeCallback(),this}const p=Math.sqrt(u),v=Math.atan2(p,l),w=Math.sin((1-e)*v)/p,I=Math.sin(e*v)/p;return this._w=o*w+this._w*I,this._x=n*w+this._x*I,this._y=r*w+this._y*I,this._z=s*w+this._z*I,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){const t=Math.random(),e=Math.sqrt(1-t),n=Math.sqrt(t),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(e*Math.cos(r),n*Math.sin(s),n*Math.cos(s),e*Math.sin(r))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class en{constructor(t=0,e=0,n=0){en.prototype.isVector3=!0,this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(q5.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(q5.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,r=this.z,s=t.elements;return this.x=s[0]*e+s[3]*n+s[6]*r,this.y=s[1]*e+s[4]*n+s[7]*r,this.z=s[2]*e+s[5]*n+s[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,s=t.elements,o=1/(s[3]*e+s[7]*n+s[11]*r+s[15]);return this.x=(s[0]*e+s[4]*n+s[8]*r+s[12])*o,this.y=(s[1]*e+s[5]*n+s[9]*r+s[13])*o,this.z=(s[2]*e+s[6]*n+s[10]*r+s[14])*o,this}applyQuaternion(t){const e=this.x,n=this.y,r=this.z,s=t.x,o=t.y,l=t.z,u=t.w,p=u*e+o*r-l*n,v=u*n+l*e-s*r,w=u*r+s*n-o*e,I=-s*e-o*n-l*r;return this.x=p*u+I*-s+v*-l-w*-o,this.y=v*u+I*-o+w*-s-p*-l,this.z=w*u+I*-l+p*-o-v*-s,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,r=this.z,s=t.elements;return this.x=s[0]*e+s[4]*n+s[8]*r,this.y=s[1]*e+s[5]*n+s[9]*r,this.z=s[2]*e+s[6]*n+s[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,r=t.y,s=t.z,o=e.x,l=e.y,u=e.z;return this.x=r*u-s*l,this.y=s*o-n*u,this.z=n*l-r*o,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return sP.copy(this).projectOnVector(t),this.sub(sP)}reflect(t){return this.sub(sP.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(lu(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=2*(Math.random()-.5),e=Math.random()*Math.PI*2,n=Math.sqrt(1-t**2);return this.x=n*Math.cos(e),this.y=n*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const sP=new en,q5=new kp;class C_{constructor(t=new en(1/0,1/0,1/0),e=new en(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,n=1/0,r=1/0,s=-1/0,o=-1/0,l=-1/0;for(let u=0,p=t.length;u<p;u+=3){const v=t[u],w=t[u+1],I=t[u+2];v<e&&(e=v),w<n&&(n=w),I<r&&(r=I),v>s&&(s=v),w>o&&(o=w),I>l&&(l=I)}return this.min.set(e,n,r),this.max.set(s,o,l),this}setFromBufferAttribute(t){let e=1/0,n=1/0,r=1/0,s=-1/0,o=-1/0,l=-1/0;for(let u=0,p=t.count;u<p;u++){const v=t.getX(u),w=t.getY(u),I=t.getZ(u);v<e&&(e=v),w<n&&(n=w),I<r&&(r=I),v>s&&(s=v),w>o&&(o=w),I>l&&(l=I)}return this.min.set(e,n,r),this.max.set(s,o,l),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=j0.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const n=t.geometry;if(void 0!==n)if(e&&null!=n.attributes&&void 0!==n.attributes.position){const s=n.attributes.position;for(let o=0,l=s.count;o<l;o++)j0.fromBufferAttribute(s,o).applyMatrix4(t.matrixWorld),this.expandByPoint(j0)}else null===n.boundingBox&&n.computeBoundingBox(),oP.copy(n.boundingBox),oP.applyMatrix4(t.matrixWorld),this.union(oP);const r=t.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,j0),j0.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(lx),$S.subVectors(this.max,lx),PC.subVectors(t.a,lx),RC.subVectors(t.b,lx),kC.subVectors(t.c,lx),w_.subVectors(RC,PC),A_.subVectors(kC,RC),$0.subVectors(PC,kC);let e=[0,-w_.z,w_.y,0,-A_.z,A_.y,0,-$0.z,$0.y,w_.z,0,-w_.x,A_.z,0,-A_.x,$0.z,0,-$0.x,-w_.y,w_.x,0,-A_.y,A_.x,0,-$0.y,$0.x,0];return!(!aP(e,PC,RC,kC,$S)||(e=[1,0,0,0,1,0,0,0,1],!aP(e,PC,RC,kC,$S)))&&(qS.crossVectors(w_,A_),e=[qS.x,qS.y,qS.z],aP(e,PC,RC,kC,$S))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return j0.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return this.getCenter(t.center),t.radius=.5*this.getSize(j0).length(),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(yy[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),yy[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),yy[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),yy[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),yy[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),yy[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),yy[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),yy[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(yy)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const yy=[new en,new en,new en,new en,new en,new en,new en,new en],j0=new en,oP=new C_,PC=new en,RC=new en,kC=new en,w_=new en,A_=new en,$0=new en,lx=new en,$S=new en,qS=new en,q0=new en;function aP(i,t,e,n,r){for(let s=0,o=i.length-3;s<=o;s+=3){q0.fromArray(i,s);const l=r.x*Math.abs(q0.x)+r.y*Math.abs(q0.y)+r.z*Math.abs(q0.z),u=t.dot(q0),p=e.dot(q0),v=n.dot(q0);if(Math.max(-Math.max(u,p,v),Math.min(u,p,v))>l)return!1}return!0}const Cye=new C_,cx=new en,lP=new en;class OC{constructor(t=new en,e=-1){this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;void 0!==e?n.copy(e):Cye.setFromPoints(t).getCenter(n);let r=0;for(let s=0,o=t.length;s<o;s++)r=Math.max(r,n.distanceToSquared(t[s]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;cx.subVectors(t,this.center);const e=cx.lengthSq();if(e>this.radius*this.radius){const n=Math.sqrt(e),r=.5*(n-this.radius);this.center.addScaledVector(cx,r/n),this.radius+=r}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(lP.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(cx.copy(t.center).add(lP)),this.expandByPoint(cx.copy(t.center).sub(lP))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const _y=new en,cP=new en,XS=new en,x_=new en,uP=new en,YS=new en,hP=new en;class KS{constructor(t=new en,e=new en(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,_y)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=_y.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(_y.copy(this.direction).multiplyScalar(e).add(this.origin),_y.distanceToSquared(t))}distanceSqToSegment(t,e,n,r){cP.copy(t).add(e).multiplyScalar(.5),XS.copy(e).sub(t).normalize(),x_.copy(this.origin).sub(cP);const s=.5*t.distanceTo(e),o=-this.direction.dot(XS),l=x_.dot(this.direction),u=-x_.dot(XS),p=x_.lengthSq(),v=Math.abs(1-o*o);let w,I,T,k;if(v>0)if(w=o*u-l,I=o*l-u,k=s*v,w>=0)if(I>=-k)if(I<=k){const G=1/v;w*=G,I*=G,T=w*(w+o*I+2*l)+I*(o*w+I+2*u)+p}else I=s,w=Math.max(0,-(o*I+l)),T=-w*w+I*(I+2*u)+p;else I=-s,w=Math.max(0,-(o*I+l)),T=-w*w+I*(I+2*u)+p;else I<=-k?(w=Math.max(0,-(-o*s+l)),I=w>0?-s:Math.min(Math.max(-s,-u),s),T=-w*w+I*(I+2*u)+p):I<=k?(w=0,I=Math.min(Math.max(-s,-u),s),T=I*(I+2*u)+p):(w=Math.max(0,-(o*s+l)),I=w>0?s:Math.min(Math.max(-s,-u),s),T=-w*w+I*(I+2*u)+p);else I=o>0?-s:s,w=Math.max(0,-(o*I+l)),T=-w*w+I*(I+2*u)+p;return n&&n.copy(this.direction).multiplyScalar(w).add(this.origin),r&&r.copy(XS).multiplyScalar(I).add(cP),T}intersectSphere(t,e){_y.subVectors(t.center,this.origin);const n=_y.dot(this.direction),r=_y.dot(_y)-n*n,s=t.radius*t.radius;if(r>s)return null;const o=Math.sqrt(s-r),l=n-o,u=n+o;return l<0&&u<0?null:this.at(l<0?u:l,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,r,s,o,l,u;const p=1/this.direction.x,v=1/this.direction.y,w=1/this.direction.z,I=this.origin;return p>=0?(n=(t.min.x-I.x)*p,r=(t.max.x-I.x)*p):(n=(t.max.x-I.x)*p,r=(t.min.x-I.x)*p),v>=0?(s=(t.min.y-I.y)*v,o=(t.max.y-I.y)*v):(s=(t.max.y-I.y)*v,o=(t.min.y-I.y)*v),n>o||s>r||((s>n||isNaN(n))&&(n=s),(o<r||isNaN(r))&&(r=o),w>=0?(l=(t.min.z-I.z)*w,u=(t.max.z-I.z)*w):(l=(t.max.z-I.z)*w,u=(t.min.z-I.z)*w),n>u||l>r)||((l>n||n!=n)&&(n=l),(u<r||r!=r)&&(r=u),r<0)?null:this.at(n>=0?n:r,e)}intersectsBox(t){return null!==this.intersectBox(t,_y)}intersectTriangle(t,e,n,r,s){uP.subVectors(e,t),YS.subVectors(n,t),hP.crossVectors(uP,YS);let l,o=this.direction.dot(hP);if(o>0){if(r)return null;l=1}else{if(!(o<0))return null;l=-1,o=-o}x_.subVectors(this.origin,t);const u=l*this.direction.dot(YS.crossVectors(x_,YS));if(u<0)return null;const p=l*this.direction.dot(uP.cross(x_));if(p<0||u+p>o)return null;const v=-l*x_.dot(hP);return v<0?null:this.at(v/o,s)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class vo{constructor(){vo.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(t,e,n,r,s,o,l,u,p,v,w,I,T,k,G,Y){const ce=this.elements;return ce[0]=t,ce[4]=e,ce[8]=n,ce[12]=r,ce[1]=s,ce[5]=o,ce[9]=l,ce[13]=u,ce[2]=p,ce[6]=v,ce[10]=w,ce[14]=I,ce[3]=T,ce[7]=k,ce[11]=G,ce[15]=Y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new vo).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,r=1/FC.setFromMatrixColumn(t,0).length(),s=1/FC.setFromMatrixColumn(t,1).length(),o=1/FC.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*s,e[5]=n[5]*s,e[6]=n[6]*s,e[7]=0,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,n=t.x,r=t.y,s=t.z,o=Math.cos(n),l=Math.sin(n),u=Math.cos(r),p=Math.sin(r),v=Math.cos(s),w=Math.sin(s);if("XYZ"===t.order){const I=o*v,T=o*w,k=l*v,G=l*w;e[0]=u*v,e[4]=-u*w,e[8]=p,e[1]=T+k*p,e[5]=I-G*p,e[9]=-l*u,e[2]=G-I*p,e[6]=k+T*p,e[10]=o*u}else if("YXZ"===t.order){const I=u*v,T=u*w,k=p*v,G=p*w;e[0]=I+G*l,e[4]=k*l-T,e[8]=o*p,e[1]=o*w,e[5]=o*v,e[9]=-l,e[2]=T*l-k,e[6]=G+I*l,e[10]=o*u}else if("ZXY"===t.order){const I=u*v,T=u*w,k=p*v,G=p*w;e[0]=I-G*l,e[4]=-o*w,e[8]=k+T*l,e[1]=T+k*l,e[5]=o*v,e[9]=G-I*l,e[2]=-o*p,e[6]=l,e[10]=o*u}else if("ZYX"===t.order){const I=o*v,T=o*w,k=l*v,G=l*w;e[0]=u*v,e[4]=k*p-T,e[8]=I*p+G,e[1]=u*w,e[5]=G*p+I,e[9]=T*p-k,e[2]=-p,e[6]=l*u,e[10]=o*u}else if("YZX"===t.order){const I=o*u,T=o*p,k=l*u,G=l*p;e[0]=u*v,e[4]=G-I*w,e[8]=k*w+T,e[1]=w,e[5]=o*v,e[9]=-l*v,e[2]=-p*v,e[6]=T*w+k,e[10]=I-G*w}else if("XZY"===t.order){const I=o*u,T=o*p,k=l*u,G=l*p;e[0]=u*v,e[4]=-w,e[8]=p*v,e[1]=I*w+G,e[5]=o*v,e[9]=T*w-k,e[2]=k*w-T,e[6]=l*v,e[10]=G*w+I}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(wye,t,Aye)}lookAt(t,e,n){const r=this.elements;return Op.subVectors(t,e),0===Op.lengthSq()&&(Op.z=1),Op.normalize(),I_.crossVectors(n,Op),0===I_.lengthSq()&&(1===Math.abs(n.z)?Op.x+=1e-4:Op.z+=1e-4,Op.normalize(),I_.crossVectors(n,Op)),I_.normalize(),ZS.crossVectors(Op,I_),r[0]=I_.x,r[4]=ZS.x,r[8]=Op.x,r[1]=I_.y,r[5]=ZS.y,r[9]=Op.y,r[2]=I_.z,r[6]=ZS.z,r[10]=Op.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,s=this.elements,o=n[0],l=n[4],u=n[8],p=n[12],v=n[1],w=n[5],I=n[9],T=n[13],k=n[2],G=n[6],Y=n[10],ce=n[14],Se=n[3],Ae=n[7],Te=n[11],Qe=n[15],mt=r[0],zt=r[4],it=r[8],Tt=r[12],ln=r[1],Hn=r[5],ei=r[9],Wn=r[13],En=r[2],zn=r[6],xn=r[10],Gn=r[14],Nn=r[3],In=r[7],Vn=r[11],Yi=r[15];return s[0]=o*mt+l*ln+u*En+p*Nn,s[4]=o*zt+l*Hn+u*zn+p*In,s[8]=o*it+l*ei+u*xn+p*Vn,s[12]=o*Tt+l*Wn+u*Gn+p*Yi,s[1]=v*mt+w*ln+I*En+T*Nn,s[5]=v*zt+w*Hn+I*zn+T*In,s[9]=v*it+w*ei+I*xn+T*Vn,s[13]=v*Tt+w*Wn+I*Gn+T*Yi,s[2]=k*mt+G*ln+Y*En+ce*Nn,s[6]=k*zt+G*Hn+Y*zn+ce*In,s[10]=k*it+G*ei+Y*xn+ce*Vn,s[14]=k*Tt+G*Wn+Y*Gn+ce*Yi,s[3]=Se*mt+Ae*ln+Te*En+Qe*Nn,s[7]=Se*zt+Ae*Hn+Te*zn+Qe*In,s[11]=Se*it+Ae*ei+Te*xn+Qe*Vn,s[15]=Se*Tt+Ae*Wn+Te*Gn+Qe*Yi,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],r=t[8],s=t[12],o=t[1],l=t[5],u=t[9],p=t[13],v=t[2],w=t[6],I=t[10],T=t[14];return t[3]*(+s*u*w-r*p*w-s*l*I+n*p*I+r*l*T-n*u*T)+t[7]*(+e*u*T-e*p*I+s*o*I-r*o*T+r*p*v-s*u*v)+t[11]*(+e*p*w-e*l*T-s*o*w+n*o*T+s*l*v-n*p*v)+t[15]*(-r*l*v-e*u*w+e*l*I+r*o*w-n*o*I+n*u*v)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],s=t[3],o=t[4],l=t[5],u=t[6],p=t[7],v=t[8],w=t[9],I=t[10],T=t[11],k=t[12],G=t[13],Y=t[14],ce=t[15],Se=w*Y*p-G*I*p+G*u*T-l*Y*T-w*u*ce+l*I*ce,Ae=k*I*p-v*Y*p-k*u*T+o*Y*T+v*u*ce-o*I*ce,Te=v*G*p-k*w*p+k*l*T-o*G*T-v*l*ce+o*w*ce,Qe=k*w*u-v*G*u-k*l*I+o*G*I+v*l*Y-o*w*Y,mt=e*Se+n*Ae+r*Te+s*Qe;if(0===mt)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const zt=1/mt;return t[0]=Se*zt,t[1]=(G*I*s-w*Y*s-G*r*T+n*Y*T+w*r*ce-n*I*ce)*zt,t[2]=(l*Y*s-G*u*s+G*r*p-n*Y*p-l*r*ce+n*u*ce)*zt,t[3]=(w*u*s-l*I*s-w*r*p+n*I*p+l*r*T-n*u*T)*zt,t[4]=Ae*zt,t[5]=(v*Y*s-k*I*s+k*r*T-e*Y*T-v*r*ce+e*I*ce)*zt,t[6]=(k*u*s-o*Y*s-k*r*p+e*Y*p+o*r*ce-e*u*ce)*zt,t[7]=(o*I*s-v*u*s+v*r*p-e*I*p-o*r*T+e*u*T)*zt,t[8]=Te*zt,t[9]=(k*w*s-v*G*s-k*n*T+e*G*T+v*n*ce-e*w*ce)*zt,t[10]=(o*G*s-k*l*s+k*n*p-e*G*p-o*n*ce+e*l*ce)*zt,t[11]=(v*l*s-o*w*s-v*n*p+e*w*p+o*n*T-e*l*T)*zt,t[12]=Qe*zt,t[13]=(v*G*r-k*w*r+k*n*I-e*G*I-v*n*Y+e*w*Y)*zt,t[14]=(k*l*r-o*G*r-k*n*u+e*G*u+o*n*Y-e*l*Y)*zt,t[15]=(o*w*r-v*l*r+v*n*u-e*w*u-o*n*I+e*l*I)*zt,this}scale(t){const e=this.elements,n=t.x,r=t.y,s=t.z;return e[0]*=n,e[4]*=r,e[8]*=s,e[1]*=n,e[5]*=r,e[9]*=s,e[2]*=n,e[6]*=r,e[10]*=s,e[3]*=n,e[7]*=r,e[11]*=s,this}getMaxScaleOnAxis(){const t=this.elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10]))}makeTranslation(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),r=Math.sin(e),s=1-n,o=t.x,l=t.y,u=t.z,p=s*o,v=s*l;return this.set(p*o+n,p*l-r*u,p*u+r*l,0,p*l+r*u,v*l+n,v*u-r*o,0,p*u-r*l,v*u+r*o,s*u*u+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,r,s,o){return this.set(1,n,s,0,t,1,o,0,e,r,1,0,0,0,0,1),this}compose(t,e,n){const r=this.elements,s=e._x,o=e._y,l=e._z,u=e._w,p=s+s,v=o+o,w=l+l,I=s*p,T=s*v,k=s*w,G=o*v,Y=o*w,ce=l*w,Se=u*p,Ae=u*v,Te=u*w,Qe=n.x,mt=n.y,zt=n.z;return r[0]=(1-(G+ce))*Qe,r[1]=(T+Te)*Qe,r[2]=(k-Ae)*Qe,r[3]=0,r[4]=(T-Te)*mt,r[5]=(1-(I+ce))*mt,r[6]=(Y+Se)*mt,r[7]=0,r[8]=(k+Ae)*zt,r[9]=(Y-Se)*zt,r[10]=(1-(I+G))*zt,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,n){const r=this.elements;let s=FC.set(r[0],r[1],r[2]).length();const o=FC.set(r[4],r[5],r[6]).length(),l=FC.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),t.x=r[12],t.y=r[13],t.z=r[14],_m.copy(this);const p=1/s,v=1/o,w=1/l;return _m.elements[0]*=p,_m.elements[1]*=p,_m.elements[2]*=p,_m.elements[4]*=v,_m.elements[5]*=v,_m.elements[6]*=v,_m.elements[8]*=w,_m.elements[9]*=w,_m.elements[10]*=w,e.setFromRotationMatrix(_m),n.x=s,n.y=o,n.z=l,this}makePerspective(t,e,n,r,s,o){const l=this.elements,p=2*s/(n-r),v=(e+t)/(e-t),w=(n+r)/(n-r),I=-(o+s)/(o-s),T=-2*o*s/(o-s);return l[0]=2*s/(e-t),l[4]=0,l[8]=v,l[12]=0,l[1]=0,l[5]=p,l[9]=w,l[13]=0,l[2]=0,l[6]=0,l[10]=I,l[14]=T,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(t,e,n,r,s,o){const l=this.elements,u=1/(e-t),p=1/(n-r),v=1/(o-s),w=(e+t)*u,I=(n+r)*p,T=(o+s)*v;return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-w,l[1]=0,l[5]=2*p,l[9]=0,l[13]=-I,l[2]=0,l[6]=0,l[10]=-2*v,l[14]=-T,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const FC=new en,_m=new vo,wye=new en(0,0,0),Aye=new en(1,1,1),I_=new en,ZS=new en,Op=new en,X5=new vo,Y5=new kp;let xye=(()=>{class i{constructor(e=0,n=0,r=0,s=i.DefaultOrder){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,s=this._order){return this._x=e,this._y=n,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const s=e.elements,o=s[0],l=s[4],u=s[8],p=s[1],v=s[5],w=s[9],I=s[2],T=s[6],k=s[10];switch(n){case"XYZ":this._y=Math.asin(lu(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-w,k),this._z=Math.atan2(-l,o)):(this._x=Math.atan2(T,v),this._z=0);break;case"YXZ":this._x=Math.asin(-lu(w,-1,1)),Math.abs(w)<.9999999?(this._y=Math.atan2(u,k),this._z=Math.atan2(p,v)):(this._y=Math.atan2(-I,o),this._z=0);break;case"ZXY":this._x=Math.asin(lu(T,-1,1)),Math.abs(T)<.9999999?(this._y=Math.atan2(-I,k),this._z=Math.atan2(-l,v)):(this._y=0,this._z=Math.atan2(p,o));break;case"ZYX":this._y=Math.asin(-lu(I,-1,1)),Math.abs(I)<.9999999?(this._x=Math.atan2(T,k),this._z=Math.atan2(p,o)):(this._x=0,this._z=Math.atan2(-l,v));break;case"YZX":this._z=Math.asin(lu(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(-w,v),this._y=Math.atan2(-I,o)):(this._x=0,this._y=Math.atan2(u,k));break;case"XZY":this._z=Math.asin(-lu(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(T,v),this._y=Math.atan2(u,o)):(this._x=Math.atan2(-w,k),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,!0===r&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return X5.makeRotationFromQuaternion(e),this.setFromRotationMatrix(X5,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return Y5.setFromEuler(this),this.setFromQuaternion(Y5,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}return i.DefaultOrder="XYZ",i.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],i})();class dP{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}isEnabled(t){return 0!=(this.mask&(1<<t|0))}}let Iye=0;const K5=new en,NC=new kp,by=new vo,QS=new en,ux=new en,Sye=new en,Eye=new kp,Z5=new en(1,0,0),Q5=new en(0,1,0),J5=new en(0,0,1),Tye={type:"added"},eG={type:"removed"};let Hf=(()=>{class i extends TC{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Iye++}),this.uuid=Pp(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=i.DefaultUp.clone();const e=new en,n=new xye,r=new kp,s=new en(1,1,1);n._onChange(function o(){r.setFromEuler(n,!1)}),r._onChange(function l(){n.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new vo},normalMatrix:{value:new Rp}}),this.matrix=new vo,this.matrixWorld=new vo,this.matrixAutoUpdate=i.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=i.DefaultMatrixWorldAutoUpdate,this.layers=new dP,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return NC.setFromAxisAngle(e,n),this.quaternion.multiply(NC),this}rotateOnWorldAxis(e,n){return NC.setFromAxisAngle(e,n),this.quaternion.premultiply(NC),this}rotateX(e){return this.rotateOnAxis(Z5,e)}rotateY(e){return this.rotateOnAxis(Q5,e)}rotateZ(e){return this.rotateOnAxis(J5,e)}translateOnAxis(e,n){return K5.copy(e).applyQuaternion(this.quaternion),this.position.add(K5.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(Z5,e)}translateY(e){return this.translateOnAxis(Q5,e)}translateZ(e){return this.translateOnAxis(J5,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(by.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?QS.copy(e):QS.set(e,n,r);const s=this.parent;this.updateWorldMatrix(!0,!1),ux.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?by.lookAt(ux,QS,this.up):by.lookAt(QS,ux,this.up),this.quaternion.setFromRotationMatrix(by),s&&(by.extractRotation(s.matrixWorld),NC.setFromRotationMatrix(by),this.quaternion.premultiply(NC.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Tye)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(eG)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const n=this.children[e];n.parent=null,n.dispatchEvent(eG)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),by.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),by.multiply(e.parent.matrixWorld)),e.applyMatrix4(by),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,s=this.children.length;r<s;r++){const l=this.children[r].getObjectByProperty(e,n);if(void 0!==l)return l}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ux,e,Sye),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ux,Eye,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,s=n.length;r<s;r++)n[r].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const n=this.children;for(let r=0,s=n.length;r<s;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;null!==n&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,s=n.length;r<s;r++){const o=n[r];(!0===o.matrixWorldAutoUpdate||!0===e)&&o.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const r=this.parent;if(!0===e&&null!==r&&!0===r.matrixWorldAutoUpdate&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===n){const s=this.children;for(let o=0,l=s.length;o<l;o++){const u=s[o];!0===u.matrixWorldAutoUpdate&&u.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=void 0===e||"string"==typeof e,r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const s={};function o(u,p){return void 0===u[p.uuid]&&(u[p.uuid]=p.toJSON(e)),p.uuid}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),!0===this.castShadow&&(s.castShadow=!0),!0===this.receiveShadow&&(s.receiveShadow=!0),!1===this.visible&&(s.visible=!1),!1===this.frustumCulled&&(s.frustumCulled=!1),0!==this.renderOrder&&(s.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(s.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(e.geometries,this.geometry);const u=this.geometry.parameters;if(void 0!==u&&void 0!==u.shapes){const p=u.shapes;if(Array.isArray(p))for(let v=0,w=p.length;v<w;v++)o(e.shapes,p[v]);else o(e.shapes,p)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(o(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const u=[];for(let p=0,v=this.material.length;p<v;p++)u.push(o(e.materials,this.material[p]));s.material=u}else s.material=o(e.materials,this.material);if(this.children.length>0){s.children=[];for(let u=0;u<this.children.length;u++)s.children.push(this.children[u].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let u=0;u<this.animations.length;u++)s.animations.push(o(e.animations,this.animations[u]))}if(n){const u=l(e.geometries),p=l(e.materials),v=l(e.textures),w=l(e.images),I=l(e.shapes),T=l(e.skeletons),k=l(e.animations),G=l(e.nodes);u.length>0&&(r.geometries=u),p.length>0&&(r.materials=p),v.length>0&&(r.textures=v),w.length>0&&(r.images=w),I.length>0&&(r.shapes=I),T.length>0&&(r.skeletons=T),k.length>0&&(r.animations=k),G.length>0&&(r.nodes=G)}return r.object=s,r;function l(u){const p=[];for(const v in u){const w=u[v];delete w.metadata,p.push(w)}return p}}clone(e){return(new this.constructor).copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===n)for(let r=0;r<e.children.length;r++)this.add(e.children[r].clone());return this}}return i.DefaultUp=new en(0,1,0),i.DefaultMatrixAutoUpdate=!0,i.DefaultMatrixWorldAutoUpdate=!0,i})();const bm=new en,Cy=new en,fP=new en,wy=new en,BC=new en,zC=new en,tG=new en,pP=new en,gP=new en,mP=new en;class Cm{constructor(t=new en,e=new en,n=new en){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,r){r.subVectors(n,e),bm.subVectors(t,e),r.cross(bm);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(t,e,n,r,s){bm.subVectors(r,e),Cy.subVectors(n,e),fP.subVectors(t,e);const o=bm.dot(bm),l=bm.dot(Cy),u=bm.dot(fP),p=Cy.dot(Cy),v=Cy.dot(fP),w=o*p-l*l;if(0===w)return s.set(-2,-1,-1);const I=1/w,T=(p*u-l*v)*I,k=(o*v-l*u)*I;return s.set(1-T-k,k,T)}static containsPoint(t,e,n,r){return this.getBarycoord(t,e,n,r,wy),wy.x>=0&&wy.y>=0&&wy.x+wy.y<=1}static getUV(t,e,n,r,s,o,l,u){return this.getBarycoord(t,e,n,r,wy),u.set(0,0),u.addScaledVector(s,wy.x),u.addScaledVector(o,wy.y),u.addScaledVector(l,wy.z),u}static isFrontFacing(t,e,n,r){return bm.subVectors(n,e),Cy.subVectors(t,e),bm.cross(Cy).dot(r)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this}setFromAttributeAndIndices(t,e,n,r){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,r),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return bm.subVectors(this.c,this.b),Cy.subVectors(this.a,this.b),.5*bm.cross(Cy).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Cm.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return Cm.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,n,r,s){return Cm.getUV(t,this.a,this.b,this.c,e,n,r,s)}containsPoint(t){return Cm.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Cm.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,r=this.b,s=this.c;let o,l;BC.subVectors(r,n),zC.subVectors(s,n),pP.subVectors(t,n);const u=BC.dot(pP),p=zC.dot(pP);if(u<=0&&p<=0)return e.copy(n);gP.subVectors(t,r);const v=BC.dot(gP),w=zC.dot(gP);if(v>=0&&w<=v)return e.copy(r);const I=u*w-v*p;if(I<=0&&u>=0&&v<=0)return o=u/(u-v),e.copy(n).addScaledVector(BC,o);mP.subVectors(t,s);const T=BC.dot(mP),k=zC.dot(mP);if(k>=0&&T<=k)return e.copy(s);const G=T*p-u*k;if(G<=0&&p>=0&&k<=0)return l=p/(p-k),e.copy(n).addScaledVector(zC,l);const Y=v*k-T*w;if(Y<=0&&w-v>=0&&T-k>=0)return tG.subVectors(s,r),l=(w-v)/(w-v+(T-k)),e.copy(r).addScaledVector(tG,l);const ce=1/(Y+G+I);return o=G*ce,l=I*ce,e.copy(n).addScaledVector(BC,o).addScaledVector(zC,l)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let Mye=0;class X0 extends TC{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Mye++}),this.uuid=Pp(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const n=t[e];if(void 0===n){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}const r=this[e];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}}toJSON(t){const e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(s){const o=[];for(const l in s){const u=s[l];delete u.metadata,o.push(u)}return o}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e){const s=r(t.textures),o=r(t.images);s.length>0&&(n.textures=s),o.length>0&&(n.images=o)}return n}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(null!==e){const r=e.length;n=new Array(r);for(let s=0;s!==r;++s)n[s]=e[s].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}}class Y0 extends X0{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new es(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const Pu=new en,JS=new Xi;class wh{constructor(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[t+r]=e.array[n+r];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,n=this.count;e<n;e++)JS.fromBufferAttribute(this,e),JS.applyMatrix3(t),this.setXY(e,JS.x,JS.y);else if(3===this.itemSize)for(let e=0,n=this.count;e<n;e++)Pu.fromBufferAttribute(this,e),Pu.applyMatrix3(t),this.setXYZ(e,Pu.x,Pu.y,Pu.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)Pu.fromBufferAttribute(this,e),Pu.applyMatrix4(t),this.setXYZ(e,Pu.x,Pu.y,Pu.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)Pu.fromBufferAttribute(this,e),Pu.applyNormalMatrix(t),this.setXYZ(e,Pu.x,Pu.y,Pu.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)Pu.fromBufferAttribute(this,e),Pu.transformDirection(t),this.setXYZ(e,Pu.x,Pu.y,Pu.z);return this}set(t,e=0){return this.array.set(t,e),this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=vy(e,this.array)),e}setX(t,e){return this.normalized&&(e=Cl(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=vy(e,this.array)),e}setY(t,e){return this.normalized&&(e=Cl(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=vy(e,this.array)),e}setZ(t,e){return this.normalized&&(e=Cl(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=vy(e,this.array)),e}setW(t,e){return this.normalized&&(e=Cl(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=Cl(e,this.array),n=Cl(n,this.array)),this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,r){return t*=this.itemSize,this.normalized&&(e=Cl(e,this.array),n=Cl(n,this.array),r=Cl(r,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this}setXYZW(t,e,n,r,s){return t*=this.itemSize,this.normalized&&(e=Cl(e,this.array),n=Cl(n,this.array),r=Cl(r,this.array),s=Cl(s,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=s,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),35044!==this.usage&&(t.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(t.updateRange=this.updateRange),t}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class nG extends wh{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class iG extends wh{constructor(t,e,n){super(new Uint32Array(t),e,n)}}class ls extends wh{constructor(t,e,n){super(new Float32Array(t),e,n)}}let Dye=0;const Ag=new vo,vP=new Hf,VC=new en,Fp=new C_,hx=new C_,Ah=new en;class Ho extends TC{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Dye++}),this.uuid=Pp(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return this.index=Array.isArray(t)?new(G5(t)?iG:nG)(t,1):t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const s=(new Rp).getNormalMatrix(t);n.applyNormalMatrix(s),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(t),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return Ag.makeRotationFromQuaternion(t),this.applyMatrix4(Ag),this}rotateX(t){return Ag.makeRotationX(t),this.applyMatrix4(Ag),this}rotateY(t){return Ag.makeRotationY(t),this.applyMatrix4(Ag),this}rotateZ(t){return Ag.makeRotationZ(t),this.applyMatrix4(Ag),this}translate(t,e,n){return Ag.makeTranslation(t,e,n),this.applyMatrix4(Ag),this}scale(t,e,n){return Ag.makeScale(t,e,n),this.applyMatrix4(Ag),this}lookAt(t){return vP.lookAt(t),vP.updateMatrix(),this.applyMatrix4(vP.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(VC).negate(),this.translate(VC.x,VC.y,VC.z),this}setFromPoints(t){const e=[];for(let n=0,r=t.length;n<r;n++){const s=t[n];e.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new ls(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new C_);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new en(-1/0,-1/0,-1/0),new en(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let n=0,r=e.length;n<r;n++)Fp.setFromBufferAttribute(e[n]),this.morphTargetsRelative?(Ah.addVectors(this.boundingBox.min,Fp.min),this.boundingBox.expandByPoint(Ah),Ah.addVectors(this.boundingBox.max,Fp.max),this.boundingBox.expandByPoint(Ah)):(this.boundingBox.expandByPoint(Fp.min),this.boundingBox.expandByPoint(Fp.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new OC);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new en,1/0);if(t){const n=this.boundingSphere.center;if(Fp.setFromBufferAttribute(t),e)for(let s=0,o=e.length;s<o;s++)hx.setFromBufferAttribute(e[s]),this.morphTargetsRelative?(Ah.addVectors(Fp.min,hx.min),Fp.expandByPoint(Ah),Ah.addVectors(Fp.max,hx.max),Fp.expandByPoint(Ah)):(Fp.expandByPoint(hx.min),Fp.expandByPoint(hx.max));Fp.getCenter(n);let r=0;for(let s=0,o=t.count;s<o;s++)Ah.fromBufferAttribute(t,s),r=Math.max(r,n.distanceToSquared(Ah));if(e)for(let s=0,o=e.length;s<o;s++){const l=e[s],u=this.morphTargetsRelative;for(let p=0,v=l.count;p<v;p++)Ah.fromBufferAttribute(l,p),u&&(VC.fromBufferAttribute(t,p),Ah.add(VC)),r=Math.max(r,n.distanceToSquared(Ah))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.array,r=e.position.array,s=e.normal.array,o=e.uv.array,l=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new wh(new Float32Array(4*l),4));const u=this.getAttribute("tangent").array,p=[],v=[];for(let ln=0;ln<l;ln++)p[ln]=new en,v[ln]=new en;const w=new en,I=new en,T=new en,k=new Xi,G=new Xi,Y=new Xi,ce=new en,Se=new en;function Ae(ln,Hn,ei){w.fromArray(r,3*ln),I.fromArray(r,3*Hn),T.fromArray(r,3*ei),k.fromArray(o,2*ln),G.fromArray(o,2*Hn),Y.fromArray(o,2*ei),I.sub(w),T.sub(w),G.sub(k),Y.sub(k);const Wn=1/(G.x*Y.y-Y.x*G.y);!isFinite(Wn)||(ce.copy(I).multiplyScalar(Y.y).addScaledVector(T,-G.y).multiplyScalar(Wn),Se.copy(T).multiplyScalar(G.x).addScaledVector(I,-Y.x).multiplyScalar(Wn),p[ln].add(ce),p[Hn].add(ce),p[ei].add(ce),v[ln].add(Se),v[Hn].add(Se),v[ei].add(Se))}let Te=this.groups;0===Te.length&&(Te=[{start:0,count:n.length}]);for(let ln=0,Hn=Te.length;ln<Hn;++ln){const ei=Te[ln],Wn=ei.start;for(let zn=Wn,xn=Wn+ei.count;zn<xn;zn+=3)Ae(n[zn+0],n[zn+1],n[zn+2])}const Qe=new en,mt=new en,zt=new en,it=new en;function Tt(ln){zt.fromArray(s,3*ln),it.copy(zt);const Hn=p[ln];Qe.copy(Hn),Qe.sub(zt.multiplyScalar(zt.dot(Hn))).normalize(),mt.crossVectors(it,Hn);const Wn=mt.dot(v[ln])<0?-1:1;u[4*ln]=Qe.x,u[4*ln+1]=Qe.y,u[4*ln+2]=Qe.z,u[4*ln+3]=Wn}for(let ln=0,Hn=Te.length;ln<Hn;++ln){const ei=Te[ln],Wn=ei.start;for(let zn=Wn,xn=Wn+ei.count;zn<xn;zn+=3)Tt(n[zn+0]),Tt(n[zn+1]),Tt(n[zn+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let n=this.getAttribute("normal");if(void 0===n)n=new wh(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(let I=0,T=n.count;I<T;I++)n.setXYZ(I,0,0,0);const r=new en,s=new en,o=new en,l=new en,u=new en,p=new en,v=new en,w=new en;if(t)for(let I=0,T=t.count;I<T;I+=3){const k=t.getX(I+0),G=t.getX(I+1),Y=t.getX(I+2);r.fromBufferAttribute(e,k),s.fromBufferAttribute(e,G),o.fromBufferAttribute(e,Y),v.subVectors(o,s),w.subVectors(r,s),v.cross(w),l.fromBufferAttribute(n,k),u.fromBufferAttribute(n,G),p.fromBufferAttribute(n,Y),l.add(v),u.add(v),p.add(v),n.setXYZ(k,l.x,l.y,l.z),n.setXYZ(G,u.x,u.y,u.z),n.setXYZ(Y,p.x,p.y,p.z)}else for(let I=0,T=e.count;I<T;I+=3)r.fromBufferAttribute(e,I+0),s.fromBufferAttribute(e,I+1),o.fromBufferAttribute(e,I+2),v.subVectors(o,s),w.subVectors(r,s),v.cross(w),n.setXYZ(I+0,v.x,v.y,v.z),n.setXYZ(I+1,v.x,v.y,v.z),n.setXYZ(I+2,v.x,v.y,v.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)Ah.fromBufferAttribute(t,e),Ah.normalize(),t.setXYZ(e,Ah.x,Ah.y,Ah.z)}toNonIndexed(){function t(l,u){const p=l.array,v=l.itemSize,w=l.normalized,I=new p.constructor(u.length*v);let T=0,k=0;for(let G=0,Y=u.length;G<Y;G++){T=l.isInterleavedBufferAttribute?u[G]*l.data.stride+l.offset:u[G]*v;for(let ce=0;ce<v;ce++)I[k++]=p[T++]}return new wh(I,v,w)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new Ho,n=this.index.array,r=this.attributes;for(const l in r){const p=t(r[l],n);e.setAttribute(l,p)}const s=this.morphAttributes;for(const l in s){const u=[],p=s[l];for(let v=0,w=p.length;v<w;v++){const T=t(p[v],n);u.push(T)}e.morphAttributes[l]=u}e.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let l=0,u=o.length;l<u;l++){const p=o[l];e.addGroup(p.start,p.count,p.materialIndex)}return e}toJSON(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const u=this.parameters;for(const p in u)void 0!==u[p]&&(t[p]=u[p]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const u in n)t.data.attributes[u]=n[u].toJSON(t.data);const r={};let s=!1;for(const u in this.morphAttributes){const p=this.morphAttributes[u],v=[];for(let w=0,I=p.length;w<I;w++)v.push(p[w].toJSON(t.data));v.length>0&&(r[u]=v,s=!0)}s&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(t.data.groups=JSON.parse(JSON.stringify(o)));const l=this.boundingSphere;return null!==l&&(t.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;null!==n&&this.setIndex(n.clone(e));const r=t.attributes;for(const p in r)this.setAttribute(p,r[p].clone(e));const s=t.morphAttributes;for(const p in s){const v=[],w=s[p];for(let I=0,T=w.length;I<T;I++)v.push(w[I].clone(e));this.morphAttributes[p]=v}this.morphTargetsRelative=t.morphTargetsRelative;const o=t.groups;for(let p=0,v=o.length;p<v;p++){const w=o[p];this.addGroup(w.start,w.count,w.materialIndex)}const l=t.boundingBox;null!==l&&(this.boundingBox=l.clone());const u=t.boundingSphere;return null!==u&&(this.boundingSphere=u.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,void 0!==t.parameters&&(this.parameters=Object.assign({},t.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const rG=new vo,UC=new KS,yP=new OC,S_=new en,E_=new en,T_=new en,_P=new en,bP=new en,CP=new en,eE=new en,tE=new en,nE=new en,iE=new Xi,rE=new Xi,sE=new Xi,wP=new en,oE=new en;class Ld extends Hf{constructor(t=new Ho,e=new Y0){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const r=e[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}raycast(t,e){const n=this.geometry,r=this.material,s=this.matrixWorld;if(void 0===r||(null===n.boundingSphere&&n.computeBoundingSphere(),yP.copy(n.boundingSphere),yP.applyMatrix4(s),!1===t.ray.intersectsSphere(yP))||(rG.copy(s).invert(),UC.copy(t.ray).applyMatrix4(rG),null!==n.boundingBox&&!1===UC.intersectsBox(n.boundingBox)))return;let o;const l=n.index,u=n.attributes.position,p=n.morphAttributes.position,v=n.morphTargetsRelative,w=n.attributes.uv,I=n.attributes.uv2,T=n.groups,k=n.drawRange;if(null!==l)if(Array.isArray(r))for(let G=0,Y=T.length;G<Y;G++){const ce=T[G],Se=r[ce.materialIndex];for(let Qe=Math.max(ce.start,k.start),mt=Math.min(l.count,Math.min(ce.start+ce.count,k.start+k.count));Qe<mt;Qe+=3){const zt=l.getX(Qe),it=l.getX(Qe+1),Tt=l.getX(Qe+2);o=aE(this,Se,t,UC,u,p,v,w,I,zt,it,Tt),o&&(o.faceIndex=Math.floor(Qe/3),o.face.materialIndex=ce.materialIndex,e.push(o))}}else for(let ce=Math.max(0,k.start),Se=Math.min(l.count,k.start+k.count);ce<Se;ce+=3){const Ae=l.getX(ce),Te=l.getX(ce+1),Qe=l.getX(ce+2);o=aE(this,r,t,UC,u,p,v,w,I,Ae,Te,Qe),o&&(o.faceIndex=Math.floor(ce/3),e.push(o))}else if(void 0!==u)if(Array.isArray(r))for(let G=0,Y=T.length;G<Y;G++){const ce=T[G],Se=r[ce.materialIndex];for(let Qe=Math.max(ce.start,k.start),mt=Math.min(u.count,Math.min(ce.start+ce.count,k.start+k.count));Qe<mt;Qe+=3)o=aE(this,Se,t,UC,u,p,v,w,I,Qe,Qe+1,Qe+2),o&&(o.faceIndex=Math.floor(Qe/3),o.face.materialIndex=ce.materialIndex,e.push(o))}else for(let ce=Math.max(0,k.start),Se=Math.min(u.count,k.start+k.count);ce<Se;ce+=3)o=aE(this,r,t,UC,u,p,v,w,I,ce,ce+1,ce+2),o&&(o.faceIndex=Math.floor(ce/3),e.push(o))}}function aE(i,t,e,n,r,s,o,l,u,p,v,w){S_.fromBufferAttribute(r,p),E_.fromBufferAttribute(r,v),T_.fromBufferAttribute(r,w);const I=i.morphTargetInfluences;if(s&&I){eE.set(0,0,0),tE.set(0,0,0),nE.set(0,0,0);for(let k=0,G=s.length;k<G;k++){const Y=I[k],ce=s[k];0!==Y&&(_P.fromBufferAttribute(ce,p),bP.fromBufferAttribute(ce,v),CP.fromBufferAttribute(ce,w),o?(eE.addScaledVector(_P,Y),tE.addScaledVector(bP,Y),nE.addScaledVector(CP,Y)):(eE.addScaledVector(_P.sub(S_),Y),tE.addScaledVector(bP.sub(E_),Y),nE.addScaledVector(CP.sub(T_),Y)))}S_.add(eE),E_.add(tE),T_.add(nE)}i.isSkinnedMesh&&(i.boneTransform(p,S_),i.boneTransform(v,E_),i.boneTransform(w,T_));const T=function Lye(i,t,e,n,r,s,o,l){let u;if(u=1===t.side?n.intersectTriangle(o,s,r,!0,l):n.intersectTriangle(r,s,o,2!==t.side,l),null===u)return null;oE.copy(l),oE.applyMatrix4(i.matrixWorld);const p=e.ray.origin.distanceTo(oE);return p<e.near||p>e.far?null:{distance:p,point:oE.clone(),object:i}}(i,t,e,n,S_,E_,T_,wP);if(T){l&&(iE.fromBufferAttribute(l,p),rE.fromBufferAttribute(l,v),sE.fromBufferAttribute(l,w),T.uv=Cm.getUV(wP,S_,E_,T_,iE,rE,sE,new Xi)),u&&(iE.fromBufferAttribute(u,p),rE.fromBufferAttribute(u,v),sE.fromBufferAttribute(u,w),T.uv2=Cm.getUV(wP,S_,E_,T_,iE,rE,sE,new Xi));const k={a:p,b:v,c:w,normal:new en,materialIndex:0};Cm.getNormal(S_,E_,T_,k.normal),T.face=k}return T}class M_ extends Ho{constructor(t=1,e=1,n=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:s,depthSegments:o};const l=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const u=[],p=[],v=[],w=[];let I=0,T=0;function k(G,Y,ce,Se,Ae,Te,Qe,mt,zt,it,Tt){const ln=Te/zt,Hn=Qe/it,ei=Te/2,Wn=Qe/2,En=mt/2,zn=zt+1,xn=it+1;let Gn=0,Nn=0;const In=new en;for(let Vn=0;Vn<xn;Vn++){const Yi=Vn*Hn-Wn;for(let Ei=0;Ei<zn;Ei++)In[G]=(Ei*ln-ei)*Se,In[Y]=Yi*Ae,In[ce]=En,p.push(In.x,In.y,In.z),In[G]=0,In[Y]=0,In[ce]=mt>0?1:-1,v.push(In.x,In.y,In.z),w.push(Ei/zt),w.push(1-Vn/it),Gn+=1}for(let Vn=0;Vn<it;Vn++)for(let Yi=0;Yi<zt;Yi++){const rr=I+Yi+zn*(Vn+1),fr=I+(Yi+1)+zn*(Vn+1),Ss=I+(Yi+1)+zn*Vn;u.push(I+Yi+zn*Vn,rr,Ss),u.push(rr,fr,Ss),Nn+=6}l.addGroup(T,Nn,Tt),T+=Nn,I+=Gn}k("z","y","x",-1,-1,n,e,t,o,s,0),k("z","y","x",1,-1,n,e,-t,o,s,1),k("x","z","y",1,1,t,n,e,r,o,2),k("x","z","y",1,-1,t,n,-e,r,o,3),k("x","y","z",1,-1,t,e,n,r,s,4),k("x","y","z",-1,-1,t,e,-n,r,s,5),this.setIndex(u),this.setAttribute("position",new ls(p,3)),this.setAttribute("normal",new ls(v,3)),this.setAttribute("uv",new ls(w,2))}static fromJSON(t){return new M_(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function HC(i){const t={};for(const e in i){t[e]={};for(const n in i[e]){const r=i[e][n];t[e][n]=r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.clone():Array.isArray(r)?r.slice():r}}return t}function uf(i){const t={};for(let e=0;e<i.length;e++){const n=HC(i[e]);for(const r in n)t[r]=n[r]}return t}const Rye={clone:HC,merge:uf};class D_ extends X0{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=HC(t.uniforms),this.uniformsGroups=function Pye(i){const t=[];for(let e=0;e<i.length;e++)t.push(i[e].clone());return t}(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;e.uniforms[r]=o&&o.isTexture?{type:"t",value:o.toJSON(t).uuid}:o&&o.isColor?{type:"c",value:o.getHex()}:o&&o.isVector2?{type:"v2",value:o.toArray()}:o&&o.isVector3?{type:"v3",value:o.toArray()}:o&&o.isVector4?{type:"v4",value:o.toArray()}:o&&o.isMatrix3?{type:"m3",value:o.toArray()}:o&&o.isMatrix4?{type:"m4",value:o.toArray()}:{value:o}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}class AP extends Hf{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new vo,this.projectionMatrix=new vo,this.projectionMatrixInverse=new vo}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class ed extends AP{constructor(t=50,e=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*sx*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*H0*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*sx*Math.atan(Math.tan(.5*H0*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,n,r,s,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*H0*this.fov)/this.zoom,n=2*e,r=this.aspect*n,s=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const u=o.fullWidth,p=o.fullHeight;s+=o.offsetX*r/u,e-=o.offsetY*n/p,r*=o.width/u,n*=o.height/p}const l=this.filmOffset;0!==l&&(s+=t*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,e,e-n,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}class Fye extends Hf{constructor(t,e,n){super(),this.type="CubeCamera",this.renderTarget=n;const r=new ed(90,1,t,e);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new en(1,0,0)),this.add(r);const s=new ed(90,1,t,e);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new en(-1,0,0)),this.add(s);const o=new ed(90,1,t,e);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new en(0,1,0)),this.add(o);const l=new ed(90,1,t,e);l.layers=this.layers,l.up.set(0,0,-1),l.lookAt(new en(0,-1,0)),this.add(l);const u=new ed(90,1,t,e);u.layers=this.layers,u.up.set(0,-1,0),u.lookAt(new en(0,0,1)),this.add(u);const p=new ed(90,1,t,e);p.layers=this.layers,p.up.set(0,-1,0),p.lookAt(new en(0,0,-1)),this.add(p)}update(t,e){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[r,s,o,l,u,p]=this.children,v=t.getRenderTarget(),w=t.toneMapping,I=t.xr.enabled;t.toneMapping=0,t.xr.enabled=!1;const T=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,r),t.setRenderTarget(n,1),t.render(e,s),t.setRenderTarget(n,2),t.render(e,o),t.setRenderTarget(n,3),t.render(e,l),t.setRenderTarget(n,4),t.render(e,u),n.texture.generateMipmaps=T,t.setRenderTarget(n,5),t.render(e,p),t.setRenderTarget(v),t.toneMapping=w,t.xr.enabled=I,n.texture.needsPMREMUpdate=!0}}class lE extends b_{constructor(t,e,n,r,s,o,l,u,p,v){super(t=void 0!==t?t:[],e=void 0!==e?e:301,n,r,s,o,l,u,p,v),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class Nye extends W0{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;const n={width:t,height:t,depth:1};this.texture=new lE([n,n,n,n,n,n],e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:Lu}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n_uniforms={tEquirect:{value:null}},n_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",n_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",r=new M_(5,5,5),s=new D_({name:"CubemapFromEquirect",uniforms:HC(n_uniforms),vertexShader:n_vertexShader,fragmentShader:n_fragmentShader,side:1,blending:0});s.uniforms.tEquirect.value=e;const o=new Ld(r,s),l=e.minFilter;return 1008===e.minFilter&&(e.minFilter=Lu),new Fye(1,10,this).update(t,o),e.minFilter=l,o.geometry.dispose(),o.material.dispose(),this}clear(t,e,n,r){const s=t.getRenderTarget();for(let o=0;o<6;o++)t.setRenderTarget(this,o),t.clear(e,n,r);t.setRenderTarget(s)}}const xP=new en,Bye=new en,zye=new Rp;class K0{constructor(t=new en(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const r=xP.subVectors(n,e).cross(Bye.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,e){const n=t.delta(xP),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;const s=-(t.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:e.copy(n).multiplyScalar(s).add(t.start)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||zye.getNormalMatrix(t),r=this.coplanarPoint(xP).applyMatrix4(t),s=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(s),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const jC=new OC,cE=new en;class IP{constructor(t=new K0,e=new K0,n=new K0,r=new K0,s=new K0,o=new K0){this.planes=[t,e,n,r,s,o]}set(t,e,n,r,s,o){const l=this.planes;return l[0].copy(t),l[1].copy(e),l[2].copy(n),l[3].copy(r),l[4].copy(s),l[5].copy(o),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t){const e=this.planes,n=t.elements,r=n[0],s=n[1],o=n[2],l=n[3],u=n[4],p=n[5],v=n[6],w=n[7],I=n[8],T=n[9],k=n[10],G=n[11],Y=n[12],ce=n[13],Se=n[14],Ae=n[15];return e[0].setComponents(l-r,w-u,G-I,Ae-Y).normalize(),e[1].setComponents(l+r,w+u,G+I,Ae+Y).normalize(),e[2].setComponents(l+s,w+p,G+T,Ae+ce).normalize(),e[3].setComponents(l-s,w-p,G-T,Ae-ce).normalize(),e[4].setComponents(l-o,w-v,G-k,Ae-Se).normalize(),e[5].setComponents(l+o,w+v,G+k,Ae+Se).normalize(),this}intersectsObject(t){const e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),jC.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(jC)}intersectsSprite(t){return jC.center.set(0,0,0),jC.radius=.7071067811865476,jC.applyMatrix4(t.matrixWorld),this.intersectsSphere(jC)}intersectsSphere(t){const e=this.planes,n=t.center,r=-t.radius;for(let s=0;s<6;s++)if(e[s].distanceToPoint(n)<r)return!1;return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const r=e[n];if(cE.x=r.normal.x>0?t.max.x:t.min.x,cE.y=r.normal.y>0?t.max.y:t.min.y,cE.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(cE)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function sG(){let i=null,t=!1,e=null,n=null;function r(s,o){e(s,o),n=i.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==e&&(n=i.requestAnimationFrame(r),t=!0)},stop:function(){i.cancelAnimationFrame(n),t=!1},setAnimationLoop:function(s){e=s},setContext:function(s){i=s}}}function Vye(i,t){const e=t.isWebGL2,n=new WeakMap;return{get:function o(p){return p.isInterleavedBufferAttribute&&(p=p.data),n.get(p)},remove:function l(p){p.isInterleavedBufferAttribute&&(p=p.data);const v=n.get(p);v&&(i.deleteBuffer(v.buffer),n.delete(p))},update:function u(p,v){if(p.isGLBufferAttribute){const I=n.get(p);return void((!I||I.version<p.version)&&n.set(p,{buffer:p.buffer,type:p.type,bytesPerElement:p.elementSize,version:p.version}))}p.isInterleavedBufferAttribute&&(p=p.data);const w=n.get(p);void 0===w?n.set(p,function r(p,v){const w=p.array,I=p.usage,T=i.createBuffer();let k;if(i.bindBuffer(v,T),i.bufferData(v,w,I),p.onUploadCallback(),w instanceof Float32Array)k=5126;else if(w instanceof Uint16Array)if(p.isFloat16BufferAttribute){if(!e)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");k=5131}else k=5123;else if(w instanceof Int16Array)k=5122;else if(w instanceof Uint32Array)k=5125;else if(w instanceof Int32Array)k=5124;else if(w instanceof Int8Array)k=5120;else if(w instanceof Uint8Array)k=5121;else{if(!(w instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+w);k=5121}return{buffer:T,type:k,bytesPerElement:w.BYTES_PER_ELEMENT,version:p.version}}(p,v)):w.version<p.version&&(function s(p,v,w){const I=v.array,T=v.updateRange;i.bindBuffer(w,p),-1===T.count?i.bufferSubData(w,0,I):(e?i.bufferSubData(w,T.offset*I.BYTES_PER_ELEMENT,I,T.offset,T.count):i.bufferSubData(w,T.offset*I.BYTES_PER_ELEMENT,I.subarray(T.offset,T.offset+T.count)),T.count=-1)}(w.buffer,p,v),w.version=p.version)}}}class uE extends Ho{constructor(t=1,e=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r};const s=t/2,o=e/2,l=Math.floor(n),u=Math.floor(r),p=l+1,v=u+1,w=t/l,I=e/u,T=[],k=[],G=[],Y=[];for(let ce=0;ce<v;ce++){const Se=ce*I-o;for(let Ae=0;Ae<p;Ae++)k.push(Ae*w-s,-Se,0),G.push(0,0,1),Y.push(Ae/l),Y.push(1-ce/u)}for(let ce=0;ce<u;ce++)for(let Se=0;Se<l;Se++){const Te=Se+p*(ce+1),Qe=Se+1+p*(ce+1),mt=Se+1+p*ce;T.push(Se+p*ce,Te,mt),T.push(Te,Qe,mt)}this.setIndex(T),this.setAttribute("position",new ls(k,3)),this.setAttribute("normal",new ls(G,3)),this.setAttribute("uv",new ls(Y,2))}static fromJSON(t){return new uE(t.width,t.height,t.widthSegments,t.heightSegments)}}const ko={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert\n#define Material_LightProbeLOD( material )\t(0)",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Mr={common:{diffuse:{value:new es(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Rp},uv2Transform:{value:new Rp},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Xi(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new es(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new es(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Rp}},sprite:{diffuse:{value:new es(16777215)},opacity:{value:1},center:{value:new Xi(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Rp}}},dv={basic:{uniforms:uf([Mr.common,Mr.specularmap,Mr.envmap,Mr.aomap,Mr.lightmap,Mr.fog]),vertexShader:ko.meshbasic_vert,fragmentShader:ko.meshbasic_frag},lambert:{uniforms:uf([Mr.common,Mr.specularmap,Mr.envmap,Mr.aomap,Mr.lightmap,Mr.emissivemap,Mr.bumpmap,Mr.normalmap,Mr.displacementmap,Mr.fog,Mr.lights,{emissive:{value:new es(0)}}]),vertexShader:ko.meshlambert_vert,fragmentShader:ko.meshlambert_frag},phong:{uniforms:uf([Mr.common,Mr.specularmap,Mr.envmap,Mr.aomap,Mr.lightmap,Mr.emissivemap,Mr.bumpmap,Mr.normalmap,Mr.displacementmap,Mr.fog,Mr.lights,{emissive:{value:new es(0)},specular:{value:new es(1118481)},shininess:{value:30}}]),vertexShader:ko.meshphong_vert,fragmentShader:ko.meshphong_frag},standard:{uniforms:uf([Mr.common,Mr.envmap,Mr.aomap,Mr.lightmap,Mr.emissivemap,Mr.bumpmap,Mr.normalmap,Mr.displacementmap,Mr.roughnessmap,Mr.metalnessmap,Mr.fog,Mr.lights,{emissive:{value:new es(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ko.meshphysical_vert,fragmentShader:ko.meshphysical_frag},toon:{uniforms:uf([Mr.common,Mr.aomap,Mr.lightmap,Mr.emissivemap,Mr.bumpmap,Mr.normalmap,Mr.displacementmap,Mr.gradientmap,Mr.fog,Mr.lights,{emissive:{value:new es(0)}}]),vertexShader:ko.meshtoon_vert,fragmentShader:ko.meshtoon_frag},matcap:{uniforms:uf([Mr.common,Mr.bumpmap,Mr.normalmap,Mr.displacementmap,Mr.fog,{matcap:{value:null}}]),vertexShader:ko.meshmatcap_vert,fragmentShader:ko.meshmatcap_frag},points:{uniforms:uf([Mr.points,Mr.fog]),vertexShader:ko.points_vert,fragmentShader:ko.points_frag},dashed:{uniforms:uf([Mr.common,Mr.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ko.linedashed_vert,fragmentShader:ko.linedashed_frag},depth:{uniforms:uf([Mr.common,Mr.displacementmap]),vertexShader:ko.depth_vert,fragmentShader:ko.depth_frag},normal:{uniforms:uf([Mr.common,Mr.bumpmap,Mr.normalmap,Mr.displacementmap,{opacity:{value:1}}]),vertexShader:ko.meshnormal_vert,fragmentShader:ko.meshnormal_frag},sprite:{uniforms:uf([Mr.sprite,Mr.fog]),vertexShader:ko.sprite_vert,fragmentShader:ko.sprite_frag},background:{uniforms:{uvTransform:{value:new Rp},t2D:{value:null}},vertexShader:ko.background_vert,fragmentShader:ko.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0}},vertexShader:ko.backgroundCube_vert,fragmentShader:ko.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ko.cube_vert,fragmentShader:ko.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ko.equirect_vert,fragmentShader:ko.equirect_frag},distanceRGBA:{uniforms:uf([Mr.common,Mr.displacementmap,{referencePosition:{value:new en},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ko.distanceRGBA_vert,fragmentShader:ko.distanceRGBA_frag},shadow:{uniforms:uf([Mr.lights,Mr.fog,{color:{value:new es(0)},opacity:{value:1}}]),vertexShader:ko.shadow_vert,fragmentShader:ko.shadow_frag}};function z0e(i,t,e,n,r,s,o){const l=new es(0);let p,v,u=!0===s?0:1,w=null,I=0,T=null;function G(Y,ce){n.buffers.color.setClear(Y.r,Y.g,Y.b,ce,o)}return{getClearColor:function(){return l},setClearColor:function(Y,ce=1){l.set(Y),u=ce,G(l,u)},getClearAlpha:function(){return u},setClearAlpha:function(Y){u=Y,G(l,u)},render:function k(Y,ce){let Se=!1,Ae=!0===ce.isScene?ce.background:null;Ae&&Ae.isTexture&&(Ae=(ce.backgroundBlurriness>0?e:t).get(Ae));const Te=i.xr,Qe=Te.getSession&&Te.getSession();Qe&&"additive"===Qe.environmentBlendMode&&(Ae=null),null===Ae?G(l,u):Ae&&Ae.isColor&&(G(Ae,1),Se=!0),(i.autoClear||Se)&&i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil),Ae&&(Ae.isCubeTexture||306===Ae.mapping)?(void 0===v&&(v=new Ld(new M_(1,1,1),new D_({name:"BackgroundCubeMaterial",uniforms:HC(dv.backgroundCube.uniforms),vertexShader:dv.backgroundCube.vertexShader,fragmentShader:dv.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),v.geometry.deleteAttribute("normal"),v.geometry.deleteAttribute("uv"),v.onBeforeRender=function(mt,zt,it){this.matrixWorld.copyPosition(it.matrixWorld)},Object.defineProperty(v.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(v)),v.material.uniforms.envMap.value=Ae,v.material.uniforms.flipEnvMap.value=Ae.isCubeTexture&&!1===Ae.isRenderTargetTexture?-1:1,v.material.uniforms.backgroundBlurriness.value=ce.backgroundBlurriness,(w!==Ae||I!==Ae.version||T!==i.toneMapping)&&(v.material.needsUpdate=!0,w=Ae,I=Ae.version,T=i.toneMapping),v.layers.enableAll(),Y.unshift(v,v.geometry,v.material,0,0,null)):Ae&&Ae.isTexture&&(void 0===p&&(p=new Ld(new uE(2,2),new D_({name:"BackgroundMaterial",uniforms:HC(dv.background.uniforms),vertexShader:dv.background.vertexShader,fragmentShader:dv.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),p.geometry.deleteAttribute("normal"),Object.defineProperty(p.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(p)),p.material.uniforms.t2D.value=Ae,!0===Ae.matrixAutoUpdate&&Ae.updateMatrix(),p.material.uniforms.uvTransform.value.copy(Ae.matrix),(w!==Ae||I!==Ae.version||T!==i.toneMapping)&&(p.material.needsUpdate=!0,w=Ae,I=Ae.version,T=i.toneMapping),p.layers.enableAll(),Y.unshift(p,p.geometry,p.material,0,0,null))}}}function V0e(i,t,e,n){const r=i.getParameter(34921),s=n.isWebGL2?null:t.get("OES_vertex_array_object"),o=n.isWebGL2||null!==s,l={},u=Y(null);let p=u,v=!1;function T(En){return n.isWebGL2?i.bindVertexArray(En):s.bindVertexArrayOES(En)}function k(En){return n.isWebGL2?i.deleteVertexArray(En):s.deleteVertexArrayOES(En)}function Y(En){const zn=[],xn=[],Gn=[];for(let Nn=0;Nn<r;Nn++)zn[Nn]=0,xn[Nn]=0,Gn[Nn]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:zn,enabledAttributes:xn,attributeDivisors:Gn,object:En,attributes:{},index:null}}function Ae(){const En=p.newAttributes;for(let zn=0,xn=En.length;zn<xn;zn++)En[zn]=0}function Te(En){Qe(En,0)}function Qe(En,zn){const Gn=p.enabledAttributes,Nn=p.attributeDivisors;p.newAttributes[En]=1,0===Gn[En]&&(i.enableVertexAttribArray(En),Gn[En]=1),Nn[En]!==zn&&((n.isWebGL2?i:t.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](En,zn),Nn[En]=zn)}function mt(){const En=p.newAttributes,zn=p.enabledAttributes;for(let xn=0,Gn=zn.length;xn<Gn;xn++)zn[xn]!==En[xn]&&(i.disableVertexAttribArray(xn),zn[xn]=0)}function zt(En,zn,xn,Gn,Nn,In){!0!==n.isWebGL2||5124!==xn&&5125!==xn?i.vertexAttribPointer(En,zn,xn,Gn,Nn,In):i.vertexAttribIPointer(En,zn,xn,Nn,In)}function ei(){Wn(),v=!0,p!==u&&(p=u,T(p.object))}function Wn(){u.geometry=null,u.program=null,u.wireframe=!1}return{setup:function w(En,zn,xn,Gn,Nn){let In=!1;if(o){const Vn=function G(En,zn,xn){const Gn=!0===xn.wireframe;let Nn=l[En.id];void 0===Nn&&(Nn={},l[En.id]=Nn);let In=Nn[zn.id];void 0===In&&(In={},Nn[zn.id]=In);let Vn=In[Gn];return void 0===Vn&&(Vn=Y(function I(){return n.isWebGL2?i.createVertexArray():s.createVertexArrayOES()}()),In[Gn]=Vn),Vn}(Gn,xn,zn);p!==Vn&&(p=Vn,T(p.object)),In=function ce(En,zn,xn,Gn){const Nn=p.attributes,In=zn.attributes;let Vn=0;const Yi=xn.getAttributes();for(const Ei in Yi)if(Yi[Ei].location>=0){const fr=Nn[Ei];let Ss=In[Ei];if(void 0===Ss&&("instanceMatrix"===Ei&&En.instanceMatrix&&(Ss=En.instanceMatrix),"instanceColor"===Ei&&En.instanceColor&&(Ss=En.instanceColor)),void 0===fr||fr.attribute!==Ss||Ss&&fr.data!==Ss.data)return!0;Vn++}return p.attributesNum!==Vn||p.index!==Gn}(En,Gn,xn,Nn),In&&function Se(En,zn,xn,Gn){const Nn={},In=zn.attributes;let Vn=0;const Yi=xn.getAttributes();for(const Ei in Yi)if(Yi[Ei].location>=0){let fr=In[Ei];void 0===fr&&("instanceMatrix"===Ei&&En.instanceMatrix&&(fr=En.instanceMatrix),"instanceColor"===Ei&&En.instanceColor&&(fr=En.instanceColor));const Ss={};Ss.attribute=fr,fr&&fr.data&&(Ss.data=fr.data),Nn[Ei]=Ss,Vn++}p.attributes=Nn,p.attributesNum=Vn,p.index=Gn}(En,Gn,xn,Nn)}else{const Vn=!0===zn.wireframe;(p.geometry!==Gn.id||p.program!==xn.id||p.wireframe!==Vn)&&(p.geometry=Gn.id,p.program=xn.id,p.wireframe=Vn,In=!0)}null!==Nn&&e.update(Nn,34963),(In||v)&&(v=!1,function it(En,zn,xn,Gn){if(!1===n.isWebGL2&&(En.isInstancedMesh||Gn.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;Ae();const Nn=Gn.attributes,In=xn.getAttributes(),Vn=zn.defaultAttributeValues;for(const Yi in In){const Ei=In[Yi];if(Ei.location>=0){let rr=Nn[Yi];if(void 0===rr&&("instanceMatrix"===Yi&&En.instanceMatrix&&(rr=En.instanceMatrix),"instanceColor"===Yi&&En.instanceColor&&(rr=En.instanceColor)),void 0!==rr){const fr=rr.normalized,Ss=rr.itemSize,Di=e.get(rr);if(void 0===Di)continue;const _s=Di.buffer,ps=Di.type,gs=Di.bytesPerElement;if(rr.isInterleavedBufferAttribute){const Pr=rr.data,Io=Pr.stride,Gi=rr.offset;if(Pr.isInstancedInterleavedBuffer){for(let Bi=0;Bi<Ei.locationSize;Bi++)Qe(Ei.location+Bi,Pr.meshPerAttribute);!0!==En.isInstancedMesh&&void 0===Gn._maxInstanceCount&&(Gn._maxInstanceCount=Pr.meshPerAttribute*Pr.count)}else for(let Bi=0;Bi<Ei.locationSize;Bi++)Te(Ei.location+Bi);i.bindBuffer(34962,_s);for(let Bi=0;Bi<Ei.locationSize;Bi++)zt(Ei.location+Bi,Ss/Ei.locationSize,ps,fr,Io*gs,(Gi+Ss/Ei.locationSize*Bi)*gs)}else{if(rr.isInstancedBufferAttribute){for(let Pr=0;Pr<Ei.locationSize;Pr++)Qe(Ei.location+Pr,rr.meshPerAttribute);!0!==En.isInstancedMesh&&void 0===Gn._maxInstanceCount&&(Gn._maxInstanceCount=rr.meshPerAttribute*rr.count)}else for(let Pr=0;Pr<Ei.locationSize;Pr++)Te(Ei.location+Pr);i.bindBuffer(34962,_s);for(let Pr=0;Pr<Ei.locationSize;Pr++)zt(Ei.location+Pr,Ss/Ei.locationSize,ps,fr,Ss*gs,Ss/Ei.locationSize*Pr*gs)}}else if(void 0!==Vn){const fr=Vn[Yi];if(void 0!==fr)switch(fr.length){case 2:i.vertexAttrib2fv(Ei.location,fr);break;case 3:i.vertexAttrib3fv(Ei.location,fr);break;case 4:i.vertexAttrib4fv(Ei.location,fr);break;default:i.vertexAttrib1fv(Ei.location,fr)}}}}mt()}(En,zn,xn,Gn),null!==Nn&&i.bindBuffer(34963,e.get(Nn).buffer))},reset:ei,resetDefaultState:Wn,dispose:function Tt(){ei();for(const En in l){const zn=l[En];for(const xn in zn){const Gn=zn[xn];for(const Nn in Gn)k(Gn[Nn].object),delete Gn[Nn];delete zn[xn]}delete l[En]}},releaseStatesOfGeometry:function ln(En){if(void 0===l[En.id])return;const zn=l[En.id];for(const xn in zn){const Gn=zn[xn];for(const Nn in Gn)k(Gn[Nn].object),delete Gn[Nn];delete zn[xn]}delete l[En.id]},releaseStatesOfProgram:function Hn(En){for(const zn in l){const xn=l[zn];if(void 0===xn[En.id])continue;const Gn=xn[En.id];for(const Nn in Gn)k(Gn[Nn].object),delete Gn[Nn];delete xn[En.id]}},initAttributes:Ae,enableAttribute:Te,disableUnusedAttributes:mt}}function U0e(i,t,e,n){const r=n.isWebGL2;let s;this.setMode=function o(p){s=p},this.render=function l(p,v){i.drawArrays(s,p,v),e.update(v,s,1)},this.renderInstances=function u(p,v,w){if(0===w)return;let I,T;if(r)I=i,T="drawArraysInstanced";else if(I=t.get("ANGLE_instanced_arrays"),T="drawArraysInstancedANGLE",null===I)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");I[T](s,p,v,w),e.update(v,s,w)}}function H0e(i,t,e){let n;function s(zt){if("highp"===zt){if(i.getShaderPrecisionFormat(35633,36338).precision>0&&i.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";zt="mediump"}return"mediump"===zt&&i.getShaderPrecisionFormat(35633,36337).precision>0&&i.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&i instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&i instanceof WebGL2ComputeRenderingContext;let l=void 0!==e.precision?e.precision:"highp";const u=s(l);u!==l&&(console.warn("THREE.WebGLRenderer:",l,"not supported, using",u,"instead."),l=u);const p=o||t.has("WEBGL_draw_buffers"),v=!0===e.logarithmicDepthBuffer,w=i.getParameter(34930),I=i.getParameter(35660),T=i.getParameter(3379),k=i.getParameter(34076),G=i.getParameter(34921),Y=i.getParameter(36347),ce=i.getParameter(36348),Se=i.getParameter(36349),Ae=I>0,Te=o||t.has("OES_texture_float");return{isWebGL2:o,drawBuffers:p,getMaxAnisotropy:function r(){if(void 0!==n)return n;if(!0===t.has("EXT_texture_filter_anisotropic")){const zt=t.get("EXT_texture_filter_anisotropic");n=i.getParameter(zt.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n},getMaxPrecision:s,precision:l,logarithmicDepthBuffer:v,maxTextures:w,maxVertexTextures:I,maxTextureSize:T,maxCubemapSize:k,maxAttributes:G,maxVertexUniforms:Y,maxVaryings:ce,maxFragmentUniforms:Se,vertexTextures:Ae,floatFragmentTextures:Te,floatVertexTextures:Ae&&Te,maxSamples:o?i.getParameter(36183):0}}function G0e(i){const t=this;let e=null,n=0,r=!1,s=!1;const o=new K0,l=new Rp,u={value:null,needsUpdate:!1};function p(){u.value!==e&&(u.value=e,u.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0}function v(w,I,T,k){const G=null!==w?w.length:0;let Y=null;if(0!==G){if(Y=u.value,!0!==k||null===Y){const ce=T+4*G,Se=I.matrixWorldInverse;l.getNormalMatrix(Se),(null===Y||Y.length<ce)&&(Y=new Float32Array(ce));for(let Ae=0,Te=T;Ae!==G;++Ae,Te+=4)o.copy(w[Ae]).applyMatrix4(Se,l),o.normal.toArray(Y,Te),Y[Te+3]=o.constant}u.value=Y,u.needsUpdate=!0}return t.numPlanes=G,t.numIntersection=0,Y}this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(w,I,T){const k=0!==w.length||I||0!==n||r;return r=I,e=v(w,T,0),n=w.length,k},this.beginShadows=function(){s=!0,v(null)},this.endShadows=function(){s=!1,p()},this.setState=function(w,I,T){const k=w.clippingPlanes,G=w.clipIntersection,Y=w.clipShadows,ce=i.get(w);if(!r||null===k||0===k.length||s&&!Y)s?v(null):p();else{const Se=s?0:n,Ae=4*Se;let Te=ce.clippingState||null;u.value=Te,Te=v(k,I,Ae,T);for(let Qe=0;Qe!==Ae;++Qe)Te[Qe]=e[Qe];ce.clippingState=Te,this.numIntersection=G?this.numPlanes:0,this.numPlanes+=Se}}}function W0e(i){let t=new WeakMap;function e(o,l){return 303===l?o.mapping=301:304===l&&(o.mapping=302),o}function r(o){const l=o.target;l.removeEventListener("dispose",r);const u=t.get(l);void 0!==u&&(t.delete(l),u.dispose())}return{get:function n(o){if(o&&o.isTexture&&!1===o.isRenderTargetTexture){const l=o.mapping;if(303===l||304===l){if(t.has(o))return e(t.get(o).texture,o.mapping);{const u=o.image;if(u&&u.height>0){const p=new Nye(u.height/2);return p.fromEquirectangularTexture(i,o),t.set(o,p),o.addEventListener("dispose",r),e(p.texture,o.mapping)}return null}}}return o},dispose:function s(){t=new WeakMap}}}dv.physical={uniforms:uf([dv.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Xi(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new es(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Xi},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new es(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new es(1,1,1)},specularColorMap:{value:null}}]),vertexShader:ko.meshphysical_vert,fragmentShader:ko.meshphysical_frag};class SP extends AP{constructor(t=-1,e=1,n=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,n,r,s,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=n-t,o=n+t,l=r+e,u=r-e;if(null!==this.view&&this.view.enabled){const p=(this.right-this.left)/this.view.fullWidth/this.zoom,v=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=p*this.view.offsetX,o=s+p*this.view.width,l-=v*this.view.offsetY,u=l-v*this.view.height}this.projectionMatrix.makeOrthographic(s,o,l,u,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}const oG=[.125,.215,.35,.446,.526,.582],EP=new SP,aG=new es;let TP=null;const Q0=(1+Math.sqrt(5))/2,qC=1/Q0,lG=[new en(1,1,1),new en(-1,1,1),new en(1,1,-1),new en(-1,1,-1),new en(0,Q0,qC),new en(0,Q0,-qC),new en(qC,0,Q0),new en(-qC,0,Q0),new en(Q0,qC,0),new en(-Q0,qC,0)];class cG{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,r=100){TP=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(t,n,r,s),e>0&&this._blur(s,0,0,e),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=dG(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=hG(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(TP),t.scissorTest=!1,hE(t,0,0,t.width,t.height)}_fromTexture(t,e){this._setSize(301===t.mapping||302===t.mapping?0===t.image.length?16:t.image[0].width||t.image[0].image.width:t.image.width/4),TP=this._renderer.getRenderTarget();const n=e||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,n={magFilter:Lu,minFilter:Lu,generateMipmaps:!1,type:rx,format:wg,encoding:z0,depthBuffer:!1},r=uG(t,e,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=uG(t,e,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function j0e(i){const t=[],e=[],n=[];let r=i;const s=i-4+1+oG.length;for(let o=0;o<s;o++){const l=Math.pow(2,r);e.push(l);let u=1/l;o>i-4?u=oG[o-i+4-1]:0===o&&(u=0),n.push(u);const p=1/(l-2),v=-p,w=1+p,I=[v,v,w,v,w,w,v,v,w,w,v,w],T=6,k=6,G=3,Y=2,ce=1,Se=new Float32Array(G*k*T),Ae=new Float32Array(Y*k*T),Te=new Float32Array(ce*k*T);for(let mt=0;mt<T;mt++){const zt=mt%3*2/3-1,it=mt>2?0:-1;Se.set([zt,it,0,zt+2/3,it,0,zt+2/3,it+1,0,zt,it,0,zt+2/3,it+1,0,zt,it+1,0],G*k*mt),Ae.set(I,Y*k*mt),Te.set([mt,mt,mt,mt,mt,mt],ce*k*mt)}const Qe=new Ho;Qe.setAttribute("position",new wh(Se,G)),Qe.setAttribute("uv",new wh(Ae,Y)),Qe.setAttribute("faceIndex",new wh(Te,ce)),t.push(Qe),r>4&&r--}return{lodPlanes:t,sizeLods:e,sigmas:n}}(s)),this._blurMaterial=function $0e(i,t,e){const n=new Float32Array(20),r=new en(0,1,0);return new D_({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/e,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(s,t,e)}return r}_compileMaterial(t){const e=new Ld(this._lodPlanes[0],t);this._renderer.compile(e,EP)}_sceneToCubeUV(t,e,n,r){const l=new ed(90,1,e,n),u=[1,-1,1,1,1,1],p=[1,1,1,-1,-1,-1],v=this._renderer,w=v.autoClear,I=v.toneMapping;v.getClearColor(aG),v.toneMapping=0,v.autoClear=!1;const T=new Y0({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),k=new Ld(new M_,T);let G=!1;const Y=t.background;Y?Y.isColor&&(T.color.copy(Y),t.background=null,G=!0):(T.color.copy(aG),G=!0);for(let ce=0;ce<6;ce++){const Se=ce%3;0===Se?(l.up.set(0,u[ce],0),l.lookAt(p[ce],0,0)):1===Se?(l.up.set(0,0,u[ce]),l.lookAt(0,p[ce],0)):(l.up.set(0,u[ce],0),l.lookAt(0,0,p[ce]));const Ae=this._cubeSize;hE(r,Se*Ae,ce>2?Ae:0,Ae,Ae),v.setRenderTarget(r),G&&v.render(k,l),v.render(t,l)}k.geometry.dispose(),k.material.dispose(),v.toneMapping=I,v.autoClear=w,t.background=Y}_textureToCubeUV(t,e){const n=this._renderer,r=301===t.mapping||302===t.mapping;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=dG()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=hG());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Ld(this._lodPlanes[0],s);s.uniforms.envMap.value=t;const u=this._cubeSize;hE(e,0,0,3*u,2*u),n.setRenderTarget(e),n.render(o,EP)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]);this._blur(t,r-1,r,s,lG[(r-1)%lG.length])}e.autoClear=n}_blur(t,e,n,r,s){const o=this._pingPongRenderTarget;this._halfBlur(t,o,e,n,r,"latitudinal",s),this._halfBlur(o,t,n,n,r,"longitudinal",s)}_halfBlur(t,e,n,r,s,o,l){const u=this._renderer,p=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const w=new Ld(this._lodPlanes[r],p),I=p.uniforms,T=this._sizeLods[n]-1,k=isFinite(s)?Math.PI/(2*T):2*Math.PI/39,G=s/k,Y=isFinite(s)?1+Math.floor(3*G):20;Y>20&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${Y} samples when the maximum is set to 20`);const ce=[];let Se=0;for(let zt=0;zt<20;++zt){const it=zt/G,Tt=Math.exp(-it*it/2);ce.push(Tt),0===zt?Se+=Tt:zt<Y&&(Se+=2*Tt)}for(let zt=0;zt<ce.length;zt++)ce[zt]=ce[zt]/Se;I.envMap.value=t.texture,I.samples.value=Y,I.weights.value=ce,I.latitudinal.value="latitudinal"===o,l&&(I.poleAxis.value=l);const{_lodMax:Ae}=this;I.dTheta.value=k,I.mipInt.value=Ae-n;const Te=this._sizeLods[r];hE(e,3*Te*(r>Ae-4?r-Ae+4:0),4*(this._cubeSize-Te),3*Te,2*Te),u.setRenderTarget(e),u.render(w,EP)}}function uG(i,t,e){const n=new W0(i,t,e);return n.texture.mapping=306,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function hE(i,t,e,n,r){i.viewport.set(t,e,n,r),i.scissor.set(t,e,n,r)}function hG(){return new D_({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function dG(){return new D_({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function q0e(i){let t=new WeakMap,e=null;function s(l){const u=l.target;u.removeEventListener("dispose",s);const p=t.get(u);void 0!==p&&(t.delete(u),p.dispose())}return{get:function n(l){if(l&&l.isTexture){const u=l.mapping,p=303===u||304===u,v=301===u||302===u;if(p||v){if(l.isRenderTargetTexture&&!0===l.needsPMREMUpdate){l.needsPMREMUpdate=!1;let w=t.get(l);return null===e&&(e=new cG(i)),w=p?e.fromEquirectangular(l,w):e.fromCubemap(l,w),t.set(l,w),w.texture}if(t.has(l))return t.get(l).texture;{const w=l.image;if(p&&w&&w.height>0||v&&w&&function r(l){let u=0;for(let v=0;v<6;v++)void 0!==l[v]&&u++;return 6===u}(w)){null===e&&(e=new cG(i));const I=p?e.fromEquirectangular(l):e.fromCubemap(l);return t.set(l,I),l.addEventListener("dispose",s),I.texture}return null}}}return l},dispose:function o(){t=new WeakMap,null!==e&&(e.dispose(),e=null)}}}function X0e(i){const t={};function e(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=i.getExtension(n)}return t[n]=r,r}return{has:function(n){return null!==e(n)},init:function(n){n.isWebGL2?e("EXT_color_buffer_float"):(e("WEBGL_depth_texture"),e("OES_texture_float"),e("OES_texture_half_float"),e("OES_texture_half_float_linear"),e("OES_standard_derivatives"),e("OES_element_index_uint"),e("OES_vertex_array_object"),e("ANGLE_instanced_arrays")),e("OES_texture_float_linear"),e("EXT_color_buffer_half_float"),e("WEBGL_multisampled_render_to_texture")},get:function(n){const r=e(n);return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),r}}}function Y0e(i,t,e,n){const r={},s=new WeakMap;function o(w){const I=w.target;null!==I.index&&t.remove(I.index);for(const k in I.attributes)t.remove(I.attributes[k]);I.removeEventListener("dispose",o),delete r[I.id];const T=s.get(I);T&&(t.remove(T),s.delete(I)),n.releaseStatesOfGeometry(I),!0===I.isInstancedBufferGeometry&&delete I._maxInstanceCount,e.memory.geometries--}function p(w){const I=[],T=w.index,k=w.attributes.position;let G=0;if(null!==T){const Se=T.array;G=T.version;for(let Ae=0,Te=Se.length;Ae<Te;Ae+=3){const Qe=Se[Ae+0],mt=Se[Ae+1],zt=Se[Ae+2];I.push(Qe,mt,mt,zt,zt,Qe)}}else{G=k.version;for(let Ae=0,Te=k.array.length/3-1;Ae<Te;Ae+=3){const Qe=Ae+0,mt=Ae+1,zt=Ae+2;I.push(Qe,mt,mt,zt,zt,Qe)}}const Y=new(G5(I)?iG:nG)(I,1);Y.version=G;const ce=s.get(w);ce&&t.remove(ce),s.set(w,Y)}return{get:function l(w,I){return!0===r[I.id]||(I.addEventListener("dispose",o),r[I.id]=!0,e.memory.geometries++),I},update:function u(w){const I=w.attributes;for(const k in I)t.update(I[k],34962);const T=w.morphAttributes;for(const k in T){const G=T[k];for(let Y=0,ce=G.length;Y<ce;Y++)t.update(G[Y],34962)}},getWireframeAttribute:function v(w){const I=s.get(w);if(I){const T=w.index;null!==T&&I.version<T.version&&p(w)}else p(w);return s.get(w)}}}function K0e(i,t,e,n){const r=n.isWebGL2;let s,l,u;this.setMode=function o(I){s=I},this.setIndex=function p(I){l=I.type,u=I.bytesPerElement},this.render=function v(I,T){i.drawElements(s,T,l,I*u),e.update(T,s,1)},this.renderInstances=function w(I,T,k){if(0===k)return;let G,Y;if(r)G=i,Y="drawElementsInstanced";else if(G=t.get("ANGLE_instanced_arrays"),Y="drawElementsInstancedANGLE",null===G)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");G[Y](s,T,l,I*u,k),e.update(T,s,k)}}function Z0e(i){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function r(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function n(s,o,l){switch(e.calls++,o){case 4:e.triangles+=l*(s/3);break;case 1:e.lines+=l*(s/2);break;case 3:e.lines+=l*(s-1);break;case 2:e.lines+=l*s;break;case 0:e.points+=l*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o)}}}}function Q0e(i,t){return i[0]-t[0]}function J0e(i,t){return Math.abs(t[1])-Math.abs(i[1])}function ebe(i,t,e){const n={},r=new Float32Array(8),s=new WeakMap,o=new fl,l=[];for(let p=0;p<8;p++)l[p]=[p,0];return{update:function u(p,v,w,I){const T=p.morphTargetInfluences;if(!0===t.isWebGL2){const k=v.morphAttributes.position||v.morphAttributes.normal||v.morphAttributes.color,G=void 0!==k?k.length:0;let Y=s.get(v);if(void 0===Y||Y.count!==G){let zn=function(){Wn.dispose(),s.delete(v),v.removeEventListener("dispose",zn)};void 0!==Y&&Y.texture.dispose();const Ae=void 0!==v.morphAttributes.position,Te=void 0!==v.morphAttributes.normal,Qe=void 0!==v.morphAttributes.color,mt=v.morphAttributes.position||[],zt=v.morphAttributes.normal||[],it=v.morphAttributes.color||[];let Tt=0;!0===Ae&&(Tt=1),!0===Te&&(Tt=2),!0===Qe&&(Tt=3);let ln=v.attributes.position.count*Tt,Hn=1;ln>t.maxTextureSize&&(Hn=Math.ceil(ln/t.maxTextureSize),ln=t.maxTextureSize);const ei=new Float32Array(ln*Hn*4*G),Wn=new rP(ei,ln,Hn,G);Wn.type=__,Wn.needsUpdate=!0;const En=4*Tt;for(let xn=0;xn<G;xn++){const Gn=mt[xn],Nn=zt[xn],In=it[xn],Vn=ln*Hn*4*xn;for(let Yi=0;Yi<Gn.count;Yi++){const Ei=Yi*En;!0===Ae&&(o.fromBufferAttribute(Gn,Yi),ei[Vn+Ei+0]=o.x,ei[Vn+Ei+1]=o.y,ei[Vn+Ei+2]=o.z,ei[Vn+Ei+3]=0),!0===Te&&(o.fromBufferAttribute(Nn,Yi),ei[Vn+Ei+4]=o.x,ei[Vn+Ei+5]=o.y,ei[Vn+Ei+6]=o.z,ei[Vn+Ei+7]=0),!0===Qe&&(o.fromBufferAttribute(In,Yi),ei[Vn+Ei+8]=o.x,ei[Vn+Ei+9]=o.y,ei[Vn+Ei+10]=o.z,ei[Vn+Ei+11]=4===In.itemSize?o.w:1)}}Y={count:G,texture:Wn,size:new Xi(ln,Hn)},s.set(v,Y),v.addEventListener("dispose",zn)}let ce=0;for(let Ae=0;Ae<T.length;Ae++)ce+=T[Ae];const Se=v.morphTargetsRelative?1:1-ce;I.getUniforms().setValue(i,"morphTargetBaseInfluence",Se),I.getUniforms().setValue(i,"morphTargetInfluences",T),I.getUniforms().setValue(i,"morphTargetsTexture",Y.texture,e),I.getUniforms().setValue(i,"morphTargetsTextureSize",Y.size)}else{const k=void 0===T?0:T.length;let G=n[v.id];if(void 0===G||G.length!==k){G=[];for(let Te=0;Te<k;Te++)G[Te]=[Te,0];n[v.id]=G}for(let Te=0;Te<k;Te++){const Qe=G[Te];Qe[0]=Te,Qe[1]=T[Te]}G.sort(J0e);for(let Te=0;Te<8;Te++)Te<k&&G[Te][1]?(l[Te][0]=G[Te][0],l[Te][1]=G[Te][1]):(l[Te][0]=Number.MAX_SAFE_INTEGER,l[Te][1]=0);l.sort(Q0e);const Y=v.morphAttributes.position,ce=v.morphAttributes.normal;let Se=0;for(let Te=0;Te<8;Te++){const Qe=l[Te],mt=Qe[0],zt=Qe[1];mt!==Number.MAX_SAFE_INTEGER&&zt?(Y&&v.getAttribute("morphTarget"+Te)!==Y[mt]&&v.setAttribute("morphTarget"+Te,Y[mt]),ce&&v.getAttribute("morphNormal"+Te)!==ce[mt]&&v.setAttribute("morphNormal"+Te,ce[mt]),r[Te]=zt,Se+=zt):(Y&&!0===v.hasAttribute("morphTarget"+Te)&&v.deleteAttribute("morphTarget"+Te),ce&&!0===v.hasAttribute("morphNormal"+Te)&&v.deleteAttribute("morphNormal"+Te),r[Te]=0)}const Ae=v.morphTargetsRelative?1:1-Se;I.getUniforms().setValue(i,"morphTargetBaseInfluence",Ae),I.getUniforms().setValue(i,"morphTargetInfluences",r)}}}}function tbe(i,t,e,n){let r=new WeakMap;function l(u){const p=u.target;p.removeEventListener("dispose",l),e.remove(p.instanceMatrix),null!==p.instanceColor&&e.remove(p.instanceColor)}return{update:function s(u){const p=n.render.frame,w=t.get(u,u.geometry);return r.get(w)!==p&&(t.update(w),r.set(w,p)),u.isInstancedMesh&&(!1===u.hasEventListener("dispose",l)&&u.addEventListener("dispose",l),e.update(u.instanceMatrix,34962),null!==u.instanceColor&&e.update(u.instanceColor,34962)),w},dispose:function o(){r=new WeakMap}}}const fG=new b_,pG=new rP,gG=new $5,mG=new lE,vG=[],yG=[],_G=new Float32Array(16),bG=new Float32Array(9),CG=new Float32Array(4);function XC(i,t,e){const n=i[0];if(n<=0||n>0)return i;const r=t*e;let s=vG[r];if(void 0===s&&(s=new Float32Array(r),vG[r]=s),0!==t){n.toArray(s,0);for(let o=1,l=0;o!==t;++o)l+=e,i[o].toArray(s,l)}return s}function th(i,t){if(i.length!==t.length)return!1;for(let e=0,n=i.length;e<n;e++)if(i[e]!==t[e])return!1;return!0}function nh(i,t){for(let e=0,n=t.length;e<n;e++)i[e]=t[e]}function dE(i,t){let e=yG[t];void 0===e&&(e=new Int32Array(t),yG[t]=e);for(let n=0;n!==t;++n)e[n]=i.allocateTextureUnit();return e}function nbe(i,t){const e=this.cache;e[0]!==t&&(i.uniform1f(this.addr,t),e[0]=t)}function ibe(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(th(e,t))return;i.uniform2fv(this.addr,t),nh(e,t)}}function rbe(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(void 0!==t.r)(e[0]!==t.r||e[1]!==t.g||e[2]!==t.b)&&(i.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if(th(e,t))return;i.uniform3fv(this.addr,t),nh(e,t)}}function sbe(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(th(e,t))return;i.uniform4fv(this.addr,t),nh(e,t)}}function obe(i,t){const e=this.cache,n=t.elements;if(void 0===n){if(th(e,t))return;i.uniformMatrix2fv(this.addr,!1,t),nh(e,t)}else{if(th(e,n))return;CG.set(n),i.uniformMatrix2fv(this.addr,!1,CG),nh(e,n)}}function abe(i,t){const e=this.cache,n=t.elements;if(void 0===n){if(th(e,t))return;i.uniformMatrix3fv(this.addr,!1,t),nh(e,t)}else{if(th(e,n))return;bG.set(n),i.uniformMatrix3fv(this.addr,!1,bG),nh(e,n)}}function lbe(i,t){const e=this.cache,n=t.elements;if(void 0===n){if(th(e,t))return;i.uniformMatrix4fv(this.addr,!1,t),nh(e,t)}else{if(th(e,n))return;_G.set(n),i.uniformMatrix4fv(this.addr,!1,_G),nh(e,n)}}function cbe(i,t){const e=this.cache;e[0]!==t&&(i.uniform1i(this.addr,t),e[0]=t)}function ube(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2i(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(th(e,t))return;i.uniform2iv(this.addr,t),nh(e,t)}}function hbe(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3i(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(th(e,t))return;i.uniform3iv(this.addr,t),nh(e,t)}}function dbe(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4i(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(th(e,t))return;i.uniform4iv(this.addr,t),nh(e,t)}}function fbe(i,t){const e=this.cache;e[0]!==t&&(i.uniform1ui(this.addr,t),e[0]=t)}function pbe(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2ui(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(th(e,t))return;i.uniform2uiv(this.addr,t),nh(e,t)}}function gbe(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3ui(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(th(e,t))return;i.uniform3uiv(this.addr,t),nh(e,t)}}function mbe(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4ui(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(th(e,t))return;i.uniform4uiv(this.addr,t),nh(e,t)}}function vbe(i,t,e){const n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),e.setTexture2D(t||fG,r)}function ybe(i,t,e){const n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),e.setTexture3D(t||gG,r)}function _be(i,t,e){const n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),e.setTextureCube(t||mG,r)}function bbe(i,t,e){const n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),e.setTexture2DArray(t||pG,r)}function wbe(i,t){i.uniform1fv(this.addr,t)}function Abe(i,t){const e=XC(t,this.size,2);i.uniform2fv(this.addr,e)}function xbe(i,t){const e=XC(t,this.size,3);i.uniform3fv(this.addr,e)}function Ibe(i,t){const e=XC(t,this.size,4);i.uniform4fv(this.addr,e)}function Sbe(i,t){const e=XC(t,this.size,4);i.uniformMatrix2fv(this.addr,!1,e)}function Ebe(i,t){const e=XC(t,this.size,9);i.uniformMatrix3fv(this.addr,!1,e)}function Tbe(i,t){const e=XC(t,this.size,16);i.uniformMatrix4fv(this.addr,!1,e)}function Mbe(i,t){i.uniform1iv(this.addr,t)}function Dbe(i,t){i.uniform2iv(this.addr,t)}function Lbe(i,t){i.uniform3iv(this.addr,t)}function Pbe(i,t){i.uniform4iv(this.addr,t)}function Rbe(i,t){i.uniform1uiv(this.addr,t)}function kbe(i,t){i.uniform2uiv(this.addr,t)}function Obe(i,t){i.uniform3uiv(this.addr,t)}function Fbe(i,t){i.uniform4uiv(this.addr,t)}function Nbe(i,t,e){const n=this.cache,r=t.length,s=dE(e,r);th(n,s)||(i.uniform1iv(this.addr,s),nh(n,s));for(let o=0;o!==r;++o)e.setTexture2D(t[o]||fG,s[o])}function Bbe(i,t,e){const n=this.cache,r=t.length,s=dE(e,r);th(n,s)||(i.uniform1iv(this.addr,s),nh(n,s));for(let o=0;o!==r;++o)e.setTexture3D(t[o]||gG,s[o])}function zbe(i,t,e){const n=this.cache,r=t.length,s=dE(e,r);th(n,s)||(i.uniform1iv(this.addr,s),nh(n,s));for(let o=0;o!==r;++o)e.setTextureCube(t[o]||mG,s[o])}function Vbe(i,t,e){const n=this.cache,r=t.length,s=dE(e,r);th(n,s)||(i.uniform1iv(this.addr,s),nh(n,s));for(let o=0;o!==r;++o)e.setTexture2DArray(t[o]||pG,s[o])}class Hbe{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=function Cbe(i){switch(i){case 5126:return nbe;case 35664:return ibe;case 35665:return rbe;case 35666:return sbe;case 35674:return obe;case 35675:return abe;case 35676:return lbe;case 5124:case 35670:return cbe;case 35667:case 35671:return ube;case 35668:case 35672:return hbe;case 35669:case 35673:return dbe;case 5125:return fbe;case 36294:return pbe;case 36295:return gbe;case 36296:return mbe;case 35678:case 36198:case 36298:case 36306:case 35682:return vbe;case 35679:case 36299:case 36307:return ybe;case 35680:case 36300:case 36308:case 36293:return _be;case 36289:case 36303:case 36311:case 36292:return bbe}}(e.type)}}class Gbe{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=function Ube(i){switch(i){case 5126:return wbe;case 35664:return Abe;case 35665:return xbe;case 35666:return Ibe;case 35674:return Sbe;case 35675:return Ebe;case 35676:return Tbe;case 5124:case 35670:return Mbe;case 35667:case 35671:return Dbe;case 35668:case 35672:return Lbe;case 35669:case 35673:return Pbe;case 5125:return Rbe;case 36294:return kbe;case 36295:return Obe;case 36296:return Fbe;case 35678:case 36198:case 36298:case 36306:case 35682:return Nbe;case 35679:case 36299:case 36307:return Bbe;case 35680:case 36300:case 36308:case 36293:return zbe;case 36289:case 36303:case 36311:case 36292:return Vbe}}(e.type)}}class Wbe{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,n){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const l=r[s];l.setValue(t,e[l.id],n)}}}const DP=/(\w+)(\])?(\[|\.)?/g;function wG(i,t){i.seq.push(t),i.map[t.id]=t}function jbe(i,t,e){const n=i.name,r=n.length;for(DP.lastIndex=0;;){const s=DP.exec(n),o=DP.lastIndex;let l=s[1];const p=s[3];if("]"===s[2]&&(l|=0),void 0===p||"["===p&&o+2===r){wG(e,void 0===p?new Hbe(l,i,t):new Gbe(l,i,t));break}{let w=e.map[l];void 0===w&&(w=new Wbe(l),wG(e,w)),e=w}}}class fE{constructor(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,35718);for(let r=0;r<n;++r){const s=t.getActiveUniform(e,r);jbe(s,t.getUniformLocation(e,s.name),this)}}setValue(t,e,n,r){const s=this.map[e];void 0!==s&&s.setValue(t,n,r)}setOptional(t,e,n){const r=e[n];void 0!==r&&this.setValue(t,n,r)}static upload(t,e,n,r){for(let s=0,o=e.length;s!==o;++s){const l=e[s],u=n[l.id];!1!==u.needsUpdate&&l.setValue(t,u.value,r)}}static seqWithValue(t,e){const n=[];for(let r=0,s=t.length;r!==s;++r){const o=t[r];o.id in e&&n.push(o)}return n}}function AG(i,t,e){const n=i.createShader(t);return i.shaderSource(n,e),i.compileShader(n),n}let $be=0;function xG(i,t,e){const n=i.getShaderParameter(t,35713),r=i.getShaderInfoLog(t).trim();if(n&&""===r)return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return e.toUpperCase()+"\n\n"+r+"\n\n"+function qbe(i,t){const e=i.split("\n"),n=[],r=Math.max(t-6,0),s=Math.min(t+6,e.length);for(let o=r;o<s;o++){const l=o+1;n.push(`${l===t?">":" "} ${l}: ${e[o]}`)}return n.join("\n")}(i.getShaderSource(t),o)}return r}function Ybe(i,t){const e=function Xbe(i){switch(i){case z0:return["Linear","( value )"];case Kc:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",i),["Linear","( value )"]}}(t);return"vec4 "+i+"( vec4 value ) { return LinearTo"+e[0]+e[1]+"; }"}function Kbe(i,t){let e;switch(t){case 1:e="Linear";break;case 2:e="Reinhard";break;case 3:e="OptimizedCineon";break;case 4:e="ACESFilmic";break;case 5:e="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),e="Linear"}return"vec3 "+i+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}function dx(i){return""!==i}function IG(i,t){const e=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,e).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function SG(i,t){return i.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const eCe=/^[ \t]*#include +<([\w\d./]+)>/gm;function LP(i){return i.replace(eCe,tCe)}function tCe(i,t){const e=ko[t];if(void 0===e)throw new Error("Can not resolve #include <"+t+">");return LP(e)}const nCe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function EG(i){return i.replace(nCe,iCe)}function iCe(i,t,e,n){let r="";for(let s=parseInt(t);s<parseInt(e);s++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function TG(i){let t="precision "+i.precision+" float;\nprecision "+i.precision+" int;";return"highp"===i.precision?t+="\n#define HIGH_PRECISION":"mediump"===i.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===i.precision&&(t+="\n#define LOW_PRECISION"),t}function cCe(i,t,e,n){const r=i.getContext(),s=e.defines;let o=e.vertexShader,l=e.fragmentShader;const u=function rCe(i){let t="SHADOWMAP_TYPE_BASIC";return 1===i.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===i.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===i.shadowMapType&&(t="SHADOWMAP_TYPE_VSM"),t}(e),p=function sCe(i){let t="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case 301:case 302:t="ENVMAP_TYPE_CUBE";break;case 306:t="ENVMAP_TYPE_CUBE_UV"}return t}(e),v=function oCe(i){let t="ENVMAP_MODE_REFLECTION";return i.envMap&&302===i.envMapMode&&(t="ENVMAP_MODE_REFRACTION"),t}(e),w=function aCe(i){let t="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(e),I=function lCe(i){const t=i.envMapCubeUVHeight;if(null===t)return null;const e=Math.log2(t)-2,n=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,e),112)),texelHeight:n,maxMip:e}}(e),T=e.isWebGL2?"":function Zbe(i){return[i.extensionDerivatives||i.envMapCubeUVHeight||i.bumpMap||i.tangentSpaceNormalMap||i.clearcoatNormalMap||i.flatShading||"physical"===i.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(i.extensionFragDepth||i.logarithmicDepthBuffer)&&i.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",i.extensionDrawBuffers&&i.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(i.extensionShaderTextureLOD||i.envMap||i.transmission)&&i.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(dx).join("\n")}(e),k=function Qbe(i){const t=[];for(const e in i){const n=i[e];!1!==n&&t.push("#define "+e+" "+n)}return t.join("\n")}(s),G=r.createProgram();let Y,ce,Se=e.glslVersion?"#version "+e.glslVersion+"\n":"";e.isRawShaderMaterial?(Y=[k].filter(dx).join("\n"),Y.length>0&&(Y+="\n"),ce=[T,k].filter(dx).join("\n"),ce.length>0&&(ce+="\n")):(Y=[TG(e),"#define SHADER_NAME "+e.shaderName,k,e.instancing?"#define USE_INSTANCING":"",e.instancingColor?"#define USE_INSTANCING_COLOR":"",e.supportsVertexTextures?"#define VERTEX_TEXTURES":"",e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+v:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMap&&e.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",e.normalMap&&e.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.displacementMap&&e.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",e.specularColorMap?"#define USE_SPECULARCOLORMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.sheenColorMap?"#define USE_SHEENCOLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",e.vertexTangents?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUvs?"#define USE_UV":"",e.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&!1===e.flatShading?"#define USE_MORPHNORMALS":"",e.morphColors&&e.isWebGL2?"#define USE_MORPHCOLORS":"",e.morphTargetsCount>0&&e.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",e.morphTargetsCount>0&&e.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+e.morphTextureStride:"",e.morphTargetsCount>0&&e.isWebGL2?"#define MORPHTARGETS_COUNT "+e.morphTargetsCount:"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+u:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.logarithmicDepthBuffer&&e.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(dx).join("\n"),ce=[T,TG(e),"#define SHADER_NAME "+e.shaderName,k,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+p:"",e.envMap?"#define "+v:"",e.envMap?"#define "+w:"",I?"#define CUBEUV_TEXEL_WIDTH "+I.texelWidth:"",I?"#define CUBEUV_TEXEL_HEIGHT "+I.texelHeight:"",I?"#define CUBEUV_MAX_MIP "+I.maxMip+".0":"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMap&&e.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",e.normalMap&&e.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",e.clearcoat?"#define USE_CLEARCOAT":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescence?"#define USE_IRIDESCENCE":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",e.specularColorMap?"#define USE_SPECULARCOLORMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaTest?"#define USE_ALPHATEST":"",e.sheen?"#define USE_SHEEN":"",e.sheenColorMap?"#define USE_SHEENCOLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",e.vertexTangents?"#define USE_TANGENT":"",e.vertexColors||e.instancingColor?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUvs?"#define USE_UV":"",e.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+u:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.logarithmicDepthBuffer&&e.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==e.toneMapping?"#define TONE_MAPPING":"",0!==e.toneMapping?ko.tonemapping_pars_fragment:"",0!==e.toneMapping?Kbe("toneMapping",e.toneMapping):"",e.dithering?"#define DITHERING":"",e.opaque?"#define OPAQUE":"",ko.encodings_pars_fragment,Ybe("linearToOutputTexel",e.outputEncoding),e.useDepthPacking?"#define DEPTH_PACKING "+e.depthPacking:"","\n"].filter(dx).join("\n")),o=LP(o),o=IG(o,e),o=SG(o,e),l=LP(l),l=IG(l,e),l=SG(l,e),o=EG(o),l=EG(l),e.isWebGL2&&!0!==e.isRawShaderMaterial&&(Se="#version 300 es\n",Y=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+Y,ce=["#define varying in","300 es"===e.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===e.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+ce);const Te=Se+ce+l,Qe=AG(r,35633,Se+Y+o),mt=AG(r,35632,Te);if(r.attachShader(G,Qe),r.attachShader(G,mt),void 0!==e.index0AttributeName?r.bindAttribLocation(G,0,e.index0AttributeName):!0===e.morphTargets&&r.bindAttribLocation(G,0,"position"),r.linkProgram(G),i.debug.checkShaderErrors){const Tt=r.getProgramInfoLog(G).trim(),ln=r.getShaderInfoLog(Qe).trim(),Hn=r.getShaderInfoLog(mt).trim();let ei=!0,Wn=!0;if(!1===r.getProgramParameter(G,35714)){ei=!1;const En=xG(r,Qe,"vertex"),zn=xG(r,mt,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(G,35715)+"\n\nProgram Info Log: "+Tt+"\n"+En+"\n"+zn)}else""!==Tt?console.warn("THREE.WebGLProgram: Program Info Log:",Tt):(""===ln||""===Hn)&&(Wn=!1);Wn&&(this.diagnostics={runnable:ei,programLog:Tt,vertexShader:{log:ln,prefix:Y},fragmentShader:{log:Hn,prefix:ce}})}let zt,it;return r.deleteShader(Qe),r.deleteShader(mt),this.getUniforms=function(){return void 0===zt&&(zt=new fE(r,G)),zt},this.getAttributes=function(){return void 0===it&&(it=function Jbe(i,t){const e={},n=i.getProgramParameter(t,35721);for(let r=0;r<n;r++){const s=i.getActiveAttrib(t,r),o=s.name;let l=1;35674===s.type&&(l=2),35675===s.type&&(l=3),35676===s.type&&(l=4),e[o]={type:s.type,location:i.getAttribLocation(t,o),locationSize:l}}return e}(r,G)),it},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(G),this.program=void 0},this.name=e.shaderName,this.id=$be++,this.cacheKey=t,this.usedTimes=1,this.program=G,this.vertexShader=Qe,this.fragmentShader=mt,this}let uCe=0;class hCe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const n=t.fragmentShader,r=this._getShaderStage(t.vertexShader),s=this._getShaderStage(n),o=this._getShaderCacheForMaterial(t);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(s)&&(o.add(s),s.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const n of e)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let n=e.get(t);return void 0===n&&(n=new Set,e.set(t,n)),n}_getShaderStage(t){const e=this.shaderCache;let n=e.get(t);return void 0===n&&(n=new dCe(t),e.set(t,n)),n}}class dCe{constructor(t){this.id=uCe++,this.code=t,this.usedTimes=0}}function fCe(i,t,e,n,r,s,o){const l=new dP,u=new hCe,p=[],v=r.isWebGL2,w=r.logarithmicDepthBuffer,I=r.vertexTextures;let T=r.precision;const k={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function G(it,Tt,ln,Hn,ei){const Wn=Hn.fog,En=ei.geometry,xn=(it.isMeshStandardMaterial?e:t).get(it.envMap||(it.isMeshStandardMaterial?Hn.environment:null)),Gn=xn&&306===xn.mapping?xn.image.height:null,Nn=k[it.type];null!==it.precision&&(T=r.getMaxPrecision(it.precision),T!==it.precision&&console.warn("THREE.WebGLProgram.getParameters:",it.precision,"not supported, using",T,"instead."));const In=En.morphAttributes.position||En.morphAttributes.normal||En.morphAttributes.color,Vn=void 0!==In?In.length:0;let Ei,rr,fr,Ss,Yi=0;if(void 0!==En.morphAttributes.position&&(Yi=1),void 0!==En.morphAttributes.normal&&(Yi=2),void 0!==En.morphAttributes.color&&(Yi=3),Nn){const Io=dv[Nn];Ei=Io.vertexShader,rr=Io.fragmentShader}else Ei=it.vertexShader,rr=it.fragmentShader,u.update(it),fr=u.getVertexShaderID(it),Ss=u.getFragmentShaderID(it);const Di=i.getRenderTarget(),ps=it.clearcoat>0,gs=it.iridescence>0;return{isWebGL2:v,shaderID:Nn,shaderName:it.type,vertexShader:Ei,fragmentShader:rr,defines:it.defines,customVertexShaderID:fr,customFragmentShaderID:Ss,isRawShaderMaterial:!0===it.isRawShaderMaterial,glslVersion:it.glslVersion,precision:T,instancing:!0===ei.isInstancedMesh,instancingColor:!0===ei.isInstancedMesh&&null!==ei.instanceColor,supportsVertexTextures:I,outputEncoding:null===Di?i.outputEncoding:!0===Di.isXRRenderTarget?Di.texture.encoding:z0,map:!!it.map,matcap:!!it.matcap,envMap:!!xn,envMapMode:xn&&xn.mapping,envMapCubeUVHeight:Gn,lightMap:!!it.lightMap,aoMap:!!it.aoMap,emissiveMap:!!it.emissiveMap,bumpMap:!!it.bumpMap,normalMap:!!it.normalMap,objectSpaceNormalMap:1===it.normalMapType,tangentSpaceNormalMap:0===it.normalMapType,decodeVideoTexture:!!it.map&&!0===it.map.isVideoTexture&&it.map.encoding===Kc,clearcoat:ps,clearcoatMap:ps&&!!it.clearcoatMap,clearcoatRoughnessMap:ps&&!!it.clearcoatRoughnessMap,clearcoatNormalMap:ps&&!!it.clearcoatNormalMap,iridescence:gs,iridescenceMap:gs&&!!it.iridescenceMap,iridescenceThicknessMap:gs&&!!it.iridescenceThicknessMap,displacementMap:!!it.displacementMap,roughnessMap:!!it.roughnessMap,metalnessMap:!!it.metalnessMap,specularMap:!!it.specularMap,specularIntensityMap:!!it.specularIntensityMap,specularColorMap:!!it.specularColorMap,opaque:!1===it.transparent&&1===it.blending,alphaMap:!!it.alphaMap,alphaTest:it.alphaTest>0,gradientMap:!!it.gradientMap,sheen:it.sheen>0,sheenColorMap:!!it.sheenColorMap,sheenRoughnessMap:!!it.sheenRoughnessMap,transmission:it.transmission>0,transmissionMap:!!it.transmissionMap,thicknessMap:!!it.thicknessMap,combine:it.combine,vertexTangents:!!it.normalMap&&!!En.attributes.tangent,vertexColors:it.vertexColors,vertexAlphas:!0===it.vertexColors&&!!En.attributes.color&&4===En.attributes.color.itemSize,vertexUvs:!!(it.map||it.bumpMap||it.normalMap||it.specularMap||it.alphaMap||it.emissiveMap||it.roughnessMap||it.metalnessMap||it.clearcoatMap||it.clearcoatRoughnessMap||it.clearcoatNormalMap||it.iridescenceMap||it.iridescenceThicknessMap||it.displacementMap||it.transmissionMap||it.thicknessMap||it.specularIntensityMap||it.specularColorMap||it.sheenColorMap||it.sheenRoughnessMap),uvsVertexOnly:!(it.map||it.bumpMap||it.normalMap||it.specularMap||it.alphaMap||it.emissiveMap||it.roughnessMap||it.metalnessMap||it.clearcoatNormalMap||it.iridescenceMap||it.iridescenceThicknessMap||it.transmission>0||it.transmissionMap||it.thicknessMap||it.specularIntensityMap||it.specularColorMap||it.sheen>0||it.sheenColorMap||it.sheenRoughnessMap||!it.displacementMap),fog:!!Wn,useFog:!0===it.fog,fogExp2:Wn&&Wn.isFogExp2,flatShading:!!it.flatShading,sizeAttenuation:it.sizeAttenuation,logarithmicDepthBuffer:w,skinning:!0===ei.isSkinnedMesh,morphTargets:void 0!==En.morphAttributes.position,morphNormals:void 0!==En.morphAttributes.normal,morphColors:void 0!==En.morphAttributes.color,morphTargetsCount:Vn,morphTextureStride:Yi,numDirLights:Tt.directional.length,numPointLights:Tt.point.length,numSpotLights:Tt.spot.length,numSpotLightMaps:Tt.spotLightMap.length,numRectAreaLights:Tt.rectArea.length,numHemiLights:Tt.hemi.length,numDirLightShadows:Tt.directionalShadowMap.length,numPointLightShadows:Tt.pointShadowMap.length,numSpotLightShadows:Tt.spotShadowMap.length,numSpotLightShadowsWithMaps:Tt.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:it.dithering,shadowMapEnabled:i.shadowMap.enabled&&ln.length>0,shadowMapType:i.shadowMap.type,toneMapping:it.toneMapped?i.toneMapping:0,physicallyCorrectLights:i.physicallyCorrectLights,premultipliedAlpha:it.premultipliedAlpha,doubleSided:2===it.side,flipSided:1===it.side,useDepthPacking:!!it.depthPacking,depthPacking:it.depthPacking||0,index0AttributeName:it.index0AttributeName,extensionDerivatives:it.extensions&&it.extensions.derivatives,extensionFragDepth:it.extensions&&it.extensions.fragDepth,extensionDrawBuffers:it.extensions&&it.extensions.drawBuffers,extensionShaderTextureLOD:it.extensions&&it.extensions.shaderTextureLOD,rendererExtensionFragDepth:v||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:v||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:v||n.has("EXT_shader_texture_lod"),customProgramCacheKey:it.customProgramCacheKey()}},getProgramCacheKey:function Y(it){const Tt=[];if(it.shaderID?Tt.push(it.shaderID):(Tt.push(it.customVertexShaderID),Tt.push(it.customFragmentShaderID)),void 0!==it.defines)for(const ln in it.defines)Tt.push(ln),Tt.push(it.defines[ln]);return!1===it.isRawShaderMaterial&&(function ce(it,Tt){it.push(Tt.precision),it.push(Tt.outputEncoding),it.push(Tt.envMapMode),it.push(Tt.envMapCubeUVHeight),it.push(Tt.combine),it.push(Tt.vertexUvs),it.push(Tt.fogExp2),it.push(Tt.sizeAttenuation),it.push(Tt.morphTargetsCount),it.push(Tt.morphAttributeCount),it.push(Tt.numDirLights),it.push(Tt.numPointLights),it.push(Tt.numSpotLights),it.push(Tt.numSpotLightMaps),it.push(Tt.numHemiLights),it.push(Tt.numRectAreaLights),it.push(Tt.numDirLightShadows),it.push(Tt.numPointLightShadows),it.push(Tt.numSpotLightShadows),it.push(Tt.numSpotLightShadowsWithMaps),it.push(Tt.shadowMapType),it.push(Tt.toneMapping),it.push(Tt.numClippingPlanes),it.push(Tt.numClipIntersection),it.push(Tt.depthPacking)}(Tt,it),function Se(it,Tt){l.disableAll(),Tt.isWebGL2&&l.enable(0),Tt.supportsVertexTextures&&l.enable(1),Tt.instancing&&l.enable(2),Tt.instancingColor&&l.enable(3),Tt.map&&l.enable(4),Tt.matcap&&l.enable(5),Tt.envMap&&l.enable(6),Tt.lightMap&&l.enable(7),Tt.aoMap&&l.enable(8),Tt.emissiveMap&&l.enable(9),Tt.bumpMap&&l.enable(10),Tt.normalMap&&l.enable(11),Tt.objectSpaceNormalMap&&l.enable(12),Tt.tangentSpaceNormalMap&&l.enable(13),Tt.clearcoat&&l.enable(14),Tt.clearcoatMap&&l.enable(15),Tt.clearcoatRoughnessMap&&l.enable(16),Tt.clearcoatNormalMap&&l.enable(17),Tt.iridescence&&l.enable(18),Tt.iridescenceMap&&l.enable(19),Tt.iridescenceThicknessMap&&l.enable(20),Tt.displacementMap&&l.enable(21),Tt.specularMap&&l.enable(22),Tt.roughnessMap&&l.enable(23),Tt.metalnessMap&&l.enable(24),Tt.gradientMap&&l.enable(25),Tt.alphaMap&&l.enable(26),Tt.alphaTest&&l.enable(27),Tt.vertexColors&&l.enable(28),Tt.vertexAlphas&&l.enable(29),Tt.vertexUvs&&l.enable(30),Tt.vertexTangents&&l.enable(31),Tt.uvsVertexOnly&&l.enable(32),it.push(l.mask),l.disableAll(),Tt.fog&&l.enable(0),Tt.useFog&&l.enable(1),Tt.flatShading&&l.enable(2),Tt.logarithmicDepthBuffer&&l.enable(3),Tt.skinning&&l.enable(4),Tt.morphTargets&&l.enable(5),Tt.morphNormals&&l.enable(6),Tt.morphColors&&l.enable(7),Tt.premultipliedAlpha&&l.enable(8),Tt.shadowMapEnabled&&l.enable(9),Tt.physicallyCorrectLights&&l.enable(10),Tt.doubleSided&&l.enable(11),Tt.flipSided&&l.enable(12),Tt.useDepthPacking&&l.enable(13),Tt.dithering&&l.enable(14),Tt.specularIntensityMap&&l.enable(15),Tt.specularColorMap&&l.enable(16),Tt.transmission&&l.enable(17),Tt.transmissionMap&&l.enable(18),Tt.thicknessMap&&l.enable(19),Tt.sheen&&l.enable(20),Tt.sheenColorMap&&l.enable(21),Tt.sheenRoughnessMap&&l.enable(22),Tt.decodeVideoTexture&&l.enable(23),Tt.opaque&&l.enable(24),it.push(l.mask)}(Tt,it),Tt.push(i.outputEncoding)),Tt.push(it.customProgramCacheKey),Tt.join()},getUniforms:function Ae(it){const Tt=k[it.type];let ln;return ln=Tt?Rye.clone(dv[Tt].uniforms):it.uniforms,ln},acquireProgram:function Te(it,Tt){let ln;for(let Hn=0,ei=p.length;Hn<ei;Hn++){const Wn=p[Hn];if(Wn.cacheKey===Tt){ln=Wn,++ln.usedTimes;break}}return void 0===ln&&(ln=new cCe(i,Tt,it,s),p.push(ln)),ln},releaseProgram:function Qe(it){if(0==--it.usedTimes){const Tt=p.indexOf(it);p[Tt]=p[p.length-1],p.pop(),it.destroy()}},releaseShaderCache:function mt(it){u.remove(it)},programs:p,dispose:function zt(){u.dispose()}}}function pCe(){let i=new WeakMap;return{get:function t(s){let o=i.get(s);return void 0===o&&(o={},i.set(s,o)),o},remove:function e(s){i.delete(s)},update:function n(s,o,l){i.get(s)[o]=l},dispose:function r(){i=new WeakMap}}}function gCe(i,t){return i.groupOrder!==t.groupOrder?i.groupOrder-t.groupOrder:i.renderOrder!==t.renderOrder?i.renderOrder-t.renderOrder:i.material.id!==t.material.id?i.material.id-t.material.id:i.z!==t.z?i.z-t.z:i.id-t.id}function MG(i,t){return i.groupOrder!==t.groupOrder?i.groupOrder-t.groupOrder:i.renderOrder!==t.renderOrder?i.renderOrder-t.renderOrder:i.z!==t.z?t.z-i.z:i.id-t.id}function DG(){const i=[];let t=0;const e=[],n=[],r=[];function o(w,I,T,k,G,Y){let ce=i[t];return void 0===ce?(ce={id:w.id,object:w,geometry:I,material:T,groupOrder:k,renderOrder:w.renderOrder,z:G,group:Y},i[t]=ce):(ce.id=w.id,ce.object=w,ce.geometry=I,ce.material=T,ce.groupOrder=k,ce.renderOrder=w.renderOrder,ce.z=G,ce.group=Y),t++,ce}return{opaque:e,transmissive:n,transparent:r,init:function s(){t=0,e.length=0,n.length=0,r.length=0},push:function l(w,I,T,k,G,Y){const ce=o(w,I,T,k,G,Y);T.transmission>0?n.push(ce):!0===T.transparent?r.push(ce):e.push(ce)},unshift:function u(w,I,T,k,G,Y){const ce=o(w,I,T,k,G,Y);T.transmission>0?n.unshift(ce):!0===T.transparent?r.unshift(ce):e.unshift(ce)},finish:function v(){for(let w=t,I=i.length;w<I;w++){const T=i[w];if(null===T.id)break;T.id=null,T.object=null,T.geometry=null,T.material=null,T.group=null}},sort:function p(w,I){e.length>1&&e.sort(w||gCe),n.length>1&&n.sort(I||MG),r.length>1&&r.sort(I||MG)}}}function mCe(){let i=new WeakMap;return{get:function t(n,r){const s=i.get(n);let o;return void 0===s?(o=new DG,i.set(n,[o])):r>=s.length?(o=new DG,s.push(o)):o=s[r],o},dispose:function e(){i=new WeakMap}}}function vCe(){const i={};return{get:function(t){if(void 0!==i[t.id])return i[t.id];let e;switch(t.type){case"DirectionalLight":e={direction:new en,color:new es};break;case"SpotLight":e={position:new en,direction:new en,color:new es,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new en,color:new es,distance:0,decay:0};break;case"HemisphereLight":e={direction:new en,skyColor:new es,groundColor:new es};break;case"RectAreaLight":e={color:new es,position:new en,halfWidth:new en,halfHeight:new en}}return i[t.id]=e,e}}}let _Ce=0;function bCe(i,t){return(t.castShadow?2:0)-(i.castShadow?2:0)+(t.map?1:0)-(i.map?1:0)}function CCe(i,t){const e=new vCe,n=function yCe(){const i={};return{get:function(t){if(void 0!==i[t.id])return i[t.id];let e;switch(t.type){case"DirectionalLight":case"SpotLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Xi};break;case"PointLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Xi,shadowCameraNear:1,shadowCameraFar:1e3}}return i[t.id]=e,e}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let v=0;v<9;v++)r.probe.push(new en);const s=new en,o=new vo,l=new vo;return{setup:function u(v,w){let I=0,T=0,k=0;for(let Hn=0;Hn<9;Hn++)r.probe[Hn].set(0,0,0);let G=0,Y=0,ce=0,Se=0,Ae=0,Te=0,Qe=0,mt=0,zt=0,it=0;v.sort(bCe);const Tt=!0!==w?Math.PI:1;for(let Hn=0,ei=v.length;Hn<ei;Hn++){const Wn=v[Hn],En=Wn.color,zn=Wn.intensity,xn=Wn.distance,Gn=Wn.shadow&&Wn.shadow.map?Wn.shadow.map.texture:null;if(Wn.isAmbientLight)I+=En.r*zn*Tt,T+=En.g*zn*Tt,k+=En.b*zn*Tt;else if(Wn.isLightProbe)for(let Nn=0;Nn<9;Nn++)r.probe[Nn].addScaledVector(Wn.sh.coefficients[Nn],zn);else if(Wn.isDirectionalLight){const Nn=e.get(Wn);if(Nn.color.copy(Wn.color).multiplyScalar(Wn.intensity*Tt),Wn.castShadow){const In=Wn.shadow,Vn=n.get(Wn);Vn.shadowBias=In.bias,Vn.shadowNormalBias=In.normalBias,Vn.shadowRadius=In.radius,Vn.shadowMapSize=In.mapSize,r.directionalShadow[G]=Vn,r.directionalShadowMap[G]=Gn,r.directionalShadowMatrix[G]=Wn.shadow.matrix,Te++}r.directional[G]=Nn,G++}else if(Wn.isSpotLight){const Nn=e.get(Wn);Nn.position.setFromMatrixPosition(Wn.matrixWorld),Nn.color.copy(En).multiplyScalar(zn*Tt),Nn.distance=xn,Nn.coneCos=Math.cos(Wn.angle),Nn.penumbraCos=Math.cos(Wn.angle*(1-Wn.penumbra)),Nn.decay=Wn.decay,r.spot[ce]=Nn;const In=Wn.shadow;if(Wn.map&&(r.spotLightMap[zt]=Wn.map,zt++,In.updateMatrices(Wn),Wn.castShadow&&it++),r.spotLightMatrix[ce]=In.matrix,Wn.castShadow){const Vn=n.get(Wn);Vn.shadowBias=In.bias,Vn.shadowNormalBias=In.normalBias,Vn.shadowRadius=In.radius,Vn.shadowMapSize=In.mapSize,r.spotShadow[ce]=Vn,r.spotShadowMap[ce]=Gn,mt++}ce++}else if(Wn.isRectAreaLight){const Nn=e.get(Wn);Nn.color.copy(En).multiplyScalar(zn),Nn.halfWidth.set(.5*Wn.width,0,0),Nn.halfHeight.set(0,.5*Wn.height,0),r.rectArea[Se]=Nn,Se++}else if(Wn.isPointLight){const Nn=e.get(Wn);if(Nn.color.copy(Wn.color).multiplyScalar(Wn.intensity*Tt),Nn.distance=Wn.distance,Nn.decay=Wn.decay,Wn.castShadow){const In=Wn.shadow,Vn=n.get(Wn);Vn.shadowBias=In.bias,Vn.shadowNormalBias=In.normalBias,Vn.shadowRadius=In.radius,Vn.shadowMapSize=In.mapSize,Vn.shadowCameraNear=In.camera.near,Vn.shadowCameraFar=In.camera.far,r.pointShadow[Y]=Vn,r.pointShadowMap[Y]=Gn,r.pointShadowMatrix[Y]=Wn.shadow.matrix,Qe++}r.point[Y]=Nn,Y++}else if(Wn.isHemisphereLight){const Nn=e.get(Wn);Nn.skyColor.copy(Wn.color).multiplyScalar(zn*Tt),Nn.groundColor.copy(Wn.groundColor).multiplyScalar(zn*Tt),r.hemi[Ae]=Nn,Ae++}}Se>0&&(t.isWebGL2||!0===i.has("OES_texture_float_linear")?(r.rectAreaLTC1=Mr.LTC_FLOAT_1,r.rectAreaLTC2=Mr.LTC_FLOAT_2):!0===i.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=Mr.LTC_HALF_1,r.rectAreaLTC2=Mr.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=I,r.ambient[1]=T,r.ambient[2]=k;const ln=r.hash;(ln.directionalLength!==G||ln.pointLength!==Y||ln.spotLength!==ce||ln.rectAreaLength!==Se||ln.hemiLength!==Ae||ln.numDirectionalShadows!==Te||ln.numPointShadows!==Qe||ln.numSpotShadows!==mt||ln.numSpotMaps!==zt)&&(r.directional.length=G,r.spot.length=ce,r.rectArea.length=Se,r.point.length=Y,r.hemi.length=Ae,r.directionalShadow.length=Te,r.directionalShadowMap.length=Te,r.pointShadow.length=Qe,r.pointShadowMap.length=Qe,r.spotShadow.length=mt,r.spotShadowMap.length=mt,r.directionalShadowMatrix.length=Te,r.pointShadowMatrix.length=Qe,r.spotLightMatrix.length=mt+zt-it,r.spotLightMap.length=zt,r.numSpotLightShadowsWithMaps=it,ln.directionalLength=G,ln.pointLength=Y,ln.spotLength=ce,ln.rectAreaLength=Se,ln.hemiLength=Ae,ln.numDirectionalShadows=Te,ln.numPointShadows=Qe,ln.numSpotShadows=mt,ln.numSpotMaps=zt,r.version=_Ce++)},setupView:function p(v,w){let I=0,T=0,k=0,G=0,Y=0;const ce=w.matrixWorldInverse;for(let Se=0,Ae=v.length;Se<Ae;Se++){const Te=v[Se];if(Te.isDirectionalLight){const Qe=r.directional[I];Qe.direction.setFromMatrixPosition(Te.matrixWorld),s.setFromMatrixPosition(Te.target.matrixWorld),Qe.direction.sub(s),Qe.direction.transformDirection(ce),I++}else if(Te.isSpotLight){const Qe=r.spot[k];Qe.position.setFromMatrixPosition(Te.matrixWorld),Qe.position.applyMatrix4(ce),Qe.direction.setFromMatrixPosition(Te.matrixWorld),s.setFromMatrixPosition(Te.target.matrixWorld),Qe.direction.sub(s),Qe.direction.transformDirection(ce),k++}else if(Te.isRectAreaLight){const Qe=r.rectArea[G];Qe.position.setFromMatrixPosition(Te.matrixWorld),Qe.position.applyMatrix4(ce),l.identity(),o.copy(Te.matrixWorld),o.premultiply(ce),l.extractRotation(o),Qe.halfWidth.set(.5*Te.width,0,0),Qe.halfHeight.set(0,.5*Te.height,0),Qe.halfWidth.applyMatrix4(l),Qe.halfHeight.applyMatrix4(l),G++}else if(Te.isPointLight){const Qe=r.point[T];Qe.position.setFromMatrixPosition(Te.matrixWorld),Qe.position.applyMatrix4(ce),T++}else if(Te.isHemisphereLight){const Qe=r.hemi[Y];Qe.direction.setFromMatrixPosition(Te.matrixWorld),Qe.direction.transformDirection(ce),Y++}}},state:r}}function LG(i,t){const e=new CCe(i,t),n=[],r=[];return{init:function s(){n.length=0,r.length=0},state:{lightsArray:n,shadowsArray:r,lights:e},setupLights:function u(w){e.setup(n,w)},setupLightsView:function p(w){e.setupView(n,w)},pushLight:function o(w){n.push(w)},pushShadow:function l(w){r.push(w)}}}function wCe(i,t){let e=new WeakMap;return{get:function n(s,o=0){const l=e.get(s);let u;return void 0===l?(u=new LG(i,t),e.set(s,[u])):o>=l.length?(u=new LG(i,t),l.push(u)):u=l[o],u},dispose:function r(){e=new WeakMap}}}class PG extends X0{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class RG extends X0{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new en,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}function ICe(i,t,e){let n=new IP;const r=new Xi,s=new Xi,o=new fl,l=new PG({depthPacking:3201}),u=new RG,p={},v=e.maxTextureSize,w={0:1,1:0,2:2},I=new D_({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Xi},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),T=I.clone();T.defines.HORIZONTAL_PASS=1;const k=new Ho;k.setAttribute("position",new wh(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const G=new Ld(k,I),Y=this;function ce(Te,Qe){const mt=t.update(G);I.defines.VSM_SAMPLES!==Te.blurSamples&&(I.defines.VSM_SAMPLES=Te.blurSamples,T.defines.VSM_SAMPLES=Te.blurSamples,I.needsUpdate=!0,T.needsUpdate=!0),null===Te.mapPass&&(Te.mapPass=new W0(r.x,r.y)),I.uniforms.shadow_pass.value=Te.map.texture,I.uniforms.resolution.value=Te.mapSize,I.uniforms.radius.value=Te.radius,i.setRenderTarget(Te.mapPass),i.clear(),i.renderBufferDirect(Qe,null,mt,I,G,null),T.uniforms.shadow_pass.value=Te.mapPass.texture,T.uniforms.resolution.value=Te.mapSize,T.uniforms.radius.value=Te.radius,i.setRenderTarget(Te.map),i.clear(),i.renderBufferDirect(Qe,null,mt,T,G,null)}function Se(Te,Qe,mt,zt,it,Tt){let ln=null;const Hn=!0===mt.isPointLight?Te.customDistanceMaterial:Te.customDepthMaterial;if(ln=void 0!==Hn?Hn:!0===mt.isPointLight?u:l,i.localClippingEnabled&&!0===Qe.clipShadows&&Array.isArray(Qe.clippingPlanes)&&0!==Qe.clippingPlanes.length||Qe.displacementMap&&0!==Qe.displacementScale||Qe.alphaMap&&Qe.alphaTest>0){const ei=ln.uuid,Wn=Qe.uuid;let En=p[ei];void 0===En&&(En={},p[ei]=En);let zn=En[Wn];void 0===zn&&(zn=ln.clone(),En[Wn]=zn),ln=zn}return ln.visible=Qe.visible,ln.wireframe=Qe.wireframe,ln.side=3===Tt?null!==Qe.shadowSide?Qe.shadowSide:Qe.side:null!==Qe.shadowSide?Qe.shadowSide:w[Qe.side],ln.alphaMap=Qe.alphaMap,ln.alphaTest=Qe.alphaTest,ln.clipShadows=Qe.clipShadows,ln.clippingPlanes=Qe.clippingPlanes,ln.clipIntersection=Qe.clipIntersection,ln.displacementMap=Qe.displacementMap,ln.displacementScale=Qe.displacementScale,ln.displacementBias=Qe.displacementBias,ln.wireframeLinewidth=Qe.wireframeLinewidth,ln.linewidth=Qe.linewidth,!0===mt.isPointLight&&!0===ln.isMeshDistanceMaterial&&(ln.referencePosition.setFromMatrixPosition(mt.matrixWorld),ln.nearDistance=zt,ln.farDistance=it),ln}function Ae(Te,Qe,mt,zt,it){if(!1===Te.visible)return;if(Te.layers.test(Qe.layers)&&(Te.isMesh||Te.isLine||Te.isPoints)&&(Te.castShadow||Te.receiveShadow&&3===it)&&(!Te.frustumCulled||n.intersectsObject(Te))){Te.modelViewMatrix.multiplyMatrices(mt.matrixWorldInverse,Te.matrixWorld);const Hn=t.update(Te),ei=Te.material;if(Array.isArray(ei)){const Wn=Hn.groups;for(let En=0,zn=Wn.length;En<zn;En++){const xn=Wn[En],Gn=ei[xn.materialIndex];if(Gn&&Gn.visible){const Nn=Se(Te,Gn,zt,mt.near,mt.far,it);i.renderBufferDirect(mt,null,Hn,Nn,Te,xn)}}}else if(ei.visible){const Wn=Se(Te,ei,zt,mt.near,mt.far,it);i.renderBufferDirect(mt,null,Hn,Wn,Te,null)}}const ln=Te.children;for(let Hn=0,ei=ln.length;Hn<ei;Hn++)Ae(ln[Hn],Qe,mt,zt,it)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(Te,Qe,mt){if(!1===Y.enabled||!1===Y.autoUpdate&&!1===Y.needsUpdate||0===Te.length)return;const zt=i.getRenderTarget(),it=i.getActiveCubeFace(),Tt=i.getActiveMipmapLevel(),ln=i.state;ln.setBlending(0),ln.buffers.color.setClear(1,1,1,1),ln.buffers.depth.setTest(!0),ln.setScissorTest(!1);for(let Hn=0,ei=Te.length;Hn<ei;Hn++){const Wn=Te[Hn],En=Wn.shadow;if(void 0===En){console.warn("THREE.WebGLShadowMap:",Wn,"has no shadow.");continue}if(!1===En.autoUpdate&&!1===En.needsUpdate)continue;r.copy(En.mapSize);const zn=En.getFrameExtents();r.multiply(zn),s.copy(En.mapSize),(r.x>v||r.y>v)&&(r.x>v&&(s.x=Math.floor(v/zn.x),r.x=s.x*zn.x,En.mapSize.x=s.x),r.y>v&&(s.y=Math.floor(v/zn.y),r.y=s.y*zn.y,En.mapSize.y=s.y)),null===En.map&&(En.map=new W0(r.x,r.y,3!==this.type?{minFilter:Ju,magFilter:Ju}:{}),En.map.texture.name=Wn.name+".shadowMap",En.camera.updateProjectionMatrix()),i.setRenderTarget(En.map),i.clear();const xn=En.getViewportCount();for(let Gn=0;Gn<xn;Gn++){const Nn=En.getViewport(Gn);o.set(s.x*Nn.x,s.y*Nn.y,s.x*Nn.z,s.y*Nn.w),ln.viewport(o),En.updateMatrices(Wn,Gn),n=En.getFrustum(),Ae(Qe,mt,En.camera,Wn,this.type)}!0!==En.isPointLightShadow&&3===this.type&&ce(En,mt),En.needsUpdate=!1}Y.needsUpdate=!1,i.setRenderTarget(zt,it,Tt)}}function SCe(i,t,e){const n=e.isWebGL2,l=new function r(){let Ln=!1;const Ii=new fl;let hr=null;const Kr=new fl(0,0,0,0);return{setMask:function(bs){hr!==bs&&!Ln&&(i.colorMask(bs,bs,bs,bs),hr=bs)},setLocked:function(bs){Ln=bs},setClear:function(bs,ja,Ih,Pd,ub){!0===ub&&(bs*=Pd,ja*=Pd,Ih*=Pd),Ii.set(bs,ja,Ih,Pd),!1===Kr.equals(Ii)&&(i.clearColor(bs,ja,Ih,Pd),Kr.copy(Ii))},reset:function(){Ln=!1,hr=null,Kr.set(-1,0,0,0)}}},u=new function s(){let Ln=!1,Ii=null,hr=null,Kr=null;return{setTest:function(bs){bs?_s(2929):ps(2929)},setMask:function(bs){Ii!==bs&&!Ln&&(i.depthMask(bs),Ii=bs)},setFunc:function(bs){if(hr!==bs){switch(bs){case 0:i.depthFunc(512);break;case 1:i.depthFunc(519);break;case 2:i.depthFunc(513);break;case 3:default:i.depthFunc(515);break;case 4:i.depthFunc(514);break;case 5:i.depthFunc(518);break;case 6:i.depthFunc(516);break;case 7:i.depthFunc(517)}hr=bs}},setLocked:function(bs){Ln=bs},setClear:function(bs){Kr!==bs&&(i.clearDepth(bs),Kr=bs)},reset:function(){Ln=!1,Ii=null,hr=null,Kr=null}}},p=new function o(){let Ln=!1,Ii=null,hr=null,Kr=null,bs=null,ja=null,Ih=null,Pd=null,ub=null;return{setTest:function(lc){Ln||(lc?_s(2960):ps(2960))},setMask:function(lc){Ii!==lc&&!Ln&&(i.stencilMask(lc),Ii=lc)},setFunc:function(lc,Ey,Eg){(hr!==lc||Kr!==Ey||bs!==Eg)&&(i.stencilFunc(lc,Ey,Eg),hr=lc,Kr=Ey,bs=Eg)},setOp:function(lc,Ey,Eg){(ja!==lc||Ih!==Ey||Pd!==Eg)&&(i.stencilOp(lc,Ey,Eg),ja=lc,Ih=Ey,Pd=Eg)},setLocked:function(lc){Ln=lc},setClear:function(lc){ub!==lc&&(i.clearStencil(lc),ub=lc)},reset:function(){Ln=!1,Ii=null,hr=null,Kr=null,bs=null,ja=null,Ih=null,Pd=null,ub=null}}},v=new WeakMap,w=new WeakMap;let I={},T={},k=new WeakMap,G=[],Y=null,ce=!1,Se=null,Ae=null,Te=null,Qe=null,mt=null,zt=null,it=null,Tt=!1,ln=null,Hn=null,ei=null,Wn=null,En=null;const zn=i.getParameter(35661);let xn=!1,Gn=0;const Nn=i.getParameter(7938);-1!==Nn.indexOf("WebGL")?(Gn=parseFloat(/^WebGL (\d)/.exec(Nn)[1]),xn=Gn>=1):-1!==Nn.indexOf("OpenGL ES")&&(Gn=parseFloat(/^OpenGL ES (\d)/.exec(Nn)[1]),xn=Gn>=2);let In=null,Vn={};const Yi=i.getParameter(3088),Ei=i.getParameter(2978),rr=(new fl).fromArray(Yi),fr=(new fl).fromArray(Ei);function Ss(Ln,Ii,hr){const Kr=new Uint8Array(4),bs=i.createTexture();i.bindTexture(Ln,bs),i.texParameteri(Ln,10241,9728),i.texParameteri(Ln,10240,9728);for(let ja=0;ja<hr;ja++)i.texImage2D(Ii+ja,0,6408,1,1,0,6408,5121,Kr);return bs}const Di={};function _s(Ln){!0!==I[Ln]&&(i.enable(Ln),I[Ln]=!0)}function ps(Ln){!1!==I[Ln]&&(i.disable(Ln),I[Ln]=!1)}Di[3553]=Ss(3553,3553,1),Di[34067]=Ss(34067,34069,6),l.setClear(0,0,0,1),u.setClear(1),p.setClear(0),_s(2929),u.setFunc(3),Fr(!1),yo(1),_s(2884),xr(0);const Gi={100:32774,101:32778,102:32779};if(n)Gi[103]=32775,Gi[104]=32776;else{const Ln=t.get("EXT_blend_minmax");null!==Ln&&(Gi[103]=Ln.MIN_EXT,Gi[104]=Ln.MAX_EXT)}const Bi={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function xr(Ln,Ii,hr,Kr,bs,ja,Ih,Pd){if(0!==Ln){if(!1===ce&&(_s(3042),ce=!0),5===Ln)bs=bs||Ii,ja=ja||hr,Ih=Ih||Kr,(Ii!==Ae||bs!==mt)&&(i.blendEquationSeparate(Gi[Ii],Gi[bs]),Ae=Ii,mt=bs),(hr!==Te||Kr!==Qe||ja!==zt||Ih!==it)&&(i.blendFuncSeparate(Bi[hr],Bi[Kr],Bi[ja],Bi[Ih]),Te=hr,Qe=Kr,zt=ja,it=Ih),Se=Ln,Tt=null;else if(Ln!==Se||Pd!==Tt){if((100!==Ae||100!==mt)&&(i.blendEquation(32774),Ae=100,mt=100),Pd)switch(Ln){case 1:i.blendFuncSeparate(1,771,1,771);break;case 2:i.blendFunc(1,1);break;case 3:i.blendFuncSeparate(0,769,0,1);break;case 4:i.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ln)}else switch(Ln){case 1:i.blendFuncSeparate(770,771,1,771);break;case 2:i.blendFunc(770,1);break;case 3:i.blendFuncSeparate(0,769,0,1);break;case 4:i.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ln)}Te=null,Qe=null,zt=null,it=null,Se=Ln,Tt=Pd}}else!0===ce&&(ps(3042),ce=!1)}function Fr(Ln){ln!==Ln&&(i.frontFace(Ln?2304:2305),ln=Ln)}function yo(Ln){0!==Ln?(_s(2884),Ln!==Hn&&i.cullFace(1===Ln?1029:2===Ln?1028:1032)):ps(2884),Hn=Ln}function zs(Ln,Ii,hr){Ln?(_s(32823),(Wn!==Ii||En!==hr)&&(i.polygonOffset(Ii,hr),Wn=Ii,En=hr)):ps(32823)}return{buffers:{color:l,depth:u,stencil:p},enable:_s,disable:ps,bindFramebuffer:function gs(Ln,Ii){return T[Ln]!==Ii&&(i.bindFramebuffer(Ln,Ii),T[Ln]=Ii,n&&(36009===Ln&&(T[36160]=Ii),36160===Ln&&(T[36009]=Ii)),!0)},drawBuffers:function Pr(Ln,Ii){let hr=G,Kr=!1;if(Ln)if(hr=k.get(Ii),void 0===hr&&(hr=[],k.set(Ii,hr)),Ln.isWebGLMultipleRenderTargets){const bs=Ln.texture;if(hr.length!==bs.length||36064!==hr[0]){for(let ja=0,Ih=bs.length;ja<Ih;ja++)hr[ja]=36064+ja;hr.length=bs.length,Kr=!0}}else 36064!==hr[0]&&(hr[0]=36064,Kr=!0);else 1029!==hr[0]&&(hr[0]=1029,Kr=!0);Kr&&(e.isWebGL2?i.drawBuffers(hr):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(hr))},useProgram:function Io(Ln){return Y!==Ln&&(i.useProgram(Ln),Y=Ln,!0)},setBlending:xr,setMaterial:function hs(Ln,Ii){2===Ln.side?ps(2884):_s(2884);let hr=1===Ln.side;Ii&&(hr=!hr),Fr(hr),1===Ln.blending&&!1===Ln.transparent?xr(0):xr(Ln.blending,Ln.blendEquation,Ln.blendSrc,Ln.blendDst,Ln.blendEquationAlpha,Ln.blendSrcAlpha,Ln.blendDstAlpha,Ln.premultipliedAlpha),u.setFunc(Ln.depthFunc),u.setTest(Ln.depthTest),u.setMask(Ln.depthWrite),l.setMask(Ln.colorWrite);const Kr=Ln.stencilWrite;p.setTest(Kr),Kr&&(p.setMask(Ln.stencilWriteMask),p.setFunc(Ln.stencilFunc,Ln.stencilRef,Ln.stencilFuncMask),p.setOp(Ln.stencilFail,Ln.stencilZFail,Ln.stencilZPass)),zs(Ln.polygonOffset,Ln.polygonOffsetFactor,Ln.polygonOffsetUnits),!0===Ln.alphaToCoverage?_s(32926):ps(32926)},setFlipSided:Fr,setCullFace:yo,setLineWidth:function Xs(Ln){Ln!==ei&&(xn&&i.lineWidth(Ln),ei=Ln)},setPolygonOffset:zs,setScissorTest:function jl(Ln){Ln?_s(3089):ps(3089)},activeTexture:function wl(Ln){void 0===Ln&&(Ln=33984+zn-1),In!==Ln&&(i.activeTexture(Ln),In=Ln)},bindTexture:function cn(Ln,Ii,hr){void 0===hr&&(hr=null===In?33984+zn-1:In);let Kr=Vn[hr];void 0===Kr&&(Kr={type:void 0,texture:void 0},Vn[hr]=Kr),(Kr.type!==Ln||Kr.texture!==Ii)&&(In!==hr&&(i.activeTexture(hr),In=hr),i.bindTexture(Ln,Ii||Di[Ln]),Kr.type=Ln,Kr.texture=Ii)},unbindTexture:function $t(){const Ln=Vn[In];void 0!==Ln&&void 0!==Ln.type&&(i.bindTexture(Ln.type,null),Ln.type=void 0,Ln.texture=void 0)},compressedTexImage2D:function ui(){try{i.compressedTexImage2D.apply(i,arguments)}catch(Ln){console.error("THREE.WebGLState:",Ln)}},compressedTexImage3D:function dr(){try{i.compressedTexImage3D.apply(i,arguments)}catch(Ln){console.error("THREE.WebGLState:",Ln)}},texImage2D:function Ys(){try{i.texImage2D.apply(i,arguments)}catch(Ln){console.error("THREE.WebGLState:",Ln)}},texImage3D:function ms(){try{i.texImage3D.apply(i,arguments)}catch(Ln){console.error("THREE.WebGLState:",Ln)}},updateUBOMapping:function Ia(Ln,Ii){let hr=w.get(Ii);void 0===hr&&(hr=new WeakMap,w.set(Ii,hr));let Kr=hr.get(Ln);void 0===Kr&&(Kr=i.getUniformBlockIndex(Ii,Ln.name),hr.set(Ln,Kr))},uniformBlockBinding:function ac(Ln,Ii){const Kr=w.get(Ii).get(Ln);v.get(Ln)!==Kr&&(i.uniformBlockBinding(Ii,Kr,Ln.__bindingPointIndex),v.set(Ln,Kr))},texStorage2D:function zi(){try{i.texStorage2D.apply(i,arguments)}catch(Ln){console.error("THREE.WebGLState:",Ln)}},texStorage3D:function Ds(){try{i.texStorage3D.apply(i,arguments)}catch(Ln){console.error("THREE.WebGLState:",Ln)}},texSubImage2D:function Ar(){try{i.texSubImage2D.apply(i,arguments)}catch(Ln){console.error("THREE.WebGLState:",Ln)}},texSubImage3D:function Gr(){try{i.texSubImage3D.apply(i,arguments)}catch(Ln){console.error("THREE.WebGLState:",Ln)}},compressedTexSubImage2D:function Qs(){try{i.compressedTexSubImage2D.apply(i,arguments)}catch(Ln){console.error("THREE.WebGLState:",Ln)}},compressedTexSubImage3D:function jr(){try{i.compressedTexSubImage3D.apply(i,arguments)}catch(Ln){console.error("THREE.WebGLState:",Ln)}},scissor:function Hs(Ln){!1===rr.equals(Ln)&&(i.scissor(Ln.x,Ln.y,Ln.z,Ln.w),rr.copy(Ln))},viewport:function Ls(Ln){!1===fr.equals(Ln)&&(i.viewport(Ln.x,Ln.y,Ln.z,Ln.w),fr.copy(Ln))},reset:function xh(){i.disable(3042),i.disable(2884),i.disable(2929),i.disable(32823),i.disable(3089),i.disable(2960),i.disable(32926),i.blendEquation(32774),i.blendFunc(1,0),i.blendFuncSeparate(1,0,1,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(513),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(519,0,4294967295),i.stencilOp(7680,7680,7680),i.clearStencil(0),i.cullFace(1029),i.frontFace(2305),i.polygonOffset(0,0),i.activeTexture(33984),i.bindFramebuffer(36160,null),!0===n&&(i.bindFramebuffer(36009,null),i.bindFramebuffer(36008,null)),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),I={},In=null,Vn={},T={},k=new WeakMap,G=[],Y=null,ce=!1,Se=null,Ae=null,Te=null,Qe=null,mt=null,zt=null,it=null,Tt=!1,ln=null,Hn=null,ei=null,Wn=null,En=null,rr.set(0,0,i.canvas.width,i.canvas.height),fr.set(0,0,i.canvas.width,i.canvas.height),l.reset(),u.reset(),p.reset()}}}function ECe(i,t,e,n,r,s,o){const l=r.isWebGL2,u=r.maxTextures,p=r.maxCubemapSize,v=r.maxTextureSize,w=r.maxSamples,I=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,T=/OculusBrowser/g.test(typeof navigator>"u"?"":navigator.userAgent),k=new WeakMap;let G;const Y=new WeakMap;let ce=!1;try{ce=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function Se(cn,$t){return ce?new OffscreenCanvas(cn,$t):ax("canvas")}function Ae(cn,$t,ui,dr){let Ar=1;if((cn.width>dr||cn.height>dr)&&(Ar=dr/Math.max(cn.width,cn.height)),Ar<1||!0===$t){if(typeof HTMLImageElement<"u"&&cn instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&cn instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&cn instanceof ImageBitmap){const Gr=$t?HS:Math.floor,Qs=Gr(Ar*cn.width),jr=Gr(Ar*cn.height);void 0===G&&(G=Se(Qs,jr));const zi=ui?Se(Qs,jr):G;return zi.width=Qs,zi.height=jr,zi.getContext("2d").drawImage(cn,0,0,Qs,jr),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+cn.width+"x"+cn.height+") to ("+Qs+"x"+jr+")."),zi}return"data"in cn&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+cn.width+"x"+cn.height+")."),cn}return cn}function Te(cn){return eP(cn.width)&&eP(cn.height)}function mt(cn,$t){return cn.generateMipmaps&&$t&&cn.minFilter!==Ju&&cn.minFilter!==Lu}function zt(cn){i.generateMipmap(cn)}function it(cn,$t,ui,dr,Ar=!1){if(!1===l)return $t;if(null!==cn){if(void 0!==i[cn])return i[cn];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+cn+"'")}let Gr=$t;return 6403===$t&&(5126===ui&&(Gr=33326),5131===ui&&(Gr=33325),5121===ui&&(Gr=33321)),33319===$t&&(5126===ui&&(Gr=33328),5131===ui&&(Gr=33327),5121===ui&&(Gr=33323)),6408===$t&&(5126===ui&&(Gr=34836),5131===ui&&(Gr=34842),5121===ui&&(Gr=dr===Kc&&!1===Ar?35907:32856),32819===ui&&(Gr=32854),32820===ui&&(Gr=32855)),(33325===Gr||33326===Gr||33327===Gr||33328===Gr||34842===Gr||34836===Gr)&&t.get("EXT_color_buffer_float"),Gr}function Tt(cn,$t,ui){return!0===mt(cn,ui)||cn.isFramebufferTexture&&cn.minFilter!==Ju&&cn.minFilter!==Lu?Math.log2(Math.max($t.width,$t.height))+1:void 0!==cn.mipmaps&&cn.mipmaps.length>0?cn.mipmaps.length:cn.isCompressedTexture&&Array.isArray(cn.image)?$t.mipmaps.length:1}function ln(cn){return cn===Ju||1004===cn||1005===cn?9728:9729}function Hn(cn){const $t=cn.target;$t.removeEventListener("dispose",Hn),function Wn(cn){const $t=n.get(cn);if(void 0===$t.__webglInit)return;const ui=cn.source,dr=Y.get(ui);if(dr){const Ar=dr[$t.__cacheKey];Ar.usedTimes--,0===Ar.usedTimes&&En(cn),0===Object.keys(dr).length&&Y.delete(ui)}n.remove(cn)}($t),$t.isVideoTexture&&k.delete($t)}function ei(cn){const $t=cn.target;$t.removeEventListener("dispose",ei),function zn(cn){const $t=cn.texture,ui=n.get(cn),dr=n.get($t);if(void 0!==dr.__webglTexture&&(i.deleteTexture(dr.__webglTexture),o.memory.textures--),cn.depthTexture&&cn.depthTexture.dispose(),cn.isWebGLCubeRenderTarget)for(let Ar=0;Ar<6;Ar++)i.deleteFramebuffer(ui.__webglFramebuffer[Ar]),ui.__webglDepthbuffer&&i.deleteRenderbuffer(ui.__webglDepthbuffer[Ar]);else{if(i.deleteFramebuffer(ui.__webglFramebuffer),ui.__webglDepthbuffer&&i.deleteRenderbuffer(ui.__webglDepthbuffer),ui.__webglMultisampledFramebuffer&&i.deleteFramebuffer(ui.__webglMultisampledFramebuffer),ui.__webglColorRenderbuffer)for(let Ar=0;Ar<ui.__webglColorRenderbuffer.length;Ar++)ui.__webglColorRenderbuffer[Ar]&&i.deleteRenderbuffer(ui.__webglColorRenderbuffer[Ar]);ui.__webglDepthRenderbuffer&&i.deleteRenderbuffer(ui.__webglDepthRenderbuffer)}if(cn.isWebGLMultipleRenderTargets)for(let Ar=0,Gr=$t.length;Ar<Gr;Ar++){const Qs=n.get($t[Ar]);Qs.__webglTexture&&(i.deleteTexture(Qs.__webglTexture),o.memory.textures--),n.remove($t[Ar])}n.remove($t),n.remove(cn)}($t)}function En(cn){const $t=n.get(cn);i.deleteTexture($t.__webglTexture),delete Y.get(cn.source)[$t.__cacheKey],o.memory.textures--}let xn=0;function Vn(cn,$t){const ui=n.get(cn);if(cn.isVideoTexture&&function jl(cn){const $t=o.render.frame;k.get(cn)!==$t&&(k.set(cn,$t),cn.update())}(cn),!1===cn.isRenderTargetTexture&&cn.version>0&&ui.__version!==cn.version){const dr=cn.image;if(null===dr)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==dr.complete)return void ps(ui,cn,$t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}e.bindTexture(3553,ui.__webglTexture,33984+$t)}const fr={1e3:10497,[cf]:33071,1002:33648},Ss={[Ju]:9728,1004:9984,1005:9986,[Lu]:9729,1007:9985,1008:9987};function Di(cn,$t,ui){if(ui?(i.texParameteri(cn,10242,fr[$t.wrapS]),i.texParameteri(cn,10243,fr[$t.wrapT]),(32879===cn||35866===cn)&&i.texParameteri(cn,32882,fr[$t.wrapR]),i.texParameteri(cn,10240,Ss[$t.magFilter]),i.texParameteri(cn,10241,Ss[$t.minFilter])):(i.texParameteri(cn,10242,33071),i.texParameteri(cn,10243,33071),(32879===cn||35866===cn)&&i.texParameteri(cn,32882,33071),($t.wrapS!==cf||$t.wrapT!==cf)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),i.texParameteri(cn,10240,ln($t.magFilter)),i.texParameteri(cn,10241,ln($t.minFilter)),$t.minFilter!==Ju&&$t.minFilter!==Lu&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){const dr=t.get("EXT_texture_filter_anisotropic");if($t.type===__&&!1===t.has("OES_texture_float_linear")||!1===l&&$t.type===rx&&!1===t.has("OES_texture_half_float_linear"))return;($t.anisotropy>1||n.get($t).__currentAnisotropy)&&(i.texParameterf(cn,dr.TEXTURE_MAX_ANISOTROPY_EXT,Math.min($t.anisotropy,r.getMaxAnisotropy())),n.get($t).__currentAnisotropy=$t.anisotropy)}}function _s(cn,$t){let ui=!1;void 0===cn.__webglInit&&(cn.__webglInit=!0,$t.addEventListener("dispose",Hn));const dr=$t.source;let Ar=Y.get(dr);void 0===Ar&&(Ar={},Y.set(dr,Ar));const Gr=function In(cn){const $t=[];return $t.push(cn.wrapS),$t.push(cn.wrapT),$t.push(cn.wrapR||0),$t.push(cn.magFilter),$t.push(cn.minFilter),$t.push(cn.anisotropy),$t.push(cn.internalFormat),$t.push(cn.format),$t.push(cn.type),$t.push(cn.generateMipmaps),$t.push(cn.premultiplyAlpha),$t.push(cn.flipY),$t.push(cn.unpackAlignment),$t.push(cn.encoding),$t.join()}($t);if(Gr!==cn.__cacheKey){void 0===Ar[Gr]&&(Ar[Gr]={texture:i.createTexture(),usedTimes:0},o.memory.textures++,ui=!0),Ar[Gr].usedTimes++;const Qs=Ar[cn.__cacheKey];void 0!==Qs&&(Ar[cn.__cacheKey].usedTimes--,0===Qs.usedTimes&&En($t)),cn.__cacheKey=Gr,cn.__webglTexture=Ar[Gr].texture}return ui}function ps(cn,$t,ui){let dr=3553;($t.isDataArrayTexture||$t.isCompressedArrayTexture)&&(dr=35866),$t.isData3DTexture&&(dr=32879);const Ar=_s(cn,$t),Gr=$t.source;e.bindTexture(dr,cn.__webglTexture,33984+ui);const Qs=n.get(Gr);if(Gr.version!==Qs.__version||!0===Ar){e.activeTexture(33984+ui),i.pixelStorei(37440,$t.flipY),i.pixelStorei(37441,$t.premultiplyAlpha),i.pixelStorei(3317,$t.unpackAlignment),i.pixelStorei(37443,0);const jr=function Qe(cn){return!l&&(cn.wrapS!==cf||cn.wrapT!==cf||cn.minFilter!==Ju&&cn.minFilter!==Lu)}($t)&&!1===Te($t.image);let zi=Ae($t.image,jr,!1,v);zi=wl($t,zi);const Ds=Te(zi)||l,Ys=s.convert($t.format,$t.encoding);let Ls,ms=s.convert($t.type),Hs=it($t.internalFormat,Ys,ms,$t.encoding,$t.isVideoTexture);Di(dr,$t,Ds);const Ia=$t.mipmaps,ac=l&&!0!==$t.isVideoTexture,xh=void 0===Qs.__version||!0===Ar,Ln=Tt($t,zi,Ds);if($t.isDepthTexture)Hs=6402,l?Hs=$t.type===__?36012:$t.type===N0?33190:$t.type===xC?35056:33189:$t.type===__&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),$t.format===B0&&6402===Hs&&1012!==$t.type&&$t.type!==N0&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),$t.type=N0,ms=s.convert($t.type)),$t.format===IC&&6402===Hs&&(Hs=34041,$t.type!==xC&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),$t.type=xC,ms=s.convert($t.type))),xh&&(ac?e.texStorage2D(3553,1,Hs,zi.width,zi.height):e.texImage2D(3553,0,Hs,zi.width,zi.height,0,Ys,ms,null));else if($t.isDataTexture)if(Ia.length>0&&Ds){ac&&xh&&e.texStorage2D(3553,Ln,Hs,Ia[0].width,Ia[0].height);for(let Ii=0,hr=Ia.length;Ii<hr;Ii++)Ls=Ia[Ii],ac?e.texSubImage2D(3553,Ii,0,0,Ls.width,Ls.height,Ys,ms,Ls.data):e.texImage2D(3553,Ii,Hs,Ls.width,Ls.height,0,Ys,ms,Ls.data);$t.generateMipmaps=!1}else ac?(xh&&e.texStorage2D(3553,Ln,Hs,zi.width,zi.height),e.texSubImage2D(3553,0,0,0,zi.width,zi.height,Ys,ms,zi.data)):e.texImage2D(3553,0,Hs,zi.width,zi.height,0,Ys,ms,zi.data);else if($t.isCompressedTexture)if($t.isCompressedArrayTexture){ac&&xh&&e.texStorage3D(35866,Ln,Hs,Ia[0].width,Ia[0].height,zi.depth);for(let Ii=0,hr=Ia.length;Ii<hr;Ii++)Ls=Ia[Ii],$t.format!==wg?null!==Ys?ac?e.compressedTexSubImage3D(35866,Ii,0,0,0,Ls.width,Ls.height,zi.depth,Ys,Ls.data,0,0):e.compressedTexImage3D(35866,Ii,Hs,Ls.width,Ls.height,zi.depth,0,Ls.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ac?e.texSubImage3D(35866,Ii,0,0,0,Ls.width,Ls.height,zi.depth,Ys,ms,Ls.data):e.texImage3D(35866,Ii,Hs,Ls.width,Ls.height,zi.depth,0,Ys,ms,Ls.data)}else{ac&&xh&&e.texStorage2D(3553,Ln,Hs,Ia[0].width,Ia[0].height);for(let Ii=0,hr=Ia.length;Ii<hr;Ii++)Ls=Ia[Ii],$t.format!==wg?null!==Ys?ac?e.compressedTexSubImage2D(3553,Ii,0,0,Ls.width,Ls.height,Ys,Ls.data):e.compressedTexImage2D(3553,Ii,Hs,Ls.width,Ls.height,0,Ls.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ac?e.texSubImage2D(3553,Ii,0,0,Ls.width,Ls.height,Ys,ms,Ls.data):e.texImage2D(3553,Ii,Hs,Ls.width,Ls.height,0,Ys,ms,Ls.data)}else if($t.isDataArrayTexture)ac?(xh&&e.texStorage3D(35866,Ln,Hs,zi.width,zi.height,zi.depth),e.texSubImage3D(35866,0,0,0,0,zi.width,zi.height,zi.depth,Ys,ms,zi.data)):e.texImage3D(35866,0,Hs,zi.width,zi.height,zi.depth,0,Ys,ms,zi.data);else if($t.isData3DTexture)ac?(xh&&e.texStorage3D(32879,Ln,Hs,zi.width,zi.height,zi.depth),e.texSubImage3D(32879,0,0,0,0,zi.width,zi.height,zi.depth,Ys,ms,zi.data)):e.texImage3D(32879,0,Hs,zi.width,zi.height,zi.depth,0,Ys,ms,zi.data);else if($t.isFramebufferTexture){if(xh)if(ac)e.texStorage2D(3553,Ln,Hs,zi.width,zi.height);else{let Ii=zi.width,hr=zi.height;for(let Kr=0;Kr<Ln;Kr++)e.texImage2D(3553,Kr,Hs,Ii,hr,0,Ys,ms,null),Ii>>=1,hr>>=1}}else if(Ia.length>0&&Ds){ac&&xh&&e.texStorage2D(3553,Ln,Hs,Ia[0].width,Ia[0].height);for(let Ii=0,hr=Ia.length;Ii<hr;Ii++)Ls=Ia[Ii],ac?e.texSubImage2D(3553,Ii,0,0,Ys,ms,Ls):e.texImage2D(3553,Ii,Hs,Ys,ms,Ls);$t.generateMipmaps=!1}else ac?(xh&&e.texStorage2D(3553,Ln,Hs,zi.width,zi.height),e.texSubImage2D(3553,0,0,0,Ys,ms,zi)):e.texImage2D(3553,0,Hs,Ys,ms,zi);mt($t,Ds)&&zt(dr),Qs.__version=Gr.version,$t.onUpdate&&$t.onUpdate($t)}cn.__version=$t.version}function Pr(cn,$t,ui,dr,Ar){const Gr=s.convert(ui.format,ui.encoding),Qs=s.convert(ui.type),jr=it(ui.internalFormat,Gr,Qs,ui.encoding);n.get($t).__hasExternalTextures||(32879===Ar||35866===Ar?e.texImage3D(Ar,0,jr,$t.width,$t.height,$t.depth,0,Gr,Qs,null):e.texImage2D(Ar,0,jr,$t.width,$t.height,0,Gr,Qs,null)),e.bindFramebuffer(36160,cn),zs($t)?I.framebufferTexture2DMultisampleEXT(36160,dr,Ar,n.get(ui).__webglTexture,0,Xs($t)):(3553===Ar||Ar>=34069&&Ar<=34074)&&i.framebufferTexture2D(36160,dr,Ar,n.get(ui).__webglTexture,0),e.bindFramebuffer(36160,null)}function Io(cn,$t,ui){if(i.bindRenderbuffer(36161,cn),$t.depthBuffer&&!$t.stencilBuffer){let dr=33189;if(ui||zs($t)){const Ar=$t.depthTexture;Ar&&Ar.isDepthTexture&&(Ar.type===__?dr=36012:Ar.type===N0&&(dr=33190));const Gr=Xs($t);zs($t)?I.renderbufferStorageMultisampleEXT(36161,Gr,dr,$t.width,$t.height):i.renderbufferStorageMultisample(36161,Gr,dr,$t.width,$t.height)}else i.renderbufferStorage(36161,dr,$t.width,$t.height);i.framebufferRenderbuffer(36160,36096,36161,cn)}else if($t.depthBuffer&&$t.stencilBuffer){const dr=Xs($t);ui&&!1===zs($t)?i.renderbufferStorageMultisample(36161,dr,35056,$t.width,$t.height):zs($t)?I.renderbufferStorageMultisampleEXT(36161,dr,35056,$t.width,$t.height):i.renderbufferStorage(36161,34041,$t.width,$t.height),i.framebufferRenderbuffer(36160,33306,36161,cn)}else{const dr=!0===$t.isWebGLMultipleRenderTargets?$t.texture:[$t.texture];for(let Ar=0;Ar<dr.length;Ar++){const Gr=dr[Ar],Qs=s.convert(Gr.format,Gr.encoding),jr=s.convert(Gr.type),zi=it(Gr.internalFormat,Qs,jr,Gr.encoding),Ds=Xs($t);ui&&!1===zs($t)?i.renderbufferStorageMultisample(36161,Ds,zi,$t.width,$t.height):zs($t)?I.renderbufferStorageMultisampleEXT(36161,Ds,zi,$t.width,$t.height):i.renderbufferStorage(36161,zi,$t.width,$t.height)}}i.bindRenderbuffer(36161,null)}function Bi(cn){const $t=n.get(cn),ui=!0===cn.isWebGLCubeRenderTarget;if(cn.depthTexture&&!$t.__autoAllocateDepthBuffer){if(ui)throw new Error("target.depthTexture not supported in Cube render targets");!function Gi(cn,$t){if($t&&$t.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,cn),!$t.depthTexture||!$t.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get($t.depthTexture).__webglTexture||$t.depthTexture.image.width!==$t.width||$t.depthTexture.image.height!==$t.height)&&($t.depthTexture.image.width=$t.width,$t.depthTexture.image.height=$t.height,$t.depthTexture.needsUpdate=!0),Vn($t.depthTexture,0);const dr=n.get($t.depthTexture).__webglTexture,Ar=Xs($t);if($t.depthTexture.format===B0)zs($t)?I.framebufferTexture2DMultisampleEXT(36160,36096,3553,dr,0,Ar):i.framebufferTexture2D(36160,36096,3553,dr,0);else{if($t.depthTexture.format!==IC)throw new Error("Unknown depthTexture format");zs($t)?I.framebufferTexture2DMultisampleEXT(36160,33306,3553,dr,0,Ar):i.framebufferTexture2D(36160,33306,3553,dr,0)}}($t.__webglFramebuffer,cn)}else if(ui){$t.__webglDepthbuffer=[];for(let dr=0;dr<6;dr++)e.bindFramebuffer(36160,$t.__webglFramebuffer[dr]),$t.__webglDepthbuffer[dr]=i.createRenderbuffer(),Io($t.__webglDepthbuffer[dr],cn,!1)}else e.bindFramebuffer(36160,$t.__webglFramebuffer),$t.__webglDepthbuffer=i.createRenderbuffer(),Io($t.__webglDepthbuffer,cn,!1);e.bindFramebuffer(36160,null)}function Xs(cn){return Math.min(w,cn.samples)}function zs(cn){const $t=n.get(cn);return l&&cn.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==$t.__useRenderToTexture}function wl(cn,$t){const ui=cn.encoding,dr=cn.format,Ar=cn.type;return!0===cn.isCompressedTexture||!0===cn.isVideoTexture||1035===cn.format||ui!==z0&&(ui===Kc?!1===l?!0===t.has("EXT_sRGB")&&dr===wg?(cn.format=1035,cn.minFilter=Lu,cn.generateMipmaps=!1):$t=j5.sRGBToLinear($t):(dr!==wg||Ar!==F0)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",ui)),$t}this.allocateTextureUnit=function Nn(){const cn=xn;return cn>=u&&console.warn("THREE.WebGLTextures: Trying to use "+cn+" texture units while this GPU supports only "+u),xn+=1,cn},this.resetTextureUnits=function Gn(){xn=0},this.setTexture2D=Vn,this.setTexture2DArray=function Yi(cn,$t){const ui=n.get(cn);cn.version>0&&ui.__version!==cn.version?ps(ui,cn,$t):e.bindTexture(35866,ui.__webglTexture,33984+$t)},this.setTexture3D=function Ei(cn,$t){const ui=n.get(cn);cn.version>0&&ui.__version!==cn.version?ps(ui,cn,$t):e.bindTexture(32879,ui.__webglTexture,33984+$t)},this.setTextureCube=function rr(cn,$t){const ui=n.get(cn);cn.version>0&&ui.__version!==cn.version?function gs(cn,$t,ui){if(6!==$t.image.length)return;const dr=_s(cn,$t),Ar=$t.source;e.bindTexture(34067,cn.__webglTexture,33984+ui);const Gr=n.get(Ar);if(Ar.version!==Gr.__version||!0===dr){e.activeTexture(33984+ui),i.pixelStorei(37440,$t.flipY),i.pixelStorei(37441,$t.premultiplyAlpha),i.pixelStorei(3317,$t.unpackAlignment),i.pixelStorei(37443,0);const Qs=$t.isCompressedTexture||$t.image[0].isCompressedTexture,jr=$t.image[0]&&$t.image[0].isDataTexture,zi=[];for(let Ii=0;Ii<6;Ii++)zi[Ii]=Qs||jr?jr?$t.image[Ii].image:$t.image[Ii]:Ae($t.image[Ii],!1,!0,p),zi[Ii]=wl($t,zi[Ii]);const Ds=zi[0],Ys=Te(Ds)||l,ms=s.convert($t.format,$t.encoding),Hs=s.convert($t.type),Ls=it($t.internalFormat,ms,Hs,$t.encoding),Ia=l&&!0!==$t.isVideoTexture,ac=void 0===Gr.__version||!0===dr;let Ln,xh=Tt($t,Ds,Ys);if(Di(34067,$t,Ys),Qs){Ia&&ac&&e.texStorage2D(34067,xh,Ls,Ds.width,Ds.height);for(let Ii=0;Ii<6;Ii++){Ln=zi[Ii].mipmaps;for(let hr=0;hr<Ln.length;hr++){const Kr=Ln[hr];$t.format!==wg?null!==ms?Ia?e.compressedTexSubImage2D(34069+Ii,hr,0,0,Kr.width,Kr.height,ms,Kr.data):e.compressedTexImage2D(34069+Ii,hr,Ls,Kr.width,Kr.height,0,Kr.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ia?e.texSubImage2D(34069+Ii,hr,0,0,Kr.width,Kr.height,ms,Hs,Kr.data):e.texImage2D(34069+Ii,hr,Ls,Kr.width,Kr.height,0,ms,Hs,Kr.data)}}}else{Ln=$t.mipmaps,Ia&&ac&&(Ln.length>0&&xh++,e.texStorage2D(34067,xh,Ls,zi[0].width,zi[0].height));for(let Ii=0;Ii<6;Ii++)if(jr){Ia?e.texSubImage2D(34069+Ii,0,0,0,zi[Ii].width,zi[Ii].height,ms,Hs,zi[Ii].data):e.texImage2D(34069+Ii,0,Ls,zi[Ii].width,zi[Ii].height,0,ms,Hs,zi[Ii].data);for(let hr=0;hr<Ln.length;hr++){const bs=Ln[hr].image[Ii].image;Ia?e.texSubImage2D(34069+Ii,hr+1,0,0,bs.width,bs.height,ms,Hs,bs.data):e.texImage2D(34069+Ii,hr+1,Ls,bs.width,bs.height,0,ms,Hs,bs.data)}}else{Ia?e.texSubImage2D(34069+Ii,0,0,0,ms,Hs,zi[Ii]):e.texImage2D(34069+Ii,0,Ls,ms,Hs,zi[Ii]);for(let hr=0;hr<Ln.length;hr++){const Kr=Ln[hr];Ia?e.texSubImage2D(34069+Ii,hr+1,0,0,ms,Hs,Kr.image[Ii]):e.texImage2D(34069+Ii,hr+1,Ls,ms,Hs,Kr.image[Ii])}}}mt($t,Ys)&&zt(34067),Gr.__version=Ar.version,$t.onUpdate&&$t.onUpdate($t)}cn.__version=$t.version}(ui,cn,$t):e.bindTexture(34067,ui.__webglTexture,33984+$t)},this.rebindTextures=function xr(cn,$t,ui){const dr=n.get(cn);void 0!==$t&&Pr(dr.__webglFramebuffer,cn,cn.texture,36064,3553),void 0!==ui&&Bi(cn)},this.setupRenderTarget=function hs(cn){const $t=cn.texture,ui=n.get(cn),dr=n.get($t);cn.addEventListener("dispose",ei),!0!==cn.isWebGLMultipleRenderTargets&&(void 0===dr.__webglTexture&&(dr.__webglTexture=i.createTexture()),dr.__version=$t.version,o.memory.textures++);const Ar=!0===cn.isWebGLCubeRenderTarget,Gr=!0===cn.isWebGLMultipleRenderTargets,Qs=Te(cn)||l;if(Ar){ui.__webglFramebuffer=[];for(let jr=0;jr<6;jr++)ui.__webglFramebuffer[jr]=i.createFramebuffer()}else{if(ui.__webglFramebuffer=i.createFramebuffer(),Gr)if(r.drawBuffers){const jr=cn.texture;for(let zi=0,Ds=jr.length;zi<Ds;zi++){const Ys=n.get(jr[zi]);void 0===Ys.__webglTexture&&(Ys.__webglTexture=i.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(l&&cn.samples>0&&!1===zs(cn)){const jr=Gr?$t:[$t];ui.__webglMultisampledFramebuffer=i.createFramebuffer(),ui.__webglColorRenderbuffer=[],e.bindFramebuffer(36160,ui.__webglMultisampledFramebuffer);for(let zi=0;zi<jr.length;zi++){const Ds=jr[zi];ui.__webglColorRenderbuffer[zi]=i.createRenderbuffer(),i.bindRenderbuffer(36161,ui.__webglColorRenderbuffer[zi]);const Ys=s.convert(Ds.format,Ds.encoding),ms=s.convert(Ds.type),Hs=it(Ds.internalFormat,Ys,ms,Ds.encoding,!0===cn.isXRRenderTarget),Ls=Xs(cn);i.renderbufferStorageMultisample(36161,Ls,Hs,cn.width,cn.height),i.framebufferRenderbuffer(36160,36064+zi,36161,ui.__webglColorRenderbuffer[zi])}i.bindRenderbuffer(36161,null),cn.depthBuffer&&(ui.__webglDepthRenderbuffer=i.createRenderbuffer(),Io(ui.__webglDepthRenderbuffer,cn,!0)),e.bindFramebuffer(36160,null)}}if(Ar){e.bindTexture(34067,dr.__webglTexture),Di(34067,$t,Qs);for(let jr=0;jr<6;jr++)Pr(ui.__webglFramebuffer[jr],cn,$t,36064,34069+jr);mt($t,Qs)&&zt(34067),e.unbindTexture()}else if(Gr){const jr=cn.texture;for(let zi=0,Ds=jr.length;zi<Ds;zi++){const Ys=jr[zi],ms=n.get(Ys);e.bindTexture(3553,ms.__webglTexture),Di(3553,Ys,Qs),Pr(ui.__webglFramebuffer,cn,Ys,36064+zi,3553),mt(Ys,Qs)&&zt(3553)}e.unbindTexture()}else{let jr=3553;(cn.isWebGL3DRenderTarget||cn.isWebGLArrayRenderTarget)&&(l?jr=cn.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),e.bindTexture(jr,dr.__webglTexture),Di(jr,$t,Qs),Pr(ui.__webglFramebuffer,cn,$t,36064,jr),mt($t,Qs)&&zt(jr),e.unbindTexture()}cn.depthBuffer&&Bi(cn)},this.updateRenderTargetMipmap=function Fr(cn){const $t=Te(cn)||l,ui=!0===cn.isWebGLMultipleRenderTargets?cn.texture:[cn.texture];for(let dr=0,Ar=ui.length;dr<Ar;dr++){const Gr=ui[dr];if(mt(Gr,$t)){const Qs=cn.isWebGLCubeRenderTarget?34067:3553,jr=n.get(Gr).__webglTexture;e.bindTexture(Qs,jr),zt(Qs),e.unbindTexture()}}},this.updateMultisampleRenderTarget=function yo(cn){if(l&&cn.samples>0&&!1===zs(cn)){const $t=cn.isWebGLMultipleRenderTargets?cn.texture:[cn.texture],ui=cn.width,dr=cn.height;let Ar=16384;const Gr=[],Qs=cn.stencilBuffer?33306:36096,jr=n.get(cn),zi=!0===cn.isWebGLMultipleRenderTargets;if(zi)for(let Ds=0;Ds<$t.length;Ds++)e.bindFramebuffer(36160,jr.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(36160,36064+Ds,36161,null),e.bindFramebuffer(36160,jr.__webglFramebuffer),i.framebufferTexture2D(36009,36064+Ds,3553,null,0);e.bindFramebuffer(36008,jr.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,jr.__webglFramebuffer);for(let Ds=0;Ds<$t.length;Ds++){Gr.push(36064+Ds),cn.depthBuffer&&Gr.push(Qs);const Ys=void 0!==jr.__ignoreDepthValues&&jr.__ignoreDepthValues;if(!1===Ys&&(cn.depthBuffer&&(Ar|=256),cn.stencilBuffer&&(Ar|=1024)),zi&&i.framebufferRenderbuffer(36008,36064,36161,jr.__webglColorRenderbuffer[Ds]),!0===Ys&&(i.invalidateFramebuffer(36008,[Qs]),i.invalidateFramebuffer(36009,[Qs])),zi){const ms=n.get($t[Ds]).__webglTexture;i.framebufferTexture2D(36009,36064,3553,ms,0)}i.blitFramebuffer(0,0,ui,dr,0,0,ui,dr,Ar,9728),T&&i.invalidateFramebuffer(36008,Gr)}if(e.bindFramebuffer(36008,null),e.bindFramebuffer(36009,null),zi)for(let Ds=0;Ds<$t.length;Ds++){e.bindFramebuffer(36160,jr.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(36160,36064+Ds,36161,jr.__webglColorRenderbuffer[Ds]);const Ys=n.get($t[Ds]).__webglTexture;e.bindFramebuffer(36160,jr.__webglFramebuffer),i.framebufferTexture2D(36009,36064+Ds,3553,Ys,0)}e.bindFramebuffer(36009,jr.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=Bi,this.setupFrameBufferTexture=Pr,this.useMultisampledRTT=zs}function TCe(i,t,e){const n=e.isWebGL2;return{convert:function r(s,o=null){let l;if(s===F0)return 5121;if(1017===s)return 32819;if(1018===s)return 32820;if(1010===s)return 5120;if(1011===s)return 5122;if(1012===s)return 5123;if(1013===s)return 5124;if(s===N0)return 5125;if(s===__)return 5126;if(s===rx)return n?5131:(l=t.get("OES_texture_half_float"),null!==l?l.HALF_FLOAT_OES:null);if(1021===s)return 6406;if(s===wg)return 6408;if(1024===s)return 6409;if(1025===s)return 6410;if(s===B0)return 6402;if(s===IC)return 34041;if(1028===s)return 6403;if(1022===s)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(1035===s)return l=t.get("EXT_sRGB"),null!==l?l.SRGB_ALPHA_EXT:null;if(1029===s)return 36244;if(1030===s)return 33319;if(1031===s)return 33320;if(1033===s)return 36249;if(33776===s||33777===s||33778===s||33779===s)if(o===Kc){if(l=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===l)return null;if(33776===s)return l.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===s)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===s)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===s)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(l=t.get("WEBGL_compressed_texture_s3tc"),null===l)return null;if(33776===s)return l.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===s)return l.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===s)return l.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===s)return l.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===s||35841===s||35842===s||35843===s){if(l=t.get("WEBGL_compressed_texture_pvrtc"),null===l)return null;if(35840===s)return l.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===s)return l.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===s)return l.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===s)return l.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===s)return l=t.get("WEBGL_compressed_texture_etc1"),null!==l?l.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===s||37496===s){if(l=t.get("WEBGL_compressed_texture_etc"),null===l)return null;if(37492===s)return o===Kc?l.COMPRESSED_SRGB8_ETC2:l.COMPRESSED_RGB8_ETC2;if(37496===s)return o===Kc?l.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:l.COMPRESSED_RGBA8_ETC2_EAC}if(37808===s||37809===s||37810===s||37811===s||37812===s||37813===s||37814===s||37815===s||37816===s||37817===s||37818===s||37819===s||37820===s||37821===s){if(l=t.get("WEBGL_compressed_texture_astc"),null===l)return null;if(37808===s)return o===Kc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:l.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===s)return o===Kc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:l.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===s)return o===Kc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:l.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===s)return o===Kc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:l.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===s)return o===Kc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:l.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===s)return o===Kc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:l.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===s)return o===Kc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:l.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===s)return o===Kc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:l.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===s)return o===Kc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:l.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===s)return o===Kc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:l.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===s)return o===Kc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:l.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===s)return o===Kc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:l.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===s)return o===Kc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:l.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===s)return o===Kc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:l.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===s){if(l=t.get("EXT_texture_compression_bptc"),null===l)return null;if(36492===s)return o===Kc?l.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:l.COMPRESSED_RGBA_BPTC_UNORM_EXT}return s===xC?n?34042:(l=t.get("WEBGL_depth_texture"),null!==l?l.UNSIGNED_INT_24_8_WEBGL:null):void 0!==i[s]?i[s]:null}}}class MCe extends ed{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}}class YC extends Hf{constructor(){super(),this.isGroup=!0,this.type="Group"}}const DCe={type:"move"};class PP{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new YC,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new YC,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new en,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new en),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new YC,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new en,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new en),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,n){let r=null,s=null,o=null;const l=this._targetRay,u=this._grip,p=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState){if(p&&t.hand){o=!0;for(const G of t.hand.values()){const Y=e.getJointPose(G,n);if(void 0===p.joints[G.jointName]){const Se=new YC;Se.matrixAutoUpdate=!1,Se.visible=!1,p.joints[G.jointName]=Se,p.add(Se)}const ce=p.joints[G.jointName];null!==Y&&(ce.matrix.fromArray(Y.transform.matrix),ce.matrix.decompose(ce.position,ce.rotation,ce.scale),ce.jointRadius=Y.radius),ce.visible=null!==Y}const I=p.joints["index-finger-tip"].position.distanceTo(p.joints["thumb-tip"].position),T=.02,k=.005;p.inputState.pinching&&I>T+k?(p.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!p.inputState.pinching&&I<=T-k&&(p.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==u&&t.gripSpace&&(s=e.getPose(t.gripSpace,n),null!==s&&(u.matrix.fromArray(s.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),s.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(s.linearVelocity)):u.hasLinearVelocity=!1,s.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(s.angularVelocity)):u.hasAngularVelocity=!1));null!==l&&(r=e.getPose(t.targetRaySpace,n),null===r&&null!==s&&(r=s),null!==r&&(l.matrix.fromArray(r.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),r.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(r.linearVelocity)):l.hasLinearVelocity=!1,r.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(r.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(DCe)))}return null!==l&&(l.visible=null!==r),null!==u&&(u.visible=null!==s),null!==p&&(p.visible=null!==o),this}}class LCe extends b_{constructor(t,e,n,r,s,o,l,u,p,v){if((v=void 0!==v?v:B0)!==B0&&v!==IC)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&v===B0&&(n=N0),void 0===n&&v===IC&&(n=xC),super(null,r,s,o,l,u,v,n,p),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=void 0!==l?l:Ju,this.minFilter=void 0!==u?u:Ju,this.flipY=!1,this.generateMipmaps=!1}}class PCe extends TC{constructor(t,e){super();const n=this;let r=null,s=1,o=null,l="local-floor",u=null,p=null,v=null,w=null,I=null,T=null;const k=e.getContextAttributes();let G=null,Y=null;const ce=[],Se=[],Ae=new ed;Ae.layers.enable(1),Ae.viewport=new fl;const Te=new ed;Te.layers.enable(2),Te.viewport=new fl;const Qe=[Ae,Te],mt=new MCe;mt.layers.enable(1),mt.layers.enable(2);let zt=null,it=null;function Tt(In){const Vn=Se.indexOf(In.inputSource);if(-1===Vn)return;const Yi=ce[Vn];void 0!==Yi&&Yi.dispatchEvent({type:In.type,data:In.inputSource})}function ln(){r.removeEventListener("select",Tt),r.removeEventListener("selectstart",Tt),r.removeEventListener("selectend",Tt),r.removeEventListener("squeeze",Tt),r.removeEventListener("squeezestart",Tt),r.removeEventListener("squeezeend",Tt),r.removeEventListener("end",ln),r.removeEventListener("inputsourceschange",Hn);for(let In=0;In<ce.length;In++){const Vn=Se[In];null!==Vn&&(Se[In]=null,ce[In].disconnect(Vn))}zt=null,it=null,t.setRenderTarget(G),I=null,w=null,v=null,r=null,Y=null,Nn.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function Hn(In){for(let Vn=0;Vn<In.removed.length;Vn++){const Yi=In.removed[Vn],Ei=Se.indexOf(Yi);Ei>=0&&(Se[Ei]=null,ce[Ei].dispatchEvent({type:"disconnected",data:Yi}))}for(let Vn=0;Vn<In.added.length;Vn++){const Yi=In.added[Vn];let Ei=Se.indexOf(Yi);if(-1===Ei){for(let fr=0;fr<ce.length;fr++){if(fr>=Se.length){Se.push(Yi),Ei=fr;break}if(null===Se[fr]){Se[fr]=Yi,Ei=fr;break}}if(-1===Ei)break}const rr=ce[Ei];rr&&rr.dispatchEvent({type:"connected",data:Yi})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(In){let Vn=ce[In];return void 0===Vn&&(Vn=new PP,ce[In]=Vn),Vn.getTargetRaySpace()},this.getControllerGrip=function(In){let Vn=ce[In];return void 0===Vn&&(Vn=new PP,ce[In]=Vn),Vn.getGripSpace()},this.getHand=function(In){let Vn=ce[In];return void 0===Vn&&(Vn=new PP,ce[In]=Vn),Vn.getHandSpace()},this.setFramebufferScaleFactor=function(In){s=In,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(In){l=In,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||o},this.setReferenceSpace=function(In){u=In},this.getBaseLayer=function(){return null!==w?w:I},this.getBinding=function(){return v},this.getFrame=function(){return T},this.getSession=function(){return r},this.setSession=function(){var In=tv(function*(Vn){if(r=Vn,null!==r){if(G=t.getRenderTarget(),r.addEventListener("select",Tt),r.addEventListener("selectstart",Tt),r.addEventListener("selectend",Tt),r.addEventListener("squeeze",Tt),r.addEventListener("squeezestart",Tt),r.addEventListener("squeezeend",Tt),r.addEventListener("end",ln),r.addEventListener("inputsourceschange",Hn),!0!==k.xrCompatible&&(yield e.makeXRCompatible()),void 0===r.renderState.layers||!1===t.capabilities.isWebGL2)I=new XRWebGLLayer(r,e,{antialias:void 0!==r.renderState.layers||k.antialias,alpha:k.alpha,depth:k.depth,stencil:k.stencil,framebufferScaleFactor:s}),r.updateRenderState({baseLayer:I}),Y=new W0(I.framebufferWidth,I.framebufferHeight,{format:wg,type:F0,encoding:t.outputEncoding,stencilBuffer:k.stencil});else{let Yi=null,Ei=null,rr=null;k.depth&&(rr=k.stencil?35056:33190,Yi=k.stencil?IC:B0,Ei=k.stencil?xC:N0);const fr={colorFormat:32856,depthFormat:rr,scaleFactor:s};v=new XRWebGLBinding(r,e),w=v.createProjectionLayer(fr),r.updateRenderState({layers:[w]}),Y=new W0(w.textureWidth,w.textureHeight,{format:wg,type:F0,depthTexture:new LCe(w.textureWidth,w.textureHeight,Ei,void 0,void 0,void 0,void 0,void 0,void 0,Yi),stencilBuffer:k.stencil,encoding:t.outputEncoding,samples:k.antialias?4:0}),t.properties.get(Y).__ignoreDepthValues=w.ignoreDepthValues}Y.isXRRenderTarget=!0,this.setFoveation(1),u=null,o=yield r.requestReferenceSpace(l),Nn.setContext(r),Nn.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}});return function(Vn){return In.apply(this,arguments)}}();const ei=new en,Wn=new en;function zn(In,Vn){null===Vn?In.matrixWorld.copy(In.matrix):In.matrixWorld.multiplyMatrices(Vn.matrixWorld,In.matrix),In.matrixWorldInverse.copy(In.matrixWorld).invert()}this.updateCamera=function(In){if(null===r)return;mt.near=Te.near=Ae.near=In.near,mt.far=Te.far=Ae.far=In.far,(zt!==mt.near||it!==mt.far)&&(r.updateRenderState({depthNear:mt.near,depthFar:mt.far}),zt=mt.near,it=mt.far);const Vn=In.parent,Yi=mt.cameras;zn(mt,Vn);for(let rr=0;rr<Yi.length;rr++)zn(Yi[rr],Vn);mt.matrixWorld.decompose(mt.position,mt.quaternion,mt.scale),In.matrix.copy(mt.matrix),In.matrix.decompose(In.position,In.quaternion,In.scale);const Ei=In.children;for(let rr=0,fr=Ei.length;rr<fr;rr++)Ei[rr].updateMatrixWorld(!0);2===Yi.length?function En(In,Vn,Yi){ei.setFromMatrixPosition(Vn.matrixWorld),Wn.setFromMatrixPosition(Yi.matrixWorld);const Ei=ei.distanceTo(Wn),rr=Vn.projectionMatrix.elements,fr=Yi.projectionMatrix.elements,Ss=rr[14]/(rr[10]-1),Di=rr[14]/(rr[10]+1),_s=(rr[9]+1)/rr[5],ps=(rr[9]-1)/rr[5],gs=(rr[8]-1)/rr[0],Pr=(fr[8]+1)/fr[0],Io=Ss*gs,Gi=Ss*Pr,Bi=Ei/(-gs+Pr),xr=Bi*-gs;Vn.matrixWorld.decompose(In.position,In.quaternion,In.scale),In.translateX(xr),In.translateZ(Bi),In.matrixWorld.compose(In.position,In.quaternion,In.scale),In.matrixWorldInverse.copy(In.matrixWorld).invert();const hs=Ss+Bi,Fr=Di+Bi;In.projectionMatrix.makePerspective(Io-xr,Gi+(Ei-xr),_s*Di/Fr*hs,ps*Di/Fr*hs,hs,Fr)}(mt,Ae,Te):mt.projectionMatrix.copy(Ae.projectionMatrix)},this.getCamera=function(){return mt},this.getFoveation=function(){return null!==w?w.fixedFoveation:null!==I?I.fixedFoveation:void 0},this.setFoveation=function(In){null!==w&&(w.fixedFoveation=In),null!==I&&void 0!==I.fixedFoveation&&(I.fixedFoveation=In)};let xn=null;const Nn=new sG;Nn.setAnimationLoop(function Gn(In,Vn){if(p=Vn.getViewerPose(u||o),T=Vn,null!==p){const Yi=p.views;null!==I&&(t.setRenderTargetFramebuffer(Y,I.framebuffer),t.setRenderTarget(Y));let Ei=!1;Yi.length!==mt.cameras.length&&(mt.cameras.length=0,Ei=!0);for(let rr=0;rr<Yi.length;rr++){const fr=Yi[rr];let Ss=null;if(null!==I)Ss=I.getViewport(fr);else{const _s=v.getViewSubImage(w,fr);Ss=_s.viewport,0===rr&&(t.setRenderTargetTextures(Y,_s.colorTexture,w.ignoreDepthValues?void 0:_s.depthStencilTexture),t.setRenderTarget(Y))}let Di=Qe[rr];void 0===Di&&(Di=new ed,Di.layers.enable(rr),Di.viewport=new fl,Qe[rr]=Di),Di.matrix.fromArray(fr.transform.matrix),Di.projectionMatrix.fromArray(fr.projectionMatrix),Di.viewport.set(Ss.x,Ss.y,Ss.width,Ss.height),0===rr&&mt.matrix.copy(Di.matrix),!0===Ei&&mt.cameras.push(Di)}}for(let Yi=0;Yi<ce.length;Yi++){const Ei=Se[Yi],rr=ce[Yi];null!==Ei&&void 0!==rr&&rr.update(Ei,Vn,u||o)}xn&&xn(In,Vn),T=null}),this.setAnimationLoop=function(In){xn=In},this.dispose=function(){}}}function RCe(i,t){function r(G,Y){G.opacity.value=Y.opacity,Y.color&&G.diffuse.value.copy(Y.color),Y.emissive&&G.emissive.value.copy(Y.emissive).multiplyScalar(Y.emissiveIntensity),Y.map&&(G.map.value=Y.map),Y.alphaMap&&(G.alphaMap.value=Y.alphaMap),Y.bumpMap&&(G.bumpMap.value=Y.bumpMap,G.bumpScale.value=Y.bumpScale,1===Y.side&&(G.bumpScale.value*=-1)),Y.displacementMap&&(G.displacementMap.value=Y.displacementMap,G.displacementScale.value=Y.displacementScale,G.displacementBias.value=Y.displacementBias),Y.emissiveMap&&(G.emissiveMap.value=Y.emissiveMap),Y.normalMap&&(G.normalMap.value=Y.normalMap,G.normalScale.value.copy(Y.normalScale),1===Y.side&&G.normalScale.value.negate()),Y.specularMap&&(G.specularMap.value=Y.specularMap),Y.alphaTest>0&&(G.alphaTest.value=Y.alphaTest);const ce=t.get(Y).envMap;if(ce&&(G.envMap.value=ce,G.flipEnvMap.value=ce.isCubeTexture&&!1===ce.isRenderTargetTexture?-1:1,G.reflectivity.value=Y.reflectivity,G.ior.value=Y.ior,G.refractionRatio.value=Y.refractionRatio),Y.lightMap){G.lightMap.value=Y.lightMap;const Te=!0!==i.physicallyCorrectLights?Math.PI:1;G.lightMapIntensity.value=Y.lightMapIntensity*Te}let Se,Ae;Y.aoMap&&(G.aoMap.value=Y.aoMap,G.aoMapIntensity.value=Y.aoMapIntensity),Y.map?Se=Y.map:Y.specularMap?Se=Y.specularMap:Y.displacementMap?Se=Y.displacementMap:Y.normalMap?Se=Y.normalMap:Y.bumpMap?Se=Y.bumpMap:Y.roughnessMap?Se=Y.roughnessMap:Y.metalnessMap?Se=Y.metalnessMap:Y.alphaMap?Se=Y.alphaMap:Y.emissiveMap?Se=Y.emissiveMap:Y.clearcoatMap?Se=Y.clearcoatMap:Y.clearcoatNormalMap?Se=Y.clearcoatNormalMap:Y.clearcoatRoughnessMap?Se=Y.clearcoatRoughnessMap:Y.iridescenceMap?Se=Y.iridescenceMap:Y.iridescenceThicknessMap?Se=Y.iridescenceThicknessMap:Y.specularIntensityMap?Se=Y.specularIntensityMap:Y.specularColorMap?Se=Y.specularColorMap:Y.transmissionMap?Se=Y.transmissionMap:Y.thicknessMap?Se=Y.thicknessMap:Y.sheenColorMap?Se=Y.sheenColorMap:Y.sheenRoughnessMap&&(Se=Y.sheenRoughnessMap),void 0!==Se&&(Se.isWebGLRenderTarget&&(Se=Se.texture),!0===Se.matrixAutoUpdate&&Se.updateMatrix(),G.uvTransform.value.copy(Se.matrix)),Y.aoMap?Ae=Y.aoMap:Y.lightMap&&(Ae=Y.lightMap),void 0!==Ae&&(Ae.isWebGLRenderTarget&&(Ae=Ae.texture),!0===Ae.matrixAutoUpdate&&Ae.updateMatrix(),G.uv2Transform.value.copy(Ae.matrix))}return{refreshFogUniforms:function e(G,Y){G.fogColor.value.copy(Y.color),Y.isFog?(G.fogNear.value=Y.near,G.fogFar.value=Y.far):Y.isFogExp2&&(G.fogDensity.value=Y.density)},refreshMaterialUniforms:function n(G,Y,ce,Se,Ae){Y.isMeshBasicMaterial||Y.isMeshLambertMaterial?r(G,Y):Y.isMeshToonMaterial?(r(G,Y),function v(G,Y){Y.gradientMap&&(G.gradientMap.value=Y.gradientMap)}(G,Y)):Y.isMeshPhongMaterial?(r(G,Y),function p(G,Y){G.specular.value.copy(Y.specular),G.shininess.value=Math.max(Y.shininess,1e-4)}(G,Y)):Y.isMeshStandardMaterial?(r(G,Y),function w(G,Y){G.roughness.value=Y.roughness,G.metalness.value=Y.metalness,Y.roughnessMap&&(G.roughnessMap.value=Y.roughnessMap),Y.metalnessMap&&(G.metalnessMap.value=Y.metalnessMap),t.get(Y).envMap&&(G.envMapIntensity.value=Y.envMapIntensity)}(G,Y),Y.isMeshPhysicalMaterial&&function I(G,Y,ce){G.ior.value=Y.ior,Y.sheen>0&&(G.sheenColor.value.copy(Y.sheenColor).multiplyScalar(Y.sheen),G.sheenRoughness.value=Y.sheenRoughness,Y.sheenColorMap&&(G.sheenColorMap.value=Y.sheenColorMap),Y.sheenRoughnessMap&&(G.sheenRoughnessMap.value=Y.sheenRoughnessMap)),Y.clearcoat>0&&(G.clearcoat.value=Y.clearcoat,G.clearcoatRoughness.value=Y.clearcoatRoughness,Y.clearcoatMap&&(G.clearcoatMap.value=Y.clearcoatMap),Y.clearcoatRoughnessMap&&(G.clearcoatRoughnessMap.value=Y.clearcoatRoughnessMap),Y.clearcoatNormalMap&&(G.clearcoatNormalScale.value.copy(Y.clearcoatNormalScale),G.clearcoatNormalMap.value=Y.clearcoatNormalMap,1===Y.side&&G.clearcoatNormalScale.value.negate())),Y.iridescence>0&&(G.iridescence.value=Y.iridescence,G.iridescenceIOR.value=Y.iridescenceIOR,G.iridescenceThicknessMinimum.value=Y.iridescenceThicknessRange[0],G.iridescenceThicknessMaximum.value=Y.iridescenceThicknessRange[1],Y.iridescenceMap&&(G.iridescenceMap.value=Y.iridescenceMap),Y.iridescenceThicknessMap&&(G.iridescenceThicknessMap.value=Y.iridescenceThicknessMap)),Y.transmission>0&&(G.transmission.value=Y.transmission,G.transmissionSamplerMap.value=ce.texture,G.transmissionSamplerSize.value.set(ce.width,ce.height),Y.transmissionMap&&(G.transmissionMap.value=Y.transmissionMap),G.thickness.value=Y.thickness,Y.thicknessMap&&(G.thicknessMap.value=Y.thicknessMap),G.attenuationDistance.value=Y.attenuationDistance,G.attenuationColor.value.copy(Y.attenuationColor)),G.specularIntensity.value=Y.specularIntensity,G.specularColor.value.copy(Y.specularColor),Y.specularIntensityMap&&(G.specularIntensityMap.value=Y.specularIntensityMap),Y.specularColorMap&&(G.specularColorMap.value=Y.specularColorMap)}(G,Y,Ae)):Y.isMeshMatcapMaterial?(r(G,Y),function T(G,Y){Y.matcap&&(G.matcap.value=Y.matcap)}(G,Y)):Y.isMeshDepthMaterial?r(G,Y):Y.isMeshDistanceMaterial?(r(G,Y),function k(G,Y){G.referencePosition.value.copy(Y.referencePosition),G.nearDistance.value=Y.nearDistance,G.farDistance.value=Y.farDistance}(G,Y)):Y.isMeshNormalMaterial?r(G,Y):Y.isLineBasicMaterial?(function s(G,Y){G.diffuse.value.copy(Y.color),G.opacity.value=Y.opacity}(G,Y),Y.isLineDashedMaterial&&function o(G,Y){G.dashSize.value=Y.dashSize,G.totalSize.value=Y.dashSize+Y.gapSize,G.scale.value=Y.scale}(G,Y)):Y.isPointsMaterial?function l(G,Y,ce,Se){let Ae;G.diffuse.value.copy(Y.color),G.opacity.value=Y.opacity,G.size.value=Y.size*ce,G.scale.value=.5*Se,Y.map&&(G.map.value=Y.map),Y.alphaMap&&(G.alphaMap.value=Y.alphaMap),Y.alphaTest>0&&(G.alphaTest.value=Y.alphaTest),Y.map?Ae=Y.map:Y.alphaMap&&(Ae=Y.alphaMap),void 0!==Ae&&(!0===Ae.matrixAutoUpdate&&Ae.updateMatrix(),G.uvTransform.value.copy(Ae.matrix))}(G,Y,ce,Se):Y.isSpriteMaterial?function u(G,Y){let ce;G.diffuse.value.copy(Y.color),G.opacity.value=Y.opacity,G.rotation.value=Y.rotation,Y.map&&(G.map.value=Y.map),Y.alphaMap&&(G.alphaMap.value=Y.alphaMap),Y.alphaTest>0&&(G.alphaTest.value=Y.alphaTest),Y.map?ce=Y.map:Y.alphaMap&&(ce=Y.alphaMap),void 0!==ce&&(!0===ce.matrixAutoUpdate&&ce.updateMatrix(),G.uvTransform.value.copy(ce.matrix))}(G,Y):Y.isShadowMaterial?(G.color.value.copy(Y.color),G.opacity.value=Y.opacity):Y.isShaderMaterial&&(Y.uniformsNeedUpdate=!1)}}}function kCe(i,t,e,n){let r={},s={},o=[];const l=e.isWebGL2?i.getParameter(35375):0;function T(Se,Ae,Te){const Qe=Se.value;if(void 0===Te[Ae])return Te[Ae]="number"==typeof Qe?Qe:Qe.clone(),!0;if("number"==typeof Qe){if(Te[Ae]!==Qe)return Te[Ae]=Qe,!0}else{const mt=Te[Ae];if(!1===mt.equals(Qe))return mt.copy(Qe),!0}return!1}function G(Se){const Ae=Se.value,Te={boundary:0,storage:0};return"number"==typeof Ae?(Te.boundary=4,Te.storage=4):Ae.isVector2?(Te.boundary=8,Te.storage=8):Ae.isVector3||Ae.isColor?(Te.boundary=16,Te.storage=12):Ae.isVector4?(Te.boundary=16,Te.storage=16):Ae.isMatrix3?(Te.boundary=48,Te.storage=48):Ae.isMatrix4?(Te.boundary=64,Te.storage=64):Ae.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",Ae),Te}function Y(Se){const Ae=Se.target;Ae.removeEventListener("dispose",Y);const Te=o.indexOf(Ae.__bindingPointIndex);o.splice(Te,1),i.deleteBuffer(r[Ae.id]),delete r[Ae.id],delete s[Ae.id]}return{bind:function u(Se,Ae){n.uniformBlockBinding(Se,Ae.program)},update:function p(Se,Ae){let Te=r[Se.id];void 0===Te&&(function k(Se){const Ae=Se.uniforms;let Te=0;let mt=0;for(let zt=0,it=Ae.length;zt<it;zt++){const Tt=Ae[zt],ln=G(Tt);if(Tt.__data=new Float32Array(ln.storage/Float32Array.BYTES_PER_ELEMENT),Tt.__offset=Te,zt>0){mt=Te%16;const Hn=16-mt;0!==mt&&Hn-ln.boundary<0&&(Te+=16-mt,Tt.__offset=Te)}Te+=ln.storage}mt=Te%16,mt>0&&(Te+=16-mt),Se.__size=Te,Se.__cache={}}(Se),Te=function v(Se){const Ae=function w(){for(let Se=0;Se<l;Se++)if(-1===o.indexOf(Se))return o.push(Se),Se;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();Se.__bindingPointIndex=Ae;const Te=i.createBuffer(),Qe=Se.__size,mt=Se.usage;return i.bindBuffer(35345,Te),i.bufferData(35345,Qe,mt),i.bindBuffer(35345,null),i.bindBufferBase(35345,Ae,Te),Te}(Se),r[Se.id]=Te,Se.addEventListener("dispose",Y)),n.updateUBOMapping(Se,Ae.program);const mt=t.render.frame;s[Se.id]!==mt&&(function I(Se){const Te=Se.uniforms,Qe=Se.__cache;i.bindBuffer(35345,r[Se.id]);for(let mt=0,zt=Te.length;mt<zt;mt++){const it=Te[mt];if(!0===T(it,mt,Qe)){const Tt=it.value,ln=it.__offset;"number"==typeof Tt?(it.__data[0]=Tt,i.bufferSubData(35345,ln,it.__data)):(it.value.isMatrix3?(it.__data[0]=it.value.elements[0],it.__data[1]=it.value.elements[1],it.__data[2]=it.value.elements[2],it.__data[3]=it.value.elements[0],it.__data[4]=it.value.elements[3],it.__data[5]=it.value.elements[4],it.__data[6]=it.value.elements[5],it.__data[7]=it.value.elements[0],it.__data[8]=it.value.elements[6],it.__data[9]=it.value.elements[7],it.__data[10]=it.value.elements[8],it.__data[11]=it.value.elements[0]):Tt.toArray(it.__data),i.bufferSubData(35345,ln,it.__data))}}i.bindBuffer(35345,null)}(Se),s[Se.id]=mt)},dispose:function ce(){for(const Se in r)i.deleteBuffer(r[Se]);o=[],r={},s={}}}}function kG(i={}){this.isWebGLRenderer=!0;const t=void 0!==i.canvas?i.canvas:function OCe(){const i=ax("canvas");return i.style.display="block",i}(),e=void 0!==i.context?i.context:null,n=void 0===i.depth||i.depth,r=void 0===i.stencil||i.stencil,s=void 0!==i.antialias&&i.antialias,o=void 0===i.premultipliedAlpha||i.premultipliedAlpha,l=void 0!==i.preserveDrawingBuffer&&i.preserveDrawingBuffer,u=void 0!==i.powerPreference?i.powerPreference:"default",p=void 0!==i.failIfMajorPerformanceCaveat&&i.failIfMajorPerformanceCaveat;let v;v=null!==e?e.getContextAttributes().alpha:void 0!==i.alpha&&i.alpha;let w=null,I=null;const T=[],k=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=z0,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const G=this;let Y=!1,ce=0,Se=0,Ae=null,Te=-1,Qe=null;const mt=new fl,zt=new fl;let it=null,Tt=t.width,ln=t.height,Hn=1,ei=null,Wn=null;const En=new fl(0,0,Tt,ln),zn=new fl(0,0,Tt,ln);let xn=!1;const Gn=new IP;let Nn=!1,In=!1,Vn=null;const Yi=new vo,Ei=new Xi,rr=new en,fr={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ss(){return null===Ae?Hn:1}let ps,gs,Pr,Io,Gi,Bi,xr,hs,Fr,yo,Xs,zs,jl,wl,cn,$t,ui,dr,Ar,Gr,Qs,jr,zi,Ds,Di=e;function _s(rn,Qn){for(let Ci=0;Ci<rn.length;Ci++){const Fi=t.getContext(rn[Ci],Qn);if(null!==Fi)return Fi}return null}try{const rn={alpha:!0,depth:n,stencil:r,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:p};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r146"),t.addEventListener("webglcontextlost",Hs,!1),t.addEventListener("webglcontextrestored",Ls,!1),t.addEventListener("webglcontextcreationerror",Ia,!1),null===Di){const Qn=["webgl2","webgl","experimental-webgl"];if(!0===G.isWebGL1Renderer&&Qn.shift(),Di=_s(Qn,rn),null===Di)throw _s(Qn)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===Di.getShaderPrecisionFormat&&(Di.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(rn){throw console.error("THREE.WebGLRenderer: "+rn.message),rn}function Ys(){ps=new X0e(Di),gs=new H0e(Di,ps,i),ps.init(gs),jr=new TCe(Di,ps,gs),Pr=new SCe(Di,ps,gs),Io=new Z0e,Gi=new pCe,Bi=new ECe(Di,ps,Pr,Gi,gs,jr,Io),xr=new W0e(G),hs=new q0e(G),Fr=new Vye(Di,gs),zi=new V0e(Di,ps,Fr,gs),yo=new Y0e(Di,Fr,Io,zi),Xs=new tbe(Di,yo,Fr,Io),Ar=new ebe(Di,gs,Bi),$t=new G0e(Gi),zs=new fCe(G,xr,hs,ps,gs,zi,$t),jl=new RCe(G,Gi),wl=new mCe,cn=new wCe(ps,gs),dr=new z0e(G,xr,hs,Pr,Xs,v,o),ui=new ICe(G,Xs,gs),Ds=new kCe(Di,Io,gs,Pr),Gr=new U0e(Di,ps,Io,gs),Qs=new K0e(Di,ps,Io,gs),Io.programs=zs.programs,G.capabilities=gs,G.extensions=ps,G.properties=Gi,G.renderLists=wl,G.shadowMap=ui,G.state=Pr,G.info=Io}Ys();const ms=new PCe(G,Di);function Hs(rn){rn.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),Y=!0}function Ls(){console.log("THREE.WebGLRenderer: Context Restored."),Y=!1;const rn=Io.autoReset,Qn=ui.enabled,Ci=ui.autoUpdate,$n=ui.needsUpdate,Fi=ui.type;Ys(),Io.autoReset=rn,ui.enabled=Qn,ui.autoUpdate=Ci,ui.needsUpdate=$n,ui.type=Fi}function Ia(rn){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",rn.statusMessage)}function ac(rn){const Qn=rn.target;Qn.removeEventListener("dispose",ac),function xh(rn){(function Ln(rn){const Qn=Gi.get(rn).programs;void 0!==Qn&&(Qn.forEach(function(Ci){zs.releaseProgram(Ci)}),rn.isShaderMaterial&&zs.releaseShaderCache(rn))})(rn),Gi.remove(rn)}(Qn)}this.xr=ms,this.getContext=function(){return Di},this.getContextAttributes=function(){return Di.getContextAttributes()},this.forceContextLoss=function(){const rn=ps.get("WEBGL_lose_context");rn&&rn.loseContext()},this.forceContextRestore=function(){const rn=ps.get("WEBGL_lose_context");rn&&rn.restoreContext()},this.getPixelRatio=function(){return Hn},this.setPixelRatio=function(rn){void 0!==rn&&(Hn=rn,this.setSize(Tt,ln,!1))},this.getSize=function(rn){return rn.set(Tt,ln)},this.setSize=function(rn,Qn,Ci){ms.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Tt=rn,ln=Qn,t.width=Math.floor(rn*Hn),t.height=Math.floor(Qn*Hn),!1!==Ci&&(t.style.width=rn+"px",t.style.height=Qn+"px"),this.setViewport(0,0,rn,Qn))},this.getDrawingBufferSize=function(rn){return rn.set(Tt*Hn,ln*Hn).floor()},this.setDrawingBufferSize=function(rn,Qn,Ci){Tt=rn,ln=Qn,Hn=Ci,t.width=Math.floor(rn*Ci),t.height=Math.floor(Qn*Ci),this.setViewport(0,0,rn,Qn)},this.getCurrentViewport=function(rn){return rn.copy(mt)},this.getViewport=function(rn){return rn.copy(En)},this.setViewport=function(rn,Qn,Ci,$n){rn.isVector4?En.set(rn.x,rn.y,rn.z,rn.w):En.set(rn,Qn,Ci,$n),Pr.viewport(mt.copy(En).multiplyScalar(Hn).floor())},this.getScissor=function(rn){return rn.copy(zn)},this.setScissor=function(rn,Qn,Ci,$n){rn.isVector4?zn.set(rn.x,rn.y,rn.z,rn.w):zn.set(rn,Qn,Ci,$n),Pr.scissor(zt.copy(zn).multiplyScalar(Hn).floor())},this.getScissorTest=function(){return xn},this.setScissorTest=function(rn){Pr.setScissorTest(xn=rn)},this.setOpaqueSort=function(rn){ei=rn},this.setTransparentSort=function(rn){Wn=rn},this.getClearColor=function(rn){return rn.copy(dr.getClearColor())},this.setClearColor=function(){dr.setClearColor.apply(dr,arguments)},this.getClearAlpha=function(){return dr.getClearAlpha()},this.setClearAlpha=function(){dr.setClearAlpha.apply(dr,arguments)},this.clear=function(rn=!0,Qn=!0,Ci=!0){let $n=0;rn&&($n|=16384),Qn&&($n|=256),Ci&&($n|=1024),Di.clear($n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Hs,!1),t.removeEventListener("webglcontextrestored",Ls,!1),t.removeEventListener("webglcontextcreationerror",Ia,!1),wl.dispose(),cn.dispose(),Gi.dispose(),xr.dispose(),hs.dispose(),Xs.dispose(),zi.dispose(),Ds.dispose(),zs.dispose(),ms.dispose(),ms.removeEventListener("sessionstart",Kr),ms.removeEventListener("sessionend",bs),Vn&&(Vn.dispose(),Vn=null),ja.stop()},this.renderBufferDirect=function(rn,Qn,Ci,$n,Fi,Fs){null===Qn&&(Qn=fr);const ao=Fi.isMesh&&Fi.matrixWorld.determinant()<0,Go=function QTe(rn,Qn,Ci,$n,Fi){!0!==Qn.isScene&&(Qn=fr),Bi.resetTextureUnits();const Fs=Qn.fog,Go=null===Ae?G.outputEncoding:!0===Ae.isXRRenderTarget?Ae.texture.encoding:z0,Oo=($n.isMeshStandardMaterial?hs:xr).get($n.envMap||($n.isMeshStandardMaterial?Qn.environment:null)),$a=!0===$n.vertexColors&&!!Ci.attributes.color&&4===Ci.attributes.color.itemSize,ea=!!$n.normalMap&&!!Ci.attributes.tangent,ma=!!Ci.morphAttributes.position,Qc=!!Ci.morphAttributes.normal,hb=!!Ci.morphAttributes.color,aw=$n.toneMapped?G.toneMapping:0,lw=Ci.morphAttributes.position||Ci.morphAttributes.normal||Ci.morphAttributes.color,mv=void 0!==lw?lw.length:0,qa=Gi.get($n),cw=I.state.lights;!0!==Nn||!0!==In&&rn===Qe||$t.setState($n,rn,rn===Qe&&$n.id===Te);let Ru=!1;$n.version===qa.__version?(qa.needsLights&&qa.lightsStateVersion!==cw.state.version||qa.outputEncoding!==Go||Fi.isInstancedMesh&&!1===qa.instancing||!Fi.isInstancedMesh&&!0===qa.instancing||Fi.isSkinnedMesh&&!1===qa.skinning||!Fi.isSkinnedMesh&&!0===qa.skinning||qa.envMap!==Oo||!0===$n.fog&&qa.fog!==Fs||void 0!==qa.numClippingPlanes&&(qa.numClippingPlanes!==$t.numPlanes||qa.numIntersection!==$t.numIntersection)||qa.vertexAlphas!==$a||qa.vertexTangents!==ea||qa.morphTargets!==ma||qa.morphNormals!==Qc||qa.morphColors!==hb||qa.toneMapping!==aw||!0===gs.isWebGL2&&qa.morphTargetsCount!==mv)&&(Ru=!0):(Ru=!0,qa.__version=$n.version);let Tg=qa.currentProgram;!0===Ru&&(Tg=Eg($n,Qn,Fi));let O_=!1,Rx=!1,jR=!1;const df=Tg.getUniforms(),db=qa.uniforms;if(Pr.useProgram(Tg.program)&&(O_=!0,Rx=!0,jR=!0),$n.id!==Te&&(Te=$n.id,Rx=!0),O_||Qe!==rn){if(df.setValue(Di,"projectionMatrix",rn.projectionMatrix),gs.logarithmicDepthBuffer&&df.setValue(Di,"logDepthBufFC",2/(Math.log(rn.far+1)/Math.LN2)),Qe!==rn&&(Qe=rn,Rx=!0,jR=!0),$n.isShaderMaterial||$n.isMeshPhongMaterial||$n.isMeshToonMaterial||$n.isMeshStandardMaterial||$n.envMap){const zp=df.map.cameraPosition;void 0!==zp&&zp.setValue(Di,rr.setFromMatrixPosition(rn.matrixWorld))}($n.isMeshPhongMaterial||$n.isMeshToonMaterial||$n.isMeshLambertMaterial||$n.isMeshBasicMaterial||$n.isMeshStandardMaterial||$n.isShaderMaterial)&&df.setValue(Di,"isOrthographic",!0===rn.isOrthographicCamera),($n.isMeshPhongMaterial||$n.isMeshToonMaterial||$n.isMeshLambertMaterial||$n.isMeshBasicMaterial||$n.isMeshStandardMaterial||$n.isShaderMaterial||$n.isShadowMaterial||Fi.isSkinnedMesh)&&df.setValue(Di,"viewMatrix",rn.matrixWorldInverse)}if(Fi.isSkinnedMesh){df.setOptional(Di,Fi,"bindMatrix"),df.setOptional(Di,Fi,"bindMatrixInverse");const zp=Fi.skeleton;zp&&(gs.floatVertexTextures?(null===zp.boneTexture&&zp.computeBoneTexture(),df.setValue(Di,"boneTexture",zp.boneTexture,Bi),df.setValue(Di,"boneTextureSize",zp.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const $R=Ci.morphAttributes;if((void 0!==$R.position||void 0!==$R.normal||void 0!==$R.color&&!0===gs.isWebGL2)&&Ar.update(Fi,Ci,$n,Tg),(Rx||qa.receiveShadow!==Fi.receiveShadow)&&(qa.receiveShadow=Fi.receiveShadow,df.setValue(Di,"receiveShadow",Fi.receiveShadow)),$n.isMeshGouraudMaterial&&null!==$n.envMap&&(db.envMap.value=Oo,db.flipEnvMap.value=Oo.isCubeTexture&&!1===Oo.isRenderTargetTexture?-1:1),Rx&&(df.setValue(Di,"toneMappingExposure",G.toneMappingExposure),qa.needsLights&&function JTe(rn,Qn){rn.ambientLightColor.needsUpdate=Qn,rn.lightProbe.needsUpdate=Qn,rn.directionalLights.needsUpdate=Qn,rn.directionalLightShadows.needsUpdate=Qn,rn.pointLights.needsUpdate=Qn,rn.pointLightShadows.needsUpdate=Qn,rn.spotLights.needsUpdate=Qn,rn.spotLightShadows.needsUpdate=Qn,rn.rectAreaLights.needsUpdate=Qn,rn.hemisphereLights.needsUpdate=Qn}(db,jR),Fs&&!0===$n.fog&&jl.refreshFogUniforms(db,Fs),jl.refreshMaterialUniforms(db,$n,Hn,ln,Vn),fE.upload(Di,qa.uniformsList,db,Bi)),$n.isShaderMaterial&&!0===$n.uniformsNeedUpdate&&(fE.upload(Di,qa.uniformsList,db,Bi),$n.uniformsNeedUpdate=!1),$n.isSpriteMaterial&&df.setValue(Di,"center",Fi.center),df.setValue(Di,"modelViewMatrix",Fi.modelViewMatrix),df.setValue(Di,"normalMatrix",Fi.normalMatrix),df.setValue(Di,"modelMatrix",Fi.matrixWorld),$n.isShaderMaterial||$n.isRawShaderMaterial){const zp=$n.uniformsGroups;for(let qR=0,tMe=zp.length;qR<tMe;qR++)if(gs.isWebGL2){const W6=zp[qR];Ds.update(W6,Tg),Ds.bind(W6,Tg)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Tg}(rn,Qn,Ci,$n,Fi);Pr.setMaterial($n,ao);let Oo=Ci.index;const $a=Ci.attributes.position;if(null===Oo){if(void 0===$a||0===$a.count)return}else if(0===Oo.count)return;let ea=1;!0===$n.wireframe&&(Oo=yo.getWireframeAttribute(Ci),ea=2),zi.setup(Fi,$n,Go,Ci,Oo);let ma,Qc=Gr;null!==Oo&&(ma=Fr.get(Oo),Qc=Qs,Qc.setIndex(ma));const hb=null!==Oo?Oo.count:$a.count,aw=Ci.drawRange.start*ea,lw=Ci.drawRange.count*ea,mv=null!==Fs?Fs.start*ea:0,qa=null!==Fs?Fs.count*ea:1/0,cw=Math.max(aw,mv),Ru=Math.min(hb,aw+lw,mv+qa)-1,Tg=Math.max(0,Ru-cw+1);if(0!==Tg){if(Fi.isMesh)!0===$n.wireframe?(Pr.setLineWidth($n.wireframeLinewidth*Ss()),Qc.setMode(1)):Qc.setMode(4);else if(Fi.isLine){let O_=$n.linewidth;void 0===O_&&(O_=1),Pr.setLineWidth(O_*Ss()),Qc.setMode(Fi.isLineSegments?1:Fi.isLineLoop?2:3)}else Fi.isPoints?Qc.setMode(0):Fi.isSprite&&Qc.setMode(4);if(Fi.isInstancedMesh)Qc.renderInstances(cw,Tg,Fi.count);else if(Ci.isInstancedBufferGeometry){const O_=Math.min(Ci.instanceCount,Ci._maxInstanceCount);Qc.renderInstances(cw,Tg,O_)}else Qc.render(cw,Tg)}},this.compile=function(rn,Qn){function Ci($n,Fi,Fs){!0===$n.transparent&&2===$n.side?($n.side=1,$n.needsUpdate=!0,Eg($n,Fi,Fs),$n.side=0,$n.needsUpdate=!0,Eg($n,Fi,Fs),$n.side=2):Eg($n,Fi,Fs)}I=cn.get(rn),I.init(),k.push(I),rn.traverseVisible(function($n){$n.isLight&&$n.layers.test(Qn.layers)&&(I.pushLight($n),$n.castShadow&&I.pushShadow($n))}),I.setupLights(G.physicallyCorrectLights),rn.traverse(function($n){const Fi=$n.material;if(Fi)if(Array.isArray(Fi))for(let Fs=0;Fs<Fi.length;Fs++)Ci(Fi[Fs],rn,$n);else Ci(Fi,rn,$n)}),k.pop(),I=null};let Ii=null;function Kr(){ja.stop()}function bs(){ja.start()}const ja=new sG;function Ih(rn,Qn,Ci,$n){if(!1===rn.visible)return;if(rn.layers.test(Qn.layers))if(rn.isGroup)Ci=rn.renderOrder;else if(rn.isLOD)!0===rn.autoUpdate&&rn.update(Qn);else if(rn.isLight)I.pushLight(rn),rn.castShadow&&I.pushShadow(rn);else if(rn.isSprite){if(!rn.frustumCulled||Gn.intersectsSprite(rn)){$n&&rr.setFromMatrixPosition(rn.matrixWorld).applyMatrix4(Yi);const ao=Xs.update(rn),Go=rn.material;Go.visible&&w.push(rn,ao,Go,Ci,rr.z,null)}}else if((rn.isMesh||rn.isLine||rn.isPoints)&&(rn.isSkinnedMesh&&rn.skeleton.frame!==Io.render.frame&&(rn.skeleton.update(),rn.skeleton.frame=Io.render.frame),!rn.frustumCulled||Gn.intersectsObject(rn))){$n&&rr.setFromMatrixPosition(rn.matrixWorld).applyMatrix4(Yi);const ao=Xs.update(rn),Go=rn.material;if(Array.isArray(Go)){const Oo=ao.groups;for(let $a=0,ea=Oo.length;$a<ea;$a++){const ma=Oo[$a],Qc=Go[ma.materialIndex];Qc&&Qc.visible&&w.push(rn,ao,Qc,Ci,rr.z,ma)}}else Go.visible&&w.push(rn,ao,Go,Ci,rr.z,null)}const Fs=rn.children;for(let ao=0,Go=Fs.length;ao<Go;ao++)Ih(Fs[ao],Qn,Ci,$n)}function Pd(rn,Qn,Ci,$n){const Fi=rn.opaque,Fs=rn.transmissive,ao=rn.transparent;I.setupLightsView(Ci),Fs.length>0&&function ub(rn,Qn,Ci){const $n=gs.isWebGL2;null===Vn&&(Vn=new W0(1,1,{generateMipmaps:!0,type:ps.has("EXT_color_buffer_half_float")?rx:F0,minFilter:1008,samples:$n&&!0===s?4:0})),G.getDrawingBufferSize(Ei),$n?Vn.setSize(Ei.x,Ei.y):Vn.setSize(HS(Ei.x),HS(Ei.y));const Fi=G.getRenderTarget();G.setRenderTarget(Vn),G.clear();const Fs=G.toneMapping;G.toneMapping=0,lc(rn,Qn,Ci),G.toneMapping=Fs,Bi.updateMultisampleRenderTarget(Vn),Bi.updateRenderTargetMipmap(Vn),G.setRenderTarget(Fi)}(Fi,Qn,Ci),$n&&Pr.viewport(mt.copy($n)),Fi.length>0&&lc(Fi,Qn,Ci),Fs.length>0&&lc(Fs,Qn,Ci),ao.length>0&&lc(ao,Qn,Ci),Pr.buffers.depth.setTest(!0),Pr.buffers.depth.setMask(!0),Pr.buffers.color.setMask(!0),Pr.setPolygonOffset(!1)}function lc(rn,Qn,Ci){const $n=!0===Qn.isScene?Qn.overrideMaterial:null;for(let Fi=0,Fs=rn.length;Fi<Fs;Fi++){const ao=rn[Fi],Go=ao.object,Oo=ao.geometry,$a=null===$n?ao.material:$n,ea=ao.group;Go.layers.test(Ci.layers)&&Ey(Go,Qn,Ci,Oo,$a,ea)}}function Ey(rn,Qn,Ci,$n,Fi,Fs){rn.onBeforeRender(G,Qn,Ci,$n,Fi,Fs),rn.modelViewMatrix.multiplyMatrices(Ci.matrixWorldInverse,rn.matrixWorld),rn.normalMatrix.getNormalMatrix(rn.modelViewMatrix),Fi.onBeforeRender(G,Qn,Ci,$n,rn,Fs),!0===Fi.transparent&&2===Fi.side?(Fi.side=1,Fi.needsUpdate=!0,G.renderBufferDirect(Ci,Qn,$n,Fi,rn,Fs),Fi.side=0,Fi.needsUpdate=!0,G.renderBufferDirect(Ci,Qn,$n,Fi,rn,Fs),Fi.side=2):G.renderBufferDirect(Ci,Qn,$n,Fi,rn,Fs),rn.onAfterRender(G,Qn,Ci,$n,Fi,Fs)}function Eg(rn,Qn,Ci){!0!==Qn.isScene&&(Qn=fr);const $n=Gi.get(rn),Fi=I.state.lights,ao=Fi.state.version,Go=zs.getParameters(rn,Fi.state,I.state.shadowsArray,Qn,Ci),Oo=zs.getProgramCacheKey(Go);let $a=$n.programs;$n.environment=rn.isMeshStandardMaterial?Qn.environment:null,$n.fog=Qn.fog,$n.envMap=(rn.isMeshStandardMaterial?hs:xr).get(rn.envMap||$n.environment),void 0===$a&&(rn.addEventListener("dispose",ac),$a=new Map,$n.programs=$a);let ea=$a.get(Oo);if(void 0!==ea){if($n.currentProgram===ea&&$n.lightsStateVersion===ao)return G6(rn,Go),ea}else Go.uniforms=zs.getUniforms(rn),rn.onBuild(Ci,Go,G),rn.onBeforeCompile(Go,G),ea=zs.acquireProgram(Go,Oo),$a.set(Oo,ea),$n.uniforms=Go.uniforms;const ma=$n.uniforms;(!rn.isShaderMaterial&&!rn.isRawShaderMaterial||!0===rn.clipping)&&(ma.clippingPlanes=$t.uniform),G6(rn,Go),$n.needsLights=function eMe(rn){return rn.isMeshLambertMaterial||rn.isMeshToonMaterial||rn.isMeshPhongMaterial||rn.isMeshStandardMaterial||rn.isShadowMaterial||rn.isShaderMaterial&&!0===rn.lights}(rn),$n.lightsStateVersion=ao,$n.needsLights&&(ma.ambientLightColor.value=Fi.state.ambient,ma.lightProbe.value=Fi.state.probe,ma.directionalLights.value=Fi.state.directional,ma.directionalLightShadows.value=Fi.state.directionalShadow,ma.spotLights.value=Fi.state.spot,ma.spotLightShadows.value=Fi.state.spotShadow,ma.rectAreaLights.value=Fi.state.rectArea,ma.ltc_1.value=Fi.state.rectAreaLTC1,ma.ltc_2.value=Fi.state.rectAreaLTC2,ma.pointLights.value=Fi.state.point,ma.pointLightShadows.value=Fi.state.pointShadow,ma.hemisphereLights.value=Fi.state.hemi,ma.directionalShadowMap.value=Fi.state.directionalShadowMap,ma.directionalShadowMatrix.value=Fi.state.directionalShadowMatrix,ma.spotShadowMap.value=Fi.state.spotShadowMap,ma.spotLightMatrix.value=Fi.state.spotLightMatrix,ma.spotLightMap.value=Fi.state.spotLightMap,ma.pointShadowMap.value=Fi.state.pointShadowMap,ma.pointShadowMatrix.value=Fi.state.pointShadowMatrix);const Qc=ea.getUniforms(),hb=fE.seqWithValue(Qc.seq,ma);return $n.currentProgram=ea,$n.uniformsList=hb,ea}function G6(rn,Qn){const Ci=Gi.get(rn);Ci.outputEncoding=Qn.outputEncoding,Ci.instancing=Qn.instancing,Ci.skinning=Qn.skinning,Ci.morphTargets=Qn.morphTargets,Ci.morphNormals=Qn.morphNormals,Ci.morphColors=Qn.morphColors,Ci.morphTargetsCount=Qn.morphTargetsCount,Ci.numClippingPlanes=Qn.numClippingPlanes,Ci.numIntersection=Qn.numClipIntersection,Ci.vertexAlphas=Qn.vertexAlphas,Ci.vertexTangents=Qn.vertexTangents,Ci.toneMapping=Qn.toneMapping}ja.setAnimationLoop(function hr(rn){Ii&&Ii(rn)}),typeof self<"u"&&ja.setContext(self),this.setAnimationLoop=function(rn){Ii=rn,ms.setAnimationLoop(rn),null===rn?ja.stop():ja.start()},ms.addEventListener("sessionstart",Kr),ms.addEventListener("sessionend",bs),this.render=function(rn,Qn){if(void 0===Qn||!0===Qn.isCamera){if(!0!==Y){if(!0===rn.matrixWorldAutoUpdate&&rn.updateMatrixWorld(),null===Qn.parent&&!0===Qn.matrixWorldAutoUpdate&&Qn.updateMatrixWorld(),!0===ms.enabled&&!0===ms.isPresenting&&(!0===ms.cameraAutoUpdate&&ms.updateCamera(Qn),Qn=ms.getCamera()),!0===rn.isScene&&rn.onBeforeRender(G,rn,Qn,Ae),I=cn.get(rn,k.length),I.init(),k.push(I),Yi.multiplyMatrices(Qn.projectionMatrix,Qn.matrixWorldInverse),Gn.setFromProjectionMatrix(Yi),In=this.localClippingEnabled,Nn=$t.init(this.clippingPlanes,In,Qn),w=wl.get(rn,T.length),w.init(),T.push(w),Ih(rn,Qn,0,G.sortObjects),w.finish(),!0===G.sortObjects&&w.sort(ei,Wn),!0===Nn&&$t.beginShadows(),ui.render(I.state.shadowsArray,rn,Qn),!0===Nn&&$t.endShadows(),!0===this.info.autoReset&&this.info.reset(),dr.render(w,rn),I.setupLights(G.physicallyCorrectLights),Qn.isArrayCamera){const $n=Qn.cameras;for(let Fi=0,Fs=$n.length;Fi<Fs;Fi++){const ao=$n[Fi];Pd(w,rn,ao,ao.viewport)}}else Pd(w,rn,Qn);null!==Ae&&(Bi.updateMultisampleRenderTarget(Ae),Bi.updateRenderTargetMipmap(Ae)),!0===rn.isScene&&rn.onAfterRender(G,rn,Qn),zi.resetDefaultState(),Te=-1,Qe=null,k.pop(),I=k.length>0?k[k.length-1]:null,T.pop(),w=T.length>0?T[T.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return ce},this.getActiveMipmapLevel=function(){return Se},this.getRenderTarget=function(){return Ae},this.setRenderTargetTextures=function(rn,Qn,Ci){Gi.get(rn.texture).__webglTexture=Qn,Gi.get(rn.depthTexture).__webglTexture=Ci;const $n=Gi.get(rn);$n.__hasExternalTextures=!0,$n.__hasExternalTextures&&($n.__autoAllocateDepthBuffer=void 0===Ci,$n.__autoAllocateDepthBuffer||!0===ps.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),$n.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(rn,Qn){const Ci=Gi.get(rn);Ci.__webglFramebuffer=Qn,Ci.__useDefaultFramebuffer=void 0===Qn},this.setRenderTarget=function(rn,Qn=0,Ci=0){Ae=rn,ce=Qn,Se=Ci;let $n=!0,Fi=null,Fs=!1,ao=!1;if(rn){const Oo=Gi.get(rn);void 0!==Oo.__useDefaultFramebuffer?(Pr.bindFramebuffer(36160,null),$n=!1):void 0===Oo.__webglFramebuffer?Bi.setupRenderTarget(rn):Oo.__hasExternalTextures&&Bi.rebindTextures(rn,Gi.get(rn.texture).__webglTexture,Gi.get(rn.depthTexture).__webglTexture);const $a=rn.texture;($a.isData3DTexture||$a.isDataArrayTexture||$a.isCompressedArrayTexture)&&(ao=!0);const ea=Gi.get(rn).__webglFramebuffer;rn.isWebGLCubeRenderTarget?(Fi=ea[Qn],Fs=!0):Fi=gs.isWebGL2&&rn.samples>0&&!1===Bi.useMultisampledRTT(rn)?Gi.get(rn).__webglMultisampledFramebuffer:ea,mt.copy(rn.viewport),zt.copy(rn.scissor),it=rn.scissorTest}else mt.copy(En).multiplyScalar(Hn).floor(),zt.copy(zn).multiplyScalar(Hn).floor(),it=xn;if(Pr.bindFramebuffer(36160,Fi)&&gs.drawBuffers&&$n&&Pr.drawBuffers(rn,Fi),Pr.viewport(mt),Pr.scissor(zt),Pr.setScissorTest(it),Fs){const Oo=Gi.get(rn.texture);Di.framebufferTexture2D(36160,36064,34069+Qn,Oo.__webglTexture,Ci)}else if(ao){const Oo=Gi.get(rn.texture);Di.framebufferTextureLayer(36160,36064,Oo.__webglTexture,Ci||0,Qn||0)}Te=-1},this.readRenderTargetPixels=function(rn,Qn,Ci,$n,Fi,Fs,ao){if(!rn||!rn.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Go=Gi.get(rn).__webglFramebuffer;if(rn.isWebGLCubeRenderTarget&&void 0!==ao&&(Go=Go[ao]),Go){Pr.bindFramebuffer(36160,Go);try{const Oo=rn.texture,$a=Oo.format,ea=Oo.type;if($a!==wg&&jr.convert($a)!==Di.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const ma=ea===rx&&(ps.has("EXT_color_buffer_half_float")||gs.isWebGL2&&ps.has("EXT_color_buffer_float"));if(!(ea===F0||jr.convert(ea)===Di.getParameter(35738)||ea===__&&(gs.isWebGL2||ps.has("OES_texture_float")||ps.has("WEBGL_color_buffer_float"))||ma))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Qn>=0&&Qn<=rn.width-$n&&Ci>=0&&Ci<=rn.height-Fi&&Di.readPixels(Qn,Ci,$n,Fi,jr.convert($a),jr.convert(ea),Fs)}finally{const Oo=null!==Ae?Gi.get(Ae).__webglFramebuffer:null;Pr.bindFramebuffer(36160,Oo)}}},this.copyFramebufferToTexture=function(rn,Qn,Ci=0){const $n=Math.pow(2,-Ci),Fi=Math.floor(Qn.image.width*$n),Fs=Math.floor(Qn.image.height*$n);Bi.setTexture2D(Qn,0),Di.copyTexSubImage2D(3553,Ci,0,0,rn.x,rn.y,Fi,Fs),Pr.unbindTexture()},this.copyTextureToTexture=function(rn,Qn,Ci,$n=0){const Fi=Qn.image.width,Fs=Qn.image.height,ao=jr.convert(Ci.format),Go=jr.convert(Ci.type);Bi.setTexture2D(Ci,0),Di.pixelStorei(37440,Ci.flipY),Di.pixelStorei(37441,Ci.premultiplyAlpha),Di.pixelStorei(3317,Ci.unpackAlignment),Qn.isDataTexture?Di.texSubImage2D(3553,$n,rn.x,rn.y,Fi,Fs,ao,Go,Qn.image.data):Qn.isCompressedTexture?Di.compressedTexSubImage2D(3553,$n,rn.x,rn.y,Qn.mipmaps[0].width,Qn.mipmaps[0].height,ao,Qn.mipmaps[0].data):Di.texSubImage2D(3553,$n,rn.x,rn.y,ao,Go,Qn.image),0===$n&&Ci.generateMipmaps&&Di.generateMipmap(3553),Pr.unbindTexture()},this.copyTextureToTexture3D=function(rn,Qn,Ci,$n,Fi=0){if(G.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const Fs=rn.max.x-rn.min.x+1,ao=rn.max.y-rn.min.y+1,Go=rn.max.z-rn.min.z+1,Oo=jr.convert($n.format),$a=jr.convert($n.type);let ea;if($n.isData3DTexture)Bi.setTexture3D($n,0),ea=32879;else{if(!$n.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Bi.setTexture2DArray($n,0),ea=35866}Di.pixelStorei(37440,$n.flipY),Di.pixelStorei(37441,$n.premultiplyAlpha),Di.pixelStorei(3317,$n.unpackAlignment);const ma=Di.getParameter(3314),Qc=Di.getParameter(32878),hb=Di.getParameter(3316),aw=Di.getParameter(3315),lw=Di.getParameter(32877),mv=Ci.isCompressedTexture?Ci.mipmaps[0]:Ci.image;Di.pixelStorei(3314,mv.width),Di.pixelStorei(32878,mv.height),Di.pixelStorei(3316,rn.min.x),Di.pixelStorei(3315,rn.min.y),Di.pixelStorei(32877,rn.min.z),Ci.isDataTexture||Ci.isData3DTexture?Di.texSubImage3D(ea,Fi,Qn.x,Qn.y,Qn.z,Fs,ao,Go,Oo,$a,mv.data):Ci.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Di.compressedTexSubImage3D(ea,Fi,Qn.x,Qn.y,Qn.z,Fs,ao,Go,Oo,mv.data)):Di.texSubImage3D(ea,Fi,Qn.x,Qn.y,Qn.z,Fs,ao,Go,Oo,$a,mv),Di.pixelStorei(3314,ma),Di.pixelStorei(32878,Qc),Di.pixelStorei(3316,hb),Di.pixelStorei(3315,aw),Di.pixelStorei(32877,lw),0===Fi&&$n.generateMipmaps&&Di.generateMipmap(ea),Pr.unbindTexture()},this.initTexture=function(rn){rn.isCubeTexture?Bi.setTextureCube(rn,0):rn.isData3DTexture?Bi.setTexture3D(rn,0):rn.isDataArrayTexture||rn.isCompressedArrayTexture?Bi.setTexture2DArray(rn,0):Bi.setTexture2D(rn,0),Pr.unbindTexture()},this.resetState=function(){ce=0,Se=0,Ae=null,Pr.reset(),zi.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(class FCe extends kG{}).prototype.isWebGL1Renderer=!0;class OG extends Hf{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.backgroundBlurriness=this.backgroundBlurriness),e}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(t){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=t}}class Gf extends X0{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new es(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const KG=new en,ZG=new en,QG=new vo,NP=new KS,_E=new OC;class _x extends Hf{constructor(t=new Ho,e=new Gf){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,n=[0];for(let r=1,s=e.count;r<s;r++)KG.fromBufferAttribute(e,r-1),ZG.fromBufferAttribute(e,r),n[r]=n[r-1],n[r]+=KG.distanceTo(ZG);t.setAttribute("lineDistance",new ls(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){const n=this.geometry,r=this.matrixWorld,s=t.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),_E.copy(n.boundingSphere),_E.applyMatrix4(r),_E.radius+=s,!1===t.ray.intersectsSphere(_E))return;QG.copy(r).invert(),NP.copy(t.ray).applyMatrix4(QG);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,p=new en,v=new en,w=new en,I=new en,T=this.isLineSegments?2:1,k=n.index,Y=n.attributes.position;if(null!==k)for(let Ae=Math.max(0,o.start),Te=Math.min(k.count,o.start+o.count)-1;Ae<Te;Ae+=T){const Qe=k.getX(Ae),mt=k.getX(Ae+1);if(p.fromBufferAttribute(Y,Qe),v.fromBufferAttribute(Y,mt),NP.distanceSqToSegment(p,v,I,w)>u)continue;I.applyMatrix4(this.matrixWorld);const it=t.ray.origin.distanceTo(I);it<t.near||it>t.far||e.push({distance:it,point:w.clone().applyMatrix4(this.matrixWorld),index:Ae,face:null,faceIndex:null,object:this})}else for(let Ae=Math.max(0,o.start),Te=Math.min(Y.count,o.start+o.count)-1;Ae<Te;Ae+=T){if(p.fromBufferAttribute(Y,Ae),v.fromBufferAttribute(Y,Ae+1),NP.distanceSqToSegment(p,v,I,w)>u)continue;I.applyMatrix4(this.matrixWorld);const mt=t.ray.origin.distanceTo(I);mt<t.near||mt>t.far||e.push({distance:mt,point:w.clone().applyMatrix4(this.matrixWorld),index:Ae,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const r=e[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}class fv{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)}getPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}getSpacedPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,r=this.getPoint(0),s=0;e.push(0);for(let o=1;o<=t;o++)n=this.getPoint(o/t),s+=n.distanceTo(r),e.push(s),r=n;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){const n=this.getLengths();let r=0;const s=n.length;let o;o=e||t*n[s-1];let p,l=0,u=s-1;for(;l<=u;)if(r=Math.floor(l+(u-l)/2),p=n[r]-o,p<0)l=r+1;else{if(!(p>0)){u=r;break}u=r-1}if(r=u,n[r]===o)return r/(s-1);const v=n[r];return(r+(o-v)/(n[r+1]-v))/(s-1)}getTangent(t,e){let r=t-1e-4,s=t+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),l=this.getPoint(s),u=e||(o.isVector2?new Xi:new en);return u.copy(l).sub(o).normalize(),u}getTangentAt(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)}computeFrenetFrames(t,e){const n=new en,r=[],s=[],o=[],l=new en,u=new vo;for(let T=0;T<=t;T++)r[T]=this.getTangentAt(T/t,new en);s[0]=new en,o[0]=new en;let p=Number.MAX_VALUE;const v=Math.abs(r[0].x),w=Math.abs(r[0].y),I=Math.abs(r[0].z);v<=p&&(p=v,n.set(1,0,0)),w<=p&&(p=w,n.set(0,1,0)),I<=p&&n.set(0,0,1),l.crossVectors(r[0],n).normalize(),s[0].crossVectors(r[0],l),o[0].crossVectors(r[0],s[0]);for(let T=1;T<=t;T++){if(s[T]=s[T-1].clone(),o[T]=o[T-1].clone(),l.crossVectors(r[T-1],r[T]),l.length()>Number.EPSILON){l.normalize();const k=Math.acos(lu(r[T-1].dot(r[T]),-1,1));s[T].applyMatrix4(u.makeRotationAxis(l,k))}o[T].crossVectors(r[T],s[T])}if(!0===e){let T=Math.acos(lu(s[0].dot(s[t]),-1,1));T/=t,r[0].dot(l.crossVectors(s[0],s[t]))>0&&(T=-T);for(let k=1;k<=t;k++)s[k].applyMatrix4(u.makeRotationAxis(r[k],T*k)),o[k].crossVectors(r[k],s[k])}return{tangents:r,normals:s,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class zP extends fv{constructor(t=0,e=0,n=1,r=1,s=0,o=2*Math.PI,l=!1,u=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=l,this.aRotation=u}getPoint(t,e){const n=e||new Xi,r=2*Math.PI;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(s=o?0:r),!0===this.aClockwise&&!o&&(s===r?s=-r:s-=r);const l=this.aStartAngle+t*s;let u=this.aX+this.xRadius*Math.cos(l),p=this.aY+this.yRadius*Math.sin(l);if(0!==this.aRotation){const v=Math.cos(this.aRotation),w=Math.sin(this.aRotation),I=u-this.aX,T=p-this.aY;u=I*v-T*w+this.aX,p=I*w+T*v+this.aY}return n.set(u,p)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}function VP(){let i=0,t=0,e=0,n=0;function r(s,o,l,u){i=s,t=l,e=-3*s+3*o-2*l-u,n=2*s-2*o+l+u}return{initCatmullRom:function(s,o,l,u,p){r(o,l,p*(l-s),p*(u-o))},initNonuniformCatmullRom:function(s,o,l,u,p,v,w){let I=(o-s)/p-(l-s)/(p+v)+(l-o)/v,T=(l-o)/v-(u-o)/(v+w)+(u-l)/w;I*=v,T*=v,r(o,l,I,T)},calc:function(s){const o=s*s;return i+t*s+e*o+n*(o*s)}}}const wE=new en,UP=new VP,HP=new VP,GP=new VP;function o8(i,t,e,n,r){const s=.5*(n-t),o=.5*(r-e),l=i*i;return(2*e-2*n+s+o)*(i*l)+(-3*e+3*n-2*s-o)*l+s*i+e}function bx(i,t,e,n){return function YCe(i,t){const e=1-i;return e*e*t}(i,t)+function KCe(i,t){return 2*(1-i)*i*t}(i,e)+function ZCe(i,t){return i*i*t}(i,n)}function Cx(i,t,e,n,r){return function QCe(i,t){const e=1-i;return e*e*e*t}(i,t)+function JCe(i,t){const e=1-i;return 3*e*e*i*t}(i,e)+function ewe(i,t){return 3*(1-i)*i*i*t}(i,n)+function twe(i,t){return i*i*i*t}(i,r)}class a8 extends fv{constructor(t=new Xi,e=new Xi,n=new Xi,r=new Xi){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=r}getPoint(t,e=new Xi){const n=e,r=this.v0,s=this.v1,o=this.v2,l=this.v3;return n.set(Cx(t,r.x,s.x,o.x,l.x),Cx(t,r.y,s.y,o.y,l.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class WP extends fv{constructor(t=new Xi,e=new Xi){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new Xi){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e){const n=e||new Xi;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class l8 extends fv{constructor(t=new Xi,e=new Xi,n=new Xi){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new Xi){const n=e,r=this.v0,s=this.v1,o=this.v2;return n.set(bx(t,r.x,s.x,o.x),bx(t,r.y,s.y,o.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class u8 extends fv{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,e=new Xi){const n=e,r=this.points,s=(r.length-1)*t,o=Math.floor(s),l=s-o,u=r[0===o?o:o-1],p=r[o],v=r[o>r.length-2?r.length-1:o+1],w=r[o>r.length-3?r.length-1:o+2];return n.set(o8(l,u.x,p.x,v.x,w.x),o8(l,u.y,p.y,v.y,w.y)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++)this.points.push(t.points[e].clone());return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++)t.points.push(this.points[e].toArray());return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const r=t.points[e];this.points.push((new Xi).fromArray(r))}return this}}var jP=Object.freeze({__proto__:null,ArcCurve:class qCe extends zP{constructor(t,e,n,r,s,o){super(t,e,n,n,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}},CatmullRomCurve3:class XCe extends fv{constructor(t=[],e=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=r}getPoint(t,e=new en){const n=e,r=this.points,s=r.length,o=(s-(this.closed?0:1))*t;let p,v,l=Math.floor(o),u=o-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/s)+1)*s:0===u&&l===s-1&&(l=s-2,u=1),this.closed||l>0?p=r[(l-1)%s]:(wE.subVectors(r[0],r[1]).add(r[0]),p=wE);const w=r[l%s],I=r[(l+1)%s];if(this.closed||l+2<s?v=r[(l+2)%s]:(wE.subVectors(r[s-1],r[s-2]).add(r[s-1]),v=wE),"centripetal"===this.curveType||"chordal"===this.curveType){const T="chordal"===this.curveType?.5:.25;let k=Math.pow(p.distanceToSquared(w),T),G=Math.pow(w.distanceToSquared(I),T),Y=Math.pow(I.distanceToSquared(v),T);G<1e-4&&(G=1),k<1e-4&&(k=G),Y<1e-4&&(Y=G),UP.initNonuniformCatmullRom(p.x,w.x,I.x,v.x,k,G,Y),HP.initNonuniformCatmullRom(p.y,w.y,I.y,v.y,k,G,Y),GP.initNonuniformCatmullRom(p.z,w.z,I.z,v.z,k,G,Y)}else"catmullrom"===this.curveType&&(UP.initCatmullRom(p.x,w.x,I.x,v.x,this.tension),HP.initCatmullRom(p.y,w.y,I.y,v.y,this.tension),GP.initCatmullRom(p.z,w.z,I.z,v.z,this.tension));return n.set(UP.calc(u),HP.calc(u),GP.calc(u)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++)this.points.push(t.points[e].clone());return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++)t.points.push(this.points[e].toArray());return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const r=t.points[e];this.points.push((new en).fromArray(r))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}},CubicBezierCurve:a8,CubicBezierCurve3:class nwe extends fv{constructor(t=new en,e=new en,n=new en,r=new en){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=r}getPoint(t,e=new en){const n=e,r=this.v0,s=this.v1,o=this.v2,l=this.v3;return n.set(Cx(t,r.x,s.x,o.x,l.x),Cx(t,r.y,s.y,o.y,l.y),Cx(t,r.z,s.z,o.z,l.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}},EllipseCurve:zP,LineCurve:WP,LineCurve3:class iwe extends fv{constructor(t=new en,e=new en){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t,e=new en){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},QuadraticBezierCurve:l8,QuadraticBezierCurve3:class c8 extends fv{constructor(t=new en,e=new en,n=new en){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new en){const n=e,r=this.v0,s=this.v1,o=this.v2;return n.set(bx(t,r.x,s.x,o.x),bx(t,r.y,s.y,o.y),bx(t,r.z,s.z,o.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},SplineCurve:u8});class rwe extends fv{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new WP(e,t))}getPoint(t,e){const n=t*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=n){const o=r[s]-n,l=this.curves[s],u=l.getLength();return l.getPointAt(0===u?0:1-o/u,e)}s++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let n=0,r=this.curves.length;n<r;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let n;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],u=o.getPoints(o.isEllipseCurve?2*t:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?t*o.points.length:t);for(let p=0;p<u.length;p++){const v=u[p];n&&n.equals(v)||(e.push(v),n=v)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++)this.curves.push(t.curves[e].clone());return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++)t.curves.push(this.curves[e].toJSON());return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const r=t.curves[e];this.curves.push((new jP[r.type]).fromJSON(r))}return this}}class AE extends rwe{constructor(t){super(),this.type="Path",this.currentPoint=new Xi,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const n=new WP(this.currentPoint.clone(),new Xi(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,n,r){const s=new l8(this.currentPoint.clone(),new Xi(t,e),new Xi(n,r));return this.curves.push(s),this.currentPoint.set(n,r),this}bezierCurveTo(t,e,n,r,s,o){const l=new a8(this.currentPoint.clone(),new Xi(t,e),new Xi(n,r),new Xi(s,o));return this.curves.push(l),this.currentPoint.set(s,o),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),n=new u8(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,n,r,s,o){return this.absarc(t+this.currentPoint.x,e+this.currentPoint.y,n,r,s,o),this}absarc(t,e,n,r,s,o){return this.absellipse(t,e,n,n,r,s,o),this}ellipse(t,e,n,r,s,o,l,u){return this.absellipse(t+this.currentPoint.x,e+this.currentPoint.y,n,r,s,o,l,u),this}absellipse(t,e,n,r,s,o,l,u){const p=new zP(t,e,n,r,s,o,l,u);if(this.curves.length>0){const w=p.getPoint(0);w.equals(this.currentPoint)||this.lineTo(w.x,w.y)}this.curves.push(p);const v=p.getPoint(1);return this.currentPoint.copy(v),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class tw extends AE{constructor(t){super(t),this.uuid=Pp(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let n=0,r=this.holes.length;n<r;n++)e[n]=this.holes[n].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,n=t.holes.length;e<n;e++)this.holes.push(t.holes[e].clone());return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,n=this.holes.length;e<n;e++)t.holes.push(this.holes[e].toJSON());return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const r=t.holes[e];this.holes.push((new AE).fromJSON(r))}return this}}function h8(i,t,e,n,r){let s,o;if(r===function wwe(i,t,e,n){let r=0;for(let s=t,o=e-n;s<e;s+=n)r+=(i[o]-i[s])*(i[s+1]+i[o+1]),o=s;return r}(i,t,e,n)>0)for(s=t;s<e;s+=n)o=p8(s,i[s],i[s+1],o);else for(s=e-n;s>=t;s-=n)o=p8(s,i[s],i[s+1],o);return o&&TE(o,o.next)&&(Ix(o),o=o.next),o}function eb(i,t){if(!i)return i;t||(t=i);let n,e=i;do{if(n=!1,e.steiner||!TE(e,e.next)&&0!==Ac(e.prev,e,e.next))e=e.next;else{if(Ix(e),e=t=e.prev,e===e.next)break;n=!0}}while(n||e!==t);return t}function Ax(i,t,e,n,r,s,o){if(!i)return;!o&&s&&function mwe(i,t,e,n){let r=i;do{0===r.z&&(r.z=ZP(r.x,r.y,t,e,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==i);r.prevZ.nextZ=null,r.prevZ=null,function vwe(i){let t,e,n,r,s,o,l,u,p=1;do{for(e=i,i=null,s=null,o=0;e;){for(o++,n=e,l=0,t=0;t<p&&(l++,n=n.nextZ,n);t++);for(u=p;l>0||u>0&&n;)0!==l&&(0===u||!n||e.z<=n.z)?(r=e,e=e.nextZ,l--):(r=n,n=n.nextZ,u--),s?s.nextZ=r:i=r,r.prevZ=s,s=r;e=n}s.nextZ=null,p*=2}while(o>1)}(r)}(i,n,r,s);let u,p,l=i;for(;i.prev!==i.next;)if(u=i.prev,p=i.next,s?lwe(i,n,r,s):awe(i))t.push(u.i/e|0),t.push(i.i/e|0),t.push(p.i/e|0),Ix(i),i=p.next,l=p.next;else if((i=p)===l){o?1===o?Ax(i=cwe(eb(i),t,e),t,e,n,r,s,2):2===o&&uwe(i,t,e,n,r,s):Ax(eb(i),t,e,n,r,s,1);break}}function awe(i){const t=i.prev,e=i,n=i.next;if(Ac(t,e,n)>=0)return!1;const r=t.x,s=e.x,o=n.x,l=t.y,u=e.y,p=n.y,v=r<s?r<o?r:o:s<o?s:o,w=l<u?l<p?l:p:u<p?u:p,I=r>s?r>o?r:o:s>o?s:o,T=l>u?l>p?l:p:u>p?u:p;let k=n.next;for(;k!==t;){if(k.x>=v&&k.x<=I&&k.y>=w&&k.y<=T&&nw(r,l,s,u,o,p,k.x,k.y)&&Ac(k.prev,k,k.next)>=0)return!1;k=k.next}return!0}function lwe(i,t,e,n){const r=i.prev,s=i,o=i.next;if(Ac(r,s,o)>=0)return!1;const l=r.x,u=s.x,p=o.x,v=r.y,w=s.y,I=o.y,T=l<u?l<p?l:p:u<p?u:p,k=v<w?v<I?v:I:w<I?w:I,G=l>u?l>p?l:p:u>p?u:p,Y=v>w?v>I?v:I:w>I?w:I,ce=ZP(T,k,t,e,n),Se=ZP(G,Y,t,e,n);let Ae=i.prevZ,Te=i.nextZ;for(;Ae&&Ae.z>=ce&&Te&&Te.z<=Se;){if(Ae.x>=T&&Ae.x<=G&&Ae.y>=k&&Ae.y<=Y&&Ae!==r&&Ae!==o&&nw(l,v,u,w,p,I,Ae.x,Ae.y)&&Ac(Ae.prev,Ae,Ae.next)>=0||(Ae=Ae.prevZ,Te.x>=T&&Te.x<=G&&Te.y>=k&&Te.y<=Y&&Te!==r&&Te!==o&&nw(l,v,u,w,p,I,Te.x,Te.y)&&Ac(Te.prev,Te,Te.next)>=0))return!1;Te=Te.nextZ}for(;Ae&&Ae.z>=ce;){if(Ae.x>=T&&Ae.x<=G&&Ae.y>=k&&Ae.y<=Y&&Ae!==r&&Ae!==o&&nw(l,v,u,w,p,I,Ae.x,Ae.y)&&Ac(Ae.prev,Ae,Ae.next)>=0)return!1;Ae=Ae.prevZ}for(;Te&&Te.z<=Se;){if(Te.x>=T&&Te.x<=G&&Te.y>=k&&Te.y<=Y&&Te!==r&&Te!==o&&nw(l,v,u,w,p,I,Te.x,Te.y)&&Ac(Te.prev,Te,Te.next)>=0)return!1;Te=Te.nextZ}return!0}function cwe(i,t,e){let n=i;do{const r=n.prev,s=n.next.next;!TE(r,s)&&d8(r,n,n.next,s)&&xx(r,s)&&xx(s,r)&&(t.push(r.i/e|0),t.push(n.i/e|0),t.push(s.i/e|0),Ix(n),Ix(n.next),n=i=s),n=n.next}while(n!==i);return eb(n)}function uwe(i,t,e,n,r,s){let o=i;do{let l=o.next.next;for(;l!==o.prev;){if(o.i!==l.i&&_we(o,l)){let u=f8(o,l);return o=eb(o,o.next),u=eb(u,u.next),Ax(o,t,e,n,r,s,0),void Ax(u,t,e,n,r,s,0)}l=l.next}o=o.next}while(o!==i)}function dwe(i,t){return i.x-t.x}function fwe(i,t){const e=function pwe(i,t){let r,e=t,n=-1/0;const s=i.x,o=i.y;do{if(o<=e.y&&o>=e.next.y&&e.next.y!==e.y){const I=e.x+(o-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(I<=s&&I>n&&(n=I,r=e.x<e.next.x?e:e.next,I===s))return r}e=e.next}while(e!==t);if(!r)return null;const l=r,u=r.x,p=r.y;let w,v=1/0;e=r;do{s>=e.x&&e.x>=u&&s!==e.x&&nw(o<p?s:n,o,u,p,o<p?n:s,o,e.x,e.y)&&(w=Math.abs(o-e.y)/(s-e.x),xx(e,i)&&(w<v||w===v&&(e.x>r.x||e.x===r.x&&gwe(r,e)))&&(r=e,v=w)),e=e.next}while(e!==l);return r}(i,t);if(!e)return t;const n=f8(e,i);return eb(n,n.next),eb(e,e.next)}function gwe(i,t){return Ac(i.prev,i,t.prev)<0&&Ac(t.next,i,i.next)<0}function ZP(i,t,e,n,r){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-e)*r|0)|i<<8))|i<<4))|i<<2))|i<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function ywe(i){let t=i,e=i;do{(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next}while(t!==i);return e}function nw(i,t,e,n,r,s,o,l){return(r-o)*(t-l)>=(i-o)*(s-l)&&(i-o)*(n-l)>=(e-o)*(t-l)&&(e-o)*(s-l)>=(r-o)*(n-l)}function _we(i,t){return i.next.i!==t.i&&i.prev.i!==t.i&&!function bwe(i,t){let e=i;do{if(e.i!==i.i&&e.next.i!==i.i&&e.i!==t.i&&e.next.i!==t.i&&d8(e,e.next,i,t))return!0;e=e.next}while(e!==i);return!1}(i,t)&&(xx(i,t)&&xx(t,i)&&function Cwe(i,t){let e=i,n=!1;const r=(i.x+t.x)/2,s=(i.y+t.y)/2;do{e.y>s!=e.next.y>s&&e.next.y!==e.y&&r<(e.next.x-e.x)*(s-e.y)/(e.next.y-e.y)+e.x&&(n=!n),e=e.next}while(e!==i);return n}(i,t)&&(Ac(i.prev,i,t.prev)||Ac(i,t.prev,t))||TE(i,t)&&Ac(i.prev,i,i.next)>0&&Ac(t.prev,t,t.next)>0)}function Ac(i,t,e){return(t.y-i.y)*(e.x-t.x)-(t.x-i.x)*(e.y-t.y)}function TE(i,t){return i.x===t.x&&i.y===t.y}function d8(i,t,e,n){const r=DE(Ac(i,t,e)),s=DE(Ac(i,t,n)),o=DE(Ac(e,n,i)),l=DE(Ac(e,n,t));return!!(r!==s&&o!==l||0===r&&ME(i,e,t)||0===s&&ME(i,n,t)||0===o&&ME(e,i,n)||0===l&&ME(e,t,n))}function ME(i,t,e){return t.x<=Math.max(i.x,e.x)&&t.x>=Math.min(i.x,e.x)&&t.y<=Math.max(i.y,e.y)&&t.y>=Math.min(i.y,e.y)}function DE(i){return i>0?1:i<0?-1:0}function xx(i,t){return Ac(i.prev,i,i.next)<0?Ac(i,t,i.next)>=0&&Ac(i,i.prev,t)>=0:Ac(i,t,i.prev)<0||Ac(i,i.next,t)<0}function f8(i,t){const e=new QP(i.i,i.x,i.y),n=new QP(t.i,t.x,t.y),r=i.next,s=t.prev;return i.next=t,t.prev=i,e.next=r,r.prev=e,n.next=e,e.prev=n,s.next=n,n.prev=s,n}function p8(i,t,e,n){const r=new QP(i,t,e);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function Ix(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function QP(i,t,e){this.i=i,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class Ay{static area(t){const e=t.length;let n=0;for(let r=e-1,s=0;s<e;r=s++)n+=t[r].x*t[s].y-t[s].x*t[r].y;return.5*n}static isClockWise(t){return Ay.area(t)<0}static triangulateShape(t,e){const n=[],r=[],s=[];g8(t),m8(n,t);let o=t.length;e.forEach(g8);for(let u=0;u<e.length;u++)r.push(o),o+=e[u].length,m8(n,e[u]);const l=function(i,t,e=2){const n=t&&t.length,r=n?t[0]*e:i.length;let s=h8(i,0,r,e,!0);const o=[];if(!s||s.next===s.prev)return o;let l,u,p,v,w,I,T;if(n&&(s=function hwe(i,t,e,n){const r=[];let s,o,l,u,p;for(s=0,o=t.length;s<o;s++)l=t[s]*n,u=s<o-1?t[s+1]*n:i.length,p=h8(i,l,u,n,!1),p===p.next&&(p.steiner=!0),r.push(ywe(p));for(r.sort(dwe),s=0;s<r.length;s++)e=fwe(r[s],e);return e}(i,t,s,e)),i.length>80*e){l=p=i[0],u=v=i[1];for(let k=e;k<r;k+=e)w=i[k],I=i[k+1],w<l&&(l=w),I<u&&(u=I),w>p&&(p=w),I>v&&(v=I);T=Math.max(p-l,v-u),T=0!==T?32767/T:0}return Ax(s,o,e,l,u,T,0),o}(n,r);for(let u=0;u<l.length;u+=3)s.push(l.slice(u,u+3));return s}}function g8(i){const t=i.length;t>2&&i[t-1].equals(i[0])&&i.pop()}function m8(i,t){for(let e=0;e<t.length;e++)i.push(t[e].x),i.push(t[e].y)}class LE extends Ho{constructor(t=new tw([new Xi(.5,.5),new Xi(-.5,.5),new Xi(-.5,-.5),new Xi(.5,-.5)]),e={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const n=this,r=[],s=[];for(let l=0,u=t.length;l<u;l++)o(t[l]);function o(l){const u=[],p=void 0!==e.curveSegments?e.curveSegments:12,v=void 0!==e.steps?e.steps:1,w=void 0!==e.depth?e.depth:1;let I=void 0===e.bevelEnabled||e.bevelEnabled,T=void 0!==e.bevelThickness?e.bevelThickness:.2,k=void 0!==e.bevelSize?e.bevelSize:T-.1,G=void 0!==e.bevelOffset?e.bevelOffset:0,Y=void 0!==e.bevelSegments?e.bevelSegments:3;const ce=e.extrudePath,Se=void 0!==e.UVGenerator?e.UVGenerator:Awe;let Ae,Qe,mt,zt,it,Te=!1;ce&&(Ae=ce.getSpacedPoints(v),Te=!0,I=!1,Qe=ce.computeFrenetFrames(v,!1),mt=new en,zt=new en,it=new en),I||(Y=0,T=0,k=0,G=0);const Tt=l.extractPoints(p);let ln=Tt.shape;const Hn=Tt.holes;if(!Ay.isClockWise(ln)){ln=ln.reverse();for(let Gi=0,Bi=Hn.length;Gi<Bi;Gi++){const xr=Hn[Gi];Ay.isClockWise(xr)&&(Hn[Gi]=xr.reverse())}}const Wn=Ay.triangulateShape(ln,Hn),En=ln;for(let Gi=0,Bi=Hn.length;Gi<Bi;Gi++)ln=ln.concat(Hn[Gi]);function zn(Gi,Bi,xr){return Bi||console.error("THREE.ExtrudeGeometry: vec does not exist"),Bi.clone().multiplyScalar(xr).add(Gi)}const xn=ln.length,Gn=Wn.length;function Nn(Gi,Bi,xr){let hs,Fr,yo;const Xs=Gi.x-Bi.x,zs=Gi.y-Bi.y,jl=xr.x-Gi.x,wl=xr.y-Gi.y,cn=Xs*Xs+zs*zs;if(Math.abs(Xs*wl-zs*jl)>Number.EPSILON){const ui=Math.sqrt(cn),dr=Math.sqrt(jl*jl+wl*wl),Ar=Bi.x-zs/ui,Gr=Bi.y+Xs/ui,zi=((xr.x-wl/dr-Ar)*wl-(xr.y+jl/dr-Gr)*jl)/(Xs*wl-zs*jl);hs=Ar+Xs*zi-Gi.x,Fr=Gr+zs*zi-Gi.y;const Ds=hs*hs+Fr*Fr;if(Ds<=2)return new Xi(hs,Fr);yo=Math.sqrt(Ds/2)}else{let ui=!1;Xs>Number.EPSILON?jl>Number.EPSILON&&(ui=!0):Xs<-Number.EPSILON?jl<-Number.EPSILON&&(ui=!0):Math.sign(zs)===Math.sign(wl)&&(ui=!0),ui?(hs=-zs,Fr=Xs,yo=Math.sqrt(cn)):(hs=Xs,Fr=zs,yo=Math.sqrt(cn/2))}return new Xi(hs/yo,Fr/yo)}const In=[];for(let Gi=0,Bi=En.length,xr=Bi-1,hs=Gi+1;Gi<Bi;Gi++,xr++,hs++)xr===Bi&&(xr=0),hs===Bi&&(hs=0),In[Gi]=Nn(En[Gi],En[xr],En[hs]);const Vn=[];let Yi,Ei=In.concat();for(let Gi=0,Bi=Hn.length;Gi<Bi;Gi++){const xr=Hn[Gi];Yi=[];for(let hs=0,Fr=xr.length,yo=Fr-1,Xs=hs+1;hs<Fr;hs++,yo++,Xs++)yo===Fr&&(yo=0),Xs===Fr&&(Xs=0),Yi[hs]=Nn(xr[hs],xr[yo],xr[Xs]);Vn.push(Yi),Ei=Ei.concat(Yi)}for(let Gi=0;Gi<Y;Gi++){const Bi=Gi/Y,xr=T*Math.cos(Bi*Math.PI/2),hs=k*Math.sin(Bi*Math.PI/2)+G;for(let Fr=0,yo=En.length;Fr<yo;Fr++){const Xs=zn(En[Fr],In[Fr],hs);_s(Xs.x,Xs.y,-xr)}for(let Fr=0,yo=Hn.length;Fr<yo;Fr++){const Xs=Hn[Fr];Yi=Vn[Fr];for(let zs=0,jl=Xs.length;zs<jl;zs++){const wl=zn(Xs[zs],Yi[zs],hs);_s(wl.x,wl.y,-xr)}}}const rr=k+G;for(let Gi=0;Gi<xn;Gi++){const Bi=I?zn(ln[Gi],Ei[Gi],rr):ln[Gi];Te?(zt.copy(Qe.normals[0]).multiplyScalar(Bi.x),mt.copy(Qe.binormals[0]).multiplyScalar(Bi.y),it.copy(Ae[0]).add(zt).add(mt),_s(it.x,it.y,it.z)):_s(Bi.x,Bi.y,0)}for(let Gi=1;Gi<=v;Gi++)for(let Bi=0;Bi<xn;Bi++){const xr=I?zn(ln[Bi],Ei[Bi],rr):ln[Bi];Te?(zt.copy(Qe.normals[Gi]).multiplyScalar(xr.x),mt.copy(Qe.binormals[Gi]).multiplyScalar(xr.y),it.copy(Ae[Gi]).add(zt).add(mt),_s(it.x,it.y,it.z)):_s(xr.x,xr.y,w/v*Gi)}for(let Gi=Y-1;Gi>=0;Gi--){const Bi=Gi/Y,xr=T*Math.cos(Bi*Math.PI/2),hs=k*Math.sin(Bi*Math.PI/2)+G;for(let Fr=0,yo=En.length;Fr<yo;Fr++){const Xs=zn(En[Fr],In[Fr],hs);_s(Xs.x,Xs.y,w+xr)}for(let Fr=0,yo=Hn.length;Fr<yo;Fr++){const Xs=Hn[Fr];Yi=Vn[Fr];for(let zs=0,jl=Xs.length;zs<jl;zs++){const wl=zn(Xs[zs],Yi[zs],hs);Te?_s(wl.x,wl.y+Ae[v-1].y,Ae[v-1].x+xr):_s(wl.x,wl.y,w+xr)}}}function Di(Gi,Bi){let xr=Gi.length;for(;--xr>=0;){const hs=xr;let Fr=xr-1;Fr<0&&(Fr=Gi.length-1);for(let yo=0,Xs=v+2*Y;yo<Xs;yo++){const zs=xn*yo,jl=xn*(yo+1);gs(Bi+hs+zs,Bi+Fr+zs,Bi+Fr+jl,Bi+hs+jl)}}}function _s(Gi,Bi,xr){u.push(Gi),u.push(Bi),u.push(xr)}function ps(Gi,Bi,xr){Pr(Gi),Pr(Bi),Pr(xr);const hs=r.length/3,Fr=Se.generateTopUV(n,r,hs-3,hs-2,hs-1);Io(Fr[0]),Io(Fr[1]),Io(Fr[2])}function gs(Gi,Bi,xr,hs){Pr(Gi),Pr(Bi),Pr(hs),Pr(Bi),Pr(xr),Pr(hs);const Fr=r.length/3,yo=Se.generateSideWallUV(n,r,Fr-6,Fr-3,Fr-2,Fr-1);Io(yo[0]),Io(yo[1]),Io(yo[3]),Io(yo[1]),Io(yo[2]),Io(yo[3])}function Pr(Gi){r.push(u[3*Gi+0]),r.push(u[3*Gi+1]),r.push(u[3*Gi+2])}function Io(Gi){s.push(Gi.x),s.push(Gi.y)}(function fr(){const Gi=r.length/3;if(I){let Bi=0,xr=xn*Bi;for(let hs=0;hs<Gn;hs++){const Fr=Wn[hs];ps(Fr[2]+xr,Fr[1]+xr,Fr[0]+xr)}Bi=v+2*Y,xr=xn*Bi;for(let hs=0;hs<Gn;hs++){const Fr=Wn[hs];ps(Fr[0]+xr,Fr[1]+xr,Fr[2]+xr)}}else{for(let Bi=0;Bi<Gn;Bi++){const xr=Wn[Bi];ps(xr[2],xr[1],xr[0])}for(let Bi=0;Bi<Gn;Bi++){const xr=Wn[Bi];ps(xr[0]+xn*v,xr[1]+xn*v,xr[2]+xn*v)}}n.addGroup(Gi,r.length/3-Gi,0)})(),function Ss(){const Gi=r.length/3;let Bi=0;Di(En,Bi),Bi+=En.length;for(let xr=0,hs=Hn.length;xr<hs;xr++){const Fr=Hn[xr];Di(Fr,Bi),Bi+=Fr.length}n.addGroup(Gi,r.length/3-Gi,1)}()}this.setAttribute("position",new ls(r,3)),this.setAttribute("uv",new ls(s,2)),this.computeVertexNormals()}toJSON(){const t=super.toJSON();return function xwe(i,t,e){if(e.shapes=[],Array.isArray(i))for(let n=0,r=i.length;n<r;n++)e.shapes.push(i[n].uuid);else e.shapes.push(i.uuid);return e.options=Object.assign({},t),void 0!==t.extrudePath&&(e.options.extrudePath=t.extrudePath.toJSON()),e}(this.parameters.shapes,this.parameters.options,t)}static fromJSON(t,e){const n=[];for(let s=0,o=t.shapes.length;s<o;s++)n.push(e[t.shapes[s]]);const r=t.options.extrudePath;return void 0!==r&&(t.options.extrudePath=(new jP[r.type]).fromJSON(r)),new LE(n,t.options)}}const Awe={generateTopUV:function(i,t,e,n,r){const l=t[3*n],u=t[3*n+1],p=t[3*r],v=t[3*r+1];return[new Xi(t[3*e],t[3*e+1]),new Xi(l,u),new Xi(p,v)]},generateSideWallUV:function(i,t,e,n,r,s){const o=t[3*e],l=t[3*e+1],u=t[3*e+2],p=t[3*n],v=t[3*n+1],w=t[3*n+2],I=t[3*r],T=t[3*r+1],k=t[3*r+2],G=t[3*s],Y=t[3*s+1],ce=t[3*s+2];return Math.abs(l-v)<Math.abs(o-p)?[new Xi(o,1-u),new Xi(p,1-w),new Xi(I,1-k),new Xi(G,1-ce)]:[new Xi(l,1-u),new Xi(v,1-w),new Xi(T,1-k),new Xi(Y,1-ce)]}};class kE extends X0{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new es(16777215),this.specular=new es(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new es(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Xi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}function xg(i,t,e){return oR(i)?new i.constructor(i.subarray(t,void 0!==e?e:i.length)):i.slice(t,e)}function tb(i,t,e){return!i||!e&&i.constructor===t?i:"number"==typeof t.BYTES_PER_ELEMENT?new t(i):Array.prototype.slice.call(i)}function oR(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}class OE{constructor(t,e,n,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,r=e[n],s=e[n-1];e:{t:{let o;n:{i:if(!(t<r)){for(let l=n+2;;){if(void 0===r){if(t<s)break i;return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===l)break;if(s=r,r=e[++n],t<r)break t}o=e.length;break n}if(t>=s)break e;{const l=e[1];t<l&&(n=2,s=l);for(let u=n-2;;){if(void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(n===u)break;if(r=s,s=e[--n-1],t>=s)break t}o=n,n=0}}for(;n<o;){const l=n+o>>>1;t<e[l]?o=l:n=l+1}if(r=e[n],s=e[n-1],void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,r)}return this.interpolate_(n,s,t,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=t*r;for(let o=0;o!==r;++o)e[o]=n[s+o];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Bwe extends OE{constructor(t,e,n,r){super(t,e,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(t,e,n){const r=this.parameterPositions;let s=t-2,o=t+1,l=r[s],u=r[o];if(void 0===l)switch(this.getSettings_().endingStart){case 2401:s=t,l=2*e-n;break;case 2402:s=r.length-2,l=e+r[s]-r[s+1];break;default:s=t,l=n}if(void 0===u)switch(this.getSettings_().endingEnd){case 2401:o=t,u=2*n-e;break;case 2402:o=1,u=n+r[1]-r[0];break;default:o=t-1,u=e}const p=.5*(n-e),v=this.valueSize;this._weightPrev=p/(e-l),this._weightNext=p/(u-n),this._offsetPrev=s*v,this._offsetNext=o*v}interpolate_(t,e,n,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,u=t*l,p=u-l,v=this._offsetPrev,w=this._offsetNext,I=this._weightPrev,T=this._weightNext,k=(n-e)/(r-e),G=k*k,Y=G*k,ce=-I*Y+2*I*G-I*k,Se=(1+I)*Y+(-1.5-2*I)*G+(-.5+I)*k+1,Ae=(-1-T)*Y+(1.5+T)*G+.5*k,Te=T*Y-T*G;for(let Qe=0;Qe!==l;++Qe)s[Qe]=ce*o[v+Qe]+Se*o[p+Qe]+Ae*o[u+Qe]+Te*o[w+Qe];return s}}class b8 extends OE{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,u=t*l,p=u-l,v=(n-e)/(r-e),w=1-v;for(let I=0;I!==l;++I)s[I]=o[p+I]*w+o[u+I]*v;return s}}class zwe extends OE{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t){return this.copySampleValue_(t-1)}}class pv{constructor(t,e,n,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=tb(e,this.TimeBufferType),this.values=tb(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:tb(t.times,Array),values:tb(t.values,Array)};const r=t.getInterpolation();r!==t.DefaultInterpolation&&(n.interpolation=r)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new zwe(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new b8(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new Bwe(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case 2300:e=this.InterpolantFactoryMethodDiscrete;break;case 2301:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]*=t}return this}trim(t,e){const n=this.times,r=n.length;let s=0,o=r-1;for(;s!==r&&n[s]<t;)++s;for(;-1!==o&&n[o]>e;)--o;if(++o,0!==s||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const l=this.getValueSize();this.times=xg(n,s,o),this.values=xg(this.values,s*l,o*l)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,r=this.values,s=n.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let o=null;for(let l=0;l!==s;l++){const u=n[l];if("number"==typeof u&&isNaN(u)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,l,u),t=!1;break}if(null!==o&&o>u){console.error("THREE.KeyframeTrack: Out of order keys.",this,l,u,o),t=!1;break}o=u}if(void 0!==r&&oR(r))for(let l=0,u=r.length;l!==u;++l){const p=r[l];if(isNaN(p)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,p),t=!1;break}}return t}optimize(){const t=xg(this.times),e=xg(this.values),n=this.getValueSize(),r=2302===this.getInterpolation(),s=t.length-1;let o=1;for(let l=1;l<s;++l){let u=!1;const p=t[l];if(p!==t[l+1]&&(1!==l||p!==t[0]))if(r)u=!0;else{const w=l*n,I=w-n,T=w+n;for(let k=0;k!==n;++k){const G=e[w+k];if(G!==e[I+k]||G!==e[T+k]){u=!0;break}}}if(u){if(l!==o){t[o]=t[l];const w=l*n,I=o*n;for(let T=0;T!==n;++T)e[I+T]=e[w+T]}++o}}if(s>0){t[o]=t[s];for(let l=s*n,u=o*n,p=0;p!==n;++p)e[u+p]=e[l+p];++o}return o!==t.length?(this.times=xg(t,0,o),this.values=xg(e,0,o*n)):(this.times=t,this.values=e),this}clone(){const t=xg(this.times,0),e=xg(this.values,0),r=new(0,this.constructor)(this.name,t,e);return r.createInterpolant=this.createInterpolant,r}}pv.prototype.TimeBufferType=Float32Array,pv.prototype.ValueBufferType=Float32Array,pv.prototype.DefaultInterpolation=2301;class iw extends pv{}iw.prototype.ValueTypeName="bool",iw.prototype.ValueBufferType=Array,iw.prototype.DefaultInterpolation=2300,iw.prototype.InterpolantFactoryMethodLinear=void 0,iw.prototype.InterpolantFactoryMethodSmooth=void 0;(class C8 extends pv{}).prototype.ValueTypeName="color";(class FE extends pv{}).prototype.ValueTypeName="number";class Vwe extends OE{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,u=(n-e)/(r-e);let p=t*l;for(let v=p+l;p!==v;p+=4)kp.slerpFlat(s,0,o,p-l,o,p,u);return s}}class Sx extends pv{InterpolantFactoryMethodLinear(t){return new Vwe(this.times,this.values,this.getValueSize(),t)}}Sx.prototype.ValueTypeName="quaternion",Sx.prototype.DefaultInterpolation=2301,Sx.prototype.InterpolantFactoryMethodSmooth=void 0;class rw extends pv{}rw.prototype.ValueTypeName="string",rw.prototype.ValueBufferType=Array,rw.prototype.DefaultInterpolation=2300,rw.prototype.InterpolantFactoryMethodLinear=void 0,rw.prototype.InterpolantFactoryMethodSmooth=void 0;(class NE extends pv{}).prototype.ValueTypeName="vector";const sw={enabled:!1,files:{},add:function(i,t){!1!==this.enabled&&(this.files[i]=t)},get:function(i){if(!1!==this.enabled)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class w8{constructor(t,e,n){const r=this;let u,s=!1,o=0,l=0;const p=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(v){l++,!1===s&&void 0!==r.onStart&&r.onStart(v,o,l),s=!0},this.itemEnd=function(v){o++,void 0!==r.onProgress&&r.onProgress(v,o,l),o===l&&(s=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(v){void 0!==r.onError&&r.onError(v)},this.resolveURL=function(v){return u?u(v):v},this.setURLModifier=function(v){return u=v,this},this.addHandler=function(v,w){return p.push(v,w),this},this.removeHandler=function(v){const w=p.indexOf(v);return-1!==w&&p.splice(w,2),this},this.getHandler=function(v){for(let w=0,I=p.length;w<I;w+=2){const T=p[w],k=p[w+1];if(T.global&&(T.lastIndex=0),T.test(v))return k}return null}}}const Gwe=new w8;class A8{constructor(t){this.manager=void 0!==t?t:Gwe,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const n=this;return new Promise(function(r,s){n.load(t,r,e,s)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}const xy={};class Wwe extends Error{constructor(t,e){super(t),this.response=e}}class Iy extends A8{constructor(t){super(t)}load(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const s=sw.get(t);if(void 0!==s)return this.manager.itemStart(t),setTimeout(()=>{e&&e(s),this.manager.itemEnd(t)},0),s;if(void 0!==xy[t])return void xy[t].push({onLoad:e,onProgress:n,onError:r});xy[t]=[],xy[t].push({onLoad:e,onProgress:n,onError:r});const o=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),l=this.mimeType,u=this.responseType;fetch(o).then(p=>{if(200===p.status||0===p.status){if(0===p.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===p.body||void 0===p.body.getReader)return p;const v=xy[t],w=p.body.getReader(),I=p.headers.get("Content-Length"),T=I?parseInt(I):0,k=0!==T;let G=0;const Y=new ReadableStream({start(ce){!function Se(){w.read().then(({done:Ae,value:Te})=>{if(Ae)ce.close();else{G+=Te.byteLength;const Qe=new ProgressEvent("progress",{lengthComputable:k,loaded:G,total:T});for(let mt=0,zt=v.length;mt<zt;mt++){const it=v[mt];it.onProgress&&it.onProgress(Qe)}ce.enqueue(Te),Se()}})}()}});return new Response(Y)}throw new Wwe(`fetch for "${p.url}" responded with ${p.status}: ${p.statusText}`,p)}).then(p=>{switch(u){case"arraybuffer":return p.arrayBuffer();case"blob":return p.blob();case"document":return p.text().then(v=>(new DOMParser).parseFromString(v,l));case"json":return p.json();default:if(void 0===l)return p.text();{const w=/charset="?([^;"\s]*)"?/i.exec(l),I=w&&w[1]?w[1].toLowerCase():void 0,T=new TextDecoder(I);return p.arrayBuffer().then(k=>T.decode(k))}}}).then(p=>{sw.add(t,p);const v=xy[t];delete xy[t];for(let w=0,I=v.length;w<I;w++){const T=v[w];T.onLoad&&T.onLoad(p)}}).catch(p=>{const v=xy[t];if(void 0===v)throw this.manager.itemError(t),p;delete xy[t];for(let w=0,I=v.length;w<I;w++){const T=v[w];T.onError&&T.onError(p)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class cR extends Hf{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new es(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}const uR=new vo,x8=new en,I8=new en;class S8{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Xi(512,512),this.map=null,this.mapPass=null,this.matrix=new vo,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new IP,this._frameExtents=new Xi(1,1),this._viewportCount=1,this._viewports=[new fl(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;x8.setFromMatrixPosition(t.matrixWorld),e.position.copy(x8),I8.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(I8),e.updateMatrixWorld(),uR.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(uR),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(uR)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class $we extends S8{constructor(){super(new ed(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const e=this.camera,n=2*sx*t.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=t.distance||e.far;(n!==e.fov||r!==e.aspect||s!==e.far)&&(e.fov=n,e.aspect=r,e.far=s,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class E8 extends cR{constructor(t,e,n=0,r=Math.PI/3,s=0,o=1){super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Hf.DefaultUp),this.updateMatrix(),this.target=new Hf,this.distance=n,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new $we}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class Ywe extends S8{constructor(){super(new SP(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class M8 extends cR{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Hf.DefaultUp),this.updateMatrix(),this.target=new Hf,this.shadow=new Ywe}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class D8 extends cR{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}}const fR="\\[\\]\\.:\\/",oAe=new RegExp("["+fR+"]","g"),pR="[^"+fR+"]",aAe="[^"+fR.replace("\\.","")+"]",dAe=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",pR)+/(WCOD+)?/.source.replace("WCOD",aAe)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",pR)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",pR)+"$"),fAe=["material","materials","bones","map"];class pAe{constructor(t,e,n){const r=n||Wl.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}getValue(t,e){this.bind();const r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=n.length;r!==s;++r)n[r].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}let Wl=(()=>{class i{constructor(e,n,r){this.path=n,this.parsedPath=r||i.parseTrackName(n),this.node=i.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,r){return e&&e.isAnimationObjectGroup?new i.Composite(e,n,r):new i(e,n,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(oAe,"")}static parseTrackName(e){const n=dAe.exec(e);if(null===n)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==s&&-1!==s){const o=r.nodeName.substring(s+1);-1!==fAe.indexOf(o)&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,n){if(void 0===n||""===n||"."===n||-1===n||n===e.name||n===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(n);if(void 0!==r)return r}if(e.children){const r=function(o){for(let l=0;l<o.length;l++){const u=o[l];if(u.name===n||u.uuid===n)return u;const p=r(u.children);if(p)return p}return null},s=r(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)e[n++]=r[s]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,r=n.objectName,s=n.propertyName;let o=n.propertyIndex;if(e||(e=i.findNode(this.rootNode,n.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(r){let v=n.objectIndex;switch(r){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let w=0;w<e.length;w++)if(e[w].name===v){v=w;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[r]}if(void 0!==v){if(void 0===e[v])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[v]}}const l=e[s];if(void 0===l)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n.nodeName+"."+s+" but it wasn't found.",e);let u=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?u=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(u=this.Versioning.MatrixWorldNeedsUpdate);let p=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===s){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[o]&&(o=e.morphTargetDictionary[o])}p=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=o}else void 0!==l.fromArray&&void 0!==l.toArray?(p=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(p=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=s;this.getValue=this.GetterByBindingType[p],this.setValue=this.SetterByBindingTypeAndVersioning[p][u]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return i.Composite=pAe,i})();Wl.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Wl.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Wl.prototype.GetterByBindingType=[Wl.prototype._getValue_direct,Wl.prototype._getValue_array,Wl.prototype._getValue_arrayElement,Wl.prototype._getValue_toArray],Wl.prototype.SetterByBindingTypeAndVersioning=[[Wl.prototype._setValue_direct,Wl.prototype._setValue_direct_setNeedsUpdate,Wl.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Wl.prototype._setValue_array,Wl.prototype._setValue_array_setNeedsUpdate,Wl.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Wl.prototype._setValue_arrayElement,Wl.prototype._setValue_arrayElement_setNeedsUpdate,Wl.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Wl.prototype._setValue_fromArray,Wl.prototype._setValue_fromArray_setNeedsUpdate,Wl.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1);class _Ae{constructor(){this.type="ShapePath",this.color=new es,this.subPaths=[],this.currentPath=null}moveTo(t,e){return this.currentPath=new AE,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}lineTo(t,e){return this.currentPath.lineTo(t,e),this}quadraticCurveTo(t,e,n,r){return this.currentPath.quadraticCurveTo(t,e,n,r),this}bezierCurveTo(t,e,n,r,s,o){return this.currentPath.bezierCurveTo(t,e,n,r,s,o),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t){function n(ce,Se){const Ae=Se.length;let Te=!1;for(let Qe=Ae-1,mt=0;mt<Ae;Qe=mt++){let zt=Se[Qe],it=Se[mt],Tt=it.x-zt.x,ln=it.y-zt.y;if(Math.abs(ln)>Number.EPSILON){if(ln<0&&(zt=Se[mt],Tt=-Tt,it=Se[Qe],ln=-ln),ce.y<zt.y||ce.y>it.y)continue;if(ce.y===zt.y){if(ce.x===zt.x)return!0}else{const Hn=ln*(ce.x-zt.x)-Tt*(ce.y-zt.y);if(0===Hn)return!0;if(Hn<0)continue;Te=!Te}}else{if(ce.y!==zt.y)continue;if(it.x<=ce.x&&ce.x<=zt.x||zt.x<=ce.x&&ce.x<=it.x)return!0}}return Te}const r=Ay.isClockWise,s=this.subPaths;if(0===s.length)return[];let o,l,u;const p=[];if(1===s.length)return l=s[0],u=new tw,u.curves=l.curves,p.push(u),p;let v=!r(s[0].getPoints());v=t?!v:v;const w=[],I=[];let G,Y,T=[],k=0;I[k]=void 0,T[k]=[];for(let ce=0,Se=s.length;ce<Se;ce++)l=s[ce],G=l.getPoints(),o=r(G),o=t?!o:o,o?(!v&&I[k]&&k++,I[k]={s:new tw,p:G},I[k].s.curves=l.curves,v&&k++,T[k]=[]):T[k].push({h:l,p:G[0]});if(!I[0])return function e(ce){const Se=[];for(let Ae=0,Te=ce.length;Ae<Te;Ae++){const Qe=ce[Ae],mt=new tw;mt.curves=Qe.curves,Se.push(mt)}return Se}(s);if(I.length>1){let ce=!1,Se=0;for(let Ae=0,Te=I.length;Ae<Te;Ae++)w[Ae]=[];for(let Ae=0,Te=I.length;Ae<Te;Ae++){const Qe=T[Ae];for(let mt=0;mt<Qe.length;mt++){const zt=Qe[mt];let it=!0;for(let Tt=0;Tt<I.length;Tt++)n(zt.p,I[Tt].p)&&(Ae!==Tt&&Se++,it?(it=!1,w[Tt].push(zt)):ce=!0);it&&w[Ae].push(zt)}}Se>0&&!1===ce&&(T=w)}for(let ce=0,Se=I.length;ce<Se;ce++){u=I[ce].s,p.push(u),Y=T[ce];for(let Ae=0,Te=Y.length;Ae<Te;Ae++)u.holes.push(Y[Ae].h)}return p}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"146"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="146");var AAe=U(5570);class xAe extends A8{constructor(t){super(t)}load(t,e,n,r){const s=this,o=new Iy(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,function(l){const u=s.parse(JSON.parse(l));e&&e(u)},n,r)}parse(t){return new IAe(t)}}class IAe{constructor(t){this.isFont=!0,this.type="Font",this.data=t}generateShapes(t,e=100){const n=[],r=function SAe(i,t,e){const n=Array.from(i),r=t/e.resolution,s=(e.boundingBox.yMax-e.boundingBox.yMin+e.underlineThickness)*r,o=[];let l=0,u=0;for(let p=0;p<n.length;p++){const v=n[p];if("\n"===v)l=0,u-=s;else{const w=EAe(v,r,l,u,e);w&&(l+=w.offsetX,o.push(w.path))}}return o}(t,e,this.data);for(let s=0,o=r.length;s<o;s++)n.push(...r[s].toShapes(!1));return n}}function EAe(i,t,e,n,r){const s=r.glyphs[i]||r.glyphs["?"];if(!s)return void console.error('THREE.Font: character "'+i+'" does not exists in font family '+r.familyName+".");const o=new _Ae;let l,u,p,v,w,I,T,k;if(s.o){const G=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let Y=0,ce=G.length;Y<ce;)switch(G[Y++]){case"m":l=G[Y++]*t+e,u=G[Y++]*t+n,o.moveTo(l,u);break;case"l":l=G[Y++]*t+e,u=G[Y++]*t+n,o.lineTo(l,u);break;case"q":p=G[Y++]*t+e,v=G[Y++]*t+n,w=G[Y++]*t+e,I=G[Y++]*t+n,o.quadraticCurveTo(w,I,p,v);break;case"b":p=G[Y++]*t+e,v=G[Y++]*t+n,w=G[Y++]*t+e,I=G[Y++]*t+n,T=G[Y++]*t+e,k=G[Y++]*t+n,o.bezierCurveTo(w,I,T,k,p,v)}}return{offsetX:s.ha*t,path:o}}class TAe extends LE{constructor(t,e={}){const n=e.font;if(void 0===n)super();else{const r=n.generateShapes(t,e.size);e.depth=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),super(r,e)}this.type="TextGeometry"}}const MAe=["canvas"];let DAe=(()=>{class i{constructor(e,n,r,s){this.graphsService=e,this.logger=n,this.store=r,this.route=s,this.rotationSpeedX=.05,this.rotationSpeedY=.01,this.size=200,this.frustumSize=600,this.texture="/assets/texture.jpg",this.cameraZ=1,this.fieldOfView=1,this.nearClippingPlane=150,this.farClippingPlane=1e3,this.scene=new OG,this.group=new YC,this.graph$=this.store.select(p2),this.subscriptions=[],this.subscriptions.push(this.graph$.subscribe(o=>{!o||(this.group.clear(),this.loadGraph(o,this.scene))}))}get canvas(){return this.canvasRef?.nativeElement}ngOnInit(){}ngAfterViewInit(){this.route.params.subscribe(e=>{this.id=e.label,this.clearScene(),this.startRenderingLoop();let n=this.graphsService.findOne(this.id+"");n&&this.store.dispatch(I1({graph:n}))})}ngOnDestroy(){this.subscriptions&&Ki.each(this.subscriptions,e=>{e.unsubscribe()})}clearScene(){this.scene.add(this.group),this.camera=new ed(45,this.getAspectRatio(),1,1e3),this.camera.position.set(0,15,35);let e=new kE({color:16711680,shininess:150,specular:2236962}),n=new M_(1e3,.15,1e3);e=new kE({color:10530223,shininess:150,specular:1118481});const r=new Ld(n,e);r.scale.multiplyScalar(3),r.castShadow=!1,r.receiveShadow=!0,this.scene.add(r),this.scene.add(new D8(4210752));let s=new E8(4210752);s.name="Spot Light",s.angle=Math.PI/5,s.penumbra=.3,s.position.set(5,5,5),s.castShadow=!0,s.shadow.camera.near=8,s.shadow.camera.far=30,s.shadow.mapSize.width=1024,s.shadow.mapSize.height=1024,this.scene.add(s),this.scene.add(s.shadow.camera);let o=new M8(16777215,1);o.name="Dir. Light",o.position.set(0,10,0),o.castShadow=!0,o.shadow.camera.near=1,o.shadow.camera.far=10,o.shadow.camera.right=15,o.shadow.camera.left=-15,o.shadow.camera.top=15,o.shadow.camera.bottom=-15,o.shadow.mapSize.width=1024,o.shadow.mapSize.height=1024,this.scene.add(o),this.scene.add(o.shadow.camera)}getAspectRatio(){return this.canvas.clientWidth/this.canvas.clientHeight}loadGraph(e,n){let r={};if(e){this.logger.info("Load",e);let s=new en(1,0,0);Ki.each(e.nodes,u=>{let p=new M_(1,.1,1),v=new kE({color:16711680,shininess:150,specular:2236962}),w=new Ld(p,v);w.name=u.id,r[u.id]={x:u.x,y:u.y},w.position.set(u.x/50,2,u.y/50),w.castShadow=!0,w.receiveShadow=!0,n.add(w),this.group.add(w),(new xAe).load("assets/fonts/helvetiker_regular.typeface.json",T=>{const k=new TAe(u.label,{font:T,size:.3,height:.1,curveSegments:5,bevelEnabled:!1,bevelThickness:0,bevelSize:0,bevelOffset:0,bevelSegments:0});k.computeBoundingBox(),k.boundingBox||new C_;let ce=new Ld(k,v);ce.position.set(u.x/50,2,u.y/50),ce.rotateOnAxis(s,-Math.PI/2),n.add(ce),this.group.add(ce)})}),Ki.each(e.edges,u=>{let p=r[u.source],v=r[u.target];const w=new Gf({color:255}),I=[];I.push(new en(p.x/50,2,p.y/50)),I.push(new en(v.x/50,2,v.y/50));const T=(new Ho).setFromPoints(I),k=new _x(T,w);n.add(k),this.group.add(k)});let l=(new C_).setFromObject(this.group).getSize(new en);this.group.translateX(-l.x/2),this.group.translateZ(-l.z/2),this.logger.info("Loaded",this.group.children.length,l)}}startRenderingLoop(){this.renderer=new kG({canvas:this.canvas}),this.renderer.setPixelRatio(devicePixelRatio),this.renderer.setSize(this.canvas.clientWidth,this.canvas.clientHeight),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=0;let e=this;const n=new AAe.OrbitControls(this.camera,this.renderer.domElement);n.autoRotate=!0,n.enableZoom=!0,n.enablePan=!1,n.minDistance=20,n.enableDamping=!0,n.dampingFactor=.2,n.enableKeys=!0,n.update(),function r(){requestAnimationFrame(r),e.renderer.render(e.scene,e.camera)}()}}return i.\u0275fac=function(e){return new(e||i)(Xt(L1),Xt(Id),Xt(ny),Xt(i_))},i.\u0275cmp=_r({type:i,selectors:[["app-threejs"]],viewQuery:function(e,n){if(1&e&&Tr(MAe,5),2&e){let r;Wi(r=ji())&&(n.canvasRef=r.first)}},inputs:{rotationSpeedX:"rotationSpeedX",rotationSpeedY:"rotationSpeedY",size:"size",frustumSize:"frustumSize",texture:"texture",cameraZ:"cameraZ",fieldOfView:"fieldOfView",nearClippingPlane:["nearClipping","nearClippingPlane"],farClippingPlane:["farClipping","farClippingPlane"]},decls:2,vars:0,consts:[["id","canvas",2,"height","100%","width","100%"],["canvas",""]],template:function(e,n){1&e&&Bn(0,"canvas",0,1)}}),i})();const LAe=hA("styles"),PAe=hA("style");function RAe(i,t){if(1&i){const e=vi();Ke(0,"span",12)(1,"input",13),mn("ngModelChange",function(r){return Pt(e),Rt(be().newStyle=r)}),Je(),Ke(2,"label",14),li(3,"Name"),Je(),Ke(4,"button",15),mn("click",function(){Pt(e);const r=be();return Rt(r.openNew(r.newStyle))}),Je()()}if(2&i){const e=be();Ie(1),de("ngModel",e.newStyle)}}function kAe(i,t){}function OAe(i,t){1&i&&(Ke(0,"div",16)(1,"h5",17),li(2,"Manage Styles"),Je(),Ke(3,"span",18),Bn(4,"i",19)(5,"input",20),Je()())}function FAe(i,t){1&i&&(Ke(0,"tr")(1,"th",21),Bn(2,"p-tableHeaderCheckbox"),Je(),Ke(3,"th",22),li(4,"Label "),Bn(5,"p-sortIcon",23),Je(),Ke(6,"th"),li(7,"Action(s) "),Je()())}function NAe(i,t){if(1&i){const e=vi();Ke(0,"tr")(1,"td"),Bn(2,"p-tableCheckbox",24),Je(),Ke(3,"td"),li(4),Je(),Ke(5,"td")(6,"button",25),mn("click",function(){const s=Pt(e).$implicit;return Rt(be().selectStyle(s))}),Je(),Ke(7,"span"),li(8,"\xa0"),Je(),Ke(9,"button",26),mn("click",function(r){const o=Pt(e).$implicit;return Rt(be().confirm(r,o))}),Je(),Ke(10,"span"),li(11,"\xa0"),Je()()()}if(2&i){const e=t.$implicit;Ie(2),de("value",e),Ie(2),ts(e.id)}}const BAe=function(){return["label"]},zAe=function(){return{width:"60vw",height:"50vw"}};let VAe=(()=>{class i{constructor(e,n,r,s,o,l,u){this.router=e,this.logger=n,this.styleService=r,this.clipboardService=s,this.confirmationService=o,this.messageService=l,this.store=u,this.style=void 0,this.styles=[],this.displayStyle=!1,this.style$=this.store.select(PAe),this.styles$=this.store.select(LAe),this.style$.subscribe(p=>{!p||(this.style=p)}),this.styles$.subscribe(p=>{!p||(this.styles=Ki.map(p,v=>({id:v.id,tags:v.tags})))})}ngOnInit(){let e=this.styleService.findAll();this.store.dispatch(Q1({styles:e}))}confirm(e,n){this.confirmationService.confirm({target:e.target||void 0,message:"Are you sure that you want to proceed ?",icon:"pi pi-exclamation-triangle",accept:()=>{this.deleteStyle(n)},reject:()=>{}})}selectStyle(e){this.selectedStyle=this.styleService.findOne(e.id),this.logger.info(this.selectedStyle),this.displayStyle=!0}deleteStyle(e){let n=this.styleService.delete(e.id);this.store.dispatch(Q1({styles:n}))}openNew(e){if(e){this.styleService.store({id:e,tags:[]},r=>{r.tags=[]});let n=this.styleService.findAll();this.logger.info(n),this.store.dispatch(Q1({styles:n}))}}onFileDropped(e){e[0].name.endsWith(".json")&&this.onFileStyleDropped(e)}onFileStyleDropped(e){var n=this;let r=e[0].name;this.messageService.add({key:"bc",severity:"info",summary:"Upload/Style",detail:`Filename ${r}`});let s=new FileReader;s.addEventListener("loadend",tv(function*(){let o=JSON.parse(s.result+"");n.styleService.store({id:r,tags:o},l=>{l.tags=o}),n.store.dispatch(K2({style:r}))})),s.readAsText(e[0])}}return i.\u0275fac=function(e){return new(e||i)(Xt(bh),Xt(Id),Xt(w4),Xt(P1),Xt(sA),Xt(fm),Xt(ny))},i.\u0275cmp=_r({type:i,selectors:[["app-style-selector"]],decls:16,vars:18,consts:[["dropZoneDirective","",1,"card",3,"fileDropped"],["styleClass","mb-4"],["pTemplate","left"],["pTemplate","right"],["responsiveLayout","scroll","dataKey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","rows","paginator","globalFilterFields","rowHover","showCurrentPageReport"],["mystyles",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["position","bottom-center","key","bc"],["header","Drag and drop file to update style",3,"modal","visible","maximizable","draggable","resizable","visibleChange"],["dropZoneDirective","",3,"fileDropped"],[1,"p-float-label"],["id","float-input","type","text","pInputText","",3,"ngModel","ngModelChange"],["for","float-input"],["pButton","","pRipple","","label","New","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],[1,"flex","align-items-center","justify-content-between"],[1,"m-0"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search..."],[2,"width","3rem"],["pSortableColumn","label"],["field","label"],[3,"value"],["pButton","","pRipple","","pTooltip","Select this style","tooltipPosition","top","icon","pi pi-sign-out",3,"click"],["pButton","","pRipple","","pTooltip","Remove this style","tooltipPosition","top","icon","pi pi-trash",1,"p-button-danger",3,"click"]],template:function(e,n){1&e&&(Ke(0,"div",0),mn("fileDropped",function(s){return n.onFileDropped(s)}),Ke(1,"p-toolbar",1),$e(2,RAe,5,1,"ng-template",2),$e(3,kAe,0,0,"ng-template",3),Je(),Bn(4,"p-toast"),Ke(5,"p-table",4,5),$e(7,OAe,6,0,"ng-template",6),$e(8,FAe,8,0,"ng-template",7),$e(9,NAe,12,2,"ng-template",8),Je()(),Bn(10,"p-confirmPopup")(11,"p-toast",9),Ke(12,"p-dialog",10),mn("visibleChange",function(s){return n.displayStyle=s}),Ke(13,"pre",11),mn("fileDropped",function(s){return n.onFileDropped(s)}),li(14),function pF(i,t){const e=Ts();let n;const r=i+22;e.firstCreatePass?(n=function Bj(i,t){if(t)for(let e=t.length-1;e>=0;e--){const n=t[e];if(i===n.name)return n}}(t,e.pipeRegistry),e.data[r]=n,n.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(r,n.onDestroy)):n=e.data[r];const s=n.factory||(n.factory=ip(n.type)),o=Nu(Xt);try{const l=ld(!1),u=s();return ld(l),function BW(i,t,e,n){e>=i.data.length&&(i.data[e]=null,i.blueprint[e]=null),t[e]=n}(e,bi(),r,u),u}finally{Nu(o)}}(15,"json"),Je()()),2&e&&(Ie(5),de("value",n.styles)("rows",10)("paginator",!0)("globalFilterFields",uo(16,BAe))("rowHover",!0)("showCurrentPageReport",!0),Ie(7),to(uo(17,zAe)),de("modal",!0)("visible",n.displayStyle)("maximizable",!0)("draggable",!1)("resizable",!1),Ie(2),ts(function gF(i,t,e){const n=i+22,r=bi(),s=ml(r,n);return function Bw(i,t){return i[1].data[t].pure}(r,n)?cF(r,Bo(),t,s.transform,e,s):s.transform(e)}(15,14,n.selectedStyle)))},dependencies:[l_,za,H2,G2,W2,j2,x0,Y1,rv,LA,fC,q2,C0,uC,oy,X2,PS,VN]}),i})();function UAe(i,t){}function HAe(i,t){}function GAe(i,t){1&i&&(Ke(0,"div",11)(1,"h5",12),li(2,"Manage Datasets"),Je(),Ke(3,"span",13),Bn(4,"i",14)(5,"input",15),Je()())}function WAe(i,t){1&i&&(Ke(0,"tr")(1,"th",16),Bn(2,"p-tableHeaderCheckbox"),Je(),Ke(3,"th",17),li(4,"Id "),Bn(5,"p-sortIcon",18),Je(),Ke(6,"th",19),li(7,"Type "),Bn(8,"p-sortIcon",20),Je(),Ke(9,"th",21),li(10,"Size "),Bn(11,"p-sortIcon",22),Je(),Ke(12,"th"),li(13,"Action(s) "),Je()())}function jAe(i,t){if(1&i){const e=vi();Ke(0,"tr")(1,"td"),Bn(2,"p-tableCheckbox",23),Je(),Ke(3,"td"),li(4),Je(),Ke(5,"td"),li(6),Je(),Ke(7,"td"),li(8),Je(),Ke(9,"td")(10,"button",24),mn("click",function(r){const o=Pt(e).$implicit;return Rt(be().confirm(r,o))}),Je(),Ke(11,"span"),li(12,"\xa0"),Je(),Ke(13,"button",25),mn("click",function(){const s=Pt(e).$implicit;return Rt(be().select(s))}),Je(),Ke(14,"span"),li(15,"\xa0"),Je()()()}if(2&i){const e=t.$implicit;Ie(2),de("value",e),Ie(2),ts(e.id),Ie(2),ts(e.type),Ie(2),ts(e.size)}}const $Ae=function(){return["label"]},qAe=[{path:"graphs",component:Poe},{path:"graphs/sigma/:label",component:Uoe},{path:"graphs/cytoscape/:label",component:Mme},{path:"graphs/threejs/:label",component:DAe},{path:"rules",component:(()=>{class i{constructor(e,n,r,s,o){this.router=e,this.logger=n,this.messageService=r,this.confirmationService=s,this.rulesService=o,this.rules=this.rulesService.findAll()}ngOnInit(){}onFileDropped(e){var n=this;let r=e[0].name;this.logger.info("Load file",r),this.messageService.add({key:"bc",severity:"info",summary:"Drop",detail:`Filename ${e[0].name}`});let o="";r.endsWith(".json")&&(o="json"),r.endsWith(".csv")&&(o="csv");let l=new FileReader;l.addEventListener("loadend",tv(function*(){n.rulesService.load(r,JSON.parse(l.result+""))})),l.readAsText(e[0])}select(e){this.router.navigate(["rules",e.id])}confirm(e,n){this.confirmationService.confirm({target:e.target||void 0,message:"Are you sure that you want to proceed ?",icon:"pi pi-exclamation-triangle",accept:()=>{this.rules=this.rulesService.delete(n.id)},reject:()=>{}})}}return i.\u0275fac=function(e){return new(e||i)(Xt(bh),Xt(Id),Xt(fm),Xt(sA),Xt(A4))},i.\u0275cmp=_r({type:i,selectors:[["app-rule-selector"]],decls:12,vars:7,consts:[["dropZoneDirective","",1,"card",3,"fileDropped"],["styleClass","mb-4"],["pTemplate","left"],["pTemplate","right"],["position","bottom-center","key","bc"],["position","left-center","key","lc"],["responsiveLayout","scroll","dataKey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","rows","paginator","globalFilterFields","rowHover","showCurrentPageReport"],["myDataset",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"flex","align-items-center","justify-content-between"],[1,"m-0"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search..."],[2,"width","3rem"],["pSortableColumn","id"],["field","id"],["pSortableColumn","type"],["field","type"],["pSortableColumn","size"],["field","size"],[3,"value"],["pButton","","pRipple","","pTooltip","Remove this dataset","tooltipPosition","top","icon","pi pi-trash",1,"p-button-danger",3,"click"],["pButton","","pRipple","","pTooltip","Select this dataset","tooltipPosition","top","icon","pi pi-sign-out",3,"click"]],template:function(e,n){1&e&&(Ke(0,"div",0),mn("fileDropped",function(s){return n.onFileDropped(s)}),Ke(1,"p-toolbar",1),$e(2,UAe,0,0,"ng-template",2),$e(3,HAe,0,0,"ng-template",3),Je(),Bn(4,"p-toast",4)(5,"p-toast",5),Ke(6,"p-table",6,7),$e(8,GAe,6,0,"ng-template",8),$e(9,WAe,14,0,"ng-template",9),$e(10,jAe,16,4,"ng-template",10),Je()(),Bn(11,"p-confirmPopup")),2&e&&(Ie(6),de("value",n.rules)("rows",10)("paginator",!0)("globalFilterFields",uo(6,$Ae))("rowHover",!0)("showCurrentPageReport",!0))},dependencies:[l_,za,H2,G2,W2,j2,x0,rv,LA,fC,q2,X2,PS]}),i})()},{path:"styles",component:VAe},{path:"converters/images",component:Ome},{path:"preferences",component:sve},{path:"about",component:ave}];let XAe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({imports:[s_.forRoot(qAe,{useHash:!0}),s_]}),i})();const YAe=function(i){return{"p-hidden":i}};function KAe(i,t){if(1&i&&Bn(0,"li",4),2&i){const e=be().$implicit;de("ngClass",_i(1,YAe,!1===e.visible))}}function ZAe(i,t){if(1&i&&Bn(0,"span",16),2&i){const e=be(3).$implicit;de("ngClass",e.icon)("ngStyle",e.iconStyle)}}function QAe(i,t){if(1&i&&(Ke(0,"span",17),li(1),Je()),2&i){const e=be(3).$implicit;Ie(1),ts(e.label)}}function JAe(i,t){1&i&&Bn(0,"span",18),2&i&&de("innerHTML",be(3).$implicit.label,Aa)}function exe(i,t){if(1&i&&(Ke(0,"span",19),li(1),Je()),2&i){const e=be(3).$implicit;de("ngClass",e.badgeStyleClass),Ie(1),ts(e.badge)}}const Z8=function(i,t){return{"pi-angle-down":i,"pi-angle-right":t}};function txe(i,t){if(1&i&&Bn(0,"span",20),2&i){const e=be(4);de("ngClass",ss(1,Z8,e.root,!e.root))}}const Q8=function(i){return{"p-menuitem-link":!0,"p-disabled":i}};function nxe(i,t){if(1&i){const e=vi();Ke(0,"a",10),mn("click",function(r){Pt(e);const s=be(2).$implicit;return Rt(be().onItemClick(r,s))})("mouseenter",function(r){Pt(e);const s=be(2).$implicit;return Rt(be().onItemMouseEnter(r,s))}),$e(1,ZAe,1,2,"span",11),$e(2,QAe,2,1,"span",12),$e(3,JAe,1,1,"ng-template",null,13,sc),$e(5,exe,2,2,"span",14),$e(6,txe,1,4,"span",15),Je()}if(2&i){const e=oo(4),n=be(2).$implicit,r=be();de("target",n.target)("ngClass",_i(14,Q8,n.disabled)),vr("href",n.url,Xh)("data-automationid",n.automationId)("title",n.title)("id",n.id)("tabindex",n.disabled?null:"0")("aria-haspopup",null!=r.item.items)("aria-expanded",r.item===r.activeItem),Ie(1),de("ngIf",n.icon),Ie(1),de("ngIf",!1!==n.escape)("ngIfElse",e),Ie(3),de("ngIf",n.badge),Ie(1),de("ngIf",n.items)}}function ixe(i,t){if(1&i&&Bn(0,"span",16),2&i){const e=be(3).$implicit;de("ngClass",e.icon)("ngStyle",e.iconStyle)}}function rxe(i,t){if(1&i&&(Ke(0,"span",17),li(1),Je()),2&i){const e=be(3).$implicit;Ie(1),ts(e.label)}}function sxe(i,t){1&i&&Bn(0,"span",18),2&i&&de("innerHTML",be(3).$implicit.label,Aa)}function oxe(i,t){if(1&i&&(Ke(0,"span",19),li(1),Je()),2&i){const e=be(3).$implicit;de("ngClass",e.badgeStyleClass),Ie(1),ts(e.badge)}}function axe(i,t){if(1&i&&Bn(0,"span",20),2&i){const e=be(4);de("ngClass",ss(1,Z8,e.root,!e.root))}}const lxe=function(){return{exact:!1}};function cxe(i,t){if(1&i){const e=vi();Ke(0,"a",21),mn("click",function(r){Pt(e);const s=be(2).$implicit;return Rt(be().onItemClick(r,s))})("mouseenter",function(r){Pt(e);const s=be(2).$implicit;return Rt(be().onItemMouseEnter(r,s))}),$e(1,ixe,1,2,"span",11),$e(2,rxe,2,1,"span",12),$e(3,sxe,1,1,"ng-template",null,22,sc),$e(5,oxe,2,2,"span",14),$e(6,axe,1,4,"span",15),Je()}if(2&i){const e=oo(4),n=be(2).$implicit;de("routerLink",n.routerLink)("queryParams",n.queryParams)("routerLinkActive","p-menuitem-link-active")("routerLinkActiveOptions",n.routerLinkActiveOptions||uo(21,lxe))("target",n.target)("ngClass",_i(22,Q8,n.disabled))("fragment",n.fragment)("queryParamsHandling",n.queryParamsHandling)("preserveFragment",n.preserveFragment)("skipLocationChange",n.skipLocationChange)("replaceUrl",n.replaceUrl)("state",n.state),vr("data-automationid",n.automationId)("title",n.title)("id",n.id)("tabindex",n.disabled?null:"0"),Ie(1),de("ngIf",n.icon),Ie(1),de("ngIf",!1!==n.escape)("ngIfElse",e),Ie(3),de("ngIf",n.badge),Ie(1),de("ngIf",n.items)}}function uxe(i,t){if(1&i){const e=vi();Ke(0,"p-menubarSub",23),mn("leafClick",function(){return Pt(e),Rt(be(3).onLeafClick())}),Je()}if(2&i){const e=be(2).$implicit,n=be();de("parentActive",e===n.activeItem)("item",e)("mobileActive",n.mobileActive)("autoDisplay",n.autoDisplay)}}const hxe=function(i,t){return{"p-menuitem":!0,"p-menuitem-active":i,"p-hidden":t}};function dxe(i,t){if(1&i&&(Ke(0,"li",5,6),$e(2,nxe,7,16,"a",7),$e(3,cxe,7,24,"a",8),$e(4,uxe,1,4,"p-menubarSub",9),Je()),2&i){const e=be().$implicit,n=be();kr(e.styleClass),de("ngClass",ss(8,hxe,e===n.activeItem,!1===e.visible))("ngStyle",e.style)("tooltipOptions",e.tooltipOptions),Ie(2),de("ngIf",!e.routerLink),Ie(1),de("ngIf",e.routerLink),Ie(1),de("ngIf",e.items)}}function fxe(i,t){if(1&i&&($e(0,KAe,1,3,"li",2),$e(1,dxe,5,11,"li",3)),2&i){const e=t.$implicit;de("ngIf",e.separator),Ie(1),de("ngIf",!e.separator)}}const pxe=function(i,t){return{"p-submenu-list":i,"p-menubar-root-list":t}},gxe=["menubutton"],mxe=["rootmenu"];function vxe(i,t){1&i&&Ni(0)}function yxe(i,t){if(1&i&&(Ke(0,"div",9),$e(1,vxe,1,0,"ng-container",10),Je()),2&i){const e=be();Ie(1),de("ngTemplateOutlet",e.startTemplate)}}function _xe(i,t){1&i&&Ni(0)}function bxe(i,t){if(1&i&&(Ke(0,"div",11),$e(1,_xe,1,0,"ng-container",10),Je()),2&i){const e=be();Ie(1),de("ngTemplateOutlet",e.endTemplate)}}function Cxe(i,t){1&i&&(Ke(0,"div",11),su(1),Je())}const wxe=function(i){return{"p-menubar p-component":!0,"p-menubar-mobile-active":i}},Axe=["*"];let xxe=(()=>{class i{constructor(e,n,r){this.el=e,this.renderer=n,this.cd=r,this.autoZIndex=!0,this.baseZIndex=0,this.leafClick=new Fn,this.menuHoverActive=!1}get parentActive(){return this._parentActive}set parentActive(e){this.root||(this._parentActive=e,e||(this.activeItem=null))}onItemClick(e,n){n.disabled?e.preventDefault():(!n.url&&!n.routerLink&&e.preventDefault(),n.command&&n.command({originalEvent:e,item:n}),n.items&&(this.activeItem&&n===this.activeItem?(this.activeItem=null,this.unbindDocumentClickListener()):(this.activeItem=n,this.root&&this.bindDocumentClickListener())),n.items||this.onLeafClick())}onItemMouseEnter(e,n){n.disabled||this.mobileActive?e.preventDefault():this.root?(this.activeItem||this.autoDisplay)&&(this.activeItem=n,this.bindDocumentClickListener()):(this.activeItem=n,this.bindDocumentClickListener())}onLeafClick(){this.activeItem=null,this.root&&this.unbindDocumentClickListener(),this.leafClick.emit()}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=e=>{this.el&&!this.el.nativeElement.contains(e.target)&&(this.activeItem=null,this.cd.markForCheck(),this.unbindDocumentClickListener())},document.addEventListener("click",this.documentClickListener))}unbindDocumentClickListener(){this.documentClickListener&&(document.removeEventListener("click",this.documentClickListener),this.documentClickListener=null)}ngOnDestroy(){this.unbindDocumentClickListener()}}return i.\u0275fac=function(e){return new(e||i)(Xt(Yn),Xt(d),Xt(xo))},i.\u0275cmp=_r({type:i,selectors:[["p-menubarSub"]],hostAttrs:[1,"p-element"],inputs:{item:"item",root:"root",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",mobileActive:"mobileActive",autoDisplay:"autoDisplay",parentActive:"parentActive"},outputs:{leafClick:"leafClick"},decls:2,vars:6,consts:[[3,"ngClass"],["ngFor","",3,"ngForOf"],["class","p-menu-separator","role","separator",3,"ngClass",4,"ngIf"],["role","none","pTooltip","",3,"ngClass","ngStyle","class","tooltipOptions",4,"ngIf"],["role","separator",1,"p-menu-separator",3,"ngClass"],["role","none","pTooltip","",3,"ngClass","ngStyle","tooltipOptions"],["listItem",""],["role","menuitem","pRipple","",3,"target","ngClass","click","mouseenter",4,"ngIf"],["role","menuitem","pRipple","",3,"routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","target","ngClass","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","click","mouseenter",4,"ngIf"],[3,"parentActive","item","mobileActive","autoDisplay","leafClick",4,"ngIf"],["role","menuitem","pRipple","",3,"target","ngClass","click","mouseenter"],["class","p-menuitem-icon",3,"ngClass","ngStyle",4,"ngIf"],["class","p-menuitem-text",4,"ngIf","ngIfElse"],["htmlLabel",""],["class","p-menuitem-badge",3,"ngClass",4,"ngIf"],["class","p-submenu-icon pi",3,"ngClass",4,"ngIf"],[1,"p-menuitem-icon",3,"ngClass","ngStyle"],[1,"p-menuitem-text"],[1,"p-menuitem-text",3,"innerHTML"],[1,"p-menuitem-badge",3,"ngClass"],[1,"p-submenu-icon","pi",3,"ngClass"],["role","menuitem","pRipple","",3,"routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","target","ngClass","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","click","mouseenter"],["htmlRouteLabel",""],[3,"parentActive","item","mobileActive","autoDisplay","leafClick"]],template:function(e,n){1&e&&(Ke(0,"ul",0),$e(1,fxe,2,2,"ng-template",1),Je()),2&e&&(de("ngClass",ss(3,pxe,!n.root,n.root)),vr("role",n.root?"menubar":"menu"),Ie(1),de("ngForOf",n.root?n.item:n.item.items))},dependencies:[no,jc,ho,Po,rC,$D,Du,rv,i],encapsulation:2}),i})(),Ixe=(()=>{class i{constructor(e,n,r,s){this.el=e,this.renderer=n,this.cd=r,this.config=s,this.autoZIndex=!0,this.baseZIndex=0}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"start":this.startTemplate=e.template;break;case"end":this.endTemplate=e.template}})}toggle(e){this.mobileActive?(this.hide(),Ll.clear(this.rootmenu.el.nativeElement)):(this.mobileActive=!0,Ll.set("menu",this.rootmenu.el.nativeElement,this.config.zIndex.menu)),this.bindOutsideClickListener(),e.preventDefault()}bindOutsideClickListener(){this.outsideClickListener||(this.outsideClickListener=e=>{this.mobileActive&&this.rootmenu.el.nativeElement!==e.target&&!this.rootmenu.el.nativeElement.contains(e.target)&&this.menubutton.nativeElement!==e.target&&!this.menubutton.nativeElement.contains(e.target)&&this.hide()},document.addEventListener("click",this.outsideClickListener))}hide(){this.mobileActive=!1,this.cd.markForCheck(),Ll.clear(this.rootmenu.el.nativeElement),this.unbindOutsideClickListener()}onLeafClick(){this.hide()}unbindOutsideClickListener(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null)}ngOnDestroy(){this.unbindOutsideClickListener()}}return i.\u0275fac=function(e){return new(e||i)(Xt(Yn),Xt(d),Xt(xo),Xt(Dp))},i.\u0275cmp=_r({type:i,selectors:[["p-menubar"]],contentQueries:function(e,n,r){if(1&e&&Ba(r,za,4),2&e){let s;Wi(s=ji())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(Tr(gxe,5),Tr(mxe,5)),2&e){let r;Wi(r=ji())&&(n.menubutton=r.first),Wi(r=ji())&&(n.rootmenu=r.first)}},hostAttrs:[1,"p-element"],inputs:{model:"model",style:"style",styleClass:"styleClass",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",autoDisplay:"autoDisplay"},ngContentSelectors:Axe,decls:10,vars:14,consts:[[3,"ngClass","ngStyle"],["class","p-menubar-start",4,"ngIf"],["tabindex","0",1,"p-menubar-button",3,"click"],["menubutton",""],[1,"pi","pi-bars"],["root","root",3,"item","baseZIndex","autoZIndex","mobileActive","autoDisplay","leafClick"],["rootmenu",""],["class","p-menubar-end",4,"ngIf","ngIfElse"],["legacy",""],[1,"p-menubar-start"],[4,"ngTemplateOutlet"],[1,"p-menubar-end"]],template:function(e,n){if(1&e&&(Bf(),Ke(0,"div",0),$e(1,yxe,2,1,"div",1),Ke(2,"a",2,3),mn("click",function(s){return n.toggle(s)}),Bn(4,"i",4),Je(),Ke(5,"p-menubarSub",5,6),mn("leafClick",function(){return n.onLeafClick()}),Je(),$e(7,bxe,2,1,"div",7),$e(8,Cxe,2,0,"ng-template",null,8,sc),Je()),2&e){const r=oo(9);kr(n.styleClass),de("ngClass",_i(12,wxe,n.mobileActive))("ngStyle",n.style),Ie(1),de("ngIf",n.startTemplate),Ie(4),de("item",n.model)("baseZIndex",n.baseZIndex)("autoZIndex",n.autoZIndex)("mobileActive",n.mobileActive)("autoDisplay",n.autoDisplay),Ie(2),de("ngIf",n.endTemplate)("ngIfElse",r)}},dependencies:[no,ho,el,Po,xxe],styles:[".p-menubar{display:flex;align-items:center}.p-menubar ul{margin:0;padding:0;list-style:none}.p-menubar .p-menuitem-link{cursor:pointer;display:flex;align-items:center;text-decoration:none;overflow:hidden;position:relative}.p-menubar .p-menuitem-text{line-height:1}.p-menubar .p-menuitem{position:relative}.p-menubar-root-list{display:flex;align-items:center}.p-menubar-root-list>li ul{display:none;z-index:1}.p-menubar-root-list>.p-menuitem-active>p-menubarsub>.p-submenu-list{display:block}.p-menubar .p-submenu-list{display:none;position:absolute;z-index:1}.p-menubar .p-submenu-list>.p-menuitem-active>p-menubarsub>.p-submenu-list{display:block;left:100%;top:0}.p-menubar .p-submenu-list .p-menuitem-link .p-submenu-icon{margin-left:auto}.p-menubar .p-menubar-custom,.p-menubar .p-menubar-end{margin-left:auto;align-self:center}.p-menubar-button{display:none;cursor:pointer;align-items:center;justify-content:center}\n"],encapsulation:2,changeDetection:0}),i})(),Sxe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({imports:[Os,s_,Xc,sv,xa,s_,sv,xa]}),i})();function Exe(i,t){1&i&&Bn(0,"img",2)}let Txe=(()=>{class i{constructor(e,n){this.title=e,this.store=n,this.items=[],this.subscriptions=[],this.title.setTitle("MySystem 1.1.1")}ngOnInit(){this.items=[{label:"Graph",icon:"pi pi-fw pi-box",items:[{label:"Graph(s)",icon:"pi pi-fw pi-book",routerLink:"/graphs"}]},{label:"Rule",icon:"pi pi-fw pi-box",items:[{label:"Rule(s)",icon:"pi pi-fw pi-book",routerLink:"/rules"}]},{label:"Style",icon:"pi pi-fw pi-box",items:[{label:"Style(s)",icon:"pi pi-fw pi-book",routerLink:"/styles"}]},{label:"Misc",icon:"pi pi-fw pi-cog",items:[{label:"Preferences",icon:"pi pi-fw pi-database",routerLink:"/preferences"},{label:"Images",icon:"pi pi-fw pi-cloud-upload",routerLink:"/converters/images"},{label:"About",icon:"pi pi-fw pi-at",routerLink:"/about"}]}]}ngOnDestroy(){this.subscriptions&&Ki.each(this.subscriptions,e=>{e.unsubscribe()})}}return i.\u0275fac=function(e){return new(e||i)(Xt(oD),Xt(ny))},i.\u0275cmp=_r({type:i,selectors:[["app-root"]],decls:3,vars:1,consts:[[3,"model"],["pTemplate","start"],["src","assets/favicon.png","height","40",1,"mr-2"]],template:function(e,n){1&e&&(Ke(0,"p-menubar",0),$e(1,Exe,1,0,"ng-template",1),Je(),Bn(2,"router-outlet")),2&e&&de("model",n.items)},dependencies:[kD,za,Ixe]}),i})();function J8(i){return new yi(3e3,!1)}function cIe(){return typeof window<"u"&&typeof window.document<"u"}function yR(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function P_(i){switch(i.length){case 0:return new IA;case 1:return i[0];default:return new XV(i)}}function e6(i,t,e,n,r=new Map,s=new Map){const o=[],l=[];let u=-1,p=null;if(n.forEach(v=>{const w=v.get("offset"),I=w==u,T=I&&p||new Map;v.forEach((k,G)=>{let Y=G,ce=k;if("offset"!==G)switch(Y=t.normalizePropertyName(Y,o),ce){case"!":ce=r.get(G);break;case ay:ce=s.get(G);break;default:ce=t.normalizeStyleValue(G,Y,ce,o)}T.set(Y,ce)}),I||l.push(T),p=T,u=w}),o.length)throw function Zxe(i){return new yi(3502,!1)}();return l}function _R(i,t,e,n){switch(t){case"start":i.onStart(()=>n(e&&bR(e,"start",i)));break;case"done":i.onDone(()=>n(e&&bR(e,"done",i)));break;case"destroy":i.onDestroy(()=>n(e&&bR(e,"destroy",i)))}}function bR(i,t,e){const s=CR(i.element,i.triggerName,i.fromState,i.toState,t||i.phaseName,e.totalTime??i.totalTime,!!e.disabled),o=i._data;return null!=o&&(s._data=o),s}function CR(i,t,e,n,r="",s=0,o){return{element:i,triggerName:t,fromState:e,toState:n,phaseName:r,totalTime:s,disabled:!!o}}function Np(i,t,e){let n=i.get(t);return n||i.set(t,n=e),n}function t6(i){const t=i.indexOf(":");return[i.substring(1,t),i.slice(t+1)]}let wR=(i,t)=>!1,n6=(i,t,e)=>[],r6=null;function AR(i){const t=i.parentNode||i.host;return t===r6?null:t}(yR()||typeof Element<"u")&&(cIe()?(r6=(()=>document.documentElement)(),wR=(i,t)=>{for(;t;){if(t===i)return!0;t=AR(t)}return!1}):wR=(i,t)=>i.contains(t),n6=(i,t,e)=>{if(e)return Array.from(i.querySelectorAll(t));const n=i.querySelector(t);return n?[n]:[]});let ab=null,s6=!1;const o6=wR,a6=n6;let l6=(()=>{class i{validateStyleProperty(e){return function hIe(i){ab||(ab=function dIe(){return typeof document<"u"?document.body:null}()||{},s6=!!ab.style&&"WebkitAppearance"in ab.style);let t=!0;return ab.style&&!function uIe(i){return"ebkit"==i.substring(1,6)}(i)&&(t=i in ab.style,!t&&s6&&(t="Webkit"+i.charAt(0).toUpperCase()+i.slice(1)in ab.style)),t}(e)}matchesElement(e,n){return!1}containsElement(e,n){return o6(e,n)}getParentElement(e){return AR(e)}query(e,n,r){return a6(e,n,r)}computeStyle(e,n,r){return r||""}animate(e,n,r,s,o,l=[],u){return new IA(r,s)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})(),xR=(()=>{class i{}return i.NOOP=new l6,i})();const IR="ng-enter",qE="ng-leave",XE="ng-trigger",YE=".ng-trigger",u6="ng-animating",SR=".ng-animating";function R_(i){if("number"==typeof i)return i;const t=i.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:ER(parseFloat(t[1]),t[2])}function ER(i,t){return"s"===t?1e3*i:i}function KE(i,t,e){return i.hasOwnProperty("duration")?i:function gIe(i,t,e){let r,s=0,o="";if("string"==typeof i){const l=i.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===l)return t.push(J8()),{duration:0,delay:0,easing:""};r=ER(parseFloat(l[1]),l[2]);const u=l[3];null!=u&&(s=ER(parseFloat(u),l[4]));const p=l[5];p&&(o=p)}else r=i;if(!e){let l=!1,u=t.length;r<0&&(t.push(function Mxe(){return new yi(3100,!1)}()),l=!0),s<0&&(t.push(function Dxe(){return new yi(3101,!1)}()),l=!0),l&&t.splice(u,0,J8())}return{duration:r,delay:s,easing:o}}(i,t,e)}function Tx(i,t={}){return Object.keys(i).forEach(e=>{t[e]=i[e]}),t}function h6(i){const t=new Map;return Object.keys(i).forEach(e=>{t.set(e,i[e])}),t}function k_(i,t=new Map,e){if(e)for(let[n,r]of e)t.set(n,r);for(let[n,r]of i)t.set(n,r);return t}function f6(i,t,e){return e?t+":"+e+";":""}function p6(i){let t="";for(let e=0;e<i.style.length;e++){const n=i.style.item(e);t+=f6(0,n,i.style.getPropertyValue(n))}for(const e in i.style)i.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=f6(0,_Ie(e),i.style[e]));i.setAttribute("style",t)}function gv(i,t,e){i.style&&(t.forEach((n,r)=>{const s=MR(r);e&&!e.has(r)&&e.set(r,i.style[s]),i.style[s]=n}),yR()&&p6(i))}function lb(i,t){i.style&&(t.forEach((e,n)=>{const r=MR(n);i.style[r]=""}),yR()&&p6(i))}function Mx(i){return Array.isArray(i)?1==i.length?i[0]:jV(i):i}const TR=new RegExp("{{\\s*(.+?)\\s*}}","g");function g6(i){let t=[];if("string"==typeof i){let e;for(;e=TR.exec(i);)t.push(e[1]);TR.lastIndex=0}return t}function ZE(i,t,e){const n=i.toString(),r=n.replace(TR,(s,o)=>{let l=t[o];return null==l&&(e.push(function Pxe(i){return new yi(3003,!1)}()),l=""),l.toString()});return r==n?i:r}function QE(i){const t=[];let e=i.next();for(;!e.done;)t.push(e.value),e=i.next();return t}const yIe=/-+([a-z0-9])/g;function MR(i){return i.replace(yIe,(...t)=>t[1].toUpperCase())}function _Ie(i){return i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Bp(i,t,e){switch(t.type){case 7:return i.visitTrigger(t,e);case 0:return i.visitState(t,e);case 1:return i.visitTransition(t,e);case 2:return i.visitSequence(t,e);case 3:return i.visitGroup(t,e);case 4:return i.visitAnimate(t,e);case 5:return i.visitKeyframes(t,e);case 6:return i.visitStyle(t,e);case 8:return i.visitReference(t,e);case 9:return i.visitAnimateChild(t,e);case 10:return i.visitAnimateRef(t,e);case 11:return i.visitQuery(t,e);case 12:return i.visitStagger(t,e);default:throw function Rxe(i){return new yi(3004,!1)}()}}function m6(i,t){return window.getComputedStyle(i)[t]}function IIe(i,t){const e=[];return"string"==typeof i?i.split(/\s*,\s*/).forEach(n=>function SIe(i,t,e){if(":"==i[0]){const u=function EIe(i,t){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,n)=>parseFloat(n)>parseFloat(e);case":decrement":return(e,n)=>parseFloat(n)<parseFloat(e);default:return t.push(function qxe(i){return new yi(3016,!1)}()),"* => *"}}(i,e);if("function"==typeof u)return void t.push(u);i=u}const n=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==n||n.length<4)return e.push(function $xe(i){return new yi(3015,!1)}()),t;const r=n[1],s=n[2],o=n[3];t.push(v6(r,o));"<"==s[0]&&!("*"==r&&"*"==o)&&t.push(v6(o,r))}(n,e,t)):e.push(i),e}const nT=new Set(["true","1"]),iT=new Set(["false","0"]);function v6(i,t){const e=nT.has(i)||iT.has(i),n=nT.has(t)||iT.has(t);return(r,s)=>{let o="*"==i||i==r,l="*"==t||t==s;return!o&&e&&"boolean"==typeof r&&(o=r?nT.has(i):iT.has(i)),!l&&n&&"boolean"==typeof s&&(l=s?nT.has(t):iT.has(t)),o&&l}}const TIe=new RegExp("s*:selfs*,?","g");function DR(i,t,e,n){return new MIe(i).build(t,e,n)}class MIe{constructor(t){this._driver=t}build(t,e,n){const r=new PIe(e);return this._resetContextStyleTimingState(r),Bp(this,Mx(t),r)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles=new Map,t.collectedStyles.set("",new Map),t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const s=[],o=[];return"@"==t.name.charAt(0)&&e.errors.push(function Oxe(){return new yi(3006,!1)}()),t.definitions.forEach(l=>{if(this._resetContextStyleTimingState(e),0==l.type){const u=l,p=u.name;p.toString().split(/\s*,\s*/).forEach(v=>{u.name=v,s.push(this.visitState(u,e))}),u.name=p}else if(1==l.type){const u=this.visitTransition(l,e);n+=u.queryCount,r+=u.depCount,o.push(u)}else e.errors.push(function Fxe(){return new yi(3007,!1)}())}),{type:7,name:t.name,states:s,transitions:o,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const s=new Set,o=r||{};n.styles.forEach(l=>{l instanceof Map&&l.forEach(u=>{g6(u).forEach(p=>{o.hasOwnProperty(p)||s.add(p)})})}),s.size&&(QE(s.values()),e.errors.push(function Nxe(i,t){return new yi(3008,!1)}()))}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=Bp(this,Mx(t.animation),e);return{type:1,matchers:IIe(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:cb(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(n=>Bp(this,n,e)),options:cb(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const s=t.steps.map(o=>{e.currentTime=n;const l=Bp(this,o,e);return r=Math.max(r,e.currentTime),l});return e.currentTime=r,{type:3,steps:s,options:cb(t.options)}}visitAnimate(t,e){const n=function kIe(i,t){if(i.hasOwnProperty("duration"))return i;if("number"==typeof i)return LR(KE(i,t).duration,0,"");const e=i;if(e.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=LR(0,0,"");return s.dynamic=!0,s.strValue=e,s}const r=KE(e,t);return LR(r.duration,r.delay,r.easing)}(t.timings,e.errors);e.currentAnimateTimings=n;let r,s=t.styles?t.styles:tl({});if(5==s.type)r=this.visitKeyframes(s,e);else{let o=t.styles,l=!1;if(!o){l=!0;const p={};n.easing&&(p.easing=n.easing),o=tl(p)}e.currentTime+=n.duration+n.delay;const u=this.visitStyle(o,e);u.isEmptyStep=l,r=u}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[],r=Array.isArray(t.styles)?t.styles:[t.styles];for(let l of r)"string"==typeof l?l===ay?n.push(l):e.errors.push(new yi(3002,!1)):n.push(h6(l));let s=!1,o=null;return n.forEach(l=>{if(l instanceof Map&&(l.has("easing")&&(o=l.get("easing"),l.delete("easing")),!s))for(let u of l.values())if(u.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:n,easing:o,offset:t.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,s=e.currentTime;n&&s>0&&(s-=n.duration+n.delay),t.styles.forEach(o=>{"string"!=typeof o&&o.forEach((l,u)=>{const p=e.collectedStyles.get(e.currentQuerySelector),v=p.get(u);let w=!0;v&&(s!=r&&s>=v.startTime&&r<=v.endTime&&(e.errors.push(function zxe(i,t,e,n,r){return new yi(3010,!1)}()),w=!1),s=v.startTime),w&&p.set(u,{startTime:s,endTime:r}),e.options&&function vIe(i,t,e){const n=t.params||{},r=g6(i);r.length&&r.forEach(s=>{n.hasOwnProperty(s)||e.push(function Lxe(i){return new yi(3001,!1)}())})}(l,e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function Vxe(){return new yi(3011,!1)}()),n;let s=0;const o=[];let l=!1,u=!1,p=0;const v=t.steps.map(ce=>{const Se=this._makeStyleAst(ce,e);let Ae=null!=Se.offset?Se.offset:function RIe(i){if("string"==typeof i)return null;let t=null;if(Array.isArray(i))i.forEach(e=>{if(e instanceof Map&&e.has("offset")){const n=e;t=parseFloat(n.get("offset")),n.delete("offset")}});else if(i instanceof Map&&i.has("offset")){const e=i;t=parseFloat(e.get("offset")),e.delete("offset")}return t}(Se.styles),Te=0;return null!=Ae&&(s++,Te=Se.offset=Ae),u=u||Te<0||Te>1,l=l||Te<p,p=Te,o.push(Te),Se});u&&e.errors.push(function Uxe(){return new yi(3012,!1)}()),l&&e.errors.push(function Hxe(){return new yi(3200,!1)}());const w=t.steps.length;let I=0;s>0&&s<w?e.errors.push(function Gxe(){return new yi(3202,!1)}()):0==s&&(I=1/(w-1));const T=w-1,k=e.currentTime,G=e.currentAnimateTimings,Y=G.duration;return v.forEach((ce,Se)=>{const Ae=I>0?Se==T?1:I*Se:o[Se],Te=Ae*Y;e.currentTime=k+G.delay+Te,G.duration=Te,this._validateStyleAst(ce,e),ce.offset=Ae,n.styles.push(ce)}),n}visitReference(t,e){return{type:8,animation:Bp(this,Mx(t.animation),e),options:cb(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:cb(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:cb(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[s,o]=function DIe(i){const t=!!i.split(/\s*,\s*/).find(e=>":self"==e);return t&&(i=i.replace(TIe,"")),i=i.replace(/@\*/g,YE).replace(/@\w+/g,e=>YE+"-"+e.slice(1)).replace(/:animating/g,SR),[i,t]}(t.selector);e.currentQuerySelector=n.length?n+" "+s:s,Np(e.collectedStyles,e.currentQuerySelector,new Map);const l=Bp(this,Mx(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:l,originalSelector:t.selector,options:cb(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function Wxe(){return new yi(3013,!1)}());const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:KE(t.timings,e.errors,!0);return{type:12,animation:Bp(this,Mx(t.animation),e),timings:n,options:null}}}class PIe{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function cb(i){return i?(i=Tx(i)).params&&(i.params=function LIe(i){return i?Tx(i):null}(i.params)):i={},i}function LR(i,t,e){return{duration:i,delay:t,easing:e}}function PR(i,t,e,n,r,s,o=null,l=!1){return{type:1,element:i,keyframes:t,preStyleProps:e,postStyleProps:n,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:l}}class rT{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const NIe=new RegExp(":enter","g"),zIe=new RegExp(":leave","g");function RR(i,t,e,n,r,s=new Map,o=new Map,l,u,p=[]){return(new VIe).buildKeyframes(i,t,e,n,r,s,o,l,u,p)}class VIe{buildKeyframes(t,e,n,r,s,o,l,u,p,v=[]){p=p||new rT;const w=new kR(t,e,p,r,s,v,[]);w.options=u;const I=u.delay?R_(u.delay):0;w.currentTimeline.delayNextStep(I),w.currentTimeline.setStyles([o],null,w.errors,u),Bp(this,n,w);const T=w.timelines.filter(k=>k.containsAnimation());if(T.length&&l.size){let k;for(let G=T.length-1;G>=0;G--){const Y=T[G];if(Y.element===e){k=Y;break}}k&&!k.allowOnlyTimelineStyles()&&k.setStyles([l],null,w.errors,u)}return T.length?T.map(k=>k.buildKeyframes()):[PR(e,[],[],[],0,I,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.get(e.element);if(n){const r=e.createSubContext(t.options),s=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);s!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let s=e.currentTimeline.currentTime;const o=null!=n.duration?R_(n.duration):null,l=null!=n.delay?R_(n.delay):null;return 0!==o&&t.forEach(u=>{const p=e.appendInstructionToTimeline(u,o,l);s=Math.max(s,p.duration+p.delay)}),s}visitReference(t,e){e.updateOptions(t.options,!0),Bp(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const s=t.options;if(s&&(s.params||s.delay)&&(r=e.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=sT);const o=R_(s.delay);r.delayNextStep(o)}t.steps.length&&(t.steps.forEach(o=>Bp(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const s=t.options&&t.options.delay?R_(t.options.delay):0;t.steps.forEach(o=>{const l=e.createSubContext(t.options);s&&l.delayNextStep(s),Bp(this,o,l),r=Math.max(r,l.currentTimeline.currentTime),n.push(l.currentTimeline)}),n.forEach(o=>e.currentTimeline.mergeTimelineCollectedStyles(o)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return KE(e.params?ZE(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const s=t.style;5==s.type?this.visitKeyframes(s,e):(e.incrementTime(n.duration),this.visitStyle(s,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.hasCurrentStyleProperties()&&n.forwardFrame();const s=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(s):n.setStyles(t.styles,s,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,s=n.duration,l=e.createSubContext().currentTimeline;l.easing=n.easing,t.styles.forEach(u=>{l.forwardTime((u.offset||0)*s),l.setStyles(u.styles,u.easing,e.errors,e.options),l.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(l),e.transformIntoNewTimeline(r+s),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},s=r.delay?R_(r.delay):0;s&&(6===e.previousNode.type||0==n&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=sT);let o=n;const l=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=l.length;let u=null;l.forEach((p,v)=>{e.currentQueryIndex=v;const w=e.createSubContext(t.options,p);s&&w.delayNextStep(s),p===e.element&&(u=w.currentTimeline),Bp(this,t.animation,w),w.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,w.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),u&&(e.currentTimeline.mergeTimelineCollectedStyles(u),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,s=t.timings,o=Math.abs(s.duration),l=o*(e.currentQueryTotal-1);let u=o*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":u=l-u;break;case"full":u=n.currentStaggerTime}const v=e.currentTimeline;u&&v.delayNextStep(u);const w=v.currentTime;Bp(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-w+(r.startTime-n.currentTimeline.startTime)}}const sT={};class kR{constructor(t,e,n,r,s,o,l,u){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=l,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=sT,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=u||new oT(this._driver,e,0),l.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=R_(n.duration)),null!=n.delay&&(r.delay=R_(n.delay));const s=n.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(l=>{(!e||!o.hasOwnProperty(l))&&(o[l]=ZE(s[l],o,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(r=>{n[r]=e[r]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,s=new kR(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(t),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(t){return this.previousNode=sT,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:e??t.duration,delay:this.currentTimeline.currentTime+(n??0)+t.delay,easing:""},s=new UIe(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,s,o){let l=[];if(r&&l.push(this.element),t.length>0){t=(t=t.replace(NIe,"."+this._enterClassName)).replace(zIe,"."+this._leaveClassName);let p=this._driver.query(this.element,t,1!=n);0!==n&&(p=n<0?p.slice(p.length+n,p.length):p.slice(0,n)),l.push(...p)}return!s&&0==l.length&&o.push(function jxe(i){return new yi(3014,!1)}()),l}}class oT{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new oT(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,n]of this._globalTimelineStyles)this._backFill.set(e,n||ay),this._currentKeyframe.set(e,ay);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&this._previousKeyframe.set("easing",e);const s=r&&r.params||{},o=function HIe(i,t){const e=new Map;let n;return i.forEach(r=>{if("*"===r){n=n||t.keys();for(let s of n)e.set(s,ay)}else k_(r,e)}),e}(t,this._globalTimelineStyles);for(let[l,u]of o){const p=ZE(u,s,n);this._pendingStyles.set(l,p),this._localTimelineStyles.has(l)||this._backFill.set(l,this._globalTimelineStyles.get(l)??ay),this._updateStyle(l,p)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,n)=>{const r=this._styleSummary.get(n);(!r||e.time>r.time)&&this._updateStyle(n,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((l,u)=>{const p=k_(l,new Map,this._backFill);p.forEach((v,w)=>{"!"===v?t.add(w):v===ay&&e.add(w)}),n||p.set("offset",u/this.duration),r.push(p)});const s=t.size?QE(t.values()):[],o=e.size?QE(e.values()):[];if(n){const l=r[0],u=new Map(l);l.set("offset",0),u.set("offset",1),r=[l,u]}return PR(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class UIe extends oT{constructor(t,e,n,r,s,o,l=!1){super(t,e,o.delay),this.keyframes=n,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=l,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const s=[],o=n+e,l=e/o,u=k_(t[0]);u.set("offset",0),s.push(u);const p=k_(t[0]);p.set("offset",b6(l)),s.push(p);const v=t.length-1;for(let w=1;w<=v;w++){let I=k_(t[w]);const T=I.get("offset");I.set("offset",b6((e+T*n)/o)),s.push(I)}n=o,e=0,r="",t=s}return PR(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function b6(i,t=3){const e=Math.pow(10,t-1);return Math.round(i*e)/e}class OR{}const GIe=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class WIe extends OR{normalizePropertyName(t,e){return MR(t)}normalizeStyleValue(t,e,n,r){let s="";const o=n.toString().trim();if(GIe.has(e)&&0!==n&&"0"!==n)if("number"==typeof n)s="px";else{const l=n.match(/^[+-]?[\d\.]+([a-z]*)$/);l&&0==l[1].length&&r.push(function kxe(i,t){return new yi(3005,!1)}())}return o+s}}function C6(i,t,e,n,r,s,o,l,u,p,v,w,I){return{type:0,element:i,triggerName:t,isRemovalTransition:r,fromState:e,fromStyles:s,toState:n,toStyles:o,timelines:l,queriedElements:u,preStyleProps:p,postStyleProps:v,totalTime:w,errors:I}}const FR={};class w6{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function jIe(i,t,e,n,r){return i.some(s=>s(t,e,n,r))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){let r=this._stateStyles.get("*");return void 0!==t&&(r=this._stateStyles.get(t?.toString())||r),r?r.buildStyles(e,n):new Map}build(t,e,n,r,s,o,l,u,p,v){const w=[],I=this.ast.options&&this.ast.options.params||FR,k=this.buildStyles(n,l&&l.params||FR,w),G=u&&u.params||FR,Y=this.buildStyles(r,G,w),ce=new Set,Se=new Map,Ae=new Map,Te="void"===r,Qe={params:$Ie(G,I),delay:this.ast.options?.delay},mt=v?[]:RR(t,e,this.ast.animation,s,o,k,Y,Qe,p,w);let zt=0;if(mt.forEach(Tt=>{zt=Math.max(Tt.duration+Tt.delay,zt)}),w.length)return C6(e,this._triggerName,n,r,Te,k,Y,[],[],Se,Ae,zt,w);mt.forEach(Tt=>{const ln=Tt.element,Hn=Np(Se,ln,new Set);Tt.preStyleProps.forEach(Wn=>Hn.add(Wn));const ei=Np(Ae,ln,new Set);Tt.postStyleProps.forEach(Wn=>ei.add(Wn)),ln!==e&&ce.add(ln)});const it=QE(ce.values());return C6(e,this._triggerName,n,r,Te,k,Y,mt,it,Se,Ae,zt)}}function $Ie(i,t){const e=Tx(t);for(const n in i)i.hasOwnProperty(n)&&null!=i[n]&&(e[n]=i[n]);return e}class qIe{constructor(t,e,n){this.styles=t,this.defaultParams=e,this.normalizer=n}buildStyles(t,e){const n=new Map,r=Tx(this.defaultParams);return Object.keys(t).forEach(s=>{const o=t[s];null!==o&&(r[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,l)=>{o&&(o=ZE(o,r,e));const u=this.normalizer.normalizePropertyName(l,e);o=this.normalizer.normalizeStyleValue(l,u,o,e),n.set(u,o)})}),n}}class YIe{constructor(t,e,n){this.name=t,this.ast=e,this._normalizer=n,this.transitionFactories=[],this.states=new Map,e.states.forEach(r=>{this.states.set(r.name,new qIe(r.style,r.options&&r.options.params||{},n))}),A6(this.states,"true","1"),A6(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new w6(t,r,this.states))}),this.fallbackTransition=function KIe(i,t,e){return new w6(i,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,l)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(o=>o.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function A6(i,t,e){i.has(t)?i.has(e)||i.set(e,i.get(t)):i.has(e)&&i.set(t,i.get(e))}const ZIe=new rT;class QIe{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,e){const n=[],s=DR(this._driver,e,n,[]);if(n.length)throw function Qxe(i){return new yi(3503,!1)}();this._animations.set(t,s)}_buildPlayer(t,e,n){const r=t.element,s=e6(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,s,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],s=this._animations.get(t);let o;const l=new Map;if(s?(o=RR(this._driver,e,s,IR,qE,new Map,new Map,n,ZIe,r),o.forEach(v=>{const w=Np(l,v.element,new Map);v.postStyleProps.forEach(I=>w.set(I,null))})):(r.push(function Jxe(){return new yi(3300,!1)}()),o=[]),r.length)throw function eIe(i){return new yi(3504,!1)}();l.forEach((v,w)=>{v.forEach((I,T)=>{v.set(T,this._driver.computeStyle(w,T,ay))})});const p=P_(o.map(v=>{const w=l.get(v.element);return this._buildPlayer(v,new Map,w)}));return this._playersById.set(t,p),p.onDestroy(()=>this.destroy(t)),this.players.push(p),p}destroy(t){const e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById.get(t);if(!e)throw function tIe(i){return new yi(3301,!1)}();return e}listen(t,e,n,r){const s=CR(e,"","","");return _R(this._getPlayer(t),n,s,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const s=this._getPlayer(t);switch(n){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const x6="ng-animate-queued",NR="ng-animate-disabled",i1e=[],I6={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},r1e={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ig="__ng_removed";class BR{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=function l1e(i){return i??null}(n?t.value:t),n){const s=Tx(t);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const n=this.options.params;Object.keys(e).forEach(r=>{null==n[r]&&(n[r]=e[r])})}}}const Dx="void",zR=new BR(Dx);class s1e{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Sg(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.has(e))throw function nIe(i,t){return new yi(3302,!1)}();if(null==n||0==n.length)throw function iIe(i){return new yi(3303,!1)}();if(!function c1e(i){return"start"==i||"done"==i}(n))throw function rIe(i,t){return new yi(3400,!1)}();const s=Np(this._elementListeners,t,[]),o={name:e,phase:n,callback:r};s.push(o);const l=Np(this._engine.statesByElement,t,new Map);return l.has(e)||(Sg(t,XE),Sg(t,XE+"-"+e),l.set(e,zR)),()=>{this._engine.afterFlush(()=>{const u=s.indexOf(o);u>=0&&s.splice(u,1),this._triggers.has(e)||l.delete(e)})}}register(t,e){return!this._triggers.has(t)&&(this._triggers.set(t,e),!0)}_getTrigger(t){const e=this._triggers.get(t);if(!e)throw function sIe(i){return new yi(3401,!1)}();return e}trigger(t,e,n,r=!0){const s=this._getTrigger(e),o=new VR(this.id,e,t);let l=this._engine.statesByElement.get(t);l||(Sg(t,XE),Sg(t,XE+"-"+e),this._engine.statesByElement.set(t,l=new Map));let u=l.get(e);const p=new BR(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&u&&p.absorbOptions(u.options),l.set(e,p),u||(u=zR),p.value!==Dx&&u.value===p.value){if(!function d1e(i,t){const e=Object.keys(i),n=Object.keys(t);if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){const s=e[r];if(!t.hasOwnProperty(s)||i[s]!==t[s])return!1}return!0}(u.params,p.params)){const G=[],Y=s.matchStyles(u.value,u.params,G),ce=s.matchStyles(p.value,p.params,G);G.length?this._engine.reportError(G):this._engine.afterFlush(()=>{lb(t,Y),gv(t,ce)})}return}const I=Np(this._engine.playersByElement,t,[]);I.forEach(G=>{G.namespaceId==this.id&&G.triggerName==e&&G.queued&&G.destroy()});let T=s.matchTransition(u.value,p.value,t,p.params),k=!1;if(!T){if(!r)return;T=s.fallbackTransition,k=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:T,fromState:u,toState:p,player:o,isFallbackTransition:k}),k||(Sg(t,x6),o.onStart(()=>{ow(t,x6)})),o.onDone(()=>{let G=this.players.indexOf(o);G>=0&&this.players.splice(G,1);const Y=this._engine.playersByElement.get(t);if(Y){let ce=Y.indexOf(o);ce>=0&&Y.splice(ce,1)}}),this.players.push(o),I.push(o),o}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(n=>n.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,YE,!0);n.forEach(r=>{if(r[Ig])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,e,n,r){const s=this._engine.statesByElement.get(t),o=new Map;if(s){const l=[];if(s.forEach((u,p)=>{if(o.set(p,u.value),this._triggers.has(p)){const v=this.trigger(t,p,Dx,r);v&&l.push(v)}}),l.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,o),n&&P_(l).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),n=this._engine.statesByElement.get(t);if(e&&n){const r=new Set;e.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const u=this._triggers.get(o).fallbackTransition,p=n.get(o)||zR,v=new BR(Dx),w=new VR(this.id,o,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:o,transition:u,fromState:p,toState:v,player:w,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const s=n.players.length?n.playersByQueriedElement.get(t):[];if(s&&s.length)r=!0;else{let o=t;for(;o=o.parentNode;)if(n.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const s=t[Ig];(!s||s===I6)&&(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){Sg(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const s=n.element,o=this._elementListeners.get(s);o&&o.forEach(l=>{if(l.name==n.triggerName){const u=CR(s,n.triggerName,n.fromState.value,n.toState.value);u._data=t,_R(n.player,l.phase,u,l.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((n,r)=>{const s=n.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(n.element,r.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(n=>n.element===t)||e,e}}class o1e{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(n=>{n.queued&&t.push(n)})}),t}createNamespace(t,e){const n=new s1e(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList,r=this.namespacesByHostElement;if(n.length-1>=0){let o=!1,l=this.driver.getParentElement(e);for(;l;){const u=r.get(l);if(u){const p=n.indexOf(u);n.splice(p+1,0,t),o=!0;break}l=this.driver.getParentElement(l)}o||n.unshift(t)}else n.push(t);return r.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const r=this._namespaceList.indexOf(n);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n)for(let r of n.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&e.add(s)}return e}trigger(t,e,n,r){if(aT(e)){const s=this._fetchNamespace(t);if(s)return s.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!aT(e))return;const s=e[Ig];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(e);o>=0&&this.collectedLeaveElements.splice(o,1)}if(t){const o=this._fetchNamespace(t);o&&o.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Sg(t,NR)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),ow(t,NR))}removeNode(t,e,n,r){if(aT(e)){const s=t?this._fetchNamespace(t):null;if(s?s.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const o=this.namespacesByHostElement.get(e);o&&o.id!==t&&o.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r,s){this.collectedLeaveElements.push(e),e[Ig]={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1,previousTriggersValues:s}}listen(t,e,n,r,s){return aT(e)?this._fetchNamespace(t).listen(e,n,r,s):()=>{}}_buildInstruction(t,e,n,r,s){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,s)}destroyInnerAnimations(t){let e=this.driver.query(t,YE,!0);e.forEach(n=>this.destroyActiveAnimationsForElement(n)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,SR,!0),e.forEach(n=>this.finishActiveQueriedAnimationOnElement(n)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(n=>{n.queued?n.markedForDestroy=!0:n.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(n=>n.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return P_(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[Ig];if(e&&e.setForRemoval){if(t[Ig]=I6,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(NR)&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(n=>{this.markElementAsDisabled(n,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((n,r)=>this._balanceNamespaceList(n,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)Sg(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let r=0;r<n.length;r++)n[r]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(n=>n()),this._flushFns=[],this._whenQuietFns.length){const n=this._whenQuietFns;this._whenQuietFns=[],e.length?P_(e).onDone(()=>{n.forEach(r=>r())}):n.forEach(r=>r())}}reportError(t){throw function oIe(i){return new yi(3402,!1)}()}_flushAnimations(t,e){const n=new rT,r=[],s=new Map,o=[],l=new Map,u=new Map,p=new Map,v=new Set;this.disabledNodes.forEach(xn=>{v.add(xn);const Gn=this.driver.query(xn,".ng-animate-queued",!0);for(let Nn=0;Nn<Gn.length;Nn++)v.add(Gn[Nn])});const w=this.bodyNode,I=Array.from(this.statesByElement.keys()),T=T6(I,this.collectedEnterElements),k=new Map;let G=0;T.forEach((xn,Gn)=>{const Nn=IR+G++;k.set(Gn,Nn),xn.forEach(In=>Sg(In,Nn))});const Y=[],ce=new Set,Se=new Set;for(let xn=0;xn<this.collectedLeaveElements.length;xn++){const Gn=this.collectedLeaveElements[xn],Nn=Gn[Ig];Nn&&Nn.setForRemoval&&(Y.push(Gn),ce.add(Gn),Nn.hasAnimation?this.driver.query(Gn,".ng-star-inserted",!0).forEach(In=>ce.add(In)):Se.add(Gn))}const Ae=new Map,Te=T6(I,Array.from(ce));Te.forEach((xn,Gn)=>{const Nn=qE+G++;Ae.set(Gn,Nn),xn.forEach(In=>Sg(In,Nn))}),t.push(()=>{T.forEach((xn,Gn)=>{const Nn=k.get(Gn);xn.forEach(In=>ow(In,Nn))}),Te.forEach((xn,Gn)=>{const Nn=Ae.get(Gn);xn.forEach(In=>ow(In,Nn))}),Y.forEach(xn=>{this.processLeaveNode(xn)})});const Qe=[],mt=[];for(let xn=this._namespaceList.length-1;xn>=0;xn--)this._namespaceList[xn].drainQueuedTransitions(e).forEach(Nn=>{const In=Nn.player,Vn=Nn.element;if(Qe.push(In),this.collectedEnterElements.length){const _s=Vn[Ig];if(_s&&_s.setForMove){if(_s.previousTriggersValues&&_s.previousTriggersValues.has(Nn.triggerName)){const ps=_s.previousTriggersValues.get(Nn.triggerName),gs=this.statesByElement.get(Nn.element);if(gs&&gs.has(Nn.triggerName)){const Pr=gs.get(Nn.triggerName);Pr.value=ps,gs.set(Nn.triggerName,Pr)}}return void In.destroy()}}const Yi=!w||!this.driver.containsElement(w,Vn),Ei=Ae.get(Vn),rr=k.get(Vn),fr=this._buildInstruction(Nn,n,rr,Ei,Yi);if(fr.errors&&fr.errors.length)return void mt.push(fr);if(Yi)return In.onStart(()=>lb(Vn,fr.fromStyles)),In.onDestroy(()=>gv(Vn,fr.toStyles)),void r.push(In);if(Nn.isFallbackTransition)return In.onStart(()=>lb(Vn,fr.fromStyles)),In.onDestroy(()=>gv(Vn,fr.toStyles)),void r.push(In);const Ss=[];fr.timelines.forEach(_s=>{_s.stretchStartingKeyframe=!0,this.disabledNodes.has(_s.element)||Ss.push(_s)}),fr.timelines=Ss,n.append(Vn,fr.timelines),o.push({instruction:fr,player:In,element:Vn}),fr.queriedElements.forEach(_s=>Np(l,_s,[]).push(In)),fr.preStyleProps.forEach((_s,ps)=>{if(_s.size){let gs=u.get(ps);gs||u.set(ps,gs=new Set),_s.forEach((Pr,Io)=>gs.add(Io))}}),fr.postStyleProps.forEach((_s,ps)=>{let gs=p.get(ps);gs||p.set(ps,gs=new Set),_s.forEach((Pr,Io)=>gs.add(Io))})});if(mt.length){const xn=[];mt.forEach(Gn=>{xn.push(function aIe(i,t){return new yi(3505,!1)}())}),Qe.forEach(Gn=>Gn.destroy()),this.reportError(xn)}const zt=new Map,it=new Map;o.forEach(xn=>{const Gn=xn.element;n.has(Gn)&&(it.set(Gn,Gn),this._beforeAnimationBuild(xn.player.namespaceId,xn.instruction,zt))}),r.forEach(xn=>{const Gn=xn.element;this._getPreviousPlayers(Gn,!1,xn.namespaceId,xn.triggerName,null).forEach(In=>{Np(zt,Gn,[]).push(In),In.destroy()})});const Tt=Y.filter(xn=>D6(xn,u,p)),ln=new Map;E6(ln,this.driver,Se,p,ay).forEach(xn=>{D6(xn,u,p)&&Tt.push(xn)});const ei=new Map;T.forEach((xn,Gn)=>{E6(ei,this.driver,new Set(xn),u,"!")}),Tt.forEach(xn=>{const Gn=ln.get(xn),Nn=ei.get(xn);ln.set(xn,new Map([...Array.from(Gn?.entries()??[]),...Array.from(Nn?.entries()??[])]))});const Wn=[],En=[],zn={};o.forEach(xn=>{const{element:Gn,player:Nn,instruction:In}=xn;if(n.has(Gn)){if(v.has(Gn))return Nn.onDestroy(()=>gv(Gn,In.toStyles)),Nn.disabled=!0,Nn.overrideTotalTime(In.totalTime),void r.push(Nn);let Vn=zn;if(it.size>1){let Ei=Gn;const rr=[];for(;Ei=Ei.parentNode;){const fr=it.get(Ei);if(fr){Vn=fr;break}rr.push(Ei)}rr.forEach(fr=>it.set(fr,Vn))}const Yi=this._buildAnimation(Nn.namespaceId,In,zt,s,ei,ln);if(Nn.setRealPlayer(Yi),Vn===zn)Wn.push(Nn);else{const Ei=this.playersByElement.get(Vn);Ei&&Ei.length&&(Nn.parentPlayer=P_(Ei)),r.push(Nn)}}else lb(Gn,In.fromStyles),Nn.onDestroy(()=>gv(Gn,In.toStyles)),En.push(Nn),v.has(Gn)&&r.push(Nn)}),En.forEach(xn=>{const Gn=s.get(xn.element);if(Gn&&Gn.length){const Nn=P_(Gn);xn.setRealPlayer(Nn)}}),r.forEach(xn=>{xn.parentPlayer?xn.syncPlayerEvents(xn.parentPlayer):xn.destroy()});for(let xn=0;xn<Y.length;xn++){const Gn=Y[xn],Nn=Gn[Ig];if(ow(Gn,qE),Nn&&Nn.hasAnimation)continue;let In=[];if(l.size){let Yi=l.get(Gn);Yi&&Yi.length&&In.push(...Yi);let Ei=this.driver.query(Gn,SR,!0);for(let rr=0;rr<Ei.length;rr++){let fr=l.get(Ei[rr]);fr&&fr.length&&In.push(...fr)}}const Vn=In.filter(Yi=>!Yi.destroyed);Vn.length?u1e(this,Gn,Vn):this.processLeaveNode(Gn)}return Y.length=0,Wn.forEach(xn=>{this.players.push(xn),xn.onDone(()=>{xn.destroy();const Gn=this.players.indexOf(xn);this.players.splice(Gn,1)}),xn.play()}),Wn}elementContainsData(t,e){let n=!1;const r=e[Ig];return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,s){let o=[];if(e){const l=this.playersByQueriedElement.get(t);l&&(o=l)}else{const l=this.playersByElement.get(t);if(l){const u=!s||s==Dx;l.forEach(p=>{p.queued||!u&&p.triggerName!=r||o.push(p)})}}return(n||r)&&(o=o.filter(l=>!(n&&n!=l.namespaceId||r&&r!=l.triggerName))),o}_beforeAnimationBuild(t,e,n){const s=e.element,o=e.isRemovalTransition?void 0:t,l=e.isRemovalTransition?void 0:e.triggerName;for(const u of e.timelines){const p=u.element,v=p!==s,w=Np(n,p,[]);this._getPreviousPlayers(p,v,o,l,e.toState).forEach(T=>{const k=T.getRealPlayer();k.beforeDestroy&&k.beforeDestroy(),T.destroy(),w.push(T)})}lb(s,e.fromStyles)}_buildAnimation(t,e,n,r,s,o){const l=e.triggerName,u=e.element,p=[],v=new Set,w=new Set,I=e.timelines.map(k=>{const G=k.element;v.add(G);const Y=G[Ig];if(Y&&Y.removedBeforeQueried)return new IA(k.duration,k.delay);const ce=G!==u,Se=function h1e(i){const t=[];return M6(i,t),t}((n.get(G)||i1e).map(zt=>zt.getRealPlayer())).filter(zt=>!!zt.element&&zt.element===G),Ae=s.get(G),Te=o.get(G),Qe=e6(0,this._normalizer,0,k.keyframes,Ae,Te),mt=this._buildPlayer(k,Qe,Se);if(k.subTimeline&&r&&w.add(G),ce){const zt=new VR(t,l,G);zt.setRealPlayer(mt),p.push(zt)}return mt});p.forEach(k=>{Np(this.playersByQueriedElement,k.element,[]).push(k),k.onDone(()=>function a1e(i,t,e){let n=i.get(t);if(n){if(n.length){const r=n.indexOf(e);n.splice(r,1)}0==n.length&&i.delete(t)}return n}(this.playersByQueriedElement,k.element,k))}),v.forEach(k=>Sg(k,u6));const T=P_(I);return T.onDestroy(()=>{v.forEach(k=>ow(k,u6)),gv(u,e.toStyles)}),w.forEach(k=>{Np(r,k,[]).push(T)}),T}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new IA(t.duration,t.delay)}}class VR{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new IA,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,n)=>{e.forEach(r=>_R(t,n,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Np(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function aT(i){return i&&1===i.nodeType}function S6(i,t){const e=i.style.display;return i.style.display=t??"none",e}function E6(i,t,e,n,r){const s=[];e.forEach(u=>s.push(S6(u)));const o=[];n.forEach((u,p)=>{const v=new Map;u.forEach(w=>{const I=t.computeStyle(p,w,r);v.set(w,I),(!I||0==I.length)&&(p[Ig]=r1e,o.push(p))}),i.set(p,v)});let l=0;return e.forEach(u=>S6(u,s[l++])),o}function T6(i,t){const e=new Map;if(i.forEach(l=>e.set(l,[])),0==t.length)return e;const r=new Set(t),s=new Map;function o(l){if(!l)return 1;let u=s.get(l);if(u)return u;const p=l.parentNode;return u=e.has(p)?p:r.has(p)?1:o(p),s.set(l,u),u}return t.forEach(l=>{const u=o(l);1!==u&&e.get(u).push(l)}),e}function Sg(i,t){i.classList?.add(t)}function ow(i,t){i.classList?.remove(t)}function u1e(i,t,e){P_(e).onDone(()=>i.processLeaveNode(t))}function M6(i,t){for(let e=0;e<i.length;e++){const n=i[e];n instanceof XV?M6(n.players,t):t.push(n)}}function D6(i,t,e){const n=e.get(i);if(!n)return!1;let r=t.get(i);return r?n.forEach(s=>r.add(s)):t.set(i,n),e.delete(i),!0}class lT{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new o1e(t,e,n),this._timelineEngine=new QIe(t,e,n),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(t,e,n,r,s){const o=t+"-"+r;let l=this._triggerCache[o];if(!l){const u=[],v=DR(this._driver,s,u,[]);if(u.length)throw function Kxe(i,t){return new yi(3404,!1)}();l=function XIe(i,t,e){return new YIe(i,t,e)}(r,v,this._normalizer),this._triggerCache[o]=l}this._transitionEngine.registerTrigger(e,r,l)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[s,o]=t6(n);this._timelineEngine.command(s,e,o,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,s){if("@"==n.charAt(0)){const[o,l]=t6(n);return this._timelineEngine.listen(o,e,l,s)}return this._transitionEngine.listen(t,e,n,r,s)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let p1e=(()=>{class i{constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let s=i.initialStylesByElement.get(e);s||i.initialStylesByElement.set(e,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&gv(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(gv(this._element,this._initialStyles),this._endStyles&&(gv(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(i.initialStylesByElement.delete(this._element),this._startStyles&&(lb(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(lb(this._element,this._endStyles),this._endStyles=null),gv(this._element,this._initialStyles),this._state=3)}}return i.initialStylesByElement=new WeakMap,i})();function UR(i){let t=null;return i.forEach((e,n)=>{(function g1e(i){return"display"===i||"position"===i})(n)&&(t=t||new Map,t.set(n,e))}),t}class L6{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){const e=[];return t.forEach(n=>{e.push(Object.fromEntries(n))}),e}_triggerWebAnimation(t,e,n){return t.animate(this._convertKeyframesToObject(e),n)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((n,r)=>{"offset"!==r&&t.set(r,this._finished?n:m6(this.element,r))}),this.currentSnapshot=t}triggerCallback(t){const e="start"===t?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}class m1e{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}matchesElement(t,e){return!1}containsElement(t,e){return o6(t,e)}getParentElement(t){return AR(t)}query(t,e,n){return a6(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}animate(t,e,n,r,s,o=[]){const u={duration:n,delay:r,fill:0==r?"both":"forwards"};s&&(u.easing=s);const p=new Map,v=o.filter(T=>T instanceof L6);(function bIe(i,t){return 0===i||0===t})(n,r)&&v.forEach(T=>{T.currentSnapshot.forEach((k,G)=>p.set(G,k))});let w=function mIe(i){return i.length?i[0]instanceof Map?i:i.map(t=>h6(t)):[]}(e).map(T=>k_(T));w=function CIe(i,t,e){if(e.size&&t.length){let n=t[0],r=[];if(e.forEach((s,o)=>{n.has(o)||r.push(o),n.set(o,s)}),r.length)for(let s=1;s<t.length;s++){let o=t[s];r.forEach(l=>o.set(l,m6(i,l)))}}return t}(t,w,p);const I=function f1e(i,t){let e=null,n=null;return Array.isArray(t)&&t.length?(e=UR(t[0]),t.length>1&&(n=UR(t[t.length-1]))):t instanceof Map&&(e=UR(t)),e||n?new p1e(i,e,n):null}(t,w);return new L6(t,w,u,I)}}let v1e=(()=>{class i extends WV{constructor(e,n){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(n.body,{id:"0",encapsulation:Ma.None,styles:[],data:{animation:[]}})}build(e){const n=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(e)?jV(e):e;return P6(this._renderer,null,n,"register",[r]),new y1e(n,this._renderer)}}return i.\u0275fac=function(e){return new(e||i)(qn(c),qn(Ku))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})();class y1e extends class DJ{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new _1e(this._id,t,e||{},this._renderer)}}class _1e{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return P6(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function P6(i,t,e,n,r){return i.setProperty(t,`@@${e}:${n}`,r)}const R6="@.disabled";let b1e=(()=>{class i{constructor(e,n,r){this.delegate=e,this.engine=n,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),n.onRemovalComplete=(s,o)=>{const l=o?.parentNode(s);l&&o.removeChild(l,s)}}createRenderer(e,n){const s=this.delegate.createRenderer(e,n);if(!(e&&n&&n.data&&n.data.animation)){let v=this._rendererCache.get(s);return v||(v=new k6("",s,this.engine),this._rendererCache.set(s,v)),v}const o=n.id,l=n.id+"-"+this._currentId;this._currentId++,this.engine.register(l,e);const u=v=>{Array.isArray(v)?v.forEach(u):this.engine.registerTrigger(o,l,e,v.name,v)};return n.data.animation.forEach(u),new C1e(this,l,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,n,r){e>=0&&e<this._microtaskId?this._zone.run(()=>n(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,l]=s;o(l)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([n,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return i.\u0275fac=function(e){return new(e||i)(qn(c),qn(lT),qn(Vo))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})();class k6{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?r=>e.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,r=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){"@"==e.charAt(0)&&e==R6?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class C1e extends k6{constructor(t,e,n,r){super(e,n,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){"@"==e.charAt(0)?"."==e.charAt(1)&&e==R6?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.slice(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if("@"==e.charAt(0)){const r=function w1e(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}(t);let s=e.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function A1e(i){const t=i.indexOf(".");return[i.substring(0,t),i.slice(t+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,l=>{this.factory.scheduleListenerCallback(l._data||-1,n,l)})}return this.delegate.listen(t,e,n)}}const O6=[{provide:WV,useClass:v1e},{provide:OR,useFactory:function I1e(){return new WIe}},{provide:lT,useClass:(()=>{class i extends lT{constructor(e,n,r,s){super(e.body,n,r)}ngOnDestroy(){this.flush()}}return i.\u0275fac=function(e){return new(e||i)(qn(Ku),qn(xR),qn(OR),qn(Hw))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})()},{provide:c,useFactory:function S1e(i,t,e){return new b1e(i,t,e)},deps:[ZI,lT,Vo]}],HR=[{provide:xR,useFactory:()=>new m1e},{provide:jF,useValue:"BrowserAnimations"},...O6],F6=[{provide:xR,useClass:l6},{provide:jF,useValue:"NoopAnimations"},...O6];let E1e=(()=>{class i{static withConfig(e){return{ngModule:i,providers:e.disableAnimations?F6:HR}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({providers:HR,imports:[a3]}),i})();const T1e=["sliderHandle"],M1e=["sliderHandleStart"],D1e=["sliderHandleEnd"],L1e=function(i,t){return{left:i,width:t}};function P1e(i,t){if(1&i&&Bn(0,"span",4),2&i){const e=be();de("ngStyle",ss(1,L1e,null!=e.offset?e.offset+"%":e.handleValues[0]+"%",e.diff?e.diff+"%":e.handleValues[1]-e.handleValues[0]+"%"))}}const R1e=function(i,t){return{bottom:i,height:t}};function k1e(i,t){if(1&i&&Bn(0,"span",4),2&i){const e=be();de("ngStyle",ss(1,R1e,null!=e.offset?e.offset+"%":e.handleValues[0]+"%",e.diff?e.diff+"%":e.handleValues[1]-e.handleValues[0]+"%"))}}const O1e=function(i){return{height:i}};function F1e(i,t){if(1&i&&Bn(0,"span",4),2&i){const e=be();de("ngStyle",_i(1,O1e,e.handleValue+"%"))}}const N1e=function(i){return{width:i}};function B1e(i,t){if(1&i&&Bn(0,"span",4),2&i){const e=be();de("ngStyle",_i(1,N1e,e.handleValue+"%"))}}const GR=function(i,t){return{left:i,bottom:t}};function z1e(i,t){if(1&i){const e=vi();Ke(0,"span",5,6),mn("keydown",function(r){return Pt(e),Rt(be().onHandleKeydown(r))})("mousedown",function(r){return Pt(e),Rt(be().onMouseDown(r))})("touchstart",function(r){return Pt(e),Rt(be().onTouchStart(r))})("touchmove",function(r){return Pt(e),Rt(be().onTouchMove(r))})("touchend",function(r){return Pt(e),Rt(be().onTouchEnd(r))}),Je()}if(2&i){const e=be();Ad("transition",e.dragging?"none":null),de("ngStyle",ss(8,GR,"horizontal"==e.orientation?e.handleValue+"%":null,"vertical"==e.orientation?e.handleValue+"%":null)),vr("tabindex",e.disabled?null:e.tabindex)("aria-valuemin",e.min)("aria-valuenow",e.value)("aria-valuemax",e.max)("aria-labelledby",e.ariaLabelledBy)}}const N6=function(i){return{"p-slider-handle-active":i}};function V1e(i,t){if(1&i){const e=vi();Ke(0,"span",7,8),mn("keydown",function(r){return Pt(e),Rt(be().onHandleKeydown(r,0))})("mousedown",function(r){return Pt(e),Rt(be().onMouseDown(r,0))})("touchstart",function(r){return Pt(e),Rt(be().onTouchStart(r,0))})("touchmove",function(r){return Pt(e),Rt(be().onTouchMove(r,0))})("touchend",function(r){return Pt(e),Rt(be().onTouchEnd(r))}),Je()}if(2&i){const e=be();Ad("transition",e.dragging?"none":null),de("ngStyle",ss(9,GR,e.rangeStartLeft,e.rangeStartBottom))("ngClass",_i(12,N6,0==e.handleIndex)),vr("tabindex",e.disabled?null:e.tabindex)("aria-valuemin",e.min)("aria-valuenow",e.value?e.value[0]:null)("aria-valuemax",e.max)("aria-labelledby",e.ariaLabelledBy)}}function U1e(i,t){if(1&i){const e=vi();Ke(0,"span",7,9),mn("keydown",function(r){return Pt(e),Rt(be().onHandleKeydown(r,1))})("mousedown",function(r){return Pt(e),Rt(be().onMouseDown(r,1))})("touchstart",function(r){return Pt(e),Rt(be().onTouchStart(r,1))})("touchmove",function(r){return Pt(e),Rt(be().onTouchMove(r,1))})("touchend",function(r){return Pt(e),Rt(be().onTouchEnd(r))}),Je()}if(2&i){const e=be();Ad("transition",e.dragging?"none":null),de("ngStyle",ss(9,GR,e.rangeEndLeft,e.rangeEndBottom))("ngClass",_i(12,N6,1==e.handleIndex)),vr("tabindex",e.disabled?null:e.tabindex)("aria-valuemin",e.min)("aria-valuenow",e.value?e.value[1]:null)("aria-valuemax",e.max)("aria-labelledby",e.ariaLabelledBy)}}const H1e=function(i,t,e,n){return{"p-slider p-component":!0,"p-disabled":i,"p-slider-horizontal":t,"p-slider-vertical":e,"p-slider-animate":n}},G1e={provide:Cc,useExisting:cs(()=>W1e),multi:!0};let W1e=(()=>{class i{constructor(e,n,r,s){this.el=e,this.renderer=n,this.ngZone=r,this.cd=s,this.min=0,this.max=100,this.orientation="horizontal",this.tabindex=0,this.onChange=new Fn,this.onSlideEnd=new Fn,this.handleValues=[],this.onModelChange=()=>{},this.onModelTouched=()=>{},this.handleIndex=0}onMouseDown(e,n){this.disabled||(this.dragging=!0,this.updateDomData(),this.sliderHandleClick=!0,this.handleIndex=this.range&&this.handleValues&&this.handleValues[0]===this.max?0:n,this.bindDragListeners(),e.target.focus(),e.preventDefault(),this.animate&&Ft.removeClass(this.el.nativeElement.children[0],"p-slider-animate"))}onTouchStart(e,n){if(!this.disabled){var r=e.changedTouches[0];this.startHandleValue=this.range?this.handleValues[n]:this.handleValue,this.dragging=!0,this.handleIndex=this.range&&this.handleValues&&this.handleValues[0]===this.max?0:n,"horizontal"===this.orientation?(this.startx=parseInt(r.clientX,10),this.barWidth=this.el.nativeElement.children[0].offsetWidth):(this.starty=parseInt(r.clientY,10),this.barHeight=this.el.nativeElement.children[0].offsetHeight),this.animate&&Ft.removeClass(this.el.nativeElement.children[0],"p-slider-animate"),e.preventDefault()}}onTouchMove(e,n){if(!this.disabled){var s,r=e.changedTouches[0];s="horizontal"===this.orientation?Math.floor(100*(parseInt(r.clientX,10)-this.startx)/this.barWidth)+this.startHandleValue:Math.floor(100*(this.starty-parseInt(r.clientY,10))/this.barHeight)+this.startHandleValue,this.setValueFromHandle(e,s),e.preventDefault()}}onTouchEnd(e,n){this.disabled||(this.dragging=!1,this.onSlideEnd.emit(this.range?{originalEvent:e,values:this.values}:{originalEvent:e,value:this.value}),this.animate&&Ft.addClass(this.el.nativeElement.children[0],"p-slider-animate"),e.preventDefault())}onBarClick(e){this.disabled||(this.sliderHandleClick||(this.updateDomData(),this.handleChange(e)),this.sliderHandleClick=!1)}onHandleKeydown(e,n){this.disabled||(38==e.which||39==e.which?this.spin(e,1,n):(37==e.which||40==e.which)&&this.spin(e,-1,n))}spin(e,n,r){let s=(this.step||1)*n;this.range?(this.handleIndex=r,this.updateValue(this.values[this.handleIndex]+s),this.updateHandleValue()):(this.updateValue(this.value+s),this.updateHandleValue()),e.preventDefault()}handleChange(e){let n=this.calculateHandleValue(e);this.setValueFromHandle(e,n)}bindDragListeners(){this.ngZone.runOutsideAngular(()=>{const e=this.el?this.el.nativeElement.ownerDocument:"document";this.dragListener||(this.dragListener=this.renderer.listen(e,"mousemove",n=>{this.dragging&&this.ngZone.run(()=>{this.handleChange(n)})})),this.mouseupListener||(this.mouseupListener=this.renderer.listen(e,"mouseup",n=>{this.dragging&&(this.dragging=!1,this.ngZone.run(()=>{this.onSlideEnd.emit(this.range?{originalEvent:n,values:this.values}:{originalEvent:n,value:this.value}),this.animate&&Ft.addClass(this.el.nativeElement.children[0],"p-slider-animate")}))}))})}unbindDragListeners(){this.dragListener&&this.dragListener(),this.mouseupListener&&this.mouseupListener()}setValueFromHandle(e,n){this.sliderHandleClick=!1;let r=this.getValueFromHandle(n);this.range?this.step?this.handleStepChange(r,this.values[this.handleIndex]):(this.handleValues[this.handleIndex]=n,this.updateValue(r,e)):this.step?this.handleStepChange(r,this.value):(this.handleValue=n,this.updateValue(r,e)),this.cd.markForCheck()}handleStepChange(e,n){let r=e-n,s=n;r<0?s=n+Math.ceil(e/this.step-n/this.step)*this.step:r>0&&(s=n+Math.floor(e/this.step-n/this.step)*this.step),this.updateValue(s),this.updateHandleValue()}writeValue(e){this.range?this.values=e||[0,0]:this.value=e||0,this.updateHandleValue(),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}get rangeStartLeft(){return this.isVertical()?null:this.handleValues[0]+"%"}get rangeStartBottom(){return this.isVertical()?this.handleValues[0]+"%":"auto"}get rangeEndLeft(){return this.isVertical()?null:this.handleValues[1]+"%"}get rangeEndBottom(){return this.isVertical()?this.handleValues[1]+"%":"auto"}isVertical(){return"vertical"===this.orientation}updateDomData(){let e=this.el.nativeElement.children[0].getBoundingClientRect();this.initX=e.left+Ft.getWindowScrollLeft(),this.initY=e.top+Ft.getWindowScrollTop(),this.barWidth=this.el.nativeElement.children[0].offsetWidth,this.barHeight=this.el.nativeElement.children[0].offsetHeight}calculateHandleValue(e){return"horizontal"===this.orientation?100*(e.pageX-this.initX)/this.barWidth:100*(this.initY+this.barHeight-e.pageY)/this.barHeight}updateHandleValue(){this.range?(this.handleValues[0]=100*(this.values[0]<this.min?0:this.values[0]-this.min)/(this.max-this.min),this.handleValues[1]=100*(this.values[1]>this.max?100:this.values[1]-this.min)/(this.max-this.min)):this.handleValue=this.value<this.min?0:this.value>this.max?100:100*(this.value-this.min)/(this.max-this.min)}updateValue(e,n){if(this.range){let r=e;0==this.handleIndex?(r<this.min?(r=this.min,this.handleValues[0]=0):r>this.values[1]&&(r>this.max&&(r=this.max,this.handleValues[0]=100),this.handleValues[0]=r),this.sliderHandleStart.nativeElement.focus()):(r>this.max?(r=this.max,this.handleValues[1]=100,this.offset=this.handleValues[1]):r<this.min?(r=this.min,this.handleValues[1]=r):r<this.values[0]&&(this.offset=this.handleValues[1]),this.sliderHandleEnd.nativeElement.focus()),this.diff=Math.abs(this.handleValues[0]-this.handleValues[1]),this.offset=Math.min(this.handleValues[0],this.handleValues[1]),this.values[this.handleIndex]=this.getNormalizedValue(r),this.onModelChange([this.minVal,this.maxVal]),this.onChange.emit({event:n,values:this.values})}else e<this.min?(e=this.min,this.handleValue=0):e>this.max&&(e=this.max,this.handleValue=100),this.value=this.getNormalizedValue(e),this.onModelChange(this.value),this.onChange.emit({event:n,value:this.value}),this.sliderHandle.nativeElement.focus()}getValueFromHandle(e){return e/100*(this.max-this.min)+this.min}getDecimalsCount(e){return e&&Math.floor(e)!==e&&e.toString().split(".")[1].length||0}getNormalizedValue(e){let n=this.getDecimalsCount(this.step);return n>0?+e.toFixed(n):Math.floor(e)}ngOnDestroy(){this.unbindDragListeners()}get minVal(){return Math.min(this.values[1],this.values[0])}get maxVal(){return Math.max(this.values[1],this.values[0])}}return i.\u0275fac=function(e){return new(e||i)(Xt(Yn),Xt(d),Xt(Vo),Xt(xo))},i.\u0275cmp=_r({type:i,selectors:[["p-slider"]],viewQuery:function(e,n){if(1&e&&(Tr(T1e,5),Tr(M1e,5),Tr(D1e,5)),2&e){let r;Wi(r=ji())&&(n.sliderHandle=r.first),Wi(r=ji())&&(n.sliderHandleStart=r.first),Wi(r=ji())&&(n.sliderHandleEnd=r.first)}},hostAttrs:[1,"p-element"],inputs:{animate:"animate",disabled:"disabled",min:"min",max:"max",orientation:"orientation",step:"step",range:"range",style:"style",styleClass:"styleClass",ariaLabelledBy:"ariaLabelledBy",tabindex:"tabindex"},outputs:{onChange:"onChange",onSlideEnd:"onSlideEnd"},features:[Ao([G1e])],decls:8,vars:16,consts:[[3,"ngStyle","ngClass","click"],["class","p-slider-range",3,"ngStyle",4,"ngIf"],["class","p-slider-handle",3,"transition","ngStyle","keydown","mousedown","touchstart","touchmove","touchend",4,"ngIf"],["class","p-slider-handle",3,"transition","ngStyle","ngClass","keydown","mousedown","touchstart","touchmove","touchend",4,"ngIf"],[1,"p-slider-range",3,"ngStyle"],[1,"p-slider-handle",3,"ngStyle","keydown","mousedown","touchstart","touchmove","touchend"],["sliderHandle",""],[1,"p-slider-handle",3,"ngStyle","ngClass","keydown","mousedown","touchstart","touchmove","touchend"],["sliderHandleStart",""],["sliderHandleEnd",""]],template:function(e,n){1&e&&(Ke(0,"div",0),mn("click",function(s){return n.onBarClick(s)}),$e(1,P1e,1,4,"span",1),$e(2,k1e,1,4,"span",1),$e(3,F1e,1,3,"span",1),$e(4,B1e,1,3,"span",1),$e(5,z1e,2,11,"span",2),$e(6,V1e,2,14,"span",3),$e(7,U1e,2,14,"span",3),Je()),2&e&&(kr(n.styleClass),de("ngStyle",n.style)("ngClass",sf(11,H1e,n.disabled,"horizontal"==n.orientation,"vertical"==n.orientation,n.animate)),Ie(1),de("ngIf",n.range&&"horizontal"==n.orientation),Ie(1),de("ngIf",n.range&&"vertical"==n.orientation),Ie(1),de("ngIf",!n.range&&"vertical"==n.orientation),Ie(1),de("ngIf",!n.range&&"horizontal"==n.orientation),Ie(1),de("ngIf",!n.range),Ie(1),de("ngIf",n.range),Ie(1),de("ngIf",n.range))},dependencies:[no,ho,Po],styles:[".p-slider{position:relative}.p-slider .p-slider-handle{position:absolute;cursor:grab;touch-action:none;display:block}.p-slider-range{position:absolute;display:block}.p-slider-horizontal .p-slider-range{top:0;left:0;height:100%}.p-slider-horizontal .p-slider-handle{top:50%}.p-slider-vertical{height:100px}.p-slider-vertical .p-slider-handle{left:50%}.p-slider-vertical .p-slider-range{bottom:0;left:0;width:100%}\n"],encapsulation:2,changeDetection:0}),i})(),j1e=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({imports:[Os]}),i})();function $1e(i,t){if(1&i&&(Ke(0,"span"),li(1),Je()),2&i){const e=be();Ie(1),ts(e.label)}}function q1e(i,t){1&i&&Ni(0)}const Lx=function(i){return{height:i}},X1e=function(i,t){return{"p-highlight":i,"p-disabled":t}},Y1e=function(i){return{"p-highlight":i}},B6=function(i){return{"pi pi-check":i}},Px=function(i){return{$implicit:i}},K1e=["container"],Z1e=["filterInput"],Q1e=["in"],J1e=["items"],eSe=["scroller"];function tSe(i,t){if(1&i&&(zr(0),li(1),Vr()),2&i){const e=be(2);Ie(1),ts(e.valuesAsString||"empty")}}function nSe(i,t){if(1&i){const e=vi();Ke(0,"span",18),mn("click",function(r){Pt(e);const s=be().$implicit;return Rt(be(3).removeChip(s,r))}),Je()}}function iSe(i,t){if(1&i&&(Ke(0,"div",14,15)(2,"span",16),li(3),Je(),$e(4,nSe,1,0,"span",17),Je()),2&i){const e=t.$implicit,n=be(3);Ie(3),ts(n.findLabelByValue(e)),Ie(1),de("ngIf",!n.disabled)}}function rSe(i,t){if(1&i&&(zr(0),li(1),Vr()),2&i){const e=be(3);Ie(1),ts(e.placeholder||e.defaultLabel||"empty")}}function sSe(i,t){if(1&i&&(zr(0),$e(1,iSe,5,2,"div",13),$e(2,rSe,2,1,"ng-container",7),Vr()),2&i){const e=be(2);Ie(1),de("ngForOf",e.value),Ie(1),de("ngIf",!e.value||0===e.value.length)}}function oSe(i,t){if(1&i&&(zr(0),$e(1,tSe,2,1,"ng-container",7),$e(2,sSe,3,2,"ng-container",7),Vr()),2&i){const e=be();Ie(1),de("ngIf","comma"===e.display),Ie(1),de("ngIf","chip"===e.display)}}function aSe(i,t){1&i&&Ni(0)}function lSe(i,t){if(1&i){const e=vi();Ke(0,"i",19),mn("click",function(r){return Pt(e),Rt(be().clear(r))}),Je()}}function cSe(i,t){1&i&&Ni(0)}function uSe(i,t){1&i&&Ni(0)}const z6=function(i){return{options:i}};function hSe(i,t){if(1&i&&(zr(0),$e(1,uSe,1,0,"ng-container",8),Vr()),2&i){const e=be(3);Ie(1),de("ngTemplateOutlet",e.filterTemplate)("ngTemplateOutletContext",_i(2,z6,e.filterOptions))}}const dSe=function(i){return{"p-checkbox-disabled":i}},fSe=function(i,t,e){return{"p-highlight":i,"p-focus":t,"p-disabled":e}};function pSe(i,t){if(1&i){const e=vi();Ke(0,"div",34)(1,"div",2)(2,"input",35),mn("focus",function(){return Pt(e),Rt(be(4).onHeaderCheckboxFocus())})("blur",function(){return Pt(e),Rt(be(4).onHeaderCheckboxBlur())})("keydown.space",function(r){return Pt(e),Rt(be(4).toggleAll(r))}),Je()(),Ke(3,"div",36),mn("click",function(r){return Pt(e),Rt(be(4).toggleAll(r))}),Bn(4,"span",37),Je()()}if(2&i){const e=be(4);de("ngClass",_i(6,dSe,e.disabled||e.toggleAllDisabled)),Ie(2),de("checked",e.allChecked)("disabled",e.disabled||e.toggleAllDisabled),Ie(1),de("ngClass",Su(8,fSe,e.allChecked,e.headerCheckboxFocus,e.disabled||e.toggleAllDisabled)),vr("aria-checked",e.allChecked),Ie(1),de("ngClass",_i(12,B6,e.allChecked))}}function gSe(i,t){if(1&i){const e=vi();Ke(0,"div",38)(1,"input",39,40),mn("input",function(r){return Pt(e),Rt(be(4).onFilterInputChange(r))}),Je(),Bn(3,"span",41),Je()}if(2&i){const e=be(4);Ie(1),de("value",e.filterValue||"")("disabled",e.disabled),vr("autocomplete",e.autocomplete)("placeholder",e.filterPlaceHolder)("aria-label",e.ariaFilterLabel)}}function mSe(i,t){if(1&i){const e=vi();$e(0,pSe,5,14,"div",30),$e(1,gSe,4,5,"div",31),Ke(2,"button",32),mn("click",function(r){return Pt(e),Rt(be(3).close(r))}),Bn(3,"span",33),Je()}if(2&i){const e=be(3);de("ngIf",e.showToggleAll&&!e.selectionLimit),Ie(1),de("ngIf",e.filter)}}function vSe(i,t){if(1&i&&(Ke(0,"div",26),su(1),$e(2,cSe,1,0,"ng-container",27),$e(3,hSe,2,4,"ng-container",28),$e(4,mSe,4,2,"ng-template",null,29,sc),Je()),2&i){const e=oo(5),n=be(2);Ie(2),de("ngTemplateOutlet",n.headerTemplate),Ie(1),de("ngIf",n.filterTemplate)("ngIfElse",e)}}function ySe(i,t){1&i&&Ni(0)}const V6=function(i,t){return{$implicit:i,options:t}};function _Se(i,t){if(1&i&&$e(0,ySe,1,0,"ng-container",8),2&i){const e=t.$implicit,n=t.options;be(2),de("ngTemplateOutlet",oo(6))("ngTemplateOutletContext",ss(2,V6,e,n))}}function bSe(i,t){1&i&&Ni(0)}function CSe(i,t){if(1&i&&$e(0,bSe,1,0,"ng-container",8),2&i){const e=t.options;de("ngTemplateOutlet",be(4).loaderTemplate)("ngTemplateOutletContext",_i(2,z6,e))}}function wSe(i,t){1&i&&(zr(0),$e(1,CSe,1,4,"ng-template",45),Vr())}function ASe(i,t){if(1&i){const e=vi();Ke(0,"p-scroller",42,43),mn("onLazyLoad",function(r){return Pt(e),Rt(be(2).onLazyLoad.emit(r))}),$e(2,_Se,1,5,"ng-template",44),$e(3,wSe,2,0,"ng-container",7),Je()}if(2&i){const e=be(2);to(_i(9,Lx,e.scrollHeight)),de("items",e.optionsToRender)("itemSize",e.virtualScrollItemSize||e._itemSize)("autoSize",!0)("tabindex",-1)("lazy",e.lazy)("options",e.virtualScrollOptions),Ie(3),de("ngIf",e.loaderTemplate)}}function xSe(i,t){1&i&&Ni(0)}const ISe=function(){return{}};function SSe(i,t){if(1&i&&(zr(0),$e(1,xSe,1,0,"ng-container",8),Vr()),2&i){be();const e=oo(6),n=be();Ie(1),de("ngTemplateOutlet",e)("ngTemplateOutletContext",ss(3,V6,n.optionsToRender,uo(2,ISe)))}}function ESe(i,t){if(1&i&&(Ke(0,"span"),li(1),Je()),2&i){const e=be().$implicit,n=be(4);Ie(1),ts(n.getOptionGroupLabel(e)||"empty")}}function TSe(i,t){1&i&&Ni(0)}function MSe(i,t){1&i&&Ni(0)}function DSe(i,t){if(1&i&&(Ke(0,"li",51),$e(1,ESe,2,1,"span",7),$e(2,TSe,1,0,"ng-container",8),Je(),$e(3,MSe,1,0,"ng-container",8)),2&i){const e=t.$implicit,n=be(2).options,r=oo(5),s=be(2);de("ngStyle",_i(6,Lx,n.itemSize+"px")),Ie(1),de("ngIf",!s.groupTemplate),Ie(1),de("ngTemplateOutlet",s.groupTemplate)("ngTemplateOutletContext",_i(8,Px,e)),Ie(1),de("ngTemplateOutlet",r)("ngTemplateOutletContext",_i(10,Px,s.getOptionGroupChildren(e)))}}function LSe(i,t){if(1&i&&(zr(0),$e(1,DSe,4,12,"ng-template",50),Vr()),2&i){const e=be().$implicit;Ie(1),de("ngForOf",e)}}function PSe(i,t){1&i&&Ni(0)}function RSe(i,t){if(1&i&&(zr(0),$e(1,PSe,1,0,"ng-container",8),Vr()),2&i){const e=be().$implicit,n=oo(5);Ie(1),de("ngTemplateOutlet",n)("ngTemplateOutletContext",_i(2,Px,e))}}function kSe(i,t){if(1&i){const e=vi();Ke(0,"p-multiSelectItem",52),mn("onClick",function(r){return Pt(e),Rt(be(4).onOptionClick(r))})("onKeydown",function(r){return Pt(e),Rt(be(4).onOptionKeydown(r))}),Je()}if(2&i){const e=t.$implicit,n=be(2).options,r=be(2);de("option",e)("selected",r.isSelected(e))("label",r.getOptionLabel(e))("disabled",r.isOptionDisabled(e))("template",r.itemTemplate)("itemSize",n.itemSize)}}function OSe(i,t){1&i&&$e(0,kSe,1,6,"ng-template",50),2&i&&de("ngForOf",t.$implicit)}function FSe(i,t){if(1&i&&(zr(0),li(1),Vr()),2&i){const e=be(4);Ie(1),yc(" ",e.emptyFilterMessageLabel," ")}}function NSe(i,t){1&i&&Ni(0,null,54)}function BSe(i,t){if(1&i&&(Ke(0,"li",53),$e(1,FSe,2,1,"ng-container",28),$e(2,NSe,2,0,"ng-container",27),Je()),2&i){const e=be().options,n=be(2);de("ngStyle",_i(4,Lx,e.itemSize+"px")),Ie(1),de("ngIf",!n.emptyFilterTemplate&&!n.emptyTemplate)("ngIfElse",n.emptyFilter),Ie(1),de("ngTemplateOutlet",n.emptyFilterTemplate||n.emptyTemplate)}}function zSe(i,t){if(1&i&&(zr(0),li(1),Vr()),2&i){const e=be(4);Ie(1),yc(" ",e.emptyMessageLabel," ")}}function VSe(i,t){1&i&&Ni(0,null,55)}function USe(i,t){if(1&i&&(Ke(0,"li",53),$e(1,zSe,2,1,"ng-container",28),$e(2,VSe,2,0,"ng-container",27),Je()),2&i){const e=be().options,n=be(2);de("ngStyle",_i(4,Lx,e.itemSize+"px")),Ie(1),de("ngIf",!n.emptyTemplate)("ngIfElse",n.empty),Ie(1),de("ngTemplateOutlet",n.emptyTemplate)}}function HSe(i,t){if(1&i&&(Ke(0,"ul",46,47),$e(2,LSe,2,1,"ng-container",7),$e(3,RSe,2,4,"ng-container",7),$e(4,OSe,1,1,"ng-template",null,48,sc),$e(6,BSe,3,6,"li",49),$e(7,USe,3,6,"li",49),Je()),2&i){const e=t.options,n=be(2);to(e.contentStyle),de("ngClass",e.contentStyleClass),Ie(2),de("ngIf",n.group),Ie(1),de("ngIf",!n.group),Ie(3),de("ngIf",n.hasFilter()&&n.isEmpty()),Ie(1),de("ngIf",!n.hasFilter()&&n.isEmpty())}}function GSe(i,t){1&i&&Ni(0)}function WSe(i,t){if(1&i&&(Ke(0,"div",56),su(1,1),$e(2,GSe,1,0,"ng-container",27),Je()),2&i){const e=be(2);Ie(2),de("ngTemplateOutlet",e.footerTemplate)}}const jSe=function(){return["p-multiselect-panel p-component"]},$Se=function(i,t){return{showTransitionParams:i,hideTransitionParams:t}},qSe=function(i){return{value:"visible",params:i}};function XSe(i,t){if(1&i){const e=vi();Ke(0,"div",20),mn("@overlayAnimation.start",function(r){return Pt(e),Rt(be().onOverlayAnimationStart(r))})("@overlayAnimation.done",function(r){return Pt(e),Rt(be().onOverlayAnimationEnd(r))})("keydown",function(r){return Pt(e),Rt(be().onKeydown(r))})("click",function(r){return Pt(e),Rt(be().onOverlayClick(r))}),$e(1,vSe,6,3,"div",21),Ke(2,"div",22),$e(3,ASe,4,11,"p-scroller",23),$e(4,SSe,2,6,"ng-container",7),$e(5,HSe,8,7,"ng-template",null,24,sc),Je(),$e(7,WSe,3,1,"div",25),Je()}if(2&i){const e=be();kr(e.panelStyleClass),de("ngClass",uo(11,jSe))("@overlayAnimation",_i(15,qSe,ss(12,$Se,e.showTransitionOptions,e.hideTransitionOptions)))("ngStyle",e.panelStyle),Ie(1),de("ngIf",e.showHeader),Ie(1),Ad("max-height",e.virtualScroll?"auto":e.scrollHeight||"auto"),Ie(1),de("ngIf",e.virtualScroll),Ie(1),de("ngIf",!e.virtualScroll),Ie(3),de("ngIf",e.footerFacet||e.footerTemplate)}}const YSe=[[["p-header"]],[["p-footer"]]],KSe=function(i,t,e,n){return{"p-multiselect p-component":!0,"p-multiselect-open":i,"p-multiselect-chip":t,"p-focus":e,"p-disabled":n}},ZSe=function(i,t){return{"p-placeholder":i,"p-multiselect-label-empty":t}},QSe=function(){return{"p-multiselect-trigger":!0}},JSe=["p-header","p-footer"],eEe={provide:Cc,useExisting:cs(()=>nEe),multi:!0};let tEe=(()=>{class i{constructor(){this.onClick=new Fn,this.onKeydown=new Fn}onOptionClick(e){this.onClick.emit({originalEvent:e,option:this.option})}onOptionKeydown(e){this.onKeydown.emit({originalEvent:e,option:this.option})}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=_r({type:i,selectors:[["p-multiSelectItem"]],hostAttrs:[1,"p-element"],inputs:{option:"option",selected:"selected",label:"label",disabled:"disabled",itemSize:"itemSize",template:"template"},outputs:{onClick:"onClick",onKeydown:"onKeydown"},decls:6,vars:20,consts:[["pRipple","",1,"p-multiselect-item",3,"ngStyle","ngClass","click","keydown"],[1,"p-checkbox","p-component"],[1,"p-checkbox-box",3,"ngClass"],[1,"p-checkbox-icon",3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,n){1&e&&(Ke(0,"li",0),mn("click",function(s){return n.onOptionClick(s)})("keydown",function(s){return n.onOptionKeydown(s)}),Ke(1,"div",1)(2,"div",2),Bn(3,"span",3),Je()(),$e(4,$1e,2,1,"span",4),$e(5,q1e,1,0,"ng-container",5),Je()),2&e&&(de("ngStyle",_i(9,Lx,n.itemSize+"px"))("ngClass",ss(11,X1e,n.selected,n.disabled)),vr("aria-label",n.label)("tabindex",n.disabled?null:"0"),Ie(2),de("ngClass",_i(14,Y1e,n.selected)),Ie(1),de("ngClass",_i(16,B6,n.selected)),Ie(1),de("ngIf",!n.template),Ie(1),de("ngTemplateOutlet",n.template)("ngTemplateOutletContext",_i(18,Px,n.option)))},dependencies:[no,ho,el,Po,Du],encapsulation:2}),i})(),nEe=(()=>{class i{constructor(e,n,r,s,o,l){this.el=e,this.renderer=n,this.cd=r,this.filterService=s,this.config=o,this.overlayService=l,this.filter=!0,this.displaySelectedLabel=!0,this.maxSelectedLabels=3,this.selectedItemsLabel="ellipsis",this.showToggleAll=!0,this.emptyFilterMessage="",this.emptyMessage="",this.resetFilterOnHide=!1,this.dropdownIcon="pi pi-chevron-down",this.optionGroupChildren="items",this.showHeader=!0,this.autoZIndex=!0,this.baseZIndex=0,this.scrollHeight="200px",this.lazy=!1,this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.filterMatchMode="contains",this.tooltip="",this.tooltipPosition="right",this.tooltipPositionStyle="absolute",this.autofocusFilter=!0,this.display="comma",this.autocomplete="on",this.showClear=!1,this.onChange=new Fn,this.onFilter=new Fn,this.onFocus=new Fn,this.onBlur=new Fn,this.onClick=new Fn,this.onClear=new Fn,this.onPanelShow=new Fn,this.onPanelHide=new Fn,this.onLazyLoad=new Fn,this.onModelChange=()=>{},this.onModelTouched=()=>{}}set defaultLabel(e){this._defaultLabel=e,this.updateLabel()}get defaultLabel(){return this._defaultLabel}set placeholder(e){this._placeholder=e,this.updateLabel()}get placeholder(){return this._placeholder}get options(){return this._options}set options(e){this._options=e,this.updateLabel()}get filterValue(){return this._filterValue}set filterValue(e){this._filterValue=e,this.activateFilter()}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=e,console.warn("The itemSize property is deprecated, use virtualScrollItemSize property instead.")}ngOnInit(){this.updateLabel(),this.filterBy&&(this.filterOptions={filter:e=>this.onFilterInputChange(e),reset:()=>this.resetFilter()})}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"item":default:this.itemTemplate=e.template;break;case"group":this.groupTemplate=e.template;break;case"selectedItems":this.selectedItemsTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"filter":this.filterTemplate=e.template;break;case"emptyfilter":this.emptyFilterTemplate=e.template;break;case"empty":this.emptyTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"loader":this.loaderTemplate=e.template}})}ngAfterViewInit(){this.overlayVisible&&this.show()}ngAfterViewChecked(){this.filtered&&(this.alignOverlay(),this.filtered=!1)}getOptionLabel(e){return this.optionLabel?Ji.resolveFieldData(e,this.optionLabel):e&&null!=e.label?e.label:e}getOptionValue(e){return this.optionValue?Ji.resolveFieldData(e,this.optionValue):!this.optionLabel&&e&&void 0!==e.value?e.value:e}getOptionGroupLabel(e){return this.optionGroupLabel?Ji.resolveFieldData(e,this.optionGroupLabel):e&&null!=e.label?e.label:e}getOptionGroupChildren(e){return this.optionGroupChildren?Ji.resolveFieldData(e,this.optionGroupChildren):e.items}isOptionDisabled(e){return(this.optionDisabled?Ji.resolveFieldData(e,this.optionDisabled):!(!e||void 0===e.disabled)&&e.disabled)||this.maxSelectionLimitReached&&!this.isSelected(e)}writeValue(e){this.value=e,this.updateLabel(),this.updateFilledState(),this.checkSelectionLimit(),this.cd.markForCheck()}checkSelectionLimit(){this.maxSelectionLimitReached=!(!this.selectionLimit||!this.value||this.value.length!==this.selectionLimit)}updateFilledState(){this.filled=this.value&&this.value.length>0}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onOptionClick(e){let n=e.option;if(this.isOptionDisabled(n))return;let r=this.getOptionValue(n),s=this.findSelectionIndex(r);-1!=s?(this.value=this.value.filter((o,l)=>l!=s),this.selectionLimit&&(this.maxSelectionLimitReached=!1)):((!this.selectionLimit||!this.value||this.value.length<this.selectionLimit)&&(this.value=[...this.value||[],r]),this.checkSelectionLimit()),this.onModelChange(this.value),this.onChange.emit({originalEvent:e.originalEvent,value:this.value,itemValue:r}),this.updateLabel(),this.updateFilledState()}isSelected(e){return-1!=this.findSelectionIndex(this.getOptionValue(e))}findSelectionIndex(e){let n=-1;if(this.value)for(let r=0;r<this.value.length;r++)if(Ji.equals(this.value[r],e,this.dataKey)){n=r;break}return n}get toggleAllDisabled(){let e=this.optionsToRender;if(!e||0===e.length)return!0;for(let n of e)if(!this.isOptionDisabled(n))return!1;return!0}toggleAll(e){this.disabled||this.toggleAllDisabled||this.readonly||(this.allChecked?this.uncheckAll():this.checkAll(),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}),this.updateFilledState(),this.updateLabel(),e.preventDefault())}checkAll(){let n=[];this.optionsToRender.forEach(r=>{if(this.group){let s=this.getOptionGroupChildren(r);s&&s.forEach(o=>{let l=this.isOptionDisabled(o);(!l||l&&this.isSelected(o))&&n.push(this.getOptionValue(o))})}else{let s=this.isOptionDisabled(r);(!s||s&&this.isSelected(r))&&n.push(this.getOptionValue(r))}}),this.value=n}uncheckAll(){let n=[];this.optionsToRender.forEach(r=>{this.group?r.items&&r.items.forEach(s=>{this.isOptionDisabled(s)&&this.isSelected(s)&&n.push(this.getOptionValue(s))}):this.isOptionDisabled(r)&&this.isSelected(r)&&n.push(this.getOptionValue(r))}),this.value=n}show(){this.overlayVisible||(this.overlayVisible=!0,this.preventDocumentDefault=!0,this.cd.markForCheck())}onOverlayClick(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement})}onOverlayAnimationStart(e){switch(e.toState){case"visible":this.overlay=e.element,this.virtualScroll&&this.scroller?.setContentEl(this.itemsViewChild.nativeElement),this.appendOverlay(),this.autoZIndex&&Ll.set("overlay",this.overlay,this.baseZIndex+this.config.zIndex.overlay),this.alignOverlay(),this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener(),this.filterInputChild&&this.filterInputChild.nativeElement&&(this.preventModelTouched=!0,this.autofocusFilter&&this.filterInputChild.nativeElement.focus()),this.onPanelShow.emit();break;case"void":this.onOverlayHide()}}onOverlayAnimationEnd(e){"void"===e.toState&&Ll.clear(e.element)}appendOverlay(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.overlay):Ft.appendChild(this.overlay,this.appendTo),this.overlay.style.minWidth||(this.overlay.style.minWidth=Ft.getWidth(this.containerViewChild.nativeElement)+"px"))}restoreOverlayAppend(){this.overlay&&this.appendTo&&this.el.nativeElement.appendChild(this.overlay)}alignOverlay(){this.overlay&&(this.appendTo?Ft.absolutePosition(this.overlay,this.containerViewChild.nativeElement):Ft.relativePosition(this.overlay,this.containerViewChild.nativeElement))}hide(){this.overlayVisible=!1,this.unbindDocumentClickListener(),this.resetFilterOnHide&&this.resetFilter(),this.onPanelHide.emit(),this.cd.markForCheck()}resetFilter(){this.filterInputChild&&this.filterInputChild.nativeElement&&(this.filterInputChild.nativeElement.value=""),this._filterValue=null,this._filteredOptions=null}close(e){this.hide(),e.preventDefault(),e.stopPropagation()}clear(e){this.value=null,this.updateLabel(),this.updateFilledState(),this.onClear.emit(),this.onModelChange(this.value),e.stopPropagation()}onMouseclick(e,n){this.disabled||this.readonly||e.target.isSameNode(this.accessibleViewChild.nativeElement)||(this.onClick.emit(e),!this.isOverlayClick(e)&&!Ft.hasClass(e.target,"p-multiselect-token-icon")&&(this.overlayVisible?this.hide():(n.focus(),this.show())))}removeChip(e,n){this.value=this.value.filter(r=>!Ji.equals(r,e,this.dataKey)),this.onModelChange(this.value),this.checkSelectionLimit(),this.onChange.emit({originalEvent:n,value:this.value,itemValue:e}),this.updateLabel(),this.updateFilledState()}isOverlayClick(e){let n=e.target;return!!this.overlay&&(this.overlay.isSameNode(n)||this.overlay.contains(n))}isOutsideClicked(e){return!(this.el.nativeElement.isSameNode(e.target)||this.el.nativeElement.contains(e.target)||this.isOverlayClick(e))}onInputFocus(e){this.focus=!0,this.onFocus.emit({originalEvent:e})}onInputBlur(e){this.focus=!1,this.onBlur.emit({originalEvent:e}),this.preventModelTouched||this.onModelTouched(),this.preventModelTouched=!1}onOptionKeydown(e){if(!this.readonly)switch(e.originalEvent.which){case 40:var n=this.findNextItem(e.originalEvent.target.parentElement);n&&n.focus(),e.originalEvent.preventDefault();break;case 38:var r=this.findPrevItem(e.originalEvent.target.parentElement);r&&r.focus(),e.originalEvent.preventDefault();break;case 13:this.onOptionClick(e),e.originalEvent.preventDefault();break;case 9:this.hide()}}findNextItem(e){let n=e.nextElementSibling;return n?Ft.hasClass(n.children[0],"p-disabled")||Ft.isHidden(n.children[0])||Ft.hasClass(n,"p-multiselect-item-group")?this.findNextItem(n):n.children[0]:null}findPrevItem(e){let n=e.previousElementSibling;return n?Ft.hasClass(n.children[0],"p-disabled")||Ft.isHidden(n.children[0])||Ft.hasClass(n,"p-multiselect-item-group")?this.findPrevItem(n):n.children[0]:null}onKeydown(e){switch(e.which){case 40:!this.overlayVisible&&e.altKey&&(this.show(),e.preventDefault());break;case 32:this.overlayVisible||(this.show(),e.preventDefault());break;case 27:this.hide()}}updateLabel(){if(this.value&&this.options&&this.value.length&&this.displaySelectedLabel){let e="";for(let n=0;n<this.value.length;n++){let r=this.findLabelByValue(this.value[n]);r&&(e.length>0&&(e+=", "),e+=r)}if(this.value.length<=this.maxSelectedLabels||"ellipsis"===this.selectedItemsLabel)this.valuesAsString=e;else{let n=/{(.*?)}/;this.valuesAsString=n.test(this.selectedItemsLabel)?this.selectedItemsLabel.replace(this.selectedItemsLabel.match(n)[0],this.value.length+""):this.selectedItemsLabel}}else this.valuesAsString=this.placeholder||this.defaultLabel}findLabelByValue(e){if(this.group){let n=null;for(let r=0;r<this.options.length;r++){let s=this.getOptionGroupChildren(this.options[r]);if(s&&(n=this.searchLabelByValue(e,s),n))break}return n}return this.searchLabelByValue(e,this.options)}searchLabelByValue(e,n){let r=null;for(let s=0;s<n.length;s++){let o=n[s],l=this.getOptionValue(o);if(null==e&&null==l||Ji.equals(e,l,this.dataKey)){r=this.getOptionLabel(o);break}}return r}get allChecked(){let e=this.optionsToRender;if(!e||0===e.length)return!1;{let n=0,r=0,s=0,o=this.group?0:this.optionsToRender.length;for(let l of e)if(this.group)for(let u of this.getOptionGroupChildren(l)){let p=this.isOptionDisabled(u),v=this.isSelected(u);if(p)v?n++:r++;else{if(!v)return!1;s++}o++}else{let u=this.isOptionDisabled(l),p=this.isSelected(l);if(u)p?n++:r++;else{if(!p)return!1;s++}}return o===n||o===s||s&&o===s+r+n}}get optionsToRender(){return this._filteredOptions||this.options}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation($c.EMPTY_MESSAGE)}get emptyFilterMessageLabel(){return this.emptyFilterMessage||this.config.getTranslation($c.EMPTY_FILTER_MESSAGE)}hasFilter(){return this._filterValue&&this._filterValue.trim().length>0}isEmpty(){return!this.optionsToRender||this.optionsToRender&&0===this.optionsToRender.length}onFilterInputChange(e){this._filterValue=e.target.value,this.activateFilter(),this.onFilter.emit({originalEvent:e,filter:this._filterValue}),this.cd.detectChanges(),this.alignOverlay()}activateFilter(){if(this.hasFilter()&&this._options){let e=(this.filterBy||this.optionLabel||"label").split(",");if(this.group){let n=[];for(let r of this.options){let s=this.filterService.filter(this.getOptionGroupChildren(r),e,this.filterValue,this.filterMatchMode,this.filterLocale);s&&s.length&&n.push({...r,[this.optionGroupChildren]:s})}this._filteredOptions=n}else this._filteredOptions=this.filterService.filter(this.options,e,this._filterValue,this.filterMatchMode,this.filterLocale)}else this._filteredOptions=null}onHeaderCheckboxFocus(){this.headerCheckboxFocus=!0}onHeaderCheckboxBlur(){this.headerCheckboxFocus=!1}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","click",n=>{!this.preventDocumentDefault&&this.isOutsideClicked(n)&&this.hide(),this.preventDocumentDefault=!1}))}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener)}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}onWindowResize(){this.overlayVisible&&!Ft.isTouchDevice()&&this.hide()}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new SA(this.containerViewChild.nativeElement,()=>{this.overlayVisible&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}onOverlayHide(){this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.overlay=null,this.onModelTouched()}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.overlay&&Ll.clear(this.overlay),this.restoreOverlayAppend(),this.onOverlayHide()}}return i.\u0275fac=function(e){return new(e||i)(Xt(Yn),Xt(d),Xt(xo),Xt(oA),Xt(Dp),Xt(aA))},i.\u0275cmp=_r({type:i,selectors:[["p-multiSelect"]],contentQueries:function(e,n,r){if(1&e&&(Ba(r,C1,5),Ba(r,XD,5),Ba(r,za,4)),2&e){let s;Wi(s=ji())&&(n.footerFacet=s.first),Wi(s=ji())&&(n.headerFacet=s.first),Wi(s=ji())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(Tr(K1e,5),Tr(Z1e,5),Tr(Q1e,5),Tr(J1e,5),Tr(eSe,5)),2&e){let r;Wi(r=ji())&&(n.containerViewChild=r.first),Wi(r=ji())&&(n.filterInputChild=r.first),Wi(r=ji())&&(n.accessibleViewChild=r.first),Wi(r=ji())&&(n.itemsViewChild=r.first),Wi(r=ji())&&(n.scroller=r.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(e,n){2&e&&Mp("p-inputwrapper-filled",n.filled)("p-inputwrapper-focus",n.focus||n.overlayVisible)("p-multiselect-clearable",n.showClear&&!n.disabled)},inputs:{style:"style",styleClass:"styleClass",panelStyle:"panelStyle",panelStyleClass:"panelStyleClass",inputId:"inputId",disabled:"disabled",readonly:"readonly",group:"group",filter:"filter",filterPlaceHolder:"filterPlaceHolder",filterLocale:"filterLocale",overlayVisible:"overlayVisible",tabindex:"tabindex",appendTo:"appendTo",dataKey:"dataKey",name:"name",label:"label",ariaLabelledBy:"ariaLabelledBy",displaySelectedLabel:"displaySelectedLabel",maxSelectedLabels:"maxSelectedLabels",selectionLimit:"selectionLimit",selectedItemsLabel:"selectedItemsLabel",showToggleAll:"showToggleAll",emptyFilterMessage:"emptyFilterMessage",emptyMessage:"emptyMessage",resetFilterOnHide:"resetFilterOnHide",dropdownIcon:"dropdownIcon",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",optionGroupLabel:"optionGroupLabel",optionGroupChildren:"optionGroupChildren",showHeader:"showHeader",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",filterBy:"filterBy",scrollHeight:"scrollHeight",lazy:"lazy",virtualScroll:"virtualScroll",virtualScrollItemSize:"virtualScrollItemSize",virtualScrollOptions:"virtualScrollOptions",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",ariaFilterLabel:"ariaFilterLabel",filterMatchMode:"filterMatchMode",tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",autofocusFilter:"autofocusFilter",display:"display",autocomplete:"autocomplete",showClear:"showClear",defaultLabel:"defaultLabel",placeholder:"placeholder",options:"options",filterValue:"filterValue",itemSize:"itemSize"},outputs:{onChange:"onChange",onFilter:"onFilter",onFocus:"onFocus",onBlur:"onBlur",onClick:"onClick",onClear:"onClear",onPanelShow:"onPanelShow",onPanelHide:"onPanelHide",onLazyLoad:"onLazyLoad"},features:[Ao([eEe])],ngContentSelectors:JSe,decls:13,vars:34,consts:[[3,"ngClass","ngStyle","click"],["container",""],[1,"p-hidden-accessible"],["type","text","readonly","readonly","aria-haspopup","listbox","role","listbox",3,"disabled","focus","blur","keydown"],["in",""],[1,"p-multiselect-label-container",3,"pTooltip","tooltipPosition","positionStyle","tooltipStyleClass"],[1,"p-multiselect-label",3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","p-multiselect-clear-icon pi pi-times",3,"click",4,"ngIf"],[3,"ngClass"],[1,"p-multiselect-trigger-icon",3,"ngClass"],[3,"ngClass","ngStyle","class","keydown","click",4,"ngIf"],["class","p-multiselect-token",4,"ngFor","ngForOf"],[1,"p-multiselect-token"],["token",""],[1,"p-multiselect-token-label"],["class","p-multiselect-token-icon pi pi-times-circle",3,"click",4,"ngIf"],[1,"p-multiselect-token-icon","pi","pi-times-circle",3,"click"],[1,"p-multiselect-clear-icon","pi","pi-times",3,"click"],[3,"ngClass","ngStyle","keydown","click"],["class","p-multiselect-header",4,"ngIf"],[1,"p-multiselect-items-wrapper"],[3,"items","style","itemSize","autoSize","tabindex","lazy","options","onLazyLoad",4,"ngIf"],["buildInItems",""],["class","p-multiselect-footer",4,"ngIf"],[1,"p-multiselect-header"],[4,"ngTemplateOutlet"],[4,"ngIf","ngIfElse"],["builtInFilterElement",""],["class","p-checkbox p-component",3,"ngClass",4,"ngIf"],["class","p-multiselect-filter-container",4,"ngIf"],["type","button","pRipple","",1,"p-multiselect-close","p-link",3,"click"],[1,"p-multiselect-close-icon","pi","pi-times"],[1,"p-checkbox","p-component",3,"ngClass"],["type","checkbox","readonly","readonly",3,"checked","disabled","focus","blur","keydown.space"],["role","checkbox",1,"p-checkbox-box",3,"ngClass","click"],[1,"p-checkbox-icon",3,"ngClass"],[1,"p-multiselect-filter-container"],["type","text","role","textbox",1,"p-multiselect-filter","p-inputtext","p-component",3,"value","disabled","input"],["filterInput",""],[1,"p-multiselect-filter-icon","pi","pi-search"],[3,"items","itemSize","autoSize","tabindex","lazy","options","onLazyLoad"],["scroller",""],["pTemplate","content"],["pTemplate","loader"],["role","listbox","aria-multiselectable","true",1,"p-multiselect-items","p-component",3,"ngClass"],["items",""],["itemslist",""],["class","p-multiselect-empty-message",3,"ngStyle",4,"ngIf"],["ngFor","",3,"ngForOf"],[1,"p-multiselect-item-group",3,"ngStyle"],[3,"option","selected","label","disabled","template","itemSize","onClick","onKeydown"],[1,"p-multiselect-empty-message",3,"ngStyle"],["emptyFilter",""],["empty",""],[1,"p-multiselect-footer"]],template:function(e,n){if(1&e){const r=vi();Bf(YSe),Ke(0,"div",0,1),mn("click",function(o){Pt(r);const l=oo(4);return Rt(n.onMouseclick(o,l))}),Ke(2,"div",2)(3,"input",3,4),mn("focus",function(o){return n.onInputFocus(o)})("blur",function(o){return n.onInputBlur(o)})("keydown",function(o){return n.onKeydown(o)}),Je()(),Ke(5,"div",5)(6,"div",6),$e(7,oSe,3,2,"ng-container",7),$e(8,aSe,1,0,"ng-container",8),Je(),$e(9,lSe,1,0,"i",9),Je(),Ke(10,"div",10),Bn(11,"span",11),Je(),$e(12,XSe,8,17,"div",12),Je()}2&e&&(kr(n.styleClass),de("ngClass",sf(23,KSe,n.overlayVisible,"chip"===n.display,n.focus,n.disabled))("ngStyle",n.style),Ie(3),de("disabled",n.disabled),vr("label",n.label)("id",n.inputId)("name",n.name)("tabindex",n.tabindex)("aria-expanded",n.overlayVisible)("aria-labelledby",n.ariaLabelledBy),Ie(2),de("pTooltip",n.tooltip)("tooltipPosition",n.tooltipPosition)("positionStyle",n.tooltipPositionStyle)("tooltipStyleClass",n.tooltipStyleClass),Ie(1),de("ngClass",ss(28,ZSe,n.valuesAsString===(n.defaultLabel||n.placeholder),!(null!=n.valuesAsString&&0!==n.valuesAsString.length||null!=n.placeholder&&0!==n.placeholder.length))),Ie(1),de("ngIf",!n.selectedItemsTemplate),Ie(1),de("ngTemplateOutlet",n.selectedItemsTemplate)("ngTemplateOutletContext",_i(31,Px,n.value)),Ie(1),de("ngIf",null!=n.value&&n.filled&&!n.disabled&&n.showClear),Ie(1),de("ngClass",uo(33,QSe)),Ie(1),de("ngClass",n.dropdownIcon),Ie(1),de("ngIf",n.overlayVisible))},dependencies:[no,jc,ho,el,Po,za,rv,Du,EA,tEe],styles:[".p-multiselect{display:inline-flex;cursor:pointer;position:relative;-webkit-user-select:none;user-select:none}.p-multiselect-trigger{display:flex;align-items:center;justify-content:center;flex-shrink:0}.p-multiselect-label-container{overflow:hidden;flex:1 1 auto;cursor:pointer}.p-multiselect-label{display:block;white-space:nowrap;cursor:pointer;overflow:hidden;text-overflow:ellipsis}.p-multiselect-label-empty{overflow:hidden;visibility:hidden}.p-multiselect-token{cursor:default;display:inline-flex;align-items:center;flex:0 0 auto}.p-multiselect-token-icon{cursor:pointer}.p-multiselect .p-multiselect-panel{min-width:100%}.p-multiselect-panel{position:absolute;top:0;left:0}.p-multiselect-items-wrapper{overflow:auto}.p-multiselect-items{margin:0;padding:0;list-style-type:none}.p-multiselect-item{cursor:pointer;display:flex;align-items:center;font-weight:400;white-space:nowrap;position:relative;overflow:hidden}.p-multiselect-header{display:flex;align-items:center;justify-content:space-between}.p-multiselect-filter-container{position:relative;flex:1 1 auto}.p-multiselect-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-multiselect-filter-container .p-inputtext{width:100%}.p-multiselect-close{display:flex;align-items:center;justify-content:center;flex-shrink:0;overflow:hidden;position:relative}.p-fluid .p-multiselect{display:flex}.p-multiselect-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-multiselect-clearable{position:relative}\n"],encapsulation:2,data:{animation:[ly("overlayAnimation",[Mu(":enter",[tl({opacity:0,transform:"scaleY(0.8)"}),wc("{{showTransitionParams}}")]),Mu(":leave",[wc("{{hideTransitionParams}}",tl({opacity:0}))])])]},changeDetection:0}),i})(),iEe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({imports:[Os,xa,sv,Xc,ov,xa,ov]}),i})();function rEe(i,t){if(1&i){const e=vi();Ke(0,"span",3),mn("click",function(r){return Pt(e),Rt(be().clear(r))})("keydown.enter",function(r){return Pt(e),Rt(be().clear(r))}),Je()}if(2&i){const e=be();de("ngClass",e.iconCancelClass)("ngStyle",e.iconCancelStyle),vr("tabindex",e.disabled||e.readonly?null:"0")}}function sEe(i,t){if(1&i){const e=vi();Ke(0,"span",4),mn("click",function(r){const o=Pt(e).index;return Rt(be().rate(r,o))})("keydown.enter",function(r){const o=Pt(e).index;return Rt(be().rate(r,o))}),Je()}if(2&i){const e=t.index,n=be();de("ngClass",!n.value||e>=n.value?n.iconOffClass:n.iconOnClass)("ngStyle",!n.value||e>=n.value?n.iconOffStyle:n.iconOnStyle),vr("tabindex",n.disabled||n.readonly?null:"0")}}const oEe=function(i,t){return{"p-readonly":i,"p-disabled":t}},aEe={provide:Cc,useExisting:cs(()=>lEe),multi:!0};let lEe=(()=>{class i{constructor(e){this.cd=e,this.stars=5,this.cancel=!0,this.iconOnClass="pi pi-star-fill",this.iconOffClass="pi pi-star",this.iconCancelClass="pi pi-ban",this.onRate=new Fn,this.onCancel=new Fn,this.onModelChange=()=>{},this.onModelTouched=()=>{}}ngOnInit(){this.starsArray=[];for(let e=0;e<this.stars;e++)this.starsArray[e]=e}rate(e,n){!this.readonly&&!this.disabled&&(this.value=n+1,this.onModelChange(this.value),this.onModelTouched(),this.onRate.emit({originalEvent:e,value:n+1})),e.preventDefault()}clear(e){!this.readonly&&!this.disabled&&(this.value=null,this.onModelChange(this.value),this.onModelTouched(),this.onCancel.emit(e)),e.preventDefault()}writeValue(e){this.value=e,this.cd.detectChanges()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}}return i.\u0275fac=function(e){return new(e||i)(Xt(xo))},i.\u0275cmp=_r({type:i,selectors:[["p-rating"]],hostAttrs:[1,"p-element"],inputs:{disabled:"disabled",readonly:"readonly",stars:"stars",cancel:"cancel",iconOnClass:"iconOnClass",iconOnStyle:"iconOnStyle",iconOffClass:"iconOffClass",iconOffStyle:"iconOffStyle",iconCancelClass:"iconCancelClass",iconCancelStyle:"iconCancelStyle"},outputs:{onRate:"onRate",onCancel:"onCancel"},features:[Ao([aEe])],decls:3,vars:6,consts:[[1,"p-rating",3,"ngClass"],["class","p-rating-icon p-rating-cancel",3,"ngClass","ngStyle","click","keydown.enter",4,"ngIf"],["class","p-rating-icon",3,"ngClass","ngStyle","click","keydown.enter",4,"ngFor","ngForOf"],[1,"p-rating-icon","p-rating-cancel",3,"ngClass","ngStyle","click","keydown.enter"],[1,"p-rating-icon",3,"ngClass","ngStyle","click","keydown.enter"]],template:function(e,n){1&e&&(Ke(0,"div",0),$e(1,rEe,1,3,"span",1),$e(2,sEe,1,3,"span",2),Je()),2&e&&(de("ngClass",ss(3,oEe,n.readonly,n.disabled)),Ie(1),de("ngIf",n.cancel),Ie(1),de("ngForOf",n.starsArray))},dependencies:[no,jc,ho,Po],styles:[".p-rating-icon{cursor:pointer}.p-rating.p-rating-readonly .p-rating-icon{cursor:default}\n"],encapsulation:2,changeDetection:0}),i})(),cEe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({imports:[Os]}),i})();const uEe=["rb"],hEe=function(i,t,e){return{"p-radiobutton-label":!0,"p-radiobutton-label-active":i,"p-disabled":t,"p-radiobutton-label-focus":e}};function dEe(i,t){if(1&i){const e=vi();Ke(0,"label",4),mn("click",function(r){return Pt(e),Rt(be().select(r))}),li(1),Je()}if(2&i){const e=be(),n=oo(3);kr(e.labelStyleClass),de("ngClass",Su(5,hEe,n.checked,e.disabled,e.focused)),vr("for",e.inputId),Ie(1),ts(e.label)}}const fEe=function(i,t,e){return{"p-radiobutton p-component":!0,"p-radiobutton-checked":i,"p-radiobutton-disabled":t,"p-radiobutton-focused":e}},pEe=function(i,t,e){return{"p-radiobutton-box":!0,"p-highlight":i,"p-disabled":t,"p-focus":e}},gEe={provide:Cc,useExisting:cs(()=>vEe),multi:!0};let mEe=(()=>{class i{constructor(){this.accessors=[]}add(e,n){this.accessors.push([e,n])}remove(e){this.accessors=this.accessors.filter(n=>n[1]!==e)}select(e){this.accessors.forEach(n=>{this.isSameGroup(n,e)&&n[1]!==e&&n[1].writeValue(e.value)})}isSameGroup(e,n){return!!e[0].control&&e[0].control.root===n.control.control.root&&e[1].name===n.name}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),vEe=(()=>{class i{constructor(e,n,r){this.cd=e,this.injector=n,this.registry=r,this.onClick=new Fn,this.onFocus=new Fn,this.onBlur=new Fn,this.onModelChange=()=>{},this.onModelTouched=()=>{}}ngOnInit(){this.control=this.injector.get(iv),this.checkName(),this.registry.add(this.control,this)}handleClick(e,n,r){e.preventDefault(),!this.disabled&&(this.select(e),r&&n.focus())}select(e){this.disabled||(this.inputViewChild.nativeElement.checked=!0,this.checked=!0,this.onModelChange(this.value),this.registry.select(this),this.onClick.emit(e))}writeValue(e){this.checked=e==this.value,this.inputViewChild&&this.inputViewChild.nativeElement&&(this.inputViewChild.nativeElement.checked=this.checked),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onInputFocus(e){this.focused=!0,this.onFocus.emit(e)}onInputBlur(e){this.focused=!1,this.onModelTouched(),this.onBlur.emit(e)}onChange(e){this.select(e)}focus(){this.inputViewChild.nativeElement.focus()}ngOnDestroy(){this.registry.remove(this)}checkName(){this.name&&this.formControlName&&this.name!==this.formControlName&&this.throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}throwNameError(){throw new Error('\n          If you define both a name and a formControlName attribute on your radio button, their values\n          must match. Ex: <p-radioButton formControlName="food" name="food"></p-radioButton>\n        ')}}return i.\u0275fac=function(e){return new(e||i)(Xt(xo),Xt(Iu),Xt(mEe))},i.\u0275cmp=_r({type:i,selectors:[["p-radioButton"]],viewQuery:function(e,n){if(1&e&&Tr(uEe,5),2&e){let r;Wi(r=ji())&&(n.inputViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{value:"value",formControlName:"formControlName",name:"name",disabled:"disabled",label:"label",tabindex:"tabindex",inputId:"inputId",ariaLabelledBy:"ariaLabelledBy",ariaLabel:"ariaLabel",style:"style",styleClass:"styleClass",labelStyleClass:"labelStyleClass"},outputs:{onClick:"onClick",onFocus:"onFocus",onBlur:"onBlur"},features:[Ao([gEe])],decls:7,vars:23,consts:[[3,"ngStyle","ngClass"],[1,"p-hidden-accessible"],["type","radio",3,"checked","disabled","change","focus","blur"],["rb",""],[3,"ngClass","click"],[1,"p-radiobutton-icon"],[3,"class","ngClass","click",4,"ngIf"]],template:function(e,n){if(1&e){const r=vi();Ke(0,"div",0)(1,"div",1)(2,"input",2,3),mn("change",function(o){return n.onChange(o)})("focus",function(o){return n.onInputFocus(o)})("blur",function(o){return n.onInputBlur(o)}),Je()(),Ke(4,"div",4),mn("click",function(o){Pt(r);const l=oo(3);return Rt(n.handleClick(o,l,!0))}),Bn(5,"span",5),Je()(),$e(6,dEe,2,9,"label",6)}2&e&&(kr(n.styleClass),de("ngStyle",n.style)("ngClass",Su(15,fEe,n.checked,n.disabled,n.focused)),Ie(2),de("checked",n.checked)("disabled",n.disabled),vr("id",n.inputId)("name",n.name)("value",n.value)("tabindex",n.tabindex)("aria-checked",n.checked)("aria-label",n.ariaLabel)("aria-labelledby",n.ariaLabelledBy),Ie(2),de("ngClass",Su(19,pEe,n.checked,n.disabled,n.focused)),Ie(2),de("ngIf",n.label))},dependencies:[no,ho,Po],encapsulation:2,changeDetection:0}),i})(),yEe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({imports:[Os]}),i})();dC([tl({transform:"{{transform}}",opacity:0}),wc("{{transition}}",tl({transform:"none",opacity:1}))]),dC([wc("{{transition}}",tl({transform:"{{transform}}",opacity:0}))]);let OEe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({imports:[Os,av,Xc,av,xa]}),i})(),FEe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({imports:[Os]}),i})(),UEe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({imports:[Os,Xc,xa,xa]}),i})();const HEe=fA([],dA(pA,(i,{graphs:t})=>t)),GEe=fA({id:"default",label:"default",style:"default",rules:"default",nodes:[],edges:[]},dA(I1,(i,{graph:t})=>t)),WEe=["headerchkbox"],jEe=["filter"];function $Ee(i,t){1&i&&Ni(0)}function qEe(i,t){if(1&i&&(Ke(0,"div",7),su(1),$e(2,$Ee,1,0,"ng-container",8),Je()),2&i){const e=be();Ie(2),de("ngTemplateOutlet",e.headerTemplate)}}const U6=function(i){return{"p-checkbox-disabled":i}},XEe=function(i,t,e){return{"p-highlight":i,"p-focus":t,"p-disabled":e}},H6=function(i){return{"pi pi-check":i}};function YEe(i,t){if(1&i){const e=vi();Ke(0,"div",12)(1,"div",13)(2,"input",14),mn("focus",function(){return Pt(e),Rt(be(2).onHeaderCheckboxFocus())})("blur",function(){return Pt(e),Rt(be(2).onHeaderCheckboxBlur())})("keydown.space",function(r){return Pt(e),Rt(be(2).toggleAll(r))}),Je()(),Ke(3,"div",15,16),mn("click",function(r){return Pt(e),Rt(be(2).toggleAll(r))}),Bn(5,"span",17),Je()()}if(2&i){const e=be(2);de("ngClass",_i(5,U6,e.disabled||e.toggleAllDisabled)),Ie(2),de("checked",e.allChecked)("disabled",e.disabled||e.toggleAllDisabled),Ie(1),de("ngClass",Su(7,XEe,e.allChecked,e.headerCheckboxFocus,e.disabled||e.toggleAllDisabled)),Ie(2),de("ngClass",_i(11,H6,e.allChecked))}}function KEe(i,t){1&i&&Ni(0)}const ZEe=function(i){return{options:i}};function QEe(i,t){if(1&i&&(zr(0),$e(1,KEe,1,0,"ng-container",18),Vr()),2&i){const e=be(2);Ie(1),de("ngTemplateOutlet",e.filterTemplate)("ngTemplateOutletContext",_i(2,ZEe,e.filterOptions))}}function JEe(i,t){if(1&i){const e=vi();Ke(0,"div",20)(1,"input",21,22),mn("input",function(r){return Pt(e),Rt(be(3).onFilter(r))}),Je(),Bn(3,"span",23),Je()}if(2&i){const e=be(3);Ie(1),de("value",e.filterValue||"")("disabled",e.disabled),vr("placeholder",e.filterPlaceHolder)("aria-label",e.ariaFilterLabel)}}function eTe(i,t){1&i&&$e(0,JEe,4,4,"div",19),2&i&&de("ngIf",be(2).filter)}function tTe(i,t){if(1&i&&(Ke(0,"div",7),$e(1,YEe,6,13,"div",9),$e(2,QEe,2,4,"ng-container",10),$e(3,eTe,1,1,"ng-template",null,11,sc),Je()),2&i){const e=oo(4),n=be();Ie(1),de("ngIf",n.checkbox&&n.multiple&&n.showToggleAll),Ie(1),de("ngIf",n.filterTemplate)("ngIfElse",e)}}function nTe(i,t){if(1&i&&(Ke(0,"span"),li(1),Je()),2&i){const e=be().$implicit,n=be(2);Ie(1),ts(n.getOptionGroupLabel(e)||"empty")}}function iTe(i,t){1&i&&Ni(0)}function rTe(i,t){1&i&&Ni(0)}const WR=function(i){return{$implicit:i}};function sTe(i,t){if(1&i&&(Ke(0,"li",25),$e(1,nTe,2,1,"span",3),$e(2,iTe,1,0,"ng-container",18),Je(),$e(3,rTe,1,0,"ng-container",18)),2&i){const e=t.$implicit,n=be(2),r=oo(8);Ie(1),de("ngIf",!n.groupTemplate),Ie(1),de("ngTemplateOutlet",n.groupTemplate)("ngTemplateOutletContext",_i(5,WR,e)),Ie(1),de("ngTemplateOutlet",r)("ngTemplateOutletContext",_i(7,WR,n.getOptionGroupChildren(e)))}}function oTe(i,t){if(1&i&&(zr(0),$e(1,sTe,4,9,"ng-template",24),Vr()),2&i){const e=be();Ie(1),de("ngForOf",e.optionsToRender)}}function aTe(i,t){1&i&&Ni(0)}function lTe(i,t){if(1&i&&(zr(0),$e(1,aTe,1,0,"ng-container",18),Vr()),2&i){const e=be(),n=oo(8);Ie(1),de("ngTemplateOutlet",n)("ngTemplateOutletContext",_i(2,WR,e.optionsToRender))}}const cTe=function(i){return{"p-highlight":i}};function uTe(i,t){if(1&i&&(Ke(0,"div",12)(1,"div",28),Bn(2,"span",17),Je()()),2&i){const e=be().$implicit,n=be(2);de("ngClass",_i(3,U6,n.disabled||n.isOptionDisabled(e))),Ie(1),de("ngClass",_i(5,cTe,n.isSelected(e))),Ie(1),de("ngClass",_i(7,H6,n.isSelected(e)))}}function hTe(i,t){if(1&i&&(Ke(0,"span"),li(1),Je()),2&i){const e=be().$implicit,n=be(2);Ie(1),ts(n.getOptionLabel(e))}}function dTe(i,t){1&i&&Ni(0)}const fTe=function(i,t){return{"p-listbox-item":!0,"p-highlight":i,"p-disabled":t}},pTe=function(i,t){return{$implicit:i,index:t}};function gTe(i,t){if(1&i){const e=vi();Ke(0,"li",27),mn("click",function(r){const o=Pt(e).$implicit;return Rt(be(2).onOptionClick(r,o))})("dblclick",function(r){const o=Pt(e).$implicit;return Rt(be(2).onOptionDoubleClick(r,o))})("touchend",function(){const s=Pt(e).$implicit;return Rt(be(2).onOptionTouchEnd(s))})("keydown",function(r){const o=Pt(e).$implicit;return Rt(be(2).onOptionKeyDown(r,o))}),$e(1,uTe,3,9,"div",9),$e(2,hTe,2,1,"span",3),$e(3,dTe,1,0,"ng-container",18),Je()}if(2&i){const e=t.$implicit,n=t.index,r=be(2);de("ngClass",ss(8,fTe,r.isSelected(e),r.isOptionDisabled(e))),vr("tabindex",r.disabled||r.isOptionDisabled(e)?null:"0")("aria-label",r.getOptionLabel(e))("aria-selected",r.isSelected(e)),Ie(1),de("ngIf",r.checkbox&&r.multiple),Ie(1),de("ngIf",!r.itemTemplate),Ie(1),de("ngTemplateOutlet",r.itemTemplate)("ngTemplateOutletContext",ss(11,pTe,e,n))}}function mTe(i,t){1&i&&$e(0,gTe,4,14,"li",26),2&i&&de("ngForOf",t.$implicit)}function vTe(i,t){if(1&i&&(zr(0),li(1),Vr()),2&i){const e=be(2);Ie(1),yc(" ",e.emptyFilterMessageLabel," ")}}function yTe(i,t){1&i&&Ni(0,null,30)}function _Te(i,t){if(1&i&&(Ke(0,"li",29),$e(1,vTe,2,1,"ng-container",10),$e(2,yTe,2,0,"ng-container",8),Je()),2&i){const e=be();Ie(1),de("ngIf",!e.emptyFilterTemplate&&!e.emptyTemplate)("ngIfElse",e.emptyFilter),Ie(1),de("ngTemplateOutlet",e.emptyFilterTemplate||e.emptyTemplate)}}function bTe(i,t){if(1&i&&(zr(0),li(1),Vr()),2&i){const e=be(2);Ie(1),yc(" ",e.emptyMessageLabel," ")}}function CTe(i,t){1&i&&Ni(0,null,31)}function wTe(i,t){if(1&i&&(Ke(0,"li",29),$e(1,bTe,2,1,"ng-container",10),$e(2,CTe,2,0,"ng-container",8),Je()),2&i){const e=be();Ie(1),de("ngIf",!e.emptyTemplate)("ngIfElse",e.empty),Ie(1),de("ngTemplateOutlet",e.emptyTemplate)}}function ATe(i,t){1&i&&Ni(0)}function xTe(i,t){if(1&i&&(Ke(0,"div",32),su(1,1),$e(2,ATe,1,0,"ng-container",8),Je()),2&i){const e=be();Ie(2),de("ngTemplateOutlet",e.footerTemplate)}}const ITe=[[["p-header"]],[["p-footer"]]],STe=function(i){return{"p-listbox p-component":!0,"p-disabled":i}},ETe=["p-header","p-footer"],TTe={provide:Cc,useExisting:cs(()=>MTe),multi:!0};let MTe=(()=>{class i{constructor(e,n,r,s){this.el=e,this.cd=n,this.filterService=r,this.config=s,this.checkbox=!1,this.filter=!1,this.filterMatchMode="contains",this.metaKeySelection=!0,this.showToggleAll=!0,this.optionGroupChildren="items",this.onChange=new Fn,this.onClick=new Fn,this.onDblClick=new Fn,this.onModelChange=()=>{},this.onModelTouched=()=>{}}get options(){return this._options}set options(e){this._options=e,this.hasFilter()&&this.activateFilter()}get filterValue(){return this._filterValue}set filterValue(e){this._filterValue=e,this.activateFilter()}ngOnInit(){this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.cd.markForCheck()}),this.filterBy&&(this.filterOptions={filter:e=>this.onFilter(e),reset:()=>this.resetFilter()})}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"item":default:this.itemTemplate=e.template;break;case"group":this.groupTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"filter":this.filterTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"empty":this.emptyTemplate=e.template;break;case"emptyfilter":this.emptyFilterTemplate=e.template}})}getOptionLabel(e){return this.optionLabel?Ji.resolveFieldData(e,this.optionLabel):null!=e.label?e.label:e}getOptionGroupChildren(e){return this.optionGroupChildren?Ji.resolveFieldData(e,this.optionGroupChildren):e.items}getOptionGroupLabel(e){return this.optionGroupLabel?Ji.resolveFieldData(e,this.optionGroupLabel):null!=e.label?e.label:e}getOptionValue(e){return this.optionValue?Ji.resolveFieldData(e,this.optionValue):this.optionLabel||void 0===e.value?e:e.value}isOptionDisabled(e){return this.optionDisabled?Ji.resolveFieldData(e,this.optionDisabled):void 0!==e.disabled&&e.disabled}writeValue(e){this.value=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onOptionClick(e,n){this.disabled||this.isOptionDisabled(n)||this.readonly||(this.multiple?this.checkbox?this.onOptionClickCheckbox(e,n):this.onOptionClickMultiple(e,n):this.onOptionClickSingle(e,n),this.onClick.emit({originalEvent:e,option:n,value:this.value}),this.optionTouched=!1)}onOptionTouchEnd(e){this.disabled||this.isOptionDisabled(e)||this.readonly||(this.optionTouched=!0)}onOptionDoubleClick(e,n){this.disabled||this.isOptionDisabled(n)||this.readonly||this.onDblClick.emit({originalEvent:e,option:n,value:this.value})}onOptionClickSingle(e,n){let r=this.isSelected(n),s=!1;if(!this.optionTouched&&this.metaKeySelection){let l=e.metaKey||e.ctrlKey;r?l&&(this.value=null,s=!0):(this.value=this.getOptionValue(n),s=!0)}else this.value=r?null:this.getOptionValue(n),s=!0;s&&(this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}))}onOptionClickMultiple(e,n){let r=this.isSelected(n),s=!1;if(!this.optionTouched&&this.metaKeySelection){let l=e.metaKey||e.ctrlKey;r?(l?this.removeOption(n):this.value=[this.getOptionValue(n)],s=!0):(this.value=l&&this.value||[],this.value=[...this.value,this.getOptionValue(n)],s=!0)}else r?this.removeOption(n):this.value=[...this.value||[],this.getOptionValue(n)],s=!0;s&&(this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}))}onOptionClickCheckbox(e,n){this.disabled||this.readonly||(this.isSelected(n)?this.removeOption(n):(this.value=this.value?this.value:[],this.value=[...this.value,this.getOptionValue(n)]),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}))}removeOption(e){this.value=this.value.filter(n=>!Ji.equals(n,this.getOptionValue(e),this.dataKey))}isSelected(e){let n=!1,r=this.getOptionValue(e);if(this.multiple){if(this.value)for(let s of this.value)if(Ji.equals(s,r,this.dataKey)){n=!0;break}}else n=Ji.equals(this.value,r,this.dataKey);return n}get allChecked(){let e=this.optionsToRender;if(!e||0===e.length)return!1;{let n=0,r=0,s=0,o=this.group?0:this.optionsToRender.length;for(let l of e)if(this.group)for(let u of this.getOptionGroupChildren(l)){let p=this.isOptionDisabled(u),v=this.isSelected(u);if(p)v?n++:r++;else{if(!v)return!1;s++}o++}else{let u=this.isOptionDisabled(l),p=this.isSelected(l);if(u)p?n++:r++;else{if(!p)return!1;s++}}return o===n||o===s||s&&o===s+r+n}}get optionsToRender(){return this._filteredOptions||this.options}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation($c.EMPTY_MESSAGE)}get emptyFilterMessageLabel(){return this.emptyFilterMessage||this.config.getTranslation($c.EMPTY_FILTER_MESSAGE)}hasFilter(){return this._filterValue&&this._filterValue.trim().length>0}isEmpty(){return!this.optionsToRender||this.optionsToRender&&0===this.optionsToRender.length}onFilter(e){this._filterValue=e.target.value,this.activateFilter()}activateFilter(){if(this.hasFilter()&&this._options)if(this.group){let e=(this.filterBy||this.optionLabel||"label").split(","),n=[];for(let r of this.options){let s=this.filterService.filter(this.getOptionGroupChildren(r),e,this.filterValue,this.filterMatchMode,this.filterLocale);s&&s.length&&n.push({...r,[this.optionGroupChildren]:s})}this._filteredOptions=n}else this._filteredOptions=this._options.filter(e=>this.filterService.filters[this.filterMatchMode](this.getOptionLabel(e),this._filterValue,this.filterLocale));else this._filteredOptions=null}resetFilter(){this.filterViewChild&&this.filterViewChild.nativeElement&&(this.filterViewChild.nativeElement.value=""),this._filterValue=null,this._filteredOptions=null}get toggleAllDisabled(){let e=this.optionsToRender;if(!e||0===e.length)return!0;for(let n of e)if(!this.isOptionDisabled(n))return!1;return!0}toggleAll(e){this.disabled||this.toggleAllDisabled||this.readonly||(this.allChecked?this.uncheckAll():this.checkAll(),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}),e.preventDefault())}checkAll(){let n=[];this.optionsToRender.forEach(r=>{if(this.group){let s=this.getOptionGroupChildren(r);s&&s.forEach(o=>{let l=this.isOptionDisabled(o);(!l||l&&this.isSelected(o))&&n.push(this.getOptionValue(o))})}else{let s=this.isOptionDisabled(r);(!s||s&&this.isSelected(r))&&n.push(this.getOptionValue(r))}}),this.value=n}uncheckAll(){let n=[];this.optionsToRender.forEach(r=>{this.group?r.items&&r.items.forEach(s=>{this.isOptionDisabled(s)&&this.isSelected(s)&&n.push(this.getOptionValue(s))}):this.isOptionDisabled(r)&&this.isSelected(r)&&n.push(this.getOptionValue(r))}),this.value=n}onOptionKeyDown(e,n){if(this.readonly)return;let r=e.currentTarget;switch(e.which){case 40:var s=this.findNextItem(r);s&&s.focus(),e.preventDefault();break;case 38:var o=this.findPrevItem(r);o&&o.focus(),e.preventDefault();break;case 13:this.onOptionClick(e,n),e.preventDefault()}}findNextItem(e){let n=e.nextElementSibling;return n?Ft.hasClass(n,"p-disabled")||Ft.isHidden(n)||Ft.hasClass(n,"p-listbox-item-group")?this.findNextItem(n):n:null}findPrevItem(e){let n=e.previousElementSibling;return n?Ft.hasClass(n,"p-disabled")||Ft.isHidden(n)||Ft.hasClass(n,"p-listbox-item-group")?this.findPrevItem(n):n:null}onHeaderCheckboxFocus(){this.headerCheckboxFocus=!0}onHeaderCheckboxBlur(){this.headerCheckboxFocus=!1}ngOnDestroy(){this.translationSubscription&&this.translationSubscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(Xt(Yn),Xt(xo),Xt(oA),Xt(Dp))},i.\u0275cmp=_r({type:i,selectors:[["p-listbox"]],contentQueries:function(e,n,r){if(1&e&&(Ba(r,XD,5),Ba(r,C1,5),Ba(r,za,4)),2&e){let s;Wi(s=ji())&&(n.headerFacet=s.first),Wi(s=ji())&&(n.footerFacet=s.first),Wi(s=ji())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(Tr(WEe,5),Tr(jEe,5)),2&e){let r;Wi(r=ji())&&(n.headerCheckboxViewChild=r.first),Wi(r=ji())&&(n.filterViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{multiple:"multiple",style:"style",styleClass:"styleClass",listStyle:"listStyle",listStyleClass:"listStyleClass",readonly:"readonly",disabled:"disabled",checkbox:"checkbox",filter:"filter",filterBy:"filterBy",filterMatchMode:"filterMatchMode",filterLocale:"filterLocale",metaKeySelection:"metaKeySelection",dataKey:"dataKey",showToggleAll:"showToggleAll",optionLabel:"optionLabel",optionValue:"optionValue",optionGroupChildren:"optionGroupChildren",optionGroupLabel:"optionGroupLabel",optionDisabled:"optionDisabled",ariaFilterLabel:"ariaFilterLabel",filterPlaceHolder:"filterPlaceHolder",emptyFilterMessage:"emptyFilterMessage",emptyMessage:"emptyMessage",group:"group",options:"options",filterValue:"filterValue"},outputs:{onChange:"onChange",onClick:"onClick",onDblClick:"onDblClick"},features:[Ao([TTe])],ngContentSelectors:ETe,decls:12,vars:17,consts:[[3,"ngClass","ngStyle"],["class","p-listbox-header",4,"ngIf"],["role","listbox","aria-multiselectable","multiple",1,"p-listbox-list"],[4,"ngIf"],["itemslist",""],["class","p-listbox-empty-message",4,"ngIf"],["class","p-listbox-footer",4,"ngIf"],[1,"p-listbox-header"],[4,"ngTemplateOutlet"],["class","p-checkbox p-component",3,"ngClass",4,"ngIf"],[4,"ngIf","ngIfElse"],["builtInFilterElement",""],[1,"p-checkbox","p-component",3,"ngClass"],[1,"p-hidden-accessible"],["type","checkbox","readonly","readonly",3,"checked","disabled","focus","blur","keydown.space"],[1,"p-checkbox-box",3,"ngClass","click"],["headerchkbox",""],[1,"p-checkbox-icon",3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","p-listbox-filter-container",4,"ngIf"],[1,"p-listbox-filter-container"],["type","text",1,"p-listbox-filter","p-inputtext","p-component",3,"value","disabled","input"],["filter",""],[1,"p-listbox-filter-icon","pi","pi-search"],["ngFor","",3,"ngForOf"],[1,"p-listbox-item-group"],["pRipple","","role","option",3,"ngClass","click","dblclick","touchend","keydown",4,"ngFor","ngForOf"],["pRipple","","role","option",3,"ngClass","click","dblclick","touchend","keydown"],[1,"p-checkbox-box",3,"ngClass"],[1,"p-listbox-empty-message"],["emptyFilter",""],["empty",""],[1,"p-listbox-footer"]],template:function(e,n){1&e&&(Bf(ITe),Ke(0,"div",0),$e(1,qEe,3,1,"div",1),$e(2,tTe,5,3,"div",1),Ke(3,"div",0)(4,"ul",2),$e(5,oTe,2,1,"ng-container",3),$e(6,lTe,2,4,"ng-container",3),$e(7,mTe,1,1,"ng-template",null,4,sc),$e(9,_Te,3,3,"li",5),$e(10,wTe,3,3,"li",5),Je()(),$e(11,xTe,3,1,"div",6),Je()),2&e&&(kr(n.styleClass),de("ngClass",_i(15,STe,n.disabled))("ngStyle",n.style),Ie(1),de("ngIf",n.headerFacet||n.headerTemplate),Ie(1),de("ngIf",n.checkbox&&n.multiple&&n.showToggleAll||n.filter),Ie(1),kr(n.listStyleClass),de("ngClass","p-listbox-list-wrapper")("ngStyle",n.listStyle),Ie(2),de("ngIf",n.group),Ie(1),de("ngIf",!n.group),Ie(3),de("ngIf",n.hasFilter()&&n.isEmpty()),Ie(1),de("ngIf",!n.hasFilter()&&n.isEmpty()),Ie(1),de("ngIf",n.footerFacet||n.footerTemplate))},dependencies:[no,jc,ho,el,Po,Du],styles:[".p-listbox-list-wrapper{overflow:auto}.p-listbox-list{list-style-type:none;margin:0;padding:0}.p-listbox-item{cursor:pointer;position:relative;overflow:hidden;display:flex;align-items:center;-webkit-user-select:none;user-select:none}.p-listbox-header{display:flex;align-items:center}.p-listbox-filter-container{position:relative;flex:1 1 auto}.p-listbox-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-listbox-filter{width:100%}\n"],encapsulation:2,changeDetection:0}),i})(),DTe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({imports:[Os,xa,Xc,xa]}),i})();dC([tl({transform:"{{transform}}",opacity:0}),wc("{{transition}}")]),dC([wc("{{transition}}",tl({transform:"{{transform}}",opacity:0}))]);let FTe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({imports:[Os,Xc]}),i})(),UTe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({imports:[Os,xa]}),i})(),GTe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({imports:[Os,xa]}),i})(),$Te=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Sr({imports:[Os]}),i})();const XTe=fA({id:"default",grid:!1,info:!1,full:!0,maxHeight:16384,maxWidth:16384},dA(oC("[SysPreference] Retrieve Preferences Success",{_as:"props",_p:void 0}),(i,{Preferences:t})=>t)),YTe=fA([],dA(Q1,(i,{styles:t})=>t)),KTe=fA({id:"default",tags:[]},dA(K2,(i,{style:t})=>t));let ZTe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i,bootstrap:[Txe]}),i.\u0275inj=Sr({providers:[sA,fm],imports:[a3,MQ.forRoot(),XAe,E1e,w3,Os,hQ.forRoot({level:qc.DEBUG}),zre,c4,j1e,fse,iEe,Aae,G1,av,m4,V2,$2,w3,uoe,moe,cEe,yEe,j1,OEe,Iae,Bme,Dae,Sxe,H1,FEe,Zae,UEe,Aoe,oce,Cue,m4,DTe,FTe,UTe,GTe,Lue,$Te,Bue,rve,Fge,sv,Uge,Gge,GZ.forRoot({graphs:HEe,graph:GEe,styles:YTe,style:KTe,preferences:XTe})]}),i})();(function W7(){if(lN)throw new Error("Cannot enable prod mode after platform setup.");aN=!1})(),Jq().bootstrapModule(ZTe).catch(i=>console.error(i))},3333:He=>{He.exports=function(U,X){var D=X.length;if(0!==D){var V=U.length;U.length+=D;for(var O=0;O<D;O++)U[V+O]=X[O]}}},5343:(He,we)=>{"use strict";we.byteLength=function P(J){var W=L(J),_e=W[1];return 3*(W[0]+_e)/4-_e},we.toByteArray=function ee(J){var W,$,ae=L(J),_e=ae[0],Ee=ae[1],te=new D(function q(J,W,ae){return 3*(W+ae)/4-ae}(0,_e,Ee)),oe=0,B=Ee>0?_e-4:_e;for($=0;$<B;$+=4)W=X[J.charCodeAt($)]<<18|X[J.charCodeAt($+1)]<<12|X[J.charCodeAt($+2)]<<6|X[J.charCodeAt($+3)],te[oe++]=W>>16&255,te[oe++]=W>>8&255,te[oe++]=255&W;return 2===Ee&&(W=X[J.charCodeAt($)]<<2|X[J.charCodeAt($+1)]>>4,te[oe++]=255&W),1===Ee&&(W=X[J.charCodeAt($)]<<10|X[J.charCodeAt($+1)]<<4|X[J.charCodeAt($+2)]>>2,te[oe++]=W>>8&255,te[oe++]=255&W),te},we.fromByteArray=function se(J){for(var W,ae=J.length,_e=ae%3,Ee=[],oe=0,B=ae-_e;oe<B;oe+=16383)Ee.push(ne(J,oe,oe+16383>B?B:oe+16383));return 1===_e?Ee.push(U[(W=J[ae-1])>>2]+U[W<<4&63]+"=="):2===_e&&Ee.push(U[(W=(J[ae-2]<<8)+J[ae-1])>>10]+U[W>>4&63]+U[W<<2&63]+"="),Ee.join("")};for(var U=[],X=[],D=typeof Uint8Array<"u"?Uint8Array:Array,V="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",O=0,H=V.length;O<H;++O)U[O]=V[O],X[V.charCodeAt(O)]=O;function L(J){var W=J.length;if(W%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var ae=J.indexOf("=");return-1===ae&&(ae=W),[ae,ae===W?0:4-ae%4]}function K(J){return U[J>>18&63]+U[J>>12&63]+U[J>>6&63]+U[63&J]}function ne(J,W,ae){for(var Ee=[],te=W;te<ae;te+=3)Ee.push(K((J[te]<<16&16711680)+(J[te+1]<<8&65280)+(255&J[te+2])));return Ee.join("")}X["-".charCodeAt(0)]=62,X["_".charCodeAt(0)]=63},3172:(He,we,U)=>{"use strict";var X=U(5343),D=U(8461),V="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;we.Buffer=P,we.SlowBuffer=function te(et){return+et!=et&&(et=0),P.alloc(+et)},we.INSPECT_MAX_BYTES=50;var O=2147483647;function L(et){if(et>O)throw new RangeError('The value "'+et+'" is invalid for option "size"');var Le=new Uint8Array(et);return Object.setPrototypeOf(Le,P.prototype),Le}function P(et,Le,ze){if("number"==typeof et){if("string"==typeof Le)throw new TypeError('The "string" argument must be of type string. Received type number');return ne(et)}return q(et,Le,ze)}function q(et,Le,ze){if("string"==typeof et)return function se(et,Le){if(("string"!=typeof Le||""===Le)&&(Le="utf8"),!P.isEncoding(Le))throw new TypeError("Unknown encoding: "+Le);var ze=0|oe(et,Le),Ht=L(ze),yn=Ht.write(et,Le);return yn!==ze&&(Ht=Ht.slice(0,yn)),Ht}(et,Le);if(ArrayBuffer.isView(et))return function W(et){if(Et(et,Uint8Array)){var Le=new Uint8Array(et);return ae(Le.buffer,Le.byteOffset,Le.byteLength)}return J(et)}(et);if(null==et)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof et);if(Et(et,ArrayBuffer)||et&&Et(et.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Et(et,SharedArrayBuffer)||et&&Et(et.buffer,SharedArrayBuffer)))return ae(et,Le,ze);if("number"==typeof et)throw new TypeError('The "value" argument must not be of type number. Received type number');var Ht=et.valueOf&&et.valueOf();if(null!=Ht&&Ht!==et)return P.from(Ht,Le,ze);var yn=function _e(et){if(P.isBuffer(et)){var Le=0|Ee(et.length),ze=L(Le);return 0===ze.length||et.copy(ze,0,0,Le),ze}return void 0!==et.length?"number"!=typeof et.length||Ot(et.length)?L(0):J(et):"Buffer"===et.type&&Array.isArray(et.data)?J(et.data):void 0}(et);if(yn)return yn;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof et[Symbol.toPrimitive])return P.from(et[Symbol.toPrimitive]("string"),Le,ze);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof et)}function ee(et){if("number"!=typeof et)throw new TypeError('"size" argument must be of type number');if(et<0)throw new RangeError('The value "'+et+'" is invalid for option "size"')}function ne(et){return ee(et),L(et<0?0:0|Ee(et))}function J(et){for(var Le=et.length<0?0:0|Ee(et.length),ze=L(Le),Ht=0;Ht<Le;Ht+=1)ze[Ht]=255&et[Ht];return ze}function ae(et,Le,ze){if(Le<0||et.byteLength<Le)throw new RangeError('"offset" is outside of buffer bounds');if(et.byteLength<Le+(ze||0))throw new RangeError('"length" is outside of buffer bounds');var Ht;return Ht=void 0===Le&&void 0===ze?new Uint8Array(et):void 0===ze?new Uint8Array(et,Le):new Uint8Array(et,Le,ze),Object.setPrototypeOf(Ht,P.prototype),Ht}function Ee(et){if(et>=O)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+O.toString(16)+" bytes");return 0|et}function oe(et,Le){if(P.isBuffer(et))return et.length;if(ArrayBuffer.isView(et)||Et(et,ArrayBuffer))return et.byteLength;if("string"!=typeof et)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof et);var ze=et.length,Ht=arguments.length>2&&!0===arguments[2];if(!Ht&&0===ze)return 0;for(var yn=!1;;)switch(Le){case"ascii":case"latin1":case"binary":return ze;case"utf8":case"utf-8":return fe(et).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*ze;case"hex":return ze>>>1;case"base64":return Un(et).length;default:if(yn)return Ht?-1:fe(et).length;Le=(""+Le).toLowerCase(),yn=!0}}function B(et,Le,ze){var Ht=!1;if((void 0===Le||Le<0)&&(Le=0),Le>this.length||((void 0===ze||ze>this.length)&&(ze=this.length),ze<=0)||(ze>>>=0)<=(Le>>>=0))return"";for(et||(et="utf8");;)switch(et){case"hex":return Ne(this,Le,ze);case"utf8":case"utf-8":return Fe(this,Le,ze);case"ascii":return vt(this,Le,ze);case"latin1":case"binary":return vn(this,Le,ze);case"base64":return ot(this,Le,ze);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ht(this,Le,ze);default:if(Ht)throw new TypeError("Unknown encoding: "+et);et=(et+"").toLowerCase(),Ht=!0}}function $(et,Le,ze){var Ht=et[Le];et[Le]=et[ze],et[ze]=Ht}function ie(et,Le,ze,Ht,yn){if(0===et.length)return-1;if("string"==typeof ze?(Ht=ze,ze=0):ze>2147483647?ze=2147483647:ze<-2147483648&&(ze=-2147483648),Ot(ze=+ze)&&(ze=yn?0:et.length-1),ze<0&&(ze=et.length+ze),ze>=et.length){if(yn)return-1;ze=et.length-1}else if(ze<0){if(!yn)return-1;ze=0}if("string"==typeof Le&&(Le=P.from(Le,Ht)),P.isBuffer(Le))return 0===Le.length?-1:pe(et,Le,ze,Ht,yn);if("number"==typeof Le)return Le&=255,"function"==typeof Uint8Array.prototype.indexOf?yn?Uint8Array.prototype.indexOf.call(et,Le,ze):Uint8Array.prototype.lastIndexOf.call(et,Le,ze):pe(et,[Le],ze,Ht,yn);throw new TypeError("val must be string, number or Buffer")}function pe(et,Le,ze,Ht,yn){var ws,ii=1,Li=et.length,Cs=Le.length;if(void 0!==Ht&&("ucs2"===(Ht=String(Ht).toLowerCase())||"ucs-2"===Ht||"utf16le"===Ht||"utf-16le"===Ht)){if(et.length<2||Le.length<2)return-1;ii=2,Li/=2,Cs/=2,ze/=2}function lo($l,ql){return 1===ii?$l[ql]:$l.readUInt16BE(ql*ii)}if(yn){var ua=-1;for(ws=ze;ws<Li;ws++)if(lo(et,ws)===lo(Le,-1===ua?0:ws-ua)){if(-1===ua&&(ua=ws),ws-ua+1===Cs)return ua*ii}else-1!==ua&&(ws-=ws-ua),ua=-1}else for(ze+Cs>Li&&(ze=Li-Cs),ws=ze;ws>=0;ws--){for(var sr=!0,il=0;il<Cs;il++)if(lo(et,ws+il)!==lo(Le,il)){sr=!1;break}if(sr)return ws}return-1}function Be(et,Le,ze,Ht){ze=Number(ze)||0;var yn=et.length-ze;Ht?(Ht=Number(Ht))>yn&&(Ht=yn):Ht=yn;var ii=Le.length;Ht>ii/2&&(Ht=ii/2);for(var Li=0;Li<Ht;++Li){var Cs=parseInt(Le.substr(2*Li,2),16);if(Ot(Cs))return Li;et[ze+Li]=Cs}return Li}function Me(et,Le,ze,Ht){return ri(fe(Le,et.length-ze),et,ze,Ht)}function xe(et,Le,ze,Ht){return ri(function wt(et){for(var Le=[],ze=0;ze<et.length;++ze)Le.push(255&et.charCodeAt(ze));return Le}(Le),et,ze,Ht)}function ue(et,Le,ze,Ht){return ri(Un(Le),et,ze,Ht)}function Pe(et,Le,ze,Ht){return ri(function kt(et,Le){for(var ze,Ht,ii=[],Li=0;Li<et.length&&!((Le-=2)<0);++Li)Ht=(ze=et.charCodeAt(Li))>>8,ii.push(ze%256),ii.push(Ht);return ii}(Le,et.length-ze),et,ze,Ht)}function ot(et,Le,ze){return X.fromByteArray(0===Le&&ze===et.length?et:et.slice(Le,ze))}function Fe(et,Le,ze){ze=Math.min(et.length,ze);for(var Ht=[],yn=Le;yn<ze;){var lo,ws,ua,sr,ii=et[yn],Li=null,Cs=ii>239?4:ii>223?3:ii>191?2:1;if(yn+Cs<=ze)switch(Cs){case 1:ii<128&&(Li=ii);break;case 2:128==(192&(lo=et[yn+1]))&&(sr=(31&ii)<<6|63&lo)>127&&(Li=sr);break;case 3:ws=et[yn+2],128==(192&(lo=et[yn+1]))&&128==(192&ws)&&(sr=(15&ii)<<12|(63&lo)<<6|63&ws)>2047&&(sr<55296||sr>57343)&&(Li=sr);break;case 4:ws=et[yn+2],ua=et[yn+3],128==(192&(lo=et[yn+1]))&&128==(192&ws)&&128==(192&ua)&&(sr=(15&ii)<<18|(63&lo)<<12|(63&ws)<<6|63&ua)>65535&&sr<1114112&&(Li=sr)}null===Li?(Li=65533,Cs=1):Li>65535&&(Ht.push((Li-=65536)>>>10&1023|55296),Li=56320|1023&Li),Ht.push(Li),yn+=Cs}return function lt(et){var Le=et.length;if(Le<=4096)return String.fromCharCode.apply(String,et);for(var ze="",Ht=0;Ht<Le;)ze+=String.fromCharCode.apply(String,et.slice(Ht,Ht+=4096));return ze}(Ht)}function vt(et,Le,ze){var Ht="";ze=Math.min(et.length,ze);for(var yn=Le;yn<ze;++yn)Ht+=String.fromCharCode(127&et[yn]);return Ht}function vn(et,Le,ze){var Ht="";ze=Math.min(et.length,ze);for(var yn=Le;yn<ze;++yn)Ht+=String.fromCharCode(et[yn]);return Ht}function Ne(et,Le,ze){var Ht=et.length;(!Le||Le<0)&&(Le=0),(!ze||ze<0||ze>Ht)&&(ze=Ht);for(var yn="",ii=Le;ii<ze;++ii)yn+=fn[et[ii]];return yn}function ht(et,Le,ze){for(var Ht=et.slice(Le,ze),yn="",ii=0;ii<Ht.length-1;ii+=2)yn+=String.fromCharCode(Ht[ii]+256*Ht[ii+1]);return yn}function rt(et,Le,ze){if(et%1!=0||et<0)throw new RangeError("offset is not uint");if(et+Le>ze)throw new RangeError("Trying to access beyond buffer length")}function Ge(et,Le,ze,Ht,yn,ii){if(!P.isBuffer(et))throw new TypeError('"buffer" argument must be a Buffer instance');if(Le>yn||Le<ii)throw new RangeError('"value" argument is out of bounds');if(ze+Ht>et.length)throw new RangeError("Index out of range")}function _t(et,Le,ze,Ht,yn,ii){if(ze+Ht>et.length)throw new RangeError("Index out of range");if(ze<0)throw new RangeError("Index out of range")}function At(et,Le,ze,Ht,yn){return Le=+Le,ze>>>=0,yn||_t(et,0,ze,4),D.write(et,Le,ze,Ht,23,4),ze+4}function Lt(et,Le,ze,Ht,yn){return Le=+Le,ze>>>=0,yn||_t(et,0,ze,8),D.write(et,Le,ze,Ht,52,8),ze+8}we.kMaxLength=O,!(P.TYPED_ARRAY_SUPPORT=function H(){try{var et=new Uint8Array(1),Le={foo:function(){return 42}};return Object.setPrototypeOf(Le,Uint8Array.prototype),Object.setPrototypeOf(et,Le),42===et.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(P.prototype,"parent",{enumerable:!0,get:function(){if(P.isBuffer(this))return this.buffer}}),Object.defineProperty(P.prototype,"offset",{enumerable:!0,get:function(){if(P.isBuffer(this))return this.byteOffset}}),P.poolSize=8192,P.from=function(et,Le,ze){return q(et,Le,ze)},Object.setPrototypeOf(P.prototype,Uint8Array.prototype),Object.setPrototypeOf(P,Uint8Array),P.alloc=function(et,Le,ze){return function K(et,Le,ze){return ee(et),et<=0?L(et):void 0!==Le?"string"==typeof ze?L(et).fill(Le,ze):L(et).fill(Le):L(et)}(et,Le,ze)},P.allocUnsafe=function(et){return ne(et)},P.allocUnsafeSlow=function(et){return ne(et)},P.isBuffer=function(Le){return null!=Le&&!0===Le._isBuffer&&Le!==P.prototype},P.compare=function(Le,ze){if(Et(Le,Uint8Array)&&(Le=P.from(Le,Le.offset,Le.byteLength)),Et(ze,Uint8Array)&&(ze=P.from(ze,ze.offset,ze.byteLength)),!P.isBuffer(Le)||!P.isBuffer(ze))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Le===ze)return 0;for(var Ht=Le.length,yn=ze.length,ii=0,Li=Math.min(Ht,yn);ii<Li;++ii)if(Le[ii]!==ze[ii]){Ht=Le[ii],yn=ze[ii];break}return Ht<yn?-1:yn<Ht?1:0},P.isEncoding=function(Le){switch(String(Le).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},P.concat=function(Le,ze){if(!Array.isArray(Le))throw new TypeError('"list" argument must be an Array of Buffers');if(0===Le.length)return P.alloc(0);var Ht;if(void 0===ze)for(ze=0,Ht=0;Ht<Le.length;++Ht)ze+=Le[Ht].length;var yn=P.allocUnsafe(ze),ii=0;for(Ht=0;Ht<Le.length;++Ht){var Li=Le[Ht];if(Et(Li,Uint8Array))ii+Li.length>yn.length?P.from(Li).copy(yn,ii):Uint8Array.prototype.set.call(yn,Li,ii);else{if(!P.isBuffer(Li))throw new TypeError('"list" argument must be an Array of Buffers');Li.copy(yn,ii)}ii+=Li.length}return yn},P.byteLength=oe,P.prototype._isBuffer=!0,P.prototype.swap16=function(){var Le=this.length;if(Le%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var ze=0;ze<Le;ze+=2)$(this,ze,ze+1);return this},P.prototype.swap32=function(){var Le=this.length;if(Le%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var ze=0;ze<Le;ze+=4)$(this,ze,ze+3),$(this,ze+1,ze+2);return this},P.prototype.swap64=function(){var Le=this.length;if(Le%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var ze=0;ze<Le;ze+=8)$(this,ze,ze+7),$(this,ze+1,ze+6),$(this,ze+2,ze+5),$(this,ze+3,ze+4);return this},P.prototype.toLocaleString=P.prototype.toString=function(){var Le=this.length;return 0===Le?"":0===arguments.length?Fe(this,0,Le):B.apply(this,arguments)},P.prototype.equals=function(Le){if(!P.isBuffer(Le))throw new TypeError("Argument must be a Buffer");return this===Le||0===P.compare(this,Le)},P.prototype.inspect=function(){var Le="",ze=we.INSPECT_MAX_BYTES;return Le=this.toString("hex",0,ze).replace(/(.{2})/g,"$1 ").trim(),this.length>ze&&(Le+=" ... "),"<Buffer "+Le+">"},V&&(P.prototype[V]=P.prototype.inspect),P.prototype.compare=function(Le,ze,Ht,yn,ii){if(Et(Le,Uint8Array)&&(Le=P.from(Le,Le.offset,Le.byteLength)),!P.isBuffer(Le))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof Le);if(void 0===ze&&(ze=0),void 0===Ht&&(Ht=Le?Le.length:0),void 0===yn&&(yn=0),void 0===ii&&(ii=this.length),ze<0||Ht>Le.length||yn<0||ii>this.length)throw new RangeError("out of range index");if(yn>=ii&&ze>=Ht)return 0;if(yn>=ii)return-1;if(ze>=Ht)return 1;if(this===Le)return 0;for(var Li=(ii>>>=0)-(yn>>>=0),Cs=(Ht>>>=0)-(ze>>>=0),lo=Math.min(Li,Cs),ws=this.slice(yn,ii),ua=Le.slice(ze,Ht),sr=0;sr<lo;++sr)if(ws[sr]!==ua[sr]){Li=ws[sr],Cs=ua[sr];break}return Li<Cs?-1:Cs<Li?1:0},P.prototype.includes=function(Le,ze,Ht){return-1!==this.indexOf(Le,ze,Ht)},P.prototype.indexOf=function(Le,ze,Ht){return ie(this,Le,ze,Ht,!0)},P.prototype.lastIndexOf=function(Le,ze,Ht){return ie(this,Le,ze,Ht,!1)},P.prototype.write=function(Le,ze,Ht,yn){if(void 0===ze)yn="utf8",Ht=this.length,ze=0;else if(void 0===Ht&&"string"==typeof ze)yn=ze,Ht=this.length,ze=0;else{if(!isFinite(ze))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");ze>>>=0,isFinite(Ht)?(Ht>>>=0,void 0===yn&&(yn="utf8")):(yn=Ht,Ht=void 0)}var ii=this.length-ze;if((void 0===Ht||Ht>ii)&&(Ht=ii),Le.length>0&&(Ht<0||ze<0)||ze>this.length)throw new RangeError("Attempt to write outside buffer bounds");yn||(yn="utf8");for(var Li=!1;;)switch(yn){case"hex":return Be(this,Le,ze,Ht);case"utf8":case"utf-8":return Me(this,Le,ze,Ht);case"ascii":case"latin1":case"binary":return xe(this,Le,ze,Ht);case"base64":return ue(this,Le,ze,Ht);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Pe(this,Le,ze,Ht);default:if(Li)throw new TypeError("Unknown encoding: "+yn);yn=(""+yn).toLowerCase(),Li=!0}},P.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},P.prototype.slice=function(Le,ze){var Ht=this.length;(Le=~~Le)<0?(Le+=Ht)<0&&(Le=0):Le>Ht&&(Le=Ht),(ze=void 0===ze?Ht:~~ze)<0?(ze+=Ht)<0&&(ze=0):ze>Ht&&(ze=Ht),ze<Le&&(ze=Le);var yn=this.subarray(Le,ze);return Object.setPrototypeOf(yn,P.prototype),yn},P.prototype.readUintLE=P.prototype.readUIntLE=function(Le,ze,Ht){Le>>>=0,ze>>>=0,Ht||rt(Le,ze,this.length);for(var yn=this[Le],ii=1,Li=0;++Li<ze&&(ii*=256);)yn+=this[Le+Li]*ii;return yn},P.prototype.readUintBE=P.prototype.readUIntBE=function(Le,ze,Ht){Le>>>=0,ze>>>=0,Ht||rt(Le,ze,this.length);for(var yn=this[Le+--ze],ii=1;ze>0&&(ii*=256);)yn+=this[Le+--ze]*ii;return yn},P.prototype.readUint8=P.prototype.readUInt8=function(Le,ze){return Le>>>=0,ze||rt(Le,1,this.length),this[Le]},P.prototype.readUint16LE=P.prototype.readUInt16LE=function(Le,ze){return Le>>>=0,ze||rt(Le,2,this.length),this[Le]|this[Le+1]<<8},P.prototype.readUint16BE=P.prototype.readUInt16BE=function(Le,ze){return Le>>>=0,ze||rt(Le,2,this.length),this[Le]<<8|this[Le+1]},P.prototype.readUint32LE=P.prototype.readUInt32LE=function(Le,ze){return Le>>>=0,ze||rt(Le,4,this.length),(this[Le]|this[Le+1]<<8|this[Le+2]<<16)+16777216*this[Le+3]},P.prototype.readUint32BE=P.prototype.readUInt32BE=function(Le,ze){return Le>>>=0,ze||rt(Le,4,this.length),16777216*this[Le]+(this[Le+1]<<16|this[Le+2]<<8|this[Le+3])},P.prototype.readIntLE=function(Le,ze,Ht){Le>>>=0,ze>>>=0,Ht||rt(Le,ze,this.length);for(var yn=this[Le],ii=1,Li=0;++Li<ze&&(ii*=256);)yn+=this[Le+Li]*ii;return yn>=(ii*=128)&&(yn-=Math.pow(2,8*ze)),yn},P.prototype.readIntBE=function(Le,ze,Ht){Le>>>=0,ze>>>=0,Ht||rt(Le,ze,this.length);for(var yn=ze,ii=1,Li=this[Le+--yn];yn>0&&(ii*=256);)Li+=this[Le+--yn]*ii;return Li>=(ii*=128)&&(Li-=Math.pow(2,8*ze)),Li},P.prototype.readInt8=function(Le,ze){return Le>>>=0,ze||rt(Le,1,this.length),128&this[Le]?-1*(255-this[Le]+1):this[Le]},P.prototype.readInt16LE=function(Le,ze){Le>>>=0,ze||rt(Le,2,this.length);var Ht=this[Le]|this[Le+1]<<8;return 32768&Ht?4294901760|Ht:Ht},P.prototype.readInt16BE=function(Le,ze){Le>>>=0,ze||rt(Le,2,this.length);var Ht=this[Le+1]|this[Le]<<8;return 32768&Ht?4294901760|Ht:Ht},P.prototype.readInt32LE=function(Le,ze){return Le>>>=0,ze||rt(Le,4,this.length),this[Le]|this[Le+1]<<8|this[Le+2]<<16|this[Le+3]<<24},P.prototype.readInt32BE=function(Le,ze){return Le>>>=0,ze||rt(Le,4,this.length),this[Le]<<24|this[Le+1]<<16|this[Le+2]<<8|this[Le+3]},P.prototype.readFloatLE=function(Le,ze){return Le>>>=0,ze||rt(Le,4,this.length),D.read(this,Le,!0,23,4)},P.prototype.readFloatBE=function(Le,ze){return Le>>>=0,ze||rt(Le,4,this.length),D.read(this,Le,!1,23,4)},P.prototype.readDoubleLE=function(Le,ze){return Le>>>=0,ze||rt(Le,8,this.length),D.read(this,Le,!0,52,8)},P.prototype.readDoubleBE=function(Le,ze){return Le>>>=0,ze||rt(Le,8,this.length),D.read(this,Le,!1,52,8)},P.prototype.writeUintLE=P.prototype.writeUIntLE=function(Le,ze,Ht,yn){Le=+Le,ze>>>=0,Ht>>>=0,yn||Ge(this,Le,ze,Ht,Math.pow(2,8*Ht)-1,0);var Li=1,Cs=0;for(this[ze]=255&Le;++Cs<Ht&&(Li*=256);)this[ze+Cs]=Le/Li&255;return ze+Ht},P.prototype.writeUintBE=P.prototype.writeUIntBE=function(Le,ze,Ht,yn){Le=+Le,ze>>>=0,Ht>>>=0,yn||Ge(this,Le,ze,Ht,Math.pow(2,8*Ht)-1,0);var Li=Ht-1,Cs=1;for(this[ze+Li]=255&Le;--Li>=0&&(Cs*=256);)this[ze+Li]=Le/Cs&255;return ze+Ht},P.prototype.writeUint8=P.prototype.writeUInt8=function(Le,ze,Ht){return Le=+Le,ze>>>=0,Ht||Ge(this,Le,ze,1,255,0),this[ze]=255&Le,ze+1},P.prototype.writeUint16LE=P.prototype.writeUInt16LE=function(Le,ze,Ht){return Le=+Le,ze>>>=0,Ht||Ge(this,Le,ze,2,65535,0),this[ze]=255&Le,this[ze+1]=Le>>>8,ze+2},P.prototype.writeUint16BE=P.prototype.writeUInt16BE=function(Le,ze,Ht){return Le=+Le,ze>>>=0,Ht||Ge(this,Le,ze,2,65535,0),this[ze]=Le>>>8,this[ze+1]=255&Le,ze+2},P.prototype.writeUint32LE=P.prototype.writeUInt32LE=function(Le,ze,Ht){return Le=+Le,ze>>>=0,Ht||Ge(this,Le,ze,4,4294967295,0),this[ze+3]=Le>>>24,this[ze+2]=Le>>>16,this[ze+1]=Le>>>8,this[ze]=255&Le,ze+4},P.prototype.writeUint32BE=P.prototype.writeUInt32BE=function(Le,ze,Ht){return Le=+Le,ze>>>=0,Ht||Ge(this,Le,ze,4,4294967295,0),this[ze]=Le>>>24,this[ze+1]=Le>>>16,this[ze+2]=Le>>>8,this[ze+3]=255&Le,ze+4},P.prototype.writeIntLE=function(Le,ze,Ht,yn){if(Le=+Le,ze>>>=0,!yn){var ii=Math.pow(2,8*Ht-1);Ge(this,Le,ze,Ht,ii-1,-ii)}var Li=0,Cs=1,lo=0;for(this[ze]=255&Le;++Li<Ht&&(Cs*=256);)Le<0&&0===lo&&0!==this[ze+Li-1]&&(lo=1),this[ze+Li]=(Le/Cs>>0)-lo&255;return ze+Ht},P.prototype.writeIntBE=function(Le,ze,Ht,yn){if(Le=+Le,ze>>>=0,!yn){var ii=Math.pow(2,8*Ht-1);Ge(this,Le,ze,Ht,ii-1,-ii)}var Li=Ht-1,Cs=1,lo=0;for(this[ze+Li]=255&Le;--Li>=0&&(Cs*=256);)Le<0&&0===lo&&0!==this[ze+Li+1]&&(lo=1),this[ze+Li]=(Le/Cs>>0)-lo&255;return ze+Ht},P.prototype.writeInt8=function(Le,ze,Ht){return Le=+Le,ze>>>=0,Ht||Ge(this,Le,ze,1,127,-128),Le<0&&(Le=255+Le+1),this[ze]=255&Le,ze+1},P.prototype.writeInt16LE=function(Le,ze,Ht){return Le=+Le,ze>>>=0,Ht||Ge(this,Le,ze,2,32767,-32768),this[ze]=255&Le,this[ze+1]=Le>>>8,ze+2},P.prototype.writeInt16BE=function(Le,ze,Ht){return Le=+Le,ze>>>=0,Ht||Ge(this,Le,ze,2,32767,-32768),this[ze]=Le>>>8,this[ze+1]=255&Le,ze+2},P.prototype.writeInt32LE=function(Le,ze,Ht){return Le=+Le,ze>>>=0,Ht||Ge(this,Le,ze,4,2147483647,-2147483648),this[ze]=255&Le,this[ze+1]=Le>>>8,this[ze+2]=Le>>>16,this[ze+3]=Le>>>24,ze+4},P.prototype.writeInt32BE=function(Le,ze,Ht){return Le=+Le,ze>>>=0,Ht||Ge(this,Le,ze,4,2147483647,-2147483648),Le<0&&(Le=4294967295+Le+1),this[ze]=Le>>>24,this[ze+1]=Le>>>16,this[ze+2]=Le>>>8,this[ze+3]=255&Le,ze+4},P.prototype.writeFloatLE=function(Le,ze,Ht){return At(this,Le,ze,!0,Ht)},P.prototype.writeFloatBE=function(Le,ze,Ht){return At(this,Le,ze,!1,Ht)},P.prototype.writeDoubleLE=function(Le,ze,Ht){return Lt(this,Le,ze,!0,Ht)},P.prototype.writeDoubleBE=function(Le,ze,Ht){return Lt(this,Le,ze,!1,Ht)},P.prototype.copy=function(Le,ze,Ht,yn){if(!P.isBuffer(Le))throw new TypeError("argument should be a Buffer");if(Ht||(Ht=0),!yn&&0!==yn&&(yn=this.length),ze>=Le.length&&(ze=Le.length),ze||(ze=0),yn>0&&yn<Ht&&(yn=Ht),yn===Ht||0===Le.length||0===this.length)return 0;if(ze<0)throw new RangeError("targetStart out of bounds");if(Ht<0||Ht>=this.length)throw new RangeError("Index out of range");if(yn<0)throw new RangeError("sourceEnd out of bounds");yn>this.length&&(yn=this.length),Le.length-ze<yn-Ht&&(yn=Le.length-ze+Ht);var ii=yn-Ht;return this===Le&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(ze,Ht,yn):Uint8Array.prototype.set.call(Le,this.subarray(Ht,yn),ze),ii},P.prototype.fill=function(Le,ze,Ht,yn){if("string"==typeof Le){if("string"==typeof ze?(yn=ze,ze=0,Ht=this.length):"string"==typeof Ht&&(yn=Ht,Ht=this.length),void 0!==yn&&"string"!=typeof yn)throw new TypeError("encoding must be a string");if("string"==typeof yn&&!P.isEncoding(yn))throw new TypeError("Unknown encoding: "+yn);if(1===Le.length){var ii=Le.charCodeAt(0);("utf8"===yn&&ii<128||"latin1"===yn)&&(Le=ii)}}else"number"==typeof Le?Le&=255:"boolean"==typeof Le&&(Le=Number(Le));if(ze<0||this.length<ze||this.length<Ht)throw new RangeError("Out of range index");if(Ht<=ze)return this;var Li;if(ze>>>=0,Ht=void 0===Ht?this.length:Ht>>>0,Le||(Le=0),"number"==typeof Le)for(Li=ze;Li<Ht;++Li)this[Li]=Le;else{var Cs=P.isBuffer(Le)?Le:P.from(Le,yn),lo=Cs.length;if(0===lo)throw new TypeError('The value "'+Le+'" is invalid for argument "value"');for(Li=0;Li<Ht-ze;++Li)this[Li+ze]=Cs[Li%lo]}return this};var Ut=/[^+/0-9A-Za-z-_]/g;function fe(et,Le){Le=Le||1/0;for(var ze,Ht=et.length,yn=null,ii=[],Li=0;Li<Ht;++Li){if((ze=et.charCodeAt(Li))>55295&&ze<57344){if(!yn){if(ze>56319){(Le-=3)>-1&&ii.push(239,191,189);continue}if(Li+1===Ht){(Le-=3)>-1&&ii.push(239,191,189);continue}yn=ze;continue}if(ze<56320){(Le-=3)>-1&&ii.push(239,191,189),yn=ze;continue}ze=65536+(yn-55296<<10|ze-56320)}else yn&&(Le-=3)>-1&&ii.push(239,191,189);if(yn=null,ze<128){if((Le-=1)<0)break;ii.push(ze)}else if(ze<2048){if((Le-=2)<0)break;ii.push(ze>>6|192,63&ze|128)}else if(ze<65536){if((Le-=3)<0)break;ii.push(ze>>12|224,ze>>6&63|128,63&ze|128)}else{if(!(ze<1114112))throw new Error("Invalid code point");if((Le-=4)<0)break;ii.push(ze>>18|240,ze>>12&63|128,ze>>6&63|128,63&ze|128)}}return ii}function Un(et){return X.toByteArray(function Oe(et){if((et=(et=et.split("=")[0]).trim().replace(Ut,"")).length<2)return"";for(;et.length%4!=0;)et+="=";return et}(et))}function ri(et,Le,ze,Ht){for(var yn=0;yn<Ht&&!(yn+ze>=Le.length||yn>=et.length);++yn)Le[yn+ze]=et[yn];return yn}function Et(et,Le){return et instanceof Le||null!=et&&null!=et.constructor&&null!=et.constructor.name&&et.constructor.name===Le.name}function Ot(et){return et!=et}var fn=function(){for(var et="0123456789abcdef",Le=new Array(256),ze=0;ze<16;++ze)for(var Ht=16*ze,yn=0;yn<16;++yn)Le[Ht+yn]=et[ze]+et[yn];return Le}()},4147:function(He){He.exports=function(we){var U={};function X(D){if(U[D])return U[D].exports;var V=U[D]={i:D,l:!1,exports:{}};return we[D].call(V.exports,V,V.exports,X),V.l=!0,V.exports}return X.m=we,X.c=U,X.i=function(D){return D},X.d=function(D,V,O){X.o(D,V)||Object.defineProperty(D,V,{configurable:!1,enumerable:!0,get:O})},X.n=function(D){var V=D&&D.__esModule?function(){return D.default}:function(){return D};return X.d(V,"a",V),V},X.o=function(D,V){return Object.prototype.hasOwnProperty.call(D,V)},X.p="",X(X.s=3)}([function(we,U,X){"use strict";var D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ht){return typeof ht}:function(ht){return ht&&"function"==typeof Symbol&&ht.constructor===Symbol&&ht!==Symbol.prototype?"symbol":typeof ht},V=X(2),O=D(""),H=D({}),L=D(function(){}),P=function(rt){return(typeof rt>"u"?"undefined":D(rt))===H},ee=function(rt){return(typeof rt>"u"?"undefined":D(rt))===L},K=function(rt){return P(rt)&&ee(rt.collection)},ne=X(1),se=function(rt){return null!=rt&&!rt.removed()},J=function(rt,Ge){return(J=null!=rt.has?function(At,Lt){return At.has(Lt)}:function(At,Lt){return At.intersection(Lt).length>0})(rt,Ge)},W=function(rt){if(function(rt){return(typeof rt>"u"?"undefined":D(rt))===O}(rt))return function(Ge){return Ge.is(rt)};if(ee(rt))return rt;if(K(rt))return function(Ge){return J(rt,Ge)};throw new Error("Can not create match function for spec",rt)},_e=function(rt,Ge,_t,At,Lt){var Ut=function(rt,Ge,_t,At){var Lt={cy:rt,events:Ge,selector:_t||"node",fn:At};return rt.on(Lt.events,Lt.selector,Lt.fn),Lt}(Ge,_t,At,Lt);(rt.bindings=rt.bindings||[]).push(Ut)},Ee=function(rt){rt.bindings.forEach(function(At){At.cy.off(At.events,At.selector,At.fn)}),rt.bindings=[]},oe=function(rt){return function(Ge){var _t=Ge.position(),At=rt.delta;if(null!=rt.delta&&!Ge.same(rt.grabbedNode)&&!Ge.grabbed())return{x:_t.x+At.x,y:_t.y+At.y}}},B=function(rt){return function(Ge){for(var _t=Ge.neighborhood(),At={x:0,y:0},Lt=0,Ut=0;Ut<_t.length;Ut++){var Oe=_t[Ut];if(Oe.isNode()&&!rt(Oe)){var fe=Oe.position();At.x+=fe.x,At.y+=fe.y,Lt++}}if(!(Lt<2))return At.x/=Lt,At.y/=Lt,At}},$=function(rt,Ge,_t){return rt<Ge?Ge:rt>_t?_t:rt},ie=function(rt,Ge){var _t=rt.position();return{x:$(_t.x,Ge.x1,Ge.x2),y:$(_t.y,Ge.y1,Ge.y2)}},pe=function(rt){return function(Ge){return ie(Ge,rt)}},Me=function(rt){return function(Ge){return function(rt,Ge){var _t=rt.position(),At=_t.x,Lt=_t.y,Ut=Ge.x1,Oe=Ge.y1,fe=Ge.x2,wt=Ge.y2,ri=Math.abs;if(Ut<=At&&At<=fe&&Oe<=Lt&&Lt<=wt){var Et=ri(Ut-At),Ot=ri(fe-At),fn=ri(Oe-Lt),et=ri(wt-Lt),Le=Math.min(Et,Ot,fn,et);return Le===Et?{x:Ut,y:Lt}:Le===Ot?{x:fe,y:Lt}:Le===fn?{x:At,y:Oe}:{x:At,y:wt}}return{x:At,y:Lt}}(Ge,rt)}},xe=function(rt){return function(Ge){var _t=rt.extent(),At=Ge.outerWidth(),Lt=Ge.outerHeight();return ie(Ge,{x1:_t.x1+At/2,x2:_t.x2-At/2,y1:_t.y1+Lt/2,y2:_t.y2-Lt/2})}},Fe=function(rt,Ge){return"mean"===Ge.reposition?function(rt){return function(Ge,_t){var At=function(Ut){return rt.matches(Ut)&&Ut.neighborhood().length>2&&!Ut.grabbed()};_e(rt,_t,"position","node",function(){(this.neighborhood().some(At)||rt.meanOnSelfPosition(this)&&At(this))&&Ge(_t,[rt])}),_e(rt,_t,"add remove","edge",function(){[_t.getElementById(this.data("source")),_t.getElementById(this.data("target"))].some(At)&&Ge(_t,[rt])})}}(Ge):"drag"===Ge.reposition?function(rt){return function(Ge,_t){_e(rt,_t,"grab","node",function(){if(rt.dragWithMatches(this)){var Lt=this.position();rt.grabbedNode=this,rt.p1={x:Lt.x,y:Lt.y},rt.delta={x:0,y:0}}}),_e(rt,_t,"drag","node",function(){if(this.same(rt.grabbedNode)){var Lt=rt.delta,Ut=rt.p1,Oe=this.position(),fe={x:Oe.x,y:Oe.y};Lt.x=fe.x-Ut.x,Lt.y=fe.y-Ut.y,rt.p1=fe,Ge(_t,[rt])}}),_e(rt,_t,"free","node",function(){rt.grabbedNode=null,rt.delta=null,rt.p1=null})}}(Ge):P(Ge.reposition)||"matching"===Ge.when||"viewport"===Ge.reposition?function(rt){return function(Ge,_t){_e(rt,_t,"position","node",function(){rt.matches(this)&&Ge(_t,[rt])})}}(Ge):Ge.when},Ye=function(rt,Ge,_t){var At=ne({},V,_t);if(At.getNewPos=function(rt,Ge){var _t=rt.reposition;return"mean"===_t?B(W(rt.meanIgnores)):"viewport"===_t?xe(Ge):"drag"===_t?oe(rt):P(_t)?null==_t.type||"inside"==_t.type?pe(_t):"outside"==_t.type?Me(_t):void 0:_t}(At,rt),At.listener=Fe(0,At),K(At.nodesMatching))At.nodes=At.nodesMatching.slice(),At.matches=function(Oe){return se(Oe)&&J(At.nodes,Oe)};else{var Ut=W(At.nodesMatching);At.matches=function(Oe){return se(Oe)&&Ut(Oe)}}return null!=At.dragWith&&(At.dragWithMatches=W(At.dragWith)),At.listener(function(){vn(rt,[At])},rt),At.enabled=!0,Ge.rules.push(At),At},vt=function(rt,Ge){rt.removeListener("add","node",Ge.onAddNode),rt.removeListener("remove","node",Ge.onRmNode)},vn=function(rt,Ge){var _t=rt.scratch().automove;Ge=Ge??_t.rules,rt.batch(function(){for(var At=0;At<Ge.length;At++){var Lt=Ge[At];if(Lt.destroyed||!Lt.enabled)break;for(var Ut=Lt.nodes||_t.nodes,Oe=Ut.length-1;Oe>=0;Oe--){var fe=Ut[Oe];if(fe.removed())Ut.unmerge(fe);else if(Lt.matches(fe)){var wt=fe.position(),kt=Lt.getNewPos(fe);null!=kt&&(wt.x!==kt.x||wt.y!==kt.y)&&(fe.position(kt),fe.trigger("automove",[Lt]))}}}})};we.exports=function(rt){var Ge=this,_t=Ge.scratch().automove=Ge.scratch().automove||{rules:[]};if(0===_t.rules.length&&(_t.nodes=Ge.nodes().slice(),function(rt,Ge){Ge.onAddNode=function(_t){Ge.nodes.merge(_t.target)},Ge.onRmNode=function(_t){Ge.nodes.unmerge(_t.target)},rt.on("add","node",Ge.onAddNode),rt.on("remove","node",Ge.onRmNode)}(Ge,_t)),"destroy"===rt)return _t.rules.forEach(function(Lt){Ee(Lt),Lt.destroyed=!0}),_t.rules.splice(0,_t.rules.length),void vt(Ge,_t);var At=Ye(Ge,_t,rt);return vn(Ge,[At]),{apply:function(){vn(Ge,[At])},disable:function(){this.toggle(!1)},enable:function(){this.toggle(!0)},enabled:function(){return At.enabled},toggle:function(Ut){At.enabled=void 0!==Ut?Ut:!At.enabled,At.enabled&&vn(Ge,[At])},destroy:function(){var Ut=_t.rules;return Ee(At),At.destroyed=!0,Ut.splice(Ut.indexOf(At),1),0===Ut.length&&vt(Ge,_t),this}}}},function(we,U,X){"use strict";we.exports=null!=Object.assign?Object.assign.bind(Object):function(D){for(var V=arguments.length,O=Array(V>1?V-1:0),H=1;H<V;H++)O[H-1]=arguments[H];return O.forEach(function(L){Object.keys(L).forEach(function(P){return D[P]=L[P]})}),D}},function(we,U,X){"use strict";we.exports={nodesMatching:function(O){return!1},reposition:"mean",when:void 0,meanIgnores:function(O){return!1},meanOnSelfPosition:function(O){return!0},dragWith:function(O){return!1}}},function(we,U,X){"use strict";var D=X(0),V=function(H){!H||H("core","automove",D)};typeof cytoscape<"u"&&V(cytoscape),we.exports=V}])},2960:function(He,we,U){var X,D;He.exports=(X=U(8132),D=U(8078),function(V){var O={};function H(L){if(O[L])return O[L].exports;var P=O[L]={i:L,l:!1,exports:{}};return V[L].call(P.exports,P,P.exports,H),P.l=!0,P.exports}return H.m=V,H.c=O,H.i=function(L){return L},H.d=function(L,P,q){H.o(L,P)||Object.defineProperty(L,P,{configurable:!1,enumerable:!0,get:q})},H.n=function(L){var P=L&&L.__esModule?function(){return L.default}:function(){return L};return H.d(P,"a",P),P},H.o=function(L,P){return Object.prototype.hasOwnProperty.call(L,P)},H.p="",H(H.s=12)}([function(V,O,H){"use strict";V.exports=null!=Object.assign?Object.assign.bind(Object):function(L){for(var P=arguments.length,q=Array(P>1?P-1:0),ee=1;ee<P;ee++)q[ee-1]=arguments[ee];return q.filter(function(K){return null!=K}).forEach(function(K){Object.keys(K).forEach(function(ne){return L[ne]=K[ne]})}),L}},function(V,O,H){"use strict";var L=H(10),P=H(0);V.exports=function(q){return new L(P({cy:this},q))}},function(V,O,H){"use strict";V.exports={disableGestures:function L(){if(this.saveGestureState(),this.cy.zoomingEnabled(!1).panningEnabled(!1).boxSelectionEnabled(!1),this.options.disableBrowserGestures){var ee=this.windowListenerOptions;window.addEventListener("touchstart",this.preventDefault,ee),window.addEventListener("touchmove",this.preventDefault,ee),window.addEventListener("wheel",this.preventDefault,ee)}return this},resetGestures:function P(){if(this.cy.zoomingEnabled(this.lastZoomingEnabled).panningEnabled(this.lastPanningEnabled).boxSelectionEnabled(this.lastBoxSelectionEnabled),this.options.disableBrowserGestures){var ee=this.windowListenerOptions;window.removeEventListener("touchstart",this.preventDefault,ee),window.removeEventListener("touchmove",this.preventDefault,ee),window.removeEventListener("wheel",this.preventDefault,ee)}return this},saveGestureState:function q(){var ee=this.cy;return this.lastPanningEnabled=ee.panningEnabled(),this.lastZoomingEnabled=ee.zoomingEnabled(),this.lastBoxSelectionEnabled=ee.boxSelectionEnabled(),this}}},function(V,O,H){"use strict";V.exports={addCytoscapeListeners:function L(){var P=this,q=this.cy,ee=this.options;return this.addListener(q,"drag",function(){return P.grabbingNode=!0}),this.addListener(q,"free",function(){return P.grabbingNode=!1}),this.addListener(q,"tapstart","node",function(K){P.drawMode&&P.start(K.target)}),this.addListener(q,"tapdrag",function(K){P.update(K.position)}),this.addListener(q,"tapdragover","node",function(K){ee.snap||P.preview(K.target)}),this.addListener(q,"tapdragout","node",function(K){ee.snap||P.unpreview(K.target)}),this.addListener(q,"tapend",function(){P.stop()}),this}}},function(V,O,H){"use strict";V.exports={canConnect:function(q,ee){return!q.same(ee)},edgeParams:function(q,ee){return{}},hoverDelay:150,snap:!0,snapThreshold:50,snapFrequency:15,noEdgeEventsInDraw:!0,disableBrowserGestures:!0}},function(V,O,H){"use strict";V.exports={toggleDrawMode:function L(ee){var K=this.cy;return this.drawMode=ee??!this.drawMode,this.drawMode?(this.prevUngrabifyState=K.autoungrabify(),K.autoungrabify(!0),this.emit("drawon")):(K.autoungrabify(this.prevUngrabifyState),this.emit("drawoff")),this},enableDrawMode:function P(){return this.toggleDrawMode(!0)},disableDrawMode:function q(){return this.toggleDrawMode(!1)}}},function(V,O,H){"use strict";var L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(_e){return typeof _e}:function(_e){return _e&&"function"==typeof Symbol&&_e.constructor===Symbol&&_e!==Symbol.prototype?"symbol":typeof _e},P=H(0);function K(_e,Ee,te){var oe={};return P(oe,Ee,_e),P(oe.data,Ee.data,_e.data),oe.classes=function(Ee){return(typeof Ee>"u"?"undefined":L(Ee))===L("")}(Ee.classes)?Ee.classes+" "+te:function(Ee){return(typeof Ee>"u"?"undefined":L(Ee))===L([])&&null!=Ee.length}(Ee.classes)?Ee.classes.join(" ")+" "+te:te,oe}V.exports={makeEdges:function ne(){var _e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],Ee=this.cy,oe=this.presumptiveTargets,B=this.previewEles,$=this.active,ie=this.sourceNode,pe=this.targetNode,Be=_e?"eh-preview":"",Me=Ee.collection(),xe=this.canConnect(pe);if($&&xe){if(!pe||0===pe.size())return B.remove(),void this.emit("cancel",this.mp(),ie,oe);if(!_e)return B.removeClass("eh-preview").style("events",""),void this.emit("complete",this.mp(),ie,pe,B);var ue=Ee.add(K({group:"edges",data:{source:ie.id(),target:pe.id()}},this.edgeParams(pe),Be));return Me=Me.merge(ue),_e?(this.previewEles=Me,Me.style("events","no")):(Me.style("events",""),this.emit("complete",this.mp(),ie,pe,Me)),this}},makePreview:function se(){return this.makeEdges(!0),this},removePreview:function W(){return this.previewShown()&&this.previewEles.remove(),this},previewShown:function J(){return this.previewEles.nonempty()&&this.previewEles.inside()},updateEdge:function ae(){var _e=this,Ee=this.sourceNode,te=this.ghostNode,oe=this.cy,ie=this.mx,pe=this.my,Be=void 0,Me=void 0;if(Ee)return(!te||0===te.length||te.removed())&&(Me=this.ghostEles=oe.collection(),oe.batch(function(){(te=_e.ghostNode=oe.add({group:"nodes",classes:"eh-ghost eh-ghost-node",position:{x:0,y:0}})).style({"background-color":"blue",width:1e-4,height:1e-4,opacity:0,events:"no"});var xe={};(Be=oe.add(P({},xe,{group:"edges",data:P({},xe.data,{source:Ee.id(),target:te.id()}),classes:"eh-ghost eh-ghost-edge"}))).style({events:"no"})}),Me.merge(te).merge(Be)),te.position({x:ie,y:pe}),this}}},function(V,O,H){"use strict";V.exports={disableEdgeEvents:function L(){return this.options.noEdgeEventsInDraw&&this.cy.edges().style("events","no"),this},enableEdgeEvents:function P(){return this.options.noEdgeEventsInDraw&&this.cy.edges().style("events",""),this}}},function(V,O,H){"use strict";V.exports={enable:function L(){return this.enabled=!0,this.emit("enable"),this},disable:function P(){return this.enabled=!1,this.emit("disable"),this}}},function(V,O,H){"use strict";var L=H(13),P=Math.sqrt(2);V.exports={start:function ne(Ee){var te=this;if(this.canStartOn(Ee)){this.active=!0,this.sourceNode=Ee,this.sourceNode.addClass("eh-source"),this.disableGestures(),this.disableEdgeEvents();var oe=function($){return $.id()};this.canConnect=L(function(B){return te.options.canConnect(te.sourceNode,B)},oe),this.edgeParams=L(function(B){return te.options.edgeParams(te.sourceNode,B)},oe),this.emit("start",this.hp(),Ee)}},update:function se(Ee){if(this.active){var te=Ee;return this.mx=te.x,this.my=te.y,this.updateEdge(),this.throttledSnap(),this}},preview:function W(Ee){var te=this,oe=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],B=this.options,$=this.sourceNode,pe=this.ghostEles,Be=this.presumptiveTargets,Me=this.previewEles,xe=this.active,ue=$,Pe=Ee.same(this.ghostNode),ot=!this.canConnect(Ee),Fe=Ee.same(this.targetNode);if(!xe||Pe||ot||Fe)return!1;this.targetNode.nonempty()&&this.unpreview(this.targetNode),clearTimeout(this.previewTimeout);var Ye=function(){te.targetNode=Ee,Be.merge(Ee),Ee.addClass("eh-presumptive-target"),Ee.addClass("eh-target"),te.emit("hoverover",te.mp(),ue,Ee),Ee.addClass("eh-preview"),pe.addClass("eh-preview-active"),$.addClass("eh-preview-active"),Ee.addClass("eh-preview-active"),te.makePreview(),te.emit("previewon",te.mp(),ue,Ee,Me)};return oe&&B.hoverDelay>0?this.previewTimeout=setTimeout(Ye,B.hoverDelay):Ye(),!0},unpreview:function ae(Ee){if(this.active){var oe=this.sourceNode,B=this.previewEles,$=this.ghostEles,ie=this.cy;clearTimeout(this.previewTimeout),this.previewTimeout=null;var pe=oe;return Ee.removeClass("eh-preview eh-target eh-presumptive-target eh-preview-active"),$.removeClass("eh-preview-active"),oe.removeClass("eh-preview-active"),this.targetNode=ie.collection(),this.removePreview(pe,Ee),this.emit("hoverout",this.mp(),pe,Ee),this.emit("previewoff",this.mp(),pe,Ee,B),this}},stop:function _e(){if(this.active){var Ee=this.sourceNode,te=this.targetNode,oe=this.ghostEles,B=this.presumptiveTargets;return clearTimeout(this.previewTimeout),Ee.removeClass("eh-source eh-preview-active"),te.removeClass("eh-target eh-preview eh-hover eh-preview-active"),B.removeClass("eh-presumptive-target"),this.makeEdges(),oe.remove(),this.clearCollections(),this.resetGestures(),this.enableEdgeEvents(),this.active=!1,this.emit("stop",this.mp(),Ee),this}},snap:function J(){if(!this.active||!this.options.snap)return!1;var Ee=this.cy,te=this.targetNode,oe=this.options.snapThreshold,B=this.mp(),$=this.previewEles,ie=this.ghostNode,Be=function(At,Lt,Ut,Oe){var fe=Ut-At,wt=Oe-Lt;return fe*fe+wt*wt},xe=function(At){return function(At,Lt){return Be(At.x,At.y,Lt.x,Lt.y)}(At.position(),B)},ue=function(At){var Ut=function(At){return P*Math.max(At.outerWidth(),At.outerHeight())/2}(At)+oe;return Ut*Ut},Pe=function(At){return xe(At)<=ue(At)},ot=function(At){var Lt=At.position(),Ut=At.outerWidth()/2,Oe=At.outerHeight()/2,fe=Lt.x,wt=Lt.y,kt=B.x,Un=B.y,ri=fe-Ut,Et=fe+Ut,Ot=wt-Oe,fn=wt+Oe,et=ri<=kt&&kt<=Et,Le=Ot<=Un&&Un<=fn;if(et&&Le)return 0;if(et){var ze=Un-Ot,Ht=Un-fn;return Math.min(ze*ze,Ht*Ht)}if(Le){var yn=kt-ri,ii=kt-Et;return Math.min(yn*yn,ii*ii)}return kt<ri&&Un<Ot?Be(kt,Un,ri,Ot):kt>Et&&Un<Ot?Be(kt,Un,Et,Ot):Be(kt,Un,kt<ri&&Un>fn?ri:Et,fn)},vt=function(At){var Lt=B,Oe=At.outerWidth()/2,wt=At.outerHeight()/2,kt=At.position();return kt.x-Oe<=Lt.x&&Lt.x<=kt.x+Oe&&kt.y-wt<=Lt.y&&Lt.y<=kt.y+wt},Ne=Ee.nodes(function(_t){return!((At=_t).same($)||At.same(ie))&&Pe(_t);var At}).sort(function(At,Lt){return ot(At)-ot(Lt)}),ht=!1;te.nonempty()&&!Pe(te)&&this.unpreview(te);for(var rt=0;rt<Ne.length;rt++){var Ge=Ne[rt];if((!Ge.isParent()||!vt(Ge))&&(!Ge.isChild()||vt(Ge.parent()))&&(Ge.same(te)||this.preview(Ge,false))){ht=!0;break}}return ht},canStartOn:function q(Ee){var ue,te=this.previewEles,oe=this.ghostEles;return this.enabled&&!this.active&&!this.grabbingNode&&null!=Ee&&Ee.nonempty()&&!(function(ue){return te.anySame(ue)}(ue=Ee)||function(ue){return oe.anySame(ue)}(ue))},canStartDrawModeOn:function ee(Ee){return this.canStartOn(Ee)&&this.drawMode},canStartNonDrawModeOn:function K(Ee){return this.canStartOn(Ee)&&!this.drawMode}}},function(V,O,H){"use strict";var L=H(4),P=H(0),q=H(14),ee=H(2),K=H(3),ne=H(5),se=H(6),J=H(8),W=H(9),ae=H(11),_e=H(7);function Ee(B){this.cy=B.cy,this.listeners=[],this.enabled=!0,this.drawMode=!1,this.active=!1,this.grabbingNode=!1,this.clearCollections(),this.mx=0,this.my=0,this.options=P({},L,B),this.saveGestureState(),this.addListeners(),this.throttledSnap=q(this.snap.bind(this),1e3/B.snapFrequency),this.preventDefault=function(Be){return Be.preventDefault()},this.canConnect=function(){return!1};var ie=!1;try{var pe=Object.defineProperty({},"passive",{get:function(){ie=!0}});window.addEventListener("test",null,pe)}catch{}this.windowListenerOptions=!ie||{capture:!0,passive:!1}}var te=Ee.prototype={};te.destroy=function(){this.removeListeners()},te.setOptions=function(B){P(this.options,B)},te.mp=function(){return{x:this.mx,y:this.my}},te.hp=function(){return{x:this.hx,y:this.hy}},te.clearCollections=function(){var B=this.cy;this.previewEles=B.collection(),this.ghostEles=B.collection(),this.ghostNode=B.collection(),this.sourceNode=B.collection(),this.targetNode=B.collection(),this.presumptiveTargets=B.collection()},[ee,K,ne,se,J,W,ae,_e].forEach(function($){return P(te,$)}),V.exports=Ee},function(V,O,H){"use strict";var L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(W){return typeof W}:function(W){return W&&"function"==typeof Symbol&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W};function ee(W,ae,_e,Ee,te){return(typeof _e>"u"?"undefined":L(_e))!==L("")&&(te=Ee=_e,_e=null),null==te&&(te=!1),{target:W,event:ae,selector:_e,callback:Ee,options:te}}function K(W){return W instanceof Element}V.exports={addListener:function ne(W,ae,_e,Ee,te){var oe=ee(W,ae,_e,Ee,te);return this.listeners.push(oe),K(oe.target)?oe.target.addEventListener(oe.event,oe.callback,oe.options):oe.selector?oe.target.addListener(oe.event,oe.selector,oe.callback,oe.options):oe.target.addListener(oe.event,oe.callback,oe.options),this},addListeners:function P(){var W=this;return this.addCytoscapeListeners(),this.addListener(this.cy,"destroy",function(){return W.destroy()}),this},removeListener:function se(W,ae,_e,Ee,te){for(var oe=ee(W,ae,_e,Ee,te),B=this.listeners.length-1;B>=0;B--){var $=this.listeners[B];if(!(oe.target!==$.target||oe.event!==$.event||null!=oe.selector&&oe.selector!==$.selector||null!=oe.callback&&oe.callback!==$.callback)){this.listeners.splice(B,1),K(oe.target)?oe.target.removeEventListener(oe.event,oe.callback,oe.options):oe.selector?oe.target.removeListener(oe.event,oe.selector,oe.callback,oe.options):oe.target.removeListener(oe.event,oe.callback,oe.options);break}}return this},removeListeners:function q(){for(var W=this.listeners.length-1;W>=0;W--){var ae=this.listeners[W];this.removeListener(ae.target,ae.event,ae.selector,ae.callback,ae.options)}return this},emit:function J(W,ae){for(var _e=this.cy,Ee=arguments.length,te=Array(Ee>2?Ee-2:0),oe=2;oe<Ee;oe++)te[oe-2]=arguments[oe];return _e.emit({type:"eh"+W,position:ae},te),this}}},function(V,O,H){"use strict";var L=H(1),P=function(ee){!ee||ee("core","edgehandles",L)};typeof cytoscape<"u"&&P(cytoscape),V.exports=P},function(V,O){V.exports=X},function(V,O){V.exports=D}]))},9050:(He,we,U)=>{var X;!function(D){"use strict";var V=function(O){!O||O("core","snapToGrid",function(H){var L=this,P=H,q=L.container(),ee={stackOrder:-1,gridSpacing:40,strokeStyle:"#CCCCCC",lineWidth:1,lineDash:[5,8],zoomDash:!0,panGrid:!0,snapToGrid:!0,drawGrid:!0},K={snapOn:function(){D(this).trigger("snaptogrid.snapon")},snapOff:function(){D(this).trigger("snaptogrid.snapoff")},gridOn:function(){D(this).trigger("snaptogrid.gridon")},gridOff:function(){D(this).trigger("snaptogrid.gridoff")},refresh:function(){D(this).trigger("snaptogrid.refresh")},option:function(ne,se){var J=D(this),W=J.data("snapToGrid");if(null!=W){var ae=W.options;if(void 0===se){if(typeof ne!=typeof{})return ae[ne];ae=D.extend(!0,{},defaults,ne),W.options=ae}else ae[ne]=se;return J.data("snapToGrid",W),J.trigger("snaptogrid.refresh"),J}},init:function(){var J,ne=D("<canvas></canvas>"),se=D(this),W=D.extend(!0,{},ee,H);se.data("snapToGrid",W);var ae,_e=function(){return ae||(ae=se.data("snapToGrid"))},Ee=function(){ne.attr("height",se.height()).attr("width",se.width()).css({position:"absolute",top:0,left:0,"z-index":_e().stackOrder}),setTimeout(function(){var Pe=ne.offset(),ot=se.offset();ne.attr("height",se.height()).attr("width",se.width()).css({top:-(Pe.top-ot.top),left:-(Pe.left-ot.left)}),te()},0)},te=function(){if(oe(),_e().drawGrid){var Pe=L.zoom(),ot=se.width(),Fe=se.height(),Ye=_e().gridSpacing*Pe,lt=L.pan(),vt=lt.x%Ye,vn=lt.y%Ye;if(J.strokeStyle=_e().strokeStyle,J.lineWidth=_e().lineWidth,_e().zoomDash){for(var Ne=_e().lineDash.slice(),ht=0;ht<Ne.length;ht++)Ne[ht]=_e().lineDash[ht]*Pe;J.setLineDash(Ne)}else J.setLineDash(_e().lineDash);for(J.lineDashOffset=_e().panGrid?-lt.y:0,ht=vt;ht<ot;ht+=Ye)J.beginPath(),J.moveTo(ht,0),J.lineTo(ht,Fe),J.stroke();for(J.lineDashOffset=_e().panGrid?-lt.x:0,ht=vn;ht<Fe;ht+=Ye)J.beginPath(),J.moveTo(0,ht),J.lineTo(ot,ht),J.stroke()}},oe=function(){var Pe=se.width(),ot=se.height();J.clearRect(0,0,Pe,ot)},B=function(Pe){var ot=Pe.position(),Fe=Math.floor(ot.x/_e().gridSpacing),Ye=Math.floor(ot.y/_e().gridSpacing);Pe.position({x:(Fe+.5)*_e().gridSpacing,y:(Ye+.5)*_e().gridSpacing})},$=function(){L.nodes().each(function(Pe){B(Pe)})},ie=function(Pe){_e().snapToGrid&&B(Pe.target)},pe=function(Pe){_e().snapToGrid&&B(Pe.target)};se.append(ne),D(window).on("resize",Ee),se.on("snaptogrid.snapon",function(){_e().snapToGrid=!0,$()}),se.on("snaptogrid.snapoff",function(){_e().snapToGrid=!1}),se.on("snaptogrid.gridon",function(){_e().drawGrid=!0,te()}),se.on("snaptogrid.gridoff",function(){_e().drawGrid=!1,te()}),se.on("snaptogrid.refresh",Ee),J=ne[0].getContext("2d"),L.ready(function(){Ee(),_e().snapToGrid&&$(),L.on("zoom",te),L.on("pan",te),L.on("free",ie),L.on("add",pe)})}};return K[P]?K[P].apply(q,Array.prototype.slice.call(arguments,1)):"object"!=typeof P&&P?(console.error("No such function `"+P+"` for snapToGrid"),this):K.init.apply(q,arguments)})};He.exports&&(He.exports=V),void 0!==(X=function(){return V}.call(we,U,we,He))&&(He.exports=X),typeof cytoscape<"u"&&V(cytoscape)}(typeof jQuery<"u"?jQuery:null)},6864:(He,we,U)=>{"use strict";var X=U(406),D=U(5203),V=U(8817),O=U(4793),H=U(4152);function L(f){return f&&"object"==typeof f&&"default"in f?f:{default:f}}var P=L(X),q=L(D),ee=L(V),K=L(O),ne=L(H);function se(f){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function J(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")}function W(f,c){for(var d=0;d<c.length;d++){var m=c[d];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(f,m.key,m)}}function ae(f,c,d){return c&&W(f.prototype,c),d&&W(f,d),Object.defineProperty(f,"prototype",{writable:!1}),f}function _e(f,c,d){return c in f?Object.defineProperty(f,c,{value:d,enumerable:!0,configurable:!0,writable:!0}):f[c]=d,f}function Ee(f,c){return function te(f){if(Array.isArray(f))return f}(f)||function oe(f,c){var d=null==f?null:typeof Symbol<"u"&&f[Symbol.iterator]||f["@@iterator"];if(null!=d){var A,E,m=[],_=!0,C=!1;try{for(d=d.call(f);!(_=(A=d.next()).done)&&(m.push(A.value),!c||m.length!==c);_=!0);}catch(N){C=!0,E=N}finally{try{!_&&null!=d.return&&d.return()}finally{if(C)throw E}}return m}}(f,c)||function B(f,c){if(f){if("string"==typeof f)return $(f,c);var d=Object.prototype.toString.call(f).slice(8,-1);if("Object"===d&&f.constructor&&(d=f.constructor.name),"Map"===d||"Set"===d)return Array.from(f);if("Arguments"===d||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return $(f,c)}}(f,c)||function ie(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(f,c){(null==c||c>f.length)&&(c=f.length);for(var d=0,m=new Array(c);d<c;d++)m[d]=f[d];return m}var pe=typeof window>"u"?null:window,Be=pe?pe.navigator:null,Me=se(""),xe=se({}),ue=se(function(){}),Pe=typeof HTMLElement>"u"?"undefined":se(HTMLElement),ot=function(c){return c&&c.instanceString&&Ye(c.instanceString)?c.instanceString():null},Fe=function(c){return null!=c&&se(c)==Me},Ye=function(c){return null!=c&&se(c)===ue},lt=function(c){return!Ge(c)&&(Array.isArray?Array.isArray(c):null!=c&&c instanceof Array)},vt=function(c){return null!=c&&se(c)===xe&&!lt(c)&&c.constructor===Object},Ne=function(c){return null!=c&&se(c)===se(1)&&!isNaN(c)},rt=function(c){if("undefined"!==Pe)return null!=c&&c instanceof HTMLElement},Ge=function(c){return _t(c)||At(c)},_t=function(c){return"collection"===ot(c)&&c._private.single},At=function(c){return"collection"===ot(c)&&!c._private.single},Lt=function(c){return"core"===ot(c)},Ut=function(c){return"stylesheet"===ot(c)},fe=function(c){return null==c||!(""!==c&&!c.match(/^\s+$/))},Un=function(c){return function(c){return null!=c&&se(c)===xe}(c)&&Ye(c.then)},Et=function(c,d){d||(d=function(){if(1===arguments.length)return arguments[0];if(0===arguments.length)return"undefined";for(var C=[],A=0;A<arguments.length;A++)C.push(arguments[A]);return C.join("$")});var m=function _(){var E,C=this,A=arguments,N=d.apply(C,A),R=_.cache;return(E=R[N])||(E=R[N]=c.apply(C,A)),E};return m.cache={},m},Ot=Et(function(f){return f.replace(/([A-Z])/g,function(c){return"-"+c.toLowerCase()})}),fn=Et(function(f){return f.replace(/(-\w)/g,function(c){return c[1].toUpperCase()})}),et=Et(function(f,c){return f+c[0].toUpperCase()+c.substring(1)},function(f,c){return f+"$"+c}),Le=function(c){return fe(c)?c:c.charAt(0).toUpperCase()+c.substring(1)},ze="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",ws=function(c,d){return c<d?-1:c>d?1:0},sr=null!=Object.assign?Object.assign.bind(Object):function(f){for(var c=arguments,d=1;d<c.length;d++){var m=c[d];if(null!=m)for(var _=Object.keys(m),C=0;C<_.length;C++){var A=_[C];f[A]=m[A]}}return f},ih={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},cc=function(c){for(var d=c.map,m=c.keys,_=m.length,C=0;C<_;C++){var A=m[C];if(vt(A))throw Error("Tried to set map with object key");C<m.length-1?(null==d[A]&&(d[A]={}),d=d[A]):d[A]=c.value}},Sh=function(c){for(var d=c.map,m=c.keys,_=m.length,C=0;C<_;C++){var A=m[C];if(vt(A))throw Error("Tried to get map with object key");if(null==(d=d[A]))return d}return d},ku=pe?pe.performance:null,Xa=ku&&ku.now?function(){return ku.now()}:function(){return Date.now()},Rd=function(){if(pe){if(pe.requestAnimationFrame)return function(f){pe.requestAnimationFrame(f)};if(pe.mozRequestAnimationFrame)return function(f){pe.mozRequestAnimationFrame(f)};if(pe.webkitRequestAnimationFrame)return function(f){pe.webkitRequestAnimationFrame(f)};if(pe.msRequestAnimationFrame)return function(f){pe.msRequestAnimationFrame(f)}}return function(f){f&&setTimeout(function(){f(Xa())},1e3/60)}}(),uu=function(c){return Rd(c)},Sa=Xa,Eh=9261,Ou=65599,td=5381,ff=function(c){for(var _,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Eh,m=d;!(_=c.next()).done;)m=m*Ou+_.value|0;return m},nd=function(c){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Eh;return d*Ou+c|0},pl=function(c){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:td;return(d<<5)+d+c|0},rh=function(c){return 2097152*c[0]+c[1]},gf=function(c,d){return[nd(c[0],d[0]),pl(c[1],d[1])]},xc=function(c,d){var m={value:0,done:!1},_=0,C=c.length;return ff({next:function(){return _<C?m.value=c.charCodeAt(_++):m.done=!0,m}},d)},Mg=function(){return Th(arguments)},Th=function(c){for(var d,m=0;m<c.length;m++){var _=c[m];d=0===m?xc(_):xc(_,d)}return d},io=!0,mf=null!=console.warn,gl=null!=console.trace,Ic=Number.MAX_SAFE_INTEGER||9007199254740991,rl=function(){return!0},$f=function(){return!1},id=function(){return 0},Ze=function(){},pt=function(c){throw new Error(c)},st=function(c){if(void 0===c)return io;io=!!c},ge=function(c){!st()||(mf?console.warn(c):(console.log(c),gl&&console.trace()))},tt=function(c){return null==c?c:lt(c)?c.slice():vt(c)?function(c){return sr({},c)}(c):c},Yt=function(c,d){for(d=c="";c++<36;d+=51*c&52?(15^c?8^Math.random()*(20^c?16:4):4).toString(16):"-");return d},Tn={},wi=function(){return Tn},si=function(c){var d=Object.keys(c);return function(m){for(var _={},C=0;C<d.length;C++){var A=d[C],E=m?.[A];_[A]=void 0===E?c[A]:E}return _}},pi=function(c,d,m){for(var _=c.length-1;_>=0&&(c[_]!==d||(c.splice(_,1),!m));_--);},yr=function(c){c.splice(0,c.length)},ur=function(c,d,m){return m&&(d=et(m,d)),c[d]},Gs=function(c,d,m,_){m&&(d=et(m,d)),c[d]=_},Eo=typeof Map<"u"?Map:function(){function f(){J(this,f),this._obj={}}return ae(f,[{key:"set",value:function(d,m){return this._obj[d]=m,this}},{key:"delete",value:function(d){return this._obj[d]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(d){return void 0!==this._obj[d]}},{key:"get",value:function(d){return this._obj[d]}}]),f}(),Ea=function(){function f(c){if(J(this,f),this._obj=Object.create(null),this.size=0,null!=c){var d;d=null!=c.instanceString&&c.instanceString()===this.instanceString()?c.toArray():c;for(var m=0;m<d.length;m++)this.add(d[m])}}return ae(f,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(d){var m=this._obj;1!==m[d]&&(m[d]=1,this.size++)}},{key:"delete",value:function(d){var m=this._obj;1===m[d]&&(m[d]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(d){return 1===this._obj[d]}},{key:"toArray",value:function(){var d=this;return Object.keys(this._obj).filter(function(m){return d.has(m)})}},{key:"forEach",value:function(d,m){return this.toArray().forEach(d,m)}}]),f}(),fs="undefined"!==(typeof Set>"u"?"undefined":se(Set))?Set:Ea,Ya=function(c,d){var m=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0!==c&&void 0!==d&&Lt(c)){var _=d.group;if(null==_&&(_=d.data&&null!=d.data.source&&null!=d.data.target?"edges":"nodes"),"nodes"===_||"edges"===_){this.length=1,this[0]=this;var C=this._private={cy:c,single:!0,data:d.data||{},position:d.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:_,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!d.selected,selectable:void 0===d.selectable||!!d.selectable,locked:!!d.locked,grabbed:!1,grabbable:void 0===d.grabbable||!!d.grabbable,pannable:void 0===d.pannable?"edges"===_:!!d.pannable,active:!1,classes:new fs,animation:{current:[],queue:[]},rscratch:{},scratch:d.scratch||{},edges:[],children:[],parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(null==C.position.x&&(C.position.x=0),null==C.position.y&&(C.position.y=0),d.renderedPosition){var A=d.renderedPosition,E=c.pan(),N=c.zoom();C.position={x:(A.x-E.x)/N,y:(A.y-E.y)/N}}var R=[];lt(d.classes)?R=d.classes:Fe(d.classes)&&(R=d.classes.split(/\s+/));for(var j=0,Z=R.length;j<Z;j++){var he=R[j];!he||""===he||C.classes.add(he)}this.createEmitter();var me=d.style||d.css;me&&(ge("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(me)),(void 0===m||m)&&this.restore()}else pt("An element must be of type `nodes` or `edges`; you specified `"+_+"`")}else pt("An element must have a core reference and parameters set")},Fu=function(c){return c={bfs:c.bfs||!c.dfs,dfs:c.dfs||!c.bfs},function(m,_,C){var A;vt(m)&&!Ge(m)&&(m=(A=m).roots||A.root,_=A.visit,C=A.directed),C=2!==arguments.length||Ye(_)?C:_,_=Ye(_)?_:function(){};for(var De,E=this._private.cy,N=m=Fe(m)?this.filter(m):m,R=[],j=[],Z={},he={},me={},ye=0,je=this.byGroup(),qe=je.nodes,ct=je.edges,nt=0;nt<N.length;nt++){var Ct=N[nt],Gt=Ct.id();Ct.isNode()&&(R.unshift(Ct),c.bfs&&(me[Gt]=!0,j.push(Ct)),he[Gt]=0)}for(var Wt=function(){var Qt=c.bfs?R.shift():R.pop(),Vt=Qt.id();if(c.dfs){if(me[Vt])return"continue";me[Vt]=!0,j.push(Qt)}var ti,An=he[Vt],sn=Z[Vt],pn=null!=sn?sn.source():null,Mn=null!=sn?sn.target():null,kn=null==sn?void 0:Qt.same(pn)?Mn[0]:pn[0];if(!0===(ti=_(Qt,sn,kn,ye++,An)))return De=Qt,"break";if(!1===ti)return"break";for(var Dn=Qt.connectedEdges().filter(function(fi){return(!C||fi.source().same(Qt))&&ct.has(fi)}),Zn=0;Zn<Dn.length;Zn++){var hi=Dn[Zn],xi=hi.connectedNodes().filter(function(fi){return!fi.same(Qt)&&qe.has(fi)}),mi=xi.id();0!==xi.length&&!me[mi]&&(R.push(xi=xi[0]),c.bfs&&(me[mi]=!0,j.push(xi)),Z[mi]=hi,he[mi]=he[Vt]+1)}};0!==R.length;){var It=Wt();if("continue"!==It&&"break"===It)break}for(var jt=E.collection(),Dt=0;Dt<j.length;Dt++){var Zt=j[Dt],Kt=Z[Zt.id()];null!=Kt&&jt.push(Kt),jt.push(Zt)}return{path:E.collection(jt),found:E.collection(De)}}},cs={breadthFirstSearch:Fu({bfs:!0}),depthFirstSearch:Fu({dfs:!0})};cs.bfs=cs.breadthFirstSearch,cs.dfs=cs.depthFirstSearch;var is=si({root:null,weight:function(c){return 1},directed:!1}),Dg={dijkstra:function(c){if(!vt(c)){var d=arguments;c={root:d[0],weight:d[1],directed:d[2]}}var m=is(c),_=m.root,C=m.weight,A=m.directed,E=this,N=C,R=Fe(_)?this.filter(_)[0]:_[0],j={},Z={},he={},me=this.byGroup(),ye=me.nodes,De=me.edges;De.unmergeBy(function(An){return An.isLoop()});for(var je=function(sn){return j[sn.id()]},qe=function(sn,pn){j[sn.id()]=pn,ct.updateItem(sn)},ct=new q.default(function(An,sn){return je(An)-je(sn)}),nt=0;nt<ye.length;nt++){var Ct=ye[nt];j[Ct.id()]=Ct.same(R)?0:1/0,ct.push(Ct)}for(var Gt=function(sn,pn){for(var ti,Mn=(A?sn.edgesTo(pn):sn.edgesWith(pn)).intersect(De),kn=1/0,Dn=0;Dn<Mn.length;Dn++){var Zn=Mn[Dn],hi=N(Zn);(hi<kn||!ti)&&(kn=hi,ti=Zn)}return{edge:ti,dist:kn}};ct.size()>0;){var Wt=ct.pop(),It=je(Wt),jt=Wt.id();if(he[jt]=It,It!==1/0)for(var Dt=Wt.neighborhood().intersect(ye),Zt=0;Zt<Dt.length;Zt++){var Kt=Dt[Zt],ut=Kt.id(),Qt=Gt(Wt,Kt),Vt=It+Qt.dist;Vt<je(Kt)&&(qe(Kt,Vt),Z[ut]={node:Wt,edge:Qt.edge})}}return{distanceTo:function(sn){var pn=Fe(sn)?ye.filter(sn)[0]:sn[0];return he[pn.id()]},pathTo:function(sn){var pn=Fe(sn)?ye.filter(sn)[0]:sn[0],Mn=[],kn=pn,ti=kn.id();if(pn.length>0)for(Mn.unshift(pn);Z[ti];){var Dn=Z[ti];Mn.unshift(Dn.edge),Mn.unshift(Dn.node),ti=(kn=Dn.node).id()}return E.spawn(Mn)}}}},Vp={kruskal:function(c){c=c||function(nt){return 1};for(var d=this.byGroup(),m=d.nodes,_=d.edges,C=m.length,A=new Array(C),E=m,N=function(Ct){for(var Gt=0;Gt<A.length;Gt++)if(A[Gt].has(Ct))return Gt},R=0;R<C;R++)A[R]=this.spawn(m[R]);for(var j=_.sort(function(nt,Ct){return c(nt)-c(Ct)}),Z=0;Z<j.length;Z++){var he=j[Z],me=he.source()[0],ye=he.target()[0],De=N(me),je=N(ye),qe=A[De],ct=A[je];De!==je&&(E.merge(he),qe.merge(ct),A.splice(je,1))}return E}},yi=si({root:null,goal:null,weight:function(c){return 1},heuristic:function(c){return 0},directed:!1}),Lg={aStar:function(c){var d=this.cy(),m=yi(c),_=m.root,C=m.goal,A=m.heuristic,E=m.directed,N=m.weight;_=d.collection(_)[0],C=d.collection(C)[0];var nt,Ct,R=_.id(),j=C.id(),Z={},he={},me={},ye=new q.default(function(ti,Dn){return he[ti.id()]-he[Dn.id()]}),De=new fs,je={},qe={},ct=function(Dn,Zn){ye.push(Dn),De.add(Zn)};ct(_,R),Z[R]=0,he[R]=A(_);for(var It=0;ye.size()>0;){if(Ct=(nt=ye.pop()).id(),De.delete(Ct),It++,Ct===j){for(var jt=[],Dt=C,Zt=j,Kt=qe[Zt];jt.unshift(Dt),null!=Kt&&jt.unshift(Kt),null!=(Dt=je[Zt]);)Kt=qe[Zt=Dt.id()];return{found:!0,distance:Z[Ct],path:this.spawn(jt),steps:It}}me[Ct]=!0;for(var ut=nt._private.edges,Qt=0;Qt<ut.length;Qt++){var Vt=ut[Qt];if(this.hasElementWithId(Vt.id())&&(!E||Vt.data("source")===Ct)){var An=Vt.source(),sn=Vt.target(),pn=An.id()!==Ct?An:sn,Mn=pn.id();if(this.hasElementWithId(Mn)&&!me[Mn]){var kn=Z[Ct]+N(Vt);if(!De.has(Mn)){Z[Mn]=kn,he[Mn]=kn+A(pn),ct(pn,Mn),je[Mn]=nt,qe[Mn]=Vt;continue}kn<Z[Mn]&&(Z[Mn]=kn,he[Mn]=kn+A(pn),je[Mn]=nt,qe[Mn]=Vt)}}}}return{found:!1,distance:void 0,path:void 0,steps:It}}},Ps=si({weight:function(c){return 1},directed:!1}),To={floydWarshall:function(c){for(var d=this.cy(),m=Ps(c),C=m.directed,A=m.weight,E=this.byGroup(),N=E.nodes,R=E.edges,j=N.length,Z=j*j,he=function(hi){return N.indexOf(hi)},me=function(hi){return N[hi]},ye=new Array(Z),De=0;De<Z;De++){var je=De%j;ye[De]=(De-je)/j===je?0:1/0}for(var ct=new Array(Z),nt=new Array(Z),Ct=0;Ct<R.length;Ct++){var Gt=R[Ct],Wt=Gt.source()[0],It=Gt.target()[0];if(Wt!==It){var jt=he(Wt),Dt=he(It),Zt=jt*j+Dt,Kt=A(Gt);if(ye[Zt]>Kt&&(ye[Zt]=Kt,ct[Zt]=Dt,nt[Zt]=Gt),!C){var ut=Dt*j+jt;!C&&ye[ut]>Kt&&(ye[ut]=Kt,ct[ut]=jt,nt[ut]=Gt)}}}for(var Qt=0;Qt<j;Qt++)for(var Vt=0;Vt<j;Vt++)for(var An=Vt*j+Qt,sn=0;sn<j;sn++){var pn=Vt*j+sn,Mn=Qt*j+sn;ye[An]+ye[Mn]<ye[pn]&&(ye[pn]=ye[An]+ye[Mn],ct[pn]=ct[An])}var ti=function(hi){return he(function(hi){return(Fe(hi)?d.filter(hi):hi)[0]}(hi))};return{distance:function(hi,xi){var mi=ti(hi),fi=ti(xi);return ye[mi*j+fi]},path:function(hi,xi){var mi=ti(hi),fi=ti(xi),Pn=me(mi);if(mi===fi)return Pn.collection();if(null==ct[mi*j+fi])return d.collection();var ai=d.collection();for(ai.merge(Pn);mi!==fi;)ai.merge(nt[mi*j+(mi=ct[mi*j+fi])]),ai.merge(me(mi));return ai}}}},vv=si({weight:function(c){return 1},directed:!1,root:null}),yv={bellmanFord:function(c){var d=this,m=vv(c),C=m.directed,A=m.root,E=m.weight,N=this,R=this.cy(),j=this.byGroup(),Z=j.edges,he=j.nodes,me=he.length,ye=new Eo,De=!1,je=[];A=R.collection(A)[0],Z.unmergeBy(function(ki){return ki.isLoop()});for(var qe=Z.length,ct=function(br){var wr=ye.get(br.id());return wr||(wr={},ye.set(br.id(),wr)),wr},nt=function(br){return(Fe(br)?R.$(br):br)[0]},Wt=0;Wt<me;Wt++){var It=he[Wt],jt=ct(It);jt.dist=It.same(A)?0:1/0,jt.pred=null,jt.edge=null}for(var Dt=!1,Zt=function(br,wr,Qr,Bs,Jr,$i){var Nt=Bs.dist+$i;Nt<Jr.dist&&!Qr.same(Bs.edge)&&(Jr.dist=Nt,Jr.pred=br,Jr.edge=Qr,Dt=!0)},Kt=1;Kt<me;Kt++){Dt=!1;for(var ut=0;ut<qe;ut++){var Qt=Z[ut],Vt=Qt.source(),An=Qt.target(),sn=E(Qt),pn=ct(Vt),Mn=ct(An);Zt(Vt,0,Qt,pn,Mn,sn),C||Zt(An,0,Qt,Mn,pn,sn)}if(!Dt)break}if(Dt)for(var kn=[],ti=0;ti<qe;ti++){var Dn=Z[ti],Zn=Dn.source(),hi=Dn.target(),xi=E(Dn),mi=ct(Zn).dist,fi=ct(hi).dist;if(mi+xi<fi||!C&&fi+xi<mi){if(De||(ge("Graph contains a negative weight cycle for Bellman-Ford"),De=!0),!1===c.findNegativeWeightCycles)break;var Pn=[];mi+xi<fi&&Pn.push(Zn),!C&&fi+xi<mi&&Pn.push(hi);for(var ai=Pn.length,Si=0;Si<ai;Si++){var Qi=Pn[Si],lr=[Qi];lr.push(ct(Qi).edge);for(var Hr=ct(Qi).pred;-1===lr.indexOf(Hr);)lr.push(Hr),lr.push(ct(Hr).edge),Hr=ct(Hr).pred;for(var Zr=(lr=lr.slice(lr.indexOf(Hr)))[0].id(),mr=0,or=2;or<lr.length;or+=2)lr[or].id()<Zr&&(Zr=lr[or].id(),mr=or);(lr=lr.slice(mr).concat(lr.slice(0,mr))).push(lr[0]);var Yr=lr.map(function(ki){return ki.id()}).join(",");-1===kn.indexOf(Yr)&&(je.push(N.spawn(lr)),kn.push(Yr))}}}return{distanceTo:function(br){return ct(nt(br)).dist},pathTo:function(br){for(var wr=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A,Qr=nt(br),Bs=[],Jr=Qr;;){if(null==Jr)return d.spawn();var $i=ct(Jr),Nt=$i.edge,Kn=$i.pred;if(Bs.unshift(Jr[0]),Jr.same(wr)&&Bs.length>0)break;null!=Nt&&Bs.unshift(Nt),Jr=Kn}return N.spawn(Bs)},hasNegativeWeightCycle:De,negativeWeightCycles:je}}},Ty=Math.sqrt(2),As=function(c,d,m){0===m.length&&pt("Karger-Stein must be run on a connected (sub)graph");for(var _=m[c],E=d[_[1]],N=d[_[2]],R=m,j=R.length-1;j>=0;j--){var Z=R[j],he=Z[1],me=Z[2];(d[he]===E&&d[me]===N||d[he]===N&&d[me]===E)&&R.splice(j,1)}for(var ye=0;ye<R.length;ye++){var De=R[ye];De[1]===N?(R[ye]=De.slice(),R[ye][1]=E):De[2]===N&&(R[ye]=De.slice(),R[ye][2]=E)}for(var je=0;je<d.length;je++)d[je]===N&&(d[je]=E);return R},er=function(c,d,m,_){for(;m>_;){var C=Math.floor(Math.random()*d.length);d=As(C,c,d),m--}return d},My={kargerStein:function(){var c=this,d=this.byGroup(),m=d.nodes,_=d.edges;_.unmergeBy(function(Mn){return Mn.isLoop()});var C=m.length,A=_.length,E=Math.ceil(Math.pow(Math.log(C)/Math.LN2,2)),N=Math.floor(C/Ty);if(!(C<2)){for(var R=[],j=0;j<A;j++){var Z=_[j];R.push([j,m.indexOf(Z.source()),m.indexOf(Z.target())])}for(var he=1/0,me=[],ye=new Array(C),De=new Array(C),je=new Array(C),qe=function(kn,ti){for(var Dn=0;Dn<C;Dn++)ti[Dn]=kn[Dn]},ct=0;ct<=E;ct++){for(var nt=0;nt<C;nt++)De[nt]=nt;var Ct=er(De,R.slice(),C,N),Gt=Ct.slice();qe(De,je);var Wt=er(De,Ct,N,2),It=er(je,Gt,N,2);Wt.length<=It.length&&Wt.length<he?(he=Wt.length,me=Wt,qe(De,ye)):It.length<=Wt.length&&It.length<he&&(he=It.length,me=It,qe(je,ye))}for(var jt=this.spawn(me.map(function(Mn){return _[Mn[0]]})),Dt=this.spawn(),Zt=this.spawn(),Kt=ye[0],ut=0;ut<ye.length;ut++){var Vt=m[ut];ye[ut]===Kt?Dt.merge(Vt):Zt.merge(Vt)}var An=function(kn){var ti=c.spawn();return kn.forEach(function(Dn){ti.merge(Dn),Dn.connectedEdges().forEach(function(Zn){c.contains(Zn)&&!jt.contains(Zn)&&ti.merge(Zn)})}),ti},sn=[An(Dt),An(Zt)];return{cut:jt,components:sn,partition1:Dt,partition2:Zt}}pt("At least 2 nodes are required for Karger-Stein algorithm")}},Yo=function(c,d,m){return{x:c.x*d+m.x,y:c.y*d+m.y}},Sc=function(c,d,m){return{x:(c.x-m.x)/d,y:(c.y-m.y)/d}},rd=function(c){return{x:c[0],y:c[1]}},Pg=function(c,d){return Math.atan2(d,c)-Math.PI/2},_v=Math.log2||function(f){return Math.log(f)/Math.log(2)},Ec=function(c){return c>0?1:c<0?-1:0},ro=function(c,d){return Math.sqrt(Mh(c,d))},Mh=function(c,d){var m=d.x-c.x,_=d.y-c.y;return m*m+_*_},N_=function(c){for(var d=c.length,m=0,_=0;_<d;_++)m+=c[_];for(var C=0;C<d;C++)c[C]=c[C]/m;return c},uc=function(c,d,m,_){return(1-_)*(1-_)*c+2*(1-_)*_*d+_*_*m},Zi=function(c,d,m,_){return{x:uc(c.x,d.x,m.x,_),y:uc(c.y,d.y,m.y,_)}},Sr=function(c,d,m){return Math.max(c,Math.min(m,d))},Tc=function(c){if(null==c)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(null!=c.x1&&null!=c.y1){if(null!=c.x2&&null!=c.y2&&c.x2>=c.x1&&c.y2>=c.y1)return{x1:c.x1,y1:c.y1,x2:c.x2,y2:c.y2,w:c.x2-c.x1,h:c.y2-c.y1};if(null!=c.w&&null!=c.h&&c.w>=0&&c.h>=0)return{x1:c.x1,y1:c.y1,x2:c.x1+c.w,y2:c.y1+c.h,w:c.w,h:c.h}}},Ta=function(c,d){c.x1=Math.min(c.x1,d.x1),c.x2=Math.max(c.x2,d.x2),c.w=c.x2-c.x1,c.y1=Math.min(c.y1,d.y1),c.y2=Math.max(c.y2,d.y2),c.h=c.y2-c.y1},ha=function(c,d,m){c.x1=Math.min(c.x1,d),c.x2=Math.max(c.x2,d),c.w=c.x2-c.x1,c.y1=Math.min(c.y1,m),c.y2=Math.max(c.y2,m),c.h=c.y2-c.y1},qf=function(c){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return c.x1-=d,c.x2+=d,c.y1-=d,c.y2+=d,c.w=c.x2-c.x1,c.h=c.y2-c.y1,c},Up=function(c){var m,_,C,A,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0];if(1===d.length)m=_=C=A=d[0];else if(2===d.length)m=C=d[0],A=_=d[1];else if(4===d.length){var E=Ee(d,4);m=E[0],_=E[1],C=E[2],A=E[3]}return c.x1-=A,c.x2+=_,c.y1-=m,c.y2+=C,c.w=c.x2-c.x1,c.h=c.y2-c.y1,c},wm=function(c,d){c.x1=d.x1,c.y1=d.y1,c.x2=d.x2,c.y2=d.y2,c.w=c.x2-c.x1,c.h=c.y2-c.y1},Am=function(c,d){return!(c.x1>d.x2||d.x1>c.x2||c.x2<d.x1||d.x2<c.x1||c.y2<d.y1||d.y2<c.y1||c.y1>d.y2||d.y1>c.y2)},rs=function(c,d,m){return c.x1<=d&&d<=c.x2&&c.y1<=m&&m<=c.y2},bv=function(c,d){return rs(c,d.x,d.y)},Cv=function(c,d){return rs(c,d.x1,d.y1)&&rs(c,d.x2,d.y2)},Nu=function(c,d,m,_,C,A,E){var Z,N=vf(C,A),R=C/2,j=A/2,me=_-j-E;if((Z=sl(c,d,m,_,m-R+N-E,me,m+R-N+E,me,!1)).length>0)return Z;var je=m+R+E;if((Z=sl(c,d,m,_,je,_-j+N-E,je,_+j-N+E,!1)).length>0)return Z;var Gt=_+j+E;if((Z=sl(c,d,m,_,m-R+N-E,Gt,m+R-N+E,Gt,!1)).length>0)return Z;var ut,jt=m-R-E;if((Z=sl(c,d,m,_,jt,_-j+N-E,jt,_+j-N+E,!1)).length>0)return Z;var Qt=m-R+N,Vt=_-j+N;if((ut=Xf(c,d,m,_,Qt,Vt,N+E)).length>0&&ut[0]<=Qt&&ut[1]<=Vt)return[ut[0],ut[1]];var An=m+R-N,sn=_-j+N;if((ut=Xf(c,d,m,_,An,sn,N+E)).length>0&&ut[0]>=An&&ut[1]<=sn)return[ut[0],ut[1]];var pn=m+R-N,Mn=_+j-N;if((ut=Xf(c,d,m,_,pn,Mn,N+E)).length>0&&ut[0]>=pn&&ut[1]>=Mn)return[ut[0],ut[1]];var kn=m-R+N,ti=_+j-N;return(ut=Xf(c,d,m,_,kn,ti,N+E)).length>0&&ut[0]<=kn&&ut[1]>=ti?[ut[0],ut[1]]:[]},Xl=function(c,d,m,_,C,A,E){var N=E,R=Math.min(m,C),j=Math.max(m,C),Z=Math.min(_,A),he=Math.max(_,A);return R-N<=c&&c<=j+N&&Z-N<=d&&d<=he+N},z_=function(c,d,m,_,C,A,E,N,R){var j_x1=Math.min(m,E,C)-R,j_x2=Math.max(m,E,C)+R,j_y1=Math.min(_,N,A)-R,j_y2=Math.max(_,N,A)+R;return!(c<j_x1||c>j_x2||d<j_y1||d>j_y2)},Ly=function(c,d,m,_,C,A,E,N){var me=[];!function(c,d,m,_,C){var E,N,R,j,Z,he,me,ye;0===c&&(c=1e-5),R=-27*(_/=c)+(d/=c)*(9*(m/=c)-d*d*2),E=(N=(3*m-d*d)/9)*N*N+(R/=54)*R,C[1]=0,me=d/3,E>0?(Z=(Z=R+Math.sqrt(E))<0?-Math.pow(-Z,1/3):Math.pow(Z,1/3),he=(he=R-Math.sqrt(E))<0?-Math.pow(-he,1/3):Math.pow(he,1/3),C[0]=-me+Z+he,C[4]=C[2]=-(me+=(Z+he)/2),me=Math.sqrt(3)*(-he+Z)/2,C[3]=me,C[5]=-me):(C[5]=C[3]=0,0===E?(ye=R<0?-Math.pow(-R,1/3):Math.pow(R,1/3),C[0]=2*ye-me,C[4]=C[2]=-(ye+me)):(j=(N=-N)*N*N,j=Math.acos(R/Math.sqrt(j)),ye=2*Math.sqrt(N),C[0]=-me+ye*Math.cos(j/3),C[2]=-me+ye*Math.cos((j+2*Math.PI)/3),C[4]=-me+ye*Math.cos((j+4*Math.PI)/3)))}(1*m*m-4*m*C+2*m*E+4*C*C-4*C*E+E*E+_*_-4*_*A+2*_*N+4*A*A-4*A*N+N*N,9*m*C-3*m*m-3*m*E-6*C*C+3*C*E+9*_*A-3*_*_-3*_*N-6*A*A+3*A*N,3*m*m-6*m*C+m*E-m*c+2*C*C+2*C*c-E*c+3*_*_-6*_*A+_*N-_*d+2*A*A+2*A*d-N*d,1*m*C-m*m+m*c-C*c+_*A-_*_+_*d-A*d,me);for(var De=[],je=0;je<6;je+=2)Math.abs(me[je+1])<1e-7&&me[je]>=0&&me[je]<=1&&De.push(me[je]);De.push(1),De.push(0);for(var ct,nt,Ct,qe=-1,Gt=0;Gt<De.length;Gt++)ct=Math.pow(1-De[Gt],2)*m+2*(1-De[Gt])*De[Gt]*C+De[Gt]*De[Gt]*E,nt=Math.pow(1-De[Gt],2)*_+2*(1-De[Gt])*De[Gt]*A+De[Gt]*De[Gt]*N,Ct=Math.pow(ct-c,2)+Math.pow(nt-d,2),qe>=0?Ct<qe&&(qe=Ct):qe=Ct;return qe},Dh=function(c,d,m,_,C,A){var E=[c-m,d-_],N=[C-m,A-_],R=N[0]*N[0]+N[1]*N[1],j=E[0]*E[0]+E[1]*E[1],Z=E[0]*N[0]+E[1]*N[1],he=Z*Z/R;return Z<0?j:he>R?(c-C)*(c-C)+(d-A)*(d-A):j-he},Ma=function(c,d,m){for(var _,C,A,E,R=0,j=0;j<m.length/2;j++)if(C=m[2*j+1],j+1<m.length/2?(A=m[2*(j+1)],E=m[2*(j+1)+1]):(A=m[2*(j+1-m.length/2)],E=m[2*(j+1-m.length/2)+1]),(_=m[2*j])!=c||A!=c){if(!(_>=c&&c>=A||_<=c&&c<=A))continue;(c-_)/(A-_)*(E-C)+C>d&&R++}return R%2!=0},so=function(c,d,m,_,C,A,E,N,R){var Z,De,j=new Array(m.length);null!=N[0]?(Z=Math.atan(N[1]/N[0]),N[0]<0?Z+=Math.PI/2:Z=-Z-Math.PI/2):Z=N;for(var he=Math.cos(-Z),me=Math.sin(-Z),ye=0;ye<j.length/2;ye++)j[2*ye]=A/2*(m[2*ye]*he-m[2*ye+1]*me),j[2*ye+1]=E/2*(m[2*ye+1]*he+m[2*ye]*me),j[2*ye]+=_,j[2*ye+1]+=C;if(R>0){var je=Fd(j,-R);De=Py(je)}else De=j;return Ma(c,d,De)},Py=function(c){for(var E,N,R,j,d=new Array(c.length/2),Z=0;Z<c.length/4;Z++){Z<c.length/4-1?(E=c[4*(Z+1)],N=c[4*(Z+1)+1],R=c[4*(Z+1)+2],j=c[4*(Z+1)+3]):(E=c[0],N=c[1],R=c[2],j=c[3]);var he=sl(c[4*Z],c[4*Z+1],c[4*Z+2],c[4*Z+3],E,N,R,j,!0);d[2*Z]=he[0],d[2*Z+1]=he[1]}return d},Fd=function(c,d){for(var _,C,A,E,m=new Array(2*c.length),N=0;N<c.length/2;N++){N<c.length/2-1?(A=c[2*(N+1)],E=c[2*(N+1)+1]):(A=c[0],E=c[1]);var R=E-(C=c[2*N+1]),j=-(A-(_=c[2*N])),Z=Math.sqrt(R*R+j*j),he=R/Z,me=j/Z;m[4*N]=_+he*d,m[4*N+1]=C+me*d,m[4*N+2]=A+he*d,m[4*N+3]=E+me*d}return m},Ka=function(c,d,m,_,C,A,E){return c-=C,d-=A,(c/=m/2+E)*c+(d/=_/2+E)*d<=1},Xf=function(c,d,m,_,C,A,E){var N=[m-c,_-d],R=[c-C,d-A],j=N[0]*N[0]+N[1]*N[1],Z=2*(R[0]*N[0]+R[1]*N[1]),me=Z*Z-4*j*(R[0]*R[0]+R[1]*R[1]-E*E);if(me<0)return[];var ye=(-Z+Math.sqrt(me))/(2*j),De=(-Z-Math.sqrt(me))/(2*j),je=Math.min(ye,De),qe=Math.max(ye,De),ct=[];if(je>=0&&je<=1&&ct.push(je),qe>=0&&qe<=1&&ct.push(qe),0===ct.length)return[];var nt=ct[0]*N[0]+c,Ct=ct[0]*N[1]+d;return ct.length>1?ct[0]==ct[1]?[nt,Ct]:[nt,Ct,ct[1]*N[0]+c,ct[1]*N[1]+d]:[nt,Ct]},Za=function(c,d,m){return d<=c&&c<=m||m<=c&&c<=d?c:c<=d&&d<=m||m<=d&&d<=c?d:m},sl=function(c,d,m,_,C,A,E,N,R){var j=c-C,Z=m-c,he=E-C,me=d-A,ye=_-d,De=N-A,je=he*me-De*j,qe=Z*me-ye*j,ct=De*Z-he*ye;if(0!==ct){var nt=je/ct,Ct=qe/ct;return-.001<=nt&&nt<=1.001&&-.001<=Ct&&Ct<=1.001||R?[c+nt*Z,d+nt*ye]:[]}return 0===je||0===qe?Za(c,m,E)===E?[E,N]:Za(c,m,C)===C?[C,A]:Za(C,E,m)===m?[m,_]:[]:[]},hu=function(c,d,m,_,C,A,E,N){var j,me,R=[],Z=new Array(m.length),he=!0;if(null==A&&(he=!1),he){for(var ye=0;ye<Z.length/2;ye++)Z[2*ye]=m[2*ye]*A+_,Z[2*ye+1]=m[2*ye+1]*E+C;if(N>0){var De=Fd(Z,-N);me=Py(De)}else me=Z}else me=m;for(var ct,nt,Ct=0;Ct<me.length/2;Ct++)Ct<me.length/2-1?(ct=me[2*(Ct+1)],nt=me[2*(Ct+1)+1]):(ct=me[0],nt=me[1]),0!==(j=sl(c,d,_,C,me[2*Ct],me[2*Ct+1],ct,nt)).length&&R.push(j[0],j[1]);return R},Yf=function(c,d,m){var _=[c[0]-d[0],c[1]-d[1]],C=Math.sqrt(_[0]*_[0]+_[1]*_[1]),A=(C-m)/C;return A<0&&(A=1e-5),[d[0]+A*_[0],d[1]+A*_[1]]},_r=function(c,d){var m=Lh(c,d);return Da(m)},Da=function(c){for(var d,m,_=c.length/2,C=1/0,A=1/0,E=-1/0,N=-1/0,R=0;R<_;R++)d=c[2*R],m=c[2*R+1],C=Math.min(C,d),E=Math.max(E,d),A=Math.min(A,m),N=Math.max(N,m);for(var j=2/(E-C),Z=2/(N-A),he=0;he<_;he++)d=c[2*he]=c[2*he]*j,m=c[2*he+1]=c[2*he+1]*Z,C=Math.min(C,d),E=Math.max(E,d),A=Math.min(A,m),N=Math.max(N,m);if(A<-1)for(var me=0;me<_;me++)m=c[2*me+1]=c[2*me+1]+(-1-A);return c},Lh=function(c,d){var m=1/c*2*Math.PI,_=c%2==0?Math.PI/2+m/2:Math.PI/2;_+=d;for(var A,C=new Array(2*c),E=0;E<c;E++)A=E*m+_,C[2*E]=Math.cos(A),C[2*E+1]=Math.sin(-A);return C},vf=function(c,d){return Math.min(c/4,d/4,8)},Rr=function(c,d){return Math.min(c/10,d/10,8)},qr=function(c,d){return{heightOffset:Math.min(15,.05*d),widthOffset:Math.min(100,.25*c),ctrlPtOffsetPct:.05}},du=si({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(c){return 1}}),Ko={pageRank:function(c){for(var d=du(c),m=d.dampingFactor,_=d.precision,C=d.iterations,A=d.weight,E=this._private.cy,N=this.byGroup(),R=N.nodes,j=N.edges,Z=R.length,me=j.length,ye=new Array(Z*Z),De=new Array(Z),je=(1-m)/Z,qe=0;qe<Z;qe++){for(var ct=0;ct<Z;ct++)ye[qe*Z+ct]=0;De[qe]=0}for(var Ct=0;Ct<me;Ct++){var Gt=j[Ct],Wt=Gt.data("source"),It=Gt.data("target");if(Wt!==It){var jt=R.indexOfId(Wt),Dt=R.indexOfId(It),Zt=A(Gt);ye[Dt*Z+jt]+=Zt,De[jt]+=Zt}}for(var ut=1/Z+je,Qt=0;Qt<Z;Qt++)if(0===De[Qt])for(var Vt=0;Vt<Z;Vt++)ye[Vt*Z+Qt]=ut;else for(var sn=0;sn<Z;sn++){var pn=sn*Z+Qt;ye[pn]=ye[pn]/De[Qt]+je}for(var ti,Mn=new Array(Z),kn=new Array(Z),Dn=0;Dn<Z;Dn++)Mn[Dn]=1;for(var Zn=0;Zn<C;Zn++){for(var hi=0;hi<Z;hi++)kn[hi]=0;for(var xi=0;xi<Z;xi++)for(var mi=0;mi<Z;mi++)kn[xi]+=ye[xi*Z+mi]*Mn[mi];N_(kn),ti=Mn,Mn=kn,kn=ti;for(var Pn=0,ai=0;ai<Z;ai++){var Si=ti[ai]-Mn[ai];Pn+=Si*Si}if(Pn<_)break}return{rank:function(Hr){return Hr=E.collection(Hr)[0],Mn[R.indexOf(Hr)]}}}},Ol=si({root:null,weight:function(c){return 1},directed:!1,alpha:0}),La={degreeCentralityNormalized:function(c){c=Ol(c);var d=this.cy(),m=this.nodes(),_=m.length;if(c.directed){for(var j={},Z={},he=0,me=0,ye=0;ye<_;ye++){var De=m[ye],je=De.id();c.root=De;var qe=this.degreeCentrality(c);he<qe.indegree&&(he=qe.indegree),me<qe.outdegree&&(me=qe.outdegree),j[je]=qe.indegree,Z[je]=qe.outdegree}return{indegree:function(nt){return 0==he?0:(Fe(nt)&&(nt=d.filter(nt)),j[nt.id()]/he)},outdegree:function(nt){return 0===me?0:(Fe(nt)&&(nt=d.filter(nt)),Z[nt.id()]/me)}}}for(var C={},A=0,E=0;E<_;E++){var N=m[E];c.root=N;var R=this.degreeCentrality(c);A<R.degree&&(A=R.degree),C[N.id()]=R.degree}return{degree:function(nt){return 0===A?0:(Fe(nt)&&(nt=d.filter(nt)),C[nt.id()]/A)}}},degreeCentrality:function(c){c=Ol(c);var d=this.cy(),m=this,C=c.root,A=c.weight,E=c.directed,N=c.alpha;if(C=d.collection(C)[0],E){for(var me=C.connectedEdges(),ye=me.filter(function(Wt){return Wt.target().same(C)&&m.has(Wt)}),De=me.filter(function(Wt){return Wt.source().same(C)&&m.has(Wt)}),je=ye.length,qe=De.length,ct=0,nt=0,Ct=0;Ct<ye.length;Ct++)ct+=A(ye[Ct]);for(var Gt=0;Gt<De.length;Gt++)nt+=A(De[Gt]);return{indegree:Math.pow(je,1-N)*Math.pow(ct,N),outdegree:Math.pow(qe,1-N)*Math.pow(nt,N)}}for(var R=C.connectedEdges().intersection(m),j=R.length,Z=0,he=0;he<R.length;he++)Z+=A(R[he]);return{degree:Math.pow(j,1-N)*Math.pow(Z,N)}}};La.dc=La.degreeCentrality,La.dcn=La.degreeCentralityNormalised=La.degreeCentralityNormalized;var fu=si({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),Yl={closenessCentralityNormalized:function(c){for(var d=fu(c),m=d.harmonic,_=d.weight,C=d.directed,A=this.cy(),E={},N=0,R=this.nodes(),j=this.floydWarshall({weight:_,directed:C}),Z=0;Z<R.length;Z++){for(var he=0,me=R[Z],ye=0;ye<R.length;ye++)if(Z!==ye){var De=j.distance(me,R[ye]);he+=m?1/De:De}m||(he=1/he),N<he&&(N=he),E[me.id()]=he}return{closeness:function(qe){return 0==N?0:(qe=Fe(qe)?A.filter(qe)[0].id():qe.id(),E[qe]/N)}}},closenessCentrality:function(c){var d=fu(c),m=d.root,_=d.weight,C=d.directed,A=d.harmonic;m=this.filter(m)[0];for(var E=this.dijkstra({root:m,weight:_,directed:C}),N=0,R=this.nodes(),j=0;j<R.length;j++){var Z=R[j];if(!Z.same(m)){var he=E.distanceTo(Z);N+=A?1/he:he}}return A?N:1/N}};Yl.cc=Yl.closenessCentrality,Yl.ccn=Yl.closenessCentralityNormalised=Yl.closenessCentralityNormalized;var Ir=si({weight:null,directed:!1}),Es={betweennessCentrality:function(c){for(var d=Ir(c),m=d.directed,_=d.weight,C=null!=_,A=this.cy(),E=this.nodes(),N={},R={},j=0,Z={set:function(nt,Ct){R[nt]=Ct,Ct>j&&(j=Ct)},get:function(nt){return R[nt]}},he=0;he<E.length;he++){var me=E[he],ye=me.id();N[ye]=m?me.outgoers().nodes():me.openNeighborhood().nodes(),Z.set(ye,0)}for(var De=function(nt){for(var Ct=E[nt].id(),Gt=[],Wt={},It={},jt={},Dt=new q.default(function(mi,fi){return jt[mi]-jt[fi]}),Zt=0;Zt<E.length;Zt++){var Kt=E[Zt].id();Wt[Kt]=[],It[Kt]=0,jt[Kt]=1/0}for(It[Ct]=1,jt[Ct]=0,Dt.push(Ct);!Dt.empty();){var ut=Dt.pop();if(Gt.push(ut),C)for(var Qt=0;Qt<N[ut].length;Qt++){var sn,Vt=N[ut][Qt],An=A.getElementById(ut);sn=An.edgesTo(Vt).length>0?An.edgesTo(Vt)[0]:Vt.edgesTo(An)[0];var pn=_(sn);Vt=Vt.id(),jt[Vt]>jt[ut]+pn&&(jt[Vt]=jt[ut]+pn,Dt.nodes.indexOf(Vt)<0?Dt.push(Vt):Dt.updateItem(Vt),It[Vt]=0,Wt[Vt]=[]),jt[Vt]==jt[ut]+pn&&(It[Vt]=It[Vt]+It[ut],Wt[Vt].push(ut))}else for(var Mn=0;Mn<N[ut].length;Mn++){var kn=N[ut][Mn].id();jt[kn]==1/0&&(Dt.push(kn),jt[kn]=jt[ut]+1),jt[kn]==jt[ut]+1&&(It[kn]=It[kn]+It[ut],Wt[kn].push(ut))}}for(var ti={},Dn=0;Dn<E.length;Dn++)ti[E[Dn].id()]=0;for(;Gt.length>0;){for(var Zn=Gt.pop(),hi=0;hi<Wt[Zn].length;hi++){var xi=Wt[Zn][hi];ti[xi]=ti[xi]+It[xi]/It[Zn]*(1+ti[Zn])}Zn!=E[nt].id()&&Z.set(Zn,Z.get(Zn)+ti[Zn])}},je=0;je<E.length;je++)De(je);var qe={betweenness:function(nt){var Ct=A.collection(nt).id();return Z.get(Ct)},betweennessNormalized:function(nt){if(0==j)return 0;var Ct=A.collection(nt).id();return Z.get(Ct)/j}};return qe.betweennessNormalised=qe.betweennessNormalized,qe}};Es.bc=Es.betweennessCentrality;var va=si({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(f){return 1}]}),Kf=function(c,d){for(var m=0,_=0;_<d.length;_++)m+=d[_](c);return m},sd=function(c,d){for(var m,_=0;_<d;_++){m=0;for(var C=0;C<d;C++)m+=c[C*d+_];for(var A=0;A<d;A++)c[A*d+_]=c[A*d+_]/m}},ol=function(c,d,m){for(var _=new Array(m*m),C=0;C<m;C++){for(var A=0;A<m;A++)_[C*m+A]=0;for(var E=0;E<m;E++)for(var N=0;N<m;N++)_[C*m+N]+=c[C*m+E]*d[E*m+N]}return _},Hp=function(c,d,m){for(var _=c.slice(0),C=1;C<m;C++)c=ol(c,_,d);return c},Kl=function(c,d,m){for(var _=new Array(d*d),C=0;C<d*d;C++)_[C]=Math.pow(c[C],m);return sd(_,d),_},Ws=function(c,d,m,_){for(var C=0;C<m;C++)if(Math.round(c[C]*Math.pow(10,_))/Math.pow(10,_)!=Math.round(d[C]*Math.pow(10,_))/Math.pow(10,_))return!1;return!0},Zf=function(c,d){for(var m=0;m<c.length;m++)if(!d[m]||c[m].id()!==d[m].id())return!1;return!0},_f=function(c){for(var d=this.nodes(),m=this.edges(),_=this.cy(),C=function(c){return va(c)}(c),A={},E=0;E<d.length;E++)A[d[E].id()]=E;for(var Z,N=d.length,R=N*N,j=new Array(R),he=0;he<R;he++)j[he]=0;for(var me=0;me<m.length;me++){var ye=m[me],De=A[ye.source().id()],je=A[ye.target().id()],qe=Kf(ye,C.attributes);j[De*N+je]+=qe,j[je*N+De]+=qe}(function(c,d,m){for(var _=0;_<d;_++)c[_*d+_]=m})(j,N,C.multFactor),sd(j,N);for(var ct=!0,nt=0;ct&&nt<C.maxIterations;)ct=!1,Z=Hp(j,N,C.expandFactor),j=Kl(Z,N,C.inflateFactor),Ws(j,Z,R,4)||(ct=!0),nt++;var Ct=function(c,d,m,_){for(var C=[],A=0;A<d;A++){for(var E=[],N=0;N<d;N++)Math.round(1e3*c[A*d+N])/1e3>0&&E.push(m[N]);0!==E.length&&C.push(_.collection(E))}return C}(j,N,d,_);return Ct=function(c){for(var d=0;d<c.length;d++)for(var m=0;m<c.length;m++)d!=m&&Zf(c[d],c[m])&&c.splice(m,1);return c}(Ct),Ct},Mc={markovClustering:_f,mcl:_f},Rg=function(c){return c},Qf=function(c,d){return Math.abs(d-c)},lh=function(c,d,m){return c+Qf(d,m)},ch=function(c,d,m){return c+Math.pow(m-d,2)},ky=function(c){return Math.sqrt(c)},ya=function(c,d,m){return Math.max(c,Qf(d,m))},Jf=function(c,d,m,_,C){for(var A=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Rg,E=_,j=0;j<c;j++)E=C(E,d(j),m(j));return A(E)},ep={euclidean:function(c,d,m){return c>=2?Jf(c,d,m,0,ch,ky):Jf(c,d,m,0,lh)},squaredEuclidean:function(c,d,m){return Jf(c,d,m,0,ch)},manhattan:function(c,d,m){return Jf(c,d,m,0,lh)},max:function(c,d,m){return Jf(c,d,m,-1/0,ya)}};function gu(f,c,d,m,_,C){var A;return A=Ye(f)?f:ep[f]||ep.euclidean,0===c&&Ye(f)?A(_,C):A(c,d,m,_,C)}ep["squared-euclidean"]=ep.squaredEuclidean,ep.squaredeuclidean=ep.squaredEuclidean;var Gp=si({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),tp=function(c){return Gp(c)},np=function(c,d,m,_,C){var E="kMedoids"!==C?function(Z){return m[Z]}:function(Z){return _[Z](m)};return gu(c,_.length,E,function(he){return _[he](d)},m,d)},Nd=function(c,d,m){for(var _=m.length,C=new Array(_),A=new Array(_),E=new Array(d),N=null,R=0;R<_;R++)C[R]=c.min(m[R]).value,A[R]=c.max(m[R]).value;for(var j=0;j<d;j++){N=[];for(var Z=0;Z<_;Z++)N[Z]=Math.random()*(A[Z]-C[Z])+C[Z];E[j]=N}return E},al=function(c,d,m,_,C){for(var A=1/0,E=0,N=0;N<d.length;N++){var R=np(m,c,d[N],_,C);R<A&&(A=R,E=N)}return E},uh=function(c,d,m){for(var _=[],C=null,A=0;A<d.length;A++)m[(C=d[A]).id()]===c&&_.push(C);return _},Jc=function(c,d,m){return Math.abs(d-c)<=m},Ph=function(c,d,m){for(var _=0;_<c.length;_++)for(var C=0;C<c[_].length;C++)if(Math.abs(c[_][C]-d[_][C])>m)return!1;return!0},wv=function(c,d,m){for(var _=0;_<m;_++)if(c===d[_])return!0;return!1},kg=function(c,d){var m=new Array(d);if(c.length<50)for(var _=0;_<d;_++){for(var C=c[Math.floor(Math.random()*c.length)];wv(C,m,_);)C=c[Math.floor(Math.random()*c.length)];m[_]=C}else for(var A=0;A<d;A++)m[A]=c[Math.floor(Math.random()*c.length)];return m},Og=function(c,d,m){for(var _=0,C=0;C<d.length;C++)_+=np("manhattan",d[C],c,m,"kMedoids");return _},Sn=function(c,d,m,_,C){for(var A,E,N=0;N<d.length;N++)for(var R=0;R<c.length;R++)_[N][R]=Math.pow(m[N][R],C.m);for(var j=0;j<c.length;j++)for(var Z=0;Z<C.attributes.length;Z++){A=0,E=0;for(var he=0;he<d.length;he++)A+=_[he][j]*C.attributes[Z](d[he]),E+=_[he][j];c[j][Z]=A/E}},ci=function(c,d,m,_,C){for(var A=0;A<c.length;A++)d[A]=c[A].slice();for(var E,N,R,j=2/(C.m-1),Z=0;Z<m.length;Z++)for(var he=0;he<_.length;he++){E=0;for(var me=0;me<m.length;me++)N=np(C.distance,_[he],m[Z],C.attributes,"cmeans"),R=np(C.distance,_[he],m[me],C.attributes,"cmeans"),E+=Math.pow(N/R,j);c[he][Z]=1/E}},Or=function(c){var C,A,E,N,R,d=this.cy(),m=this.nodes(),_=tp(c);N=new Array(m.length);for(var j=0;j<m.length;j++)N[j]=new Array(_.k);E=new Array(m.length);for(var Z=0;Z<m.length;Z++)E[Z]=new Array(_.k);for(var he=0;he<m.length;he++){for(var me=0,ye=0;ye<_.k;ye++)E[he][ye]=Math.random(),me+=E[he][ye];for(var De=0;De<_.k;De++)E[he][De]=E[he][De]/me}A=new Array(_.k);for(var je=0;je<_.k;je++)A[je]=new Array(_.attributes.length);R=new Array(m.length);for(var qe=0;qe<m.length;qe++)R[qe]=new Array(_.k);for(var ct=!0,nt=0;ct&&nt<_.maxIterations;)ct=!1,Sn(A,m,E,R,_),ci(E,N,A,m,_),Ph(E,N,_.sensitivityThreshold)||(ct=!0),nt++;return C=function(c,d,m,_){for(var C=new Array(m.k),A=0;A<C.length;A++)C[A]=[];for(var E,N,R=0;R<d.length;R++){E=-1/0,N=-1;for(var j=0;j<d[0].length;j++)d[R][j]>E&&(E=d[R][j],N=j);C[N].push(c[R])}for(var Z=0;Z<C.length;Z++)C[Z]=_.collection(C[Z]);return C}(m,E,_,d),{clusters:C,degreeOfMembership:E}},Vs={kMeans:function(c){var N,d=this.cy(),m=this.nodes(),_=null,C=tp(c),A=new Array(C.k),E={};N=C.testMode?"number"==typeof C.testCentroids?Nd(m,C.k,C.attributes):"object"===se(C.testCentroids)?C.testCentroids:Nd(m,C.k,C.attributes):Nd(m,C.k,C.attributes);for(var R=!0,j=0;R&&j<C.maxIterations;){for(var Z=0;Z<m.length;Z++)E[(_=m[Z]).id()]=al(_,N,C.distance,C.attributes,"kMeans");R=!1;for(var he=0;he<C.k;he++){var me=uh(he,m,E);if(0!==me.length){for(var ye=C.attributes.length,De=N[he],je=new Array(ye),qe=new Array(ye),ct=0;ct<ye;ct++){qe[ct]=0;for(var nt=0;nt<me.length;nt++)qe[ct]+=C.attributes[ct](_=me[nt]);je[ct]=qe[ct]/me.length,Jc(je[ct],De[ct],C.sensitivityThreshold)||(R=!0)}N[he]=je,A[he]=d.collection(me)}}j++}return A},kMedoids:function(c){var E,R,d=this.cy(),m=this.nodes(),_=null,C=tp(c),A=new Array(C.k),N={},j=new Array(C.k);C.testMode?"number"==typeof C.testCentroids||(E="object"===se(C.testCentroids)?C.testCentroids:kg(m,C.k)):E=kg(m,C.k);for(var Z=!0,he=0;Z&&he<C.maxIterations;){for(var me=0;me<m.length;me++)N[(_=m[me]).id()]=al(_,E,C.distance,C.attributes,"kMedoids");Z=!1;for(var ye=0;ye<E.length;ye++){var De=uh(ye,m,N);if(0!==De.length){j[ye]=Og(E[ye],De,C.attributes);for(var je=0;je<De.length;je++)(R=Og(De[je],De,C.attributes))<j[ye]&&(j[ye]=R,E[ye]=De[je],Z=!0);A[ye]=d.collection(De)}}he++}return A},fuzzyCMeans:Or,fcm:Or},Zo=si({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),Zl={single:"min",complete:"max"},Av=function(c,d,m,_,C){for(var N,A=0,E=1/0,R=C.attributes,j=function(Dt,Zt){return gu(C.distance,R.length,function(Kt){return R[Kt](Dt)},function(Kt){return R[Kt](Zt)},Dt,Zt)},Z=0;Z<c.length;Z++){var he=c[Z].key,me=m[he][_[he]];me<E&&(A=he,E=me)}if("threshold"===C.mode&&E>=C.threshold||"dendrogram"===C.mode&&1===c.length)return!1;var je,ye=d[A],De=d[_[A]];je="dendrogram"===C.mode?{left:ye,right:De,key:ye.key}:{value:ye.value.concat(De.value),key:ye.key},c[ye.index]=je,c.splice(De.index,1),d[ye.key]=je;for(var qe=0;qe<c.length;qe++){var ct=c[qe];ye.key===ct.key?N=1/0:"min"===C.linkage?(N=m[ye.key][ct.key],m[ye.key][ct.key]>m[De.key][ct.key]&&(N=m[De.key][ct.key])):"max"===C.linkage?(N=m[ye.key][ct.key],m[ye.key][ct.key]<m[De.key][ct.key]&&(N=m[De.key][ct.key])):N="mean"===C.linkage?(m[ye.key][ct.key]*ye.size+m[De.key][ct.key]*De.size)/(ye.size+De.size):"dendrogram"===C.mode?j(ct.value,ye.value):j(ct.value[0],ye.value[0]),m[ye.key][ct.key]=m[ct.key][ye.key]=N}for(var nt=0;nt<c.length;nt++){var Ct=c[nt].key;if(_[Ct]===ye.key||_[Ct]===De.key){for(var Gt=Ct,Wt=0;Wt<c.length;Wt++){var It=c[Wt].key;m[Ct][It]<m[Ct][Gt]&&(Gt=It)}_[Ct]=Gt}c[nt].index=nt}return ye.key=De.key=ye.index=De.index=null,!0},xv=function f(c,d,m){!c||(c.value?d.push(c.value):(c.left&&f(c.left,d),c.right&&f(c.right,d)))},kh=function f(c,d){if(!c)return"";if(c.left&&c.right){var m=f(c.left,d),_=f(c.right,d),C=d.add({group:"nodes",data:{id:m+","+_}});return d.add({group:"edges",data:{source:m,target:C.id()}}),d.add({group:"edges",data:{source:_,target:C.id()}}),C.id()}return c.value?c.value.id():void 0},Iv=function f(c,d,m){if(!c)return[];var _=[],C=[],A=[];return 0===d?(c.left&&xv(c.left,_),c.right&&xv(c.right,C),A=_.concat(C),[m.collection(A)]):1===d?c.value?[m.collection(c.value)]:(c.left&&xv(c.left,_),c.right&&xv(c.right,C),[m.collection(_),m.collection(C)]):c.value?[m.collection(c.value)]:(c.left&&(_=f(c.left,d-1,m)),c.right&&(C=f(c.right,d-1,m)),_.concat(C))},U_=function(c){for(var d=this.cy(),m=this.nodes(),_=function(c){var d=Zo(c),m=Zl[d.linkage];return null!=m&&(d.linkage=m),d}(c),C=_.attributes,A=function(nt,Ct){return gu(_.distance,C.length,function(Gt){return C[Gt](nt)},function(Gt){return C[Gt](Ct)},nt,Ct)},E=[],N=[],R=[],j=[],Z=0;Z<m.length;Z++){var he={value:"dendrogram"===_.mode?m[Z]:[m[Z]],key:Z,index:Z};E[Z]=he,j[Z]=he,N[Z]=[],R[Z]=0}for(var me=0;me<E.length;me++)for(var ye=0;ye<=me;ye++){var De;De="dendrogram"===_.mode?me===ye?1/0:A(E[me].value,E[ye].value):me===ye?1/0:A(E[me].value[0],E[ye].value[0]),N[me][ye]=De,N[ye][me]=De,De<N[me][R[me]]&&(R[me]=ye)}for(var je=Av(E,j,N,R,_);je;)je=Av(E,j,N,R,_);var qe;return"dendrogram"===_.mode?(qe=Iv(E[0],_.dendrogramDepth,d),_.addDendrogram&&kh(E[0],d)):(qe=new Array(E.length),E.forEach(function(ct,nt){ct.key=ct.index=null,qe[nt]=d.collection(ct.value)})),qe},Fg={hierarchicalClustering:U_,hca:U_},Sv=si({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),ia=function(c,d,m,_){var C=function(E,N){return _[N](E)};return-gu(c,_.length,function(A){return C(d,A)},function(A){return C(m,A)},d,m)},Tm=function(c,d,m){for(var _=[],C=0;C<c;C++){for(var A=-1,E=-1/0,N=0;N<m.length;N++){var R=m[N];d[C*c+R]>E&&(A=R,E=d[C*c+R])}A>0&&_.push(A)}for(var j=0;j<m.length;j++)_[m[j]]=m[j];return _},H_=function(c){for(var d=this.cy(),m=this.nodes(),_=function(c){var d=c.damping,m=c.preference;.5<=d&&d<1||pt("Damping must range on [0.5, 1).  Got: ".concat(d));var _=["median","mean","min","max"];return _.some(function(C){return C===m})||Ne(m)||pt("Preference must be one of [".concat(_.map(function(C){return"'".concat(C,"'")}).join(", "),"] or a number.  Got: ").concat(m)),Sv(c)}(c),C={},A=0;A<m.length;A++)C[m[A].id()]=A;var E,N,R,j,Z,he,Dt;N=(E=m.length)*E,R=new Array(N);for(var me=0;me<N;me++)R[me]=-1/0;for(var ye=0;ye<E;ye++)for(var De=0;De<E;De++)ye!==De&&(R[ye*E+De]=ia(_.distance,m[ye],m[De],_.attributes));j=function(c,d){var m;return m="median"===d?function(c){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.length,C=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],A=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];arguments.length>3&&void 0!==arguments[3]&&!arguments[3]?(m<c.length&&c.splice(m,c.length-m),d>0&&c.splice(0,d)):c=c.slice(d,m);for(var E=0,N=c.length-1;N>=0;N--)A?isFinite(c[N])||(c[N]=-1/0,E++):c.splice(N,1);C&&c.sort(function(he,me){return he-me});var j=c.length,Z=Math.floor(j/2);return j%2!=0?c[Z+1+E]:(c[Z-1+E]+c[Z+E])/2}(c):"mean"===d?function(c){for(var m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.length,_=0,C=0,A=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;A<m;A++){var E=c[A];isFinite(E)&&(_+=E,C++)}return _/C}(c):"min"===d?function(c){for(var m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.length,_=1/0,C=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;C<m;C++){var A=c[C];isFinite(A)&&(_=Math.min(A,_))}return _}(c):"max"===d?function(c){for(var m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.length,_=-1/0,C=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;C<m;C++){var A=c[C];isFinite(A)&&(_=Math.max(A,_))}return _}(c):d,m}(R,_.preference);for(var je=0;je<E;je++)R[je*E+je]=j;Z=new Array(N);for(var qe=0;qe<N;qe++)Z[qe]=0;he=new Array(N);for(var ct=0;ct<N;ct++)he[ct]=0;for(var nt=new Array(E),Ct=new Array(E),Gt=new Array(E),Wt=0;Wt<E;Wt++)nt[Wt]=0,Ct[Wt]=0,Gt[Wt]=0;for(var It=new Array(E*_.minIterations),jt=0;jt<It.length;jt++)It[jt]=0;for(Dt=0;Dt<_.maxIterations;Dt++){for(var Zt=0;Zt<E;Zt++){for(var Kt=-1/0,ut=-1/0,Qt=-1,Vt=0,An=0;An<E;An++)nt[An]=Z[Zt*E+An],(Vt=he[Zt*E+An]+R[Zt*E+An])>=Kt?(ut=Kt,Kt=Vt,Qt=An):Vt>ut&&(ut=Vt);for(var sn=0;sn<E;sn++)Z[Zt*E+sn]=(1-_.damping)*(R[Zt*E+sn]-Kt)+_.damping*nt[sn];Z[Zt*E+Qt]=(1-_.damping)*(R[Zt*E+Qt]-ut)+_.damping*nt[Qt]}for(var pn=0;pn<E;pn++){for(var Mn=0,kn=0;kn<E;kn++)nt[kn]=he[kn*E+pn],Ct[kn]=Math.max(0,Z[kn*E+pn]),Mn+=Ct[kn];Mn-=Ct[pn],Ct[pn]=Z[pn*E+pn],Mn+=Ct[pn];for(var ti=0;ti<E;ti++)he[ti*E+pn]=(1-_.damping)*Math.min(0,Mn-Ct[ti])+_.damping*nt[ti];he[pn*E+pn]=(1-_.damping)*(Mn-Ct[pn])+_.damping*nt[pn]}for(var Dn=0,Zn=0;Zn<E;Zn++){var hi=he[Zn*E+Zn]+Z[Zn*E+Zn]>0?1:0;It[Dt%_.minIterations*E+Zn]=hi,Dn+=hi}if(Dn>0&&(Dt>=_.minIterations-1||Dt==_.maxIterations-1)){for(var xi=0,mi=0;mi<E;mi++){Gt[mi]=0;for(var fi=0;fi<_.minIterations;fi++)Gt[mi]+=It[fi*E+mi];(0===Gt[mi]||Gt[mi]===_.minIterations)&&xi++}if(xi===E)break}}for(var Pn=function(c,d,m){for(var _=[],C=0;C<c;C++)d[C*c+C]+m[C*c+C]>0&&_.push(C);return _}(E,Z,he),ai=function(c,d,m){for(var _=Tm(c,d,m),C=0;C<m.length;C++){for(var A=[],E=0;E<_.length;E++)_[E]===m[C]&&A.push(E);for(var N=-1,R=-1/0,j=0;j<A.length;j++){for(var Z=0,he=0;he<A.length;he++)Z+=d[A[he]*c+A[j]];Z>R&&(N=j,R=Z)}m[C]=A[N]}return Tm(c,d,m)}(E,R,Pn),Si={},Qi=0;Qi<Pn.length;Qi++)Si[Pn[Qi]]=[];for(var lr=0;lr<m.length;lr++){var Zr=ai[C[m[lr].id()]];null!=Zr&&Si[Zr].push(m[lr])}for(var mr=new Array(Pn.length),or=0;or<Pn.length;or++)mr[or]=d.collection(Si[Pn[or]]);return mr},ip={affinityPropagation:H_,ap:H_},Mm=si({root:void 0,directed:!1}),da={hierholzer:function(c){if(!vt(c)){var d=arguments;c={root:d[0],directed:d[1]}}var N,R,j,m=Mm(c),_=m.root,C=m.directed,A=this,E=!1;_&&(j=Fe(_)?this.filter(_)[0].id():_[0].id());var Z={},he={};A.forEach(C?function(ct){var nt=ct.id();if(ct.isNode()){var Ct=ct.indegree(!0),Gt=ct.outdegree(!0),Wt=Ct-Gt,It=Gt-Ct;1==Wt?N?E=!0:N=nt:1==It?R?E=!0:R=nt:(It>1||Wt>1)&&(E=!0),Z[nt]=[],ct.outgoers().forEach(function(jt){jt.isEdge()&&Z[nt].push(jt.id())})}else he[nt]=[void 0,ct.target().id()]}:function(ct){var nt=ct.id();ct.isNode()?(ct.degree(!0)%2&&(N?R?E=!0:R=nt:N=nt),Z[nt]=[],ct.connectedEdges().forEach(function(Gt){return Z[nt].push(Gt.id())})):he[nt]=[ct.source().id(),ct.target().id()]});var me={found:!1,trail:void 0};if(E)return me;if(R&&N)if(C){if(j&&R!=j)return me;j=R}else{if(j&&R!=j&&N!=j)return me;j||(j=R)}else j||(j=A[0].id());var ye=function(nt){for(var Wt,It,jt,Ct=nt,Gt=[nt];Z[Ct].length;)Wt=Z[Ct].shift(),It=he[Wt][0],Ct!=(jt=he[Wt][1])?(Z[jt]=Z[jt].filter(function(Dt){return Dt!=Wt}),Ct=jt):!C&&Ct!=It&&(Z[It]=Z[It].filter(function(Dt){return Dt!=Wt}),Ct=It),Gt.unshift(Wt),Gt.unshift(Ct);return Gt},De=[],je=[];for(je=ye(j);1!=je.length;)0==Z[je[0]].length?(De.unshift(A.getElementById(je.shift())),De.unshift(A.getElementById(je.shift()))):je=ye(je.shift()).concat(je);for(var qe in De.unshift(A.getElementById(je.shift())),Z)if(Z[qe].length)return me;return me.found=!0,me.trail=this.spawn(De,!0),me}},bf=function(){var c=this,d={},m=0,_=0,C=[],A=[],E={},R=function Z(he,me,ye){he===ye&&(_+=1),d[me]={id:m,low:m++,cutVertex:!1};var je,qe,ct,nt,De=c.getElementById(me).connectedEdges().intersection(c);0===De.size()?C.push(c.spawn(c.getElementById(me))):De.forEach(function(Ct){je=Ct.source().id(),qe=Ct.target().id(),(ct=je===me?qe:je)!==ye&&(nt=Ct.id(),E[nt]||(E[nt]=!0,A.push({x:me,y:ct,edge:Ct})),ct in d?d[me].low=Math.min(d[me].low,d[ct].id):(Z(he,ct,me),d[me].low=Math.min(d[me].low,d[ct].low),d[me].id<=d[ct].low&&(d[me].cutVertex=!0,function(he,me){for(var ye=A.length-1,De=[],je=c.spawn();A[ye].x!=he||A[ye].y!=me;)De.push(A.pop().edge),ye--;De.push(A.pop().edge),De.forEach(function(qe){var ct=qe.connectedNodes().intersection(c);je.merge(qe),ct.forEach(function(nt){var Ct=nt.id(),Gt=nt.connectedEdges().intersection(c);je.merge(nt),je.merge(d[Ct].cutVertex?Gt.filter(function(Wt){return Wt.isLoop()}):Gt)})}),C.push(je)}(me,ct))))})};c.forEach(function(Z){if(Z.isNode()){var he=Z.id();he in d||(_=0,R(he,he),d[he].cutVertex=_>1)}});var j=Object.keys(d).filter(function(Z){return d[Z].cutVertex}).map(function(Z){return c.getElementById(Z)});return{cut:c.spawn(j),components:C}},rp=function(){var c=this,d={},m=0,_=[],C=[],A=c.spawn(c),E=function N(R){if(C.push(R),d[R]={index:m,low:m++,explored:!1},c.getElementById(R).connectedEdges().intersection(c).forEach(function(De){var je=De.target().id();je!==R&&(je in d||N(je),d[je].explored||(d[R].low=Math.min(d[R].low,d[je].low)))}),d[R].index===d[R].low){for(var Z=c.spawn();;){var he=C.pop();if(Z.merge(c.getElementById(he)),d[he].low=d[R].index,d[he].explored=!0,he===R)break}var me=Z.edgesWith(Z),ye=Z.merge(me);_.push(ye),A=A.difference(ye)}};return c.forEach(function(N){if(N.isNode()){var R=N.id();R in d||E(R)}}),{cut:A,components:_}},Dm={};[cs,Dg,Vp,Lg,To,yv,My,Ko,La,Yl,Es,Mc,Vs,Fg,ip,da,{hopcroftTarjanBiconnected:bf,htbc:bf,htb:bf,hopcroftTarjanBiconnectedComponents:bf},{tarjanStronglyConnected:rp,tsc:rp,tscc:rp,tarjanStronglyConnectedComponents:rp}].forEach(function(f){sr(Dm,f)});var ba=function f(c){if(!(this instanceof f))return new f(c);this.id="Thenable/1.0.7",this.state=0,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},"function"==typeof c&&c.call(this,this.fulfill.bind(this),this.reject.bind(this))};ba.prototype={fulfill:function(c){return sp(this,1,"fulfillValue",c)},reject:function(c){return sp(this,2,"rejectReason",c)},then:function(c,d){var m=this,_=new ba;return m.onFulfilled.push(By(c,_,"fulfill")),m.onRejected.push(By(d,_,"reject")),Ny(m),_.proxy}};var sp=function(c,d,m,_){return 0===c.state&&(c.state=d,c[m]=_,Ny(c)),c},Ny=function(c){1===c.state?Lm(c,"onFulfilled",c.fulfillValue):2===c.state&&Lm(c,"onRejected",c.rejectReason)},Lm=function(c,d,m){if(0!==c[d].length){var _=c[d];c[d]=[];var C=function(){for(var E=0;E<_.length;E++)_[E](m)};"function"==typeof setImmediate?setImmediate(C):setTimeout(C,0)}},By=function(c,d,m){return function(_){if("function"!=typeof c)d[m].call(d,_);else{var C;try{C=c(_)}catch(A){return void d.reject(A)}Mv(d,C)}}},Mv=function f(c,d){if(c!==d&&c.proxy!==d){var m;if("object"===se(d)&&null!==d||"function"==typeof d)try{m=d.then}catch(C){return void c.reject(C)}if("function"!=typeof m)c.fulfill(d);else{var _=!1;try{m.call(d,function(C){_||(_=!0,C===d?c.reject(new TypeError("circular thenable chain")):f(c,C))},function(C){_||(_=!0,c.reject(C))})}catch(C){_||c.reject(C)}}}else c.reject(new TypeError("cannot resolve promise with itself"))};ba.all=function(f){return new ba(function(c,d){for(var m=new Array(f.length),_=0,C=function(N,R){m[N]=R,++_===f.length&&c(m)},A=0;A<f.length;A++)!function(E){var N=f[E];null!=N&&null!=N.then?N.then(function(Z){C(E,Z)},function(Z){d(Z)}):C(E,N)}(A)})},ba.resolve=function(f){return new ba(function(c,d){c(f)})},ba.reject=function(f){return new ba(function(c,d){d(f)})};var ra=typeof Promise<"u"?Promise:ba,zg=function(c,d,m){var _=Lt(c),C=!_,A=this._private=sr({duration:1e3},d,m);if(A.target=c,A.style=A.style||A.css,A.started=!1,A.playing=!1,A.hooked=!1,A.applying=!1,A.progress=0,A.completes=[],A.frames=[],A.complete&&Ye(A.complete)&&A.completes.push(A.complete),C){var E=c.position();A.startPosition=A.startPosition||{x:E.x,y:E.y},A.startStyle=A.startStyle||c.cy().style().getAnimationStartStyle(c,A.style)}if(_){var N=c.pan();A.startPan={x:N.x,y:N.y},A.startZoom=c.zoom()}this.length=1,this[0]=this},jp=zg.prototype;sr(jp,{instanceString:function(){return"animation"},hook:function(){var c=this._private;if(!c.hooked){var m=c.target._private.animation;(c.queue?m.queue:m.current).push(this),Ge(c.target)&&c.target.cy().addToAnimationPool(c.target),c.hooked=!0}return this},play:function(){var c=this._private;return 1===c.progress&&(c.progress=0),c.playing=!0,c.started=!1,c.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var c=this._private;return c.applying=!0,c.started=!1,c.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var c=this._private;return c.playing=!1,c.started=!1,this},stop:function(){var c=this._private;return c.playing=!1,c.started=!1,c.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(c){var d=this._private;return void 0===c?d.progress*d.duration:this.progress(c/d.duration)},progress:function(c){var d=this._private,m=d.playing;return void 0===c?d.progress:(m&&this.pause(),d.progress=c,d.started=!1,m&&this.play(),this)},completed:function(){return 1===this._private.progress},reverse:function(){var c=this._private,d=c.playing;d&&this.pause(),c.progress=1-c.progress,c.started=!1;var m=function(R,j){var Z=c[R];null!=Z&&(c[R]=c[j],c[j]=Z)};if(m("zoom","startZoom"),m("pan","startPan"),m("position","startPosition"),c.style)for(var _=0;_<c.style.length;_++){var C=c.style[_],A=C.name,E=c.startStyle[A];c.startStyle[A]=C,c.style[_]=E}return d&&this.play(),this},promise:function(c){var m,d=this._private;return m="frame"===c?d.frames:d.completes,new ra(function(_,C){m.push(function(){_()})})}}),jp.complete=jp.completed,jp.run=jp.play,jp.running=jp.playing;var hh={data:function(c){return c=sr({},{field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(_){},beforeSet:function(_,C){},onSet:function(_){},canSet:function(_){return!0}},c),function(_,C){var A=c,E=this,N=void 0!==E.length,R=N?E:[E],j=N?E[0]:E;if(Fe(_)){var me,he=-1!==_.indexOf(".")&&ne.default(_);if(A.allowGetting&&void 0===C)return j&&(A.beforeGet(j),me=he&&void 0===j._private[A.field][_]?ee.default(j._private[A.field],he):j._private[A.field][_]),me;if(A.allowSetting&&void 0!==C&&!A.immutableKeys[_]){var De=_e({},_,C);A.beforeSet(E,De);for(var je=0,qe=R.length;je<qe;je++){var ct=R[je];A.canSet(ct)&&(he&&void 0===j._private[A.field][_]?K.default(ct._private[A.field],he,C):ct._private[A.field][_]=C)}A.updateStyle&&E.updateStyle(),A.onSet(E),A.settingTriggersEvent&&E[A.triggerFnName](A.settingEvent)}}else if(A.allowSetting&&vt(_)){var Ct,Gt,nt=_,Wt=Object.keys(nt);A.beforeSet(E,nt);for(var It=0;It<Wt.length;It++)if(Gt=nt[Ct=Wt[It]],!A.immutableKeys[Ct])for(var Dt=0;Dt<R.length;Dt++){var Zt=R[Dt];A.canSet(Zt)&&(Zt._private[A.field][Ct]=Gt)}A.updateStyle&&E.updateStyle(),A.onSet(E),A.settingTriggersEvent&&E[A.triggerFnName](A.settingEvent)}else if(A.allowBinding&&Ye(_))E.on(A.bindingEvent,_);else if(A.allowGetting&&void 0===_){var ut;return j&&(A.beforeGet(j),ut=j._private[A.field]),ut}return E}},removeData:function(c){return c=sr({},{field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}},c),function(_){var C=c,A=this,N=void 0!==A.length?A:[A];if(Fe(_)){for(var R=_.split(/\s+/),j=R.length,Z=0;Z<j;Z++){var he=R[Z];if(!fe(he)&&!C.immutableKeys[he])for(var ye=0,De=N.length;ye<De;ye++)N[ye]._private[C.field][he]=void 0}C.triggerEvent&&A[C.triggerFnName](C.event)}else if(void 0===_){for(var je=0,qe=N.length;je<qe;je++)for(var ct=N[je]._private[C.field],nt=Object.keys(ct),Ct=0;Ct<nt.length;Ct++){var Gt=nt[Ct];!C.immutableKeys[Gt]&&(ct[Gt]=void 0)}C.triggerEvent&&A[C.triggerFnName](C.event)}return A}}},G_={eventAliasesOn:function(c){var d=c;d.addListener=d.listen=d.bind=d.on,d.unlisten=d.unbind=d.off=d.removeListener,d.trigger=d.emit,d.pon=d.promiseOn=function(m,_){var C=this,A=Array.prototype.slice.call(arguments,0);return new ra(function(E,N){var j=A.concat([function(me){C.off.apply(C,Z),E(me)}]),Z=j.concat([]);C.on.apply(C,j)})}}},ys={};[{animated:function(){return function(){var d=this,_=void 0!==d.length?d:[d];if(!(this._private.cy||this).styleEnabled())return!1;var A=_[0];return A?A._private.animation.current.length>0:void 0}},clearQueue:function(){return function(){var d=this,_=void 0!==d.length?d:[d];if(!(this._private.cy||this).styleEnabled())return this;for(var A=0;A<_.length;A++)_[A]._private.animation.queue=[];return this}},delay:function(){return function(d,m){return(this._private.cy||this).styleEnabled()?this.animate({delay:d,duration:d,complete:m}):this}},delayAnimation:function(){return function(d,m){return(this._private.cy||this).styleEnabled()?this.animation({delay:d,duration:d,complete:m}):this}},animation:function(){return function(d,m){var _=this,C=void 0!==_.length,A=C?_:[_],E=this._private.cy||this,N=!C,R=!N;if(!E.styleEnabled())return this;var j=E.style();if(d=sr({},d,m),0===Object.keys(d).length)return new zg(A[0],d);switch(void 0===d.duration&&(d.duration=400),d.duration){case"slow":d.duration=600;break;case"fast":d.duration=200}if(R&&(d.style=j.getPropsList(d.style||d.css),d.css=void 0),R&&null!=d.renderedPosition){var he=d.renderedPosition,me=E.pan(),ye=E.zoom();d.position=Sc(he,ye,me)}if(N&&null!=d.panBy){var De=d.panBy,je=E.pan();d.pan={x:je.x+De.x,y:je.y+De.y}}var qe=d.center||d.centre;if(N&&null!=qe){var ct=E.getCenterPan(qe.eles,d.zoom);null!=ct&&(d.pan=ct)}if(N&&null!=d.fit){var nt=d.fit,Ct=E.getFitViewport(nt.eles||nt.boundingBox,nt.padding);null!=Ct&&(d.pan=Ct.pan,d.zoom=Ct.zoom)}if(N&&vt(d.zoom)){var Gt=E.getZoomedViewport(d.zoom);null!=Gt?(Gt.zoomed&&(d.zoom=Gt.zoom),Gt.panned&&(d.pan=Gt.pan)):d.zoom=null}return new zg(A[0],d)}},animate:function(){return function(d,m){var _=this,A=void 0!==_.length?_:[_];if(!(this._private.cy||this).styleEnabled())return this;m&&(d=sr({},d,m));for(var N=0;N<A.length;N++){var R=A[N],j=R.animated()&&(void 0===d.queue||d.queue);R.animation(d,j?{queue:!0}:void 0).play()}return this}},stop:function(){return function(d,m){var _=this,A=void 0!==_.length?_:[_],E=this._private.cy||this;if(!E.styleEnabled())return this;for(var N=0;N<A.length;N++){for(var j=A[N]._private,Z=j.animation.current,he=0;he<Z.length;he++)m&&(Z[he]._private.duration=0);d&&(j.animation.queue=[]),m||(j.animation.current=[])}return E.notify("draw"),this}}},hh,G_].forEach(function(f){sr(ys,f)});var ml={animate:ys.animate(),animation:ys.animation(),animated:ys.animated(),clearQueue:ys.clearQueue(),delay:ys.delay(),delayAnimation:ys.delayAnimation(),stop:ys.stop()},Dc={classes:function(c){var d=this;if(void 0===c){var m=[];return d[0]._private.classes.forEach(function(ye){return m.push(ye)}),m}lt(c)||(c=(c||"").match(/\S+/g)||[]);for(var _=[],C=new fs(c),A=0;A<d.length;A++){for(var E=d[A],N=E._private,R=N.classes,j=!1,Z=0;Z<c.length;Z++)if(!R.has(c[Z])){j=!0;break}j||(j=R.size!==c.length),j&&(N.classes=C,_.push(E))}return _.length>0&&this.spawn(_).updateStyle().emit("class"),d},addClass:function(c){return this.toggleClass(c,!0)},hasClass:function(c){var d=this[0];return null!=d&&d._private.classes.has(c)},toggleClass:function(c,d){lt(c)||(c=c.match(/\S+/g)||[]);for(var m=this,_=void 0===d,C=[],A=0,E=m.length;A<E;A++)for(var N=m[A],R=N._private.classes,j=!1,Z=0;Z<c.length;Z++){var he=c[Z],me=R.has(he),ye=!1;d||_&&!me?(R.add(he),ye=!0):(!d||_&&me)&&(R.delete(he),ye=!0),!j&&ye&&(C.push(N),j=!0)}return C.length>0&&this.spawn(C).updateStyle().emit("class"),m},removeClass:function(c){return this.toggleClass(c,!1)},flashClass:function(c,d){var m=this;if(null==d)d=250;else if(0===d)return m;return m.addClass(c),setTimeout(function(){m.removeClass(c)},d),m}};Dc.className=Dc.classNames=Dc.classes;var bo={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:"\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'",number:ze,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};bo.variable="(?:[\\w-.]|(?:\\\\"+bo.metaChar+"))+",bo.className="(?:[\\w-]|(?:\\\\"+bo.metaChar+"))+",bo.value=bo.string+"|"+bo.number,bo.id=bo.variable,function(){var f,c,d;for(f=bo.comparatorOp.split("|"),d=0;d<f.length;d++)bo.comparatorOp+="|@"+(c=f[d]);for(f=bo.comparatorOp.split("|"),d=0;d<f.length;d++)!((c=f[d]).indexOf("!")>=0)&&"="!==c&&(bo.comparatorOp+="|\\!"+c)}();var $s=[{selector:":selected",matches:function(c){return c.selected()}},{selector:":unselected",matches:function(c){return!c.selected()}},{selector:":selectable",matches:function(c){return c.selectable()}},{selector:":unselectable",matches:function(c){return!c.selectable()}},{selector:":locked",matches:function(c){return c.locked()}},{selector:":unlocked",matches:function(c){return!c.locked()}},{selector:":visible",matches:function(c){return c.visible()}},{selector:":hidden",matches:function(c){return!c.visible()}},{selector:":transparent",matches:function(c){return c.transparent()}},{selector:":grabbed",matches:function(c){return c.grabbed()}},{selector:":free",matches:function(c){return!c.grabbed()}},{selector:":removed",matches:function(c){return c.removed()}},{selector:":inside",matches:function(c){return!c.removed()}},{selector:":grabbable",matches:function(c){return c.grabbable()}},{selector:":ungrabbable",matches:function(c){return!c.grabbable()}},{selector:":animated",matches:function(c){return c.animated()}},{selector:":unanimated",matches:function(c){return!c.animated()}},{selector:":parent",matches:function(c){return c.isParent()}},{selector:":childless",matches:function(c){return c.isChildless()}},{selector:":child",matches:function(c){return c.isChild()}},{selector:":orphan",matches:function(c){return c.isOrphan()}},{selector:":nonorphan",matches:function(c){return c.isChild()}},{selector:":compound",matches:function(c){return c.isNode()?c.isParent():c.source().isParent()||c.target().isParent()}},{selector:":loop",matches:function(c){return c.isLoop()}},{selector:":simple",matches:function(c){return c.isSimple()}},{selector:":active",matches:function(c){return c.active()}},{selector:":inactive",matches:function(c){return!c.active()}},{selector:":backgrounding",matches:function(c){return c.backgrounding()}},{selector:":nonbackgrounding",matches:function(c){return!c.backgrounding()}}].sort(function(f,c){return function(c,d){return-1*ws(c,d)}(f.selector,c.selector)}),Xr=function(){for(var c,f={},d=0;d<$s.length;d++)f[(c=$s[d]).selector]=c.matches;return f}(),ns="("+$s.map(function(f){return f.selector}).join("|")+")",us=function(c){return c.replace(new RegExp("\\\\("+bo.metaChar+")","g"),function(d,m){return m})},Lc=function(c,d,m){c[c.length-1]=m},od=[{name:"group",query:!0,regex:"("+bo.group+")",populate:function(c,d,m){var C=Ee(m,1)[0];d.checks.push({type:0,value:"*"===C?C:C+"s"})}},{name:"state",query:!0,regex:ns,populate:function(c,d,m){var _=Ee(m,1);d.checks.push({type:7,value:_[0]})}},{name:"id",query:!0,regex:"\\#("+bo.id+")",populate:function(c,d,m){var _=Ee(m,1);d.checks.push({type:8,value:us(_[0])})}},{name:"className",query:!0,regex:"\\.("+bo.className+")",populate:function(c,d,m){var _=Ee(m,1);d.checks.push({type:9,value:us(_[0])})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+bo.variable+")\\s*\\]",populate:function(c,d,m){var _=Ee(m,1);d.checks.push({type:4,field:us(_[0])})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+bo.variable+")\\s*("+bo.comparatorOp+")\\s*("+bo.value+")\\s*\\]",populate:function(c,d,m){var _=Ee(m,3),C=_[0],A=_[1],E=_[2];E=null!=new RegExp("^"+bo.string+"$").exec(E)?E.substring(1,E.length-1):parseFloat(E),d.checks.push({type:3,field:us(C),operator:A,value:E})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+bo.boolOp+")\\s*("+bo.variable+")\\s*\\]",populate:function(c,d,m){var _=Ee(m,2),C=_[0];d.checks.push({type:5,field:us(_[1]),operator:C})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+bo.meta+")\\s*("+bo.comparatorOp+")\\s*("+bo.number+")\\s*\\]\\]",populate:function(c,d,m){var _=Ee(m,3),A=_[1],E=_[2];d.checks.push({type:6,field:us(_[0]),operator:A,value:parseFloat(E)})}},{name:"nextQuery",separator:!0,regex:bo.separator,populate:function(c,d){var m=c.currentSubject,_=c.edgeCount,C=c.compoundCount,A=c[c.length-1];return null!=m&&(A.subject=m,c.currentSubject=null),A.edgeCount=_,A.compoundCount=C,c.edgeCount=0,c.compoundCount=0,c[c.length++]={checks:[]}}},{name:"directedEdge",separator:!0,regex:bo.directedEdge,populate:function(c,d){if(null==c.currentSubject){var m={checks:[]},C={checks:[]};return m.checks.push({type:11,source:d,target:C}),Lc(c,0,m),c.edgeCount++,C}var A={checks:[]},N={checks:[]};return A.checks.push({type:12,source:d,target:N}),Lc(c,0,A),c.edgeCount++,N}},{name:"undirectedEdge",separator:!0,regex:bo.undirectedEdge,populate:function(c,d){if(null==c.currentSubject){var m={checks:[]},C={checks:[]};return m.checks.push({type:10,nodes:[d,C]}),Lc(c,0,m),c.edgeCount++,C}var A={checks:[]},N={checks:[]};return A.checks.push({type:14,node:d,neighbor:N}),Lc(c,0,A),N}},{name:"child",separator:!0,regex:bo.child,populate:function(c,d){if(null==c.currentSubject){var m={checks:[]},_={checks:[]};return m.checks.push({type:15,parent:c[c.length-1],child:_}),Lc(c,0,m),c.compoundCount++,_}if(c.currentSubject===d){var A={checks:[]},N={checks:[]},R={checks:[]},j={checks:[]},Z={checks:[]};return A.checks.push({type:19,left:c[c.length-1],right:N,subject:R}),R.checks=d.checks,d.checks=[{type:20}],Z.checks.push({type:20}),N.checks.push({type:17,parent:Z,child:j}),Lc(c,0,A),c.currentSubject=R,c.compoundCount++,j}var he={checks:[]},me={checks:[]},ye=[{type:17,parent:he,child:me}];return he.checks=d.checks,d.checks=ye,c.compoundCount++,me}},{name:"descendant",separator:!0,regex:bo.descendant,populate:function(c,d){if(null==c.currentSubject){var m={checks:[]},_={checks:[]};return m.checks.push({type:16,ancestor:c[c.length-1],descendant:_}),Lc(c,0,m),c.compoundCount++,_}if(c.currentSubject===d){var A={checks:[]},N={checks:[]},R={checks:[]},j={checks:[]},Z={checks:[]};return A.checks.push({type:19,left:c[c.length-1],right:N,subject:R}),R.checks=d.checks,d.checks=[{type:20}],Z.checks.push({type:20}),N.checks.push({type:18,ancestor:Z,descendant:j}),Lc(c,0,A),c.currentSubject=R,c.compoundCount++,j}var he={checks:[]},me={checks:[]},ye=[{type:18,ancestor:he,descendant:me}];return he.checks=d.checks,d.checks=ye,c.compoundCount++,me}},{name:"subject",modifier:!0,regex:bo.subject,populate:function(c,d){if(null!=c.currentSubject&&c.currentSubject!==d)return ge("Redefinition of subject in selector `"+c.toString()+"`"),!1;c.currentSubject=d;var _=c[c.length-1].checks[0],C=null==_?null:_.type;11===C?_.type=13:10===C&&(_.type=14,_.node=_.nodes[1],_.neighbor=_.nodes[0],_.nodes=null)}}];od.forEach(function(f){return f.regexObj=new RegExp("^"+f.regex)});var $p=function(c){for(var d,m,_,C=0;C<od.length;C++){var A=od[C],E=A.name,N=c.match(A.regexObj);if(null!=N){m=N,d=A,_=E,c=c.substring(N[0].length);break}}return{expr:d,match:m,name:_,remaining:c}},eu={parse:function(c){var d=this,m=d.inputText=c,_=d[0]={checks:[]};for(d.length=1,m=function(c){var d=c.match(/^\s+/);return d&&(c=c.substring(d[0].length)),c}(m);;){var C=$p(m);if(null==C.expr)return ge("The selector `"+c+"`is invalid"),!1;var A=C.match.slice(1),E=C.expr.populate(d,_,A);if(!1===E)return!1;if(null!=E&&(_=E),(m=C.remaining).match(/^\s*$/))break}var N=d[d.length-1];null!=d.currentSubject&&(N.subject=d.currentSubject),N.edgeCount=d.edgeCount,N.compoundCount=d.compoundCount;for(var R=0;R<d.length;R++){var j=d[R];if(j.compoundCount>0&&j.edgeCount>0)return ge("The selector `"+c+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(j.edgeCount>1)return ge("The selector `"+c+"` is invalid because it uses multiple edge selectors"),!1;1===j.edgeCount&&ge("The selector `"+c+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},toString:function(){if(null!=this.toStringCache)return this.toStringCache;for(var c=function(j){return j??""},d=function(j){return Fe(j)?'"'+j+'"':c(j)},m=function(j){return" "+j+" "},C=function(j,Z){return j.checks.reduce(function(he,me,ye){return he+(Z===j&&0===ye?"$":"")+function(j,Z){var me=j.value;switch(j.type){case 0:var ye=c(me);return ye.substring(0,ye.length-1);case 3:return"["+j.field+m(c(j.operator))+d(me)+"]";case 5:var ct=j.field;return"["+c(j.operator)+ct+"]";case 4:return"["+j.field+"]";case 6:return"[["+j.field+m(c(j.operator))+d(me)+"]]";case 7:return me;case 8:return"#"+me;case 9:return"."+me;case 17:case 15:return C(j.parent,Z)+m(">")+C(j.child,Z);case 18:case 16:return C(j.ancestor,Z)+" "+C(j.descendant,Z);case 19:var Wt=C(j.left,Z),It=C(j.subject,Z),jt=C(j.right,Z);return Wt+(Wt.length>0?" ":"")+It+jt;case 20:return""}}(me,Z)},"")},A="",E=0;E<this.length;E++){var N=this[E];A+=C(N,N.subject),this.length>1&&E<this.length-1&&(A+=", ")}return this.toStringCache=A,A}},bi=function(c,d,m){var _,N,R,C=Fe(c),A=Ne(c),E=Fe(m),j=!1,Z=!1,he=!1;switch(d.indexOf("!")>=0&&(d=d.replace("!",""),Z=!0),d.indexOf("@")>=0&&(d=d.replace("@",""),j=!0),(C||E||j)&&(N=C||A?""+c:"",R=""+m),j&&(c=N=N.toLowerCase(),m=R=R.toLowerCase()),d){case"*=":_=N.indexOf(R)>=0;break;case"$=":_=N.indexOf(R,N.length-R.length)>=0;break;case"^=":_=0===N.indexOf(R);break;case"=":_=c===m;break;case">":he=!0,_=c>m;break;case">=":he=!0,_=c>=m;break;case"<":he=!0,_=c<m;break;case"<=":he=!0,_=c<=m;break;default:_=!1}return Z&&(null!=c||!he)&&(_=!_),_},Rt=function(c,d){return c.data(d)},No=[],Mo=function(c,d){return c.checks.every(function(m){return No[m.type](m,d)})};No[0]=function(f,c){var d=f.value;return"*"===d||d===c.group()},No[7]=function(f,c){return function(c,d){return Xr[c](d)}(f.value,c)},No[8]=function(f,c){var d=f.value;return c.id()===d},No[9]=function(f,c){return c.hasClass(f.value)},No[6]=function(f,c){var m=f.operator,_=f.value;return bi(function(c,d){return c[d]()}(c,f.field),m,_)},No[3]=function(f,c){var m=f.operator,_=f.value;return bi(Rt(c,f.field),m,_)},No[5]=function(f,c){var m=f.operator;return function(c,d){switch(d){case"?":return!!c;case"!":return!c;case"^":return void 0===c}}(Rt(c,f.field),m)},No[4]=function(f,c){return function(c){return void 0!==c}(Rt(c,f.field))},No[10]=function(f,c){var d=f.nodes[0],m=f.nodes[1],_=c.source(),C=c.target();return Mo(d,_)&&Mo(m,C)||Mo(m,_)&&Mo(d,C)},No[14]=function(f,c){return Mo(f.node,c)&&c.neighborhood().some(function(d){return d.isNode()&&Mo(f.neighbor,d)})},No[11]=function(f,c){return Mo(f.source,c.source())&&Mo(f.target,c.target())},No[12]=function(f,c){return Mo(f.source,c)&&c.outgoers().some(function(d){return d.isNode()&&Mo(f.target,d)})},No[13]=function(f,c){return Mo(f.target,c)&&c.incomers().some(function(d){return d.isNode()&&Mo(f.source,d)})},No[15]=function(f,c){return Mo(f.child,c)&&Mo(f.parent,c.parent())},No[17]=function(f,c){return Mo(f.parent,c)&&c.children().some(function(d){return Mo(f.child,d)})},No[16]=function(f,c){return Mo(f.descendant,c)&&c.ancestors().some(function(d){return Mo(f.ancestor,d)})},No[18]=function(f,c){return Mo(f.ancestor,c)&&c.descendants().some(function(d){return Mo(f.descendant,d)})},No[19]=function(f,c){return Mo(f.subject,c)&&Mo(f.left,c)&&Mo(f.right,c)},No[20]=function(){return!0},No[1]=function(f,c){return f.value.has(c)},No[2]=function(f,c){return(0,f.value)(c)};var qp={matches:function(c){for(var m=0;m<this.length;m++)if(Mo(this[m],c))return!0;return!1},filter:function(c){var d=this;if(1===d.length&&1===d[0].checks.length&&8===d[0].checks[0].type)return c.getElementById(d[0].checks[0].value).collection();var m=function(C){for(var A=0;A<d.length;A++)if(Mo(d[A],C))return!0;return!1};return null==d.text()&&(m=function(){return!0}),c.filter(m)}},op=function(c){this.inputText=c,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,null==c||Fe(c)&&c.match(/^\s*$/)||(Ge(c)?this.addQuery({checks:[{type:1,value:c.collection()}]}):Ye(c)?this.addQuery({checks:[{type:2,value:c}]}):Fe(c)?this.parse(c)||(this.invalid=!0):pt("A selector must be created from a string; found "))},Cr=op.prototype;[eu,qp].forEach(function(f){return sr(Cr,f)}),Cr.text=function(){return this.inputText},Cr.size=function(){return this.length},Cr.eq=function(f){return this[f]},Cr.sameText=function(f){return!this.invalid&&!f.invalid&&this.text()===f.text()},Cr.addQuery=function(f){this[this.length++]=f},Cr.selector=Cr.toString;var Fl={allAre:function(c){var d=new op(c);return this.every(function(m){return d.matches(m)})},is:function(c){var d=new op(c);return this.some(function(m){return d.matches(m)})},some:function(c,d){for(var m=0;m<this.length;m++)if(d?c.apply(d,[this[m],m,this]):c(this[m],m,this))return!0;return!1},every:function(c,d){for(var m=0;m<this.length;m++)if(!(d?c.apply(d,[this[m],m,this]):c(this[m],m,this)))return!1;return!0},same:function(c){if(this===c)return!0;c=this.cy().collection(c);var d=this.length;return d===c.length&&(1===d?this[0]===c[0]:this.every(function(_){return c.hasElementWithId(_.id())}))},anySame:function(c){return c=this.cy().collection(c),this.some(function(d){return c.hasElementWithId(d.id())})},allAreNeighbors:function(c){c=this.cy().collection(c);var d=this.neighborhood();return c.every(function(m){return d.hasElementWithId(m.id())})},contains:function(c){c=this.cy().collection(c);var d=this;return c.every(function(m){return d.hasElementWithId(m.id())})}};Fl.allAreNeighbours=Fl.allAreNeighbors,Fl.has=Fl.contains,Fl.equal=Fl.equals=Fl.same;var Bd,ap,Ca=function(c,d){return function(_,C,A,E){var j,N=_,R=this;if(null==N?j="":Ge(N)&&1===N.length&&(j=N.id()),1===R.length&&j){var Z=R[0]._private,he=Z.traversalCache=Z.traversalCache||{},me=he[d]=he[d]||[],ye=xc(j);return me[ye]||(me[ye]=c.call(R,_,C,A,E))}return c.call(R,_,C,A,E)}},Bo={parent:function(c){var d=[];if(1===this.length){var m=this[0]._private.parent;if(m)return m}for(var _=0;_<this.length;_++){var A=this[_]._private.parent;A&&d.push(A)}return this.spawn(d,!0).filter(c)},parents:function(c){for(var d=[],m=this.parent();m.nonempty();){for(var _=0;_<m.length;_++)d.push(m[_]);m=m.parent()}return this.spawn(d,!0).filter(c)},commonAncestors:function(c){for(var d,m=0;m<this.length;m++){var C=this[m].parents();d=(d=d||C).intersect(C)}return d.filter(c)},orphans:function(c){return this.stdFilter(function(d){return d.isOrphan()}).filter(c)},nonorphans:function(c){return this.stdFilter(function(d){return d.isChild()}).filter(c)},children:Ca(function(f){for(var c=[],d=0;d<this.length;d++)for(var _=this[d]._private.children,C=0;C<_.length;C++)c.push(_[C]);return this.spawn(c,!0).filter(f)},"children"),siblings:function(c){return this.parent().children().not(this).filter(c)},isParent:function(){var c=this[0];if(c)return c.isNode()&&0!==c._private.children.length},isChildless:function(){var c=this[0];if(c)return c.isNode()&&0===c._private.children.length},isChild:function(){var c=this[0];if(c)return c.isNode()&&null!=c._private.parent},isOrphan:function(){var c=this[0];if(c)return c.isNode()&&null==c._private.parent},descendants:function(c){var d=[];return function m(_){for(var C=0;C<_.length;C++){var A=_[C];d.push(A),A.children().nonempty()&&m(A.children())}}(this.children()),this.spawn(d,!0).filter(c)}};function Va(f,c,d,m){for(var _=[],C=new fs,E=f.cy().hasCompoundNodes(),N=0;N<f.length;N++){var R=f[N];d?_.push(R):E&&m(_,C,R)}for(;_.length>0;){var j=_.shift();c(j),C.add(j.id()),E&&m(_,C,j)}return f}function gr(f,c,d){if(d.isParent())for(var m=d._private.children,_=0;_<m.length;_++){var C=m[_];c.has(C.id())||f.push(C)}}function Oh(f,c,d){if(d.isChild()){var m=d._private.parent;c.has(m.id())||f.push(m)}}function vl(f,c,d){Oh(f,c,d),gr(f,c,d)}Bo.forEachDown=function(f){var c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Va(this,f,c,gr)},Bo.forEachUp=function(f){var c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Va(this,f,c,Oh)},Bo.forEachUpAndDown=function(f){var c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Va(this,f,c,vl)},Bo.ancestors=Bo.parents,Bd=ap={data:ys.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:ys.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:ys.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:ys.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:ys.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:ys.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var c=this[0];if(c)return c._private.data.id}},Bd.attr=Bd.data,Bd.removeAttr=Bd.removeData;var zd=ap,Cf={};function Bu(f){return function(c){var d=this;if(void 0===c&&(c=!0),0===d.length);else if(d.isNode()&&!d.removed()){for(var m=0,_=d[0],C=_._private.edges,A=0;A<C.length;A++){var E=C[A];!c&&E.isLoop()||(m+=f(_,E))}return m}}}function os(f,c){return function(d){for(var m,_=this.nodes(),C=0;C<_.length;C++){var E=_[C][f](d);void 0!==E&&(void 0===m||c(E,m))&&(m=E)}return m}}sr(Cf,{degree:Bu(function(f,c){return c.source().same(c.target())?2:1}),indegree:Bu(function(f,c){return c.target().same(f)?1:0}),outdegree:Bu(function(f,c){return c.source().same(f)?1:0})}),sr(Cf,{minDegree:os("degree",function(f,c){return f<c}),maxDegree:os("degree",function(f,c){return f>c}),minIndegree:os("indegree",function(f,c){return f<c}),maxIndegree:os("indegree",function(f,c){return f>c}),minOutdegree:os("outdegree",function(f,c){return f<c}),maxOutdegree:os("outdegree",function(f,c){return f>c})}),sr(Cf,{totalDegree:function(c){for(var d=0,m=this.nodes(),_=0;_<m.length;_++)d+=m[_].degree(c);return d}});var Pc,Hg,Ms=function(c,d,m){for(var _=0;_<c.length;_++){var C=c[_];if(!C.locked()){var A=C._private.position,E={x:null!=d.x?d.x-A.x:0,y:null!=d.y?d.y-A.y:0};C.isParent()&&!(0===E.x&&0===E.y)&&C.children().shift(E,m),C.dirtyBoundingBoxCache()}}},Dv={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(c){c.updateCompoundBounds()},beforeSet:function(c,d){Ms(c,d,!1)},onSet:function(c){c.dirtyCompoundBoundsCache()},canSet:function(c){return!c.locked()}};Pc=Hg={position:ys.data(Dv),silentPosition:ys.data(sr({},Dv,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(c,d){Ms(c,d,!0)},onSet:function(c){c.dirtyCompoundBoundsCache()}})),positions:function(c,d){if(vt(c))d?this.silentPosition(c):this.position(c);else if(Ye(c)){var m=c,_=this.cy();_.startBatch();for(var C=0;C<this.length;C++){var E,A=this[C];(E=m(A,C))&&(d?A.silentPosition(E):A.position(E))}_.endBatch()}return this},silentPositions:function(c){return this.positions(c,!0)},shift:function(c,d,m){var _;if(vt(c)?(_={x:Ne(c.x)?c.x:0,y:Ne(c.y)?c.y:0},m=d):Fe(c)&&Ne(d)&&((_={x:0,y:0})[c]=d),null!=_){var C=this.cy();C.startBatch();for(var A=0;A<this.length;A++){var E=this[A];if(!(C.hasCompoundNodes()&&E.isChild()&&E.ancestors().anySame(this))){var N=E.position(),R={x:N.x+_.x,y:N.y+_.y};m?E.silentPosition(R):E.position(R)}}C.endBatch()}return this},silentShift:function(c,d){return vt(c)?this.shift(c,!0):Fe(c)&&Ne(d)&&this.shift(c,d,!0),this},renderedPosition:function(c,d){var m=this[0],_=this.cy(),C=_.zoom(),A=_.pan(),E=vt(c)?c:void 0,N=void 0!==E||void 0!==d&&Fe(c);if(m&&m.isNode()){if(!N){var Z=m.position();return E=Yo(Z,C,A),void 0===c?E:E[c]}for(var R=0;R<this.length;R++){var j=this[R];void 0!==d?j.position(c,(d-A[c])/C):void 0!==E&&j.position(Sc(E,C,A))}}else if(!N)return;return this},relativePosition:function(c,d){var m=this[0],_=this.cy(),C=vt(c)?c:void 0,A=void 0!==C||void 0!==d&&Fe(c),E=_.hasCompoundNodes();if(m&&m.isNode()){if(!A){var ye=m.position(),De=E?m.parent():null,je=De&&De.length>0;je&&(De=De[0]);var ct=je?De.position():{x:0,y:0};return C={x:ye.x-ct.x,y:ye.y-ct.y},void 0===c?C:C[c]}for(var N=0;N<this.length;N++){var R=this[N],j=E?R.parent():null,Z=j&&j.length>0;Z&&(j=j[0]);var me=Z?j.position():{x:0,y:0};void 0!==d?R.position(c,d+me[c]):void 0!==C&&R.position({x:C.x+me.x,y:C.y+me.y})}}else if(!A)return;return this}},Pc.modelPosition=Pc.point=Pc.position,Pc.modelPositions=Pc.points=Pc.positions,Pc.renderedPoint=Pc.renderedPosition,Pc.relativePoint=Pc.relativePosition;var Dr,wa,Gg=Hg;Dr=wa={},wa.renderedBoundingBox=function(f){var c=this.boundingBox(f),d=this.cy(),m=d.zoom(),_=d.pan(),C=c.x1*m+_.x,A=c.x2*m+_.x,E=c.y1*m+_.y,N=c.y2*m+_.y;return{x1:C,x2:A,y1:E,y2:N,w:A-C,h:N-E}},wa.dirtyCompoundBoundsCache=function(){var f=arguments.length>0&&void 0!==arguments[0]&&arguments[0],c=this.cy();return c.styleEnabled()&&c.hasCompoundNodes()?(this.forEachUp(function(d){if(d.isParent()){var m=d._private;m.compoundBoundsClean=!1,m.bbCache=null,f||d.emitAndNotify("bounds")}}),this):this},wa.updateCompoundBounds=function(){var f=arguments.length>0&&void 0!==arguments[0]&&arguments[0],c=this.cy();if(!c.styleEnabled()||!c.hasCompoundNodes())return this;if(!f&&c.batching())return this;function d(A){if(A.isParent()){var E=A._private,N=A.children(),R="include"===A.pstyle("compound-sizing-wrt-labels").value,j={width:{val:A.pstyle("min-width").pfValue,left:A.pstyle("min-width-bias-left"),right:A.pstyle("min-width-bias-right")},height:{val:A.pstyle("min-height").pfValue,top:A.pstyle("min-height-bias-top"),bottom:A.pstyle("min-height-bias-bottom")}},Z=N.boundingBox({includeLabels:R,includeOverlays:!1,useCache:!1}),he=E.position;(0===Z.w||0===Z.h)&&((Z={w:A.pstyle("width").pfValue,h:A.pstyle("height").pfValue}).x1=he.x-Z.w/2,Z.x2=he.x+Z.w/2,Z.y1=he.y-Z.h/2,Z.y2=he.y+Z.h/2);var De=j.width.left.value;"px"===j.width.left.units&&j.width.val>0&&(De=100*De/j.width.val);var je=j.width.right.value;"px"===j.width.right.units&&j.width.val>0&&(je=100*je/j.width.val);var qe=j.height.top.value;"px"===j.height.top.units&&j.height.val>0&&(qe=100*qe/j.height.val);var ct=j.height.bottom.value;"px"===j.height.bottom.units&&j.height.val>0&&(ct=100*ct/j.height.val);var nt=me(j.width.val-Z.w,De,je),Ct=nt.biasDiff,Gt=nt.biasComplementDiff,Wt=me(j.height.val-Z.h,qe,ct),It=Wt.biasDiff,jt=Wt.biasComplementDiff;E.autoPadding=function ye(Dt,Zt,Kt,ut){if("%"!==Kt.units)return"px"===Kt.units?Kt.pfValue:0;switch(ut){case"width":return Dt>0?Kt.pfValue*Dt:0;case"height":return Zt>0?Kt.pfValue*Zt:0;case"average":return Dt>0&&Zt>0?Kt.pfValue*(Dt+Zt)/2:0;case"min":return Dt>0&&Zt>0?Dt>Zt?Kt.pfValue*Zt:Kt.pfValue*Dt:0;case"max":return Dt>0&&Zt>0?Dt>Zt?Kt.pfValue*Dt:Kt.pfValue*Zt:0;default:return 0}}(Z.w,Z.h,A.pstyle("padding"),A.pstyle("padding-relative-to").value),E.autoWidth=Math.max(Z.w,j.width.val),he.x=(-Ct+Z.x1+Z.x2+Gt)/2,E.autoHeight=Math.max(Z.h,j.height.val),he.y=(-It+Z.y1+Z.y2+jt)/2}function me(Dt,Zt,Kt){var ut=0,Qt=0,Vt=Zt+Kt;return Dt>0&&Vt>0&&(ut=Zt/Vt*Dt,Qt=Kt/Vt*Dt),{biasDiff:ut,biasComplementDiff:Qt}}}for(var m=0;m<this.length;m++){var _=this[m],C=_._private;(!C.compoundBoundsClean||f)&&(d(_),c.batching()||(C.compoundBoundsClean=!0))}return this};var Nl=function(c){return c===1/0||c===-1/0?0:c},oa=function(c,d,m,_,C){_-d==0||C-m==0||null==d||null==m||null==_||null==C||(c.x1=d<c.x1?d:c.x1,c.x2=_>c.x2?_:c.x2,c.y1=m<c.y1?m:c.y1,c.y2=C>c.y2?C:c.y2,c.w=c.x2-c.x1,c.h=c.y2-c.y1)},Ua=function(c,d){return null==d?c:oa(c,d.x1,d.y1,d.x2,d.y2)},xl=function(c,d,m){return ur(c,d,m)},Vd=function(c,d,m){if(!d.cy().headless()){var N,R,_=d._private,C=_.rstyle,A=C.arrowWidth/2;if("none"!==d.pstyle(m+"-arrow-shape").value){"source"===m?(N=C.srcX,R=C.srcY):"target"===m?(N=C.tgtX,R=C.tgtY):(N=C.midX,R=C.midY);var j=_.arrowBounds=_.arrowBounds||{},Z=j[m]=j[m]||{};Z.x1=N-A,Z.y1=R-A,Z.x2=N+A,Z.y2=R+A,Z.w=Z.x2-Z.x1,Z.h=Z.y2-Z.y1,qf(Z,1),oa(c,Z.x1,Z.y1,Z.x2,Z.y2)}}},hc=function(c,d,m){if(!d.cy().headless()){var _,C=d._private,A=C.rstyle;if(d.pstyle((_=m?m+"-":"")+"label").strValue){var Kt,ut,Qt,Vt,N=d.pstyle("text-halign"),R=d.pstyle("text-valign"),j=xl(A,"labelWidth",m),Z=xl(A,"labelHeight",m),he=xl(A,"labelX",m),me=xl(A,"labelY",m),ye=d.pstyle(_+"text-margin-x").pfValue,De=d.pstyle(_+"text-margin-y").pfValue,je=d.isEdge(),qe=d.pstyle(_+"text-rotation"),ct=d.pstyle("text-outline-width").pfValue,Ct=d.pstyle("text-border-width").pfValue/2,Gt=d.pstyle("text-background-padding").pfValue,It=Z,jt=j,Dt=jt/2,Zt=It/2;if(je)Kt=he-Dt,ut=he+Dt,Qt=me-Zt,Vt=me+Zt;else{switch(N.value){case"left":Kt=he-jt,ut=he;break;case"center":Kt=he-Dt,ut=he+Dt;break;case"right":Kt=he,ut=he+jt}switch(R.value){case"top":Qt=me-It,Vt=me;break;case"center":Qt=me-Zt,Vt=me+Zt;break;case"bottom":Qt=me,Vt=me+It}}Kt+=ye-Math.max(ct,Ct)-Gt-2,ut+=ye+Math.max(ct,Ct)+Gt+2,Qt+=De-Math.max(ct,Ct)-Gt-2,Vt+=De+Math.max(ct,Ct)+Gt+2;var An=m||"main",sn=C.labelBounds,pn=sn[An]=sn[An]||{};pn.x1=Kt,pn.y1=Qt,pn.x2=ut,pn.y2=Vt,pn.w=ut-Kt,pn.h=Vt-Qt;var Mn=je&&"autorotate"===qe.strValue;if(Mn||null!=qe.pfValue&&0!==qe.pfValue){var ti=Mn?xl(C.rstyle,"labelAngle",m):qe.pfValue,Dn=Math.cos(ti),Zn=Math.sin(ti),hi=(Kt+ut)/2,xi=(Qt+Vt)/2;if(!je){switch(N.value){case"left":hi=ut;break;case"right":hi=Kt}switch(R.value){case"top":xi=Vt;break;case"bottom":xi=Qt}}var mi=function(Zr,mr){return{x:(Zr-=hi)*Dn-(mr-=xi)*Zn+hi,y:Zr*Zn+mr*Dn+xi}},fi=mi(Kt,Qt),Pn=mi(Kt,Vt),ai=mi(ut,Qt),Si=mi(ut,Vt);Kt=Math.min(fi.x,Pn.x,ai.x,Si.x),ut=Math.max(fi.x,Pn.x,ai.x,Si.x),Qt=Math.min(fi.y,Pn.y,ai.y,Si.y),Vt=Math.max(fi.y,Pn.y,ai.y,Si.y)}var Qi=An+"Rot",lr=sn[Qi]=sn[Qi]||{};lr.x1=Kt,lr.y1=Qt,lr.x2=ut,lr.y2=Vt,lr.w=ut-Kt,lr.h=Vt-Qt,oa(c,Kt,Qt,ut,Vt),oa(C.labelBounds.all,Kt,Qt,ut,Vt)}return c}},Ha=function(c){var d=0,m=function(A){return(A?1:0)<<d++},_=0;return _+=m(c.incudeNodes),_+=m(c.includeEdges),_+=m(c.includeLabels),_+=m(c.includeMainLabels),_+=m(c.includeSourceLabels),(_+=m(c.includeTargetLabels))+m(c.includeOverlays)},Lv=function(c){if(c.isEdge()){var d=c.source().position(),m=c.target().position(),_=function(A){return Math.round(A)};return function(c,d){var m={value:0,done:!1},_=0,C=c.length;return ff({next:function(){return _<C?m.value=c[_++]:m.done=!0,m}},void 0)}([_(d.x),_(d.y),_(m.x),_(m.y)])}return 0},Pv=function(c,d){var _,m=c._private,C=c.isEdge(),E=(null==d?jg:Ha(d))===jg,N=Lv(c),R=m.bbCachePosKey===N,j=d.useCache&&R,Z=function(De){return null==De._private.bbCache||De._private.styleDirty};if(!j||Z(c)||C&&Z(c.source())||Z(c.target())?(R||c.recalculateRenderedStyle(j),_=function(c,d){var j,Z,he,me,ye,De,m=c._private.cy,_=m.styleEnabled(),C=m.headless(),A=Tc(),E=c._private,N=c.isNode(),R=c.isEdge(),je=E.rstyle,qe=N&&_?c.pstyle("bounds-expansion").pfValue:[0],ct=function(Yr){return"none"!==Yr.pstyle("display").value},nt=!_||ct(c)&&(!R||ct(c.source())&&ct(c.target()));if(nt){var Gt=0;_&&d.includeOverlays&&0!==c.pstyle("overlay-opacity").value&&(Gt=c.pstyle("overlay-padding").value);var It=0;_&&d.includeUnderlays&&0!==c.pstyle("underlay-opacity").value&&(It=c.pstyle("underlay-padding").value);var jt=Math.max(Gt,It),Zt=0;if(_&&(Zt=c.pstyle("width").pfValue/2),N&&d.includeNodes){var Kt=c.position();ye=Kt.x,De=Kt.y;var Qt=c.outerWidth()/2,An=c.outerHeight()/2;oa(A,j=ye-Qt,he=De-An,Z=ye+Qt,me=De+An)}else if(R&&d.includeEdges)if(_&&!C){var sn=c.pstyle("curve-style").strValue;if(j=Math.min(je.srcX,je.midX,je.tgtX),Z=Math.max(je.srcX,je.midX,je.tgtX),he=Math.min(je.srcY,je.midY,je.tgtY),me=Math.max(je.srcY,je.midY,je.tgtY),oa(A,j-=Zt,he-=Zt,Z+=Zt,me+=Zt),"haystack"===sn){var pn=je.haystackPts;if(pn&&2===pn.length){if((j=pn[0].x)>(Z=pn[1].x)){var Mn=j;j=Z,Z=Mn}if((he=pn[0].y)>(me=pn[1].y)){var kn=he;he=me,me=kn}oa(A,j-Zt,he-Zt,Z+Zt,me+Zt)}}else if("bezier"===sn||"unbundled-bezier"===sn||"segments"===sn||"taxi"===sn){var ti;switch(sn){case"bezier":case"unbundled-bezier":ti=je.bezierPts;break;case"segments":case"taxi":ti=je.linePts}if(null!=ti)for(var Dn=0;Dn<ti.length;Dn++){var Zn=ti[Dn];oa(A,j=Zn.x-Zt,he=Zn.y-Zt,Z=Zn.x+Zt,me=Zn.y+Zt)}}}else{var xi=c.source().position(),fi=c.target().position();if((j=xi.x)>(Z=fi.x)){var Pn=j;j=Z,Z=Pn}if((he=xi.y)>(me=fi.y)){var ai=he;he=me,me=ai}oa(A,j-=Zt,he-=Zt,Z+=Zt,me+=Zt)}if(_&&d.includeEdges&&R&&(Vd(A,c,"mid-source"),Vd(A,c,"mid-target"),Vd(A,c,"source"),Vd(A,c,"target")),_&&"yes"===c.pstyle("ghost").value){var Qi=c.pstyle("ghost-offset-x").pfValue,lr=c.pstyle("ghost-offset-y").pfValue;oa(A,A.x1+Qi,A.y1+lr,A.x2+Qi,A.y2+lr)}var Hr=E.bodyBounds=E.bodyBounds||{};wm(Hr,A),Up(Hr,qe),qf(Hr,1),_&&oa(A,(j=A.x1)-jt,(he=A.y1)-jt,(Z=A.x2)+jt,(me=A.y2)+jt);var Zr=E.overlayBounds=E.overlayBounds||{};wm(Zr,A),Up(Zr,qe),qf(Zr,1);var mr=E.labelBounds=E.labelBounds||{};null!=mr.all?function(c){c.x1=1/0,c.y1=1/0,c.x2=-1/0,c.y2=-1/0,c.w=0,c.h=0}(mr.all):mr.all=Tc(),_&&d.includeLabels&&(d.includeMainLabels&&hc(A,c,null),R&&(d.includeSourceLabels&&hc(A,c,"source"),d.includeTargetLabels&&hc(A,c,"target")))}return A.x1=Nl(A.x1),A.y1=Nl(A.y1),A.x2=Nl(A.x2),A.y2=Nl(A.y2),A.w=Nl(A.x2-A.x1),A.h=Nl(A.y2-A.y1),A.w>0&&A.h>0&&nt&&(Up(A,qe),qf(A,1)),A}(c,Wg),m.bbCache=_,m.bbCachePosKey=N):_=m.bbCache,!E){var me=c.isNode();_=Tc(),(d.includeNodes&&me||d.includeEdges&&!me)&&Ua(_,d.includeOverlays?m.overlayBounds:m.bodyBounds),d.includeLabels&&(d.includeMainLabels&&(!C||d.includeSourceLabels&&d.includeTargetLabels)?Ua(_,m.labelBounds.all):(d.includeMainLabels&&Ua(_,m.labelBounds.mainRot),d.includeSourceLabels&&Ua(_,m.labelBounds.sourceRot),d.includeTargetLabels&&Ua(_,m.labelBounds.targetRot))),_.w=_.x2-_.x1,_.h=_.y2-_.y1}return _},Wg={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,useCache:!0},jg=Ha(Wg),Af=si(Wg);wa.boundingBox=function(f){var c;if(1!==this.length||null==this[0]._private.bbCache||this[0]._private.styleDirty||void 0!==f&&void 0!==f.useCache&&!0!==f.useCache){c=Tc();var d=Af(f=f||Wg),m=this;if(m.cy().styleEnabled())for(var A=0;A<m.length;A++){var E=m[A],N=E._private,R=Lv(E);E.recalculateRenderedStyle(d.useCache&&N.bbCachePosKey===R&&!N.styleDirty)}this.updateCompoundBounds(!f.useCache);for(var he=0;he<m.length;he++)Ua(c,Pv(m[he],d))}else f=void 0===f?Wg:Af(f),c=Pv(this[0],f);return c.x1=Nl(c.x1),c.y1=Nl(c.y1),c.x2=Nl(c.x2),c.y2=Nl(c.y2),c.w=Nl(c.x2-c.x1),c.h=Nl(c.y2-c.y1),c},wa.dirtyBoundingBoxCache=function(){for(var f=0;f<this.length;f++){var c=this[f]._private;c.bbCache=null,c.bbCachePosKey=null,c.bodyBounds=null,c.overlayBounds=null,c.labelBounds.all=null,c.labelBounds.source=null,c.labelBounds.target=null,c.labelBounds.main=null,c.labelBounds.sourceRot=null,c.labelBounds.targetRot=null,c.labelBounds.mainRot=null,c.arrowBounds.source=null,c.arrowBounds.target=null,c.arrowBounds["mid-source"]=null,c.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this},wa.boundingBoxAt=function(f){var c=this.nodes(),d=this.cy(),m=d.hasCompoundNodes(),_=d.collection();if(m&&(_=c.filter(function(R){return R.isParent()}),c=c.not(_)),vt(f)){var C=f;f=function(){return C}}d.startBatch(),c.forEach(function(j,Z){return j._private.bbAtOldPos=f(j,Z)}).silentPositions(f),m&&(_.dirtyCompoundBoundsCache(),_.dirtyBoundingBoxCache(),_.updateCompoundBounds(!0));var N=function(c){return{x1:c.x1,x2:c.x2,w:c.w,y1:c.y1,y2:c.y2,h:c.h}}(this.boundingBox({useCache:!1}));return c.silentPositions(function(j){return j._private.bbAtOldPos}),m&&(_.dirtyCompoundBoundsCache(),_.dirtyBoundingBoxCache(),_.updateCompoundBounds(!0)),d.endBatch(),N},Dr.boundingbox=Dr.bb=Dr.boundingBox,Dr.renderedBoundingbox=Dr.renderedBoundingBox;var xf,Ud,Pm=wa;xf=Ud={};var $g=function(c){c.uppercaseName=Le(c.name),c.autoName="auto"+c.uppercaseName,c.labelName="label"+c.uppercaseName,c.outerName="outer"+c.uppercaseName,c.uppercaseOuterName=Le(c.outerName),xf[c.name]=function(){var m=this[0],_=m._private;if(m){if(_.cy._private.styleEnabled){if(m.isParent())return m.updateCompoundBounds(),_[c.autoName]||0;var E=m.pstyle(c.name);return"label"===E.strValue?(m.recalculateRenderedStyle(),_.rstyle[c.labelName]||0):E.pfValue}return 1}},xf["outer"+c.uppercaseName]=function(){var m=this[0];if(m)return m._private.cy._private.styleEnabled?m[c.name]()+m.pstyle("border-width").pfValue+2*m.padding():1},xf["rendered"+c.uppercaseName]=function(){var m=this[0];if(m)return m[c.name]()*this.cy().zoom()},xf["rendered"+c.uppercaseOuterName]=function(){var m=this[0];if(m)return m[c.outerName]()*this.cy().zoom()}};$g({name:"width"}),$g({name:"height"}),Ud.padding=function(){var f=this[0],c=f._private;return f.isParent()?(f.updateCompoundBounds(),void 0!==c.autoPadding?c.autoPadding:f.pstyle("padding").pfValue):f.pstyle("padding").pfValue},Ud.paddedHeight=function(){var f=this[0];return f.height()+2*f.padding()},Ud.paddedWidth=function(){var f=this[0];return f.width()+2*f.padding()};var Fh=Ud,Rv={controlPoints:{get:function(c){return c.renderer().getControlPoints(c)},mult:!0},segmentPoints:{get:function(c){return c.renderer().getSegmentPoints(c)},mult:!0},sourceEndpoint:{get:function(c){return c.renderer().getSourceEndpoint(c)}},targetEndpoint:{get:function(c){return c.renderer().getTargetEndpoint(c)}},midpoint:{get:function(c){return c.renderer().getEdgeMidpoint(c)}}},kv=Object.keys(Rv).reduce(function(f,c){var d=Rv[c],m=function(c){return"rendered"+c[0].toUpperCase()+c.substr(1)}(c);return f[c]=function(){return function(c,d){if(c.isEdge())return d(c)}(this,d.get)},f[m]=d.mult?function(){return function(c,d){if(c.isEdge()){var m=c.cy(),_=m.pan(),C=m.zoom();return d(c).map(function(A){return Yo(A,C,_)})}}(this,d.get)}:function(){return function(c,d){if(c.isEdge()){var m=c.cy();return Yo(d(c),m.zoom(),m.pan())}}(this,d.get)},f},{}),gb=sr({},Gg,Pm,Fh,kv),Yp=function(c,d){this.recycle(c,d)};function ll(){return!1}function Gd(){return!0}Yp.prototype={instanceString:function(){return"event"},recycle:function(c,d){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=ll,null!=c&&c.preventDefault?(this.type=c.type,this.isDefaultPrevented=c.defaultPrevented?Gd:ll):null!=c&&c.type?d=c:this.type=c,null!=d&&(this.originalEvent=d.originalEvent,this.type=null!=d.type?d.type:this.type,this.cy=d.cy,this.target=d.target,this.position=d.position,this.renderedPosition=d.renderedPosition,this.namespace=d.namespace,this.layout=d.layout),null!=this.cy&&null!=this.position&&null==this.renderedPosition){var m=this.position,_=this.cy.zoom(),C=this.cy.pan();this.renderedPosition={x:m.x*_+C.x,y:m.y*_+C.y}}this.timeStamp=c&&c.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=Gd;var c=this.originalEvent;!c||c.preventDefault&&c.preventDefault()},stopPropagation:function(){this.isPropagationStopped=Gd;var c=this.originalEvent;!c||c.stopPropagation&&c.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Gd,this.stopPropagation()},isDefaultPrevented:ll,isPropagationStopped:ll,isImmediatePropagationStopped:ll};var Nh=/^([^.]+)(\.(?:[^.]+))?$/,Bh={qualifierCompare:function(c,d){return c===d},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(c){return c},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},dh=Object.keys(Bh),zu={};function mu(){for(var f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zu,c=arguments.length>1?arguments[1]:void 0,d=0;d<dh.length;d++){var m=dh[d];this[m]=f[m]||Bh[m]}this.context=c||this.context,this.listeners=[],this.emitting=0}var aa=mu.prototype,ld=function(c,d,m,_,C,A,E){Ye(_)&&(C=_,_=null),E&&(A=null==A?E:sr({},A,E));for(var N=lt(m)?m:m.split(/\s+/),R=0;R<N.length;R++){var j=N[R];if(!fe(j)){var Z=j.match(Nh);if(Z&&!1===d(c,j,Z[1],Z[2]?Z[2]:null,_,C,A))break}}},Rm=function(c,d){return c.addEventFields(c.context,d),new Yp(d.type,d)};aa.on=aa.addListener=function(f,c,d,m,_){return ld(this,function(C,A,E,N,R,j,Z){Ye(j)&&C.listeners.push({event:A,callback:j,type:E,namespace:N,qualifier:R,conf:Z})},f,c,d,m,_),this},aa.one=function(f,c,d,m){return this.on(f,c,d,m,{one:!0})},aa.removeListener=aa.off=function(f,c,d,m){var _=this;0!==this.emitting&&(this.listeners=function(c){return c.slice()}(this.listeners));for(var C=this.listeners,A=function(R){var j=C[R];ld(_,function(Z,he,me,ye,De,je){if((j.type===me||"*"===f)&&(!ye&&".*"!==j.namespace||j.namespace===ye)&&(!De||Z.qualifierCompare(j.qualifier,De))&&(!je||j.callback===je))return C.splice(R,1),!1},f,c,d,m)},E=C.length-1;E>=0;E--)A(E);return this},aa.removeAllListeners=function(){return this.removeListener("*")},aa.emit=aa.trigger=function(f,c,d){var m=this.listeners,_=m.length;return this.emitting++,lt(c)||(c=[c]),function(c,d,m){if(function(c){return"event"===ot(c)}(m))d(c,m);else if(vt(m))d(c,Rm(c,m));else for(var _=lt(m)?m:m.split(/\s+/),C=0;C<_.length;C++){var A=_[C];if(!fe(A)){var E=A.match(Nh);E&&d(c,Rm(c,{type:E[1],namespace:E[2]?E[2]:null,target:c.context}))}}}(this,function(C,A){null!=d&&(_=(m=[{event:A.event,type:A.type,namespace:A.namespace,callback:d}]).length);for(var E=function(j){var Z=m[j];if(Z.type===A.type&&(!Z.namespace||Z.namespace===A.namespace||".*"===Z.namespace)&&C.eventMatches(C.context,Z,A)){var he=[A];null!=c&&function(c,d){for(var m=0;m<d.length;m++)c.push(d[m])}(he,c),C.beforeEmit(C.context,Z,A),Z.conf&&Z.conf.one&&(C.listeners=C.listeners.filter(function(De){return De!==Z}));var me=C.callbackContext(C.context,Z,A),ye=Z.callback.apply(me,he);C.afterEmit(C.context,Z,A),!1===ye&&(A.stopPropagation(),A.preventDefault())}},N=0;N<_;N++)E(N);C.bubble(C.context)&&!A.isPropagationStopped()&&C.parent(C.context).emit(A,c)},f),this.emitting--,this};var cl={qualifierCompare:function(c,d){return null==c||null==d?null==c&&null==d:c.sameText(d)},eventMatches:function(c,d,m){var _=d.qualifier;return null==_||c!==m.target&&_t(m.target)&&_.matches(m.target)},addEventFields:function(c,d){d.cy=c.cy(),d.target=c},callbackContext:function(c,d,m){return null!=d.qualifier?m.target:c},beforeEmit:function(c,d){d.conf&&d.conf.once&&d.conf.onceCollection.removeListener(d.event,d.qualifier,d.callback)},bubble:function(){return!0},parent:function(c){return c.isChild()?c.parent():c.cy()}},vu=function(c){return Fe(c)?new op(c):c},Co={createEmitter:function(){for(var c=0;c<this.length;c++){var d=this[c],m=d._private;m.emitter||(m.emitter=new mu(cl,d))}return this},emitter:function(){return this._private.emitter},on:function(c,d,m){for(var _=vu(d),C=0;C<this.length;C++)this[C].emitter().on(c,_,m);return this},removeListener:function(c,d,m){for(var _=vu(d),C=0;C<this.length;C++)this[C].emitter().removeListener(c,_,m);return this},removeAllListeners:function(){for(var c=0;c<this.length;c++)this[c].emitter().removeAllListeners();return this},one:function(c,d,m){for(var _=vu(d),C=0;C<this.length;C++)this[C].emitter().one(c,_,m);return this},once:function(c,d,m){for(var _=vu(d),C=0;C<this.length;C++)this[C].emitter().on(c,_,m,{once:!0,onceCollection:this})},emit:function(c,d){for(var m=0;m<this.length;m++)this[m].emitter().emit(c,d);return this},emitAndNotify:function(c,d){if(0!==this.length)return this.cy().notify(c,this),this.emit(c,d),this}};ys.eventAliasesOn(Co);var kc={nodes:function(c){return this.filter(function(d){return d.isNode()}).filter(c)},edges:function(c){return this.filter(function(d){return d.isEdge()}).filter(c)},byGroup:function(){for(var c=this.spawn(),d=this.spawn(),m=0;m<this.length;m++){var _=this[m];_.isNode()?c.push(_):d.push(_)}return{nodes:c,edges:d}},filter:function(c,d){if(void 0===c)return this;if(Fe(c)||Ge(c))return new op(c).filter(this);if(Ye(c)){for(var m=this.spawn(),_=this,C=0;C<_.length;C++){var A=_[C];(d?c.apply(d,[A,C,_]):c(A,C,_))&&m.push(A)}return m}return this.spawn()},not:function(c){if(c){Fe(c)&&(c=this.filter(c));for(var d=this.spawn(),m=0;m<this.length;m++){var _=this[m];c.has(_)||d.push(_)}return d}return this},absoluteComplement:function(){return this.cy().mutableElements().not(this)},intersect:function(c){if(Fe(c))return this.filter(c);for(var m=this.spawn(),A=this.length<c.length,E=A?this:c,N=A?c:this,R=0;R<E.length;R++){var j=E[R];N.has(j)&&m.push(j)}return m},xor:function(c){var d=this._private.cy;Fe(c)&&(c=d.$(c));var m=this.spawn(),C=c,A=function(N,R){for(var j=0;j<N.length;j++){var Z=N[j];R.hasElementWithId(Z._private.data.id)||m.push(Z)}};return A(this,C),A(C,this),m},diff:function(c){var d=this._private.cy;Fe(c)&&(c=d.$(c));var m=this.spawn(),_=this.spawn(),C=this.spawn(),E=c,N=function(j,Z,he){for(var me=0;me<j.length;me++){var ye=j[me];Z.hasElementWithId(ye._private.data.id)?C.merge(ye):he.push(ye)}};return N(this,E,m),N(E,this,_),{left:m,right:_,both:C}},add:function(c){var d=this._private.cy;if(!c)return this;if(Fe(c)){var m=c;c=d.mutableElements().filter(m)}for(var _=this.spawnSelf(),C=0;C<c.length;C++){var A=c[C];!this.has(A)&&_.push(A)}return _},merge:function(c){var d=this._private,m=d.cy;if(!c)return this;if(c&&Fe(c)){var _=c;c=m.mutableElements().filter(_)}for(var C=d.map,A=0;A<c.length;A++){var E=c[A],N=E._private.data.id;if(!C.has(N)){var j=this.length++;this[j]=E,C.set(N,{ele:E,index:j})}}return this},unmergeAt:function(c){var m=this[c].id(),C=this._private.map;if(this[c]=void 0,C.delete(m),this.length>1&&c!==this.length-1){var E=this.length-1,N=this[E],R=N._private.data.id;this[E]=void 0,this[c]=N,C.set(R,{ele:N,index:c})}return this.length--,this},unmergeOne:function(c){var C=this._private.map.get((c=c[0])._private.data.id);return C?(this.unmergeAt(C.index),this):this},unmerge:function(c){var d=this._private.cy;if(!c)return this;if(c&&Fe(c)){var m=c;c=d.mutableElements().filter(m)}for(var _=0;_<c.length;_++)this.unmergeOne(c[_]);return this},unmergeBy:function(c){for(var d=this.length-1;d>=0;d--)c(this[d])&&this.unmergeAt(d);return this},map:function(c,d){for(var m=[],_=this,C=0;C<_.length;C++){var A=_[C],E=d?c.apply(d,[A,C,_]):c(A,C,_);m.push(E)}return m},reduce:function(c,d){for(var m=d,_=this,C=0;C<_.length;C++)m=c(m,_[C],C,_);return m},max:function(c,d){for(var _,m=-1/0,C=this,A=0;A<C.length;A++){var E=C[A],N=d?c.apply(d,[E,A,C]):c(E,A,C);N>m&&(m=N,_=E)}return{value:m,ele:_}},min:function(c,d){for(var _,m=1/0,C=this,A=0;A<C.length;A++){var E=C[A],N=d?c.apply(d,[E,A,C]):c(E,A,C);N<m&&(m=N,_=E)}return{value:m,ele:_}}},js=kc;js.u=js["|"]=js["+"]=js.union=js.or=js.add,js["\\"]=js["!"]=js["-"]=js.difference=js.relativeComplement=js.subtract=js.not,js.n=js["&"]=js["."]=js.and=js.intersection=js.intersect,js["^"]=js["(+)"]=js["(-)"]=js.symmetricDifference=js.symdiff=js.xor,js.fnFilter=js.filterFn=js.stdFilter=js.filter,js.complement=js.abscomp=js.absoluteComplement;var c,cp=function(c,d){var _=c.cy().hasCompoundNodes();function C(j){var Z=j.pstyle("z-compound-depth");return"auto"===Z.value?_?j.zDepth():0:"bottom"===Z.value?-1:"top"===Z.value?Ic:0}var A=C(c)-C(d);if(0!==A)return A;function E(j){return"auto"===j.pstyle("z-index-compare").value&&j.isNode()?1:0}var N=E(c)-E(d);if(0!==N)return N;var R=c.pstyle("z-index").value-d.pstyle("z-index").value;return 0!==R?R:c.poolIndex()-d.poolIndex()},Oc={forEach:function(c,d){if(Ye(c))for(var m=this.length,_=0;_<m;_++){var C=this[_];if(!1===(d?c.apply(d,[C,_,this]):c(C,_,this)))break}return this},toArray:function(){for(var c=[],d=0;d<this.length;d++)c.push(this[d]);return c},slice:function(c,d){var m=[],_=this.length;null==d&&(d=_),null==c&&(c=0),c<0&&(c=_+c),d<0&&(d=_+d);for(var C=c;C>=0&&C<d&&C<_;C++)m.push(this[C]);return this.spawn(m)},size:function(){return this.length},eq:function(c){return this[c]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(c){if(!Ye(c))return this;var d=this.toArray().sort(c);return this.spawn(d)},sortByZIndex:function(){return this.sort(cp)},zDepth:function(){var c=this[0];if(c){var d=c._private;if("nodes"===d.group){var _=d.data.parent?c.parents().size():0;return c.isParent()?_:Ic-1}var A=d.target,E=d.source.zDepth(),N=A.zDepth();return Math.max(E,N,0)}}};Oc.each=Oc.forEach,c="undefined",(typeof Symbol>"u"?"undefined":se(Symbol))!=c&&se(Symbol.iterator)!=c&&(Oc[Symbol.iterator]=function(){var m=this,_={value:void 0,done:!1},C=0,A=this.length;return _e({next:function(){return C<A?_.value=m[C++]:(_.value=void 0,_.done=!0),_}},Symbol.iterator,function(){return this})});var Xg=si({nodeDimensionsIncludeLabels:!1}),fh={layoutDimensions:function(c){var d;if(c=Xg(c),this.takesUpSpace())if(c.nodeDimensionsIncludeLabels){var m=this.boundingBox();d={w:m.w,h:m.h}}else d={w:this.outerWidth(),h:this.outerHeight()};else d={w:0,h:0};return(0===d.w||0===d.h)&&(d.w=d.h=1),d},layoutPositions:function(c,d,m){var _=this.nodes().filter(function(Gt){return!Gt.isParent()}),C=this.cy(),A=d.eles,E=function(Wt){return Wt.id()},N=Et(m,E);c.emit({type:"layoutstart",layout:c}),c.animations=[];var j=d.spacingFactor&&1!==d.spacingFactor,he=function(){if(!j)return null;for(var Wt=Tc(),It=0;It<_.length;It++){var Dt=N(_[It],It);ha(Wt,Dt.x,Dt.y)}return Wt}(),me=Et(function(Gt,Wt){var It=N(Gt,Wt);return j&&(It=function(Wt,It,jt){var Dt_x=It.x1+It.w/2,Dt_y=It.y1+It.h/2;return{x:Dt_x+(jt.x-Dt_x)*Wt,y:Dt_y+(jt.y-Dt_y)*Wt}}(Math.abs(d.spacingFactor),he,It)),null!=d.transform&&(It=d.transform(Gt,It)),It},E);if(d.animate){for(var ye=0;ye<_.length;ye++){var De=_[ye],je=me(De,ye);if(null==d.animateFilter||d.animateFilter(De,ye)){var ct=De.animation({position:je,duration:d.animationDuration,easing:d.animationEasing});c.animations.push(ct)}else De.position(je)}if(d.fit){var nt=C.animation({fit:{boundingBox:A.boundingBoxAt(me),padding:d.padding},duration:d.animationDuration,easing:d.animationEasing});c.animations.push(nt)}else if(void 0!==d.zoom&&void 0!==d.pan){var Ct=C.animation({zoom:d.zoom,pan:d.pan,duration:d.animationDuration,easing:d.animationEasing});c.animations.push(Ct)}c.animations.forEach(function(Gt){return Gt.play()}),c.one("layoutready",d.ready),c.emit({type:"layoutready",layout:c}),ra.all(c.animations.map(function(Gt){return Gt.promise()})).then(function(){c.one("layoutstop",d.stop),c.emit({type:"layoutstop",layout:c})})}else _.positions(me),d.fit&&C.fit(d.eles,d.padding),null!=d.zoom&&C.zoom(d.zoom),d.pan&&C.pan(d.pan),c.one("layoutready",d.ready),c.emit({type:"layoutready",layout:c}),c.one("layoutstop",d.stop),c.emit({type:"layoutstop",layout:c});return this},layout:function(c){return this.cy().makeLayout(sr({},c,{eles:this}))}};function Wd(f,c,d){var C,m=d._private,_=m.styleCache=m.styleCache||[];return null!=(C=_[f])||(C=_[f]=c(d)),C}function jd(f,c){return f=xc(f),function(m){return Wd(f,c,m)}}function Ql(f,c){f=xc(f);var d=function(_){return c.call(_)};return function(){var _=this[0];if(_)return Wd(f,d,_)}}fh.createLayout=fh.makeLayout=fh.layout;var ul={recalculateRenderedStyle:function(c){var d=this.cy(),m=d.renderer(),_=d.styleEnabled();return m&&_&&m.recalculateRenderedStyle(this,c),this},dirtyStyleCache:function(){var m,c=this.cy(),d=function(C){return C._private.styleCache=null};return c.hasCompoundNodes()?((m=this.spawnSelf().merge(this.descendants()).merge(this.parents())).merge(m.connectedEdges()),m.forEach(d)):this.forEach(function(_){d(_),_.connectedEdges().forEach(d)}),this},updateStyle:function(c){var d=this._private.cy;if(!d.styleEnabled())return this;if(d.batching())return d._private.batchStyleEles.merge(this),this;var C=this;c=!(!c&&void 0!==c),d.hasCompoundNodes()&&(C=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var A=C;return c?A.emitAndNotify("style"):A.emit("style"),C.forEach(function(E){return E._private.styleDirty=!0}),this},cleanStyle:function(){var c=this.cy();if(c.styleEnabled())for(var d=0;d<this.length;d++){var m=this[d];m._private.styleDirty&&(m._private.styleDirty=!1,c.style().apply(m))}},parsedStyle:function(c){var d=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],m=this[0],_=m.cy();if(_.styleEnabled()&&m){this.cleanStyle();var C=m._private.style[c];return C??(d?_.style().getDefaultProperty(c):null)}},numericStyle:function(c){var d=this[0];if(d.cy().styleEnabled()&&d){var m=d.pstyle(c);return void 0!==m.pfValue?m.pfValue:m.value}},numericStyleUnits:function(c){var d=this[0];if(d.cy().styleEnabled()&&d)return d.pstyle(c).units},renderedStyle:function(c){var d=this.cy();if(!d.styleEnabled())return this;var m=this[0];return m?d.style().getRenderedStyle(m,c):void 0},style:function(c,d){var m=this.cy();if(!m.styleEnabled())return this;var C=m.style();if(vt(c))C.applyBypass(this,c,!1),this.emitAndNotify("style");else if(Fe(c)){if(void 0===d){var E=this[0];return E?C.getStylePropertyValue(E,c):void 0}C.applyBypass(this,c,d,!1),this.emitAndNotify("style")}else if(void 0===c){var N=this[0];return N?C.getRawStyle(N):void 0}return this},removeStyle:function(c){var d=this.cy();if(!d.styleEnabled())return this;var _=d.style(),C=this;if(void 0===c)for(var A=0;A<C.length;A++)_.removeAllBypasses(C[A],!1);else{c=c.split(/\s+/);for(var N=0;N<C.length;N++)_.removeBypasses(C[N],c,!1)}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var c=this.cy();if(!c.styleEnabled())return 1;var d=c.hasCompoundNodes(),m=this[0];if(m){var _=m._private,C=m.pstyle("opacity").value;if(!d)return C;var A=_.data.parent?m.parents():null;if(A)for(var E=0;E<A.length;E++)C*=A[E].pstyle("opacity").value;return C}},transparent:function(){if(!this.cy().styleEnabled())return!1;var d=this[0],m=d.cy().hasCompoundNodes();return d?m?0===d.effectiveOpacity():0===d.pstyle("opacity").value:void 0},backgrounding:function(){return!!this.cy().styleEnabled()&&!!this[0]._private.backgrounding}};function zh(f,c){var m=f._private.data.parent?f.parents():null;if(m)for(var _=0;_<m.length;_++)if(!c(m[_]))return!1;return!0}function tu(f){var c=f.ok,d=f.edgeOkViaNode||f.ok,m=f.parentOk||f.ok;return function(){var _=this.cy();if(!_.styleEnabled())return!0;var C=this[0],A=_.hasCompoundNodes();if(C){var E=C._private;if(!c(C))return!1;if(C.isNode())return!A||zh(C,m);var N=E.source,R=E.target;return d(N)&&(!A||zh(N,d))&&(N===R||d(R)&&(!A||zh(R,d)))}}}var cd=jd("eleTakesUpSpace",function(f){return"element"===f.pstyle("display").value&&0!==f.width()&&(!f.isNode()||0!==f.height())});ul.takesUpSpace=Ql("takesUpSpace",tu({ok:cd}));var $d=jd("eleInteractive",function(f){return"yes"===f.pstyle("events").value&&"visible"===f.pstyle("visibility").value&&cd(f)}),hp=jd("parentInteractive",function(f){return"visible"===f.pstyle("visibility").value&&cd(f)});ul.interactive=Ql("interactive",tu({ok:$d,parentOk:hp,edgeOkViaNode:cd})),ul.noninteractive=function(){var f=this[0];if(f)return!f.interactive()};var ph=jd("eleVisible",function(f){return"visible"===f.pstyle("visibility").value&&0!==f.pstyle("opacity").pfValue&&cd(f)});ul.visible=Ql("visible",tu({ok:ph,edgeOkViaNode:cd})),ul.hidden=function(){var f=this[0];if(f)return!f.visible()},ul.isBundledBezier=Ql("isBundledBezier",function(){return!!this.cy().styleEnabled()&&!this.removed()&&"bezier"===this.pstyle("curve-style").value&&this.takesUpSpace()}),ul.bypass=ul.css=ul.style,ul.renderedCss=ul.renderedStyle,ul.removeBypass=ul.removeCss=ul.removeStyle,ul.pstyle=ul.parsedStyle;var Wo={};function qd(f){return function(){var c=arguments,d=[];if(2===c.length){var m=c[0],_=c[1];this.on(f.event,m,_)}else if(1===c.length&&Ye(c[0])){var C=c[0];this.on(f.event,C)}else if(0===c.length||1===c.length&&lt(c[0])){for(var A=1===c.length?c[0]:null,E=0;E<this.length;E++){var N=this[E],R=!f.ableField||N._private[f.ableField],j=N._private[f.field]!=f.value;if(f.overrideAble){var Z=f.overrideAble(N);if(void 0!==Z&&(R=Z,!Z))return this}R&&(N._private[f.field]=f.value,j&&d.push(N))}var he=this.spawn(d);he.updateStyle(),he.emit(f.event),A&&he.emit(A)}return this}}function Vh(f){Wo[f.field]=function(){var c=this[0];if(c){if(f.overrideField){var d=f.overrideField(c);if(void 0!==d)return d}return c._private[f.field]}},Wo[f.on]=qd({event:f.on,field:f.field,ableField:f.ableField,overrideAble:f.overrideAble,value:!0}),Wo[f.off]=qd({event:f.off,field:f.field,ableField:f.ableField,overrideAble:f.overrideAble,value:!1})}Vh({field:"locked",overrideField:function(c){return!!c.cy().autolock()||void 0},on:"lock",off:"unlock"}),Vh({field:"grabbable",overrideField:function(c){return!c.cy().autoungrabify()&&!c.pannable()&&void 0},on:"grabify",off:"ungrabify"}),Vh({field:"selected",ableField:"selectable",overrideAble:function(c){return!c.cy().autounselectify()&&void 0},on:"select",off:"unselect"}),Vh({field:"selectable",overrideField:function(c){return!c.cy().autounselectify()&&void 0},on:"selectify",off:"unselectify"}),Wo.deselect=Wo.unselect,Wo.grabbed=function(){var f=this[0];if(f)return f._private.grabbed},Vh({field:"active",on:"activate",off:"unactivate"}),Vh({field:"pannable",on:"panify",off:"unpanify"}),Wo.inactive=function(){var f=this[0];if(f)return!f._private.active};var Qa={},ud=function(c){return function(m){for(var C=[],A=0;A<this.length;A++){var E=this[A];if(E.isNode()){for(var N=!1,R=E.connectedEdges(),j=0;j<R.length;j++){var Z=R[j],he=Z.source(),me=Z.target();if(c.noIncomingEdges&&me===E&&he!==E||c.noOutgoingEdges&&he===E&&me!==E){N=!0;break}}N||C.push(E)}}return this.spawn(C,!0).filter(m)}},Vu=function(c){return function(d){for(var _=[],C=0;C<this.length;C++){var A=this[C];if(A.isNode())for(var E=A.connectedEdges(),N=0;N<E.length;N++){var R=E[N],j=R.source(),Z=R.target();c.outgoing&&j===A?(_.push(R),_.push(Z)):c.incoming&&Z===A&&(_.push(R),_.push(j))}}return this.spawn(_,!0).filter(d)}},Uh=function(c){return function(d){for(var m=this,_=[],C={};;){var A=c.outgoing?m.outgoers():m.incomers();if(0===A.length)break;for(var E=!1,N=0;N<A.length;N++){var R=A[N],j=R.id();C[j]||(C[j]=!0,_.push(R),E=!0)}if(!E)break;m=A}return this.spawn(_,!0).filter(d)}};function Pa(f){return function(d){for(var m=[],_=0;_<this.length;_++){var A=this[_]._private[f.attr];A&&m.push(A)}return this.spawn(m,!0).filter(d)}}function nu(f){return function(d){var m=[],_=this._private.cy,C=f||{};Fe(d)&&(d=_.$(d));for(var A=0;A<d.length;A++)for(var E=d[A]._private.edges,N=0;N<E.length;N++){var R=E[N],j=R._private.data,Z=this.hasElementWithId(j.source)&&d.hasElementWithId(j.target),he=d.hasElementWithId(j.source)&&this.hasElementWithId(j.target);!Z&&!he||(C.thisIsSrc||C.thisIsTgt)&&(C.thisIsSrc&&!Z||C.thisIsTgt&&!he)||m.push(R)}return this.spawn(m,!0)}}function hd(f){return f=sr({},{codirected:!1},f),function(m){for(var _=[],C=this.edges(),A=f,E=0;E<C.length;E++)for(var R=C[E]._private,j=R.source,Z=j._private.data.id,he=R.data.target,me=j._private.edges,ye=0;ye<me.length;ye++){var De=me[ye],je=De._private.data,qe=je.target,ct=je.source,nt=qe===he&&ct===Z;(A.codirected&&nt||!A.codirected&&(nt||Z===qe&&he===ct))&&_.push(De)}return this.spawn(_,!0).filter(m)}}Qa.clearTraversalCache=function(){for(var f=0;f<this.length;f++)this[f]._private.traversalCache=null},sr(Qa,{roots:ud({noIncomingEdges:!0}),leaves:ud({noOutgoingEdges:!0}),outgoers:Ca(Vu({outgoing:!0}),"outgoers"),successors:Uh({outgoing:!0}),incomers:Ca(Vu({incoming:!0}),"incomers"),predecessors:Uh({incoming:!0})}),sr(Qa,{neighborhood:Ca(function(f){for(var c=[],d=this.nodes(),m=0;m<d.length;m++)for(var _=d[m],C=_.connectedEdges(),A=0;A<C.length;A++){var E=C[A],N=E.source(),R=E.target(),j=_===N?R:N;j.length>0&&c.push(j[0]),c.push(E[0])}return this.spawn(c,!0).filter(f)},"neighborhood"),closedNeighborhood:function(c){return this.neighborhood().add(this).filter(c)},openNeighborhood:function(c){return this.neighborhood(c)}}),Qa.neighbourhood=Qa.neighborhood,Qa.closedNeighbourhood=Qa.closedNeighborhood,Qa.openNeighbourhood=Qa.openNeighborhood,sr(Qa,{source:Ca(function(c){var m,d=this[0];return d&&(m=d._private.source||d.cy().collection()),m&&c?m.filter(c):m},"source"),target:Ca(function(c){var m,d=this[0];return d&&(m=d._private.target||d.cy().collection()),m&&c?m.filter(c):m},"target"),sources:Pa({attr:"source"}),targets:Pa({attr:"target"})}),sr(Qa,{edgesWith:Ca(nu(),"edgesWith"),edgesTo:Ca(nu({thisIsSrc:!0}),"edgesTo")}),sr(Qa,{connectedEdges:Ca(function(f){for(var c=[],m=0;m<this.length;m++){var _=this[m];if(_.isNode())for(var C=_._private.edges,A=0;A<C.length;A++)c.push(C[A])}return this.spawn(c,!0).filter(f)},"connectedEdges"),connectedNodes:Ca(function(f){for(var c=[],m=0;m<this.length;m++){var _=this[m];!_.isEdge()||(c.push(_.source()[0]),c.push(_.target()[0]))}return this.spawn(c,!0).filter(f)},"connectedNodes"),parallelEdges:Ca(hd(),"parallelEdges"),codirectedEdges:Ca(hd({codirected:!0}),"codirectedEdges")}),sr(Qa,{components:function(c){var d=this,m=d.cy(),_=m.collection(),C=null==c?d.nodes():c.nodes(),A=[];null!=c&&C.empty()&&(C=c.sources());var E=function(j,Z){_.merge(j),C.unmerge(j),Z.merge(j)};if(C.empty())return d.spawn();var N=function(){var j=m.collection();A.push(j);var Z=C[0];E(Z,j),d.bfs({directed:!1,roots:Z,visit:function(me){return E(me,j)}}),j.forEach(function(he){he.connectedEdges().forEach(function(me){d.has(me)&&j.has(me.source())&&j.has(me.target())&&j.merge(me)})})};do{N()}while(C.length>0);return A},component:function(){var c=this[0];return c.cy().mutableElements().components(c)[0]}}),Qa.componentsOf=Qa.components;var la=function(c,d){var m=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(void 0!==c){var _=new Eo,C=!1;if(d){if(d.length>0&&vt(d[0])&&!_t(d[0])){C=!0;for(var A=[],E=new fs,N=0,R=d.length;N<R;N++){var j=d[N];null==j.data&&(j.data={});var Z=j.data;if(null==Z.id)Z.id=Yt();else if(c.hasElementWithId(Z.id)||E.has(Z.id))continue;var he=new Ya(c,j,!1);A.push(he),E.add(Z.id)}d=A}}else d=[];this.length=0;for(var me=0,ye=d.length;me<ye;me++){var De=d[me][0];if(null!=De){var je=De._private.data.id;(!m||!_.has(je))&&(m&&_.set(je,{index:this.length,ele:De}),this[this.length]=De,this.length++)}}this._private={eles:this,cy:c,get map(){return null==this.lazyMap&&this.rebuildMap(),this.lazyMap},set map(qe){this.lazyMap=qe},rebuildMap:function(){for(var ct=this.lazyMap=new Eo,nt=this.eles,Ct=0;Ct<nt.length;Ct++){var Gt=nt[Ct];ct.set(Gt.id(),{index:Ct,ele:Gt})}}},m&&(this._private.map=_),C&&this.restore()}else pt("A collection must have a reference to the core")},jo=Ya.prototype=la.prototype=Object.create(Array.prototype);jo.instanceString=function(){return"collection"},jo.spawn=function(f,c){return new la(this.cy(),f,c)},jo.spawnSelf=function(){return this.spawn(this)},jo.cy=function(){return this._private.cy},jo.renderer=function(){return this._private.cy.renderer()},jo.element=function(){return this[0]},jo.collection=function(){return At(this)?this:new la(this._private.cy,[this])},jo.unique=function(){return new la(this._private.cy,this,!0)},jo.hasElementWithId=function(f){return this._private.map.has(f=""+f)},jo.getElementById=function(f){var c=this._private.cy,d=this._private.map.get(f=""+f);return d?d.ele:new la(c)},jo.$id=jo.getElementById,jo.poolIndex=function(){return this._private.cy._private.elements._private.map.get(this[0]._private.data.id).index},jo.indexOf=function(f){return this._private.map.get(f[0]._private.data.id).index},jo.indexOfId=function(f){return this._private.map.get(f=""+f).index},jo.json=function(f){var c=this.element(),d=this.cy();if(null==c&&f)return this;if(null!=c){var m=c._private;if(vt(f)){if(d.startBatch(),f.data){c.data(f.data);var _=m.data;if(c.isEdge()){var C=!1,A={},E=f.data.source,N=f.data.target;null!=E&&E!=_.source&&(A.source=""+E,C=!0),null!=N&&N!=_.target&&(A.target=""+N,C=!0),C&&(c=c.move(A))}else{var j=f.data.parent;"parent"in f.data&&(null!=j||null!=_.parent)&&j!=_.parent&&(void 0===j&&(j=null),null!=j&&(j=""+j),c=c.move({parent:j}))}}f.position&&c.position(f.position);var Z=function(De,je,qe){var ct=f[De];null!=ct&&ct!==m[De]&&(ct?c[je]():c[qe]())};return Z("removed","remove","restore"),Z("selected","select","unselect"),Z("selectable","selectify","unselectify"),Z("locked","lock","unlock"),Z("grabbable","grabify","ungrabify"),Z("pannable","panify","unpanify"),null!=f.classes&&c.classes(f.classes),d.endBatch(),this}if(void 0===f){var he={data:tt(m.data),position:tt(m.position),group:m.group,removed:m.removed,selected:m.selected,selectable:m.selectable,locked:m.locked,grabbable:m.grabbable,pannable:m.pannable,classes:""},me=0;return m.classes.forEach(function(ye){return he.classes+=0==me++?ye:" "+ye}),he}}},jo.jsons=function(){for(var f=[],c=0;c<this.length;c++){var m=this[c].json();f.push(m)}return f},jo.clone=function(){for(var f=this.cy(),c=[],d=0;d<this.length;d++){var _=this[d].json(),C=new Ya(f,_,!1);c.push(C)}return new la(f,c)},jo.copy=jo.clone,jo.restore=function(){for(var E,f=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],d=this,m=d.cy(),_=m._private,C=[],A=[],N=0,R=d.length;N<R;N++){var j=d[N];c&&!j.removed()||(j.isNode()?C.push(j):A.push(j))}E=C.concat(A);var Z,he=function(){E.splice(Z,1),Z--};for(Z=0;Z<E.length;Z++){var me=E[Z],ye=me._private,De=ye.data;if(me.clearTraversalCache(),c||ye.removed)if(void 0===De.id)De.id=Yt();else if(Ne(De.id))De.id=""+De.id;else{if(fe(De.id)||!Fe(De.id)){pt("Can not create element with invalid string ID `"+De.id+"`"),he();continue}if(m.hasElementWithId(De.id)){pt("Can not create second element with ID `"+De.id+"`"),he();continue}}var je=De.id;if(me.isNode()){var qe=ye.position;null==qe.x&&(qe.x=0),null==qe.y&&(qe.y=0)}if(me.isEdge()){for(var ct=me,nt=["source","target"],Ct=nt.length,Gt=!1,Wt=0;Wt<Ct;Wt++){var It=nt[Wt],jt=De[It];Ne(jt)&&(jt=De[It]=""+De[It]),null==jt||""===jt?(pt("Can not create edge `"+je+"` with unspecified "+It),Gt=!0):m.hasElementWithId(jt)||(pt("Can not create edge `"+je+"` with nonexistant "+It+" `"+jt+"`"),Gt=!0)}if(Gt){he();continue}var Dt=m.getElementById(De.source),Zt=m.getElementById(De.target);Dt.same(Zt)?Dt._private.edges.push(ct):(Dt._private.edges.push(ct),Zt._private.edges.push(ct)),ct._private.source=Dt,ct._private.target=Zt}ye.map=new Eo,ye.map.set(je,{ele:me,index:0}),ye.removed=!1,c&&m.addToPool(me)}for(var Kt=0;Kt<C.length;Kt++){var ut=C[Kt],Qt=ut._private.data;Ne(Qt.parent)&&(Qt.parent=""+Qt.parent);var Vt=Qt.parent,An=null!=Vt;if(An){var sn=m.getElementById(Vt);if(sn.empty())Qt.parent=void 0;else{for(var pn=!1,Mn=sn;!Mn.empty();){if(ut.same(Mn)){pn=!0,Qt.parent=void 0;break}Mn=Mn.parent()}pn||(sn[0]._private.children.push(ut),ut._private.parent=sn[0],_.hasCompoundNodes=!0)}}}if(E.length>0){for(var kn=E.length===d.length?d:new la(m,E),ti=0;ti<kn.length;ti++){var Dn=kn[ti];Dn.isNode()||(Dn.parallelEdges().clearTraversalCache(),Dn.source().clearTraversalCache(),Dn.target().clearTraversalCache())}(_.hasCompoundNodes?m.collection().merge(kn).merge(kn.connectedNodes()).merge(kn.parent()):kn).dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(f),f?kn.emitAndNotify("add"):c&&kn.emit("add")}return d},jo.removed=function(){var f=this[0];return f&&f._private.removed},jo.inside=function(){var f=this[0];return f&&!f._private.removed},jo.remove=function(){var f=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],d=this,m=[],_={},C=d._private.cy;function A(Vt){for(var An=Vt._private.edges,sn=0;sn<An.length;sn++)N(An[sn])}function E(Vt){for(var An=Vt._private.children,sn=0;sn<An.length;sn++)N(An[sn])}function N(Vt){var An=_[Vt.id()];c&&Vt.removed()||An||(_[Vt.id()]=!0,Vt.isNode()?(m.push(Vt),A(Vt),E(Vt)):m.unshift(Vt))}for(var R=0,j=d.length;R<j;R++){var Z=d[R];N(Z)}function he(Vt,An){pi(Vt._private.edges,An),Vt.clearTraversalCache()}function me(Vt){Vt.clearTraversalCache()}var ye=[];function De(Vt,An){An=An[0];var sn=(Vt=Vt[0])._private.children,pn=Vt.id();pi(sn,An),An._private.parent=null,ye.ids[pn]||(ye.ids[pn]=!0,ye.push(Vt))}ye.ids={},d.dirtyCompoundBoundsCache(),c&&C.removeFromPool(m);for(var je=0;je<m.length;je++){var qe=m[je];if(qe.isEdge()){var ct=qe.source()[0],nt=qe.target()[0];he(ct,qe),he(nt,qe);for(var Ct=qe.parallelEdges(),Gt=0;Gt<Ct.length;Gt++){var Wt=Ct[Gt];me(Wt),Wt.isBundledBezier()&&Wt.dirtyBoundingBoxCache()}}else{var It=qe.parent();0!==It.length&&De(It,qe)}c&&(qe._private.removed=!0)}var jt=C._private.elements;C._private.hasCompoundNodes=!1;for(var Dt=0;Dt<jt.length;Dt++){var Zt=jt[Dt];if(Zt.isParent()){C._private.hasCompoundNodes=!0;break}}var Kt=new la(this.cy(),m);Kt.size()>0&&(f?Kt.emitAndNotify("remove"):c&&Kt.emit("remove"));for(var ut=0;ut<ye.length;ut++){var Qt=ye[ut];(!c||!Qt.removed())&&Qt.updateStyle()}return Kt},jo.move=function(f){var c=this._private.cy,d=this,m=!1,_=!1,C=function(ye){return null==ye?ye:""+ye};if(void 0!==f.source||void 0!==f.target){var A=C(f.source),E=C(f.target),N=null!=A&&c.hasElementWithId(A),R=null!=E&&c.hasElementWithId(E);(N||R)&&(c.batch(function(){d.remove(m,_),d.emitAndNotify("moveout");for(var me=0;me<d.length;me++){var ye=d[me],De=ye._private.data;ye.isEdge()&&(N&&(De.source=A),R&&(De.target=E))}d.restore(m,_)}),d.emitAndNotify("move"))}else if(void 0!==f.parent){var j=C(f.parent);if(null===j||c.hasElementWithId(j)){var he=null===j?void 0:j;c.batch(function(){var me=d.remove(m,_);me.emitAndNotify("moveout");for(var ye=0;ye<d.length;ye++){var De=d[ye],je=De._private.data;De.isNode()&&(je.parent=he)}me.restore(m,_)}),d.emitAndNotify("move")}}return this},[Dm,ml,Dc,Fl,Bo,zd,Cf,gb,Co,kc,{isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var c=this[0];if(c)return c._private.group}},Oc,fh,ul,Wo,Qa].forEach(function(f){sr(jo,f)});var Ns={add:function(c){var d,m=this;if(Ge(c)){var _=c;if(_._private.cy===m)d=_.restore();else{for(var C=[],A=0;A<_.length;A++)C.push(_[A].json());d=new la(m,C)}}else if(lt(c))d=new la(m,c);else if(vt(c)&&(lt(c.nodes)||lt(c.edges))){for(var R=c,j=[],Z=["nodes","edges"],he=0,me=Z.length;he<me;he++){var ye=Z[he],De=R[ye];if(lt(De))for(var je=0,qe=De.length;je<qe;je++){var ct=sr({group:ye},De[je]);j.push(ct)}}d=new la(m,j)}else d=new Ya(m,c).collection();return d},remove:function(c){return Ge(c)||Fe(c)&&(c=this.$(c)),c.remove()}},km=function(){function f(m){return-m.tension*m.x-m.friction*m.v}function c(m,_,C){var A={x:m.x+C.dx*_,v:m.v+C.dv*_,tension:m.tension,friction:m.friction};return{dx:A.v,dv:f(A)}}function d(m,_){var C={dx:m.v,dv:f(m)},A=c(m,.5*_,C),E=c(m,.5*_,A),N=c(m,_,E),j=1/6*(C.dv+2*(A.dv+E.dv)+N.dv);return m.x=m.x+1/6*(C.dx+2*(A.dx+E.dx)+N.dx)*_,m.v=m.v+j*_,m}return function m(_,C,A){var he,me,ye,E={x:-1,v:0,tension:null,friction:null},N=[0],R=0,j=1e-4;for(_=parseFloat(_)||500,C=parseFloat(C)||20,A=A||null,E.tension=_,E.friction=C,me=(he=null!==A)?(R=m(_,C))/A*.016:.016;ye=d(ye||E,me),N.push(1+ye.x),R+=16,Math.abs(ye.x)>j&&Math.abs(ye.v)>j;);return he?function(De){return N[De*(N.length-1)|0]}:R}}(),wo=function(c,d,m,_){var C=function ir(f,c,d,m){var _=4,C=.001,A=1e-7,E=10,N=11,R=1/(N-1),j=typeof Float32Array<"u";if(4!==arguments.length)return!1;for(var Z=0;Z<4;++Z)if("number"!=typeof arguments[Z]||isNaN(arguments[Z])||!isFinite(arguments[Z]))return!1;f=Math.min(f,1),d=Math.min(d,1),f=Math.max(f,0),d=Math.max(d,0);var he=j?new Float32Array(N):new Array(N);function me(Zt,Kt){return 1-3*Kt+3*Zt}function ye(Zt,Kt){return 3*Kt-6*Zt}function De(Zt){return 3*Zt}function je(Zt,Kt,ut){return((me(Kt,ut)*Zt+ye(Kt,ut))*Zt+De(Kt))*Zt}function qe(Zt,Kt,ut){return 3*me(Kt,ut)*Zt*Zt+2*ye(Kt,ut)*Zt+De(Kt)}function ct(Zt,Kt){for(var ut=0;ut<_;++ut){var Qt=qe(Kt,f,d);if(0===Qt)return Kt;Kt-=(je(Kt,f,d)-Zt)/Qt}return Kt}function nt(){for(var Zt=0;Zt<N;++Zt)he[Zt]=je(Zt*R,f,d)}function Ct(Zt,Kt,ut){var Qt,Vt,An=0;do{(Qt=je(Vt=Kt+(ut-Kt)/2,f,d)-Zt)>0?ut=Vt:Kt=Vt}while(Math.abs(Qt)>A&&++An<E);return Vt}function Gt(Zt){for(var Kt=0,ut=1,Qt=N-1;ut!==Qt&&he[ut]<=Zt;++ut)Kt+=R;--ut;var An=Kt+(Zt-he[ut])/(he[ut+1]-he[ut])*R,sn=qe(An,f,d);return sn>=C?ct(Zt,An):0===sn?An:Ct(Zt,Kt,Kt+R)}var Wt=!1;function It(){Wt=!0,(f!==c||d!==m)&&nt()}var jt=function(Kt){return Wt||It(),f===c&&d===m?Kt:0===Kt?0:1===Kt?1:je(Gt(Kt),c,m)};jt.getControlPoints=function(){return[{x:f,y:c},{x:d,y:m}]};var Dt="generateBezier("+[f,c,d,m]+")";return jt.toString=function(){return Dt},jt}(c,d,m,_);return function(A,E,N){return A+(E-A)*C(N)}},Ef={linear:function(c,d,m){return c+(d-c)*m},ease:wo(.25,.1,.25,1),"ease-in":wo(.42,0,1,1),"ease-out":wo(0,0,.58,1),"ease-in-out":wo(.42,0,.58,1),"ease-in-sine":wo(.47,0,.745,.715),"ease-out-sine":wo(.39,.575,.565,1),"ease-in-out-sine":wo(.445,.05,.55,.95),"ease-in-quad":wo(.55,.085,.68,.53),"ease-out-quad":wo(.25,.46,.45,.94),"ease-in-out-quad":wo(.455,.03,.515,.955),"ease-in-cubic":wo(.55,.055,.675,.19),"ease-out-cubic":wo(.215,.61,.355,1),"ease-in-out-cubic":wo(.645,.045,.355,1),"ease-in-quart":wo(.895,.03,.685,.22),"ease-out-quart":wo(.165,.84,.44,1),"ease-in-out-quart":wo(.77,0,.175,1),"ease-in-quint":wo(.755,.05,.855,.06),"ease-out-quint":wo(.23,1,.32,1),"ease-in-out-quint":wo(.86,0,.07,1),"ease-in-expo":wo(.95,.05,.795,.035),"ease-out-expo":wo(.19,1,.22,1),"ease-in-out-expo":wo(1,0,0,1),"ease-in-circ":wo(.6,.04,.98,.335),"ease-out-circ":wo(.075,.82,.165,1),"ease-in-out-circ":wo(.785,.135,.15,.86),spring:function(c,d,m){if(0===m)return Ef.linear;var _=km(c,d,m);return function(C,A,E){return C+(A-C)*_(E)}},"cubic-bezier":wo};function Zp(f,c,d,m,_){if(1===m||c===d)return d;var C=_(c,d,m);return null==f||((f.roundValue||f.color)&&(C=Math.round(C)),void 0!==f.min&&(C=Math.max(C,f.min)),void 0!==f.max&&(C=Math.min(C,f.max))),C}function Qp(f,c){return null!=f.pfValue||null!=f.value?null==f.pfValue||null!=c&&"%"===c.type.units?f.value:f.pfValue:f}function _l(f,c,d,m,_){var C=null!=_?_.type:null;d<0?d=0:d>1&&(d=1);var A=Qp(f,_),E=Qp(c,_);if(Ne(A)&&Ne(E))return Zp(C,A,E,d,m);if(lt(A)&&lt(E)){for(var N=[],R=0;R<E.length;R++){var j=A[R],Z=E[R];if(null!=j&&null!=Z){var he=Zp(C,j,Z,d,m);N.push(he)}else N.push(Z)}return N}}function Tf(f,c,d,m){var _=!m,C=f._private,A=c._private,E=A.easing,N=A.startTime,j=(m?f:f.cy()).style();if(!A.easingImpl)if(null==E)A.easingImpl=Ef.linear;else{var Z,me,ye;Z=Fe(E)?j.parse("transition-timing-function",E).value:E,Fe(Z)?(me=Z,ye=[]):(me=Z[1],ye=Z.slice(2).map(function(kn){return+kn})),ye.length>0?("spring"===me&&ye.push(A.duration),A.easingImpl=Ef[me].apply(null,ye)):A.easingImpl=Ef[me]}var je,De=A.easingImpl;if(je=0===A.duration?1:(d-N)/A.duration,A.applying&&(je=A.progress),je<0?je=0:je>1&&(je=1),null==A.delay){var qe=A.startPosition,ct=A.position;if(ct&&_&&!f.locked()){var nt={};Jl(qe.x,ct.x)&&(nt.x=_l(qe.x,ct.x,je,De)),Jl(qe.y,ct.y)&&(nt.y=_l(qe.y,ct.y,je,De)),f.position(nt)}var Ct=A.startPan,Gt=A.pan,Wt=C.pan,It=null!=Gt&&m;It&&(Jl(Ct.x,Gt.x)&&(Wt.x=_l(Ct.x,Gt.x,je,De)),Jl(Ct.y,Gt.y)&&(Wt.y=_l(Ct.y,Gt.y,je,De)),f.emit("pan"));var jt=A.startZoom,Dt=A.zoom,Zt=null!=Dt&&m;Zt&&(Jl(jt,Dt)&&(C.zoom=Sr(C.minZoom,_l(jt,Dt,je,De),C.maxZoom)),f.emit("zoom")),(It||Zt)&&f.emit("viewport");var Kt=A.style;if(Kt&&Kt.length>0&&_){for(var ut=0;ut<Kt.length;ut++){var Qt=Kt[ut],Vt=Qt.name,sn=A.startStyle[Vt],Mn=_l(sn,Qt,je,De,j.properties[sn.name]);j.overrideBypass(f,Vt,Mn)}f.emit("style")}}return A.progress=je,je}function Jl(f,c){return!!(null!=f&&null!=c&&(Ne(f)&&Ne(c)||f&&c))}function Jp(f,c,d,m){var _=c._private;_.started=!0,_.startTime=d-_.progress*_.duration}function eg(f,c){var d=c._private.aniEles,m=[];function _(j,Z){var he=j._private,me=he.animation.current,ye=he.animation.queue,De=!1;if(0===me.length){var je=ye.shift();je&&me.push(je)}for(var qe=function(Wt){for(var It=Wt.length-1;It>=0;It--)(0,Wt[It])();Wt.splice(0,Wt.length)},ct=me.length-1;ct>=0;ct--){var nt=me[ct],Ct=nt._private;Ct.stopped?(me.splice(ct,1),Ct.hooked=!1,Ct.playing=!1,Ct.started=!1,qe(Ct.frames)):!Ct.playing&&!Ct.applying||(Ct.playing&&Ct.applying&&(Ct.applying=!1),Ct.started||Jp(0,nt,f),Tf(j,nt,f,Z),Ct.applying&&(Ct.applying=!1),qe(Ct.frames),null!=Ct.step&&Ct.step(f),nt.completed()&&(me.splice(ct,1),Ct.hooked=!1,Ct.playing=!1,Ct.started=!1,qe(Ct.completes)),De=!0)}return!Z&&0===me.length&&0===ye.length&&m.push(j),De}for(var C=!1,A=0;A<d.length;A++){var N=_(d[A]);C=C||N}var R=_(c,!0);(C||R)&&(d.length>0?c.notify("draw",d):c.notify("draw")),d.unmerge(m),c.emit("step")}var Ra={animate:ys.animate(),animation:ys.animation(),animated:ys.animated(),clearQueue:ys.clearQueue(),delay:ys.delay(),delayAnimation:ys.delayAnimation(),stop:ys.stop(),addToAnimationPool:function(c){!this.styleEnabled()||this._private.aniEles.merge(c)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var c=this;if(c._private.animationsRunning=!0,c.styleEnabled()){var m=c.renderer();m&&m.beforeRender?m.beforeRender(function(C,A){eg(A,c)},m.beforeRenderPriorities.animations):function d(){!c._private.animationsRunning||uu(function(C){eg(C,c),d()})}()}}},Bl={qualifierCompare:function(c,d){return null==c||null==d?null==c&&null==d:c.sameText(d)},eventMatches:function(c,d,m){var _=d.qualifier;return null==_||c!==m.target&&_t(m.target)&&_.matches(m.target)},addEventFields:function(c,d){d.cy=c,d.target=c},callbackContext:function(c,d,m){return null!=d.qualifier?m.target:c}},Il=function(c){return Fe(c)?new op(c):c},Uu={createEmitter:function(){var c=this._private;return c.emitter||(c.emitter=new mu(Bl,this)),this},emitter:function(){return this._private.emitter},on:function(c,d,m){return this.emitter().on(c,Il(d),m),this},removeListener:function(c,d,m){return this.emitter().removeListener(c,Il(d),m),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(c,d,m){return this.emitter().one(c,Il(d),m),this},once:function(c,d,m){return this.emitter().one(c,Il(d),m),this},emit:function(c,d){return this.emitter().emit(c,d),this},emitAndNotify:function(c,d){return this.emit(c),this.notify(c,d),this}};ys.eventAliasesOn(Uu);var Xd={png:function(c){return this._private.renderer.png(c=c||{})},jpg:function(c){var d=this._private.renderer;return(c=c||{}).bg=c.bg||"#fff",d.jpg(c)}};Xd.jpeg=Xd.jpg;var Ga={layout:function(c){var d=this;if(null!=c)if(null!=c.name){var C,m=c.name,_=d.extension("layout",m);if(null!=_)return C=Fe(c.eles)?d.$(c.eles):null!=c.eles?c.eles:d.$(),new _(sr({},c,{cy:d,eles:C}));pt("No such layout `"+m+"` found.  Did you forget to import it and `cytoscape.use()` it?")}else pt("A `name` must be specified to make a layout");else pt("Layout options must be specified to make a layout")}};Ga.createLayout=Ga.makeLayout=Ga.layout;var yu={notify:function(c,d){var m=this._private;if(this.batching()){m.batchNotifications=m.batchNotifications||{};var _=m.batchNotifications[c]=m.batchNotifications[c]||this.collection();null!=d&&_.merge(d)}else if(m.notificationsEnabled){var C=this.renderer();this.destroyed()||!C||C.notify(c,d)}},notifications:function(c){var d=this._private;return void 0===c?d.notificationsEnabled:(d.notificationsEnabled=!!c,this)},noNotifications:function(c){this.notifications(!1),c(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var c=this._private;return null==c.batchCount&&(c.batchCount=0),0===c.batchCount&&(c.batchStyleEles=this.collection(),c.batchNotifications={}),c.batchCount++,this},endBatch:function(){var c=this._private;if(0===c.batchCount)return this;if(c.batchCount--,0===c.batchCount){c.batchStyleEles.updateStyle();var d=this.renderer();Object.keys(c.batchNotifications).forEach(function(m){var _=c.batchNotifications[m];_.empty()?d.notify(m):d.notify(m,_)})}return this},batch:function(c){return this.startBatch(),c(),this.endBatch(),this},batchData:function(c){var d=this;return this.batch(function(){for(var m=Object.keys(c),_=0;_<m.length;_++){var C=m[_],A=c[C];d.getElementById(C).data(A)}})}},Hu=si({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),Gu={renderTo:function(c,d,m,_){return this._private.renderer.renderTo(c,d,m,_),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(c){var d=this,m=d.extension("renderer",c.name);if(null!=m){void 0!==c.wheelSensitivity&&ge("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var _=Hu(c);_.cy=d,d._private.renderer=new m(_),this.notify("init")}else pt("Can not initialise: No such renderer `".concat(c.name,"` found. Did you forget to import it and `cytoscape.use()` it?"))},destroyRenderer:function(){var c=this;c.notify("destroy");var d=c.container();if(d)for(d._cyreg=null;d.childNodes.length>0;)d.removeChild(d.childNodes[0]);c._private.renderer=null,c.mutableElements().forEach(function(m){var _=m._private;_.rscratch={},_.rstyle={},_.animation.current=[],_.animation.queue=[]})},onRender:function(c){return this.on("render",c)},offRender:function(c){return this.off("render",c)}};Gu.invalidateDimensions=Gu.resize;var Sl={collection:function(c,d){return Fe(c)?this.$(c):Ge(c)?c.collection():lt(c)?new la(this,c,d):new la(this)},nodes:function(c){var d=this.$(function(m){return m.isNode()});return c?d.filter(c):d},edges:function(c){var d=this.$(function(m){return m.isEdge()});return c?d.filter(c):d},$:function(c){var d=this._private.elements;return c?d.filter(c):d.spawnSelf()},mutableElements:function(){return this._private.elements}};Sl.elements=Sl.filter=Sl.$;var ka={apply:function(f){for(var c=this,_=c._private.cy.collection(),C=0;C<f.length;C++){var A=f[C],E=c.getContextMeta(A);if(!E.empty){var N=c.getContextStyle(E),R=c.applyContextStyle(E,N,A);A._private.appliedInitStyle?c.updateTransitions(A,R.diffProps):A._private.appliedInitStyle=!0,c.updateStyleHints(A)&&_.push(A)}}return _},getPropertiesDiff:function(f,c){var d=this,m=d._private.propDiffs=d._private.propDiffs||{},_=f+"-"+c,C=m[_];if(C)return C;for(var A=[],E={},N=0;N<d.length;N++){var R=d[N],Z="t"===c[N],he="t"===f[N]!==Z,me=R.mappedProperties.length>0;if(he||Z&&me){var ye=void 0;he&&me||he?ye=R.properties:me&&(ye=R.mappedProperties);for(var De=0;De<ye.length;De++){for(var je=ye[De],qe=je.name,ct=!1,nt=N+1;nt<d.length&&("t"!==c[nt]||!(ct=null!=d[nt].properties[je.name]));nt++);!E[qe]&&!ct&&(E[qe]=!0,A.push(qe))}}}return m[_]=A,A},getContextMeta:function(f){for(var m,c=this,d="",_=f._private.styleCxtKey||"",C=0;C<c.length;C++){var A=c[C];d+=A.selector&&A.selector.matches(f)?"t":"f"}return m=c.getPropertiesDiff(_,d),f._private.styleCxtKey=d,{key:d,diffPropNames:m,empty:0===m.length}},getContextStyle:function(f){var c=f.key,m=this._private.contextStyles=this._private.contextStyles||{};if(m[c])return m[c];for(var _={_private:{key:c}},C=0;C<this.length;C++){var A=this[C];if("t"===c[C])for(var N=0;N<A.properties.length;N++){var R=A.properties[N];_[R.name]=R}}return m[c]=_,_},applyContextStyle:function(f,c,d){for(var _=f.diffPropNames,C={},A=this.types,E=0;E<_.length;E++){var N=_[E],R=c[N],j=d.pstyle(N);if(!R){if(!j)continue;R=j.bypass?{name:N,deleteBypassed:!0}:{name:N,delete:!0}}if(j!==R){if(R.mapped===A.fn&&null!=j&&null!=j.mapping&&j.mapping.value===R.value){var Z=j.mapping;if((Z.fnValue=R.value(d))===Z.prevFnValue)continue}var me=C[N]={prev:j};this.applyParsedProperty(d,R),me.next=d.pstyle(N),me.next&&me.next.bypass&&(me.next=me.next.bypassed)}}return{diffProps:C}},updateStyleHints:function(f){var m,c=f._private,d=this,_=d.propertyGroupKeys,C=function(Qi,lr,Hr){return d.getPropertiesHash(Qi,lr,Hr)},A=c.styleKey;if(f.removed())return!1;var Qi,E="nodes"===c.group,N=f._private.style;m=Object.keys(N);for(var R=0;R<_.length;R++)c.styleKeys[_[R]]=[Eh,td];for(var Z=function(Qi,lr){return c.styleKeys[lr][0]=nd(Qi,c.styleKeys[lr][0])},he=function(Qi,lr){return c.styleKeys[lr][1]=pl(Qi,c.styleKeys[lr][1])},me=function(Qi,lr){Z(Qi,lr),he(Qi,lr)},ye=function(Qi,lr){for(var Hr=0;Hr<Qi.length;Hr++){var Zr=Qi.charCodeAt(Hr);Z(Zr,lr),he(Zr,lr)}},qe=0;qe<m.length;qe++){var ct=m[qe],nt=N[ct];if(null!=nt){var Ct=this.properties[ct],Gt=Ct.type,Wt=Ct.groupKey,It=void 0;null!=Ct.hashOverride?It=Ct.hashOverride(f,nt):null!=nt.pfValue&&(It=nt.pfValue);var jt=null==Ct.enums?nt.value:null,Dt=null!=It,ut=nt.units;!Gt.number||!Dt&&null==jt||Gt.multiple?ye(nt.strValue,Wt):(me(-128<(Qi=Dt?It:jt)&&Qi<128&&Math.floor(Qi)!==Qi?2e9-(1024*Qi|0):Qi,Wt),!Dt&&null!=ut&&ye(ut,Wt))}}for(var Vt=[Eh,td],An=0;An<_.length;An++){var pn=c.styleKeys[_[An]];Vt[0]=nd(pn[0],Vt[0]),Vt[1]=pl(pn[1],Vt[1])}c.styleKey=function(c,d){return 2097152*c+d}(Vt[0],Vt[1]);var Mn=c.styleKeys;c.labelDimsKey=rh(Mn.labelDimensions);var kn=C(f,["label"],Mn.labelDimensions);if(c.labelKey=rh(kn),c.labelStyleKey=rh(gf(Mn.commonLabel,kn)),!E){var ti=C(f,["source-label"],Mn.labelDimensions);c.sourceLabelKey=rh(ti),c.sourceLabelStyleKey=rh(gf(Mn.commonLabel,ti));var Dn=C(f,["target-label"],Mn.labelDimensions);c.targetLabelKey=rh(Dn),c.targetLabelStyleKey=rh(gf(Mn.commonLabel,Dn))}if(E){var Zn=c.styleKeys,Pn=Zn.pie,ai=[Zn.nodeBody,Zn.nodeBorder,Zn.backgroundImage,Zn.compound,Pn].filter(function(Si){return null!=Si}).reduce(gf,[Eh,td]);c.nodeKey=rh(ai),c.hasPie=null!=Pn&&Pn[0]!==Eh&&Pn[1]!==td}return A!==c.styleKey},clearStyleHints:function(f){var c=f._private;c.styleCxtKey="",c.styleKeys={},c.styleKey=null,c.labelKey=null,c.labelStyleKey=null,c.sourceLabelKey=null,c.sourceLabelStyleKey=null,c.targetLabelKey=null,c.targetLabelStyleKey=null,c.nodeKey=null,c.hasPie=null},applyParsedProperty:function(f,c){var C,d=this,m=c,_=f._private.style,A=d.types,E=d.properties[m.name].type,N=m.bypass,R=_[m.name],j=R&&R.bypass,Z=f._private,he="mapping",me=function(hi){return null==hi?null:null!=hi.pfValue?hi.pfValue:hi.value},ye=function(){var hi=me(R),xi=me(m);d.checkTriggers(f,m.name,hi,xi)};if(m&&"pie"===m.name.substr(0,3)&&ge("The pie style properties are deprecated.  Create charts using background images instead."),"curve-style"===c.name&&f.isEdge()&&("bezier"!==c.value&&f.isLoop()||"haystack"===c.value&&(f.source().isParent()||f.target().isParent()))&&(m=c=this.parse(c.name,"bezier",N)),m.delete)return _[m.name]=void 0,ye(),!0;if(m.deleteBypassed)return R?!!R.bypass&&(R.bypassed=void 0,ye(),!0):(ye(),!0);if(m.deleteBypass)return R?!!R.bypass&&(_[m.name]=R.bypassed,ye(),!0):(ye(),!0);var De=function(){ge("Do not assign mappings to elements without corresponding data (i.e. ele `"+f.id()+"` has no mapping for property `"+m.name+"` with data field `"+m.field+"`); try a `["+m.field+"]` selector to limit scope to elements with `"+m.field+"` defined")};switch(m.mapped){case A.mapData:for(var je=m.field.split("."),qe=Z.data,ct=0;ct<je.length&&qe;ct++)qe=qe[je[ct]];if(null==qe)return De(),!1;var Ct;if(!Ne(qe))return ge("Do not use continuous mappers without specifying numeric data (i.e. `"+m.field+": "+qe+"` for `"+f.id()+"` is non-numeric)"),!1;var Gt=m.fieldMax-m.fieldMin;if((Ct=0===Gt?0:(qe-m.fieldMin)/Gt)<0?Ct=0:Ct>1&&(Ct=1),E.color){var Wt=m.valueMin[0],jt=m.valueMin[1],Dt=m.valueMax[1],Zt=m.valueMin[2],Kt=m.valueMax[2],ut=m.valueMin[3]??1,Qt=m.valueMax[3]??1,Vt=[Math.round(Wt+(m.valueMax[0]-Wt)*Ct),Math.round(jt+(Dt-jt)*Ct),Math.round(Zt+(Kt-Zt)*Ct),Math.round(ut+(Qt-ut)*Ct)];C={bypass:m.bypass,name:m.name,value:Vt,strValue:"rgb("+Vt[0]+", "+Vt[1]+", "+Vt[2]+")"}}else{if(!E.number)return!1;C=this.parse(m.name,m.valueMin+(m.valueMax-m.valueMin)*Ct,m.bypass,he)}if(!C)return De(),!1;C.mapping=m,m=C;break;case A.data:for(var sn=m.field.split("."),pn=Z.data,Mn=0;Mn<sn.length&&pn;Mn++)pn=pn[sn[Mn]];if(null!=pn&&(C=this.parse(m.name,pn,m.bypass,he)),!C)return De(),!1;C.mapping=m,m=C;break;case A.fn:var Dn=null!=m.fnValue?m.fnValue:(0,m.value)(f);if(m.prevFnValue=Dn,null==Dn)return ge("Custom function mappers may not return null (i.e. `"+m.name+"` for ele `"+f.id()+"` is null)"),!1;if(!(C=this.parse(m.name,Dn,m.bypass,he)))return ge("Custom function mappers may not return invalid values for the property type (i.e. `"+m.name+"` for ele `"+f.id()+"` is invalid)"),!1;C.mapping=tt(m),m=C;break;case void 0:break;default:return!1}return N?(m.bypassed=j?R.bypassed:R,_[m.name]=m):j?R.bypassed=m:_[m.name]=m,ye(),!0},cleanElements:function(f,c){for(var d=0;d<f.length;d++){var m=f[d];if(this.clearStyleHints(m),m.dirtyCompoundBoundsCache(),m.dirtyBoundingBoxCache(),c)for(var _=m._private.style,C=Object.keys(_),A=0;A<C.length;A++){var E=C[A],N=_[E];null!=N&&(N.bypass?N.bypassed=null:_[E]=null)}else m._private.style={}}},update:function(){this._private.cy.mutableElements().updateStyle()},updateTransitions:function(f,c){var d=this,m=f._private,_=f.pstyle("transition-property").value,C=f.pstyle("transition-duration").pfValue,A=f.pstyle("transition-delay").pfValue;if(_.length>0&&C>0){for(var E={},N=!1,R=0;R<_.length;R++){var j=_[R],Z=f.pstyle(j),he=c[j];if(he){var ye=he.prev,De=null!=he.next?he.next:Z,je=!1,qe=void 0;!ye||(Ne(ye.pfValue)&&Ne(De.pfValue)?qe=ye.pfValue+1e-6*(je=De.pfValue-ye.pfValue):Ne(ye.value)&&Ne(De.value)?qe=ye.value+1e-6*(je=De.value-ye.value):lt(ye.value)&&lt(De.value)&&(je=ye.value[0]!==De.value[0]||ye.value[1]!==De.value[1]||ye.value[2]!==De.value[2],qe=ye.strValue),je&&(E[j]=De.strValue,this.applyBypass(f,j,qe),N=!0))}}if(!N)return;m.transitioning=!0,new ra(function(nt){A>0?f.delayAnimation(A).play().promise().then(nt):nt()}).then(function(){return f.animation({style:E,duration:C,easing:f.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){d.removeBypasses(f,_),f.emitAndNotify("style"),m.transitioning=!1})}else m.transitioning&&(this.removeBypasses(f,_),f.emitAndNotify("style"),m.transitioning=!1)},checkTrigger:function(f,c,d,m,_,C){var A=this.properties[c],E=_(A);null!=E&&E(d,m)&&C(A)},checkZOrderTrigger:function(f,c,d,m){var _=this;this.checkTrigger(f,c,d,m,function(C){return C.triggersZOrder},function(){_._private.cy.notify("zorder",f)})},checkBoundsTrigger:function(f,c,d,m){this.checkTrigger(f,c,d,m,function(_){return _.triggersBounds},function(_){f.dirtyCompoundBoundsCache(),f.dirtyBoundingBoxCache(),_.triggersBoundsOfParallelBeziers&&("curve-style"===c&&("bezier"===d||"bezier"===m)||"display"===c&&("none"===d||"none"===m))&&f.parallelEdges().forEach(function(C){C.isBundledBezier()&&C.dirtyBoundingBoxCache()})})},checkTriggers:function(f,c,d,m){f.dirtyStyleCache(),this.checkZOrderTrigger(f,c,d,m),this.checkBoundsTrigger(f,c,d,m)}},dc={applyBypass:function(f,c,d,m){var C=[];if("*"===c||"**"===c){if(void 0!==d)for(var E=0;E<this.properties.length;E++){var j=this.parse(this.properties[E].name,d,!0);j&&C.push(j)}}else if(Fe(c)){var Z=this.parse(c,d,!0);Z&&C.push(Z)}else{if(!vt(c))return!1;var he=c;m=d;for(var me=Object.keys(he),ye=0;ye<me.length;ye++){var De=me[ye],je=he[De];if(void 0===je&&(je=he[fn(De)]),void 0!==je){var qe=this.parse(De,je,!0);qe&&C.push(qe)}}}if(0===C.length)return!1;for(var ct=!1,nt=0;nt<f.length;nt++){for(var Ct=f[nt],Gt={},Wt=void 0,It=0;It<C.length;It++){var jt=C[It];if(m){var Dt=Ct.pstyle(jt.name);Wt=Gt[jt.name]={prev:Dt}}ct=this.applyParsedProperty(Ct,tt(jt))||ct,m&&(Wt.next=Ct.pstyle(jt.name))}ct&&this.updateStyleHints(Ct),m&&this.updateTransitions(Ct,Gt,!0)}return ct},overrideBypass:function(f,c,d){c=Ot(c);for(var m=0;m<f.length;m++){var _=f[m],C=_._private.style[c],A=this.properties[c].type,E=A.color,N=A.mutiple,R=C?null!=C.pfValue?C.pfValue:C.value:null;C&&C.bypass?(C.value=d,null!=C.pfValue&&(C.pfValue=d),C.strValue=E?"rgb("+d.join(",")+")":N?d.join(" "):""+d,this.updateStyleHints(_)):this.applyBypass(_,c,d),this.checkTriggers(_,c,R,d)}},removeAllBypasses:function(f,c){return this.removeBypasses(f,this.propertyNames,c)},removeBypasses:function(f,c,d){for(var _=0;_<f.length;_++){for(var C=f[_],A={},E=0;E<c.length;E++){var N=c[E],R=this.properties[N],j=C.pstyle(R.name);if(j&&j.bypass){var he=this.parse(N,"",!0),me=A[R.name]={prev:j};this.applyParsedProperty(C,he),me.next=C.pstyle(R.name)}}this.updateStyleHints(C),d&&this.updateTransitions(C,A,!0)}}},Ov={getEmSizeInPixels:function(){var f=this.containerCss("font-size");return null!=f?parseFloat(f):1},containerCss:function(f){var d=this._private.cy.container();if(pe&&d&&pe.getComputedStyle)return pe.getComputedStyle(d).getPropertyValue(f)}},_u={getRenderedStyle:function(f,c){return c?this.getStylePropertyValue(f,c,!0):this.getRawStyle(f,!0)},getRawStyle:function(f,c){var d=this;if(f=f[0]){for(var m={},_=0;_<d.properties.length;_++){var C=d.properties[_],A=d.getStylePropertyValue(f,C.name,c);null!=A&&(m[C.name]=A,m[fn(C.name)]=A)}return m}},getIndexedStyle:function(f,c,d,m){return f.pstyle(c)[d][m]??f.cy().style().getDefaultProperty(c)[d][0]},getStylePropertyValue:function(f,c,d){if(f=f[0]){var _=this.properties[c];_.alias&&(_=_.pointsTo);var C=_.type,A=f.pstyle(_.name);if(A){var E=A.value,N=A.units,R=A.strValue;if(d&&C.number&&null!=E&&Ne(E)){var j=f.cy().zoom(),Z=function(je){return je*j},he=function(je,qe){return Z(je)+qe},me=lt(E);return(me?N.every(function(De){return null!=De}):null!=N)?me?E.map(function(De,je){return he(De,N[je])}).join(" "):he(E,N):me?E.map(function(De){return Fe(De)?De:""+Z(De)}).join(" "):""+Z(E)}if(null!=R)return R}return null}},getAnimationStartStyle:function(f,c){for(var d={},m=0;m<c.length;m++){var C=c[m].name,A=f.pstyle(C);void 0!==A&&(A=vt(A)?this.parse(C,A.strValue):this.parse(C,A)),A&&(d[C]=A)}return d},getPropsList:function(f){var d=[],m=f,_=this.properties;if(m)for(var C=Object.keys(m),A=0;A<C.length;A++){var E=C[A],N=m[E],R=_[E]||_[Ot(E)],j=this.parse(R.name,N);j&&d.push(j)}return d},getNonDefaultPropertiesHash:function(f,c,d){var C,A,E,N,R,m=d.slice();for(N=0;N<c.length;N++)if(null!=(C=f.pstyle(c[N],!1)))if(null!=C.pfValue)m[0]=nd(E,m[0]),m[1]=pl(E,m[1]);else for(A=C.strValue,R=0;R<A.length;R++)E=A.charCodeAt(R),m[0]=nd(E,m[0]),m[1]=pl(E,m[1]);return m}};_u.getPropertiesHash=_u.getNonDefaultPropertiesHash;var El={appendFromJson:function(f){for(var c=this,d=0;d<f.length;d++){var m=f[d],_=m.selector,C=m.style||m.css,A=Object.keys(C);c.selector(_);for(var E=0;E<A.length;E++){var N=A[E];c.css(N,C[N])}}return c},fromJson:function(f){var c=this;return c.resetToDefault(),c.appendFromJson(f),c},json:function(){for(var f=[],c=this.defaultLength;c<this.length;c++){for(var d=this[c],m=d.selector,_=d.properties,C={},A=0;A<_.length;A++){var E=_[A];C[E.name]=E.strValue}f.push({selector:m?m.toString():"core",style:C})}return f}},fc={appendFromString:function(f){var _,C,A,d=this,m=""+f;function E(){m=m.length>_.length?m.substr(_.length):""}function N(){C=C.length>A.length?C.substr(A.length):""}for(m=m.replace(/[/][*](\s|.)+?[*][/]/g,"");!m.match(/^\s*$/);){var j=m.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!j){ge("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+m);break}_=j[0];var Z=j[1];if("core"!==Z&&new op(Z).invalid)ge("Skipping parsing of block: Invalid selector found in string stylesheet: "+Z),E();else{var me=j[2],ye=!1;C=me;for(var De=[];!C.match(/^\s*$/);){var qe=C.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!qe){ge("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+me),ye=!0;break}A=qe[0];var ct=qe[1],nt=qe[2];this.properties[ct]?d.parse(ct,nt)?(De.push({name:ct,val:nt}),N()):(ge("Skipping property: Invalid property definition in: "+A),N()):(ge("Skipping property: Invalid property name in: "+A),N())}if(ye){E();break}d.selector(Z);for(var Wt=0;Wt<De.length;Wt++){var It=De[Wt];d.css(It.name,It.val)}E()}}return d},fromString:function(f){var c=this;return c.resetToDefault(),c.appendFromString(f),c}},Do={};(function(){var f=ze,C=function(ai){return"^"+ai+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},A=function(ai){var Si=f+"|\\w+|rgb[a]?\\((?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)(?:\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)|hsl[a]?\\((?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])(?:\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)|\\#[0-9a-fA-F]{3}|\\#[0-9a-fA-F]{6}";return"^"+ai+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+f+")\\s*\\,\\s*("+f+")\\s*,\\s*("+Si+")\\s*\\,\\s*("+Si+")\\)$"},E=["^url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)$","^(none)$","^(.+)$"];Do.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:C("data")},layoutData:{mapping:!0,regex:C("layoutData")},scratch:{mapping:!0,regex:C("scratch")},mapData:{mapping:!0,regex:A("mapData")},mapLayoutData:{mapping:!0,regex:A("mapLayoutData")},mapScratch:{mapping:!0,regex:A("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:E,singleRegexMatchValue:!0},urls:{regexes:E,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(ai,Si){switch(ai.length){case 2:return"deg"!==Si[0]&&"rad"!==Si[0]&&"deg"!==Si[1]&&"rad"!==Si[1];case 1:return Fe(ai[0])||"deg"===Si[0]||"rad"===Si[0];default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+f+")\\s*,\\s*("+f+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+f+")\\s*,\\s*("+f+")\\s*,\\s*("+f+")\\s*,\\s*("+f+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(ai){var Si=ai.length;return 1===Si||2===Si||4===Si}}};var N={zeroNonZero:function(ai,Si){return(null==ai||null==Si)&&ai!==Si||0==ai&&0!=Si||0!=ai&&0==Si},any:function(ai,Si){return ai!=Si},emptyNonEmpty:function(ai,Si){var Qi=fe(ai),lr=fe(Si);return Qi&&!lr||!Qi&&lr}},R=Do.types,j=[{name:"label",type:R.text,triggersBounds:N.any,triggersZOrder:N.emptyNonEmpty},{name:"text-rotation",type:R.textRotation,triggersBounds:N.any},{name:"text-margin-x",type:R.bidirectionalSize,triggersBounds:N.any},{name:"text-margin-y",type:R.bidirectionalSize,triggersBounds:N.any}],Z=[{name:"source-label",type:R.text,triggersBounds:N.any},{name:"source-text-rotation",type:R.textRotation,triggersBounds:N.any},{name:"source-text-margin-x",type:R.bidirectionalSize,triggersBounds:N.any},{name:"source-text-margin-y",type:R.bidirectionalSize,triggersBounds:N.any},{name:"source-text-offset",type:R.size,triggersBounds:N.any}],he=[{name:"target-label",type:R.text,triggersBounds:N.any},{name:"target-text-rotation",type:R.textRotation,triggersBounds:N.any},{name:"target-text-margin-x",type:R.bidirectionalSize,triggersBounds:N.any},{name:"target-text-margin-y",type:R.bidirectionalSize,triggersBounds:N.any},{name:"target-text-offset",type:R.size,triggersBounds:N.any}],me=[{name:"font-family",type:R.fontFamily,triggersBounds:N.any},{name:"font-style",type:R.fontStyle,triggersBounds:N.any},{name:"font-weight",type:R.fontWeight,triggersBounds:N.any},{name:"font-size",type:R.size,triggersBounds:N.any},{name:"text-transform",type:R.textTransform,triggersBounds:N.any},{name:"text-wrap",type:R.textWrap,triggersBounds:N.any},{name:"text-overflow-wrap",type:R.textOverflowWrap,triggersBounds:N.any},{name:"text-max-width",type:R.size,triggersBounds:N.any},{name:"text-outline-width",type:R.size,triggersBounds:N.any},{name:"line-height",type:R.positiveNumber,triggersBounds:N.any}],ye=[{name:"text-valign",type:R.valign,triggersBounds:N.any},{name:"text-halign",type:R.halign,triggersBounds:N.any},{name:"color",type:R.color},{name:"text-outline-color",type:R.color},{name:"text-outline-opacity",type:R.zeroOneNumber},{name:"text-background-color",type:R.color},{name:"text-background-opacity",type:R.zeroOneNumber},{name:"text-background-padding",type:R.size,triggersBounds:N.any},{name:"text-border-opacity",type:R.zeroOneNumber},{name:"text-border-color",type:R.color},{name:"text-border-width",type:R.size,triggersBounds:N.any},{name:"text-border-style",type:R.borderStyle,triggersBounds:N.any},{name:"text-background-shape",type:R.textBackgroundShape,triggersBounds:N.any},{name:"text-justification",type:R.justification}],De=[{name:"events",type:R.bool},{name:"text-events",type:R.bool}],je=[{name:"display",type:R.display,triggersZOrder:N.any,triggersBounds:N.any,triggersBoundsOfParallelBeziers:!0},{name:"visibility",type:R.visibility,triggersZOrder:N.any},{name:"opacity",type:R.zeroOneNumber,triggersZOrder:N.zeroNonZero},{name:"text-opacity",type:R.zeroOneNumber},{name:"min-zoomed-font-size",type:R.size},{name:"z-compound-depth",type:R.zCompoundDepth,triggersZOrder:N.any},{name:"z-index-compare",type:R.zIndexCompare,triggersZOrder:N.any},{name:"z-index",type:R.nonNegativeInt,triggersZOrder:N.any}],qe=[{name:"overlay-padding",type:R.size,triggersBounds:N.any},{name:"overlay-color",type:R.color},{name:"overlay-opacity",type:R.zeroOneNumber,triggersBounds:N.zeroNonZero},{name:"overlay-shape",type:R.overlayShape,triggersBounds:N.any}],ct=[{name:"underlay-padding",type:R.size,triggersBounds:N.any},{name:"underlay-color",type:R.color},{name:"underlay-opacity",type:R.zeroOneNumber,triggersBounds:N.zeroNonZero},{name:"underlay-shape",type:R.overlayShape,triggersBounds:N.any}],nt=[{name:"transition-property",type:R.propList},{name:"transition-duration",type:R.time},{name:"transition-delay",type:R.time},{name:"transition-timing-function",type:R.easing}],Ct=function(ai,Si){return"label"===Si.value?-ai.poolIndex():Si.pfValue},Gt=[{name:"height",type:R.nodeSize,triggersBounds:N.any,hashOverride:Ct},{name:"width",type:R.nodeSize,triggersBounds:N.any,hashOverride:Ct},{name:"shape",type:R.nodeShape,triggersBounds:N.any},{name:"shape-polygon-points",type:R.polygonPointList,triggersBounds:N.any},{name:"background-color",type:R.color},{name:"background-fill",type:R.fill},{name:"background-opacity",type:R.zeroOneNumber},{name:"background-blacken",type:R.nOneOneNumber},{name:"background-gradient-stop-colors",type:R.colors},{name:"background-gradient-stop-positions",type:R.percentages},{name:"background-gradient-direction",type:R.gradientDirection},{name:"padding",type:R.sizeMaybePercent,triggersBounds:N.any},{name:"padding-relative-to",type:R.paddingRelativeTo,triggersBounds:N.any},{name:"bounds-expansion",type:R.boundsExpansion,triggersBounds:N.any}],Wt=[{name:"border-color",type:R.color},{name:"border-opacity",type:R.zeroOneNumber},{name:"border-width",type:R.size,triggersBounds:N.any},{name:"border-style",type:R.borderStyle}],It=[{name:"background-image",type:R.urls},{name:"background-image-crossorigin",type:R.bgCrossOrigin},{name:"background-image-opacity",type:R.zeroOneNumbers},{name:"background-image-containment",type:R.bgContainment},{name:"background-image-smoothing",type:R.bools},{name:"background-position-x",type:R.bgPos},{name:"background-position-y",type:R.bgPos},{name:"background-width-relative-to",type:R.bgRelativeTo},{name:"background-height-relative-to",type:R.bgRelativeTo},{name:"background-repeat",type:R.bgRepeat},{name:"background-fit",type:R.bgFit},{name:"background-clip",type:R.bgClip},{name:"background-width",type:R.bgWH},{name:"background-height",type:R.bgWH},{name:"background-offset-x",type:R.bgPos},{name:"background-offset-y",type:R.bgPos}],jt=[{name:"position",type:R.position,triggersBounds:N.any},{name:"compound-sizing-wrt-labels",type:R.compoundIncludeLabels,triggersBounds:N.any},{name:"min-width",type:R.size,triggersBounds:N.any},{name:"min-width-bias-left",type:R.sizeMaybePercent,triggersBounds:N.any},{name:"min-width-bias-right",type:R.sizeMaybePercent,triggersBounds:N.any},{name:"min-height",type:R.size,triggersBounds:N.any},{name:"min-height-bias-top",type:R.sizeMaybePercent,triggersBounds:N.any},{name:"min-height-bias-bottom",type:R.sizeMaybePercent,triggersBounds:N.any}],Dt=[{name:"line-style",type:R.lineStyle},{name:"line-color",type:R.color},{name:"line-fill",type:R.fill},{name:"line-cap",type:R.lineCap},{name:"line-opacity",type:R.zeroOneNumber},{name:"line-dash-pattern",type:R.numbers},{name:"line-dash-offset",type:R.number},{name:"line-gradient-stop-colors",type:R.colors},{name:"line-gradient-stop-positions",type:R.percentages},{name:"curve-style",type:R.curveStyle,triggersBounds:N.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:R.zeroOneNumber,triggersBounds:N.any},{name:"source-endpoint",type:R.edgeEndpoint,triggersBounds:N.any},{name:"target-endpoint",type:R.edgeEndpoint,triggersBounds:N.any},{name:"control-point-step-size",type:R.size,triggersBounds:N.any},{name:"control-point-distances",type:R.bidirectionalSizes,triggersBounds:N.any},{name:"control-point-weights",type:R.numbers,triggersBounds:N.any},{name:"segment-distances",type:R.bidirectionalSizes,triggersBounds:N.any},{name:"segment-weights",type:R.numbers,triggersBounds:N.any},{name:"taxi-turn",type:R.bidirectionalSizeMaybePercent,triggersBounds:N.any},{name:"taxi-turn-min-distance",type:R.size,triggersBounds:N.any},{name:"taxi-direction",type:R.axisDirection,triggersBounds:N.any},{name:"edge-distances",type:R.edgeDistances,triggersBounds:N.any},{name:"arrow-scale",type:R.positiveNumber,triggersBounds:N.any},{name:"loop-direction",type:R.angle,triggersBounds:N.any},{name:"loop-sweep",type:R.angle,triggersBounds:N.any},{name:"source-distance-from-node",type:R.size,triggersBounds:N.any},{name:"target-distance-from-node",type:R.size,triggersBounds:N.any}],Zt=[{name:"ghost",type:R.bool,triggersBounds:N.any},{name:"ghost-offset-x",type:R.bidirectionalSize,triggersBounds:N.any},{name:"ghost-offset-y",type:R.bidirectionalSize,triggersBounds:N.any},{name:"ghost-opacity",type:R.zeroOneNumber}],Kt=[{name:"selection-box-color",type:R.color},{name:"selection-box-opacity",type:R.zeroOneNumber},{name:"selection-box-border-color",type:R.color},{name:"selection-box-border-width",type:R.size},{name:"active-bg-color",type:R.color},{name:"active-bg-opacity",type:R.zeroOneNumber},{name:"active-bg-size",type:R.size},{name:"outside-texture-bg-color",type:R.color},{name:"outside-texture-bg-opacity",type:R.zeroOneNumber}],ut=[];Do.pieBackgroundN=16,ut.push({name:"pie-size",type:R.sizeMaybePercent});for(var Qt=1;Qt<=Do.pieBackgroundN;Qt++)ut.push({name:"pie-"+Qt+"-background-color",type:R.color}),ut.push({name:"pie-"+Qt+"-background-size",type:R.percent}),ut.push({name:"pie-"+Qt+"-background-opacity",type:R.zeroOneNumber});var Vt=[],An=Do.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:R.arrowShape,triggersBounds:N.any},{name:"arrow-color",type:R.color},{name:"arrow-fill",type:R.arrowFill}].forEach(function(Pn){An.forEach(function(ai){Vt.push({name:ai+"-"+Pn.name,type:Pn.type,triggersBounds:Pn.triggersBounds})})},{});var sn=Do.properties=[].concat(De,nt,je,qe,ct,Zt,ye,me,j,Z,he,Gt,Wt,It,ut,jt,Dt,Vt,Kt),pn=Do.propertyGroups={behavior:De,transition:nt,visibility:je,overlay:qe,underlay:ct,ghost:Zt,commonLabel:ye,labelDimensions:me,mainLabel:j,sourceLabel:Z,targetLabel:he,nodeBody:Gt,nodeBorder:Wt,backgroundImage:It,pie:ut,compound:jt,edgeLine:Dt,edgeArrow:Vt,core:Kt},Mn=Do.propertyGroupNames={};(Do.propertyGroupKeys=Object.keys(pn)).forEach(function(Pn){Mn[Pn]=pn[Pn].map(function(ai){return ai.name}),pn[Pn].forEach(function(ai){return ai.groupKey=Pn})});var ti=Do.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];Do.propertyNames=sn.map(function(Pn){return Pn.name});for(var Dn=0;Dn<sn.length;Dn++){var Zn=sn[Dn];sn[Zn.name]=Zn}for(var hi=0;hi<ti.length;hi++){var xi=ti[hi],fi={name:xi.name,alias:!0,pointsTo:sn[xi.pointsTo]};sn.push(fi),sn[xi.name]=fi}})(),Do.getDefaultProperty=function(f){return this.getDefaultProperties()[f]},Do.getDefaultProperties=function(){var f=this._private;if(null!=f.defaultProperties)return f.defaultProperties;for(var c=sr({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(N,R){for(var j=1;j<=Do.pieBackgroundN;j++)N[R.name.replace("{{i}}",j)]=R.value;return N},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"taxi-turn":"50%","taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"}].reduce(function(N,R){return Do.arrowPrefixes.forEach(function(j){N[j+"-"+R.name]=R.value}),N},{})),d={},m=0;m<this.properties.length;m++){var _=this.properties[m];if(!_.pointsTo){var C=_.name,E=this.parse(C,c[C]);d[C]=E}}return f.defaultProperties=d,f.defaultProperties},Do.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var Om={parse:function(f,c,d,m){var _=this;if(Ye(c))return _.parseImplWarn(f,c,d,m);var j,N=Mg(f,""+c,d?"t":"f","mapping"===m||!0===m||!1===m||null==m?"dontcare":m),R=_.propCache=_.propCache||[];return(j=R[N])||(j=R[N]=_.parseImplWarn(f,c,d,m)),(d||"mapping"===m)&&(j=tt(j))&&(j.value=tt(j.value)),j},parseImplWarn:function(f,c,d,m){var _=this.parseImpl(f,c,d,m);return!_&&null!=c&&ge("The style property `".concat(f,": ").concat(c,"` is invalid")),_&&("width"===_.name||"height"===_.name)&&"label"===c&&ge("The style value of `label` is deprecated for `"+_.name+"`"),_}};Om.parseImpl=function(f,c,d,m){var _=this;f=Ot(f);var C=_.properties[f],A=c,E=_.types;if(!C||void 0===c)return null;C.alias&&(f=(C=C.pointsTo).name);var N=Fe(c);N&&(c=c.trim());var j,Z,R=C.type;if(!R)return null;if(d&&(""===c||null===c))return{name:f,value:c,bypass:!0,deleteBypass:!0};if(Ye(c))return{name:f,value:c,strValue:"fn",mapped:E.fn,bypass:d};if(!(!N||m||c.length<7||"a"!==c[1])){if(c.length>=7&&"d"===c[0]&&(j=new RegExp(E.data.regex).exec(c)))return!d&&{name:f,value:j,strValue:""+c,mapped:E.data,field:j[1],bypass:d};if(c.length>=10&&"m"===c[0]&&(Z=new RegExp(E.mapData.regex).exec(c))){if(d||R.multiple)return!1;var me=E.mapData;if(!R.color&&!R.number)return!1;var ye=this.parse(f,Z[4]);if(!ye||ye.mapped)return!1;var De=this.parse(f,Z[5]);if(!De||De.mapped)return!1;if(ye.pfValue===De.pfValue||ye.strValue===De.strValue)return ge("`"+f+": "+c+"` is not a valid mapper because the output range is zero; converting to `"+f+": "+ye.strValue+"`"),this.parse(f,ye.strValue);if(R.color){var je=ye.value,qe=De.value;if(!(je[0]!==qe[0]||je[1]!==qe[1]||je[2]!==qe[2]||je[3]!==qe[3]&&(null!=je[3]&&1!==je[3]||null!=qe[3]&&1!==qe[3])))return!1}return{name:f,value:Z,strValue:""+c,mapped:me,field:Z[1],fieldMin:parseFloat(Z[2]),fieldMax:parseFloat(Z[3]),valueMin:ye.value,valueMax:De.value,bypass:d}}}if(R.multiple&&"multiple"!==m){var nt;if(nt=N?c.split(/\s+/):lt(c)?c:[c],R.evenMultiple&&nt.length%2!=0)return null;for(var Ct=[],Gt=[],Wt=[],It="",jt=!1,Dt=0;Dt<nt.length;Dt++){var Zt=_.parse(f,nt[Dt],d,"multiple");jt=jt||Fe(Zt.value),Ct.push(Zt.value),Wt.push(null!=Zt.pfValue?Zt.pfValue:Zt.value),Gt.push(Zt.units),It+=(Dt>0?" ":"")+Zt.strValue}return R.validate&&!R.validate(Ct,Gt)?null:R.singleEnum&&jt?1===Ct.length&&Fe(Ct[0])?{name:f,value:Ct[0],strValue:Ct[0],bypass:d}:null:{name:f,value:Ct,pfValue:Wt,strValue:It,bypass:d,units:Gt}}var Kt=function(){for(var Si=0;Si<R.enums.length;Si++)if(R.enums[Si]===c)return{name:f,value:c,strValue:""+c,bypass:d};return null};if(R.number){var ut,Qt="px";if(R.units&&(ut=R.units),R.implicitUnits&&(Qt=R.implicitUnits),!R.unitless)if(N){var Vt="px|em"+(R.allowPercent?"|\\%":"");ut&&(Vt=ut);var An=c.match("^("+ze+")("+Vt+")?$");An&&(c=An[1],ut=An[2]||Qt)}else(!ut||R.implicitUnits)&&(ut=Qt);if(c=parseFloat(c),isNaN(c)&&void 0===R.enums)return null;if(isNaN(c)&&void 0!==R.enums)return c=A,Kt();if(R.integer&&!function(c){return Ne(c)&&Math.floor(c)===c}(c)||void 0!==R.min&&(c<R.min||R.strictMin&&c===R.min)||void 0!==R.max&&(c>R.max||R.strictMax&&c===R.max))return null;var sn={name:f,value:c,strValue:""+c+(ut||""),units:ut,bypass:d};return sn.pfValue=R.unitless||"px"!==ut&&"em"!==ut?c:"px"!==ut&&ut?this.getEmSizeInPixels()*c:c,("ms"===ut||"s"===ut)&&(sn.pfValue="ms"===ut?c:1e3*c),("deg"===ut||"rad"===ut)&&(sn.pfValue="rad"===ut?c:function(c){return Math.PI*c/180}(c)),"%"===ut&&(sn.pfValue=c/100),sn}if(R.propList){var pn=[],Mn=""+c;if("none"!==Mn){for(var kn=Mn.split(/\s*,\s*|\s+/),ti=0;ti<kn.length;ti++){var Dn=kn[ti].trim();_.properties[Dn]?pn.push(Dn):ge("`"+Dn+"` is not a valid property name")}if(0===pn.length)return null}return{name:f,value:pn,strValue:0===pn.length?"none":pn.join(" "),bypass:d}}if(R.color){var Zn=function(c){return(lt(c)?c:null)||function(c){return ih[c.toLowerCase()]}(c)||function(c){if((4===c.length||7===c.length)&&"#"===c[0]){var m,_,C,A=16;return 4===c.length?(m=parseInt(c[1]+c[1],A),_=parseInt(c[2]+c[2],A),C=parseInt(c[3]+c[3],A)):(m=parseInt(c[1]+c[2],A),_=parseInt(c[3]+c[4],A),C=parseInt(c[5]+c[6],A)),[m,_,C]}}(c)||function(c){var d,m=new RegExp("^rgb[a]?\\(((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)(?:\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)$").exec(c);if(m){d=[];for(var _=[],C=1;C<=3;C++){var A=m[C];if("%"===A[A.length-1]&&(_[C]=!0),A=parseFloat(A),_[C]&&(A=A/100*255),A<0||A>255)return;d.push(Math.floor(A))}if((_[1]||_[2]||_[3])&&!(_[1]&&_[2]&&_[3]))return;var R=m[4];if(void 0!==R){if((R=parseFloat(R))<0||R>1)return;d.push(R)}}return d}(c)||function(c){var d,m,_,C,A,E,N,R;function j(ye,De,je){return je<0&&(je+=1),je>1&&(je-=1),je<1/6?ye+6*(De-ye)*je:je<.5?De:je<2/3?ye+(De-ye)*(2/3-je)*6:ye}var Z=new RegExp("^hsl[a]?\\(((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])(?:\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)$").exec(c);if(Z){if((m=parseInt(Z[1]))<0?m=(360- -1*m%360)%360:m>360&&(m%=360),m/=360,(_=parseFloat(Z[2]))<0||_>100||(_/=100,(C=parseFloat(Z[3]))<0||C>100)||(C/=100,void 0!==(A=Z[4])&&((A=parseFloat(A))<0||A>1)))return;if(0===_)E=N=R=Math.round(255*C);else{var he=C<.5?C*(1+_):C+_-C*_,me=2*C-he;E=Math.round(255*j(me,he,m+1/3)),N=Math.round(255*j(me,he,m)),R=Math.round(255*j(me,he,m-1/3))}d=[E,N,R,A]}return d}(c)}(c);return Zn?{name:f,value:Zn,pfValue:Zn,strValue:"rgb("+Zn[0]+","+Zn[1]+","+Zn[2]+")",bypass:d}:null}if(R.regex||R.regexes){if(R.enums){var hi=Kt();if(hi)return hi}for(var xi=R.regexes?R.regexes:[R.regex],mi=0;mi<xi.length;mi++){var Pn=new RegExp(xi[mi]).exec(c);if(Pn)return{name:f,value:R.singleRegexMatchValue?Pn[1]:Pn,strValue:""+c,bypass:d}}return null}return R.string?{name:f,value:""+c,strValue:""+c,bypass:d}:R.enums?Kt():null};var tc=function f(c){if(!(this instanceof f))return new f(c);Lt(c)?(this._private={cy:c,coreStyle:{}},this.length=0,this.resetToDefault()):pt("A style must have a core reference")},zl=tc.prototype;zl.instanceString=function(){return"style"},zl.clear=function(){for(var f=this._private,d=f.cy.elements(),m=0;m<this.length;m++)this[m]=void 0;return this.length=0,f.contextStyles={},f.propDiffs={},this.cleanElements(d,!0),d.forEach(function(_){var C=_[0]._private;C.styleDirty=!0,C.appliedInitStyle=!1}),this},zl.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},zl.core=function(f){return this._private.coreStyle[f]||this.getDefaultProperty(f)},zl.selector=function(f){var c="core"===f?null:new op(f),d=this.length++;return this[d]={selector:c,properties:[],mappedProperties:[],index:d},this},zl.css=function(){var f=this,c=arguments;if(1===c.length)for(var d=c[0],m=0;m<f.properties.length;m++){var _=f.properties[m],C=d[_.name];void 0===C&&(C=d[fn(_.name)]),void 0!==C&&this.cssRule(_.name,C)}else 2===c.length&&this.cssRule(c[0],c[1]);return this},zl.style=zl.css,zl.cssRule=function(f,c){var d=this.parse(f,c);if(d){var m=this.length-1;this[m].properties.push(d),this[m].properties[d.name]=d,d.name.match(/pie-(\d+)-background-size/)&&d.value&&(this._private.hasPie=!0),d.mapped&&this[m].mappedProperties.push(d),!this[m].selector&&(this._private.coreStyle[d.name]=d)}return this},zl.append=function(f){return Ut(f)?f.appendToStyle(this):lt(f)?this.appendFromJson(f):Fe(f)&&this.appendFromString(f),this},tc.fromJson=function(f,c){var d=new tc(f);return d.fromJson(c),d},tc.fromString=function(f,c){return new tc(f).fromString(c)},[ka,dc,Ov,_u,El,fc,Do,Om].forEach(function(f){sr(zl,f)}),tc.types=zl.types,tc.properties=zl.properties,tc.propertyGroups=zl.propertyGroups,tc.propertyGroupNames=zl.propertyGroupNames,tc.propertyGroupKeys=zl.propertyGroupKeys;var Yg={style:function(c){return c&&this.setStyle(c).update(),this._private.style},setStyle:function(c){var d=this._private;return d.style=Ut(c)?c.generateStyle(this):lt(c)?tc.fromJson(this,c):Fe(c)?tc.fromString(this,c):tc(this),d.style},updateStyle:function(){this.mutableElements().updateStyle()}},Hh={autolock:function(c){return void 0===c?this._private.autolock:(this._private.autolock=!!c,this)},autoungrabify:function(c){return void 0===c?this._private.autoungrabify:(this._private.autoungrabify=!!c,this)},autounselectify:function(c){return void 0===c?this._private.autounselectify:(this._private.autounselectify=!!c,this)},selectionType:function(c){var d=this._private;return null==d.selectionType&&(d.selectionType="single"),void 0===c?d.selectionType:(("additive"===c||"single"===c)&&(d.selectionType=c),this)},panningEnabled:function(c){return void 0===c?this._private.panningEnabled:(this._private.panningEnabled=!!c,this)},userPanningEnabled:function(c){return void 0===c?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!c,this)},zoomingEnabled:function(c){return void 0===c?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!c,this)},userZoomingEnabled:function(c){return void 0===c?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!c,this)},boxSelectionEnabled:function(c){return void 0===c?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!c,this)},pan:function(){var m,_,C,A,E,c=arguments,d=this._private.pan;switch(c.length){case 0:return d;case 1:if(Fe(c[0]))return d[m=c[0]];if(vt(c[0])){if(!this._private.panningEnabled)return this;E=(C=c[0]).y,Ne(A=C.x)&&(d.x=A),Ne(E)&&(d.y=E),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;_=c[1],("x"===(m=c[0])||"y"===m)&&Ne(_)&&(d[m]=_),this.emit("pan viewport")}return this.notify("viewport"),this},panBy:function(c,d){var C,A,E,N,R,m=arguments,_=this._private.pan;if(!this._private.panningEnabled)return this;switch(m.length){case 1:vt(c)&&(R=(E=m[0]).y,Ne(N=E.x)&&(_.x+=N),Ne(R)&&(_.y+=R),this.emit("pan viewport"));break;case 2:A=d,("x"===(C=c)||"y"===C)&&Ne(A)&&(_[C]+=A),this.emit("pan viewport")}return this.notify("viewport"),this},fit:function(c,d){var m=this.getFitViewport(c,d);if(m){var _=this._private;_.zoom=m.zoom,_.pan=m.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(c,d){var m;if((Ne(c)&&void 0===d&&(d=c,c=void 0),this._private.panningEnabled&&this._private.zoomingEnabled)&&(Fe(c)?c=this.$(c):!function(c){return vt(c)&&Ne(c.x1)&&Ne(c.x2)&&Ne(c.y1)&&Ne(c.y2)}(c)?Ge(c)||(c=this.mutableElements()):((m={x1:c.x1,y1:c.y1,x2:c.x2,y2:c.y2}).w=m.x2-m.x1,m.h=m.y2-m.y1),!Ge(c)||!c.empty())){m=m||c.boundingBox();var N,A=this.width(),E=this.height();if(d=Ne(d)?d:0,!isNaN(A)&&!isNaN(E)&&A>0&&E>0&&!isNaN(m.w)&&!isNaN(m.h)&&m.w>0&&m.h>0)return{zoom:N=(N=(N=Math.min((A-2*d)/m.w,(E-2*d)/m.h))>this._private.maxZoom?this._private.maxZoom:N)<this._private.minZoom?this._private.minZoom:N,pan:{x:(A-N*(m.x1+m.x2))/2,y:(E-N*(m.y1+m.y2))/2}}}},zoomRange:function(c,d){var m=this._private;if(null==d){var _=c;c=_.min,d=_.max}return Ne(c)&&Ne(d)&&c<=d?(m.minZoom=c,m.maxZoom=d):Ne(c)&&void 0===d&&c<=m.maxZoom?m.minZoom=c:Ne(d)&&void 0===c&&d>=m.minZoom&&(m.maxZoom=d),this},minZoom:function(c){return void 0===c?this._private.minZoom:this.zoomRange({min:c})},maxZoom:function(c){return void 0===c?this._private.maxZoom:this.zoomRange({max:c})},getZoomedViewport:function(c){var C,A,d=this._private,m=d.pan,_=d.zoom,E=!1;return d.zoomingEnabled||(E=!0),Ne(c)?A=c:vt(c)&&(A=c.level,null!=c.position?C=Yo(c.position,_,m):null!=c.renderedPosition&&(C=c.renderedPosition),null!=C&&!d.panningEnabled&&(E=!0)),A=(A=A>d.maxZoom?d.maxZoom:A)<d.minZoom?d.minZoom:A,!E&&Ne(A)&&A!==_&&(null==C||Ne(C.x)&&Ne(C.y))?null!=C?{zoomed:!0,panned:!0,zoom:A,pan:{x:-A/_*(C.x-m.x)+C.x,y:-A/_*(C.y-m.y)+C.y}}:{zoomed:!0,panned:!1,zoom:A,pan:m}:null},zoom:function(c){if(void 0===c)return this._private.zoom;var d=this.getZoomedViewport(c),m=this._private;return null!=d&&d.zoomed?(m.zoom=d.zoom,d.panned&&(m.pan.x=d.pan.x,m.pan.y=d.pan.y),this.emit("zoom"+(d.panned?" pan":"")+" viewport"),this.notify("viewport"),this):this},viewport:function(c){var d=this._private,m=!0,_=!0,C=[],A=!1,E=!1;if(!c)return this;if(Ne(c.zoom)||(m=!1),vt(c.pan)||(_=!1),!m&&!_)return this;if(m){var N=c.zoom;N<d.minZoom||N>d.maxZoom||!d.zoomingEnabled?A=!0:(d.zoom=N,C.push("zoom"))}if(_&&(!A||!c.cancelOnFailedZoom)&&d.panningEnabled){var R=c.pan;Ne(R.x)&&(d.pan.x=R.x,E=!1),Ne(R.y)&&(d.pan.y=R.y,E=!1),E||C.push("pan")}return C.length>0&&(C.push("viewport"),this.emit(C.join(" ")),this.notify("viewport")),this},center:function(c){var d=this.getCenterPan(c);return d&&(this._private.pan=d,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(c,d){if(this._private.panningEnabled){if(Fe(c)){var m=c;c=this.mutableElements().filter(m)}else Ge(c)||(c=this.mutableElements());if(0!==c.length){var _=c.boundingBox(),C=this.width(),A=this.height();return{x:(C-(d=void 0===d?this._private.zoom:d)*(_.x1+_.x2))/2,y:(A-d*(_.y1+_.y2))/2}}}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},invalidateSize:function(){this._private.sizeCache=null},size:function(){var m,_,c=this._private,d=c.container;return c.sizeCache=c.sizeCache||(d?(m=pe.getComputedStyle(d),{width:d.clientWidth-(_=function(A){return parseFloat(m.getPropertyValue(A))})("padding-left")-_("padding-right"),height:d.clientHeight-_("padding-top")-_("padding-bottom")}):{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var c=this._private.pan,d=this._private.zoom,m=this.renderedExtent(),_={x1:(m.x1-c.x)/d,x2:(m.x2-c.x)/d,y1:(m.y1-c.y)/d,y2:(m.y2-c.y)/d};return _.w=_.x2-_.x1,_.h=_.y2-_.y1,_},renderedExtent:function(){var c=this.width(),d=this.height();return{x1:0,y1:0,x2:c,y2:d,w:c,h:d}},multiClickDebounceTime:function(c){return c?(this._private.multiClickDebounceTime=c,this):this._private.multiClickDebounceTime}};Hh.centre=Hh.center,Hh.autolockNodes=Hh.autolock,Hh.autoungrabifyNodes=Hh.autoungrabify;var Js={data:ys.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:ys.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:ys.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:ys.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};Js.attr=Js.data,Js.removeAttr=Js.removeData;var pc=function(c){var d=this,m=(c=sr({},c)).container;m&&!rt(m)&&rt(m[0])&&(m=m[0]);var _=m?m._cyreg:null;(_=_||{})&&_.cy&&(_.cy.destroy(),_={});var C=_.readies=_.readies||[];m&&(m._cyreg=_),_.cy=d;var A=void 0!==pe&&void 0!==m&&!c.headless,E=c;E.layout=sr({name:A?"grid":"null"},E.layout),E.renderer=sr({name:A?"canvas":"null"},E.renderer);var N=function(ye,De,je){return void 0!==De?De:void 0!==je?je:ye},R=this._private={container:m,ready:!1,options:E,elements:new la(this),listeners:[],aniEles:new la(this),data:E.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:N(!0,E.zoomingEnabled),userZoomingEnabled:N(!0,E.userZoomingEnabled),panningEnabled:N(!0,E.panningEnabled),userPanningEnabled:N(!0,E.userPanningEnabled),boxSelectionEnabled:N(!0,E.boxSelectionEnabled),autolock:N(!1,E.autolock,E.autolockNodes),autoungrabify:N(!1,E.autoungrabify,E.autoungrabifyNodes),autounselectify:N(!1,E.autounselectify),styleEnabled:void 0===E.styleEnabled?A:E.styleEnabled,zoom:Ne(E.zoom)?E.zoom:1,pan:{x:vt(E.pan)&&Ne(E.pan.x)?E.pan.x:0,y:vt(E.pan)&&Ne(E.pan.y)?E.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:N(250,E.multiClickDebounceTime)};this.createEmitter(),this.selectionType(E.selectionType),this.zoomRange({min:E.minZoom,max:E.maxZoom}),R.styleEnabled&&d.setStyle([]);var Z=sr({},E,E.renderer);d.initRenderer(Z),function(ye,De){if(ye.some(Un))return ra.all(ye).then(De);De(ye)}([E.style,E.elements],function(me){var ye=me[0],De=me[1];R.styleEnabled&&d.style().append(ye),function(ye,De,je){d.notifications(!1);var qe=d.mutableElements();qe.length>0&&qe.remove(),null!=ye&&(vt(ye)||lt(ye))&&d.add(ye),d.one("layoutready",function(nt){d.notifications(!0),d.emit(nt),d.one("load",De),d.emitAndNotify("load")}).one("layoutstop",function(){d.one("done",je),d.emit("done")});var ct=sr({},d._private.options.layout);ct.eles=d.elements(),d.layout(ct).run()}(De,function(){d.startAnimationLoop(),R.ready=!0,Ye(E.ready)&&d.on("ready",E.ready);for(var je=0;je<C.length;je++)d.on("ready",C[je]);_&&(_.readies=[]),d.emit("ready")},E.done)})},gh=pc.prototype;sr(gh,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(c){return this.isReady()?this.emitter().emit("ready",[],c):this.on("ready",c),this},destroy:function(){var c=this;if(!c.destroyed())return c.stopAnimationLoop(),c.destroyRenderer(),this.emit("destroy"),c._private.destroyed=!0,c},hasElementWithId:function(c){return this._private.elements.hasElementWithId(c)},getElementById:function(c){return this._private.elements.getElementById(c)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(c){return this._private.elements.merge(c),this},removeFromPool:function(c){return this._private.elements.unmerge(c),this},container:function(){return this._private.container||null},mount:function(c){if(null!=c){var d=this,m=d._private,_=m.options;return!rt(c)&&rt(c[0])&&(c=c[0]),d.stopAnimationLoop(),d.destroyRenderer(),m.container=c,m.styleEnabled=!0,d.invalidateSize(),d.initRenderer(sr({},_,_.renderer,{name:"null"===_.renderer.name?"canvas":_.renderer.name})),d.startAnimationLoop(),d.style(_.style),d.emit("mount"),d}},unmount:function(){var c=this;return c.stopAnimationLoop(),c.destroyRenderer(),c.initRenderer({name:"null"}),c.emit("unmount"),c},options:function(){return tt(this._private.options)},json:function(c){var d=this,m=d._private,_=d.mutableElements();if(vt(c)){if(d.startBatch(),c.elements){var A={},E=function(Ct,Gt){for(var Wt=[],It=[],jt=0;jt<Ct.length;jt++){var Dt=Ct[jt];if(Dt.data.id){var Zt=""+Dt.data.id,Kt=d.getElementById(Zt);A[Zt]=!0,0!==Kt.length?It.push({ele:Kt,json:Dt}):(Gt&&(Dt.group=Gt),Wt.push(Dt))}else ge("cy.json() cannot handle elements without an ID attribute")}d.add(Wt);for(var ut=0;ut<It.length;ut++){var Qt=It[ut];Qt.ele.json(Qt.json)}};if(lt(c.elements))E(c.elements);else for(var N=["nodes","edges"],R=0;R<N.length;R++){var j=N[R],Z=c.elements[j];lt(Z)&&E(Z,j)}var he=d.collection();_.filter(function(nt){return!A[nt.id()]}).forEach(function(nt){nt.isParent()?he.merge(nt):nt.remove()}),he.forEach(function(nt){return nt.children().move({parent:null})}),he.forEach(function(nt){return(Ct=nt,d.getElementById(Ct.id())).remove();var Ct})}c.style&&d.style(c.style),null!=c.zoom&&c.zoom!==m.zoom&&d.zoom(c.zoom),c.pan&&(c.pan.x!==m.pan.x||c.pan.y!==m.pan.y)&&d.pan(c.pan),c.data&&d.data(c.data);for(var me=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],ye=0;ye<me.length;ye++){var De=me[ye];null!=c[De]&&d[De](c[De])}return d.endBatch(),this}var qe={};c?qe.elements=this.elements().map(function(nt){return nt.json()}):(qe.elements={},_.forEach(function(nt){var Ct=nt.group();qe.elements[Ct]||(qe.elements[Ct]=[]),qe.elements[Ct].push(nt.json())})),this._private.styleEnabled&&(qe.style=d.style().json()),qe.data=tt(d.data());var ct=m.options;return qe.zoomingEnabled=m.zoomingEnabled,qe.userZoomingEnabled=m.userZoomingEnabled,qe.zoom=m.zoom,qe.minZoom=m.minZoom,qe.maxZoom=m.maxZoom,qe.panningEnabled=m.panningEnabled,qe.userPanningEnabled=m.userPanningEnabled,qe.pan=tt(m.pan),qe.boxSelectionEnabled=m.boxSelectionEnabled,qe.renderer=tt(ct.renderer),qe.hideEdgesOnViewport=ct.hideEdgesOnViewport,qe.textureOnViewport=ct.textureOnViewport,qe.wheelSensitivity=ct.wheelSensitivity,qe.motionBlur=ct.motionBlur,qe.multiClickDebounceTime=ct.multiClickDebounceTime,qe}}),gh.$id=gh.getElementById,[Ns,Ra,Uu,Xd,Ga,yu,Gu,Sl,Yg,Hh,Js].forEach(function(f){sr(gh,f)});var fp={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,maximal:!1,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(c,d){return!0},ready:void 0,stop:void 0,transform:function(c,d){return d}},Gh=function(c){return c.scratch("breadthfirst")},bu=function(c,d){return c.scratch("breadthfirst",d)};function Mf(f){this.options=sr({},fp,f)}Mf.prototype.run=function(){var R,f=this.options,c=f,d=f.cy,m=c.eles,_=m.nodes().filter(function(mr){return!mr.isParent()}),C=m,A=c.directed,E=c.maximal||c.maximalAdjustments>0,N=Tc(c.boundingBox?c.boundingBox:{x1:0,y1:0,w:d.width(),h:d.height()});if(Ge(c.roots))R=c.roots;else if(lt(c.roots)){for(var j=[],Z=0;Z<c.roots.length;Z++){var me=d.getElementById(c.roots[Z]);j.push(me)}R=d.collection(j)}else if(Fe(c.roots))R=d.$(c.roots);else if(A)R=_.roots();else{var ye=m.components();R=d.collection();for(var De=function(or){var Yr=ye[or],ki=Yr.maxDegree(!1),br=Yr.filter(function(wr){return wr.degree(!1)===ki});R=R.add(br)},je=0;je<ye.length;je++)De(je)}var qe=[],ct={},nt=function(or,Yr){null==qe[Yr]&&(qe[Yr]=[]);var ki=qe[Yr].length;qe[Yr].push(or),bu(or,{index:ki,depth:Yr})};C.bfs({roots:R,directed:c.directed,visit:function(or,Yr,ki,br,wr){var Qr=or[0],Bs=Qr.id();nt(Qr,wr),ct[Bs]=!0}});for(var Gt=[],Wt=0;Wt<_.length;Wt++){var It=_[Wt];ct[It.id()]||Gt.push(It)}var jt=function(or){for(var Yr=qe[or],ki=0;ki<Yr.length;ki++){var br=Yr[ki];null!=br?bu(br,{depth:or,index:ki}):(Yr.splice(ki,1),ki--)}},Dt=function(){for(var or=0;or<qe.length;or++)jt(or)},Zt=function(or,Yr){for(var ki=Gh(or),br=or.incomers().filter(function(Nt){return Nt.isNode()&&m.has(Nt)}),wr=-1,Qr=or.id(),Bs=0;Bs<br.length;Bs++){var $i=Gh(br[Bs]);wr=Math.max(wr,$i.depth)}return ki.depth<=wr&&(Yr[Qr]?null:(function(or,Yr){var ki=Gh(or);qe[ki.depth][ki.index]=null,nt(or,Yr)}(or,wr+1),Yr[Qr]=!0,!0))};if(A&&E){var Kt=[],ut={},Qt=function(or){return Kt.push(or)};for(_.forEach(function(mr){return Kt.push(mr)});Kt.length>0;){var An=Kt.shift(),sn=Zt(An,ut);if(sn)An.outgoers().filter(function(mr){return mr.isNode()&&m.has(mr)}).forEach(Qt);else if(null===sn){ge("Detected double maximal shift for node `"+An.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}Dt();var pn=0;if(c.avoidOverlap)for(var Mn=0;Mn<_.length;Mn++){var ti=_[Mn].layoutDimensions(c);pn=Math.max(pn,ti.w,ti.h)}var hi={},xi=function(or){if(hi[or.id()])return hi[or.id()];for(var Yr=Gh(or).depth,ki=or.neighborhood(),br=0,wr=0,Qr=0;Qr<ki.length;Qr++){var Bs=ki[Qr];if(!Bs.isEdge()&&!Bs.isParent()&&_.has(Bs)){var Jr=Gh(Bs);if(null!=Jr){var $i=Jr.index,Nt=Jr.depth;null!=$i&&null!=Nt&&Nt<Yr&&(br+=$i/qe[Nt].length,wr++)}}}return br/=wr=Math.max(1,wr),0===wr&&(br=0),hi[or.id()]=br,br},mi=function(or,Yr){var wr=xi(or)-xi(Yr);return 0===wr?ws(or.id(),Yr.id()):wr};void 0!==c.depthSort&&(mi=c.depthSort);for(var fi=0;fi<qe.length;fi++)qe[fi].sort(mi),jt(fi);for(var Pn=[],ai=0;ai<Gt.length;ai++)Pn.push(Gt[ai]);qe.unshift(Pn),Dt();for(var Si=0,Qi=0;Qi<qe.length;Qi++)Si=Math.max(qe[Qi].length,Si);var lr_x=N.x1+N.w/2,lr_y=N.x1+N.h/2,Hr=qe.reduce(function(mr,or){return Math.max(mr,or.length)},0);return m.nodes().layoutPositions(this,c,function(or){var Yr=Gh(or),ki=Yr.depth,br=Yr.index,wr=qe[ki].length,Qr=Math.max(N.w/((c.grid?Hr:wr)+1),pn),Bs=Math.max(N.h/(qe.length+1),pn),Jr=Math.min(N.w/2/qe.length,N.h/2/qe.length);if(Jr=Math.max(Jr,pn),c.circle){var Nt=Jr*ki+Jr-(qe.length>0&&qe[0].length<=3?Jr/2:0),Kn=2*Math.PI/qe[ki].length*br;return 0===ki&&1===qe[0].length&&(Nt=1),{x:lr_x+Nt*Math.cos(Kn),y:lr_y+Nt*Math.sin(Kn)}}return{x:lr_x+(br+1-(wr+1)/2)*Qr,y:(ki+1)*Bs}}),this};var Df={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(c,d){return!0},ready:void 0,stop:void 0,transform:function(c,d){return d}};function Kg(f){this.options=sr({},Df,f)}Kg.prototype.run=function(){var f=this.options,c=f,d=f.cy,m=c.eles,_=void 0!==c.counterclockwise?!c.counterclockwise:c.clockwise,C=m.nodes().not(":parent");c.sort&&(C=C.sort(c.sort));for(var j,A=Tc(c.boundingBox?c.boundingBox:{x1:0,y1:0,w:d.width(),h:d.height()}),E={x:A.x1+A.w/2,y:A.y1+A.h/2},R=(void 0===c.sweep?2*Math.PI-2*Math.PI/C.length:c.sweep)/Math.max(1,C.length-1),Z=0,he=0;he<C.length;he++){var ye=C[he].layoutDimensions(c);Z=Math.max(Z,ye.w,ye.h)}if(j=Ne(c.radius)?c.radius:C.length<=1?0:Math.min(A.h,A.w)/2-Z,C.length>1&&c.avoidOverlap){Z*=1.75;var qe=Math.cos(R)-Math.cos(0),ct=Math.sin(R)-Math.sin(0),nt=Math.sqrt(Z*Z/(qe*qe+ct*ct));j=Math.max(nt,j)}return m.nodes().layoutPositions(this,c,function(Wt,It){var jt=c.startAngle+It*R*(_?1:-1),Dt=j*Math.cos(jt),Zt=j*Math.sin(jt);return{x:E.x+Dt,y:E.y+Zt}}),this};var gc={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(c){return c.degree()},levelWidth:function(c){return c.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(c,d){return!0},ready:void 0,stop:void 0,transform:function(c,d){return d}};function Tl(f){this.options=sr({},gc,f)}Tl.prototype.run=function(){for(var f=this.options,c=f,d=void 0!==c.counterclockwise?!c.counterclockwise:c.clockwise,m=f.cy,_=c.eles,C=_.nodes().not(":parent"),A=Tc(c.boundingBox?c.boundingBox:{x1:0,y1:0,w:m.width(),h:m.height()}),E={x:A.x1+A.w/2,y:A.y1+A.h/2},N=[],R=0,j=0;j<C.length;j++){var he,Z=C[j];he=c.concentric(Z),N.push({value:he,node:Z}),Z._private.scratch.concentric=he}C.updateStyle();for(var me=0;me<C.length;me++){var De=C[me].layoutDimensions(c);R=Math.max(R,De.w,De.h)}N.sort(function(mr,or){return or.value-mr.value});for(var je=c.levelWidth(C),qe=[[]],ct=qe[0],nt=0;nt<N.length;nt++){var Ct=N[nt];ct.length>0&&Math.abs(ct[0].value-Ct.value)>=je&&qe.push(ct=[]),ct.push(Ct)}var Wt=R+c.minNodeSpacing;if(!c.avoidOverlap){var It=qe.length>0&&qe[0].length>1,jt=Math.min(A.w,A.h)/2-Wt;Wt=Math.min(Wt,jt/(qe.length+It?1:0))}for(var Zt=0,Kt=0;Kt<qe.length;Kt++){var ut=qe[Kt],Qt=void 0===c.sweep?2*Math.PI-2*Math.PI/ut.length:c.sweep,Vt=ut.dTheta=Qt/Math.max(1,ut.length-1);if(ut.length>1&&c.avoidOverlap){var An=Math.cos(Vt)-Math.cos(0),sn=Math.sin(Vt)-Math.sin(0),pn=Math.sqrt(Wt*Wt/(An*An+sn*sn));Zt=Math.max(pn,Zt)}ut.r=Zt,Zt+=Wt}if(c.equidistant){for(var Mn=0,kn=0,ti=0;ti<qe.length;ti++)Mn=Math.max(Mn,qe[ti].r-kn);kn=0;for(var hi=0;hi<qe.length;hi++){var xi=qe[hi];0===hi&&(kn=xi.r),xi.r=kn,kn+=Mn}}for(var mi={},fi=0;fi<qe.length;fi++)for(var Pn=qe[fi],ai=Pn.dTheta,Si=Pn.r,Qi=0;Qi<Pn.length;Qi++){var lr=Pn[Qi],Hr=c.startAngle+(d?1:-1)*ai*Qi,Zr={x:E.x+Si*Math.cos(Hr),y:E.y+Si*Math.sin(Hr)};mi[lr.node.id()]=Zr}return _.nodes().layoutPositions(this,c,function(mr){var or=mr.id();return mi[or]}),this};var Wh,Yd={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(c,d){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(c){return 2048},nodeOverlap:4,idealEdgeLength:function(c){return 32},edgeElasticity:function(c){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function Wu(f){this.options=sr({},Yd,f),this.options.layout=this}Wu.prototype.run=function(){var f=this.options,c=f.cy,d=this;d.stopped=!1,(!0===f.animate||!1===f.animate)&&d.emit({type:"layoutstart",layout:d}),Wh=!0===f.debug;var m=dd(c,d,f);Wh&&(void 0)(m),f.randomize&&Kd(m);var _=Sa(),C=function(){Nm(m,c,f),!0===f.fit&&c.fit(f.padding)},A=function(he){return!(d.stopped||he>=f.numIter||(Zg(m,f),m.temperature=m.temperature*f.coolingFactor,m.temperature<f.minTemp))},E=function(){if(!0===f.animate||!1===f.animate)C(),d.one("layoutstop",f.stop),d.emit({type:"layoutstop",layout:d});else{var he=f.eles.nodes(),me=Cu(m,f,he);he.layoutPositions(d,f,me)}},N=0,R=!0;if(!0===f.animate)!function Z(){for(var he=0;R&&he<f.refresh;)R=A(N),N++,he++;R?(Sa()-_>=f.animationThreshold&&C(),uu(Z)):(fd(m,f),E())}();else{for(;R;)R=A(N),N++;fd(m,f),E()}return this},Wu.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this},Wu.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var dd=function(c,d,m){for(var _=m.eles.edges(),C=m.eles.nodes(),A={isCompound:c.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:C.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:_.size(),temperature:m.initialTemp,clientWidth:c.width(),clientHeight:c.width(),boundingBox:Tc(m.boundingBox?m.boundingBox:{x1:0,y1:0,w:c.width(),h:c.height()})},E=m.eles.components(),N={},R=0;R<E.length;R++)for(var j=E[R],Z=0;Z<j.length;Z++)N[j[Z].id()]=R;for(R=0;R<A.nodeSize;R++){var ye=(me=C[R]).layoutDimensions(m);(De={}).isLocked=me.locked(),De.id=me.data("id"),De.parentId=me.data("parent"),De.cmptId=N[me.id()],De.children=[],De.positionX=me.position("x"),De.positionY=me.position("y"),De.offsetX=0,De.offsetY=0,De.height=ye.w,De.width=ye.h,De.maxX=De.positionX+De.width/2,De.minX=De.positionX-De.width/2,De.maxY=De.positionY+De.height/2,De.minY=De.positionY-De.height/2,De.padLeft=parseFloat(me.style("padding")),De.padRight=parseFloat(me.style("padding")),De.padTop=parseFloat(me.style("padding")),De.padBottom=parseFloat(me.style("padding")),De.nodeRepulsion=Ye(m.nodeRepulsion)?m.nodeRepulsion(me):m.nodeRepulsion,A.layoutNodes.push(De),A.idToIndex[De.id]=R}var je=[],qe=0,ct=-1,nt=[];for(R=0;R<A.nodeSize;R++){var me,Ct=(me=A.layoutNodes[R]).parentId;null!=Ct?A.layoutNodes[A.idToIndex[Ct]].children.push(me.id):(je[++ct]=me.id,nt.push(me.id))}for(A.graphSet.push(nt);qe<=ct;){var Gt=je[qe++],It=A.layoutNodes[A.idToIndex[Gt]].children;if(It.length>0)for(A.graphSet.push(It),R=0;R<It.length;R++)je[++ct]=It[R]}for(R=0;R<A.graphSet.length;R++){var jt=A.graphSet[R];for(Z=0;Z<jt.length;Z++)A.indexToGraph[A.idToIndex[jt[Z]]]=R}for(R=0;R<A.edgeSize;R++){var Zt=_[R],Kt={};Kt.id=Zt.data("id"),Kt.sourceId=Zt.data("source"),Kt.targetId=Zt.data("target");var ut=Ye(m.idealEdgeLength)?m.idealEdgeLength(Zt):m.idealEdgeLength,Qt=Ye(m.edgeElasticity)?m.edgeElasticity(Zt):m.edgeElasticity,Vt=A.idToIndex[Kt.sourceId],An=A.idToIndex[Kt.targetId];if(A.indexToGraph[Vt]!=A.indexToGraph[An]){for(var Mn=qn(Kt.sourceId,Kt.targetId,A),kn=A.graphSet[Mn],ti=0,De=A.layoutNodes[Vt];-1===kn.indexOf(De.id);)De=A.layoutNodes[A.idToIndex[De.parentId]],ti++;for(De=A.layoutNodes[An];-1===kn.indexOf(De.id);)De=A.layoutNodes[A.idToIndex[De.parentId]],ti++;ut*=ti*m.nestingFactor}Kt.idealLength=ut,Kt.elasticity=Qt,A.layoutEdges.push(Kt)}return A},qn=function(c,d,m){var _=Lf(c,d,0,m);return 2>_.count?0:_.graph},Lf=function f(c,d,m,_){var C=_.graphSet[m];if(-1<C.indexOf(c)&&-1<C.indexOf(d))return{count:2,graph:m};for(var A=0,E=0;E<C.length;E++){var j=_.layoutNodes[_.idToIndex[C[E]]].children;if(0!==j.length){var he=f(c,d,_.indexToGraph[_.idToIndex[j[0]]],_);if(0!==he.count){if(1!==he.count)return he;if(2==++A)break}}}return{count:A,graph:m}},Kd=function(c,d){for(var m=c.clientWidth,_=c.clientHeight,C=0;C<c.nodeSize;C++){var A=c.layoutNodes[C];0===A.children.length&&!A.isLocked&&(A.positionX=Math.random()*m,A.positionY=Math.random()*_)}},Cu=function(c,d,m){var _=c.boundingBox,C={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return d.boundingBox&&(m.forEach(function(A){var E=c.layoutNodes[c.idToIndex[A.data("id")]];C.x1=Math.min(C.x1,E.positionX),C.x2=Math.max(C.x2,E.positionX),C.y1=Math.min(C.y1,E.positionY),C.y2=Math.max(C.y2,E.positionY)}),C.w=C.x2-C.x1,C.h=C.y2-C.y1),function(A,E){var N=c.layoutNodes[c.idToIndex[A.data("id")]];return d.boundingBox?{x:_.x1+(N.positionX-C.x1)/C.w*_.w,y:_.y1+(N.positionY-C.y1)/C.h*_.h}:{x:N.positionX,y:N.positionY}}},Nm=function(c,d,m){var _=m.layout,C=m.eles.nodes(),A=Cu(c,m,C);C.positions(A),!0!==c.ready&&(c.ready=!0,_.one("layoutready",m.ready),_.emit({type:"layoutready",layout:this}))},Zg=function(c,d,m){pp(c,d),iu(c),Jg(c,d),gp(c),Vl(c)},pp=function(c,d){for(var m=0;m<c.graphSet.length;m++)for(var _=c.graphSet[m],C=_.length,A=0;A<C;A++)for(var E=c.layoutNodes[c.idToIndex[_[A]]],N=A+1;N<C;N++)Ml(E,c.layoutNodes[c.idToIndex[_[N]]],c,d)},ju=function(c){return-c+2*c*Math.random()},Ml=function(c,d,m,_){if(c.cmptId===d.cmptId||m.isCompound){var E=d.positionX-c.positionX,N=d.positionY-c.positionY;0===E&&0===N&&(E=ju(1),N=ju(1));var j=Qg(c,d,E,N);if(j>0)var me=(Z=_.nodeOverlap*j)*E/(he=Math.sqrt(E*E+N*N)),ye=Z*N/he;else{var Z,De=mh(c,E,N),je=mh(d,-1*E,-1*N),qe=je.x-De.x,ct=je.y-De.y,nt=qe*qe+ct*ct,he=Math.sqrt(nt);me=(Z=(c.nodeRepulsion+d.nodeRepulsion)/nt)*qe/he,ye=Z*ct/he}c.isLocked||(c.offsetX-=me,c.offsetY-=ye),d.isLocked||(d.offsetX+=me,d.offsetY+=ye)}},Qg=function(c,d,m,_){if(m>0)var C=c.maxX-d.minX;else C=d.maxX-c.minX;if(_>0)var A=c.maxY-d.minY;else A=d.maxY-c.minY;return C>=0&&A>=0?Math.sqrt(C*C+A*A):0},mh=function(c,d,m){var _=c.positionX,C=c.positionY,A=c.height||1,E=c.width||1,N=m/d,R=A/E,j={};return 0===d&&0<m||0===d&&0>m?(j.x=_,j.y=C+A/2,j):0<d&&-1*R<=N&&N<=R?(j.x=_+E/2,j.y=C+E*m/2/d,j):0>d&&-1*R<=N&&N<=R?(j.x=_-E/2,j.y=C-E*m/2/d,j):0<m&&(N<=-1*R||N>=R)?(j.x=_+A*d/2/m,j.y=C+A/2,j):(0>m&&(N<=-1*R||N>=R)&&(j.x=_-A*d/2/m,j.y=C-A/2),j)},iu=function(c,d){for(var m=0;m<c.edgeSize;m++){var _=c.layoutEdges[m],A=c.layoutNodes[c.idToIndex[_.sourceId]],N=c.layoutNodes[c.idToIndex[_.targetId]],R=N.positionX-A.positionX,j=N.positionY-A.positionY;if(0!==R||0!==j){var Z=mh(A,R,j),he=mh(N,-1*R,-1*j),me=he.x-Z.x,ye=he.y-Z.y,De=Math.sqrt(me*me+ye*ye),je=Math.pow(_.idealLength-De,2)/_.elasticity;if(0!==De)var qe=je*me/De,ct=je*ye/De;else qe=0,ct=0;A.isLocked||(A.offsetX+=qe,A.offsetY+=ct),N.isLocked||(N.offsetX-=qe,N.offsetY-=ct)}}},Jg=function(c,d){if(0!==d.gravity)for(var _=0;_<c.graphSet.length;_++){var C=c.graphSet[_],A=C.length;if(0===_)var E=c.clientHeight/2,N=c.clientWidth/2;else{var j=c.layoutNodes[c.idToIndex[c.layoutNodes[c.idToIndex[C[0]]].parentId]];E=j.positionX,N=j.positionY}for(var Z=0;Z<A;Z++){var he=c.layoutNodes[c.idToIndex[C[Z]]];if(!he.isLocked){var me=E-he.positionX,ye=N-he.positionY,De=Math.sqrt(me*me+ye*ye);if(De>1){var qe=d.gravity*ye/De;he.offsetX+=d.gravity*me/De,he.offsetY+=qe}}}}},gp=function(c,d){var m=[],_=0,C=-1;for(m.push.apply(m,c.graphSet[0]),C+=c.graphSet[0].length;_<=C;){var A=m[_++],N=c.layoutNodes[c.idToIndex[A]],R=N.children;if(0<R.length&&!N.isLocked){for(var j=N.offsetX,Z=N.offsetY,he=0;he<R.length;he++){var me=c.layoutNodes[c.idToIndex[R[he]]];me.offsetX+=j,me.offsetY+=Z,m[++C]=R[he]}N.offsetX=0,N.offsetY=0}}},Vl=function(c,d){for(var m=0;m<c.nodeSize;m++)0<(_=c.layoutNodes[m]).children.length&&(_.maxX=void 0,_.minX=void 0,_.maxY=void 0,_.minY=void 0);for(m=0;m<c.nodeSize;m++)if(!(0<(_=c.layoutNodes[m]).children.length||_.isLocked)){var C=vh(_.offsetX,_.offsetY,c.temperature);_.positionX+=C.x,_.positionY+=C.y,_.offsetX=0,_.offsetY=0,_.minX=_.positionX-_.width,_.maxX=_.positionX+_.width,_.minY=_.positionY-_.height,_.maxY=_.positionY+_.height,em(_,c)}for(m=0;m<c.nodeSize;m++){var _;0<(_=c.layoutNodes[m]).children.length&&!_.isLocked&&(_.positionX=(_.maxX+_.minX)/2,_.positionY=(_.maxY+_.minY)/2,_.width=_.maxX-_.minX,_.height=_.maxY-_.minY)}},vh=function(c,d,m){var _=Math.sqrt(c*c+d*d);if(_>m)var C={x:m*c/_,y:m*d/_};else C={x:c,y:d};return C},em=function f(c,d){var m=c.parentId;if(null!=m){var _=d.layoutNodes[d.idToIndex[m]],C=!1;if((null==_.maxX||c.maxX+_.padRight>_.maxX)&&(_.maxX=c.maxX+_.padRight,C=!0),(null==_.minX||c.minX-_.padLeft<_.minX)&&(_.minX=c.minX-_.padLeft,C=!0),(null==_.maxY||c.maxY+_.padBottom>_.maxY)&&(_.maxY=c.maxY+_.padBottom,C=!0),(null==_.minY||c.minY-_.padTop<_.minY)&&(_.minY=c.minY-_.padTop,C=!0),C)return f(_,d)}},fd=function(c,d){for(var m=c.layoutNodes,_=[],C=0;C<m.length;C++){var A=m[C],E=A.cmptId;(_[E]=_[E]||[]).push(A)}var R=0;for(C=0;C<_.length;C++)if(j=_[C]){j.x1=1/0,j.x2=-1/0,j.y1=1/0,j.y2=-1/0;for(var Z=0;Z<j.length;Z++){var he=j[Z];j.x1=Math.min(j.x1,he.positionX-he.width/2),j.x2=Math.max(j.x2,he.positionX+he.width/2),j.y1=Math.min(j.y1,he.positionY-he.height/2),j.y2=Math.max(j.y2,he.positionY+he.height/2)}j.w=j.x2-j.x1,j.h=j.y2-j.y1,R+=j.w*j.h}_.sort(function(ct,nt){return nt.w*nt.h-ct.w*ct.h});var me=0,ye=0,De=0,je=0,qe=Math.sqrt(R)*c.clientWidth/c.clientHeight;for(C=0;C<_.length;C++){var j;if(j=_[C]){for(Z=0;Z<j.length;Z++)(he=j[Z]).isLocked||(he.positionX+=me-j.x1,he.positionY+=ye-j.y1);me+=j.w+d.componentSpacing,De+=j.w+d.componentSpacing,je=Math.max(je,j.h),De>qe&&(ye+=je+d.componentSpacing,me=0,De=0,je=0)}}},nc={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(c){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(c,d){return!0},ready:void 0,stop:void 0,transform:function(c,d){return d}};function wu(f){this.options=sr({},nc,f)}wu.prototype.run=function(){var f=this.options,c=f,d=f.cy,m=c.eles,_=m.nodes().not(":parent");c.sort&&(_=_.sort(c.sort));var C=Tc(c.boundingBox?c.boundingBox:{x1:0,y1:0,w:d.width(),h:d.height()});if(0===C.h||0===C.w)m.nodes().layoutPositions(this,c,function(hi){return{x:C.x1,y:C.y1}});else{var A=_.size(),E=Math.sqrt(A*C.h/C.w),N=Math.round(E),R=Math.round(C.w/C.h*E),j=function(xi){if(null==xi)return Math.min(N,R);Math.min(N,R)==N?N=xi:R=xi},Z=function(xi){if(null==xi)return Math.max(N,R);Math.max(N,R)==N?N=xi:R=xi},he=c.rows,me=null!=c.cols?c.cols:c.columns;if(null!=he&&null!=me)N=he,R=me;else if(null!=he&&null==me)N=he,R=Math.ceil(A/N);else if(null==he&&null!=me)R=me,N=Math.ceil(A/R);else if(R*N>A){var ye=j(),De=Z();(ye-1)*De>=A?j(ye-1):(De-1)*ye>=A&&Z(De-1)}else for(;R*N<A;){var je=j(),qe=Z();(qe+1)*je>=A?Z(qe+1):j(je+1)}var ct=C.w/R,nt=C.h/N;if(c.condense&&(ct=0,nt=0),c.avoidOverlap)for(var Ct=0;Ct<_.length;Ct++){var Gt=_[Ct],Wt=Gt._private.position;(null==Wt.x||null==Wt.y)&&(Wt.x=0,Wt.y=0);var It=Gt.layoutDimensions(c),jt=c.avoidOverlapPadding,Zt=It.h+jt;ct=Math.max(ct,It.w+jt),nt=Math.max(nt,Zt)}for(var Kt={},ut=function(xi,mi){return!!Kt["c-"+xi+"-"+mi]},Qt=function(xi,mi){Kt["c-"+xi+"-"+mi]=!0},Vt=0,An=0,sn=function(){++An>=R&&(An=0,Vt++)},pn={},Mn=0;Mn<_.length;Mn++){var kn=_[Mn],ti=c.position(kn);if(ti&&(void 0!==ti.row||void 0!==ti.col)){var Dn={row:ti.row,col:ti.col};if(void 0===Dn.col)for(Dn.col=0;ut(Dn.row,Dn.col);)Dn.col++;else if(void 0===Dn.row)for(Dn.row=0;ut(Dn.row,Dn.col);)Dn.row++;pn[kn.id()]=Dn,Qt(Dn.row,Dn.col)}}_.layoutPositions(this,c,function(xi,mi){var fi,Pn;if(xi.locked()||xi.isParent())return!1;var ai=pn[xi.id()];if(ai)fi=ai.col*ct+ct/2+C.x1,Pn=ai.row*nt+nt/2+C.y1;else{for(;ut(Vt,An);)sn();fi=An*ct+ct/2+C.x1,Pn=Vt*nt+nt/2+C.y1,Qt(Vt,An),sn()}return{x:fi,y:Pn}})}return this};var Zd={ready:function(){},stop:function(){}};function pd(f){this.options=sr({},Zd,f)}pd.prototype.run=function(){var f=this.options,c=f.eles,d=this;return d.emit("layoutstart"),c.nodes().positions(function(){return{x:0,y:0}}),d.one("layoutready",f.ready),d.emit("layoutready"),d.one("layoutstop",f.stop),d.emit("layoutstop"),this},pd.prototype.stop=function(){return this};var mp={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(c,d){return!0},ready:void 0,stop:void 0,transform:function(c,d){return d}};function $u(f){this.options=sr({},mp,f)}$u.prototype.run=function(){var f=this.options,d=f.eles.nodes(),m=Ye(f.positions);return d.layoutPositions(this,f,function(C,A){var E=function _(C){return null==f.positions?function(c){return{x:c.x,y:c.y}}(C.position()):m?f.positions(C):f.positions[C._private.data.id]??null}(C);return!C.locked()&&null!=E&&E}),this};var as={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(c,d){return!0},ready:void 0,stop:void 0,transform:function(c,d){return d}};function vp(f){this.options=sr({},as,f)}vp.prototype.run=function(){var f=this.options,c=f.cy,d=f.eles,m=Tc(f.boundingBox?f.boundingBox:{x1:0,y1:0,w:c.width(),h:c.height()});return d.nodes().layoutPositions(this,f,function(A,E){return{x:m.x1+Math.round(Math.random()*m.w),y:m.y1+Math.round(Math.random()*m.h)}}),this};var tm=[{name:"breadthfirst",impl:Mf},{name:"circle",impl:Kg},{name:"concentric",impl:Tl},{name:"cose",impl:Wu},{name:"grid",impl:wu},{name:"null",impl:pd},{name:"preset",impl:$u},{name:"random",impl:vp}];function Qd(f){this.options=f,this.notifications=0}var Pf=function(){},yp=function(){throw new Error("A headless instance can not render images")};Qd.prototype={recalculateRenderedStyle:Pf,notify:function(){this.notifications++},init:Pf,isHeadless:function(){return!0},png:yp,jpg:yp};var tg={arrowShapeWidth:.3,registerArrowShapes:function(){var f=this.arrowShapes={},c=this,d=function(R,j,Z,he,me,ye,De){return me.x-Z/2-De<=R&&R<=me.x+Z/2+De&&me.y-Z/2-De<=j&&j<=me.y+Z/2+De},m=function(R,j,Z,he,me){var ye=R*Math.cos(he)-j*Math.sin(he),De=R*Math.sin(he)+j*Math.cos(he);return{x:ye*Z+me.x,y:De*Z+me.y}},_=function(R,j,Z,he){for(var me=[],ye=0;ye<R.length;ye+=2)me.push(m(R[ye],R[ye+1],j,Z,he));return me},C=function(R){for(var j=[],Z=0;Z<R.length;Z++){var he=R[Z];j.push(he.x,he.y)}return j},A=function(R){return R.pstyle("width").pfValue*R.pstyle("arrow-scale").pfValue*2},E=function(R,j){Fe(j)&&(j=f[j]),f[R]=sr({name:R,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(he,me,ye,De,je,qe){var ct=C(_(this.points,ye+2*qe,De,je));return Ma(he,me,ct)},roughCollide:d,draw:function(he,me,ye,De){var je=_(this.points,me,ye,De);c.arrowShapeImpl("polygon")(he,je)},spacing:function(he){return 0},gap:A},j)};E("none",{collide:$f,roughCollide:$f,draw:Ze,spacing:id,gap:id}),E("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),E("arrow","triangle"),E("triangle-backcurve",{points:f.triangle.points,controlPoint:[0,-.15],roughCollide:d,draw:function(R,j,Z,he,me){var ye=_(this.points,j,Z,he),De=this.controlPoint,je=m(De[0],De[1],j,Z,he);c.arrowShapeImpl(this.name)(R,ye,je)},gap:function(R){return.8*A(R)}}),E("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(R,j,Z,he,me,ye,De){var je=C(_(this.points,Z+2*De,he,me)),qe=C(_(this.pointsTee,Z+2*De,he,me));return Ma(R,j,je)||Ma(R,j,qe)},draw:function(R,j,Z,he,me){var ye=_(this.points,j,Z,he),De=_(this.pointsTee,j,Z,he);c.arrowShapeImpl(this.name)(R,ye,De)}}),E("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(R,j,Z,he,me,ye,De){var je=me,qe=Math.pow(je.x-R,2)+Math.pow(je.y-j,2)<=Math.pow((Z+2*De)*this.radius,2),ct=C(_(this.points,Z+2*De,he,me));return Ma(R,j,ct)||qe},draw:function(R,j,Z,he,me){var ye=_(this.pointsTr,j,Z,he);c.arrowShapeImpl(this.name)(R,ye,he.x,he.y,this.radius*j)},spacing:function(R){return c.getArrowWidth(R.pstyle("width").pfValue,R.pstyle("arrow-scale").value)*this.radius}}),E("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(R,j){var Z=this.baseCrossLinePts.slice(),he=j/R;return Z[3]=Z[3]-he,Z[5]=Z[5]-he,Z},collide:function(R,j,Z,he,me,ye,De){var je=C(_(this.points,Z+2*De,he,me)),qe=C(_(this.crossLinePts(Z,ye),Z+2*De,he,me));return Ma(R,j,je)||Ma(R,j,qe)},draw:function(R,j,Z,he,me){var ye=_(this.points,j,Z,he),De=_(this.crossLinePts(j,me),j,Z,he);c.arrowShapeImpl(this.name)(R,ye,De)}}),E("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(R){return.525*A(R)}}),E("circle",{radius:.15,collide:function(R,j,Z,he,me,ye,De){var je=me;return Math.pow(je.x-R,2)+Math.pow(je.y-j,2)<=Math.pow((Z+2*De)*this.radius,2)},draw:function(R,j,Z,he,me){c.arrowShapeImpl(this.name)(R,he.x,he.y,this.radius*j)},spacing:function(R){return c.getArrowWidth(R.pstyle("width").pfValue,R.pstyle("arrow-scale").value)*this.radius}}),E("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(R){return 1},gap:function(R){return 1}}),E("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),E("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(R){return R.pstyle("width").pfValue*R.pstyle("arrow-scale").value}}),E("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(R){return.95*R.pstyle("width").pfValue*R.pstyle("arrow-scale").value}})}},Oa={projectIntoViewport:function(f,c){var d=this.cy,m=this.findContainerClientCoords(),_=m[0],C=m[1],A=m[4],E=d.pan(),N=d.zoom();return[((f-_)/A-E.x)/N,((c-C)/A-E.y)/N]},findContainerClientCoords:function(){if(this.containerBB)return this.containerBB;var f=this.container,c=f.getBoundingClientRect(),d=pe.getComputedStyle(f),m=function(qe){return parseFloat(d.getPropertyValue(qe))},__left=m("padding-left"),__right=m("padding-right"),__top=m("padding-top"),__bottom=m("padding-bottom"),C_left=m("border-left-width"),C_right=m("border-right-width"),C_top=m("border-top-width"),A=(m("border-bottom-width"),f.clientWidth);return this.containerBB=[c.left+__left+C_left,c.top+__top+C_top,A-(__left+__right),f.clientHeight-(__top+__bottom),c.width/(A+(C_left+C_right))]},invalidateContainerClientCoordsCache:function(){this.containerBB=null},findNearestElement:function(f,c,d,m){return this.findNearestElements(f,c,d,m)[0]},findNearestElements:function(f,c,d,m){var ye,De,_=this,C=this,A=C.getCachedZSortedEles(),E=[],N=C.cy.zoom(),R=C.cy.hasCompoundNodes(),j=(m?24:8)/N,Z=(m?8:2)/N,he=(m?8:2)/N,me=1/0;function je(It,jt){if(It.isNode()){if(De)return;De=It,E.push(It)}if(It.isEdge()&&(null==jt||jt<me))if(ye){if(ye.pstyle("z-compound-depth").value===It.pstyle("z-compound-depth").value&&ye.pstyle("z-compound-depth").value===It.pstyle("z-compound-depth").value)for(var Dt=0;Dt<E.length;Dt++)if(E[Dt].isEdge()){E[Dt]=It,ye=It,me=jt??me;break}}else E.push(It),ye=It,me=jt??me}function qe(It){var jt=It.outerWidth()+2*Z,Dt=It.outerHeight()+2*Z,Zt=jt/2,Kt=Dt/2,ut=It.position();if(ut.x-Zt<=f&&f<=ut.x+Zt&&ut.y-Kt<=c&&c<=ut.y+Kt&&C.nodeShapes[_.getNodeShape(It)].checkPoint(f,c,0,jt,Dt,ut.x,ut.y))return je(It,0),!0}function ct(It){var An,jt=It._private,Dt=jt.rscratch,Zt=It.pstyle("width").pfValue,Kt=It.pstyle("arrow-scale").value,ut=Zt/2+j,Qt=ut*ut,Vt=2*ut,Mn=jt.source,kn=jt.target;if("segments"===Dt.edgeType||"straight"===Dt.edgeType||"haystack"===Dt.edgeType){for(var sn=Dt.allpts,pn=0;pn+3<sn.length;pn+=2)if(Xl(f,c,sn[pn],sn[pn+1],sn[pn+2],sn[pn+3],Vt)&&Qt>(An=Dh(f,c,sn[pn],sn[pn+1],sn[pn+2],sn[pn+3])))return je(It,An),!0}else if("bezier"===Dt.edgeType||"multibezier"===Dt.edgeType||"self"===Dt.edgeType||"compound"===Dt.edgeType)for(sn=Dt.allpts,pn=0;pn+5<Dt.allpts.length;pn+=4)if(z_(f,c,sn[pn],sn[pn+1],sn[pn+2],sn[pn+3],sn[pn+4],sn[pn+5],Vt)&&Qt>(An=Ly(f,c,sn[pn],sn[pn+1],sn[pn+2],sn[pn+3],sn[pn+4],sn[pn+5])))return je(It,An),!0;Mn=Mn||jt.source,kn=kn||jt.target;var ti=_.getArrowWidth(Zt,Kt),Dn=[{name:"source",x:Dt.arrowStartX,y:Dt.arrowStartY,angle:Dt.srcArrowAngle},{name:"target",x:Dt.arrowEndX,y:Dt.arrowEndY,angle:Dt.tgtArrowAngle},{name:"mid-source",x:Dt.midX,y:Dt.midY,angle:Dt.midsrcArrowAngle},{name:"mid-target",x:Dt.midX,y:Dt.midY,angle:Dt.midtgtArrowAngle}];for(pn=0;pn<Dn.length;pn++){var Zn=Dn[pn],hi=C.arrowShapes[It.pstyle(Zn.name+"-arrow-shape").value],xi=It.pstyle("width").pfValue;if(hi.roughCollide(f,c,ti,Zn.angle,{x:Zn.x,y:Zn.y},xi,j)&&hi.collide(f,c,ti,Zn.angle,{x:Zn.x,y:Zn.y},xi,j))return je(It),!0}R&&E.length>0&&(qe(Mn),qe(kn))}function nt(It,jt,Dt){return ur(It,jt,Dt)}function Ct(It,jt){var Kt,Dt=It._private,Zt=he;Kt=jt?jt+"-":"",It.boundingBox();var ut=Dt.labelBounds[jt||"main"],Qt=It.pstyle(Kt+"label").value;if("yes"===It.pstyle("text-events").strValue&&Qt){var An=nt(Dt.rscratch,"labelX",jt),sn=nt(Dt.rscratch,"labelY",jt),pn=nt(Dt.rscratch,"labelAngle",jt),Mn=It.pstyle(Kt+"text-margin-x").pfValue,kn=It.pstyle(Kt+"text-margin-y").pfValue,ti=ut.x1-Zt-Mn,Dn=ut.x2+Zt-Mn,Zn=ut.y1-Zt-kn,hi=ut.y2+Zt-kn;if(pn){var xi=Math.cos(pn),mi=Math.sin(pn),fi=function(Zr,mr){return{x:(Zr-=An)*xi-(mr-=sn)*mi+An,y:Zr*mi+mr*xi+sn}},Pn=fi(ti,Zn),ai=fi(ti,hi),Si=fi(Dn,Zn),Qi=fi(Dn,hi);if(Ma(f,c,[Pn.x+Mn,Pn.y+kn,Si.x+Mn,Si.y+kn,Qi.x+Mn,Qi.y+kn,ai.x+Mn,ai.y+kn]))return je(It),!0}else if(rs(ut,f,c))return je(It),!0}}d&&(A=A.interactive);for(var Gt=A.length-1;Gt>=0;Gt--){var Wt=A[Gt];Wt.isNode()?qe(Wt)||Ct(Wt):ct(Wt)||Ct(Wt)||Ct(Wt,"source")||Ct(Wt,"target")}return E},getAllInBox:function(f,c,d,m){for(var _=this.getCachedZSortedEles().interactive,C=[],A=Math.min(f,d),E=Math.max(f,d),N=Math.min(c,m),R=Math.max(c,m),j=Tc({x1:f=A,y1:c=N,x2:d=E,y2:m=R}),Z=0;Z<_.length;Z++){var he=_[Z];if(he.isNode()){var me=he,ye=me.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});Am(j,ye)&&!Cv(ye,j)&&C.push(me)}else{var De=he,je=De._private,qe=je.rscratch;if(null!=qe.startX&&null!=qe.startY&&!rs(j,qe.startX,qe.startY)||null!=qe.endX&&null!=qe.endY&&!rs(j,qe.endX,qe.endY))continue;if("bezier"===qe.edgeType||"multibezier"===qe.edgeType||"self"===qe.edgeType||"compound"===qe.edgeType||"segments"===qe.edgeType||"haystack"===qe.edgeType){for(var ct=je.rstyle.bezierPts||je.rstyle.linePts||je.rstyle.haystackPts,nt=!0,Ct=0;Ct<ct.length;Ct++)if(!bv(j,ct[Ct])){nt=!1;break}nt&&C.push(De)}else("haystack"===qe.edgeType||"straight"===qe.edgeType)&&C.push(De)}}return C}},Bm={calculateArrowAngles:function(f){var N,R,j,Z,he,me,c=f._private.rscratch,d="haystack"===c.edgeType,m="bezier"===c.edgeType,_="multibezier"===c.edgeType,C="segments"===c.edgeType,A="compound"===c.edgeType,E="self"===c.edgeType;d?(j=c.haystackPts[0],Z=c.haystackPts[1],he=c.haystackPts[2],me=c.haystackPts[3]):(j=c.arrowStartX,Z=c.arrowStartY,he=c.arrowEndX,me=c.arrowEndY),qe=c.midX,ct=c.midY,C?(N=j-c.segpts[0],R=Z-c.segpts[1]):_||A||E||m?(N=j-uc((ye=c.allpts)[0],ye[2],ye[4],.1),R=Z-uc(ye[1],ye[3],ye[5],.1)):(N=j-qe,R=Z-ct),c.srcArrowAngle=Pg(N,R);var qe=c.midX,ct=c.midY;if(d&&(qe=(j+he)/2,ct=(Z+me)/2),N=he-j,R=me-Z,C)if((ye=c.allpts).length/2%2==0)N=ye[nt=ye.length/2]-ye[Ct=nt-2],R=ye[nt+1]-ye[Ct+1];else{var nt,Ct,Gt=2+(nt=ye.length/2-1);N=ye[nt]-ye[Ct=nt-2],R=ye[nt+1]-ye[Ct+1]}else if(_||A||E){var It,jt,Dt,Zt,ut,Kt,Qt,ye=c.allpts;c.ctrlpts.length/2%2==0?(It=uc(ye[Kt=ye.length/2-1],ye[ut=Kt+2],ye[Qt=ut+2],0),jt=uc(ye[Kt+1],ye[ut+1],ye[Qt+1],0),Dt=uc(ye[Kt],ye[ut],ye[Qt],1e-4),Zt=uc(ye[Kt+1],ye[ut+1],ye[Qt+1],1e-4)):(It=uc(ye[Kt=(ut=ye.length/2-1)-2],ye[ut],ye[Qt=ut+2],.4999),jt=uc(ye[Kt+1],ye[ut+1],ye[Qt+1],.4999),Dt=uc(ye[Kt],ye[ut],ye[Qt],.5),Zt=uc(ye[Kt+1],ye[ut+1],ye[Qt+1],.5)),N=Dt-It,R=Zt-jt}if(c.midtgtArrowAngle=Pg(N,R),c.midDispX=N,c.midDispY=R,N*=-1,R*=-1,C&&(ye=c.allpts).length/2%2!=0&&(N=-(ye[Gt=2+(nt=ye.length/2-1)]-ye[nt]),R=-(ye[Gt+1]-ye[nt+1])),c.midsrcArrowAngle=Pg(N,R),C)N=he-c.segpts[c.segpts.length-2],R=me-c.segpts[c.segpts.length-1];else if(_||A||E||m){var Vt=(ye=c.allpts).length;N=he-uc(ye[Vt-6],ye[Vt-4],ye[Vt-2],.9),R=me-uc(ye[Vt-5],ye[Vt-3],ye[Vt-1],.9)}else N=he-qe,R=me-ct;c.tgtArrowAngle=Pg(N,R)}};Bm.getArrowWidth=Bm.getArrowHeight=function(f,c){var d=this.arrowWidthCache=this.arrowWidthCache||{},m=d[f+", "+c];return m||(m=Math.max(Math.pow(13.37*f,.9),29)*c,d[f+", "+c]=m,m)};var Ul={};function zm(f){var c=[];if(null!=f){for(var d=0;d<f.length;d+=2)c.push({x:f[d],y:f[d+1]});return c}}Ul.findHaystackPoints=function(f){for(var c=0;c<f.length;c++){var d=f[c],m=d._private,_=m.rscratch;if(!_.haystack){var C=2*Math.random()*Math.PI;_.source={x:Math.cos(C),y:Math.sin(C)},C=2*Math.random()*Math.PI,_.target={x:Math.cos(C),y:Math.sin(C)}}var A=m.source,E=m.target,N=A.position(),R=E.position(),j=A.width(),Z=E.width(),he=A.height(),me=E.height(),De=d.pstyle("haystack-radius").value/2;_.haystackPts=_.allpts=[_.source.x*j*De+N.x,_.source.y*he*De+N.y,_.target.x*Z*De+R.x,_.target.y*me*De+R.y],_.midX=(_.allpts[0]+_.allpts[2])/2,_.midY=(_.allpts[1]+_.allpts[3])/2,_.edgeType="haystack",_.haystack=!0,this.storeEdgeProjections(d),this.calculateArrowAngles(d),this.recalculateEdgeLabelProjections(d),this.calculateLabelAngles(d)}},Ul.findSegmentsPoints=function(f,c){var d=f._private.rscratch,m=c.posPts,_=c.intersectionPts,C=c.vectorNormInverse,A=f.pstyle("edge-distances").value,E=f.pstyle("segment-weights"),N=f.pstyle("segment-distances"),R=Math.min(E.pfValue.length,N.pfValue.length);d.edgeType="segments",d.segpts=[];for(var j=0;j<R;j++){var Z=E.pfValue[j],he=N.pfValue[j],me=1-Z,De="node-position"===A?m:_,je={x:De.x1*me+De.x2*Z,y:De.y1*me+De.y2*Z};d.segpts.push(je.x+C.x*he,je.y+C.y*he)}},Ul.findLoopPoints=function(f,c,d,m){var _=f._private.rscratch,C=c.dirCounts,A=c.srcPos,E=f.pstyle("control-point-distances"),N=E?E.pfValue[0]:void 0,R=f.pstyle("loop-direction").pfValue,j=f.pstyle("loop-sweep").pfValue,Z=f.pstyle("control-point-step-size").pfValue;_.edgeType="self";var he=d,me=Z;m&&(he=0,me=N);var ye=R-Math.PI/2,De=ye-j/2,je=ye+j/2,qe=String(R+"_"+j);he=void 0===C[qe]?C[qe]=0:++C[qe],_.ctrlpts=[A.x+1.4*Math.cos(De)*me*(he/3+1),A.y+1.4*Math.sin(De)*me*(he/3+1),A.x+1.4*Math.cos(je)*me*(he/3+1),A.y+1.4*Math.sin(je)*me*(he/3+1)]},Ul.findCompoundLoopPoints=function(f,c,d,m){var _=f._private.rscratch;_.edgeType="compound";var C=c.srcPos,A=c.tgtPos,E=c.srcW,N=c.srcH,R=c.tgtW,j=c.tgtH,Z=f.pstyle("control-point-step-size").pfValue,he=f.pstyle("control-point-distances"),ye=d,De=Z;m&&(ye=0,De=he?he.pfValue[0]:void 0);var qe={x:C.x-E/2,y:C.y-N/2},ct={x:A.x-R/2,y:A.y-j/2},nt={x:Math.min(qe.x,ct.x),y:Math.min(qe.y,ct.y)},Gt=Math.max(.5,Math.log(.01*E)),Wt=Math.max(.5,Math.log(.01*R));_.ctrlpts=[nt.x,nt.y-(1+Math.pow(50,1.12)/100)*De*(ye/3+1)*Gt,nt.x-(1+Math.pow(50,1.12)/100)*De*(ye/3+1)*Wt,nt.y]},Ul.findStraightEdgePoints=function(f){f._private.rscratch.edgeType="straight"},Ul.findBezierPoints=function(f,c,d,m,_){var C=f._private.rscratch,A=c.vectorNormInverse,E=c.posPts,N=c.intersectionPts,R=f.pstyle("edge-distances").value,j=f.pstyle("control-point-step-size").pfValue,Z=f.pstyle("control-point-distances"),he=f.pstyle("control-point-weights"),me=Z&&he?Math.min(Z.value.length,he.value.length):1,ye=Z?Z.pfValue[0]:void 0,De=he.value[0],je=m;C.edgeType=je?"multibezier":"bezier",C.ctrlpts=[];for(var qe=0;qe<me;qe++){var nt,ct=(.5-c.eles.length/2+d)*j*(_?-1:1),Ct=Ec(ct);je&&(ye=Z?Z.pfValue[qe]:j,De=he.value[qe]);var Gt=void 0!==(nt=m?ye:void 0!==ye?Ct*ye:void 0)?nt:ct,Wt=1-De,jt="node-position"===R?E:N,Dt={x:jt.x1*Wt+jt.x2*De,y:jt.y1*Wt+jt.y2*De};C.ctrlpts.push(Dt.x+A.x*Gt,Dt.y+A.y*Gt)}},Ul.findTaxiPoints=function(f,c){var d=f._private.rscratch;d.edgeType="segments";var m="vertical",_="horizontal",C="leftward",A="rightward",E="downward",N="upward",j=c.posPts,Z=c.srcW,he=c.srcH,me=c.tgtW,ye=c.tgtH,je="node-position"!==f.pstyle("edge-distances").value,qe=f.pstyle("taxi-direction").value,ct=qe,nt=f.pstyle("taxi-turn"),Ct="%"===nt.units,Gt=nt.pfValue,Wt=Gt<0,It=f.pstyle("taxi-turn-min-distance").pfValue,Dt=je?(he+ye)/2:0,Zt=j.x2-j.x1,Kt=j.y2-j.y1,ut=function(wn,nr){return wn>0?Math.max(wn-nr,0):Math.min(wn+nr,0)},Qt=ut(Zt,je?(Z+me)/2:0),Vt=ut(Kt,Dt),An=!1;"auto"===ct?qe=Math.abs(Qt)>Math.abs(Vt)?_:m:ct===N||ct===E?(qe=m,An=!0):(ct===C||ct===A)&&(qe=_,An=!0);var Dn,sn=qe===m,pn=sn?Vt:Qt,Mn=sn?Kt:Zt,kn=Ec(Mn),ti=!1;(!An||!Ct&&!Wt)&&(ct===E&&Mn<0||ct===N&&Mn>0||ct===C&&Mn>0||ct===A&&Mn<0)&&(pn=(kn*=-1)*Math.abs(pn),ti=!0);var xi=function(wn){return Math.abs(wn)<It||Math.abs(wn)>=Math.abs(pn)},mi=xi(Dn=Ct?(Gt<0?1+Gt:Gt)*pn:(Gt<0?pn:0)+Gt*kn),fi=xi(Math.abs(pn)-Math.abs(Dn));if(!mi&&!fi||ti)if(sn){var Nt=j.y1+Dn+(je?he/2*kn:0);d.segpts=[j.x1,Nt,j.x2,Nt]}else{var Xe=j.x1+Dn+(je?Z/2*kn:0);d.segpts=[Xe,j.y1,Xe,j.y2]}else if(sn){var ai=Math.abs(Mn)<=he/2,Si=Math.abs(Zt)<=me/2;if(ai){var Qi=(j.x1+j.x2)/2;d.segpts=[Qi,j.y1,Qi,j.y2]}else if(Si){var Zr=(j.y1+j.y2)/2;d.segpts=[j.x1,Zr,j.x2,Zr]}else d.segpts=[j.x1,j.y2]}else{var Yr=Math.abs(Mn)<=Z/2,ki=Math.abs(Kt)<=ye/2;if(Yr){var br=(j.y1+j.y2)/2;d.segpts=[j.x1,br,j.x2,br]}else if(ki){var Bs=(j.x1+j.x2)/2;d.segpts=[Bs,j.y1,Bs,j.y2]}else d.segpts=[j.x2,j.y1]}},Ul.tryToCorrectInvalidPoints=function(f,c){var d=f._private.rscratch;if("bezier"===d.edgeType){var m=c.srcPos,_=c.tgtPos,C=c.srcW,A=c.srcH,E=c.tgtW,N=c.tgtH,R=c.srcShape,j=c.tgtShape,Z=!Ne(d.startX)||!Ne(d.startY),he=!Ne(d.arrowStartX)||!Ne(d.arrowStartY),me=!Ne(d.endX)||!Ne(d.endY),ye=!Ne(d.arrowEndX)||!Ne(d.arrowEndY),qe=this.getArrowWidth(f.pstyle("width").pfValue,f.pstyle("arrow-scale").value)*this.arrowShapeWidth*3,ct=ro({x:d.ctrlpts[0],y:d.ctrlpts[1]},{x:d.startX,y:d.startY}),nt=ct<qe,Ct=ro({x:d.ctrlpts[0],y:d.ctrlpts[1]},{x:d.endX,y:d.endY}),Gt=Ct<qe,Wt=!1;if(Z||he||nt){Wt=!0;var It={x:d.ctrlpts[0]-m.x,y:d.ctrlpts[1]-m.y},jt=Math.sqrt(It.x*It.x+It.y*It.y),Dt={x:It.x/jt,y:It.y/jt},Zt=Math.max(C,A),Kt={x:d.ctrlpts[0]+2*Dt.x*Zt,y:d.ctrlpts[1]+2*Dt.y*Zt},ut=R.intersectLine(m.x,m.y,C,A,Kt.x,Kt.y,0);nt?(d.ctrlpts[0]=d.ctrlpts[0]+Dt.x*(qe-ct),d.ctrlpts[1]=d.ctrlpts[1]+Dt.y*(qe-ct)):(d.ctrlpts[0]=ut[0]+Dt.x*qe,d.ctrlpts[1]=ut[1]+Dt.y*qe)}if(me||ye||Gt){Wt=!0;var Qt={x:d.ctrlpts[0]-_.x,y:d.ctrlpts[1]-_.y},Vt=Math.sqrt(Qt.x*Qt.x+Qt.y*Qt.y),An={x:Qt.x/Vt,y:Qt.y/Vt},sn=Math.max(C,A),pn={x:d.ctrlpts[0]+2*An.x*sn,y:d.ctrlpts[1]+2*An.y*sn},Mn=j.intersectLine(_.x,_.y,E,N,pn.x,pn.y,0);Gt?(d.ctrlpts[0]=d.ctrlpts[0]+An.x*(qe-Ct),d.ctrlpts[1]=d.ctrlpts[1]+An.y*(qe-Ct)):(d.ctrlpts[0]=Mn[0]+An.x*qe,d.ctrlpts[1]=Mn[1]+An.y*qe)}Wt&&this.findEndpoints(f)}},Ul.storeAllpts=function(f){var c=f._private.rscratch;if("multibezier"===c.edgeType||"bezier"===c.edgeType||"self"===c.edgeType||"compound"===c.edgeType){c.allpts=[],c.allpts.push(c.startX,c.startY);for(var d=0;d+1<c.ctrlpts.length;d+=2)c.allpts.push(c.ctrlpts[d],c.ctrlpts[d+1]),d+3<c.ctrlpts.length&&c.allpts.push((c.ctrlpts[d]+c.ctrlpts[d+2])/2,(c.ctrlpts[d+1]+c.ctrlpts[d+3])/2);var m;c.allpts.push(c.endX,c.endY),c.ctrlpts.length/2%2==0?(c.midX=c.allpts[m=c.allpts.length/2-1],c.midY=c.allpts[m+1]):(c.midX=uc(c.allpts[m=c.allpts.length/2-3],c.allpts[m+2],c.allpts[m+4],.5),c.midY=uc(c.allpts[m+1],c.allpts[m+3],c.allpts[m+5],.5))}else if("straight"===c.edgeType)c.allpts=[c.startX,c.startY,c.endX,c.endY],c.midX=(c.startX+c.endX+c.arrowStartX+c.arrowEndX)/4,c.midY=(c.startY+c.endY+c.arrowStartY+c.arrowEndY)/4;else if("segments"===c.edgeType)if(c.allpts=[],c.allpts.push(c.startX,c.startY),c.allpts.push.apply(c.allpts,c.segpts),c.allpts.push(c.endX,c.endY),c.segpts.length%4==0){var C=c.segpts.length/2,A=C-2;c.midX=(c.segpts[A]+c.segpts[C])/2,c.midY=(c.segpts[A+1]+c.segpts[C+1])/2}else{var E=c.segpts.length/2-1;c.midX=c.segpts[E],c.midY=c.segpts[E+1]}},Ul.checkForInvalidEdgeWarning=function(f){var c=f[0]._private.rscratch;c.nodesOverlap||Ne(c.startX)&&Ne(c.startY)&&Ne(c.endX)&&Ne(c.endY)?c.loggedErr=!1:c.loggedErr||(c.loggedErr=!0,ge("Edge `"+f.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))},Ul.findEdgeControlPoints=function(f){var c=this;if(f&&0!==f.length){for(var d=this,_=d.cy.hasCompoundNodes(),C={map:new Eo,get:function(It){var jt=this.map.get(It[0]);return null!=jt?jt.get(It[1]):null},set:function(It,jt){var Dt=this.map.get(It[0]);null==Dt&&(Dt=new Eo,this.map.set(It[0],Dt)),Dt.set(It[1],jt)}},A=[],E=[],N=0;N<f.length;N++){var R=f[N],j=R._private,Z=R.pstyle("curve-style").value;if(!R.removed()&&R.takesUpSpace()){if("haystack"===Z){E.push(R);continue}var he="unbundled-bezier"===Z||"segments"===Z||"straight"===Z||"straight-triangle"===Z||"taxi"===Z,me="unbundled-bezier"===Z||"bezier"===Z,De=j.target,ct=[j.source.poolIndex(),De.poolIndex()].sort(),nt=C.get(ct);null==nt&&(C.set(ct,nt={eles:[]}),A.push(ct)),nt.eles.push(R),he&&(nt.hasUnbundled=!0),me&&(nt.hasBezier=!0)}}for(var Ct=function(It){var Dt=C.get(A[It]),Zt=void 0;if(!Dt.hasUnbundled){var Kt=Dt.eles[0].parallelEdges().filter(function($i){return $i.isBundledBezier()});yr(Dt.eles),Kt.forEach(function($i){return Dt.eles.push($i)}),Dt.eles.sort(function($i,Nt){return $i.poolIndex()-Nt.poolIndex()})}var ut=Dt.eles[0],Qt=ut.source(),Vt=ut.target();if(Qt.poolIndex()>Vt.poolIndex()){var An=Qt;Qt=Vt,Vt=An}var sn=Dt.srcPos=Qt.position(),pn=Dt.tgtPos=Vt.position(),Mn=Dt.srcW=Qt.outerWidth(),kn=Dt.srcH=Qt.outerHeight(),ti=Dt.tgtW=Vt.outerWidth(),Dn=Dt.tgtH=Vt.outerHeight(),Zn=Dt.srcShape=d.nodeShapes[c.getNodeShape(Qt)],hi=Dt.tgtShape=d.nodeShapes[c.getNodeShape(Vt)];Dt.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var xi=0;xi<Dt.eles.length;xi++){var mi=Dt.eles[xi],fi=mi[0]._private.rscratch,Pn=mi.pstyle("curve-style").value,ai="unbundled-bezier"===Pn||"segments"===Pn||"taxi"===Pn,Si=!Qt.same(mi.source());if(!Dt.calculatedIntersection&&Qt!==Vt&&(Dt.hasBezier||Dt.hasUnbundled)){Dt.calculatedIntersection=!0;var Qi=Zn.intersectLine(sn.x,sn.y,Mn,kn,pn.x,pn.y,0),lr=Dt.srcIntn=Qi,Hr=hi.intersectLine(pn.x,pn.y,ti,Dn,sn.x,sn.y,0),Zr=Dt.tgtIntn=Hr,mr=Dt.intersectionPts={x1:Qi[0],x2:Hr[0],y1:Qi[1],y2:Hr[1]},or=Dt.posPts={x1:sn.x,x2:pn.x,y1:sn.y,y2:pn.y},Yr=Hr[1]-Qi[1],ki=Hr[0]-Qi[0],br=Math.sqrt(ki*ki+Yr*Yr),wr=Dt.vector={x:ki,y:Yr},Qr=Dt.vectorNorm={x:wr.x/br,y:wr.y/br},Bs={x:-Qr.y,y:Qr.x};Dt.nodesOverlap=!Ne(br)||hi.checkPoint(Qi[0],Qi[1],0,ti,Dn,pn.x,pn.y)||Zn.checkPoint(Hr[0],Hr[1],0,Mn,kn,sn.x,sn.y),Dt.vectorNormInverse=Bs,Zt={nodesOverlap:Dt.nodesOverlap,dirCounts:Dt.dirCounts,calculatedIntersection:!0,hasBezier:Dt.hasBezier,hasUnbundled:Dt.hasUnbundled,eles:Dt.eles,srcPos:pn,tgtPos:sn,srcW:ti,srcH:Dn,tgtW:Mn,tgtH:kn,srcIntn:Zr,tgtIntn:lr,srcShape:hi,tgtShape:Zn,posPts:{x1:or.x2,y1:or.y2,x2:or.x1,y2:or.y1},intersectionPts:{x1:mr.x2,y1:mr.y2,x2:mr.x1,y2:mr.y1},vector:{x:-wr.x,y:-wr.y},vectorNorm:{x:-Qr.x,y:-Qr.y},vectorNormInverse:{x:-Bs.x,y:-Bs.y}}}var Jr=Si?Zt:Dt;fi.nodesOverlap=Jr.nodesOverlap,fi.srcIntn=Jr.srcIntn,fi.tgtIntn=Jr.tgtIntn,_&&(Qt.isParent()||Qt.isChild()||Vt.isParent()||Vt.isChild())&&(Qt.parents().anySame(Vt)||Vt.parents().anySame(Qt)||Qt.same(Vt)&&Qt.isParent())?c.findCompoundLoopPoints(mi,Jr,xi,ai):Qt===Vt?c.findLoopPoints(mi,Jr,xi,ai):"segments"===Pn?c.findSegmentsPoints(mi,Jr):"taxi"===Pn?c.findTaxiPoints(mi,Jr):"straight"===Pn||!ai&&Dt.eles.length%2==1&&xi===Math.floor(Dt.eles.length/2)?c.findStraightEdgePoints(mi):c.findBezierPoints(mi,Jr,xi,ai,Si),c.findEndpoints(mi),c.tryToCorrectInvalidPoints(mi,Jr),c.checkForInvalidEdgeWarning(mi),c.storeAllpts(mi),c.storeEdgeProjections(mi),c.calculateArrowAngles(mi),c.recalculateEdgeLabelProjections(mi),c.calculateLabelAngles(mi)}},Gt=0;Gt<A.length;Gt++)Ct(Gt);this.findHaystackPoints(E)}},Ul.getSegmentPoints=function(f){var c=f[0]._private.rscratch;if("segments"===c.edgeType)return this.recalculateRenderedStyle(f),zm(c.segpts)},Ul.getControlPoints=function(f){var c=f[0]._private.rscratch,d=c.edgeType;if("bezier"===d||"multibezier"===d||"self"===d||"compound"===d)return this.recalculateRenderedStyle(f),zm(c.ctrlpts)},Ul.getEdgeMidpoint=function(f){var c=f[0]._private.rscratch;return this.recalculateRenderedStyle(f),{x:c.midX,y:c.midY}};var yh={manualEndptToPx:function(f,c){var m=f.position(),_=f.outerWidth(),C=f.outerHeight();if(2===c.value.length){var A=[c.pfValue[0],c.pfValue[1]];return"%"===c.units[0]&&(A[0]=A[0]*_),"%"===c.units[1]&&(A[1]=A[1]*C),A[0]+=m.x,A[1]+=m.y,A}var E=c.pfValue[0];E=-Math.PI/2+E;var N=2*Math.max(_,C),R=[m.x+Math.cos(E)*N,m.y+Math.sin(E)*N];return this.nodeShapes[this.getNodeShape(f)].intersectLine(m.x,m.y,_,C,R[0],R[1],0)},findEndpoints:function(f){var d,Zt,Kt,ut,Qt,c=this,m=f.source()[0],_=f.target()[0],C=m.position(),A=_.position(),E=f.pstyle("target-arrow-shape").value,N=f.pstyle("source-arrow-shape").value,R=f.pstyle("target-distance-from-node").pfValue,j=f.pstyle("source-distance-from-node").pfValue,Z=f.pstyle("curve-style").value,he=f._private.rscratch,me=he.edgeType,De="self"===me||"compound"===me,je="bezier"===me||"multibezier"===me||De,qe="bezier"!==me,ct="straight"===me||"segments"===me,nt="segments"===me,Ct=je||qe||ct,Gt=De||"taxi"===Z,Wt=f.pstyle("source-endpoint"),It=Gt?"outside-to-node":Wt.value,jt=f.pstyle("target-endpoint"),Dt=Gt?"outside-to-node":jt.value;if(he.srcManEndpt=Wt,he.tgtManEndpt=jt,je){var Vt=[he.ctrlpts[0],he.ctrlpts[1]];Zt=qe?[he.ctrlpts[he.ctrlpts.length-2],he.ctrlpts[he.ctrlpts.length-1]]:Vt,Kt=Vt}else if(ct){var sn=nt?he.segpts.slice(0,2):[A.x,A.y];Zt=nt?he.segpts.slice(he.segpts.length-2):[C.x,C.y],Kt=sn}if("inside-to-node"===Dt)d=[A.x,A.y];else if(jt.units)d=this.manualEndptToPx(_,jt);else if("outside-to-line"===Dt)d=he.tgtIntn;else if("outside-to-node"===Dt||"outside-to-node-or-label"===Dt?ut=Zt:("outside-to-line"===Dt||"outside-to-line-or-label"===Dt)&&(ut=[C.x,C.y]),d=c.nodeShapes[this.getNodeShape(_)].intersectLine(A.x,A.y,_.outerWidth(),_.outerHeight(),ut[0],ut[1],0),"outside-to-node-or-label"===Dt||"outside-to-line-or-label"===Dt){var Mn=_._private.rscratch,Dn=Mn.labelX,Zn=Mn.labelY,hi=Mn.labelWidth/2,xi=Mn.labelHeight/2,mi=_.pstyle("text-valign").value;"top"===mi?Zn-=xi:"bottom"===mi&&(Zn+=xi);var fi=_.pstyle("text-halign").value;"left"===fi?Dn-=hi:"right"===fi&&(Dn+=hi);var Pn=hu(ut[0],ut[1],[Dn-hi,Zn-xi,Dn+hi,Zn-xi,Dn+hi,Zn+xi,Dn-hi,Zn+xi],A.x,A.y);if(Pn.length>0){var ai=C,Si=Mh(ai,rd(d)),Qi=Mh(ai,rd(Pn)),lr=Si;Qi<Si&&(d=Pn,lr=Qi),Pn.length>2&&Mh(ai,{x:Pn[2],y:Pn[3]})<lr&&(d=[Pn[2],Pn[3]])}}var Zr=Yf(d,Zt,c.arrowShapes[E].spacing(f)+R),mr=Yf(d,Zt,c.arrowShapes[E].gap(f)+R);if(he.endX=mr[0],he.endY=mr[1],he.arrowEndX=Zr[0],he.arrowEndY=Zr[1],"inside-to-node"===It)d=[C.x,C.y];else if(Wt.units)d=this.manualEndptToPx(m,Wt);else if("outside-to-line"===It)d=he.srcIntn;else if("outside-to-node"===It||"outside-to-node-or-label"===It?Qt=Kt:("outside-to-line"===It||"outside-to-line-or-label"===It)&&(Qt=[A.x,A.y]),d=c.nodeShapes[this.getNodeShape(m)].intersectLine(C.x,C.y,m.outerWidth(),m.outerHeight(),Qt[0],Qt[1],0),"outside-to-node-or-label"===It||"outside-to-line-or-label"===It){var or=m._private.rscratch,br=or.labelX,wr=or.labelY,Qr=or.labelWidth/2,Bs=or.labelHeight/2,Jr=m.pstyle("text-valign").value;"top"===Jr?wr-=Bs:"bottom"===Jr&&(wr+=Bs);var $i=m.pstyle("text-halign").value;"left"===$i?br-=Qr:"right"===$i&&(br+=Qr);var Nt=hu(Qt[0],Qt[1],[br-Qr,wr-Bs,br+Qr,wr-Bs,br+Qr,wr+Bs,br-Qr,wr+Bs],C.x,C.y);if(Nt.length>0){var Kn=A,Pi=Mh(Kn,rd(d)),Xe=Mh(Kn,rd(Nt)),yt=Pi;Xe<Pi&&(d=[Nt[0],Nt[1]],yt=Xe),Nt.length>2&&Mh(Kn,{x:Nt[2],y:Nt[3]})<yt&&(d=[Nt[2],Nt[3]])}}var bn=Yf(d,Kt,c.arrowShapes[N].spacing(f)+j),wn=Yf(d,Kt,c.arrowShapes[N].gap(f)+j);he.startX=wn[0],he.startY=wn[1],he.arrowStartX=bn[0],he.arrowStartY=bn[1],Ct&&(he.badLine=!(Ne(he.startX)&&Ne(he.startY)&&Ne(he.endX)&&Ne(he.endY)))},getSourceEndpoint:function(f){var c=f[0]._private.rscratch;return"haystack"===(this.recalculateRenderedStyle(f),c.edgeType)?{x:c.haystackPts[0],y:c.haystackPts[1]}:{x:c.arrowStartX,y:c.arrowStartY}},getTargetEndpoint:function(f){var c=f[0]._private.rscratch;return"haystack"===(this.recalculateRenderedStyle(f),c.edgeType)?{x:c.haystackPts[2],y:c.haystackPts[3]}:{x:c.arrowEndX,y:c.arrowEndY}}},ng={};function Vm(f,c,d){for(var m=function(R,j,Z,he){return uc(R,j,Z,he)},C=c._private.rstyle.bezierPts,A=0;A<f.bezierProjPcts.length;A++){var E=f.bezierProjPcts[A];C.push({x:m(d[0],d[2],d[4],E),y:m(d[1],d[3],d[5],E)})}}ng.storeEdgeProjections=function(f){var c=f._private,d=c.rscratch,m=d.edgeType;if(c.rstyle.bezierPts=null,c.rstyle.linePts=null,c.rstyle.haystackPts=null,"multibezier"===m||"bezier"===m||"self"===m||"compound"===m){c.rstyle.bezierPts=[];for(var _=0;_+5<d.allpts.length;_+=4)Vm(this,f,d.allpts.slice(_,_+6))}else if("segments"===m){var C=c.rstyle.linePts=[];for(_=0;_+1<d.allpts.length;_+=2)C.push({x:d.allpts[_],y:d.allpts[_+1]})}else if("haystack"===m){var A=d.haystackPts;c.rstyle.haystackPts=[{x:A[0],y:A[1]},{x:A[2],y:A[3]}]}c.rstyle.arrowWidth=this.getArrowWidth(f.pstyle("width").pfValue,f.pstyle("arrow-scale").value)*this.arrowShapeWidth},ng.recalculateEdgeProjections=function(f){this.findEdgeControlPoints(f)};var Fc={recalculateNodeLabelProjection:function(f){var c=f.pstyle("label").strValue;if(!fe(c)){var d,m,_=f._private,C=f.width(),A=f.height(),E=f.padding(),N=f.position(),R=f.pstyle("text-halign").strValue,j=f.pstyle("text-valign").strValue,Z=_.rscratch,he=_.rstyle;switch(R){case"left":d=N.x-C/2-E;break;case"right":d=N.x+C/2+E;break;default:d=N.x}switch(j){case"top":m=N.y-A/2-E;break;case"bottom":m=N.y+A/2+E;break;default:m=N.y}Z.labelX=d,Z.labelY=m,he.labelX=d,he.labelY=m,this.calculateLabelAngles(f),this.applyLabelDimensions(f)}}},Fa=function(c,d){var m=Math.atan(d/c);return 0===c&&m<0&&(m*=-1),m},mc=function(c,d){return Fa(d.x-c.x,d.y-c.y)};Fc.recalculateEdgeLabelProjections=function(f){var c,d=f._private,m=d.rscratch,_=this,C={mid:f.pstyle("label").strValue,source:f.pstyle("source-label").strValue,target:f.pstyle("target-label").strValue};if(C.mid||C.source||C.target){var A=function(Z,he,me){Gs(d.rscratch,Z,he,me),Gs(d.rstyle,Z,he,me)};A("labelX",null,(c={x:m.midX,y:m.midY}).x),A("labelY",null,c.y);var E=Fa(m.midDispX,m.midDispY);A("labelAutoAngle",null,E);var N=function j(){if(j.cache)return j.cache;for(var Z=[],he=0;he+5<m.allpts.length;he+=4)Z.push({p0:{x:m.allpts[he],y:m.allpts[he+1]},p1:{x:m.allpts[he+2],y:m.allpts[he+3]},p2:{x:m.allpts[he+4],y:m.allpts[he+5]},startDist:0,length:0,segments:[]});var je=d.rstyle.bezierPts,qe=_.bezierProjPcts.length;function ct(It,jt,Dt,Zt,Kt){var ut=ro(jt,Dt),Qt=It.segments[It.segments.length-1];It.segments.push({p0:jt,p1:Dt,t0:Zt,t1:Kt,startDist:Qt?Qt.startDist+Qt.length:0,length:ut}),It.length+=ut}for(var nt=0;nt<Z.length;nt++){var Ct=Z[nt],Gt=Z[nt-1];Gt&&(Ct.startDist=Gt.startDist+Gt.length),ct(Ct,Ct.p0,je[nt*qe],0,_.bezierProjPcts[0]);for(var Wt=0;Wt<qe-1;Wt++)ct(Ct,je[nt*qe+Wt],je[nt*qe+Wt+1],_.bezierProjPcts[Wt],_.bezierProjPcts[Wt+1]);ct(Ct,je[nt*qe+qe-1],Ct.p2,_.bezierProjPcts[qe-1],1)}return j.cache=Z},R=function(Z){var he,me="source"===Z;if(C[Z]){var ye=f.pstyle(Z+"-text-offset").pfValue;switch(m.edgeType){case"self":case"compound":case"bezier":case"multibezier":for(var je,De=N(),qe=0,ct=0,nt=0;nt<De.length;nt++){for(var Ct=De[me?nt:De.length-1-nt],Gt=0;Gt<Ct.segments.length;Gt++){var Wt=Ct.segments[me?Gt:Ct.segments.length-1-Gt];if(qe=ct,(ct+=Wt.length)>=ye||nt===De.length-1&&Gt===Ct.segments.length-1){je={cp:Ct,segment:Wt};break}}if(je)break}var jt=je.cp,Dt=je.segment,Zt=(ye-qe)/Dt.length,Kt=Dt.t1-Dt.t0,ut=me?Dt.t0+Kt*Zt:Dt.t1-Kt*Zt;ut=Sr(0,ut,1),c=Zi(jt.p0,jt.p1,jt.p2,ut),he=function(c,d,m,_){var C=Sr(0,_-.001,1),A=Sr(0,_+.001,1),E=Zi(c,d,m,C),N=Zi(c,d,m,A);return mc(E,N)}(jt.p0,jt.p1,jt.p2,ut);break;case"straight":case"segments":case"haystack":for(var Vt,An,sn,pn,Qt=0,Mn=m.allpts.length,kn=0;kn+3<Mn&&(me?(sn={x:m.allpts[kn],y:m.allpts[kn+1]},pn={x:m.allpts[kn+2],y:m.allpts[kn+3]}):(sn={x:m.allpts[Mn-2-kn],y:m.allpts[Mn-1-kn]},pn={x:m.allpts[Mn-4-kn],y:m.allpts[Mn-3-kn]}),An=Qt,!((Qt+=Vt=ro(sn,pn))>=ye));kn+=2);var Dn=(ye-An)/Vt;Dn=Sr(0,Dn,1),c=function(c,d,m,_){var C_x=d.x-c.x,C_y=d.y-c.y,A=ro(c,d);return m=m??0,{x:c.x+C_x/A*(_=_??m*A),y:c.y+C_y/A*_}}(sn,pn,Dn),he=mc(sn,pn)}A("labelX",Z,c.x),A("labelY",Z,c.y),A("labelAutoAngle",Z,he)}};R("source"),R("target"),this.applyLabelDimensions(f)}},Fc.applyLabelDimensions=function(f){this.applyPrefixedLabelDimensions(f),f.isEdge()&&(this.applyPrefixedLabelDimensions(f,"source"),this.applyPrefixedLabelDimensions(f,"target"))},Fc.applyPrefixedLabelDimensions=function(f,c){var d=f._private,m=this.getLabelText(f,c),_=this.calculateLabelDimensions(f,m),C=f.pstyle("line-height").pfValue,A=f.pstyle("text-wrap").strValue,E=ur(d.rscratch,"labelWrapCachedLines",c)||[],N="wrap"!==A?1:Math.max(E.length,1),R=_.height/N,j=R*C,Z=_.width,he=_.height+(N-1)*(C-1)*R;Gs(d.rstyle,"labelWidth",c,Z),Gs(d.rscratch,"labelWidth",c,Z),Gs(d.rstyle,"labelHeight",c,he),Gs(d.rscratch,"labelHeight",c,he),Gs(d.rscratch,"labelLineHeight",c,j)},Fc.getLabelText=function(f,c){var d=f._private,_=f.pstyle((c?c+"-":"")+"label").strValue,C=f.pstyle("text-transform").value,A=function(ti,Dn){return Dn?(Gs(d.rscratch,ti,c,Dn),Dn):ur(d.rscratch,ti,c)};if(!_)return"";"none"==C||("uppercase"==C?_=_.toUpperCase():"lowercase"==C&&(_=_.toLowerCase()));var E=f.pstyle("text-wrap").value;if("wrap"===E){var N=A("labelKey");if(null!=N&&A("labelWrapKey")===N)return A("labelWrapCachedText");for(var j=_.split("\n"),Z=f.pstyle("text-max-width").pfValue,me="anywhere"===f.pstyle("text-overflow-wrap").value,ye=[],De=/[\s\u200b]+/,je=me?"":" ",qe=0;qe<j.length;qe++){var ct=j[qe],Ct=this.calculateLabelDimensions(f,ct).width;if(me){var Gt=ct.split("").join("\u200b");ct=Gt}if(Ct>Z){for(var Wt=ct.split(De),It="",jt=0;jt<Wt.length;jt++){var Dt=Wt[jt];this.calculateLabelDimensions(f,0===It.length?Dt:It+je+Dt).width<=Z?It+=Dt+je:(It&&ye.push(It),It=Dt+je)}It.match(/^[\s\u200b]+$/)||ye.push(It)}else ye.push(ct)}A("labelWrapCachedLines",ye),_=A("labelWrapCachedText",ye.join("\n")),A("labelWrapKey",N)}else if("ellipsis"===E){var Qt=f.pstyle("text-max-width").pfValue,Vt="",sn=!1;if(this.calculateLabelDimensions(f,_).width<Qt)return _;for(var pn=0;pn<_.length&&!(this.calculateLabelDimensions(f,Vt+_[pn]+"\u2026").width>Qt);pn++)Vt+=_[pn],pn===_.length-1&&(sn=!0);return sn||(Vt+="\u2026"),Vt}return _},Fc.getLabelJustification=function(f){var c=f.pstyle("text-justification").strValue,d=f.pstyle("text-halign").strValue;if("auto"!==c)return c;if(!f.isNode())return"center";switch(d){case"left":return"right";case"right":return"left";default:return"center"}},Fc.calculateLabelDimensions=function(f,c){var m=xc(c,f._private.labelDimsKey),_=this.labelDimCache||(this.labelDimCache=[]),C=_[m];if(null!=C)return C;var E=f.pstyle("font-style").strValue,N=f.pstyle("font-size").pfValue,R=f.pstyle("font-family").strValue,j=f.pstyle("font-weight").strValue,Z=this.labelCalcCanvas,he=this.labelCalcCanvasContext;if(!Z){Z=this.labelCalcCanvas=document.createElement("canvas"),he=this.labelCalcCanvasContext=Z.getContext("2d");var me=Z.style;me.position="absolute",me.left="-9999px",me.top="-9999px",me.zIndex="-1",me.visibility="hidden",me.pointerEvents="none"}he.font="".concat(E," ").concat(j," ").concat(N,"px ").concat(R);for(var ye=0,De=0,je=c.split("\n"),qe=0;qe<je.length;qe++){var nt=he.measureText(je[qe]),Ct=Math.ceil(nt.width),Gt=N;ye=Math.max(Ct,ye),De+=Gt}return _[m]={width:ye+=0,height:De+=0}},Fc.calculateLabelAngle=function(f,c){var m=f._private.rscratch,_=f.isEdge(),A=f.pstyle((c?c+"-":"")+"text-rotation"),E=A.strValue;return"none"===E?0:_&&"autorotate"===E?m.labelAutoAngle:"autorotate"===E?0:A.pfValue},Fc.calculateLabelAngles=function(f){var c=this,d=f.isEdge(),_=f._private.rscratch;_.labelAngle=c.calculateLabelAngle(f),d&&(_.sourceLabelAngle=c.calculateLabelAngle(f,"source"),_.targetLabelAngle=c.calculateLabelAngle(f,"target"))};var ig={},qu=!1;ig.getNodeShape=function(f){var d=f.pstyle("shape").value;if("cutrectangle"===d&&(f.width()<28||f.height()<28))return qu||(ge("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),qu=!0),"rectangle";if(f.isParent())return"rectangle"===d||"roundrectangle"===d||"round-rectangle"===d||"cutrectangle"===d||"cut-rectangle"===d||"barrel"===d?d:"rectangle";if("polygon"===d){var m=f.pstyle("shape-polygon-points").value;return this.nodeShapes.makePolygon(m).name}return d};var gd={updateCachedGrabbedEles:function(){var f=this.cachedZSortedEles;if(f){f.drag=[],f.nondrag=[];for(var c=[],d=0;d<f.length;d++){var _=(m=f[d])._private.rscratch;m.grabbed()&&!m.isParent()?c.push(m):_.inDragLayer?f.drag.push(m):f.nondrag.push(m)}for(d=0;d<c.length;d++){var m;f.drag.push(m=c[d])}}},invalidateCachedZSortedEles:function(){this.cachedZSortedEles=null},getCachedZSortedEles:function(f){if(f||!this.cachedZSortedEles){var c=this.cy.mutableElements().toArray();c.sort(cp),c.interactive=c.filter(function(d){return d.interactive()}),this.cachedZSortedEles=c,this.updateCachedGrabbedEles()}else c=this.cachedZSortedEles;return c}},_h={};[Oa,Bm,Ul,yh,ng,Fc,ig,{registerCalculationListeners:function(){var f=this.cy,c=f.collection(),d=this,m=function(A){var E=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(c.merge(A),E)for(var N=0;N<A.length;N++){var R=A[N],j=R._private,Z=j.rstyle;Z.clean=!1,Z.cleanConnected=!1}};d.binder(f).on("bounds.* dirty.*",function(A){m(A.target)}).on("style.* background.*",function(A){m(A.target,!1)});var _=function(A){if(A){var E=d.onUpdateEleCalcsFns;c.cleanStyle();for(var N=0;N<c.length;N++){var R=c[N],j=R._private.rstyle;R.isNode()&&!j.cleanConnected&&(m(R.connectedEdges()),j.cleanConnected=!0)}if(E)for(var Z=0;Z<E.length;Z++)(0,E[Z])(A,c);d.recalculateRenderedStyle(c),c=f.collection()}};d.flushRenderedStyleQueue=function(){_(!0)},d.beforeRender(_,d.beforeRenderPriorities.eleCalcs)},onUpdateEleCalcs:function(f){(this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[]).push(f)},recalculateRenderedStyle:function(f,c){var d=function(Ct){return Ct._private.rstyle.cleanConnected},m=[],_=[];if(!this.destroyed){void 0===c&&(c=!0);for(var C=0;C<f.length;C++){var A=f[C],E=A._private,N=E.rstyle;A.isEdge()&&(!d(A.source())||!d(A.target()))&&(N.clean=!1),!(c&&N.clean||A.removed())&&"none"!==A.pstyle("display").value&&("nodes"===E.group?_.push(A):m.push(A),N.clean=!0)}for(var R=0;R<_.length;R++){var j=_[R],he=j._private.rstyle,me=j.position();this.recalculateNodeLabelProjection(j),he.nodeX=me.x,he.nodeY=me.y,he.nodeW=j.pstyle("width").pfValue,he.nodeH=j.pstyle("height").pfValue}this.recalculateEdgeProjections(m);for(var ye=0;ye<m.length;ye++){var je=m[ye]._private,qe=je.rstyle,ct=je.rscratch;qe.srcX=ct.arrowStartX,qe.srcY=ct.arrowStartY,qe.tgtX=ct.arrowEndX,qe.tgtY=ct.arrowEndY,qe.midX=ct.midX,qe.midY=ct.midY,qe.labelAngle=ct.labelAngle,qe.sourceLabelAngle=ct.sourceLabelAngle,qe.targetLabelAngle=ct.targetLabelAngle}}}},gd].forEach(function(f){sr(_h,f)});var Jd={getCachedImage:function(f,c,d){var _=this.imageCache=this.imageCache||{},C=_[f];if(C)return C.image.complete||C.image.addEventListener("load",d),C.image;var A=(C=_[f]=_[f]||{}).image=new Image;A.addEventListener("load",d),A.addEventListener("error",function(){A.error=!0});var E="data:";return f.substring(0,E.length).toLowerCase()===E||(A.crossOrigin=c),A.src=f,A}},ru={registerBinding:function(f,c,d,m){var _=Array.prototype.slice.apply(arguments,[1]),C=this.binder(f);return C.on.apply(C,_)},binder:function(f){var c=this,d=f===window||f===document||f===document.body||function(c){return!(typeof HTMLElement>"u")&&c instanceof HTMLElement}(f);if(null==c.supportsPassiveEvents){var m=!1;try{var _=Object.defineProperty({},"passive",{get:function(){return m=!0,!0}});window.addEventListener("test",null,_)}catch{}c.supportsPassiveEvents=m}var C=function(E,N,R){var j=Array.prototype.slice.call(arguments);return d&&c.supportsPassiveEvents&&(j[2]={capture:R??!1,passive:!1,once:!1}),c.bindings.push({target:f,args:j}),(f.addEventListener||f.on).apply(f,j),this};return{on:C,addEventListener:C,addListener:C,bind:C}},nodeIsDraggable:function(f){return f&&f.isNode()&&!f.locked()&&f.grabbable()},nodeIsGrabbable:function(f){return this.nodeIsDraggable(f)&&f.interactive()}};ru.load=function(){var f=this,c=function(Nt){return Nt.selected()},d=function(Nt,Kn,Pi,Xe){null==Nt&&(Nt=f.cy);for(var yt=0;yt<Kn.length;yt++)Nt.emit({originalEvent:Pi,type:Kn[yt],position:Xe})},m=function(Nt){return Nt.shiftKey||Nt.metaKey||Nt.ctrlKey},_=function(Nt,Kn){var Pi=!0;if(f.cy.hasCompoundNodes()&&Nt&&Nt.pannable()){for(var Xe=0;Kn&&Xe<Kn.length;Xe++)if((Nt=Kn[Xe]).isNode()&&Nt.isParent()&&!Nt.pannable()){Pi=!1;break}}else Pi=!0;return Pi},E=function(Nt){Nt[0]._private.rscratch.inDragLayer=!0},R=function(Nt){Nt[0]._private.rscratch.isGrabTarget=!0},Z=function(Nt,Kn){var Pi=Kn.addToList;!Pi.has(Nt)&&Nt.grabbable()&&!Nt.locked()&&(Pi.merge(Nt),function(Nt){Nt[0]._private.grabbed=!0}(Nt))},me=function(Nt,Kn){Kn=Kn||{};var Pi=Nt.cy().hasCompoundNodes();Kn.inDragLayer&&(Nt.forEach(E),Nt.neighborhood().stdFilter(function(Xe){return!Pi||Xe.isEdge()}).forEach(E)),Kn.addToList&&Nt.forEach(function(Xe){Z(Xe,Kn)}),function(Nt,Kn){if(Nt.cy().hasCompoundNodes()&&(null!=Kn.inDragLayer||null!=Kn.addToList)){var Pi=Nt.descendants();Kn.inDragLayer&&(Pi.forEach(E),Pi.connectedEdges().forEach(E)),Kn.addToList&&Z(Pi,Kn)}}(Nt,Kn),je(Nt,{inDragLayer:Kn.inDragLayer}),f.updateCachedGrabbedEles()},ye=me,De=function(Nt){!Nt||(f.getCachedZSortedEles().forEach(function(Kn){(function(Nt){Nt[0]._private.grabbed=!1})(Kn),function(Nt){Nt[0]._private.rscratch.inDragLayer=!1}(Kn),function(Nt){Nt[0]._private.rscratch.isGrabTarget=!1}(Kn)}),f.updateCachedGrabbedEles())},je=function(Nt,Kn){if((null!=Kn.inDragLayer||null!=Kn.addToList)&&Nt.cy().hasCompoundNodes()){var Pi=Nt.ancestors().orphans();if(!Pi.same(Nt)){var Xe=Pi.descendants().spawnSelf().merge(Pi).unmerge(Nt).unmerge(Nt.descendants()),yt=Xe.connectedEdges();Kn.inDragLayer&&(yt.forEach(E),Xe.forEach(E)),Kn.addToList&&Xe.forEach(function(dn){Z(dn,Kn)})}}},qe=function(){null!=document.activeElement&&null!=document.activeElement.blur&&document.activeElement.blur()},ct=typeof MutationObserver<"u",nt=typeof ResizeObserver<"u";ct?(f.removeObserver=new MutationObserver(function($i){for(var Nt=0;Nt<$i.length;Nt++){var Pi=$i[Nt].removedNodes;if(Pi)for(var Xe=0;Xe<Pi.length;Xe++)if(Pi[Xe]===f.container){f.destroy();break}}}),f.container.parentNode&&f.removeObserver.observe(f.container.parentNode,{childList:!0})):f.registerBinding(f.container,"DOMNodeRemoved",function($i){f.destroy()});var Ct=P.default(function(){f.cy.resize()},100);ct&&(f.styleObserver=new MutationObserver(Ct),f.styleObserver.observe(f.container,{attributes:!0})),f.registerBinding(window,"resize",Ct),nt&&(f.resizeObserver=new ResizeObserver(Ct),f.resizeObserver.observe(f.container));var Wt=function(){f.invalidateContainerClientCoordsCache()};(function(Nt,Kn){for(;null!=Nt;)f.registerBinding($i=Nt,"transitionend",Wt),f.registerBinding($i,"animationend",Wt),f.registerBinding($i,"scroll",Wt),Nt=Nt.parentNode;var $i})(f.container),f.registerBinding(f.container,"contextmenu",function($i){$i.preventDefault()});var Dt,Zt,Kt,jt=function(Nt){for(var Kn=f.findContainerClientCoords(),Pi=Kn[0],Xe=Kn[1],yt=Kn[2],dn=Kn[3],bn=Nt.touches?Nt.touches:[Nt],wn=!1,nr=0;nr<bn.length;nr++){var cr=bn[nr];if(Pi<=cr.clientX&&cr.clientX<=Pi+yt&&Xe<=cr.clientY&&cr.clientY<=Xe+dn){wn=!0;break}}if(!wn)return!1;for(var oi=f.container,Vi=Nt.target.parentNode,Ui=!1;Vi;){if(Vi===oi){Ui=!0;break}Vi=Vi.parentNode}return!!Ui};f.registerBinding(f.container,"mousedown",function(Nt){if(jt(Nt)){Nt.preventDefault(),qe(),f.hoverData.capture=!0,f.hoverData.which=Nt.which;var Kn=f.cy,Pi=[Nt.clientX,Nt.clientY],Xe=f.projectIntoViewport(Pi[0],Pi[1]),yt=f.selection,dn=f.findNearestElements(Xe[0],Xe[1],!0,!1),bn=dn[0],wn=f.dragData.possibleDragElements;if(f.hoverData.mdownPos=Xe,f.hoverData.mdownGPos=Pi,3==Nt.which){f.hoverData.cxtStarted=!0;var cr={originalEvent:Nt,type:"cxttapstart",position:{x:Xe[0],y:Xe[1]}};bn?(bn.activate(),bn.emit(cr),f.hoverData.down=bn):Kn.emit(cr),f.hoverData.downTime=(new Date).getTime(),f.hoverData.cxtDragged=!1}else if(1==Nt.which){if(bn&&bn.activate(),null!=bn&&f.nodeIsGrabbable(bn)){var oi=function(tr){return{originalEvent:Nt,type:tr,position:{x:Xe[0],y:Xe[1]}}};if(R(bn),bn.selected()){wn=f.dragData.possibleDragElements=Kn.collection();var Vi=Kn.$(function(Ui){return Ui.isNode()&&Ui.selected()&&f.nodeIsGrabbable(Ui)});me(Vi,{addToList:wn}),bn.emit(oi("grabon")),Vi.forEach(function(tr){tr.emit(oi("grab"))})}else wn=f.dragData.possibleDragElements=Kn.collection(),ye(bn,{addToList:wn}),bn.emit(oi("grabon")).emit(oi("grab"));f.redrawHint("eles",!0),f.redrawHint("drag",!0)}f.hoverData.down=bn,f.hoverData.downs=dn,f.hoverData.downTime=(new Date).getTime(),d(bn,["mousedown","tapstart","vmousedown"],Nt,{x:Xe[0],y:Xe[1]}),null==bn?(yt[4]=1,f.data.bgActivePosistion={x:Xe[0],y:Xe[1]},f.redrawHint("select",!0),f.redraw()):bn.pannable()&&(yt[4]=1),f.hoverData.tapholdCancelled=!1,clearTimeout(f.hoverData.tapholdTimeout),f.hoverData.tapholdTimeout=setTimeout(function(){if(!f.hoverData.tapholdCancelled){var tr=f.hoverData.down;tr?tr.emit({originalEvent:Nt,type:"taphold",position:{x:Xe[0],y:Xe[1]}}):Kn.emit({originalEvent:Nt,type:"taphold",position:{x:Xe[0],y:Xe[1]}})}},f.tapholdDuration)}yt[0]=yt[2]=Xe[0],yt[1]=yt[3]=Xe[1]}},!1),f.registerBinding(window,"mousemove",function(Nt){var Uc;if(f.hoverData.capture||jt(Nt)){var Pi=!1,Xe=f.cy,yt=Xe.zoom(),dn=[Nt.clientX,Nt.clientY],bn=f.projectIntoViewport(dn[0],dn[1]),wn=f.hoverData.mdownPos,nr=f.hoverData.mdownGPos,cr=f.selection,oi=null;!f.hoverData.draggingEles&&!f.hoverData.dragging&&!f.hoverData.selecting&&(oi=f.findNearestElement(bn[0],bn[1],!0,!1));var eo,Br=f.hoverData.last,Vi=f.hoverData.down,Ui=[bn[0]-cr[2],bn[1]-cr[3]],tr=f.dragData.possibleDragElements;if(nr){var fo=dn[0]-nr[0],$o=dn[1]-nr[1];f.hoverData.isOverThresholdDrag=eo=fo*fo+$o*$o>=f.desktopTapThreshold2}var Er=m(Nt);eo&&(f.hoverData.tapholdCancelled=!0),Pi=!0,d(oi,["mousemove","vmousemove","tapdrag"],Nt,{x:bn[0],y:bn[1]});var Hl=function(){f.data.bgActivePosistion=void 0,f.hoverData.selecting||Xe.emit({originalEvent:Nt,type:"boxstart",position:{x:bn[0],y:bn[1]}}),cr[4]=1,f.hoverData.selecting=!0,f.redrawHint("select",!0),f.redraw()};if(3===f.hoverData.which){if(eo){var Gl={originalEvent:Nt,type:"cxtdrag",position:{x:bn[0],y:bn[1]}};Vi?Vi.emit(Gl):Xe.emit(Gl),f.hoverData.cxtDragged=!0,(!f.hoverData.cxtOver||oi!==f.hoverData.cxtOver)&&(f.hoverData.cxtOver&&f.hoverData.cxtOver.emit({originalEvent:Nt,type:"cxtdragout",position:{x:bn[0],y:bn[1]}}),f.hoverData.cxtOver=oi,oi&&oi.emit({originalEvent:Nt,type:"cxtdragover",position:{x:bn[0],y:bn[1]}}))}}else if(f.hoverData.dragging){if(Pi=!0,Xe.panningEnabled()&&Xe.userPanningEnabled()){var Bc;if(f.hoverData.justStartedPan){var Cp=f.hoverData.mdownPos;Bc={x:(bn[0]-Cp[0])*yt,y:(bn[1]-Cp[1])*yt},f.hoverData.justStartedPan=!1}else Bc={x:Ui[0]*yt,y:Ui[1]*yt};Xe.panBy(Bc),Xe.emit("dragpan"),f.hoverData.dragged=!0}bn=f.projectIntoViewport(Nt.clientX,Nt.clientY)}else if(1!=cr[4]||null!=Vi&&!Vi.pannable()){if(Vi&&Vi.pannable()&&Vi.active()&&Vi.unactivate(),(!Vi||!Vi.grabbed())&&oi!=Br&&(Br&&d(Br,["mouseout","tapdragout"],Nt,{x:bn[0],y:bn[1]}),oi&&d(oi,["mouseover","tapdragover"],Nt,{x:bn[0],y:bn[1]}),f.hoverData.last=oi),Vi)if(eo){if(Xe.boxSelectionEnabled()&&Er)Vi&&Vi.grabbed()&&(De(tr),Vi.emit("freeon"),tr.emit("free"),f.dragData.didDrag&&(Vi.emit("dragfreeon"),tr.emit("dragfree"))),Hl();else if(Vi&&Vi.grabbed()&&f.nodeIsDraggable(Vi)){var zc=!f.dragData.didDrag;zc&&f.redrawHint("eles",!0),f.dragData.didDrag=!0,f.hoverData.draggingEles||me(tr,{inDragLayer:!0});var ic={x:0,y:0};if(Ne(Ui[0])&&Ne(Ui[1])&&(ic.x+=Ui[0],ic.y+=Ui[1],zc)){var Vc=f.hoverData.dragDelta;Vc&&Ne(Vc[0])&&Ne(Vc[1])&&(ic.x+=Vc[0],ic.y+=Vc[1])}f.hoverData.draggingEles=!0,tr.silentShift(ic).emit("position drag"),f.redrawHint("drag",!0),f.redraw()}}else 0===(Uc=f.hoverData.dragDelta=f.hoverData.dragDelta||[]).length?(Uc.push(Ui[0]),Uc.push(Ui[1])):(Uc[0]+=Ui[0],Uc[1]+=Ui[1]);Pi=!0}else eo&&(f.hoverData.dragging||!Xe.boxSelectionEnabled()||!Er&&Xe.panningEnabled()&&Xe.userPanningEnabled()?!f.hoverData.selecting&&Xe.panningEnabled()&&Xe.userPanningEnabled()&&_(Vi,f.hoverData.downs)&&(f.hoverData.dragging=!0,f.hoverData.justStartedPan=!0,cr[4]=0,f.data.bgActivePosistion=rd(wn),f.redrawHint("select",!0),f.redraw()):Hl(),Vi&&Vi.pannable()&&Vi.active()&&Vi.unactivate());if(cr[2]=bn[0],cr[3]=bn[1],Pi)return Nt.stopPropagation&&Nt.stopPropagation(),Nt.preventDefault&&Nt.preventDefault(),!1}},!1),f.registerBinding(window,"mouseup",function(Nt){if(f.hoverData.capture){f.hoverData.capture=!1;var Pi=f.cy,Xe=f.projectIntoViewport(Nt.clientX,Nt.clientY),yt=f.selection,dn=f.findNearestElement(Xe[0],Xe[1],!0,!1),bn=f.dragData.possibleDragElements,wn=f.hoverData.down,nr=m(Nt);if(f.data.bgActivePosistion&&(f.redrawHint("select",!0),f.redraw()),f.hoverData.tapholdCancelled=!0,f.data.bgActivePosistion=void 0,wn&&wn.unactivate(),3===f.hoverData.which){var cr={originalEvent:Nt,type:"cxttapend",position:{x:Xe[0],y:Xe[1]}};if(wn?wn.emit(cr):Pi.emit(cr),!f.hoverData.cxtDragged){var oi={originalEvent:Nt,type:"cxttap",position:{x:Xe[0],y:Xe[1]}};wn?wn.emit(oi):Pi.emit(oi)}f.hoverData.cxtDragged=!1,f.hoverData.which=null}else if(1===f.hoverData.which){if(d(dn,["mouseup","tapend","vmouseup"],Nt,{x:Xe[0],y:Xe[1]}),!f.dragData.didDrag&&!f.hoverData.dragged&&!f.hoverData.selecting&&!f.hoverData.isOverThresholdDrag&&(d(wn,["click","tap","vclick"],Nt,{x:Xe[0],y:Xe[1]}),Zt=!1,Nt.timeStamp-Kt<=Pi.multiClickDebounceTime()?(Dt&&clearTimeout(Dt),Zt=!0,Kt=null,d(wn,["dblclick","dbltap","vdblclick"],Nt,{x:Xe[0],y:Xe[1]})):(Dt=setTimeout(function(){Zt||d(wn,["oneclick","onetap","voneclick"],Nt,{x:Xe[0],y:Xe[1]})},Pi.multiClickDebounceTime()),Kt=Nt.timeStamp)),null==wn&&!f.dragData.didDrag&&!f.hoverData.selecting&&!f.hoverData.dragged&&!m(Nt)&&(Pi.$(c).unselect(["tapunselect"]),bn.length>0&&f.redrawHint("eles",!0),f.dragData.possibleDragElements=bn=Pi.collection()),dn==wn&&!f.dragData.didDrag&&!f.hoverData.selecting&&null!=dn&&dn._private.selectable&&(f.hoverData.dragging||("additive"===Pi.selectionType()||nr?dn.selected()?dn.unselect(["tapunselect"]):dn.select(["tapselect"]):nr||(Pi.$(c).unmerge(dn).unselect(["tapunselect"]),dn.select(["tapselect"]))),f.redrawHint("eles",!0)),f.hoverData.selecting){var Br=Pi.collection(f.getAllInBox(yt[0],yt[1],yt[2],yt[3]));f.redrawHint("select",!0),Br.length>0&&f.redrawHint("eles",!0),Pi.emit({type:"boxend",originalEvent:Nt,position:{x:Xe[0],y:Xe[1]}}),"additive"===Pi.selectionType()||nr||Pi.$(c).unmerge(Br).unselect(),Br.emit("box").stdFilter(function(eo){return eo.selectable()&&!eo.selected()}).select().emit("boxselect"),f.redraw()}if(f.hoverData.dragging&&(f.hoverData.dragging=!1,f.redrawHint("select",!0),f.redrawHint("eles",!0),f.redraw()),!yt[4]){f.redrawHint("drag",!0),f.redrawHint("eles",!0);var Ui=wn&&wn.grabbed();De(bn),Ui&&(wn.emit("freeon"),bn.emit("free"),f.dragData.didDrag&&(wn.emit("dragfreeon"),bn.emit("dragfree")))}}yt[4]=0,f.hoverData.down=null,f.hoverData.cxtStarted=!1,f.hoverData.draggingEles=!1,f.hoverData.selecting=!1,f.hoverData.isOverThresholdDrag=!1,f.dragData.didDrag=!1,f.hoverData.dragged=!1,f.hoverData.dragDelta=[],f.hoverData.mdownPos=null,f.hoverData.mdownGPos=null}},!1);var ut=function(Nt){if(!f.scrollingPage){var Kn=f.cy,Pi=Kn.zoom(),Xe=Kn.pan(),yt=f.projectIntoViewport(Nt.clientX,Nt.clientY),dn=[yt[0]*Pi+Xe.x,yt[1]*Pi+Xe.y];if(f.hoverData.draggingEles||f.hoverData.dragging||f.hoverData.cxtStarted||0!==f.selection[4])return void Nt.preventDefault();if(Kn.panningEnabled()&&Kn.userPanningEnabled()&&Kn.zoomingEnabled()&&Kn.userZoomingEnabled()){var bn;Nt.preventDefault(),f.data.wheelZooming=!0,clearTimeout(f.data.wheelTimeout),f.data.wheelTimeout=setTimeout(function(){f.data.wheelZooming=!1,f.redrawHint("eles",!0),f.redraw()},150),bn=null!=Nt.deltaY?Nt.deltaY/-250:null!=Nt.wheelDeltaY?Nt.wheelDeltaY/1e3:Nt.wheelDelta/1e3,bn*=f.wheelSensitivity,1===Nt.deltaMode&&(bn*=33);var nr=Kn.zoom()*Math.pow(10,bn);"gesturechange"===Nt.type&&(nr=f.gestureStartZoom*Nt.scale),Kn.zoom({level:nr,renderedPosition:{x:dn[0],y:dn[1]}}),Kn.emit("gesturechange"===Nt.type?"pinchzoom":"scrollzoom")}}};f.registerBinding(f.container,"wheel",ut,!0),f.registerBinding(window,"scroll",function(Nt){f.scrollingPage=!0,clearTimeout(f.scrollingPageTimeout),f.scrollingPageTimeout=setTimeout(function(){f.scrollingPage=!1},250)},!0),f.registerBinding(f.container,"gesturestart",function(Nt){f.gestureStartZoom=f.cy.zoom(),f.hasTouchStarted||Nt.preventDefault()},!0),f.registerBinding(f.container,"gesturechange",function($i){f.hasTouchStarted||ut($i)},!0),f.registerBinding(f.container,"mouseout",function(Nt){var Kn=f.projectIntoViewport(Nt.clientX,Nt.clientY);f.cy.emit({originalEvent:Nt,type:"mouseout",position:{x:Kn[0],y:Kn[1]}})},!1),f.registerBinding(f.container,"mouseover",function(Nt){var Kn=f.projectIntoViewport(Nt.clientX,Nt.clientY);f.cy.emit({originalEvent:Nt,type:"mouseover",position:{x:Kn[0],y:Kn[1]}})},!1);var Qt,Vt,An,sn,pn,Mn,kn,ti,Dn,Zn,hi,xi,mi,ai,Si,Qi,lr,Hr,Zr,mr,fi=function(Nt,Kn,Pi,Xe){return Math.sqrt((Pi-Nt)*(Pi-Nt)+(Xe-Kn)*(Xe-Kn))},Pn=function(Nt,Kn,Pi,Xe){return(Pi-Nt)*(Pi-Nt)+(Xe-Kn)*(Xe-Kn)};if(f.registerBinding(f.container,"touchstart",ai=function(Nt){if(f.hasTouchStarted=!0,jt(Nt)){qe(),f.touchData.capture=!0,f.data.bgActivePosistion=void 0;var Kn=f.cy,Pi=f.touchData.now,Xe=f.touchData.earlier;if(Nt.touches[0]){var yt=f.projectIntoViewport(Nt.touches[0].clientX,Nt.touches[0].clientY);Pi[0]=yt[0],Pi[1]=yt[1]}if(Nt.touches[1]&&(yt=f.projectIntoViewport(Nt.touches[1].clientX,Nt.touches[1].clientY),Pi[2]=yt[0],Pi[3]=yt[1]),Nt.touches[2]&&(yt=f.projectIntoViewport(Nt.touches[2].clientX,Nt.touches[2].clientY),Pi[4]=yt[0],Pi[5]=yt[1]),Nt.touches[1]){f.touchData.singleTouchMoved=!0,De(f.dragData.touchDragEles);var dn=f.findContainerClientCoords();hi=dn[2],xi=dn[3],Vt=Nt.touches[0].clientY-(Zn=dn[1]),An=Nt.touches[1].clientX-(Dn=dn[0]),sn=Nt.touches[1].clientY-Zn,mi=0<=(Qt=Nt.touches[0].clientX-Dn)&&Qt<=hi&&0<=An&&An<=hi&&0<=Vt&&Vt<=xi&&0<=sn&&sn<=xi;var bn=Kn.pan(),wn=Kn.zoom();if(pn=fi(Qt,Vt,An,sn),Mn=Pn(Qt,Vt,An,sn),ti=[((kn=[(Qt+An)/2,(Vt+sn)/2])[0]-bn.x)/wn,(kn[1]-bn.y)/wn],Mn<4e4&&!Nt.touches[2]){var oi=f.findNearestElement(Pi[0],Pi[1],!0,!0),Br=f.findNearestElement(Pi[2],Pi[3],!0,!0);return oi&&oi.isNode()?(oi.activate().emit({originalEvent:Nt,type:"cxttapstart",position:{x:Pi[0],y:Pi[1]}}),f.touchData.start=oi):Br&&Br.isNode()?(Br.activate().emit({originalEvent:Nt,type:"cxttapstart",position:{x:Pi[0],y:Pi[1]}}),f.touchData.start=Br):Kn.emit({originalEvent:Nt,type:"cxttapstart",position:{x:Pi[0],y:Pi[1]}}),f.touchData.start&&(f.touchData.start._private.grabbed=!1),f.touchData.cxt=!0,f.touchData.cxtDragged=!1,f.data.bgActivePosistion=void 0,void f.redraw()}}if(Nt.touches[2])Kn.boxSelectionEnabled()&&Nt.preventDefault();else if(!Nt.touches[1]&&Nt.touches[0]){var Vi=f.findNearestElements(Pi[0],Pi[1],!0,!0),Ui=Vi[0];if(null!=Ui&&(Ui.activate(),f.touchData.start=Ui,f.touchData.starts=Vi,f.nodeIsGrabbable(Ui))){var tr=f.dragData.touchDragEles=Kn.collection(),eo=null;f.redrawHint("eles",!0),f.redrawHint("drag",!0),Ui.selected()?(eo=Kn.$(function(Qo){return Qo.selected()&&f.nodeIsGrabbable(Qo)}),me(eo,{addToList:tr})):ye(Ui,{addToList:tr}),R(Ui);var fo=function(Er){return{originalEvent:Nt,type:Er,position:{x:Pi[0],y:Pi[1]}}};Ui.emit(fo("grabon")),eo?eo.forEach(function(Qo){Qo.emit(fo("grab"))}):Ui.emit(fo("grab"))}d(Ui,["touchstart","tapstart","vmousedown"],Nt,{x:Pi[0],y:Pi[1]}),null==Ui&&(f.data.bgActivePosistion={x:yt[0],y:yt[1]},f.redrawHint("select",!0),f.redraw()),f.touchData.singleTouchMoved=!1,f.touchData.singleTouchStartTime=+new Date,clearTimeout(f.touchData.tapholdTimeout),f.touchData.tapholdTimeout=setTimeout(function(){!1===f.touchData.singleTouchMoved&&!f.pinching&&!f.touchData.selecting&&d(f.touchData.start,["taphold"],Nt,{x:Pi[0],y:Pi[1]})},f.tapholdDuration)}if(Nt.touches.length>=1){for(var Na=f.touchData.startPosition=[],$o=0;$o<Pi.length;$o++)Na[$o]=Xe[$o]=Pi[$o];var Lo=Nt.touches[0];f.touchData.startGPosition=[Lo.clientX,Lo.clientY]}}},!1),f.registerBinding(window,"touchmove",Si=function(Nt){var Kn=f.touchData.capture;if(Kn||jt(Nt)){var Pi=f.selection,Xe=f.cy,yt=f.touchData.now,dn=f.touchData.earlier,bn=Xe.zoom();if(Nt.touches[0]){var wn=f.projectIntoViewport(Nt.touches[0].clientX,Nt.touches[0].clientY);yt[0]=wn[0],yt[1]=wn[1]}Nt.touches[1]&&(wn=f.projectIntoViewport(Nt.touches[1].clientX,Nt.touches[1].clientY),yt[2]=wn[0],yt[3]=wn[1]),Nt.touches[2]&&(wn=f.projectIntoViewport(Nt.touches[2].clientX,Nt.touches[2].clientY),yt[4]=wn[0],yt[5]=wn[1]);var cr,nr=f.touchData.startGPosition;if(Kn&&Nt.touches[0]&&nr){for(var oi=[],Br=0;Br<yt.length;Br++)oi[Br]=yt[Br]-dn[Br];var Vi=Nt.touches[0].clientX-nr[0],tr=Nt.touches[0].clientY-nr[1];cr=Vi*Vi+tr*tr>=f.touchTapThreshold2}if(Kn&&f.touchData.cxt){Nt.preventDefault();var Er=Pn(Na=Nt.touches[0].clientX-Dn,$o=Nt.touches[0].clientY-Zn,Lo=Nt.touches[1].clientX-Dn,Qo=Nt.touches[1].clientY-Zn);if(Er/Mn>=2.25||Er>=22500){f.touchData.cxt=!1,f.data.bgActivePosistion=void 0,f.redrawHint("select",!0);var Nf={originalEvent:Nt,type:"cxttapend",position:{x:yt[0],y:yt[1]}};f.touchData.start?(f.touchData.start.unactivate().emit(Nf),f.touchData.start=null):Xe.emit(Nf)}}if(Kn&&f.touchData.cxt){Nf={originalEvent:Nt,type:"cxtdrag",position:{x:yt[0],y:yt[1]}},f.data.bgActivePosistion=void 0,f.redrawHint("select",!0),f.touchData.start?f.touchData.start.emit(Nf):Xe.emit(Nf),f.touchData.start&&(f.touchData.start._private.grabbed=!1),f.touchData.cxtDragged=!0;var zc=f.findNearestElement(yt[0],yt[1],!0,!0);(!f.touchData.cxtOver||zc!==f.touchData.cxtOver)&&(f.touchData.cxtOver&&f.touchData.cxtOver.emit({originalEvent:Nt,type:"cxtdragout",position:{x:yt[0],y:yt[1]}}),f.touchData.cxtOver=zc,zc&&zc.emit({originalEvent:Nt,type:"cxtdragover",position:{x:yt[0],y:yt[1]}}))}else if(Kn&&Nt.touches[2]&&Xe.boxSelectionEnabled())Nt.preventDefault(),f.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,f.touchData.selecting||Xe.emit({originalEvent:Nt,type:"boxstart",position:{x:yt[0],y:yt[1]}}),f.touchData.selecting=!0,f.touchData.didSelect=!0,Pi[4]=1,Pi&&0!==Pi.length&&void 0!==Pi[0]?(Pi[2]=(yt[0]+yt[2]+yt[4])/3,Pi[3]=(yt[1]+yt[3]+yt[5])/3):(Pi[0]=(yt[0]+yt[2]+yt[4])/3,Pi[1]=(yt[1]+yt[3]+yt[5])/3,Pi[2]=(yt[0]+yt[2]+yt[4])/3+1,Pi[3]=(yt[1]+yt[3]+yt[5])/3+1),f.redrawHint("select",!0),f.redraw();else if(Kn&&Nt.touches[1]&&!f.touchData.didSelect&&Xe.zoomingEnabled()&&Xe.panningEnabled()&&Xe.userZoomingEnabled()&&Xe.userPanningEnabled()){if(Nt.preventDefault(),f.data.bgActivePosistion=void 0,f.redrawHint("select",!0),ic=f.dragData.touchDragEles){f.redrawHint("drag",!0);for(var Vc=0;Vc<ic.length;Vc++){var wp=ic[Vc]._private;wp.grabbed=!1,wp.rscratch.inDragLayer=!1}}var Na,$o,Lo,Qo,Uc=f.touchData.start,Zs=fi(Na=Nt.touches[0].clientX-Dn,$o=Nt.touches[0].clientY-Zn,Lo=Nt.touches[1].clientX-Dn,Qo=Nt.touches[1].clientY-Zn),_b=Zs/pn;if(mi){var t0=(Na-Qt+(Lo-An))/2,bb=($o-Vt+(Qo-sn))/2,cg=Xe.zoom(),Zy=cg*_b,Hv=Xe.pan(),ug=ti[0]*cg+Hv.x,n0=ti[1]*cg+Hv.y,Cb={x:-Zy/cg*(ug-Hv.x-t0)+ug,y:-Zy/cg*(n0-Hv.y-bb)+n0};Uc&&Uc.active()&&(De(ic=f.dragData.touchDragEles),f.redrawHint("drag",!0),f.redrawHint("eles",!0),Uc.unactivate().emit("freeon"),ic.emit("free"),f.dragData.didDrag&&(Uc.emit("dragfreeon"),ic.emit("dragfree"))),Xe.viewport({zoom:Zy,pan:Cb,cancelOnFailedZoom:!0}),Xe.emit("pinchzoom"),pn=Zs,Qt=Na,Vt=$o,An=Lo,sn=Qo,f.pinching=!0}Nt.touches[0]&&(wn=f.projectIntoViewport(Nt.touches[0].clientX,Nt.touches[0].clientY),yt[0]=wn[0],yt[1]=wn[1]),Nt.touches[1]&&(wn=f.projectIntoViewport(Nt.touches[1].clientX,Nt.touches[1].clientY),yt[2]=wn[0],yt[3]=wn[1]),Nt.touches[2]&&(wn=f.projectIntoViewport(Nt.touches[2].clientX,Nt.touches[2].clientY),yt[4]=wn[0],yt[5]=wn[1])}else if(Nt.touches[0]&&!f.touchData.didSelect){var nf=f.touchData.start,wb=f.touchData.last;if(!f.hoverData.draggingEles&&!f.swipePanning&&(zc=f.findNearestElement(yt[0],yt[1],!0,!0)),Kn&&null!=nf&&Nt.preventDefault(),Kn&&null!=nf&&f.nodeIsDraggable(nf))if(cr){var ic=f.dragData.touchDragEles,Gv=!f.dragData.didDrag;Gv&&me(ic,{inDragLayer:!0}),f.dragData.didDrag=!0;var Wv={x:0,y:0};Ne(oi[0])&&Ne(oi[1])&&(Wv.x+=oi[0],Wv.y+=oi[1],Gv)&&(f.redrawHint("eles",!0),(bd=f.touchData.dragDelta)&&Ne(bd[0])&&Ne(bd[1])&&(Wv.x+=bd[0],Wv.y+=bd[1])),f.hoverData.draggingEles=!0,ic.silentShift(Wv).emit("position drag"),f.redrawHint("drag",!0),f.touchData.startPosition[0]==dn[0]&&f.touchData.startPosition[1]==dn[1]&&f.redrawHint("eles",!0),f.redraw()}else{var bd;0===(bd=f.touchData.dragDelta=f.touchData.dragDelta||[]).length?(bd.push(oi[0]),bd.push(oi[1])):(bd[0]+=oi[0],bd[1]+=oi[1])}if(d(nf||zc,["touchmove","tapdrag","vmousemove"],Nt,{x:yt[0],y:yt[1]}),(!nf||!nf.grabbed())&&zc!=wb&&(wb&&wb.emit({originalEvent:Nt,type:"tapdragout",position:{x:yt[0],y:yt[1]}}),zc&&zc.emit({originalEvent:Nt,type:"tapdragover",position:{x:yt[0],y:yt[1]}})),f.touchData.last=zc,Kn)for(Vc=0;Vc<yt.length;Vc++)yt[Vc]&&f.touchData.startPosition[Vc]&&cr&&(f.touchData.singleTouchMoved=!0);Kn&&(null==nf||nf.pannable())&&Xe.panningEnabled()&&Xe.userPanningEnabled()&&(_(nf,f.touchData.starts)&&(Nt.preventDefault(),f.data.bgActivePosistion||(f.data.bgActivePosistion=rd(f.touchData.startPosition)),f.swipePanning?(Xe.panBy({x:oi[0]*bn,y:oi[1]*bn}),Xe.emit("dragpan")):cr&&(f.swipePanning=!0,Xe.panBy({x:Vi*bn,y:tr*bn}),Xe.emit("dragpan"),nf&&(nf.unactivate(),f.redrawHint("select",!0),f.touchData.start=null))),wn=f.projectIntoViewport(Nt.touches[0].clientX,Nt.touches[0].clientY),yt[0]=wn[0],yt[1]=wn[1])}for(Br=0;Br<yt.length;Br++)dn[Br]=yt[Br];Kn&&Nt.touches.length>0&&!f.hoverData.draggingEles&&!f.swipePanning&&null!=f.data.bgActivePosistion&&(f.data.bgActivePosistion=void 0,f.redrawHint("select",!0),f.redraw())}},!1),f.registerBinding(window,"touchcancel",Qi=function(Nt){var Kn=f.touchData.start;f.touchData.capture=!1,Kn&&Kn.unactivate()}),f.registerBinding(window,"touchend",lr=function(Nt){var Kn=f.touchData.start;if(f.touchData.capture){0===Nt.touches.length&&(f.touchData.capture=!1),Nt.preventDefault();var Xe=f.selection;f.swipePanning=!1,f.hoverData.draggingEles=!1;var cr,yt=f.cy,dn=yt.zoom(),bn=f.touchData.now,wn=f.touchData.earlier;if(Nt.touches[0]){var nr=f.projectIntoViewport(Nt.touches[0].clientX,Nt.touches[0].clientY);bn[0]=nr[0],bn[1]=nr[1]}if(Nt.touches[1]&&(nr=f.projectIntoViewport(Nt.touches[1].clientX,Nt.touches[1].clientY),bn[2]=nr[0],bn[3]=nr[1]),Nt.touches[2]&&(nr=f.projectIntoViewport(Nt.touches[2].clientX,Nt.touches[2].clientY),bn[4]=nr[0],bn[5]=nr[1]),Kn&&Kn.unactivate(),f.touchData.cxt){if(cr={originalEvent:Nt,type:"cxttapend",position:{x:bn[0],y:bn[1]}},Kn?Kn.emit(cr):yt.emit(cr),!f.touchData.cxtDragged){var oi={originalEvent:Nt,type:"cxttap",position:{x:bn[0],y:bn[1]}};Kn?Kn.emit(oi):yt.emit(oi)}return f.touchData.start&&(f.touchData.start._private.grabbed=!1),f.touchData.cxt=!1,f.touchData.start=null,void f.redraw()}if(!Nt.touches[2]&&yt.boxSelectionEnabled()&&f.touchData.selecting){f.touchData.selecting=!1;var Br=yt.collection(f.getAllInBox(Xe[0],Xe[1],Xe[2],Xe[3]));Xe[0]=void 0,Xe[1]=void 0,Xe[2]=void 0,Xe[3]=void 0,Xe[4]=0,f.redrawHint("select",!0),yt.emit({type:"boxend",originalEvent:Nt,position:{x:bn[0],y:bn[1]}}),Br.emit("box").stdFilter(function(Gl){return Gl.selectable()&&!Gl.selected()}).select().emit("boxselect"),Br.nonempty()&&f.redrawHint("eles",!0),f.redraw()}if(Kn?.unactivate(),Nt.touches[2])f.data.bgActivePosistion=void 0,f.redrawHint("select",!0);else if(!Nt.touches[1]&&!Nt.touches[0]&&!Nt.touches[0]){f.data.bgActivePosistion=void 0,f.redrawHint("select",!0);var Ui=f.dragData.touchDragEles;if(null!=Kn){var tr=Kn._private.grabbed;De(Ui),f.redrawHint("drag",!0),f.redrawHint("eles",!0),tr&&(Kn.emit("freeon"),Ui.emit("free"),f.dragData.didDrag&&(Kn.emit("dragfreeon"),Ui.emit("dragfree"))),d(Kn,["touchend","tapend","vmouseup","tapdragout"],Nt,{x:bn[0],y:bn[1]}),Kn.unactivate(),f.touchData.start=null}else{var eo=f.findNearestElement(bn[0],bn[1],!0,!0);d(eo,["touchend","tapend","vmouseup","tapdragout"],Nt,{x:bn[0],y:bn[1]})}var fo=f.touchData.startPosition[0]-bn[0],$o=f.touchData.startPosition[1]-bn[1],Er=(fo*fo+$o*$o)*dn*dn;f.touchData.singleTouchMoved||(Kn||yt.$(":selected").unselect(["tapunselect"]),d(Kn,["tap","vclick"],Nt,{x:bn[0],y:bn[1]}),Hr=!1,Nt.timeStamp-mr<=yt.multiClickDebounceTime()?(Zr&&clearTimeout(Zr),Hr=!0,mr=null,d(Kn,["dbltap","vdblclick"],Nt,{x:bn[0],y:bn[1]})):(Zr=setTimeout(function(){Hr||d(Kn,["onetap","voneclick"],Nt,{x:bn[0],y:bn[1]})},yt.multiClickDebounceTime()),mr=Nt.timeStamp)),null!=Kn&&!f.dragData.didDrag&&Kn._private.selectable&&Er<f.touchTapThreshold2&&!f.pinching&&("single"===yt.selectionType()?(yt.$(c).unmerge(Kn).unselect(["tapunselect"]),Kn.select(["tapselect"])):Kn.selected()?Kn.unselect(["tapunselect"]):Kn.select(["tapselect"]),f.redrawHint("eles",!0)),f.touchData.singleTouchMoved=!0}for(var Wa=0;Wa<bn.length;Wa++)wn[Wa]=bn[Wa];f.dragData.didDrag=!1,0===Nt.touches.length&&(f.touchData.dragDelta=[],f.touchData.startPosition=null,f.touchData.startGPosition=null,f.touchData.didSelect=!1),Nt.touches.length<2&&(1===Nt.touches.length&&(f.touchData.startGPosition=[Nt.touches[0].clientX,Nt.touches[0].clientY]),f.pinching=!1,f.redrawHint("eles",!0),f.redraw())}},!1),typeof TouchEvent>"u"){var or=[],Yr=function(Nt){return{clientX:Nt.clientX,clientY:Nt.clientY,force:1,identifier:Nt.pointerId,pageX:Nt.pageX,pageY:Nt.pageY,radiusX:Nt.width/2,radiusY:Nt.height/2,screenX:Nt.screenX,screenY:Nt.screenY,target:Nt.target}},wr=function(Nt){for(var Kn=0;Kn<or.length;Kn++)if(or[Kn].event.pointerId===Nt.pointerId)return void or.splice(Kn,1)},Bs=function(Nt){Nt.touches=or.map(function(Kn){return Kn.touch})},Jr=function(Nt){return"mouse"===Nt.pointerType||4===Nt.pointerType};f.registerBinding(f.container,"pointerdown",function($i){Jr($i)||($i.preventDefault(),or.push(function(Nt){return{event:Nt,touch:Yr(Nt)}}($i)),Bs($i),ai($i))}),f.registerBinding(f.container,"pointerup",function($i){Jr($i)||(wr($i),Bs($i),lr($i))}),f.registerBinding(f.container,"pointercancel",function($i){Jr($i)||(wr($i),Bs($i),Qi())}),f.registerBinding(f.container,"pointermove",function($i){var Nt,Kn;Jr($i)||($i.preventDefault(),Nt=$i,(Kn=or.filter(function(Pi){return Pi.event.pointerId===Nt.pointerId})[0]).event=Nt,Kn.touch=Yr(Nt),Bs($i),Si($i))})}};var md={generatePolygon:function(f,c){return this.nodeShapes[f]={renderer:this,name:f,points:c,draw:function(m,_,C,A,E){this.renderer.nodeShapeImpl("polygon",m,_,C,A,E,this.points)},intersectLine:function(m,_,C,A,E,N,R){return hu(E,N,this.points,m,_,C/2,A/2,R)},checkPoint:function(m,_,C,A,E,N,R){return so(m,_,this.points,N,R,A,E,[0,-1],C)}}},generateEllipse:function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(c,d,m,_,C){this.renderer.nodeShapeImpl(this.name,c,d,m,_,C)},intersectLine:function(c,d,m,_,C,A,E){return function(c,d,m,_,C,A){var E=m-c,N=_-d;E/=C,N/=A;var R=Math.sqrt(E*E+N*N),j=R-1;if(j<0)return[];var Z=j/R;return[(m-c)*Z+c,(_-d)*Z+d]}(C,A,c,d,m/2+E,_/2+E)},checkPoint:function(c,d,m,_,C,A,E){return Ka(c,d,_,C,A,E,m)}}},generateRoundPolygon:function(f,c){for(var d=new Array(2*c.length),m=0;m<c.length/2;m++){var C,_=2*m;C=m<c.length/2-1?2*(m+1):0,d[4*m]=c[_],d[4*m+1]=c[_+1];var A=c[C]-c[_],E=c[C+1]-c[_+1],N=Math.sqrt(A*A+E*E);d[4*m+2]=A/N,d[4*m+3]=E/N}return this.nodeShapes[f]={renderer:this,name:f,points:d,draw:function(j,Z,he,me,ye){this.renderer.nodeShapeImpl("round-polygon",j,Z,he,me,ye,this.points)},intersectLine:function(j,Z,he,me,ye,De,je){return function(c,d,m,_,C,A,E,N){for(var j,R=[],Z=new Array(m.length),he=A/2,me=E/2,ye=Rr(A,E),De=0;De<m.length/4;De++){var qe,je;je=0===De?m.length-2:4*De-2,qe=4*De+2;var ct=_+he*m[4*De],nt=C+me*m[4*De+1],Gt=ye/Math.tan(Math.acos(-m[je]*m[qe]-m[je+1]*m[qe+1])/2),Wt=ct-Gt*m[je],It=nt-Gt*m[je+1],jt=ct+Gt*m[qe],Dt=nt+Gt*m[qe+1];0===De?(Z[m.length-2]=Wt,Z[m.length-1]=It):(Z[4*De-2]=Wt,Z[4*De-1]=It),Z[4*De]=jt,Z[4*De+1]=Dt;var Zt=m[je+1],Kt=-m[je];Zt*m[qe]+Kt*m[qe+1]<0&&(Zt*=-1,Kt*=-1),0!==(j=Xf(c,d,_,C,Wt+Zt*ye,It+Kt*ye,ye)).length&&R.push(j[0],j[1])}for(var An=0;An<Z.length/4;An++)0!==(j=sl(c,d,_,C,Z[4*An],Z[4*An+1],Z[4*An+2],Z[4*An+3],!1)).length&&R.push(j[0],j[1]);if(R.length>2){for(var sn=[R[0],R[1]],pn=Math.pow(sn[0]-c,2)+Math.pow(sn[1]-d,2),Mn=1;Mn<R.length/2;Mn++){var kn=Math.pow(R[2*Mn]-c,2)+Math.pow(R[2*Mn+1]-d,2);kn<=pn&&(sn[0]=R[2*Mn],sn[1]=R[2*Mn+1],pn=kn)}return sn}return R}(ye,De,this.points,j,Z,he,me)},checkPoint:function(j,Z,he,me,ye,De,je){return function(c,d,m,_,C,A,E){for(var N=new Array(m.length),R=A/2,j=E/2,Z=Rr(A,E),he=Z*Z,me=0;me<m.length/4;me++){var De,ye;ye=0===me?m.length-2:4*me-2,De=4*me+2;var je=_+R*m[4*me],qe=C+j*m[4*me+1],nt=Z/Math.tan(Math.acos(-m[ye]*m[De]-m[ye+1]*m[De+1])/2),Ct=je-nt*m[ye],Gt=qe-nt*m[ye+1],Wt=je+nt*m[De],It=qe+nt*m[De+1];N[4*me]=Ct,N[4*me+1]=Gt,N[4*me+2]=Wt,N[4*me+3]=It;var jt=m[ye+1],Dt=-m[ye];jt*m[De]+Dt*m[De+1]<0&&(jt*=-1,Dt*=-1);var ut=Gt+Dt*Z;if(Math.pow(Ct+jt*Z-c,2)+Math.pow(ut-d,2)<=he)return!0}return Ma(c,d,N)}(j,Z,this.points,De,je,me,ye)}}},generateRoundRectangle:function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:_r(4,0),draw:function(c,d,m,_,C){this.renderer.nodeShapeImpl(this.name,c,d,m,_,C)},intersectLine:function(c,d,m,_,C,A,E){return Nu(C,A,c,d,m,_,E)},checkPoint:function(c,d,m,_,C,A,E){var N=vf(_,C),R=2*N;return!!(so(c,d,this.points,A,E,_,C-R,[0,-1],m)||so(c,d,this.points,A,E,_-R,C,[0,-1],m)||Ka(c,d,R,R,A-_/2+N,E-C/2+N,m)||Ka(c,d,R,R,A+_/2-N,E-C/2+N,m)||Ka(c,d,R,R,A+_/2-N,E+C/2-N,m)||Ka(c,d,R,R,A-_/2+N,E+C/2-N,m))}}},generateCutRectangle:function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:8,points:_r(4,0),draw:function(c,d,m,_,C){this.renderer.nodeShapeImpl(this.name,c,d,m,_,C)},generateCutTrianglePts:function(c,d,m,_){var C=this.cornerLength,A=d/2,E=c/2,N=m-E,R=m+E,j=_-A,Z=_+A;return{topLeft:[N,j+C,N+C,j,N+C,j+C],topRight:[R-C,j,R,j+C,R-C,j+C],bottomRight:[R,Z-C,R-C,Z,R-C,Z-C],bottomLeft:[N+C,Z,N,Z-C,N+C,Z-C]}},intersectLine:function(c,d,m,_,C,A,E){var N=this.generateCutTrianglePts(m+2*E,_+2*E,c,d),R=[].concat.apply([],[N.topLeft.splice(0,4),N.topRight.splice(0,4),N.bottomRight.splice(0,4),N.bottomLeft.splice(0,4)]);return hu(C,A,R,c,d)},checkPoint:function(c,d,m,_,C,A,E){if(so(c,d,this.points,A,E,_,C-2*this.cornerLength,[0,-1],m)||so(c,d,this.points,A,E,_-2*this.cornerLength,C,[0,-1],m))return!0;var N=this.generateCutTrianglePts(_,C,A,E);return Ma(c,d,N.topLeft)||Ma(c,d,N.topRight)||Ma(c,d,N.bottomRight)||Ma(c,d,N.bottomLeft)}}},generateBarrel:function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:_r(4,0),draw:function(c,d,m,_,C){this.renderer.nodeShapeImpl(this.name,c,d,m,_,C)},intersectLine:function(c,d,m,_,C,A,E){var Z=this.generateBarrelBezierPts(m+2*E,_+2*E,c,d),he=function(De){var je=Zi({x:De[0],y:De[1]},{x:De[2],y:De[3]},{x:De[4],y:De[5]},.15),qe=Zi({x:De[0],y:De[1]},{x:De[2],y:De[3]},{x:De[4],y:De[5]},.5),ct=Zi({x:De[0],y:De[1]},{x:De[2],y:De[3]},{x:De[4],y:De[5]},.85);return[De[0],De[1],je.x,je.y,qe.x,qe.y,ct.x,ct.y,De[4],De[5]]},me=[].concat(he(Z.topLeft),he(Z.topRight),he(Z.bottomRight),he(Z.bottomLeft));return hu(C,A,me,c,d)},generateBarrelBezierPts:function(c,d,m,_){var C=d/2,A=c/2,E=m-A,N=m+A,R=_-C,j=_+C,Z=qr(c,d),he=Z.heightOffset,me=Z.widthOffset,ye=Z.ctrlPtOffsetPct*c,De={topLeft:[E,R+he,E+ye,R,E+me,R],topRight:[N-me,R,N-ye,R,N,R+he],bottomRight:[N,j-he,N-ye,j,N-me,j],bottomLeft:[E+me,j,E+ye,j,E,j-he]};return De.topLeft.isTop=!0,De.topRight.isTop=!0,De.bottomLeft.isBottom=!0,De.bottomRight.isBottom=!0,De},checkPoint:function(c,d,m,_,C,A,E){var N=qr(_,C),j=N.widthOffset;if(so(c,d,this.points,A,E,_,C-2*N.heightOffset,[0,-1],m)||so(c,d,this.points,A,E,_-2*j,C,[0,-1],m))return!0;for(var Z=this.generateBarrelBezierPts(_,C,A,E),he=function(It,jt,Dt){var Zt=Dt[4],Kt=Dt[2],ut=Dt[0],Qt=Dt[5],Vt=Dt[1],An=Math.min(Zt,ut),sn=Math.max(Zt,ut),pn=Math.min(Qt,Vt),Mn=Math.max(Qt,Vt);if(An<=It&&It<=sn&&pn<=jt&&jt<=Mn){var kn=function(c,d,m){return[c-2*d+m,2*(d-c),c]}(Zt,Kt,ut),ti=function(c,d,m,_){var C=d*d-4*c*(m-=_);if(C<0)return[];var A=Math.sqrt(C),E=2*c;return[(-d+A)/E,(-d-A)/E]}(kn[0],kn[1],kn[2],It),Dn=ti.filter(function(Zn){return 0<=Zn&&Zn<=1});if(Dn.length>0)return Dn[0]}return null},me=Object.keys(Z),ye=0;ye<me.length;ye++){var je=Z[me[ye]],qe=he(c,d,je);if(null!=qe){var Gt=uc(je[5],je[3],je[1],qe);if(je.isTop&&Gt<=d||je.isBottom&&d<=Gt)return!0}}return!1}}},generateBottomRoundrectangle:function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:_r(4,0),draw:function(c,d,m,_,C){this.renderer.nodeShapeImpl(this.name,c,d,m,_,C)},intersectLine:function(c,d,m,_,C,A,E){var R=d-(_/2+E),he=sl(C,A,c,d,c-(m/2+E),R,c+(m/2+E),R,!1);return he.length>0?he:Nu(C,A,c,d,m,_,E)},checkPoint:function(c,d,m,_,C,A,E){var N=vf(_,C),R=2*N;if(so(c,d,this.points,A,E,_,C-R,[0,-1],m)||so(c,d,this.points,A,E,_-R,C,[0,-1],m))return!0;var j=_/2+2*m,Z=C/2+2*m;return!!(Ma(c,d,[A-j,E-Z,A-j,E,A+j,E,A+j,E-Z])||Ka(c,d,R,R,A+_/2-N,E+C/2-N,m)||Ka(c,d,R,R,A-_/2+N,E+C/2-N,m))}}},registerNodeShapes:function(){var f=this.nodeShapes={},c=this;this.generateEllipse(),this.generatePolygon("triangle",_r(3,0)),this.generateRoundPolygon("round-triangle",_r(3,0)),this.generatePolygon("rectangle",_r(4,0)),f.square=f.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();var d=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",d),this.generateRoundPolygon("round-diamond",d),this.generatePolygon("pentagon",_r(5,0)),this.generateRoundPolygon("round-pentagon",_r(5,0)),this.generatePolygon("hexagon",_r(6,0)),this.generateRoundPolygon("round-hexagon",_r(6,0)),this.generatePolygon("heptagon",_r(7,0)),this.generateRoundPolygon("round-heptagon",_r(7,0)),this.generatePolygon("octagon",_r(8,0)),this.generateRoundPolygon("round-octagon",_r(8,0));var m=new Array(20),_=Lh(5,0),C=Lh(5,Math.PI/5),A=.5*(3-Math.sqrt(5));A*=1.57;for(var E=0;E<C.length/2;E++)C[2*E]*=A,C[2*E+1]*=A;for(E=0;E<5;E++)m[4*E]=_[2*E],m[4*E+1]=_[2*E+1],m[4*E+2]=C[2*E],m[4*E+3]=C[2*E+1];m=Da(m),this.generatePolygon("star",m),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);var N=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",N),this.generateRoundPolygon("round-tag",N),f.makePolygon=function(R){var he,Z="polygon-"+R.join("$");return(he=this[Z])?he:c.generatePolygon(Z,R)}}},_p={timeToRender:function(){return this.redrawTotalTime/this.redrawCount},redraw:function(f){f=f||wi();var c=this;void 0===c.averageRedrawTime&&(c.averageRedrawTime=0),void 0===c.lastRedrawTime&&(c.lastRedrawTime=0),void 0===c.lastDrawTime&&(c.lastDrawTime=0),c.requestedFrame=!0,c.renderOptions=f},beforeRender:function(f,c){if(!this.destroyed){null==c&&pt("Priority is not optional for beforeRender");var d=this.beforeRenderCallbacks;d.push({fn:f,priority:c}),d.sort(function(m,_){return _.priority-m.priority})}}},Hm=function(c,d,m){for(var _=c.beforeRenderCallbacks,C=0;C<_.length;C++)_[C].fn(d,m)};_p.startRenderLoop=function(){var f=this,c=f.cy;f.renderLoopStarted||(f.renderLoopStarted=!0,uu(function m(_){if(!f.destroyed){if(!c.batching())if(f.requestedFrame&&!f.skipFrame){Hm(f,!0,_);var C=Sa();f.render(f.renderOptions);var A=f.lastDrawTime=Sa();void 0===f.averageRedrawTime&&(f.averageRedrawTime=A-C),void 0===f.redrawCount&&(f.redrawCount=0),f.redrawCount++,void 0===f.redrawTotalTime&&(f.redrawTotalTime=0);var E=A-C;f.redrawTotalTime+=E,f.lastRedrawTime=E,f.averageRedrawTime=f.averageRedrawTime/2+E/2,f.requestedFrame=!1}else Hm(f,!1,_);f.skipFrame=!1,uu(m)}}))};var nm=function(c){this.init(c)},bl=nm.prototype;bl.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],bl.init=function(f){var c=this;c.options=f,c.cy=f.cy;var d=c.container=f.cy.container();if(pe){var m=pe.document,_=m.head,C="__________cytoscape_stylesheet",A="__________cytoscape_container",E=null!=m.getElementById(C);if(d.className.indexOf(A)<0&&(d.className=(d.className||"")+" "+A),!E){var N=m.createElement("style");N.id=C,N.innerHTML="."+A+" { position: relative; }",_.insertBefore(N,_.children[0])}"static"===pe.getComputedStyle(d).getPropertyValue("position")&&ge("A Cytoscape container has style position:static and so can not use UI extensions properly")}c.selection=[void 0,void 0,void 0,void 0,0],c.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],c.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},c.dragData={possibleDragElements:[]},c.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},c.redraws=0,c.showFps=f.showFps,c.debug=f.debug,c.hideEdgesOnViewport=f.hideEdgesOnViewport,c.textureOnViewport=f.textureOnViewport,c.wheelSensitivity=f.wheelSensitivity,c.motionBlurEnabled=f.motionBlur,c.forcedPixelRatio=Ne(f.pixelRatio)?f.pixelRatio:null,c.motionBlur=f.motionBlur,c.motionBlurOpacity=f.motionBlurOpacity,c.motionBlurTransparency=1-c.motionBlurOpacity,c.motionBlurPxRatio=1,c.mbPxRBlurry=1,c.minMbLowQualFrames=4,c.fullQualityMb=!1,c.clearedForMotionBlur=[],c.desktopTapThreshold=f.desktopTapThreshold,c.desktopTapThreshold2=f.desktopTapThreshold*f.desktopTapThreshold,c.touchTapThreshold=f.touchTapThreshold,c.touchTapThreshold2=f.touchTapThreshold*f.touchTapThreshold,c.tapholdDuration=500,c.bindings=[],c.beforeRenderCallbacks=[],c.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},c.registerNodeShapes(),c.registerArrowShapes(),c.registerCalculationListeners()},bl.notify=function(f,c){var d=this,m=d.cy;if(!this.destroyed){if("init"===f)return void d.load();if("destroy"===f)return void d.destroy();("add"===f||"remove"===f||"move"===f&&m.hasCompoundNodes()||"load"===f||"zorder"===f||"mount"===f)&&d.invalidateCachedZSortedEles(),"viewport"===f&&d.redrawHint("select",!0),("load"===f||"resize"===f||"mount"===f)&&(d.invalidateContainerClientCoordsCache(),d.matchCanvasSize(d.container)),d.redrawHint("eles",!0),d.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}},bl.destroy=function(){var f=this;f.destroyed=!0,f.cy.stopAnimationLoop();for(var c=0;c<f.bindings.length;c++){var d=f.bindings[c],_=d.target;(_.off||_.removeEventListener).apply(_,d.args)}if(f.bindings=[],f.beforeRenderCallbacks=[],f.onUpdateEleCalcsFns=[],f.removeObserver&&f.removeObserver.disconnect(),f.styleObserver&&f.styleObserver.disconnect(),f.resizeObserver&&f.resizeObserver.disconnect(),f.labelCalcDiv)try{document.body.removeChild(f.labelCalcDiv)}catch{}},bl.isHeadless=function(){return!1},[tg,_h,Jd,ru,md,_p].forEach(function(f){sr(bl,f)});var ca=1e3/60,kf_setupDequeueing=function(c){return function(){var m=this,_=this.renderer;if(!m.dequeueingSetup){m.dequeueingSetup=!0;var C=P.default(function(){_.redrawHint("eles",!0),_.redrawHint("drag",!0),_.redraw()},c.deqRedrawThreshold);_.beforeRender(function(R,j){var Z=Sa(),he=_.averageRedrawTime,me=_.lastRedrawTime,ye=[],De=_.cy.extent(),je=_.getPixelRatio();for(R||_.flushRenderedStyleQueue();;){var qe=Sa(),ct=qe-Z,nt=qe-j;if(me<ca){if(nt>=c.deqFastCost*(ca-(R?he:0)))break}else if(R){if(ct>=c.deqCost*me||ct>=c.deqAvgCost*he)break}else if(nt>=c.deqNoDrawCost*ca)break;var Gt=c.deq(m,je,De);if(!(Gt.length>0))break;for(var Wt=0;Wt<Gt.length;Wt++)ye.push(Gt[Wt])}ye.length>0&&(c.onDeqd(m,ye),!R&&c.shouldRedraw(m,ye,je,De)&&C())},(c.priority||Ze)(m))}}},rg=function(){function f(c){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$f;J(this,f),this.idsByKey=new Eo,this.keyForId=new Eo,this.cachesByLvl=new Eo,this.lvls=[],this.getKey=c,this.doesEleInvalidateKey=d}return ae(f,[{key:"getIdsFor",value:function(d){null==d&&pt("Can not get id list for null key");var m=this.idsByKey,_=this.idsByKey.get(d);return _||(_=new fs,m.set(d,_)),_}},{key:"addIdForKey",value:function(d,m){null!=d&&this.getIdsFor(d).add(m)}},{key:"deleteIdForKey",value:function(d,m){null!=d&&this.getIdsFor(d).delete(m)}},{key:"getNumberOfIdsForKey",value:function(d){return null==d?0:this.getIdsFor(d).size}},{key:"updateKeyMappingFor",value:function(d){var m=d.id(),_=this.keyForId.get(m),C=this.getKey(d);this.deleteIdForKey(_,m),this.addIdForKey(C,m),this.keyForId.set(m,C)}},{key:"deleteKeyMappingFor",value:function(d){var m=d.id(),_=this.keyForId.get(m);this.deleteIdForKey(_,m),this.keyForId.delete(m)}},{key:"keyHasChangedFor",value:function(d){var m=d.id();return this.keyForId.get(m)!==this.getKey(d)}},{key:"isInvalid",value:function(d){return this.keyHasChangedFor(d)||this.doesEleInvalidateKey(d)}},{key:"getCachesAt",value:function(d){var m=this.cachesByLvl,_=this.lvls,C=m.get(d);return C||(C=new Eo,m.set(d,C),_.push(d)),C}},{key:"getCache",value:function(d,m){return this.getCachesAt(m).get(d)}},{key:"get",value:function(d,m){var _=this.getKey(d),C=this.getCache(_,m);return null!=C&&this.updateKeyMappingFor(d),C}},{key:"getForCachedKey",value:function(d,m){var _=this.keyForId.get(d.id());return this.getCache(_,m)}},{key:"hasCache",value:function(d,m){return this.getCachesAt(m).has(d)}},{key:"has",value:function(d,m){var _=this.getKey(d);return this.hasCache(_,m)}},{key:"setCache",value:function(d,m,_){_.key=d,this.getCachesAt(m).set(d,_)}},{key:"set",value:function(d,m,_){var C=this.getKey(d);this.setCache(C,m,_),this.updateKeyMappingFor(d)}},{key:"deleteCache",value:function(d,m){this.getCachesAt(m).delete(d)}},{key:"delete",value:function(d,m){var _=this.getKey(d);this.deleteCache(_,m)}},{key:"invalidateKey",value:function(d){var m=this;this.lvls.forEach(function(_){return m.deleteCache(d,_)})}},{key:"invalidate",value:function(d){var m=d.id(),_=this.keyForId.get(m);this.deleteKeyMappingFor(d);var C=this.doesEleInvalidateKey(d);return C&&this.invalidateKey(_),C||0===this.getNumberOfIdsForKey(_)}}]),f}(),rm={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},mb=si({getKey:null,doesEleInvalidateKey:$f,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:rl,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),bp=function(c,d){var m=this;m.renderer=c,m.onDequeues=[];var _=mb(d);sr(m,_),m.lookup=new rg(_.getKey,_.doesEleInvalidateKey),m.setupDequeueing()},hl=bp.prototype;hl.reasons=rm,hl.getTextureQueue=function(f){var c=this;return c.eleImgCaches=c.eleImgCaches||{},c.eleImgCaches[f]=c.eleImgCaches[f]||[]},hl.getRetiredTextureQueue=function(f){var d=this.eleImgCaches.retired=this.eleImgCaches.retired||{};return d[f]=d[f]||[]},hl.getElementQueue=function(){return this.eleCacheQueue=this.eleCacheQueue||new q.default(function(d,m){return m.reqs-d.reqs})},hl.getElementKeyToQueue=function(){return this.eleKeyToCacheQueue=this.eleKeyToCacheQueue||{}},hl.getElement=function(f,c,d,m,_){var C=this,A=this.renderer,E=A.cy.zoom(),N=this.lookup;if(!c||0===c.w||0===c.h||isNaN(c.w)||isNaN(c.h)||!f.visible()||f.removed()||!C.allowEdgeTxrCaching&&f.isEdge()||!C.allowParentTxrCaching&&f.isParent())return null;if(null==m&&(m=Math.ceil(_v(E*d))),m<-4)m=-4;else if(E>=7.99||m>3)return null;var R=Math.pow(2,m),j=c.h*R,Z=c.w*R,he=A.eleTextBiggerThanMin(f,R);if(!this.isVisible(f,he))return null;var ye,me=N.get(f,m);if(me&&me.invalidated&&(me.invalidated=!1,me.texture.invalidatedWidth-=me.width),me)return me;if(ye=j<=25?25:j<=50?50:50*Math.ceil(j/50),j>1024||Z>1024)return null;var De=C.getTextureQueue(ye),je=De[De.length-2],qe=function(){return C.recycleTexture(ye,Z)||C.addTexture(ye,Z)};je||(je=De[De.length-1]),je||(je=qe()),je.width-je.usedWidth<Z&&(je=qe());for(var Wt,ct=function(sn){return sn&&sn.scaledLabelShown===he},nt=_&&_===rm.dequeue,Ct=_&&_===rm.highQuality,Gt=_&&_===rm.downscale,It=m+1;It<=3;It++){var jt=N.get(f,It);if(jt){Wt=jt;break}}var Dt=Wt&&Wt.level===m+1?Wt:null,Zt=function(){je.context.drawImage(Dt.texture.canvas,Dt.x,0,Dt.width,Dt.height,je.usedWidth,0,Z,j)};if(je.context.setTransform(1,0,0,1,0,0),je.context.clearRect(je.usedWidth,0,Z,ye),ct(Dt))Zt();else if(ct(Wt)){if(!Ct)return C.queueElement(f,Wt.level-1),Wt;for(var Kt=Wt.level;Kt>m;Kt--)Dt=C.getElement(f,c,d,Kt,rm.downscale);Zt()}else{var ut;if(!nt&&!Ct&&!Gt)for(var Qt=m-1;Qt>=-4;Qt--){var Vt=N.get(f,Qt);if(Vt){ut=Vt;break}}if(ct(ut))return C.queueElement(f,m),ut;je.context.translate(je.usedWidth,0),je.context.scale(R,R),this.drawElement(je.context,f,c,he,!1),je.context.scale(1/R,1/R),je.context.translate(-je.usedWidth,0)}return me={x:je.usedWidth,texture:je,level:m,scale:R,width:Z,height:j,scaledLabelShown:he},je.usedWidth+=Math.ceil(Z+8),je.eleCaches.push(me),N.set(f,m,me),C.checkTextureFullness(je),me},hl.invalidateElements=function(f){for(var c=0;c<f.length;c++)this.invalidateElement(f[c])},hl.invalidateElement=function(f){var c=this,d=c.lookup,m=[];if(d.isInvalid(f)){for(var C=-4;C<=3;C++){var A=d.getForCachedKey(f,C);A&&m.push(A)}if(d.invalidate(f))for(var N=0;N<m.length;N++){var R=m[N],j=R.texture;j.invalidatedWidth+=R.width,R.invalidated=!0,c.checkTextureUtility(j)}c.removeFromQueue(f)}},hl.checkTextureUtility=function(f){f.invalidatedWidth>=.2*f.width&&this.retireTexture(f)},hl.checkTextureFullness=function(f){var d=this.getTextureQueue(f.height);f.usedWidth/f.width>.8&&f.fullnessChecks>=10?pi(d,f):f.fullnessChecks++},hl.retireTexture=function(f){var d=f.height,m=this.getTextureQueue(d),_=this.lookup;pi(m,f),f.retired=!0;for(var C=f.eleCaches,A=0;A<C.length;A++){var E=C[A];_.deleteCache(E.key,E.level)}yr(C),this.getRetiredTextureQueue(d).push(f)},hl.addTexture=function(f,c){var _={};return this.getTextureQueue(f).push(_),_.eleCaches=[],_.height=f,_.width=Math.max(1024,c),_.usedWidth=0,_.invalidatedWidth=0,_.fullnessChecks=0,_.canvas=this.renderer.makeOffscreenCanvas(_.width,_.height),_.context=_.canvas.getContext("2d"),_},hl.recycleTexture=function(f,c){for(var m=this.getTextureQueue(f),_=this.getRetiredTextureQueue(f),C=0;C<_.length;C++){var A=_[C];if(A.width>=c)return A.retired=!1,A.usedWidth=0,A.invalidatedWidth=0,A.fullnessChecks=0,yr(A.eleCaches),A.context.setTransform(1,0,0,1,0,0),A.context.clearRect(0,0,A.width,A.height),pi(_,A),m.push(A),A}},hl.queueElement=function(f,c){var m=this.getElementQueue(),_=this.getElementKeyToQueue(),C=this.getKey(f),A=_[C];if(A)A.level=Math.max(A.level,c),A.eles.merge(f),A.reqs++,m.updateItem(A);else{var E={eles:f.spawn().merge(f),level:c,reqs:1,key:C};m.push(E),_[C]=E}},hl.dequeue=function(f){for(var c=this,d=c.getElementQueue(),m=c.getElementKeyToQueue(),_=[],C=c.lookup,A=0;A<1&&d.size()>0;A++){var E=d.pop(),N=E.key,R=E.eles[0],j=C.hasCache(R,E.level);if(m[N]=null,!j){_.push(E);var Z=c.getBoundingBox(R);c.getElement(R,Z,f,E.level,rm.dequeue)}}return _},hl.removeFromQueue=function(f){var d=this.getElementQueue(),m=this.getElementKeyToQueue(),_=this.getKey(f),C=m[_];null!=C&&(1===C.eles.length?(C.reqs=Ic,d.updateItem(C),d.pop(),m[_]=null):C.eles.unmerge(f))},hl.onDequeue=function(f){this.onDequeues.push(f)},hl.offDequeue=function(f){pi(this.onDequeues,f)},hl.setupDequeueing=kf_setupDequeueing({deqRedrawThreshold:100,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(c,d,m){return c.dequeue(d,m)},onDeqd:function(c,d){for(var m=0;m<c.onDequeues.length;m++)(0,c.onDequeues[m])(d)},shouldRedraw:function(c,d,m,_){for(var C=0;C<d.length;C++)for(var A=d[C].eles,E=0;E<A.length;E++){var N=A[E].boundingBox();if(Am(N,_))return!0}return!1},priority:function(c){return c.renderer.beforeRenderPriorities.eleTxrDeq}});var pa=function(c){var d=this,m=d.renderer=c,_=m.cy;d.layersByLevel={},d.firstGet=!0,d.lastInvalidationTime=Sa()-500,d.skipping=!1,d.eleTxrDeqs=_.collection(),d.scheduleElementRefinement=P.default(function(){d.refineElementTextures(d.eleTxrDeqs),d.eleTxrDeqs.unmerge(d.eleTxrDeqs)},50),m.beforeRender(function(A,E){d.skipping=E-d.lastInvalidationTime<=250},m.beforeRenderPriorities.lyrTxrSkip),d.layersQueue=new q.default(function(E,N){return N.reqs-E.reqs}),d.setupDequeueing()},Aa=pa.prototype,zv=0,Xh=Math.pow(2,53)-1;Aa.makeLayer=function(f,c){var d=Math.pow(2,c),m=Math.ceil(f.w*d),_=Math.ceil(f.h*d),C=this.renderer.makeOffscreenCanvas(m,_),A={id:zv=++zv%Xh,bb:f,level:c,width:m,height:_,canvas:C,context:C.getContext("2d"),eles:[],elesQueue:[],reqs:0},E=A.context,N=-A.bb.x1,R=-A.bb.y1;return E.scale(d,d),E.translate(N,R),A},Aa.getLayers=function(f,c,d){var m=this,A=m.renderer.cy.zoom(),E=m.firstGet;if(m.firstGet=!1,null==d)if((d=Math.ceil(_v(A*c)))<-4)d=-4;else if(A>=3.99||d>2)return null;m.validateLayersElesOrdering(d,f);var Z,me,N=m.layersByLevel,R=Math.pow(2,d),j=N[d]=N[d]||[];if(m.levelIsComplete(d,f))return j;!function(){var Zt=function(An){if(m.validateLayersElesOrdering(An,f),m.levelIsComplete(An,f))return me=N[An],!0},Kt=function(An){if(!me)for(var sn=d+An;-4<=sn&&sn<=2&&!Zt(sn);sn+=An);};Kt(1),Kt(-1);for(var ut=j.length-1;ut>=0;ut--){var Qt=j[ut];Qt.invalid&&pi(j,Qt)}}();var je=function(Zt){var Kt=(Zt=Zt||{}).after;if(function(){if(!Z){Z=Tc();for(var Zt=0;Zt<f.length;Zt++)Ta(Z,f[Zt].boundingBox())}}(),Z.w*R*(Z.h*R)>16e6)return null;var Qt=m.makeLayer(Z,d);if(null!=Kt){var Vt=j.indexOf(Kt)+1;j.splice(Vt,0,Qt)}else(void 0===Zt.insert||Zt.insert)&&j.unshift(Qt);return Qt};if(m.skipping&&!E)return null;for(var qe=null,ct=f.length/1,nt=!E,Ct=0;Ct<f.length;Ct++){var Gt=f[Ct],Wt=Gt._private.rscratch,It=Wt.imgLayerCaches=Wt.imgLayerCaches||{},jt=It[d];if(jt)qe=jt;else{if((!qe||qe.eles.length>=ct||!Cv(qe.bb,Gt.boundingBox()))&&!(qe=je({insert:!0,after:qe})))return null;me||nt?m.queueLayer(qe,Gt):m.drawEleInLayer(qe,Gt,d,c),qe.eles.push(Gt),It[d]=qe}}return me||(nt?null:j)},Aa.getEleLevelForLayerLevel=function(f,c){return f},Aa.drawEleInLayer=function(f,c,d,m){var C=this.renderer,A=f.context,E=c.boundingBox();0===E.w||0===E.h||!c.visible()||(d=this.getEleLevelForLayerLevel(d,m),C.setImgSmoothing(A,!1),C.drawCachedElement(A,c,null,null,d,!0),C.setImgSmoothing(A,!0))},Aa.levelIsComplete=function(f,c){var m=this.layersByLevel[f];if(!m||0===m.length)return!1;for(var _=0,C=0;C<m.length;C++){var A=m[C];if(A.reqs>0||A.invalid)return!1;_+=A.eles.length}return _===c.length},Aa.validateLayersElesOrdering=function(f,c){var d=this.layersByLevel[f];if(d)for(var m=0;m<d.length;m++){for(var _=d[m],C=-1,A=0;A<c.length;A++)if(_.eles[0]===c[A]){C=A;break}if(C<0)this.invalidateLayer(_);else{var E=C;for(A=0;A<_.eles.length;A++)if(_.eles[A]!==c[E+A]){this.invalidateLayer(_);break}}}},Aa.updateElementsInLayers=function(f,c){for(var m=_t(f[0]),_=0;_<f.length;_++)for(var C=m?null:f[_],A=m?f[_]:f[_].ele,E=A._private.rscratch,N=E.imgLayerCaches=E.imgLayerCaches||{},R=-4;R<=2;R++){var j=N[R];!j||C&&this.getEleLevelForLayerLevel(j.level)!==C.level||c(j,A,C)}},Aa.haveLayers=function(){for(var c=!1,d=-4;d<=2;d++){var m=this.layersByLevel[d];if(m&&m.length>0){c=!0;break}}return c},Aa.invalidateElements=function(f){var c=this;0!==f.length&&(c.lastInvalidationTime=Sa(),0!==f.length&&c.haveLayers()&&c.updateElementsInLayers(f,function(m,_,C){c.invalidateLayer(m)}))},Aa.invalidateLayer=function(f){if(this.lastInvalidationTime=Sa(),!f.invalid){var c=f.level,d=f.eles;pi(this.layersByLevel[c],f),f.elesQueue=[],f.invalid=!0,f.replacement&&(f.replacement.invalid=!0);for(var _=0;_<d.length;_++){var C=d[_]._private.rscratch.imgLayerCaches;C&&(C[c]=null)}}},Aa.refineElementTextures=function(f){var c=this;c.updateElementsInLayers(f,function(m,_,C){var A=m.replacement;if(A||((A=m.replacement=c.makeLayer(m.bb,m.level)).replaces=m,A.eles=m.eles),!A.reqs)for(var E=0;E<A.eles.length;E++)c.queueLayer(A,A.eles[E])})},Aa.enqueueElementRefinement=function(f){this.eleTxrDeqs.merge(f),this.scheduleElementRefinement()},Aa.queueLayer=function(f,c){var m=this.layersQueue,_=f.elesQueue,C=_.hasId=_.hasId||{};if(!f.replacement){if(c){if(C[c.id()])return;_.push(c),C[c.id()]=!0}f.reqs?(f.reqs++,m.updateItem(f)):(f.reqs=1,m.push(f))}},Aa.dequeue=function(f){for(var c=this,d=c.layersQueue,m=[],_=0;_<1&&0!==d.size();){var C=d.peek();if(C.replacement)d.pop();else if(C.replaces&&C!==C.replaces.replacement)d.pop();else if(C.invalid)d.pop();else{var A=C.elesQueue.shift();A&&(c.drawEleInLayer(C,A,C.level,f),_++),0===m.length&&m.push(!0),0===C.elesQueue.length&&(d.pop(),C.reqs=0,C.replaces&&c.applyLayerReplacement(C),c.requestRedraw())}}return m},Aa.applyLayerReplacement=function(f){var d=this.layersByLevel[f.level],m=f.replaces,_=d.indexOf(m);if(!(_<0||m.invalid)){d[_]=f;for(var C=0;C<f.eles.length;C++){var A=f.eles[C]._private,E=A.imgLayerCaches=A.imgLayerCaches||{};E&&(E[f.level]=f)}this.requestRedraw()}},Aa.requestRedraw=P.default(function(){var f=this.renderer;f.redrawHint("eles",!0),f.redrawHint("drag",!0),f.redraw()},100),Aa.setupDequeueing=kf_setupDequeueing({deqRedrawThreshold:50,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(c,d){return c.dequeue(d)},onDeqd:Ze,shouldRedraw:rl,priority:function(c){return c.renderer.beforeRenderPriorities.lyrTxrDeq}});var qy,Vv={};function Z_(f,c){for(var d=0;d<c.length;d++){var m=c[d];f.lineTo(m.x,m.y)}}function $m(f,c,d){for(var m,_=0;_<c.length;_++){var C=c[_];0===_&&(m=C),f.lineTo(C.x,C.y)}f.quadraticCurveTo(d.x,d.y,m.x,m.y)}function Xy(f,c,d){f.beginPath&&f.beginPath();for(var m=c,_=0;_<m.length;_++)f.lineTo((C=m[_]).x,C.y);var A=d,E=d[0];for(f.moveTo(E.x,E.y),_=1;_<A.length;_++){var C;f.lineTo((C=A[_]).x,C.y)}f.closePath&&f.closePath()}function Q_(f,c,d,m,_){f.beginPath&&f.beginPath(),f.arc(d,m,_,0,2*Math.PI,!1);var C=c,A=C[0];f.moveTo(A.x,A.y);for(var E=0;E<C.length;E++){var N=C[E];f.lineTo(N.x,N.y)}f.closePath&&f.closePath()}function yb(f,c,d,m){f.arc(c,d,m,0,2*Math.PI,!1)}Vv.arrowShapeImpl=function(f){return(qy||(qy={polygon:Z_,"triangle-backcurve":$m,"triangle-tee":Xy,"circle-triangle":Q_,"triangle-cross":Xy,circle:yb}))[f]};var tf={drawElement:function(f,c,d,m,_,C){c.isNode()?this.drawNode(f,c,d,m,_,C):this.drawEdge(f,c,d,m,_,C)},drawElementOverlay:function(f,c){c.isNode()?this.drawNodeOverlay(f,c):this.drawEdgeOverlay(f,c)},drawElementUnderlay:function(f,c){c.isNode()?this.drawNodeUnderlay(f,c):this.drawEdgeUnderlay(f,c)},drawCachedElementPortion:function(f,c,d,m,_,C,A,E){var N=this,R=d.getBoundingBox(c);if(0!==R.w&&0!==R.h){var j=d.getElement(c,R,m,_,C);if(null!=j){var Z=E(N,c);if(0===Z)return;var qe,ct,nt,Ct,Gt,jt,he=A(N,c),me=R.x1,ye=R.y1,De=R.w,je=R.h;if(0!==he){var Wt=d.getRotationPoint(c);f.translate(nt=Wt.x,Ct=Wt.y),f.rotate(he),(Gt=N.getImgSmoothing(f))||N.setImgSmoothing(f,!0);var It=d.getRotationOffset(c);qe=It.x,ct=It.y}else qe=me,ct=ye;1!==Z&&(f.globalAlpha=(jt=f.globalAlpha)*Z),f.drawImage(j.texture.canvas,j.x,0,j.width,j.height,qe,ct,De,je),1!==Z&&(f.globalAlpha=jt),0!==he&&(f.rotate(-he),f.translate(-nt,-Ct),Gt||N.setImgSmoothing(f,!1))}else d.drawElement(f,c)}}},sm=function(){return 0},Uv=function(c,d){return c.getTextAngle(d,null)},Yy=function(c,d){return c.getTextAngle(d,"source")},Ky=function(c,d){return c.getTextAngle(d,"target")},a=function(c,d){return d.effectiveOpacity()},h=function(c,d){return d.pstyle("text-opacity").pfValue*d.effectiveOpacity()};tf.drawCachedElement=function(f,c,d,m,_,C){var A=this,E=A.data,N=E.eleTxrCache,R=E.lblTxrCache,j=E.slbTxrCache,Z=E.tlbTxrCache,he=c.boundingBox(),me=!0===C?N.reasons.highQuality:null;if(0!==he.w&&0!==he.h&&c.visible()&&(!m||Am(he,m))){var ye=c.isEdge(),De=c.element()._private.rscratch.badLine;A.drawElementUnderlay(f,c),A.drawCachedElementPortion(f,c,N,d,_,me,sm,a),(!ye||!De)&&A.drawCachedElementPortion(f,c,R,d,_,me,Uv,h),ye&&!De&&(A.drawCachedElementPortion(f,c,j,d,_,me,Yy,h),A.drawCachedElementPortion(f,c,Z,d,_,me,Ky,h)),A.drawElementOverlay(f,c)}},tf.drawElements=function(f,c){for(var m=0;m<c.length;m++)this.drawElement(f,c[m])},tf.drawCachedElements=function(f,c,d,m){for(var C=0;C<c.length;C++)this.drawCachedElement(f,c[C],d,m)},tf.drawCachedNodes=function(f,c,d,m){for(var C=0;C<c.length;C++){var A=c[C];!A.isNode()||this.drawCachedElement(f,A,d,m)}},tf.drawLayeredElements=function(f,c,d,m){var C=this.data.lyrTxrCache.getLayers(c,d);if(C)for(var A=0;A<C.length;A++){var E=C[A],N=E.bb;0===N.w||0===N.h||f.drawImage(E.canvas,N.x1,N.y1,N.w,N.h)}else this.drawCachedElements(f,c,d,m)};var g={drawEdge:function(f,c,d){var m=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],_=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],C=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],A=this,E=c._private.rscratch;if((!C||c.visible())&&!E.badLine&&null!=E.allpts&&!isNaN(E.allpts[0])){var N;d&&f.translate(-(N=d).x1,-N.y1);var R=C?c.pstyle("opacity").value:1,j=C?c.pstyle("line-opacity").value:1,Z=c.pstyle("curve-style").value,he=c.pstyle("line-style").value,me=c.pstyle("width").pfValue,ye=c.pstyle("line-cap").value,De=R*j,je=R*j,qe=function(){var ut=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De;"straight-triangle"===Z?(A.eleStrokeStyle(f,c,ut),A.drawEdgeTrianglePath(c,f,E.allpts)):(f.lineWidth=me,f.lineCap=ye,A.eleStrokeStyle(f,c,ut),A.drawEdgePath(c,f,E.allpts,he),f.lineCap="butt")},ct=function(){!_||A.drawEdgeOverlay(f,c)},nt=function(){!_||A.drawEdgeUnderlay(f,c)},Ct=function(){var ut=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je;A.drawArrowheads(f,c,ut)},Gt=function(){A.drawElementText(f,c,null,m)};f.lineJoin="round";var Wt="yes"===c.pstyle("ghost").value;if(Wt){var It=c.pstyle("ghost-offset-x").pfValue,jt=c.pstyle("ghost-offset-y").pfValue,Dt=c.pstyle("ghost-opacity").value,Zt=De*Dt;f.translate(It,jt),qe(Zt),Ct(Zt),f.translate(-It,-jt)}nt(),qe(),Ct(),ct(),Gt(),d&&f.translate(N.x1,N.y1)}}},y=function(c){if(!["overlay","underlay"].includes(c))throw new Error("Invalid state");return function(d,m){if(m.visible()){var _=m.pstyle("".concat(c,"-opacity")).value;if(0!==_){var C=this,A=C.usePaths(),E=m._private.rscratch,R=2*m.pstyle("".concat(c,"-padding")).pfValue,j=m.pstyle("".concat(c,"-color")).value;d.lineWidth=R,d.lineCap="self"!==E.edgeType||A?"round":"butt",C.colorStrokeStyle(d,j[0],j[1],j[2],_),C.drawEdgePath(m,d,E.allpts,"solid")}}}};g.drawEdgeOverlay=y("overlay"),g.drawEdgeUnderlay=y("underlay"),g.drawEdgePath=function(f,c,d,m){var A,_=f._private.rscratch,C=c,E=!1,N=this.usePaths(),R=f.pstyle("line-dash-pattern").pfValue,j=f.pstyle("line-dash-offset").pfValue;if(N){var Z=d.join("$");_.pathCacheKey&&_.pathCacheKey===Z?(A=c=_.pathCache,E=!0):(A=c=new Path2D,_.pathCacheKey=Z,_.pathCache=A)}if(C.setLineDash)switch(m){case"dotted":C.setLineDash([1,1]);break;case"dashed":C.setLineDash(R),C.lineDashOffset=j;break;case"solid":C.setLineDash([])}if(!E&&!_.badLine)switch(c.beginPath&&c.beginPath(),c.moveTo(d[0],d[1]),_.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var me=2;me+3<d.length;me+=4)c.quadraticCurveTo(d[me],d[me+1],d[me+2],d[me+3]);break;case"straight":case"segments":case"haystack":for(var ye=2;ye+1<d.length;ye+=2)c.lineTo(d[ye],d[ye+1])}c=C,N?c.stroke(A):c.stroke(),c.setLineDash&&c.setLineDash([])},g.drawEdgeTrianglePath=function(f,c,d){c.fillStyle=c.strokeStyle;for(var m=f.pstyle("width").pfValue,_=0;_+1<d.length;_+=2){var C=[d[_+2]-d[_],d[_+3]-d[_+1]],A=Math.sqrt(C[0]*C[0]+C[1]*C[1]),E=[C[1]/A,-C[0]/A],N=[E[0]*m/2,E[1]*m/2];c.beginPath(),c.moveTo(d[_]-N[0],d[_+1]-N[1]),c.lineTo(d[_]+N[0],d[_+1]+N[1]),c.lineTo(d[_+2],d[_+3]),c.closePath(),c.fill()}},g.drawArrowheads=function(f,c,d){var m=c._private.rscratch,_="haystack"===m.edgeType;_||this.drawArrowhead(f,c,"source",m.arrowStartX,m.arrowStartY,m.srcArrowAngle,d),this.drawArrowhead(f,c,"mid-target",m.midX,m.midY,m.midtgtArrowAngle,d),this.drawArrowhead(f,c,"mid-source",m.midX,m.midY,m.midsrcArrowAngle,d),_||this.drawArrowhead(f,c,"target",m.arrowEndX,m.arrowEndY,m.tgtArrowAngle,d)},g.drawArrowhead=function(f,c,d,m,_,C,A){if(!(isNaN(m)||null==m||isNaN(_)||null==_||isNaN(C)||null==C)){var E=this,N=c.pstyle(d+"-arrow-shape").value;if("none"!==N){var R="hollow"===c.pstyle(d+"-arrow-fill").value?"both":"filled",j=c.pstyle(d+"-arrow-fill").value,Z=c.pstyle("width").pfValue,he=c.pstyle("opacity").value;void 0===A&&(A=he);var me=f.globalCompositeOperation;(1!==A||"hollow"===j)&&(f.globalCompositeOperation="destination-out",E.colorFillStyle(f,255,255,255,1),E.colorStrokeStyle(f,255,255,255,1),E.drawArrowShape(c,f,R,Z,N,m,_,C),f.globalCompositeOperation=me);var ye=c.pstyle(d+"-arrow-color").value;E.colorFillStyle(f,ye[0],ye[1],ye[2],A),E.colorStrokeStyle(f,ye[0],ye[1],ye[2],A),E.drawArrowShape(c,f,j,Z,N,m,_,C)}}},g.drawArrowShape=function(f,c,d,m,_,C,A,E){var Z,N=this,R=this.usePaths()&&"triangle-cross"!==_,j=!1,he=c,me={x:C,y:A},ye=f.pstyle("arrow-scale").value,De=this.getArrowWidth(m,ye),je=N.arrowShapes[_];if(R){var qe=N.arrowPathCache=N.arrowPathCache||[],ct=xc(_),nt=qe[ct];null!=nt?(Z=c=nt,j=!0):(Z=c=new Path2D,qe[ct]=Z)}j||(c.beginPath&&c.beginPath(),R?je.draw(c,1,0,{x:0,y:0},1):je.draw(c,De,E,me,m),c.closePath&&c.closePath()),c=he,R&&(c.translate(C,A),c.rotate(E),c.scale(De,De)),("filled"===d||"both"===d)&&(R?c.fill(Z):c.fill()),("hollow"===d||"both"===d)&&(c.lineWidth=(je.matchEdgeWidth?m:1)/(R?De:1),c.lineJoin="miter",R?c.stroke(Z):c.stroke()),R&&(c.scale(1/De,1/De),c.rotate(-E),c.translate(-C,-A))};var x={safeDrawImage:function(f,c,d,m,_,C,A,E,N,R){if(!(_<=0||C<=0||N<=0||R<=0))try{f.drawImage(c,d,m,_,C,A,E,N,R)}catch(j){ge(j)}},drawInscribedImage:function(f,c,d,m,_){var C=this,A=d.position(),E=A.x,N=A.y,R=d.cy().style(),j=R.getIndexedStyle.bind(R),Z=j(d,"background-fit","value",m),he=j(d,"background-repeat","value",m),me=d.width(),ye=d.height(),De=2*d.padding(),je=me+("inner"===j(d,"background-width-relative-to","value",m)?0:De),qe=ye+("inner"===j(d,"background-height-relative-to","value",m)?0:De),ct=d._private.rscratch,Ct="node"===j(d,"background-clip","value",m),Gt=j(d,"background-image-opacity","value",m)*_,Wt=j(d,"background-image-smoothing","value",m),It=c.width||c.cachedW,jt=c.height||c.cachedH;(null==It||null==jt)&&(document.body.appendChild(c),It=c.cachedW=c.width||c.offsetWidth,jt=c.cachedH=c.height||c.offsetHeight,document.body.removeChild(c));var Dt=It,Zt=jt;if("auto"!==j(d,"background-width","value",m)&&(Dt="%"===j(d,"background-width","units",m)?j(d,"background-width","pfValue",m)*je:j(d,"background-width","pfValue",m)),"auto"!==j(d,"background-height","value",m)&&(Zt="%"===j(d,"background-height","units",m)?j(d,"background-height","pfValue",m)*qe:j(d,"background-height","pfValue",m)),0!==Dt&&0!==Zt){if("contain"===Z)Dt*=Kt=Math.min(je/Dt,qe/Zt),Zt*=Kt;else if("cover"===Z){var Kt;Dt*=Kt=Math.max(je/Dt,qe/Zt),Zt*=Kt}var ut=E-je/2,Qt=j(d,"background-position-x","units",m),Vt=j(d,"background-position-x","pfValue",m);ut+="%"===Qt?(je-Dt)*Vt:Vt;var An=j(d,"background-offset-x","units",m),sn=j(d,"background-offset-x","pfValue",m);ut+="%"===An?(je-Dt)*sn:sn;var pn=N-qe/2,Mn=j(d,"background-position-y","units",m),kn=j(d,"background-position-y","pfValue",m);pn+="%"===Mn?(qe-Zt)*kn:kn;var ti=j(d,"background-offset-y","units",m),Dn=j(d,"background-offset-y","pfValue",m);pn+="%"===ti?(qe-Zt)*Dn:Dn,ct.pathCache&&(ut-=E,pn-=N,E=0,N=0);var Zn=f.globalAlpha;f.globalAlpha=Gt;var hi=C.getImgSmoothing(f),xi=!1;if("no"===Wt&&hi?(C.setImgSmoothing(f,!1),xi=!0):"yes"===Wt&&!hi&&(C.setImgSmoothing(f,!0),xi=!0),"no-repeat"===he)Ct&&(f.save(),ct.pathCache?f.clip(ct.pathCache):(C.nodeShapes[C.getNodeShape(d)].draw(f,E,N,je,qe),f.clip())),C.safeDrawImage(f,c,0,0,It,jt,ut,pn,Dt,Zt),Ct&&f.restore();else{var mi=f.createPattern(c,he);f.fillStyle=mi,C.nodeShapes[C.getNodeShape(d)].draw(f,E,N,je,qe),f.translate(ut,pn),f.fill(),f.translate(-ut,-pn)}f.globalAlpha=Zn,xi&&C.setImgSmoothing(f,hi)}}},M={};function F(f,c,d,m,_){var C=arguments.length>5&&void 0!==arguments[5]?arguments[5]:5;f.beginPath(),f.moveTo(c+C,d),f.lineTo(c+m-C,d),f.quadraticCurveTo(c+m,d,c+m,d+C),f.lineTo(c+m,d+_-C),f.quadraticCurveTo(c+m,d+_,c+m-C,d+_),f.lineTo(c+C,d+_),f.quadraticCurveTo(c,d+_,c,d+_-C),f.lineTo(c,d+C),f.quadraticCurveTo(c,d,c+C,d),f.closePath(),f.fill()}M.eleTextBiggerThanMin=function(f,c){if(!c){var d=f.cy().zoom(),m=this.getPixelRatio(),_=Math.ceil(_v(d*m));c=Math.pow(2,_)}return!(f.pstyle("font-size").pfValue*c<f.pstyle("min-zoomed-font-size").pfValue)},M.drawElementText=function(f,c,d,m,_){var C=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],A=this;if(null==m){if(C&&!A.eleTextBiggerThanMin(c))return}else if(!1===m)return;if(c.isNode()){var E=c.pstyle("label");if(!E||!E.value)return;var N=A.getLabelJustification(c);f.textAlign=N,f.textBaseline="bottom"}else{var R=c.element()._private.rscratch.badLine,j=c.pstyle("label"),Z=c.pstyle("source-label"),he=c.pstyle("target-label");if(R||(!j||!j.value)&&(!Z||!Z.value)&&(!he||!he.value))return;f.textAlign="center",f.textBaseline="bottom"}var ye,me=!d;d&&f.translate(-(ye=d).x1,-ye.y1),null==_?(A.drawText(f,c,null,me,C),c.isEdge()&&(A.drawText(f,c,"source",me,C),A.drawText(f,c,"target",me,C))):A.drawText(f,c,_,me,C),d&&f.translate(ye.x1,ye.y1)},M.getFontCache=function(f){var c;this.fontCaches=this.fontCaches||[];for(var d=0;d<this.fontCaches.length;d++)if((c=this.fontCaches[d]).context===f)return c;return this.fontCaches.push(c={context:f}),c},M.setupTextStyle=function(f,c){var d=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],m=c.pstyle("font-style").strValue,_=c.pstyle("font-size").pfValue+"px",C=c.pstyle("font-family").strValue,A=c.pstyle("font-weight").strValue,E=d?c.effectiveOpacity()*c.pstyle("text-opacity").value:1,N=c.pstyle("text-outline-opacity").value*E,R=c.pstyle("color").value,j=c.pstyle("text-outline-color").value;f.font=m+" "+A+" "+_+" "+C,f.lineJoin="round",this.colorFillStyle(f,R[0],R[1],R[2],E),this.colorStrokeStyle(f,j[0],j[1],j[2],N)},M.getTextAngle=function(f,c){var _=f._private.rscratch,A=f.pstyle((c?c+"-":"")+"text-rotation"),E=ur(_,"labelAngle",c);return"autorotate"===A.strValue?f.isEdge()?E:0:"none"===A.strValue?0:A.pfValue},M.drawText=function(f,c,d){var m=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],_=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],C=c._private,A=C.rscratch,E=_?c.effectiveOpacity():1;if(!_||0!==E&&0!==c.pstyle("text-opacity").value){"main"===d&&(d=null);var j,Z,N=ur(A,"labelX",d),R=ur(A,"labelY",d),he=this.getLabelText(c,d);if(null!=he&&""!==he&&!isNaN(N)&&!isNaN(R)){this.setupTextStyle(f,c,_);var Gt,me=d?d+"-":"",ye=ur(A,"labelWidth",d),De=ur(A,"labelHeight",d),je=c.pstyle(me+"text-margin-x").pfValue,qe=c.pstyle(me+"text-margin-y").pfValue,ct=c.isEdge(),nt=c.pstyle("text-halign").value,Ct=c.pstyle("text-valign").value;switch(ct&&(nt="center",Ct="center"),N+=je,R+=qe,0!==(Gt=m?this.getTextAngle(c,d):0)&&(f.translate(j=N,Z=R),f.rotate(Gt),N=0,R=0),Ct){case"top":break;case"center":R+=De/2;break;case"bottom":R+=De}var Wt=c.pstyle("text-background-opacity").value,It=c.pstyle("text-border-opacity").value,jt=c.pstyle("text-border-width").pfValue,Dt=c.pstyle("text-background-padding").pfValue;if(Wt>0||jt>0&&It>0){var Zt=N-Dt;switch(nt){case"left":Zt-=ye;break;case"center":Zt-=ye/2}var Kt=R-De-Dt,ut=ye+2*Dt,Qt=De+2*Dt;if(Wt>0){var Vt=f.fillStyle,An=c.pstyle("text-background-color").value;f.fillStyle="rgba("+An[0]+","+An[1]+","+An[2]+","+Wt*E+")";var sn=c.pstyle("text-background-shape").strValue;0===sn.indexOf("round")?F(f,Zt,Kt,ut,Qt,2):f.fillRect(Zt,Kt,ut,Qt),f.fillStyle=Vt}if(jt>0&&It>0){var pn=f.strokeStyle,Mn=f.lineWidth,kn=c.pstyle("text-border-color").value,ti=c.pstyle("text-border-style").value;if(f.strokeStyle="rgba("+kn[0]+","+kn[1]+","+kn[2]+","+It*E+")",f.lineWidth=jt,f.setLineDash)switch(ti){case"dotted":f.setLineDash([1,1]);break;case"dashed":f.setLineDash([4,2]);break;case"double":f.lineWidth=jt/4,f.setLineDash([]);break;case"solid":f.setLineDash([])}if(f.strokeRect(Zt,Kt,ut,Qt),"double"===ti){var Dn=jt/2;f.strokeRect(Zt+Dn,Kt+Dn,ut-2*Dn,Qt-2*Dn)}f.setLineDash&&f.setLineDash([]),f.lineWidth=Mn,f.strokeStyle=pn}}var Zn=2*c.pstyle("text-outline-width").pfValue;if(Zn>0&&(f.lineWidth=Zn),"wrap"===c.pstyle("text-wrap").value){var hi=ur(A,"labelWrapCachedLines",d),xi=ur(A,"labelLineHeight",d),mi=ye/2,fi=this.getLabelJustification(c);switch("auto"===fi||("left"===nt?"left"===fi?N+=-ye:"center"===fi&&(N+=-mi):"center"===nt?"left"===fi?N+=-mi:"right"===fi&&(N+=mi):"right"===nt&&("center"===fi?N+=mi:"right"===fi&&(N+=ye))),Ct){case"top":case"center":case"bottom":R-=(hi.length-1)*xi}for(var Pn=0;Pn<hi.length;Pn++)Zn>0&&f.strokeText(hi[Pn],N,R),f.fillText(hi[Pn],N,R),R+=xi}else Zn>0&&f.strokeText(he,N,R),f.fillText(he,N,R);0!==Gt&&(f.rotate(-Gt),f.translate(-j,-Z))}}};var z={drawNode:function(f,c,d){var E,N,m=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],_=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],C=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],A=this,R=c._private,j=R.rscratch,Z=c.position();if(Ne(Z.x)&&Ne(Z.y)&&(!C||c.visible())){var ye,qe,he=C?c.effectiveOpacity():1,me=A.usePaths(),De=!1,je=c.padding();E=c.width()+2*je,N=c.height()+2*je,d&&f.translate(-(qe=d).x1,-qe.y1);for(var ct=c.pstyle("background-image"),nt=ct.value,Ct=new Array(nt.length),Gt=new Array(nt.length),Wt=0,It=0;It<nt.length;It++){var jt=nt[It],Dt=Ct[It]=null!=jt&&"none"!==jt;if(Dt){var Zt=c.cy().style().getIndexedStyle(c,"background-image-crossorigin","value",It);Wt++,Gt[It]=A.getCachedImage(jt,Zt,function(){R.backgroundTimestamp=Date.now(),c.emitAndNotify("background")})}}var Kt=c.pstyle("background-blacken").value,ut=c.pstyle("border-width").pfValue,Qt=c.pstyle("background-opacity").value*he,Vt=c.pstyle("border-color").value,An=c.pstyle("border-style").value,sn=c.pstyle("border-opacity").value*he;f.lineJoin="miter";var pn=function(){var br=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt;A.eleFillStyle(f,c,br)},Mn=function(){var br=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sn;A.colorStrokeStyle(f,Vt[0],Vt[1],Vt[2],br)},kn=c.pstyle("shape").strValue,ti=c.pstyle("shape-polygon-points").pfValue;if(me){f.translate(Z.x,Z.y);var Dn=A.nodePathCache=A.nodePathCache||[],Zn=Mg("polygon"===kn?kn+","+ti.join(","):kn,""+N,""+E),hi=Dn[Zn];null!=hi?(De=!0,j.pathCache=ye=hi):(ye=new Path2D,Dn[Zn]=j.pathCache=ye)}var xi=function(){if(!De){var br=Z;me&&(br={x:0,y:0}),A.nodeShapes[A.getNodeShape(c)].draw(ye||f,br.x,br.y,E,N)}me?f.fill(ye):f.fill()},mi=function(){for(var br=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,wr=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],Qr=R.backgrounding,Bs=0,Jr=0;Jr<Gt.length;Jr++){var $i=c.cy().style().getIndexedStyle(c,"background-image-containment","value",Jr);wr&&"over"===$i||!wr&&"inside"===$i?Bs++:Ct[Jr]&&Gt[Jr].complete&&!Gt[Jr].error&&(Bs++,A.drawInscribedImage(f,Gt[Jr],c,Jr,br))}R.backgrounding=Bs!==Wt,Qr!==R.backgrounding&&c.updateStyle(!1)},fi=function(){var br=arguments.length>0&&void 0!==arguments[0]&&arguments[0],wr=arguments.length>1&&void 0!==arguments[1]?arguments[1]:he;A.hasPie(c)&&(A.drawPie(f,c,wr),br&&(me||A.nodeShapes[A.getNodeShape(c)].draw(f,Z.x,Z.y,E,N)))},Pn=function(){var br=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,wr=(Kt>0?Kt:-Kt)*br,Qr=Kt>0?0:255;0!==Kt&&(A.colorFillStyle(f,Qr,Qr,Qr,wr),me?f.fill(ye):f.fill())},ai=function(){if(ut>0){if(f.lineWidth=ut,f.lineCap="butt",f.setLineDash)switch(An){case"dotted":f.setLineDash([1,1]);break;case"dashed":f.setLineDash([4,2]);break;case"solid":case"double":f.setLineDash([])}if(me?f.stroke(ye):f.stroke(),"double"===An){f.lineWidth=ut/3;var br=f.globalCompositeOperation;f.globalCompositeOperation="destination-out",me?f.stroke(ye):f.stroke(),f.globalCompositeOperation=br}f.setLineDash&&f.setLineDash([])}},Si=function(){_&&A.drawNodeOverlay(f,c,Z,E,N)},Qi=function(){_&&A.drawNodeUnderlay(f,c,Z,E,N)},lr=function(){A.drawElementText(f,c,null,m)},Hr="yes"===c.pstyle("ghost").value;if(Hr){var Zr=c.pstyle("ghost-offset-x").pfValue,mr=c.pstyle("ghost-offset-y").pfValue,or=c.pstyle("ghost-opacity").value,Yr=or*he;f.translate(Zr,mr),pn(or*Qt),xi(),mi(Yr,!0),Mn(or*sn),ai(),fi(0!==Kt||0!==ut),mi(Yr,!1),Pn(Yr),f.translate(-Zr,-mr)}me&&f.translate(-Z.x,-Z.y),Qi(),me&&f.translate(Z.x,Z.y),pn(),xi(),mi(he,!0),Mn(),ai(),fi(0!==Kt||0!==ut),mi(he,!1),Pn(),me&&f.translate(-Z.x,-Z.y),lr(),Si(),d&&f.translate(qe.x1,qe.y1)}}},le=function(c){if(!["overlay","underlay"].includes(c))throw new Error("Invalid state");return function(d,m,_,C,A){if(m.visible()){var N=m.pstyle("".concat(c,"-padding")).pfValue,R=m.pstyle("".concat(c,"-opacity")).value,j=m.pstyle("".concat(c,"-color")).value,Z=m.pstyle("".concat(c,"-shape")).value;if(R>0){if(_=_||m.position(),null==C||null==A){var he=m.padding();C=m.width()+2*he,A=m.height()+2*he}this.colorFillStyle(d,j[0],j[1],j[2],R),this.nodeShapes[Z].draw(d,_.x,_.y,C+2*N,A+2*N),d.fill()}}}};z.drawNodeOverlay=le("overlay"),z.drawNodeUnderlay=le("underlay"),z.hasPie=function(f){return(f=f[0])._private.hasPie},z.drawPie=function(f,c,d,m){c=c[0],m=m||c.position();var _=c.cy().style(),C=c.pstyle("pie-size"),A=m.x,E=m.y,N=c.width(),R=c.height(),j=Math.min(N,R)/2,Z=0;this.usePaths()&&(A=0,E=0),"%"===C.units?j*=C.pfValue:void 0!==C.pfValue&&(j=C.pfValue/2);for(var me=1;me<=_.pieBackgroundN;me++){var ye=c.pstyle("pie-"+me+"-background-size").value,De=c.pstyle("pie-"+me+"-background-color").value,je=c.pstyle("pie-"+me+"-background-opacity").value*d,qe=ye/100;qe+Z>1&&(qe=1-Z);var ct=1.5*Math.PI+2*Math.PI*Z,Ct=ct+2*Math.PI*qe;0===ye||Z>=1||Z+qe>1||(f.beginPath(),f.moveTo(A,E),f.arc(A,E,j,ct,Ct),f.closePath(),this.colorFillStyle(f,De[0],De[1],De[2],je),f.fill(),Z+=qe)}};for(var re={getPixelRatio:function(){var f=this.data.contexts[0];return null!=this.forcedPixelRatio?this.forcedPixelRatio:(window.devicePixelRatio||1)/(f.backingStorePixelRatio||f.webkitBackingStorePixelRatio||f.mozBackingStorePixelRatio||f.msBackingStorePixelRatio||f.oBackingStorePixelRatio||f.backingStorePixelRatio||1)},paintCache:function(f){for(var m,c=this.paintCaches=this.paintCaches||[],d=!0,_=0;_<c.length;_++)if((m=c[_]).context===f){d=!1;break}return d&&c.push(m={context:f}),m},createGradientStyleFor:function(f,c,d,m,_){var C,A=this.usePaths(),E=d.pstyle(c+"-gradient-stop-colors").value,N=d.pstyle(c+"-gradient-stop-positions").pfValue;if("radial-gradient"===m)if(d.isEdge()){var R=d.sourceEndpoint(),j=d.targetEndpoint(),Z=d.midpoint(),he=ro(R,Z),me=ro(j,Z);C=f.createRadialGradient(Z.x,Z.y,0,Z.x,Z.y,Math.max(he,me))}else{var ye=A?{x:0,y:0}:d.position(),De=d.paddedWidth(),je=d.paddedHeight();C=f.createRadialGradient(ye.x,ye.y,0,ye.x,ye.y,Math.max(De,je))}else if(d.isEdge()){var qe=d.sourceEndpoint(),ct=d.targetEndpoint();C=f.createLinearGradient(qe.x,qe.y,ct.x,ct.y)}else{var nt=A?{x:0,y:0}:d.position(),Wt=d.paddedWidth()/2,It=d.paddedHeight()/2;switch(d.pstyle("background-gradient-direction").value){case"to-bottom":C=f.createLinearGradient(nt.x,nt.y-It,nt.x,nt.y+It);break;case"to-top":C=f.createLinearGradient(nt.x,nt.y+It,nt.x,nt.y-It);break;case"to-left":C=f.createLinearGradient(nt.x+Wt,nt.y,nt.x-Wt,nt.y);break;case"to-right":C=f.createLinearGradient(nt.x-Wt,nt.y,nt.x+Wt,nt.y);break;case"to-bottom-right":case"to-right-bottom":C=f.createLinearGradient(nt.x-Wt,nt.y-It,nt.x+Wt,nt.y+It);break;case"to-top-right":case"to-right-top":C=f.createLinearGradient(nt.x-Wt,nt.y+It,nt.x+Wt,nt.y-It);break;case"to-bottom-left":case"to-left-bottom":C=f.createLinearGradient(nt.x+Wt,nt.y-It,nt.x-Wt,nt.y+It);break;case"to-top-left":case"to-left-top":C=f.createLinearGradient(nt.x+Wt,nt.y+It,nt.x-Wt,nt.y-It)}}if(!C)return null;for(var Dt=N.length===E.length,Zt=E.length,Kt=0;Kt<Zt;Kt++)C.addColorStop(Dt?N[Kt]:Kt/(Zt-1),"rgba("+E[Kt][0]+","+E[Kt][1]+","+E[Kt][2]+","+_+")");return C},gradientFillStyle:function(f,c,d,m){var _=this.createGradientStyleFor(f,"background",c,d,m);if(!_)return null;f.fillStyle=_},colorFillStyle:function(f,c,d,m,_){f.fillStyle="rgba("+c+","+d+","+m+","+_+")"},eleFillStyle:function(f,c,d){var m=c.pstyle("background-fill").value;if("linear-gradient"===m||"radial-gradient"===m)this.gradientFillStyle(f,c,m,d);else{var _=c.pstyle("background-color").value;this.colorFillStyle(f,_[0],_[1],_[2],d)}},gradientStrokeStyle:function(f,c,d,m){var _=this.createGradientStyleFor(f,"line",c,d,m);if(!_)return null;f.strokeStyle=_},colorStrokeStyle:function(f,c,d,m,_){f.strokeStyle="rgba("+c+","+d+","+m+","+_+")"},eleStrokeStyle:function(f,c,d){var m=c.pstyle("line-fill").value;if("linear-gradient"===m||"radial-gradient"===m)this.gradientStrokeStyle(f,c,m,d);else{var _=c.pstyle("line-color").value;this.colorStrokeStyle(f,_[0],_[1],_[2],d)}},matchCanvasSize:function(f){var c=this,d=c.data,m=c.findContainerClientCoords(),_=m[2],C=m[3],A=c.getPixelRatio();(f===c.data.bufferCanvases[c.MOTIONBLUR_BUFFER_NODE]||f===c.data.bufferCanvases[c.MOTIONBLUR_BUFFER_DRAG])&&(A=c.motionBlurPxRatio);var j,N=_*A,R=C*A;if(N!==c.canvasWidth||R!==c.canvasHeight){c.fontCaches=null;var Z=d.canvasContainer;Z.style.width=_+"px",Z.style.height=C+"px";for(var he=0;he<c.CANVAS_LAYERS;he++)(j=d.canvases[he]).width=N,j.height=R,j.style.width=_+"px",j.style.height=C+"px";for(he=0;he<c.BUFFER_COUNT;he++)(j=d.bufferCanvases[he]).width=N,j.height=R,j.style.width=_+"px",j.style.height=C+"px";c.textureMult=1,A<=1&&(j=d.bufferCanvases[c.TEXTURE_BUFFER],c.textureMult=2,j.width=N*c.textureMult,j.height=R*c.textureMult),c.canvasWidth=N,c.canvasHeight=R}},renderTo:function(f,c,d,m){this.render({forcedContext:f,forcedZoom:c,forcedPan:d,drawAllLayers:!0,forcedPxRatio:m})},render:function(f){var c=(f=f||wi()).forcedContext,d=f.drawAllLayers,m=f.drawOnlyNodeLayer,_=f.forcedZoom,C=f.forcedPan,A=this,E=void 0===f.forcedPxRatio?this.getPixelRatio():f.forcedPxRatio,N=A.cy,R=A.data,j=R.canvasNeedsRedraw,Z=A.textureOnViewport&&!c&&(A.pinching||A.hoverData.dragging||A.swipePanning||A.data.wheelZooming),he=void 0!==f.motionBlur?f.motionBlur:A.motionBlur,me=A.motionBlurPxRatio,ye=N.hasCompoundNodes(),De=A.hoverData.draggingEles,qe=he=he&&!c&&A.motionBlurEnabled&&!(A.hoverData.selecting||A.touchData.selecting);c||(A.prevPxRatio!==E&&(A.invalidateContainerClientCoordsCache(),A.matchCanvasSize(A.container),A.redrawHint("eles",!0),A.redrawHint("drag",!0)),A.prevPxRatio=E),!c&&A.motionBlurTimeout&&clearTimeout(A.motionBlurTimeout),he&&(null==A.mbFrames&&(A.mbFrames=0),A.mbFrames++,A.mbFrames<3&&(qe=!1),A.mbFrames>A.minMbLowQualFrames&&(A.motionBlurPxRatio=A.mbPxRBlurry)),A.clearingMotionBlur&&(A.motionBlurPxRatio=1),A.textureDrawLastFrame&&!Z&&(j[A.NODE]=!0,j[A.SELECT_BOX]=!0);var ct=N.style(),nt=N.zoom(),Ct=void 0!==_?_:nt,Gt=N.pan(),Wt={x:Gt.x,y:Gt.y},It={zoom:nt,pan:{x:Gt.x,y:Gt.y}},jt=A.prevViewport;!(void 0===jt||It.zoom!==jt.zoom||It.pan.x!==jt.pan.x||It.pan.y!==jt.pan.y)&&!(De&&!ye)&&(A.motionBlurPxRatio=1),C&&(Wt=C),Ct*=E,Wt.x*=E,Wt.y*=E;var Zt=A.getCachedZSortedEles();function Kt(mr,or,Yr,ki,br){var wr=mr.globalCompositeOperation;mr.globalCompositeOperation="destination-out",A.colorFillStyle(mr,255,255,255,A.motionBlurTransparency),mr.fillRect(or,Yr,ki,br),mr.globalCompositeOperation=wr}function ut(mr,or){var Yr,ki,br,wr;A.clearingMotionBlur||mr!==R.bufferContexts[A.MOTIONBLUR_BUFFER_NODE]&&mr!==R.bufferContexts[A.MOTIONBLUR_BUFFER_DRAG]?(Yr=Wt,ki=Ct,br=A.canvasWidth,wr=A.canvasHeight):(Yr={x:Gt.x*me,y:Gt.y*me},ki=nt*me,br=A.canvasWidth*me,wr=A.canvasHeight*me),mr.setTransform(1,0,0,1,0,0),"motionBlur"===or?Kt(mr,0,0,br,wr):!c&&(void 0===or||or)&&mr.clearRect(0,0,br,wr),d||(mr.translate(Yr.x,Yr.y),mr.scale(ki,ki)),C&&mr.translate(C.x,C.y),_&&mr.scale(_,_)}if(Z||(A.textureDrawLastFrame=!1),Z){if(A.textureDrawLastFrame=!0,!A.textureCache){A.textureCache={},A.textureCache.bb=N.mutableElements().boundingBox(),A.textureCache.texture=A.data.bufferCanvases[A.TEXTURE_BUFFER];var Qt=A.data.bufferContexts[A.TEXTURE_BUFFER];Qt.setTransform(1,0,0,1,0,0),Qt.clearRect(0,0,A.canvasWidth*A.textureMult,A.canvasHeight*A.textureMult),A.render({forcedContext:Qt,drawOnlyNodeLayer:!0,forcedPxRatio:E*A.textureMult}),(It=A.textureCache.viewport={zoom:N.zoom(),pan:N.pan(),width:A.canvasWidth,height:A.canvasHeight}).mpan={x:(0-It.pan.x)/It.zoom,y:(0-It.pan.y)/It.zoom}}j[A.DRAG]=!1,j[A.NODE]=!1;var An=A.textureCache.texture;It=A.textureCache.viewport,(Vt=R.contexts[A.NODE]).setTransform(1,0,0,1,0,0),he?Kt(Vt,0,0,It.width,It.height):Vt.clearRect(0,0,It.width,It.height);var sn=ct.core("outside-texture-bg-color").value,pn=ct.core("outside-texture-bg-opacity").value;A.colorFillStyle(Vt,sn[0],sn[1],sn[2],pn),Vt.fillRect(0,0,It.width,It.height),nt=N.zoom(),ut(Vt,!1),Vt.clearRect(It.mpan.x,It.mpan.y,It.width/It.zoom/E,It.height/It.zoom/E),Vt.drawImage(An,It.mpan.x,It.mpan.y,It.width/It.zoom/E,It.height/It.zoom/E)}else A.textureOnViewport&&!c&&(A.textureCache=null);var Mn=N.extent(),kn=A.pinching||A.hoverData.dragging||A.swipePanning||A.data.wheelZooming||A.hoverData.draggingEles||A.cy.animated(),ti=A.hideEdgesOnViewport&&kn,Dn=[];if(Dn[A.NODE]=!j[A.NODE]&&he&&!A.clearedForMotionBlur[A.NODE]||A.clearingMotionBlur,Dn[A.NODE]&&(A.clearedForMotionBlur[A.NODE]=!0),Dn[A.DRAG]=!j[A.DRAG]&&he&&!A.clearedForMotionBlur[A.DRAG]||A.clearingMotionBlur,Dn[A.DRAG]&&(A.clearedForMotionBlur[A.DRAG]=!0),j[A.NODE]||d||m||Dn[A.NODE]){var Zn=he&&!Dn[A.NODE]&&1!==me;ut(Vt=c||(Zn?A.data.bufferContexts[A.MOTIONBLUR_BUFFER_NODE]:R.contexts[A.NODE]),he&&!Zn?"motionBlur":void 0),ti?A.drawCachedNodes(Vt,Zt.nondrag,E,Mn):A.drawLayeredElements(Vt,Zt.nondrag,E,Mn),A.debug&&A.drawDebugPoints(Vt,Zt.nondrag),!d&&!he&&(j[A.NODE]=!1)}if(!m&&(j[A.DRAG]||d||Dn[A.DRAG])&&(Zn=he&&!Dn[A.DRAG]&&1!==me,ut(Vt=c||(Zn?A.data.bufferContexts[A.MOTIONBLUR_BUFFER_DRAG]:R.contexts[A.DRAG]),he&&!Zn?"motionBlur":void 0),ti?A.drawCachedNodes(Vt,Zt.drag,E,Mn):A.drawCachedElements(Vt,Zt.drag,E,Mn),A.debug&&A.drawDebugPoints(Vt,Zt.drag),!d&&!he&&(j[A.DRAG]=!1)),A.showFps||!m&&j[A.SELECT_BOX]&&!d){var Vt;if(ut(Vt=c||R.contexts[A.SELECT_BOX]),1==A.selection[4]&&(A.hoverData.selecting||A.touchData.selecting)){nt=A.cy.zoom();var xi=ct.core("selection-box-border-width").value/nt;Vt.lineWidth=xi,Vt.fillStyle="rgba("+ct.core("selection-box-color").value[0]+","+ct.core("selection-box-color").value[1]+","+ct.core("selection-box-color").value[2]+","+ct.core("selection-box-opacity").value+")",Vt.fillRect(A.selection[0],A.selection[1],A.selection[2]-A.selection[0],A.selection[3]-A.selection[1]),xi>0&&(Vt.strokeStyle="rgba("+ct.core("selection-box-border-color").value[0]+","+ct.core("selection-box-border-color").value[1]+","+ct.core("selection-box-border-color").value[2]+","+ct.core("selection-box-opacity").value+")",Vt.strokeRect(A.selection[0],A.selection[1],A.selection[2]-A.selection[0],A.selection[3]-A.selection[1]))}if(R.bgActivePosistion&&!A.hoverData.selecting){nt=A.cy.zoom();var mi=R.bgActivePosistion;Vt.fillStyle="rgba("+ct.core("active-bg-color").value[0]+","+ct.core("active-bg-color").value[1]+","+ct.core("active-bg-color").value[2]+","+ct.core("active-bg-opacity").value+")",Vt.beginPath(),Vt.arc(mi.x,mi.y,ct.core("active-bg-size").pfValue/nt,0,2*Math.PI),Vt.fill()}var fi=A.lastRedrawTime;if(A.showFps&&fi){fi=Math.round(fi);var Pn=Math.round(1e3/fi);Vt.setTransform(1,0,0,1,0,0),Vt.fillStyle="rgba(255, 0, 0, 0.75)",Vt.strokeStyle="rgba(255, 0, 0, 0.75)",Vt.lineWidth=1,Vt.fillText("1 frame = "+fi+" ms = "+Pn+" fps",0,20),Vt.strokeRect(0,30,250,20),Vt.fillRect(0,30,250*Math.min(Pn/60,1),20)}d||(j[A.SELECT_BOX]=!1)}if(he&&1!==me){var lr=R.contexts[A.DRAG],Hr=A.data.bufferCanvases[A.MOTIONBLUR_BUFFER_DRAG],Zr=function(or,Yr,ki){or.setTransform(1,0,0,1,0,0),ki||!qe?or.clearRect(0,0,A.canvasWidth,A.canvasHeight):Kt(or,0,0,A.canvasWidth,A.canvasHeight),or.drawImage(Yr,0,0,A.canvasWidth*me,A.canvasHeight*me,0,0,A.canvasWidth,A.canvasHeight)};(j[A.NODE]||Dn[A.NODE])&&(Zr(R.contexts[A.NODE],A.data.bufferCanvases[A.MOTIONBLUR_BUFFER_NODE],Dn[A.NODE]),j[A.NODE]=!1),(j[A.DRAG]||Dn[A.DRAG])&&(Zr(lr,Hr,Dn[A.DRAG]),j[A.DRAG]=!1)}A.prevViewport=It,A.clearingMotionBlur&&(A.clearingMotionBlur=!1,A.motionBlurCleared=!0,A.motionBlur=!0),he&&(A.motionBlurTimeout=setTimeout(function(){A.motionBlurTimeout=null,A.clearedForMotionBlur[A.NODE]=!1,A.clearedForMotionBlur[A.DRAG]=!1,A.motionBlur=!1,A.clearingMotionBlur=!Z,A.mbFrames=0,j[A.NODE]=!0,j[A.DRAG]=!0,A.redraw()},100)),c||N.emit("render")}},Ce={drawPolygonPath:function(f,c,d,m,_,C){var A=m/2,E=_/2;f.beginPath&&f.beginPath(),f.moveTo(c+A*C[0],d+E*C[1]);for(var N=1;N<C.length/2;N++)f.lineTo(c+A*C[2*N],d+E*C[2*N+1]);f.closePath()},drawRoundPolygonPath:function(f,c,d,m,_,C){var A=m/2,E=_/2,N=Rr(m,_);f.beginPath&&f.beginPath();for(var R=0;R<C.length/4;R++){var Z,j;j=0===R?C.length-2:4*R-2,Z=4*R+2;var he=c+A*C[4*R],me=d+E*C[4*R+1],De=N/Math.tan(Math.acos(-C[j]*C[Z]-C[j+1]*C[Z+1])/2),je=he-De*C[j],qe=me-De*C[j+1],ct=he+De*C[Z],nt=me+De*C[Z+1];0===R?f.moveTo(je,qe):f.lineTo(je,qe),f.arcTo(he,me,ct,nt,N)}f.closePath()},drawRoundRectanglePath:function(f,c,d,m,_){var C=m/2,A=_/2,E=vf(m,_);f.beginPath&&f.beginPath(),f.moveTo(c,d-A),f.arcTo(c+C,d-A,c+C,d,E),f.arcTo(c+C,d+A,c,d+A,E),f.arcTo(c-C,d+A,c-C,d,E),f.arcTo(c-C,d-A,c,d-A,E),f.lineTo(c,d-A),f.closePath()},drawBottomRoundRectanglePath:function(f,c,d,m,_){var C=m/2,A=_/2,E=vf(m,_);f.beginPath&&f.beginPath(),f.moveTo(c,d-A),f.lineTo(c+C,d-A),f.lineTo(c+C,d),f.arcTo(c+C,d+A,c,d+A,E),f.arcTo(c-C,d+A,c-C,d,E),f.lineTo(c-C,d-A),f.lineTo(c,d-A),f.closePath()},drawCutRectanglePath:function(f,c,d,m,_){var C=m/2,A=_/2;f.beginPath&&f.beginPath(),f.moveTo(c-C+8,d-A),f.lineTo(c+C-8,d-A),f.lineTo(c+C,d-A+8),f.lineTo(c+C,d+A-8),f.lineTo(c+C-8,d+A),f.lineTo(c-C+8,d+A),f.lineTo(c-C,d+A-8),f.lineTo(c-C,d-A+8),f.closePath()},drawBarrelPath:function(f,c,d,m,_){var C=m/2,A=_/2,E=c-C,N=c+C,R=d-A,j=d+A,Z=qr(m,_),he=Z.widthOffset,me=Z.heightOffset,ye=Z.ctrlPtOffsetPct*he;f.beginPath&&f.beginPath(),f.moveTo(E,R+me),f.lineTo(E,j-me),f.quadraticCurveTo(E+ye,j,E+he,j),f.lineTo(N-he,j),f.quadraticCurveTo(N-ye,j,N,j-me),f.lineTo(N,R+me),f.quadraticCurveTo(N-ye,R,N-he,R),f.lineTo(E+he,R),f.quadraticCurveTo(E+ye,R,E,R+me),f.closePath()}},Ve=Math.sin(0),Ue=Math.cos(0),We={},ft={},dt=Math.PI/40,at=0*Math.PI;at<2*Math.PI;at+=dt)We[at]=Math.sin(at),ft[at]=Math.cos(at);Ce.drawEllipsePath=function(f,c,d,m,_){if(f.beginPath&&f.beginPath(),f.ellipse)f.ellipse(c,d,m/2,_/2,0,0,2*Math.PI);else for(var C,A,E=m/2,N=_/2,R=0*Math.PI;R<2*Math.PI;R+=dt)C=c-E*We[R]*Ve+E*ft[R]*Ue,A=d+N*ft[R]*Ve+N*We[R]*Ue,0===R?f.moveTo(C,A):f.lineTo(C,A);f.closePath()};var xt={};function nn(f){var c=f.indexOf(",");return f.substr(c+1)}function qt(f,c,d){var m=function(){return c.toDataURL(d,f.quality)};switch(f.output){case"blob-promise":return new ra(function(_,C){try{c.toBlob(function(A){null!=A?_(A):C(new Error("`canvas.toBlob()` sent a null value in its callback"))},d,f.quality)}catch(A){C(A)}});case"blob":return function St(f,c){for(var d=atob(f),m=new ArrayBuffer(d.length),_=new Uint8Array(m),C=0;C<d.length;C++)_[C]=d.charCodeAt(C);return new Blob([m],{type:c})}(nn(m()),d);case"base64":return nn(m());default:return m()}}xt.createBuffer=function(f,c){var d=document.createElement("canvas");return d.width=f,d.height=c,[d,d.getContext("2d")]},xt.bufferCanvasImage=function(f){var c=this.cy,m=c.mutableElements().boundingBox(),_=this.findContainerClientCoords(),C=f.full?Math.ceil(m.w):_[2],A=f.full?Math.ceil(m.h):_[3],E=Ne(f.maxWidth)||Ne(f.maxHeight),N=this.getPixelRatio(),R=1;if(void 0!==f.scale)C*=f.scale,A*=f.scale,R=f.scale;else if(E){var j=1/0,Z=1/0;Ne(f.maxWidth)&&(j=R*f.maxWidth/C),Ne(f.maxHeight)&&(Z=R*f.maxHeight/A),C*=R=Math.min(j,Z),A*=R}E||(C*=N,A*=N,R*=N);var he=document.createElement("canvas");he.width=C,he.height=A,he.style.width=C+"px",he.style.height=A+"px";var me=he.getContext("2d");if(C>0&&A>0){me.clearRect(0,0,C,A),me.globalCompositeOperation="source-over";var ye=this.getCachedZSortedEles();if(f.full)me.translate(-m.x1*R,-m.y1*R),me.scale(R,R),this.drawElements(me,ye),me.scale(1/R,1/R),me.translate(m.x1*R,m.y1*R);else{var De=c.pan(),je={x:De.x*R,y:De.y*R};R*=c.zoom(),me.translate(je.x,je.y),me.scale(R,R),this.drawElements(me,ye),me.scale(1/R,1/R),me.translate(-je.x,-je.y)}f.bg&&(me.globalCompositeOperation="destination-over",me.fillStyle=f.bg,me.rect(0,0,C,A),me.fill())}return he},xt.png=function(f){return qt(f,this.bufferCanvasImage(f),"image/png")},xt.jpg=function(f){return qt(f,this.bufferCanvasImage(f),"image/jpeg")};var un=_n,an=_n.prototype;function _n(f){var c=this;c.data={canvases:new Array(an.CANVAS_LAYERS),contexts:new Array(an.CANVAS_LAYERS),canvasNeedsRedraw:new Array(an.CANVAS_LAYERS),bufferCanvases:new Array(an.BUFFER_COUNT),bufferContexts:new Array(an.CANVAS_LAYERS)};var d="-webkit-tap-highlight-color",m="rgba(0,0,0,0)";c.data.canvasContainer=document.createElement("div");var _=c.data.canvasContainer.style;c.data.canvasContainer.style[d]=m,_.position="relative",_.zIndex="0",_.overflow="hidden";var C=f.cy.container();C.appendChild(c.data.canvasContainer),C.style[d]=m;var A={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};Be&&Be.userAgent.match(/msie|trident|edge/i)&&(A["-ms-touch-action"]="none",A["touch-action"]="none");for(var E=0;E<an.CANVAS_LAYERS;E++){var N=c.data.canvases[E]=document.createElement("canvas");c.data.contexts[E]=N.getContext("2d"),Object.keys(A).forEach(function(fi){N.style[fi]=A[fi]}),N.style.position="absolute",N.setAttribute("data-id","layer"+E),N.style.zIndex=String(an.CANVAS_LAYERS-E),c.data.canvasContainer.appendChild(N),c.data.canvasNeedsRedraw[E]=!1}for(c.data.topCanvas=c.data.canvases[0],c.data.canvases[an.NODE].setAttribute("data-id","layer"+an.NODE+"-node"),c.data.canvases[an.SELECT_BOX].setAttribute("data-id","layer"+an.SELECT_BOX+"-selectbox"),c.data.canvases[an.DRAG].setAttribute("data-id","layer"+an.DRAG+"-drag"),E=0;E<an.BUFFER_COUNT;E++)c.data.bufferCanvases[E]=document.createElement("canvas"),c.data.bufferContexts[E]=c.data.bufferCanvases[E].getContext("2d"),c.data.bufferCanvases[E].style.position="absolute",c.data.bufferCanvases[E].setAttribute("data-id","buffer"+E),c.data.bufferCanvases[E].style.zIndex=String(-E-1),c.data.bufferCanvases[E].style.visibility="hidden";c.pathsEnabled=!0;var R=Tc(),Z=function(Pn){return{x:-Pn.w/2,y:-Pn.h/2}},Gt=function(Pn){return Pn.boundingBox(),Pn[0]._private.bodyBounds},Wt=function(Pn){return Pn.boundingBox(),Pn[0]._private.labelBounds.main||R},It=function(Pn){return Pn.boundingBox(),Pn[0]._private.labelBounds.source||R},jt=function(Pn){return Pn.boundingBox(),Pn[0]._private.labelBounds.target||R},Dt=function(Pn,ai){return ai},Kt=function(Pn,ai,Si){var Qi=Pn?Pn+"-":"";return{x:ai.x+Si.pstyle(Qi+"text-margin-x").pfValue,y:ai.y+Si.pstyle(Qi+"text-margin-y").pfValue}},ut=function(Pn,ai,Si){var Qi=Pn[0]._private.rscratch;return{x:Qi[ai],y:Qi[Si]}},ti=c.data.eleTxrCache=new bp(c,{getKey:function(Pn){return Pn[0]._private.nodeKey},doesEleInvalidateKey:function(Pn){var ai=Pn[0]._private;return!(ai.oldBackgroundTimestamp===ai.backgroundTimestamp)},drawElement:function(Pn,ai,Si,Qi,lr){return c.drawElement(Pn,ai,Si,!1,!1,lr)},getBoundingBox:Gt,getRotationPoint:function(Pn){return function(Pn){return{x:(Pn.x1+Pn.x2)/2,y:(Pn.y1+Pn.y2)/2}}(Gt(Pn))},getRotationOffset:function(Pn){return Z(Gt(Pn))},allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),Dn=c.data.lblTxrCache=new bp(c,{getKey:function(Pn){return Pn[0]._private.labelStyleKey},drawElement:function(Pn,ai,Si,Qi,lr){return c.drawElementText(Pn,ai,Si,Qi,"main",lr)},getBoundingBox:Wt,getRotationPoint:function(Pn){return Kt("",ut(Pn,"labelX","labelY"),Pn)},getRotationOffset:function(Pn){var ai=Wt(Pn),Si=Z(Wt(Pn));if(Pn.isNode()){switch(Pn.pstyle("text-halign").value){case"left":Si.x=-ai.w;break;case"right":Si.x=0}switch(Pn.pstyle("text-valign").value){case"top":Si.y=-ai.h;break;case"bottom":Si.y=0}}return Si},isVisible:Dt}),Zn=c.data.slbTxrCache=new bp(c,{getKey:function(Pn){return Pn[0]._private.sourceLabelStyleKey},drawElement:function(Pn,ai,Si,Qi,lr){return c.drawElementText(Pn,ai,Si,Qi,"source",lr)},getBoundingBox:It,getRotationPoint:function(Pn){return Kt("source",ut(Pn,"sourceLabelX","sourceLabelY"),Pn)},getRotationOffset:function(Pn){return Z(It(Pn))},isVisible:Dt}),hi=c.data.tlbTxrCache=new bp(c,{getKey:function(Pn){return Pn[0]._private.targetLabelStyleKey},drawElement:function(Pn,ai,Si,Qi,lr){return c.drawElementText(Pn,ai,Si,Qi,"target",lr)},getBoundingBox:jt,getRotationPoint:function(Pn){return Kt("target",ut(Pn,"targetLabelX","targetLabelY"),Pn)},getRotationOffset:function(Pn){return Z(jt(Pn))},isVisible:Dt}),xi=c.data.lyrTxrCache=new pa(c);c.onUpdateEleCalcs(function(Pn,ai){ti.invalidateElements(ai),Dn.invalidateElements(ai),Zn.invalidateElements(ai),hi.invalidateElements(ai),xi.invalidateElements(ai);for(var Si=0;Si<ai.length;Si++){var Qi=ai[Si]._private;Qi.oldBackgroundTimestamp=Qi.backgroundTimestamp}});var mi=function(Pn){for(var ai=0;ai<Pn.length;ai++)xi.enqueueElementRefinement(Pn[ai].ele)};ti.onDequeue(mi),Dn.onDequeue(mi),Zn.onDequeue(mi),hi.onDequeue(mi)}an.CANVAS_LAYERS=3,an.SELECT_BOX=0,an.DRAG=1,an.NODE=2,an.BUFFER_COUNT=3,an.TEXTURE_BUFFER=0,an.MOTIONBLUR_BUFFER_NODE=1,an.MOTIONBLUR_BUFFER_DRAG=2,an.redrawHint=function(f,c){var d=this;switch(f){case"eles":d.data.canvasNeedsRedraw[an.NODE]=c;break;case"drag":d.data.canvasNeedsRedraw[an.DRAG]=c;break;case"select":d.data.canvasNeedsRedraw[an.SELECT_BOX]=c}};var On=typeof Path2D<"u";an.path2dEnabled=function(f){if(void 0===f)return this.pathsEnabled;this.pathsEnabled=!!f},an.usePaths=function(){return On&&this.pathsEnabled},an.setImgSmoothing=function(f,c){null!=f.imageSmoothingEnabled?f.imageSmoothingEnabled=c:(f.webkitImageSmoothingEnabled=c,f.mozImageSmoothingEnabled=c,f.msImageSmoothingEnabled=c)},an.getImgSmoothing=function(f){return null!=f.imageSmoothingEnabled?f.imageSmoothingEnabled:f.webkitImageSmoothingEnabled||f.mozImageSmoothingEnabled||f.msImageSmoothingEnabled},an.makeOffscreenCanvas=function(f,c){var d;return"undefined"!==(typeof OffscreenCanvas>"u"?"undefined":se(OffscreenCanvas))?d=new OffscreenCanvas(f,c):((d=document.createElement("canvas")).width=f,d.height=c),d},[Vv,tf,g,x,M,z,re,Ce,xt,{nodeShapeImpl:function(f,c,d,m,_,C,A){switch(f){case"ellipse":return this.drawEllipsePath(c,d,m,_,C);case"polygon":return this.drawPolygonPath(c,d,m,_,C,A);case"round-polygon":return this.drawRoundPolygonPath(c,d,m,_,C,A);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(c,d,m,_,C);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(c,d,m,_,C);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(c,d,m,_,C);case"barrel":return this.drawBarrelPath(c,d,m,_,C)}}}].forEach(function(f){sr(an,f)});var di=[{type:"layout",extensions:tm},{type:"renderer",extensions:[{name:"null",impl:Qd},{name:"base",impl:nm},{name:"canvas",impl:un}]}],Jt={},tn={};function Xn(f,c,d){var m=d,_=function(jt){ge("Can not register `"+c+"` for `"+f+"` since `"+jt+"` already exists in the prototype and can not be overridden")};if("core"===f){if(pc.prototype[c])return _(c);pc.prototype[c]=d}else if("collection"===f){if(la.prototype[c])return _(c);la.prototype[c]=d}else if("layout"===f){for(var C=function(jt){this.options=jt,d.call(this,jt),vt(this._private)||(this._private={}),this._private.cy=jt.cy,this._private.listeners=[],this.createEmitter()},A=C.prototype=Object.create(d.prototype),E=[],N=0;N<E.length;N++){var R=E[N];A[R]=A[R]||function(){return this}}A.start&&!A.run?A.run=function(){return this.start(),this}:!A.start&&A.run&&(A.start=function(){return this.run(),this});var j=d.prototype.stop;A.stop=function(){var It=this.options;if(It&&It.animate){var jt=this.animations;if(jt)for(var Dt=0;Dt<jt.length;Dt++)jt[Dt].stop()}return j?j.call(this):this.emit("layoutstop"),this},A.destroy||(A.destroy=function(){return this}),A.cy=function(){return this._private.cy};var Z=function(jt){return jt._private.cy},he={addEventFields:function(jt,Dt){Dt.layout=jt,Dt.cy=Z(jt),Dt.target=jt},bubble:function(){return!0},parent:function(jt){return Z(jt)}};sr(A,{createEmitter:function(){return this._private.emitter=new mu(he,this),this},emitter:function(){return this._private.emitter},on:function(jt,Dt){return this.emitter().on(jt,Dt),this},one:function(jt,Dt){return this.emitter().one(jt,Dt),this},once:function(jt,Dt){return this.emitter().one(jt,Dt),this},removeListener:function(jt,Dt){return this.emitter().removeListener(jt,Dt),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(jt,Dt){return this.emitter().emit(jt,Dt),this}}),ys.eventAliasesOn(A),m=C}else if("renderer"===f&&"null"!==c&&"base"!==c){var me=ni("renderer","base"),ye=me.prototype,De=d,je=d.prototype,qe=function(){me.apply(this,arguments),De.apply(this,arguments)},ct=qe.prototype;for(var nt in ye){var Ct=ye[nt];if(null!=je[nt])return _(nt);ct[nt]=Ct}for(var Wt in je)ct[Wt]=je[Wt];ye.clientFunctions.forEach(function(It){ct[It]=ct[It]||function(){pt("Renderer does not implement `renderer."+It+"()` on its prototype")}}),m=qe}else if("__proto__"===f||"constructor"===f||"prototype"===f)return pt(f+" is an illegal type to be registered, possibly lead to prototype pollutions");return cc({map:Jt,keys:[f,c],value:m})}function ni(f,c){return Sh({map:Jt,keys:[f,c]})}function Mi(f,c,d,m,_){return cc({map:tn,keys:[f,c,d,m],value:_})}function Ai(f,c,d,m){return Sh({map:tn,keys:[f,c,d,m]})}var gi=function(){return 2===arguments.length?ni.apply(null,arguments):3===arguments.length?Xn.apply(null,arguments):4===arguments.length?Ai.apply(null,arguments):5===arguments.length?Mi.apply(null,arguments):void pt("Invalid extension access syntax")};pc.prototype.extension=gi,di.forEach(function(f){f.extensions.forEach(function(c){Xn(f.type,c.name,c.impl)})});var ar=function f(){if(!(this instanceof f))return new f;this.length=0},Hi=ar.prototype;Hi.instanceString=function(){return"stylesheet"},Hi.selector=function(f){return this[this.length++]={selector:f,properties:[]},this},Hi.css=function(f,c){var d=this.length-1;if(Fe(f))this[d].properties.push({name:f,value:c});else if(vt(f))for(var m=f,_=Object.keys(m),C=0;C<_.length;C++){var A=_[C],E=m[A];if(null!=E){var N=tc.properties[A]||tc.properties[fn(A)];null!=N&&this[d].properties.push({name:N.name,value:E})}}return this},Hi.style=Hi.css,Hi.generateStyle=function(f){var c=new tc(f);return this.appendToStyle(c)},Hi.appendToStyle=function(f){for(var c=0;c<this.length;c++){var d=this[c],_=d.properties;f.selector(d.selector);for(var C=0;C<_.length;C++){var A=_[C];f.css(A.name,A.value)}}return f};var jn=function(c){return void 0===c&&(c={}),vt(c)?new pc(c):Fe(c)?gi.apply(gi,arguments):void 0};jn.use=function(f){var c=Array.prototype.slice.call(arguments,1);return c.unshift(jn),f.apply(null,c),this},jn.warnings=function(f){return st(f)},jn.version="3.22.1",jn.stylesheet=jn.Stylesheet=ar,He.exports=jn},31:(He,we,U)=>{var X;!function(D){var V=Object.hasOwnProperty,O=Array.isArray?Array.isArray:function(ht){return"[object Array]"===Object.prototype.toString.call(ht)},L="object"==typeof process&&"function"==typeof process.nextTick,P="function"==typeof Symbol,q="object"==typeof Reflect,K="function"==typeof setImmediate?setImmediate:setTimeout,ne=P?q&&"function"==typeof Reflect.ownKeys?Reflect.ownKeys:function(Ne){var ht=Object.getOwnPropertyNames(Ne);return ht.push.apply(ht,Object.getOwnPropertySymbols(Ne)),ht}:Object.keys;function se(){this._events={},this._conf&&J.call(this,this._conf)}function J(Ne){Ne&&(this._conf=Ne,Ne.delimiter&&(this.delimiter=Ne.delimiter),Ne.maxListeners!==D&&(this._maxListeners=Ne.maxListeners),Ne.wildcard&&(this.wildcard=Ne.wildcard),Ne.newListener&&(this._newListener=Ne.newListener),Ne.removeListener&&(this._removeListener=Ne.removeListener),Ne.verboseMemoryLeak&&(this.verboseMemoryLeak=Ne.verboseMemoryLeak),Ne.ignoreErrors&&(this.ignoreErrors=Ne.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function W(Ne,ht){var rt="(node) warning: possible EventEmitter memory leak detected. "+Ne+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(rt+=" Event name: "+ht+"."),typeof process<"u"&&process.emitWarning){var Ge=new Error(rt);Ge.name="MaxListenersExceededWarning",Ge.emitter=this,Ge.count=Ne,process.emitWarning(Ge)}else console.error(rt),console.trace&&console.trace()}var ae=function(Ne,ht,rt){var Ge=arguments.length;switch(Ge){case 0:return[];case 1:return[Ne];case 2:return[Ne,ht];case 3:return[Ne,ht,rt];default:for(var _t=new Array(Ge);Ge--;)_t[Ge]=arguments[Ge];return _t}};function _e(Ne,ht){for(var rt={},_t=Ne.length,At=ht?ht.length:0,Lt=0;Lt<_t;Lt++)rt[Ne[Lt]]=Lt<At?ht[Lt]:D;return rt}function Ee(Ne,ht,rt){var Ge,_t;if(this._emitter=Ne,this._target=ht,this._listeners={},this._listenersCount=0,(rt.on||rt.off)&&(Ge=rt.on,_t=rt.off),ht.addEventListener?(Ge=ht.addEventListener,_t=ht.removeEventListener):ht.addListener?(Ge=ht.addListener,_t=ht.removeListener):ht.on&&(Ge=ht.on,_t=ht.off),!Ge&&!_t)throw Error("target does not implement any known event API");if("function"!=typeof Ge)throw TypeError("on method must be a function");if("function"!=typeof _t)throw TypeError("off method must be a function");this._on=Ge,this._off=_t;var At=Ne._observers;At?At.push(this):Ne._observers=[this]}function te(Ne,ht,rt,Ge){var _t=Object.assign({},ht);if(!Ne)return _t;if("object"!=typeof Ne)throw TypeError("options must be an object");var Ut,Oe,fe,At=Object.keys(Ne),Lt=At.length;function wt(Un){throw Error('Invalid "'+Ut+'" option value'+(Un?". Reason: "+Un:""))}for(var kt=0;kt<Lt;kt++){if(Ut=At[kt],!Ge&&!V.call(ht,Ut))throw Error('Unknown "'+Ut+'" option');(Oe=Ne[Ut])!==D&&(_t[Ut]=(fe=rt[Ut])?fe(Oe,wt):Oe)}return _t}function oe(Ne,ht){return("function"!=typeof Ne||!Ne.hasOwnProperty("prototype"))&&ht("value must be a constructor"),Ne}function B(Ne){var ht="value must be type of "+Ne.join("|"),rt=Ne.length,Ge=Ne[0],_t=Ne[1];return 1===rt?function(At,Lt){if(typeof At===Ge)return At;Lt(ht)}:2===rt?function(At,Lt){var Ut=typeof At;if(Ut===Ge||Ut===_t)return At;Lt(ht)}:function(At,Lt){for(var Ut=typeof At,Oe=rt;Oe-- >0;)if(Ut===Ne[Oe])return At;Lt(ht)}}Object.assign(Ee.prototype,{subscribe:function(Ne,ht,rt){var Ge=this,_t=this._target,At=this._emitter,Lt=this._listeners,Ut=function(){var Oe=ae.apply(null,arguments),fe={data:Oe,name:ht,original:Ne};if(rt){var wt=rt.call(_t,fe);!1!==wt&&At.emit.apply(At,[fe.name].concat(Oe))}else At.emit.apply(At,[ht].concat(Oe))};if(Lt[Ne])throw Error("Event '"+Ne+"' is already listening");this._listenersCount++,At._newListener&&At._removeListener&&!Ge._onNewListener?(this._onNewListener=function(Oe){Oe===ht&&null===Lt[Ne]&&(Lt[Ne]=Ut,Ge._on.call(_t,Ne,Ut))},At.on("newListener",this._onNewListener),this._onRemoveListener=function(Oe){Oe===ht&&!At.hasListeners(Oe)&&Lt[Ne]&&(Lt[Ne]=null,Ge._off.call(_t,Ne,Ut))},Lt[Ne]=null,At.on("removeListener",this._onRemoveListener)):(Lt[Ne]=Ut,Ge._on.call(_t,Ne,Ut))},unsubscribe:function(Ne){var _t,At,Oe,ht=this,rt=this._listeners,Ge=this._emitter,Lt=this._off,Ut=this._target;if(Ne&&"string"!=typeof Ne)throw TypeError("event must be a string");function fe(){ht._onNewListener&&(Ge.off("newListener",ht._onNewListener),Ge.off("removeListener",ht._onRemoveListener),ht._onNewListener=null,ht._onRemoveListener=null);var wt=Be.call(Ge,ht);Ge._observers.splice(wt,1)}if(Ne){if(!(_t=rt[Ne]))return;Lt.call(Ut,Ne,_t),delete rt[Ne],--this._listenersCount||fe()}else{for(Oe=(At=ne(rt)).length;Oe-- >0;)Lt.call(Ut,Ne=At[Oe],rt[Ne]);this._listeners={},this._listenersCount=0,fe()}}});var $=B(["function"]),ie=B(["object","function"]);function pe(Ne,ht,rt){var Ge,_t,Lt,At=0,Ut=new Ne(function(Oe,fe,wt){function kt(){_t&&(_t=null),At&&(clearTimeout(At),At=0)}rt=te(rt,{timeout:0,overload:!1},{timeout:function(Et,Ot){return("number"!=typeof(Et*=1)||Et<0||!Number.isFinite(Et))&&Ot("timeout must be a positive number"),Et}});var Un=function(Et){kt(),Oe(Et)},ri=function(Et){kt(),fe(Et)};(Ge=!rt.overload&&"function"==typeof Ne.prototype.cancel&&"function"==typeof wt)?ht(Un,ri,wt):(_t=[function(Et){ri(Et||Error("canceled"))}],ht(Un,ri,function(Et){if(Lt)throw Error("Unable to subscribe on cancel event asynchronously");if("function"!=typeof Et)throw TypeError("onCancel callback must be a function");_t.push(Et)}),Lt=!0),rt.timeout>0&&(At=setTimeout(function(){var Et=Error("timeout");Et.code="ETIMEDOUT",At=0,Ut.cancel(Et),fe(Et)},rt.timeout))});return Ge||(Ut.cancel=function(Oe){if(_t){for(var fe=_t.length,wt=1;wt<fe;wt++)_t[wt](Oe);_t[0](Oe),_t=null}}),Ut}function Be(Ne){var ht=this._observers;if(!ht)return-1;for(var rt=ht.length,Ge=0;Ge<rt;Ge++)if(ht[Ge]._target===Ne)return Ge;return-1}function Me(Ne,ht,rt,Ge,_t){if(!rt)return null;if(0===Ge){var At=typeof ht;if("string"===At){var Lt,Ut,Oe=0,fe=0,wt=this.delimiter,kt=wt.length;if(-1!==(Ut=ht.indexOf(wt))){Lt=new Array(5);do{Lt[Oe++]=ht.slice(fe,Ut),fe=Ut+kt}while(-1!==(Ut=ht.indexOf(wt,fe)));Lt[Oe++]=ht.slice(fe),ht=Lt,_t=Oe}else ht=[ht],_t=1}else"object"===At?_t=ht.length:(ht=[ht],_t=1)}var ri,Et,Ot,fn,et,Ht,yn,Un=null,Le=ht[Ge],ze=ht[Ge+1];if(Ge===_t)rt._listeners&&("function"==typeof rt._listeners?(Ne&&Ne.push(rt._listeners),Un=[rt]):(Ne&&Ne.push.apply(Ne,rt._listeners),Un=[rt]));else{if("*"===Le){for(Ut=(Ht=ne(rt)).length;Ut-- >0;)"_listeners"!==(ri=Ht[Ut])&&(yn=Me(Ne,ht,rt[ri],Ge+1,_t))&&(Un?Un.push.apply(Un,yn):Un=yn);return Un}if("**"===Le){for((et=Ge+1===_t||Ge+2===_t&&"*"===ze)&&rt._listeners&&(Un=Me(Ne,ht,rt,_t,_t)),Ut=(Ht=ne(rt)).length;Ut-- >0;)"_listeners"!==(ri=Ht[Ut])&&("*"===ri||"**"===ri?(rt[ri]._listeners&&!et&&(yn=Me(Ne,ht,rt[ri],_t,_t))&&(Un?Un.push.apply(Un,yn):Un=yn),yn=Me(Ne,ht,rt[ri],Ge,_t)):yn=Me(Ne,ht,rt[ri],ri===ze?Ge+2:Ge,_t),yn&&(Un?Un.push.apply(Un,yn):Un=yn));return Un}rt[Le]&&(Un=Me(Ne,ht,rt[Le],Ge+1,_t))}if((Et=rt["*"])&&Me(Ne,ht,Et,Ge+1,_t),Ot=rt["**"])if(Ge<_t)for(Ot._listeners&&Me(Ne,ht,Ot,_t,_t),Ut=(Ht=ne(Ot)).length;Ut-- >0;)"_listeners"!==(ri=Ht[Ut])&&(ri===ze?Me(Ne,ht,Ot[ri],Ge+2,_t):ri===Le?Me(Ne,ht,Ot[ri],Ge+1,_t):((fn={})[ri]=Ot[ri],Me(Ne,ht,{"**":fn},Ge+1,_t)));else Ot._listeners?Me(Ne,ht,Ot,_t,_t):Ot["*"]&&Ot["*"]._listeners&&Me(Ne,ht,Ot["*"],_t,_t);return Un}function xe(Ne,ht,rt){var At,Oe,Ge=0,_t=0,Lt=this.delimiter,Ut=Lt.length;if("string"==typeof Ne)if(-1!==(At=Ne.indexOf(Lt))){Oe=new Array(5);do{Oe[Ge++]=Ne.slice(_t,At),_t=At+Ut}while(-1!==(At=Ne.indexOf(Lt,_t)));Oe[Ge++]=Ne.slice(_t)}else Oe=[Ne],Ge=1;else Oe=Ne,Ge=Ne.length;if(Ge>1)for(At=0;At+1<Ge;At++)if("**"===Oe[At]&&"**"===Oe[At+1])return;var wt,fe=this.listenerTree;for(At=0;At<Ge;At++)if(fe=fe[wt=Oe[At]]||(fe[wt]={}),At===Ge-1)return fe._listeners?("function"==typeof fe._listeners&&(fe._listeners=[fe._listeners]),rt?fe._listeners.unshift(ht):fe._listeners.push(ht),!fe._listeners.warned&&this._maxListeners>0&&fe._listeners.length>this._maxListeners&&(fe._listeners.warned=!0,W.call(this,fe._listeners.length,wt))):fe._listeners=ht,!0;return!0}function ue(Ne,ht,rt,Ge){for(var Lt,Ut,Oe,wt,_t=ne(Ne),At=_t.length,fe=Ne._listeners;At-- >0;)Lt=Ne[Ut=_t[At]],Oe="_listeners"===Ut?rt:rt?rt.concat(Ut):[Ut],wt=Ge||"symbol"==typeof Ut,fe&&ht.push(wt?Oe:Oe.join(this.delimiter)),"object"==typeof Lt&&ue.call(this,Lt,ht,Oe,wt);return ht}function Pe(Ne){for(var Ge,_t,At,ht=ne(Ne),rt=ht.length;rt-- >0;)(Ge=Ne[_t=ht[rt]])&&(At=!0,"_listeners"!==_t&&!Pe(Ge)&&delete Ne[_t]);return At}function ot(Ne,ht,rt){this.emitter=Ne,this.event=ht,this.listener=rt}function Fe(Ne,ht,rt){if(!0===rt)_t=!0;else if(!1===rt)Ge=!0;else{if(!rt||"object"!=typeof rt)throw TypeError("options should be an object or true");var Ge=rt.async,_t=rt.promisify,At=rt.nextTick,Lt=rt.objectify}if(Ge||At||_t){var Ut=ht,Oe=ht._origin||ht;if(At&&!L)throw Error("process.nextTick is not supported");_t===D&&(_t="AsyncFunction"===ht.constructor.name),ht=function(){var fe=arguments,wt=this,kt=this.event;return _t?At?Promise.resolve():new Promise(function(Un){K(Un)}).then(function(){return wt.event=kt,Ut.apply(wt,fe)}):(At?process.nextTick:K)(function(){wt.event=kt,Ut.apply(wt,fe)})},ht._async=!0,ht._origin=Oe}return[ht,Lt?new ot(this,Ne,ht):this]}function Ye(Ne){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,J.call(this,Ne)}ot.prototype.off=function(){return this.emitter.off(this.event,this.listener),this},Ye.EventEmitter2=Ye,Ye.prototype.listenTo=function(Ne,ht,rt){if("object"!=typeof Ne)throw TypeError("target musts be an object");var Ge=this;function _t(At){if("object"!=typeof At)throw TypeError("events must be an object");var Oe,Lt=rt.reducers,Ut=Be.call(Ge,Ne);Oe=-1===Ut?new Ee(Ge,Ne,rt):Ge._observers[Ut];for(var kt,fe=ne(At),wt=fe.length,Un="function"==typeof Lt,ri=0;ri<wt;ri++)Oe.subscribe(kt=fe[ri],At[kt]||kt,Un?Lt:Lt&&Lt[kt])}return rt=te(rt,{on:D,off:D,reducers:D},{on:$,off:$,reducers:ie}),O(ht)?_t(_e(ht)):_t("string"==typeof ht?_e(ht.split(/\s+/)):ht),this},Ye.prototype.stopListeningTo=function(Ne,ht){var rt=this._observers;if(!rt)return!1;var _t,Ge=rt.length,At=!1;if(Ne&&"object"!=typeof Ne)throw TypeError("target should be an object");for(;Ge-- >0;)_t=rt[Ge],(!Ne||_t._target===Ne)&&(_t.unsubscribe(ht),At=!0);return At},Ye.prototype.delimiter=".",Ye.prototype.setMaxListeners=function(Ne){Ne!==D&&(this._maxListeners=Ne,this._conf||(this._conf={}),this._conf.maxListeners=Ne)},Ye.prototype.getMaxListeners=function(){return this._maxListeners},Ye.prototype.event="",Ye.prototype.once=function(Ne,ht,rt){return this._once(Ne,ht,!1,rt)},Ye.prototype.prependOnceListener=function(Ne,ht,rt){return this._once(Ne,ht,!0,rt)},Ye.prototype._once=function(Ne,ht,rt,Ge){return this._many(Ne,1,ht,rt,Ge)},Ye.prototype.many=function(Ne,ht,rt,Ge){return this._many(Ne,ht,rt,!1,Ge)},Ye.prototype.prependMany=function(Ne,ht,rt,Ge){return this._many(Ne,ht,rt,!0,Ge)},Ye.prototype._many=function(Ne,ht,rt,Ge,_t){var At=this;if("function"!=typeof rt)throw new Error("many only accepts instances of Function");function Lt(){return 0==--ht&&At.off(Ne,Lt),rt.apply(this,arguments)}return Lt._origin=rt,this._on(Ne,Lt,Ge,_t)},Ye.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||se.call(this);var ht,Ge,_t,At,Lt,Ut,Ne=arguments[0],rt=this.wildcard;if("newListener"===Ne&&!this._newListener&&!this._events.newListener)return!1;if(rt&&(ht=Ne,"newListener"!==Ne&&"removeListener"!==Ne&&"object"==typeof Ne)){if(_t=Ne.length,P)for(At=0;At<_t;At++)if("symbol"==typeof Ne[At]){Ut=!0;break}Ut||(Ne=Ne.join(this.delimiter))}var fe,Oe=arguments.length;if(this._all&&this._all.length)for(At=0,_t=(fe=this._all.slice()).length;At<_t;At++)switch(this.event=Ne,Oe){case 1:fe[At].call(this,Ne);break;case 2:fe[At].call(this,Ne,arguments[1]);break;case 3:fe[At].call(this,Ne,arguments[1],arguments[2]);break;default:fe[At].apply(this,arguments)}if(rt)Me.call(this,fe=[],ht,this.listenerTree,0,_t);else{if("function"==typeof(fe=this._events[Ne])){switch(this.event=Ne,Oe){case 1:fe.call(this);break;case 2:fe.call(this,arguments[1]);break;case 3:fe.call(this,arguments[1],arguments[2]);break;default:for(Ge=new Array(Oe-1),Lt=1;Lt<Oe;Lt++)Ge[Lt-1]=arguments[Lt];fe.apply(this,Ge)}return!0}fe&&(fe=fe.slice())}if(fe&&fe.length){if(Oe>3)for(Ge=new Array(Oe-1),Lt=1;Lt<Oe;Lt++)Ge[Lt-1]=arguments[Lt];for(At=0,_t=fe.length;At<_t;At++)switch(this.event=Ne,Oe){case 1:fe[At].call(this);break;case 2:fe[At].call(this,arguments[1]);break;case 3:fe[At].call(this,arguments[1],arguments[2]);break;default:fe[At].apply(this,Ge)}return!0}if(!this.ignoreErrors&&!this._all&&"error"===Ne)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},Ye.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||se.call(this);var rt,Ge,_t,At,Lt,Ut,Ne=arguments[0],ht=this.wildcard;if("newListener"===Ne&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(ht&&(rt=Ne,"newListener"!==Ne&&"removeListener"!==Ne&&"object"==typeof Ne)){if(At=Ne.length,P)for(Lt=0;Lt<At;Lt++)if("symbol"==typeof Ne[Lt]){Ge=!0;break}Ge||(Ne=Ne.join(this.delimiter))}var wt,Oe=[],fe=arguments.length;if(this._all)for(Lt=0,At=this._all.length;Lt<At;Lt++)switch(this.event=Ne,fe){case 1:Oe.push(this._all[Lt].call(this,Ne));break;case 2:Oe.push(this._all[Lt].call(this,Ne,arguments[1]));break;case 3:Oe.push(this._all[Lt].call(this,Ne,arguments[1],arguments[2]));break;default:Oe.push(this._all[Lt].apply(this,arguments))}if(ht?Me.call(this,wt=[],rt,this.listenerTree,0):wt=this._events[Ne],"function"==typeof wt)switch(this.event=Ne,fe){case 1:Oe.push(wt.call(this));break;case 2:Oe.push(wt.call(this,arguments[1]));break;case 3:Oe.push(wt.call(this,arguments[1],arguments[2]));break;default:for(_t=new Array(fe-1),Ut=1;Ut<fe;Ut++)_t[Ut-1]=arguments[Ut];Oe.push(wt.apply(this,_t))}else if(wt&&wt.length){if(wt=wt.slice(),fe>3)for(_t=new Array(fe-1),Ut=1;Ut<fe;Ut++)_t[Ut-1]=arguments[Ut];for(Lt=0,At=wt.length;Lt<At;Lt++)switch(this.event=Ne,fe){case 1:Oe.push(wt[Lt].call(this));break;case 2:Oe.push(wt[Lt].call(this,arguments[1]));break;case 3:Oe.push(wt[Lt].call(this,arguments[1],arguments[2]));break;default:Oe.push(wt[Lt].apply(this,_t))}}else if(!this.ignoreErrors&&!this._all&&"error"===Ne)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(Oe)},Ye.prototype.on=function(Ne,ht,rt){return this._on(Ne,ht,!1,rt)},Ye.prototype.prependListener=function(Ne,ht,rt){return this._on(Ne,ht,!0,rt)},Ye.prototype.onAny=function(Ne){return this._onAny(Ne,!1)},Ye.prototype.prependAny=function(Ne){return this._onAny(Ne,!0)},Ye.prototype.addListener=Ye.prototype.on,Ye.prototype._onAny=function(Ne,ht){if("function"!=typeof Ne)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),ht?this._all.unshift(Ne):this._all.push(Ne),this},Ye.prototype._on=function(Ne,ht,rt,Ge){if("function"==typeof Ne)return this._onAny(Ne,ht),this;if("function"!=typeof ht)throw new Error("on only accepts instances of Function");this._events||se.call(this);var At,_t=this;return Ge!==D&&(ht=(At=Fe.call(this,Ne,ht,Ge))[0],_t=At[1]),this._newListener&&this.emit("newListener",Ne,ht),this.wildcard?(xe.call(this,Ne,ht,rt),_t):(this._events[Ne]?("function"==typeof this._events[Ne]&&(this._events[Ne]=[this._events[Ne]]),rt?this._events[Ne].unshift(ht):this._events[Ne].push(ht),!this._events[Ne].warned&&this._maxListeners>0&&this._events[Ne].length>this._maxListeners&&(this._events[Ne].warned=!0,W.call(this,this._events[Ne].length,Ne))):this._events[Ne]=ht,_t)},Ye.prototype.off=function(Ne,ht){if("function"!=typeof ht)throw new Error("removeListener only takes instances of Function");var rt,Ge=[];if(this.wildcard){var _t="string"==typeof Ne?Ne.split(this.delimiter):Ne.slice();if(!(Ge=Me.call(this,null,_t,this.listenerTree,0)))return this}else{if(!this._events[Ne])return this;Ge.push({_listeners:rt=this._events[Ne]})}for(var At=0;At<Ge.length;At++){var Lt=Ge[At];if(O(rt=Lt._listeners)){for(var Ut=-1,Oe=0,fe=rt.length;Oe<fe;Oe++)if(rt[Oe]===ht||rt[Oe].listener&&rt[Oe].listener===ht||rt[Oe]._origin&&rt[Oe]._origin===ht){Ut=Oe;break}if(Ut<0)continue;return this.wildcard?Lt._listeners.splice(Ut,1):this._events[Ne].splice(Ut,1),0===rt.length&&(this.wildcard?delete Lt._listeners:delete this._events[Ne]),this._removeListener&&this.emit("removeListener",Ne,ht),this}(rt===ht||rt.listener&&rt.listener===ht||rt._origin&&rt._origin===ht)&&(this.wildcard?delete Lt._listeners:delete this._events[Ne],this._removeListener&&this.emit("removeListener",Ne,ht))}return this.listenerTree&&Pe(this.listenerTree),this},Ye.prototype.offAny=function(Ne){var Ge,ht=0,rt=0;if(Ne&&this._all&&this._all.length>0){for(ht=0,rt=(Ge=this._all).length;ht<rt;ht++)if(Ne===Ge[ht])return Ge.splice(ht,1),this._removeListener&&this.emit("removeListenerAny",Ne),this}else{if(Ge=this._all,this._removeListener)for(ht=0,rt=Ge.length;ht<rt;ht++)this.emit("removeListenerAny",Ge[ht]);this._all=[]}return this},Ye.prototype.removeListener=Ye.prototype.off,Ye.prototype.removeAllListeners=function(Ne){if(Ne===D)return!this._events||se.call(this),this;if(this.wildcard){var Ge,ht=Me.call(this,null,Ne,this.listenerTree,0);if(!ht)return this;for(Ge=0;Ge<ht.length;Ge++)ht[Ge]._listeners=null;this.listenerTree&&Pe(this.listenerTree)}else this._events&&(this._events[Ne]=null);return this},Ye.prototype.listeners=function(Ne){var rt,Ge,_t,At,Lt,ht=this._events;if(Ne===D){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!ht)return[];for(At=(rt=ne(ht)).length,_t=[];At-- >0;)"function"==typeof(Ge=ht[rt[At]])?_t.push(Ge):_t.push.apply(_t,Ge);return _t}if(this.wildcard){if(!(Lt=this.listenerTree))return[];var Ut=[],Oe="string"==typeof Ne?Ne.split(this.delimiter):Ne.slice();return Me.call(this,Ut,Oe,Lt,0),Ut}return ht&&(Ge=ht[Ne])?"function"==typeof Ge?[Ge]:Ge:[]},Ye.prototype.eventNames=function(Ne){var ht=this._events;return this.wildcard?ue.call(this,this.listenerTree,[],null,Ne):ht?ne(ht):[]},Ye.prototype.listenerCount=function(Ne){return this.listeners(Ne).length},Ye.prototype.hasListeners=function(Ne){if(this.wildcard){var ht=[],rt="string"==typeof Ne?Ne.split(this.delimiter):Ne.slice();return Me.call(this,ht,rt,this.listenerTree,0),ht.length>0}var Ge=this._events,_t=this._all;return!!(_t&&_t.length||Ge&&(Ne===D?ne(Ge).length:Ge[Ne]))},Ye.prototype.listenersAny=function(){return this._all?this._all:[]},Ye.prototype.waitFor=function(Ne,ht){var rt=this,Ge=typeof ht;return"number"===Ge?ht={timeout:ht}:"function"===Ge&&(ht={filter:ht}),pe((ht=te(ht,{timeout:0,filter:D,handleError:!1,Promise,overload:!1},{filter:$,Promise:oe})).Promise,function(_t,At,Lt){function Ut(){var Oe=ht.filter;if(!Oe||Oe.apply(rt,arguments))if(rt.off(Ne,Ut),ht.handleError){var fe=arguments[0];fe?At(fe):_t(ae.apply(null,arguments).slice(1))}else _t(ae.apply(null,arguments))}Lt(function(){rt.off(Ne,Ut)}),rt._on(Ne,Ut,!1)},{timeout:ht.timeout,overload:ht.overload})};var vt=Ye.prototype;Object.defineProperties(Ye,{defaultMaxListeners:{get:function(){return vt._maxListeners},set:function(Ne){if("number"!=typeof Ne||Ne<0||Number.isNaN(Ne))throw TypeError("n must be a non-negative number");vt._maxListeners=Ne},enumerable:!0},once:{value:function lt(Ne,ht,rt){return pe((rt=te(rt,{Promise,timeout:0,overload:!1},{Promise:oe})).Promise,function(_t,At,Lt){var Ut;if("function"==typeof Ne.addEventListener)return Ut=function(){_t(ae.apply(null,arguments))},Lt(function(){Ne.removeEventListener(ht,Ut)}),void Ne.addEventListener(ht,Ut,{once:!0});var fe,Oe=function(){fe&&Ne.removeListener("error",fe),_t(ae.apply(null,arguments))};"error"!==ht&&(fe=function(wt){Ne.removeListener(ht,Oe),At(wt)},Ne.once("error",fe)),Lt(function(){fe&&Ne.removeListener("error",fe),Ne.removeListener(ht,Oe)}),Ne.once(ht,Oe)},{timeout:rt.timeout,overload:rt.overload})},writable:!0,configurable:!0}}),Object.defineProperties(vt,{_maxListeners:{value:10,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),(X=function(){return Ye}.call(we,U,we,He))!==D&&(He.exports=X)}()},9069:He=>{"use strict";var X,we="object"==typeof Reflect?Reflect:null,U=we&&"function"==typeof we.apply?we.apply:function(B,$,ie){return Function.prototype.apply.call(B,$,ie)};X=we&&"function"==typeof we.ownKeys?we.ownKeys:Object.getOwnPropertySymbols?function(B){return Object.getOwnPropertyNames(B).concat(Object.getOwnPropertySymbols(B))}:function(B){return Object.getOwnPropertyNames(B)};var V=Number.isNaN||function(B){return B!=B};function O(){O.init.call(this)}He.exports=O,He.exports.once=function _e(oe,B){return new Promise(function($,ie){function pe(Me){oe.removeListener(B,Be),ie(Me)}function Be(){"function"==typeof oe.removeListener&&oe.removeListener("error",pe),$([].slice.call(arguments))}te(oe,B,Be,{once:!0}),"error"!==B&&function Ee(oe,B,$){"function"==typeof oe.on&&te(oe,"error",B,$)}(oe,pe,{once:!0})})},O.EventEmitter=O,O.prototype._events=void 0,O.prototype._eventsCount=0,O.prototype._maxListeners=void 0;var H=10;function L(oe){if("function"!=typeof oe)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof oe)}function P(oe){return void 0===oe._maxListeners?O.defaultMaxListeners:oe._maxListeners}function q(oe,B,$,ie){var pe,Be,Me;if(L($),void 0===(Be=oe._events)?(Be=oe._events=Object.create(null),oe._eventsCount=0):(void 0!==Be.newListener&&(oe.emit("newListener",B,$.listener?$.listener:$),Be=oe._events),Me=Be[B]),void 0===Me)Me=Be[B]=$,++oe._eventsCount;else if("function"==typeof Me?Me=Be[B]=ie?[$,Me]:[Me,$]:ie?Me.unshift($):Me.push($),(pe=P(oe))>0&&Me.length>pe&&!Me.warned){Me.warned=!0;var xe=new Error("Possible EventEmitter memory leak detected. "+Me.length+" "+String(B)+" listeners added. Use emitter.setMaxListeners() to increase limit");xe.name="MaxListenersExceededWarning",xe.emitter=oe,xe.type=B,xe.count=Me.length,function D(oe){console&&console.warn&&console.warn(oe)}(xe)}return oe}function ee(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function K(oe,B,$){var ie={fired:!1,wrapFn:void 0,target:oe,type:B,listener:$},pe=ee.bind(ie);return pe.listener=$,ie.wrapFn=pe,pe}function ne(oe,B,$){var ie=oe._events;if(void 0===ie)return[];var pe=ie[B];return void 0===pe?[]:"function"==typeof pe?$?[pe.listener||pe]:[pe]:$?function ae(oe){for(var B=new Array(oe.length),$=0;$<B.length;++$)B[$]=oe[$].listener||oe[$];return B}(pe):J(pe,pe.length)}function se(oe){var B=this._events;if(void 0!==B){var $=B[oe];if("function"==typeof $)return 1;if(void 0!==$)return $.length}return 0}function J(oe,B){for(var $=new Array(B),ie=0;ie<B;++ie)$[ie]=oe[ie];return $}function te(oe,B,$,ie){if("function"==typeof oe.on)ie.once?oe.once(B,$):oe.on(B,$);else{if("function"!=typeof oe.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof oe);oe.addEventListener(B,function pe(Be){ie.once&&oe.removeEventListener(B,pe),$(Be)})}}Object.defineProperty(O,"defaultMaxListeners",{enumerable:!0,get:function(){return H},set:function(oe){if("number"!=typeof oe||oe<0||V(oe))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+oe+".");H=oe}}),O.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},O.prototype.setMaxListeners=function(B){if("number"!=typeof B||B<0||V(B))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+B+".");return this._maxListeners=B,this},O.prototype.getMaxListeners=function(){return P(this)},O.prototype.emit=function(B){for(var $=[],ie=1;ie<arguments.length;ie++)$.push(arguments[ie]);var pe="error"===B,Be=this._events;if(void 0!==Be)pe=pe&&void 0===Be.error;else if(!pe)return!1;if(pe){var Me;if($.length>0&&(Me=$[0]),Me instanceof Error)throw Me;var xe=new Error("Unhandled error."+(Me?" ("+Me.message+")":""));throw xe.context=Me,xe}var ue=Be[B];if(void 0===ue)return!1;if("function"==typeof ue)U(ue,this,$);else{var Pe=ue.length,ot=J(ue,Pe);for(ie=0;ie<Pe;++ie)U(ot[ie],this,$)}return!0},O.prototype.on=O.prototype.addListener=function(B,$){return q(this,B,$,!1)},O.prototype.prependListener=function(B,$){return q(this,B,$,!0)},O.prototype.once=function(B,$){return L($),this.on(B,K(this,B,$)),this},O.prototype.prependOnceListener=function(B,$){return L($),this.prependListener(B,K(this,B,$)),this},O.prototype.off=O.prototype.removeListener=function(B,$){var ie,pe,Be,Me,xe;if(L($),void 0===(pe=this._events))return this;if(void 0===(ie=pe[B]))return this;if(ie===$||ie.listener===$)0==--this._eventsCount?this._events=Object.create(null):(delete pe[B],pe.removeListener&&this.emit("removeListener",B,ie.listener||$));else if("function"!=typeof ie){for(Be=-1,Me=ie.length-1;Me>=0;Me--)if(ie[Me]===$||ie[Me].listener===$){xe=ie[Me].listener,Be=Me;break}if(Be<0)return this;0===Be?ie.shift():function W(oe,B){for(;B+1<oe.length;B++)oe[B]=oe[B+1];oe.pop()}(ie,Be),1===ie.length&&(pe[B]=ie[0]),void 0!==pe.removeListener&&this.emit("removeListener",B,xe||$)}return this},O.prototype.removeAllListeners=function(B){var $,ie,pe;if(void 0===(ie=this._events))return this;if(void 0===ie.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==ie[B]&&(0==--this._eventsCount?this._events=Object.create(null):delete ie[B]),this;if(0===arguments.length){var Me,Be=Object.keys(ie);for(pe=0;pe<Be.length;++pe)"removeListener"!==(Me=Be[pe])&&this.removeAllListeners(Me);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof($=ie[B]))this.removeListener(B,$);else if(void 0!==$)for(pe=$.length-1;pe>=0;pe--)this.removeListener(B,$[pe]);return this},O.prototype.listeners=function(B){return ne(this,B,!0)},O.prototype.rawListeners=function(B){return ne(this,B,!1)},O.listenerCount=function(oe,B){return"function"==typeof oe.listenerCount?oe.listenerCount(B):se.call(oe,B)},O.prototype.listenerCount=se,O.prototype.eventNames=function(){return this._eventsCount>0?X(this._events):[]}},2698:He=>{He.exports={nodeXAttribute:"x",nodeYAttribute:"y",isNodeFixed:"fixed",shouldSkipNode:null,shouldSkipEdge:null,settings:{attraction:5e-4,repulsion:.1,gravity:1e-4,inertia:.6,maxMove:200}}},4570:(He,we)=>{we.assignLayoutChanges=function(U,X,D){const{nodeXAttribute:V,nodeYAttribute:O}=D;U.updateEachNodeAttributes((H,L)=>{const P=X[H];return!P||P.fixed||(L[V]=P.x,L[O]=P.y),L},{attributes:["x","y"]})},we.collectLayoutChanges=function(U){const X={};for(const D in U){const V=U[D];X[D]={x:V.x,y:V.y}}return X}},8031:(He,we,U)=>{const{createNodeValueGetter:X,createEdgeValueGetter:D}=U(2954);He.exports=function(O,H,L){const{nodeXAttribute:P,nodeYAttribute:q}=L,{attraction:ee,repulsion:K,gravity:ne,inertia:se,maxMove:J}=L.settings;let{shouldSkipNode:W,shouldSkipEdge:ae,isNodeFixed:_e}=L;_e=X(_e),W=X(W,!1),ae=D(ae,!1);const Ee=O.filterNodes((B,$)=>!W.fromEntry(B,$)),te=Ee.length;for(let B=0;B<te;B++){const $=Ee[B],ie=O.getNodeAttributes($),pe=H[$];H[$]=pe?{dx:pe.dx*se,dy:pe.dy*se,x:ie[P]||0,y:ie[q]||0}:{dx:0,dy:0,x:ie[P]||0,y:ie[q]||0}}if(K)for(let B=0;B<te;B++){const ie=H[Ee[B]];for(let pe=B+1;pe<te;pe++){const Me=H[Ee[pe]],xe=Me.x-ie.x,ue=Me.y-ie.y,Pe=Math.sqrt(xe*xe+ue*ue)||1,ot=K/Pe*xe,Fe=K/Pe*ue;ie.dx-=ot,ie.dy-=Fe,Me.dx+=ot,Me.dy+=Fe}}if(ee&&O.forEachEdge((B,$,ie,pe,Be,Me,xe)=>{if(ie===pe||W.fromEntry(ie,Be)||W.fromEntry(pe,Me)||ae.fromEntry(B,$,ie,pe,Be,Me,xe))return;const ue=H[ie],Pe=H[pe],ot=Pe.x-ue.x,Fe=Pe.y-ue.y,Ye=Math.sqrt(ot*ot+Fe*Fe)||1,lt=ee*Ye*ot,vt=ee*Ye*Fe;ue.dx+=lt,ue.dy+=vt,Pe.dx-=lt,Pe.dy-=vt}),ne)for(let B=0;B<te;B++){const $=Ee[B],ie=H[$],{x:pe,y:Be}=ie,Me=Math.sqrt(pe*pe+Be*Be)||1;H[$].dx-=pe*ne*Me,H[$].dy-=Be*ne*Me}for(let B=0;B<te;B++){const $=Ee[B],ie=H[$],pe=Math.sqrt(ie.dx*ie.dx+ie.dy*ie.dy);pe>J&&(ie.dx*=J/pe,ie.dy*=J/pe),_e.fromGraph(O,$)?ie.fixed=!0:(ie.x+=ie.dx,ie.y+=ie.dy,ie.fixed=!1)}return{converged:!1}}},3424:(He,we,U)=>{const X=U(6714),D=U(8487),V=U(8031),O=U(4570),H=U(2698);function L(P,q){if(!X(P))throw new Error("graphology-layout-force/worker: the given graph is not a valid graphology instance.");q=D(q,H),this.callbacks={},q.onConverged&&(this.callbacks.onConverged=q.onConverged),this.graph=P,this.params=q,this.nodeStates={},this.frameID=null,this.running=!1,this.killed=!1}L.prototype.isRunning=function(){return this.running},L.prototype.runFrame=function(){let{converged:P}=V(this.graph,this.nodeStates,this.params);O.assignLayoutChanges(this.graph,this.nodeStates,this.params),P=!1,P?(this.callbacks.onConverged&&this.callbacks.onConverged(),this.stop()):this.frameID=window.requestAnimationFrame(()=>this.runFrame())},L.prototype.stop=function(){return this.running=!1,null!==this.frameID&&(window.cancelAnimationFrame(this.frameID),this.frameID=null),this},L.prototype.start=function(){if(this.killed)throw new Error("graphology-layout-force/worker.start: layout was killed.");this.running||(this.running=!0,this.runFrame())},L.prototype.kill=function(){this.stop(),delete this.nodeStates,this.killed=!0},He.exports=L},8487:He=>{function we(X){return!X||"object"!=typeof X||"function"==typeof X||Array.isArray(X)||X instanceof Set||X instanceof Map||X instanceof RegExp||X instanceof Date}He.exports=function U(X,D){X=X||{};var V={};for(var O in D){var H=X[O],L=D[O];V[O]=we(L)?void 0===H?L:H:U(H,L)}return V}},2954:(He,we)=>{function U(V){return"number"!=typeof V||isNaN(V)?1:V}function D(V,O){var H={},L=function(ee){return typeof ee>"u"?O:ee};"function"==typeof O&&(L=O);var P=function(ee){return L(ee[V])},q=function(){return L(void 0)};return"string"==typeof V?(H.fromAttributes=P,H.fromGraph=function(ee,K){return P(ee.getEdgeAttributes(K))},H.fromEntry=function(ee,K){return P(K)},H.fromPartialEntry=H.fromEntry,H.fromMinimalEntry=H.fromEntry):"function"==typeof V?(H.fromAttributes=function(){throw new Error("graphology-utils/getters/createEdgeValueGetter: irrelevant usage.")},H.fromGraph=function(ee,K){var ne=ee.extremities(K);return L(V(K,ee.getEdgeAttributes(K),ne[0],ne[1],ee.getNodeAttributes(ne[0]),ee.getNodeAttributes(ne[1]),ee.isUndirected(K)))},H.fromEntry=function(ee,K,ne,se,J,W,ae){return L(V(ee,K,ne,se,J,W,ae))},H.fromPartialEntry=function(ee,K,ne,se){return L(V(ee,K,ne,se))},H.fromMinimalEntry=function(ee,K){return L(V(ee,K))}):(H.fromAttributes=q,H.fromGraph=q,H.fromEntry=q,H.fromMinimalEntry=q),H}we.createNodeValueGetter=function X(V,O){var H={},L=function(ee){return typeof ee>"u"?O:ee};"function"==typeof O&&(L=O);var P=function(ee){return L(ee[V])},q=function(){return L(void 0)};return"string"==typeof V?(H.fromAttributes=P,H.fromGraph=function(ee,K){return P(ee.getNodeAttributes(K))},H.fromEntry=function(ee,K){return P(K)}):"function"==typeof V?(H.fromAttributes=function(){throw new Error("graphology-utils/getters/createNodeValueGetter: irrelevant usage.")},H.fromGraph=function(ee,K){return L(V(K,ee.getNodeAttributes(K)))},H.fromEntry=function(ee,K){return L(V(ee,K))}):(H.fromAttributes=q,H.fromGraph=q,H.fromEntry=q),H},we.createEdgeValueGetter=D,we.createEdgeWeightGetter=function(V){return D(V,U)}},6714:He=>{He.exports=function(U){return null!==U&&"object"==typeof U&&"function"==typeof U.addUndirectedEdgeWithKey&&"function"==typeof U.dropNode&&"boolean"==typeof U.multi}},5595:function(He){He.exports=function(){"use strict";function we(Ze){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(pt){return typeof pt}:function(pt){return pt&&"function"==typeof Symbol&&pt.constructor===Symbol&&pt!==Symbol.prototype?"symbol":typeof pt})(Ze)}function U(Ze,pt){Ze.prototype=Object.create(pt.prototype),Ze.prototype.constructor=Ze,D(Ze,pt)}function X(Ze){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(pt){return pt.__proto__||Object.getPrototypeOf(pt)})(Ze)}function D(Ze,pt){return(D=Object.setPrototypeOf||function(st,ge){return st.__proto__=ge,st})(Ze,pt)}function V(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function O(Ze,pt,st){return(O=V()?Reflect.construct:function(ge,Re,tt){var Mt=[null];Mt.push.apply(Mt,Re);var Yt=new(Function.bind.apply(ge,Mt));return tt&&D(Yt,tt.prototype),Yt}).apply(null,arguments)}function H(Ze){var pt="function"==typeof Map?new Map:void 0;return H=function(st){if(null===st||-1===Function.toString.call(st).indexOf("[native code]"))return st;if("function"!=typeof st)throw new TypeError("Super expression must either be null or a function");if(void 0!==pt){if(pt.has(st))return pt.get(st);pt.set(st,Re)}function Re(){return O(st,arguments,X(this).constructor)}return Re.prototype=Object.create(st.prototype,{constructor:{value:Re,enumerable:!1,writable:!0,configurable:!0}}),D(Re,st)},H(Ze)}function L(Ze){if(void 0===Ze)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ze}var P=function(){for(var Ze=arguments[0],pt=1,st=arguments.length;pt<st;pt++)if(arguments[pt])for(var ge in arguments[pt])Ze[ge]=arguments[pt][ge];return Ze};function q(Ze,pt,st,ge){var Re=Ze._nodes.get(pt),tt=null;return Re?tt="mixed"===ge?Re.out&&Re.out[st]||Re.undirected&&Re.undirected[st]:"directed"===ge?Re.out&&Re.out[st]:Re.undirected&&Re.undirected[st]:tt}function ee(Ze){return null!==Ze&&"object"===we(Ze)&&"function"==typeof Ze.addUndirectedEdgeWithKey&&"function"==typeof Ze.dropNode}function K(Ze){return"object"===we(Ze)&&null!==Ze&&Ze.constructor===Object}function ne(Ze){var pt;for(pt in Ze)return!1;return!0}function se(Ze,pt,st){Object.defineProperty(Ze,pt,{enumerable:!1,configurable:!1,writable:!0,value:st})}function J(Ze,pt,st){var ge={enumerable:!0,configurable:!0};"function"==typeof st?ge.get=st:(ge.value=st,ge.writable=!1),Object.defineProperty(Ze,pt,ge)}function W(Ze){return!(!K(Ze)||Ze.attributes&&!Array.isArray(Ze.attributes))}"function"==typeof Object.assign&&(P=Object.assign);var ae,_e={exports:{}},Ee="object"==typeof Reflect?Reflect:null,te=Ee&&"function"==typeof Ee.apply?Ee.apply:function(Ze,pt,st){return Function.prototype.apply.call(Ze,pt,st)};ae=Ee&&"function"==typeof Ee.ownKeys?Ee.ownKeys:Object.getOwnPropertySymbols?function(Ze){return Object.getOwnPropertyNames(Ze).concat(Object.getOwnPropertySymbols(Ze))}:function(Ze){return Object.getOwnPropertyNames(Ze)};var oe=Number.isNaN||function(Ze){return Ze!=Ze};function B(){B.init.call(this)}_e.exports=B,_e.exports.once=function(Ze,pt){return new Promise(function(st,ge){function Re(Mt){Ze.removeListener(pt,tt),ge(Mt)}function tt(){"function"==typeof Ze.removeListener&&Ze.removeListener("error",Re),st([].slice.call(arguments))}var Mt;Fe(Ze,pt,tt,{once:!0}),"error"!==pt&&("function"==typeof(Mt=Ze).on&&Fe(Mt,"error",Re,{once:!0}))})},B.EventEmitter=B,B.prototype._events=void 0,B.prototype._eventsCount=0,B.prototype._maxListeners=void 0;var $=10;function ie(Ze){if("function"!=typeof Ze)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof Ze)}function pe(Ze){return void 0===Ze._maxListeners?B.defaultMaxListeners:Ze._maxListeners}function Be(Ze,pt,st,ge){var Re,tt,Mt;if(ie(st),void 0===(tt=Ze._events)?(tt=Ze._events=Object.create(null),Ze._eventsCount=0):(void 0!==tt.newListener&&(Ze.emit("newListener",pt,st.listener?st.listener:st),tt=Ze._events),Mt=tt[pt]),void 0===Mt)Mt=tt[pt]=st,++Ze._eventsCount;else if("function"==typeof Mt?Mt=tt[pt]=ge?[st,Mt]:[Mt,st]:ge?Mt.unshift(st):Mt.push(st),(Re=pe(Ze))>0&&Mt.length>Re&&!Mt.warned){Mt.warned=!0;var Tn=new Error("Possible EventEmitter memory leak detected. "+Mt.length+" "+String(pt)+" listeners added. Use emitter.setMaxListeners() to increase limit");Tn.name="MaxListenersExceededWarning",Tn.emitter=Ze,Tn.type=pt,Tn.count=Mt.length,console&&console.warn&&console.warn(Tn)}return Ze}function Me(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function xe(Ze,pt,st){var ge={fired:!1,wrapFn:void 0,target:Ze,type:pt,listener:st},Re=Me.bind(ge);return Re.listener=st,ge.wrapFn=Re,Re}function ue(Ze,pt,st){var ge=Ze._events;if(void 0===ge)return[];var Re=ge[pt];return void 0===Re?[]:"function"==typeof Re?st?[Re.listener||Re]:[Re]:st?function(tt){for(var Mt=new Array(tt.length),Yt=0;Yt<Mt.length;++Yt)Mt[Yt]=tt[Yt].listener||tt[Yt];return Mt}(Re):ot(Re,Re.length)}function Pe(Ze){var pt=this._events;if(void 0!==pt){var st=pt[Ze];if("function"==typeof st)return 1;if(void 0!==st)return st.length}return 0}function ot(Ze,pt){for(var st=new Array(pt),ge=0;ge<pt;++ge)st[ge]=Ze[ge];return st}function Fe(Ze,pt,st,ge){if("function"==typeof Ze.on)ge.once?Ze.once(pt,st):Ze.on(pt,st);else{if("function"!=typeof Ze.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof Ze);Ze.addEventListener(pt,function Re(tt){ge.once&&Ze.removeEventListener(pt,Re),st(tt)})}}function Ye(Ze){if("function"!=typeof Ze)throw new Error("obliterator/iterator: expecting a function!");this.next=Ze}Object.defineProperty(B,"defaultMaxListeners",{enumerable:!0,get:function(){return $},set:function(Ze){if("number"!=typeof Ze||Ze<0||oe(Ze))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+Ze+".");$=Ze}}),B.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},B.prototype.setMaxListeners=function(Ze){if("number"!=typeof Ze||Ze<0||oe(Ze))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+Ze+".");return this._maxListeners=Ze,this},B.prototype.getMaxListeners=function(){return pe(this)},B.prototype.emit=function(Ze){for(var pt=[],st=1;st<arguments.length;st++)pt.push(arguments[st]);var ge="error"===Ze,Re=this._events;if(void 0!==Re)ge=ge&&void 0===Re.error;else if(!ge)return!1;if(ge){var tt;if(pt.length>0&&(tt=pt[0]),tt instanceof Error)throw tt;var Mt=new Error("Unhandled error."+(tt?" ("+tt.message+")":""));throw Mt.context=tt,Mt}var Yt=Re[Ze];if(void 0===Yt)return!1;if("function"==typeof Yt)te(Yt,this,pt);else{var Tn=Yt.length,wi=ot(Yt,Tn);for(st=0;st<Tn;++st)te(wi[st],this,pt)}return!0},B.prototype.on=B.prototype.addListener=function(Ze,pt){return Be(this,Ze,pt,!1)},B.prototype.prependListener=function(Ze,pt){return Be(this,Ze,pt,!0)},B.prototype.once=function(Ze,pt){return ie(pt),this.on(Ze,xe(this,Ze,pt)),this},B.prototype.prependOnceListener=function(Ze,pt){return ie(pt),this.prependListener(Ze,xe(this,Ze,pt)),this},B.prototype.off=B.prototype.removeListener=function(Ze,pt){var st,ge,Re,tt,Mt;if(ie(pt),void 0===(ge=this._events))return this;if(void 0===(st=ge[Ze]))return this;if(st===pt||st.listener===pt)0==--this._eventsCount?this._events=Object.create(null):(delete ge[Ze],ge.removeListener&&this.emit("removeListener",Ze,st.listener||pt));else if("function"!=typeof st){for(Re=-1,tt=st.length-1;tt>=0;tt--)if(st[tt]===pt||st[tt].listener===pt){Mt=st[tt].listener,Re=tt;break}if(Re<0)return this;0===Re?st.shift():function(Yt,Tn){for(;Tn+1<Yt.length;Tn++)Yt[Tn]=Yt[Tn+1];Yt.pop()}(st,Re),1===st.length&&(ge[Ze]=st[0]),void 0!==ge.removeListener&&this.emit("removeListener",Ze,Mt||pt)}return this},B.prototype.removeAllListeners=function(Ze){var pt,st,ge;if(void 0===(st=this._events))return this;if(void 0===st.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==st[Ze]&&(0==--this._eventsCount?this._events=Object.create(null):delete st[Ze]),this;if(0===arguments.length){var Re,tt=Object.keys(st);for(ge=0;ge<tt.length;++ge)"removeListener"!==(Re=tt[ge])&&this.removeAllListeners(Re);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(pt=st[Ze]))this.removeListener(Ze,pt);else if(void 0!==pt)for(ge=pt.length-1;ge>=0;ge--)this.removeListener(Ze,pt[ge]);return this},B.prototype.listeners=function(Ze){return ue(this,Ze,!0)},B.prototype.rawListeners=function(Ze){return ue(this,Ze,!1)},B.listenerCount=function(Ze,pt){return"function"==typeof Ze.listenerCount?Ze.listenerCount(pt):Pe.call(Ze,pt)},B.prototype.listenerCount=Pe,B.prototype.eventNames=function(){return this._eventsCount>0?ae(this._events):[]},typeof Symbol<"u"&&(Ye.prototype[Symbol.iterator]=function(){return this}),Ye.of=function(){var Ze=arguments,pt=Ze.length,st=0;return new Ye(function(){return st>=pt?{done:!0}:{done:!1,value:Ze[st++]}})},Ye.empty=function(){return new Ye(function(){return{done:!0}})},Ye.fromSequence=function(Ze){var pt=0,st=Ze.length;return new Ye(function(){return pt>=st?{done:!0}:{done:!1,value:Ze[pt++]}})},Ye.is=function(Ze){return Ze instanceof Ye||"object"==typeof Ze&&null!==Ze&&"function"==typeof Ze.next};var lt=Ye,vt={};vt.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u",vt.SYMBOL_SUPPORT=typeof Symbol<"u";var vn=lt,ht=vt.ARRAY_BUFFER_SUPPORT,rt=vt.SYMBOL_SUPPORT,Ge=function(Ze){var st,pt="string"==typeof(st=Ze)||Array.isArray(st)||ht&&ArrayBuffer.isView(st)?vn.fromSequence(st):"object"!=typeof st||null===st?null:rt&&"function"==typeof st[Symbol.iterator]?st[Symbol.iterator]():"function"==typeof st.next?st:null;if(!pt)throw new Error("obliterator: target is not iterable nor a valid iterator.");return pt},_t=Ge,At=function(Ze,pt){for(var st,ge=arguments.length>1?pt:1/0,Re=ge!==1/0?new Array(ge):[],tt=0,Mt=_t(Ze);;){if(tt===ge)return Re;if((st=Mt.next()).done)return tt!==pt&&(Re.length=tt),Re;Re[tt++]=st.value}},Lt=function(Ze){function pt(st){var ge;return(ge=Ze.call(this)||this).name="GraphError",ge.message=st,ge}return U(pt,Ze),pt}(H(Error)),Ut=function(Ze){function pt(st){var ge;return(ge=Ze.call(this,st)||this).name="InvalidArgumentsGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(L(ge),pt.prototype.constructor),ge}return U(pt,Ze),pt}(Lt),Oe=function(Ze){function pt(st){var ge;return(ge=Ze.call(this,st)||this).name="NotFoundGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(L(ge),pt.prototype.constructor),ge}return U(pt,Ze),pt}(Lt),fe=function(Ze){function pt(st){var ge;return(ge=Ze.call(this,st)||this).name="UsageGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(L(ge),pt.prototype.constructor),ge}return U(pt,Ze),pt}(Lt);function wt(Ze,pt){this.key=Ze,this.attributes=pt,this.clear()}function kt(Ze,pt){this.key=Ze,this.attributes=pt,this.clear()}function Un(Ze,pt){this.key=Ze,this.attributes=pt,this.clear()}function ri(Ze,pt,st,ge,Re){this.key=pt,this.attributes=Re,this.undirected=Ze,this.source=st,this.target=ge}function Et(Ze,pt,st,ge,Re,tt,Mt){var Yt,Tn,wi,si;if(ge=""+ge,0===st){if(!(Yt=Ze._nodes.get(ge)))throw new Oe("Graph.".concat(pt,': could not find the "').concat(ge,'" node in the graph.'));wi=Re,si=tt}else if(3===st){if(!(Tn=Ze._edges.get(Re=""+Re)))throw new Oe("Graph.".concat(pt,': could not find the "').concat(Re,'" edge in the graph.'));var pi=Tn.source.key,yr=Tn.target.key;if(ge===pi)Yt=Tn.target;else{if(ge!==yr)throw new Oe("Graph.".concat(pt,': the "').concat(ge,'" node is not attached to the "').concat(Re,'" edge (').concat(pi,", ").concat(yr,")."));Yt=Tn.source}wi=tt,si=Mt}else{if(!(Tn=Ze._edges.get(ge)))throw new Oe("Graph.".concat(pt,': could not find the "').concat(ge,'" edge in the graph.'));Yt=1===st?Tn.source:Tn.target,wi=Re,si=tt}return[Yt,wi,si]}wt.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.in={},this.out={},this.undirected={}},kt.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.in={},this.out={}},Un.prototype.clear=function(){this.undirectedDegree=0,this.undirected={}},ri.prototype.attach=function(){var Ze="out",pt="in";this.undirected&&(Ze=pt="undirected");var st=this.source.key,ge=this.target.key;this.source[Ze][ge]=this,this.undirected&&st===ge||(this.target[pt][st]=this)},ri.prototype.attachMulti=function(){var Ze="out",pt="in",st=this.source.key,ge=this.target.key;this.undirected&&(Ze=pt="undirected");var Re=this.source[Ze],tt=Re[ge];if(void 0===tt)return Re[ge]=this,void(this.undirected&&st===ge||(this.target[pt][st]=this));tt.previous=this,this.next=tt,Re[ge]=this,this.target[pt][st]=this},ri.prototype.detach=function(){var Ze=this.source.key,st="out",ge="in";this.undirected&&(st=ge="undirected"),delete this.source[st][this.target.key],delete this.target[ge][Ze]},ri.prototype.detachMulti=function(){var Ze=this.source.key,pt=this.target.key,st="out",ge="in";this.undirected&&(st=ge="undirected"),void 0===this.previous?void 0===this.next?(delete this.source[st][pt],delete this.target[ge][Ze]):(this.next.previous=void 0,this.source[st][pt]=this.next,this.target[ge][Ze]=this.next):(this.previous.next=this.next,void 0!==this.next&&(this.next.previous=this.previous))};var Ot=[{name:function(Ze){return"get".concat(Ze,"Attribute")},attacher:function(Ze,pt,st){Ze.prototype[pt]=function(ge,Re,tt){var Mt=Et(this,pt,st,ge,Re,tt);return Mt[0].attributes[Mt[1]]}}},{name:function(Ze){return"get".concat(Ze,"Attributes")},attacher:function(Ze,pt,st){Ze.prototype[pt]=function(ge,Re){return Et(this,pt,st,ge,Re)[0].attributes}}},{name:function(Ze){return"has".concat(Ze,"Attribute")},attacher:function(Ze,pt,st){Ze.prototype[pt]=function(ge,Re,tt){var Mt=Et(this,pt,st,ge,Re,tt);return Mt[0].attributes.hasOwnProperty(Mt[1])}}},{name:function(Ze){return"set".concat(Ze,"Attribute")},attacher:function(Ze,pt,st){Ze.prototype[pt]=function(ge,Re,tt,Mt){var Yt=Et(this,pt,st,ge,Re,tt,Mt),Tn=Yt[0],wi=Yt[1];return Tn.attributes[wi]=Yt[2],this.emit("nodeAttributesUpdated",{key:Tn.key,type:"set",attributes:Tn.attributes,name:wi}),this}}},{name:function(Ze){return"update".concat(Ze,"Attribute")},attacher:function(Ze,pt,st){Ze.prototype[pt]=function(ge,Re,tt,Mt){var Yt=Et(this,pt,st,ge,Re,tt,Mt),Tn=Yt[0],wi=Yt[1],si=Yt[2];if("function"!=typeof si)throw new Ut("Graph.".concat(pt,": updater should be a function."));var pi=Tn.attributes,yr=si(pi[wi]);return pi[wi]=yr,this.emit("nodeAttributesUpdated",{key:Tn.key,type:"set",attributes:Tn.attributes,name:wi}),this}}},{name:function(Ze){return"remove".concat(Ze,"Attribute")},attacher:function(Ze,pt,st){Ze.prototype[pt]=function(ge,Re,tt){var Mt=Et(this,pt,st,ge,Re,tt),Yt=Mt[0],Tn=Mt[1];return delete Yt.attributes[Tn],this.emit("nodeAttributesUpdated",{key:Yt.key,type:"remove",attributes:Yt.attributes,name:Tn}),this}}},{name:function(Ze){return"replace".concat(Ze,"Attributes")},attacher:function(Ze,pt,st){Ze.prototype[pt]=function(ge,Re,tt){var Mt=Et(this,pt,st,ge,Re,tt),Yt=Mt[0],Tn=Mt[1];if(!K(Tn))throw new Ut("Graph.".concat(pt,": provided attributes are not a plain object."));return Yt.attributes=Tn,this.emit("nodeAttributesUpdated",{key:Yt.key,type:"replace",attributes:Yt.attributes}),this}}},{name:function(Ze){return"merge".concat(Ze,"Attributes")},attacher:function(Ze,pt,st){Ze.prototype[pt]=function(ge,Re,tt){var Mt=Et(this,pt,st,ge,Re,tt),Yt=Mt[0],Tn=Mt[1];if(!K(Tn))throw new Ut("Graph.".concat(pt,": provided attributes are not a plain object."));return P(Yt.attributes,Tn),this.emit("nodeAttributesUpdated",{key:Yt.key,type:"merge",attributes:Yt.attributes,data:Tn}),this}}},{name:function(Ze){return"update".concat(Ze,"Attributes")},attacher:function(Ze,pt,st){Ze.prototype[pt]=function(ge,Re,tt){var Mt=Et(this,pt,st,ge,Re,tt),Yt=Mt[0],Tn=Mt[1];if("function"!=typeof Tn)throw new Ut("Graph.".concat(pt,": provided updater is not a function."));return Yt.attributes=Tn(Yt.attributes),this.emit("nodeAttributesUpdated",{key:Yt.key,type:"update",attributes:Yt.attributes}),this}}}],fn=[{name:function(Ze){return"get".concat(Ze,"Attribute")},attacher:function(Ze,pt,st){Ze.prototype[pt]=function(ge,Re){var tt;if("mixed"!==this.type&&"mixed"!==st&&st!==this.type)throw new fe("Graph.".concat(pt,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new fe("Graph.".concat(pt,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Mt=""+ge,Yt=""+Re;if(Re=arguments[2],!(tt=q(this,Mt,Yt,st)))throw new Oe("Graph.".concat(pt,': could not find an edge for the given path ("').concat(Mt,'" - "').concat(Yt,'").'))}else{if("mixed"!==st)throw new fe("Graph.".concat(pt,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(tt=this._edges.get(ge=""+ge)))throw new Oe("Graph.".concat(pt,': could not find the "').concat(ge,'" edge in the graph.'))}return tt.attributes[Re]}}},{name:function(Ze){return"get".concat(Ze,"Attributes")},attacher:function(Ze,pt,st){Ze.prototype[pt]=function(ge){var Re;if("mixed"!==this.type&&"mixed"!==st&&st!==this.type)throw new fe("Graph.".concat(pt,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>1){if(this.multi)throw new fe("Graph.".concat(pt,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var tt=""+ge,Mt=""+arguments[1];if(!(Re=q(this,tt,Mt,st)))throw new Oe("Graph.".concat(pt,': could not find an edge for the given path ("').concat(tt,'" - "').concat(Mt,'").'))}else{if("mixed"!==st)throw new fe("Graph.".concat(pt,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(Re=this._edges.get(ge=""+ge)))throw new Oe("Graph.".concat(pt,': could not find the "').concat(ge,'" edge in the graph.'))}return Re.attributes}}},{name:function(Ze){return"has".concat(Ze,"Attribute")},attacher:function(Ze,pt,st){Ze.prototype[pt]=function(ge,Re){var tt;if("mixed"!==this.type&&"mixed"!==st&&st!==this.type)throw new fe("Graph.".concat(pt,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new fe("Graph.".concat(pt,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Mt=""+ge,Yt=""+Re;if(Re=arguments[2],!(tt=q(this,Mt,Yt,st)))throw new Oe("Graph.".concat(pt,': could not find an edge for the given path ("').concat(Mt,'" - "').concat(Yt,'").'))}else{if("mixed"!==st)throw new fe("Graph.".concat(pt,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(tt=this._edges.get(ge=""+ge)))throw new Oe("Graph.".concat(pt,': could not find the "').concat(ge,'" edge in the graph.'))}return tt.attributes.hasOwnProperty(Re)}}},{name:function(Ze){return"set".concat(Ze,"Attribute")},attacher:function(Ze,pt,st){Ze.prototype[pt]=function(ge,Re,tt){var Mt;if("mixed"!==this.type&&"mixed"!==st&&st!==this.type)throw new fe("Graph.".concat(pt,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new fe("Graph.".concat(pt,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Yt=""+ge,Tn=""+Re;if(Re=arguments[2],tt=arguments[3],!(Mt=q(this,Yt,Tn,st)))throw new Oe("Graph.".concat(pt,': could not find an edge for the given path ("').concat(Yt,'" - "').concat(Tn,'").'))}else{if("mixed"!==st)throw new fe("Graph.".concat(pt,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(Mt=this._edges.get(ge=""+ge)))throw new Oe("Graph.".concat(pt,': could not find the "').concat(ge,'" edge in the graph.'))}return Mt.attributes[Re]=tt,this.emit("edgeAttributesUpdated",{key:Mt.key,type:"set",attributes:Mt.attributes,name:Re}),this}}},{name:function(Ze){return"update".concat(Ze,"Attribute")},attacher:function(Ze,pt,st){Ze.prototype[pt]=function(ge,Re,tt){var Mt;if("mixed"!==this.type&&"mixed"!==st&&st!==this.type)throw new fe("Graph.".concat(pt,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new fe("Graph.".concat(pt,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Yt=""+ge,Tn=""+Re;if(Re=arguments[2],tt=arguments[3],!(Mt=q(this,Yt,Tn,st)))throw new Oe("Graph.".concat(pt,': could not find an edge for the given path ("').concat(Yt,'" - "').concat(Tn,'").'))}else{if("mixed"!==st)throw new fe("Graph.".concat(pt,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(Mt=this._edges.get(ge=""+ge)))throw new Oe("Graph.".concat(pt,': could not find the "').concat(ge,'" edge in the graph.'))}if("function"!=typeof tt)throw new Ut("Graph.".concat(pt,": updater should be a function."));return Mt.attributes[Re]=tt(Mt.attributes[Re]),this.emit("edgeAttributesUpdated",{key:Mt.key,type:"set",attributes:Mt.attributes,name:Re}),this}}},{name:function(Ze){return"remove".concat(Ze,"Attribute")},attacher:function(Ze,pt,st){Ze.prototype[pt]=function(ge,Re){var tt;if("mixed"!==this.type&&"mixed"!==st&&st!==this.type)throw new fe("Graph.".concat(pt,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new fe("Graph.".concat(pt,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Mt=""+ge,Yt=""+Re;if(Re=arguments[2],!(tt=q(this,Mt,Yt,st)))throw new Oe("Graph.".concat(pt,': could not find an edge for the given path ("').concat(Mt,'" - "').concat(Yt,'").'))}else{if("mixed"!==st)throw new fe("Graph.".concat(pt,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(tt=this._edges.get(ge=""+ge)))throw new Oe("Graph.".concat(pt,': could not find the "').concat(ge,'" edge in the graph.'))}return delete tt.attributes[Re],this.emit("edgeAttributesUpdated",{key:tt.key,type:"remove",attributes:tt.attributes,name:Re}),this}}},{name:function(Ze){return"replace".concat(Ze,"Attributes")},attacher:function(Ze,pt,st){Ze.prototype[pt]=function(ge,Re){var tt;if("mixed"!==this.type&&"mixed"!==st&&st!==this.type)throw new fe("Graph.".concat(pt,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new fe("Graph.".concat(pt,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Mt=""+ge,Yt=""+Re;if(Re=arguments[2],!(tt=q(this,Mt,Yt,st)))throw new Oe("Graph.".concat(pt,': could not find an edge for the given path ("').concat(Mt,'" - "').concat(Yt,'").'))}else{if("mixed"!==st)throw new fe("Graph.".concat(pt,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(tt=this._edges.get(ge=""+ge)))throw new Oe("Graph.".concat(pt,': could not find the "').concat(ge,'" edge in the graph.'))}if(!K(Re))throw new Ut("Graph.".concat(pt,": provided attributes are not a plain object."));return tt.attributes=Re,this.emit("edgeAttributesUpdated",{key:tt.key,type:"replace",attributes:tt.attributes}),this}}},{name:function(Ze){return"merge".concat(Ze,"Attributes")},attacher:function(Ze,pt,st){Ze.prototype[pt]=function(ge,Re){var tt;if("mixed"!==this.type&&"mixed"!==st&&st!==this.type)throw new fe("Graph.".concat(pt,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new fe("Graph.".concat(pt,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Mt=""+ge,Yt=""+Re;if(Re=arguments[2],!(tt=q(this,Mt,Yt,st)))throw new Oe("Graph.".concat(pt,': could not find an edge for the given path ("').concat(Mt,'" - "').concat(Yt,'").'))}else{if("mixed"!==st)throw new fe("Graph.".concat(pt,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(tt=this._edges.get(ge=""+ge)))throw new Oe("Graph.".concat(pt,': could not find the "').concat(ge,'" edge in the graph.'))}if(!K(Re))throw new Ut("Graph.".concat(pt,": provided attributes are not a plain object."));return P(tt.attributes,Re),this.emit("edgeAttributesUpdated",{key:tt.key,type:"merge",attributes:tt.attributes,data:Re}),this}}},{name:function(Ze){return"update".concat(Ze,"Attributes")},attacher:function(Ze,pt,st){Ze.prototype[pt]=function(ge,Re){var tt;if("mixed"!==this.type&&"mixed"!==st&&st!==this.type)throw new fe("Graph.".concat(pt,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new fe("Graph.".concat(pt,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Mt=""+ge,Yt=""+Re;if(Re=arguments[2],!(tt=q(this,Mt,Yt,st)))throw new Oe("Graph.".concat(pt,': could not find an edge for the given path ("').concat(Mt,'" - "').concat(Yt,'").'))}else{if("mixed"!==st)throw new fe("Graph.".concat(pt,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(tt=this._edges.get(ge=""+ge)))throw new Oe("Graph.".concat(pt,': could not find the "').concat(ge,'" edge in the graph.'))}if("function"!=typeof Re)throw new Ut("Graph.".concat(pt,": provided updater is not a function."));return tt.attributes=Re(tt.attributes),this.emit("edgeAttributesUpdated",{key:tt.key,type:"update",attributes:tt.attributes}),this}}}],et=lt,Le=Ge,ze=function(){var Ze=arguments,pt=null,st=-1;return new et(function(){for(var ge=null;;){if(null===pt){if(++st>=Ze.length)return{done:!0};pt=Le(Ze[st])}if(!0!==(ge=pt.next()).done)break;pt=null}return ge})},Ht=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function yn(Ze,pt,st,ge){var Re=!1;for(var tt in pt)if(tt!==ge){var Mt=pt[tt];if(Re=st(Mt.key,Mt.attributes,Mt.source.key,Mt.target.key,Mt.source.attributes,Mt.target.attributes,Mt.undirected),Ze&&Re)return Mt.key}}function ii(Ze,pt,st,ge){var Re,tt,Mt,Yt=!1;for(var Tn in pt)if(Tn!==ge){Re=pt[Tn];do{if(Yt=st(Re.key,Re.attributes,(tt=Re.source).key,(Mt=Re.target).key,tt.attributes,Mt.attributes,Re.undirected),Ze&&Yt)return Re.key;Re=Re.next}while(void 0!==Re)}}function Li(Ze,pt){var st,ge=Object.keys(Ze),Re=ge.length,tt=0;return new lt(function(){do{if(st)st=st.next;else{if(tt>=Re)return{done:!0};var Mt=ge[tt++];if(Mt===pt){st=void 0;continue}st=Ze[Mt]}}while(!st);return{done:!1,value:{edge:st.key,attributes:st.attributes,source:st.source.key,target:st.target.key,sourceAttributes:st.source.attributes,targetAttributes:st.target.attributes,undirected:st.undirected}}})}function Cs(Ze,pt,st,ge){var Re=pt[st];if(Re){var tt=Re.source,Mt=Re.target;return ge(Re.key,Re.attributes,tt.key,Mt.key,tt.attributes,Mt.attributes,Re.undirected)&&Ze?Re.key:void 0}}function lo(Ze,pt,st,ge){var Re=pt[st];if(Re){var tt=!1;do{if(tt=ge(Re.key,Re.attributes,Re.source.key,Re.target.key,Re.source.attributes,Re.target.attributes,Re.undirected),Ze&&tt)return Re.key;Re=Re.next}while(void 0!==Re)}}function ws(Ze,pt){var st=Ze[pt];return void 0!==st.next?new lt(function(){if(!st)return{done:!0};var ge={edge:st.key,attributes:st.attributes,source:st.source.key,target:st.target.key,sourceAttributes:st.source.attributes,targetAttributes:st.target.attributes,undirected:st.undirected};return st=st.next,{done:!1,value:ge}}):lt.of({edge:st.key,attributes:st.attributes,source:st.source.key,target:st.target.key,sourceAttributes:st.source.attributes,targetAttributes:st.target.attributes,undirected:st.undirected})}function ua(Ze,pt){if(0===Ze.size)return[];if("mixed"===pt||pt===Ze.type)return"function"==typeof Array.from?Array.from(Ze._edges.keys()):At(Ze._edges.keys(),Ze._edges.size);for(var st,ge,tt=new Array("undirected"===pt?Ze.undirectedSize:Ze.directedSize),Mt="undirected"===pt,Yt=Ze._edges.values(),Tn=0;!0!==(st=Yt.next()).done;)(ge=st.value).undirected===Mt&&(tt[Tn++]=ge.key);return tt}function sr(Ze,pt,st,ge){if(0!==pt.size)for(var Re,tt,Mt="mixed"!==st&&st!==pt.type,Yt="undirected"===st,Tn=!1,wi=pt._edges.values();!0!==(Re=wi.next()).done;)if(tt=Re.value,!Mt||tt.undirected===Yt){var pi=tt.key,pr=tt.source,ur=tt.target;if(Tn=ge(pi,tt.attributes,pr.key,ur.key,pr.attributes,ur.attributes,tt.undirected),Ze&&Tn)return pi}}function il(Ze,pt){if(0===Ze.size)return lt.empty();var st="mixed"!==pt&&pt!==Ze.type,ge="undirected"===pt,Re=Ze._edges.values();return new lt(function(){for(var tt,Mt;;){if((tt=Re.next()).done)return tt;if(Mt=tt.value,!st||Mt.undirected===ge)break}return{value:{edge:Mt.key,attributes:Mt.attributes,source:Mt.source.key,target:Mt.target.key,sourceAttributes:Mt.source.attributes,targetAttributes:Mt.target.attributes,undirected:Mt.undirected},done:!1}})}function $l(Ze,pt,st,ge,Re,tt){var Mt,Yt=pt?ii:yn;if("undirected"!==st&&("out"!==ge&&(Mt=Yt(Ze,Re.in,tt),Ze&&Mt)||"in"!==ge&&(Mt=Yt(Ze,Re.out,tt,ge?void 0:Re.key),Ze&&Mt))||"directed"!==st&&(Mt=Yt(Ze,Re.undirected,tt),Ze&&Mt))return Mt}function ql(Ze,pt,st,ge){var Re=[];return $l(!1,Ze,pt,st,ge,function(tt){Re.push(tt)}),Re}function Wf(Ze,pt,st){var ge=lt.empty();return"undirected"!==Ze&&("out"!==pt&&void 0!==st.in&&(ge=ze(ge,Li(st.in))),"in"!==pt&&void 0!==st.out&&(ge=ze(ge,Li(st.out,pt?void 0:st.key)))),"directed"!==Ze&&void 0!==st.undirected&&(ge=ze(ge,Li(st.undirected))),ge}function jf(Ze,pt,st,ge,Re,tt,Mt){var Yt,Tn=st?lo:Cs;if("undirected"!==pt&&(void 0!==Re.in&&"out"!==ge&&(Yt=Tn(Ze,Re.in,tt,Mt),Ze&&Yt)||void 0!==Re.out&&"in"!==ge&&(ge||Re.key!==tt)&&(Yt=Tn(Ze,Re.out,tt,Mt),Ze&&Yt))||"directed"!==pt&&void 0!==Re.undirected&&(Yt=Tn(Ze,Re.undirected,tt,Mt),Ze&&Yt))return Yt}function ih(Ze,pt,st,ge,Re){var tt=[];return jf(!1,Ze,pt,st,ge,Re,function(Mt){tt.push(Mt)}),tt}function cc(Ze,pt,st,ge){var Re=lt.empty();return"undirected"!==Ze&&(void 0!==st.in&&"out"!==pt&&ge in st.in&&(Re=ze(Re,ws(st.in,ge))),void 0!==st.out&&"in"!==pt&&ge in st.out&&(pt||st.key!==ge)&&(Re=ze(Re,ws(st.out,ge)))),"directed"!==Ze&&void 0!==st.undirected&&ge in st.undirected&&(Re=ze(Re,ws(st.undirected,ge))),Re}var Sh=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function ku(){this.A=null,this.B=null}function Xa(Ze,pt,st,ge,Re){for(var tt in ge){var Mt=ge[tt],Yt=Mt.source,wi=Yt===st?Mt.target:Yt;if(!pt||!pt.has(wi.key)){var si=Re(wi.key,wi.attributes);if(Ze&&si)return wi.key}}}function Rd(Ze,pt,st,ge,Re){if("mixed"!==pt){if("undirected"===pt)return Xa(Ze,null,ge,ge.undirected,Re);if("string"==typeof st)return Xa(Ze,null,ge,ge[st],Re)}var tt,Mt=new ku;if("undirected"!==pt){if("out"!==st){if(tt=Xa(Ze,null,ge,ge.in,Re),Ze&&tt)return tt;Mt.wrap(ge.in)}if("in"!==st){if(tt=Xa(Ze,Mt,ge,ge.out,Re),Ze&&tt)return tt;Mt.wrap(ge.out)}}if("directed"!==pt&&(tt=Xa(Ze,Mt,ge,ge.undirected,Re),Ze&&tt))return tt}function uu(Ze,pt,st){var ge=Object.keys(st),Re=ge.length,tt=0;return new lt(function(){var Mt=null;do{if(tt>=Re)return Ze&&Ze.wrap(st),{done:!0};var Yt=st[ge[tt++]],Tn=Yt.source;Mt=Tn===pt?Yt.target:Tn,Ze&&Ze.has(Mt.key)&&(Mt=null)}while(null===Mt);return{done:!1,value:{neighbor:Mt.key,attributes:Mt.attributes}}})}function Ou(Ze,pt,st,ge,Re){for(var tt,Mt,Yt,Tn,wi,si,pi,yr=ge._nodes.values(),pr=ge.type;!0!==(tt=yr.next()).done;){var ur=!1;if(Mt=tt.value,"undirected"!==pr)for(Yt in Tn=Mt.out){wi=Tn[Yt];do{if(ur=!0,pi=Re(Mt.key,(si=wi.target).key,Mt.attributes,si.attributes,wi.key,wi.attributes,wi.undirected),Ze&&pi)return wi;wi=wi.next}while(wi)}if("directed"!==pr)for(Yt in Tn=Mt.undirected)if(!(pt&&Mt.key>Yt)){wi=Tn[Yt];do{if((si=wi.target).key!==Yt&&(si=wi.source),ur=!0,pi=Re(Mt.key,si.key,Mt.attributes,si.attributes,wi.key,wi.attributes,wi.undirected),Ze&&pi)return wi;wi=wi.next}while(wi)}if(st&&!ur&&(pi=Re(Mt.key,null,Mt.attributes,null,null,null,null),Ze&&pi))return null}}function td(Ze){if(!K(Ze))throw new Ut('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in Ze))throw new Ut("Graph.import: serialized node is missing its key.");if("attributes"in Ze&&(!K(Ze.attributes)||null===Ze.attributes))throw new Ut("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function ff(Ze){if(!K(Ze))throw new Ut('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in Ze))throw new Ut("Graph.import: serialized edge is missing its source.");if(!("target"in Ze))throw new Ut("Graph.import: serialized edge is missing its target.");if("attributes"in Ze&&(!K(Ze.attributes)||null===Ze.attributes))throw new Ut("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in Ze&&"boolean"!=typeof Ze.undirected)throw new Ut("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}ku.prototype.wrap=function(Ze){null===this.A?this.A=Ze:null===this.B&&(this.B=Ze)},ku.prototype.has=function(Ze){return null!==this.A&&Ze in this.A||null!==this.B&&Ze in this.B};var nd,pl=(nd=255&Math.floor(256*Math.random()),function(){return nd++}),pf=new Set(["directed","undirected","mixed"]),rh=new Set(["domain","_events","_eventsCount","_maxListeners"]),gf={allowSelfLoops:!0,multi:!1,type:"mixed"};function kd(Ze,pt,st){var ge=new Ze.NodeDataClass(pt,st);return Ze._nodes.set(pt,ge),Ze.emit("nodeAdded",{key:pt,attributes:st}),ge}function xc(Ze,pt,st,ge,Re,tt,Mt,Yt){if(!ge&&"undirected"===Ze.type)throw new fe("Graph.".concat(pt,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(ge&&"directed"===Ze.type)throw new fe("Graph.".concat(pt,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if(Yt&&!K(Yt))throw new Ut("Graph.".concat(pt,': invalid attributes. Expecting an object but got "').concat(Yt,'"'));if(tt=""+tt,Mt=""+Mt,Yt=Yt||{},!Ze.allowSelfLoops&&tt===Mt)throw new fe("Graph.".concat(pt,': source & target are the same ("').concat(tt,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var Tn=Ze._nodes.get(tt),wi=Ze._nodes.get(Mt);if(!Tn)throw new Oe("Graph.".concat(pt,': source node "').concat(tt,'" not found.'));if(!wi)throw new Oe("Graph.".concat(pt,': target node "').concat(Mt,'" not found.'));var si={key:null,undirected:ge,source:tt,target:Mt,attributes:Yt};if(st)Re=Ze._edgeKeyGenerator();else if(Ze._edges.has(Re=""+Re))throw new fe("Graph.".concat(pt,': the "').concat(Re,'" edge already exists in the graph.'));if(!Ze.multi&&(ge?void 0!==Tn.undirected[Mt]:void 0!==Tn.out[Mt]))throw new fe("Graph.".concat(pt,': an edge linking "').concat(tt,'" to "').concat(Mt,"\" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option."));var pi=new ri(ge,Re,Tn,wi,Yt);Ze._edges.set(Re,pi);var yr=tt===Mt;return ge?(Tn.undirectedDegree++,wi.undirectedDegree++,yr&&Ze._undirectedSelfLoopCount++):(Tn.outDegree++,wi.inDegree++,yr&&Ze._directedSelfLoopCount++),Ze.multi?pi.attachMulti():pi.attach(),ge?Ze._undirectedSize++:Ze._directedSize++,si.key=Re,Ze.emit("edgeAdded",si),Re}function Mg(Ze,pt,st,ge,Re,tt,Mt,Yt,Tn){if(!ge&&"undirected"===Ze.type)throw new fe("Graph.".concat(pt,": you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead."));if(ge&&"directed"===Ze.type)throw new fe("Graph.".concat(pt,": you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead."));if(Yt)if(Tn){if("function"!=typeof Yt)throw new Ut("Graph.".concat(pt,': invalid updater function. Expecting a function but got "').concat(Yt,'"'))}else if(!K(Yt))throw new Ut("Graph.".concat(pt,': invalid attributes. Expecting an object but got "').concat(Yt,'"'));var wi;if(tt=""+tt,Mt=""+Mt,Tn&&(wi=Yt,Yt=void 0),!Ze.allowSelfLoops&&tt===Mt)throw new fe("Graph.".concat(pt,': source & target are the same ("').concat(tt,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var si,pi,yr=Ze._nodes.get(tt),pr=Ze._nodes.get(Mt);if(!st&&(si=Ze._edges.get(Re))){if(!(si.source.key===tt&&si.target.key===Mt||ge&&si.source.key===Mt&&si.target.key===tt))throw new fe("Graph.".concat(pt,': inconsistency detected when attempting to merge the "').concat(Re,'" edge with "').concat(tt,'" source & "').concat(Mt,'" target vs. ("').concat(si.source.key,'", "').concat(si.target.key,'").'));pi=si}if(pi||Ze.multi||!yr||(pi=ge?yr.undirected[Mt]:yr.out[Mt]),pi){var ur=[pi.key,!1,!1,!1];return(Tn?wi:Yt)?(Tn?(pi.attributes=wi(pi.attributes),Ze.emit("edgeAttributesUpdated",{type:"replace",key:pi.key,attributes:pi.attributes})):(P(pi.attributes,Yt),Ze.emit("edgeAttributesUpdated",{type:"merge",key:pi.key,attributes:pi.attributes,data:Yt})),ur):ur}Yt=Yt||{},Tn&&wi&&(Yt=wi(Yt));var So={key:null,undirected:ge,source:tt,target:Mt,attributes:Yt};if(st)Re=Ze._edgeKeyGenerator();else if(Ze._edges.has(Re=""+Re))throw new fe("Graph.".concat(pt,': the "').concat(Re,'" edge already exists in the graph.'));var Eo=!1,ds=!1;yr||(yr=kd(Ze,tt,{}),Eo=!0,tt===Mt&&(pr=yr,ds=!0)),pr||(pr=kd(Ze,Mt,{}),ds=!0),si=new ri(ge,Re,yr,pr,Yt),Ze._edges.set(Re,si);var Ea=tt===Mt;return ge?(yr.undirectedDegree++,pr.undirectedDegree++,Ea&&Ze._undirectedSelfLoopCount++):(yr.outDegree++,pr.inDegree++,Ea&&Ze._directedSelfLoopCount++),Ze.multi?si.attachMulti():si.attach(),ge?Ze._undirectedSize++:Ze._directedSize++,So.key=Re,Ze.emit("edgeAdded",So),[Re,!0,Eo,ds]}function Th(Ze,pt){Ze._edges.delete(pt.key);var st=pt.source,ge=pt.target,Re=pt.attributes,tt=pt.undirected,Mt=st===ge;tt?(st.undirectedDegree--,ge.undirectedDegree--,Mt&&Ze._undirectedSelfLoopCount--):(st.outDegree--,ge.inDegree--,Mt&&Ze._directedSelfLoopCount--),Ze.multi?pt.detachMulti():pt.detach(),tt?Ze._undirectedSize--:Ze._directedSize--,Ze.emit("edgeDropped",{key:pt.key,attributes:Re,source:st.key,target:ge.key,undirected:tt})}var Ze,io=function(Ze){function pt(ge){var Re;if(Re=Ze.call(this)||this,"boolean"!=typeof(ge=P({},gf,ge)).multi)throw new Ut("Graph.constructor: invalid 'multi' option. Expecting a boolean but got \"".concat(ge.multi,'".'));if(!pf.has(ge.type))throw new Ut('Graph.constructor: invalid \'type\' option. Should be one of "mixed", "directed" or "undirected" but got "'.concat(ge.type,'".'));if("boolean"!=typeof ge.allowSelfLoops)throw new Ut("Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got \"".concat(ge.allowSelfLoops,'".'));var tt="mixed"===ge.type?wt:"directed"===ge.type?kt:Un;se(L(Re),"NodeDataClass",tt);var Mt="geid_"+pl()+"_",Yt=0;return se(L(Re),"_attributes",{}),se(L(Re),"_nodes",new Map),se(L(Re),"_edges",new Map),se(L(Re),"_directedSize",0),se(L(Re),"_undirectedSize",0),se(L(Re),"_directedSelfLoopCount",0),se(L(Re),"_undirectedSelfLoopCount",0),se(L(Re),"_edgeKeyGenerator",function(){var Tn;do{Tn=Mt+Yt++}while(Re._edges.has(Tn));return Tn}),se(L(Re),"_options",ge),rh.forEach(function(Tn){return se(L(Re),Tn,Re[Tn])}),J(L(Re),"order",function(){return Re._nodes.size}),J(L(Re),"size",function(){return Re._edges.size}),J(L(Re),"directedSize",function(){return Re._directedSize}),J(L(Re),"undirectedSize",function(){return Re._undirectedSize}),J(L(Re),"selfLoopCount",function(){return Re._directedSelfLoopCount+Re._undirectedSelfLoopCount}),J(L(Re),"directedSelfLoopCount",function(){return Re._directedSelfLoopCount}),J(L(Re),"undirectedSelfLoopCount",function(){return Re._undirectedSelfLoopCount}),J(L(Re),"multi",Re._options.multi),J(L(Re),"type",Re._options.type),J(L(Re),"allowSelfLoops",Re._options.allowSelfLoops),J(L(Re),"implementation",function(){return"graphology"}),Re}U(pt,Ze);var st=pt.prototype;return st._resetInstanceCounters=function(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0},st.hasNode=function(ge){return this._nodes.has(""+ge)},st.hasDirectedEdge=function(ge,Re){if("undirected"===this.type)return!1;if(1===arguments.length){var Mt=this._edges.get(""+ge);return!!Mt&&!Mt.undirected}if(2===arguments.length){Re=""+Re;var Yt=this._nodes.get(ge=""+ge);if(!Yt)return!1;var Tn=Yt.out[Re];return!(!Tn||this.multi&&!Tn.size)}throw new Ut("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},st.hasUndirectedEdge=function(ge,Re){if("directed"===this.type)return!1;if(1===arguments.length){var Mt=this._edges.get(""+ge);return!!Mt&&Mt.undirected}if(2===arguments.length){Re=""+Re;var Yt=this._nodes.get(ge=""+ge);if(!Yt)return!1;var Tn=Yt.undirected[Re];return!(!Tn||this.multi&&!Tn.size)}throw new Ut("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},st.hasEdge=function(ge,Re){if(1===arguments.length)return this._edges.has(""+ge);if(2===arguments.length){Re=""+Re;var Mt=this._nodes.get(ge=""+ge);if(!Mt)return!1;var Yt=void 0!==Mt.out&&Mt.out[Re];return Yt||(Yt=void 0!==Mt.undirected&&Mt.undirected[Re]),!(!Yt||this.multi&&!Yt.size)}throw new Ut("Graph.hasEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},st.directedEdge=function(ge,Re){if("undirected"!==this.type){if(ge=""+ge,Re=""+Re,this.multi)throw new fe("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");var tt=this._nodes.get(ge);if(!tt)throw new Oe('Graph.directedEdge: could not find the "'.concat(ge,'" source node in the graph.'));if(!this._nodes.has(Re))throw new Oe('Graph.directedEdge: could not find the "'.concat(Re,'" target node in the graph.'));var Mt=tt.out&&tt.out[Re]||void 0;return Mt?Mt.key:void 0}},st.undirectedEdge=function(ge,Re){if("directed"!==this.type){if(ge=""+ge,Re=""+Re,this.multi)throw new fe("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");var tt=this._nodes.get(ge);if(!tt)throw new Oe('Graph.undirectedEdge: could not find the "'.concat(ge,'" source node in the graph.'));if(!this._nodes.has(Re))throw new Oe('Graph.undirectedEdge: could not find the "'.concat(Re,'" target node in the graph.'));var Mt=tt.undirected&&tt.undirected[Re]||void 0;return Mt?Mt.key:void 0}},st.edge=function(ge,Re){if(this.multi)throw new fe("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");Re=""+Re;var tt=this._nodes.get(ge=""+ge);if(!tt)throw new Oe('Graph.edge: could not find the "'.concat(ge,'" source node in the graph.'));if(!this._nodes.has(Re))throw new Oe('Graph.edge: could not find the "'.concat(Re,'" target node in the graph.'));var Mt=tt.out&&tt.out[Re]||tt.undirected&&tt.undirected[Re]||void 0;if(Mt)return Mt.key},st.areDirectedNeighbors=function(ge,Re){Re=""+Re;var tt=this._nodes.get(ge=""+ge);if(!tt)throw new Oe('Graph.areDirectedNeighbors: could not find the "'.concat(ge,'" node in the graph.'));return"undirected"!==this.type&&(Re in tt.in||Re in tt.out)},st.areOutNeighbors=function(ge,Re){Re=""+Re;var tt=this._nodes.get(ge=""+ge);if(!tt)throw new Oe('Graph.areOutNeighbors: could not find the "'.concat(ge,'" node in the graph.'));return"undirected"!==this.type&&Re in tt.out},st.areInNeighbors=function(ge,Re){Re=""+Re;var tt=this._nodes.get(ge=""+ge);if(!tt)throw new Oe('Graph.areInNeighbors: could not find the "'.concat(ge,'" node in the graph.'));return"undirected"!==this.type&&Re in tt.in},st.areUndirectedNeighbors=function(ge,Re){Re=""+Re;var tt=this._nodes.get(ge=""+ge);if(!tt)throw new Oe('Graph.areUndirectedNeighbors: could not find the "'.concat(ge,'" node in the graph.'));return"directed"!==this.type&&Re in tt.undirected},st.areNeighbors=function(ge,Re){Re=""+Re;var tt=this._nodes.get(ge=""+ge);if(!tt)throw new Oe('Graph.areNeighbors: could not find the "'.concat(ge,'" node in the graph.'));return"undirected"!==this.type&&(Re in tt.in||Re in tt.out)||"directed"!==this.type&&Re in tt.undirected},st.areInboundNeighbors=function(ge,Re){Re=""+Re;var tt=this._nodes.get(ge=""+ge);if(!tt)throw new Oe('Graph.areInboundNeighbors: could not find the "'.concat(ge,'" node in the graph.'));return"undirected"!==this.type&&Re in tt.in||"directed"!==this.type&&Re in tt.undirected},st.areOutboundNeighbors=function(ge,Re){Re=""+Re;var tt=this._nodes.get(ge=""+ge);if(!tt)throw new Oe('Graph.areOutboundNeighbors: could not find the "'.concat(ge,'" node in the graph.'));return"undirected"!==this.type&&Re in tt.out||"directed"!==this.type&&Re in tt.undirected},st.inDegree=function(ge){var Re=this._nodes.get(ge=""+ge);if(!Re)throw new Oe('Graph.inDegree: could not find the "'.concat(ge,'" node in the graph.'));return"undirected"===this.type?0:Re.inDegree},st.outDegree=function(ge){var Re=this._nodes.get(ge=""+ge);if(!Re)throw new Oe('Graph.outDegree: could not find the "'.concat(ge,'" node in the graph.'));return"undirected"===this.type?0:Re.outDegree},st.directedDegree=function(ge){var Re=this._nodes.get(ge=""+ge);if(!Re)throw new Oe('Graph.directedDegree: could not find the "'.concat(ge,'" node in the graph.'));return"undirected"===this.type?0:Re.inDegree+Re.outDegree},st.undirectedDegree=function(ge){var Re=this._nodes.get(ge=""+ge);if(!Re)throw new Oe('Graph.undirectedDegree: could not find the "'.concat(ge,'" node in the graph.'));return"directed"===this.type?0:Re.undirectedDegree},st.inboundDegree=function(ge){var Re=this._nodes.get(ge=""+ge);if(!Re)throw new Oe('Graph.inboundDegree: could not find the "'.concat(ge,'" node in the graph.'));var tt=0;return"directed"!==this.type&&(tt+=Re.undirectedDegree),"undirected"!==this.type&&(tt+=Re.inDegree),tt},st.outboundDegree=function(ge){var Re=this._nodes.get(ge=""+ge);if(!Re)throw new Oe('Graph.outboundDegree: could not find the "'.concat(ge,'" node in the graph.'));var tt=0;return"directed"!==this.type&&(tt+=Re.undirectedDegree),"undirected"!==this.type&&(tt+=Re.outDegree),tt},st.degree=function(ge){var Re=this._nodes.get(ge=""+ge);if(!Re)throw new Oe('Graph.degree: could not find the "'.concat(ge,'" node in the graph.'));var tt=0;return"directed"!==this.type&&(tt+=Re.undirectedDegree),"undirected"!==this.type&&(tt+=Re.inDegree+Re.outDegree),tt},st.inDegreeWithoutSelfLoops=function(ge){var Re=this._nodes.get(ge=""+ge);if(!Re)throw new Oe('Graph.inDegreeWithoutSelfLoops: could not find the "'.concat(ge,'" node in the graph.'));if("undirected"===this.type)return 0;var tt=Re.in[ge];return Re.inDegree-(tt?this.multi?tt.size:1:0)},st.outDegreeWithoutSelfLoops=function(ge){var Re=this._nodes.get(ge=""+ge);if(!Re)throw new Oe('Graph.outDegreeWithoutSelfLoops: could not find the "'.concat(ge,'" node in the graph.'));if("undirected"===this.type)return 0;var tt=Re.out[ge];return Re.outDegree-(tt?this.multi?tt.size:1:0)},st.directedDegreeWithoutSelfLoops=function(ge){var Re=this._nodes.get(ge=""+ge);if(!Re)throw new Oe('Graph.directedDegreeWithoutSelfLoops: could not find the "'.concat(ge,'" node in the graph.'));if("undirected"===this.type)return 0;var tt=Re.out[ge];return Re.inDegree+Re.outDegree-2*(tt?this.multi?tt.size:1:0)},st.undirectedDegreeWithoutSelfLoops=function(ge){var Re=this._nodes.get(ge=""+ge);if(!Re)throw new Oe('Graph.undirectedDegreeWithoutSelfLoops: could not find the "'.concat(ge,'" node in the graph.'));if("directed"===this.type)return 0;var tt=Re.undirected[ge];return Re.undirectedDegree-2*(tt?this.multi?tt.size:1:0)},st.inboundDegreeWithoutSelfLoops=function(ge){var Re,tt=this._nodes.get(ge=""+ge);if(!tt)throw new Oe('Graph.inboundDegreeWithoutSelfLoops: could not find the "'.concat(ge,'" node in the graph.'));var Mt=0,Yt=0;return"directed"!==this.type&&(Mt+=tt.undirectedDegree,Yt+=2*((Re=tt.undirected[ge])?this.multi?Re.size:1:0)),"undirected"!==this.type&&(Mt+=tt.inDegree,Yt+=(Re=tt.out[ge])?this.multi?Re.size:1:0),Mt-Yt},st.outboundDegreeWithoutSelfLoops=function(ge){var Re,tt=this._nodes.get(ge=""+ge);if(!tt)throw new Oe('Graph.outboundDegreeWithoutSelfLoops: could not find the "'.concat(ge,'" node in the graph.'));var Mt=0,Yt=0;return"directed"!==this.type&&(Mt+=tt.undirectedDegree,Yt+=2*((Re=tt.undirected[ge])?this.multi?Re.size:1:0)),"undirected"!==this.type&&(Mt+=tt.outDegree,Yt+=(Re=tt.in[ge])?this.multi?Re.size:1:0),Mt-Yt},st.degreeWithoutSelfLoops=function(ge){var Re,tt=this._nodes.get(ge=""+ge);if(!tt)throw new Oe('Graph.degreeWithoutSelfLoops: could not find the "'.concat(ge,'" node in the graph.'));var Mt=0,Yt=0;return"directed"!==this.type&&(Mt+=tt.undirectedDegree,Yt+=2*((Re=tt.undirected[ge])?this.multi?Re.size:1:0)),"undirected"!==this.type&&(Mt+=tt.inDegree+tt.outDegree,Yt+=2*((Re=tt.out[ge])?this.multi?Re.size:1:0)),Mt-Yt},st.source=function(ge){var Re=this._edges.get(ge=""+ge);if(!Re)throw new Oe('Graph.source: could not find the "'.concat(ge,'" edge in the graph.'));return Re.source.key},st.target=function(ge){var Re=this._edges.get(ge=""+ge);if(!Re)throw new Oe('Graph.target: could not find the "'.concat(ge,'" edge in the graph.'));return Re.target.key},st.extremities=function(ge){var Re=this._edges.get(ge=""+ge);if(!Re)throw new Oe('Graph.extremities: could not find the "'.concat(ge,'" edge in the graph.'));return[Re.source.key,Re.target.key]},st.opposite=function(ge,Re){ge=""+ge;var tt=this._edges.get(Re=""+Re);if(!tt)throw new Oe('Graph.opposite: could not find the "'.concat(Re,'" edge in the graph.'));var Mt=tt.source.key,Yt=tt.target.key;if(ge===Mt)return Yt;if(ge===Yt)return Mt;throw new Oe('Graph.opposite: the "'.concat(ge,'" node is not attached to the "').concat(Re,'" edge (').concat(Mt,", ").concat(Yt,")."))},st.hasExtremity=function(ge,Re){Re=""+Re;var tt=this._edges.get(ge=""+ge);if(!tt)throw new Oe('Graph.hasExtremity: could not find the "'.concat(ge,'" edge in the graph.'));return tt.source.key===Re||tt.target.key===Re},st.isUndirected=function(ge){var Re=this._edges.get(ge=""+ge);if(!Re)throw new Oe('Graph.isUndirected: could not find the "'.concat(ge,'" edge in the graph.'));return Re.undirected},st.isDirected=function(ge){var Re=this._edges.get(ge=""+ge);if(!Re)throw new Oe('Graph.isDirected: could not find the "'.concat(ge,'" edge in the graph.'));return!Re.undirected},st.isSelfLoop=function(ge){var Re=this._edges.get(ge=""+ge);if(!Re)throw new Oe('Graph.isSelfLoop: could not find the "'.concat(ge,'" edge in the graph.'));return Re.source===Re.target},st.addNode=function(ge,Re){return function(Mt,Yt,Tn){if(Tn&&!K(Tn))throw new Ut('Graph.addNode: invalid attributes. Expecting an object but got "'.concat(Tn,'"'));if(Tn=Tn||{},Mt._nodes.has(Yt=""+Yt))throw new fe('Graph.addNode: the "'.concat(Yt,'" node already exist in the graph.'));var wi=new Mt.NodeDataClass(Yt,Tn);return Mt._nodes.set(Yt,wi),Mt.emit("nodeAdded",{key:Yt,attributes:Tn}),wi}(this,ge,Re).key},st.mergeNode=function(ge,Re){if(Re&&!K(Re))throw new Ut('Graph.mergeNode: invalid attributes. Expecting an object but got "'.concat(Re,'"'));Re=Re||{};var tt=this._nodes.get(ge=""+ge);return tt?(Re&&(P(tt.attributes,Re),this.emit("nodeAttributesUpdated",{type:"merge",key:ge,attributes:tt.attributes,data:Re})),[ge,!1]):(tt=new this.NodeDataClass(ge,Re),this._nodes.set(ge,tt),this.emit("nodeAdded",{key:ge,attributes:Re}),[ge,!0])},st.updateNode=function(ge,Re){if(Re&&"function"!=typeof Re)throw new Ut('Graph.updateNode: invalid updater function. Expecting a function but got "'.concat(Re,'"'));var tt=this._nodes.get(ge=""+ge);if(tt)return Re&&(tt.attributes=Re(tt.attributes),this.emit("nodeAttributesUpdated",{type:"replace",key:ge,attributes:tt.attributes})),[ge,!1];var Yt=Re?Re({}):{};return tt=new this.NodeDataClass(ge,Yt),this._nodes.set(ge,tt),this.emit("nodeAdded",{key:ge,attributes:Yt}),[ge,!0]},st.dropNode=function(ge){var Re,tt=this._nodes.get(ge=""+ge);if(!tt)throw new Oe('Graph.dropNode: could not find the "'.concat(ge,'" node in the graph.'));if("undirected"!==this.type){for(var Mt in tt.out){Re=tt.out[Mt];do{Th(this,Re),Re=Re.next}while(Re)}for(var Yt in tt.in){Re=tt.in[Yt];do{Th(this,Re),Re=Re.next}while(Re)}}if("directed"!==this.type)for(var Tn in tt.undirected){Re=tt.undirected[Tn];do{Th(this,Re),Re=Re.next}while(Re)}this._nodes.delete(ge),this.emit("nodeDropped",{key:ge,attributes:tt.attributes})},st.dropEdge=function(ge){var Re;if(arguments.length>1){var tt=""+arguments[0],Mt=""+arguments[1];if(!(Re=q(this,tt,Mt,this.type)))throw new Oe('Graph.dropEdge: could not find the "'.concat(tt,'" -> "').concat(Mt,'" edge in the graph.'))}else if(!(Re=this._edges.get(ge=""+ge)))throw new Oe('Graph.dropEdge: could not find the "'.concat(ge,'" edge in the graph.'));return Th(this,Re),this},st.dropDirectedEdge=function(ge,Re){if(arguments.length<2)throw new fe("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new fe("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");var tt=q(this,ge=""+ge,Re=""+Re,"directed");if(!tt)throw new Oe('Graph.dropDirectedEdge: could not find a "'.concat(ge,'" -> "').concat(Re,'" edge in the graph.'));return Th(this,tt),this},st.dropUndirectedEdge=function(ge,Re){if(arguments.length<2)throw new fe("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new fe("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");var tt=q(this,ge,Re,"undirected");if(!tt)throw new Oe('Graph.dropUndirectedEdge: could not find a "'.concat(ge,'" -> "').concat(Re,'" edge in the graph.'));return Th(this,tt),this},st.clear=function(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")},st.clearEdges=function(){for(var ge,Re=this._nodes.values();!0!==(ge=Re.next()).done;)ge.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")},st.getAttribute=function(ge){return this._attributes[ge]},st.getAttributes=function(){return this._attributes},st.hasAttribute=function(ge){return this._attributes.hasOwnProperty(ge)},st.setAttribute=function(ge,Re){return this._attributes[ge]=Re,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:ge}),this},st.updateAttribute=function(ge,Re){if("function"!=typeof Re)throw new Ut("Graph.updateAttribute: updater should be a function.");return this._attributes[ge]=Re(this._attributes[ge]),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:ge}),this},st.removeAttribute=function(ge){return delete this._attributes[ge],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:ge}),this},st.replaceAttributes=function(ge){if(!K(ge))throw new Ut("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=ge,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this},st.mergeAttributes=function(ge){if(!K(ge))throw new Ut("Graph.mergeAttributes: provided attributes are not a plain object.");return P(this._attributes,ge),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:ge}),this},st.updateAttributes=function(ge){if("function"!=typeof ge)throw new Ut("Graph.updateAttributes: provided updater is not a function.");return this._attributes=ge(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this},st.updateEachNodeAttributes=function(ge,Re){if("function"!=typeof ge)throw new Ut("Graph.updateEachNodeAttributes: expecting an updater function.");if(Re&&!W(Re))throw new Ut("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var tt,Mt,Yt=this._nodes.values();!0!==(tt=Yt.next()).done;)(Mt=tt.value).attributes=ge(Mt.key,Mt.attributes);this.emit("eachNodeAttributesUpdated",{hints:Re||null})},st.updateEachEdgeAttributes=function(ge,Re){if("function"!=typeof ge)throw new Ut("Graph.updateEachEdgeAttributes: expecting an updater function.");if(Re&&!W(Re))throw new Ut("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var tt,Mt,Yt,Tn,wi=this._edges.values();!0!==(tt=wi.next()).done;)Yt=(Mt=tt.value).source,Mt.attributes=ge(Mt.key,Mt.attributes,Yt.key,(Tn=Mt.target).key,Yt.attributes,Tn.attributes,Mt.undirected);this.emit("eachEdgeAttributesUpdated",{hints:Re||null})},st.forEachAdjacencyEntry=function(ge){if("function"!=typeof ge)throw new Ut("Graph.forEachAdjacencyEntry: expecting a callback.");Ou(!1,!1,!1,this,ge)},st.forEachAdjacencyEntryWithOrphans=function(ge){if("function"!=typeof ge)throw new Ut("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");Ou(!1,!1,!0,this,ge)},st.forEachAssymetricAdjacencyEntry=function(ge){if("function"!=typeof ge)throw new Ut("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");Ou(!1,!0,!1,this,ge)},st.forEachAssymetricAdjacencyEntryWithOrphans=function(ge){if("function"!=typeof ge)throw new Ut("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");Ou(!1,!0,!0,this,ge)},st.nodes=function(){return"function"==typeof Array.from?Array.from(this._nodes.keys()):At(this._nodes.keys(),this._nodes.size)},st.forEachNode=function(ge){if("function"!=typeof ge)throw new Ut("Graph.forEachNode: expecting a callback.");for(var Re,tt,Mt=this._nodes.values();!0!==(Re=Mt.next()).done;)ge((tt=Re.value).key,tt.attributes)},st.findNode=function(ge){if("function"!=typeof ge)throw new Ut("Graph.findNode: expecting a callback.");for(var Re,tt,Mt=this._nodes.values();!0!==(Re=Mt.next()).done;)if(ge((tt=Re.value).key,tt.attributes))return tt.key},st.mapNodes=function(ge){if("function"!=typeof ge)throw new Ut("Graph.mapNode: expecting a callback.");for(var Re,tt,Mt=this._nodes.values(),Yt=new Array(this.order),Tn=0;!0!==(Re=Mt.next()).done;)Yt[Tn++]=ge((tt=Re.value).key,tt.attributes);return Yt},st.someNode=function(ge){if("function"!=typeof ge)throw new Ut("Graph.someNode: expecting a callback.");for(var Re,tt,Mt=this._nodes.values();!0!==(Re=Mt.next()).done;)if(ge((tt=Re.value).key,tt.attributes))return!0;return!1},st.everyNode=function(ge){if("function"!=typeof ge)throw new Ut("Graph.everyNode: expecting a callback.");for(var Re,tt,Mt=this._nodes.values();!0!==(Re=Mt.next()).done;)if(!ge((tt=Re.value).key,tt.attributes))return!1;return!0},st.filterNodes=function(ge){if("function"!=typeof ge)throw new Ut("Graph.filterNodes: expecting a callback.");for(var Re,tt,Mt=this._nodes.values(),Yt=[];!0!==(Re=Mt.next()).done;)ge((tt=Re.value).key,tt.attributes)&&Yt.push(tt.key);return Yt},st.reduceNodes=function(ge,Re){if("function"!=typeof ge)throw new Ut("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new Ut("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");for(var tt,Mt,Yt=Re,Tn=this._nodes.values();!0!==(tt=Tn.next()).done;)Yt=ge(Yt,(Mt=tt.value).key,Mt.attributes);return Yt},st.nodeEntries=function(){var ge=this._nodes.values();return new lt(function(){var Re=ge.next();if(Re.done)return Re;var tt=Re.value;return{value:{node:tt.key,attributes:tt.attributes},done:!1}})},st.export=function(){var ge=new Array(this._nodes.size),Re=0;this._nodes.forEach(function(Mt,Yt){var wi,si;ge[Re++]=(si={key:Yt},ne((wi=Mt).attributes)||(si.attributes=P({},wi.attributes)),si)});var tt=new Array(this._edges.size);return Re=0,this._edges.forEach(function(Mt,Yt){var wi,si;tt[Re++]=(si={key:Yt,source:(wi=Mt).source.key,target:wi.target.key},ne(wi.attributes)||(si.attributes=P({},wi.attributes)),wi.undirected&&(si.undirected=!0),si)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:ge,edges:tt}},st.import=function(ge){var Re,tt,Mt,Yt,Tn,wi=this,si=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(ee(ge))return ge.forEachNode(function(fs,Ya){si?wi.mergeNode(fs,Ya):wi.addNode(fs,Ya)}),ge.forEachEdge(function(fs,Ya,Fu,cs,is,Dg,Vp){si?Vp?wi.mergeUndirectedEdgeWithKey(fs,Fu,cs,Ya):wi.mergeDirectedEdgeWithKey(fs,Fu,cs,Ya):Vp?wi.addUndirectedEdgeWithKey(fs,Fu,cs,Ya):wi.addDirectedEdgeWithKey(fs,Fu,cs,Ya)}),this;if(!K(ge))throw new Ut("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(ge.attributes){if(!K(ge.attributes))throw new Ut("Graph.import: invalid attributes. Expecting a plain object.");si?this.mergeAttributes(ge.attributes):this.replaceAttributes(ge.attributes)}if(ge.nodes){if(Mt=ge.nodes,!Array.isArray(Mt))throw new Ut("Graph.import: invalid nodes. Expecting an array.");for(Re=0,tt=Mt.length;Re<tt;Re++){td(Yt=Mt[Re]);var yr=Yt.key,pr=Yt.attributes;si?this.mergeNode(yr,pr):this.addNode(yr,pr)}}if(ge.edges){if(Mt=ge.edges,!Array.isArray(Mt))throw new Ut("Graph.import: invalid edges. Expecting an array.");for(Re=0,tt=Mt.length;Re<tt;Re++){ff(Tn=Mt[Re]);var Gs=Tn.source,So=Tn.target,Eo=Tn.attributes,ds=Tn.undirected,Ea=void 0!==ds&&ds;"key"in Tn?(si?Ea?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:Ea?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey).call(this,Tn.key,Gs,So,Eo):(si?Ea?this.mergeUndirectedEdge:this.mergeDirectedEdge:Ea?this.addUndirectedEdge:this.addDirectedEdge).call(this,Gs,So,Eo)}}return this},st.nullCopy=function(ge){var Re=new pt(P({},this._options,ge));return Re.replaceAttributes(P({},this.getAttributes())),Re},st.emptyCopy=function(ge){var Re=this.nullCopy(ge);return this._nodes.forEach(function(tt,Mt){var Yt=P({},tt.attributes);tt=new Re.NodeDataClass(Mt,Yt),Re._nodes.set(Mt,tt)}),Re},st.copy=function(ge){if("string"==typeof(ge=ge||{}).type&&ge.type!==this.type&&"mixed"!==ge.type)throw new fe('Graph.copy: cannot create an incompatible copy from "'.concat(this.type,'" type to "').concat(ge.type,'" because this would mean losing information about the current graph.'));if("boolean"==typeof ge.multi&&ge.multi!==this.multi&&!0!==ge.multi)throw new fe("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if("boolean"==typeof ge.allowSelfLoops&&ge.allowSelfLoops!==this.allowSelfLoops&&!0!==ge.allowSelfLoops)throw new fe("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");for(var Re,tt,Mt=this.emptyCopy(ge),Yt=this._edges.values();!0!==(Re=Yt.next()).done;)xc(Mt,"copy",!1,(tt=Re.value).undirected,tt.key,tt.source.key,tt.target.key,P({},tt.attributes));return Mt},st.toJSON=function(){return this.export()},st.toString=function(){return"[object Graph]"},st.inspect=function(){var ge=this,Re={};this._nodes.forEach(function(wi,si){Re[si]=wi.attributes});var tt={},Mt={};this._edges.forEach(function(wi,si){var pi,yr=wi.undirected?"--":"->",pr="",ur=wi.source.key,Gs=wi.target.key;wi.undirected&&ur>Gs&&(pi=ur,ur=Gs,Gs=pi);var So="(".concat(ur,")").concat(yr,"(").concat(Gs,")");si.startsWith("geid_")?ge.multi&&(void 0===Mt[So]?Mt[So]=0:Mt[So]++,pr+="".concat(Mt[So],". ")):pr+="[".concat(si,"]: "),tt[pr+=So]=wi.attributes});var Yt={};for(var Tn in this)this.hasOwnProperty(Tn)&&!rh.has(Tn)&&"function"!=typeof this[Tn]&&"symbol"!==we(Tn)&&(Yt[Tn]=this[Tn]);return Yt.attributes=this._attributes,Yt.nodes=Re,Yt.edges=tt,se(Yt,"constructor",this.constructor),Yt},pt}(_e.exports.EventEmitter);typeof Symbol<"u"&&(io.prototype[Symbol.for("nodejs.util.inspect.custom")]=io.prototype.inspect),[{name:function(Ze){return"".concat(Ze,"Edge")},generateKey:!0},{name:function(Ze){return"".concat(Ze,"DirectedEdge")},generateKey:!0,type:"directed"},{name:function(Ze){return"".concat(Ze,"UndirectedEdge")},generateKey:!0,type:"undirected"},{name:function(Ze){return"".concat(Ze,"EdgeWithKey")}},{name:function(Ze){return"".concat(Ze,"DirectedEdgeWithKey")},type:"directed"},{name:function(Ze){return"".concat(Ze,"UndirectedEdgeWithKey")},type:"undirected"}].forEach(function(Ze){["add","merge","update"].forEach(function(pt){var st=Ze.name(pt),ge="add"===pt?xc:Mg;io.prototype[st]=Ze.generateKey?function(Re,tt,Mt){return ge(this,st,!0,"undirected"===(Ze.type||this.type),null,Re,tt,Mt,"update"===pt)}:function(Re,tt,Mt,Yt){return ge(this,st,!1,"undirected"===(Ze.type||this.type),Re,tt,Mt,Yt,"update"===pt)}})}),Ze=io,Ot.forEach(function(pt){var st=pt.name,ge=pt.attacher;ge(Ze,st("Node"),0),ge(Ze,st("Source"),1),ge(Ze,st("Target"),2),ge(Ze,st("Opposite"),3)}),function(Ze){fn.forEach(function(pt){var st=pt.name,ge=pt.attacher;ge(Ze,st("Edge"),"mixed"),ge(Ze,st("DirectedEdge"),"directed"),ge(Ze,st("UndirectedEdge"),"undirected")})}(io),function(Ze){Ht.forEach(function(pt){var ge,Re,tt,Mt;tt=(ge=pt).type,Mt=ge.direction,Ze.prototype[Re=ge.name]=function(Yt,Tn){if("mixed"!==tt&&"mixed"!==this.type&&tt!==this.type)return[];if(!arguments.length)return ua(this,tt);if(1===arguments.length){var wi=this._nodes.get(Yt=""+Yt);if(void 0===wi)throw new Oe("Graph.".concat(Re,': could not find the "').concat(Yt,'" node in the graph.'));return ql(this.multi,"mixed"===tt?this.type:tt,Mt,wi)}if(2===arguments.length){Tn=""+Tn;var si=this._nodes.get(Yt=""+Yt);if(!si)throw new Oe("Graph.".concat(Re,':  could not find the "').concat(Yt,'" source node in the graph.'));if(!this._nodes.has(Tn))throw new Oe("Graph.".concat(Re,':  could not find the "').concat(Tn,'" target node in the graph.'));return ih(tt,this.multi,Mt,si,Tn)}throw new Ut("Graph.".concat(Re,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))},function(st,ge){var Re=ge.name,tt=ge.type,Mt=ge.direction,Yt="forEach"+Re[0].toUpperCase()+Re.slice(1,-1);st.prototype[Yt]=function(pi,yr,pr){if("mixed"===tt||"mixed"===this.type||tt===this.type){if(1===arguments.length)return sr(!1,this,tt,pr=pi);if(2===arguments.length){pr=yr;var ur=this._nodes.get(pi=""+pi);if(void 0===ur)throw new Oe("Graph.".concat(Yt,': could not find the "').concat(pi,'" node in the graph.'));return $l(!1,this.multi,"mixed"===tt?this.type:tt,Mt,ur,pr)}if(3===arguments.length){yr=""+yr;var Gs=this._nodes.get(pi=""+pi);if(!Gs)throw new Oe("Graph.".concat(Yt,':  could not find the "').concat(pi,'" source node in the graph.'));if(!this._nodes.has(yr))throw new Oe("Graph.".concat(Yt,':  could not find the "').concat(yr,'" target node in the graph.'));return jf(!1,tt,this.multi,Mt,Gs,yr,pr)}throw new Ut("Graph.".concat(Yt,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}};var Tn="map"+Re[0].toUpperCase()+Re.slice(1);st.prototype[Tn]=function(){var pi,yr=Array.prototype.slice.call(arguments),pr=yr.pop();if(0===yr.length){var ur=0;"directed"!==tt&&(ur+=this.undirectedSize),"undirected"!==tt&&(ur+=this.directedSize),pi=new Array(ur);var Gs=0;yr.push(function(So,Eo,ds,Ea,fs,Ya,Fu){pi[Gs++]=pr(So,Eo,ds,Ea,fs,Ya,Fu)})}else pi=[],yr.push(function(So,Eo,ds,Ea,fs,Ya,Fu){pi.push(pr(So,Eo,ds,Ea,fs,Ya,Fu))});return this[Yt].apply(this,yr),pi};var wi="filter"+Re[0].toUpperCase()+Re.slice(1);st.prototype[wi]=function(){var pi=Array.prototype.slice.call(arguments),yr=pi.pop(),pr=[];return pi.push(function(ur,Gs,So,Eo,ds,Ea,fs){yr(ur,Gs,So,Eo,ds,Ea,fs)&&pr.push(ur)}),this[Yt].apply(this,pi),pr};var si="reduce"+Re[0].toUpperCase()+Re.slice(1);st.prototype[si]=function(){var pi,yr,pr=Array.prototype.slice.call(arguments);if(pr.length<2||pr.length>4)throw new Ut("Graph.".concat(si,": invalid number of arguments (expecting 2, 3 or 4 and got ").concat(pr.length,")."));if("function"==typeof pr[pr.length-1]&&"function"!=typeof pr[pr.length-2])throw new Ut("Graph.".concat(si,": missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array."));2===pr.length?(pi=pr[0],yr=pr[1],pr=[]):3===pr.length?(pi=pr[1],yr=pr[2],pr=[pr[0]]):4===pr.length&&(pi=pr[2],yr=pr[3],pr=[pr[0],pr[1]]);var ur=yr;return pr.push(function(Gs,So,Eo,ds,Ea,fs,Ya){ur=pi(ur,Gs,So,Eo,ds,Ea,fs,Ya)}),this[Yt].apply(this,pr),ur}}(Ze,pt),function(st,ge){var Re=ge.name,tt=ge.type,Mt=ge.direction,Yt="find"+Re[0].toUpperCase()+Re.slice(1,-1);st.prototype[Yt]=function(si,pi,yr){if("mixed"!==tt&&"mixed"!==this.type&&tt!==this.type)return!1;if(1===arguments.length)return sr(!0,this,tt,yr=si);if(2===arguments.length){yr=pi;var pr=this._nodes.get(si=""+si);if(void 0===pr)throw new Oe("Graph.".concat(Yt,': could not find the "').concat(si,'" node in the graph.'));return $l(!0,this.multi,"mixed"===tt?this.type:tt,Mt,pr,yr)}if(3===arguments.length){pi=""+pi;var ur=this._nodes.get(si=""+si);if(!ur)throw new Oe("Graph.".concat(Yt,':  could not find the "').concat(si,'" source node in the graph.'));if(!this._nodes.has(pi))throw new Oe("Graph.".concat(Yt,':  could not find the "').concat(pi,'" target node in the graph.'));return jf(!0,tt,this.multi,Mt,ur,pi,yr)}throw new Ut("Graph.".concat(Yt,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))};var Tn="some"+Re[0].toUpperCase()+Re.slice(1,-1);st.prototype[Tn]=function(){var si=Array.prototype.slice.call(arguments),pi=si.pop();return si.push(function(yr,pr,ur,Gs,So,Eo,ds){return pi(yr,pr,ur,Gs,So,Eo,ds)}),!!this[Yt].apply(this,si)};var wi="every"+Re[0].toUpperCase()+Re.slice(1,-1);st.prototype[wi]=function(){var si=Array.prototype.slice.call(arguments),pi=si.pop();return si.push(function(yr,pr,ur,Gs,So,Eo,ds){return!pi(yr,pr,ur,Gs,So,Eo,ds)}),!this[Yt].apply(this,si)}}(Ze,pt),function(st,ge){var tt=ge.type,Mt=ge.direction,Yt=ge.name.slice(0,-1)+"Entries";st.prototype[Yt]=function(Tn,wi){if("mixed"!==tt&&"mixed"!==this.type&&tt!==this.type)return lt.empty();if(!arguments.length)return il(this,tt);if(1===arguments.length){var si=this._nodes.get(Tn=""+Tn);if(!si)throw new Oe("Graph.".concat(Yt,': could not find the "').concat(Tn,'" node in the graph.'));return Wf(tt,Mt,si)}if(2===arguments.length){wi=""+wi;var pi=this._nodes.get(Tn=""+Tn);if(!pi)throw new Oe("Graph.".concat(Yt,':  could not find the "').concat(Tn,'" source node in the graph.'));if(!this._nodes.has(wi))throw new Oe("Graph.".concat(Yt,':  could not find the "').concat(wi,'" target node in the graph.'));return cc(tt,Mt,pi,wi)}throw new Ut("Graph.".concat(Yt,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))}}(Ze,pt)})}(io),function(Ze){Sh.forEach(function(pt){var st,ge,Re,tt,Mt,Yt,Tn;(function Sa(Ze,pt){var st=pt.name,ge=pt.type,Re=pt.direction;Ze.prototype[st]=function(tt){if("mixed"!==ge&&"mixed"!==this.type&&ge!==this.type)return[];var Mt=this._nodes.get(tt=""+tt);if(void 0===Mt)throw new Oe("Graph.".concat(st,': could not find the "').concat(tt,'" node in the graph.'));return function(Yt,Tn,wi){if("mixed"!==Yt){if("undirected"===Yt)return Object.keys(wi.undirected);if("string"==typeof Tn)return Object.keys(wi[Tn])}var si=[];return Rd(!1,Yt,Tn,wi,function(pi){si.push(pi)}),si}("mixed"===ge?this.type:ge,Re,Mt)}})(Ze,pt),function(st,ge){var Re=ge.name,tt=ge.type,Mt=ge.direction,Yt="forEach"+Re[0].toUpperCase()+Re.slice(1,-1);st.prototype[Yt]=function(pi,yr){if("mixed"===tt||"mixed"===this.type||tt===this.type){var pr=this._nodes.get(pi=""+pi);if(void 0===pr)throw new Oe("Graph.".concat(Yt,': could not find the "').concat(pi,'" node in the graph.'));Rd(!1,"mixed"===tt?this.type:tt,Mt,pr,yr)}};var Tn="map"+Re[0].toUpperCase()+Re.slice(1);st.prototype[Tn]=function(pi,yr){var pr=[];return this[Yt](pi,function(ur,Gs){pr.push(yr(ur,Gs))}),pr};var wi="filter"+Re[0].toUpperCase()+Re.slice(1);st.prototype[wi]=function(pi,yr){var pr=[];return this[Yt](pi,function(ur,Gs){yr(ur,Gs)&&pr.push(ur)}),pr};var si="reduce"+Re[0].toUpperCase()+Re.slice(1);st.prototype[si]=function(pi,yr,pr){if(arguments.length<3)throw new Ut("Graph.".concat(si,": missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array."));var ur=pr;return this[Yt](pi,function(Gs,So){ur=yr(ur,Gs,So)}),ur}}(Ze,pt),st=Ze,tt=(ge=pt).type,Mt=ge.direction,Yt=(Re=ge.name)[0].toUpperCase()+Re.slice(1,-1),st.prototype[Tn="find"+Yt]=function(pi,yr){if("mixed"===tt||"mixed"===this.type||tt===this.type){var pr=this._nodes.get(pi=""+pi);if(void 0===pr)throw new Oe("Graph.".concat(Tn,': could not find the "').concat(pi,'" node in the graph.'));return Rd(!0,"mixed"===tt?this.type:tt,Mt,pr,yr)}},st.prototype["some"+Yt]=function(pi,yr){return!!this[Tn](pi,yr)},st.prototype["every"+Yt]=function(pi,yr){return!this[Tn](pi,function(pr,ur){return!yr(pr,ur)})},function Eh(Ze,pt){var ge=pt.type,Re=pt.direction,tt=pt.name.slice(0,-1)+"Entries";Ze.prototype[tt]=function(Mt){if("mixed"!==ge&&"mixed"!==this.type&&ge!==this.type)return lt.empty();var Yt=this._nodes.get(Mt=""+Mt);if(void 0===Yt)throw new Oe("Graph.".concat(tt,': could not find the "').concat(Mt,'" node in the graph.'));return function(Tn,wi,si){if("mixed"!==Tn){if("undirected"===Tn)return uu(null,si,si.undirected);if("string"==typeof wi)return uu(null,si,si[wi])}var pi=lt.empty(),yr=new ku;return"undirected"!==Tn&&("out"!==wi&&(pi=ze(pi,uu(yr,si,si.in))),"in"!==wi&&(pi=ze(pi,uu(yr,si,si.out)))),"directed"!==Tn&&(pi=ze(pi,uu(yr,si,si.undirected))),pi}("mixed"===ge?this.type:ge,Re,Yt)}}(Ze,pt)})}(io);var mf=function(Ze){function pt(st){var ge=P({type:"directed"},st);if("multi"in ge&&!1!==ge.multi)throw new Ut("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("directed"!==ge.type)throw new Ut('DirectedGraph.from: inconsistent "'+ge.type+'" type in given options!');return Ze.call(this,ge)||this}return U(pt,Ze),pt}(io),gl=function(Ze){function pt(st){var ge=P({type:"undirected"},st);if("multi"in ge&&!1!==ge.multi)throw new Ut("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("undirected"!==ge.type)throw new Ut('UndirectedGraph.from: inconsistent "'+ge.type+'" type in given options!');return Ze.call(this,ge)||this}return U(pt,Ze),pt}(io),Ic=function(Ze){function pt(st){var ge=P({multi:!0},st);if("multi"in ge&&!0!==ge.multi)throw new Ut("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");return Ze.call(this,ge)||this}return U(pt,Ze),pt}(io),rl=function(Ze){function pt(st){var ge=P({type:"directed",multi:!0},st);if("multi"in ge&&!0!==ge.multi)throw new Ut("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("directed"!==ge.type)throw new Ut('MultiDirectedGraph.from: inconsistent "'+ge.type+'" type in given options!');return Ze.call(this,ge)||this}return U(pt,Ze),pt}(io),$f=function(Ze){function pt(st){var ge=P({type:"undirected",multi:!0},st);if("multi"in ge&&!0!==ge.multi)throw new Ut("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("undirected"!==ge.type)throw new Ut('MultiUndirectedGraph.from: inconsistent "'+ge.type+'" type in given options!');return Ze.call(this,ge)||this}return U(pt,Ze),pt}(io);function id(Ze){Ze.from=function(pt,st){var ge=P({},pt.options,st),Re=new Ze(ge);return Re.import(pt),Re}}return id(io),id(mf),id(gl),id(Ic),id(rl),id($f),io.Graph=io,io.DirectedGraph=mf,io.UndirectedGraph=gl,io.MultiGraph=Ic,io.MultiDirectedGraph=rl,io.MultiUndirectedGraph=$f,io.InvalidArgumentsGraphError=Ut,io.NotFoundGraphError=Oe,io.UsageGraphError=fe,io}()},3173:function(He){He.exports=function(){"use strict";var U=function(_t,At){return _t.reduce(function(Lt,Ut){var Oe="[object "+Ut+"]";return At?Lt[Oe]=Ut:Lt[Ut]=Oe,Lt},{})},X=function(_t){return _t.reduce(function(At,Lt){return At[Lt]=!0,At},{})},D=["Array","Arguments","Object","RegExp","Symbol","Map","Set","Date","Error","Event","Generator","Promise","WeakMap","WeakSet","DocumentFragment","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","ArrayBuffer","DataView","DocumentFragment","Window","String","Number","Boolean","Function","Undefined","GeneratorFunction","BigInt","Null"],V=U(D,!1),O=U(D,!0),H=X([V.Generator,V.Promise,V.WeakMap,V.WeakSet]),L=X([V.Map,V.Set]),P=X([V.Date,V.RegExp]),q=X(["bigint","boolean","function","number","string","undefined"]),ee=X([V.Arguments,V.Array]),K=X([V.RegExp,V.Symbol]),ne=X([V.Float32Array,V.Float64Array,V.Int8Array,V.Int16Array,V.Int32Array,V.Uint8Array,V.Uint8ClampedArray,V.Uint16Array,V.Uint32Array]),se=typeof Buffer<"u"&&"function"==typeof Buffer.from,J="function"==typeof Uint16Array;var Ee=se?function ae(Ge){return Buffer.from(Ge).toString("utf8")}:J?function W(Ge){return String.fromCharCode.apply(null,new Uint16Array(Ge))}:function _e(Ge){return""},te=/\[object ([HTML|SVG](.*)Element)\]/,oe=Object.prototype.toString,B=Object.keys;function ie(Ge,_t){return Ge>_t}function pe(Ge,_t){return Ge[0]>_t[0]}function Be(Ge,_t){for(var At,Lt,Ut=0;Ut<Ge.length;++Ut){for(Lt=Ge[Ut],At=Ut-1;~At&&_t(Ge[At],Lt);--At)Ge[At+1]=Ge[At];Ge[At+1]=Lt}return Ge}function ot(Ge,_t){for(var At=0;At<Ge.length;++At)if(Ge[At]===_t)return At+1;return 0}function Fe(Ge,_t,At,Lt){if(!Lt){var Ut=typeof Ge;if(q[Ut])return Ut+"|"+Ge;if(null===Ge)return Ge+"|"+Ge}var Oe=Lt||oe.call(Ge);return ee[Oe]?Ge:Oe===V.Object?function ue(Ge){for(var Lt,_t=Be(B(Ge),ie),At={},Ut=0;Ut<_t.length;++Ut)At[Lt=_t[Ut]]=Ge[Lt];return At}(Ge):K[Oe]?O[Oe]+"|"+Ge.toString():L[Oe]?Ge instanceof Map?function Me(Ge,_t,At){var Lt=[];Ge.forEach(function(fe,wt){Lt.push([lt(wt,_t,At),lt(fe,_t,At)])}),Be(Lt,pe);for(var Oe,Ut=0;Ut<Lt.length;++Ut)Lt[Ut]="["+(Oe=Lt[Ut])[0]+","+Oe[1]+"]";return"Map|["+Lt.join(",")+"]"}(Ge,_t,At):function xe(Ge,_t,At){var Lt=[];return Ge.forEach(function(Ut){Lt.push(lt(Ut,_t,At))}),Be(Lt,ie),"Set|["+Lt.join(",")+"]"}(Ge,_t,At):Oe===V.Date?O[Oe]+"|"+Ge.getTime():Oe===V.Error?O[Oe]+"|"+Ge.stack:Oe===V.Event?function $(Ge){return{bubbles:Ge.bubbles,cancelBubble:Ge.cancelBubble,cancelable:Ge.cancelable,composed:Ge.composed,currentTarget:Ge.currentTarget,defaultPrevented:Ge.defaultPrevented,eventPhase:Ge.eventPhase,isTrusted:Ge.isTrusted,returnValue:Ge.returnValue,target:Ge.target,type:Ge.type}}(Ge):H[Oe]?O[Oe]+"|NOT_ENUMERABLE":te.test(Oe)?Oe.slice(8,-1)+"|"+Ge.outerHTML:Oe===V.DocumentFragment?O[Oe]+"|"+function Pe(Ge){for(var _t=Ge.children,At=[],Lt=0;Lt<_t.length;++Lt)At.push(_t[Lt].outerHTML);return At.join(",")}(Ge):ne[Oe]?O[Oe]+"|"+Ge.join(","):Oe===V.ArrayBuffer?O[Oe]+"|"+Ee(Ge):Oe===V.DataView?O[Oe]+"|"+Ee(Ge.buffer):Ge}function lt(Ge,_t,At){if(!Ge||"object"!=typeof Ge)return Fe(Ge,_t,At);var Lt=oe.call(Ge);return P[Lt]?Fe(Ge,_t,At,Lt):JSON.stringify(Ge,function Ye(Ge,_t){return void 0===Ge&&(Ge=[]),void 0===_t&&(_t=[]),function(At,Lt){if("object"==typeof Lt)if(Ge.length){var Ut=ot(Ge,this);0===Ut?Ge.push(this):(Ge.splice(Ut),_t.splice(Ut)),_t.push(At);var Oe=ot(Ge,Lt);if(0!==Oe)return"[~"+(_t.slice(0,Oe).join(".")||".")+"]";Ge.push(Lt)}else Ge[0]=Lt,_t[0]=At;return At&&this[At]instanceof Date?Fe(this[At],Ge,_t,V.Date):Fe(Lt,Ge,_t)}}(_t,At))}function vt(Ge){return function we(Ge){for(var Ut,_t=Ge.length,At=5381,Lt=52711;_t--;)At=33*At^(Ut=Ge.charCodeAt(_t)),Lt=33*Lt^Ut;return 4096*(At>>>0)+(Lt>>>0)}(lt(Ge))}function vn(Ge,_t){return vt(Ge)===vt(_t)}return vn.all=function Ne(Ge){for(var _t=0;_t<(arguments.length<=1?0:arguments.length-1);++_t)if(!vn(Ge,_t+1<1||arguments.length<=_t+1?void 0:arguments[_t+1]))return!1;return!0},vn.any=function ht(Ge){for(var _t=0;_t<(arguments.length<=1?0:arguments.length-1);++_t)if(vn(Ge,_t+1<1||arguments.length<=_t+1?void 0:arguments[_t+1]))return!0;return!1},vn.not=function rt(Ge,_t){return vt(Ge)!==vt(_t)},vt.is=vn,vt}()},5203:(He,we,U)=>{He.exports=U(8732)},8732:function(He,we){var U,X,D;(function(){var V,O,H,L,P,q,ee,K,ne,se,J,W,ae,_e,Ee;H=Math.floor,se=Math.min,O=function(te,oe){return te<oe?-1:te>oe?1:0},ne=function(te,oe,B,$,ie){var pe;if(null==B&&(B=0),null==ie&&(ie=O),B<0)throw new Error("lo must be non-negative");for(null==$&&($=te.length);B<$;)ie(oe,te[pe=H((B+$)/2)])<0?$=pe:B=pe+1;return[].splice.apply(te,[B,B-B].concat(oe)),oe},q=function(te,oe,B){return null==B&&(B=O),te.push(oe),_e(te,0,te.length-1,B)},P=function(te,oe){var B,$;return null==oe&&(oe=O),B=te.pop(),te.length?($=te[0],te[0]=B,Ee(te,0,oe)):$=B,$},K=function(te,oe,B){var $;return null==B&&(B=O),$=te[0],te[0]=oe,Ee(te,0,B),$},ee=function(te,oe,B){var $;return null==B&&(B=O),te.length&&B(te[0],oe)<0&&(oe=($=[te[0],oe])[0],te[0]=$[1],Ee(te,0,B)),oe},L=function(te,oe){var $,pe,Me,xe,ue;for(null==oe&&(oe=O),xe=[],$=0,pe=(Me=function(){ue=[];for(var Pe=0,ot=H(te.length/2);0<=ot?Pe<ot:Pe>ot;0<=ot?Pe++:Pe--)ue.push(Pe);return ue}.apply(this).reverse()).length;$<pe;$++)xe.push(Ee(te,Me[$],oe));return xe},ae=function(te,oe,B){var $;if(null==B&&(B=O),-1!==($=te.indexOf(oe)))return _e(te,0,$,B),Ee(te,$,B)},J=function(te,oe,B){var ie,pe,Be,Me;if(null==B&&(B=O),!(ie=te.slice(0,oe)).length)return ie;for(L(ie,B),pe=0,Be=(Me=te.slice(oe)).length;pe<Be;pe++)ee(ie,Me[pe],B);return ie.sort(B).reverse()},W=function(te,oe,B){var $,pe,Be,Me,xe,ue,Pe,ot,Fe;if(null==B&&(B=O),10*oe<=te.length){if(!(Be=te.slice(0,oe).sort(B)).length)return Be;for(pe=Be[Be.length-1],Me=0,ue=(Pe=te.slice(oe)).length;Me<ue;Me++)B($=Pe[Me],pe)<0&&(ne(Be,$,0,null,B),Be.pop(),pe=Be[Be.length-1]);return Be}for(L(te,B),Fe=[],xe=0,ot=se(oe,te.length);0<=ot?xe<ot:xe>ot;0<=ot?++xe:--xe)Fe.push(P(te,B));return Fe},_e=function(te,oe,B,$){var ie,pe,Be;for(null==$&&($=O),ie=te[B];B>oe&&$(ie,pe=te[Be=B-1>>1])<0;)te[B]=pe,B=Be;return te[B]=ie},Ee=function(te,oe,B){var $,ie,pe,Be,Me;for(null==B&&(B=O),ie=te.length,Me=oe,pe=te[oe],$=2*oe+1;$<ie;)(Be=$+1)<ie&&!(B(te[$],te[Be])<0)&&($=Be),te[oe]=te[$],$=2*(oe=$)+1;return te[oe]=pe,_e(te,Me,oe,B)},V=function(){function te(oe){this.cmp=oe??O,this.nodes=[]}return te.push=q,te.pop=P,te.replace=K,te.pushpop=ee,te.heapify=L,te.updateItem=ae,te.nlargest=J,te.nsmallest=W,te.prototype.push=function(oe){return q(this.nodes,oe,this.cmp)},te.prototype.pop=function(){return P(this.nodes,this.cmp)},te.prototype.peek=function(){return this.nodes[0]},te.prototype.contains=function(oe){return-1!==this.nodes.indexOf(oe)},te.prototype.replace=function(oe){return K(this.nodes,oe,this.cmp)},te.prototype.pushpop=function(oe){return ee(this.nodes,oe,this.cmp)},te.prototype.heapify=function(){return L(this.nodes,this.cmp)},te.prototype.updateItem=function(oe){return ae(this.nodes,oe,this.cmp)},te.prototype.clear=function(){return this.nodes=[]},te.prototype.empty=function(){return 0===this.nodes.length},te.prototype.size=function(){return this.nodes.length},te.prototype.clone=function(){var oe;return(oe=new te).nodes=this.nodes.slice(0),oe},te.prototype.toArray=function(){return this.nodes.slice(0)},te.prototype.insert=te.prototype.push,te.prototype.top=te.prototype.peek,te.prototype.front=te.prototype.peek,te.prototype.has=te.prototype.contains,te.prototype.copy=te.prototype.clone,te}(),X=[],void 0===(D="function"==typeof(U=function(){return V})?U.apply(we,X):U)||(He.exports=D)}).call(this)},8461:(He,we)=>{we.read=function(U,X,D,V,O){var H,L,P=8*O-V-1,q=(1<<P)-1,ee=q>>1,K=-7,ne=D?O-1:0,se=D?-1:1,J=U[X+ne];for(ne+=se,H=J&(1<<-K)-1,J>>=-K,K+=P;K>0;H=256*H+U[X+ne],ne+=se,K-=8);for(L=H&(1<<-K)-1,H>>=-K,K+=V;K>0;L=256*L+U[X+ne],ne+=se,K-=8);if(0===H)H=1-ee;else{if(H===q)return L?NaN:1/0*(J?-1:1);L+=Math.pow(2,V),H-=ee}return(J?-1:1)*L*Math.pow(2,H-V)},we.write=function(U,X,D,V,O,H){var L,P,q,ee=8*H-O-1,K=(1<<ee)-1,ne=K>>1,se=23===O?Math.pow(2,-24)-Math.pow(2,-77):0,J=V?0:H-1,W=V?1:-1,ae=X<0||0===X&&1/X<0?1:0;for(X=Math.abs(X),isNaN(X)||X===1/0?(P=isNaN(X)?1:0,L=K):(L=Math.floor(Math.log(X)/Math.LN2),X*(q=Math.pow(2,-L))<1&&(L--,q*=2),(X+=L+ne>=1?se/q:se*Math.pow(2,1-ne))*q>=2&&(L++,q/=2),L+ne>=K?(P=0,L=K):L+ne>=1?(P=(X*q-1)*Math.pow(2,O),L+=ne):(P=X*Math.pow(2,ne-1)*Math.pow(2,O),L=0));O>=8;U[D+J]=255&P,J+=W,P/=256,O-=8);for(L=L<<O|P,ee+=O;ee>0;U[D+J]=255&L,J+=W,L/=256,ee-=8);U[D+J-W]|=128*ae}},3894:He=>{He.exports="function"==typeof Object.create?function(U,X){X&&(U.super_=X,U.prototype=Object.create(X.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}}))}:function(U,X){if(X){U.super_=X;var D=function(){};D.prototype=X.prototype,U.prototype=new D,U.prototype.constructor=U}}},2230:(He,we,U)=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0});var X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ae){return typeof ae}:function(ae){return ae&&"function"==typeof Symbol&&ae.constructor===Symbol&&ae!==Symbol.prototype?"symbol":typeof ae},D=function(){function ae(_e,Ee){for(var te=0;te<Ee.length;te++){var oe=Ee[te];oe.enumerable=oe.enumerable||!1,oe.configurable=!0,"value"in oe&&(oe.writable=!0),Object.defineProperty(_e,oe.key,oe)}}return function(_e,Ee,te){return Ee&&ae(_e.prototype,Ee),te&&ae(_e,te),_e}}(),O=ne(U(5173)),H=U(1268),P=ne(U(305)),q=U(1573),K=ne(U(6729));function ne(ae){return ae&&ae.__esModule?ae:{default:ae}}function se(ae,_e){if(!(ae instanceof _e))throw new TypeError("Cannot call a class as a function")}function J(ae,_e){return(0,q.JSONPath)({path:_e,json:ae,wrap:!1})}var W=function(){function ae(_e){var Ee=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},te=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(var oe in se(this,ae),this.factMap=new Map(_e),this.factResultsCache=new Map,this.allowUndefinedFacts=Boolean(te.allowUndefinedFacts),this.pathResolver=te.pathResolver||J,this.events={success:[],failure:[]},this.ruleResults=[],Ee){var B=void 0;B=Ee[oe]instanceof O.default?Ee[oe]:new O.default(oe,Ee[oe]),this._addConstantFact(B),(0,P.default)("almanac::constructor initialized runtime fact:"+B.id+" with "+B.value+"<"+X(B.value)+">")}}return D(ae,[{key:"addEvent",value:function(Ee,te){if(!te)throw new Error('outcome required: "success" | "failure"]');this.events[te].push(Ee)}},{key:"getEvents",value:function(){var Ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Ee?this.events[Ee]:this.events.success.concat(this.events.failure)}},{key:"addResult",value:function(Ee){this.ruleResults.push(Ee)}},{key:"getResults",value:function(){return this.ruleResults}},{key:"_getFact",value:function(Ee){return this.factMap.get(Ee)}},{key:"_addConstantFact",value:function(Ee){this.factMap.set(Ee.id,Ee),this._setFactValue(Ee,{},Ee.value)}},{key:"_setFactValue",value:function(Ee,te,oe){var B=Ee.getCacheKey(te),$=Promise.resolve(oe);return B&&this.factResultsCache.set(B,$),$}},{key:"addRuntimeFact",value:function(Ee,te){(0,P.default)("almanac::addRuntimeFact id:"+Ee);var oe=new O.default(Ee,te);return this._addConstantFact(oe)}},{key:"factValue",value:function(Ee){var te=this,oe=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},B=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",$=void 0,ie=this._getFact(Ee);if(void 0===ie)return this.allowUndefinedFacts?Promise.resolve(void 0):Promise.reject(new H.UndefinedFactError("Undefined fact: "+Ee));if(ie.isConstant())$=Promise.resolve(ie.calculate(oe,this));else{var pe=ie.getCacheKey(oe),Be=pe&&this.factResultsCache.get(pe);Be?($=Promise.resolve(Be),(0,P.default)("almanac::factValue cache hit for fact:"+Ee)):((0,P.default)("almanac::factValue cache miss for fact:"+Ee+"; calculating"),$=this._setFactValue(ie,oe,ie.calculate(oe,this)))}return B?((0,P.default)("condition::evaluate extracting object property "+B),$.then(function(Me){if((0,K.default)(Me)){var xe=te.pathResolver(Me,B);return(0,P.default)("condition::evaluate extracting object property "+B+", received: "+JSON.stringify(xe)),xe}return(0,P.default)("condition::evaluate could not compute object path("+B+") of non-object: "+Me+" <"+(typeof Me>"u"?"undefined":X(Me))+">; continuing with "+Me),Me})):$}}]),ae}();we.default=W},7762:(He,we,U)=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0});var X=function(){function ee(K,ne){for(var se=0;se<ne.length;se++){var J=ne[se];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(K,J.key,J)}}return function(K,ne,se){return ne&&ee(K.prototype,ne),se&&ee(K,se),K}}(),V=L(U(305)),H=L(U(6729));function L(ee){return ee&&ee.__esModule?ee:{default:ee}}var q=function(){function ee(K){if(function P(ee,K){if(!(ee instanceof K))throw new TypeError("Cannot call a class as a function")}(this,ee),!K)throw new Error("Condition: constructor options required");var ne=ee.booleanOperator(K);if(Object.assign(this,K),ne){var se=K[ne];if(!Array.isArray(se))throw new Error('"'+ne+'" must be an array');this.operator=ne,this.priority=parseInt(K.priority,10)||1,this[ne]=se.map(function(J){return new ee(J)})}else{if(!Object.prototype.hasOwnProperty.call(K,"fact"))throw new Error('Condition: constructor "fact" property required');if(!Object.prototype.hasOwnProperty.call(K,"operator"))throw new Error('Condition: constructor "operator" property required');if(!Object.prototype.hasOwnProperty.call(K,"value"))throw new Error('Condition: constructor "value" property required');Object.prototype.hasOwnProperty.call(K,"priority")&&(K.priority=parseInt(K.priority,10))}}return X(ee,[{key:"toJSON",value:function(){var ne=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],se={};this.priority&&(se.priority=this.priority);var J=ee.booleanOperator(this);return J?se[J]=this[J].map(function(W){return W.toJSON(ne)}):(se.operator=this.operator,se.value=this.value,se.fact=this.fact,void 0!==this.factResult&&(se.factResult=this.factResult),void 0!==this.result&&(se.result=this.result),this.params&&(se.params=this.params),this.path&&(se.path=this.path)),ne?JSON.stringify(se):se}},{key:"_getValue",value:function(ne){var se=this.value;return(0,H.default)(se)&&Object.prototype.hasOwnProperty.call(se,"fact")?ne.factValue(se.fact,se.params,se.path):Promise.resolve(se)}},{key:"evaluate",value:function(ne,se){var J=this;if(!ne)return Promise.reject(new Error("almanac required"));if(!se)return Promise.reject(new Error("operatorMap required"));if(this.isBooleanOperator())return Promise.reject(new Error("Cannot evaluate() a boolean condition"));var W=se.get(this.operator);return W?this._getValue(ne).then(function(ae){return ne.factValue(J.fact,J.params,J.path).then(function(_e){var Ee=W.evaluate(_e,ae);return(0,V.default)("condition::evaluate <"+JSON.stringify(_e)+" "+J.operator+" "+JSON.stringify(ae)+"?> ("+Ee+")"),{result:Ee,leftHandSideValue:_e,rightHandSideValue:ae,operator:J.operator}})}):Promise.reject(new Error("Unknown operator: "+this.operator))}},{key:"booleanOperator",value:function(){return ee.booleanOperator(this)}},{key:"isBooleanOperator",value:function(){return void 0!==ee.booleanOperator(this)}}],[{key:"booleanOperator",value:function(ne){return Object.prototype.hasOwnProperty.call(ne,"any")?"any":Object.prototype.hasOwnProperty.call(ne,"all")?"all":void 0}}]),ee}();we.default=q},305:(He,we)=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0}),we.default=function U(X){try{(typeof process<"u"&&process.env&&process.env.DEBUG&&process.env.DEBUG.match(/json-rules-engine/)||typeof window<"u"&&window.localStorage&&window.localStorage.debug&&window.localStorage.debug.match(/json-rules-engine/))&&console.log(X)}catch{}}},3094:(He,we,U)=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0});var D=function V(L){return L&&L.__esModule?L:{default:L}}(U(5010)),O=[];function H(L){return"NaN"!==Number.parseFloat(L).toString()}O.push(new D.default("equal",function(L,P){return L===P})),O.push(new D.default("notEqual",function(L,P){return L!==P})),O.push(new D.default("in",function(L,P){return P.indexOf(L)>-1})),O.push(new D.default("notIn",function(L,P){return-1===P.indexOf(L)})),O.push(new D.default("contains",function(L,P){return L.indexOf(P)>-1},Array.isArray)),O.push(new D.default("doesNotContain",function(L,P){return-1===L.indexOf(P)},Array.isArray)),O.push(new D.default("lessThan",function(L,P){return L<P},H)),O.push(new D.default("lessThanInclusive",function(L,P){return L<=P},H)),O.push(new D.default("greaterThan",function(L,P){return L>P},H)),O.push(new D.default("greaterThanInclusive",function(L,P){return L>=P},H)),we.default=O},3350:(He,we,U)=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0}),we.FINISHED=we.RUNNING=we.READY=void 0;var X=function(){function Be(Me,xe){for(var ue=0;ue<xe.length;ue++){var Pe=xe[ue];Pe.enumerable=Pe.enumerable||!1,Pe.configurable=!0,"value"in Pe&&(Pe.writable=!0),Object.defineProperty(Me,Pe.key,Pe)}}return function(Me,xe,ue){return xe&&Be(Me.prototype,xe),ue&&Be(Me,ue),Me}}(),V=_e(U(5173)),H=_e(U(7287)),P=_e(U(5010)),ee=_e(U(2230)),ne=_e(U(31)),J=_e(U(3094)),ae=_e(U(305));function _e(Be){return Be&&Be.__esModule?Be:{default:Be}}function Ee(Be,Me){if(!(Be instanceof Me))throw new TypeError("Cannot call a class as a function")}function te(Be,Me){if(!Be)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!Me||"object"!=typeof Me&&"function"!=typeof Me?Be:Me}var B=we.READY="READY",$=we.RUNNING="RUNNING",ie=we.FINISHED="FINISHED",pe=function(Be){function Me(){var xe=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],ue=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ee(this,Me);var Pe=te(this,(Me.__proto__||Object.getPrototypeOf(Me)).call(this));return Pe.rules=[],Pe.allowUndefinedFacts=ue.allowUndefinedFacts||!1,Pe.pathResolver=ue.pathResolver,Pe.operators=new Map,Pe.facts=new Map,Pe.status=B,xe.map(function(ot){return Pe.addRule(ot)}),J.default.map(function(ot){return Pe.addOperator(ot)}),Pe}return function oe(Be,Me){if("function"!=typeof Me&&null!==Me)throw new TypeError("Super expression must either be null or a function, not "+typeof Me);Be.prototype=Object.create(Me&&Me.prototype,{constructor:{value:Be,enumerable:!1,writable:!0,configurable:!0}}),Me&&(Object.setPrototypeOf?Object.setPrototypeOf(Be,Me):Be.__proto__=Me)}(Me,Be),X(Me,[{key:"addRule",value:function(ue){if(!ue)throw new Error("Engine: addRule() requires options");var Pe=void 0;if(ue instanceof H.default)Pe=ue;else{if(!Object.prototype.hasOwnProperty.call(ue,"event"))throw new Error('Engine: addRule() argument requires "event" property');if(!Object.prototype.hasOwnProperty.call(ue,"conditions"))throw new Error('Engine: addRule() argument requires "conditions" property');Pe=new H.default(ue)}return Pe.setEngine(this),this.rules.push(Pe),this.prioritizedRules=null,this}},{key:"updateRule",value:function(ue){var Pe=this.rules.findIndex(function(ot){return ot.name===ue.name});if(!(Pe>-1))throw new Error("Engine: updateRule() rule not found");this.rules.splice(Pe,1),this.addRule(ue),this.prioritizedRules=null}},{key:"removeRule",value:function(ue){var Pe=!1;if(ue instanceof H.default){var Fe=this.rules.indexOf(ue);Fe>-1&&(Pe=Boolean(this.rules.splice(Fe,1).length))}else{var ot=this.rules.filter(function(Ye){return Ye.name!==ue});Pe=ot.length!==this.rules.length,this.rules=ot}return Pe&&(this.prioritizedRules=null),Pe}},{key:"addOperator",value:function(ue,Pe){var ot;ot=ue instanceof P.default?ue:new P.default(ue,Pe),(0,ae.default)("engine::addOperator name:"+ot.name),this.operators.set(ot.name,ot)}},{key:"removeOperator",value:function(ue){return this.operators.delete(ue instanceof P.default?ue.name:ue)}},{key:"addFact",value:function(ue,Pe,ot){var Fe=ue,Ye=void 0;return ue instanceof V.default?(Fe=ue.id,Ye=ue):Ye=new V.default(ue,Pe,ot),(0,ae.default)("engine::addFact id:"+Fe),this.facts.set(Fe,Ye),this}},{key:"removeFact",value:function(ue){return this.facts.delete(ue instanceof V.default?ue.id:ue)}},{key:"prioritizeRules",value:function(){if(!this.prioritizedRules){var ue=this.rules.reduce(function(Pe,ot){var Fe=ot.priority;return Pe[Fe]||(Pe[Fe]=[]),Pe[Fe].push(ot),Pe},{});this.prioritizedRules=Object.keys(ue).sort(function(Pe,ot){return Number(Pe)>Number(ot)?-1:1}).map(function(Pe){return ue[Pe]})}return this.prioritizedRules}},{key:"stop",value:function(){return this.status=ie,this}},{key:"getFact",value:function(ue){return this.facts.get(ue)}},{key:"evaluateRules",value:function(ue,Pe){var ot=this;return Promise.all(ue.map(function(Fe){return ot.status!==$?((0,ae.default)("engine::run status:"+ot.status+"; skipping remaining rules"),Promise.resolve()):Fe.evaluate(Pe).then(function(Ye){return(0,ae.default)("engine::run ruleResult:"+Ye.result),Pe.addResult(Ye),Ye.result?(Pe.addEvent(Ye.event,"success"),ot.emitAsync("success",Ye.event,Pe,Ye).then(function(){return ot.emitAsync(Ye.event.type,Ye.event.params,Pe,Ye)})):(Pe.addEvent(Ye.event,"failure"),ot.emitAsync("failure",Ye.event,Pe,Ye))})}))}},{key:"run",value:function(){var ue=this,Pe=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,ae.default)("engine::run started"),this.status=$;var ot={allowUndefinedFacts:this.allowUndefinedFacts,pathResolver:this.pathResolver},Fe=new ee.default(this.facts,Pe,ot),Ye=this.prioritizeRules(),lt=Promise.resolve();return new Promise(function(vt,vn){Ye.map(function(Ne){return lt=lt.then(function(){return ue.evaluateRules(Ne,Fe)}).catch(vn)}),lt.then(function(){ue.status=ie,(0,ae.default)("engine::run completed");var ht=Fe.getResults().reduce(function(_t,At){return _t[At.result?"results":"failureResults"].push(At),_t},{results:[],failureResults:[]});vt({almanac:Fe,results:ht.results,failureResults:ht.failureResults,events:Fe.getEvents("success"),failureEvents:Fe.getEvents("failure")})}).catch(vn)})}}]),Me}(ne.default);we.default=pe},1268:(He,we)=>{"use strict";function U(O,H){if(!(O instanceof H))throw new TypeError("Cannot call a class as a function")}function X(O,H){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!H||"object"!=typeof H&&"function"!=typeof H?O:H}Object.defineProperty(we,"__esModule",{value:!0}),we.UndefinedFactError=function(O){function H(){var L;U(this,H);for(var P=arguments.length,q=Array(P),ee=0;ee<P;ee++)q[ee]=arguments[ee];var K=X(this,(L=H.__proto__||Object.getPrototypeOf(H)).call.apply(L,[this].concat(q)));return K.code="UNDEFINED_FACT",K}return function D(O,H){if("function"!=typeof H&&null!==H)throw new TypeError("Super expression must either be null or a function, not "+typeof H);O.prototype=Object.create(H&&H.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),H&&(Object.setPrototypeOf?Object.setPrototypeOf(O,H):O.__proto__=H)}(H,Error),H}()},5173:(He,we,U)=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0});var X=function(){function P(q,ee){for(var K=0;K<ee.length;K++){var ne=ee[K];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(q,ne.key,ne)}}return function(q,ee,K){return ee&&P(q.prototype,ee),K&&P(q,K),q}}(),V=function O(P){return P&&P.__esModule?P:{default:P}}(U(3173)),L=function(){function P(q,ee,K){(function H(P,q){if(!(P instanceof q))throw new TypeError("Cannot call a class as a function")})(this,P),this.id=q;var ne={cache:!0};if(typeof K>"u"&&(K=ne),"function"!=typeof ee?(this.value=ee,this.type=this.constructor.CONSTANT):(this.calculationMethod=ee,this.type=this.constructor.DYNAMIC),!this.id)throw new Error("factId required");return this.priority=parseInt(K.priority||1,10),this.options=Object.assign({},ne,K),this.cacheKeyMethod=this.defaultCacheKeys,this}return X(P,[{key:"isConstant",value:function(){return this.type===this.constructor.CONSTANT}},{key:"isDynamic",value:function(){return this.type===this.constructor.DYNAMIC}},{key:"calculate",value:function(ee,K){return Object.prototype.hasOwnProperty.call(this,"value")?this.value:this.calculationMethod(ee,K)}},{key:"defaultCacheKeys",value:function(ee,K){return{params:K,id:ee}}},{key:"getCacheKey",value:function(ee){if(!0===this.options.cache){var K=this.cacheKeyMethod(this.id,ee);return P.hashFromObject(K)}}}],[{key:"hashFromObject",value:function(ee){return(0,V.default)(ee)}}]),P}();L.CONSTANT="CONSTANT",L.DYNAMIC="DYNAMIC",we.default=L},926:(He,we,U)=>{"use strict";He.exports=U(4308)},4308:(He,we,U)=>{"use strict";we.Engine=void 0;var V=K(U(3350));K(U(5173)),K(U(7287)),K(U(5010));function K(ne){return ne&&ne.__esModule?ne:{default:ne}}we.Engine=V.default},5010:(He,we)=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0});var U=function(){function V(O,H){for(var L=0;L<H.length;L++){var P=H[L];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(O,P.key,P)}}return function(O,H,L){return H&&V(O.prototype,H),L&&V(O,L),O}}(),D=function(){function V(O,H,L){if(function X(V,O){if(!(V instanceof O))throw new TypeError("Cannot call a class as a function")}(this,V),this.name=String(O),!O)throw new Error("Missing operator name");if("function"!=typeof H)throw new Error("Missing operator callback");this.cb=H,this.factValueValidator=L,this.factValueValidator||(this.factValueValidator=function(){return!0})}return U(V,[{key:"evaluate",value:function(H,L){return this.factValueValidator(H)&&this.cb(H,L)}}]),V}();we.default=D},6219:(He,we,U)=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0});var X=function(){function P(q,ee){for(var K=0;K<ee.length;K++){var ne=ee[K];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(q,ne.key,ne)}}return function(q,ee,K){return ee&&P(q.prototype,ee),K&&P(q,K),q}}(),V=function O(P){return P&&P.__esModule?P:{default:P}}(U(1433)),L=function(){function P(q,ee,K,ne){(function H(P,q){if(!(P instanceof q))throw new TypeError("Cannot call a class as a function")})(this,P),this.conditions=(0,V.default)(q),this.event=(0,V.default)(ee),this.priority=(0,V.default)(K),this.name=(0,V.default)(ne),this.result=null}return X(P,[{key:"setResult",value:function(ee){this.result=ee}},{key:"toJSON",value:function(){var ee=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],K={conditions:this.conditions.toJSON(!1),event:this.event,priority:this.priority,name:this.name,result:this.result};return ee?JSON.stringify(K):K}}]),P}();we.default=L},7287:(He,we,U)=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0});var X=function(){function ae(_e,Ee){for(var te=0;te<Ee.length;te++){var oe=Ee[te];oe.enumerable=oe.enumerable||!1,oe.configurable=!0,"value"in oe&&(oe.writable=!0),Object.defineProperty(_e,oe.key,oe)}}return function(_e,Ee,te){return Ee&&ae(_e.prototype,Ee),te&&ae(_e,te),_e}}(),V=K(U(7762)),H=K(U(6219)),P=K(U(305));function K(ae){return ae&&ae.__esModule?ae:{default:ae}}var W=function(ae){function _e(Ee){!function ne(ae,_e){if(!(ae instanceof _e))throw new TypeError("Cannot call a class as a function")}(this,_e);var te=function se(ae,_e){if(!ae)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!_e||"object"!=typeof _e&&"function"!=typeof _e?ae:_e}(this,(_e.__proto__||Object.getPrototypeOf(_e)).call(this));return"string"==typeof Ee&&(Ee=JSON.parse(Ee)),Ee&&Ee.conditions&&te.setConditions(Ee.conditions),Ee&&Ee.onSuccess&&te.on("success",Ee.onSuccess),Ee&&Ee.onFailure&&te.on("failure",Ee.onFailure),Ee&&(Ee.name||0===Ee.name)&&te.setName(Ee.name),te.setPriority(Ee&&Ee.priority||1),te.setEvent(Ee&&Ee.event||{type:"unknown"}),te}return function J(ae,_e){if("function"!=typeof _e&&null!==_e)throw new TypeError("Super expression must either be null or a function, not "+typeof _e);ae.prototype=Object.create(_e&&_e.prototype,{constructor:{value:ae,enumerable:!1,writable:!0,configurable:!0}}),_e&&(Object.setPrototypeOf?Object.setPrototypeOf(ae,_e):ae.__proto__=_e)}(_e,ae),X(_e,[{key:"setPriority",value:function(te){if((te=parseInt(te,10))<=0)throw new Error("Priority must be greater than zero");return this.priority=te,this}},{key:"setName",value:function(te){if(!te&&0!==te)throw new Error('Rule "name" must be defined');return this.name=te,this}},{key:"setConditions",value:function(te){if(!Object.prototype.hasOwnProperty.call(te,"all")&&!Object.prototype.hasOwnProperty.call(te,"any"))throw new Error('"conditions" root must contain a single instance of "all" or "any"');return this.conditions=new V.default(te),this}},{key:"setEvent",value:function(te){if(!te)throw new Error("Rule: setEvent() requires event object");if(!Object.prototype.hasOwnProperty.call(te,"type"))throw new Error('Rule: setEvent() requires event object with "type" property');return this.ruleEvent={type:te.type},te.params&&(this.ruleEvent.params=te.params),this}},{key:"getEvent",value:function(){return this.ruleEvent}},{key:"getPriority",value:function(){return this.priority}},{key:"getConditions",value:function(){return this.conditions}},{key:"getEngine",value:function(){return this.engine}},{key:"setEngine",value:function(te){return this.engine=te,this}},{key:"toJSON",value:function(){var te=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],oe={conditions:this.conditions.toJSON(!1),priority:this.priority,event:this.ruleEvent,name:this.name};return te?JSON.stringify(oe):oe}},{key:"prioritizeConditions",value:function(te){var oe=this,B=te.reduce(function($,ie){var pe=ie.priority;if(!pe){var Be=oe.engine.getFact(ie.fact);pe=Be&&Be.priority||1}return $[pe]||($[pe]=[]),$[pe].push(ie),$},{});return Object.keys(B).sort(function($,ie){return Number($)>Number(ie)?-1:1}).map(function($){return B[$]})}},{key:"evaluate",value:function(te){var oe=this,B=new H.default(this.conditions,this.ruleEvent,this.priority,this.name),pe=function(Pe,ot){if(0===Pe.length)return Promise.resolve(!0);var Fe=Array.prototype.some;"all"===ot&&(Fe=Array.prototype.every);for(var Ye=oe.prioritizeConditions(Pe),lt=Promise.resolve(),vt=function(ht){var rt=Ye[ht],Ge=!1;lt=lt.then(function(_t){return"any"===ot&&!0===_t||Ge?((0,P.default)("prioritizeAndRun::detected truthy result; skipping remaining conditions"),Ge=!0,!0):"all"===ot&&!1===_t||Ge?((0,P.default)("prioritizeAndRun::detected falsey result; skipping remaining conditions"),Ge=!0,!1):function(Pe,ot){return Array.isArray(Pe)||(Pe=[Pe]),Promise.all(Pe.map(function(Fe){return function(Pe){if(Pe.isBooleanOperator()){var ot=Pe[Pe.operator];return("all"===Pe.operator?Me(ot):Be(ot)).then(function(Ye){var lt=!0===Ye;return Pe.result=lt,lt})}return Pe.evaluate(te,oe.engine.operators).then(function(Ye){var lt=Ye.result;return Pe.factResult=Ye.leftHandSideValue,Pe.result=lt,lt})}(Fe)})).then(function(Fe){return(0,P.default)("rule::evaluateConditions results",Fe),ot.call(Fe,function(Ye){return!0===Ye})})}(rt,Fe)})},vn=0;vn<Ye.length;vn++)vt(vn);return lt},Be=function(Pe){return pe(Pe,"any")},Me=function(Pe){return pe(Pe,"all")},xe=function(Pe){return B.setResult(Pe),oe.emitAsync(Pe?"success":"failure",B.event,te,B).then(function(){return B})};return B.conditions.any?Be(B.conditions.any).then(function(ue){return xe(ue)}):Me(B.conditions.all).then(function(ue){return xe(ue)})}}]),_e}(K(U(31)).default);we.default=W},1433:He=>{var we=function(){"use strict";function U(K,ne){return null!=ne&&K instanceof ne}var X,D,V;try{X=Map}catch{X=function(){}}try{D=Set}catch{D=function(){}}try{V=Promise}catch{V=function(){}}function O(K,ne,se,J,W){"object"==typeof ne&&(se=ne.depth,J=ne.prototype,W=ne.includeNonEnumerable,ne=ne.circular);var ae=[],_e=[],Ee=typeof Buffer<"u";return typeof ne>"u"&&(ne=!0),typeof se>"u"&&(se=1/0),function te(oe,B){if(null===oe)return null;if(0===B)return oe;var $,ie;if("object"!=typeof oe)return oe;if(U(oe,X))$=new X;else if(U(oe,D))$=new D;else if(U(oe,V))$=new V(function(Ye,lt){oe.then(function(vt){Ye(te(vt,B-1))},function(vt){lt(te(vt,B-1))})});else if(O.__isArray(oe))$=[];else if(O.__isRegExp(oe))$=new RegExp(oe.source,ee(oe)),oe.lastIndex&&($.lastIndex=oe.lastIndex);else if(O.__isDate(oe))$=new Date(oe.getTime());else{if(Ee&&Buffer.isBuffer(oe))return $=Buffer.allocUnsafe?Buffer.allocUnsafe(oe.length):new Buffer(oe.length),oe.copy($),$;U(oe,Error)?$=Object.create(oe):typeof J>"u"?(ie=Object.getPrototypeOf(oe),$=Object.create(ie)):($=Object.create(J),ie=J)}if(ne){var pe=ae.indexOf(oe);if(-1!=pe)return _e[pe];ae.push(oe),_e.push($)}for(var Be in U(oe,X)&&oe.forEach(function(Ye,lt){var vt=te(lt,B-1),vn=te(Ye,B-1);$.set(vt,vn)}),U(oe,D)&&oe.forEach(function(Ye){var lt=te(Ye,B-1);$.add(lt)}),oe){var Me;ie&&(Me=Object.getOwnPropertyDescriptor(ie,Be)),(!Me||null!=Me.set)&&($[Be]=te(oe[Be],B-1))}if(Object.getOwnPropertySymbols){var xe=Object.getOwnPropertySymbols(oe);for(Be=0;Be<xe.length;Be++){var ue=xe[Be];(Pe=Object.getOwnPropertyDescriptor(oe,ue))&&!Pe.enumerable&&!W||($[ue]=te(oe[ue],B-1),Pe.enumerable||Object.defineProperty($,ue,{enumerable:!1}))}}if(W){var ot=Object.getOwnPropertyNames(oe);for(Be=0;Be<ot.length;Be++){var Pe,Fe=ot[Be];(Pe=Object.getOwnPropertyDescriptor(oe,Fe))&&Pe.enumerable||($[Fe]=te(oe[Fe],B-1),Object.defineProperty($,Fe,{enumerable:!1}))}}return $}(K,se)}function H(K){return Object.prototype.toString.call(K)}function ee(K){var ne="";return K.global&&(ne+="g"),K.ignoreCase&&(ne+="i"),K.multiline&&(ne+="m"),ne}return O.clonePrototype=function(ne){if(null===ne)return null;var se=function(){};return se.prototype=ne,new se},O.__objToStr=H,O.__isDate=function L(K){return"object"==typeof K&&"[object Date]"===H(K)},O.__isArray=function P(K){return"object"==typeof K&&"[object Array]"===H(K)},O.__isRegExp=function q(K){return"object"==typeof K&&"[object RegExp]"===H(K)},O.__getRegExpFlags=ee,O}();He.exports&&(He.exports=we)},1573:(He,we,U)=>{"use strict";function X(xe){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ue){return typeof ue}:function(ue){return ue&&"function"==typeof Symbol&&ue.constructor===Symbol&&ue!==Symbol.prototype?"symbol":typeof ue})(xe)}function O(xe){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(Pe){return Pe.__proto__||Object.getPrototypeOf(Pe)})(xe)}function H(xe,ue){return(H=Object.setPrototypeOf||function(ot,Fe){return ot.__proto__=Fe,ot})(xe,ue)}function L(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function P(xe,ue,Pe){return(P=L()?Reflect.construct:function(Fe,Ye,lt){var vt=[null];vt.push.apply(vt,Ye);var Ne=new(Function.bind.apply(Fe,vt));return lt&&H(Ne,lt.prototype),Ne}).apply(null,arguments)}function ee(xe){var ue="function"==typeof Map?new Map:void 0;return ee=function(ot){if(null===ot||!function q(xe){return-1!==Function.toString.call(xe).indexOf("[native code]")}(ot))return ot;if("function"!=typeof ot)throw new TypeError("Super expression must either be null or a function");if(typeof ue<"u"){if(ue.has(ot))return ue.get(ot);ue.set(ot,Fe)}function Fe(){return P(ot,arguments,O(this).constructor)}return Fe.prototype=Object.create(ot.prototype,{constructor:{value:Fe,enumerable:!1,writable:!0,configurable:!0}}),H(Fe,ot)},ee(xe)}function ne(xe,ue){return!ue||"object"!=typeof ue&&"function"!=typeof ue?function K(xe){if(void 0===xe)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return xe}(xe):ue}function J(xe){return function W(xe){if(Array.isArray(xe))return Ee(xe)}(xe)||function ae(xe){if(typeof Symbol<"u"&&null!=xe[Symbol.iterator]||null!=xe["@@iterator"])return Array.from(xe)}(xe)||_e(xe)||function te(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _e(xe,ue){if(xe){if("string"==typeof xe)return Ee(xe,ue);var Pe=Object.prototype.toString.call(xe).slice(8,-1);if("Object"===Pe&&xe.constructor&&(Pe=xe.constructor.name),"Map"===Pe||"Set"===Pe)return Array.from(xe);if("Arguments"===Pe||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Pe))return Ee(xe,ue)}}function Ee(xe,ue){(null==ue||ue>xe.length)&&(ue=xe.length);for(var Pe=0,ot=new Array(ue);Pe<ue;Pe++)ot[Pe]=xe[Pe];return ot}U.r(we),U.d(we,{JSONPath:()=>Be});var B=Object.prototype.hasOwnProperty;function $(xe,ue){return(xe=xe.slice()).push(ue),xe}function ie(xe,ue){return(ue=ue.slice()).unshift(xe),ue}var pe=function(xe){!function V(xe,ue){if("function"!=typeof ue&&null!==ue)throw new TypeError("Super expression must either be null or a function");xe.prototype=Object.create(ue&&ue.prototype,{constructor:{value:xe,writable:!0,configurable:!0}}),ue&&H(xe,ue)}(Pe,xe);var ue=function se(xe){var ue=L();return function(){var Fe,ot=O(xe);if(ue){var Ye=O(this).constructor;Fe=Reflect.construct(ot,arguments,Ye)}else Fe=ot.apply(this,arguments);return ne(this,Fe)}}(Pe);function Pe(ot){var Fe;return function D(xe,ue){if(!(xe instanceof ue))throw new TypeError("Cannot call a class as a function")}(this,Pe),(Fe=ue.call(this,'JSONPath should not be called with "new" (it prevents return of (unwrapped) scalar values)')).avoidNew=!0,Fe.value=ot,Fe.name="NewError",Fe}return Pe}(ee(Error));function Be(xe,ue,Pe,ot,Fe){if(!(this instanceof Be))try{return new Be(xe,ue,Pe,ot,Fe)}catch(vn){if(!vn.avoidNew)throw vn;return vn.value}"string"==typeof xe&&(Fe=ot,ot=Pe,Pe=ue,ue=xe,xe=null);var Ye=xe&&"object"===X(xe);if(this.json=(xe=xe||{}).json||Pe,this.path=xe.path||ue,this.resultType=xe.resultType||"value",this.flatten=xe.flatten||!1,this.wrap=!B.call(xe,"wrap")||xe.wrap,this.sandbox=xe.sandbox||{},this.preventEval=xe.preventEval||!1,this.parent=xe.parent||null,this.parentProperty=xe.parentProperty||null,this.callback=xe.callback||ot||null,this.otherTypeCallback=xe.otherTypeCallback||Fe||function(){throw new TypeError("You must supply an otherTypeCallback callback option with the @other() operator.")},!1!==xe.autostart){var lt={path:Ye?xe.path:ue};Ye?"json"in xe&&(lt.json=xe.json):lt.json=Pe;var vt=this.evaluate(lt);if(!vt||"object"!==X(vt))throw new pe(vt);return vt}}Be.prototype.evaluate=function(xe,ue,Pe,ot){var Fe=this,Ye=this.parent,lt=this.parentProperty,vt=this.flatten,vn=this.wrap;if(this.currResultType=this.resultType,this.currPreventEval=this.preventEval,this.currSandbox=this.sandbox,Pe=Pe||this.callback,this.currOtherTypeCallback=ot||this.otherTypeCallback,ue=ue||this.json,(xe=xe||this.path)&&"object"===X(xe)&&!Array.isArray(xe)){if(!xe.path&&""!==xe.path)throw new TypeError('You must supply a "path" property when providing an object argument to JSONPath.evaluate().');if(!B.call(xe,"json"))throw new TypeError('You must supply a "json" property when providing an object argument to JSONPath.evaluate().');ue=xe.json,vt=B.call(xe,"flatten")?xe.flatten:vt,this.currResultType=B.call(xe,"resultType")?xe.resultType:this.currResultType,this.currSandbox=B.call(xe,"sandbox")?xe.sandbox:this.currSandbox,vn=B.call(xe,"wrap")?xe.wrap:vn,this.currPreventEval=B.call(xe,"preventEval")?xe.preventEval:this.currPreventEval,Pe=B.call(xe,"callback")?xe.callback:Pe,this.currOtherTypeCallback=B.call(xe,"otherTypeCallback")?xe.otherTypeCallback:this.currOtherTypeCallback,Ye=B.call(xe,"parent")?xe.parent:Ye,lt=B.call(xe,"parentProperty")?xe.parentProperty:lt,xe=xe.path}if(Ye=Ye||null,lt=lt||null,Array.isArray(xe)&&(xe=Be.toPathString(xe)),(xe||""===xe)&&ue){var ht=Be.toPathArray(xe);"$"===ht[0]&&ht.length>1&&ht.shift(),this._hasParentSelector=null;var rt=this._trace(ht,ue,["$"],Ye,lt,Pe).filter(function(Ge){return Ge&&!Ge.isParentSelector});return rt.length?vn||1!==rt.length||rt[0].hasArrExpr?rt.reduce(function(Ge,_t){var At=Fe._getPreferredOutput(_t);return vt&&Array.isArray(At)?Ge=Ge.concat(At):Ge.push(At),Ge},[]):this._getPreferredOutput(rt[0]):vn?[]:void 0}},Be.prototype._getPreferredOutput=function(xe){var ue=this.currResultType;switch(ue){case"all":var Pe=Array.isArray(xe.path)?xe.path:Be.toPathArray(xe.path);return xe.pointer=Be.toPointer(Pe),xe.path="string"==typeof xe.path?xe.path:Be.toPathString(xe.path),xe;case"value":case"parent":case"parentProperty":return xe[ue];case"path":return Be.toPathString(xe[ue]);case"pointer":return Be.toPointer(xe.path);default:throw new TypeError("Unknown result type")}},Be.prototype._handleCallback=function(xe,ue,Pe){if(ue){var ot=this._getPreferredOutput(xe);xe.path="string"==typeof xe.path?xe.path:Be.toPathString(xe.path),ue(ot,Pe,xe)}},Be.prototype._trace=function(xe,ue,Pe,ot,Fe,Ye,lt,vt){var Ne,vn=this;if(!xe.length)return this._handleCallback(Ne={path:Pe,value:ue,parent:ot,parentProperty:Fe,hasArrExpr:lt},Ye,"value"),Ne;var ht=xe[0],rt=xe.slice(1),Ge=[];function _t(et){Array.isArray(et)?et.forEach(function(Le){Ge.push(Le)}):Ge.push(et)}if(("string"!=typeof ht||vt)&&ue&&B.call(ue,ht))_t(this._trace(rt,ue[ht],$(Pe,ht),ue,ht,Ye,lt));else if("*"===ht)this._walk(ht,rt,ue,Pe,ot,Fe,Ye,function(et,Le,ze,Ht,yn,ii,Li,Cs){_t(vn._trace(ie(et,ze),Ht,yn,ii,Li,Cs,!0,!0))});else if(".."===ht)_t(this._trace(rt,ue,Pe,ot,Fe,Ye,lt)),this._walk(ht,rt,ue,Pe,ot,Fe,Ye,function(et,Le,ze,Ht,yn,ii,Li,Cs){"object"===X(Ht[et])&&_t(vn._trace(ie(Le,ze),Ht[et],$(yn,et),Ht,et,Cs,!0))});else{if("^"===ht)return this._hasParentSelector=!0,{path:Pe.slice(0,-1),expr:rt,isParentSelector:!0};if("~"===ht)return Ne={path:$(Pe,ht),value:Fe,parent:ot,parentProperty:null},this._handleCallback(Ne,Ye,"property"),Ne;if("$"===ht)_t(this._trace(rt,ue,Pe,null,null,Ye,lt));else if(/^(\x2D?[0-9]*):(\x2D?[0-9]*):?([0-9]*)$/.test(ht))_t(this._slice(ht,rt,ue,Pe,ot,Fe,Ye));else if(0===ht.indexOf("?(")){if(this.currPreventEval)throw new Error("Eval [?(expr)] prevented in JSONPath expression.");this._walk(ht,rt,ue,Pe,ot,Fe,Ye,function(et,Le,ze,Ht,yn,ii,Li,Cs){vn._eval(Le.replace(/^\?\(((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?)\)$/,"$1"),Ht[et],et,yn,ii,Li)&&_t(vn._trace(ie(et,ze),Ht,yn,ii,Li,Cs,!0))})}else if("("===ht[0]){if(this.currPreventEval)throw new Error("Eval [(expr)] prevented in JSONPath expression.");_t(this._trace(ie(this._eval(ht,ue,Pe[Pe.length-1],Pe.slice(0,-1),ot,Fe),rt),ue,Pe,ot,Fe,Ye,lt))}else if("@"===ht[0]){var At=!1,Lt=ht.slice(1,-2);switch(Lt){case"scalar":(!ue||!["object","function"].includes(X(ue)))&&(At=!0);break;case"boolean":case"string":case"undefined":case"function":X(ue)===Lt&&(At=!0);break;case"integer":Number.isFinite(ue)&&!(ue%1)&&(At=!0);break;case"number":Number.isFinite(ue)&&(At=!0);break;case"nonFinite":"number"==typeof ue&&!Number.isFinite(ue)&&(At=!0);break;case"object":ue&&X(ue)===Lt&&(At=!0);break;case"array":Array.isArray(ue)&&(At=!0);break;case"other":At=this.currOtherTypeCallback(ue,Pe,ot,Fe);break;case"null":null===ue&&(At=!0);break;default:throw new TypeError("Unknown value type "+Lt)}if(At)return this._handleCallback(Ne={path:Pe,value:ue,parent:ot,parentProperty:Fe},Ye,"value"),Ne}else if("`"===ht[0]&&ue&&B.call(ue,ht.slice(1))){var Ut=ht.slice(1);_t(this._trace(rt,ue[Ut],$(Pe,Ut),ue,Ut,Ye,lt,!0))}else if(ht.includes(",")){var wt,fe=function oe(xe,ue){var Pe=typeof Symbol<"u"&&xe[Symbol.iterator]||xe["@@iterator"];if(!Pe){if(Array.isArray(xe)||(Pe=_e(xe))||ue&&xe&&"number"==typeof xe.length){Pe&&(xe=Pe);var ot=0,Fe=function(){};return{s:Fe,n:function(){return ot>=xe.length?{done:!0}:{done:!1,value:xe[ot++]}},e:function(vn){throw vn},f:Fe}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var vt,Ye=!0,lt=!1;return{s:function(){Pe=Pe.call(xe)},n:function(){var vn=Pe.next();return Ye=vn.done,vn},e:function(vn){lt=!0,vt=vn},f:function(){try{!Ye&&null!=Pe.return&&Pe.return()}finally{if(lt)throw vt}}}}(ht.split(","));try{for(fe.s();!(wt=fe.n()).done;)_t(this._trace(ie(wt.value,rt),ue,Pe,ot,Fe,Ye,!0))}catch(et){fe.e(et)}finally{fe.f()}}else!vt&&ue&&B.call(ue,ht)&&_t(this._trace(rt,ue[ht],$(Pe,ht),ue,ht,Ye,lt,!0))}if(this._hasParentSelector)for(var Un=0;Un<Ge.length;Un++){var ri=Ge[Un];if(ri&&ri.isParentSelector){var Et=this._trace(ri.expr,ue,ri.path,ot,Fe,Ye,lt);if(Array.isArray(Et)){Ge[Un]=Et[0];for(var Ot=Et.length,fn=1;fn<Ot;fn++)Un++,Ge.splice(Un,0,Et[fn])}else Ge[Un]=Et}}return Ge},Be.prototype._walk=function(xe,ue,Pe,ot,Fe,Ye,lt,vt){if(Array.isArray(Pe))for(var vn=Pe.length,Ne=0;Ne<vn;Ne++)vt(Ne,xe,ue,Pe,ot,Fe,Ye,lt);else Pe&&"object"===X(Pe)&&Object.keys(Pe).forEach(function(ht){vt(ht,xe,ue,Pe,ot,Fe,Ye,lt)})},Be.prototype._slice=function(xe,ue,Pe,ot,Fe,Ye,lt){if(Array.isArray(Pe)){var vt=Pe.length,vn=xe.split(":"),Ne=vn[2]&&Number.parseInt(vn[2])||1,ht=vn[0]&&Number.parseInt(vn[0])||0,rt=vn[1]&&Number.parseInt(vn[1])||vt;ht=ht<0?Math.max(0,ht+vt):Math.min(vt,ht),rt=rt<0?Math.max(0,rt+vt):Math.min(vt,rt);for(var Ge=[],_t=ht;_t<rt;_t+=Ne)this._trace(ie(_t,ue),Pe,ot,Fe,Ye,lt,!0).forEach(function(Lt){Ge.push(Lt)});return Ge}},Be.prototype._eval=function(xe,ue,Pe,ot,Fe,Ye){xe.includes("@parentProperty")&&(this.currSandbox._$_parentProperty=Ye,xe=xe.replace(/@parentProperty/g,"_$_parentProperty")),xe.includes("@parent")&&(this.currSandbox._$_parent=Fe,xe=xe.replace(/@parent/g,"_$_parent")),xe.includes("@property")&&(this.currSandbox._$_property=Pe,xe=xe.replace(/@property/g,"_$_property")),xe.includes("@path")&&(this.currSandbox._$_path=Be.toPathString(ot.concat([Pe])),xe=xe.replace(/@path/g,"_$_path")),xe.includes("@root")&&(this.currSandbox._$_root=this.json,xe=xe.replace(/@root/g,"_$_root")),/@([\t-\r \)\.\[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])/.test(xe)&&(this.currSandbox._$_v=ue,xe=xe.replace(/@([\t-\r \)\.\[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])/g,"_$_v$1"));try{return this.vm.runInNewContext(xe,this.currSandbox)}catch(lt){throw console.log(lt),new Error("jsonPath: "+lt.message+": "+xe)}},Be.cache={},Be.toPathString=function(xe){for(var ue=xe,Pe=ue.length,ot="$",Fe=1;Fe<Pe;Fe++)/^(~|\^|@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\(\))$/.test(ue[Fe])||(ot+=/^[\*0-9]+$/.test(ue[Fe])?"["+ue[Fe]+"]":"['"+ue[Fe]+"']");return ot},Be.toPointer=function(xe){for(var ue=xe,Pe=ue.length,ot="",Fe=1;Fe<Pe;Fe++)/^(~|\^|@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\(\))$/.test(ue[Fe])||(ot+="/"+ue[Fe].toString().replace(/~/g,"~0").replace(/\//g,"~1"));return ot},Be.toPathArray=function(xe){var ue=Be.cache;if(ue[xe])return ue[xe].concat();var Pe=[],Fe=xe.replace(/@(?:null|boolean|number|string|integer|undefined|nonFinite|scalar|array|object|function|other)\(\)/g,";$&;").replace(/['\[](\??\((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\))['\]]/g,function(Ye,lt){return"[#"+(Pe.push(lt)-1)+"]"}).replace(/\[["']((?:(?!['\]])[\s\S])*)["']\]/g,function(Ye,lt){return"['"+lt.replace(/\./g,"%@%").replace(/~/g,"%%@@%%")+"']"}).replace(/~/g,";~;").replace(/["']?\.["']?(?!(?:(?!\[)[\s\S])*\])|\[["']?/g,";").replace(/%@%/g,".").replace(/%%@@%%/g,"~").replace(/(?:;)?(\^+)(?:;)?/g,function(Ye,lt){return";"+lt.split("").join(";")+";"}).replace(/;;;|;;/g,";..;").replace(/;$|'?\]|'$/g,"").split(";").map(function(Ye){var lt=Ye.match(/#([0-9]+)/);return lt&&lt[1]?Pe[lt[1]]:Ye});return ue[xe]=Fe,ue[xe].concat()},Be.prototype.vm={runInNewContext:function(ue,Pe){var ot=Object.keys(Pe),Fe=[];!function(ue,Pe,ot){for(var Fe=ue.length,Ye=0;Ye<Fe;Ye++)ot(ue[Ye])&&Pe.push(ue.splice(Ye--,1)[0])}(ot,Fe,function(Ne){return"function"==typeof Pe[Ne]});var Ye=ot.map(function(Ne,ht){return Pe[Ne]}),lt=Fe.reduce(function(Ne,ht){var rt=Pe[ht].toString();return/function/.test(rt)||(rt="function "+rt),"var "+ht+"="+rt+";"+Ne},"");!/(["'])use strict\1/.test(ue=lt+ue)&&!ot.includes("arguments")&&(ue="var arguments = undefined;"+ue);var vt=(ue=ue.replace(/;[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*$/,"")).lastIndexOf(";"),vn=vt>-1?ue.slice(0,vt+1)+" return "+ue.slice(vt+1):" return "+ue;return P(Function,J(ot).concat([vn])).apply(void 0,J(Ye))}}},3353:(He,we,U)=>{"use strict";function X(B){var $=Array.prototype.slice.call(arguments,1);return $.forEach(function(ie){!ie||Object.keys(ie).forEach(function(pe){B[pe]=ie[pe]})}),B}function D(B){return Object.prototype.toString.call(B)}function L(B){return"[object Function]"===D(B)}function P(B){return B.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var q={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1},K={"http:":{validate:function(B,$,ie){var pe=B.slice($);return ie.re.http||(ie.re.http=new RegExp("^\\/\\/"+ie.re.src_auth+ie.re.src_host_port_strict+ie.re.src_path,"i")),ie.re.http.test(pe)?pe.match(ie.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(B,$,ie){var pe=B.slice($);return ie.re.no_http||(ie.re.no_http=new RegExp("^"+ie.re.src_auth+"(?:localhost|(?:(?:"+ie.re.src_domain+")\\.)+"+ie.re.src_domain_root+")"+ie.re.src_port+ie.re.src_host_terminator+ie.re.src_path,"i")),ie.re.no_http.test(pe)?$>=3&&":"===B[$-3]||$>=3&&"/"===B[$-3]?0:pe.match(ie.re.no_http)[0].length:0}},"mailto:":{validate:function(B,$,ie){var pe=B.slice($);return ie.re.mailto||(ie.re.mailto=new RegExp("^"+ie.re.src_email_name+"@"+ie.re.src_host_strict,"i")),ie.re.mailto.test(pe)?pe.match(ie.re.mailto)[0].length:0}}},se="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|\u0440\u0444".split("|");function _e(B){var $=B.re=U(9234)(B.__opts__),ie=B.__tlds__.slice();function pe(ue){return ue.replace("%TLDS%",$.src_tlds)}B.onCompile(),B.__tlds_replaced__||ie.push("a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]"),ie.push($.src_xn),$.src_tlds=ie.join("|"),$.email_fuzzy=RegExp(pe($.tpl_email_fuzzy),"i"),$.link_fuzzy=RegExp(pe($.tpl_link_fuzzy),"i"),$.link_no_ip_fuzzy=RegExp(pe($.tpl_link_no_ip_fuzzy),"i"),$.host_fuzzy_test=RegExp(pe($.tpl_host_fuzzy_test),"i");var Be=[];function Me(ue,Pe){throw new Error('(LinkifyIt) Invalid schema "'+ue+'": '+Pe)}B.__compiled__={},Object.keys(B.__schemas__).forEach(function(ue){var Pe=B.__schemas__[ue];if(null!==Pe){var ot={validate:null,link:null};if(B.__compiled__[ue]=ot,function O(B){return"[object Object]"===D(B)}(Pe))return function H(B){return"[object RegExp]"===D(B)}(Pe.validate)?ot.validate=function W(B){return function($,ie){var pe=$.slice(ie);return B.test(pe)?pe.match(B)[0].length:0}}(Pe.validate):L(Pe.validate)?ot.validate=Pe.validate:Me(ue,Pe),void(L(Pe.normalize)?ot.normalize=Pe.normalize:Pe.normalize?Me(ue,Pe):ot.normalize=function(B,$){$.normalize(B)});if(function V(B){return"[object String]"===D(B)}(Pe))return void Be.push(ue);Me(ue,Pe)}}),Be.forEach(function(ue){!B.__compiled__[B.__schemas__[ue]]||(B.__compiled__[ue].validate=B.__compiled__[B.__schemas__[ue]].validate,B.__compiled__[ue].normalize=B.__compiled__[B.__schemas__[ue]].normalize)}),B.__compiled__[""]={validate:null,normalize:function(B,$){$.normalize(B)}};var xe=Object.keys(B.__compiled__).filter(function(ue){return ue.length>0&&B.__compiled__[ue]}).map(P).join("|");B.re.schema_test=RegExp("(^|(?!_)(?:[><\uff5c]|"+$.src_ZPCc+"))("+xe+")","i"),B.re.schema_search=RegExp("(^|(?!_)(?:[><\uff5c]|"+$.src_ZPCc+"))("+xe+")","ig"),B.re.schema_at_start=RegExp("^"+B.re.schema_search.source,"i"),B.re.pretest=RegExp("("+B.re.schema_test.source+")|("+B.re.host_fuzzy_test.source+")|@","i"),function J(B){B.__index__=-1,B.__text_cache__=""}(B)}function Ee(B,$){var ie=B.__index__,pe=B.__last_index__,Be=B.__text_cache__.slice(ie,pe);this.schema=B.__schema__.toLowerCase(),this.index=ie+$,this.lastIndex=pe+$,this.raw=Be,this.text=Be,this.url=Be}function te(B,$){var ie=new Ee(B,$);return B.__compiled__[ie.schema].normalize(ie,B),ie}function oe(B,$){if(!(this instanceof oe))return new oe(B,$);$||function ee(B){return Object.keys(B||{}).reduce(function($,ie){return $||q.hasOwnProperty(ie)},!1)}(B)&&($=B,B={}),this.__opts__=X({},q,$),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=X({},K,B),this.__compiled__={},this.__tlds__=se,this.__tlds_replaced__=!1,this.re={},_e(this)}oe.prototype.add=function($,ie){return this.__schemas__[$]=ie,_e(this),this},oe.prototype.set=function($){return this.__opts__=X(this.__opts__,$),this},oe.prototype.test=function($){if(this.__text_cache__=$,this.__index__=-1,!$.length)return!1;var ie,pe,Be,Me,xe,ue,Pe,ot;if(this.re.schema_test.test($))for((Pe=this.re.schema_search).lastIndex=0;null!==(ie=Pe.exec($));)if(Me=this.testSchemaAt($,ie[2],Pe.lastIndex)){this.__schema__=ie[2],this.__index__=ie.index+ie[1].length,this.__last_index__=ie.index+ie[0].length+Me;break}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(ot=$.search(this.re.host_fuzzy_test))>=0&&(this.__index__<0||ot<this.__index__)&&null!==(pe=$.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))&&(xe=pe.index+pe[1].length,(this.__index__<0||xe<this.__index__)&&(this.__schema__="",this.__index__=xe,this.__last_index__=pe.index+pe[0].length)),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&$.indexOf("@")>=0&&null!==(Be=$.match(this.re.email_fuzzy))&&(xe=Be.index+Be[1].length,ue=Be.index+Be[0].length,(this.__index__<0||xe<this.__index__||xe===this.__index__&&ue>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=xe,this.__last_index__=ue)),this.__index__>=0},oe.prototype.pretest=function($){return this.re.pretest.test($)},oe.prototype.testSchemaAt=function($,ie,pe){return this.__compiled__[ie.toLowerCase()]?this.__compiled__[ie.toLowerCase()].validate($,pe,this):0},oe.prototype.match=function($){var ie=0,pe=[];this.__index__>=0&&this.__text_cache__===$&&(pe.push(te(this,ie)),ie=this.__last_index__);for(var Be=ie?$.slice(ie):$;this.test(Be);)pe.push(te(this,ie)),Be=Be.slice(this.__last_index__),ie+=this.__last_index__;return pe.length?pe:null},oe.prototype.matchAtStart=function($){if(this.__text_cache__=$,this.__index__=-1,!$.length)return null;var ie=this.re.schema_at_start.exec($);if(!ie)return null;var pe=this.testSchemaAt($,ie[2],ie[0].length);return pe?(this.__schema__=ie[2],this.__index__=ie.index+ie[1].length,this.__last_index__=ie.index+ie[0].length+pe,te(this,0)):null},oe.prototype.tlds=function($,ie){return $=Array.isArray($)?$:[$],ie?(this.__tlds__=this.__tlds__.concat($).sort().filter(function(pe,Be,Me){return pe!==Me[Be-1]}).reverse(),_e(this),this):(this.__tlds__=$.slice(),this.__tlds_replaced__=!0,_e(this),this)},oe.prototype.normalize=function($){$.schema||($.url="http://"+$.url),"mailto:"===$.schema&&!/^mailto:/i.test($.url)&&($.url="mailto:"+$.url)},oe.prototype.onCompile=function(){},He.exports=oe},9234:(He,we,U)=>{"use strict";He.exports=function(X){var D={};X=X||{},D.src_Any=U(1129).source,D.src_Cc=U(9699).source,D.src_Z=U(5450).source,D.src_P=U(6020).source,D.src_ZPCc=[D.src_Z,D.src_P,D.src_Cc].join("|"),D.src_ZCc=[D.src_Z,D.src_Cc].join("|");return D.src_pseudo_letter="(?:(?![><\uff5c]|"+D.src_ZPCc+")"+D.src_Any+")",D.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",D.src_auth="(?:(?:(?!"+D.src_ZCc+"|[@/\\[\\]()]).)+@)?",D.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",D.src_host_terminator="(?=$|[><\uff5c]|"+D.src_ZPCc+")(?!"+(X["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+D.src_ZPCc+"))",D.src_path="(?:[/?#](?:(?!"+D.src_ZCc+"|[><\uff5c]|[()[\\]{}.,\"'?!\\-;]).|\\[(?:(?!"+D.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+D.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+D.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+D.src_ZCc+'|["]).)+\\"|\\\'(?:(?!'+D.src_ZCc+"|[']).)+\\'|\\'(?="+D.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+D.src_ZCc+"|[.]|$)|"+(X["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+D.src_ZCc+"|$)|;(?!"+D.src_ZCc+"|$)|\\!+(?!"+D.src_ZCc+"|[!]|$)|\\?(?!"+D.src_ZCc+"|[?]|$))+|\\/)?",D.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',D.src_xn="xn--[a-z0-9\\-]{1,59}",D.src_domain_root="(?:"+D.src_xn+"|"+D.src_pseudo_letter+"{1,63})",D.src_domain="(?:"+D.src_xn+"|(?:"+D.src_pseudo_letter+")|(?:"+D.src_pseudo_letter+"(?:-|"+D.src_pseudo_letter+"){0,61}"+D.src_pseudo_letter+"))",D.src_host="(?:(?:(?:(?:"+D.src_domain+")\\.)*"+D.src_domain+"))",D.tpl_host_fuzzy="(?:"+D.src_ip4+"|(?:(?:(?:"+D.src_domain+")\\.)+(?:%TLDS%)))",D.tpl_host_no_ip_fuzzy="(?:(?:(?:"+D.src_domain+")\\.)+(?:%TLDS%))",D.src_host_strict=D.src_host+D.src_host_terminator,D.tpl_host_fuzzy_strict=D.tpl_host_fuzzy+D.src_host_terminator,D.src_host_port_strict=D.src_host+D.src_port+D.src_host_terminator,D.tpl_host_port_fuzzy_strict=D.tpl_host_fuzzy+D.src_port+D.src_host_terminator,D.tpl_host_port_no_ip_fuzzy_strict=D.tpl_host_no_ip_fuzzy+D.src_port+D.src_host_terminator,D.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+D.src_ZPCc+"|>|$))",D.tpl_email_fuzzy='(^|[><\uff5c]|"|\\(|'+D.src_ZCc+")("+D.src_email_name+"@"+D.tpl_host_fuzzy_strict+")",D.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uff5c]|"+D.src_ZPCc+"))((?![$+<=>^`|\uff5c])"+D.tpl_host_port_fuzzy_strict+D.src_path+")",D.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uff5c]|"+D.src_ZPCc+"))((?![$+<=>^`|\uff5c])"+D.tpl_host_port_no_ip_fuzzy_strict+D.src_path+")",D}},6729:He=>{He.exports=function we(U){return!!U&&"object"==typeof U}},8132:He=>{var fn,U="__lodash_hash_undefined__",O=/^\[object .+?Constructor\]$/,H="object"==typeof global&&global&&global.Object===Object&&global,L="object"==typeof self&&self&&self.Object===Object&&self,P=H||L||Function("return this")(),K=Array.prototype,ne=Function.prototype,se=Object.prototype,J=P["__core-js_shared__"],W=(fn=/[^.]+$/.exec(J&&J.keys&&J.keys.IE_PROTO||""))?"Symbol(src)_1."+fn:"",ae=ne.toString,_e=se.hasOwnProperty,Ee=se.toString,te=RegExp("^"+ae.call(_e).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),oe=K.splice,B=Oe(P,"Map"),$=Oe(Object,"create");function ie(fn){var et=-1,Le=fn?fn.length:0;for(this.clear();++et<Le;){var ze=fn[et];this.set(ze[0],ze[1])}}function Pe(fn){var et=-1,Le=fn?fn.length:0;for(this.clear();++et<Le;){var ze=fn[et];this.set(ze[0],ze[1])}}function vn(fn){var et=-1,Le=fn?fn.length:0;for(this.clear();++et<Le;){var ze=fn[et];this.set(ze[0],ze[1])}}function At(fn,et){for(var Le=fn.length;Le--;)if(ri(fn[Le][0],et))return Le;return-1}function Ut(fn,et){var Le=fn.__data__;return function fe(fn){var et=typeof fn;return"string"==et||"number"==et||"symbol"==et||"boolean"==et?"__proto__"!==fn:null===fn}(et)?Le["string"==typeof et?"string":"hash"]:Le.map}function Oe(fn,et){var Le=function q(fn,et){return fn?.[et]}(fn,et);return function Lt(fn){if(!Ot(fn)||function wt(fn){return!!W&&W in fn}(fn))return!1;var et=function Et(fn){var et=Ot(fn)?Ee.call(fn):"";return"[object Function]"==et||"[object GeneratorFunction]"==et}(fn)||function ee(fn){var et=!1;if(null!=fn&&"function"!=typeof fn.toString)try{et=!!(fn+"")}catch{}return et}(fn)?te:O;return et.test(function kt(fn){if(null!=fn){try{return ae.call(fn)}catch{}try{return fn+""}catch{}}return""}(fn))}(Le)?Le:void 0}function Un(fn,et){if("function"!=typeof fn||et&&"function"!=typeof et)throw new TypeError("Expected a function");var Le=function(){var ze=arguments,Ht=et?et.apply(this,ze):ze[0],yn=Le.cache;if(yn.has(Ht))return yn.get(Ht);var ii=fn.apply(this,ze);return Le.cache=yn.set(Ht,ii),ii};return Le.cache=new(Un.Cache||vn),Le}function ri(fn,et){return fn===et||fn!=fn&&et!=et}function Ot(fn){var et=typeof fn;return!!fn&&("object"==et||"function"==et)}ie.prototype.clear=function pe(){this.__data__=$?$(null):{}},ie.prototype.delete=function Be(fn){return this.has(fn)&&delete this.__data__[fn]},ie.prototype.get=function Me(fn){var et=this.__data__;if($){var Le=et[fn];return Le===U?void 0:Le}return _e.call(et,fn)?et[fn]:void 0},ie.prototype.has=function xe(fn){var et=this.__data__;return $?void 0!==et[fn]:_e.call(et,fn)},ie.prototype.set=function ue(fn,et){return this.__data__[fn]=$&&void 0===et?U:et,this},Pe.prototype.clear=function ot(){this.__data__=[]},Pe.prototype.delete=function Fe(fn){var et=this.__data__,Le=At(et,fn);return!(Le<0||(Le==et.length-1?et.pop():oe.call(et,Le,1),0))},Pe.prototype.get=function Ye(fn){var et=this.__data__,Le=At(et,fn);return Le<0?void 0:et[Le][1]},Pe.prototype.has=function lt(fn){return At(this.__data__,fn)>-1},Pe.prototype.set=function vt(fn,et){var Le=this.__data__,ze=At(Le,fn);return ze<0?Le.push([fn,et]):Le[ze][1]=et,this},vn.prototype.clear=function Ne(){this.__data__={hash:new ie,map:new(B||Pe),string:new ie}},vn.prototype.delete=function ht(fn){return Ut(this,fn).delete(fn)},vn.prototype.get=function rt(fn){return Ut(this,fn).get(fn)},vn.prototype.has=function Ge(fn){return Ut(this,fn).has(fn)},vn.prototype.set=function _t(fn,et){return Ut(this,fn).set(fn,et),this},Un.Cache=vn,He.exports=Un},8078:He=>{var we="Expected a function",D=/^\s+|\s+$/g,V=/^[-+]0x[0-9a-f]+$/i,O=/^0b[01]+$/i,H=/^0o[0-7]+$/i,L=parseInt,P="object"==typeof global&&global&&global.Object===Object&&global,q="object"==typeof self&&self&&self.Object===Object&&self,ee=P||q||Function("return this")(),ne=Object.prototype.toString,se=Math.max,J=Math.min,W=function(){return ee.Date.now()};function Ee($){var ie=typeof $;return!!$&&("object"==ie||"function"==ie)}function B($){if("number"==typeof $)return $;if(function oe($){return"symbol"==typeof $||function te($){return!!$&&"object"==typeof $}($)&&"[object Symbol]"==ne.call($)}($))return NaN;if(Ee($)){var ie="function"==typeof $.valueOf?$.valueOf():$;$=Ee(ie)?ie+"":ie}if("string"!=typeof $)return 0===$?$:+$;$=$.replace(D,"");var pe=O.test($);return pe||H.test($)?L($.slice(2),pe?2:8):V.test($)?NaN:+$}He.exports=function _e($,ie,pe){var Be=!0,Me=!0;if("function"!=typeof $)throw new TypeError(we);return Ee(pe)&&(Be="leading"in pe?!!pe.leading:Be,Me="trailing"in pe?!!pe.trailing:Me),function ae($,ie,pe){var Be,Me,xe,ue,Pe,ot,Fe=0,Ye=!1,lt=!1,vt=!0;if("function"!=typeof $)throw new TypeError(we);function vn(Oe){var fe=Be,wt=Me;return Be=Me=void 0,Fe=Oe,ue=$.apply(wt,fe)}function Ne(Oe){return Fe=Oe,Pe=setTimeout(Ge,ie),Ye?vn(Oe):ue}function rt(Oe){var fe=Oe-ot;return void 0===ot||fe>=ie||fe<0||lt&&Oe-Fe>=xe}function Ge(){var Oe=W();if(rt(Oe))return _t(Oe);Pe=setTimeout(Ge,function ht(Oe){var kt=ie-(Oe-ot);return lt?J(kt,xe-(Oe-Fe)):kt}(Oe))}function _t(Oe){return Pe=void 0,vt&&Be?vn(Oe):(Be=Me=void 0,ue)}function Ut(){var Oe=W(),fe=rt(Oe);if(Be=arguments,Me=this,ot=Oe,fe){if(void 0===Pe)return Ne(ot);if(lt)return Pe=setTimeout(Ge,ie),vn(ot)}return void 0===Pe&&(Pe=setTimeout(Ge,ie)),ue}return ie=B(ie)||0,Ee(pe)&&(Ye=!!pe.leading,xe=(lt="maxWait"in pe)?se(B(pe.maxWait)||0,ie):xe,vt="trailing"in pe?!!pe.trailing:vt),Ut.cancel=function At(){void 0!==Pe&&clearTimeout(Pe),Fe=0,Be=ot=Me=Pe=void 0},Ut.flush=function Lt(){return void 0===Pe?ue:_t(W())},Ut}($,ie,{leading:Be,maxWait:ie,trailing:Me})}},4994:(He,we,U)=>{var X=U(4312),D=U(6421),V=U(5764),O=U(8685),H=U(6676);function L(P){var q=-1,ee=null==P?0:P.length;for(this.clear();++q<ee;){var K=P[q];this.set(K[0],K[1])}}L.prototype.clear=X,L.prototype.delete=D,L.prototype.get=V,L.prototype.has=O,L.prototype.set=H,He.exports=L},9215:(He,we,U)=>{var X=U(1840),D=U(4378),V=U(4981),O=U(7343),H=U(8895);function L(P){var q=-1,ee=null==P?0:P.length;for(this.clear();++q<ee;){var K=P[q];this.set(K[0],K[1])}}L.prototype.clear=X,L.prototype.delete=D,L.prototype.get=V,L.prototype.has=O,L.prototype.set=H,He.exports=L},1501:(He,we,U)=>{var V=U(3436)(U(2119),"Map");He.exports=V},9850:(He,we,U)=>{var X=U(638),D=U(1184),V=U(866),O=U(3771),H=U(1772);function L(P){var q=-1,ee=null==P?0:P.length;for(this.clear();++q<ee;){var K=P[q];this.set(K[0],K[1])}}L.prototype.clear=X,L.prototype.delete=D,L.prototype.get=V,L.prototype.has=O,L.prototype.set=H,He.exports=L},443:(He,we,U)=>{var X=U(2119);He.exports=X.Symbol},4633:He=>{He.exports=function we(U,X){for(var D=-1,V=null==U?0:U.length,O=Array(V);++D<V;)O[D]=X(U[D],D,U);return O}},9719:(He,we,U)=>{var X=U(5683),D=U(217),O=Object.prototype.hasOwnProperty;He.exports=function H(L,P,q){var ee=L[P];(!O.call(L,P)||!D(ee,q)||void 0===q&&!(P in L))&&X(L,P,q)}},3503:(He,we,U)=>{var X=U(217);He.exports=function D(V,O){for(var H=V.length;H--;)if(X(V[H][0],O))return H;return-1}},5683:(He,we,U)=>{var X=U(6713);He.exports=function D(V,O,H){"__proto__"==O&&X?X(V,O,{configurable:!0,enumerable:!0,value:H,writable:!0}):V[O]=H}},5456:(He,we,U)=>{var X=U(6884),D=U(8533);He.exports=function V(O,H){for(var L=0,P=(H=X(H,O)).length;null!=O&&L<P;)O=O[D(H[L++])];return L&&L==P?O:void 0}},3337:(He,we,U)=>{var X=U(443),D=U(1318),V=U(2902),L=X?X.toStringTag:void 0;He.exports=function P(q){return null==q?void 0===q?"[object Undefined]":"[object Null]":L&&L in Object(q)?D(q):V(q)}},7304:(He,we,U)=>{var X=U(5946),D=U(1943),V=U(5940),O=U(2827),L=/^\[object .+?Constructor\]$/,ne=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");He.exports=function se(J){return!(!V(J)||D(J))&&(X(J)?ne:L).test(O(J))}},5963:(He,we,U)=>{var X=U(9719),D=U(6884),V=U(8442),O=U(5940),H=U(8533);He.exports=function L(P,q,ee,K){if(!O(P))return P;for(var ne=-1,se=(q=D(q,P)).length,J=se-1,W=P;null!=W&&++ne<se;){var ae=H(q[ne]),_e=ee;if("__proto__"===ae||"constructor"===ae||"prototype"===ae)return P;if(ne!=J){var Ee=W[ae];void 0===(_e=K?K(Ee,ae,W):void 0)&&(_e=O(Ee)?Ee:V(q[ne+1])?[]:{})}X(W,ae,_e),W=W[ae]}return P}},3935:(He,we,U)=>{var X=U(443),D=U(4633),V=U(9460),O=U(4129),L=X?X.prototype:void 0,P=L?L.toString:void 0;He.exports=function q(ee){if("string"==typeof ee)return ee;if(V(ee))return D(ee,q)+"";if(O(ee))return P?P.call(ee):"";var K=ee+"";return"0"==K&&1/ee==-1/0?"-0":K}},3348:(He,we,U)=>{var X=U(2760),D=/^\s+/;He.exports=function V(O){return O&&O.slice(0,X(O)+1).replace(D,"")}},6884:(He,we,U)=>{var X=U(9460),D=U(5352),V=U(2855),O=U(3943);He.exports=function H(L,P){return X(L)?L:D(L,P)?[L]:V(O(L))}},9454:He=>{He.exports=function we(U,X){var D=-1,V=U.length;for(X||(X=Array(V));++D<V;)X[D]=U[D];return X}},4610:(He,we,U)=>{var X=U(2119);He.exports=X["__core-js_shared__"]},6713:(He,we,U)=>{var X=U(3436),D=function(){try{var V=X(Object,"defineProperty");return V({},"",{}),V}catch{}}();He.exports=D},9122:He=>{var we="object"==typeof global&&global&&global.Object===Object&&global;He.exports=we},4537:(He,we,U)=>{var X=U(3819);He.exports=function D(V,O){var H=V.__data__;return X(O)?H["string"==typeof O?"string":"hash"]:H.map}},3436:(He,we,U)=>{var X=U(7304),D=U(1990);He.exports=function V(O,H){var L=D(O,H);return X(L)?L:void 0}},1318:(He,we,U)=>{var X=U(443),D=Object.prototype,V=D.hasOwnProperty,O=D.toString,H=X?X.toStringTag:void 0;He.exports=function L(P){var q=V.call(P,H),ee=P[H];try{P[H]=void 0;var K=!0}catch{}var ne=O.call(P);return K&&(q?P[H]=ee:delete P[H]),ne}},1990:He=>{He.exports=function we(U,X){return U?.[X]}},4312:(He,we,U)=>{var X=U(862);He.exports=function D(){this.__data__=X?X(null):{},this.size=0}},6421:He=>{He.exports=function we(U){var X=this.has(U)&&delete this.__data__[U];return this.size-=X?1:0,X}},5764:(He,we,U)=>{var X=U(862),O=Object.prototype.hasOwnProperty;He.exports=function H(L){var P=this.__data__;if(X){var q=P[L];return"__lodash_hash_undefined__"===q?void 0:q}return O.call(P,L)?P[L]:void 0}},8685:(He,we,U)=>{var X=U(862),V=Object.prototype.hasOwnProperty;He.exports=function O(H){var L=this.__data__;return X?void 0!==L[H]:V.call(L,H)}},6676:(He,we,U)=>{var X=U(862);He.exports=function V(O,H){var L=this.__data__;return this.size+=this.has(O)?0:1,L[O]=X&&void 0===H?"__lodash_hash_undefined__":H,this}},8442:He=>{var U=/^(?:0|[1-9]\d*)$/;He.exports=function X(D,V){var O=typeof D;return!!(V=V??9007199254740991)&&("number"==O||"symbol"!=O&&U.test(D))&&D>-1&&D%1==0&&D<V}},5352:(He,we,U)=>{var X=U(9460),D=U(4129),V=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,O=/^\w*$/;He.exports=function H(L,P){if(X(L))return!1;var q=typeof L;return!("number"!=q&&"symbol"!=q&&"boolean"!=q&&null!=L&&!D(L))||O.test(L)||!V.test(L)||null!=P&&L in Object(P)}},3819:He=>{He.exports=function we(U){var X=typeof U;return"string"==X||"number"==X||"symbol"==X||"boolean"==X?"__proto__"!==U:null===U}},1943:(He,we,U)=>{var O,X=U(4610),D=(O=/[^.]+$/.exec(X&&X.keys&&X.keys.IE_PROTO||""))?"Symbol(src)_1."+O:"";He.exports=function V(O){return!!D&&D in O}},1840:He=>{He.exports=function we(){this.__data__=[],this.size=0}},4378:(He,we,U)=>{var X=U(3503),V=Array.prototype.splice;He.exports=function O(H){var L=this.__data__,P=X(L,H);return!(P<0||(P==L.length-1?L.pop():V.call(L,P,1),--this.size,0))}},4981:(He,we,U)=>{var X=U(3503);He.exports=function D(V){var O=this.__data__,H=X(O,V);return H<0?void 0:O[H][1]}},7343:(He,we,U)=>{var X=U(3503);He.exports=function D(V){return X(this.__data__,V)>-1}},8895:(He,we,U)=>{var X=U(3503);He.exports=function D(V,O){var H=this.__data__,L=X(H,V);return L<0?(++this.size,H.push([V,O])):H[L][1]=O,this}},638:(He,we,U)=>{var X=U(4994),D=U(9215),V=U(1501);He.exports=function O(){this.size=0,this.__data__={hash:new X,map:new(V||D),string:new X}}},1184:(He,we,U)=>{var X=U(4537);He.exports=function D(V){var O=X(this,V).delete(V);return this.size-=O?1:0,O}},866:(He,we,U)=>{var X=U(4537);He.exports=function D(V){return X(this,V).get(V)}},3771:(He,we,U)=>{var X=U(4537);He.exports=function D(V){return X(this,V).has(V)}},1772:(He,we,U)=>{var X=U(4537);He.exports=function D(V,O){var H=X(this,V),L=H.size;return H.set(V,O),this.size+=H.size==L?0:1,this}},719:(He,we,U)=>{var X=U(535);He.exports=function V(O){var H=X(O,function(P){return 500===L.size&&L.clear(),P}),L=H.cache;return H}},862:(He,we,U)=>{var D=U(3436)(Object,"create");He.exports=D},2902:He=>{var U=Object.prototype.toString;He.exports=function X(D){return U.call(D)}},2119:(He,we,U)=>{var X=U(9122),D="object"==typeof self&&self&&self.Object===Object&&self,V=X||D||Function("return this")();He.exports=V},2855:(He,we,U)=>{var X=U(719),D=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,V=/\\(\\)?/g,O=X(function(H){var L=[];return 46===H.charCodeAt(0)&&L.push(""),H.replace(D,function(P,q,ee,K){L.push(ee?K.replace(V,"$1"):q||P)}),L});He.exports=O},8533:(He,we,U)=>{var X=U(4129);He.exports=function V(O){if("string"==typeof O||X(O))return O;var H=O+"";return"0"==H&&1/O==-1/0?"-0":H}},2827:He=>{var U=Function.prototype.toString;He.exports=function X(D){if(null!=D){try{return U.call(D)}catch{}try{return D+""}catch{}}return""}},2760:He=>{var we=/\s/;He.exports=function U(X){for(var D=X.length;D--&&we.test(X.charAt(D)););return D}},406:(He,we,U)=>{var X=U(5940),D=U(1710),V=U(1467),H=Math.max,L=Math.min;He.exports=function P(q,ee,K){var ne,se,J,W,ae,_e,Ee=0,te=!1,oe=!1,B=!0;if("function"!=typeof q)throw new TypeError("Expected a function");function $(Fe){var Ye=ne,lt=se;return ne=se=void 0,Ee=Fe,W=q.apply(lt,Ye)}function ie(Fe){return Ee=Fe,ae=setTimeout(Me,ee),te?$(Fe):W}function Be(Fe){var Ye=Fe-_e;return void 0===_e||Ye>=ee||Ye<0||oe&&Fe-Ee>=J}function Me(){var Fe=D();if(Be(Fe))return xe(Fe);ae=setTimeout(Me,function pe(Fe){var vt=ee-(Fe-_e);return oe?L(vt,J-(Fe-Ee)):vt}(Fe))}function xe(Fe){return ae=void 0,B&&ne?$(Fe):(ne=se=void 0,W)}function ot(){var Fe=D(),Ye=Be(Fe);if(ne=arguments,se=this,_e=Fe,Ye){if(void 0===ae)return ie(_e);if(oe)return clearTimeout(ae),ae=setTimeout(Me,ee),$(_e)}return void 0===ae&&(ae=setTimeout(Me,ee)),W}return ee=V(ee)||0,X(K)&&(te=!!K.leading,J=(oe="maxWait"in K)?H(V(K.maxWait)||0,ee):J,B="trailing"in K?!!K.trailing:B),ot.cancel=function ue(){void 0!==ae&&clearTimeout(ae),Ee=0,ne=_e=se=ae=void 0},ot.flush=function Pe(){return void 0===ae?W:xe(D())},ot}},217:He=>{He.exports=function we(U,X){return U===X||U!=U&&X!=X}},8817:(He,we,U)=>{var X=U(5456);He.exports=function D(V,O,H){var L=null==V?void 0:X(V,O);return void 0===L?H:L}},9460:He=>{He.exports=Array.isArray},5946:(He,we,U)=>{var X=U(3337),D=U(5940);He.exports=function P(q){if(!D(q))return!1;var ee=X(q);return"[object Function]"==ee||"[object GeneratorFunction]"==ee||"[object AsyncFunction]"==ee||"[object Proxy]"==ee}},5940:He=>{He.exports=function we(U){var X=typeof U;return null!=U&&("object"==X||"function"==X)}},2671:He=>{He.exports=function we(U){return null!=U&&"object"==typeof U}},4129:(He,we,U)=>{var X=U(3337),D=U(2671);He.exports=function O(H){return"symbol"==typeof H||D(H)&&"[object Symbol]"==X(H)}},7489:function(He,we,U){var X;He=U.nmd(He),function(){var D,L="Expected a function",q="__lodash_hash_undefined__",K="__lodash_placeholder__",$=32,vt=1/0,vn=9007199254740991,rt=4294967295,At=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",$],["partialRight",64],["rearg",256]],Lt="[object Arguments]",Ut="[object Array]",fe="[object Boolean]",wt="[object Date]",Un="[object Error]",ri="[object Function]",Et="[object GeneratorFunction]",Ot="[object Map]",fn="[object Number]",Le="[object Object]",ze="[object Promise]",yn="[object RegExp]",ii="[object Set]",Li="[object String]",Cs="[object Symbol]",ws="[object WeakMap]",sr="[object ArrayBuffer]",il="[object DataView]",$l="[object Float32Array]",ql="[object Float64Array]",Wf="[object Int8Array]",jf="[object Int16Array]",ih="[object Int32Array]",cc="[object Uint8Array]",Sh="[object Uint8ClampedArray]",ku="[object Uint16Array]",Xa="[object Uint32Array]",Rd=/\b__p \+= '';/g,uu=/\b(__p \+=) '' \+/g,Sa=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Eh=/&(?:amp|lt|gt|quot|#39);/g,Ou=/[&<>"']/g,td=RegExp(Eh.source),ff=RegExp(Ou.source),nd=/<%-([\s\S]+?)%>/g,pl=/<%([\s\S]+?)%>/g,pf=/<%=([\s\S]+?)%>/g,rh=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,gf=/^\w*$/,kd=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,xc=/[\\^$.*+?()[\]{}|]/g,Mg=RegExp(xc.source),Th=/^\s+/,io=/\s/,mf=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,gl=/\{\n\/\* \[wrapped with (.+)\] \*/,Ic=/,? & /,rl=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,$f=/[()=,{}\[\]\/\s]/,id=/\\(\\)?/g,Ze=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,pt=/\w*$/,st=/^[-+]0x[0-9a-f]+$/i,ge=/^0b[01]+$/i,Re=/^\[object .+?Constructor\]$/,tt=/^0o[0-7]+$/i,Mt=/^(?:0|[1-9]\d*)$/,Yt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Tn=/($^)/,wi=/['\n\r\u2028\u2029\\]/g,si="\\ud800-\\udfff",ur="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Gs="\\u2700-\\u27bf",So="a-z\\xdf-\\xf6\\xf8-\\xff",Ya="A-Z\\xc0-\\xd6\\xd8-\\xde",Fu="\\ufe0e\\ufe0f",cs="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Dg="["+si+"]",Vp="["+cs+"]",yi="["+ur+"]",Lg="\\d+",Ps="["+Gs+"]",To="["+So+"]",vv="[^"+si+cs+Lg+Gs+So+Ya+"]",yv="\\ud83c[\\udffb-\\udfff]",As="[^"+si+"]",er="(?:\\ud83c[\\udde6-\\uddff]){2}",My="[\\ud800-\\udbff][\\udc00-\\udfff]",Xo="["+Ya+"]",Sc="(?:"+To+"|"+vv+")",rd="(?:"+Xo+"|"+vv+")",kl="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",on="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",vs="(?:"+yi+"|"+yv+")?",Od="["+Fu+"]?",Ec=Od+vs+"(?:\\u200d(?:"+[As,er,My].join("|")+")"+Od+vs+")*",ro="(?:"+[Ps,er,My].join("|")+")"+Ec,Mh="(?:"+[As+yi+"?",yi,er,My,Dg].join("|")+")",N_=RegExp("['\u2019]","g"),uc=RegExp(yi,"g"),Zi=RegExp(yv+"(?="+yv+")|"+Mh+Ec,"g"),fb=RegExp([Xo+"?"+To+"+"+kl+"(?="+[Vp,Xo,"$"].join("|")+")",rd+"+"+on+"(?="+[Vp,Xo+Sc,"$"].join("|")+")",Xo+"?"+Sc+"+"+kl,Xo+"+"+on,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Lg,ro].join("|"),"g"),Sr=RegExp("[\\u200d"+si+ur+Fu+"]"),Tc=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Dy=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],B_=-1,Ta={};Ta[$l]=Ta[ql]=Ta[Wf]=Ta[jf]=Ta[ih]=Ta[cc]=Ta[Sh]=Ta[ku]=Ta[Xa]=!0,Ta[Lt]=Ta[Ut]=Ta[sr]=Ta[fe]=Ta[il]=Ta[wt]=Ta[Un]=Ta[ri]=Ta[Ot]=Ta[fn]=Ta[Le]=Ta[yn]=Ta[ii]=Ta[Li]=Ta[ws]=!1;var ha={};ha[Lt]=ha[Ut]=ha[sr]=ha[il]=ha[fe]=ha[wt]=ha[$l]=ha[ql]=ha[Wf]=ha[jf]=ha[ih]=ha[Ot]=ha[fn]=ha[Le]=ha[yn]=ha[ii]=ha[Li]=ha[Cs]=ha[cc]=ha[Sh]=ha[ku]=ha[Xa]=!0,ha[Un]=ha[ri]=ha[ws]=!1;var Am={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},rs=parseFloat,bv=parseInt,Cv="object"==typeof global&&global&&global.Object===Object&&global,Nu="object"==typeof self&&self&&self.Object===Object&&self,Xl=Cv||Nu||Function("return this")(),z_=we&&!we.nodeType&&we,sh=z_&&He&&!He.nodeType&&He,oh=sh&&sh.exports===z_,Ly=oh&&Cv.process,Dh=function(){try{return sh&&sh.require&&sh.require("util").types||Ly&&Ly.binding&&Ly.binding("util")}catch{}}(),Ma=Dh&&Dh.isArrayBuffer,so=Dh&&Dh.isDate,V_=Dh&&Dh.isMap,Py=Dh&&Dh.isRegExp,Fd=Dh&&Dh.isSet,_o=Dh&&Dh.isTypedArray;function Ka(Sn,ci,Jn){switch(Jn.length){case 0:return Sn.call(ci);case 1:return Sn.call(ci,Jn[0]);case 2:return Sn.call(ci,Jn[0],Jn[1]);case 3:return Sn.call(ci,Jn[0],Jn[1],Jn[2])}return Sn.apply(ci,Jn)}function Xf(Sn,ci,Jn,Or){for(var Vs=-1,Zo=null==Sn?0:Sn.length;++Vs<Zo;){var Zl=Sn[Vs];ci(Or,Zl,Jn(Zl),Sn)}return Or}function Za(Sn,ci){for(var Jn=-1,Or=null==Sn?0:Sn.length;++Jn<Or&&!1!==ci(Sn[Jn],Jn,Sn););return Sn}function sl(Sn,ci){for(var Jn=null==Sn?0:Sn.length;Jn--&&!1!==ci(Sn[Jn],Jn,Sn););return Sn}function hu(Sn,ci){for(var Jn=-1,Or=null==Sn?0:Sn.length;++Jn<Or;)if(!ci(Sn[Jn],Jn,Sn))return!1;return!0}function ah(Sn,ci){for(var Jn=-1,Or=null==Sn?0:Sn.length,Vs=0,Zo=[];++Jn<Or;){var Zl=Sn[Jn];ci(Zl,Jn,Sn)&&(Zo[Vs++]=Zl)}return Zo}function Yf(Sn,ci){return!(null==Sn||!Sn.length)&&La(Sn,ci,0)>-1}function _r(Sn,ci,Jn){for(var Or=-1,Vs=null==Sn?0:Sn.length;++Or<Vs;)if(Jn(ci,Sn[Or]))return!0;return!1}function Da(Sn,ci){for(var Jn=-1,Or=null==Sn?0:Sn.length,Vs=Array(Or);++Jn<Or;)Vs[Jn]=ci(Sn[Jn],Jn,Sn);return Vs}function Lh(Sn,ci){for(var Jn=-1,Or=ci.length,Vs=Sn.length;++Jn<Or;)Sn[Vs+Jn]=ci[Jn];return Sn}function vf(Sn,ci,Jn,Or){var Vs=-1,Zo=null==Sn?0:Sn.length;for(Or&&Zo&&(Jn=Sn[++Vs]);++Vs<Zo;)Jn=ci(Jn,Sn[Vs],Vs,Sn);return Jn}function Rr(Sn,ci,Jn,Or){var Vs=null==Sn?0:Sn.length;for(Or&&Vs&&(Jn=Sn[--Vs]);Vs--;)Jn=ci(Jn,Sn[Vs],Vs,Sn);return Jn}function xm(Sn,ci){for(var Jn=-1,Or=null==Sn?0:Sn.length;++Jn<Or;)if(ci(Sn[Jn],Jn,Sn))return!0;return!1}var Ry=Es("length");function Ko(Sn,ci,Jn){var Or;return Jn(Sn,function(Vs,Zo,Zl){if(ci(Vs,Zo,Zl))return Or=Zo,!1}),Or}function Ol(Sn,ci,Jn,Or){for(var Vs=Sn.length,Zo=Jn+(Or?1:-1);Or?Zo--:++Zo<Vs;)if(ci(Sn[Zo],Zo,Sn))return Zo;return-1}function La(Sn,ci,Jn){return ci==ci?function np(Sn,ci,Jn){for(var Or=Jn-1,Vs=Sn.length;++Or<Vs;)if(Sn[Or]===ci)return Or;return-1}(Sn,ci,Jn):Ol(Sn,Yl,Jn)}function fu(Sn,ci,Jn,Or){for(var Vs=Jn-1,Zo=Sn.length;++Vs<Zo;)if(Or(Sn[Vs],ci))return Vs;return-1}function Yl(Sn){return Sn!=Sn}function Ir(Sn,ci){var Jn=null==Sn?0:Sn.length;return Jn?Al(Sn,ci)/Jn:NaN}function Es(Sn){return function(ci){return null==ci?D:ci[Sn]}}function va(Sn){return function(ci){return null==Sn?D:Sn[ci]}}function pu(Sn,ci,Jn,Or,Vs){return Vs(Sn,function(Zo,Zl,_a){Jn=Or?(Or=!1,Zo):ci(Jn,Zo,Zl,_a)}),Jn}function Al(Sn,ci){for(var Jn,Or=-1,Vs=Sn.length;++Or<Vs;){var Zo=ci(Sn[Or]);Zo!==D&&(Jn=Jn===D?Zo:Jn+Zo)}return Jn}function sd(Sn,ci){for(var Jn=-1,Or=Array(Sn);++Jn<Sn;)Or[Jn]=ci(Jn);return Or}function Hp(Sn){return Sn&&Sn.slice(0,Jc(Sn)+1).replace(Th,"")}function Kl(Sn){return function(ci){return Sn(ci)}}function Ws(Sn,ci){return Da(ci,function(Jn){return Sn[Jn]})}function yf(Sn,ci){return Sn.has(ci)}function Zf(Sn,ci){for(var Jn=-1,Or=Sn.length;++Jn<Or&&La(ci,Sn[Jn],0)>-1;);return Jn}function Im(Sn,ci){for(var Jn=Sn.length;Jn--&&La(ci,Sn[Jn],0)>-1;);return Jn}function _f(Sn,ci){for(var Jn=Sn.length,Or=0;Jn--;)Sn[Jn]===ci&&++Or;return Or}var Mc=va({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),Rg=va({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Qf(Sn){return"\\"+Am[Sn]}function ch(Sn){return Sr.test(Sn)}function Jf(Sn){var ci=-1,Jn=Array(Sn.size);return Sn.forEach(function(Or,Vs){Jn[++ci]=[Vs,Or]}),Jn}function ep(Sn,ci){return function(Jn){return Sn(ci(Jn))}}function gu(Sn,ci){for(var Jn=-1,Or=Sn.length,Vs=0,Zo=[];++Jn<Or;){var Zl=Sn[Jn];(Zl===ci||Zl===K)&&(Sn[Jn]=K,Zo[Vs++]=Jn)}return Zo}function Gp(Sn){var ci=-1,Jn=Array(Sn.size);return Sn.forEach(function(Or){Jn[++ci]=Or}),Jn}function al(Sn){return ch(Sn)?function wv(Sn){for(var ci=Zi.lastIndex=0;Zi.test(Sn);)++ci;return ci}(Sn):Ry(Sn)}function uh(Sn){return ch(Sn)?function kg(Sn){return Sn.match(Zi)||[]}(Sn):function qr(Sn){return Sn.split("")}(Sn)}function Jc(Sn){for(var ci=Sn.length;ci--&&io.test(Sn.charAt(ci)););return ci}var Ph=va({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Sm=function Sn(ci){var b,Jn=(ci=null==ci?Xl:Sm.defaults(Xl.Object(),ci,Sm.pick(Xl,Dy))).Array,Or=ci.Date,Vs=ci.Error,Zo=ci.Function,Zl=ci.Math,_a=ci.Object,Av=ci.RegExp,xv=ci.String,kh=ci.TypeError,Iv=Jn.prototype,Fg=_a.prototype,Sv=ci["__core-js_shared__"],Ev=Zo.prototype.toString,ia=Fg.hasOwnProperty,Oy=0,Em=(b=/[^.]+$/.exec(Sv&&Sv.keys&&Sv.keys.IE_PROTO||""))?"Symbol(src)_1."+b:"",Tm=Fg.toString,pb=Ev.call(_a),H_=Xl._,ip=Av("^"+Ev.call(ia).replace(xc,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Mm=oh?ci.Buffer:D,da=ci.Symbol,bf=ci.Uint8Array,Fy=Mm?Mm.allocUnsafe:D,rp=ep(_a.getPrototypeOf,_a),Tv=_a.create,Dm=Fg.propertyIsEnumerable,Ng=Iv.splice,Bg=da?da.isConcatSpreadable:D,Wp=da?da.iterator:D,ba=da?da.toStringTag:D,sp=function(){try{var b=Qd(_a,"defineProperty");return b({},"",{}),b}catch{}}(),Ny=ci.clearTimeout!==Xl.clearTimeout&&ci.clearTimeout,Lm=Or&&Or.now!==Xl.Date.now&&Or.now,By=ci.setTimeout!==Xl.setTimeout&&ci.setTimeout,Mv=Zl.ceil,ra=Zl.floor,zg=_a.getOwnPropertySymbols,jp=Mm?Mm.isBuffer:D,Vg=ci.isFinite,hh=Iv.join,G_=ep(_a.keys,_a),ys=Zl.max,ml=Zl.min,Dc=Or.now,bo=ci.parseInt,Fo=Zl.random,Nr=Iv.reverse,$s=Qd(ci,"DataView"),Xr=Qd(ci,"Map"),Ug=Qd(ci,"Promise"),ns=Qd(ci,"Set"),us=Qd(ci,"WeakMap"),Lc=Qd(_a,"create"),od=us&&new us,$p={},W_=qh($s),zy=qh(Xr),Ks=qh(Ug),eu=qh(ns),bi=qh(us),Ts=da?da.prototype:D,Pt=Ts?Ts.valueOf:D,Rt=Ts?Ts.toString:D;function bt(b){if(oi(b)&&!ki(b)&&!(b instanceof Rs)){if(b instanceof sa)return b;if(ia.call(b,"__wrapped__"))return im(b)}return new sa(b)}var No=function(){function b(){}return function(S){if(!cr(S))return{};if(Tv)return Tv(S);b.prototype=S;var Q=new b;return b.prototype=D,Q}}();function Mo(){}function sa(b,S){this.__wrapped__=b,this.__actions__=[],this.__chain__=!!S,this.__index__=0,this.__values__=D}function Rs(b){this.__wrapped__=b,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=rt,this.__views__=[]}function Fl(b){var S=-1,Q=null==b?0:b.length;for(this.clear();++S<Q;){var ke=b[S];this.set(ke[0],ke[1])}}function vl(b){var S=-1,Q=null==b?0:b.length;for(this.clear();++S<Q;){var ke=b[S];this.set(ke[0],ke[1])}}function os(b){var S=-1,Q=null==b?0:b.length;for(this.clear();++S<Q;){var ke=b[S];this.set(ke[0],ke[1])}}function Dr(b){var S=-1,Q=null==b?0:b.length;for(this.__data__=new os;++S<Q;)this.add(b[S])}function oa(b){var S=this.__data__=new vl(b);this.size=S.size}function Ha(b,S){var Q=ki(b),ke=!Q&&Yr(b),gt=!Q&&!ke&&Jr(b),Bt=!Q&&!ke&&!gt&&Bc(b),hn=Q||ke||gt||Bt,Cn=hn?sd(b.length,xv):[],Rn=Cn.length;for(var Ri in b)(S||ia.call(b,Ri))&&(!hn||!("length"==Ri||gt&&("offset"==Ri||"parent"==Ri)||Bt&&("buffer"==Ri||"byteLength"==Ri||"byteOffset"==Ri)||mc(Ri,Rn)))&&Cn.push(Ri);return Cn}function Lv(b){var S=b.length;return S?b[hd(0,S-1)]:D}function Pv(b,S){return yd(Js(b),Sf(S,0,b.length))}function Wg(b){return yd(Js(b))}function jg(b,S,Q){(Q!==D&&!Zr(b[S],Q)||Q===D&&!(S in b))&&Fh(b,S,Q)}function Af(b,S,Q){var ke=b[S];(!ia.call(b,S)||!Zr(ke,Q)||Q===D&&!(S in b))&&Fh(b,S,Q)}function Pm(b,S){for(var Q=b.length;Q--;)if(Zr(b[Q][0],S))return Q;return-1}function xf(b,S,Q,ke){return ad(b,function(gt,Bt,hn){S(ke,gt,Q(gt),hn)}),ke}function Ud(b,S){return b&&pc(S,Hc(S),b)}function Fh(b,S,Q){"__proto__"==S&&sp?sp(b,S,{configurable:!0,enumerable:!0,value:Q,writable:!0}):b[S]=Q}function If(b,S){for(var Q=-1,ke=S.length,gt=Jn(ke),Bt=null==b;++Q<ke;)gt[Q]=Bt?D:xb(b,S[Q]);return gt}function Sf(b,S,Q){return b==b&&(Q!==D&&(b=b<=Q?b:Q),S!==D&&(b=b>=S?b:S)),b}function yl(b,S,Q,ke,gt,Bt){var hn,Cn=1&S,Rn=2&S,Ri=4&S;if(Q&&(hn=gt?Q(b,ke,gt,Bt):Q(b)),hn!==D)return hn;if(!cr(b))return b;var Oi=ki(b);if(Oi){if(hn=function yh(b){var S=b.length,Q=new b.constructor(S);return S&&"string"==typeof b[0]&&ia.call(b,"index")&&(Q.index=b.index,Q.input=b.input),Q}(b),!Cn)return Js(b,hn)}else{var qi=Oa(b),Lr=qi==ri||qi==Et;if(Jr(b))return _u(b,Cn);if(qi==Le||qi==Lt||Lr&&!gt){if(hn=Rn||Lr?{}:ng(b),!Cn)return Rn?function fp(b,S){return pc(b,tg(b),S)}(b,function $g(b,S){return b&&pc(S,xu(S),b)}(hn,b)):function gh(b,S){return pc(b,yp(b),S)}(b,Ud(hn,b))}else{if(!ha[qi])return gt?b:{};hn=function Vm(b,S,Q){var ke=b.constructor;switch(S){case sr:return El(b);case fe:case wt:return new ke(+b);case il:return function fc(b,S){var Q=S?El(b.buffer):b.buffer;return new b.constructor(Q,b.byteOffset,b.byteLength)}(b,Q);case $l:case ql:case Wf:case jf:case ih:case cc:case Sh:case ku:case Xa:return tc(b,Q);case Ot:return new ke;case fn:case Li:return new ke(b);case yn:return function Do(b){var S=new b.constructor(b.source,pt.exec(b));return S.lastIndex=b.lastIndex,S}(b);case ii:return new ke;case Cs:return function Om(b){return Pt?_a(Pt.call(b)):{}}(b)}}(b,qi,Cn)}}Bt||(Bt=new oa);var Wr=Bt.get(b);if(Wr)return Wr;Bt.set(b,hn),Wa(b)?b.forEach(function(Is){hn.add(yl(Is,S,Q,Is,b,Bt))}):Br(b)&&b.forEach(function(Is,po){hn.set(po,yl(Is,S,Q,po,b,Bt))});var co=Oi?D:(Ri?Rn?Zd:wu:Rn?xu:Hc)(b);return Za(co||b,function(Is,po){co&&(Is=b[po=Is]),Af(hn,po,yl(Is,S,Q,po,b,Bt))}),hn}function Vy(b,S,Q){var ke=Q.length;if(null==b)return!ke;for(b=_a(b);ke--;){var gt=Q[ke],hn=b[gt];if(hn===D&&!(gt in b)||!(0,S[gt])(hn))return!1}return!0}function Uy(b,S,Q){if("function"!=typeof b)throw new kh(L);return jh(function(){b.apply(D,Q)},S)}function Hd(b,S,Q,ke){var gt=-1,Bt=Yf,hn=!0,Cn=b.length,Rn=[],Ri=S.length;if(!Cn)return Rn;Q&&(S=Da(S,Kl(Q))),ke?(Bt=_r,hn=!1):S.length>=200&&(Bt=yf,hn=!1,S=new Dr(S));e:for(;++gt<Cn;){var Oi=b[gt],qi=null==Q?Oi:Q(Oi);if(Oi=ke||0!==Oi?Oi:0,hn&&qi==qi){for(var Lr=Ri;Lr--;)if(S[Lr]===qi)continue e;Rn.push(Oi)}else Bt(S,qi,ke)||Rn.push(Oi)}return Rn}bt.templateSettings={escape:nd,evaluate:pl,interpolate:pf,variable:"",imports:{_:bt}},(bt.prototype=Mo.prototype).constructor=bt,(sa.prototype=No(Mo.prototype)).constructor=sa,(Rs.prototype=No(Mo.prototype)).constructor=Rs,Fl.prototype.clear=function Ca(){this.__data__=Lc?Lc(null):{},this.size=0},Fl.prototype.delete=function Bo(b){var S=this.has(b)&&delete this.__data__[b];return this.size-=S?1:0,S},Fl.prototype.get=function Va(b){var S=this.__data__;if(Lc){var Q=S[b];return Q===q?D:Q}return ia.call(S,b)?S[b]:D},Fl.prototype.has=function gr(b){var S=this.__data__;return Lc?S[b]!==D:ia.call(S,b)},Fl.prototype.set=function Oh(b,S){var Q=this.__data__;return this.size+=this.has(b)?0:1,Q[b]=Lc&&S===D?q:S,this},vl.prototype.clear=function Bd(){this.__data__=[],this.size=0},vl.prototype.delete=function ap(b){var S=this.__data__,Q=Pm(S,b);return!(Q<0||(Q==S.length-1?S.pop():Ng.call(S,Q,1),--this.size,0))},vl.prototype.get=function zd(b){var S=this.__data__,Q=Pm(S,b);return Q<0?D:S[Q][1]},vl.prototype.has=function Cf(b){return Pm(this.__data__,b)>-1},vl.prototype.set=function Bu(b,S){var Q=this.__data__,ke=Pm(Q,b);return ke<0?(++this.size,Q.push([b,S])):Q[ke][1]=S,this},os.prototype.clear=function Pc(){this.size=0,this.__data__={hash:new Fl,map:new(Xr||vl),string:new Fl}},os.prototype.delete=function Hg(b){var S=vp(this,b).delete(b);return this.size-=S?1:0,S},os.prototype.get=function Ms(b){return vp(this,b).get(b)},os.prototype.has=function Dv(b){return vp(this,b).has(b)},os.prototype.set=function Gg(b,S){var Q=vp(this,b),ke=Q.size;return Q.set(b,S),this.size+=Q.size==ke?0:1,this},Dr.prototype.add=Dr.prototype.push=function wa(b){return this.__data__.set(b,q),this},Dr.prototype.has=function Nl(b){return this.__data__.has(b)},oa.prototype.clear=function Ua(){this.__data__=new vl,this.size=0},oa.prototype.delete=function xl(b){var S=this.__data__,Q=S.delete(b);return this.size=S.size,Q},oa.prototype.get=function Vd(b){return this.__data__.get(b)},oa.prototype.has=function hc(b){return this.__data__.has(b)},oa.prototype.set=function wf(b,S){var Q=this.__data__;if(Q instanceof vl){var ke=Q.__data__;if(!Xr||ke.length<199)return ke.push([b,S]),this.size=++Q.size,this;Q=this.__data__=new os(ke)}return Q.set(b,S),this.size=Q.size,this};var ad=Mf(Rc),Rv=Mf(Bh,!0);function j_(b,S){var Q=!0;return ad(b,function(ke,gt,Bt){return Q=!!S(ke,gt,Bt)}),Q}function kv(b,S,Q){for(var ke=-1,gt=b.length;++ke<gt;){var Bt=b[ke],hn=S(Bt);if(null!=hn&&(Cn===D?hn==hn&&!Gl(hn):Q(hn,Cn)))var Cn=hn,Rn=Bt}return Rn}function Yp(b,S){var Q=[];return ad(b,function(ke,gt,Bt){S(ke,gt,Bt)&&Q.push(ke)}),Q}function ll(b,S,Q,ke,gt){var Bt=-1,hn=b.length;for(Q||(Q=Fa),gt||(gt=[]);++Bt<hn;){var Cn=b[Bt];S>0&&Q(Cn)?S>1?ll(Cn,S-1,Q,ke,gt):Lh(gt,Cn):ke||(gt[gt.length]=Cn)}return gt}var Gd=Df(),Nh=Df(!0);function Rc(b,S){return b&&Gd(b,S,Hc)}function Bh(b,S){return b&&Nh(b,S,Hc)}function dh(b,S){return ah(S,function(Q){return bn(b[Q])})}function zu(b,S){for(var Q=0,ke=(S=ec(S,b)).length;null!=b&&Q<ke;)b=b[Xu(S[Q++])];return Q&&Q==ke?b:D}function mu(b,S,Q){var ke=S(b);return ki(b)?ke:Lh(ke,Q(b))}function aa(b){return null==b?b===D?"[object Undefined]":"[object Null]":ba&&ba in _a(b)?function Pf(b){var S=ia.call(b,ba),Q=b[ba];try{b[ba]=D;var ke=!0}catch{}var gt=Tm.call(b);return ke&&(S?b[ba]=Q:delete b[ba]),gt}(b):function $_(b){return Tm.call(b)}(b)}function ld(b,S){return b>S}function Rm(b,S){return null!=b&&ia.call(b,S)}function qg(b,S){return null!=b&&S in _a(b)}function vu(b,S,Q){for(var ke=Q?_r:Yf,gt=b[0].length,Bt=b.length,hn=Bt,Cn=Jn(Bt),Rn=1/0,Ri=[];hn--;){var Oi=b[hn];hn&&S&&(Oi=Da(Oi,Kl(S))),Rn=ml(Oi.length,Rn),Cn[hn]=!Q&&(S||gt>=120&&Oi.length>=120)?new Dr(hn&&Oi):D}Oi=b[0];var qi=-1,Lr=Cn[0];e:for(;++qi<gt&&Ri.length<Rn;){var Wr=Oi[qi],xs=S?S(Wr):Wr;if(Wr=Q||0!==Wr?Wr:0,!(Lr?yf(Lr,xs):ke(Ri,xs,Q))){for(hn=Bt;--hn;){var co=Cn[hn];if(!(co?yf(co,xs):ke(b[hn],xs,Q)))continue e}Lr&&Lr.push(xs),Ri.push(Wr)}}return Ri}function kc(b,S,Q){var ke=null==(b=bl(b,S=ec(S,b)))?b:b[Xu(Au(S))];return null==ke?D:Ka(ke,b,Q)}function js(b){return oi(b)&&aa(b)==Lt}function Oc(b,S,Q,ke,gt){return b===S||(null==b||null==S||!oi(b)&&!oi(S)?b!=b&&S!=S:function up(b,S,Q,ke,gt,Bt){var hn=ki(b),Cn=ki(S),Rn=hn?Ut:Oa(b),Ri=Cn?Ut:Oa(S),Oi=(Rn=Rn==Lt?Le:Rn)==Le,qi=(Ri=Ri==Lt?Le:Ri)==Le,Lr=Rn==Ri;if(Lr&&Jr(b)){if(!Jr(S))return!1;hn=!0,Oi=!1}if(Lr&&!Oi)return Bt||(Bt=new oa),hn||Bc(b)?vh(b,S,Q,ke,gt,Bt):function em(b,S,Q,ke,gt,Bt,hn){switch(Q){case il:if(b.byteLength!=S.byteLength||b.byteOffset!=S.byteOffset)return!1;b=b.buffer,S=S.buffer;case sr:return!(b.byteLength!=S.byteLength||!Bt(new bf(b),new bf(S)));case fe:case wt:case fn:return Zr(+b,+S);case Un:return b.name==S.name&&b.message==S.message;case yn:case Li:return b==S+"";case Ot:var Cn=Jf;case ii:if(Cn||(Cn=Gp),b.size!=S.size&&!(1&ke))return!1;var Ri=hn.get(b);if(Ri)return Ri==S;ke|=2,hn.set(b,S);var Oi=vh(Cn(b),Cn(S),ke,gt,Bt,hn);return hn.delete(b),Oi;case Cs:if(Pt)return Pt.call(b)==Pt.call(S)}return!1}(b,S,Rn,Q,ke,gt,Bt);if(!(1&Q)){var Wr=Oi&&ia.call(b,"__wrapped__"),xs=qi&&ia.call(S,"__wrapped__");if(Wr||xs){var co=Wr?b.value():b,Is=xs?S.value():S;return Bt||(Bt=new oa),gt(co,Is,Q,ke,Bt)}}return!!Lr&&(Bt||(Bt=new oa),function fd(b,S,Q,ke,gt,Bt){var hn=1&Q,Cn=wu(b),Rn=Cn.length;if(Rn!=wu(S).length&&!hn)return!1;for(var qi=Rn;qi--;){var Lr=Cn[qi];if(!(hn?Lr in S:ia.call(S,Lr)))return!1}var Wr=Bt.get(b),xs=Bt.get(S);if(Wr&&xs)return Wr==S&&xs==b;var co=!0;Bt.set(b,S),Bt.set(S,b);for(var Is=hn;++qi<Rn;){var po=b[Lr=Cn[qi]],zo=S[Lr];if(ke)var Yh=hn?ke(zo,po,Lr,S,b,Bt):ke(po,zo,Lr,b,S,Bt);if(!(Yh===D?po===zo||gt(po,zo,Q,ke,Bt):Yh)){co=!1;break}Is||(Is="constructor"==Lr)}if(co&&!Is){var Kh=b.constructor,Gc=S.constructor;Kh!=Gc&&"constructor"in b&&"constructor"in S&&!("function"==typeof Kh&&Kh instanceof Kh&&"function"==typeof Gc&&Gc instanceof Gc)&&(co=!1)}return Bt.delete(b),Bt.delete(S),co}(b,S,Q,ke,gt,Bt))}(b,S,Q,ke,Oc,gt))}function fh(b,S,Q,ke){var gt=Q.length,Bt=gt,hn=!ke;if(null==b)return!Bt;for(b=_a(b);gt--;){var Cn=Q[gt];if(hn&&Cn[2]?Cn[1]!==b[Cn[0]]:!(Cn[0]in b))return!1}for(;++gt<Bt;){var Rn=(Cn=Q[gt])[0],Ri=b[Rn],Oi=Cn[1];if(hn&&Cn[2]){if(Ri===D&&!(Rn in b))return!1}else{var qi=new oa;if(ke)var Lr=ke(Ri,Oi,Rn,b,S,qi);if(!(Lr===D?Oc(Oi,Ri,3,ke,qi):Lr))return!1}}return!0}function Wd(b){return!(!cr(b)||function Rf(b){return!!Em&&Em in b}(b))&&(bn(b)?ip:Re).test(qh(b))}function zh(b){return"function"==typeof b?b:null==b?Cd:"object"==typeof b?ki(b)?Kp(b[0],b[1]):ph(b):r0(b)}function tu(b){if(!_h(b))return G_(b);var S=[];for(var Q in _a(b))ia.call(b,Q)&&"constructor"!=Q&&S.push(Q);return S}function $d(b,S){return b<S}function hp(b,S){var Q=-1,ke=wr(b)?Jn(b.length):[];return ad(b,function(gt,Bt,hn){ke[++Q]=S(gt,Bt,hn)}),ke}function ph(b){var S=tm(b);return 1==S.length&&S[0][2]?ru(S[0][0],S[0][1]):function(Q){return Q===b||fh(Q,b,S)}}function Kp(b,S){return ig(b)&&Jd(S)?ru(Xu(b),S):function(Q){var ke=xb(Q,b);return ke===D&&ke===S?Qy(Q,b):Oc(S,ke,3)}}function Wo(b,S,Q,ke,gt){b!==S&&Gd(S,function(Bt,hn){if(gt||(gt=new oa),cr(Bt))!function qd(b,S,Q,ke,gt,Bt,hn){var Cn=kf(b,Q),Rn=kf(S,Q),Ri=hn.get(Rn);if(Ri)jg(b,Q,Ri);else{var Oi=Bt?Bt(Cn,Rn,Q+"",b,S,hn):D,qi=Oi===D;if(qi){var Lr=ki(Rn),Wr=!Lr&&Jr(Rn),xs=!Lr&&!Wr&&Bc(Rn);Oi=Rn,Lr||Wr||xs?ki(Cn)?Oi=Cn:Qr(Cn)?Oi=Js(Cn):Wr?(qi=!1,Oi=_u(Rn,!0)):xs?(qi=!1,Oi=tc(Rn,!0)):Oi=[]:Lo(Rn)||Yr(Rn)?(Oi=Cn,Yr(Cn)?Oi=J_(Cn):(!cr(Cn)||bn(Cn))&&(Oi=ng(Rn))):qi=!1}qi&&(hn.set(Rn,Oi),gt(Oi,Rn,ke,Bt,hn),hn.delete(Rn)),jg(b,Q,Oi)}}(b,S,hn,Q,Wo,ke,gt);else{var Cn=ke?ke(kf(b,hn),Bt,hn+"",b,S,gt):D;Cn===D&&(Cn=Bt),jg(b,hn,Cn)}},xu)}function Vh(b,S){var Q=b.length;if(Q)return mc(S+=S<0?Q:0,Q)?b[S]:D}function Qa(b,S,Q){S=S.length?Da(S,function(Bt){return ki(Bt)?function(hn){return zu(hn,1===Bt.length?Bt[0]:Bt)}:Bt}):[Cd];var ke=-1;return S=Da(S,Kl(as())),function Kf(Sn,ci){var Jn=Sn.length;for(Sn.sort(ci);Jn--;)Sn[Jn]=Sn[Jn].value;return Sn}(hp(b,function(Bt,hn,Cn){return{criteria:Da(S,function(Ri){return Ri(Bt)}),index:++ke,value:Bt}}),function(Bt,hn){return function Yg(b,S,Q){for(var ke=-1,gt=b.criteria,Bt=S.criteria,hn=gt.length,Cn=Q.length;++ke<hn;){var Rn=zl(gt[ke],Bt[ke]);if(Rn)return ke>=Cn?Rn:Rn*("desc"==Q[ke]?-1:1)}return b.index-S.index}(Bt,hn,Q)})}function Vu(b,S,Q){for(var ke=-1,gt=S.length,Bt={};++ke<gt;){var hn=S[ke],Cn=zu(b,hn);Q(Cn,hn)&&wo(Bt,ec(hn,b),Cn)}return Bt}function Pa(b,S,Q,ke){var gt=ke?fu:La,Bt=-1,hn=S.length,Cn=b;for(b===S&&(S=Js(S)),Q&&(Cn=Da(b,Kl(Q)));++Bt<hn;)for(var Rn=0,Ri=S[Bt],Oi=Q?Q(Ri):Ri;(Rn=gt(Cn,Oi,Rn,ke))>-1;)Cn!==b&&Ng.call(Cn,Rn,1),Ng.call(b,Rn,1);return b}function nu(b,S){for(var Q=b?S.length:0,ke=Q-1;Q--;){var gt=S[Q];if(Q==ke||gt!==Bt){var Bt=gt;mc(gt)?Ng.call(b,gt,1):Uu(b,gt)}}return b}function hd(b,S){return b+ra(Fo()*(S-b+1))}function jo(b,S){var Q="";if(!b||S<1||S>vn)return Q;do{S%2&&(Q+=b),(S=ra(S/2))&&(b+=b)}while(S);return Q}function Ns(b,S){return $h(nm(b,S,Cd),b+"")}function ir(b){return Lv(Jy(b))}function km(b,S){var Q=Jy(b);return yd(Q,Sf(S,0,Q.length))}function wo(b,S,Q,ke){if(!cr(b))return b;for(var gt=-1,Bt=(S=ec(S,b)).length,hn=Bt-1,Cn=b;null!=Cn&&++gt<Bt;){var Rn=Xu(S[gt]),Ri=Q;if("__proto__"===Rn||"constructor"===Rn||"prototype"===Rn)return b;if(gt!=hn){var Oi=Cn[Rn];(Ri=ke?ke(Oi,Rn,Cn):D)===D&&(Ri=cr(Oi)?Oi:mc(S[gt+1])?[]:{})}Af(Cn,Rn,Ri),Cn=Cn[Rn]}return b}var Ef=od?function(b,S){return od.set(b,S),b}:Cd,Zp=sp?function(b,S){return sp(b,"toString",{configurable:!0,enumerable:!1,value:mw(S),writable:!0})}:Cd;function Qp(b){return yd(Jy(b))}function _l(b,S,Q){var ke=-1,gt=b.length;S<0&&(S=-S>gt?0:gt+S),(Q=Q>gt?gt:Q)<0&&(Q+=gt),gt=S>Q?0:Q-S>>>0,S>>>=0;for(var Bt=Jn(gt);++ke<gt;)Bt[ke]=b[ke+S];return Bt}function Tf(b,S){var Q;return ad(b,function(ke,gt,Bt){return!(Q=S(ke,gt,Bt))}),!!Q}function Jl(b,S,Q){var ke=0,gt=null==b?ke:b.length;if("number"==typeof S&&S==S&&gt<=2147483647){for(;ke<gt;){var Bt=ke+gt>>>1,hn=b[Bt];null!==hn&&!Gl(hn)&&(Q?hn<=S:hn<S)?ke=Bt+1:gt=Bt}return gt}return Jp(b,S,Cd,Q)}function Jp(b,S,Q,ke){var gt=0,Bt=null==b?0:b.length;if(0===Bt)return 0;for(var hn=(S=Q(S))!=S,Cn=null===S,Rn=Gl(S),Ri=S===D;gt<Bt;){var Oi=ra((gt+Bt)/2),qi=Q(b[Oi]),Lr=qi!==D,Wr=null===qi,xs=qi==qi,co=Gl(qi);if(hn)var Is=ke||xs;else Is=Ri?xs&&(ke||Lr):Cn?xs&&Lr&&(ke||!Wr):Rn?xs&&Lr&&!Wr&&(ke||!co):!Wr&&!co&&(ke?qi<=S:qi<S);Is?gt=Oi+1:Bt=Oi}return ml(Bt,4294967294)}function eg(b,S){for(var Q=-1,ke=b.length,gt=0,Bt=[];++Q<ke;){var hn=b[Q],Cn=S?S(hn):hn;if(!Q||!Zr(Cn,Rn)){var Rn=Cn;Bt[gt++]=0===hn?0:hn}}return Bt}function Ra(b){return"number"==typeof b?b:Gl(b)?NaN:+b}function Bl(b){if("string"==typeof b)return b;if(ki(b))return Da(b,Bl)+"";if(Gl(b))return Rt?Rt.call(b):"";var S=b+"";return"0"==S&&1/b==-vt?"-0":S}function Il(b,S,Q){var ke=-1,gt=Yf,Bt=b.length,hn=!0,Cn=[],Rn=Cn;if(Q)hn=!1,gt=_r;else if(Bt>=200){var Ri=S?null:Qg(b);if(Ri)return Gp(Ri);hn=!1,gt=yf,Rn=new Dr}else Rn=S?[]:Cn;e:for(;++ke<Bt;){var Oi=b[ke],qi=S?S(Oi):Oi;if(Oi=Q||0!==Oi?Oi:0,hn&&qi==qi){for(var Lr=Rn.length;Lr--;)if(Rn[Lr]===qi)continue e;S&&Rn.push(qi),Cn.push(Oi)}else gt(Rn,qi,Q)||(Rn!==Cn&&Rn.push(qi),Cn.push(Oi))}return Cn}function Uu(b,S){return null==(b=bl(b,S=ec(S,b)))||delete b[Xu(Au(S))]}function Xd(b,S,Q,ke){return wo(b,S,Q(zu(b,S)),ke)}function Ga(b,S,Q,ke){for(var gt=b.length,Bt=ke?gt:-1;(ke?Bt--:++Bt<gt)&&S(b[Bt],Bt,b););return Q?_l(b,ke?0:Bt,ke?Bt+1:gt):_l(b,ke?Bt+1:0,ke?gt:Bt)}function yu(b,S){var Q=b;return Q instanceof Rs&&(Q=Q.value()),vf(S,function(ke,gt){return gt.func.apply(gt.thisArg,Lh([ke],gt.args))},Q)}function Hu(b,S,Q){var ke=b.length;if(ke<2)return ke?Il(b[0]):[];for(var gt=-1,Bt=Jn(ke);++gt<ke;)for(var hn=b[gt],Cn=-1;++Cn<ke;)Cn!=gt&&(Bt[gt]=Hd(Bt[gt]||hn,b[Cn],S,Q));return Il(ll(Bt,1),S,Q)}function Gu(b,S,Q){for(var ke=-1,gt=b.length,Bt=S.length,hn={};++ke<gt;)Q(hn,b[ke],ke<Bt?S[ke]:D);return hn}function Sl(b){return Qr(b)?b:[]}function ka(b){return"function"==typeof b?b:Cd}function ec(b,S){return ki(b)?b:ig(b,S)?[b]:sg(ta(b))}var dp=Ns;function dc(b,S,Q){var ke=b.length;return Q=Q===D?ke:Q,!S&&Q>=ke?b:_l(b,S,Q)}var Ov=Ny||function(b){return Xl.clearTimeout(b)};function _u(b,S){if(S)return b.slice();var Q=b.length,ke=Fy?Fy(Q):new b.constructor(Q);return b.copy(ke),ke}function El(b){var S=new b.constructor(b.byteLength);return new bf(S).set(new bf(b)),S}function tc(b,S){var Q=S?El(b.buffer):b.buffer;return new b.constructor(Q,b.byteOffset,b.length)}function zl(b,S){if(b!==S){var Q=b!==D,ke=null===b,gt=b==b,Bt=Gl(b),hn=S!==D,Cn=null===S,Rn=S==S,Ri=Gl(S);if(!Cn&&!Ri&&!Bt&&b>S||Bt&&hn&&Rn&&!Cn&&!Ri||ke&&hn&&Rn||!Q&&Rn||!gt)return 1;if(!ke&&!Bt&&!Ri&&b<S||Ri&&Q&&gt&&!ke&&!Bt||Cn&&Q&&gt||!hn&&gt||!Rn)return-1}return 0}function Fm(b,S,Q,ke){for(var gt=-1,Bt=b.length,hn=Q.length,Cn=-1,Rn=S.length,Ri=ys(Bt-hn,0),Oi=Jn(Rn+Ri),qi=!ke;++Cn<Rn;)Oi[Cn]=S[Cn];for(;++gt<hn;)(qi||gt<Bt)&&(Oi[Q[gt]]=b[gt]);for(;Ri--;)Oi[Cn++]=b[gt++];return Oi}function Hh(b,S,Q,ke){for(var gt=-1,Bt=b.length,hn=-1,Cn=Q.length,Rn=-1,Ri=S.length,Oi=ys(Bt-Cn,0),qi=Jn(Oi+Ri),Lr=!ke;++gt<Oi;)qi[gt]=b[gt];for(var Wr=gt;++Rn<Ri;)qi[Wr+Rn]=S[Rn];for(;++hn<Cn;)(Lr||gt<Bt)&&(qi[Wr+Q[hn]]=b[gt++]);return qi}function Js(b,S){var Q=-1,ke=b.length;for(S||(S=Jn(ke));++Q<ke;)S[Q]=b[Q];return S}function pc(b,S,Q,ke){var gt=!Q;Q||(Q={});for(var Bt=-1,hn=S.length;++Bt<hn;){var Cn=S[Bt],Rn=ke?ke(Q[Cn],b[Cn],Cn,Q,b):D;Rn===D&&(Rn=b[Cn]),gt?Fh(Q,Cn,Rn):Af(Q,Cn,Rn)}return Q}function Gh(b,S){return function(Q,ke){var gt=ki(Q)?Xf:xf,Bt=S?S():{};return gt(Q,b,as(ke,2),Bt)}}function bu(b){return Ns(function(S,Q){var ke=-1,gt=Q.length,Bt=gt>1?Q[gt-1]:D,hn=gt>2?Q[2]:D;for(Bt=b.length>3&&"function"==typeof Bt?(gt--,Bt):D,hn&&vc(Q[0],Q[1],hn)&&(Bt=gt<3?D:Bt,gt=1),S=_a(S);++ke<gt;){var Cn=Q[ke];Cn&&b(S,Cn,ke,Bt)}return S})}function Mf(b,S){return function(Q,ke){if(null==Q)return Q;if(!wr(Q))return b(Q,ke);for(var gt=Q.length,Bt=S?gt:-1,hn=_a(Q);(S?Bt--:++Bt<gt)&&!1!==ke(hn[Bt],Bt,hn););return Q}}function Df(b){return function(S,Q,ke){for(var gt=-1,Bt=_a(S),hn=ke(S),Cn=hn.length;Cn--;){var Rn=hn[b?Cn:++gt];if(!1===Q(Bt[Rn],Rn,Bt))break}return S}}function gc(b){return function(S){var Q=ch(S=ta(S))?uh(S):D,ke=Q?Q[0]:S.charAt(0),gt=Q?dc(Q,1).join(""):S.slice(1);return ke[b]()+gt}}function Tl(b){return function(S){return vf(tI(qs(S).replace(N_,"")),b,"")}}function Wh(b){return function(){var S=arguments;switch(S.length){case 0:return new b;case 1:return new b(S[0]);case 2:return new b(S[0],S[1]);case 3:return new b(S[0],S[1],S[2]);case 4:return new b(S[0],S[1],S[2],S[3]);case 5:return new b(S[0],S[1],S[2],S[3],S[4]);case 6:return new b(S[0],S[1],S[2],S[3],S[4],S[5]);case 7:return new b(S[0],S[1],S[2],S[3],S[4],S[5],S[6])}var Q=No(b.prototype),ke=b.apply(Q,S);return cr(ke)?ke:Q}}function Wu(b){return function(S,Q,ke){var gt=_a(S);if(!wr(S)){var Bt=as(Q,3);S=Hc(S),Q=function(Cn){return Bt(gt[Cn],Cn,gt)}}var hn=b(S,Q,ke);return hn>-1?gt[Bt?S[hn]:hn]:D}}function dd(b){return nc(function(S){var Q=S.length,ke=Q,gt=sa.prototype.thru;for(b&&S.reverse();ke--;){var Bt=S[ke];if("function"!=typeof Bt)throw new kh(L);if(gt&&!hn&&"wrapper"==mp(Bt))var hn=new sa([],!0)}for(ke=hn?ke:Q;++ke<Q;){var Cn=mp(Bt=S[ke]),Rn="wrapper"==Cn?pd(Bt):D;hn=Rn&&qu(Rn[0])&&424==Rn[1]&&!Rn[4].length&&1==Rn[9]?hn[mp(Rn[0])].apply(hn,Rn[3]):1==Bt.length&&qu(Bt)?hn[Cn]():hn.thru(Bt)}return function(){var Ri=arguments,Oi=Ri[0];if(hn&&1==Ri.length&&ki(Oi))return hn.plant(Oi).value();for(var qi=0,Lr=Q?S[qi].apply(this,Ri):Oi;++qi<Q;)Lr=S[qi].call(this,Lr);return Lr}})}function qn(b,S,Q,ke,gt,Bt,hn,Cn,Rn,Ri){var Oi=128&S,qi=1&S,Lr=2&S,Wr=24&S,xs=512&S,co=Lr?D:Wh(b);return function Is(){for(var po=arguments.length,zo=Jn(po),Yh=po;Yh--;)zo[Yh]=arguments[Yh];if(Wr)var Kh=$u(Is),Gc=_f(zo,Kh);if(ke&&(zo=Fm(zo,ke,gt,Wr)),Bt&&(zo=Hh(zo,Bt,hn,Wr)),po-=Gc,Wr&&po<Ri){var rc=gu(zo,Kh);return ju(b,S,qn,Is.placeholder,Q,zo,rc,Cn,Rn,Ri-po)}var Sp=qi?Q:this,Ep=Lr?Sp[b]:b;return po=zo.length,Cn?zo=ca(zo,Cn):xs&&po>1&&zo.reverse(),Oi&&Rn<po&&(zo.length=Rn),this&&this!==Xl&&this instanceof Is&&(Ep=co||Wh(Ep)),Ep.apply(Sp,zo)}}function Lf(b,S){return function(Q,ke){return function Co(b,S,Q,ke){return Rc(b,function(gt,Bt,hn){S(ke,Q(gt),Bt,hn)}),ke}(Q,b,S(ke),{})}}function fa(b,S){return function(Q,ke){var gt;if(Q===D&&ke===D)return S;if(Q!==D&&(gt=Q),ke!==D){if(gt===D)return ke;"string"==typeof Q||"string"==typeof ke?(Q=Bl(Q),ke=Bl(ke)):(Q=Ra(Q),ke=Ra(ke)),gt=b(Q,ke)}return gt}}function Kd(b){return nc(function(S){return S=Da(S,Kl(as())),Ns(function(Q){var ke=this;return b(S,function(gt){return Ka(gt,ke,Q)})})})}function Cu(b,S){var Q=(S=S===D?" ":Bl(S)).length;if(Q<2)return Q?jo(S,b):S;var ke=jo(S,Mv(b/al(S)));return ch(S)?dc(uh(ke),0,b).join(""):ke.slice(0,b)}function Zg(b){return function(S,Q,ke){return ke&&"number"!=typeof ke&&vc(S,Q,ke)&&(Q=ke=D),S=Uc(S),Q===D?(Q=S,S=0):Q=Uc(Q),function la(b,S,Q,ke){for(var gt=-1,Bt=ys(Mv((S-b)/(Q||1)),0),hn=Jn(Bt);Bt--;)hn[ke?Bt:++gt]=b,b+=Q;return hn}(S,Q,ke=ke===D?S<Q?1:-1:Uc(ke),b)}}function pp(b){return function(S,Q){return"string"==typeof S&&"string"==typeof Q||(S=_d(S),Q=_d(Q)),b(S,Q)}}function ju(b,S,Q,ke,gt,Bt,hn,Cn,Rn,Ri){var Oi=8&S;S|=Oi?$:64,4&(S&=~(Oi?64:$))||(S&=-4);var co=[b,S,gt,Oi?Bt:D,Oi?hn:D,Oi?D:Bt,Oi?D:hn,Cn,Rn,Ri],Is=Q.apply(D,co);return qu(b)&&rg(Is,co),Is.placeholder=ke,vd(Is,b,S)}function Ml(b){var S=Zl[b];return function(Q,ke){if(Q=_d(Q),(ke=null==ke?0:ml(Zs(ke),292))&&Vg(Q)){var gt=(ta(Q)+"e").split("e");return+((gt=(ta(S(gt[0]+"e"+(+gt[1]+ke)))+"e").split("e"))[0]+"e"+(+gt[1]-ke))}return S(Q)}}var Qg=ns&&1/Gp(new ns([,-0]))[1]==vt?function(b){return new ns(b)}:_w;function mh(b){return function(S){var Q=Oa(S);return Q==Ot?Jf(S):Q==ii?function tp(Sn){var ci=-1,Jn=Array(Sn.size);return Sn.forEach(function(Or){Jn[++ci]=[Or,Or]}),Jn}(S):function ol(Sn,ci){return Da(ci,function(Jn){return[Jn,Sn[Jn]]})}(S,b(S))}}function iu(b,S,Q,ke,gt,Bt,hn,Cn){var Rn=2&S;if(!Rn&&"function"!=typeof b)throw new kh(L);var Ri=ke?ke.length:0;if(Ri||(S&=-97,ke=gt=D),hn=hn===D?hn:ys(Zs(hn),0),Cn=Cn===D?Cn:Zs(Cn),Ri-=gt?gt.length:0,64&S){var Oi=ke,qi=gt;ke=gt=D}var Lr=Rn?D:pd(b),Wr=[b,S,Q,ke,gt,Oi,qi,Bt,hn,Cn];if(Lr&&function _p(b,S){var Q=b[1],ke=S[1],gt=Q|ke;if(!(gt<131||(128==ke&&8==Q||128==ke&&256==Q&&b[7].length<=S[8]||384==ke&&S[7].length<=S[8]&&8==Q)))return b;1&ke&&(b[2]=S[2],gt|=1&Q?0:4);var Cn=S[3];if(Cn){var Rn=b[3];b[3]=Rn?Fm(Rn,Cn,S[4]):Cn,b[4]=Rn?gu(b[3],K):S[4]}(Cn=S[5])&&(b[5]=(Rn=b[5])?Hh(Rn,Cn,S[6]):Cn,b[6]=Rn?gu(b[5],K):S[6]),(Cn=S[7])&&(b[7]=Cn),128&ke&&(b[8]=null==b[8]?S[8]:ml(b[8],S[8])),null==b[9]&&(b[9]=S[9]),b[0]=S[0],b[1]=gt}(Wr,Lr),b=Wr[0],S=Wr[1],Q=Wr[2],ke=Wr[3],gt=Wr[4],!(Cn=Wr[9]=Wr[9]===D?Rn?0:b.length:ys(Wr[9]-Ri,0))&&24&S&&(S&=-25),S&&1!=S)xs=8==S||16==S?function Yd(b,S,Q){var ke=Wh(b);return function gt(){for(var Bt=arguments.length,hn=Jn(Bt),Cn=Bt,Rn=$u(gt);Cn--;)hn[Cn]=arguments[Cn];var Ri=Bt<3&&hn[0]!==Rn&&hn[Bt-1]!==Rn?[]:gu(hn,Rn);return(Bt-=Ri.length)<Q?ju(b,S,qn,gt.placeholder,D,hn,Ri,D,D,Q-Bt):Ka(this&&this!==Xl&&this instanceof gt?ke:b,this,hn)}}(b,S,Cn):S!=$&&33!=S||gt.length?qn.apply(D,Wr):function Nm(b,S,Q,ke){var gt=1&S,Bt=Wh(b);return function hn(){for(var Cn=-1,Rn=arguments.length,Ri=-1,Oi=ke.length,qi=Jn(Oi+Rn),Lr=this&&this!==Xl&&this instanceof hn?Bt:b;++Ri<Oi;)qi[Ri]=ke[Ri];for(;Rn--;)qi[Ri++]=arguments[++Cn];return Ka(Lr,gt?Q:this,qi)}}(b,S,Q,ke);else var xs=function Kg(b,S,Q){var ke=1&S,gt=Wh(b);return function Bt(){return(this&&this!==Xl&&this instanceof Bt?gt:b).apply(ke?Q:this,arguments)}}(b,S,Q);return vd((Lr?Ef:rg)(xs,Wr),b,S)}function Jg(b,S,Q,ke){return b===D||Zr(b,Fg[Q])&&!ia.call(ke,Q)?S:b}function gp(b,S,Q,ke,gt,Bt){return cr(b)&&cr(S)&&(Bt.set(S,b),Wo(b,S,D,gp,Bt),Bt.delete(S)),b}function Vl(b){return Lo(b)?D:b}function vh(b,S,Q,ke,gt,Bt){var hn=1&Q,Cn=b.length,Rn=S.length;if(Cn!=Rn&&!(hn&&Rn>Cn))return!1;var Ri=Bt.get(b),Oi=Bt.get(S);if(Ri&&Oi)return Ri==S&&Oi==b;var qi=-1,Lr=!0,Wr=2&Q?new Dr:D;for(Bt.set(b,S),Bt.set(S,b);++qi<Cn;){var xs=b[qi],co=S[qi];if(ke)var Is=hn?ke(co,xs,qi,S,b,Bt):ke(xs,co,qi,b,S,Bt);if(Is!==D){if(Is)continue;Lr=!1;break}if(Wr){if(!xm(S,function(po,zo){if(!yf(Wr,zo)&&(xs===po||gt(xs,po,Q,ke,Bt)))return Wr.push(zo)})){Lr=!1;break}}else if(xs!==co&&!gt(xs,co,Q,ke,Bt)){Lr=!1;break}}return Bt.delete(b),Bt.delete(S),Lr}function nc(b){return $h(nm(b,D,Ff),b+"")}function wu(b){return mu(b,Hc,yp)}function Zd(b){return mu(b,xu,tg)}var pd=od?function(b){return od.get(b)}:_w;function mp(b){for(var S=b.name+"",Q=$p[S],ke=ia.call($p,S)?Q.length:0;ke--;){var gt=Q[ke],Bt=gt.func;if(null==Bt||Bt==b)return gt.name}return S}function $u(b){return(ia.call(bt,"placeholder")?bt:b).placeholder}function as(){var b=bt.iteratee||Eb;return b=b===Eb?zh:b,arguments.length?b(arguments[0],arguments[1]):b}function vp(b,S){var Q=b.__data__;return function Um(b){var S=typeof b;return"string"==S||"number"==S||"symbol"==S||"boolean"==S?"__proto__"!==b:null===b}(S)?Q["string"==typeof S?"string":"hash"]:Q.map}function tm(b){for(var S=Hc(b),Q=S.length;Q--;){var ke=S[Q],gt=b[ke];S[Q]=[ke,gt,Jd(gt)]}return S}function Qd(b,S){var Q=function lh(Sn,ci){return null==Sn?D:Sn[ci]}(b,S);return Wd(Q)?Q:D}var yp=zg?function(b){return null==b?[]:(b=_a(b),ah(zg(b),function(S){return Dm.call(b,S)}))}:s0,tg=zg?function(b){for(var S=[];b;)Lh(S,yp(b)),b=rp(b);return S}:s0,Oa=aa;function zm(b,S,Q){for(var ke=-1,gt=(S=ec(S,b)).length,Bt=!1;++ke<gt;){var hn=Xu(S[ke]);if(!(Bt=null!=b&&Q(b,hn)))break;b=b[hn]}return Bt||++ke!=gt?Bt:!!(gt=null==b?0:b.length)&&nr(gt)&&mc(hn,gt)&&(ki(b)||Yr(b))}function ng(b){return"function"!=typeof b.constructor||_h(b)?{}:No(rp(b))}function Fa(b){return ki(b)||Yr(b)||!!(Bg&&b&&b[Bg])}function mc(b,S){var Q=typeof b;return!!(S=S??vn)&&("number"==Q||"symbol"!=Q&&Mt.test(b))&&b>-1&&b%1==0&&b<S}function vc(b,S,Q){if(!cr(Q))return!1;var ke=typeof S;return!!("number"==ke?wr(Q)&&mc(S,Q.length):"string"==ke&&S in Q)&&Zr(Q[S],b)}function ig(b,S){if(ki(b))return!1;var Q=typeof b;return!("number"!=Q&&"symbol"!=Q&&"boolean"!=Q&&null!=b&&!Gl(b))||gf.test(b)||!rh.test(b)||null!=S&&b in _a(S)}function qu(b){var S=mp(b),Q=bt[S];if("function"!=typeof Q||!(S in Rs.prototype))return!1;if(b===Q)return!0;var ke=pd(Q);return!!ke&&b===ke[0]}($s&&Oa(new $s(new ArrayBuffer(1)))!=il||Xr&&Oa(new Xr)!=Ot||Ug&&Oa(Ug.resolve())!=ze||ns&&Oa(new ns)!=ii||us&&Oa(new us)!=ws)&&(Oa=function(b){var S=aa(b),Q=S==Le?b.constructor:D,ke=Q?qh(Q):"";if(ke)switch(ke){case W_:return il;case zy:return Ot;case Ks:return ze;case eu:return ii;case bi:return ws}return S});var gd=Sv?bn:Ip;function _h(b){var S=b&&b.constructor;return b===("function"==typeof S&&S.prototype||Fg)}function Jd(b){return b==b&&!cr(b)}function ru(b,S){return function(Q){return null!=Q&&Q[b]===S&&(S!==D||b in _a(Q))}}function nm(b,S,Q){return S=ys(S===D?b.length-1:S,0),function(){for(var ke=arguments,gt=-1,Bt=ys(ke.length-S,0),hn=Jn(Bt);++gt<Bt;)hn[gt]=ke[S+gt];gt=-1;for(var Cn=Jn(S+1);++gt<S;)Cn[gt]=ke[gt];return Cn[S]=Q(hn),Ka(b,this,Cn)}}function bl(b,S){return S.length<2?b:zu(b,_l(S,0,-1))}function ca(b,S){for(var Q=b.length,ke=ml(S.length,Q),gt=Js(b);ke--;){var Bt=S[ke];b[ke]=mc(Bt,Q)?gt[Bt]:D}return b}function kf(b,S){if(("constructor"!==S||"function"!=typeof b[S])&&"__proto__"!=S)return b[S]}var rg=ef(Ef),jh=By||function(b,S){return Xl.setTimeout(b,S)},$h=ef(Zp);function vd(b,S,Q){var ke=S+"";return $h(b,function Fc(b,S){var Q=S.length;if(!Q)return b;var ke=Q-1;return S[ke]=(Q>1?"& ":"")+S[ke],S=S.join(Q>2?", ":" "),b.replace(mf,"{\n/* [wrapped with "+S+"] */\n")}(ke,function og(b,S){return Za(At,function(Q){var ke="_."+Q[0];S&Q[1]&&!Yf(b,ke)&&b.push(ke)}),b.sort()}(function Ul(b){var S=b.match(gl);return S?S[1].split(Ic):[]}(ke),Q)))}function ef(b){var S=0,Q=0;return function(){var ke=Dc(),gt=16-(ke-Q);if(Q=ke,gt>0){if(++S>=800)return arguments[0]}else S=0;return b.apply(D,arguments)}}function yd(b,S){var Q=-1,ke=b.length,gt=ke-1;for(S=S===D?ke:S;++Q<S;){var Bt=hd(Q,gt),hn=b[Bt];b[Bt]=b[Q],b[Q]=hn}return b.length=S,b}var sg=function md(b){var S=An(b,function(ke){return 500===Q.size&&Q.clear(),ke}),Q=S.cache;return S}(function(b){var S=[];return 46===b.charCodeAt(0)&&S.push(""),b.replace(kd,function(Q,ke,gt,Bt){S.push(gt?Bt.replace(id,"$1"):ke||Q)}),S});function Xu(b){if("string"==typeof b||Gl(b))return b;var S=b+"";return"0"==S&&1/b==-vt?"-0":S}function qh(b){if(null!=b){try{return Ev.call(b)}catch{}try{return b+""}catch{}}return""}function im(b){if(b instanceof Rs)return b.clone();var S=new sa(b.__wrapped__,b.__chain__);return S.__actions__=Js(b.__actions__),S.__index__=b.__index__,S.__values__=b.__values__,S}var Nc=Ns(function(b,S){return Qr(b)?Hd(b,ll(S,1,Qr,!0)):[]}),Of=Ns(function(b,S){var Q=Au(S);return Qr(Q)&&(Q=D),Qr(b)?Hd(b,ll(S,1,Qr,!0),as(Q,2)):[]}),Gm=Ns(function(b,S){var Q=Au(S);return Qr(Q)&&(Q=D),Qr(b)?Hd(b,ll(S,1,Qr,!0),D,Q):[]});function hl(b,S,Q){var ke=null==b?0:b.length;if(!ke)return-1;var gt=null==Q?0:Zs(Q);return gt<0&&(gt=ys(ke+gt,0)),Ol(b,as(S,3),gt)}function Wm(b,S,Q){var ke=null==b?0:b.length;if(!ke)return-1;var gt=ke-1;return Q!==D&&(gt=Zs(Q),gt=Q<0?ys(ke+gt,0):ml(gt,ke-1)),Ol(b,as(S,3),gt,!0)}function Ff(b){return null!=b&&b.length?ll(b,1):[]}function jy(b){return b&&b.length?b[0]:D}var Y_=Ns(function(b){var S=Da(b,Sl);return S.length&&S[0]===b[0]?vu(S):[]}),$y=Ns(function(b){var S=Au(b),Q=Da(b,Sl);return S===Au(Q)?S=D:Q.pop(),Q.length&&Q[0]===b[0]?vu(Q,as(S,2)):[]}),jm=Ns(function(b){var S=Au(b),Q=Da(b,Sl);return(S="function"==typeof S?S:D)&&Q.pop(),Q.length&&Q[0]===b[0]?vu(Q,D,S):[]});function Au(b){var S=null==b?0:b.length;return S?b[S-1]:D}var Aa=Ns(zv);function zv(b,S){return b&&b.length&&S&&S.length?Pa(b,S):b}var qy=nc(function(b,S){var Q=null==b?0:b.length,ke=If(b,S);return nu(b,Da(S,function(gt){return mc(gt,Q)?+gt:gt}).sort(zl)),ke});function $m(b){return null==b?b:Nr.call(b)}var F=Ns(function(b){return Il(ll(b,1,Qr,!0))}),z=Ns(function(b){var S=Au(b);return Qr(S)&&(S=D),Il(ll(b,1,Qr,!0),as(S,2))}),le=Ns(function(b){var S=Au(b);return S="function"==typeof S?S:D,Il(ll(b,1,Qr,!0),D,S)});function Ve(b){if(!b||!b.length)return[];var S=0;return b=ah(b,function(Q){if(Qr(Q))return S=ys(Q.length,S),!0}),sd(S,function(Q){return Da(b,Es(Q))})}function Ue(b,S){if(!b||!b.length)return[];var Q=Ve(b);return null==S?Q:Da(Q,function(ke){return Ka(S,D,ke)})}var We=Ns(function(b,S){return Qr(b)?Hd(b,S):[]}),ft=Ns(function(b){return Hu(ah(b,Qr))}),dt=Ns(function(b){var S=Au(b);return Qr(S)&&(S=D),Hu(ah(b,Qr),as(S,2))}),at=Ns(function(b){var S=Au(b);return S="function"==typeof S?S:D,Hu(ah(b,Qr),D,S)}),xt=Ns(Ve),qt=Ns(function(b){var S=b.length,Q=S>1?b[S-1]:D;return Q="function"==typeof Q?(b.pop(),Q):D,Ue(b,Q)});function gn(b){var S=bt(b);return S.__chain__=!0,S}function an(b,S){return S(b)}var _n=nc(function(b){var S=b.length,Q=S?b[0]:0,ke=this.__wrapped__,gt=function(Bt){return If(Bt,b)};return!(S>1||this.__actions__.length)&&ke instanceof Rs&&mc(Q)?((ke=ke.slice(Q,+Q+(S?1:0))).__actions__.push({func:an,args:[gt],thisArg:D}),new sa(ke,this.__chain__).thru(function(Bt){return S&&!Bt.length&&Bt.push(D),Bt})):this.thru(gt)}),Mi=Gh(function(b,S,Q){ia.call(b,Q)?++b[Q]:Fh(b,Q,1)}),ar=Wu(hl),Hi=Wu(Wm);function c(b,S){return(ki(b)?Za:ad)(b,as(S,3))}function d(b,S){return(ki(b)?sl:Rv)(b,as(S,3))}var m=Gh(function(b,S,Q){ia.call(b,Q)?b[Q].push(S):Fh(b,Q,[S])}),C=Ns(function(b,S,Q){var ke=-1,gt="function"==typeof S,Bt=wr(b)?Jn(b.length):[];return ad(b,function(hn){Bt[++ke]=gt?Ka(S,hn,Q):kc(hn,S,Q)}),Bt}),A=Gh(function(b,S,Q){Fh(b,Q,S)});function E(b,S){return(ki(b)?Da:hp)(b,as(S,3))}var R=Gh(function(b,S,Q){b[Q?0:1].push(S)},function(){return[[],[]]}),ct=Ns(function(b,S){if(null==b)return[];var Q=S.length;return Q>1&&vc(b,S[0],S[1])?S=[]:Q>2&&vc(S[0],S[1],S[2])&&(S=[S[0]]),Qa(b,ll(S,1),[])}),nt=Lm||function(){return Xl.Date.now()};function Gt(b,S,Q){return S=Q?D:S,iu(b,128,D,D,D,D,S=b&&null==S?b.length:S)}function Wt(b,S){var Q;if("function"!=typeof S)throw new kh(L);return b=Zs(b),function(){return--b>0&&(Q=S.apply(this,arguments)),b<=1&&(S=D),Q}}var It=Ns(function(b,S,Q){var ke=1;if(Q.length){var gt=gu(Q,$u(It));ke|=$}return iu(b,ke,S,Q,gt)}),jt=Ns(function(b,S,Q){var ke=3;if(Q.length){var gt=gu(Q,$u(jt));ke|=$}return iu(S,ke,b,Q,gt)});function Kt(b,S,Q){var ke,gt,Bt,hn,Cn,Rn,Ri=0,Oi=!1,qi=!1,Lr=!0;if("function"!=typeof b)throw new kh(L);function Wr(rc){var Sp=ke,Ep=gt;return ke=gt=D,Ri=rc,hn=b.apply(Ep,Sp)}function xs(rc){return Ri=rc,Cn=jh(po,S),Oi?Wr(rc):hn}function Is(rc){var Sp=rc-Rn;return Rn===D||Sp>=S||Sp<0||qi&&rc-Ri>=Bt}function po(){var rc=nt();if(Is(rc))return zo(rc);Cn=jh(po,function co(rc){var dI=S-(rc-Rn);return qi?ml(dI,Bt-(rc-Ri)):dI}(rc))}function zo(rc){return Cn=D,Lr&&ke?Wr(rc):(ke=gt=D,hn)}function Gc(){var rc=nt(),Sp=Is(rc);if(ke=arguments,gt=this,Rn=rc,Sp){if(Cn===D)return xs(Rn);if(qi)return Ov(Cn),Cn=jh(po,S),Wr(Rn)}return Cn===D&&(Cn=jh(po,S)),hn}return S=_d(S)||0,cr(Q)&&(Oi=!!Q.leading,Bt=(qi="maxWait"in Q)?ys(_d(Q.maxWait)||0,S):Bt,Lr="trailing"in Q?!!Q.trailing:Lr),Gc.cancel=function Yh(){Cn!==D&&Ov(Cn),Ri=0,ke=Rn=gt=Cn=D},Gc.flush=function Kh(){return Cn===D?hn:zo(nt())},Gc}var ut=Ns(function(b,S){return Uy(b,1,S)}),Qt=Ns(function(b,S,Q){return Uy(b,_d(S)||0,Q)});function An(b,S){if("function"!=typeof b||null!=S&&"function"!=typeof S)throw new kh(L);var Q=function(){var ke=arguments,gt=S?S.apply(this,ke):ke[0],Bt=Q.cache;if(Bt.has(gt))return Bt.get(gt);var hn=b.apply(this,ke);return Q.cache=Bt.set(gt,hn)||Bt,hn};return Q.cache=new(An.Cache||os),Q}function sn(b){if("function"!=typeof b)throw new kh(L);return function(){var S=arguments;switch(S.length){case 0:return!b.call(this);case 1:return!b.call(this,S[0]);case 2:return!b.call(this,S[0],S[1]);case 3:return!b.call(this,S[0],S[1],S[2])}return!b.apply(this,S)}}An.Cache=os;var Mn=dp(function(b,S){var Q=(S=1==S.length&&ki(S[0])?Da(S[0],Kl(as())):Da(ll(S,1),Kl(as()))).length;return Ns(function(ke){for(var gt=-1,Bt=ml(ke.length,Q);++gt<Bt;)ke[gt]=S[gt].call(this,ke[gt]);return Ka(b,this,ke)})}),kn=Ns(function(b,S){var Q=gu(S,$u(kn));return iu(b,$,D,S,Q)}),ti=Ns(function(b,S){var Q=gu(S,$u(ti));return iu(b,64,D,S,Q)}),Dn=nc(function(b,S){return iu(b,256,D,D,D,S)});function Zr(b,S){return b===S||b!=b&&S!=S}var mr=pp(ld),or=pp(function(b,S){return b>=S}),Yr=js(function(){return arguments}())?js:function(b){return oi(b)&&ia.call(b,"callee")&&!Dm.call(b,"callee")},ki=Jn.isArray,br=Ma?Kl(Ma):function lp(b){return oi(b)&&aa(b)==sr};function wr(b){return null!=b&&nr(b.length)&&!bn(b)}function Qr(b){return oi(b)&&wr(b)}var Jr=jp||Ip,$i=so?Kl(so):function cp(b){return oi(b)&&aa(b)==wt};function yt(b){if(!oi(b))return!1;var S=aa(b);return S==Un||"[object DOMException]"==S||"string"==typeof b.message&&"string"==typeof b.name&&!Lo(b)}function bn(b){if(!cr(b))return!1;var S=aa(b);return S==ri||S==Et||"[object AsyncFunction]"==S||"[object Proxy]"==S}function wn(b){return"number"==typeof b&&b==Zs(b)}function nr(b){return"number"==typeof b&&b>-1&&b%1==0&&b<=vn}function cr(b){var S=typeof b;return null!=b&&("object"==S||"function"==S)}function oi(b){return null!=b&&"object"==typeof b}var Br=V_?Kl(V_):function Xg(b){return oi(b)&&Oa(b)==Ot};function $o(b){return"number"==typeof b||oi(b)&&aa(b)==fn}function Lo(b){if(!oi(b)||aa(b)!=Le)return!1;var S=rp(b);if(null===S)return!0;var Q=ia.call(S,"constructor")&&S.constructor;return"function"==typeof Q&&Q instanceof Q&&Ev.call(Q)==pb}var Qo=Py?Kl(Py):function jd(b){return oi(b)&&aa(b)==yn},Wa=Fd?Kl(Fd):function Ql(b){return oi(b)&&Oa(b)==ii};function Hl(b){return"string"==typeof b||!ki(b)&&oi(b)&&aa(b)==Li}function Gl(b){return"symbol"==typeof b||oi(b)&&aa(b)==Cs}var Bc=_o?Kl(_o):function ul(b){return oi(b)&&nr(b.length)&&!!Ta[aa(b)]},ic=pp($d),Vc=pp(function(b,S){return b<=S});function wp(b){if(!b)return[];if(wr(b))return Hl(b)?uh(b):Js(b);if(Wp&&b[Wp])return function ya(Sn){for(var ci,Jn=[];!(ci=Sn.next()).done;)Jn.push(ci.value);return Jn}(b[Wp]());var S=Oa(b);return(S==Ot?Jf:S==ii?Gp:Jy)(b)}function Uc(b){return b?(b=_d(b))===vt||b===-vt?17976931348623157e292*(b<0?-1:1):b==b?b:0:0===b?b:0}function Zs(b){var S=Uc(b),Q=S%1;return S==S?Q?S-Q:S:0}function _b(b){return b?Sf(Zs(b),0,rt):0}function _d(b){if("number"==typeof b)return b;if(Gl(b))return NaN;if(cr(b)){var S="function"==typeof b.valueOf?b.valueOf():b;b=cr(S)?S+"":S}if("string"!=typeof b)return 0===b?b:+b;b=Hp(b);var Q=ge.test(b);return Q||tt.test(b)?bv(b.slice(2),Q?2:8):st.test(b)?NaN:+b}function J_(b){return pc(b,xu(b))}function ta(b){return null==b?"":Bl(b)}var t0=bu(function(b,S){if(_h(S)||wr(S))pc(S,Hc(S),b);else for(var Q in S)ia.call(S,Q)&&Af(b,Q,S[Q])}),bb=bu(function(b,S){pc(S,xu(S),b)}),cg=bu(function(b,S,Q,ke){pc(S,xu(S),b,ke)}),Zy=bu(function(b,S,Q,ke){pc(S,Hc(S),b,ke)}),Hv=nc(If),n0=Ns(function(b,S){b=_a(b);var Q=-1,ke=S.length,gt=ke>2?S[2]:D;for(gt&&vc(S[0],S[1],gt)&&(ke=1);++Q<ke;)for(var Bt=S[Q],hn=xu(Bt),Cn=-1,Rn=hn.length;++Cn<Rn;){var Ri=hn[Cn],Oi=b[Ri];(Oi===D||Zr(Oi,Fg[Ri])&&!ia.call(b,Ri))&&(b[Ri]=Bt[Ri])}return b}),Cb=Ns(function(b){return b.push(D,gp),Ka(Bx,D,b)});function xb(b,S,Q){var ke=null==b?D:zu(b,S);return ke===D?Q:ke}function Qy(b,S){return null!=b&&zm(b,S,qg)}var Ox=Lf(function(b,S,Q){null!=S&&"function"!=typeof S.toString&&(S=Tm.call(S)),b[S]=Q},mw(Cd)),hw=Lf(function(b,S,Q){null!=S&&"function"!=typeof S.toString&&(S=Tm.call(S)),ia.call(b,S)?b[S].push(Q):b[S]=[Q]},as),Fx=Ns(kc);function Hc(b){return wr(b)?Ha(b):tu(b)}function xu(b){return wr(b)?Ha(b,!0):function cd(b){if(!cr(b))return function Hm(b){var S=[];if(null!=b)for(var Q in _a(b))S.push(Q);return S}(b);var S=_h(b),Q=[];for(var ke in b)"constructor"==ke&&(S||!ia.call(b,ke))||Q.push(ke);return Q}(b)}var hT=bu(function(b,S,Q){Wo(b,S,Q)}),Bx=bu(function(b,S,Q,ke){Wo(b,S,Q,ke)}),zx=nc(function(b,S){var Q={};if(null==b)return Q;var ke=!1;S=Da(S,function(Bt){return Bt=ec(Bt,b),ke||(ke=Bt.length>1),Bt}),pc(b,Zd(b),Q),ke&&(Q=yl(Q,7,Vl));for(var gt=S.length;gt--;)Uu(Q,S[gt]);return Q}),Vx=nc(function(b,S){return null==b?{}:function ud(b,S){return Vu(b,S,function(Q,ke){return Qy(b,ke)})}(b,S)});function dT(b,S){if(null==b)return{};var Q=Da(Zd(b),function(ke){return[ke]});return S=as(S),Vu(b,Q,function(ke,gt){return S(ke,gt[0])})}var Gx=mh(Hc),Wx=mh(xu);function Jy(b){return null==b?[]:Ws(b,Hc(b))}var _T=Tl(function(b,S,Q){return S=S.toLowerCase(),b+(Q?qx(S):S)});function qx(b){return qm(ta(b).toLowerCase())}function qs(b){return(b=ta(b))&&b.replace(Yt,Mc).replace(uc,"")}var bT=Tl(function(b,S,Q){return b+(Q?"-":"")+S.toLowerCase()}),CT=Tl(function(b,S,Q){return b+(Q?" ":"")+S.toLowerCase()}),Kx=gc("toLowerCase"),Jx=Tl(function(b,S,Q){return b+(Q?"_":"")+S.toLowerCase()}),IT=Tl(function(b,S,Q){return b+(Q?" ":"")+qm(S)}),TT=Tl(function(b,S,Q){return b+(Q?" ":"")+S.toUpperCase()}),qm=gc("toUpperCase");function tI(b,S,Q){return b=ta(b),(S=Q?D:S)===D?function ky(Sn){return Tc.test(Sn)}(b)?function Og(Sn){return Sn.match(fb)||[]}(b):function du(Sn){return Sn.match(rl)||[]}(b):b.match(S)||[]}var gw=Ns(function(b,S){try{return Ka(b,D,S)}catch(Q){return yt(Q)?Q:new Vs(Q)}}),Sb=nc(function(b,S){return Za(S,function(Q){Q=Xu(Q),Fh(b,Q,It(b[Q],b))}),b});function mw(b){return function(){return b}}var LT=dd(),PT=dd(!0);function Cd(b){return b}function Eb(b){return zh("function"==typeof b?b:yl(b,1))}var rI=Ns(function(b,S){return function(Q){return kc(Q,b,S)}}),vw=Ns(function(b,S){return function(Q){return kc(b,Q,S)}});function sI(b,S,Q){var ke=Hc(S),gt=dh(S,ke);null==Q&&(!cr(S)||!gt.length&&ke.length)&&(Q=S,S=b,b=this,gt=dh(S,Hc(S)));var Bt=!(cr(Q)&&"chain"in Q&&!Q.chain),hn=bn(b);return Za(gt,function(Cn){var Rn=S[Cn];b[Cn]=Rn,hn&&(b.prototype[Cn]=function(){var Ri=this.__chain__;if(Bt||Ri){var Oi=b(this.__wrapped__),qi=Oi.__actions__=Js(this.__actions__);return qi.push({func:Rn,args:arguments,thisArg:b}),Oi.__chain__=Ri,Oi}return Rn.apply(b,Lh([this.value()],arguments))})}),b}function _w(){}var Xt=Kd(Da),bw=Kd(hu),oI=Kd(xm);function r0(b){return ig(b)?Es(Xu(b)):function Uh(b){return function(S){return zu(S,b)}}(b)}var aI=Zg(),kT=Zg(!0);function s0(){return[]}function Ip(){return!1}var Tb=fa(function(b,S){return b+S},0),Mb=Ml("ceil"),Aw=fa(function(b,S){return b/S},1),xw=Ml("floor"),uI=fa(function(b,S){return b*S},1),ik=Ml("round"),zT=fa(function(b,S){return b-S},0);return bt.after=function Ct(b,S){if("function"!=typeof S)throw new kh(L);return b=Zs(b),function(){if(--b<1)return S.apply(this,arguments)}},bt.ary=Gt,bt.assign=t0,bt.assignIn=bb,bt.assignInWith=cg,bt.assignWith=Zy,bt.at=Hv,bt.before=Wt,bt.bind=It,bt.bindAll=Sb,bt.bindKey=jt,bt.castArray=function Pn(){if(!arguments.length)return[];var b=arguments[0];return ki(b)?b:[b]},bt.chain=gn,bt.chunk=function ag(b,S,Q){S=(Q?vc(b,S,Q):S===D)?1:ys(Zs(S),0);var ke=null==b?0:b.length;if(!ke||S<1)return[];for(var gt=0,Bt=0,hn=Jn(Mv(ke/S));gt<ke;)hn[Bt++]=_l(b,gt,gt+=S);return hn},bt.compact=function lg(b){for(var S=-1,Q=null==b?0:b.length,ke=0,gt=[];++S<Q;){var Bt=b[S];Bt&&(gt[ke++]=Bt)}return gt},bt.concat=function Fv(){var b=arguments.length;if(!b)return[];for(var S=Jn(b-1),Q=arguments[0],ke=b;ke--;)S[ke-1]=arguments[ke];return Lh(ki(Q)?Js(Q):[Q],ll(S,1))},bt.cond=function MT(b){var S=null==b?0:b.length,Q=as();return b=S?Da(b,function(ke){if("function"!=typeof ke[1])throw new kh(L);return[Q(ke[0]),ke[1]]}):[],Ns(function(ke){for(var gt=-1;++gt<S;){var Bt=b[gt];if(Ka(Bt[0],this,ke))return Ka(Bt[1],this,ke)}})},bt.conforms=function nI(b){return function Xp(b){var S=Hc(b);return function(Q){return Vy(Q,b,S)}}(yl(b,1))},bt.constant=mw,bt.countBy=Mi,bt.create=function ug(b,S){var Q=No(b);return null==S?Q:Ud(Q,S)},bt.curry=function Dt(b,S,Q){var ke=iu(b,8,D,D,D,D,D,S=Q?D:S);return ke.placeholder=Dt.placeholder,ke},bt.curryRight=function Zt(b,S,Q){var ke=iu(b,16,D,D,D,D,D,S=Q?D:S);return ke.placeholder=Zt.placeholder,ke},bt.debounce=Kt,bt.defaults=n0,bt.defaultsDeep=Cb,bt.defer=ut,bt.delay=Qt,bt.difference=Nc,bt.differenceBy=Of,bt.differenceWith=Gm,bt.drop=function Hy(b,S,Q){var ke=null==b?0:b.length;return ke?_l(b,(S=Q||S===D?1:Zs(S))<0?0:S,ke):[]},bt.dropRight=function Gy(b,S,Q){var ke=null==b?0:b.length;return ke?_l(b,0,(S=ke-(S=Q||S===D?1:Zs(S)))<0?0:S):[]},bt.dropRightWhile=function rm(b,S){return b&&b.length?Ga(b,as(S,3),!0,!0):[]},bt.dropWhile=function mb(b,S){return b&&b.length?Ga(b,as(S,3),!0):[]},bt.fill=function bp(b,S,Q,ke){var gt=null==b?0:b.length;return gt?(Q&&"number"!=typeof Q&&vc(b,S,Q)&&(Q=0,ke=gt),function gb(b,S,Q,ke){var gt=b.length;for((Q=Zs(Q))<0&&(Q=-Q>gt?0:gt+Q),(ke=ke===D||ke>gt?gt:Zs(ke))<0&&(ke+=gt),ke=Q>ke?0:_b(ke);Q<ke;)b[Q++]=S;return b}(b,S,Q,ke)):[]},bt.filter=function gi(b,S){return(ki(b)?ah:Yp)(b,as(S,3))},bt.flatMap=function Yn(b,S){return ll(E(b,S),1)},bt.flatMapDeep=function jn(b,S){return ll(E(b,S),vt)},bt.flatMapDepth=function f(b,S,Q){return Q=Q===D?1:Zs(Q),ll(E(b,S),Q)},bt.flatten=Ff,bt.flattenDeep=function Nv(b){return null!=b&&b.length?ll(b,vt):[]},bt.flattenDepth=function vb(b,S){return null!=b&&b.length?ll(b,S=S===D?1:Zs(S)):[]},bt.flip=function Vt(b){return iu(b,512)},bt.flow=LT,bt.flowRight=PT,bt.fromPairs=function Wy(b){for(var S=-1,Q=null==b?0:b.length,ke={};++S<Q;){var gt=b[S];ke[gt[0]]=gt[1]}return ke},bt.functions=function kx(b){return null==b?[]:dh(b,Hc(b))},bt.functionsIn=function uw(b){return null==b?[]:dh(b,xu(b))},bt.groupBy=m,bt.initial=function X_(b){return null!=b&&b.length?_l(b,0,-1):[]},bt.intersection=Y_,bt.intersectionBy=$y,bt.intersectionWith=jm,bt.invert=Ox,bt.invertBy=hw,bt.invokeMap=C,bt.iteratee=Eb,bt.keyBy=A,bt.keys=Hc,bt.keysIn=xu,bt.map=E,bt.mapKeys=function uT(b,S){var Q={};return S=as(S,3),Rc(b,function(ke,gt,Bt){Fh(Q,S(ke,gt,Bt),ke)}),Q},bt.mapValues=function Nx(b,S){var Q={};return S=as(S,3),Rc(b,function(ke,gt,Bt){Fh(Q,gt,S(ke,gt,Bt))}),Q},bt.matches=function RT(b){return ph(yl(b,1))},bt.matchesProperty=function iI(b,S){return Kp(b,yl(S,1))},bt.memoize=An,bt.merge=hT,bt.mergeWith=Bx,bt.method=rI,bt.methodOf=vw,bt.mixin=sI,bt.negate=sn,bt.nthArg=function JR(b){return b=Zs(b),Ns(function(S){return Vh(S,b)})},bt.omit=zx,bt.omitBy=function dw(b,S){return dT(b,sn(as(S)))},bt.once=function pn(b){return Wt(2,b)},bt.orderBy=function N(b,S,Q,ke){return null==b?[]:(ki(S)||(S=null==S?[]:[S]),ki(Q=ke?D:Q)||(Q=null==Q?[]:[Q]),Qa(b,S,Q))},bt.over=Xt,bt.overArgs=Mn,bt.overEvery=bw,bt.overSome=oI,bt.partial=kn,bt.partialRight=ti,bt.partition=R,bt.pick=Vx,bt.pickBy=dT,bt.property=r0,bt.propertyOf=function xp(b){return function(S){return null==b?D:zu(b,S)}},bt.pull=Aa,bt.pullAll=zv,bt.pullAllBy=function Xh(b,S,Q){return b&&b.length&&S&&S.length?Pa(b,S,as(Q,2)):b},bt.pullAllWith=function Vv(b,S,Q){return b&&b.length&&S&&S.length?Pa(b,S,D,Q):b},bt.pullAt=qy,bt.range=aI,bt.rangeRight=kT,bt.rearg=Dn,bt.reject=function he(b,S){return(ki(b)?ah:Yp)(b,sn(as(S,3)))},bt.remove=function Z_(b,S){var Q=[];if(!b||!b.length)return Q;var ke=-1,gt=[],Bt=b.length;for(S=as(S,3);++ke<Bt;){var hn=b[ke];S(hn,ke,b)&&(Q.push(hn),gt.push(ke))}return nu(b,gt),Q},bt.rest=function Zn(b,S){if("function"!=typeof b)throw new kh(L);return Ns(b,S=S===D?S:Zs(S))},bt.reverse=$m,bt.sampleSize=function ye(b,S,Q){return S=(Q?vc(b,S,Q):S===D)?1:Zs(S),(ki(b)?Pv:km)(b,S)},bt.set=function fT(b,S,Q){return null==b?b:wo(b,S,Q)},bt.setWith=function Hx(b,S,Q,ke){return ke="function"==typeof ke?ke:D,null==b?b:wo(b,S,Q,ke)},bt.shuffle=function De(b){return(ki(b)?Wg:Qp)(b)},bt.slice=function Xy(b,S,Q){var ke=null==b?0:b.length;return ke?(Q&&"number"!=typeof Q&&vc(b,S,Q)?(S=0,Q=ke):(S=null==S?0:Zs(S),Q=Q===D?ke:Zs(Q)),_l(b,S,Q)):[]},bt.sortBy=ct,bt.sortedUniq=function Ky(b){return b&&b.length?eg(b):[]},bt.sortedUniqBy=function a(b,S){return b&&b.length?eg(b,as(S,2)):[]},bt.split=function Iu(b,S,Q){return Q&&"number"!=typeof Q&&vc(b,S,Q)&&(S=Q=D),(Q=Q===D?rt:Q>>>0)?(b=ta(b))&&("string"==typeof S||null!=S&&!Qo(S))&&!(S=Bl(S))&&ch(b)?dc(uh(b),0,Q):b.split(S,Q):[]},bt.spread=function hi(b,S){if("function"!=typeof b)throw new kh(L);return S=null==S?0:ys(Zs(S),0),Ns(function(Q){var ke=Q[S],gt=dc(Q,0,S);return ke&&Lh(gt,ke),Ka(b,this,gt)})},bt.tail=function h(b){var S=null==b?0:b.length;return S?_l(b,1,S):[]},bt.take=function g(b,S,Q){return b&&b.length?_l(b,0,(S=Q||S===D?1:Zs(S))<0?0:S):[]},bt.takeRight=function y(b,S,Q){var ke=null==b?0:b.length;return ke?_l(b,(S=ke-(S=Q||S===D?1:Zs(S)))<0?0:S,ke):[]},bt.takeRightWhile=function x(b,S){return b&&b.length?Ga(b,as(S,3),!1,!0):[]},bt.takeWhile=function M(b,S){return b&&b.length?Ga(b,as(S,3)):[]},bt.tap=function un(b,S){return S(b),b},bt.throttle=function xi(b,S,Q){var ke=!0,gt=!0;if("function"!=typeof b)throw new kh(L);return cr(Q)&&(ke="leading"in Q?!!Q.leading:ke,gt="trailing"in Q?!!Q.trailing:gt),Kt(b,S,{leading:ke,maxWait:S,trailing:gt})},bt.thru=an,bt.toArray=wp,bt.toPairs=Gx,bt.toPairsIn=Wx,bt.toPath=function cI(b){return ki(b)?Da(b,Xu):Gl(b)?[b]:Js(sg(ta(b)))},bt.toPlainObject=J_,bt.transform=function Ap(b,S,Q){var ke=ki(b),gt=ke||Jr(b)||Bc(b);if(S=as(S,4),null==Q){var Bt=b&&b.constructor;Q=gt?ke?new Bt:[]:cr(b)&&bn(Bt)?No(rp(b)):{}}return(gt?Za:Rc)(b,function(hn,Cn,Rn){return S(Q,hn,Cn,Rn)}),Q},bt.unary=function mi(b){return Gt(b,1)},bt.union=F,bt.unionBy=z,bt.unionWith=le,bt.uniq=function re(b){return b&&b.length?Il(b):[]},bt.uniqBy=function ve(b,S){return b&&b.length?Il(b,as(S,2)):[]},bt.uniqWith=function Ce(b,S){return S="function"==typeof S?S:D,b&&b.length?Il(b,D,S):[]},bt.unset=function pT(b,S){return null==b||Uu(b,S)},bt.unzip=Ve,bt.unzipWith=Ue,bt.update=function jx(b,S,Q){return null==b?b:Xd(b,S,ka(Q))},bt.updateWith=function gT(b,S,Q,ke){return ke="function"==typeof ke?ke:D,null==b?b:Xd(b,S,ka(Q),ke)},bt.values=Jy,bt.valuesIn=function mT(b){return null==b?[]:Ws(b,xu(b))},bt.without=We,bt.words=tI,bt.wrap=function fi(b,S){return kn(ka(S),b)},bt.xor=ft,bt.xorBy=dt,bt.xorWith=at,bt.zip=xt,bt.zipObject=function St(b,S){return Gu(b||[],S||[],Af)},bt.zipObjectDeep=function nn(b,S){return Gu(b||[],S||[],wo)},bt.zipWith=qt,bt.entries=Gx,bt.entriesIn=Wx,bt.extend=bb,bt.extendWith=cg,sI(bt,bt),bt.add=Tb,bt.attempt=gw,bt.camelCase=_T,bt.capitalize=qx,bt.ceil=Mb,bt.clamp=function vT(b,S,Q){return Q===D&&(Q=S,S=D),Q!==D&&(Q=(Q=_d(Q))==Q?Q:0),S!==D&&(S=(S=_d(S))==S?S:0),Sf(_d(b),S,Q)},bt.clone=function ai(b){return yl(b,4)},bt.cloneDeep=function Qi(b){return yl(b,5)},bt.cloneDeepWith=function lr(b,S){return yl(b,5,S="function"==typeof S?S:D)},bt.cloneWith=function Si(b,S){return yl(b,4,S="function"==typeof S?S:D)},bt.conformsTo=function Hr(b,S){return null==S||Vy(b,S,Hc(S))},bt.deburr=qs,bt.defaultTo=function DT(b,S){return null==b||b!=b?S:b},bt.divide=Aw,bt.endsWith=function Ie(b,S,Q){b=ta(b),S=Bl(S);var ke=b.length,gt=Q=Q===D?ke:Sf(Zs(Q),0,ke);return(Q-=S.length)>=0&&b.slice(Q,gt)==S},bt.eq=Zr,bt.escape=function Xx(b){return(b=ta(b))&&ff.test(b)?b.replace(Ou,Rg):b},bt.escapeRegExp=function Yx(b){return(b=ta(b))&&Mg.test(b)?b.replace(xc,"\\$&"):b},bt.every=function Ai(b,S,Q){var ke=ki(b)?hu:j_;return Q&&vc(b,S,Q)&&(S=D),ke(b,as(S,3))},bt.find=ar,bt.findIndex=hl,bt.findKey=function nf(b,S){return Ko(b,as(S,3),Rc)},bt.findLast=Hi,bt.findLastIndex=Wm,bt.findLastKey=function wb(b,S){return Ko(b,as(S,3),Bh)},bt.floor=xw,bt.forEach=c,bt.forEachRight=d,bt.forIn=function Gv(b,S){return null==b?b:Gd(b,as(S,3),xu)},bt.forInRight=function Wv(b,S){return null==b?b:Nh(b,as(S,3),xu)},bt.forOwn=function bd(b,S){return b&&Rc(b,as(S,3))},bt.forOwnRight=function Ab(b,S){return b&&Bh(b,as(S,3))},bt.get=xb,bt.gt=mr,bt.gte=or,bt.has=function Ib(b,S){return null!=b&&zm(b,S,Rm)},bt.hasIn=Qy,bt.head=jy,bt.identity=Cd,bt.includes=function _(b,S,Q,ke){b=wr(b)?b:Jy(b),Q=Q&&!ke?Zs(Q):0;var gt=b.length;return Q<0&&(Q=ys(gt+Q,0)),Hl(b)?Q<=gt&&b.indexOf(S,Q)>-1:!!gt&&La(b,S,Q)>-1},bt.indexOf=function q_(b,S,Q){var ke=null==b?0:b.length;if(!ke)return-1;var gt=null==Q?0:Zs(Q);return gt<0&&(gt=ys(ke+gt,0)),La(b,S,gt)},bt.inRange=function $x(b,S,Q){return S=Uc(S),Q===D?(Q=S,S=0):Q=Uc(Q),function cl(b,S,Q){return b>=ml(S,Q)&&b<ys(S,Q)}(b=_d(b),S,Q)},bt.invoke=Fx,bt.isArguments=Yr,bt.isArray=ki,bt.isArrayBuffer=br,bt.isArrayLike=wr,bt.isArrayLikeObject=Qr,bt.isBoolean=function Bs(b){return!0===b||!1===b||oi(b)&&aa(b)==fe},bt.isBuffer=Jr,bt.isDate=$i,bt.isElement=function Nt(b){return oi(b)&&1===b.nodeType&&!Lo(b)},bt.isEmpty=function Kn(b){if(null==b)return!0;if(wr(b)&&(ki(b)||"string"==typeof b||"function"==typeof b.splice||Jr(b)||Bc(b)||Yr(b)))return!b.length;var S=Oa(b);if(S==Ot||S==ii)return!b.size;if(_h(b))return!tu(b).length;for(var Q in b)if(ia.call(b,Q))return!1;return!0},bt.isEqual=function Pi(b,S){return Oc(b,S)},bt.isEqualWith=function Xe(b,S,Q){var ke=(Q="function"==typeof Q?Q:D)?Q(b,S):D;return ke===D?Oc(b,S,D,Q):!!ke},bt.isError=yt,bt.isFinite=function dn(b){return"number"==typeof b&&Vg(b)},bt.isFunction=bn,bt.isInteger=wn,bt.isLength=nr,bt.isMap=Br,bt.isMatch=function Vi(b,S){return b===S||fh(b,S,tm(S))},bt.isMatchWith=function Ui(b,S,Q){return Q="function"==typeof Q?Q:D,fh(b,S,tm(S),Q)},bt.isNaN=function tr(b){return $o(b)&&b!=+b},bt.isNative=function eo(b){if(gd(b))throw new Vs("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Wd(b)},bt.isNil=function Na(b){return null==b},bt.isNull=function fo(b){return null===b},bt.isNumber=$o,bt.isObject=cr,bt.isObjectLike=oi,bt.isPlainObject=Lo,bt.isRegExp=Qo,bt.isSafeInteger=function Er(b){return wn(b)&&b>=-vn&&b<=vn},bt.isSet=Wa,bt.isString=Hl,bt.isSymbol=Gl,bt.isTypedArray=Bc,bt.isUndefined=function Cp(b){return b===D},bt.isWeakMap=function Nf(b){return oi(b)&&Oa(b)==ws},bt.isWeakSet=function zc(b){return oi(b)&&"[object WeakSet]"==aa(b)},bt.join=function Bv(b,S){return null==b?"":hh.call(b,S)},bt.kebabCase=bT,bt.last=Au,bt.lastIndexOf=function K_(b,S,Q){var ke=null==b?0:b.length;if(!ke)return-1;var gt=ke;return Q!==D&&(gt=(gt=Zs(Q))<0?ys(ke+gt,0):ml(gt,ke-1)),S==S?function Nd(Sn,ci,Jn){for(var Or=Jn+1;Or--;)if(Sn[Or]===ci)return Or;return Or}(b,S,gt):Ol(b,Yl,gt,!0)},bt.lowerCase=CT,bt.lowerFirst=Kx,bt.lt=ic,bt.lte=Vc,bt.max=function Iw(b){return b&&b.length?kv(b,Cd,ld):D},bt.maxBy=function nk(b,S){return b&&b.length?kv(b,as(S,2),ld):D},bt.mean=function OT(b){return Ir(b,Cd)},bt.meanBy=function FT(b,S){return Ir(b,as(S,2))},bt.min=function NT(b){return b&&b.length?kv(b,Cd,$d):D},bt.minBy=function BT(b,S){return b&&b.length?kv(b,as(S,2),$d):D},bt.stubArray=s0,bt.stubFalse=Ip,bt.stubObject=function Cw(){return{}},bt.stubString=function lI(){return""},bt.stubTrue=function ww(){return!0},bt.multiply=uI,bt.nth=function pa(b,S){return b&&b.length?Vh(b,Zs(S)):D},bt.noConflict=function yw(){return Xl._===this&&(Xl._=H_),this},bt.noop=_w,bt.now=nt,bt.pad=function wT(b,S,Q){b=ta(b);var ke=(S=Zs(S))?al(b):0;if(!S||ke>=S)return b;var gt=(S-ke)/2;return Cu(ra(gt),Q)+b+Cu(Mv(gt),Q)},bt.padEnd=function Zx(b,S,Q){b=ta(b);var ke=(S=Zs(S))?al(b):0;return S&&ke<S?b+Cu(S-ke,Q):b},bt.padStart=function AT(b,S,Q){b=ta(b);var ke=(S=Zs(S))?al(b):0;return S&&ke<S?Cu(S-ke,Q)+b:b},bt.parseInt=function xT(b,S,Q){return Q||null==S?S=0:S&&(S=+S),bo(ta(b).replace(Th,""),S||0)},bt.random=function yT(b,S,Q){if(Q&&"boolean"!=typeof Q&&vc(b,S,Q)&&(S=Q=D),Q===D&&("boolean"==typeof S?(Q=S,S=D):"boolean"==typeof b&&(Q=b,b=D)),b===D&&S===D?(b=0,S=1):(b=Uc(b),S===D?(S=b,b=0):S=Uc(S)),b>S){var ke=b;b=S,S=ke}if(Q||b%1||S%1){var gt=Fo();return ml(b+gt*(S-b+rs("1e-"+((gt+"").length-1))),S)}return hd(b,S)},bt.reduce=function j(b,S,Q){var ke=ki(b)?vf:pu,gt=arguments.length<3;return ke(b,as(S,4),Q,gt,ad)},bt.reduceRight=function Z(b,S,Q){var ke=ki(b)?Rr:pu,gt=arguments.length<3;return ke(b,as(S,4),Q,gt,Rv)},bt.repeat=function XR(b,S,Q){return S=(Q?vc(b,S,Q):S===D)?1:Zs(S),jo(ta(b),S)},bt.replace=function Qx(){var b=arguments,S=ta(b[0]);return b.length<3?S:S.replace(b[1],b[2])},bt.result=function Ux(b,S,Q){var ke=-1,gt=(S=ec(S,b)).length;for(gt||(gt=1,b=D);++ke<gt;){var Bt=null==b?D:b[Xu(S[ke])];Bt===D&&(ke=gt,Bt=Q),b=bn(Bt)?Bt.call(b):Bt}return b},bt.round=ik,bt.runInContext=Sn,bt.sample=function me(b){return(ki(b)?Lv:ir)(b)},bt.size=function je(b){if(null==b)return 0;if(wr(b))return Hl(b)?al(b):b.length;var S=Oa(b);return S==Ot||S==ii?b.size:tu(b).length},bt.snakeCase=Jx,bt.some=function qe(b,S,Q){var ke=ki(b)?xm:Tf;return Q&&vc(b,S,Q)&&(S=D),ke(b,as(S,3))},bt.sortedIndex=function Q_(b,S){return Jl(b,S)},bt.sortedIndexBy=function yb(b,S,Q){return Jp(b,S,as(Q,2))},bt.sortedIndexOf=function tf(b,S){var Q=null==b?0:b.length;if(Q){var ke=Jl(b,S);if(ke<Q&&Zr(b[ke],S))return ke}return-1},bt.sortedLastIndex=function sm(b,S){return Jl(b,S,!0)},bt.sortedLastIndexBy=function Uv(b,S,Q){return Jp(b,S,as(Q,2),!0)},bt.sortedLastIndexOf=function Yy(b,S){if(null!=b&&b.length){var ke=Jl(b,S,!0)-1;if(Zr(b[ke],S))return ke}return-1},bt.startCase=IT,bt.startsWith=function fw(b,S,Q){return b=ta(b),Q=null==Q?0:Sf(Zs(Q),0,b.length),S=Bl(S),b.slice(Q,Q+S.length)==S},bt.subtract=zT,bt.sum=function rk(b){return b&&b.length?Al(b,Cd):0},bt.sumBy=function hI(b,S){return b&&b.length?Al(b,as(S,2)):0},bt.template=function pw(b,S,Q){var ke=bt.templateSettings;Q&&vc(b,S,Q)&&(S=D),b=ta(b),S=cg({},S,ke,Jg);var Cn,Rn,gt=cg({},S.imports,ke.imports,Jg),Bt=Hc(gt),hn=Ws(gt,Bt),Ri=0,Oi=S.interpolate||Tn,qi="__p += '",Lr=Av((S.escape||Tn).source+"|"+Oi.source+"|"+(Oi===pf?Ze:Tn).source+"|"+(S.evaluate||Tn).source+"|$","g"),Wr="//# sourceURL="+(ia.call(S,"sourceURL")?(S.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++B_+"]")+"\n";b.replace(Lr,function(Is,po,zo,Yh,Kh,Gc){return zo||(zo=Yh),qi+=b.slice(Ri,Gc).replace(wi,Qf),po&&(Cn=!0,qi+="' +\n__e("+po+") +\n'"),Kh&&(Rn=!0,qi+="';\n"+Kh+";\n__p += '"),zo&&(qi+="' +\n((__t = ("+zo+")) == null ? '' : __t) +\n'"),Ri=Gc+Is.length,Is}),qi+="';\n";var xs=ia.call(S,"variable")&&S.variable;if(xs){if($f.test(xs))throw new Vs("Invalid `variable` option passed into `_.template`")}else qi="with (obj) {\n"+qi+"\n}\n";qi=(Rn?qi.replace(Rd,""):qi).replace(uu,"$1").replace(Sa,"$1;"),qi="function("+(xs||"obj")+") {\n"+(xs?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(Cn?", __e = _.escape":"")+(Rn?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+qi+"return __p\n}";var co=gw(function(){return Zo(Bt,Wr+"return "+qi).apply(D,hn)});if(co.source=qi,yt(co))throw co;return co},bt.times=function ek(b,S){if((b=Zs(b))<1||b>vn)return[];var Q=rt,ke=ml(b,rt);S=as(S),b-=rt;for(var gt=sd(ke,S);++Q<b;)S(Q);return gt},bt.toFinite=Uc,bt.toInteger=Zs,bt.toLength=_b,bt.toLower=function ST(b){return ta(b).toLowerCase()},bt.toNumber=_d,bt.toSafeInteger=function e0(b){return b?Sf(Zs(b),-vn,vn):0===b?b:0},bt.toString=ta,bt.toUpper=function YR(b){return ta(b).toUpperCase()},bt.trim=function KR(b,S,Q){if((b=ta(b))&&(Q||S===D))return Hp(b);if(!b||!(S=Bl(S)))return b;var ke=uh(b),gt=uh(S);return dc(ke,Zf(ke,gt),Im(ke,gt)+1).join("")},bt.trimEnd=function ZR(b,S,Q){if((b=ta(b))&&(Q||S===D))return b.slice(0,Jc(b)+1);if(!b||!(S=Bl(S)))return b;var ke=uh(b);return dc(ke,0,Im(ke,uh(S))+1).join("")},bt.trimStart=function ET(b,S,Q){if((b=ta(b))&&(Q||S===D))return b.replace(Th,"");if(!b||!(S=Bl(S)))return b;var ke=uh(b);return dc(ke,Zf(ke,uh(S))).join("")},bt.truncate=function eI(b,S){var Q=30,ke="...";if(cr(S)){var gt="separator"in S?S.separator:gt;Q="length"in S?Zs(S.length):Q,ke="omission"in S?Bl(S.omission):ke}var Bt=(b=ta(b)).length;if(ch(b)){var hn=uh(b);Bt=hn.length}if(Q>=Bt)return b;var Cn=Q-al(ke);if(Cn<1)return ke;var Rn=hn?dc(hn,0,Cn).join(""):b.slice(0,Cn);if(gt===D)return Rn+ke;if(hn&&(Cn+=Rn.length-Cn),Qo(gt)){if(b.slice(Cn).search(gt)){var Ri,Oi=Rn;for(gt.global||(gt=Av(gt.source,ta(pt.exec(gt))+"g")),gt.lastIndex=0;Ri=gt.exec(Oi);)var qi=Ri.index;Rn=Rn.slice(0,qi===D?Cn:qi)}}else if(b.indexOf(Bl(gt),Cn)!=Cn){var Lr=Rn.lastIndexOf(gt);Lr>-1&&(Rn=Rn.slice(0,Lr))}return Rn+ke},bt.unescape=function QR(b){return(b=ta(b))&&td.test(b)?b.replace(Eh,Ph):b},bt.uniqueId=function tk(b){var S=++Oy;return ta(b)+S},bt.upperCase=TT,bt.upperFirst=qm,bt.each=c,bt.eachRight=d,bt.first=jy,sI(bt,function(){var b={};return Rc(bt,function(S,Q){ia.call(bt.prototype,Q)||(b[Q]=S)}),b}(),{chain:!1}),bt.VERSION="4.17.21",Za(["bind","bindKey","curry","curryRight","partial","partialRight"],function(b){bt[b].placeholder=bt}),Za(["drop","take"],function(b,S){Rs.prototype[b]=function(Q){Q=Q===D?1:ys(Zs(Q),0);var ke=this.__filtered__&&!S?new Rs(this):this.clone();return ke.__filtered__?ke.__takeCount__=ml(Q,ke.__takeCount__):ke.__views__.push({size:ml(Q,rt),type:b+(ke.__dir__<0?"Right":"")}),ke},Rs.prototype[b+"Right"]=function(Q){return this.reverse()[b](Q).reverse()}}),Za(["filter","map","takeWhile"],function(b,S){var Q=S+1,ke=1==Q||3==Q;Rs.prototype[b]=function(gt){var Bt=this.clone();return Bt.__iteratees__.push({iteratee:as(gt,3),type:Q}),Bt.__filtered__=Bt.__filtered__||ke,Bt}}),Za(["head","last"],function(b,S){var Q="take"+(S?"Right":"");Rs.prototype[b]=function(){return this[Q](1).value()[0]}}),Za(["initial","tail"],function(b,S){var Q="drop"+(S?"":"Right");Rs.prototype[b]=function(){return this.__filtered__?new Rs(this):this[Q](1)}}),Rs.prototype.compact=function(){return this.filter(Cd)},Rs.prototype.find=function(b){return this.filter(b).head()},Rs.prototype.findLast=function(b){return this.reverse().find(b)},Rs.prototype.invokeMap=Ns(function(b,S){return"function"==typeof b?new Rs(this):this.map(function(Q){return kc(Q,b,S)})}),Rs.prototype.reject=function(b){return this.filter(sn(as(b)))},Rs.prototype.slice=function(b,S){b=Zs(b);var Q=this;return Q.__filtered__&&(b>0||S<0)?new Rs(Q):(b<0?Q=Q.takeRight(-b):b&&(Q=Q.drop(b)),S!==D&&(Q=(S=Zs(S))<0?Q.dropRight(-S):Q.take(S-b)),Q)},Rs.prototype.takeRightWhile=function(b){return this.reverse().takeWhile(b).reverse()},Rs.prototype.toArray=function(){return this.take(rt)},Rc(Rs.prototype,function(b,S){var Q=/^(?:filter|find|map|reject)|While$/.test(S),ke=/^(?:head|last)$/.test(S),gt=bt[ke?"take"+("last"==S?"Right":""):S],Bt=ke||/^find/.test(S);!gt||(bt.prototype[S]=function(){var hn=this.__wrapped__,Cn=ke?[1]:arguments,Rn=hn instanceof Rs,Ri=Cn[0],Oi=Rn||ki(hn),qi=function(po){var zo=gt.apply(bt,Lh([po],Cn));return ke&&Lr?zo[0]:zo};Oi&&Q&&"function"==typeof Ri&&1!=Ri.length&&(Rn=Oi=!1);var Lr=this.__chain__,Wr=!!this.__actions__.length,xs=Bt&&!Lr,co=Rn&&!Wr;if(!Bt&&Oi){hn=co?hn:new Rs(this);var Is=b.apply(hn,Cn);return Is.__actions__.push({func:an,args:[qi],thisArg:D}),new sa(Is,Lr)}return xs&&co?b.apply(this,Cn):(Is=this.thru(qi),xs?ke?Is.value()[0]:Is.value():Is)})}),Za(["pop","push","shift","sort","splice","unshift"],function(b){var S=Iv[b],Q=/^(?:push|sort|unshift)$/.test(b)?"tap":"thru",ke=/^(?:pop|shift)$/.test(b);bt.prototype[b]=function(){var gt=arguments;if(ke&&!this.__chain__){var Bt=this.value();return S.apply(ki(Bt)?Bt:[],gt)}return this[Q](function(hn){return S.apply(ki(hn)?hn:[],gt)})}}),Rc(Rs.prototype,function(b,S){var Q=bt[S];if(Q){var ke=Q.name+"";ia.call($p,ke)||($p[ke]=[]),$p[ke].push({name:S,func:Q})}}),$p[qn(D,2).name]=[{name:"wrapper",func:D}],Rs.prototype.clone=function qp(){var b=new Rs(this.__wrapped__);return b.__actions__=Js(this.__actions__),b.__dir__=this.__dir__,b.__filtered__=this.__filtered__,b.__iteratees__=Js(this.__iteratees__),b.__takeCount__=this.__takeCount__,b.__views__=Js(this.__views__),b},Rs.prototype.reverse=function op(){if(this.__filtered__){var b=new Rs(this);b.__dir__=-1,b.__filtered__=!0}else(b=this.clone()).__dir__*=-1;return b},Rs.prototype.value=function Cr(){var b=this.__wrapped__.value(),S=this.__dir__,Q=ki(b),ke=S<0,gt=Q?b.length:0,Bt=function Bm(b,S,Q){for(var ke=-1,gt=Q.length;++ke<gt;){var Bt=Q[ke],hn=Bt.size;switch(Bt.type){case"drop":b+=hn;break;case"dropRight":S-=hn;break;case"take":S=ml(S,b+hn);break;case"takeRight":b=ys(b,S-hn)}}return{start:b,end:S}}(0,gt,this.__views__),hn=Bt.start,Cn=Bt.end,Rn=Cn-hn,Ri=ke?Cn:hn-1,Oi=this.__iteratees__,qi=Oi.length,Lr=0,Wr=ml(Rn,this.__takeCount__);if(!Q||!ke&&gt==Rn&&Wr==Rn)return yu(b,this.__actions__);var xs=[];e:for(;Rn--&&Lr<Wr;){for(var co=-1,Is=b[Ri+=S];++co<qi;){var po=Oi[co],Yh=po.type,Kh=(0,po.iteratee)(Is);if(2==Yh)Is=Kh;else if(!Kh){if(1==Yh)continue e;break e}}xs[Lr++]=Is}return xs},bt.prototype.at=_n,bt.prototype.chain=function On(){return gn(this)},bt.prototype.commit=function Ti(){return new sa(this.value(),this.__chain__)},bt.prototype.next=function di(){this.__values__===D&&(this.__values__=wp(this.value()));var b=this.__index__>=this.__values__.length;return{done:b,value:b?D:this.__values__[this.__index__++]}},bt.prototype.plant=function tn(b){for(var S,Q=this;Q instanceof Mo;){var ke=im(Q);ke.__index__=0,ke.__values__=D,S?gt.__wrapped__=ke:S=ke;var gt=ke;Q=Q.__wrapped__}return gt.__wrapped__=b,S},bt.prototype.reverse=function Xn(){var b=this.__wrapped__;if(b instanceof Rs){var S=b;return this.__actions__.length&&(S=new Rs(this)),(S=S.reverse()).__actions__.push({func:an,args:[$m],thisArg:D}),new sa(S,this.__chain__)}return this.thru($m)},bt.prototype.toJSON=bt.prototype.valueOf=bt.prototype.value=function ni(){return yu(this.__wrapped__,this.__actions__)},bt.prototype.first=bt.prototype.head,Wp&&(bt.prototype[Wp]=function Jt(){return this}),bt}();Xl._=Sm,(X=function(){return Sm}.call(we,U,we,He))!==D&&(He.exports=X)}.call(this)},535:(He,we,U)=>{var X=U(9850);function V(O,H){if("function"!=typeof O||null!=H&&"function"!=typeof H)throw new TypeError("Expected a function");var L=function(){var P=arguments,q=H?H.apply(this,P):P[0],ee=L.cache;if(ee.has(q))return ee.get(q);var K=O.apply(this,P);return L.cache=ee.set(q,K)||ee,K};return L.cache=new(V.Cache||X),L}V.Cache=X,He.exports=V},1710:(He,we,U)=>{var X=U(2119);He.exports=function(){return X.Date.now()}},4793:(He,we,U)=>{var X=U(5963);He.exports=function D(V,O,H){return null==V?V:X(V,O,H)}},1467:(He,we,U)=>{var X=U(3348),D=U(5940),V=U(4129),H=/^[-+]0x[0-9a-f]+$/i,L=/^0b[01]+$/i,P=/^0o[0-7]+$/i,q=parseInt;He.exports=function ee(K){if("number"==typeof K)return K;if(V(K))return NaN;if(D(K)){var ne="function"==typeof K.valueOf?K.valueOf():K;K=D(ne)?ne+"":ne}if("string"!=typeof K)return 0===K?K:+K;K=X(K);var se=L.test(K);return se||P.test(K)?q(K.slice(2),se?2:8):H.test(K)?NaN:+K}},4152:(He,we,U)=>{var X=U(4633),D=U(9454),V=U(9460),O=U(4129),H=U(2855),L=U(8533),P=U(3943);He.exports=function q(ee){return V(ee)?X(ee,L):O(ee)?[ee]:D(H(P(ee)))}},3943:(He,we,U)=>{var X=U(3935);He.exports=function D(V){return null==V?"":X(V)}},4826:(He,we,U)=>{"use strict";He.exports=U(6776)},6798:(He,we,U)=>{"use strict";He.exports=U(5485)},2484:He=>{"use strict";He.exports=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"]},3266:He=>{"use strict";var H="<[A-Za-z][A-Za-z0-9\\-]*(?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:[^\"'=<>`\\x00-\\x20]+|'[^']*'|\"[^\"]*\"))?)*\\s*\\/?>",L="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",ne=new RegExp("^(?:"+H+"|"+L+"|\x3c!----\x3e|\x3c!--(?:-?[^>-])(?:-?[^-])*--\x3e|<[?][\\s\\S]*?[?]>|<![A-Z]+\\s+[^>]*>|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>)"),se=new RegExp("^(?:"+H+"|"+L+")");He.exports.n=ne,He.exports.q=se},3332:(He,we,U)=>{"use strict";var V=Object.prototype.hasOwnProperty;function O(Fe,Ye){return V.call(Fe,Ye)}function P(Fe){return!(Fe>=55296&&Fe<=57343||Fe>=64976&&Fe<=65007||65535==(65535&Fe)||65534==(65535&Fe)||Fe>=0&&Fe<=8||11===Fe||Fe>=14&&Fe<=31||Fe>=127&&Fe<=159||Fe>1114111)}function q(Fe){return Fe>65535?(Fe-=65536,String.fromCharCode(55296+(Fe>>10),56320+(1023&Fe))):String.fromCharCode(Fe)}var ee=/\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g,ne=new RegExp(ee.source+"|"+/&([a-z#][a-z0-9]{1,31});/gi.source,"gi"),se=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i,J=U(6798),Ee=/[&<>"]/,te=/[&<>"]/g,oe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function B(Fe){return oe[Fe]}var ie=/[.?*+^$[\]\\(){}|-]/g,xe=U(6020);we.lib={},we.lib.mdurl=U(7214),we.lib.ucmicro=U(9315),we.assign=function H(Fe){var Ye=Array.prototype.slice.call(arguments,1);return Ye.forEach(function(lt){if(lt){if("object"!=typeof lt)throw new TypeError(lt+"must be object");Object.keys(lt).forEach(function(vt){Fe[vt]=lt[vt]})}}),Fe},we.isString=function D(Fe){return"[object String]"===function X(Fe){return Object.prototype.toString.call(Fe)}(Fe)},we.has=O,we.unescapeMd=function ae(Fe){return Fe.indexOf("\\")<0?Fe:Fe.replace(ee,"$1")},we.unescapeAll=function _e(Fe){return Fe.indexOf("\\")<0&&Fe.indexOf("&")<0?Fe:Fe.replace(ne,function(Ye,lt,vt){return lt||function W(Fe,Ye){var lt=0;return O(J,Ye)?J[Ye]:35===Ye.charCodeAt(0)&&se.test(Ye)&&P(lt="x"===Ye[1].toLowerCase()?parseInt(Ye.slice(2),16):parseInt(Ye.slice(1),10))?q(lt):Fe}(Ye,vt)})},we.isValidEntityCode=P,we.fromCodePoint=q,we.escapeHtml=function $(Fe){return Ee.test(Fe)?Fe.replace(te,B):Fe},we.arrayReplaceAt=function L(Fe,Ye,lt){return[].concat(Fe.slice(0,Ye),lt,Fe.slice(Ye+1))},we.isSpace=function Be(Fe){switch(Fe){case 9:case 32:return!0}return!1},we.isWhiteSpace=function Me(Fe){if(Fe>=8192&&Fe<=8202)return!0;switch(Fe){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1},we.isMdAsciiPunct=function Pe(Fe){switch(Fe){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}},we.isPunctChar=function ue(Fe){return xe.test(Fe)},we.escapeRE=function pe(Fe){return Fe.replace(ie,"\\$&")},we.normalizeReference=function ot(Fe){return Fe=Fe.trim().replace(/\s+/g," "),"\u1e7e"==="\u1e9e".toLowerCase()&&(Fe=Fe.replace(/\u1e9e/g,"\xdf")),Fe.toLowerCase().toUpperCase()}},8198:(He,we,U)=>{"use strict";we.parseLinkLabel=U(9605),we.parseLinkDestination=U(4072),we.parseLinkTitle=U(4658)},4072:(He,we,U)=>{"use strict";var X=U(3332).unescapeAll;He.exports=function(V,O,H){var L,P,ee=O,K={ok:!1,pos:0,lines:0,str:""};if(60===V.charCodeAt(O)){for(O++;O<H;){if(10===(L=V.charCodeAt(O))||60===L)return K;if(62===L)return K.pos=O+1,K.str=X(V.slice(ee+1,O)),K.ok=!0,K;92===L&&O+1<H?O+=2:O++}return K}for(P=0;O<H&&!(32===(L=V.charCodeAt(O))||L<32||127===L);)if(92===L&&O+1<H){if(32===V.charCodeAt(O+1))break;O+=2}else{if(40===L&&++P>32)return K;if(41===L){if(0===P)break;P--}O++}return ee===O||0!==P||(K.str=X(V.slice(ee,O)),K.lines=0,K.pos=O,K.ok=!0),K}},9605:He=>{"use strict";He.exports=function(U,X,D){var V,O,H,L,P=-1,q=U.posMax,ee=U.pos;for(U.pos=X+1,V=1;U.pos<q;){if(93===(H=U.src.charCodeAt(U.pos))&&0==--V){O=!0;break}if(L=U.pos,U.md.inline.skipToken(U),91===H)if(L===U.pos-1)V++;else if(D)return U.pos=ee,-1}return O&&(P=U.pos),U.pos=ee,P}},4658:(He,we,U)=>{"use strict";var X=U(3332).unescapeAll;He.exports=function(V,O,H){var L,P,q=0,ee=O,K={ok:!1,pos:0,lines:0,str:""};if(O>=H||34!==(P=V.charCodeAt(O))&&39!==P&&40!==P)return K;for(O++,40===P&&(P=41);O<H;){if((L=V.charCodeAt(O))===P)return K.pos=O+1,K.lines=q,K.str=X(V.slice(ee+1,O)),K.ok=!0,K;if(40===L&&41===P)return K;10===L?q++:92===L&&O+1<H&&(O++,10===V.charCodeAt(O)&&q++),O++}return K}},6776:(He,we,U)=>{"use strict";var X=U(3332),D=U(8198),V=U(7172),O=U(2080),H=U(4223),L=U(2900),P=U(3353),q=U(7214),ee=U(4879),K={default:U(4210),zero:U(7020),commonmark:U(8687)},ne=/^(vbscript|javascript|file|data):/,se=/^data:image\/(gif|png|jpeg|webp);/;function J(te){var oe=te.trim().toLowerCase();return!ne.test(oe)||!!se.test(oe)}var W=["http:","https:","mailto:"];function ae(te){var oe=q.parse(te,!0);if(oe.hostname&&(!oe.protocol||W.indexOf(oe.protocol)>=0))try{oe.hostname=ee.toASCII(oe.hostname)}catch{}return q.encode(q.format(oe))}function _e(te){var oe=q.parse(te,!0);if(oe.hostname&&(!oe.protocol||W.indexOf(oe.protocol)>=0))try{oe.hostname=ee.toUnicode(oe.hostname)}catch{}return q.decode(q.format(oe),q.decode.defaultChars+"%")}function Ee(te,oe){if(!(this instanceof Ee))return new Ee(te,oe);oe||X.isString(te)||(oe=te||{},te="default"),this.inline=new L,this.block=new H,this.core=new O,this.renderer=new V,this.linkify=new P,this.validateLink=J,this.normalizeLink=ae,this.normalizeLinkText=_e,this.utils=X,this.helpers=X.assign({},D),this.options={},this.configure(te),oe&&this.set(oe)}Ee.prototype.set=function(te){return X.assign(this.options,te),this},Ee.prototype.configure=function(te){var B,oe=this;if(X.isString(te)&&!(te=K[B=te]))throw new Error('Wrong `markdown-it` preset "'+B+'", check name');if(!te)throw new Error("Wrong `markdown-it` preset, can't be empty");return te.options&&oe.set(te.options),te.components&&Object.keys(te.components).forEach(function($){te.components[$].rules&&oe[$].ruler.enableOnly(te.components[$].rules),te.components[$].rules2&&oe[$].ruler2.enableOnly(te.components[$].rules2)}),this},Ee.prototype.enable=function(te,oe){var B=[];Array.isArray(te)||(te=[te]),["core","block","inline"].forEach(function(ie){B=B.concat(this[ie].ruler.enable(te,!0))},this),B=B.concat(this.inline.ruler2.enable(te,!0));var $=te.filter(function(ie){return B.indexOf(ie)<0});if($.length&&!oe)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+$);return this},Ee.prototype.disable=function(te,oe){var B=[];Array.isArray(te)||(te=[te]),["core","block","inline"].forEach(function(ie){B=B.concat(this[ie].ruler.disable(te,!0))},this),B=B.concat(this.inline.ruler2.disable(te,!0));var $=te.filter(function(ie){return B.indexOf(ie)<0});if($.length&&!oe)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+$);return this},Ee.prototype.use=function(te){var oe=[this].concat(Array.prototype.slice.call(arguments,1));return te.apply(te,oe),this},Ee.prototype.parse=function(te,oe){if("string"!=typeof te)throw new Error("Input data should be a String");var B=new this.core.State(te,this,oe);return this.core.process(B),B.tokens},Ee.prototype.render=function(te,oe){return this.renderer.render(this.parse(te,oe=oe||{}),this.options,oe)},Ee.prototype.parseInline=function(te,oe){var B=new this.core.State(te,this,oe);return B.inlineMode=!0,this.core.process(B),B.tokens},Ee.prototype.renderInline=function(te,oe){return this.renderer.render(this.parseInline(te,oe=oe||{}),this.options,oe)},He.exports=Ee},4223:(He,we,U)=>{"use strict";var X=U(1368),D=[["table",U(2281),["paragraph","reference"]],["code",U(6372)],["fence",U(7931),["paragraph","reference","blockquote","list"]],["blockquote",U(72),["paragraph","reference","blockquote","list"]],["hr",U(8570),["paragraph","reference","blockquote","list"]],["list",U(7827),["paragraph","reference","blockquote"]],["reference",U(5886)],["html_block",U(5134),["paragraph","reference","blockquote"]],["heading",U(3462),["paragraph","reference","blockquote"]],["lheading",U(5920)],["paragraph",U(851)]];function V(){this.ruler=new X;for(var O=0;O<D.length;O++)this.ruler.push(D[O][0],D[O][1],{alt:(D[O][2]||[]).slice()})}V.prototype.tokenize=function(O,H,L){for(var q,ee=this.ruler.getRules(""),K=ee.length,ne=H,se=!1,J=O.md.options.maxNesting;ne<L&&(O.line=ne=O.skipEmptyLines(ne),!(ne>=L||O.sCount[ne]<O.blkIndent));){if(O.level>=J){O.line=L;break}for(q=0;q<K&&!ee[q](O,ne,L,!1);q++);O.tight=!se,O.isEmpty(O.line-1)&&(se=!0),(ne=O.line)<L&&O.isEmpty(ne)&&(se=!0,ne++,O.line=ne)}},V.prototype.parse=function(O,H,L,P){var q;!O||(q=new this.State(O,H,L,P),this.tokenize(q,q.line,q.lineMax))},V.prototype.State=U(1845),He.exports=V},2080:(He,we,U)=>{"use strict";var X=U(1368),D=[["normalize",U(7398)],["block",U(8905)],["inline",U(3591)],["linkify",U(9212)],["replacements",U(1982)],["smartquotes",U(8157)],["text_join",U(2245)]];function V(){this.ruler=new X;for(var O=0;O<D.length;O++)this.ruler.push(D[O][0],D[O][1])}V.prototype.process=function(O){var H,L,P;for(H=0,L=(P=this.ruler.getRules("")).length;H<L;H++)P[H](O)},V.prototype.State=U(1076),He.exports=V},2900:(He,we,U)=>{"use strict";var X=U(1368),D=[["text",U(1767)],["linkify",U(6234)],["newline",U(2921)],["escape",U(8763)],["backticks",U(415)],["strikethrough",U(8165).w],["emphasis",U(425).w],["link",U(7219)],["image",U(7936)],["autolink",U(6973)],["html_inline",U(3722)],["entity",U(3559)]],V=[["balance_pairs",U(9269)],["strikethrough",U(8165).g],["emphasis",U(425).g],["fragments_join",U(5767)]];function O(){var H;for(this.ruler=new X,H=0;H<D.length;H++)this.ruler.push(D[H][0],D[H][1]);for(this.ruler2=new X,H=0;H<V.length;H++)this.ruler2.push(V[H][0],V[H][1])}O.prototype.skipToken=function(H){var L,P,q=H.pos,ee=this.ruler.getRules(""),K=ee.length,ne=H.md.options.maxNesting,se=H.cache;if(typeof se[q]<"u")H.pos=se[q];else{if(H.level<ne)for(P=0;P<K&&(H.level++,L=ee[P](H,!0),H.level--,!L);P++);else H.pos=H.posMax;L||H.pos++,se[q]=H.pos}},O.prototype.tokenize=function(H){for(var L,P,q=this.ruler.getRules(""),ee=q.length,K=H.posMax,ne=H.md.options.maxNesting;H.pos<K;){if(H.level<ne)for(P=0;P<ee&&!(L=q[P](H,!1));P++);if(L){if(H.pos>=K)break}else H.pending+=H.src[H.pos++]}H.pending&&H.pushPending()},O.prototype.parse=function(H,L,P,q){var ee,K,ne,se=new this.State(H,L,P,q);for(this.tokenize(se),ne=(K=this.ruler2.getRules("")).length,ee=0;ee<ne;ee++)K[ee](se)},O.prototype.State=U(630),He.exports=O},8687:He=>{"use strict";He.exports={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201c\u201d\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}}},4210:He=>{"use strict";He.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201c\u201d\u2018\u2019",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}}},7020:He=>{"use strict";He.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201c\u201d\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}}},7172:(He,we,U)=>{"use strict";var X=U(3332).assign,D=U(3332).unescapeAll,V=U(3332).escapeHtml,O={};function H(){this.rules=X({},O)}O.code_inline=function(L,P,q,ee,K){return"<code"+K.renderAttrs(L[P])+">"+V(L[P].content)+"</code>"},O.code_block=function(L,P,q,ee,K){return"<pre"+K.renderAttrs(L[P])+"><code>"+V(L[P].content)+"</code></pre>\n"},O.fence=function(L,P,q,ee,K){var ae,_e,Ee,te,ne=L[P],se=ne.info?D(ne.info).trim():"",J="",W="";return se&&(J=(Ee=se.split(/(\s+)/g))[0],W=Ee.slice(2).join("")),0===(ae=q.highlight&&q.highlight(ne.content,J,W)||V(ne.content)).indexOf("<pre")?ae+"\n":se?(_e=ne.attrIndex("class"),te=ne.attrs?ne.attrs.slice():[],_e<0?te.push(["class",q.langPrefix+J]):(te[_e]=te[_e].slice(),te[_e][1]+=" "+q.langPrefix+J),"<pre><code"+K.renderAttrs({attrs:te})+">"+ae+"</code></pre>\n"):"<pre><code"+K.renderAttrs(ne)+">"+ae+"</code></pre>\n"},O.image=function(L,P,q,ee,K){var ne=L[P];return ne.attrs[ne.attrIndex("alt")][1]=K.renderInlineAsText(ne.children,q,ee),K.renderToken(L,P,q)},O.hardbreak=function(L,P,q){return q.xhtmlOut?"<br />\n":"<br>\n"},O.softbreak=function(L,P,q){return q.breaks?q.xhtmlOut?"<br />\n":"<br>\n":"\n"},O.text=function(L,P){return V(L[P].content)},O.html_block=function(L,P){return L[P].content},O.html_inline=function(L,P){return L[P].content},H.prototype.renderAttrs=function(P){var q,ee,K;if(!P.attrs)return"";for(K="",q=0,ee=P.attrs.length;q<ee;q++)K+=" "+V(P.attrs[q][0])+'="'+V(P.attrs[q][1])+'"';return K},H.prototype.renderToken=function(P,q,ee){var K,ne="",se=!1,J=P[q];return J.hidden?"":(J.block&&-1!==J.nesting&&q&&P[q-1].hidden&&(ne+="\n"),ne+=(-1===J.nesting?"</":"<")+J.tag,ne+=this.renderAttrs(J),0===J.nesting&&ee.xhtmlOut&&(ne+=" /"),J.block&&(se=!0,1===J.nesting&&q+1<P.length&&("inline"===(K=P[q+1]).type||K.hidden||-1===K.nesting&&K.tag===J.tag)&&(se=!1)),ne+=se?">\n":">")},H.prototype.renderInline=function(L,P,q){for(var ee,K="",ne=this.rules,se=0,J=L.length;se<J;se++)K+=typeof ne[ee=L[se].type]<"u"?ne[ee](L,se,P,q,this):this.renderToken(L,se,P);return K},H.prototype.renderInlineAsText=function(L,P,q){for(var ee="",K=0,ne=L.length;K<ne;K++)"text"===L[K].type?ee+=L[K].content:"image"===L[K].type?ee+=this.renderInlineAsText(L[K].children,P,q):"softbreak"===L[K].type&&(ee+="\n");return ee},H.prototype.render=function(L,P,q){var ee,K,ne,se="",J=this.rules;for(ee=0,K=L.length;ee<K;ee++)se+="inline"===(ne=L[ee].type)?this.renderInline(L[ee].children,P,q):typeof J[ne]<"u"?J[L[ee].type](L,ee,P,q,this):this.renderToken(L,ee,P,q);return se},He.exports=H},1368:He=>{"use strict";function we(){this.__rules__=[],this.__cache__=null}we.prototype.__find__=function(U){for(var X=0;X<this.__rules__.length;X++)if(this.__rules__[X].name===U)return X;return-1},we.prototype.__compile__=function(){var U=this,X=[""];U.__rules__.forEach(function(D){!D.enabled||D.alt.forEach(function(V){X.indexOf(V)<0&&X.push(V)})}),U.__cache__={},X.forEach(function(D){U.__cache__[D]=[],U.__rules__.forEach(function(V){!V.enabled||D&&V.alt.indexOf(D)<0||U.__cache__[D].push(V.fn)})})},we.prototype.at=function(U,X,D){var V=this.__find__(U),O=D||{};if(-1===V)throw new Error("Parser rule not found: "+U);this.__rules__[V].fn=X,this.__rules__[V].alt=O.alt||[],this.__cache__=null},we.prototype.before=function(U,X,D,V){var O=this.__find__(U),H=V||{};if(-1===O)throw new Error("Parser rule not found: "+U);this.__rules__.splice(O,0,{name:X,enabled:!0,fn:D,alt:H.alt||[]}),this.__cache__=null},we.prototype.after=function(U,X,D,V){var O=this.__find__(U),H=V||{};if(-1===O)throw new Error("Parser rule not found: "+U);this.__rules__.splice(O+1,0,{name:X,enabled:!0,fn:D,alt:H.alt||[]}),this.__cache__=null},we.prototype.push=function(U,X,D){this.__rules__.push({name:U,enabled:!0,fn:X,alt:(D||{}).alt||[]}),this.__cache__=null},we.prototype.enable=function(U,X){Array.isArray(U)||(U=[U]);var D=[];return U.forEach(function(V){var O=this.__find__(V);if(O<0){if(X)return;throw new Error("Rules manager: invalid rule name "+V)}this.__rules__[O].enabled=!0,D.push(V)},this),this.__cache__=null,D},we.prototype.enableOnly=function(U,X){Array.isArray(U)||(U=[U]),this.__rules__.forEach(function(D){D.enabled=!1}),this.enable(U,X)},we.prototype.disable=function(U,X){Array.isArray(U)||(U=[U]);var D=[];return U.forEach(function(V){var O=this.__find__(V);if(O<0){if(X)return;throw new Error("Rules manager: invalid rule name "+V)}this.__rules__[O].enabled=!1,D.push(V)},this),this.__cache__=null,D},we.prototype.getRules=function(U){return null===this.__cache__&&this.__compile__(),this.__cache__[U]||[]},He.exports=we},72:(He,we,U)=>{"use strict";var X=U(3332).isSpace;He.exports=function(V,O,H,L){var P,q,ee,K,ne,se,J,W,ae,_e,Ee,te,oe,B,$,ie,pe,Be,Me,xe,ue=V.lineMax,Pe=V.bMarks[O]+V.tShift[O],ot=V.eMarks[O];if(V.sCount[O]-V.blkIndent>=4||62!==V.src.charCodeAt(Pe++))return!1;if(L)return!0;for(K=ae=V.sCount[O]+1,32===V.src.charCodeAt(Pe)?(Pe++,K++,ae++,P=!1,ie=!0):9===V.src.charCodeAt(Pe)?(ie=!0,(V.bsCount[O]+ae)%4==3?(Pe++,K++,ae++,P=!1):P=!0):ie=!1,_e=[V.bMarks[O]],V.bMarks[O]=Pe;Pe<ot&&(q=V.src.charCodeAt(Pe),X(q));)9===q?ae+=4-(ae+V.bsCount[O]+(P?1:0))%4:ae++,Pe++;for(Ee=[V.bsCount[O]],V.bsCount[O]=V.sCount[O]+1+(ie?1:0),se=Pe>=ot,B=[V.sCount[O]],V.sCount[O]=ae-K,$=[V.tShift[O]],V.tShift[O]=Pe-V.bMarks[O],Be=V.md.block.ruler.getRules("blockquote"),oe=V.parentType,V.parentType="blockquote",W=O+1;W<H&&(xe=V.sCount[W]<V.blkIndent,!((Pe=V.bMarks[W]+V.tShift[W])>=(ot=V.eMarks[W])));W++)if(62!==V.src.charCodeAt(Pe++)||xe){if(se)break;for(pe=!1,ee=0,ne=Be.length;ee<ne;ee++)if(Be[ee](V,W,H,!0)){pe=!0;break}if(pe){V.lineMax=W,0!==V.blkIndent&&(_e.push(V.bMarks[W]),Ee.push(V.bsCount[W]),$.push(V.tShift[W]),B.push(V.sCount[W]),V.sCount[W]-=V.blkIndent);break}_e.push(V.bMarks[W]),Ee.push(V.bsCount[W]),$.push(V.tShift[W]),B.push(V.sCount[W]),V.sCount[W]=-1}else{for(K=ae=V.sCount[W]+1,32===V.src.charCodeAt(Pe)?(Pe++,K++,ae++,P=!1,ie=!0):9===V.src.charCodeAt(Pe)?(ie=!0,(V.bsCount[W]+ae)%4==3?(Pe++,K++,ae++,P=!1):P=!0):ie=!1,_e.push(V.bMarks[W]),V.bMarks[W]=Pe;Pe<ot&&(q=V.src.charCodeAt(Pe),X(q));)9===q?ae+=4-(ae+V.bsCount[W]+(P?1:0))%4:ae++,Pe++;se=Pe>=ot,Ee.push(V.bsCount[W]),V.bsCount[W]=V.sCount[W]+1+(ie?1:0),B.push(V.sCount[W]),V.sCount[W]=ae-K,$.push(V.tShift[W]),V.tShift[W]=Pe-V.bMarks[W]}for(te=V.blkIndent,V.blkIndent=0,(Me=V.push("blockquote_open","blockquote",1)).markup=">",Me.map=J=[O,0],V.md.block.tokenize(V,O,W),(Me=V.push("blockquote_close","blockquote",-1)).markup=">",V.lineMax=ue,V.parentType=oe,J[1]=V.line,ee=0;ee<$.length;ee++)V.bMarks[ee+O]=_e[ee],V.tShift[ee+O]=$[ee],V.sCount[ee+O]=B[ee],V.bsCount[ee+O]=Ee[ee];return V.blkIndent=te,!0}},6372:He=>{"use strict";He.exports=function(U,X,D){var V,O,H;if(U.sCount[X]-U.blkIndent<4)return!1;for(O=V=X+1;V<D;)if(U.isEmpty(V))V++;else{if(!(U.sCount[V]-U.blkIndent>=4))break;O=++V}return U.line=O,(H=U.push("code_block","code",0)).content=U.getLines(X,O,4+U.blkIndent,!1)+"\n",H.map=[X,U.line],!0}},7931:He=>{"use strict";He.exports=function(U,X,D,V){var O,H,L,P,q,ee,K,ne=!1,se=U.bMarks[X]+U.tShift[X],J=U.eMarks[X];if(U.sCount[X]-U.blkIndent>=4||se+3>J||126!==(O=U.src.charCodeAt(se))&&96!==O||(q=se,(H=(se=U.skipChars(se,O))-q)<3)||(K=U.src.slice(q,se),L=U.src.slice(se,J),96===O&&L.indexOf(String.fromCharCode(O))>=0))return!1;if(V)return!0;for(P=X;!(++P>=D||(se=q=U.bMarks[P]+U.tShift[P],J=U.eMarks[P],se<J&&U.sCount[P]<U.blkIndent));)if(!(U.src.charCodeAt(se)!==O||U.sCount[P]-U.blkIndent>=4||(se=U.skipChars(se,O),se-q<H||(se=U.skipSpaces(se),se<J)))){ne=!0;break}return H=U.sCount[X],U.line=P+(ne?1:0),(ee=U.push("fence","code",0)).info=L,ee.content=U.getLines(X+1,P,H,!0),ee.markup=K,ee.map=[X,U.line],!0}},3462:(He,we,U)=>{"use strict";var X=U(3332).isSpace;He.exports=function(V,O,H,L){var P,q,ee,K,ne=V.bMarks[O]+V.tShift[O],se=V.eMarks[O];if(V.sCount[O]-V.blkIndent>=4||35!==(P=V.src.charCodeAt(ne))||ne>=se)return!1;for(q=1,P=V.src.charCodeAt(++ne);35===P&&ne<se&&q<=6;)q++,P=V.src.charCodeAt(++ne);return!(q>6||ne<se&&!X(P)||(L||(se=V.skipSpacesBack(se,ne),(ee=V.skipCharsBack(se,35,ne))>ne&&X(V.src.charCodeAt(ee-1))&&(se=ee),V.line=O+1,(K=V.push("heading_open","h"+String(q),1)).markup="########".slice(0,q),K.map=[O,V.line],(K=V.push("inline","",0)).content=V.src.slice(ne,se).trim(),K.map=[O,V.line],K.children=[],(K=V.push("heading_close","h"+String(q),-1)).markup="########".slice(0,q)),0))}},8570:(He,we,U)=>{"use strict";var X=U(3332).isSpace;He.exports=function(V,O,H,L){var P,q,ee,K,ne=V.bMarks[O]+V.tShift[O],se=V.eMarks[O];if(V.sCount[O]-V.blkIndent>=4||42!==(P=V.src.charCodeAt(ne++))&&45!==P&&95!==P)return!1;for(q=1;ne<se;){if((ee=V.src.charCodeAt(ne++))!==P&&!X(ee))return!1;ee===P&&q++}return!(q<3||(L||(V.line=O+1,(K=V.push("hr","hr",0)).map=[O,V.line],K.markup=Array(q+1).join(String.fromCharCode(P))),0))}},5134:(He,we,U)=>{"use strict";var X=U(2484),D=U(3266).q,V=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+X.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(D.source+"\\s*$"),/^$/,!1]];He.exports=function(H,L,P,q){var ee,K,ne,se,J=H.bMarks[L]+H.tShift[L],W=H.eMarks[L];if(H.sCount[L]-H.blkIndent>=4||!H.md.options.html||60!==H.src.charCodeAt(J))return!1;for(se=H.src.slice(J,W),ee=0;ee<V.length&&!V[ee][0].test(se);ee++);if(ee===V.length)return!1;if(q)return V[ee][2];if(K=L+1,!V[ee][1].test(se))for(;K<P&&!(H.sCount[K]<H.blkIndent);K++)if(se=H.src.slice(J=H.bMarks[K]+H.tShift[K],W=H.eMarks[K]),V[ee][1].test(se)){0!==se.length&&K++;break}return H.line=K,(ne=H.push("html_block","",0)).map=[L,K],ne.content=H.getLines(L,K,H.blkIndent,!0),!0}},5920:He=>{"use strict";He.exports=function(U,X,D){var V,O,H,L,P,q,ee,K,ne,J,se=X+1,W=U.md.block.ruler.getRules("paragraph");if(U.sCount[X]-U.blkIndent>=4)return!1;for(J=U.parentType,U.parentType="paragraph";se<D&&!U.isEmpty(se);se++)if(!(U.sCount[se]-U.blkIndent>3)){if(U.sCount[se]>=U.blkIndent&&(q=U.bMarks[se]+U.tShift[se])<(ee=U.eMarks[se])&&(45===(ne=U.src.charCodeAt(q))||61===ne)&&(q=U.skipChars(q,ne),(q=U.skipSpaces(q))>=ee)){K=61===ne?1:2;break}if(!(U.sCount[se]<0)){for(O=!1,H=0,L=W.length;H<L;H++)if(W[H](U,se,D,!0)){O=!0;break}if(O)break}}return!!K&&(V=U.getLines(X,se,U.blkIndent,!1).trim(),U.line=se+1,(P=U.push("heading_open","h"+String(K),1)).markup=String.fromCharCode(ne),P.map=[X,U.line],(P=U.push("inline","",0)).content=V,P.map=[X,U.line-1],P.children=[],(P=U.push("heading_close","h"+String(K),-1)).markup=String.fromCharCode(ne),U.parentType=J,!0)}},7827:(He,we,U)=>{"use strict";var X=U(3332).isSpace;function D(H,L){var P,q,ee,K;return q=H.bMarks[L]+H.tShift[L],ee=H.eMarks[L],42!==(P=H.src.charCodeAt(q++))&&45!==P&&43!==P||q<ee&&(K=H.src.charCodeAt(q),!X(K))?-1:q}function V(H,L){var P,q=H.bMarks[L]+H.tShift[L],ee=q,K=H.eMarks[L];if(ee+1>=K||(P=H.src.charCodeAt(ee++))<48||P>57)return-1;for(;;){if(ee>=K)return-1;if(!((P=H.src.charCodeAt(ee++))>=48&&P<=57)){if(41===P||46===P)break;return-1}if(ee-q>=10)return-1}return ee<K&&(P=H.src.charCodeAt(ee),!X(P))?-1:ee}He.exports=function(L,P,q,ee){var K,ne,se,J,W,ae,_e,Ee,te,oe,B,$,ie,pe,Be,Me,xe,ue,Pe,ot,Fe,Ye,lt,vt,vn,Ne,ht,rt,Ge=!1,_t=!0;if(L.sCount[P]-L.blkIndent>=4||L.listIndent>=0&&L.sCount[P]-L.listIndent>=4&&L.sCount[P]<L.blkIndent)return!1;if(ee&&"paragraph"===L.parentType&&L.sCount[P]>=L.blkIndent&&(Ge=!0),(lt=V(L,P))>=0){if(_e=!0,vn=L.bMarks[P]+L.tShift[P],ie=Number(L.src.slice(vn,lt-1)),Ge&&1!==ie)return!1}else{if(!((lt=D(L,P))>=0))return!1;_e=!1}if(Ge&&L.skipSpaces(lt)>=L.eMarks[P])return!1;if($=L.src.charCodeAt(lt-1),ee)return!0;for(B=L.tokens.length,_e?(rt=L.push("ordered_list_open","ol",1),1!==ie&&(rt.attrs=[["start",ie]])):rt=L.push("bullet_list_open","ul",1),rt.map=oe=[P,0],rt.markup=String.fromCharCode($),Be=P,vt=!1,ht=L.md.block.ruler.getRules("list"),ue=L.parentType,L.parentType="list";Be<q;){for(Ye=lt,pe=L.eMarks[Be],ae=Me=L.sCount[Be]+lt-(L.bMarks[P]+L.tShift[P]);Ye<pe;){if(9===(K=L.src.charCodeAt(Ye)))Me+=4-(Me+L.bsCount[Be])%4;else{if(32!==K)break;Me++}Ye++}if((W=(ne=Ye)>=pe?1:Me-ae)>4&&(W=1),J=ae+W,(rt=L.push("list_item_open","li",1)).markup=String.fromCharCode($),rt.map=Ee=[P,0],_e&&(rt.info=L.src.slice(vn,lt-1)),Fe=L.tight,ot=L.tShift[P],Pe=L.sCount[P],xe=L.listIndent,L.listIndent=L.blkIndent,L.blkIndent=J,L.tight=!0,L.tShift[P]=ne-L.bMarks[P],L.sCount[P]=Me,ne>=pe&&L.isEmpty(P+1)?L.line=Math.min(L.line+2,q):L.md.block.tokenize(L,P,q,!0),(!L.tight||vt)&&(_t=!1),vt=L.line-P>1&&L.isEmpty(L.line-1),L.blkIndent=L.listIndent,L.listIndent=xe,L.tShift[P]=ot,L.sCount[P]=Pe,L.tight=Fe,(rt=L.push("list_item_close","li",-1)).markup=String.fromCharCode($),Be=P=L.line,Ee[1]=Be,ne=L.bMarks[P],Be>=q||L.sCount[Be]<L.blkIndent||L.sCount[P]-L.blkIndent>=4)break;for(Ne=!1,se=0,te=ht.length;se<te;se++)if(ht[se](L,Be,q,!0)){Ne=!0;break}if(Ne)break;if(_e){if((lt=V(L,Be))<0)break;vn=L.bMarks[Be]+L.tShift[Be]}else if((lt=D(L,Be))<0)break;if($!==L.src.charCodeAt(lt-1))break}return(rt=_e?L.push("ordered_list_close","ol",-1):L.push("bullet_list_close","ul",-1)).markup=String.fromCharCode($),oe[1]=Be,L.line=Be,L.parentType=ue,_t&&function O(H,L){var P,q,ee=H.level+2;for(P=L+2,q=H.tokens.length-2;P<q;P++)H.tokens[P].level===ee&&"paragraph_open"===H.tokens[P].type&&(H.tokens[P+2].hidden=!0,H.tokens[P].hidden=!0,P+=2)}(L,B),!0}},851:He=>{"use strict";He.exports=function(U,X){var D,V,O,H,L,P,q=X+1,ee=U.md.block.ruler.getRules("paragraph"),K=U.lineMax;for(P=U.parentType,U.parentType="paragraph";q<K&&!U.isEmpty(q);q++)if(!(U.sCount[q]-U.blkIndent>3||U.sCount[q]<0)){for(V=!1,O=0,H=ee.length;O<H;O++)if(ee[O](U,q,K,!0)){V=!0;break}if(V)break}return D=U.getLines(X,q,U.blkIndent,!1).trim(),U.line=q,(L=U.push("paragraph_open","p",1)).map=[X,U.line],(L=U.push("inline","",0)).content=D,L.map=[X,U.line],L.children=[],L=U.push("paragraph_close","p",-1),U.parentType=P,!0}},5886:(He,we,U)=>{"use strict";var X=U(3332).normalizeReference,D=U(3332).isSpace;He.exports=function(O,H,L,P){var q,ee,K,ne,se,J,W,ae,_e,Ee,te,oe,B,$,ie,pe,Be=0,Me=O.bMarks[H]+O.tShift[H],xe=O.eMarks[H],ue=H+1;if(O.sCount[H]-O.blkIndent>=4||91!==O.src.charCodeAt(Me))return!1;for(;++Me<xe;)if(93===O.src.charCodeAt(Me)&&92!==O.src.charCodeAt(Me-1)){if(Me+1===xe||58!==O.src.charCodeAt(Me+1))return!1;break}for(ne=O.lineMax,ie=O.md.block.ruler.getRules("reference"),Ee=O.parentType,O.parentType="reference";ue<ne&&!O.isEmpty(ue);ue++)if(!(O.sCount[ue]-O.blkIndent>3||O.sCount[ue]<0)){for($=!1,J=0,W=ie.length;J<W;J++)if(ie[J](O,ue,ne,!0)){$=!0;break}if($)break}for(xe=(B=O.getLines(H,ue,O.blkIndent,!1).trim()).length,Me=1;Me<xe;Me++){if(91===(q=B.charCodeAt(Me)))return!1;if(93===q){_e=Me;break}(10===q||92===q&&++Me<xe&&10===B.charCodeAt(Me))&&Be++}if(_e<0||58!==B.charCodeAt(_e+1))return!1;for(Me=_e+2;Me<xe;Me++)if(10===(q=B.charCodeAt(Me)))Be++;else if(!D(q))break;if(!(te=O.md.helpers.parseLinkDestination(B,Me,xe)).ok||(se=O.md.normalizeLink(te.str),!O.md.validateLink(se)))return!1;for(ee=Me=te.pos,K=Be+=te.lines,oe=Me;Me<xe;Me++)if(10===(q=B.charCodeAt(Me)))Be++;else if(!D(q))break;for(te=O.md.helpers.parseLinkTitle(B,Me,xe),Me<xe&&oe!==Me&&te.ok?(pe=te.str,Me=te.pos,Be+=te.lines):(pe="",Me=ee,Be=K);Me<xe&&(q=B.charCodeAt(Me),D(q));)Me++;if(Me<xe&&10!==B.charCodeAt(Me)&&pe)for(pe="",Me=ee,Be=K;Me<xe&&(q=B.charCodeAt(Me),D(q));)Me++;return!(Me<xe&&10!==B.charCodeAt(Me)||(ae=X(B.slice(1,_e)),!ae)||(P||(typeof O.env.references>"u"&&(O.env.references={}),typeof O.env.references[ae]>"u"&&(O.env.references[ae]={title:pe,href:se}),O.parentType=Ee,O.line=H+Be+1),0))}},1845:(He,we,U)=>{"use strict";var X=U(6263),D=U(3332).isSpace;function V(O,H,L,P){var q,ee,K,ne,se,J,W,ae;for(this.src=O,this.md=H,this.env=L,this.tokens=P,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0,this.result="",ae=!1,K=ne=J=W=0,se=(ee=this.src).length;ne<se;ne++){if(q=ee.charCodeAt(ne),!ae){if(D(q)){J++,9===q?W+=4-W%4:W++;continue}ae=!0}(10===q||ne===se-1)&&(10!==q&&ne++,this.bMarks.push(K),this.eMarks.push(ne),this.tShift.push(J),this.sCount.push(W),this.bsCount.push(0),ae=!1,J=0,W=0,K=ne+1)}this.bMarks.push(ee.length),this.eMarks.push(ee.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}V.prototype.push=function(O,H,L){var P=new X(O,H,L);return P.block=!0,L<0&&this.level--,P.level=this.level,L>0&&this.level++,this.tokens.push(P),P},V.prototype.isEmpty=function(H){return this.bMarks[H]+this.tShift[H]>=this.eMarks[H]},V.prototype.skipEmptyLines=function(H){for(var L=this.lineMax;H<L&&!(this.bMarks[H]+this.tShift[H]<this.eMarks[H]);H++);return H},V.prototype.skipSpaces=function(H){for(var L,P=this.src.length;H<P&&(L=this.src.charCodeAt(H),D(L));H++);return H},V.prototype.skipSpacesBack=function(H,L){if(H<=L)return H;for(;H>L;)if(!D(this.src.charCodeAt(--H)))return H+1;return H},V.prototype.skipChars=function(H,L){for(var P=this.src.length;H<P&&this.src.charCodeAt(H)===L;H++);return H},V.prototype.skipCharsBack=function(H,L,P){if(H<=P)return H;for(;H>P;)if(L!==this.src.charCodeAt(--H))return H+1;return H},V.prototype.getLines=function(H,L,P,q){var ee,K,ne,se,J,W,ae,_e=H;if(H>=L)return"";for(W=new Array(L-H),ee=0;_e<L;_e++,ee++){for(K=0,ae=se=this.bMarks[_e],J=_e+1<L||q?this.eMarks[_e]+1:this.eMarks[_e];se<J&&K<P;){if(ne=this.src.charCodeAt(se),D(ne))9===ne?K+=4-(K+this.bsCount[_e])%4:K++;else{if(!(se-ae<this.tShift[_e]))break;K++}se++}W[ee]=K>P?new Array(K-P+1).join(" ")+this.src.slice(se,J):this.src.slice(se,J)}return W.join("")},V.prototype.Token=X,He.exports=V},2281:(He,we,U)=>{"use strict";var X=U(3332).isSpace;function D(O,H){return O.src.slice(O.bMarks[H]+O.tShift[H],O.eMarks[H])}function V(O){var q,H=[],L=0,P=O.length,ee=!1,K=0,ne="";for(q=O.charCodeAt(L);L<P;)124===q&&(ee?(ne+=O.substring(K,L-1),K=L):(H.push(ne+O.substring(K,L)),ne="",K=L+1)),ee=92===q,L++,q=O.charCodeAt(L);return H.push(ne+O.substring(K)),H}He.exports=function(H,L,P,q){var ee,K,ne,se,J,W,ae,_e,Ee,te,oe,B,$,ie,pe,Be,Me,xe;if(L+2>P||H.sCount[W=L+1]<H.blkIndent||H.sCount[W]-H.blkIndent>=4||(ne=H.bMarks[W]+H.tShift[W])>=H.eMarks[W]||124!==(Me=H.src.charCodeAt(ne++))&&45!==Me&&58!==Me||ne>=H.eMarks[W]||124!==(xe=H.src.charCodeAt(ne++))&&45!==xe&&58!==xe&&!X(xe)||45===Me&&X(xe))return!1;for(;ne<H.eMarks[W];){if(124!==(ee=H.src.charCodeAt(ne))&&45!==ee&&58!==ee&&!X(ee))return!1;ne++}for(ae=(K=D(H,L+1)).split("|"),te=[],se=0;se<ae.length;se++){if(!(oe=ae[se].trim())){if(0===se||se===ae.length-1)continue;return!1}if(!/^:?-+:?$/.test(oe))return!1;58===oe.charCodeAt(oe.length-1)?te.push(58===oe.charCodeAt(0)?"center":"right"):58===oe.charCodeAt(0)?te.push("left"):te.push("")}if(-1===(K=D(H,L).trim()).indexOf("|")||H.sCount[L]-H.blkIndent>=4||((ae=V(K)).length&&""===ae[0]&&ae.shift(),ae.length&&""===ae[ae.length-1]&&ae.pop(),0===(_e=ae.length)||_e!==te.length))return!1;if(q)return!0;for(ie=H.parentType,H.parentType="table",Be=H.md.block.ruler.getRules("blockquote"),(Ee=H.push("table_open","table",1)).map=B=[L,0],(Ee=H.push("thead_open","thead",1)).map=[L,L+1],(Ee=H.push("tr_open","tr",1)).map=[L,L+1],se=0;se<ae.length;se++)Ee=H.push("th_open","th",1),te[se]&&(Ee.attrs=[["style","text-align:"+te[se]]]),(Ee=H.push("inline","",0)).content=ae[se].trim(),Ee.children=[],Ee=H.push("th_close","th",-1);for(Ee=H.push("tr_close","tr",-1),Ee=H.push("thead_close","thead",-1),W=L+2;W<P&&!(H.sCount[W]<H.blkIndent);W++){for(pe=!1,se=0,J=Be.length;se<J;se++)if(Be[se](H,W,P,!0)){pe=!0;break}if(pe||!(K=D(H,W).trim())||H.sCount[W]-H.blkIndent>=4)break;for((ae=V(K)).length&&""===ae[0]&&ae.shift(),ae.length&&""===ae[ae.length-1]&&ae.pop(),W===L+2&&((Ee=H.push("tbody_open","tbody",1)).map=$=[L+2,0]),(Ee=H.push("tr_open","tr",1)).map=[W,W+1],se=0;se<_e;se++)Ee=H.push("td_open","td",1),te[se]&&(Ee.attrs=[["style","text-align:"+te[se]]]),(Ee=H.push("inline","",0)).content=ae[se]?ae[se].trim():"",Ee.children=[],Ee=H.push("td_close","td",-1);Ee=H.push("tr_close","tr",-1)}return $&&(Ee=H.push("tbody_close","tbody",-1),$[1]=W),Ee=H.push("table_close","table",-1),B[1]=W,H.parentType=ie,H.line=W,!0}},8905:He=>{"use strict";He.exports=function(U){var X;U.inlineMode?((X=new U.Token("inline","",0)).content=U.src,X.map=[0,1],X.children=[],U.tokens.push(X)):U.md.block.parse(U.src,U.md,U.env,U.tokens)}},3591:He=>{"use strict";He.exports=function(U){var D,V,O,X=U.tokens;for(V=0,O=X.length;V<O;V++)"inline"===(D=X[V]).type&&U.md.inline.parse(D.content,U.md,U.env,D.children)}},9212:(He,we,U)=>{"use strict";var X=U(3332).arrayReplaceAt;He.exports=function(H){var L,P,q,ee,K,ne,se,J,W,ae,_e,Ee,te,B,$,pe,ie=H.tokens;if(H.md.options.linkify)for(P=0,q=ie.length;P<q;P++)if("inline"===ie[P].type&&H.md.linkify.pretest(ie[P].content))for(te=0,L=(ee=ie[P].children).length-1;L>=0;L--)if("link_close"!==(ne=ee[L]).type){if("html_inline"===ne.type&&(/^<a[>\s]/i.test(ne.content)&&te>0&&te--,/^<\/a\s*>/i.test(ne.content)&&te++),!(te>0)&&"text"===ne.type&&H.md.linkify.test(ne.content)){for(pe=H.md.linkify.match(W=ne.content),se=[],Ee=ne.level,_e=0,pe.length>0&&0===pe[0].index&&L>0&&"text_special"===ee[L-1].type&&(pe=pe.slice(1)),J=0;J<pe.length;J++)B=H.md.normalizeLink(pe[J].url),H.md.validateLink(B)&&($=pe[J].text,$=pe[J].schema?"mailto:"!==pe[J].schema||/^mailto:/i.test($)?H.md.normalizeLinkText($):H.md.normalizeLinkText("mailto:"+$).replace(/^mailto:/,""):H.md.normalizeLinkText("http://"+$).replace(/^http:\/\//,""),(ae=pe[J].index)>_e&&((K=new H.Token("text","",0)).content=W.slice(_e,ae),K.level=Ee,se.push(K)),(K=new H.Token("link_open","a",1)).attrs=[["href",B]],K.level=Ee++,K.markup="linkify",K.info="auto",se.push(K),(K=new H.Token("text","",0)).content=$,K.level=Ee,se.push(K),(K=new H.Token("link_close","a",-1)).level=--Ee,K.markup="linkify",K.info="auto",se.push(K),_e=pe[J].lastIndex);_e<W.length&&((K=new H.Token("text","",0)).content=W.slice(_e),K.level=Ee,se.push(K)),ie[P].children=ee=X(ee,L,se)}}else for(L--;ee[L].level!==ne.level&&"link_open"!==ee[L].type;)L--}},7398:He=>{"use strict";var we=/\r\n?|\n/g,U=/\0/g;He.exports=function(D){var V;V=(V=D.src.replace(we,"\n")).replace(U,"\ufffd"),D.src=V}},1982:He=>{"use strict";var we=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,U=/\((c|tm|r)\)/i,X=/\((c|tm|r)\)/gi,D={c:"\xa9",r:"\xae",tm:"\u2122"};function V(L,P){return D[P.toLowerCase()]}function O(L){var P,q,ee=0;for(P=L.length-1;P>=0;P--)"text"===(q=L[P]).type&&!ee&&(q.content=q.content.replace(X,V)),"link_open"===q.type&&"auto"===q.info&&ee--,"link_close"===q.type&&"auto"===q.info&&ee++}function H(L){var P,q,ee=0;for(P=L.length-1;P>=0;P--)"text"===(q=L[P]).type&&!ee&&we.test(q.content)&&(q.content=q.content.replace(/\+-/g,"\xb1").replace(/\.{2,}/g,"\u2026").replace(/([?!])\u2026/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/gm,"$1\u2014").replace(/(^|\s)--(?=\s|$)/gm,"$1\u2013").replace(/(^|[^-\s])--(?=[^-\s]|$)/gm,"$1\u2013")),"link_open"===q.type&&"auto"===q.info&&ee--,"link_close"===q.type&&"auto"===q.info&&ee++}He.exports=function(P){var q;if(P.md.options.typographer)for(q=P.tokens.length-1;q>=0;q--)"inline"===P.tokens[q].type&&(U.test(P.tokens[q].content)&&O(P.tokens[q].children),we.test(P.tokens[q].content)&&H(P.tokens[q].children))}},8157:(He,we,U)=>{"use strict";var X=U(3332).isWhiteSpace,D=U(3332).isPunctChar,V=U(3332).isMdAsciiPunct,O=/['"]/,H=/['"]/g;function P(ee,K,ne){return ee.slice(0,K)+ne+ee.slice(K+1)}function q(ee,K){var ne,se,J,W,ae,_e,Ee,te,oe,B,$,ie,pe,Be,Me,xe,ue,Pe,ot,Fe,Ye;for(ot=[],ne=0;ne<ee.length;ne++){for(se=ee[ne],Ee=ee[ne].level,ue=ot.length-1;ue>=0&&!(ot[ue].level<=Ee);ue--);if(ot.length=ue+1,"text"===se.type){ae=0,_e=(J=se.content).length;e:for(;ae<_e&&(H.lastIndex=ae,W=H.exec(J),W);){if(Me=xe=!0,ae=W.index+1,Pe="'"===W[0],oe=32,W.index-1>=0)oe=J.charCodeAt(W.index-1);else for(ue=ne-1;ue>=0&&"softbreak"!==ee[ue].type&&"hardbreak"!==ee[ue].type;ue--)if(ee[ue].content){oe=ee[ue].content.charCodeAt(ee[ue].content.length-1);break}if(B=32,ae<_e)B=J.charCodeAt(ae);else for(ue=ne+1;ue<ee.length&&"softbreak"!==ee[ue].type&&"hardbreak"!==ee[ue].type;ue++)if(ee[ue].content){B=ee[ue].content.charCodeAt(0);break}if($=V(oe)||D(String.fromCharCode(oe)),ie=V(B)||D(String.fromCharCode(B)),pe=X(oe),(Be=X(B))?Me=!1:ie&&(pe||$||(Me=!1)),pe?xe=!1:$&&(Be||ie||(xe=!1)),34===B&&'"'===W[0]&&oe>=48&&oe<=57&&(xe=Me=!1),Me&&xe&&(Me=$,xe=ie),Me||xe){if(xe)for(ue=ot.length-1;ue>=0&&(te=ot[ue],!(ot[ue].level<Ee));ue--)if(te.single===Pe&&ot[ue].level===Ee){te=ot[ue],Pe?(Fe=K.md.options.quotes[2],Ye=K.md.options.quotes[3]):(Fe=K.md.options.quotes[0],Ye=K.md.options.quotes[1]),se.content=P(se.content,W.index,Ye),ee[te.token].content=P(ee[te.token].content,te.pos,Fe),ae+=Ye.length-1,te.token===ne&&(ae+=Fe.length-1),_e=(J=se.content).length,ot.length=ue;continue e}Me?ot.push({token:ne,pos:W.index,single:Pe,level:Ee}):xe&&Pe&&(se.content=P(se.content,W.index,"\u2019"))}else Pe&&(se.content=P(se.content,W.index,"\u2019"))}}}}He.exports=function(K){var ne;if(K.md.options.typographer)for(ne=K.tokens.length-1;ne>=0;ne--)"inline"!==K.tokens[ne].type||!O.test(K.tokens[ne].content)||q(K.tokens[ne].children,K)}},1076:(He,we,U)=>{"use strict";var X=U(6263);function D(V,O,H){this.src=V,this.env=H,this.tokens=[],this.inlineMode=!1,this.md=O}D.prototype.Token=X,He.exports=D},2245:He=>{"use strict";He.exports=function(U){var X,D,V,O,H,L,P=U.tokens;for(X=0,D=P.length;X<D;X++)if("inline"===P[X].type){for(H=(V=P[X].children).length,O=0;O<H;O++)"text_special"===V[O].type&&(V[O].type="text");for(O=L=0;O<H;O++)"text"===V[O].type&&O+1<H&&"text"===V[O+1].type?V[O+1].content=V[O].content+V[O+1].content:(O!==L&&(V[L]=V[O]),L++);O!==L&&(V.length=L)}}},6973:He=>{"use strict";var we=/^([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,U=/^([a-zA-Z][a-zA-Z0-9+.\-]{1,31}):([^<>\x00-\x20]*)$/;He.exports=function(D,V){var O,H,L,P,q,ee,K=D.pos;if(60!==D.src.charCodeAt(K))return!1;for(q=D.pos,ee=D.posMax;;){if(++K>=ee||60===(P=D.src.charCodeAt(K)))return!1;if(62===P)break}return O=D.src.slice(q+1,K),U.test(O)?(H=D.md.normalizeLink(O),!!D.md.validateLink(H)&&(V||((L=D.push("link_open","a",1)).attrs=[["href",H]],L.markup="autolink",L.info="auto",(L=D.push("text","",0)).content=D.md.normalizeLinkText(O),(L=D.push("link_close","a",-1)).markup="autolink",L.info="auto"),D.pos+=O.length+2,!0)):!!we.test(O)&&(H=D.md.normalizeLink("mailto:"+O),!!D.md.validateLink(H)&&(V||((L=D.push("link_open","a",1)).attrs=[["href",H]],L.markup="autolink",L.info="auto",(L=D.push("text","",0)).content=D.md.normalizeLinkText(O),(L=D.push("link_close","a",-1)).markup="autolink",L.info="auto"),D.pos+=O.length+2,!0))}},415:He=>{"use strict";He.exports=function(U,X){var D,V,O,H,L,P,q,ee,K=U.pos;if(96!==U.src.charCodeAt(K))return!1;for(D=K,K++,V=U.posMax;K<V&&96===U.src.charCodeAt(K);)K++;if(q=(O=U.src.slice(D,K)).length,U.backticksScanned&&(U.backticks[q]||0)<=D)return X||(U.pending+=O),U.pos+=q,!0;for(L=P=K;-1!==(L=U.src.indexOf("`",P));){for(P=L+1;P<V&&96===U.src.charCodeAt(P);)P++;if((ee=P-L)===q)return X||((H=U.push("code_inline","code",0)).markup=O,H.content=U.src.slice(K,L).replace(/\n/g," ").replace(/^ (.+) $/,"$1")),U.pos=P,!0;U.backticks[ee]=L}return U.backticksScanned=!0,X||(U.pending+=O),U.pos+=q,!0}},9269:He=>{"use strict";function we(U,X){var D,V,O,H,L,P,q,ee,K={},ne=X.length;if(ne){var se=0,J=-2,W=[];for(D=0;D<ne;D++)if(O=X[D],W.push(0),(X[se].marker!==O.marker||J!==O.token-1)&&(se=D),J=O.token,O.length=O.length||0,O.close){for(K.hasOwnProperty(O.marker)||(K[O.marker]=[-1,-1,-1,-1,-1,-1]),L=K[O.marker][(O.open?3:0)+O.length%3],P=V=se-W[se]-1;V>L;V-=W[V]+1)if((H=X[V]).marker===O.marker&&H.open&&H.end<0&&(q=!1,(H.close||O.open)&&(H.length+O.length)%3==0&&(H.length%3!=0||O.length%3!=0)&&(q=!0),!q)){W[D]=D-V+(ee=V>0&&!X[V-1].open?W[V-1]+1:0),W[V]=ee,O.open=!1,H.end=D,H.close=!1,P=-1,J=-2;break}-1!==P&&(K[O.marker][(O.open?3:0)+(O.length||0)%3]=P)}}}He.exports=function(X){var D,V=X.tokens_meta,O=X.tokens_meta.length;for(we(0,X.delimiters),D=0;D<O;D++)V[D]&&V[D].delimiters&&we(0,V[D].delimiters)}},425:He=>{"use strict";function we(U,X){var D,V,O,H,L,P;for(D=X.length-1;D>=0;D--)(95===(V=X[D]).marker||42===V.marker)&&-1!==V.end&&(O=X[V.end],P=D>0&&X[D-1].end===V.end+1&&X[D-1].marker===V.marker&&X[D-1].token===V.token-1&&X[V.end+1].token===O.token+1,L=String.fromCharCode(V.marker),(H=U.tokens[V.token]).type=P?"strong_open":"em_open",H.tag=P?"strong":"em",H.nesting=1,H.markup=P?L+L:L,H.content="",(H=U.tokens[O.token]).type=P?"strong_close":"em_close",H.tag=P?"strong":"em",H.nesting=-1,H.markup=P?L+L:L,H.content="",P&&(U.tokens[X[D-1].token].content="",U.tokens[X[V.end+1].token].content="",D--))}He.exports.w=function(X,D){var V,O,P=X.src.charCodeAt(X.pos);if(D||95!==P&&42!==P)return!1;for(O=X.scanDelims(X.pos,42===P),V=0;V<O.length;V++)X.push("text","",0).content=String.fromCharCode(P),X.delimiters.push({marker:P,length:O.length,token:X.tokens.length-1,end:-1,open:O.can_open,close:O.can_close});return X.pos+=O.length,!0},He.exports.g=function(X){var D,V=X.tokens_meta,O=X.tokens_meta.length;for(we(X,X.delimiters),D=0;D<O;D++)V[D]&&V[D].delimiters&&we(X,V[D].delimiters)}},3559:(He,we,U)=>{"use strict";var X=U(6798),D=U(3332).has,V=U(3332).isValidEntityCode,O=U(3332).fromCodePoint,H=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,L=/^&([a-z][a-z0-9]{1,31});/i;He.exports=function(q,ee){var ne,se,J,W=q.pos,ae=q.posMax;if(38!==q.src.charCodeAt(W)||W+1>=ae)return!1;if(35===q.src.charCodeAt(W+1)){if(se=q.src.slice(W).match(H))return ee||(ne="x"===se[1][0].toLowerCase()?parseInt(se[1].slice(1),16):parseInt(se[1],10),(J=q.push("text_special","",0)).content=V(ne)?O(ne):O(65533),J.markup=se[0],J.info="entity"),q.pos+=se[0].length,!0}else if((se=q.src.slice(W).match(L))&&D(X,se[1]))return ee||((J=q.push("text_special","",0)).content=X[se[1]],J.markup=se[0],J.info="entity"),q.pos+=se[0].length,!0;return!1}},8763:(He,we,U)=>{"use strict";for(var X=U(3332).isSpace,D=[],V=0;V<256;V++)D.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(O){D[O.charCodeAt(0)]=1}),He.exports=function(H,L){var P,q,ee,K,ne,se=H.pos,J=H.posMax;if(92!==H.src.charCodeAt(se)||++se>=J)return!1;if(10===(P=H.src.charCodeAt(se))){for(L||H.push("hardbreak","br",0),se++;se<J&&(P=H.src.charCodeAt(se),X(P));)se++;return H.pos=se,!0}return K=H.src[se],P>=55296&&P<=56319&&se+1<J&&(q=H.src.charCodeAt(se+1))>=56320&&q<=57343&&(K+=H.src[se+1],se++),ee="\\"+K,L||((ne=H.push("text_special","",0)).content=P<256&&0!==D[P]?K:ee,ne.markup=ee,ne.info="escape"),H.pos=se+1,!0}},5767:He=>{"use strict";He.exports=function(U){var X,D,V=0,O=U.tokens,H=U.tokens.length;for(X=D=0;X<H;X++)O[X].nesting<0&&V--,O[X].level=V,O[X].nesting>0&&V++,"text"===O[X].type&&X+1<H&&"text"===O[X+1].type?O[X+1].content=O[X].content+O[X+1].content:(X!==D&&(O[D]=O[X]),D++);X!==D&&(O.length=D)}},3722:(He,we,U)=>{"use strict";var X=U(3266).n;He.exports=function(L,P){var q,ee,K,ne,se=L.pos;return!(!L.md.options.html||(K=L.posMax,60!==L.src.charCodeAt(se)||se+2>=K)||(q=L.src.charCodeAt(se+1),33!==q&&63!==q&&47!==q&&!function O(H){var L=32|H;return L>=97&&L<=122}(q))||(ee=L.src.slice(se).match(X),!ee)||(P||((ne=L.push("html_inline","",0)).content=L.src.slice(se,se+ee[0].length),function D(H){return/^<a[>\s]/i.test(H)}(ne.content)&&L.linkLevel++,function V(H){return/^<\/a\s*>/i.test(H)}(ne.content)&&L.linkLevel--),L.pos+=ee[0].length,0))}},7936:(He,we,U)=>{"use strict";var X=U(3332).normalizeReference,D=U(3332).isSpace;He.exports=function(O,H){var L,P,q,ee,K,ne,se,J,W,ae,_e,Ee,te,oe="",B=O.pos,$=O.posMax;if(33!==O.src.charCodeAt(O.pos)||91!==O.src.charCodeAt(O.pos+1)||(ne=O.pos+2,(K=O.md.helpers.parseLinkLabel(O,O.pos+1,!1))<0))return!1;if((se=K+1)<$&&40===O.src.charCodeAt(se)){for(se++;se<$&&(P=O.src.charCodeAt(se),D(P)||10===P);se++);if(se>=$)return!1;for(te=se,(W=O.md.helpers.parseLinkDestination(O.src,se,O.posMax)).ok&&(oe=O.md.normalizeLink(W.str),O.md.validateLink(oe)?se=W.pos:oe=""),te=se;se<$&&(P=O.src.charCodeAt(se),D(P)||10===P);se++);if(W=O.md.helpers.parseLinkTitle(O.src,se,O.posMax),se<$&&te!==se&&W.ok)for(ae=W.str,se=W.pos;se<$&&(P=O.src.charCodeAt(se),D(P)||10===P);se++);else ae="";if(se>=$||41!==O.src.charCodeAt(se))return O.pos=B,!1;se++}else{if(typeof O.env.references>"u")return!1;if(se<$&&91===O.src.charCodeAt(se)?(te=se+1,(se=O.md.helpers.parseLinkLabel(O,se))>=0?ee=O.src.slice(te,se++):se=K+1):se=K+1,ee||(ee=O.src.slice(ne,K)),!(J=O.env.references[X(ee)]))return O.pos=B,!1;oe=J.href,ae=J.title}return H||(q=O.src.slice(ne,K),O.md.inline.parse(q,O.md,O.env,Ee=[]),(_e=O.push("image","img",0)).attrs=L=[["src",oe],["alt",""]],_e.children=Ee,_e.content=q,ae&&L.push(["title",ae])),O.pos=se,O.posMax=$,!0}},7219:(He,we,U)=>{"use strict";var X=U(3332).normalizeReference,D=U(3332).isSpace;He.exports=function(O,H){var L,P,q,ee,K,ne,se,J,ae="",_e="",Ee=O.pos,te=O.posMax,oe=O.pos,B=!0;if(91!==O.src.charCodeAt(O.pos)||(K=O.pos+1,(ee=O.md.helpers.parseLinkLabel(O,O.pos,!0))<0))return!1;if((ne=ee+1)<te&&40===O.src.charCodeAt(ne)){for(B=!1,ne++;ne<te&&(P=O.src.charCodeAt(ne),D(P)||10===P);ne++);if(ne>=te)return!1;if(oe=ne,(se=O.md.helpers.parseLinkDestination(O.src,ne,O.posMax)).ok){for(ae=O.md.normalizeLink(se.str),O.md.validateLink(ae)?ne=se.pos:ae="",oe=ne;ne<te&&(P=O.src.charCodeAt(ne),D(P)||10===P);ne++);if(se=O.md.helpers.parseLinkTitle(O.src,ne,O.posMax),ne<te&&oe!==ne&&se.ok)for(_e=se.str,ne=se.pos;ne<te&&(P=O.src.charCodeAt(ne),D(P)||10===P);ne++);}(ne>=te||41!==O.src.charCodeAt(ne))&&(B=!0),ne++}if(B){if(typeof O.env.references>"u")return!1;if(ne<te&&91===O.src.charCodeAt(ne)?(oe=ne+1,(ne=O.md.helpers.parseLinkLabel(O,ne))>=0?q=O.src.slice(oe,ne++):ne=ee+1):ne=ee+1,q||(q=O.src.slice(K,ee)),!(J=O.env.references[X(q)]))return O.pos=Ee,!1;ae=J.href,_e=J.title}return H||(O.pos=K,O.posMax=ee,O.push("link_open","a",1).attrs=L=[["href",ae]],_e&&L.push(["title",_e]),O.linkLevel++,O.md.inline.tokenize(O),O.linkLevel--,O.push("link_close","a",-1)),O.pos=ne,O.posMax=te,!0}},6234:He=>{"use strict";var we=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;He.exports=function(X,D){var V,O,H,L,P,q,ee,K;return!(!X.md.options.linkify||X.linkLevel>0||(V=X.pos,O=X.posMax,V+3>O)||58!==X.src.charCodeAt(V)||47!==X.src.charCodeAt(V+1)||47!==X.src.charCodeAt(V+2)||(H=X.pending.match(we),!H)||(L=H[1],P=X.md.linkify.matchAtStart(X.src.slice(V-L.length)),!P)||(q=P.url,q=q.replace(/\*+$/,""),ee=X.md.normalizeLink(q),!X.md.validateLink(ee))||(D||(X.pending=X.pending.slice(0,-L.length),(K=X.push("link_open","a",1)).attrs=[["href",ee]],K.markup="linkify",K.info="auto",(K=X.push("text","",0)).content=X.md.normalizeLinkText(q),(K=X.push("link_close","a",-1)).markup="linkify",K.info="auto"),X.pos+=q.length-L.length,0))}},2921:(He,we,U)=>{"use strict";var X=U(3332).isSpace;He.exports=function(V,O){var H,L,P,q=V.pos;if(10!==V.src.charCodeAt(q))return!1;if(H=V.pending.length-1,L=V.posMax,!O)if(H>=0&&32===V.pending.charCodeAt(H))if(H>=1&&32===V.pending.charCodeAt(H-1)){for(P=H-1;P>=1&&32===V.pending.charCodeAt(P-1);)P--;V.pending=V.pending.slice(0,P),V.push("hardbreak","br",0)}else V.pending=V.pending.slice(0,-1),V.push("softbreak","br",0);else V.push("softbreak","br",0);for(q++;q<L&&X(V.src.charCodeAt(q));)q++;return V.pos=q,!0}},630:(He,we,U)=>{"use strict";var X=U(6263),D=U(3332).isWhiteSpace,V=U(3332).isPunctChar,O=U(3332).isMdAsciiPunct;function H(L,P,q,ee){this.src=L,this.env=q,this.md=P,this.tokens=ee,this.tokens_meta=Array(ee.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}H.prototype.pushPending=function(){var L=new X("text","",0);return L.content=this.pending,L.level=this.pendingLevel,this.tokens.push(L),this.pending="",L},H.prototype.push=function(L,P,q){this.pending&&this.pushPending();var ee=new X(L,P,q),K=null;return q<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),ee.level=this.level,q>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],K={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(ee),this.tokens_meta.push(K),ee},H.prototype.scanDelims=function(L,P){var ee,K,ne,se,J,W,ae,_e,Ee,q=L,te=!0,oe=!0,B=this.posMax,$=this.src.charCodeAt(L);for(ee=L>0?this.src.charCodeAt(L-1):32;q<B&&this.src.charCodeAt(q)===$;)q++;return ne=q-L,K=q<B?this.src.charCodeAt(q):32,ae=O(ee)||V(String.fromCharCode(ee)),Ee=O(K)||V(String.fromCharCode(K)),W=D(ee),(_e=D(K))?te=!1:Ee&&(W||ae||(te=!1)),W?oe=!1:ae&&(_e||Ee||(oe=!1)),P?(se=te,J=oe):(se=te&&(!oe||ae),J=oe&&(!te||Ee)),{can_open:se,can_close:J,length:ne}},H.prototype.Token=X,He.exports=H},8165:He=>{"use strict";function we(U,X){var D,V,O,H,L,P=[],q=X.length;for(D=0;D<q;D++)126===(O=X[D]).marker&&-1!==O.end&&(H=X[O.end],(L=U.tokens[O.token]).type="s_open",L.tag="s",L.nesting=1,L.markup="~~",L.content="",(L=U.tokens[H.token]).type="s_close",L.tag="s",L.nesting=-1,L.markup="~~",L.content="","text"===U.tokens[H.token-1].type&&"~"===U.tokens[H.token-1].content&&P.push(H.token-1));for(;P.length;){for(V=(D=P.pop())+1;V<U.tokens.length&&"s_close"===U.tokens[V].type;)V++;D!==--V&&(L=U.tokens[V],U.tokens[V]=U.tokens[D],U.tokens[D]=L)}}He.exports.w=function(X,D){var V,O,L,P,ee=X.src.charCodeAt(X.pos);if(D||126!==ee||(L=(O=X.scanDelims(X.pos,!0)).length,P=String.fromCharCode(ee),L<2))return!1;for(L%2&&(X.push("text","",0).content=P,L--),V=0;V<L;V+=2)X.push("text","",0).content=P+P,X.delimiters.push({marker:ee,length:0,token:X.tokens.length-1,end:-1,open:O.can_open,close:O.can_close});return X.pos+=O.length,!0},He.exports.g=function(X){var D,V=X.tokens_meta,O=X.tokens_meta.length;for(we(X,X.delimiters),D=0;D<O;D++)V[D]&&V[D].delimiters&&we(X,V[D].delimiters)}},1767:He=>{"use strict";function we(U){switch(U){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}He.exports=function(X,D){for(var V=X.pos;V<X.posMax&&!we(X.src.charCodeAt(V));)V++;return V!==X.pos&&(D||(X.pending+=X.src.slice(X.pos,V)),X.pos=V,!0)}},6263:He=>{"use strict";function we(U,X,D){this.type=U,this.tag=X,this.attrs=null,this.map=null,this.nesting=D,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}we.prototype.attrIndex=function(X){var D,V,O;if(!this.attrs)return-1;for(V=0,O=(D=this.attrs).length;V<O;V++)if(D[V][0]===X)return V;return-1},we.prototype.attrPush=function(X){this.attrs?this.attrs.push(X):this.attrs=[X]},we.prototype.attrSet=function(X,D){var V=this.attrIndex(X),O=[X,D];V<0?this.attrPush(O):this.attrs[V]=O},we.prototype.attrGet=function(X){var D=this.attrIndex(X),V=null;return D>=0&&(V=this.attrs[D][1]),V},we.prototype.attrJoin=function(X,D){var V=this.attrIndex(X);V<0?this.attrPush([X,D]):this.attrs[V][1]=this.attrs[V][1]+" "+D},He.exports=we},9801:He=>{"use strict";var we={};function X(D,V){var O;return"string"!=typeof V&&(V=X.defaultChars),O=function U(D){var V,O,H=we[D];if(H)return H;for(H=we[D]=[],V=0;V<128;V++)O=String.fromCharCode(V),H.push(O);for(V=0;V<D.length;V++)H[O=D.charCodeAt(V)]="%"+("0"+O.toString(16).toUpperCase()).slice(-2);return H}(V),D.replace(/(%[a-f0-9]{2})+/gi,function(H){var L,P,q,ee,K,ne,se,J="";for(L=0,P=H.length;L<P;L+=3)(q=parseInt(H.slice(L+1,L+3),16))<128?J+=O[q]:192==(224&q)&&L+3<P&&128==(192&(ee=parseInt(H.slice(L+4,L+6),16)))?(J+=(se=q<<6&1984|63&ee)<128?"\ufffd\ufffd":String.fromCharCode(se),L+=3):224==(240&q)&&L+6<P&&(ee=parseInt(H.slice(L+4,L+6),16),K=parseInt(H.slice(L+7,L+9),16),128==(192&ee)&&128==(192&K))?(J+=(se=q<<12&61440|ee<<6&4032|63&K)<2048||se>=55296&&se<=57343?"\ufffd\ufffd\ufffd":String.fromCharCode(se),L+=6):240==(248&q)&&L+9<P&&(ee=parseInt(H.slice(L+4,L+6),16),K=parseInt(H.slice(L+7,L+9),16),ne=parseInt(H.slice(L+10,L+12),16),128==(192&ee)&&128==(192&K)&&128==(192&ne))?((se=q<<18&1835008|ee<<12&258048|K<<6&4032|63&ne)<65536||se>1114111?J+="\ufffd\ufffd\ufffd\ufffd":(se-=65536,J+=String.fromCharCode(55296+(se>>10),56320+(1023&se))),L+=9):J+="\ufffd";return J})}X.defaultChars=";/?:@&=+$,#",X.componentChars="",He.exports=X},526:He=>{"use strict";var we={};function X(D,V,O){var H,L,P,q,ee,K="";for("string"!=typeof V&&(O=V,V=X.defaultChars),typeof O>"u"&&(O=!0),ee=function U(D){var V,O,H=we[D];if(H)return H;for(H=we[D]=[],V=0;V<128;V++)O=String.fromCharCode(V),/^[0-9a-z]$/i.test(O)?H.push(O):H.push("%"+("0"+V.toString(16).toUpperCase()).slice(-2));for(V=0;V<D.length;V++)H[D.charCodeAt(V)]=D[V];return H}(V),H=0,L=D.length;H<L;H++)if(P=D.charCodeAt(H),O&&37===P&&H+2<L&&/^[0-9a-f]{2}$/i.test(D.slice(H+1,H+3)))K+=D.slice(H,H+3),H+=2;else if(P<128)K+=ee[P];else if(P>=55296&&P<=57343){if(P>=55296&&P<=56319&&H+1<L&&(q=D.charCodeAt(H+1))>=56320&&q<=57343){K+=encodeURIComponent(D[H]+D[H+1]),H++;continue}K+="%EF%BF%BD"}else K+=encodeURIComponent(D[H]);return K}X.defaultChars=";/?:@&=+$,-_.!~*'()#",X.componentChars="-_.!~*'()",He.exports=X},381:He=>{"use strict";He.exports=function(U){var X="";return X+=U.protocol||"",X+=U.slashes?"//":"",X+=U.auth?U.auth+"@":"",U.hostname&&-1!==U.hostname.indexOf(":")?X+="["+U.hostname+"]":X+=U.hostname||"",X+=U.port?":"+U.port:"",X+=U.pathname||"",(X+=U.search||"")+(U.hash||"")}},7214:(He,we,U)=>{"use strict";He.exports.encode=U(526),He.exports.decode=U(9801),He.exports.format=U(381),He.exports.parse=U(3850)},3850:He=>{"use strict";function we(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}var U=/^([a-z0-9.+-]+:)/i,X=/:[0-9]*$/,D=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,O=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),H=["'"].concat(O),L=["%","/","?",";","#"].concat(H),P=["/","?","#"],ee=/^[+a-z0-9A-Z_-]{0,63}$/,K=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,ne={javascript:!0,"javascript:":!0},se={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};we.prototype.parse=function(W,ae){var _e,Ee,te,oe,B,$=W;if($=$.trim(),!ae&&1===W.split("#").length){var ie=D.exec($);if(ie)return this.pathname=ie[1],ie[2]&&(this.search=ie[2]),this}var pe=U.exec($);if(pe&&(te=(pe=pe[0]).toLowerCase(),this.protocol=pe,$=$.substr(pe.length)),(ae||pe||$.match(/^\/\/[^@\/]+@[^@\/]+/))&&(B="//"===$.substr(0,2))&&!(pe&&ne[pe])&&($=$.substr(2),this.slashes=!0),!ne[pe]&&(B||pe&&!se[pe])){var Me,xe,Be=-1;for(_e=0;_e<P.length;_e++)-1!==(oe=$.indexOf(P[_e]))&&(-1===Be||oe<Be)&&(Be=oe);for(-1!==(xe=-1===Be?$.lastIndexOf("@"):$.lastIndexOf("@",Be))&&(Me=$.slice(0,xe),$=$.slice(xe+1),this.auth=Me),Be=-1,_e=0;_e<L.length;_e++)-1!==(oe=$.indexOf(L[_e]))&&(-1===Be||oe<Be)&&(Be=oe);-1===Be&&(Be=$.length),":"===$[Be-1]&&Be--;var ue=$.slice(0,Be);$=$.slice(Be),this.parseHost(ue),this.hostname=this.hostname||"";var Pe="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!Pe){var ot=this.hostname.split(/\./);for(_e=0,Ee=ot.length;_e<Ee;_e++){var Fe=ot[_e];if(Fe&&!Fe.match(ee)){for(var Ye="",lt=0,vt=Fe.length;lt<vt;lt++)Fe.charCodeAt(lt)>127?Ye+="x":Ye+=Fe[lt];if(!Ye.match(ee)){var vn=ot.slice(0,_e),Ne=ot.slice(_e+1),ht=Fe.match(K);ht&&(vn.push(ht[1]),Ne.unshift(ht[2])),Ne.length&&($=Ne.join(".")+$),this.hostname=vn.join(".");break}}}}this.hostname.length>255&&(this.hostname=""),Pe&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}var rt=$.indexOf("#");-1!==rt&&(this.hash=$.substr(rt),$=$.slice(0,rt));var Ge=$.indexOf("?");return-1!==Ge&&(this.search=$.substr(Ge),$=$.slice(0,Ge)),$&&(this.pathname=$),se[te]&&this.hostname&&!this.pathname&&(this.pathname=""),this},we.prototype.parseHost=function(W){var ae=X.exec(W);ae&&(":"!==(ae=ae[0])&&(this.port=ae.substr(1)),W=W.substr(0,W.length-ae.length)),W&&(this.hostname=W)},He.exports=function J(W,ae){if(W&&W instanceof we)return W;var _e=new we;return _e.parse(W,ae),_e}},4879:(He,we,U)=>{"use strict";U.r(we),U.d(we,{decode:()=>Me,default:()=>Fe,encode:()=>xe,toASCII:()=>Pe,toUnicode:()=>ue,ucs2decode:()=>B,ucs2encode:()=>$});const X=2147483647,D=36,K=/^xn--/,ne=/[^\0-\x7E]/,se=/[\x2E\u3002\uFF0E\uFF61]/g,J={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},ae=Math.floor,_e=String.fromCharCode;function Ee(Ye){throw new RangeError(J[Ye])}function oe(Ye,lt){const vt=Ye.split("@");let vn="";vt.length>1&&(vn=vt[0]+"@",Ye=vt[1]);const ht=function te(Ye,lt){const vt=[];let vn=Ye.length;for(;vn--;)vt[vn]=lt(Ye[vn]);return vt}((Ye=Ye.replace(se,".")).split("."),lt).join(".");return vn+ht}function B(Ye){const lt=[];let vt=0;const vn=Ye.length;for(;vt<vn;){const Ne=Ye.charCodeAt(vt++);if(Ne>=55296&&Ne<=56319&&vt<vn){const ht=Ye.charCodeAt(vt++);56320==(64512&ht)?lt.push(((1023&Ne)<<10)+(1023&ht)+65536):(lt.push(Ne),vt--)}else lt.push(Ne)}return lt}const $=Ye=>String.fromCodePoint(...Ye),ie=function(Ye){return Ye-48<10?Ye-22:Ye-65<26?Ye-65:Ye-97<26?Ye-97:D},pe=function(Ye,lt){return Ye+22+75*(Ye<26)-((0!=lt)<<5)},Be=function(Ye,lt,vt){let vn=0;for(Ye=vt?ae(Ye/700):Ye>>1,Ye+=ae(Ye/lt);Ye>455;vn+=D)Ye=ae(Ye/35);return ae(vn+36*Ye/(Ye+38))},Me=function(Ye){const lt=[],vt=Ye.length;let vn=0,Ne=128,ht=72,rt=Ye.lastIndexOf("-");rt<0&&(rt=0);for(let Ge=0;Ge<rt;++Ge)Ye.charCodeAt(Ge)>=128&&Ee("not-basic"),lt.push(Ye.charCodeAt(Ge));for(let Ge=rt>0?rt+1:0;Ge<vt;){let _t=vn;for(let Lt=1,Ut=D;;Ut+=D){Ge>=vt&&Ee("invalid-input");const Oe=ie(Ye.charCodeAt(Ge++));(Oe>=D||Oe>ae((X-vn)/Lt))&&Ee("overflow"),vn+=Oe*Lt;const fe=Ut<=ht?1:Ut>=ht+26?26:Ut-ht;if(Oe<fe)break;const wt=D-fe;Lt>ae(X/wt)&&Ee("overflow"),Lt*=wt}const At=lt.length+1;ht=Be(vn-_t,At,0==_t),ae(vn/At)>X-Ne&&Ee("overflow"),Ne+=ae(vn/At),vn%=At,lt.splice(vn++,0,Ne)}return String.fromCodePoint(...lt)},xe=function(Ye){const lt=[];let vt=(Ye=B(Ye)).length,vn=128,Ne=0,ht=72;for(const _t of Ye)_t<128&&lt.push(_e(_t));let rt=lt.length,Ge=rt;for(rt&&lt.push("-");Ge<vt;){let _t=X;for(const Lt of Ye)Lt>=vn&&Lt<_t&&(_t=Lt);const At=Ge+1;_t-vn>ae((X-Ne)/At)&&Ee("overflow"),Ne+=(_t-vn)*At,vn=_t;for(const Lt of Ye)if(Lt<vn&&++Ne>X&&Ee("overflow"),Lt==vn){let Ut=Ne;for(let Oe=D;;Oe+=D){const fe=Oe<=ht?1:Oe>=ht+26?26:Oe-ht;if(Ut<fe)break;const wt=Ut-fe,kt=D-fe;lt.push(_e(pe(fe+wt%kt,0))),Ut=ae(wt/kt)}lt.push(_e(pe(Ut,0))),ht=Be(Ne,At,Ge==rt),Ne=0,++Ge}++Ne,++vn}return lt.join("")},ue=function(Ye){return oe(Ye,function(lt){return K.test(lt)?Me(lt.slice(4).toLowerCase()):lt})},Pe=function(Ye){return oe(Ye,function(lt){return ne.test(lt)?"xn--"+xe(lt):lt})},Fe={version:"2.1.0",ucs2:{decode:B,encode:$},decode:Me,encode:xe,toASCII:Pe,toUnicode:ue}},891:He=>{"use strict";var U={};function X(L,P,q){q||(q=Error);var K=function(ne){function se(J,W,ae){return ne.call(this,function ee(ne,se,J){return"string"==typeof P?P:P(ne,se,J)}(J,W,ae))||this}return function we(L,P){L.prototype=Object.create(P.prototype),L.prototype.constructor=L,L.__proto__=P}(se,ne),se}(q);K.prototype.name=q.name,K.prototype.code=L,U[L]=K}function D(L,P){if(Array.isArray(L)){var q=L.length;return L=L.map(function(ee){return String(ee)}),q>2?"one of ".concat(P," ").concat(L.slice(0,q-1).join(", "),", or ")+L[q-1]:2===q?"one of ".concat(P," ").concat(L[0]," or ").concat(L[1]):"of ".concat(P," ").concat(L[0])}return"of ".concat(P," ").concat(String(L))}X("ERR_INVALID_OPT_VALUE",function(L,P){return'The value "'+P+'" is invalid for option "'+L+'"'},TypeError),X("ERR_INVALID_ARG_TYPE",function(L,P,q){var ee,K;if("string"==typeof P&&function V(L,P,q){return L.substr(!q||q<0?0:+q,P.length)===P}(P,"not ")?(ee="must not be",P=P.replace(/^not /,"")):ee="must be",function O(L,P,q){return(void 0===q||q>L.length)&&(q=L.length),L.substring(q-P.length,q)===P}(L," argument"))K="The ".concat(L," ").concat(ee," ").concat(D(P,"type"));else{var ne=function H(L,P,q){return"number"!=typeof q&&(q=0),!(q+P.length>L.length)&&-1!==L.indexOf(P,q)}(L,".")?"property":"argument";K='The "'.concat(L,'" ').concat(ne," ").concat(ee," ").concat(D(P,"type"))}return K+". Received type ".concat(typeof q)},TypeError),X("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),X("ERR_METHOD_NOT_IMPLEMENTED",function(L){return"The "+L+" method is not implemented"}),X("ERR_STREAM_PREMATURE_CLOSE","Premature close"),X("ERR_STREAM_DESTROYED",function(L){return"Cannot call "+L+" after a stream was destroyed"}),X("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),X("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),X("ERR_STREAM_WRITE_AFTER_END","write after end"),X("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),X("ERR_UNKNOWN_ENCODING",function(L){return"Unknown encoding: "+L},TypeError),X("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),He.exports.q=U},1339:(He,we,U)=>{"use strict";var X=Object.keys||function(K){var ne=[];for(var se in K)ne.push(se);return ne};He.exports=P;var D=U(3154),V=U(520);U(3894)(P,D);for(var O=X(V.prototype),H=0;H<O.length;H++){var L=O[H];P.prototype[L]||(P.prototype[L]=V.prototype[L])}function P(K){if(!(this instanceof P))return new P(K);D.call(this,K),V.call(this,K),this.allowHalfOpen=!0,K&&(!1===K.readable&&(this.readable=!1),!1===K.writable&&(this.writable=!1),!1===K.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",q)))}function q(){this._writableState.ended||process.nextTick(ee,this)}function ee(K){K.end()}Object.defineProperty(P.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(P.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(P.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(P.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(ne){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=ne,this._writableState.destroyed=ne)}})},6071:(He,we,U)=>{"use strict";He.exports=D;var X=U(6025);function D(V){if(!(this instanceof D))return new D(V);X.call(this,V)}U(3894)(D,X),D.prototype._transform=function(V,O,H){H(null,V)}},3154:(He,we,U)=>{"use strict";var X;He.exports=ue,ue.ReadableState=xe,U(9069);var K,V=function(Ot,fn){return Ot.listeners(fn).length},O=U(4970),H=U(3172).Buffer,L=global.Uint8Array||function(){},ee=U(4616);K=ee&&ee.debuglog?ee.debuglog("stream"):function(){};var B,$,ie,ne=U(5019),se=U(1920),W=U(7102).getHighWaterMark,ae=U(891).q,_e=ae.ERR_INVALID_ARG_TYPE,Ee=ae.ERR_STREAM_PUSH_AFTER_EOF,te=ae.ERR_METHOD_NOT_IMPLEMENTED,oe=ae.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;U(3894)(ue,O);var pe=se.errorOrDestroy,Be=["error","close","destroy","pause","resume"];function xe(Et,Ot,fn){X=X||U(1339),"boolean"!=typeof fn&&(fn=Ot instanceof X),this.objectMode=!!(Et=Et||{}).objectMode,fn&&(this.objectMode=this.objectMode||!!Et.readableObjectMode),this.highWaterMark=W(this,Et,"readableHighWaterMark",fn),this.buffer=new ne,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==Et.emitClose,this.autoDestroy=!!Et.autoDestroy,this.destroyed=!1,this.defaultEncoding=Et.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Et.encoding&&(B||(B=U(3054).s),this.decoder=new B(Et.encoding),this.encoding=Et.encoding)}function ue(Et){if(X=X||U(1339),!(this instanceof ue))return new ue(Et);this._readableState=new xe(Et,this,this instanceof X),this.readable=!0,Et&&("function"==typeof Et.read&&(this._read=Et.read),"function"==typeof Et.destroy&&(this._destroy=Et.destroy)),O.call(this)}function Pe(Et,Ot,fn,et,Le){K("readableAddChunk",Ot);var Ht,ze=Et._readableState;if(null===Ot)ze.reading=!1,function vn(Et,Ot){if(K("onEofChunk"),!Ot.ended){if(Ot.decoder){var fn=Ot.decoder.end();fn&&fn.length&&(Ot.buffer.push(fn),Ot.length+=Ot.objectMode?1:fn.length)}Ot.ended=!0,Ot.sync?Ne(Et):(Ot.needReadable=!1,Ot.emittedReadable||(Ot.emittedReadable=!0,ht(Et)))}}(Et,ze);else if(Le||(Ht=function Fe(Et,Ot){var fn;return!function q(Et){return H.isBuffer(Et)||Et instanceof L}(Ot)&&"string"!=typeof Ot&&void 0!==Ot&&!Et.objectMode&&(fn=new _e("chunk",["string","Buffer","Uint8Array"],Ot)),fn}(ze,Ot)),Ht)pe(Et,Ht);else if(ze.objectMode||Ot&&Ot.length>0)if("string"!=typeof Ot&&!ze.objectMode&&Object.getPrototypeOf(Ot)!==H.prototype&&(Ot=function P(Et){return H.from(Et)}(Ot)),et)ze.endEmitted?pe(Et,new oe):ot(Et,ze,Ot,!0);else if(ze.ended)pe(Et,new Ee);else{if(ze.destroyed)return!1;ze.reading=!1,ze.decoder&&!fn?(Ot=ze.decoder.write(Ot),ze.objectMode||0!==Ot.length?ot(Et,ze,Ot,!1):rt(Et,ze)):ot(Et,ze,Ot,!1)}else et||(ze.reading=!1,rt(Et,ze));return!ze.ended&&(ze.length<ze.highWaterMark||0===ze.length)}function ot(Et,Ot,fn,et){Ot.flowing&&0===Ot.length&&!Ot.sync?(Ot.awaitDrain=0,Et.emit("data",fn)):(Ot.length+=Ot.objectMode?1:fn.length,et?Ot.buffer.unshift(fn):Ot.buffer.push(fn),Ot.needReadable&&Ne(Et)),rt(Et,Ot)}Object.defineProperty(ue.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(Ot){!this._readableState||(this._readableState.destroyed=Ot)}}),ue.prototype.destroy=se.destroy,ue.prototype._undestroy=se.undestroy,ue.prototype._destroy=function(Et,Ot){Ot(Et)},ue.prototype.push=function(Et,Ot){var et,fn=this._readableState;return fn.objectMode?et=!0:"string"==typeof Et&&((Ot=Ot||fn.defaultEncoding)!==fn.encoding&&(Et=H.from(Et,Ot),Ot=""),et=!0),Pe(this,Et,Ot,!1,et)},ue.prototype.unshift=function(Et){return Pe(this,Et,null,!0,!1)},ue.prototype.isPaused=function(){return!1===this._readableState.flowing},ue.prototype.setEncoding=function(Et){B||(B=U(3054).s);var Ot=new B(Et);this._readableState.decoder=Ot,this._readableState.encoding=this._readableState.decoder.encoding;for(var fn=this._readableState.buffer.head,et="";null!==fn;)et+=Ot.write(fn.data),fn=fn.next;return this._readableState.buffer.clear(),""!==et&&this._readableState.buffer.push(et),this._readableState.length=et.length,this};var Ye=1073741824;function vt(Et,Ot){return Et<=0||0===Ot.length&&Ot.ended?0:Ot.objectMode?1:Et!=Et?Ot.flowing&&Ot.length?Ot.buffer.head.data.length:Ot.length:(Et>Ot.highWaterMark&&(Ot.highWaterMark=function lt(Et){return Et>=Ye?Et=Ye:(Et--,Et|=Et>>>1,Et|=Et>>>2,Et|=Et>>>4,Et|=Et>>>8,Et|=Et>>>16,Et++),Et}(Et)),Et<=Ot.length?Et:Ot.ended?Ot.length:(Ot.needReadable=!0,0))}function Ne(Et){var Ot=Et._readableState;K("emitReadable",Ot.needReadable,Ot.emittedReadable),Ot.needReadable=!1,Ot.emittedReadable||(K("emitReadable",Ot.flowing),Ot.emittedReadable=!0,process.nextTick(ht,Et))}function ht(Et){var Ot=Et._readableState;K("emitReadable_",Ot.destroyed,Ot.length,Ot.ended),!Ot.destroyed&&(Ot.length||Ot.ended)&&(Et.emit("readable"),Ot.emittedReadable=!1),Ot.needReadable=!Ot.flowing&&!Ot.ended&&Ot.length<=Ot.highWaterMark,fe(Et)}function rt(Et,Ot){Ot.readingMore||(Ot.readingMore=!0,process.nextTick(Ge,Et,Ot))}function Ge(Et,Ot){for(;!Ot.reading&&!Ot.ended&&(Ot.length<Ot.highWaterMark||Ot.flowing&&0===Ot.length);){var fn=Ot.length;if(K("maybeReadMore read 0"),Et.read(0),fn===Ot.length)break}Ot.readingMore=!1}function At(Et){var Ot=Et._readableState;Ot.readableListening=Et.listenerCount("readable")>0,Ot.resumeScheduled&&!Ot.paused?Ot.flowing=!0:Et.listenerCount("data")>0&&Et.resume()}function Lt(Et){K("readable nexttick read 0"),Et.read(0)}function Oe(Et,Ot){K("resume",Ot.reading),Ot.reading||Et.read(0),Ot.resumeScheduled=!1,Et.emit("resume"),fe(Et),Ot.flowing&&!Ot.reading&&Et.read(0)}function fe(Et){var Ot=Et._readableState;for(K("flow",Ot.flowing);Ot.flowing&&null!==Et.read(););}function wt(Et,Ot){return 0===Ot.length?null:(Ot.objectMode?fn=Ot.buffer.shift():!Et||Et>=Ot.length?(fn=Ot.decoder?Ot.buffer.join(""):1===Ot.buffer.length?Ot.buffer.first():Ot.buffer.concat(Ot.length),Ot.buffer.clear()):fn=Ot.buffer.consume(Et,Ot.decoder),fn);var fn}function kt(Et){var Ot=Et._readableState;K("endReadable",Ot.endEmitted),Ot.endEmitted||(Ot.ended=!0,process.nextTick(Un,Ot,Et))}function Un(Et,Ot){if(K("endReadableNT",Et.endEmitted,Et.length),!Et.endEmitted&&0===Et.length&&(Et.endEmitted=!0,Ot.readable=!1,Ot.emit("end"),Et.autoDestroy)){var fn=Ot._writableState;(!fn||fn.autoDestroy&&fn.finished)&&Ot.destroy()}}function ri(Et,Ot){for(var fn=0,et=Et.length;fn<et;fn++)if(Et[fn]===Ot)return fn;return-1}ue.prototype.read=function(Et){K("read",Et),Et=parseInt(Et,10);var Ot=this._readableState,fn=Et;if(0!==Et&&(Ot.emittedReadable=!1),0===Et&&Ot.needReadable&&((0!==Ot.highWaterMark?Ot.length>=Ot.highWaterMark:Ot.length>0)||Ot.ended))return K("read: emitReadable",Ot.length,Ot.ended),0===Ot.length&&Ot.ended?kt(this):Ne(this),null;if(0===(Et=vt(Et,Ot))&&Ot.ended)return 0===Ot.length&&kt(this),null;var Le,et=Ot.needReadable;return K("need readable",et),(0===Ot.length||Ot.length-Et<Ot.highWaterMark)&&K("length less than watermark",et=!0),Ot.ended||Ot.reading?K("reading or ended",et=!1):et&&(K("do read"),Ot.reading=!0,Ot.sync=!0,0===Ot.length&&(Ot.needReadable=!0),this._read(Ot.highWaterMark),Ot.sync=!1,Ot.reading||(Et=vt(fn,Ot))),null===(Le=Et>0?wt(Et,Ot):null)?(Ot.needReadable=Ot.length<=Ot.highWaterMark,Et=0):(Ot.length-=Et,Ot.awaitDrain=0),0===Ot.length&&(Ot.ended||(Ot.needReadable=!0),fn!==Et&&Ot.ended&&kt(this)),null!==Le&&this.emit("data",Le),Le},ue.prototype._read=function(Et){pe(this,new te("_read()"))},ue.prototype.pipe=function(Et,Ot){var fn=this,et=this._readableState;switch(et.pipesCount){case 0:et.pipes=Et;break;case 1:et.pipes=[et.pipes,Et];break;default:et.pipes.push(Et)}et.pipesCount+=1,K("pipe count=%d opts=%j",et.pipesCount,Ot);var ze=Ot&&!1===Ot.end||Et===process.stdout||Et===process.stderr?il:yn;function yn(){K("onend"),Et.end()}et.endEmitted?process.nextTick(ze):fn.once("end",ze),Et.on("unpipe",function Ht($l,ql){K("onunpipe"),$l===fn&&ql&&!1===ql.hasUnpiped&&(ql.hasUnpiped=!0,function Cs(){K("cleanup"),Et.removeListener("close",ua),Et.removeListener("finish",sr),Et.removeListener("drain",ii),Et.removeListener("error",ws),Et.removeListener("unpipe",Ht),fn.removeListener("end",yn),fn.removeListener("end",il),fn.removeListener("data",lo),Li=!0,et.awaitDrain&&(!Et._writableState||Et._writableState.needDrain)&&ii()}())});var ii=function _t(Et){return function(){var fn=Et._readableState;K("pipeOnDrain",fn.awaitDrain),fn.awaitDrain&&fn.awaitDrain--,0===fn.awaitDrain&&V(Et,"data")&&(fn.flowing=!0,fe(Et))}}(fn);Et.on("drain",ii);var Li=!1;function lo($l){K("ondata");var ql=Et.write($l);K("dest.write",ql),!1===ql&&((1===et.pipesCount&&et.pipes===Et||et.pipesCount>1&&-1!==ri(et.pipes,Et))&&!Li&&(K("false write response, pause",et.awaitDrain),et.awaitDrain++),fn.pause())}function ws($l){K("onerror",$l),il(),Et.removeListener("error",ws),0===V(Et,"error")&&pe(Et,$l)}function ua(){Et.removeListener("finish",sr),il()}function sr(){K("onfinish"),Et.removeListener("close",ua),il()}function il(){K("unpipe"),fn.unpipe(Et)}return fn.on("data",lo),function Me(Et,Ot,fn){if("function"==typeof Et.prependListener)return Et.prependListener(Ot,fn);Et._events&&Et._events[Ot]?Array.isArray(Et._events[Ot])?Et._events[Ot].unshift(fn):Et._events[Ot]=[fn,Et._events[Ot]]:Et.on(Ot,fn)}(Et,"error",ws),Et.once("close",ua),Et.once("finish",sr),Et.emit("pipe",fn),et.flowing||(K("pipe resume"),fn.resume()),Et},ue.prototype.unpipe=function(Et){var Ot=this._readableState,fn={hasUnpiped:!1};if(0===Ot.pipesCount)return this;if(1===Ot.pipesCount)return Et&&Et!==Ot.pipes||(Et||(Et=Ot.pipes),Ot.pipes=null,Ot.pipesCount=0,Ot.flowing=!1,Et&&Et.emit("unpipe",this,fn)),this;if(!Et){var et=Ot.pipes,Le=Ot.pipesCount;Ot.pipes=null,Ot.pipesCount=0,Ot.flowing=!1;for(var ze=0;ze<Le;ze++)et[ze].emit("unpipe",this,{hasUnpiped:!1});return this}var Ht=ri(Ot.pipes,Et);return-1===Ht||(Ot.pipes.splice(Ht,1),Ot.pipesCount-=1,1===Ot.pipesCount&&(Ot.pipes=Ot.pipes[0]),Et.emit("unpipe",this,fn)),this},ue.prototype.addListener=ue.prototype.on=function(Et,Ot){var fn=O.prototype.on.call(this,Et,Ot),et=this._readableState;return"data"===Et?(et.readableListening=this.listenerCount("readable")>0,!1!==et.flowing&&this.resume()):"readable"===Et&&!et.endEmitted&&!et.readableListening&&(et.readableListening=et.needReadable=!0,et.flowing=!1,et.emittedReadable=!1,K("on readable",et.length,et.reading),et.length?Ne(this):et.reading||process.nextTick(Lt,this)),fn},ue.prototype.removeListener=function(Et,Ot){var fn=O.prototype.removeListener.call(this,Et,Ot);return"readable"===Et&&process.nextTick(At,this),fn},ue.prototype.removeAllListeners=function(Et){var Ot=O.prototype.removeAllListeners.apply(this,arguments);return("readable"===Et||void 0===Et)&&process.nextTick(At,this),Ot},ue.prototype.resume=function(){var Et=this._readableState;return Et.flowing||(K("resume"),Et.flowing=!Et.readableListening,function Ut(Et,Ot){Ot.resumeScheduled||(Ot.resumeScheduled=!0,process.nextTick(Oe,Et,Ot))}(this,Et)),Et.paused=!1,this},ue.prototype.pause=function(){return K("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(K("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},ue.prototype.wrap=function(Et){var Ot=this,fn=this._readableState,et=!1;for(var Le in Et.on("end",function(){if(K("wrapped end"),fn.decoder&&!fn.ended){var Ht=fn.decoder.end();Ht&&Ht.length&&Ot.push(Ht)}Ot.push(null)}),Et.on("data",function(Ht){K("wrapped data"),fn.decoder&&(Ht=fn.decoder.write(Ht)),fn.objectMode&&null==Ht||!(fn.objectMode||Ht&&Ht.length)||Ot.push(Ht)||(et=!0,Et.pause())}),Et)void 0===this[Le]&&"function"==typeof Et[Le]&&(this[Le]=function(yn){return function(){return Et[yn].apply(Et,arguments)}}(Le));for(var ze=0;ze<Be.length;ze++)Et.on(Be[ze],this.emit.bind(this,Be[ze]));return this._read=function(Ht){K("wrapped _read",Ht),et&&(et=!1,Et.resume())},this},"function"==typeof Symbol&&(ue.prototype[Symbol.asyncIterator]=function(){return void 0===$&&($=U(3872)),$(this)}),Object.defineProperty(ue.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(ue.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(ue.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(Ot){this._readableState&&(this._readableState.flowing=Ot)}}),ue._fromList=wt,Object.defineProperty(ue.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(ue.from=function(Et,Ot){return void 0===ie&&(ie=U(7412)),ie(ue,Et,Ot)})},6025:(He,we,U)=>{"use strict";He.exports=q;var X=U(891).q,D=X.ERR_METHOD_NOT_IMPLEMENTED,V=X.ERR_MULTIPLE_CALLBACK,O=X.ERR_TRANSFORM_ALREADY_TRANSFORMING,H=X.ERR_TRANSFORM_WITH_LENGTH_0,L=U(1339);function P(ne,se){var J=this._transformState;J.transforming=!1;var W=J.writecb;if(null===W)return this.emit("error",new V);J.writechunk=null,J.writecb=null,null!=se&&this.push(se),W(ne);var ae=this._readableState;ae.reading=!1,(ae.needReadable||ae.length<ae.highWaterMark)&&this._read(ae.highWaterMark)}function q(ne){if(!(this instanceof q))return new q(ne);L.call(this,ne),this._transformState={afterTransform:P.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,ne&&("function"==typeof ne.transform&&(this._transform=ne.transform),"function"==typeof ne.flush&&(this._flush=ne.flush)),this.on("prefinish",ee)}function ee(){var ne=this;"function"!=typeof this._flush||this._readableState.destroyed?K(this,null,null):this._flush(function(se,J){K(ne,se,J)})}function K(ne,se,J){if(se)return ne.emit("error",se);if(null!=J&&ne.push(J),ne._writableState.length)throw new H;if(ne._transformState.transforming)throw new O;return ne.push(null)}U(3894)(q,L),q.prototype.push=function(ne,se){return this._transformState.needTransform=!1,L.prototype.push.call(this,ne,se)},q.prototype._transform=function(ne,se,J){J(new D("_transform()"))},q.prototype._write=function(ne,se,J){var W=this._transformState;if(W.writecb=J,W.writechunk=ne,W.writeencoding=se,!W.transforming){var ae=this._readableState;(W.needTransform||ae.needReadable||ae.length<ae.highWaterMark)&&this._read(ae.highWaterMark)}},q.prototype._read=function(ne){var se=this._transformState;null===se.writechunk||se.transforming?se.needTransform=!0:(se.transforming=!0,this._transform(se.writechunk,se.writeencoding,se.afterTransform))},q.prototype._destroy=function(ne,se){L.prototype._destroy.call(this,ne,function(J){se(J)})}},520:(He,we,U)=>{"use strict";function D(fe){var wt=this;this.next=null,this.entry=null,this.finish=function(){!function Oe(fe,wt,kt){var Un=fe.entry;for(fe.entry=null;Un;){var ri=Un.callback;wt.pendingcb--,ri(kt),Un=Un.next}wt.corkedRequestsFree.next=fe}(wt,fe)}}var V;He.exports=xe,xe.WritableState=Be;var Me,O={deprecate:U(3532)},H=U(4970),L=U(3172).Buffer,P=global.Uint8Array||function(){},K=U(1920),se=U(7102).getHighWaterMark,J=U(891).q,W=J.ERR_INVALID_ARG_TYPE,ae=J.ERR_METHOD_NOT_IMPLEMENTED,_e=J.ERR_MULTIPLE_CALLBACK,Ee=J.ERR_STREAM_CANNOT_PIPE,te=J.ERR_STREAM_DESTROYED,oe=J.ERR_STREAM_NULL_VALUES,B=J.ERR_STREAM_WRITE_AFTER_END,$=J.ERR_UNKNOWN_ENCODING,ie=K.errorOrDestroy;function pe(){}function Be(fe,wt,kt){V=V||U(1339),"boolean"!=typeof kt&&(kt=wt instanceof V),this.objectMode=!!(fe=fe||{}).objectMode,kt&&(this.objectMode=this.objectMode||!!fe.writableObjectMode),this.highWaterMark=se(this,fe,"writableHighWaterMark",kt),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===fe.decodeStrings),this.defaultEncoding=fe.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(ri){!function vn(fe,wt){var kt=fe._writableState,Un=kt.sync,ri=kt.writecb;if("function"!=typeof ri)throw new _e;if(function vt(fe){fe.writing=!1,fe.writecb=null,fe.length-=fe.writelen,fe.writelen=0}(kt),wt)!function lt(fe,wt,kt,Un,ri){--wt.pendingcb,kt?(process.nextTick(ri,Un),process.nextTick(Lt,fe,wt),fe._writableState.errorEmitted=!0,ie(fe,Un)):(ri(Un),fe._writableState.errorEmitted=!0,ie(fe,Un),Lt(fe,wt))}(fe,kt,Un,wt,ri);else{var Et=Ge(kt)||fe.destroyed;!Et&&!kt.corked&&!kt.bufferProcessing&&kt.bufferedRequest&&rt(fe,kt),Un?process.nextTick(Ne,fe,kt,Et,ri):Ne(fe,kt,Et,ri)}}(wt,ri)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==fe.emitClose,this.autoDestroy=!!fe.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new D(this)}function xe(fe){var wt=this instanceof(V=V||U(1339));if(!wt&&!Me.call(xe,this))return new xe(fe);this._writableState=new Be(fe,this,wt),this.writable=!0,fe&&("function"==typeof fe.write&&(this._write=fe.write),"function"==typeof fe.writev&&(this._writev=fe.writev),"function"==typeof fe.destroy&&(this._destroy=fe.destroy),"function"==typeof fe.final&&(this._final=fe.final)),H.call(this)}function Ye(fe,wt,kt,Un,ri,Et,Ot){wt.writelen=Un,wt.writecb=Ot,wt.writing=!0,wt.sync=!0,wt.destroyed?wt.onwrite(new te("write")):kt?fe._writev(ri,wt.onwrite):fe._write(ri,Et,wt.onwrite),wt.sync=!1}function Ne(fe,wt,kt,Un){kt||function ht(fe,wt){0===wt.length&&wt.needDrain&&(wt.needDrain=!1,fe.emit("drain"))}(fe,wt),wt.pendingcb--,Un(),Lt(fe,wt)}function rt(fe,wt){wt.bufferProcessing=!0;var kt=wt.bufferedRequest;if(fe._writev&&kt&&kt.next){var ri=new Array(wt.bufferedRequestCount),Et=wt.corkedRequestsFree;Et.entry=kt;for(var Ot=0,fn=!0;kt;)ri[Ot]=kt,kt.isBuf||(fn=!1),kt=kt.next,Ot+=1;ri.allBuffers=fn,Ye(fe,wt,!0,wt.length,ri,"",Et.finish),wt.pendingcb++,wt.lastBufferedRequest=null,Et.next?(wt.corkedRequestsFree=Et.next,Et.next=null):wt.corkedRequestsFree=new D(wt),wt.bufferedRequestCount=0}else{for(;kt;){var et=kt.chunk;if(Ye(fe,wt,!1,wt.objectMode?1:et.length,et,kt.encoding,kt.callback),kt=kt.next,wt.bufferedRequestCount--,wt.writing)break}null===kt&&(wt.lastBufferedRequest=null)}wt.bufferedRequest=kt,wt.bufferProcessing=!1}function Ge(fe){return fe.ending&&0===fe.length&&null===fe.bufferedRequest&&!fe.finished&&!fe.writing}function _t(fe,wt){fe._final(function(kt){wt.pendingcb--,kt&&ie(fe,kt),wt.prefinished=!0,fe.emit("prefinish"),Lt(fe,wt)})}function Lt(fe,wt){var kt=Ge(wt);if(kt&&(function At(fe,wt){!wt.prefinished&&!wt.finalCalled&&("function"!=typeof fe._final||wt.destroyed?(wt.prefinished=!0,fe.emit("prefinish")):(wt.pendingcb++,wt.finalCalled=!0,process.nextTick(_t,fe,wt)))}(fe,wt),0===wt.pendingcb&&(wt.finished=!0,fe.emit("finish"),wt.autoDestroy))){var Un=fe._readableState;(!Un||Un.autoDestroy&&Un.endEmitted)&&fe.destroy()}return kt}U(3894)(xe,H),Be.prototype.getBuffer=function(){for(var wt=this.bufferedRequest,kt=[];wt;)kt.push(wt),wt=wt.next;return kt},function(){try{Object.defineProperty(Be.prototype,"buffer",{get:O.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(Me=Function.prototype[Symbol.hasInstance],Object.defineProperty(xe,Symbol.hasInstance,{value:function(wt){return!!Me.call(this,wt)||this===xe&&wt&&wt._writableState instanceof Be}})):Me=function(wt){return wt instanceof this},xe.prototype.pipe=function(){ie(this,new Ee)},xe.prototype.write=function(fe,wt,kt){var Un=this._writableState,ri=!1,Et=!Un.objectMode&&function ee(fe){return L.isBuffer(fe)||fe instanceof P}(fe);return Et&&!L.isBuffer(fe)&&(fe=function q(fe){return L.from(fe)}(fe)),"function"==typeof wt&&(kt=wt,wt=null),Et?wt="buffer":wt||(wt=Un.defaultEncoding),"function"!=typeof kt&&(kt=pe),Un.ending?function ue(fe,wt){var kt=new B;ie(fe,kt),process.nextTick(wt,kt)}(this,kt):(Et||function Pe(fe,wt,kt,Un){var ri;return null===kt?ri=new oe:"string"!=typeof kt&&!wt.objectMode&&(ri=new W("chunk",["string","Buffer"],kt)),!ri||(ie(fe,ri),process.nextTick(Un,ri),!1)}(this,Un,fe,kt))&&(Un.pendingcb++,ri=function Fe(fe,wt,kt,Un,ri,Et){if(!kt){var Ot=function ot(fe,wt,kt){return!fe.objectMode&&!1!==fe.decodeStrings&&"string"==typeof wt&&(wt=L.from(wt,kt)),wt}(wt,Un,ri);Un!==Ot&&(kt=!0,ri="buffer",Un=Ot)}var fn=wt.objectMode?1:Un.length;wt.length+=fn;var et=wt.length<wt.highWaterMark;if(et||(wt.needDrain=!0),wt.writing||wt.corked){var Le=wt.lastBufferedRequest;wt.lastBufferedRequest={chunk:Un,encoding:ri,isBuf:kt,callback:Et,next:null},Le?Le.next=wt.lastBufferedRequest:wt.bufferedRequest=wt.lastBufferedRequest,wt.bufferedRequestCount+=1}else Ye(fe,wt,!1,fn,Un,ri,Et);return et}(this,Un,Et,fe,wt,kt)),ri},xe.prototype.cork=function(){this._writableState.corked++},xe.prototype.uncork=function(){var fe=this._writableState;fe.corked&&(fe.corked--,!fe.writing&&!fe.corked&&!fe.bufferProcessing&&fe.bufferedRequest&&rt(this,fe))},xe.prototype.setDefaultEncoding=function(wt){if("string"==typeof wt&&(wt=wt.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((wt+"").toLowerCase())>-1))throw new $(wt);return this._writableState.defaultEncoding=wt,this},Object.defineProperty(xe.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(xe.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),xe.prototype._write=function(fe,wt,kt){kt(new ae("_write()"))},xe.prototype._writev=null,xe.prototype.end=function(fe,wt,kt){var Un=this._writableState;return"function"==typeof fe?(kt=fe,fe=null,wt=null):"function"==typeof wt&&(kt=wt,wt=null),null!=fe&&this.write(fe,wt),Un.corked&&(Un.corked=1,this.uncork()),Un.ending||function Ut(fe,wt,kt){wt.ending=!0,Lt(fe,wt),kt&&(wt.finished?process.nextTick(kt):fe.once("finish",kt)),wt.ended=!0,fe.writable=!1}(this,Un,kt),this},Object.defineProperty(xe.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(xe.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(wt){!this._writableState||(this._writableState.destroyed=wt)}}),xe.prototype.destroy=K.destroy,xe.prototype._undestroy=K.undestroy,xe.prototype._destroy=function(fe,wt){wt(fe)}},3872:(He,we,U)=>{"use strict";var X;function D(te,oe,B){return oe in te?Object.defineProperty(te,oe,{value:B,enumerable:!0,configurable:!0,writable:!0}):te[oe]=B,te}var V=U(7542),O=Symbol("lastResolve"),H=Symbol("lastReject"),L=Symbol("error"),P=Symbol("ended"),q=Symbol("lastPromise"),ee=Symbol("handlePromise"),K=Symbol("stream");function ne(te,oe){return{value:te,done:oe}}function se(te){var oe=te[O];if(null!==oe){var B=te[K].read();null!==B&&(te[q]=null,te[O]=null,te[H]=null,oe(ne(B,!1)))}}function J(te){process.nextTick(se,te)}var ae=Object.getPrototypeOf(function(){}),_e=Object.setPrototypeOf((D(X={get stream(){return this[K]},next:function(){var oe=this,B=this[L];if(null!==B)return Promise.reject(B);if(this[P])return Promise.resolve(ne(void 0,!0));if(this[K].destroyed)return new Promise(function(Be,Me){process.nextTick(function(){oe[L]?Me(oe[L]):Be(ne(void 0,!0))})});var ie,$=this[q];if($)ie=new Promise(function W(te,oe){return function(B,$){te.then(function(){oe[P]?B(ne(void 0,!0)):oe[ee](B,$)},$)}}($,this));else{var pe=this[K].read();if(null!==pe)return Promise.resolve(ne(pe,!1));ie=new Promise(this[ee])}return this[q]=ie,ie}},Symbol.asyncIterator,function(){return this}),D(X,"return",function(){var oe=this;return new Promise(function(B,$){oe[K].destroy(null,function(ie){ie?$(ie):B(ne(void 0,!0))})})}),X),ae);He.exports=function(oe){var B,$=Object.create(_e,(D(B={},K,{value:oe,writable:!0}),D(B,O,{value:null,writable:!0}),D(B,H,{value:null,writable:!0}),D(B,L,{value:null,writable:!0}),D(B,P,{value:oe._readableState.endEmitted,writable:!0}),D(B,ee,{value:function(pe,Be){var Me=$[K].read();Me?($[q]=null,$[O]=null,$[H]=null,pe(ne(Me,!1))):($[O]=pe,$[H]=Be)},writable:!0}),B));return $[q]=null,V(oe,function(ie){if(ie&&"ERR_STREAM_PREMATURE_CLOSE"!==ie.code){var pe=$[H];return null!==pe&&($[q]=null,$[O]=null,$[H]=null,pe(ie)),void($[L]=ie)}var Be=$[O];null!==Be&&($[q]=null,$[O]=null,$[H]=null,Be(ne(void 0,!0))),$[P]=!0}),oe.on("readable",J.bind(null,$)),$}},5019:(He,we,U)=>{"use strict";function X(J,W){var ae=Object.keys(J);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(J);W&&(_e=_e.filter(function(Ee){return Object.getOwnPropertyDescriptor(J,Ee).enumerable})),ae.push.apply(ae,_e)}return ae}function V(J,W,ae){return W in J?Object.defineProperty(J,W,{value:ae,enumerable:!0,configurable:!0,writable:!0}):J[W]=ae,J}function H(J,W){for(var ae=0;ae<W.length;ae++){var _e=W[ae];_e.enumerable=_e.enumerable||!1,_e.configurable=!0,"value"in _e&&(_e.writable=!0),Object.defineProperty(J,_e.key,_e)}}var q=U(3172).Buffer,K=U(2361).inspect,ne=K&&K.custom||"inspect";function se(J,W,ae){q.prototype.copy.call(J,W,ae)}He.exports=function(){function J(){(function O(J,W){if(!(J instanceof W))throw new TypeError("Cannot call a class as a function")})(this,J),this.head=null,this.tail=null,this.length=0}return function L(J,W,ae){W&&H(J.prototype,W),ae&&H(J,ae)}(J,[{key:"push",value:function(ae){var _e={data:ae,next:null};this.length>0?this.tail.next=_e:this.head=_e,this.tail=_e,++this.length}},{key:"unshift",value:function(ae){var _e={data:ae,next:this.head};0===this.length&&(this.tail=_e),this.head=_e,++this.length}},{key:"shift",value:function(){if(0!==this.length){var ae=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,ae}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(ae){if(0===this.length)return"";for(var _e=this.head,Ee=""+_e.data;_e=_e.next;)Ee+=ae+_e.data;return Ee}},{key:"concat",value:function(ae){if(0===this.length)return q.alloc(0);for(var _e=q.allocUnsafe(ae>>>0),Ee=this.head,te=0;Ee;)se(Ee.data,_e,te),te+=Ee.data.length,Ee=Ee.next;return _e}},{key:"consume",value:function(ae,_e){var Ee;return ae<this.head.data.length?(Ee=this.head.data.slice(0,ae),this.head.data=this.head.data.slice(ae)):Ee=ae===this.head.data.length?this.shift():_e?this._getString(ae):this._getBuffer(ae),Ee}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(ae){var _e=this.head,Ee=1,te=_e.data;for(ae-=te.length;_e=_e.next;){var oe=_e.data,B=ae>oe.length?oe.length:ae;if(te+=B===oe.length?oe:oe.slice(0,ae),0==(ae-=B)){B===oe.length?(++Ee,this.head=_e.next?_e.next:this.tail=null):(this.head=_e,_e.data=oe.slice(B));break}++Ee}return this.length-=Ee,te}},{key:"_getBuffer",value:function(ae){var _e=q.allocUnsafe(ae),Ee=this.head,te=1;for(Ee.data.copy(_e),ae-=Ee.data.length;Ee=Ee.next;){var oe=Ee.data,B=ae>oe.length?oe.length:ae;if(oe.copy(_e,_e.length-ae,0,B),0==(ae-=B)){B===oe.length?(++te,this.head=Ee.next?Ee.next:this.tail=null):(this.head=Ee,Ee.data=oe.slice(B));break}++te}return this.length-=te,_e}},{key:ne,value:function(ae,_e){return K(this,function D(J){for(var W=1;W<arguments.length;W++){var ae=null!=arguments[W]?arguments[W]:{};W%2?X(Object(ae),!0).forEach(function(_e){V(J,_e,ae[_e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(J,Object.getOwnPropertyDescriptors(ae)):X(Object(ae)).forEach(function(_e){Object.defineProperty(J,_e,Object.getOwnPropertyDescriptor(ae,_e))})}return J}({},_e,{depth:0,customInspect:!1}))}}]),J}()},1920:He=>{"use strict";function U(H,L){V(H,L),X(H)}function X(H){H._writableState&&!H._writableState.emitClose||H._readableState&&!H._readableState.emitClose||H.emit("close")}function V(H,L){H.emit("error",L)}He.exports={destroy:function we(H,L){var P=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(L?L(H):H&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(V,this,H)):process.nextTick(V,this,H)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(H||null,function(K){!L&&K?P._writableState?P._writableState.errorEmitted?process.nextTick(X,P):(P._writableState.errorEmitted=!0,process.nextTick(U,P,K)):process.nextTick(U,P,K):L?(process.nextTick(X,P),L(K)):process.nextTick(X,P)}),this)},undestroy:function D(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function O(H,L){var P=H._readableState,q=H._writableState;P&&P.autoDestroy||q&&q.autoDestroy?H.destroy(L):H.emit("error",L)}}},7542:(He,we,U)=>{"use strict";var X=U(891).q.ERR_STREAM_PREMATURE_CLOSE;function V(){}He.exports=function H(L,P,q){if("function"==typeof P)return H(L,null,P);P||(P={}),q=function D(L){var P=!1;return function(){if(!P){P=!0;for(var q=arguments.length,ee=new Array(q),K=0;K<q;K++)ee[K]=arguments[K];L.apply(this,ee)}}}(q||V);var ee=P.readable||!1!==P.readable&&L.readable,K=P.writable||!1!==P.writable&&L.writable,ne=function(){L.writable||J()},se=L._writableState&&L._writableState.finished,J=function(){K=!1,se=!0,ee||q.call(L)},W=L._readableState&&L._readableState.endEmitted,ae=function(){ee=!1,W=!0,K||q.call(L)},_e=function(B){q.call(L,B)},Ee=function(){var B;return ee&&!W?((!L._readableState||!L._readableState.ended)&&(B=new X),q.call(L,B)):K&&!se?((!L._writableState||!L._writableState.ended)&&(B=new X),q.call(L,B)):void 0},te=function(){L.req.on("finish",J)};return function O(L){return L.setHeader&&"function"==typeof L.abort}(L)?(L.on("complete",J),L.on("abort",Ee),L.req?te():L.on("request",te)):K&&!L._writableState&&(L.on("end",ne),L.on("close",ne)),L.on("end",ae),L.on("finish",J),!1!==P.error&&L.on("error",_e),L.on("close",Ee),function(){L.removeListener("complete",J),L.removeListener("abort",Ee),L.removeListener("request",te),L.req&&L.req.removeListener("finish",J),L.removeListener("end",ne),L.removeListener("close",ne),L.removeListener("finish",J),L.removeListener("end",ae),L.removeListener("error",_e),L.removeListener("close",Ee)}}},7412:He=>{He.exports=function(){throw new Error("Readable.from is not available in the browser")}},954:(He,we,U)=>{"use strict";var X,V=U(891).q,O=V.ERR_MISSING_ARGS,H=V.ERR_STREAM_DESTROYED;function L(J){if(J)throw J}function q(J,W,ae,_e){_e=function D(J){var W=!1;return function(){W||(W=!0,J.apply(void 0,arguments))}}(_e);var Ee=!1;J.on("close",function(){Ee=!0}),void 0===X&&(X=U(7542)),X(J,{readable:W,writable:ae},function(oe){if(oe)return _e(oe);Ee=!0,_e()});var te=!1;return function(oe){if(!Ee&&!te){if(te=!0,function P(J){return J.setHeader&&"function"==typeof J.abort}(J))return J.abort();if("function"==typeof J.destroy)return J.destroy();_e(oe||new H("pipe"))}}}function ee(J){J()}function K(J,W){return J.pipe(W)}function ne(J){return J.length&&"function"==typeof J[J.length-1]?J.pop():L}He.exports=function se(){for(var J=arguments.length,W=new Array(J),ae=0;ae<J;ae++)W[ae]=arguments[ae];var _e=ne(W);if(Array.isArray(W[0])&&(W=W[0]),W.length<2)throw new O("streams");var Ee,te=W.map(function(oe,B){var $=B<W.length-1;return q(oe,$,B>0,function(pe){Ee||(Ee=pe),pe&&te.forEach(ee),!$&&(te.forEach(ee),_e(Ee))})});return W.reduce(K)}},7102:(He,we,U)=>{"use strict";var X=U(891).q.ERR_INVALID_OPT_VALUE;He.exports={getHighWaterMark:function V(O,H,L,P){var q=function D(O,H,L){return null!=O.highWaterMark?O.highWaterMark:H?O[L]:null}(H,P,L);if(null!=q){if(!isFinite(q)||Math.floor(q)!==q||q<0)throw new X(P?L:"highWaterMark",q);return Math.floor(q)}return O.objectMode?16:16384}}},4970:(He,we,U)=>{He.exports=U(9069).EventEmitter},1503:(He,we,U)=>{!function(X){X.parser=function(Oe,fe){return new V(Oe,fe)},X.SAXParser=V,X.SAXStream=K,X.createStream=function ee(Oe,fe){return new K(Oe,fe)},X.MAX_BUFFER_LENGTH=65536;var P,D=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function V(Oe,fe){if(!(this instanceof V))return new V(Oe,fe);var wt=this;(function H(Oe){for(var fe=0,wt=D.length;fe<wt;fe++)Oe[D[fe]]=""})(wt),wt.q=wt.c="",wt.bufferCheckPosition=X.MAX_BUFFER_LENGTH,wt.opt=fe||{},wt.opt.lowercase=wt.opt.lowercase||wt.opt.lowercasetags,wt.looseCase=wt.opt.lowercase?"toLowerCase":"toUpperCase",wt.tags=[],wt.closed=wt.closedRoot=wt.sawRoot=!1,wt.tag=wt.error=null,wt.strict=!!Oe,wt.noscript=!(!Oe&&!wt.opt.noscript),wt.state=Me.BEGIN,wt.strictEntities=wt.opt.strictEntities,wt.ENTITIES=Object.create(wt.strictEntities?X.XML_ENTITIES:X.ENTITIES),wt.attribList=[],wt.opt.xmlns&&(wt.ns=Object.create(ae)),wt.trackPosition=!1!==wt.opt.position,wt.trackPosition&&(wt.position=wt.line=wt.column=0),ue(wt,"onready")}X.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(Oe){function fe(){}return fe.prototype=Oe,new fe}),Object.keys||(Object.keys=function(Oe){var fe=[];for(var wt in Oe)Oe.hasOwnProperty(wt)&&fe.push(wt);return fe}),V.prototype={end:function(){lt(this)},write:function Ut(Oe){var fe=this;if(this.error)throw this.error;if(fe.closed)return Ye(fe,"Cannot write after close. Assign an onready handler.");if(null===Oe)return lt(fe);"object"==typeof Oe&&(Oe=Oe.toString());for(var wt=0,kt="";kt=Lt(Oe,wt++),fe.c=kt,kt;)switch(fe.trackPosition&&(fe.position++,"\n"===kt?(fe.line++,fe.column=0):fe.column++),fe.state){case Me.BEGIN:if(fe.state=Me.BEGIN_WHITESPACE,"\ufeff"===kt)continue;At(fe,kt);continue;case Me.BEGIN_WHITESPACE:At(fe,kt);continue;case Me.TEXT:if(fe.sawRoot&&!fe.closedRoot){for(var Un=wt-1;kt&&"<"!==kt&&"&"!==kt;)(kt=Lt(Oe,wt++))&&fe.trackPosition&&(fe.position++,"\n"===kt?(fe.line++,fe.column=0):fe.column++);fe.textNode+=Oe.substring(Un,wt-1)}"<"!==kt||fe.sawRoot&&fe.closedRoot&&!fe.strict?(!B(kt)&&(!fe.sawRoot||fe.closedRoot)&&vt(fe,"Text data outside of root node."),"&"===kt?fe.state=Me.TEXT_ENTITY:fe.textNode+=kt):(fe.state=Me.OPEN_WAKA,fe.startTagPosition=fe.position);continue;case Me.SCRIPT:"<"===kt?fe.state=Me.SCRIPT_ENDING:fe.script+=kt;continue;case Me.SCRIPT_ENDING:"/"===kt?fe.state=Me.CLOSE_TAG:(fe.script+="<"+kt,fe.state=Me.SCRIPT);continue;case Me.OPEN_WAKA:"!"===kt?(fe.state=Me.SGML_DECL,fe.sgmlDecl=""):B(kt)||(pe(_e,kt)?(fe.state=Me.OPEN_TAG,fe.tagName=kt):"/"===kt?(fe.state=Me.CLOSE_TAG,fe.tagName=""):"?"===kt?(fe.state=Me.PROC_INST,fe.procInstName=fe.procInstBody=""):(vt(fe,"Unencoded <"),fe.startTagPosition+1<fe.position&&(kt=new Array(fe.position-fe.startTagPosition).join(" ")+kt),fe.textNode+="<"+kt,fe.state=Me.TEXT));continue;case Me.SGML_DECL:"[CDATA["===(fe.sgmlDecl+kt).toUpperCase()?(Pe(fe,"onopencdata"),fe.state=Me.CDATA,fe.sgmlDecl="",fe.cdata=""):fe.sgmlDecl+kt==="--"?(fe.state=Me.COMMENT,fe.comment="",fe.sgmlDecl=""):"DOCTYPE"===(fe.sgmlDecl+kt).toUpperCase()?(fe.state=Me.DOCTYPE,(fe.doctype||fe.sawRoot)&&vt(fe,"Inappropriately located doctype declaration"),fe.doctype="",fe.sgmlDecl=""):">"===kt?(Pe(fe,"onsgmldeclaration",fe.sgmlDecl),fe.sgmlDecl="",fe.state=Me.TEXT):($(kt)&&(fe.state=Me.SGML_DECL_QUOTED),fe.sgmlDecl+=kt);continue;case Me.SGML_DECL_QUOTED:kt===fe.q&&(fe.state=Me.SGML_DECL,fe.q=""),fe.sgmlDecl+=kt;continue;case Me.DOCTYPE:">"===kt?(fe.state=Me.TEXT,Pe(fe,"ondoctype",fe.doctype),fe.doctype=!0):(fe.doctype+=kt,"["===kt?fe.state=Me.DOCTYPE_DTD:$(kt)&&(fe.state=Me.DOCTYPE_QUOTED,fe.q=kt));continue;case Me.DOCTYPE_QUOTED:fe.doctype+=kt,kt===fe.q&&(fe.q="",fe.state=Me.DOCTYPE);continue;case Me.DOCTYPE_DTD:fe.doctype+=kt,"]"===kt?fe.state=Me.DOCTYPE:$(kt)&&(fe.state=Me.DOCTYPE_DTD_QUOTED,fe.q=kt);continue;case Me.DOCTYPE_DTD_QUOTED:fe.doctype+=kt,kt===fe.q&&(fe.state=Me.DOCTYPE_DTD,fe.q="");continue;case Me.COMMENT:"-"===kt?fe.state=Me.COMMENT_ENDING:fe.comment+=kt;continue;case Me.COMMENT_ENDING:"-"===kt?(fe.state=Me.COMMENT_ENDED,fe.comment=Fe(fe.opt,fe.comment),fe.comment&&Pe(fe,"oncomment",fe.comment),fe.comment=""):(fe.comment+="-"+kt,fe.state=Me.COMMENT);continue;case Me.COMMENT_ENDED:">"!==kt?(vt(fe,"Malformed comment"),fe.comment+="--"+kt,fe.state=Me.COMMENT):fe.state=Me.TEXT;continue;case Me.CDATA:"]"===kt?fe.state=Me.CDATA_ENDING:fe.cdata+=kt;continue;case Me.CDATA_ENDING:"]"===kt?fe.state=Me.CDATA_ENDING_2:(fe.cdata+="]"+kt,fe.state=Me.CDATA);continue;case Me.CDATA_ENDING_2:">"===kt?(fe.cdata&&Pe(fe,"oncdata",fe.cdata),Pe(fe,"onclosecdata"),fe.cdata="",fe.state=Me.TEXT):"]"===kt?fe.cdata+="]":(fe.cdata+="]]"+kt,fe.state=Me.CDATA);continue;case Me.PROC_INST:"?"===kt?fe.state=Me.PROC_INST_ENDING:B(kt)?fe.state=Me.PROC_INST_BODY:fe.procInstName+=kt;continue;case Me.PROC_INST_BODY:if(!fe.procInstBody&&B(kt))continue;"?"===kt?fe.state=Me.PROC_INST_ENDING:fe.procInstBody+=kt;continue;case Me.PROC_INST_ENDING:">"===kt?(Pe(fe,"onprocessinginstruction",{name:fe.procInstName,body:fe.procInstBody}),fe.procInstName=fe.procInstBody="",fe.state=Me.TEXT):(fe.procInstBody+="?"+kt,fe.state=Me.PROC_INST_BODY);continue;case Me.OPEN_TAG:pe(Ee,kt)?fe.tagName+=kt:(vn(fe),">"===kt?rt(fe):"/"===kt?fe.state=Me.OPEN_TAG_SLASH:(B(kt)||vt(fe,"Invalid character in tag name"),fe.state=Me.ATTRIB));continue;case Me.OPEN_TAG_SLASH:">"===kt?(rt(fe,!0),Ge(fe)):(vt(fe,"Forward-slash in opening tag not followed by >"),fe.state=Me.ATTRIB);continue;case Me.ATTRIB:if(B(kt))continue;">"===kt?rt(fe):"/"===kt?fe.state=Me.OPEN_TAG_SLASH:pe(_e,kt)?(fe.attribName=kt,fe.attribValue="",fe.state=Me.ATTRIB_NAME):vt(fe,"Invalid attribute name");continue;case Me.ATTRIB_NAME:"="===kt?fe.state=Me.ATTRIB_VALUE:">"===kt?(vt(fe,"Attribute without value"),fe.attribValue=fe.attribName,ht(fe),rt(fe)):B(kt)?fe.state=Me.ATTRIB_NAME_SAW_WHITE:pe(Ee,kt)?fe.attribName+=kt:vt(fe,"Invalid attribute name");continue;case Me.ATTRIB_NAME_SAW_WHITE:if("="===kt)fe.state=Me.ATTRIB_VALUE;else{if(B(kt))continue;vt(fe,"Attribute without value"),fe.tag.attributes[fe.attribName]="",fe.attribValue="",Pe(fe,"onattribute",{name:fe.attribName,value:""}),fe.attribName="",">"===kt?rt(fe):pe(_e,kt)?(fe.attribName=kt,fe.state=Me.ATTRIB_NAME):(vt(fe,"Invalid attribute name"),fe.state=Me.ATTRIB)}continue;case Me.ATTRIB_VALUE:if(B(kt))continue;$(kt)?(fe.q=kt,fe.state=Me.ATTRIB_VALUE_QUOTED):(vt(fe,"Unquoted attribute value"),fe.state=Me.ATTRIB_VALUE_UNQUOTED,fe.attribValue=kt);continue;case Me.ATTRIB_VALUE_QUOTED:if(kt!==fe.q){"&"===kt?fe.state=Me.ATTRIB_VALUE_ENTITY_Q:fe.attribValue+=kt;continue}ht(fe),fe.q="",fe.state=Me.ATTRIB_VALUE_CLOSED;continue;case Me.ATTRIB_VALUE_CLOSED:B(kt)?fe.state=Me.ATTRIB:">"===kt?rt(fe):"/"===kt?fe.state=Me.OPEN_TAG_SLASH:pe(_e,kt)?(vt(fe,"No whitespace between attributes"),fe.attribName=kt,fe.attribValue="",fe.state=Me.ATTRIB_NAME):vt(fe,"Invalid attribute name");continue;case Me.ATTRIB_VALUE_UNQUOTED:if(!ie(kt)){"&"===kt?fe.state=Me.ATTRIB_VALUE_ENTITY_U:fe.attribValue+=kt;continue}ht(fe),">"===kt?rt(fe):fe.state=Me.ATTRIB;continue;case Me.CLOSE_TAG:if(fe.tagName)">"===kt?Ge(fe):pe(Ee,kt)?fe.tagName+=kt:fe.script?(fe.script+="</"+fe.tagName,fe.tagName="",fe.state=Me.SCRIPT):(B(kt)||vt(fe,"Invalid tagname in closing tag"),fe.state=Me.CLOSE_TAG_SAW_WHITE);else{if(B(kt))continue;Be(_e,kt)?fe.script?(fe.script+="</"+kt,fe.state=Me.SCRIPT):vt(fe,"Invalid tagname in closing tag."):fe.tagName=kt}continue;case Me.CLOSE_TAG_SAW_WHITE:if(B(kt))continue;">"===kt?Ge(fe):vt(fe,"Invalid characters in closing tag");continue;case Me.TEXT_ENTITY:case Me.ATTRIB_VALUE_ENTITY_Q:case Me.ATTRIB_VALUE_ENTITY_U:var Et,Ot;switch(fe.state){case Me.TEXT_ENTITY:Et=Me.TEXT,Ot="textNode";break;case Me.ATTRIB_VALUE_ENTITY_Q:Et=Me.ATTRIB_VALUE_QUOTED,Ot="attribValue";break;case Me.ATTRIB_VALUE_ENTITY_U:Et=Me.ATTRIB_VALUE_UNQUOTED,Ot="attribValue"}";"===kt?(fe[Ot]+=_t(fe),fe.entity="",fe.state=Et):pe(fe.entity.length?oe:te,kt)?fe.entity+=kt:(vt(fe,"Invalid character in entity name"),fe[Ot]+="&"+fe.entity+kt,fe.entity="",fe.state=Et);continue;default:throw new Error(fe,"Unknown state: "+fe.state)}return fe.position>=fe.bufferCheckPosition&&function O(Oe){for(var fe=Math.max(X.MAX_BUFFER_LENGTH,10),wt=0,kt=0,Un=D.length;kt<Un;kt++){var ri=Oe[D[kt]].length;if(ri>fe)switch(D[kt]){case"textNode":ot(Oe);break;case"cdata":Pe(Oe,"oncdata",Oe.cdata),Oe.cdata="";break;case"script":Pe(Oe,"onscript",Oe.script),Oe.script="";break;default:Ye(Oe,"Max buffer length exceeded: "+D[kt])}wt=Math.max(wt,ri)}Oe.bufferCheckPosition=X.MAX_BUFFER_LENGTH-wt+Oe.position}(fe),fe},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){!function L(Oe){ot(Oe),""!==Oe.cdata&&(Pe(Oe,"oncdata",Oe.cdata),Oe.cdata=""),""!==Oe.script&&(Pe(Oe,"onscript",Oe.script),Oe.script="")}(this)}};try{P=U(295).Stream}catch{P=function(){}}var q=X.EVENTS.filter(function(Oe){return"error"!==Oe&&"end"!==Oe});function K(Oe,fe){if(!(this instanceof K))return new K(Oe,fe);P.apply(this),this._parser=new V(Oe,fe),this.writable=!0,this.readable=!0;var wt=this;this._parser.onend=function(){wt.emit("end")},this._parser.onerror=function(kt){wt.emit("error",kt),wt._parser.error=null},this._decoder=null,q.forEach(function(kt){Object.defineProperty(wt,"on"+kt,{get:function(){return wt._parser["on"+kt]},set:function(Un){if(!Un)return wt.removeAllListeners(kt),wt._parser["on"+kt]=Un,Un;wt.on(kt,Un)},enumerable:!0,configurable:!1})})}(K.prototype=Object.create(P.prototype,{constructor:{value:K}})).write=function(Oe){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(Oe)){if(!this._decoder){var fe=U(3054).s;this._decoder=new fe("utf8")}Oe=this._decoder.write(Oe)}return this._parser.write(Oe.toString()),this.emit("data",Oe),!0},K.prototype.end=function(Oe){return Oe&&Oe.length&&this.write(Oe),this._parser.end(),!0},K.prototype.on=function(Oe,fe){var wt=this;return!wt._parser["on"+Oe]&&-1!==q.indexOf(Oe)&&(wt._parser["on"+Oe]=function(){var kt=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);kt.splice(0,0,Oe),wt.emit.apply(wt,kt)}),P.prototype.on.call(wt,Oe,fe)};var J="http://www.w3.org/XML/1998/namespace",W="http://www.w3.org/2000/xmlns/",ae={xml:J,xmlns:W},_e=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Ee=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,te=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,oe=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function B(Oe){return" "===Oe||"\n"===Oe||"\r"===Oe||"\t"===Oe}function $(Oe){return'"'===Oe||"'"===Oe}function ie(Oe){return">"===Oe||B(Oe)}function pe(Oe,fe){return Oe.test(fe)}function Be(Oe,fe){return!pe(Oe,fe)}var Oe,fe,wt,Me=0;for(var xe in X.STATE={BEGIN:Me++,BEGIN_WHITESPACE:Me++,TEXT:Me++,TEXT_ENTITY:Me++,OPEN_WAKA:Me++,SGML_DECL:Me++,SGML_DECL_QUOTED:Me++,DOCTYPE:Me++,DOCTYPE_QUOTED:Me++,DOCTYPE_DTD:Me++,DOCTYPE_DTD_QUOTED:Me++,COMMENT_STARTING:Me++,COMMENT:Me++,COMMENT_ENDING:Me++,COMMENT_ENDED:Me++,CDATA:Me++,CDATA_ENDING:Me++,CDATA_ENDING_2:Me++,PROC_INST:Me++,PROC_INST_BODY:Me++,PROC_INST_ENDING:Me++,OPEN_TAG:Me++,OPEN_TAG_SLASH:Me++,ATTRIB:Me++,ATTRIB_NAME:Me++,ATTRIB_NAME_SAW_WHITE:Me++,ATTRIB_VALUE:Me++,ATTRIB_VALUE_QUOTED:Me++,ATTRIB_VALUE_CLOSED:Me++,ATTRIB_VALUE_UNQUOTED:Me++,ATTRIB_VALUE_ENTITY_Q:Me++,ATTRIB_VALUE_ENTITY_U:Me++,CLOSE_TAG:Me++,CLOSE_TAG_SAW_WHITE:Me++,SCRIPT:Me++,SCRIPT_ENDING:Me++},X.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},X.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(X.ENTITIES).forEach(function(Oe){var fe=X.ENTITIES[Oe],wt="number"==typeof fe?String.fromCharCode(fe):fe;X.ENTITIES[Oe]=wt}),X.STATE)X.STATE[X.STATE[xe]]=xe;function ue(Oe,fe,wt){Oe[fe]&&Oe[fe](wt)}function Pe(Oe,fe,wt){Oe.textNode&&ot(Oe),ue(Oe,fe,wt)}function ot(Oe){Oe.textNode=Fe(Oe.opt,Oe.textNode),Oe.textNode&&ue(Oe,"ontext",Oe.textNode),Oe.textNode=""}function Fe(Oe,fe){return Oe.trim&&(fe=fe.trim()),Oe.normalize&&(fe=fe.replace(/\s+/g," ")),fe}function Ye(Oe,fe){return ot(Oe),Oe.trackPosition&&(fe+="\nLine: "+Oe.line+"\nColumn: "+Oe.column+"\nChar: "+Oe.c),fe=new Error(fe),Oe.error=fe,ue(Oe,"onerror",fe),Oe}function lt(Oe){return Oe.sawRoot&&!Oe.closedRoot&&vt(Oe,"Unclosed root tag"),Oe.state!==Me.BEGIN&&Oe.state!==Me.BEGIN_WHITESPACE&&Oe.state!==Me.TEXT&&Ye(Oe,"Unexpected end"),ot(Oe),Oe.c="",Oe.closed=!0,ue(Oe,"onend"),V.call(Oe,Oe.strict,Oe.opt),Oe}function vt(Oe,fe){if("object"!=typeof Oe||!(Oe instanceof V))throw new Error("bad call to strictFail");Oe.strict&&Ye(Oe,fe)}function vn(Oe){Oe.strict||(Oe.tagName=Oe.tagName[Oe.looseCase]());var fe=Oe.tags[Oe.tags.length-1]||Oe,wt=Oe.tag={name:Oe.tagName,attributes:{}};Oe.opt.xmlns&&(wt.ns=fe.ns),Oe.attribList.length=0,Pe(Oe,"onopentagstart",wt)}function Ne(Oe,fe){var kt=Oe.indexOf(":")<0?["",Oe]:Oe.split(":"),Un=kt[0],ri=kt[1];return fe&&"xmlns"===Oe&&(Un="xmlns",ri=""),{prefix:Un,local:ri}}function ht(Oe){if(Oe.strict||(Oe.attribName=Oe.attribName[Oe.looseCase]()),-1!==Oe.attribList.indexOf(Oe.attribName)||Oe.tag.attributes.hasOwnProperty(Oe.attribName))Oe.attribName=Oe.attribValue="";else{if(Oe.opt.xmlns){var fe=Ne(Oe.attribName,!0),kt=fe.local;if("xmlns"===fe.prefix)if("xml"===kt&&Oe.attribValue!==J)vt(Oe,"xml: prefix must be bound to "+J+"\nActual: "+Oe.attribValue);else if("xmlns"===kt&&Oe.attribValue!==W)vt(Oe,"xmlns: prefix must be bound to "+W+"\nActual: "+Oe.attribValue);else{var Un=Oe.tag,ri=Oe.tags[Oe.tags.length-1]||Oe;Un.ns===ri.ns&&(Un.ns=Object.create(ri.ns)),Un.ns[kt]=Oe.attribValue}Oe.attribList.push([Oe.attribName,Oe.attribValue])}else Oe.tag.attributes[Oe.attribName]=Oe.attribValue,Pe(Oe,"onattribute",{name:Oe.attribName,value:Oe.attribValue});Oe.attribName=Oe.attribValue=""}}function rt(Oe,fe){if(Oe.opt.xmlns){var wt=Oe.tag,kt=Ne(Oe.tagName);wt.prefix=kt.prefix,wt.local=kt.local,wt.uri=wt.ns[kt.prefix]||"",wt.prefix&&!wt.uri&&(vt(Oe,"Unbound namespace prefix: "+JSON.stringify(Oe.tagName)),wt.uri=kt.prefix),wt.ns&&(Oe.tags[Oe.tags.length-1]||Oe).ns!==wt.ns&&Object.keys(wt.ns).forEach(function(Li){Pe(Oe,"onopennamespace",{prefix:Li,uri:wt.ns[Li]})});for(var ri=0,Et=Oe.attribList.length;ri<Et;ri++){var Ot=Oe.attribList[ri],fn=Ot[0],et=Ot[1],Le=Ne(fn,!0),ze=Le.prefix,yn=""===ze?"":wt.ns[ze]||"",ii={name:fn,value:et,prefix:ze,local:Le.local,uri:yn};ze&&"xmlns"!==ze&&!yn&&(vt(Oe,"Unbound namespace prefix: "+JSON.stringify(ze)),ii.uri=ze),Oe.tag.attributes[fn]=ii,Pe(Oe,"onattribute",ii)}Oe.attribList.length=0}Oe.tag.isSelfClosing=!!fe,Oe.sawRoot=!0,Oe.tags.push(Oe.tag),Pe(Oe,"onopentag",Oe.tag),fe||(Oe.state=Oe.noscript||"script"!==Oe.tagName.toLowerCase()?Me.TEXT:Me.SCRIPT,Oe.tag=null,Oe.tagName=""),Oe.attribName=Oe.attribValue="",Oe.attribList.length=0}function Ge(Oe){if(!Oe.tagName)return vt(Oe,"Weird empty close tag."),Oe.textNode+="</>",void(Oe.state=Me.TEXT);if(Oe.script){if("script"!==Oe.tagName)return Oe.script+="</"+Oe.tagName+">",Oe.tagName="",void(Oe.state=Me.SCRIPT);Pe(Oe,"onscript",Oe.script),Oe.script=""}var fe=Oe.tags.length,wt=Oe.tagName;Oe.strict||(wt=wt[Oe.looseCase]());for(var kt=wt;fe--&&Oe.tags[fe].name!==kt;)vt(Oe,"Unexpected close tag");if(fe<0)return vt(Oe,"Unmatched closing tag: "+Oe.tagName),Oe.textNode+="</"+Oe.tagName+">",void(Oe.state=Me.TEXT);Oe.tagName=wt;for(var ri=Oe.tags.length;ri-- >fe;){var Et=Oe.tag=Oe.tags.pop();Oe.tagName=Oe.tag.name,Pe(Oe,"onclosetag",Oe.tagName);var Ot={};for(var fn in Et.ns)Ot[fn]=Et.ns[fn];Oe.opt.xmlns&&Et.ns!==(Oe.tags[Oe.tags.length-1]||Oe).ns&&Object.keys(Et.ns).forEach(function(Le){Pe(Oe,"onclosenamespace",{prefix:Le,uri:Et.ns[Le]})})}0===fe&&(Oe.closedRoot=!0),Oe.tagName=Oe.attribValue=Oe.attribName="",Oe.attribList.length=0,Oe.state=Me.TEXT}function _t(Oe){var kt,fe=Oe.entity,wt=fe.toLowerCase(),Un="";return Oe.ENTITIES[fe]?Oe.ENTITIES[fe]:Oe.ENTITIES[wt]?Oe.ENTITIES[wt]:("#"===(fe=wt).charAt(0)&&("x"===fe.charAt(1)?(fe=fe.slice(2),Un=(kt=parseInt(fe,16)).toString(16)):(fe=fe.slice(1),Un=(kt=parseInt(fe,10)).toString(10))),fe=fe.replace(/^0+/,""),isNaN(kt)||Un.toLowerCase()!==fe?(vt(Oe,"Invalid character entity"),"&"+Oe.entity+";"):String.fromCodePoint(kt))}function At(Oe,fe){"<"===fe?(Oe.state=Me.OPEN_WAKA,Oe.startTagPosition=Oe.position):B(fe)||(vt(Oe,"Non-whitespace before first tag."),Oe.textNode=fe,Oe.state=Me.TEXT)}function Lt(Oe,fe){var wt="";return fe<Oe.length&&(wt=Oe.charAt(fe)),wt}Me=X.STATE,String.fromCodePoint||(Oe=String.fromCharCode,fe=Math.floor,wt=function(){var kt=16384,Un=[],Ot=-1,fn=arguments.length;if(!fn)return"";for(var et="";++Ot<fn;){var Le=Number(arguments[Ot]);if(!isFinite(Le)||Le<0||Le>1114111||fe(Le)!==Le)throw RangeError("Invalid code point: "+Le);Le<=65535?Un.push(Le):Un.push(55296+((Le-=65536)>>10),Le%1024+56320),(Ot+1===fn||Un.length>kt)&&(et+=Oe.apply(null,Un),Un.length=0)}return et},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:wt,configurable:!0,writable:!0}):String.fromCodePoint=wt)}(we)},6563:function(){!function(He,we){"use strict";if(!He.setImmediate){var O,U=1,X={},D=!1,V=He.document,ae=Object.getPrototypeOf&&Object.getPrototypeOf(He);ae=ae&&ae.setTimeout?ae:He,"[object process]"==={}.toString.call(He.process)?function ee(){O=function(_e){process.nextTick(function(){q(_e)})}}():function K(){if(He.postMessage&&!He.importScripts){var _e=!0,Ee=He.onmessage;return He.onmessage=function(){_e=!1},He.postMessage("","*"),He.onmessage=Ee,_e}}()?function ne(){var _e="setImmediate$"+Math.random()+"$",Ee=function(te){te.source===He&&"string"==typeof te.data&&0===te.data.indexOf(_e)&&q(+te.data.slice(_e.length))};He.addEventListener?He.addEventListener("message",Ee,!1):He.attachEvent("onmessage",Ee),O=function(te){He.postMessage(_e+te,"*")}}():He.MessageChannel?function se(){var _e=new MessageChannel;_e.port1.onmessage=function(Ee){q(Ee.data)},O=function(Ee){_e.port2.postMessage(Ee)}}():V&&"onreadystatechange"in V.createElement("script")?function J(){var _e=V.documentElement;O=function(Ee){var te=V.createElement("script");te.onreadystatechange=function(){q(Ee),te.onreadystatechange=null,_e.removeChild(te),te=null},_e.appendChild(te)}}():function W(){O=function(_e){setTimeout(q,0,_e)}}(),ae.setImmediate=function H(_e){"function"!=typeof _e&&(_e=new Function(""+_e));for(var Ee=new Array(arguments.length-1),te=0;te<Ee.length;te++)Ee[te]=arguments[te+1];var oe={callback:_e,args:Ee};return X[U]=oe,O(U),U++},ae.clearImmediate=L}function L(_e){delete X[_e]}function q(_e){if(D)setTimeout(q,0,_e);else{var Ee=X[_e];if(Ee){D=!0;try{!function P(_e){var Ee=_e.callback,te=_e.args;switch(te.length){case 0:Ee();break;case 1:Ee(te[0]);break;case 2:Ee(te[0],te[1]);break;case 3:Ee(te[0],te[1],te[2]);break;default:Ee.apply(void 0,te)}}(Ee)}finally{L(_e),D=!1}}}}}(typeof self>"u"?typeof global>"u"?this:global:self)},2002:function(He,we,U){"use strict";var ee,X=this&&this.__extends||(ee=function(K,ne){return(ee=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(se,J){se.__proto__=J}||function(se,J){for(var W in J)Object.prototype.hasOwnProperty.call(J,W)&&(se[W]=J[W])})(K,ne)},function(K,ne){if("function"!=typeof ne&&null!==ne)throw new TypeError("Class extends value "+String(ne)+" is not a constructor or null");function se(){this.constructor=K}ee(K,ne),K.prototype=null===ne?Object.create(ne):(se.prototype=ne.prototype,new se)}),D=this&&this.__importDefault||function(ee){return ee&&ee.__esModule?ee:{default:ee}};Object.defineProperty(we,"__esModule",{value:!0});var V=U(2630),O=D(U(4539)),H=U(1699),L=U(57),P=1.5,q=function(ee){function K(){var ne=ee.call(this)||this;return ne.x=.5,ne.y=.5,ne.angle=0,ne.ratio=1,ne.minRatio=null,ne.maxRatio=null,ne.nextFrame=null,ne.previousState=null,ne.enabled=!0,ne.previousState=ne.getState(),ne}return X(K,ee),K.from=function(ne){return(new K).setState(ne)},K.prototype.enable=function(){return this.enabled=!0,this},K.prototype.disable=function(){return this.enabled=!1,this},K.prototype.getState=function(){return{x:this.x,y:this.y,angle:this.angle,ratio:this.ratio}},K.prototype.hasState=function(ne){return this.x===ne.x&&this.y===ne.y&&this.ratio===ne.ratio&&this.angle===ne.angle},K.prototype.getPreviousState=function(){var ne=this.previousState;return ne?{x:ne.x,y:ne.y,angle:ne.angle,ratio:ne.ratio}:null},K.prototype.getBoundedRatio=function(ne){var se=ne;return"number"==typeof this.minRatio&&(se=Math.max(se,this.minRatio)),"number"==typeof this.maxRatio&&(se=Math.min(se,this.maxRatio)),se},K.prototype.validateState=function(ne){var se={};return"number"==typeof ne.x&&(se.x=ne.x),"number"==typeof ne.y&&(se.y=ne.y),"number"==typeof ne.angle&&(se.angle=ne.angle),"number"==typeof ne.ratio&&(se.ratio=this.getBoundedRatio(ne.ratio)),se},K.prototype.isAnimated=function(){return!!this.nextFrame},K.prototype.setState=function(ne){if(!this.enabled)return this;this.previousState=this.getState();var se=this.validateState(ne);return"number"==typeof se.x&&(this.x=se.x),"number"==typeof se.y&&(this.y=se.y),"number"==typeof se.angle&&(this.angle=se.angle),"number"==typeof se.ratio&&(this.ratio=se.ratio),this.hasState(this.previousState)||this.emit("updated",this.getState()),this},K.prototype.animate=function(ne,se,J){var W=this;if(this.enabled){var ae=Object.assign({},V.ANIMATE_DEFAULTS,se),_e=this.validateState(ne),Ee="function"==typeof ae.easing?ae.easing:O.default[ae.easing],te=Date.now(),oe=this.getState(),B=function(){var $=(Date.now()-te)/ae.duration;if($>=1)return W.nextFrame=null,W.setState(_e),void(W.animationCallback&&(W.animationCallback.call(null),W.animationCallback=void 0));var ie=Ee($),pe={};"number"==typeof _e.x&&(pe.x=oe.x+(_e.x-oe.x)*ie),"number"==typeof _e.y&&(pe.y=oe.y+(_e.y-oe.y)*ie),"number"==typeof _e.angle&&(pe.angle=oe.angle+(_e.angle-oe.angle)*ie),"number"==typeof _e.ratio&&(pe.ratio=oe.ratio+(_e.ratio-oe.ratio)*ie),W.setState(pe),W.nextFrame=(0,H.requestFrame)(B)};this.nextFrame?((0,H.cancelFrame)(this.nextFrame),this.animationCallback&&this.animationCallback.call(null),this.nextFrame=(0,H.requestFrame)(B)):B(),this.animationCallback=J}},K.prototype.animatedZoom=function(ne){if(ne){if("number"==typeof ne)return this.animate({ratio:this.ratio/ne});this.animate({ratio:this.ratio/(ne.factor||P)},ne)}else this.animate({ratio:this.ratio/P})},K.prototype.animatedUnzoom=function(ne){if(ne){if("number"==typeof ne)return this.animate({ratio:this.ratio*ne});this.animate({ratio:this.ratio*(ne.factor||P)},ne)}else this.animate({ratio:this.ratio*P})},K.prototype.animatedReset=function(ne){this.animate({x:.5,y:.5,ratio:1,angle:0},ne)},K.prototype.copy=function(){return K.from(this.getState())},K}(L.TypedEventEmitter);we.default=q},5473:function(He,we,U){"use strict";var se,X=this&&this.__extends||(se=function(J,W){return(se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ae,_e){ae.__proto__=_e}||function(ae,_e){for(var Ee in _e)Object.prototype.hasOwnProperty.call(_e,Ee)&&(ae[Ee]=_e[Ee])})(J,W)},function(J,W){if("function"!=typeof W&&null!==W)throw new TypeError("Class extends value "+String(W)+" is not a constructor or null");function ae(){this.constructor=J}se(J,W),J.prototype=null===W?Object.create(W):(ae.prototype=W.prototype,new ae)}),D=this&&this.__assign||function(){return D=Object.assign||function(se){for(var J,W=1,ae=arguments.length;W<ae;W++)for(var _e in J=arguments[W])Object.prototype.hasOwnProperty.call(J,_e)&&(se[_e]=J[_e]);return se},D.apply(this,arguments)};Object.defineProperty(we,"__esModule",{value:!0}),we.getWheelDelta=we.getTouchCoords=we.getTouchesArray=we.getWheelCoords=we.getMouseCoords=we.getPosition=void 0;var V=U(57);function O(se,J){var W=J.getBoundingClientRect();return{x:se.clientX-W.left,y:se.clientY-W.top}}function H(se,J){var W=D(D({},O(se,J)),{sigmaDefaultPrevented:!1,preventSigmaDefault:function(){W.sigmaDefaultPrevented=!0},original:se});return W}function q(se){for(var J=[],W=0,ae=Math.min(se.length,2);W<ae;W++)J.push(se[W]);return J}function K(se){if(typeof se.deltaY<"u")return-3*se.deltaY/360;if(typeof se.detail<"u")return se.detail/-9;throw new Error("Captor: could not extract delta from event.")}we.getPosition=O,we.getMouseCoords=H,we.getWheelCoords=function L(se,J){return D(D({},H(se,J)),{delta:K(se)})},we.getTouchesArray=q,we.getTouchCoords=function ee(se,J){return{touches:q(se.touches).map(function(W){return O(W,J)}),original:se}},we.getWheelDelta=K;var ne=function(se){function J(W,ae){var _e=se.call(this)||this;return _e.container=W,_e.renderer=ae,_e}return X(J,se),J}(V.TypedEventEmitter);we.default=ne},2465:function(He,we,U){"use strict";var _e,X=this&&this.__extends||(_e=function(Ee,te){return(_e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(oe,B){oe.__proto__=B}||function(oe,B){for(var $ in B)Object.prototype.hasOwnProperty.call(B,$)&&(oe[$]=B[$])})(Ee,te)},function(Ee,te){if("function"!=typeof te&&null!==te)throw new TypeError("Class extends value "+String(te)+" is not a constructor or null");function oe(){this.constructor=Ee}_e(Ee,te),Ee.prototype=null===te?Object.create(te):(oe.prototype=te.prototype,new oe)}),D=this&&this.__createBinding||(Object.create?function(_e,Ee,te,oe){void 0===oe&&(oe=te),Object.defineProperty(_e,oe,{enumerable:!0,get:function(){return Ee[te]}})}:function(_e,Ee,te,oe){void 0===oe&&(oe=te),_e[oe]=Ee[te]}),V=this&&this.__setModuleDefault||(Object.create?function(_e,Ee){Object.defineProperty(_e,"default",{enumerable:!0,value:Ee})}:function(_e,Ee){_e.default=Ee}),O=this&&this.__importStar||function(_e){if(_e&&_e.__esModule)return _e;var Ee={};if(null!=_e)for(var te in _e)"default"!==te&&Object.prototype.hasOwnProperty.call(_e,te)&&D(Ee,_e,te);return V(Ee,_e),Ee};Object.defineProperty(we,"__esModule",{value:!0});var H=O(U(5473)),ae=function(_e){function Ee(te,oe){var B=_e.call(this,te,oe)||this;return B.enabled=!0,B.draggedEvents=0,B.downStartTime=null,B.lastMouseX=null,B.lastMouseY=null,B.isMouseDown=!1,B.isMoving=!1,B.movingTimeout=null,B.startCameraState=null,B.clicks=0,B.doubleClickTimeout=null,B.currentWheelDirection=0,B.handleClick=B.handleClick.bind(B),B.handleRightClick=B.handleRightClick.bind(B),B.handleDown=B.handleDown.bind(B),B.handleUp=B.handleUp.bind(B),B.handleMove=B.handleMove.bind(B),B.handleWheel=B.handleWheel.bind(B),B.handleOut=B.handleOut.bind(B),te.addEventListener("click",B.handleClick,!1),te.addEventListener("contextmenu",B.handleRightClick,!1),te.addEventListener("mousedown",B.handleDown,!1),te.addEventListener("wheel",B.handleWheel,!1),te.addEventListener("mouseout",B.handleOut,!1),document.addEventListener("mousemove",B.handleMove,!1),document.addEventListener("mouseup",B.handleUp,!1),B}return X(Ee,_e),Ee.prototype.kill=function(){var te=this.container;te.removeEventListener("click",this.handleClick),te.removeEventListener("contextmenu",this.handleRightClick),te.removeEventListener("mousedown",this.handleDown),te.removeEventListener("wheel",this.handleWheel),te.removeEventListener("mouseout",this.handleOut),document.removeEventListener("mousemove",this.handleMove),document.removeEventListener("mouseup",this.handleUp)},Ee.prototype.handleClick=function(te){var oe=this;if(this.enabled){if(this.clicks++,2===this.clicks)return this.clicks=0,"number"==typeof this.doubleClickTimeout&&(clearTimeout(this.doubleClickTimeout),this.doubleClickTimeout=null),this.handleDoubleClick(te);setTimeout(function(){oe.clicks=0,oe.doubleClickTimeout=null},300),this.draggedEvents<3&&this.emit("click",(0,H.getMouseCoords)(te,this.container))}},Ee.prototype.handleRightClick=function(te){!this.enabled||this.emit("rightClick",(0,H.getMouseCoords)(te,this.container))},Ee.prototype.handleDoubleClick=function(te){if(this.enabled){te.preventDefault(),te.stopPropagation();var oe=(0,H.getMouseCoords)(te,this.container);if(this.emit("doubleClick",oe),!oe.sigmaDefaultPrevented){var B=this.renderer.getCamera(),$=B.getBoundedRatio(B.getState().ratio/2.2);B.animate(this.renderer.getViewportZoomedState((0,H.getPosition)(te,this.container),$),{easing:"quadraticInOut",duration:200})}}},Ee.prototype.handleDown=function(te){if(this.enabled){this.startCameraState=this.renderer.getCamera().getState();var oe=(0,H.getPosition)(te,this.container),$=oe.y;this.lastMouseX=oe.x,this.lastMouseY=$,this.draggedEvents=0,this.downStartTime=Date.now(),this.isMouseDown=!0,this.emit("mousedown",(0,H.getMouseCoords)(te,this.container))}},Ee.prototype.handleUp=function(te){var oe=this;if(this.enabled&&this.isMouseDown){var B=this.renderer.getCamera();this.isMouseDown=!1,"number"==typeof this.movingTimeout&&(clearTimeout(this.movingTimeout),this.movingTimeout=null);var $=(0,H.getPosition)(te,this.container),ie=$.x,pe=$.y,Be=B.getState(),Me=B.getPreviousState()||{x:0,y:0};this.isMoving?B.animate({x:Be.x+3*(Be.x-Me.x),y:Be.y+3*(Be.y-Me.y)},{duration:200,easing:"quadraticOut"}):(this.lastMouseX!==ie||this.lastMouseY!==pe)&&B.setState({x:Be.x,y:Be.y}),this.isMoving=!1,setTimeout(function(){oe.draggedEvents=0,oe.renderer.refresh()},0),this.emit("mouseup",(0,H.getMouseCoords)(te,this.container))}},Ee.prototype.handleMove=function(te){var oe=this;if(this.enabled){var B=(0,H.getMouseCoords)(te,this.container);if(this.emit("mousemovebody",B),te.target===this.container&&this.emit("mousemove",B),!B.sigmaDefaultPrevented&&this.isMouseDown){this.isMoving=!0,this.draggedEvents++,"number"==typeof this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){oe.movingTimeout=null,oe.isMoving=!1},100);var $=this.renderer.getCamera(),ie=(0,H.getPosition)(te,this.container),pe=ie.x,Be=ie.y,Me=this.renderer.viewportToFramedGraph({x:this.lastMouseX,y:this.lastMouseY}),xe=this.renderer.viewportToFramedGraph({x:pe,y:Be}),ue=Me.x-xe.x,Pe=Me.y-xe.y,ot=$.getState();$.setState({x:ot.x+ue,y:ot.y+Pe}),this.lastMouseX=pe,this.lastMouseY=Be,te.preventDefault(),te.stopPropagation()}}},Ee.prototype.handleWheel=function(te){var oe=this;if(this.enabled){te.preventDefault(),te.stopPropagation();var B=(0,H.getWheelDelta)(te);if(B){var $=(0,H.getWheelCoords)(te,this.container);if(this.emit("wheel",$),!$.sigmaDefaultPrevented){var ie=B>0?1/1.7:1.7,pe=this.renderer.getCamera(),Be=pe.getBoundedRatio(pe.getState().ratio*ie),Me=B>0?1:-1,xe=Date.now();this.currentWheelDirection===Me&&this.lastWheelTriggerTime&&xe-this.lastWheelTriggerTime<50||(pe.animate(this.renderer.getViewportZoomedState((0,H.getPosition)(te,this.container),Be),{easing:"quadraticOut",duration:250},function(){oe.currentWheelDirection=0}),this.currentWheelDirection=Me,this.lastWheelTriggerTime=xe)}}}},Ee.prototype.handleOut=function(){},Ee}(H.default);we.default=ae},1565:function(He,we,U){"use strict";var ne,X=this&&this.__extends||(ne=function(se,J){return(ne=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,ae){W.__proto__=ae}||function(W,ae){for(var _e in ae)Object.prototype.hasOwnProperty.call(ae,_e)&&(W[_e]=ae[_e])})(se,J)},function(se,J){if("function"!=typeof J&&null!==J)throw new TypeError("Class extends value "+String(J)+" is not a constructor or null");function W(){this.constructor=se}ne(se,J),se.prototype=null===J?Object.create(J):(W.prototype=J.prototype,new W)}),D=this&&this.__createBinding||(Object.create?function(ne,se,J,W){void 0===W&&(W=J),Object.defineProperty(ne,W,{enumerable:!0,get:function(){return se[J]}})}:function(ne,se,J,W){void 0===W&&(W=J),ne[W]=se[J]}),V=this&&this.__setModuleDefault||(Object.create?function(ne,se){Object.defineProperty(ne,"default",{enumerable:!0,value:se})}:function(ne,se){ne.default=se}),O=this&&this.__importStar||function(ne){if(ne&&ne.__esModule)return ne;var se={};if(null!=ne)for(var J in ne)"default"!==J&&Object.prototype.hasOwnProperty.call(ne,J)&&D(se,ne,J);return V(se,ne),se},H=this&&this.__read||function(ne,se){var J="function"==typeof Symbol&&ne[Symbol.iterator];if(!J)return ne;var ae,Ee,W=J.call(ne),_e=[];try{for(;(void 0===se||se-- >0)&&!(ae=W.next()).done;)_e.push(ae.value)}catch(te){Ee={error:te}}finally{try{ae&&!ae.done&&(J=W.return)&&J.call(W)}finally{if(Ee)throw Ee.error}}return _e};Object.defineProperty(we,"__esModule",{value:!0});var L=O(U(5473)),K=function(ne){function se(J,W){var ae=ne.call(this,J,W)||this;return ae.enabled=!0,ae.isMoving=!1,ae.touchMode=0,ae.handleStart=ae.handleStart.bind(ae),ae.handleLeave=ae.handleLeave.bind(ae),ae.handleMove=ae.handleMove.bind(ae),J.addEventListener("touchstart",ae.handleStart,!1),J.addEventListener("touchend",ae.handleLeave,!1),J.addEventListener("touchcancel",ae.handleLeave,!1),J.addEventListener("touchmove",ae.handleMove,!1),ae}return X(se,ne),se.prototype.kill=function(){var J=this.container;J.removeEventListener("touchstart",this.handleStart),J.removeEventListener("touchend",this.handleLeave),J.removeEventListener("touchcancel",this.handleLeave),J.removeEventListener("touchmove",this.handleMove)},se.prototype.getDimensions=function(){return{width:this.container.offsetWidth,height:this.container.offsetHeight}},se.prototype.dispatchRelatedMouseEvent=function(J,W,ae,_e){var Ee=ae||(0,L.getPosition)(W.touches[0],this.container),te=new MouseEvent(J,{clientX:Ee.x,clientY:Ee.y,altKey:W.altKey,ctrlKey:W.ctrlKey});te.isFakeSigmaMouseEvent=!0,(_e||this.container).dispatchEvent(te)},se.prototype.handleStart=function(J){var W=this;if(this.enabled){J.preventDefault(),1===J.touches.length&&this.dispatchRelatedMouseEvent("mousedown",J);var ae=(0,L.getTouchesArray)(J.touches);if(this.isMoving=!0,this.touchMode=ae.length,this.startCameraState=this.renderer.getCamera().getState(),this.startTouchesPositions=ae.map(function(pe){return(0,L.getPosition)(pe,W.container)}),this.lastTouchesPositions=this.startTouchesPositions,2===this.touchMode){var _e=H(this.startTouchesPositions,2),Ee=_e[0],te=Ee.x,oe=Ee.y,B=_e[1],$=B.x,ie=B.y;this.startTouchesAngle=Math.atan2(ie-oe,$-te),this.startTouchesDistance=Math.sqrt(Math.pow($-te,2)+Math.pow(ie-oe,2))}this.emit("touchdown",(0,L.getTouchCoords)(J,this.container))}},se.prototype.handleLeave=function(J){if(this.enabled){switch(J.preventDefault(),0===J.touches.length&&this.lastTouchesPositions&&this.lastTouchesPositions.length&&(this.dispatchRelatedMouseEvent("mouseup",J,this.lastTouchesPositions[0],document),this.dispatchRelatedMouseEvent("click",J,this.lastTouchesPositions[0])),this.movingTimeout&&(this.isMoving=!1,clearTimeout(this.movingTimeout)),this.touchMode){case 2:if(1===J.touches.length){this.handleStart(J),J.preventDefault();break}case 1:if(this.isMoving){var W=this.renderer.getCamera(),ae=W.getState(),_e=W.getPreviousState()||{x:0,y:0};W.animate({x:ae.x+3*(ae.x-_e.x),y:ae.y+3*(ae.y-_e.y)},{duration:200,easing:"quadraticOut"})}this.isMoving=!1,this.touchMode=0}this.emit("touchup",(0,L.getTouchCoords)(J,this.container))}},se.prototype.handleMove=function(J){var W,ae=this;if(this.enabled){J.preventDefault(),1===J.touches.length&&this.dispatchRelatedMouseEvent("mousemove",J);var _e=this.renderer.getCamera(),Ee=this.startCameraState,oe=(0,L.getTouchesArray)(J.touches).map(function(Ut){return(0,L.getPosition)(Ut,ae.container)});switch(this.lastTouchesPositions=oe,this.isMoving=!0,this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){ae.isMoving=!1},200),this.touchMode){case 1:var B=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0]),$=B.x,ie=B.y,pe=this.renderer.viewportToFramedGraph(oe[0]);_e.setState({x:Ee.x+$-(Be=pe.x),y:Ee.y+ie-(Me=pe.y)});break;case 2:var xe={},ue=oe[0],Pe=ue.x,ot=ue.y,Fe=oe[1],Ye=Fe.x,lt=Fe.y,vt=Math.atan2(lt-ot,Ye-Pe)-this.startTouchesAngle,vn=Math.hypot(lt-ot,Ye-Pe)/this.startTouchesDistance,Ne=_e.getBoundedRatio(Ee.ratio/vn);xe.ratio=Ne,xe.angle=Ee.angle+vt;var Be,ht=this.getDimensions(),rt=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0],{cameraState:Ee}),Ge=Math.min(ht.width,ht.height),Lt=Ne/Ge,Me=ot-Ge/2/(Ge/ht.height);Me=(W=H([(Be=Pe-Ge/2/(Ge/ht.width))*Math.cos(-xe.angle)-Me*Math.sin(-xe.angle),Me*Math.cos(-xe.angle)+Be*Math.sin(-xe.angle)],2))[1],xe.x=rt.x-(Be=W[0])*Lt,xe.y=rt.y+Me*Lt,_e.setState(xe)}this.emit("touchmove",(0,L.getTouchCoords)(J,this.container))}},se}(L.default);we.default=K},4942:(He,we)=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0}),we.edgeLabelsToDisplayFromNodes=we.LabelGrid=void 0;var U=function(){function V(O,H){this.key=O,this.size=H}return V.compare=function(O,H){return O.size>H.size?-1:O.size<H.size||O.key>H.key?1:-1},V}(),X=function(){function V(){this.width=0,this.height=0,this.cellSize=0,this.columns=0,this.rows=0,this.cells={}}return V.prototype.resizeAndClear=function(O,H){this.width=O.width,this.height=O.height,this.cellSize=H,this.columns=Math.ceil(O.width/H),this.rows=Math.ceil(O.height/H),this.cells={}},V.prototype.getIndex=function(O){var H=Math.floor(O.x/this.cellSize);return Math.floor(O.y/this.cellSize)*this.columns+H},V.prototype.add=function(O,H,L){var P=new U(O,H),q=this.getIndex(L),ee=this.cells[q];ee||(this.cells[q]=ee=[]),ee.push(P)},V.prototype.organize=function(){for(var O in this.cells)this.cells[O].sort(U.compare)},V.prototype.getLabelsToDisplay=function(O,H){var L=this.cellSize*this.cellSize,ee=Math.ceil(L/O/O*H/L),K=[];for(var ne in this.cells)for(var se=this.cells[ne],J=0;J<Math.min(ee,se.length);J++)K.push(se[J].key);return K},V}();we.LabelGrid=X,we.edgeLabelsToDisplayFromNodes=function D(V){var H=V.hoveredNode,L=V.highlightedNodes,P=V.displayedNodeLabels,q=[];return V.graph.forEachEdge(function(ee,K,ne,se){(ne===H||se===H||L.has(ne)||L.has(se)||P.has(ne)&&P.has(se))&&q.push(ee)}),q}},3650:function(He,we,U){"use strict";var X=this&&this.__read||function(xe,ue){var Pe="function"==typeof Symbol&&xe[Symbol.iterator];if(!Pe)return xe;var Fe,lt,ot=Pe.call(xe),Ye=[];try{for(;(void 0===ue||ue-- >0)&&!(Fe=ot.next()).done;)Ye.push(Fe.value)}catch(vt){lt={error:vt}}finally{try{Fe&&!Fe.done&&(Pe=ot.return)&&Pe.call(ot)}finally{if(lt)throw lt.error}}return Ye},D=this&&this.__spreadArray||function(xe,ue,Pe){if(Pe||2===arguments.length)for(var Ye,ot=0,Fe=ue.length;ot<Fe;ot++)(Ye||!(ot in ue))&&(Ye||(Ye=Array.prototype.slice.call(ue,0,ot)),Ye[ot]=ue[ot]);return xe.concat(Ye||Array.prototype.slice.call(ue))},V=this&&this.__importDefault||function(xe){return xe&&xe.__esModule?xe:{default:xe}};Object.defineProperty(we,"__esModule",{value:!0}),we.rectangleCollidesWithQuad=we.squareCollidesWithQuad=we.getCircumscribedAlignedRectangle=we.isRectangleAligned=void 0;var O=V(U(3333)),P="outside",_e=!1;function Ee(xe){return xe.x1===xe.x2||xe.y1===xe.y2}function te(xe){var ue=Math.sqrt(Math.pow(xe.x2-xe.x1,2)+Math.pow(xe.y2-xe.y1,2)),Pe_x=(xe.y1-xe.y2)*xe.height/ue,Pe_y=(xe.x2-xe.x1)*xe.height/ue,ot={x:xe.x1,y:xe.y1},Fe={x:xe.x2,y:xe.y2},Ye={x:xe.x1+Pe_x,y:xe.y1+Pe_y},lt={x:xe.x2+Pe_x,y:xe.y2+Pe_y},vt=Math.min(ot.x,Fe.x,Ye.x,lt.x),vn=Math.max(ot.x,Fe.x,Ye.x,lt.x),Ne=Math.min(ot.y,Fe.y,Ye.y,lt.y);return{x1:vt,y1:Ne,x2:vn,y2:Ne,height:Math.max(ot.y,Fe.y,Ye.y,lt.y)-Ne}}function oe(xe,ue,Pe,ot,Fe,Ye,lt){return xe<ot+Ye&&xe+Pe>ot&&ue<Fe+lt&&ue+Pe>Fe}function B(xe,ue,Pe,ot,Fe,Ye,lt,vt){return xe<Fe+lt&&xe+Pe>Fe&&ue<Ye+vt&&ue+ot>Ye}function $(xe,ue,Pe,ot,Fe,Ye){var Ne=xe<Pe+Fe/2;return ue<ot+Ye/2?Ne?1:2:Ne?3:4}we.isRectangleAligned=Ee,we.getCircumscribedAlignedRectangle=te,we.squareCollidesWithQuad=oe,we.rectangleCollidesWithQuad=B;var Me=function(){function xe(ue){var Pe;void 0===ue&&(ue={}),this.containers=((Pe={})[P]=[],Pe),this.cache=null,this.lastRectangle=null;var ot=Math.pow(4,5);this.data=new Float32Array((4*ot-1)/3*4),this.resize(ue.boundaries?ue.boundaries:{x:0,y:0,width:1,height:1})}return xe.prototype.add=function(ue,Pe,ot,Fe){return function pe(xe,ue,Pe,ot,Fe,Ye,lt){for(var vt=Fe-lt,vn=Ye-lt,Ne=2*lt,ht=0,rt=0;;){if(ht>=xe)return Pe[rt]=Pe[rt]||[],void Pe[rt].push(ot);var Ge=4*rt+4,_t=4*rt+8,At=4*rt+12,Lt=4*rt+16,Ut=oe(vt,vn,Ne,ue[Ge+0],ue[Ge+1],ue[Ge+2],ue[Ge+3]),Oe=oe(vt,vn,Ne,ue[_t+0],ue[_t+1],ue[_t+2],ue[_t+3]),fe=oe(vt,vn,Ne,ue[At+0],ue[At+1],ue[At+2],ue[At+3]),wt=oe(vt,vn,Ne,ue[Lt+0],ue[Lt+1],ue[Lt+2],ue[Lt+3]),kt=[Ut,Oe,fe,wt].reduce(function(Un,ri){return ri?Un+1:Un},0);if(0===kt&&0===ht)return Pe[P].push(ot),void(!_e&&Pe[P].length>=5&&(_e=!0,console.warn("sigma/quadtree.insertNode: At least 5 nodes are outside the global quadtree zone. You might have a problem with the normalization function or the custom bounding box.")));if(0===kt)throw new Error("sigma/quadtree.insertNode: no collision (level: ".concat(ht,", key: ").concat(ot,", x: ").concat(Fe,", y: ").concat(Ye,", size: ").concat(lt,")."));if(3===kt)throw new Error("sigma/quadtree.insertNode: 3 impossible collisions (level: ".concat(ht,", key: ").concat(ot,", x: ").concat(Fe,", y: ").concat(Ye,", size: ").concat(lt,")."));if(kt>1)return Pe[rt]=Pe[rt]||[],void Pe[rt].push(ot);ht++,Ut&&(rt=Ge),Oe&&(rt=_t),fe&&(rt=At),wt&&(rt=Lt)}}(5,this.data,this.containers,ue,Pe,ot,Fe),this},xe.prototype.resize=function(ue){this.clear(),this.data[0]=ue.x,this.data[1]=ue.y,this.data[2]=ue.width,this.data[3]=ue.height,function ie(xe,ue){for(var Pe=[0,0];Pe.length;){var ot=Pe.pop(),Fe=Pe.pop(),Ye=4*Fe+4,lt=4*Fe+8,vt=4*Fe+12,vn=4*Fe+16,Ne=ue[Fe+0],ht=ue[Fe+1],_t=ue[Fe+2]/2,At=ue[Fe+3]/2;ue[Ye+0]=Ne,ue[Ye+1]=ht,ue[Ye+2]=_t,ue[Ye+3]=At,ue[lt+0]=Ne+_t,ue[lt+1]=ht,ue[lt+2]=_t,ue[lt+3]=At,ue[vt+0]=Ne,ue[vt+1]=ht+At,ue[vt+2]=_t,ue[vt+3]=At,ue[vn+0]=Ne+_t,ue[vn+1]=ht+At,ue[vn+2]=_t,ue[vn+3]=At,ot<xe-1&&(Pe.push(vn,ot+1),Pe.push(vt,ot+1),Pe.push(lt,ot+1),Pe.push(Ye,ot+1))}}(5,this.data)},xe.prototype.clear=function(){var ue;return this.containers=((ue={})[P]=[],ue),this},xe.prototype.point=function(ue,Pe){var ot=this.containers[P],Fe=0,Ye=0;do{this.containers[Fe]&&ot.push.apply(ot,D([],X(this.containers[Fe]),!1)),Fe=4*Fe+4*$(ue,Pe,this.data[Fe+0],this.data[Fe+1],this.data[Fe+2],this.data[Fe+3]),Ye++}while(Ye<=5);return ot},xe.prototype.rectangle=function(ue,Pe,ot,Fe,Ye){var lt,vt=this.lastRectangle;return vt&&ue===vt.x1&&ot===vt.x2&&Pe===vt.y1&&Fe===vt.y2&&Ye===vt.height||(this.lastRectangle={x1:ue,y1:Pe,x2:ot,y2:Fe,height:Ye},Ee(this.lastRectangle)||(this.lastRectangle=te(this.lastRectangle)),this.cache=function Be(xe,ue,Pe,ot,Fe,Ye,lt){for(var Ne,vt=[0,0],vn=[];vt.length;){var ht=vt.pop(),rt=vt.pop();if((Ne=Pe[rt])&&(0,O.default)(vn,Ne),!(ht>=xe)){var Ge=4*rt+4,_t=4*rt+8,At=4*rt+12,Lt=4*rt+16,Ut=B(ot,Fe,Ye,lt,ue[Ge+0],ue[Ge+1],ue[Ge+2],ue[Ge+3]),Oe=B(ot,Fe,Ye,lt,ue[_t+0],ue[_t+1],ue[_t+2],ue[_t+3]),fe=B(ot,Fe,Ye,lt,ue[At+0],ue[At+1],ue[At+2],ue[At+3]),wt=B(ot,Fe,Ye,lt,ue[Lt+0],ue[Lt+1],ue[Lt+2],ue[Lt+3]);Ut&&vt.push(Ge,ht+1),Oe&&vt.push(_t,ht+1),fe&&vt.push(At,ht+1),wt&&vt.push(Lt,ht+1)}}return vn}(5,this.data,this.containers,ue,Pe,Math.abs(ue-ot)||Math.abs(Pe-Fe),Ye),(lt=this.cache).push.apply(lt,D([],X(this.containers[P]),!1))),this.cache},xe}();we.default=Me},756:function(He,we,U){"use strict";var X=this&&this.__importDefault||function(L){return L&&L.__esModule?L:{default:L}};Object.defineProperty(we,"__esModule",{value:!0}),we.Sigma=we.MouseCaptor=we.QuadTree=we.Camera=void 0;var D=X(U(4870));we.Sigma=D.default;var V=X(U(2002));we.Camera=V.default;var O=X(U(3650));we.QuadTree=O.default;var H=X(U(2465));we.MouseCaptor=H.default,we.default=D.default},1285:(He,we)=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0}),we.default=function U(X,D,V,O,H){var L=H.edgeLabelSize,P=H.edgeLabelFont,q=H.edgeLabelWeight,K=D.label;if(K){X.fillStyle=H.edgeLabelColor.attribute?D[H.edgeLabelColor.attribute]||H.edgeLabelColor.color||"#000":H.edgeLabelColor.color,X.font="".concat(q," ").concat(L,"px ").concat(P);var ne=V.size,se=O.size,J=V.x,W=V.y,ae=O.x,_e=O.y,Ee=(J+ae)/2,te=(W+_e)/2,oe=ae-J,B=_e-W,$=Math.sqrt(oe*oe+B*B);if(!($<ne+se)){Ee=((J+=oe*ne/$)+(ae-=oe*se/$))/2,te=((W+=B*ne/$)+(_e-=B*se/$))/2,oe=ae-J,B=_e-W,$=Math.sqrt(oe*oe+B*B);var Be,ie=X.measureText(K).width;if(ie>$){for(ie=X.measureText(K+="\u2026").width;ie>$&&K.length>1;)K=K.slice(0,-2)+"\u2026",ie=X.measureText(K).width;if(K.length<4)return}Be=oe>0?B>0?Math.acos(oe/$):Math.asin(B/$):B>0?Math.acos(oe/$)+Math.PI:Math.asin(oe/$)+Math.PI/2,X.save(),X.translate(Ee,te),X.rotate(Be),X.fillText(K,-ie/2,D.size/2+L),X.restore()}}}},4997:function(He,we,U){"use strict";var X=this&&this.__importDefault||function(O){return O&&O.__esModule?O:{default:O}};Object.defineProperty(we,"__esModule",{value:!0});var D=X(U(9597));we.default=function V(O,H,L){var P=L.labelSize,q=L.labelFont;if(O.font="".concat(L.labelWeight," ").concat(P,"px ").concat(q),O.fillStyle="#FFF",O.shadowOffsetX=0,O.shadowOffsetY=0,O.shadowBlur=8,O.shadowColor="#000","string"==typeof H.label){var ne=O.measureText(H.label).width,se=Math.round(ne+5),J=Math.round(P+4),W=Math.max(H.size,P/2)+2,ae=Math.asin(J/2/W),_e=Math.sqrt(Math.abs(Math.pow(W,2)-Math.pow(J/2,2)));O.beginPath(),O.moveTo(H.x+_e,H.y+J/2),O.lineTo(H.x+W+se,H.y+J/2),O.lineTo(H.x+W+se,H.y-J/2),O.lineTo(H.x+_e,H.y-J/2),O.arc(H.x,H.y,W,ae,-ae),O.closePath(),O.fill()}else O.beginPath(),O.arc(H.x,H.y,H.size+2,0,2*Math.PI),O.closePath(),O.fill();O.shadowOffsetX=0,O.shadowOffsetY=0,O.shadowBlur=0,(0,D.default)(O,H,L)}},9597:(He,we)=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0}),we.default=function U(X,D,V){if(D.label){var O=V.labelSize,H=V.labelFont,L=V.labelWeight;X.fillStyle=V.labelColor.attribute?D[V.labelColor.attribute]||V.labelColor.color||"#000":V.labelColor.color,X.font="".concat(L," ").concat(O,"px ").concat(H),X.fillText(D.label,D.x+D.size+3,D.y+O/3)}}},6160:function(He,we,U){"use strict";var H,X=this&&this.__extends||(H=function(L,P){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,ee){q.__proto__=ee}||function(q,ee){for(var K in ee)Object.prototype.hasOwnProperty.call(ee,K)&&(q[K]=ee[K])})(L,P)},function(L,P){if("function"!=typeof P&&null!==P)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function q(){this.constructor=L}H(L,P),L.prototype=null===P?Object.create(P):(q.prototype=P.prototype,new q)});Object.defineProperty(we,"__esModule",{value:!0}),we.createEdgeCompoundProgram=we.AbstractEdgeProgram=void 0;var V=function(H){function L(P,q,ee,K,ne){return H.call(this,P,q,ee,K,ne)||this}return X(L,H),L}(U(727).AbstractProgram);we.AbstractEdgeProgram=V,we.createEdgeCompoundProgram=function O(H){return function(){function L(P,q){this.programs=H.map(function(ee){return new ee(P,q)})}return L.prototype.bufferData=function(){this.programs.forEach(function(P){return P.bufferData()})},L.prototype.allocate=function(P){this.programs.forEach(function(q){return q.allocate(P)})},L.prototype.bind=function(){},L.prototype.computeIndices=function(){this.programs.forEach(function(P){return P.computeIndices()})},L.prototype.render=function(P){this.programs.forEach(function(q){q.bind(),q.bufferData(),q.render(P)})},L.prototype.process=function(P,q,ee,K,ne){this.programs.forEach(function(se){return se.process(P,q,ee,K,ne)})},L}()}},4588:function(He,we,U){"use strict";var H,X=this&&this.__extends||(H=function(L,P){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,ee){q.__proto__=ee}||function(q,ee){for(var K in ee)Object.prototype.hasOwnProperty.call(ee,K)&&(q[K]=ee[K])})(L,P)},function(L,P){if("function"!=typeof P&&null!==P)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function q(){this.constructor=L}H(L,P),L.prototype=null===P?Object.create(P):(q.prototype=P.prototype,new q)});Object.defineProperty(we,"__esModule",{value:!0}),we.createNodeCompoundProgram=we.AbstractNodeProgram=void 0;var V=function(H){function L(P,q,ee,K,ne){var se=H.call(this,P,q,ee,K,ne)||this;se.positionLocation=P.getAttribLocation(se.program,"a_position"),se.sizeLocation=P.getAttribLocation(se.program,"a_size"),se.colorLocation=P.getAttribLocation(se.program,"a_color");var J=P.getUniformLocation(se.program,"u_matrix");if(null===J)throw new Error("AbstractNodeProgram: error while getting matrixLocation");se.matrixLocation=J;var W=P.getUniformLocation(se.program,"u_ratio");if(null===W)throw new Error("AbstractNodeProgram: error while getting ratioLocation");se.ratioLocation=W;var ae=P.getUniformLocation(se.program,"u_scale");if(null===ae)throw new Error("AbstractNodeProgram: error while getting scaleLocation");return se.scaleLocation=ae,se}return X(L,H),L.prototype.bind=function(){var P=this.gl;P.enableVertexAttribArray(this.positionLocation),P.enableVertexAttribArray(this.sizeLocation),P.enableVertexAttribArray(this.colorLocation),P.vertexAttribPointer(this.positionLocation,2,P.FLOAT,!1,this.attributes*Float32Array.BYTES_PER_ELEMENT,0),P.vertexAttribPointer(this.sizeLocation,1,P.FLOAT,!1,this.attributes*Float32Array.BYTES_PER_ELEMENT,8),P.vertexAttribPointer(this.colorLocation,4,P.UNSIGNED_BYTE,!0,this.attributes*Float32Array.BYTES_PER_ELEMENT,12)},L}(U(727).AbstractProgram);we.AbstractNodeProgram=V,we.createNodeCompoundProgram=function O(H){return function(){function L(P,q){this.programs=H.map(function(ee){return new ee(P,q)})}return L.prototype.bufferData=function(){this.programs.forEach(function(P){return P.bufferData()})},L.prototype.allocate=function(P){this.programs.forEach(function(q){return q.allocate(P)})},L.prototype.bind=function(){},L.prototype.render=function(P){this.programs.forEach(function(q){q.bind(),q.bufferData(),q.render(P)})},L.prototype.process=function(P,q,ee){this.programs.forEach(function(K){return K.process(P,q,ee)})},L}()}},727:(He,we,U)=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0}),we.AbstractProgram=void 0;var X=U(5166),D=function(){function V(O,H,L,P,q){this.array=new Float32Array,this.points=P,this.attributes=q,this.gl=O,this.vertexShaderSource=H,this.fragmentShaderSource=L;var ee=O.createBuffer();if(null===ee)throw new Error("AbstractProgram: error while creating the buffer");this.buffer=ee,O.bindBuffer(O.ARRAY_BUFFER,this.buffer),this.vertexShader=(0,X.loadVertexShader)(O,this.vertexShaderSource),this.fragmentShader=(0,X.loadFragmentShader)(O,this.fragmentShaderSource),this.program=(0,X.loadProgram)(O,[this.vertexShader,this.fragmentShader])}return V.prototype.bufferData=function(){var O=this.gl;O.bufferData(O.ARRAY_BUFFER,this.array,O.DYNAMIC_DRAW)},V.prototype.allocate=function(O){this.array=new Float32Array(this.points*this.attributes*O)},V.prototype.hasNothingToRender=function(){return 0===this.array.length},V}();we.AbstractProgram=D},1391:function(He,we,U){"use strict";var X=this&&this.__importDefault||function(L){return L&&L.__esModule?L:{default:L}};Object.defineProperty(we,"__esModule",{value:!0});var D=U(6160),V=X(U(1034)),O=X(U(2542)),H=(0,D.createEdgeCompoundProgram)([O.default,V.default]);we.default=H},1034:function(He,we,U){"use strict";var ne,X=this&&this.__extends||(ne=function(se,J){return(ne=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,ae){W.__proto__=ae}||function(W,ae){for(var _e in ae)Object.prototype.hasOwnProperty.call(ae,_e)&&(W[_e]=ae[_e])})(se,J)},function(se,J){if("function"!=typeof J&&null!==J)throw new TypeError("Class extends value "+String(J)+" is not a constructor or null");function W(){this.constructor=se}ne(se,J),se.prototype=null===J?Object.create(J):(W.prototype=J.prototype,new W)}),D=this&&this.__importDefault||function(ne){return ne&&ne.__esModule?ne:{default:ne}};Object.defineProperty(we,"__esModule",{value:!0});var V=U(1699),O=D(U(4647)),H=D(U(2018)),K=function(ne){function se(J){var W=ne.call(this,J,O.default,H.default,3,9)||this;W.positionLocation=J.getAttribLocation(W.program,"a_position"),W.colorLocation=J.getAttribLocation(W.program,"a_color"),W.normalLocation=J.getAttribLocation(W.program,"a_normal"),W.radiusLocation=J.getAttribLocation(W.program,"a_radius"),W.barycentricLocation=J.getAttribLocation(W.program,"a_barycentric");var ae=J.getUniformLocation(W.program,"u_matrix");if(null===ae)throw new Error("EdgeArrowHeadProgram: error while getting matrixLocation");W.matrixLocation=ae;var _e=J.getUniformLocation(W.program,"u_sqrtZoomRatio");if(null===_e)throw new Error("EdgeArrowHeadProgram: error while getting sqrtZoomRatioLocation");W.sqrtZoomRatioLocation=_e;var Ee=J.getUniformLocation(W.program,"u_correctionRatio");if(null===Ee)throw new Error("EdgeArrowHeadProgram: error while getting correctionRatioLocation");return W.correctionRatioLocation=Ee,W.bind(),W}return X(se,ne),se.prototype.bind=function(){var J=this.gl;J.enableVertexAttribArray(this.positionLocation),J.enableVertexAttribArray(this.normalLocation),J.enableVertexAttribArray(this.radiusLocation),J.enableVertexAttribArray(this.colorLocation),J.enableVertexAttribArray(this.barycentricLocation),J.vertexAttribPointer(this.positionLocation,2,J.FLOAT,!1,9*Float32Array.BYTES_PER_ELEMENT,0),J.vertexAttribPointer(this.normalLocation,2,J.FLOAT,!1,9*Float32Array.BYTES_PER_ELEMENT,8),J.vertexAttribPointer(this.radiusLocation,1,J.FLOAT,!1,9*Float32Array.BYTES_PER_ELEMENT,16),J.vertexAttribPointer(this.colorLocation,4,J.UNSIGNED_BYTE,!0,9*Float32Array.BYTES_PER_ELEMENT,20),J.vertexAttribPointer(this.barycentricLocation,3,J.FLOAT,!1,9*Float32Array.BYTES_PER_ELEMENT,24)},se.prototype.computeIndices=function(){},se.prototype.process=function(J,W,ae,_e,Ee){if(_e)for(var te=27*Ee,oe=te+27;te<oe;te++)this.array[te]=0;else{var B=ae.size||1,$=W.size||1,ie=J.x,pe=J.y,Be=W.x,Me=W.y,xe=(0,V.floatColor)(ae.color),ue=Be-ie,Pe=Me-pe,ot=ue*ue+Pe*Pe,Fe=0,Ye=0;ot&&(Fe=-Pe*(ot=1/Math.sqrt(ot))*B,Ye=ue*ot*B);var lt=27*Ee,vt=this.array;vt[lt++]=Be,vt[lt++]=Me,vt[lt++]=-Fe,vt[lt++]=-Ye,vt[lt++]=$,vt[lt++]=xe,vt[lt++]=1,vt[lt++]=0,vt[lt++]=0,vt[lt++]=Be,vt[lt++]=Me,vt[lt++]=-Fe,vt[lt++]=-Ye,vt[lt++]=$,vt[lt++]=xe,vt[lt++]=0,vt[lt++]=1,vt[lt++]=0,vt[lt++]=Be,vt[lt++]=Me,vt[lt++]=-Fe,vt[lt++]=-Ye,vt[lt++]=$,vt[lt++]=xe,vt[lt++]=0,vt[lt++]=0,vt[lt]=1}},se.prototype.render=function(J){if(!this.hasNothingToRender()){var W=this.gl;W.useProgram(this.program),W.uniformMatrix3fv(this.matrixLocation,!1,J.matrix),W.uniform1f(this.sqrtZoomRatioLocation,Math.sqrt(J.ratio)),W.uniform1f(this.correctionRatioLocation,J.correctionRatio),W.drawArrays(W.TRIANGLES,0,this.array.length/9)}},se}(U(6160).AbstractEdgeProgram);we.default=K},2542:function(He,we,U){"use strict";var ne,X=this&&this.__extends||(ne=function(se,J){return(ne=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,ae){W.__proto__=ae}||function(W,ae){for(var _e in ae)Object.prototype.hasOwnProperty.call(ae,_e)&&(W[_e]=ae[_e])})(se,J)},function(se,J){if("function"!=typeof J&&null!==J)throw new TypeError("Class extends value "+String(J)+" is not a constructor or null");function W(){this.constructor=se}ne(se,J),se.prototype=null===J?Object.create(J):(W.prototype=J.prototype,new W)}),D=this&&this.__importDefault||function(ne){return ne&&ne.__esModule?ne:{default:ne}};Object.defineProperty(we,"__esModule",{value:!0});var V=U(6160),O=U(1699),H=D(U(2529)),L=D(U(427)),K=function(ne){function se(J){var W=ne.call(this,J,H.default,L.default,4,6)||this,ae=J.createBuffer();if(null===ae)throw new Error("EdgeClampedProgram: error while getting resolutionLocation");W.indicesBuffer=ae,W.positionLocation=J.getAttribLocation(W.program,"a_position"),W.colorLocation=J.getAttribLocation(W.program,"a_color"),W.normalLocation=J.getAttribLocation(W.program,"a_normal"),W.radiusLocation=J.getAttribLocation(W.program,"a_radius");var _e=J.getUniformLocation(W.program,"u_matrix");if(null===_e)throw new Error("EdgeClampedProgram: error while getting matrixLocation");W.matrixLocation=_e;var Ee=J.getUniformLocation(W.program,"u_sqrtZoomRatio");if(null===Ee)throw new Error("EdgeClampedProgram: error while getting cameraRatioLocation");W.sqrtZoomRatioLocation=Ee;var te=J.getUniformLocation(W.program,"u_correctionRatio");if(null===te)throw new Error("EdgeClampedProgram: error while getting viewportRatioLocation");return W.correctionRatioLocation=te,W.canUse32BitsIndices=(0,O.canUse32BitsIndices)(J),W.IndicesArray=W.canUse32BitsIndices?Uint32Array:Uint16Array,W.indicesArray=new W.IndicesArray,W.indicesType=W.canUse32BitsIndices?J.UNSIGNED_INT:J.UNSIGNED_SHORT,W.bind(),W}return X(se,ne),se.prototype.bind=function(){var J=this.gl;J.bindBuffer(J.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),J.enableVertexAttribArray(this.positionLocation),J.enableVertexAttribArray(this.normalLocation),J.enableVertexAttribArray(this.colorLocation),J.enableVertexAttribArray(this.radiusLocation),J.vertexAttribPointer(this.positionLocation,2,J.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,0),J.vertexAttribPointer(this.normalLocation,2,J.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,8),J.vertexAttribPointer(this.colorLocation,4,J.UNSIGNED_BYTE,!0,6*Float32Array.BYTES_PER_ELEMENT,16),J.vertexAttribPointer(this.radiusLocation,1,J.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,20)},se.prototype.process=function(J,W,ae,_e,Ee){if(_e)for(var te=24*Ee,oe=te+24;te<oe;te++)this.array[te]=0;else{var B=ae.size||1,$=J.x,ie=J.y,pe=W.x,Be=W.y,Me=W.size||1,xe=(0,O.floatColor)(ae.color),ue=pe-$,Pe=Be-ie,ot=ue*ue+Pe*Pe,Fe=0,Ye=0;ot&&(Fe=-Pe*(ot=1/Math.sqrt(ot))*B,Ye=ue*ot*B);var lt=24*Ee,vt=this.array;vt[lt++]=$,vt[lt++]=ie,vt[lt++]=Fe,vt[lt++]=Ye,vt[lt++]=xe,vt[lt++]=0,vt[lt++]=$,vt[lt++]=ie,vt[lt++]=-Fe,vt[lt++]=-Ye,vt[lt++]=xe,vt[lt++]=0,vt[lt++]=pe,vt[lt++]=Be,vt[lt++]=Fe,vt[lt++]=Ye,vt[lt++]=xe,vt[lt++]=Me,vt[lt++]=pe,vt[lt++]=Be,vt[lt++]=-Fe,vt[lt++]=-Ye,vt[lt++]=xe,vt[lt]=-Me}},se.prototype.computeIndices=function(){for(var J=this.array.length/6,ae=new this.IndicesArray(J+J/2),_e=0,Ee=0;_e<J;_e+=4)ae[Ee++]=_e,ae[Ee++]=_e+1,ae[Ee++]=_e+2,ae[Ee++]=_e+2,ae[Ee++]=_e+1,ae[Ee++]=_e+3;this.indicesArray=ae},se.prototype.bufferData=function(){ne.prototype.bufferData.call(this);var J=this.gl;J.bufferData(J.ELEMENT_ARRAY_BUFFER,this.indicesArray,J.STATIC_DRAW)},se.prototype.render=function(J){if(!this.hasNothingToRender()){var W=this.gl;W.useProgram(this.program),W.uniformMatrix3fv(this.matrixLocation,!1,J.matrix),W.uniform1f(this.sqrtZoomRatioLocation,Math.sqrt(J.ratio)),W.uniform1f(this.correctionRatioLocation,J.correctionRatio),W.drawElements(W.TRIANGLES,this.indicesArray.length,this.indicesType,0)}},se}(V.AbstractEdgeProgram);we.default=K},8959:function(He,we,U){"use strict";var ne,X=this&&this.__extends||(ne=function(se,J){return(ne=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,ae){W.__proto__=ae}||function(W,ae){for(var _e in ae)Object.prototype.hasOwnProperty.call(ae,_e)&&(W[_e]=ae[_e])})(se,J)},function(se,J){if("function"!=typeof J&&null!==J)throw new TypeError("Class extends value "+String(J)+" is not a constructor or null");function W(){this.constructor=se}ne(se,J),se.prototype=null===J?Object.create(J):(W.prototype=J.prototype,new W)}),D=this&&this.__importDefault||function(ne){return ne&&ne.__esModule?ne:{default:ne}};Object.defineProperty(we,"__esModule",{value:!0});var V=U(1699),O=D(U(3364)),H=D(U(427)),K=function(ne){function se(J){var W=ne.call(this,J,O.default,H.default,4,5)||this,ae=J.createBuffer();if(null===ae)throw new Error("EdgeProgram: error while creating indicesBuffer");W.indicesBuffer=ae,W.positionLocation=J.getAttribLocation(W.program,"a_position"),W.colorLocation=J.getAttribLocation(W.program,"a_color"),W.normalLocation=J.getAttribLocation(W.program,"a_normal");var _e=J.getUniformLocation(W.program,"u_matrix");if(null===_e)throw new Error("EdgeProgram: error while getting matrixLocation");W.matrixLocation=_e;var Ee=J.getUniformLocation(W.program,"u_correctionRatio");if(null===Ee)throw new Error("EdgeProgram: error while getting correctionRatioLocation");W.correctionRatioLocation=Ee;var te=J.getUniformLocation(W.program,"u_sqrtZoomRatio");if(null===te)throw new Error("EdgeProgram: error while getting sqrtZoomRatioLocation");return W.sqrtZoomRatioLocation=te,W.canUse32BitsIndices=(0,V.canUse32BitsIndices)(J),W.IndicesArray=W.canUse32BitsIndices?Uint32Array:Uint16Array,W.indicesArray=new W.IndicesArray,W.indicesType=W.canUse32BitsIndices?J.UNSIGNED_INT:J.UNSIGNED_SHORT,W.bind(),W}return X(se,ne),se.prototype.bind=function(){var J=this.gl;J.bindBuffer(J.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),J.enableVertexAttribArray(this.positionLocation),J.enableVertexAttribArray(this.normalLocation),J.enableVertexAttribArray(this.colorLocation),J.vertexAttribPointer(this.positionLocation,2,J.FLOAT,!1,5*Float32Array.BYTES_PER_ELEMENT,0),J.vertexAttribPointer(this.normalLocation,2,J.FLOAT,!1,5*Float32Array.BYTES_PER_ELEMENT,8),J.vertexAttribPointer(this.colorLocation,4,J.UNSIGNED_BYTE,!0,5*Float32Array.BYTES_PER_ELEMENT,16)},se.prototype.computeIndices=function(){for(var J=this.array.length/5,ae=new this.IndicesArray(J+J/2),_e=0,Ee=0;_e<J;_e+=4)ae[Ee++]=_e,ae[Ee++]=_e+1,ae[Ee++]=_e+2,ae[Ee++]=_e+2,ae[Ee++]=_e+1,ae[Ee++]=_e+3;this.indicesArray=ae},se.prototype.bufferData=function(){ne.prototype.bufferData.call(this);var J=this.gl;J.bufferData(J.ELEMENT_ARRAY_BUFFER,this.indicesArray,J.STATIC_DRAW)},se.prototype.process=function(J,W,ae,_e,Ee){if(_e)for(var te=20*Ee,oe=te+20;te<oe;te++)this.array[te]=0;else{var B=ae.size||1,$=J.x,ie=J.y,pe=W.x,Be=W.y,Me=(0,V.floatColor)(ae.color),xe=pe-$,ue=Be-ie,Pe=xe*xe+ue*ue,ot=0,Fe=0;Pe&&(ot=-ue*(Pe=1/Math.sqrt(Pe))*B,Fe=xe*Pe*B);var Ye=20*Ee,lt=this.array;lt[Ye++]=$,lt[Ye++]=ie,lt[Ye++]=ot,lt[Ye++]=Fe,lt[Ye++]=Me,lt[Ye++]=$,lt[Ye++]=ie,lt[Ye++]=-ot,lt[Ye++]=-Fe,lt[Ye++]=Me,lt[Ye++]=pe,lt[Ye++]=Be,lt[Ye++]=ot,lt[Ye++]=Fe,lt[Ye++]=Me,lt[Ye++]=pe,lt[Ye++]=Be,lt[Ye++]=-ot,lt[Ye++]=-Fe,lt[Ye]=Me}},se.prototype.render=function(J){if(!this.hasNothingToRender()){var W=this.gl;W.useProgram(this.program),W.uniformMatrix3fv(this.matrixLocation,!1,J.matrix),W.uniform1f(this.sqrtZoomRatioLocation,Math.sqrt(J.ratio)),W.uniform1f(this.correctionRatioLocation,J.correctionRatio),W.drawElements(W.TRIANGLES,this.indicesArray.length,this.indicesType,0)}},se}(U(6160).AbstractEdgeProgram);we.default=K},105:function(He,we,U){"use strict";var K,X=this&&this.__extends||(K=function(ne,se){return(K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(J,W){J.__proto__=W}||function(J,W){for(var ae in W)Object.prototype.hasOwnProperty.call(W,ae)&&(J[ae]=W[ae])})(ne,se)},function(ne,se){if("function"!=typeof se&&null!==se)throw new TypeError("Class extends value "+String(se)+" is not a constructor or null");function J(){this.constructor=ne}K(ne,se),ne.prototype=null===se?Object.create(se):(J.prototype=se.prototype,new J)}),D=this&&this.__importDefault||function(K){return K&&K.__esModule?K:{default:K}};Object.defineProperty(we,"__esModule",{value:!0});var V=U(1699),O=D(U(7768)),H=D(U(2181)),ee=function(K){function ne(se){var J=K.call(this,se,O.default,H.default,1,4)||this;return J.bind(),J}return X(ne,K),ne.prototype.process=function(se,J,W){var ae=this.array,_e=1*W*4;if(J)return ae[_e++]=0,ae[_e++]=0,ae[_e++]=0,void(ae[_e++]=0);var Ee=(0,V.floatColor)(se.color);ae[_e++]=se.x,ae[_e++]=se.y,ae[_e++]=se.size,ae[_e]=Ee},ne.prototype.render=function(se){if(!this.hasNothingToRender()){var J=this.gl;J.useProgram(this.program),J.uniform1f(this.ratioLocation,1/Math.sqrt(se.ratio)),J.uniform1f(this.scaleLocation,se.scalingRatio),J.uniformMatrix3fv(this.matrixLocation,!1,se.matrix),J.drawArrays(J.POINTS,0,this.array.length/4)}},ne}(U(4588).AbstractNodeProgram);we.default=ee},2018:He=>{(()=>{"use strict";var we={d:(D,V)=>{for(var O in V)we.o(V,O)&&!we.o(D,O)&&Object.defineProperty(D,O,{enumerable:!0,get:V[O]})},o:(D,V)=>Object.prototype.hasOwnProperty.call(D,V),r:D=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(D,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(D,"__esModule",{value:!0})}},U={};we.r(U),we.d(U,{default:()=>X});const X="precision mediump float;\n\nvarying vec4 v_color;\n\nvoid main(void) {\n  gl_FragColor = v_color;\n}\n";He.exports=U})()},4647:He=>{(()=>{"use strict";var we={d:(D,V)=>{for(var O in V)we.o(V,O)&&!we.o(D,O)&&Object.defineProperty(D,O,{enumerable:!0,get:V[O]})},o:(D,V)=>Object.prototype.hasOwnProperty.call(D,V),r:D=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(D,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(D,"__esModule",{value:!0})}},U={};we.r(U),we.d(U,{default:()=>X});const X="attribute vec2 a_position;\nattribute vec2 a_normal;\nattribute float a_radius;\nattribute vec4 a_color;\nattribute vec3 a_barycentric;\n\nuniform mat3 u_matrix;\nuniform float u_sqrtZoomRatio;\nuniform float u_correctionRatio;\n\nvarying vec4 v_color;\n\nconst float minThickness = 1.7;\nconst float bias = 255.0 / 254.0;\nconst float arrowHeadWidthLengthRatio = 0.66;\nconst float arrowHeadLengthThicknessRatio = 2.5;\n\nvoid main() {\n  float normalLength = length(a_normal);\n  vec2 unitNormal = a_normal / normalLength;\n\n  // These first computations are taken from edge.vert.glsl and\n  // edge.clamped.vert.glsl. Please read it to get better comments on what's\n  // happening:\n  float pixelsThickness = max(normalLength, minThickness * u_sqrtZoomRatio);\n  float webGLThickness = pixelsThickness * u_correctionRatio;\n  float adaptedWebGLThickness = webGLThickness * u_sqrtZoomRatio;\n  float adaptedWebGLNodeRadius = a_radius * 2.0 * u_correctionRatio * u_sqrtZoomRatio;\n  float adaptedWebGLArrowHeadLength = adaptedWebGLThickness * 2.0 * arrowHeadLengthThicknessRatio;\n  float adaptedWebGLArrowHeadHalfWidth = adaptedWebGLArrowHeadLength * arrowHeadWidthLengthRatio / 2.0;\n\n  float da = a_barycentric.x;\n  float db = a_barycentric.y;\n  float dc = a_barycentric.z;\n\n  vec2 delta = vec2(\n      da * (adaptedWebGLNodeRadius * unitNormal.y)\n    + db * ((adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.y + adaptedWebGLArrowHeadHalfWidth * unitNormal.x)\n    + dc * ((adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.y - adaptedWebGLArrowHeadHalfWidth * unitNormal.x),\n\n      da * (-adaptedWebGLNodeRadius * unitNormal.x)\n    + db * (-(adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.x + adaptedWebGLArrowHeadHalfWidth * unitNormal.y)\n    + dc * (-(adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.x - adaptedWebGLArrowHeadHalfWidth * unitNormal.y)\n  );\n\n  vec2 position = (u_matrix * vec3(a_position + delta, 1)).xy;\n\n  gl_Position = vec4(position, 0, 1);\n\n  // Extract the color:\n  v_color = a_color;\n  v_color.a *= bias;\n}\n";He.exports=U})()},2529:He=>{(()=>{"use strict";var we={d:(D,V)=>{for(var O in V)we.o(V,O)&&!we.o(D,O)&&Object.defineProperty(D,O,{enumerable:!0,get:V[O]})},o:(D,V)=>Object.prototype.hasOwnProperty.call(D,V),r:D=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(D,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(D,"__esModule",{value:!0})}},U={};we.r(U),we.d(U,{default:()=>X});const X="attribute vec4 a_color;\nattribute vec2 a_normal;\nattribute vec2 a_position;\nattribute float a_radius;\n\nuniform mat3 u_matrix;\nuniform float u_sqrtZoomRatio;\nuniform float u_correctionRatio;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\n\nconst float minThickness = 1.7;\nconst float bias = 255.0 / 254.0;\nconst float arrowHeadLengthThicknessRatio = 2.5;\n\nvoid main() {\n  float normalLength = length(a_normal);\n  vec2 unitNormal = a_normal / normalLength;\n\n  // These first computations are taken from edge.vert.glsl. Please read it to\n  // get better comments on what's happening:\n  float pixelsThickness = max(normalLength, minThickness * u_sqrtZoomRatio);\n  float webGLThickness = pixelsThickness * u_correctionRatio;\n  float adaptedWebGLThickness = webGLThickness * u_sqrtZoomRatio;\n\n  // Here, we move the point to leave space for the arrow head:\n  float direction = sign(a_radius);\n  float adaptedWebGLNodeRadius = direction * a_radius * 2.0 * u_correctionRatio * u_sqrtZoomRatio;\n  float adaptedWebGLArrowHeadLength = adaptedWebGLThickness * 2.0 * arrowHeadLengthThicknessRatio;\n\n  vec2 compensationVector = vec2(-direction * unitNormal.y, direction * unitNormal.x) * (adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength);\n\n  // Here is the proper position of the vertex\n  gl_Position = vec4((u_matrix * vec3(a_position + unitNormal * adaptedWebGLThickness + compensationVector, 1)).xy, 0, 1);\n\n  v_thickness = webGLThickness / u_sqrtZoomRatio;\n\n  v_normal = unitNormal;\n  v_color = a_color;\n  v_color.a *= bias;\n}\n";He.exports=U})()},427:He=>{(()=>{"use strict";var we={d:(D,V)=>{for(var O in V)we.o(V,O)&&!we.o(D,O)&&Object.defineProperty(D,O,{enumerable:!0,get:V[O]})},o:(D,V)=>Object.prototype.hasOwnProperty.call(D,V),r:D=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(D,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(D,"__esModule",{value:!0})}},U={};we.r(U),we.d(U,{default:()=>X});const X="precision mediump float;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\n\nconst float feather = 0.001;\nconst vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\n\nvoid main(void) {\n  float dist = length(v_normal) * v_thickness;\n\n  float t = smoothstep(\n    v_thickness - feather,\n    v_thickness,\n    dist\n  );\n\n  gl_FragColor = mix(v_color, transparent, t);\n}\n";He.exports=U})()},3364:He=>{(()=>{"use strict";var we={d:(D,V)=>{for(var O in V)we.o(V,O)&&!we.o(D,O)&&Object.defineProperty(D,O,{enumerable:!0,get:V[O]})},o:(D,V)=>Object.prototype.hasOwnProperty.call(D,V),r:D=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(D,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(D,"__esModule",{value:!0})}},U={};we.r(U),we.d(U,{default:()=>X});const X='attribute vec4 a_color;\nattribute vec2 a_normal;\nattribute vec2 a_position;\n\nuniform mat3 u_matrix;\nuniform float u_sqrtZoomRatio;\nuniform float u_correctionRatio;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\n\nconst float minThickness = 1.7;\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n  float normalLength = length(a_normal);\n  vec2 unitNormal = a_normal / normalLength;\n\n  // We require edges to be at least `minThickness` pixels thick *on screen*\n  // (so we need to compensate the SQRT zoom ratio):\n  float pixelsThickness = max(normalLength, minThickness * u_sqrtZoomRatio);\n\n  // Then, we need to retrieve the normalized thickness of the edge in the WebGL\n  // referential (in a ([0, 1], [0, 1]) space), using our "magic" correction\n  // ratio:\n  float webGLThickness = pixelsThickness * u_correctionRatio;\n\n  // Finally, we adapt the edge thickness to the "SQRT rule" in sigma (so that\n  // items are not too big when zoomed in, and not too small when zoomed out).\n  // The exact computation should be `adapted = value * zoom / sqrt(zoom)`, but\n  // it\'s simpler like this:\n  float adaptedWebGLThickness = webGLThickness * u_sqrtZoomRatio;\n\n  // Here is the proper position of the vertex\n  gl_Position = vec4((u_matrix * vec3(a_position + unitNormal * adaptedWebGLThickness, 1)).xy, 0, 1);\n\n  // For the fragment shader though, we need a thickness that takes the "magic"\n  // correction ratio into account (as in webGLThickness), but so that the\n  // antialiasint effect does not depend on the zoom level. So here\'s yet\n  // another thickness version:\n  v_thickness = webGLThickness / u_sqrtZoomRatio;\n\n  v_normal = unitNormal;\n  v_color = a_color;\n  v_color.a *= bias;\n}\n';He.exports=U})()},2181:He=>{(()=>{"use strict";var we={d:(D,V)=>{for(var O in V)we.o(V,O)&&!we.o(D,O)&&Object.defineProperty(D,O,{enumerable:!0,get:V[O]})},o:(D,V)=>Object.prototype.hasOwnProperty.call(D,V),r:D=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(D,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(D,"__esModule",{value:!0})}},U={};we.r(U),we.d(U,{default:()=>X});const X="precision mediump float;\n\nvarying vec4 v_color;\nvarying float v_border;\n\nconst float radius = 0.5;\nconst vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\n\nvoid main(void) {\n  vec2 m = gl_PointCoord - vec2(0.5, 0.5);\n  float dist = radius - length(m);\n\n  float t = 0.0;\n  if (dist > v_border)\n    t = 1.0;\n  else if (dist > 0.0)\n    t = dist / v_border;\n\n  gl_FragColor = mix(transparent, v_color, t);\n}\n";He.exports=U})()},7768:He=>{(()=>{"use strict";var we={d:(D,V)=>{for(var O in V)we.o(V,O)&&!we.o(D,O)&&Object.defineProperty(D,O,{enumerable:!0,get:V[O]})},o:(D,V)=>Object.prototype.hasOwnProperty.call(D,V),r:D=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(D,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(D,"__esModule",{value:!0})}},U={};we.r(U),we.d(U,{default:()=>X});const X="attribute vec2 a_position;\nattribute float a_size;\nattribute vec4 a_color;\n\nuniform float u_ratio;\nuniform float u_scale;\nuniform mat3 u_matrix;\n\nvarying vec4 v_color;\nvarying float v_border;\n\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n  gl_Position = vec4(\n    (u_matrix * vec3(a_position, 1)).xy,\n    0,\n    1\n  );\n\n  // Multiply the point size twice:\n  //  - x SCALING_RATIO to correct the canvas scaling\n  //  - x 2 to correct the formulae\n  gl_PointSize = a_size * u_ratio * u_scale * 2.0;\n\n  v_border = (1.0 / u_ratio) * (0.5 / a_size);\n\n  // Extract the color:\n  v_color = a_color;\n  v_color.a *= bias;\n}\n";He.exports=U})()},5166:(He,we)=>{"use strict";function U(O,H,L){var q=H.createShader("VERTEX"===O?H.VERTEX_SHADER:H.FRAGMENT_SHADER);if(null===q)throw new Error("loadShader: error while creating the shader");if(H.shaderSource(q,L),H.compileShader(q),!H.getShaderParameter(q,H.COMPILE_STATUS)){var K=H.getShaderInfoLog(q);throw H.deleteShader(q),new Error("loadShader: error while compiling the shader:\n".concat(K,"\n").concat(L))}return q}Object.defineProperty(we,"__esModule",{value:!0}),we.loadProgram=we.loadFragmentShader=we.loadVertexShader=void 0,we.loadVertexShader=function X(O,H){return U("VERTEX",O,H)},we.loadFragmentShader=function D(O,H){return U("FRAGMENT",O,H)},we.loadProgram=function V(O,H){var P,q,L=O.createProgram();if(null===L)throw new Error("loadProgram: error while creating the program.");for(P=0,q=H.length;P<q;P++)O.attachShader(L,H[P]);if(O.linkProgram(L),!O.getProgramParameter(L,O.LINK_STATUS))throw O.deleteProgram(L),new Error("loadProgram: error while linking the program.");return L}},2621:function(He,we,U){"use strict";var X=this&&this.__importDefault||function(ee){return ee&&ee.__esModule?ee:{default:ee}};Object.defineProperty(we,"__esModule",{value:!0}),we.DEFAULT_SETTINGS=we.validateSettings=void 0;var D=X(U(9597)),V=X(U(4997)),O=X(U(1285)),H=X(U(105)),L=X(U(8959)),P=X(U(1391));we.validateSettings=function q(ee){if("number"!=typeof ee.labelDensity||ee.labelDensity<0)throw new Error("Settings: invalid `labelDensity`. Expecting a positive number.");var K=ee.minCameraRatio,ne=ee.maxCameraRatio;if("number"==typeof K&&"number"==typeof ne&&ne<K)throw new Error("Settings: invalid camera ratio boundaries. Expecting `maxCameraRatio` to be greater than `minCameraRatio`.")},we.DEFAULT_SETTINGS={hideEdgesOnMove:!1,hideLabelsOnMove:!1,renderLabels:!0,renderEdgeLabels:!1,enableEdgeClickEvents:!1,enableEdgeWheelEvents:!1,enableEdgeHoverEvents:!1,defaultNodeColor:"#999",defaultNodeType:"circle",defaultEdgeColor:"#ccc",defaultEdgeType:"line",labelFont:"Arial",labelSize:14,labelWeight:"normal",labelColor:{color:"#000"},edgeLabelFont:"Arial",edgeLabelSize:14,edgeLabelWeight:"normal",edgeLabelColor:{attribute:"color"},stagePadding:30,labelDensity:1,labelGridCellSize:100,labelRenderedSizeThreshold:6,nodeReducer:null,edgeReducer:null,zIndex:!1,minCameraRatio:null,maxCameraRatio:null,labelRenderer:D.default,hoverRenderer:V.default,edgeLabelRenderer:O.default,allowInvalidContainer:!1,nodeProgramClasses:{circle:H.default},edgeProgramClasses:{arrow:P.default,line:L.default}}},4870:function(He,we,U){"use strict";var te,X=this&&this.__extends||(te=function(oe,B){return(te=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,ie){$.__proto__=ie}||function($,ie){for(var pe in ie)Object.prototype.hasOwnProperty.call(ie,pe)&&($[pe]=ie[pe])})(oe,B)},function(oe,B){if("function"!=typeof B&&null!==B)throw new TypeError("Class extends value "+String(B)+" is not a constructor or null");function $(){this.constructor=oe}te(oe,B),oe.prototype=null===B?Object.create(B):($.prototype=B.prototype,new $)}),D=this&&this.__assign||function(){return D=Object.assign||function(te){for(var oe,B=1,$=arguments.length;B<$;B++)for(var ie in oe=arguments[B])Object.prototype.hasOwnProperty.call(oe,ie)&&(te[ie]=oe[ie]);return te},D.apply(this,arguments)},V=this&&this.__values||function(te){var oe="function"==typeof Symbol&&Symbol.iterator,B=oe&&te[oe],$=0;if(B)return B.call(te);if(te&&"number"==typeof te.length)return{next:function(){return te&&$>=te.length&&(te=void 0),{value:te&&te[$++],done:!te}}};throw new TypeError(oe?"Object is not iterable.":"Symbol.iterator is not defined.")},O=this&&this.__importDefault||function(te){return te&&te.__esModule?te:{default:te}};Object.defineProperty(we,"__esModule",{value:!0});var H=O(U(2002)),L=O(U(2465)),P=O(U(3650)),q=U(57),ee=U(1699),K=U(4942),ne=U(2621),se=O(U(1565)),J=U(7611),W=U(3180);function ae(te,oe,B){if(!B.hasOwnProperty("x")||!B.hasOwnProperty("y"))throw new Error('Sigma: could not find a valid position (x, y) for node "'.concat(oe,'". All your nodes must have a number "x" and "y". Maybe your forgot to apply a layout or your "nodeReducer" is not returning the correct data?'));return B.color||(B.color=te.defaultNodeColor),!B.label&&""!==B.label&&(B.label=null),B.label=null!=B.label?""+B.label:null,B.size||(B.size=2),B.hasOwnProperty("hidden")||(B.hidden=!1),B.hasOwnProperty("highlighted")||(B.highlighted=!1),B.hasOwnProperty("forceLabel")||(B.forceLabel=!1),(!B.type||""===B.type)&&(B.type=te.defaultNodeType),B.zIndex||(B.zIndex=0),B}function _e(te,oe,B){return B.color||(B.color=te.defaultEdgeColor),B.label||(B.label=""),B.size||(B.size=.5),B.hasOwnProperty("hidden")||(B.hidden=!1),B.hasOwnProperty("forceLabel")||(B.forceLabel=!1),(!B.type||""===B.type)&&(B.type=te.defaultEdgeType),B.zIndex||(B.zIndex=0),B}var Ee=function(te){function oe(B,$,ie){void 0===ie&&(ie={});var pe=te.call(this)||this;if(pe.elements={},pe.canvasContexts={},pe.webGLContexts={},pe.activeListeners={},pe.quadtree=new P.default,pe.labelGrid=new K.LabelGrid,pe.nodeDataCache={},pe.edgeDataCache={},pe.nodesWithForcedLabels=[],pe.edgesWithForcedLabels=[],pe.nodeExtent={x:[0,1],y:[0,1]},pe.matrix=(0,J.identity)(),pe.invMatrix=(0,J.identity)(),pe.correctionRatio=1,pe.customBBox=null,pe.normalizationFunction=(0,ee.createNormalizationFunction)({x:[0,1],y:[0,1]}),pe.cameraSizeRatio=1,pe.width=0,pe.height=0,pe.pixelRatio=(0,ee.getPixelRatio)(),pe.displayedLabels=new Set,pe.highlightedNodes=new Set,pe.hoveredNode=null,pe.hoveredEdge=null,pe.renderFrame=null,pe.renderHighlightedNodesFrame=null,pe.needToProcess=!1,pe.needToSoftProcess=!1,pe.checkEdgesEventsFrame=null,pe.nodePrograms={},pe.hoverNodePrograms={},pe.edgePrograms={},pe.settings=(0,ee.assign)({},ne.DEFAULT_SETTINGS,ie),(0,ne.validateSettings)(pe.settings),(0,ee.validateGraph)(B),!($ instanceof HTMLElement))throw new Error("Sigma: container should be an html element.");for(var Be in pe.graph=B,pe.container=$,pe.createWebGLContext("edges",{preserveDrawingBuffer:!0}),pe.createCanvasContext("edgeLabels"),pe.createWebGLContext("nodes"),pe.createCanvasContext("labels"),pe.createCanvasContext("hovers"),pe.createWebGLContext("hoverNodes"),pe.createCanvasContext("mouse"),pe.webGLContexts){var Me=pe.webGLContexts[Be];Me.blendFunc(Me.ONE,Me.ONE_MINUS_SRC_ALPHA),Me.enable(Me.BLEND)}for(var xe in pe.settings.nodeProgramClasses){var ue=pe.settings.nodeProgramClasses[xe];pe.nodePrograms[xe]=new ue(pe.webGLContexts.nodes,pe),pe.hoverNodePrograms[xe]=new ue(pe.webGLContexts.hoverNodes,pe)}for(var xe in pe.settings.edgeProgramClasses)pe.edgePrograms[xe]=new(0,pe.settings.edgeProgramClasses[xe])(pe.webGLContexts.edges,pe);return pe.resize(),pe.camera=new H.default,pe.bindCameraHandlers(),pe.mouseCaptor=new L.default(pe.elements.mouse,pe),pe.touchCaptor=new se.default(pe.elements.mouse,pe),pe.bindEventHandlers(),pe.bindGraphHandlers(),pe.handleSettingsUpdate(),pe.process(),pe.render(),pe}return X(oe,te),oe.prototype.createCanvas=function(B){var $=(0,ee.createElement)("canvas",{position:"absolute"},{class:"sigma-".concat(B)});return this.elements[B]=$,this.container.appendChild($),$},oe.prototype.createCanvasContext=function(B){var $=this.createCanvas(B);return this.canvasContexts[B]=$.getContext("2d",{preserveDrawingBuffer:!1,antialias:!1}),this},oe.prototype.createWebGLContext=function(B,$){var Be,ie=this.createCanvas(B),pe=D({preserveDrawingBuffer:!1,antialias:!1},$||{});return(Be=ie.getContext("webgl2",pe))||(Be=ie.getContext("webgl",pe)),Be||(Be=ie.getContext("experimental-webgl",pe)),this.webGLContexts[B]=Be,this},oe.prototype.bindCameraHandlers=function(){var B=this;return this.activeListeners.camera=function(){B._scheduleRefresh()},this.camera.on("updated",this.activeListeners.camera),this},oe.prototype.mouseIsOnNode=function(B,$,ie){var pe=B.x,Be=B.y,Me=$.x,xe=$.y;return pe>Me-ie&&pe<Me+ie&&Be>xe-ie&&Be<xe+ie&&Math.sqrt(Math.pow(pe-Me,2)+Math.pow(Be-xe,2))<ie},oe.prototype.getQuadNodes=function(B){var $=this.viewportToFramedGraph(B);return this.quadtree.point($.x,1-$.y)},oe.prototype.getNodeAtPosition=function(B){for(var $=B.x,ie=B.y,pe=this.getQuadNodes(B),Be=1/0,Me=null,xe=0,ue=pe.length;xe<ue;xe++){var Pe=pe[xe],ot=this.nodeDataCache[Pe],Fe=this.framedGraphToViewport(ot),Ye=this.scaleSize(ot.size);if(!ot.hidden&&this.mouseIsOnNode(B,Fe,Ye)){var lt=Math.sqrt(Math.pow($-Fe.x,2)+Math.pow(ie-Fe.y,2));lt<Be&&(Be=lt,Me=Pe)}}return Me},oe.prototype.bindEventHandlers=function(){var B=this;this.activeListeners.handleResize=function(){B.needToSoftProcess=!0,B._scheduleRefresh()},window.addEventListener("resize",this.activeListeners.handleResize),this.activeListeners.handleMove=function(ie){var pe={event:ie,preventSigmaDefault:function(){ie.preventSigmaDefault()}},Be=B.getNodeAtPosition(ie);if(Be&&B.hoveredNode!==Be&&!B.nodeDataCache[Be].hidden)return B.hoveredNode&&B.emit("leaveNode",D(D({},pe),{node:B.hoveredNode})),B.hoveredNode=Be,B.emit("enterNode",D(D({},pe),{node:Be})),void B.scheduleHighlightedNodesRender();if(B.hoveredNode){var Me=B.nodeDataCache[B.hoveredNode],xe=B.framedGraphToViewport(Me),ue=B.scaleSize(Me.size);if(!B.mouseIsOnNode(ie,xe,ue)){var Pe=B.hoveredNode;return B.hoveredNode=null,B.emit("leaveNode",D(D({},pe),{node:Pe})),void B.scheduleHighlightedNodesRender()}}!0===B.settings.enableEdgeHoverEvents?B.checkEdgeHoverEvents(pe):"debounce"===B.settings.enableEdgeHoverEvents&&(B.checkEdgesEventsFrame||(B.checkEdgesEventsFrame=(0,ee.requestFrame)(function(){B.checkEdgeHoverEvents(pe),B.checkEdgesEventsFrame=null})))};var $=function(ie){return function(pe){var Be={event:pe,preventSigmaDefault:function(){pe.preventSigmaDefault()}},xe=pe.original.isFakeSigmaMouseEvent?B.getNodeAtPosition(pe):B.hoveredNode;if(xe)return B.emit("".concat(ie,"Node"),D(D({},Be),{node:xe}));if("wheel"===ie?B.settings.enableEdgeWheelEvents:B.settings.enableEdgeClickEvents){var ue=B.getEdgeAtPoint(pe.x,pe.y);if(ue)return B.emit("".concat(ie,"Edge"),D(D({},Be),{edge:ue}))}return B.emit("".concat(ie,"Stage"),Be)}};return this.activeListeners.handleClick=$("click"),this.activeListeners.handleRightClick=$("rightClick"),this.activeListeners.handleDoubleClick=$("doubleClick"),this.activeListeners.handleWheel=$("wheel"),this.activeListeners.handleDown=$("down"),this.mouseCaptor.on("mousemove",this.activeListeners.handleMove),this.mouseCaptor.on("click",this.activeListeners.handleClick),this.mouseCaptor.on("rightClick",this.activeListeners.handleRightClick),this.mouseCaptor.on("doubleClick",this.activeListeners.handleDoubleClick),this.mouseCaptor.on("wheel",this.activeListeners.handleWheel),this.mouseCaptor.on("mousedown",this.activeListeners.handleDown),this},oe.prototype.bindGraphHandlers=function(){var B=this,$=this.graph;return this.activeListeners.graphUpdate=function(){B.needToProcess=!0,B._scheduleRefresh()},this.activeListeners.softGraphUpdate=function(){B.needToSoftProcess=!0,B._scheduleRefresh()},this.activeListeners.dropNodeGraphUpdate=function(ie){delete B.nodeDataCache[ie.key],B.hoveredNode===ie.key&&(B.hoveredNode=null),B.activeListeners.graphUpdate()},this.activeListeners.dropEdgeGraphUpdate=function(ie){delete B.edgeDataCache[ie.key],B.hoveredEdge===ie.key&&(B.hoveredEdge=null),B.activeListeners.graphUpdate()},this.activeListeners.clearEdgesGraphUpdate=function(){B.edgeDataCache={},B.hoveredEdge=null,B.activeListeners.graphUpdate()},this.activeListeners.clearGraphUpdate=function(){B.nodeDataCache={},B.hoveredNode=null,B.activeListeners.clearEdgesGraphUpdate()},$.on("nodeAdded",this.activeListeners.graphUpdate),$.on("nodeDropped",this.activeListeners.dropNodeGraphUpdate),$.on("nodeAttributesUpdated",this.activeListeners.softGraphUpdate),$.on("eachNodeAttributesUpdated",this.activeListeners.graphUpdate),$.on("edgeAdded",this.activeListeners.graphUpdate),$.on("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),$.on("edgeAttributesUpdated",this.activeListeners.softGraphUpdate),$.on("eachEdgeAttributesUpdated",this.activeListeners.graphUpdate),$.on("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),$.on("cleared",this.activeListeners.clearGraphUpdate),this},oe.prototype.checkEdgeHoverEvents=function(B){var $=this.hoveredNode?null:this.getEdgeAtPoint(B.event.x,B.event.y);return $!==this.hoveredEdge&&(this.hoveredEdge&&this.emit("leaveEdge",D(D({},B),{edge:this.hoveredEdge})),$&&this.emit("enterEdge",D(D({},B),{edge:$})),this.hoveredEdge=$),this},oe.prototype.getEdgeAtPoint=function(B,$){var ie,pe,Be=this,xe=this.edgeDataCache,ue=this.nodeDataCache;if(!(0,W.isPixelColored)(this.webGLContexts.edges,B*this.pixelRatio,$*this.pixelRatio))return null;var Pe=this.viewportToGraph({x:B,y:$}),ot=Pe.x,Fe=Pe.y,Ye=0;if(this.graph.someEdge(function(_t,At,Lt,Ut,Oe,fe){var wt=Oe.x,kt=Oe.y,Un=fe.x,ri=fe.y;if(xe[_t].hidden||ue[Lt].hidden||ue[Ut].hidden)return!1;if(wt!==Un||kt!==ri){var Et=Math.sqrt(Math.pow(Un-wt,2)+Math.pow(ri-kt,2)),Ot=Be.graphToViewport({x:wt,y:kt}),fn=Ot.x,et=Ot.y,Le=Be.graphToViewport({x:Un,y:ri}),Ht=Le.y,yn=Math.sqrt(Math.pow(Le.x-fn,2)+Math.pow(Ht-et,2));return Ye=Et/yn,!0}}),!Ye)return null;var lt=this.graph.filterEdges(function(_t,At,Lt,Ut,Oe,fe){return!(xe[_t].hidden||ue[Lt].hidden||ue[Ut].hidden)&&(!!(0,W.doEdgeCollideWithPoint)(ot,Fe,Oe.x,Oe.y,fe.x,fe.y,xe[_t].size*Ye/Be.cameraSizeRatio)||void 0)});if(0===lt.length)return null;var vt=lt[lt.length-1],vn=-1/0;try{for(var Ne=V(lt),ht=Ne.next();!ht.done;ht=Ne.next()){var rt=ht.value,Ge=this.graph.getEdgeAttribute(rt,"zIndex");Ge>=vn&&(vt=rt,vn=Ge)}}catch(_t){ie={error:_t}}finally{try{ht&&!ht.done&&(pe=Ne.return)&&pe.call(Ne)}finally{if(ie)throw ie.error}}return vt},oe.prototype.process=function(B){var $=this;void 0===B&&(B=!1);var ie=this.graph,pe=this.settings,Be=this.getDimensions(),Me=[1/0,-1/0],xe=[1/0,-1/0];this.quadtree.clear(),this.labelGrid.resizeAndClear(Be,pe.labelGridCellSize),this.highlightedNodes=new Set,this.nodeExtent=(0,ee.graphExtent)(ie),this.nodesWithForcedLabels=[],this.edgesWithForcedLabels=[];var ue=new H.default,Pe=(0,ee.matrixFromCamera)(ue.getState(),this.getDimensions(),this.getGraphDimensions(),this.getSetting("stagePadding")||0);this.normalizationFunction=(0,ee.createNormalizationFunction)(this.customBBox||this.nodeExtent);for(var ot={},Fe=ie.nodes(),Ye=0,lt=Fe.length;Ye<lt;Ye++){var vt=Fe[Ye],vn=Object.assign({},ie.getNodeAttributes(vt));pe.nodeReducer&&(vn=pe.nodeReducer(vt,vn)),ot[(Ne=ae(this.settings,vt,vn)).type]=(ot[Ne.type]||0)+1,this.nodeDataCache[vt]=Ne,this.normalizationFunction.applyTo(Ne),Ne.forceLabel&&this.nodesWithForcedLabels.push(vt),this.settings.zIndex&&(Ne.zIndex<Me[0]&&(Me[0]=Ne.zIndex),Ne.zIndex>Me[1]&&(Me[1]=Ne.zIndex))}for(var ht in this.nodePrograms){if(!this.nodePrograms.hasOwnProperty(ht))throw new Error('Sigma: could not find a suitable program for node type "'.concat(ht,'"!'));B||this.nodePrograms[ht].allocate(ot[ht]||0),ot[ht]=0}for(this.settings.zIndex&&Me[0]!==Me[1]&&(Fe=(0,ee.zIndexOrdering)(Me,function(wt){return $.nodeDataCache[wt].zIndex},Fe)),Ye=0,lt=Fe.length;Ye<lt;Ye++)this.quadtree.add(vt=Fe[Ye],(Ne=this.nodeDataCache[vt]).x,1-Ne.y,Ne.size/this.width),"string"==typeof Ne.label&&!Ne.hidden&&this.labelGrid.add(vt,Ne.size,this.framedGraphToViewport(Ne,{matrix:Pe})),this.nodePrograms[Ne.type].process(Ne,Ne.hidden,ot[Ne.type]++),Ne.highlighted&&!Ne.hidden&&this.highlightedNodes.add(vt);this.labelGrid.organize();var rt={},Ge=ie.edges();for(Ye=0,lt=Ge.length;Ye<lt;Ye++){var _t=Ge[Ye];vn=Object.assign({},ie.getEdgeAttributes(_t)),pe.edgeReducer&&(vn=pe.edgeReducer(_t,vn)),rt[(Ne=_e(this.settings,0,vn)).type]=(rt[Ne.type]||0)+1,this.edgeDataCache[_t]=Ne,Ne.forceLabel&&!Ne.hidden&&this.edgesWithForcedLabels.push(_t),this.settings.zIndex&&(Ne.zIndex<xe[0]&&(xe[0]=Ne.zIndex),Ne.zIndex>xe[1]&&(xe[1]=Ne.zIndex))}for(var ht in this.edgePrograms){if(!this.edgePrograms.hasOwnProperty(ht))throw new Error('Sigma: could not find a suitable program for edge type "'.concat(ht,'"!'));B||this.edgePrograms[ht].allocate(rt[ht]||0),rt[ht]=0}for(this.settings.zIndex&&xe[0]!==xe[1]&&(Ge=(0,ee.zIndexOrdering)(xe,function(wt){return $.edgeDataCache[wt].zIndex},Ge)),Ye=0,lt=Ge.length;Ye<lt;Ye++){var Ne=this.edgeDataCache[_t=Ge[Ye]],At=ie.extremities(_t),Lt=this.nodeDataCache[At[0]],Ut=this.nodeDataCache[At[1]];this.edgePrograms[Ne.type].process(Lt,Ut,Ne,Ne.hidden||Lt.hidden||Ut.hidden,rt[Ne.type]++)}for(var ht in this.edgePrograms){var fe=this.edgePrograms[ht];!B&&"function"==typeof fe.computeIndices&&fe.computeIndices()}return this},oe.prototype.handleSettingsUpdate=function(){return this.camera.minRatio=this.settings.minCameraRatio,this.camera.maxRatio=this.settings.maxCameraRatio,this.camera.setState(this.camera.validateState(this.camera.getState())),this},oe.prototype._refresh=function(){return this.needToProcess?this.process():this.needToSoftProcess&&this.process(!0),this.needToProcess=!1,this.needToSoftProcess=!1,this.render(),this},oe.prototype._scheduleRefresh=function(){var B=this;return this.renderFrame||(this.renderFrame=(0,ee.requestFrame)(function(){B._refresh(),B.renderFrame=null})),this},oe.prototype.renderLabels=function(){if(!this.settings.renderLabels)return this;var $,B=this.camera.getState();if(B.ratio>=1)$=new Set(this.graph.nodes());else{var ie=this.viewRectangle();$=new Set(this.quadtree.rectangle(ie.x1,1-ie.y1,ie.x2,1-ie.y2,ie.height))}var pe=this.labelGrid.getLabelsToDisplay(B.ratio,this.settings.labelDensity).concat(this.nodesWithForcedLabels);this.displayedLabels=new Set;for(var Be=this.canvasContexts.labels,Me=0,xe=pe.length;Me<xe;Me++){var ue=pe[Me],Pe=this.nodeDataCache[ue];if(!this.displayedLabels.has(ue)&&!Pe.hidden){var ot=this.framedGraphToViewport(Pe),Fe=ot.x,Ye=ot.y,lt=this.scaleSize(Pe.size);!Pe.forceLabel&&lt<this.settings.labelRenderedSizeThreshold||!$.has(ue)||(this.displayedLabels.add(ue),this.settings.labelRenderer(Be,D(D({key:ue},Pe),{size:lt,x:Fe,y:Ye}),this.settings))}}return this},oe.prototype.renderEdgeLabels=function(){if(!this.settings.renderEdgeLabels)return this;var B=this.canvasContexts.edgeLabels;B.clearRect(0,0,this.width,this.height);for(var $=(0,K.edgeLabelsToDisplayFromNodes)({graph:this.graph,hoveredNode:this.hoveredNode,displayedNodeLabels:this.displayedLabels,highlightedNodes:this.highlightedNodes}).concat(this.edgesWithForcedLabels),ie=new Set,pe=0,Be=$.length;pe<Be;pe++){var Me=$[pe],xe=this.graph.extremities(Me),ue=this.nodeDataCache[xe[0]],Pe=this.nodeDataCache[xe[1]],ot=this.edgeDataCache[Me];ie.has(Me)||ot.hidden||ue.hidden||Pe.hidden||(this.settings.edgeLabelRenderer(B,D(D({key:Me},ot),{size:this.scaleSize(ot.size)}),D(D(D({key:xe[0]},ue),this.framedGraphToViewport(ue)),{size:this.scaleSize(ue.size)}),D(D(D({key:xe[1]},Pe),this.framedGraphToViewport(Pe)),{size:this.scaleSize(Pe.size)}),this.settings),ie.add(Me))}return this},oe.prototype.renderHighlightedNodes=function(){var B=this,$=this.canvasContexts.hovers;$.clearRect(0,0,this.width,this.height);var pe=[];this.hoveredNode&&!this.nodeDataCache[this.hoveredNode].hidden&&pe.push(this.hoveredNode),this.highlightedNodes.forEach(function(ue){ue!==B.hoveredNode&&pe.push(ue)}),pe.forEach(function(ue){return function(ue){var Pe=B.nodeDataCache[ue],ot=B.framedGraphToViewport(Pe),Fe=ot.x,Ye=ot.y,lt=B.scaleSize(Pe.size);B.settings.hoverRenderer($,D(D({key:ue},Pe),{size:lt,x:Fe,y:Ye}),B.settings)}(ue)});var Be={};for(var Me in pe.forEach(function(ue){var Pe=B.nodeDataCache[ue].type;Be[Pe]=(Be[Pe]||0)+1}),this.hoverNodePrograms)this.hoverNodePrograms[Me].allocate(Be[Me]||0),Be[Me]=0;for(var Me in pe.forEach(function(ue){var Pe=B.nodeDataCache[ue];B.hoverNodePrograms[Pe.type].process(Pe,Pe.hidden,Be[Pe.type]++)}),this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT),this.hoverNodePrograms){var xe=this.hoverNodePrograms[Me];xe.bind(),xe.bufferData(),xe.render({matrix:this.matrix,width:this.width,height:this.height,ratio:this.camera.ratio,correctionRatio:this.correctionRatio/this.camera.ratio,scalingRatio:this.pixelRatio})}},oe.prototype.scheduleHighlightedNodesRender=function(){var B=this;this.renderHighlightedNodesFrame||this.renderFrame||(this.renderHighlightedNodesFrame=(0,ee.requestFrame)(function(){B.renderHighlightedNodesFrame=null,B.renderHighlightedNodes(),B.renderEdgeLabels()}))},oe.prototype.render=function(){var B=this;this.emit("beforeRender");var $=function(){return B.emit("afterRender"),B};if(this.renderFrame&&((0,ee.cancelFrame)(this.renderFrame),this.renderFrame=null,this.needToProcess=!1,this.needToSoftProcess=!1),this.resize(),this.clear(),this.updateCachedValues(),!this.graph.order)return $();var ie=this.mouseCaptor,pe=this.camera.isAnimated()||ie.isMoving||ie.draggedEvents||ie.currentWheelDirection,Be=this.camera.getState(),Me=this.getDimensions(),xe=this.getGraphDimensions(),ue=this.getSetting("stagePadding")||0;for(var Pe in this.matrix=(0,ee.matrixFromCamera)(Be,Me,xe,ue),this.invMatrix=(0,ee.matrixFromCamera)(Be,Me,xe,ue,!0),this.correctionRatio=(0,ee.getMatrixImpact)(this.matrix,Be,Me),this.nodePrograms)(ot=this.nodePrograms[Pe]).bind(),ot.bufferData(),ot.render({matrix:this.matrix,width:this.width,height:this.height,ratio:Be.ratio,correctionRatio:this.correctionRatio/Be.ratio,scalingRatio:this.pixelRatio});if(!this.settings.hideEdgesOnMove||!pe)for(var Pe in this.edgePrograms){var ot;(ot=this.edgePrograms[Pe]).bind(),ot.bufferData(),ot.render({matrix:this.matrix,width:this.width,height:this.height,ratio:Be.ratio,correctionRatio:this.correctionRatio/Be.ratio,scalingRatio:this.pixelRatio})}return this.settings.hideLabelsOnMove&&pe||(this.renderLabels(),this.renderEdgeLabels(),this.renderHighlightedNodes()),$()},oe.prototype.updateCachedValues=function(){var B=this.camera.getState().ratio;this.cameraSizeRatio=Math.sqrt(B)},oe.prototype.getCamera=function(){return this.camera},oe.prototype.getContainer=function(){return this.container},oe.prototype.getGraph=function(){return this.graph},oe.prototype.getMouseCaptor=function(){return this.mouseCaptor},oe.prototype.getTouchCaptor=function(){return this.touchCaptor},oe.prototype.getDimensions=function(){return{width:this.width,height:this.height}},oe.prototype.getGraphDimensions=function(){var B=this.customBBox||this.nodeExtent;return{width:B.x[1]-B.x[0]||1,height:B.y[1]-B.y[0]||1}},oe.prototype.getNodeDisplayData=function(B){var $=this.nodeDataCache[B];return $?Object.assign({},$):void 0},oe.prototype.getEdgeDisplayData=function(B){var $=this.edgeDataCache[B];return $?Object.assign({},$):void 0},oe.prototype.getSettings=function(){return D({},this.settings)},oe.prototype.getSetting=function(B){return this.settings[B]},oe.prototype.setSetting=function(B,$){return this.settings[B]=$,(0,ne.validateSettings)(this.settings),this.handleSettingsUpdate(),this.needToProcess=!0,this._scheduleRefresh(),this},oe.prototype.updateSetting=function(B,$){return this.settings[B]=$(this.settings[B]),(0,ne.validateSettings)(this.settings),this.handleSettingsUpdate(),this.needToProcess=!0,this._scheduleRefresh(),this},oe.prototype.resize=function(){var B=this.width,$=this.height;if(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.pixelRatio=(0,ee.getPixelRatio)(),0===this.width){if(!this.settings.allowInvalidContainer)throw new Error("Sigma: Container has no width. You can set the allowInvalidContainer setting to true to stop seing this error.");this.width=1}if(0===this.height){if(!this.settings.allowInvalidContainer)throw new Error("Sigma: Container has no height. You can set the allowInvalidContainer setting to true to stop seing this error.");this.height=1}if(B===this.width&&$===this.height)return this;for(var ie in this.emit("resize"),this.elements){var pe=this.elements[ie];pe.style.width=this.width+"px",pe.style.height=this.height+"px"}for(var ie in this.canvasContexts)this.elements[ie].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[ie].setAttribute("height",this.height*this.pixelRatio+"px"),1!==this.pixelRatio&&this.canvasContexts[ie].scale(this.pixelRatio,this.pixelRatio);for(var ie in this.webGLContexts)this.elements[ie].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[ie].setAttribute("height",this.height*this.pixelRatio+"px"),this.webGLContexts[ie].viewport(0,0,this.width*this.pixelRatio,this.height*this.pixelRatio);return this},oe.prototype.clear=function(){return this.webGLContexts.nodes.clear(this.webGLContexts.nodes.COLOR_BUFFER_BIT),this.webGLContexts.edges.clear(this.webGLContexts.edges.COLOR_BUFFER_BIT),this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT),this.canvasContexts.labels.clearRect(0,0,this.width,this.height),this.canvasContexts.hovers.clearRect(0,0,this.width,this.height),this.canvasContexts.edgeLabels.clearRect(0,0,this.width,this.height),this},oe.prototype.refresh=function(){return this.needToProcess=!0,this._refresh(),this},oe.prototype.scheduleRefresh=function(){return this.needToProcess=!0,this._scheduleRefresh(),this},oe.prototype.getViewportZoomedState=function(B,$){var ie=this.camera.getState(),Be=ie.angle,Me=ie.x,xe=ie.y,ue=$/ie.ratio,Pe={x:this.width/2,y:this.height/2},ot=this.viewportToFramedGraph(B),Fe=this.viewportToFramedGraph(Pe);return{angle:Be,x:(ot.x-Fe.x)*(1-ue)+Me,y:(ot.y-Fe.y)*(1-ue)+xe,ratio:$}},oe.prototype.viewRectangle=function(){var B=0*this.width/8,$=0*this.height/8,ie=this.viewportToFramedGraph({x:0-B,y:0-$}),pe=this.viewportToFramedGraph({x:this.width+B,y:0-$}),Be=this.viewportToFramedGraph({x:0,y:this.height+$});return{x1:ie.x,y1:ie.y,x2:pe.x,y2:pe.y,height:pe.y-Be.y}},oe.prototype.framedGraphToViewport=function(B,$){void 0===$&&($={});var pe=$.matrix?$.matrix:$.cameraState||$.viewportDimensions||$.graphDimensions?(0,ee.matrixFromCamera)($.cameraState||this.camera.getState(),$.viewportDimensions||this.getDimensions(),$.graphDimensions||this.getGraphDimensions(),$.padding||this.getSetting("stagePadding")||0):this.matrix,Be=(0,J.multiplyVec2)(pe,B);return{x:(1+Be.x)*this.width/2,y:(1-Be.y)*this.height/2}},oe.prototype.viewportToFramedGraph=function(B,$){void 0===$&&($={});var pe=$.matrix?$.matrix:$.cameraState||$.viewportDimensions||!$.graphDimensions?(0,ee.matrixFromCamera)($.cameraState||this.camera.getState(),$.viewportDimensions||this.getDimensions(),$.graphDimensions||this.getGraphDimensions(),$.padding||this.getSetting("stagePadding")||0,!0):this.invMatrix,Be=(0,J.multiplyVec2)(pe,{x:B.x/this.width*2-1,y:1-B.y/this.height*2});return isNaN(Be.x)&&(Be.x=0),isNaN(Be.y)&&(Be.y=0),Be},oe.prototype.viewportToGraph=function(B,$){return void 0===$&&($={}),this.normalizationFunction.inverse(this.viewportToFramedGraph(B,$))},oe.prototype.graphToViewport=function(B,$){return void 0===$&&($={}),this.framedGraphToViewport(this.normalizationFunction(B),$)},oe.prototype.getBBox=function(){return(0,ee.graphExtent)(this.graph)},oe.prototype.getCustomBBox=function(){return this.customBBox},oe.prototype.setCustomBBox=function(B){return this.customBBox=B,this._scheduleRefresh(),this},oe.prototype.kill=function(){var B=this.graph;this.emit("kill"),this.removeAllListeners(),this.camera.removeListener("updated",this.activeListeners.camera),window.removeEventListener("resize",this.activeListeners.handleResize),this.mouseCaptor.kill(),this.touchCaptor.kill(),B.removeListener("nodeAdded",this.activeListeners.dropNodeGraphUpdate),B.removeListener("nodeDropped",this.activeListeners.graphUpdate),B.removeListener("nodeAttributesUpdated",this.activeListeners.softGraphUpdate),B.removeListener("eachNodeAttributesUpdated",this.activeListeners.graphUpdate),B.removeListener("edgeAdded",this.activeListeners.graphUpdate),B.removeListener("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),B.removeListener("edgeAttributesUpdated",this.activeListeners.softGraphUpdate),B.removeListener("eachEdgeAttributesUpdated",this.activeListeners.graphUpdate),B.removeListener("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),B.removeListener("cleared",this.activeListeners.clearGraphUpdate),this.quadtree=new P.default,this.nodeDataCache={},this.edgeDataCache={},this.nodesWithForcedLabels=[],this.edgesWithForcedLabels=[],this.highlightedNodes.clear(),this.renderFrame&&((0,ee.cancelFrame)(this.renderFrame),this.renderFrame=null),this.renderHighlightedNodesFrame&&((0,ee.cancelFrame)(this.renderHighlightedNodesFrame),this.renderHighlightedNodesFrame=null);for(var $=this.container;$.firstChild;)$.removeChild($.firstChild)},oe.prototype.scaleSize=function(B){return B/this.cameraSizeRatio},oe.prototype.getCanvases=function(){return D({},this.elements)},oe}(q.TypedEventEmitter);we.default=Ee},57:function(He,we,U){"use strict";var O,X=this&&this.__extends||(O=function(H,L){return(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,q){P.__proto__=q}||function(P,q){for(var ee in q)Object.prototype.hasOwnProperty.call(q,ee)&&(P[ee]=q[ee])})(H,L)},function(H,L){if("function"!=typeof L&&null!==L)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");function P(){this.constructor=H}O(H,L),H.prototype=null===L?Object.create(L):(P.prototype=L.prototype,new P)});Object.defineProperty(we,"__esModule",{value:!0}),we.TypedEventEmitter=void 0;var V=function(O){function H(){var L=O.call(this)||this;return L.rawEmitter=L,L}return X(H,O),H}(U(9069).EventEmitter);we.TypedEventEmitter=V},2630:function(He,we,U){"use strict";var X=this&&this.__importDefault||function(H){return H&&H.__esModule?H:{default:H}};Object.defineProperty(we,"__esModule",{value:!0}),we.animateNodes=we.ANIMATE_DEFAULTS=void 0;var D=U(1699),V=X(U(4539));we.ANIMATE_DEFAULTS={easing:"quadraticInOut",duration:150},we.animateNodes=function O(H,L,P,q){var ee=Object.assign({},we.ANIMATE_DEFAULTS,P),K="function"==typeof ee.easing?ee.easing:V.default[ee.easing],ne=Date.now(),se={};for(var J in L){var W=L[J];for(var ae in se[J]={},W)se[J][ae]=H.getNodeAttribute(J,ae)}var _e=null,Ee=function(){_e=null;var te=(Date.now()-ne)/ee.duration;if(te>=1){for(var oe in L){var B=L[oe];for(var $ in B)H.setNodeAttribute(oe,$,B[$])}"function"==typeof q&&q()}else{for(var oe in te=K(te),L){B=L[oe];var ie=se[oe];for(var $ in B)H.setNodeAttribute(oe,$,B[$]*te+ie[$]*(1-te))}_e=(0,D.requestFrame)(Ee)}};return Ee(),function(){_e&&(0,D.cancelFrame)(_e)}}},5147:(He,we)=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0}),we.HTML_COLORS=void 0,we.HTML_COLORS={black:"#000000",silver:"#C0C0C0",gray:"#808080",grey:"#808080",white:"#FFFFFF",maroon:"#800000",red:"#FF0000",purple:"#800080",fuchsia:"#FF00FF",green:"#008000",lime:"#00FF00",olive:"#808000",yellow:"#FFFF00",navy:"#000080",blue:"#0000FF",teal:"#008080",aqua:"#00FFFF",darkblue:"#00008B",mediumblue:"#0000CD",darkgreen:"#006400",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",springgreen:"#00FF7F",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",rebeccapurple:"#663399",mediumaquamarine:"#66CDAA",dimgray:"#696969",dimgrey:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",slategrey:"#708090",lightslategray:"#778899",lightslategrey:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370DB",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",palevioletred:"#DB7093",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",lightyellow:"#FFFFE0",ivory:"#FFFFF0"}},4539:(He,we)=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0}),we.cubicInOut=we.cubicOut=we.cubicIn=we.quadraticInOut=we.quadraticOut=we.quadraticIn=we.linear=void 0,we.linear=function(q){return q},we.quadraticIn=function(q){return q*q},we.quadraticOut=function(q){return q*(2-q)},we.quadraticInOut=function(q){return(q*=2)<1?.5*q*q:-.5*(--q*(q-2)-1)},we.cubicIn=function(q){return q*q*q},we.cubicOut=function(q){return--q*q*q+1},we.cubicInOut=function(q){return(q*=2)<1?.5*q*q*q:.5*((q-=2)*q*q+2)},we.default={linear:we.linear,quadraticIn:we.quadraticIn,quadraticOut:we.quadraticOut,quadraticInOut:we.quadraticInOut,cubicIn:we.cubicIn,cubicOut:we.cubicOut,cubicInOut:we.cubicInOut}},3180:(He,we)=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0}),we.doEdgeCollideWithPoint=we.isPixelColored=void 0,we.isPixelColored=function U(D,V,O){var H=new Uint8Array(4);return D.readPixels(V,D.drawingBufferHeight-O,1,1,D.RGBA,D.UNSIGNED_BYTE,H),H[3]>0},we.doEdgeCollideWithPoint=function X(D,V,O,H,L,P,q){return!(D<O-q&&D<L-q||V<H-q&&V<P-q||D>O+q&&D>L+q||V>H+q&&V>P+q)&&Math.abs((L-O)*(H-V)-(O-D)*(P-H))/Math.sqrt(Math.pow(L-O,2)+Math.pow(P-H,2))<q/2}},1699:function(He,we,U){"use strict";var X=this&&this.__read||function(Fe,Ye){var lt="function"==typeof Symbol&&Fe[Symbol.iterator];if(!lt)return Fe;var vn,ht,vt=lt.call(Fe),Ne=[];try{for(;(void 0===Ye||Ye-- >0)&&!(vn=vt.next()).done;)Ne.push(vn.value)}catch(rt){ht={error:rt}}finally{try{vn&&!vn.done&&(lt=vt.return)&&lt.call(vt)}finally{if(ht)throw ht.error}}return Ne},D=this&&this.__importDefault||function(Fe){return Fe&&Fe.__esModule?Fe:{default:Fe}};Object.defineProperty(we,"__esModule",{value:!0}),we.validateGraph=we.canUse32BitsIndices=we.extractPixel=we.getMatrixImpact=we.matrixFromCamera=we.getCorrectionRatio=we.floatColor=we.floatArrayColor=we.parseColor=we.zIndexOrdering=we.createNormalizationFunction=we.graphExtent=we.getPixelRatio=we.createElement=we.cancelFrame=we.requestFrame=we.assignDeep=we.assign=we.isPlainObject=void 0;var V=D(U(6714)),O=U(7611),H=U(5147);function L(Fe){return"object"==typeof Fe&&null!==Fe&&Fe.constructor===Object}we.isPlainObject=L,we.assign=function P(Fe){for(var Ye=[],lt=1;lt<arguments.length;lt++)Ye[lt-1]=arguments[lt];Fe=Fe||{};for(var vt=0,vn=Ye.length;vt<vn;vt++){var Ne=Ye[vt];!Ne||Object.assign(Fe,Ne)}return Fe},we.assignDeep=function q(Fe){for(var Ye=[],lt=1;lt<arguments.length;lt++)Ye[lt-1]=arguments[lt];Fe=Fe||{};for(var vt=0,vn=Ye.length;vt<vn;vt++){var Ne=Ye[vt];if(Ne)for(var ht in Ne)Fe[ht]=L(Ne[ht])?q(Fe[ht],Ne[ht]):Ne[ht]}return Fe},we.requestFrame=typeof requestAnimationFrame<"u"?function(Fe){return requestAnimationFrame(Fe)}:function(Fe){return setTimeout(Fe,0)},we.cancelFrame=typeof cancelAnimationFrame<"u"?function(Fe){return cancelAnimationFrame(Fe)}:function(Fe){return clearTimeout(Fe)},we.createElement=function ee(Fe,Ye,lt){var vt=document.createElement(Fe);if(Ye)for(var vn in Ye)vt.style[vn]=Ye[vn];if(lt)for(var vn in lt)vt.setAttribute(vn,lt[vn]);return vt},we.getPixelRatio=function K(){return typeof window.devicePixelRatio<"u"?window.devicePixelRatio:1},we.graphExtent=function ne(Fe){if(!Fe.order)return{x:[0,1],y:[0,1]};var Ye=1/0,lt=-1/0,vt=1/0,vn=-1/0;return Fe.forEachNode(function(Ne,ht){var rt=ht.x,Ge=ht.y;rt<Ye&&(Ye=rt),rt>lt&&(lt=rt),Ge<vt&&(vt=Ge),Ge>vn&&(vn=Ge)}),{x:[Ye,lt],y:[vt,vn]}},we.createNormalizationFunction=function se(Fe){var Ye=X(Fe.x,2),lt=Ye[0],vt=Ye[1],vn=X(Fe.y,2),Ne=vn[0],ht=vn[1],rt=Math.max(vt-lt,ht-Ne),Ge=(vt+lt)/2,_t=(ht+Ne)/2;(0===rt||Math.abs(rt)===1/0||isNaN(rt))&&(rt=1),isNaN(Ge)&&(Ge=0),isNaN(_t)&&(_t=0);var At=function(Lt){return{x:.5+(Lt.x-Ge)/rt,y:.5+(Lt.y-_t)/rt}};return At.applyTo=function(Lt){Lt.x=.5+(Lt.x-Ge)/rt,Lt.y=.5+(Lt.y-_t)/rt},At.inverse=function(Lt){return{x:Ge+rt*(Lt.x-.5),y:_t+rt*(Lt.y-.5)}},At.ratio=rt,At},we.zIndexOrdering=function J(Fe,Ye,lt){return lt.sort(function(vt,vn){var Ne=Ye(vt)||0,ht=Ye(vn)||0;return Ne<ht?-1:Ne>ht?1:0})};var W=new Int8Array(4),ae=new Int32Array(W.buffer,0,1),_e=new Float32Array(W.buffer,0,1),Ee=/^\s*rgba?\s*\(/,te=/^\s*rgba?\s*\(\s*([0-9]*)\s*,\s*([0-9]*)\s*,\s*([0-9]*)(?:\s*,\s*(.*)?)?\)\s*$/;function oe(Fe){var Ye=0,lt=0,vt=0,vn=1;if("#"===Fe[0])4===Fe.length?(Ye=parseInt(Fe.charAt(1)+Fe.charAt(1),16),lt=parseInt(Fe.charAt(2)+Fe.charAt(2),16),vt=parseInt(Fe.charAt(3)+Fe.charAt(3),16)):(Ye=parseInt(Fe.charAt(1)+Fe.charAt(2),16),lt=parseInt(Fe.charAt(3)+Fe.charAt(4),16),vt=parseInt(Fe.charAt(5)+Fe.charAt(6),16));else if(Ee.test(Fe)){var Ne=Fe.match(te);Ne&&(Ye=+Ne[1],lt=+Ne[2],vt=+Ne[3],Ne[4]&&(vn=+Ne[4]))}return{r:Ye,g:lt,b:vt,a:vn}}we.parseColor=oe;var B={};for(var $ in H.HTML_COLORS)B[$]=pe(H.HTML_COLORS[$]),B[H.HTML_COLORS[$]]=B[$];function pe(Fe){if(typeof B[Fe]<"u")return B[Fe];var Ye=oe(Fe),Ne=Ye.a;ae[0]=4278190079&((Ne=255*Ne|0)<<24|Ye.b<<16|Ye.g<<8|Ye.r);var ht=_e[0];return B[Fe]=ht,ht}function Be(Fe,Ye){var lt=Fe.height/Fe.width,vt=Ye.height/Ye.width;return lt<1&&vt>1||lt>1&&vt<1?1:Math.min(Math.max(vt,1/vt),Math.max(1/lt,lt))}we.floatArrayColor=function ie(Fe){var Ye=oe(Fe=H.HTML_COLORS[Fe]||Fe);return new Float32Array([Ye.r/255,Ye.g/255,Ye.b/255,Ye.a])},we.floatColor=pe,we.getCorrectionRatio=Be,we.matrixFromCamera=function Me(Fe,Ye,lt,vt,vn){var Ne=Fe.angle,ht=Fe.ratio,rt=Fe.x,Ge=Fe.y,_t=Ye.width,At=Ye.height,Lt=(0,O.identity)(),Ut=Math.min(_t,At)-2*vt,Oe=Be(Ye,lt);return vn?((0,O.multiply)(Lt,(0,O.translate)((0,O.identity)(),rt,Ge)),(0,O.multiply)(Lt,(0,O.scale)((0,O.identity)(),ht)),(0,O.multiply)(Lt,(0,O.rotate)((0,O.identity)(),Ne)),(0,O.multiply)(Lt,(0,O.scale)((0,O.identity)(),_t/Ut/2/Oe,At/Ut/2/Oe))):((0,O.multiply)(Lt,(0,O.scale)((0,O.identity)(),Ut/_t*2*Oe,Ut/At*2*Oe)),(0,O.multiply)(Lt,(0,O.rotate)((0,O.identity)(),-Ne)),(0,O.multiply)(Lt,(0,O.scale)((0,O.identity)(),1/ht)),(0,O.multiply)(Lt,(0,O.translate)((0,O.identity)(),-rt,-Ge))),Lt},we.getMatrixImpact=function xe(Fe,Ye,lt){var vt=(0,O.multiplyVec2)(Fe,{x:Math.cos(Ye.angle),y:Math.sin(Ye.angle)},0),Ne=vt.y;return 1/Math.sqrt(Math.pow(vt.x,2)+Math.pow(Ne,2))/lt.width},we.extractPixel=function ue(Fe,Ye,lt,vt){var vn=vt||new Uint8Array(4);return Fe.readPixels(Ye,lt,1,1,Fe.RGBA,Fe.UNSIGNED_BYTE,vn),vn},we.canUse32BitsIndices=function Pe(Fe){return typeof WebGL2RenderingContext<"u"&&Fe instanceof WebGL2RenderingContext||!!Fe.getExtension("OES_element_index_uint")},we.validateGraph=function ot(Fe){if(!(0,V.default)(Fe))throw new Error("Sigma: invalid graph instance.");Fe.forEachNode(function(Ye,lt){if(!Number.isFinite(lt.x)||!Number.isFinite(lt.y))throw new Error("Sigma: Coordinates of node ".concat(Ye," are invalid. A node must have a numeric 'x' and 'y' attribute."))})}},7611:(He,we)=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0}),we.multiplyVec2=we.multiply=we.translate=we.rotate=we.scale=we.identity=void 0,we.identity=function U(){return Float32Array.of(1,0,0,0,1,0,0,0,1)},we.scale=function X(L,P,q){return L[0]=P,L[4]="number"==typeof q?q:P,L},we.rotate=function D(L,P){var q=Math.sin(P),ee=Math.cos(P);return L[0]=ee,L[1]=q,L[3]=-q,L[4]=ee,L},we.translate=function V(L,P,q){return L[6]=P,L[7]=q,L},we.multiply=function O(L,P){var q=L[0],ee=L[1],K=L[2],ne=L[3],se=L[4],J=L[5],W=L[6],ae=L[7],_e=L[8],Ee=P[0],te=P[1],oe=P[2],B=P[3],$=P[4],ie=P[5],pe=P[6],Be=P[7],Me=P[8];return L[0]=Ee*q+te*ne+oe*W,L[1]=Ee*ee+te*se+oe*ae,L[2]=Ee*K+te*J+oe*_e,L[3]=B*q+$*ne+ie*W,L[4]=B*ee+$*se+ie*ae,L[5]=B*K+$*J+ie*_e,L[6]=pe*q+Be*ne+Me*W,L[7]=pe*ee+Be*se+Me*ae,L[8]=pe*K+Be*J+Me*_e,L},we.multiplyVec2=function H(L,P,q){void 0===q&&(q=1);var ae=P.x,_e=P.y;return{x:ae*L[0]+_e*L[3]+L[6]*q,y:ae*L[1]+_e*L[4]+L[7]*q}}},295:(He,we,U)=>{He.exports=V;var X=U(9069).EventEmitter;function V(){X.call(this)}U(3894)(V,X),V.Readable=U(3154),V.Writable=U(520),V.Duplex=U(1339),V.Transform=U(6025),V.PassThrough=U(6071),V.finished=U(7542),V.pipeline=U(954),V.Stream=V,V.prototype.pipe=function(O,H){var L=this;function P(W){O.writable&&!1===O.write(W)&&L.pause&&L.pause()}function q(){L.readable&&L.resume&&L.resume()}L.on("data",P),O.on("drain",q),!O._isStdio&&(!H||!1!==H.end)&&(L.on("end",K),L.on("close",ne));var ee=!1;function K(){ee||(ee=!0,O.end())}function ne(){ee||(ee=!0,"function"==typeof O.destroy&&O.destroy())}function se(W){if(J(),0===X.listenerCount(this,"error"))throw W}function J(){L.removeListener("data",P),O.removeListener("drain",q),L.removeListener("end",K),L.removeListener("close",ne),L.removeListener("error",se),O.removeListener("error",se),L.removeListener("end",J),L.removeListener("close",J),O.removeListener("close",J)}return L.on("error",se),O.on("error",se),L.on("end",J),L.on("close",J),O.on("close",J),O.emit("pipe",L),O}},3054:(He,we,U)=>{"use strict";var X=U(858).Buffer,D=X.isEncoding||function(te){switch((te=""+te)&&te.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function H(te){var oe;switch(this.encoding=function O(te){var oe=function V(te){if(!te)return"utf8";for(var oe;;)switch(te){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return te;default:if(oe)return;te=(""+te).toLowerCase(),oe=!0}}(te);if("string"!=typeof oe&&(X.isEncoding===D||!D(te)))throw new Error("Unknown encoding: "+te);return oe||te}(te),this.encoding){case"utf16le":this.text=se,this.end=J,oe=4;break;case"utf8":this.fillLast=ee,oe=4;break;case"base64":this.text=W,this.end=ae,oe=3;break;default:return this.write=_e,void(this.end=Ee)}this.lastNeed=0,this.lastTotal=0,this.lastChar=X.allocUnsafe(oe)}function L(te){return te<=127?0:te>>5==6?2:te>>4==14?3:te>>3==30?4:te>>6==2?-1:-2}function ee(te){var oe=this.lastTotal-this.lastNeed,B=function q(te,oe,B){if(128!=(192&oe[0]))return te.lastNeed=0,"\ufffd";if(te.lastNeed>1&&oe.length>1){if(128!=(192&oe[1]))return te.lastNeed=1,"\ufffd";if(te.lastNeed>2&&oe.length>2&&128!=(192&oe[2]))return te.lastNeed=2,"\ufffd"}}(this,te);return void 0!==B?B:this.lastNeed<=te.length?(te.copy(this.lastChar,oe,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(te.copy(this.lastChar,oe,0,te.length),void(this.lastNeed-=te.length))}function se(te,oe){if((te.length-oe)%2==0){var B=te.toString("utf16le",oe);if(B){var $=B.charCodeAt(B.length-1);if($>=55296&&$<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=te[te.length-2],this.lastChar[1]=te[te.length-1],B.slice(0,-1)}return B}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=te[te.length-1],te.toString("utf16le",oe,te.length-1)}function J(te){var oe=te&&te.length?this.write(te):"";return this.lastNeed?oe+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):oe}function W(te,oe){var B=(te.length-oe)%3;return 0===B?te.toString("base64",oe):(this.lastNeed=3-B,this.lastTotal=3,1===B?this.lastChar[0]=te[te.length-1]:(this.lastChar[0]=te[te.length-2],this.lastChar[1]=te[te.length-1]),te.toString("base64",oe,te.length-B))}function ae(te){var oe=te&&te.length?this.write(te):"";return this.lastNeed?oe+this.lastChar.toString("base64",0,3-this.lastNeed):oe}function _e(te){return te.toString(this.encoding)}function Ee(te){return te&&te.length?this.write(te):""}we.s=H,H.prototype.write=function(te){if(0===te.length)return"";var oe,B;if(this.lastNeed){if(void 0===(oe=this.fillLast(te)))return"";B=this.lastNeed,this.lastNeed=0}else B=0;return B<te.length?oe?oe+this.text(te,B):this.text(te,B):oe||""},H.prototype.end=function ne(te){var oe=te&&te.length?this.write(te):"";return this.lastNeed?oe+"\ufffd":oe},H.prototype.text=function K(te,oe){var B=function P(te,oe,B){var $=oe.length-1;if($<B)return 0;var ie=L(oe[$]);return ie>=0?(ie>0&&(te.lastNeed=ie-1),ie):--$<B||-2===ie?0:(ie=L(oe[$]))>=0?(ie>0&&(te.lastNeed=ie-2),ie):--$<B||-2===ie?0:(ie=L(oe[$]))>=0?(ie>0&&(2===ie?ie=0:te.lastNeed=ie-3),ie):0}(this,te,oe);if(!this.lastNeed)return te.toString("utf8",oe);this.lastTotal=B;var $=te.length-(B-this.lastNeed);return te.copy(this.lastChar,0,$),te.toString("utf8",oe,$)},H.prototype.fillLast=function(te){if(this.lastNeed<=te.length)return te.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);te.copy(this.lastChar,this.lastTotal-this.lastNeed,0,te.length),this.lastNeed-=te.length}},858:(He,we,U)=>{var X=U(3172),D=X.Buffer;function V(H,L){for(var P in H)L[P]=H[P]}function O(H,L,P){return D(H,L,P)}D.from&&D.alloc&&D.allocUnsafe&&D.allocUnsafeSlow?He.exports=X:(V(X,we),we.Buffer=O),O.prototype=Object.create(D.prototype),V(D,O),O.from=function(H,L,P){if("number"==typeof H)throw new TypeError("Argument must not be a number");return D(H,L,P)},O.alloc=function(H,L,P){if("number"!=typeof H)throw new TypeError("Argument must be a number");var q=D(H);return void 0!==L?"string"==typeof P?q.fill(L,P):q.fill(L):q.fill(0),q},O.allocUnsafe=function(H){if("number"!=typeof H)throw new TypeError("Argument must be a number");return D(H)},O.allocUnsafeSlow=function(H){if("number"!=typeof H)throw new TypeError("Argument must be a number");return X.SlowBuffer(H)}},5570:function(He,we,U){"use strict";var X=this&&this.__extends||function(ee,K){for(var ne in K)K.hasOwnProperty(ne)&&(ee[ne]=K[ne]);function se(){this.constructor=ee}ee.prototype=null===K?Object.create(K):(se.prototype=K.prototype,new se)},D=U(5237),O={type:"change"},H={type:"start"},L={type:"end"},P=1e-6,q=function(ee){function K(ne,se,J){var W=ee.call(this)||this;return W.object=ne,W.domElement=void 0!==se?se:document,W.window=void 0!==J?J:window,W.enabled=!0,W.target=new D.Vector3,W.minDistance=0,W.maxDistance=1/0,W.minZoom=0,W.maxZoom=1/0,W.minPolarAngle=0,W.maxPolarAngle=Math.PI,W.minAzimuthAngle=-1/0,W.maxAzimuthAngle=1/0,W.enableDamping=!1,W.dampingFactor=.25,W.enableZoom=!0,W.zoomSpeed=1,W.enableRotate=!0,W.rotateSpeed=1,W.enablePan=!0,W.keyPanSpeed=7,W.autoRotate=!1,W.autoRotateSpeed=2,W.enableKeys=!0,W.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},W.mouseButtons={ORBIT:D.MOUSE.LEFT,ZOOM:D.MOUSE.MIDDLE,PAN:D.MOUSE.RIGHT},W.target0=W.target.clone(),W.position0=W.object.position.clone(),W.zoom0=W.object.zoom,W.updateOffset=new D.Vector3,W.updateQuat=(new D.Quaternion).setFromUnitVectors(ne.up,new D.Vector3(0,1,0)),W.updateQuatInverse=W.updateQuat.clone().inverse(),W.updateLastPosition=new D.Vector3,W.updateLastQuaternion=new D.Quaternion,W.state=-1,W.scale=1,W.spherical=new D.Spherical,W.sphericalDelta=new D.Spherical,W.panOffset=new D.Vector3,W.zoomChanged=!1,W.rotateStart=new D.Vector2,W.rotateEnd=new D.Vector2,W.rotateDelta=new D.Vector2,W.panStart=new D.Vector2,W.panEnd=new D.Vector2,W.panDelta=new D.Vector2,W.dollyStart=new D.Vector2,W.dollyEnd=new D.Vector2,W.dollyDelta=new D.Vector2,W.panLeftV=new D.Vector3,W.panUpV=new D.Vector3,W.panInternalOffset=new D.Vector3,W.onMouseDown=function(ae){if(!1!==W.enabled){if(ae.preventDefault(),ae.button===W.mouseButtons.ORBIT){if(!1===W.enableRotate)return;W.rotateStart.set(ae.clientX,ae.clientY),W.state=0}else if(ae.button===W.mouseButtons.ZOOM){if(!1===W.enableZoom)return;W.dollyStart.set(ae.clientX,ae.clientY),W.state=1}else if(ae.button===W.mouseButtons.PAN){if(!1===W.enablePan)return;W.panStart.set(ae.clientX,ae.clientY),W.state=2}-1!==W.state&&(document.addEventListener("mousemove",W.onMouseMove,!1),document.addEventListener("mouseup",W.onMouseUp,!1),W.dispatchEvent(H))}},W.onMouseMove=function(ae){if(!1!==W.enabled)if(ae.preventDefault(),0===W.state){if(!1===W.enableRotate)return;W.rotateEnd.set(ae.clientX,ae.clientY),W.rotateDelta.subVectors(W.rotateEnd,W.rotateStart);var _e=W.domElement===document?W.domElement.body:W.domElement;W.rotateLeft(2*Math.PI*W.rotateDelta.x/_e.clientWidth*W.rotateSpeed),W.rotateUp(2*Math.PI*W.rotateDelta.y/_e.clientHeight*W.rotateSpeed),W.rotateStart.copy(W.rotateEnd),W.update()}else if(1===W.state){if(!1===W.enableZoom)return;W.dollyEnd.set(ae.clientX,ae.clientY),W.dollyDelta.subVectors(W.dollyEnd,W.dollyStart),W.dollyDelta.y>0?W.dollyIn(W.getZoomScale()):W.dollyDelta.y<0&&W.dollyOut(W.getZoomScale()),W.dollyStart.copy(W.dollyEnd),W.update()}else if(2===W.state){if(!1===W.enablePan)return;W.panEnd.set(ae.clientX,ae.clientY),W.panDelta.subVectors(W.panEnd,W.panStart),W.pan(W.panDelta.x,W.panDelta.y),W.panStart.copy(W.panEnd),W.update()}},W.onMouseUp=function(ae){!1!==W.enabled&&(document.removeEventListener("mousemove",W.onMouseMove,!1),document.removeEventListener("mouseup",W.onMouseUp,!1),W.dispatchEvent(L),W.state=-1)},W.onMouseWheel=function(ae){!1===W.enabled||!1===W.enableZoom||-1!==W.state&&0!==W.state||(ae.preventDefault(),ae.stopPropagation(),ae.deltaY<0?W.dollyOut(W.getZoomScale()):ae.deltaY>0&&W.dollyIn(W.getZoomScale()),W.update(),W.dispatchEvent(H),W.dispatchEvent(L))},W.onKeyDown=function(ae){if(!1!==W.enabled&&!1!==W.enableKeys&&!1!==W.enablePan)switch(ae.keyCode){case W.keys.UP:W.pan(0,W.keyPanSpeed),W.update();break;case W.keys.BOTTOM:W.pan(0,-W.keyPanSpeed),W.update();break;case W.keys.LEFT:W.pan(W.keyPanSpeed,0),W.update();break;case W.keys.RIGHT:W.pan(-W.keyPanSpeed,0),W.update()}},W.onTouchStart=function(ae){if(!1!==W.enabled){switch(ae.touches.length){case 1:if(!1===W.enableRotate)return;W.rotateStart.set(ae.touches[0].pageX,ae.touches[0].pageY),W.state=3;break;case 2:if(!1===W.enableZoom)return;var _e=ae.touches[0].pageX-ae.touches[1].pageX,Ee=ae.touches[0].pageY-ae.touches[1].pageY,te=Math.sqrt(_e*_e+Ee*Ee);W.dollyStart.set(0,te),W.state=4;break;case 3:if(!1===W.enablePan)return;W.panStart.set(ae.touches[0].pageX,ae.touches[0].pageY),W.state=5;break;default:W.state=-1}-1!==W.state&&W.dispatchEvent(H)}},W.onTouchMove=function(ae){if(!1!==W.enabled)switch(ae.preventDefault(),ae.stopPropagation(),ae.touches.length){case 1:if(!1===W.enableRotate||3!==W.state)return;W.rotateEnd.set(ae.touches[0].pageX,ae.touches[0].pageY),W.rotateDelta.subVectors(W.rotateEnd,W.rotateStart);var _e=W.domElement===document?W.domElement.body:W.domElement;W.rotateLeft(2*Math.PI*W.rotateDelta.x/_e.clientWidth*W.rotateSpeed),W.rotateUp(2*Math.PI*W.rotateDelta.y/_e.clientHeight*W.rotateSpeed),W.rotateStart.copy(W.rotateEnd),W.update();break;case 2:if(!1===W.enableZoom||4!==W.state)return;var Ee=ae.touches[0].pageX-ae.touches[1].pageX,te=ae.touches[0].pageY-ae.touches[1].pageY,oe=Math.sqrt(Ee*Ee+te*te);W.dollyEnd.set(0,oe),W.dollyDelta.subVectors(W.dollyEnd,W.dollyStart),W.dollyDelta.y>0?W.dollyOut(W.getZoomScale()):W.dollyDelta.y<0&&W.dollyIn(W.getZoomScale()),W.dollyStart.copy(W.dollyEnd),W.update();break;case 3:if(!1===W.enablePan||5!==W.state)return;W.panEnd.set(ae.touches[0].pageX,ae.touches[0].pageY),W.panDelta.subVectors(W.panEnd,W.panStart),W.pan(W.panDelta.x,W.panDelta.y),W.panStart.copy(W.panEnd),W.update();break;default:W.state=-1}},W.onTouchEnd=function(ae){!1!==W.enabled&&(W.dispatchEvent(L),W.state=-1)},W.onContextMenu=function(ae){ae.preventDefault()},W.domElement.addEventListener("contextmenu",W.onContextMenu,!1),W.domElement.addEventListener("mousedown",W.onMouseDown,!1),W.domElement.addEventListener("wheel",W.onMouseWheel,!1),W.domElement.addEventListener("touchstart",W.onTouchStart,!1),W.domElement.addEventListener("touchend",W.onTouchEnd,!1),W.domElement.addEventListener("touchmove",W.onTouchMove,!1),W.window.addEventListener("keydown",W.onKeyDown,!1),W.update(),W}return X(K,ee),K.prototype.update=function(){var ne=this.object.position;return this.updateOffset.copy(ne).sub(this.target),this.updateOffset.applyQuaternion(this.updateQuat),this.spherical.setFromVector3(this.updateOffset),this.autoRotate&&-1===this.state&&this.rotateLeft(this.getAutoRotationAngle()),this.spherical.theta+=this.sphericalDelta.theta,this.spherical.phi+=this.sphericalDelta.phi,this.spherical.theta=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,this.spherical.theta)),this.spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this.spherical.phi)),this.spherical.makeSafe(),this.spherical.radius*=this.scale,this.spherical.radius=Math.max(this.minDistance,Math.min(this.maxDistance,this.spherical.radius)),this.target.add(this.panOffset),this.updateOffset.setFromSpherical(this.spherical),this.updateOffset.applyQuaternion(this.updateQuatInverse),ne.copy(this.target).add(this.updateOffset),this.object.lookAt(this.target),!0===this.enableDamping?(this.sphericalDelta.theta*=1-this.dampingFactor,this.sphericalDelta.phi*=1-this.dampingFactor):this.sphericalDelta.set(0,0,0),this.scale=1,this.panOffset.set(0,0,0),!!(this.zoomChanged||this.updateLastPosition.distanceToSquared(this.object.position)>P||8*(1-this.updateLastQuaternion.dot(this.object.quaternion))>P)&&(this.dispatchEvent(O),this.updateLastPosition.copy(this.object.position),this.updateLastQuaternion.copy(this.object.quaternion),this.zoomChanged=!1,!0)},K.prototype.panLeft=function(ne,se){this.panLeftV.setFromMatrixColumn(se,0),this.panLeftV.multiplyScalar(-ne),this.panOffset.add(this.panLeftV)},K.prototype.panUp=function(ne,se){this.panUpV.setFromMatrixColumn(se,1),this.panUpV.multiplyScalar(ne),this.panOffset.add(this.panUpV)},K.prototype.pan=function(ne,se){var J=this.domElement===document?this.domElement.body:this.domElement;if(this.object instanceof D.PerspectiveCamera){this.panInternalOffset.copy(this.object.position).sub(this.target);var ae=this.panInternalOffset.length();ae*=Math.tan(this.object.fov/2*Math.PI/180),this.panLeft(2*ne*ae/J.clientHeight,this.object.matrix),this.panUp(2*se*ae/J.clientHeight,this.object.matrix)}else this.object instanceof D.OrthographicCamera?(this.panLeft(ne*(this.object.right-this.object.left)/this.object.zoom/J.clientWidth,this.object.matrix),this.panUp(se*(this.object.top-this.object.bottom)/this.object.zoom/J.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)},K.prototype.dollyIn=function(ne){this.object instanceof D.PerspectiveCamera?this.scale/=ne:this.object instanceof D.OrthographicCamera?(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom*ne)),this.object.updateProjectionMatrix(),this.zoomChanged=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)},K.prototype.dollyOut=function(ne){this.object instanceof D.PerspectiveCamera?this.scale*=ne:this.object instanceof D.OrthographicCamera?(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/ne)),this.object.updateProjectionMatrix(),this.zoomChanged=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)},K.prototype.getAutoRotationAngle=function(){return 2*Math.PI/60/60*this.autoRotateSpeed},K.prototype.getZoomScale=function(){return Math.pow(.95,this.zoomSpeed)},K.prototype.rotateLeft=function(ne){this.sphericalDelta.theta-=ne},K.prototype.rotateUp=function(ne){this.sphericalDelta.phi-=ne},K.prototype.getPolarAngle=function(){return this.spherical.phi},K.prototype.getAzimuthalAngle=function(){return this.spherical.theta},K.prototype.dispose=function(){this.domElement.removeEventListener("contextmenu",this.onContextMenu,!1),this.domElement.removeEventListener("mousedown",this.onMouseDown,!1),this.domElement.removeEventListener("wheel",this.onMouseWheel,!1),this.domElement.removeEventListener("touchstart",this.onTouchStart,!1),this.domElement.removeEventListener("touchend",this.onTouchEnd,!1),this.domElement.removeEventListener("touchmove",this.onTouchMove,!1),document.removeEventListener("mousemove",this.onMouseMove,!1),document.removeEventListener("mouseup",this.onMouseUp,!1),this.window.removeEventListener("keydown",this.onKeyDown,!1)},K.prototype.reset=function(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(O),this.update(),this.state=-1},Object.defineProperty(K.prototype,"center",{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target},enumerable:!0,configurable:!0}),Object.defineProperty(K.prototype,"noZoom",{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(ne){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!ne},enumerable:!0,configurable:!0}),K}(D.EventDispatcher);we.OrbitControls=q},5237:(He,we,U)=>{"use strict";function X(){}U.r(we),U.d(we,{AddEquation:()=>Pe,AddOperation:()=>ze,AdditiveBlending:()=>pe,AlphaFormat:()=>gl,AlwaysDepth:()=>wt,AmbientLight:()=>Kg,AnimationClip:()=>Ml,AnimationMixer:()=>ig,AnimationObjectGroup:()=>mc,AnimationUtils:()=>gc,ArcCurve:()=>bp,ArrowHelper:()=>Nc,Audio:()=>yh,AudioAnalyser:()=>Vm,AudioContext:()=>yp,AudioListener:()=>zm,AudioLoader:()=>tg,AxisHelper:()=>Of,BackSide:()=>W,BasicDepthPacking:()=>yv,BasicShadowMap:()=>K,BinaryTextureLoader:()=>zl,BlendingMode:()=>ue,Bone:()=>Rm,BooleanKeyframeTrack:()=>Zg,BoundingBoxHelper:()=>Xy,Box2:()=>od,Box3:()=>Ts,BoxBufferGeometry:()=>Nl,BoxGeometry:()=>Il,BoxHelper:()=>ag,BufferAttribute:()=>gr,BufferGeometry:()=>Dr,BufferGeometryLoader:()=>mh,ByteType:()=>nd,Cache:()=>_u,Camera:()=>Ua,CameraHelper:()=>im,CanvasRenderer:()=>Ky,CanvasTexture:()=>up,CatmullRomCurve3:()=>Gm,CineonToneMapping:()=>Cs,CircleBufferGeometry:()=>Ra,CircleGeometry:()=>Bl,ClampToEdgeWrapping:()=>cc,Clock:()=>Hm,ClosedSplineCurve3:()=>$m,Color:()=>Xr,ColorKeyframeTrack:()=>pp,CompressedTexture:()=>Oc,CompressedTextureLoader:()=>Om,ConeBufferGeometry:()=>eg,ConeGeometry:()=>Jp,CubeCamera:()=>Ul,CubeGeometry:()=>Il,CubeReflectionMapping:()=>ws,CubeRefractionMapping:()=>ua,CubeTexture:()=>Od,CubeTextureLoader:()=>Fm,CubeUVReflectionMapping:()=>ql,CubeUVRefractionMapping:()=>Wf,CubicBezierCurve:()=>Zd,CubicBezierCurve3:()=>Gy,CubicInterpolant:()=>Wh,CullFaceBack:()=>H,CullFaceFront:()=>L,CullFaceFrontBack:()=>P,CullFaceNone:()=>O,Curve:()=>Vl,CurvePath:()=>em,CurveUtils:()=>nc,CustomBlending:()=>xe,CylinderBufferGeometry:()=>Tf,CylinderGeometry:()=>Jl,Cylindrical:()=>bl,DataTexture:()=>ns,DataTextureLoader:()=>tc,DefaultLoadingManager:()=>fc,DepthFormat:()=>pt,DepthStencilFormat:()=>st,DepthTexture:()=>Xg,DirectionalLight:()=>Df,DirectionalLightHelper:()=>og,DirectionalLightShadow:()=>Mf,DiscreteInterpolant:()=>Wu,DodecahedronBufferGeometry:()=>ph,DodecahedronGeometry:()=>Kp,DoubleSide:()=>ae,DstAlphaFactor:()=>_t,DstColorFactor:()=>Lt,DynamicBufferAttribute:()=>Bv,EdgesGeometry:()=>_l,EdgesHelper:()=>Q_,EllipseCurve:()=>fd,EqualDepth:()=>ri,EquirectangularReflectionMapping:()=>sr,EquirectangularRefractionMapping:()=>il,Euler:()=>Rs,EventDispatcher:()=>X,ExtrudeGeometry:()=>nu,Face3:()=>Bo,Face4:()=>Wm,FaceColors:()=>oe,FaceNormalsHelper:()=>qh,FileLoader:()=>Do,FlatShading:()=>_e,Float32Attribute:()=>qy,Float32BufferAttribute:()=>os,Float64Attribute:()=>Z_,Float64BufferAttribute:()=>Pc,FloatType:()=>kd,Fog:()=>Rc,FogExp2:()=>Nh,Font:()=>tm,FontLoader:()=>Qd,FrontFaceDirectionCCW:()=>ee,FrontFaceDirectionCW:()=>q,FrontSide:()=>J,Frustum:()=>No,GammaEncoding:()=>Vp,Geometry:()=>Ms,GeometryIdCount:()=>Gg,GeometryUtils:()=>sm,GreaterDepth:()=>Ot,GreaterEqualDepth:()=>Et,GridHelper:()=>sg,Group:()=>lp,HalfFloatType:()=>xc,HemisphereLight:()=>pc,HemisphereLightHelper:()=>yd,IcosahedronBufferGeometry:()=>$d,IcosahedronGeometry:()=>hp,ImageLoader:()=>Yg,ImageUtils:()=>Uv,ImmediateRenderObject:()=>kf,InstancedBufferAttribute:()=>Jd,InstancedBufferGeometry:()=>qu,InstancedInterleavedBuffer:()=>_h,Int16Attribute:()=>Aa,Int16BufferAttribute:()=>ap,Int32Attribute:()=>Xh,Int32BufferAttribute:()=>Cf,Int8Attribute:()=>Au,Int8BufferAttribute:()=>Oh,IntType:()=>rh,InterleavedBuffer:()=>gd,InterleavedBufferAttribute:()=>Rf,Interpolant:()=>Tl,InterpolateDiscrete:()=>Gs,InterpolateLinear:()=>So,InterpolateSmooth:()=>Eo,JSONLoader:()=>Jg,KeyframeTrack:()=>ju,LOD:()=>aa,LatheBufferGeometry:()=>wo,LatheGeometry:()=>Ef,Layers:()=>qp,LensFlare:()=>dh,LessDepth:()=>kt,LessEqualDepth:()=>Un,Light:()=>Js,LightShadow:()=>gh,Line:()=>vu,Line3:()=>Fl,LineBasicMaterial:()=>cl,LineCurve:()=>vh,LineCurve3:()=>mb,LineDashedMaterial:()=>dc,LinePieces:()=>Nv,LineSegments:()=>Co,LineStrip:()=>Ff,LinearEncoding:()=>is,LinearFilter:()=>Sa,LinearInterpolant:()=>Yd,LinearMipMapLinearFilter:()=>Ou,LinearMipMapNearestFilter:()=>Eh,LinearToneMapping:()=>yn,Loader:()=>iu,LoadingManager:()=>El,LogLuvEncoding:()=>Lg,LoopOnce:()=>yr,LoopPingPong:()=>ur,LoopRepeat:()=>pr,LuminanceAlphaFormat:()=>id,LuminanceFormat:()=>$f,MOUSE:()=>V,Material:()=>Ks,MaterialLoader:()=>Qg,Math:()=>As,Matrix3:()=>Rt,Matrix4:()=>vs,MaxEquation:()=>lt,Mesh:()=>wa,MeshBasicMaterial:()=>Va,MeshDepthMaterial:()=>bi,MeshFaceMaterial:()=>vb,MeshLambertMaterial:()=>dp,MeshNormalMaterial:()=>ec,MeshPhongMaterial:()=>Sl,MeshPhysicalMaterial:()=>Gu,MeshStandardMaterial:()=>Hu,MeshToonMaterial:()=>ka,MinEquation:()=>Ye,MirroredRepeatWrapping:()=>Sh,MixOperation:()=>Le,MorphBlendMesh:()=>ca,MultiMaterial:()=>yu,MultiplyBlending:()=>Me,MultiplyOperation:()=>et,NearestFilter:()=>Xa,NearestMipMapLinearFilter:()=>uu,NearestMipMapNearestFilter:()=>Rd,NeverDepth:()=>fe,NoBlending:()=>$,NoColors:()=>te,NoToneMapping:()=>Ht,NormalBlending:()=>ie,NotEqualDepth:()=>fn,NumberKeyframeTrack:()=>Cu,Object3D:()=>Cr,ObjectLoader:()=>gp,OctahedronBufferGeometry:()=>tu,OctahedronGeometry:()=>cd,OneFactor:()=>vn,OneMinusDstAlphaFactor:()=>At,OneMinusDstColorFactor:()=>Ut,OneMinusSrcAlphaFactor:()=>Ge,OneMinusSrcColorFactor:()=>ht,OrthographicCamera:()=>Vd,PCFShadowMap:()=>ne,PCFSoftShadowMap:()=>se,ParametricBufferGeometry:()=>Wd,ParametricGeometry:()=>jd,Particle:()=>jy,ParticleBasicMaterial:()=>Y_,ParticleSystem:()=>q_,ParticleSystemMaterial:()=>$y,Path:()=>as,PerspectiveCamera:()=>xl,Plane:()=>bt,PlaneBufferGeometry:()=>oa,PlaneGeometry:()=>km,PointCloud:()=>Wy,PointCloudMaterial:()=>X_,PointLight:()=>bu,PointLightHelper:()=>vd,Points:()=>js,PointsMaterial:()=>kc,PolarGridHelper:()=>Xu,PolyhedronBufferGeometry:()=>Ql,PolyhedronGeometry:()=>Wo,PositionalAudio:()=>ng,Projector:()=>Yy,PropertyBinding:()=>Fa,PropertyMixer:()=>Fc,QuadraticBezierCurve:()=>pd,QuadraticBezierCurve3:()=>rm,Quaternion:()=>kl,QuaternionKeyframeTrack:()=>Kd,QuaternionLinearInterpolant:()=>fa,REVISION:()=>D,RGBADepthPacking:()=>Ty,RGBAFormat:()=>rl,RGBA_PVRTC_2BPPV1_Format:()=>si,RGBA_PVRTC_4BPPV1_Format:()=>wi,RGBA_S3TC_DXT1_Format:()=>Re,RGBA_S3TC_DXT3_Format:()=>tt,RGBA_S3TC_DXT5_Format:()=>Mt,RGBDEncoding:()=>vv,RGBEEncoding:()=>yi,RGBEFormat:()=>Ze,RGBFormat:()=>Ic,RGBM16Encoding:()=>To,RGBM7Encoding:()=>Ps,RGB_ETC1_Format:()=>pi,RGB_PVRTC_2BPPV1_Format:()=>Tn,RGB_PVRTC_4BPPV1_Format:()=>Yt,RGB_S3TC_DXT1_Format:()=>ge,RawShaderMaterial:()=>Ga,Ray:()=>sa,Raycaster:()=>ru,RectAreaLight:()=>Oa,RectAreaLightHelper:()=>ef,ReinhardToneMapping:()=>ii,RepeatWrapping:()=>ih,ReverseSubtractEquation:()=>Fe,RingBufferGeometry:()=>Ns,RingGeometry:()=>ir,Scene:()=>Bh,SceneUtils:()=>hl,ShaderChunk:()=>$s,ShaderLib:()=>Lc,ShaderMaterial:()=>eu,ShadowMaterial:()=>Xd,Shape:()=>$u,ShapeBufferGeometry:()=>Zp,ShapeGeometry:()=>Qp,ShapePath:()=>vp,ShapeUtils:()=>Pa,ShortType:()=>pl,Skeleton:()=>ld,SkeletonHelper:()=>$h,SkinnedMesh:()=>qg,SmoothShading:()=>Ee,Sphere:()=>Pt,SphereBufferGeometry:()=>la,SphereGeometry:()=>jo,Spherical:()=>nm,SphericalReflectionMapping:()=>$l,Spline:()=>$_,SplineCurve:()=>wu,SplineCurve3:()=>Hy,SpotLight:()=>Gh,SpotLightHelper:()=>jh,SpotLightShadow:()=>fp,Sprite:()=>mu,SpriteMaterial:()=>zu,SrcAlphaFactor:()=>rt,SrcAlphaSaturateFactor:()=>Oe,SrcColorFactor:()=>Ne,StereoCamera:()=>Bm,StringKeyframeTrack:()=>Nm,SubtractEquation:()=>ot,SubtractiveBlending:()=>Be,TetrahedronBufferGeometry:()=>ul,TetrahedronGeometry:()=>zh,TextGeometry:()=>hd,Texture:()=>Xo,TextureFilter:()=>td,TextureLoader:()=>Hh,TextureMapping:()=>jf,TextureWrapping:()=>ku,TorusBufferGeometry:()=>Vu,TorusGeometry:()=>Uh,TorusKnotBufferGeometry:()=>Qa,TorusKnotGeometry:()=>ud,Triangle:()=>Ca,TriangleFanDrawMode:()=>cs,TriangleStripDrawMode:()=>Fu,TrianglesDrawMode:()=>Ya,TubeBufferGeometry:()=>qd,TubeGeometry:()=>Vh,UVMapping:()=>lo,Uint16Attribute:()=>zv,Uint16BufferAttribute:()=>zd,Uint32Attribute:()=>Vv,Uint32BufferAttribute:()=>Bu,Uint8Attribute:()=>K_,Uint8BufferAttribute:()=>vl,Uint8ClampedAttribute:()=>pa,Uint8ClampedBufferAttribute:()=>Bd,Uncharted2ToneMapping:()=>Li,Uniform:()=>Um,UniformsLib:()=>us,UniformsUtils:()=>sl,UnsignedByteType:()=>ff,UnsignedInt248Type:()=>mf,UnsignedIntType:()=>gf,UnsignedShort4444Type:()=>Mg,UnsignedShort5551Type:()=>Th,UnsignedShort565Type:()=>io,UnsignedShortType:()=>pf,Vector2:()=>er,Vector3:()=>on,Vector4:()=>Yo,VectorKeyframeTrack:()=>Lf,Vertex:()=>jm,VertexColors:()=>B,VertexNormalsHelper:()=>rg,VideoTexture:()=>cp,WebGLRenderTarget:()=>Sc,WebGLRenderTargetCube:()=>rd,WebGLRenderer:()=>Gd,WireframeGeometry:()=>fh,WireframeHelper:()=>yb,WrapAroundEnding:()=>fs,XHRLoader:()=>tf,ZeroCurvatureEnding:()=>ds,ZeroFactor:()=>vt,ZeroSlopeEnding:()=>Ea,sRGBEncoding:()=>Dg}),void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Math.sign&&(Math.sign=function(a){return a<0?-1:a>0?1:+a}),void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(a){if(null==a)throw new TypeError("Cannot convert undefined or null to object");for(var h=Object(a),g=1;g<arguments.length;g++){var y=arguments[g];if(null!=y)for(var x in y)Object.prototype.hasOwnProperty.call(y,x)&&(h[x]=y[x])}return h}),Object.assign(X.prototype,{addEventListener:function(a,h){void 0===this._listeners&&(this._listeners={});var g=this._listeners;void 0===g[a]&&(g[a]=[]),-1===g[a].indexOf(h)&&g[a].push(h)},hasEventListener:function(a,h){if(void 0===this._listeners)return!1;var g=this._listeners;return void 0!==g[a]&&-1!==g[a].indexOf(h)},removeEventListener:function(a,h){if(void 0!==this._listeners){var y=this._listeners[a];if(void 0!==y){var x=y.indexOf(h);-1!==x&&y.splice(x,1)}}},dispatchEvent:function(a){if(void 0!==this._listeners){var g=this._listeners[a.type];if(void 0!==g){a.target=this;var y=[],x=0,M=g.length;for(x=0;x<M;x++)y[x]=g[x];for(x=0;x<M;x++)y[x].call(this,a)}}}});var y,a,h,g,D="83",V={LEFT:0,MIDDLE:1,RIGHT:2},O=0,H=1,L=2,P=3,q=0,ee=1,K=0,ne=1,se=2,J=0,W=1,ae=2,_e=1,Ee=2,te=0,oe=1,B=2,$=0,ie=1,pe=2,Be=3,Me=4,xe=5,ue={NoBlending:$,NormalBlending:ie,AdditiveBlending:pe,SubtractiveBlending:Be,MultiplyBlending:Me,CustomBlending:xe},Pe=100,ot=101,Fe=102,Ye=103,lt=104,vt=200,vn=201,Ne=202,ht=203,rt=204,Ge=205,_t=206,At=207,Lt=208,Ut=209,Oe=210,fe=0,wt=1,kt=2,Un=3,ri=4,Et=5,Ot=6,fn=7,et=0,Le=1,ze=2,Ht=0,yn=1,ii=2,Li=3,Cs=4,lo=300,ws=301,ua=302,sr=303,il=304,$l=305,ql=306,Wf=307,jf={UVMapping:lo,CubeReflectionMapping:ws,CubeRefractionMapping:ua,EquirectangularReflectionMapping:sr,EquirectangularRefractionMapping:il,SphericalReflectionMapping:$l,CubeUVReflectionMapping:ql,CubeUVRefractionMapping:Wf},ih=1e3,cc=1001,Sh=1002,ku={RepeatWrapping:ih,ClampToEdgeWrapping:cc,MirroredRepeatWrapping:Sh},Xa=1003,Rd=1004,uu=1005,Sa=1006,Eh=1007,Ou=1008,td={NearestFilter:Xa,NearestMipMapNearestFilter:Rd,NearestMipMapLinearFilter:uu,LinearFilter:Sa,LinearMipMapNearestFilter:Eh,LinearMipMapLinearFilter:Ou},ff=1009,nd=1010,pl=1011,pf=1012,rh=1013,gf=1014,kd=1015,xc=1016,Mg=1017,Th=1018,io=1019,mf=1020,gl=1021,Ic=1022,rl=1023,$f=1024,id=1025,Ze=rl,pt=1026,st=1027,ge=2001,Re=2002,tt=2003,Mt=2004,Yt=2100,Tn=2101,wi=2102,si=2103,pi=2151,yr=2200,pr=2201,ur=2202,Gs=2300,So=2301,Eo=2302,ds=2400,Ea=2401,fs=2402,Ya=0,Fu=1,cs=2,is=3e3,Dg=3001,Vp=3007,yi=3002,Lg=3003,Ps=3004,To=3005,vv=3006,yv=3200,Ty=3201,As={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:(a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),h=new Array(36),g=0,function(){for(var M=0;M<36;M++)8===M||13===M||18===M||23===M?h[M]="-":14===M?h[M]="4":(g<=2&&(g=33554432+16777216*Math.random()|0),y=15&g,g>>=4,h[M]=a[19===M?3&y|8:y]);return h.join("")}),clamp:function(a,h,g){return Math.max(h,Math.min(g,a))},euclideanModulo:function(a,h){return(a%h+h)%h},mapLinear:function(a,h,g,y,x){return y+(a-h)*(x-y)/(g-h)},lerp:function(a,h,g){return(1-g)*a+g*h},smoothstep:function(a,h,g){return a<=h?0:a>=g?1:(a=(a-h)/(g-h))*a*(3-2*a)},smootherstep:function(a,h,g){return a<=h?0:a>=g?1:(a=(a-h)/(g-h))*a*a*(a*(6*a-15)+10)},randInt:function(a,h){return a+Math.floor(Math.random()*(h-a+1))},randFloat:function(a,h){return a+Math.random()*(h-a)},randFloatSpread:function(a){return a*(.5-Math.random())},degToRad:function(a){return a*As.DEG2RAD},radToDeg:function(a){return a*As.RAD2DEG},isPowerOfTwo:function(a){return 0==(a&a-1)&&0!==a},nearestPowerOfTwo:function(a){return Math.pow(2,Math.round(Math.log(a)/Math.LN2))},nextPowerOfTwo:function(a){return a--,a|=a>>1,a|=a>>2,a|=a>>4,a|=a>>8,a|=a>>16,++a}};function er(a,h){this.x=a||0,this.y=h||0}er.prototype={constructor:er,isVector2:!0,get width(){return this.x},set width(a){this.x=a},get height(){return this.y},set height(a){this.y=a},set:function(a,h){return this.x=a,this.y=h,this},setScalar:function(a){return this.x=a,this.y=a,this},setX:function(a){return this.x=a,this},setY:function(a){return this.y=a,this},setComponent:function(a,h){switch(a){case 0:this.x=h;break;case 1:this.y=h;break;default:throw new Error("index is out of range: "+a)}return this},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+a)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(a){return this.x=a.x,this.y=a.y,this},add:function(a,h){return void 0!==h?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,h)):(this.x+=a.x,this.y+=a.y,this)},addScalar:function(a){return this.x+=a,this.y+=a,this},addVectors:function(a,h){return this.x=a.x+h.x,this.y=a.y+h.y,this},addScaledVector:function(a,h){return this.x+=a.x*h,this.y+=a.y*h,this},sub:function(a,h){return void 0!==h?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,h)):(this.x-=a.x,this.y-=a.y,this)},subScalar:function(a){return this.x-=a,this.y-=a,this},subVectors:function(a,h){return this.x=a.x-h.x,this.y=a.y-h.y,this},multiply:function(a){return this.x*=a.x,this.y*=a.y,this},multiplyScalar:function(a){return isFinite(a)?(this.x*=a,this.y*=a):(this.x=0,this.y=0),this},divide:function(a){return this.x/=a.x,this.y/=a.y,this},divideScalar:function(a){return this.multiplyScalar(1/a)},min:function(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this},max:function(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this},clamp:function(a,h){return this.x=Math.max(a.x,Math.min(h.x,this.x)),this.y=Math.max(a.y,Math.min(h.y,this.y)),this},clampScalar:function(){var a,h;return function(y,x){return void 0===a&&(a=new er,h=new er),a.set(y,y),h.set(x,x),this.clamp(a,h)}}(),clampLength:function(a,h){var g=this.length();return this.multiplyScalar(Math.max(a,Math.min(h,g))/g)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(a){return this.x*a.x+this.y*a.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},angle:function(){var a=Math.atan2(this.y,this.x);return a<0&&(a+=2*Math.PI),a},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var h=this.x-a.x,g=this.y-a.y;return h*h+g*g},distanceToManhattan:function(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)},setLength:function(a){return this.multiplyScalar(a/this.length())},lerp:function(a,h){return this.x+=(a.x-this.x)*h,this.y+=(a.y-this.y)*h,this},lerpVectors:function(a,h,g){return this.subVectors(h,a).multiplyScalar(g).add(a)},equals:function(a){return a.x===this.x&&a.y===this.y},fromArray:function(a,h){return void 0===h&&(h=0),this.x=a[h],this.y=a[h+1],this},toArray:function(a,h){return void 0===a&&(a=[]),void 0===h&&(h=0),a[h]=this.x,a[h+1]=this.y,a},fromAttribute:function(a,h,g){return void 0!==g&&console.warn("THREE.Vector2: offset has been removed from .fromAttribute()."),this.x=a.getX(h),this.y=a.getY(h),this},rotateAround:function(a,h){var g=Math.cos(h),y=Math.sin(h),x=this.x-a.x,M=this.y-a.y;return this.x=x*g-M*y+a.x,this.y=x*y+M*g+a.y,this}};var My=0;function Xo(a,h,g,y,x,M,F,z,le,re){Object.defineProperty(this,"id",{value:My++}),this.uuid=As.generateUUID(),this.name="",this.image=void 0!==a?a:Xo.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==h?h:Xo.DEFAULT_MAPPING,this.wrapS=void 0!==g?g:cc,this.wrapT=void 0!==y?y:cc,this.magFilter=void 0!==x?x:Sa,this.minFilter=void 0!==M?M:Ou,this.anisotropy=void 0!==le?le:1,this.format=void 0!==F?F:rl,this.type=void 0!==z?z:ff,this.offset=new er(0,0),this.repeat=new er(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==re?re:is,this.version=0,this.onUpdate=null}function Yo(a,h,g,y){this.x=a||0,this.y=h||0,this.z=g||0,this.w=void 0!==y?y:1}function Sc(a,h,g){this.uuid=As.generateUUID(),this.width=a,this.height=h,this.scissor=new Yo(0,0,a,h),this.scissorTest=!1,this.viewport=new Yo(0,0,a,h),void 0===(g=g||{}).minFilter&&(g.minFilter=Sa),this.texture=new Xo(void 0,void 0,g.wrapS,g.wrapT,g.magFilter,g.minFilter,g.format,g.type,g.anisotropy,g.encoding),this.depthBuffer=void 0===g.depthBuffer||g.depthBuffer,this.stencilBuffer=void 0===g.stencilBuffer||g.stencilBuffer,this.depthTexture=void 0!==g.depthTexture?g.depthTexture:null}function rd(a,h,g){Sc.call(this,a,h,g),this.activeCubeFace=0,this.activeMipMapLevel=0}function kl(a,h,g,y){this._x=a||0,this._y=h||0,this._z=g||0,this._w=void 0!==y?y:1}function on(a,h,g){this.x=a||0,this.y=h||0,this.z=g||0}function vs(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function Od(a,h,g,y,x,M,F,z,le,re){Xo.call(this,a=void 0!==a?a:[],h=void 0!==h?h:ws,g,y,x,M,F,z,le,re),this.flipY=!1}Xo.DEFAULT_IMAGE=void 0,Xo.DEFAULT_MAPPING=lo,Xo.prototype={constructor:Xo,isTexture:!0,set needsUpdate(a){!0===a&&this.version++},clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.image=a.image,this.mipmaps=a.mipmaps.slice(0),this.mapping=a.mapping,this.wrapS=a.wrapS,this.wrapT=a.wrapT,this.magFilter=a.magFilter,this.minFilter=a.minFilter,this.anisotropy=a.anisotropy,this.format=a.format,this.type=a.type,this.offset.copy(a.offset),this.repeat.copy(a.repeat),this.generateMipmaps=a.generateMipmaps,this.premultiplyAlpha=a.premultiplyAlpha,this.flipY=a.flipY,this.unpackAlignment=a.unpackAlignment,this.encoding=a.encoding,this},toJSON:function(a){if(void 0!==a.textures[this.uuid])return a.textures[this.uuid];var g={metadata:{version:4.4,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var y=this.image;void 0===y.uuid&&(y.uuid=As.generateUUID()),void 0===a.images[y.uuid]&&(a.images[y.uuid]={uuid:y.uuid,url:function h(x){var M;return void 0!==x.toDataURL?M=x:((M=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")).width=x.width,M.height=x.height,M.getContext("2d").drawImage(x,0,0,x.width,x.height)),M.width>2048||M.height>2048?M.toDataURL("image/jpeg",.6):M.toDataURL("image/png")}(y)}),g.image=y.uuid}return a.textures[this.uuid]=g,g},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(a){if(this.mapping===lo){if(a.multiply(this.repeat),a.add(this.offset),a.x<0||a.x>1)switch(this.wrapS){case ih:a.x=a.x-Math.floor(a.x);break;case cc:a.x=a.x<0?0:1;break;case Sh:a.x=1===Math.abs(Math.floor(a.x)%2)?Math.ceil(a.x)-a.x:a.x-Math.floor(a.x)}if(a.y<0||a.y>1)switch(this.wrapT){case ih:a.y=a.y-Math.floor(a.y);break;case cc:a.y=a.y<0?0:1;break;case Sh:a.y=1===Math.abs(Math.floor(a.y)%2)?Math.ceil(a.y)-a.y:a.y-Math.floor(a.y)}this.flipY&&(a.y=1-a.y)}}},Object.assign(Xo.prototype,X.prototype),Yo.prototype={constructor:Yo,isVector4:!0,set:function(a,h,g,y){return this.x=a,this.y=h,this.z=g,this.w=y,this},setScalar:function(a){return this.x=a,this.y=a,this.z=a,this.w=a,this},setX:function(a){return this.x=a,this},setY:function(a){return this.y=a,this},setZ:function(a){return this.z=a,this},setW:function(a){return this.w=a,this},setComponent:function(a,h){switch(a){case 0:this.x=h;break;case 1:this.y=h;break;case 2:this.z=h;break;case 3:this.w=h;break;default:throw new Error("index is out of range: "+a)}return this},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+a)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(a){return this.x=a.x,this.y=a.y,this.z=a.z,this.w=void 0!==a.w?a.w:1,this},add:function(a,h){return void 0!==h?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,h)):(this.x+=a.x,this.y+=a.y,this.z+=a.z,this.w+=a.w,this)},addScalar:function(a){return this.x+=a,this.y+=a,this.z+=a,this.w+=a,this},addVectors:function(a,h){return this.x=a.x+h.x,this.y=a.y+h.y,this.z=a.z+h.z,this.w=a.w+h.w,this},addScaledVector:function(a,h){return this.x+=a.x*h,this.y+=a.y*h,this.z+=a.z*h,this.w+=a.w*h,this},sub:function(a,h){return void 0!==h?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,h)):(this.x-=a.x,this.y-=a.y,this.z-=a.z,this.w-=a.w,this)},subScalar:function(a){return this.x-=a,this.y-=a,this.z-=a,this.w-=a,this},subVectors:function(a,h){return this.x=a.x-h.x,this.y=a.y-h.y,this.z=a.z-h.z,this.w=a.w-h.w,this},multiplyScalar:function(a){return isFinite(a)?(this.x*=a,this.y*=a,this.z*=a,this.w*=a):(this.x=0,this.y=0,this.z=0,this.w=0),this},applyMatrix4:function(a){var h=this.x,g=this.y,y=this.z,x=this.w,M=a.elements;return this.x=M[0]*h+M[4]*g+M[8]*y+M[12]*x,this.y=M[1]*h+M[5]*g+M[9]*y+M[13]*x,this.z=M[2]*h+M[6]*g+M[10]*y+M[14]*x,this.w=M[3]*h+M[7]*g+M[11]*y+M[15]*x,this},divideScalar:function(a){return this.multiplyScalar(1/a)},setAxisAngleFromQuaternion:function(a){this.w=2*Math.acos(a.w);var h=Math.sqrt(1-a.w*a.w);return h<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=a.x/h,this.y=a.y/h,this.z=a.z/h),this},setAxisAngleFromRotationMatrix:function(a){var h,g,y,x,M=.01,F=.1,z=a.elements,le=z[0],re=z[4],ve=z[8],Ce=z[1],Ve=z[5],Ue=z[9],We=z[2],ft=z[6],dt=z[10];if(Math.abs(re-Ce)<M&&Math.abs(ve-We)<M&&Math.abs(Ue-ft)<M){if(Math.abs(re+Ce)<F&&Math.abs(ve+We)<F&&Math.abs(Ue+ft)<F&&Math.abs(le+Ve+dt-3)<F)return this.set(1,0,0,0),this;h=Math.PI;var at=(le+1)/2,xt=(Ve+1)/2,St=(dt+1)/2,nn=(re+Ce)/4,qt=(ve+We)/4,gn=(Ue+ft)/4;return at>xt&&at>St?at<M?(g=0,y=.707106781,x=.707106781):(y=nn/(g=Math.sqrt(at)),x=qt/g):xt>St?xt<M?(g=.707106781,y=0,x=.707106781):(g=nn/(y=Math.sqrt(xt)),x=gn/y):St<M?(g=.707106781,y=.707106781,x=0):(g=qt/(x=Math.sqrt(St)),y=gn/x),this.set(g,y,x,h),this}var un=Math.sqrt((ft-Ue)*(ft-Ue)+(ve-We)*(ve-We)+(Ce-re)*(Ce-re));return Math.abs(un)<.001&&(un=1),this.x=(ft-Ue)/un,this.y=(ve-We)/un,this.z=(Ce-re)/un,this.w=Math.acos((le+Ve+dt-1)/2),this},min:function(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this.z=Math.min(this.z,a.z),this.w=Math.min(this.w,a.w),this},max:function(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this.z=Math.max(this.z,a.z),this.w=Math.max(this.w,a.w),this},clamp:function(a,h){return this.x=Math.max(a.x,Math.min(h.x,this.x)),this.y=Math.max(a.y,Math.min(h.y,this.y)),this.z=Math.max(a.z,Math.min(h.z,this.z)),this.w=Math.max(a.w,Math.min(h.w,this.w)),this},clampScalar:function(){var a,h;return function(y,x){return void 0===a&&(a=new Yo,h=new Yo),a.set(y,y,y,y),h.set(x,x,x,x),this.clamp(a,h)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){return this.multiplyScalar(a/this.length())},lerp:function(a,h){return this.x+=(a.x-this.x)*h,this.y+=(a.y-this.y)*h,this.z+=(a.z-this.z)*h,this.w+=(a.w-this.w)*h,this},lerpVectors:function(a,h,g){return this.subVectors(h,a).multiplyScalar(g).add(a)},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z&&a.w===this.w},fromArray:function(a,h){return void 0===h&&(h=0),this.x=a[h],this.y=a[h+1],this.z=a[h+2],this.w=a[h+3],this},toArray:function(a,h){return void 0===a&&(a=[]),void 0===h&&(h=0),a[h]=this.x,a[h+1]=this.y,a[h+2]=this.z,a[h+3]=this.w,a},fromAttribute:function(a,h,g){return void 0!==g&&console.warn("THREE.Vector4: offset has been removed from .fromAttribute()."),this.x=a.getX(h),this.y=a.getY(h),this.z=a.getZ(h),this.w=a.getW(h),this}},Object.assign(Sc.prototype,X.prototype,{isWebGLRenderTarget:!0,setSize:function(a,h){(this.width!==a||this.height!==h)&&(this.width=a,this.height=h,this.dispose()),this.viewport.set(0,0,a,h),this.scissor.set(0,0,a,h)},clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.width=a.width,this.height=a.height,this.viewport.copy(a.viewport),this.texture=a.texture.clone(),this.depthBuffer=a.depthBuffer,this.stencilBuffer=a.stencilBuffer,this.depthTexture=a.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),(rd.prototype=Object.create(Sc.prototype)).constructor=rd,rd.prototype.isWebGLRenderTargetCube=!0,kl.prototype={constructor:kl,get x(){return this._x},set x(a){this._x=a,this.onChangeCallback()},get y(){return this._y},set y(a){this._y=a,this.onChangeCallback()},get z(){return this._z},set z(a){this._z=a,this.onChangeCallback()},get w(){return this._w},set w(a){this._w=a,this.onChangeCallback()},set:function(a,h,g,y){return this._x=a,this._y=h,this._z=g,this._w=y,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(a){return this._x=a.x,this._y=a.y,this._z=a.z,this._w=a.w,this.onChangeCallback(),this},setFromEuler:function(a,h){if(!1===(a&&a.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var g=Math.cos(a._x/2),y=Math.cos(a._y/2),x=Math.cos(a._z/2),M=Math.sin(a._x/2),F=Math.sin(a._y/2),z=Math.sin(a._z/2),le=a.order;return"XYZ"===le?(this._x=M*y*x+g*F*z,this._y=g*F*x-M*y*z,this._z=g*y*z+M*F*x,this._w=g*y*x-M*F*z):"YXZ"===le?(this._x=M*y*x+g*F*z,this._y=g*F*x-M*y*z,this._z=g*y*z-M*F*x,this._w=g*y*x+M*F*z):"ZXY"===le?(this._x=M*y*x-g*F*z,this._y=g*F*x+M*y*z,this._z=g*y*z+M*F*x,this._w=g*y*x-M*F*z):"ZYX"===le?(this._x=M*y*x-g*F*z,this._y=g*F*x+M*y*z,this._z=g*y*z-M*F*x,this._w=g*y*x+M*F*z):"YZX"===le?(this._x=M*y*x+g*F*z,this._y=g*F*x+M*y*z,this._z=g*y*z-M*F*x,this._w=g*y*x-M*F*z):"XZY"===le&&(this._x=M*y*x-g*F*z,this._y=g*F*x-M*y*z,this._z=g*y*z+M*F*x,this._w=g*y*x+M*F*z),!1!==h&&this.onChangeCallback(),this},setFromAxisAngle:function(a,h){var g=h/2,y=Math.sin(g);return this._x=a.x*y,this._y=a.y*y,this._z=a.z*y,this._w=Math.cos(g),this.onChangeCallback(),this},setFromRotationMatrix:function(a){var Ve,h=a.elements,g=h[0],y=h[4],x=h[8],M=h[1],F=h[5],z=h[9],le=h[2],re=h[6],ve=h[10],Ce=g+F+ve;return Ce>0?(Ve=.5/Math.sqrt(Ce+1),this._w=.25/Ve,this._x=(re-z)*Ve,this._y=(x-le)*Ve,this._z=(M-y)*Ve):g>F&&g>ve?(Ve=2*Math.sqrt(1+g-F-ve),this._w=(re-z)/Ve,this._x=.25*Ve,this._y=(y+M)/Ve,this._z=(x+le)/Ve):F>ve?(Ve=2*Math.sqrt(1+F-g-ve),this._w=(x-le)/Ve,this._x=(y+M)/Ve,this._y=.25*Ve,this._z=(z+re)/Ve):(Ve=2*Math.sqrt(1+ve-g-F),this._w=(M-y)/Ve,this._x=(x+le)/Ve,this._y=(z+re)/Ve,this._z=.25*Ve),this.onChangeCallback(),this},setFromUnitVectors:function(){var a,h;return function(x,M){return void 0===a&&(a=new on),(h=x.dot(M)+1)<1e-6?(h=0,Math.abs(x.x)>Math.abs(x.z)?a.set(-x.y,x.x,0):a.set(0,-x.z,x.y)):a.crossVectors(x,M),this._x=a.x,this._y=a.y,this._z=a.z,this._w=h,this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(a){return this._x*a._x+this._y*a._y+this._z*a._z+this._w*a._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var a=this.length();return 0===a?(this._x=0,this._y=0,this._z=0,this._w=1):(this._x=this._x*(a=1/a),this._y=this._y*a,this._z=this._z*a,this._w=this._w*a),this.onChangeCallback(),this},multiply:function(a,h){return void 0!==h?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(a,h)):this.multiplyQuaternions(this,a)},premultiply:function(a){return this.multiplyQuaternions(a,this)},multiplyQuaternions:function(a,h){var g=a._x,y=a._y,x=a._z,M=a._w,F=h._x,z=h._y,le=h._z,re=h._w;return this._x=g*re+M*F+y*le-x*z,this._y=y*re+M*z+x*F-g*le,this._z=x*re+M*le+g*z-y*F,this._w=M*re-g*F-y*z-x*le,this.onChangeCallback(),this},slerp:function(a,h){if(0===h)return this;if(1===h)return this.copy(a);var g=this._x,y=this._y,x=this._z,M=this._w,F=M*a._w+g*a._x+y*a._y+x*a._z;if(F<0?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=-a._z,F=-F):this.copy(a),F>=1)return this._w=M,this._x=g,this._y=y,this._z=x,this;var z=Math.sqrt(1-F*F);if(Math.abs(z)<.001)return this._w=.5*(M+this._w),this._x=.5*(g+this._x),this._y=.5*(y+this._y),this._z=.5*(x+this._z),this;var le=Math.atan2(z,F),re=Math.sin((1-h)*le)/z,ve=Math.sin(h*le)/z;return this._w=M*re+this._w*ve,this._x=g*re+this._x*ve,this._y=y*re+this._y*ve,this._z=x*re+this._z*ve,this.onChangeCallback(),this},equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._w===this._w},fromArray:function(a,h){return void 0===h&&(h=0),this._x=a[h],this._y=a[h+1],this._z=a[h+2],this._w=a[h+3],this.onChangeCallback(),this},toArray:function(a,h){return void 0===a&&(a=[]),void 0===h&&(h=0),a[h]=this._x,a[h+1]=this._y,a[h+2]=this._z,a[h+3]=this._w,a},onChange:function(a){return this.onChangeCallback=a,this},onChangeCallback:function(){}},Object.assign(kl,{slerp:function(a,h,g,y){return g.copy(a).slerp(h,y)},slerpFlat:function(a,h,g,y,x,M,F){var z=g[y+0],le=g[y+1],re=g[y+2],ve=g[y+3],Ce=x[M+0],Ve=x[M+1],Ue=x[M+2],We=x[M+3];if(ve!==We||z!==Ce||le!==Ve||re!==Ue){var ft=1-F,dt=z*Ce+le*Ve+re*Ue+ve*We,at=dt>=0?1:-1,xt=1-dt*dt;if(xt>Number.EPSILON){var St=Math.sqrt(xt),nn=Math.atan2(St,dt*at);ft=Math.sin(ft*nn)/St,F=Math.sin(F*nn)/St}var qt=F*at;if(z=z*ft+Ce*qt,le=le*ft+Ve*qt,re=re*ft+Ue*qt,ve=ve*ft+We*qt,ft===1-F){var gn=1/Math.sqrt(z*z+le*le+re*re+ve*ve);z*=gn,le*=gn,re*=gn,ve*=gn}}a[h]=z,a[h+1]=le,a[h+2]=re,a[h+3]=ve}}),on.prototype={constructor:on,isVector3:!0,set:function(a,h,g){return this.x=a,this.y=h,this.z=g,this},setScalar:function(a){return this.x=a,this.y=a,this.z=a,this},setX:function(a){return this.x=a,this},setY:function(a){return this.y=a,this},setZ:function(a){return this.z=a,this},setComponent:function(a,h){switch(a){case 0:this.x=h;break;case 1:this.y=h;break;case 2:this.z=h;break;default:throw new Error("index is out of range: "+a)}return this},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+a)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(a){return this.x=a.x,this.y=a.y,this.z=a.z,this},add:function(a,h){return void 0!==h?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,h)):(this.x+=a.x,this.y+=a.y,this.z+=a.z,this)},addScalar:function(a){return this.x+=a,this.y+=a,this.z+=a,this},addVectors:function(a,h){return this.x=a.x+h.x,this.y=a.y+h.y,this.z=a.z+h.z,this},addScaledVector:function(a,h){return this.x+=a.x*h,this.y+=a.y*h,this.z+=a.z*h,this},sub:function(a,h){return void 0!==h?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,h)):(this.x-=a.x,this.y-=a.y,this.z-=a.z,this)},subScalar:function(a){return this.x-=a,this.y-=a,this.z-=a,this},subVectors:function(a,h){return this.x=a.x-h.x,this.y=a.y-h.y,this.z=a.z-h.z,this},multiply:function(a,h){return void 0!==h?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(a,h)):(this.x*=a.x,this.y*=a.y,this.z*=a.z,this)},multiplyScalar:function(a){return isFinite(a)?(this.x*=a,this.y*=a,this.z*=a):(this.x=0,this.y=0,this.z=0),this},multiplyVectors:function(a,h){return this.x=a.x*h.x,this.y=a.y*h.y,this.z=a.z*h.z,this},applyEuler:function(){var a;return function(g){return!1===(g&&g.isEuler)&&console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),void 0===a&&(a=new kl),this.applyQuaternion(a.setFromEuler(g))}}(),applyAxisAngle:function(){var a;return function(g,y){return void 0===a&&(a=new kl),this.applyQuaternion(a.setFromAxisAngle(g,y))}}(),applyMatrix3:function(a){var h=this.x,g=this.y,y=this.z,x=a.elements;return this.x=x[0]*h+x[3]*g+x[6]*y,this.y=x[1]*h+x[4]*g+x[7]*y,this.z=x[2]*h+x[5]*g+x[8]*y,this},applyMatrix4:function(a){var h=this.x,g=this.y,y=this.z,x=a.elements;return this.x=x[0]*h+x[4]*g+x[8]*y+x[12],this.y=x[1]*h+x[5]*g+x[9]*y+x[13],this.z=x[2]*h+x[6]*g+x[10]*y+x[14],this},applyProjection:function(a){var h=this.x,g=this.y,y=this.z,x=a.elements,M=1/(x[3]*h+x[7]*g+x[11]*y+x[15]);return this.x=(x[0]*h+x[4]*g+x[8]*y+x[12])*M,this.y=(x[1]*h+x[5]*g+x[9]*y+x[13])*M,this.z=(x[2]*h+x[6]*g+x[10]*y+x[14])*M,this},applyQuaternion:function(a){var h=this.x,g=this.y,y=this.z,x=a.x,M=a.y,F=a.z,z=a.w,le=z*h+M*y-F*g,re=z*g+F*h-x*y,ve=z*y+x*g-M*h,Ce=-x*h-M*g-F*y;return this.x=le*z+Ce*-x+re*-F-ve*-M,this.y=re*z+Ce*-M+ve*-x-le*-F,this.z=ve*z+Ce*-F+le*-M-re*-x,this},project:function(){var a;return function(g){return void 0===a&&(a=new vs),a.multiplyMatrices(g.projectionMatrix,a.getInverse(g.matrixWorld)),this.applyProjection(a)}}(),unproject:function(){var a;return function(g){return void 0===a&&(a=new vs),a.multiplyMatrices(g.matrixWorld,a.getInverse(g.projectionMatrix)),this.applyProjection(a)}}(),transformDirection:function(a){var h=this.x,g=this.y,y=this.z,x=a.elements;return this.x=x[0]*h+x[4]*g+x[8]*y,this.y=x[1]*h+x[5]*g+x[9]*y,this.z=x[2]*h+x[6]*g+x[10]*y,this.normalize()},divide:function(a){return this.x/=a.x,this.y/=a.y,this.z/=a.z,this},divideScalar:function(a){return this.multiplyScalar(1/a)},min:function(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this.z=Math.min(this.z,a.z),this},max:function(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this.z=Math.max(this.z,a.z),this},clamp:function(a,h){return this.x=Math.max(a.x,Math.min(h.x,this.x)),this.y=Math.max(a.y,Math.min(h.y,this.y)),this.z=Math.max(a.z,Math.min(h.z,this.z)),this},clampScalar:function(){var a,h;return function(y,x){return void 0===a&&(a=new on,h=new on),a.set(y,y,y),h.set(x,x,x),this.clamp(a,h)}}(),clampLength:function(a,h){var g=this.length();return this.multiplyScalar(Math.max(a,Math.min(h,g))/g)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){return this.multiplyScalar(a/this.length())},lerp:function(a,h){return this.x+=(a.x-this.x)*h,this.y+=(a.y-this.y)*h,this.z+=(a.z-this.z)*h,this},lerpVectors:function(a,h,g){return this.subVectors(h,a).multiplyScalar(g).add(a)},cross:function(a,h){if(void 0!==h)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(a,h);var g=this.x,y=this.y,x=this.z;return this.x=y*a.z-x*a.y,this.y=x*a.x-g*a.z,this.z=g*a.y-y*a.x,this},crossVectors:function(a,h){var g=a.x,y=a.y,x=a.z,M=h.x,F=h.y,z=h.z;return this.x=y*z-x*F,this.y=x*M-g*z,this.z=g*F-y*M,this},projectOnVector:function(a){var h=a.dot(this)/a.lengthSq();return this.copy(a).multiplyScalar(h)},projectOnPlane:function(){var a;return function(g){return void 0===a&&(a=new on),a.copy(this).projectOnVector(g),this.sub(a)}}(),reflect:function(){var a;return function(g){return void 0===a&&(a=new on),this.sub(a.copy(g).multiplyScalar(2*this.dot(g)))}}(),angleTo:function(a){var h=this.dot(a)/Math.sqrt(this.lengthSq()*a.lengthSq());return Math.acos(As.clamp(h,-1,1))},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var h=this.x-a.x,g=this.y-a.y,y=this.z-a.z;return h*h+g*g+y*y},distanceToManhattan:function(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)+Math.abs(this.z-a.z)},setFromSpherical:function(a){var h=Math.sin(a.phi)*a.radius;return this.x=h*Math.sin(a.theta),this.y=Math.cos(a.phi)*a.radius,this.z=h*Math.cos(a.theta),this},setFromCylindrical:function(a){return this.x=a.radius*Math.sin(a.theta),this.y=a.y,this.z=a.radius*Math.cos(a.theta),this},setFromMatrixPosition:function(a){return this.setFromMatrixColumn(a,3)},setFromMatrixScale:function(a){var h=this.setFromMatrixColumn(a,0).length(),g=this.setFromMatrixColumn(a,1).length(),y=this.setFromMatrixColumn(a,2).length();return this.x=h,this.y=g,this.z=y,this},setFromMatrixColumn:function(a,h){if("number"==typeof a){console.warn("THREE.Vector3: setFromMatrixColumn now expects ( matrix, index ).");var g=a;a=h,h=g}return this.fromArray(a.elements,4*h)},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z},fromArray:function(a,h){return void 0===h&&(h=0),this.x=a[h],this.y=a[h+1],this.z=a[h+2],this},toArray:function(a,h){return void 0===a&&(a=[]),void 0===h&&(h=0),a[h]=this.x,a[h+1]=this.y,a[h+2]=this.z,a},fromAttribute:function(a,h,g){return void 0!==g&&console.warn("THREE.Vector3: offset has been removed from .fromAttribute()."),this.x=a.getX(h),this.y=a.getY(h),this.z=a.getZ(h),this}},vs.prototype={constructor:vs,isMatrix4:!0,set:function(a,h,g,y,x,M,F,z,le,re,ve,Ce,Ve,Ue,We,ft){var dt=this.elements;return dt[0]=a,dt[4]=h,dt[8]=g,dt[12]=y,dt[1]=x,dt[5]=M,dt[9]=F,dt[13]=z,dt[2]=le,dt[6]=re,dt[10]=ve,dt[14]=Ce,dt[3]=Ve,dt[7]=Ue,dt[11]=We,dt[15]=ft,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new vs).fromArray(this.elements)},copy:function(a){return this.elements.set(a.elements),this},copyPosition:function(a){var h=this.elements,g=a.elements;return h[12]=g[12],h[13]=g[13],h[14]=g[14],this},extractBasis:function(a,h,g){return a.setFromMatrixColumn(this,0),h.setFromMatrixColumn(this,1),g.setFromMatrixColumn(this,2),this},makeBasis:function(a,h,g){return this.set(a.x,h.x,g.x,0,a.y,h.y,g.y,0,a.z,h.z,g.z,0,0,0,0,1),this},extractRotation:function(){var a;return function(g){void 0===a&&(a=new on);var y=this.elements,x=g.elements,M=1/a.setFromMatrixColumn(g,0).length(),F=1/a.setFromMatrixColumn(g,1).length(),z=1/a.setFromMatrixColumn(g,2).length();return y[0]=x[0]*M,y[1]=x[1]*M,y[2]=x[2]*M,y[4]=x[4]*F,y[5]=x[5]*F,y[6]=x[6]*F,y[8]=x[8]*z,y[9]=x[9]*z,y[10]=x[10]*z,this}}(),makeRotationFromEuler:function(a){!1===(a&&a.isEuler)&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var h=this.elements,g=a.x,y=a.y,x=a.z,M=Math.cos(g),F=Math.sin(g),z=Math.cos(y),le=Math.sin(y),re=Math.cos(x),ve=Math.sin(x);if("XYZ"===a.order){var Ce=M*re,Ve=M*ve,Ue=F*re,We=F*ve;h[0]=z*re,h[4]=-z*ve,h[8]=le,h[1]=Ve+Ue*le,h[5]=Ce-We*le,h[9]=-F*z,h[2]=We-Ce*le,h[6]=Ue+Ve*le,h[10]=M*z}else if("YXZ"===a.order){var dt=z*ve,at=le*re;h[0]=(ft=z*re)+(xt=le*ve)*F,h[4]=at*F-dt,h[8]=M*le,h[1]=M*ve,h[5]=M*re,h[9]=-F,h[2]=dt*F-at,h[6]=xt+ft*F,h[10]=M*z}else if("ZXY"===a.order){var ft,xt;dt=z*ve,at=le*re,h[0]=(ft=z*re)-(xt=le*ve)*F,h[4]=-M*ve,h[8]=at+dt*F,h[1]=dt+at*F,h[5]=M*re,h[9]=xt-ft*F,h[2]=-M*le,h[6]=F,h[10]=M*z}else if("ZYX"===a.order)Ce=M*re,Ve=M*ve,Ue=F*re,We=F*ve,h[0]=z*re,h[4]=Ue*le-Ve,h[8]=Ce*le+We,h[1]=z*ve,h[5]=We*le+Ce,h[9]=Ve*le-Ue,h[2]=-le,h[6]=F*z,h[10]=M*z;else if("YZX"===a.order){var St=M*z,nn=M*le,qt=F*z,gn=F*le;h[0]=z*re,h[4]=gn-St*ve,h[8]=qt*ve+nn,h[1]=ve,h[5]=M*re,h[9]=-F*re,h[2]=-le*re,h[6]=nn*ve+qt,h[10]=St-gn*ve}else"XZY"===a.order&&(St=M*z,nn=M*le,qt=F*z,gn=F*le,h[0]=z*re,h[4]=-ve,h[8]=le*re,h[1]=St*ve+gn,h[5]=M*re,h[9]=nn*ve-qt,h[2]=qt*ve-nn,h[6]=F*re,h[10]=gn*ve+St);return h[3]=0,h[7]=0,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,this},makeRotationFromQuaternion:function(a){var h=this.elements,g=a.x,y=a.y,x=a.z,M=a.w,F=g+g,z=y+y,le=x+x,re=g*F,ve=g*z,Ce=g*le,Ve=y*z,Ue=y*le,We=x*le,ft=M*F,dt=M*z,at=M*le;return h[0]=1-(Ve+We),h[4]=ve-at,h[8]=Ce+dt,h[1]=ve+at,h[5]=1-(re+We),h[9]=Ue-ft,h[2]=Ce-dt,h[6]=Ue+ft,h[10]=1-(re+Ve),h[3]=0,h[7]=0,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,this},lookAt:function(){var a,h,g;return function(x,M,F){void 0===a&&(a=new on,h=new on,g=new on);var z=this.elements;return g.subVectors(x,M).normalize(),0===g.lengthSq()&&(g.z=1),a.crossVectors(F,g).normalize(),0===a.lengthSq()&&(g.z+=1e-4,a.crossVectors(F,g).normalize()),h.crossVectors(g,a),z[0]=a.x,z[4]=h.x,z[8]=g.x,z[1]=a.y,z[5]=h.y,z[9]=g.y,z[2]=a.z,z[6]=h.z,z[10]=g.z,this}}(),multiply:function(a,h){return void 0!==h?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(a,h)):this.multiplyMatrices(this,a)},premultiply:function(a){return this.multiplyMatrices(a,this)},multiplyMatrices:function(a,h){var g=a.elements,y=h.elements,x=this.elements,M=g[0],F=g[4],z=g[8],le=g[12],re=g[1],ve=g[5],Ce=g[9],Ve=g[13],Ue=g[2],We=g[6],ft=g[10],dt=g[14],at=g[3],xt=g[7],St=g[11],nn=g[15],qt=y[0],gn=y[4],un=y[8],an=y[12],_n=y[1],On=y[5],Ti=y[9],di=y[13],Jt=y[2],tn=y[6],Xn=y[10],ni=y[14],Mi=y[3],Ai=y[7],gi=y[11],ar=y[15];return x[0]=M*qt+F*_n+z*Jt+le*Mi,x[4]=M*gn+F*On+z*tn+le*Ai,x[8]=M*un+F*Ti+z*Xn+le*gi,x[12]=M*an+F*di+z*ni+le*ar,x[1]=re*qt+ve*_n+Ce*Jt+Ve*Mi,x[5]=re*gn+ve*On+Ce*tn+Ve*Ai,x[9]=re*un+ve*Ti+Ce*Xn+Ve*gi,x[13]=re*an+ve*di+Ce*ni+Ve*ar,x[2]=Ue*qt+We*_n+ft*Jt+dt*Mi,x[6]=Ue*gn+We*On+ft*tn+dt*Ai,x[10]=Ue*un+We*Ti+ft*Xn+dt*gi,x[14]=Ue*an+We*di+ft*ni+dt*ar,x[3]=at*qt+xt*_n+St*Jt+nn*Mi,x[7]=at*gn+xt*On+St*tn+nn*Ai,x[11]=at*un+xt*Ti+St*Xn+nn*gi,x[15]=at*an+xt*di+St*ni+nn*ar,this},multiplyToArray:function(a,h,g){var y=this.elements;return this.multiplyMatrices(a,h),g[0]=y[0],g[1]=y[1],g[2]=y[2],g[3]=y[3],g[4]=y[4],g[5]=y[5],g[6]=y[6],g[7]=y[7],g[8]=y[8],g[9]=y[9],g[10]=y[10],g[11]=y[11],g[12]=y[12],g[13]=y[13],g[14]=y[14],g[15]=y[15],this},multiplyScalar:function(a){var h=this.elements;return h[0]*=a,h[4]*=a,h[8]*=a,h[12]*=a,h[1]*=a,h[5]*=a,h[9]*=a,h[13]*=a,h[2]*=a,h[6]*=a,h[10]*=a,h[14]*=a,h[3]*=a,h[7]*=a,h[11]*=a,h[15]*=a,this},applyToVector3Array:function(){var a;return function(g,y,x){void 0===a&&(a=new on),void 0===y&&(y=0),void 0===x&&(x=g.length);for(var M=0,F=y;M<x;M+=3,F+=3)a.fromArray(g,F),a.applyMatrix4(this),a.toArray(g,F);return g}}(),applyToBufferAttribute:function(){var a;return function(g){void 0===a&&(a=new on);for(var y=0,x=g.count;y<x;y++)a.x=g.getX(y),a.y=g.getY(y),a.z=g.getZ(y),a.applyMatrix4(this),g.setXYZ(y,a.x,a.y,a.z);return g}}(),determinant:function(){var a=this.elements,h=a[0],g=a[4],y=a[8],x=a[12],M=a[1],F=a[5],z=a[9],le=a[13],re=a[2],ve=a[6],Ce=a[10],Ve=a[14];return a[3]*(+x*z*ve-y*le*ve-x*F*Ce+g*le*Ce+y*F*Ve-g*z*Ve)+a[7]*(+h*z*Ve-h*le*Ce+x*M*Ce-y*M*Ve+y*le*re-x*z*re)+a[11]*(+h*le*ve-h*F*Ve-x*M*ve+g*M*Ve+x*F*re-g*le*re)+a[15]*(-y*F*re-h*z*ve+h*F*Ce+y*M*ve-g*M*Ce+g*z*re)},transpose:function(){var h,a=this.elements;return h=a[1],a[1]=a[4],a[4]=h,h=a[2],a[2]=a[8],a[8]=h,h=a[6],a[6]=a[9],a[9]=h,h=a[3],a[3]=a[12],a[12]=h,h=a[7],a[7]=a[13],a[13]=h,h=a[11],a[11]=a[14],a[14]=h,this},setPosition:function(a){var h=this.elements;return h[12]=a.x,h[13]=a.y,h[14]=a.z,this},getInverse:function(a,h){var g=this.elements,y=a.elements,x=y[0],M=y[1],F=y[2],z=y[3],le=y[4],re=y[5],ve=y[6],Ce=y[7],Ve=y[8],Ue=y[9],We=y[10],ft=y[11],dt=y[12],at=y[13],xt=y[14],St=y[15],nn=Ue*xt*Ce-at*We*Ce+at*ve*ft-re*xt*ft-Ue*ve*St+re*We*St,qt=dt*We*Ce-Ve*xt*Ce-dt*ve*ft+le*xt*ft+Ve*ve*St-le*We*St,gn=Ve*at*Ce-dt*Ue*Ce+dt*re*ft-le*at*ft-Ve*re*St+le*Ue*St,un=dt*Ue*ve-Ve*at*ve-dt*re*We+le*at*We+Ve*re*xt-le*Ue*xt,an=x*nn+M*qt+F*gn+z*un;if(0===an){var _n="THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0";if(!0===h)throw new Error(_n);return console.warn(_n),this.identity()}var On=1/an;return g[0]=nn*On,g[1]=(at*We*z-Ue*xt*z-at*F*ft+M*xt*ft+Ue*F*St-M*We*St)*On,g[2]=(re*xt*z-at*ve*z+at*F*Ce-M*xt*Ce-re*F*St+M*ve*St)*On,g[3]=(Ue*ve*z-re*We*z-Ue*F*Ce+M*We*Ce+re*F*ft-M*ve*ft)*On,g[4]=qt*On,g[5]=(Ve*xt*z-dt*We*z+dt*F*ft-x*xt*ft-Ve*F*St+x*We*St)*On,g[6]=(dt*ve*z-le*xt*z-dt*F*Ce+x*xt*Ce+le*F*St-x*ve*St)*On,g[7]=(le*We*z-Ve*ve*z+Ve*F*Ce-x*We*Ce-le*F*ft+x*ve*ft)*On,g[8]=gn*On,g[9]=(dt*Ue*z-Ve*at*z-dt*M*ft+x*at*ft+Ve*M*St-x*Ue*St)*On,g[10]=(le*at*z-dt*re*z+dt*M*Ce-x*at*Ce-le*M*St+x*re*St)*On,g[11]=(Ve*re*z-le*Ue*z-Ve*M*Ce+x*Ue*Ce+le*M*ft-x*re*ft)*On,g[12]=un*On,g[13]=(Ve*at*F-dt*Ue*F+dt*M*We-x*at*We-Ve*M*xt+x*Ue*xt)*On,g[14]=(dt*re*F-le*at*F-dt*M*ve+x*at*ve+le*M*xt-x*re*xt)*On,g[15]=(le*Ue*F-Ve*re*F+Ve*M*ve-x*Ue*ve-le*M*We+x*re*We)*On,this},scale:function(a){var h=this.elements,g=a.x,y=a.y,x=a.z;return h[0]*=g,h[4]*=y,h[8]*=x,h[1]*=g,h[5]*=y,h[9]*=x,h[2]*=g,h[6]*=y,h[10]*=x,h[3]*=g,h[7]*=y,h[11]*=x,this},getMaxScaleOnAxis:function(){var a=this.elements;return Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],a[4]*a[4]+a[5]*a[5]+a[6]*a[6],a[8]*a[8]+a[9]*a[9]+a[10]*a[10]))},makeTranslation:function(a,h,g){return this.set(1,0,0,a,0,1,0,h,0,0,1,g,0,0,0,1),this},makeRotationX:function(a){var h=Math.cos(a),g=Math.sin(a);return this.set(1,0,0,0,0,h,-g,0,0,g,h,0,0,0,0,1),this},makeRotationY:function(a){var h=Math.cos(a),g=Math.sin(a);return this.set(h,0,g,0,0,1,0,0,-g,0,h,0,0,0,0,1),this},makeRotationZ:function(a){var h=Math.cos(a),g=Math.sin(a);return this.set(h,-g,0,0,g,h,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(a,h){var g=Math.cos(h),y=Math.sin(h),x=1-g,M=a.x,F=a.y,z=a.z,le=x*M,re=x*F;return this.set(le*M+g,le*F-y*z,le*z+y*F,0,le*F+y*z,re*F+g,re*z-y*M,0,le*z-y*F,re*z+y*M,x*z*z+g,0,0,0,0,1),this},makeScale:function(a,h,g){return this.set(a,0,0,0,0,h,0,0,0,0,g,0,0,0,0,1),this},makeShear:function(a,h,g){return this.set(1,h,g,0,a,1,g,0,a,h,1,0,0,0,0,1),this},compose:function(a,h,g){return this.makeRotationFromQuaternion(h),this.scale(g),this.setPosition(a),this},decompose:function(){var a,h;return function(y,x,M){void 0===a&&(a=new on,h=new vs);var F=this.elements,z=a.set(F[0],F[1],F[2]).length(),le=a.set(F[4],F[5],F[6]).length(),re=a.set(F[8],F[9],F[10]).length();this.determinant()<0&&(z=-z),y.x=F[12],y.y=F[13],y.z=F[14],h.elements.set(this.elements);var Ce=1/z,Ve=1/le,Ue=1/re;return h.elements[0]*=Ce,h.elements[1]*=Ce,h.elements[2]*=Ce,h.elements[4]*=Ve,h.elements[5]*=Ve,h.elements[6]*=Ve,h.elements[8]*=Ue,h.elements[9]*=Ue,h.elements[10]*=Ue,x.setFromRotationMatrix(h),M.x=z,M.y=le,M.z=re,this}}(),makeFrustum:function(a,h,g,y,x,M){var F=this.elements,le=2*x/(y-g),re=(h+a)/(h-a),ve=(y+g)/(y-g),Ce=-(M+x)/(M-x),Ve=-2*M*x/(M-x);return F[0]=2*x/(h-a),F[4]=0,F[8]=re,F[12]=0,F[1]=0,F[5]=le,F[9]=ve,F[13]=0,F[2]=0,F[6]=0,F[10]=Ce,F[14]=Ve,F[3]=0,F[7]=0,F[11]=-1,F[15]=0,this},makePerspective:function(a,h,g,y){var x=g*Math.tan(As.DEG2RAD*a*.5),M=-x;return this.makeFrustum(M*h,x*h,M,x,g,y)},makeOrthographic:function(a,h,g,y,x,M){var F=this.elements,z=1/(h-a),le=1/(g-y),re=1/(M-x),ve=(h+a)*z,Ce=(g+y)*le,Ve=(M+x)*re;return F[0]=2*z,F[4]=0,F[8]=0,F[12]=-ve,F[1]=0,F[5]=2*le,F[9]=0,F[13]=-Ce,F[2]=0,F[6]=0,F[10]=-2*re,F[14]=-Ve,F[3]=0,F[7]=0,F[11]=0,F[15]=1,this},equals:function(a){for(var h=this.elements,g=a.elements,y=0;y<16;y++)if(h[y]!==g[y])return!1;return!0},fromArray:function(a,h){void 0===h&&(h=0);for(var g=0;g<16;g++)this.elements[g]=a[g+h];return this},toArray:function(a,h){void 0===a&&(a=[]),void 0===h&&(h=0);var g=this.elements;return a[h]=g[0],a[h+1]=g[1],a[h+2]=g[2],a[h+3]=g[3],a[h+4]=g[4],a[h+5]=g[5],a[h+6]=g[6],a[h+7]=g[7],a[h+8]=g[8],a[h+9]=g[9],a[h+10]=g[10],a[h+11]=g[11],a[h+12]=g[12],a[h+13]=g[13],a[h+14]=g[14],a[h+15]=g[15],a}},(Od.prototype=Object.create(Xo.prototype)).constructor=Od,Od.prototype.isCubeTexture=!0,Object.defineProperty(Od.prototype,"images",{get:function(){return this.image},set:function(a){this.image=a}});var F_=new Xo,Pg=new Od;function _v(){this.seq=[],this.map={}}var Ec=[],ro=[];function Mh(a,h,g){var y=a[0];if(y<=0||y>0)return a;var x=h*g,M=Ec[x];if(void 0===M&&(M=new Float32Array(x),Ec[x]=M),0!==h){y.toArray(M,0);for(var F=1,z=0;F!==h;++F)a[F].toArray(M,z+=g)}return M}function N_(a,h){var g=ro[h];void 0===g&&(g=new Int32Array(h),ro[h]=g);for(var y=0;y!==h;++y)g[y]=a.allocTextureUnit();return g}function uc(a,h){a.uniform1f(this.addr,h)}function Zi(a,h){a.uniform1i(this.addr,h)}function fb(a,h){void 0===h.x?a.uniform2fv(this.addr,h):a.uniform2f(this.addr,h.x,h.y)}function Sr(a,h){void 0!==h.x?a.uniform3f(this.addr,h.x,h.y,h.z):void 0!==h.r?a.uniform3f(this.addr,h.r,h.g,h.b):a.uniform3fv(this.addr,h)}function Tc(a,h){void 0===h.x?a.uniform4fv(this.addr,h):a.uniform4f(this.addr,h.x,h.y,h.z,h.w)}function Dy(a,h){a.uniformMatrix2fv(this.addr,!1,h.elements||h)}function B_(a,h){a.uniformMatrix3fv(this.addr,!1,h.elements||h)}function Ta(a,h){a.uniformMatrix4fv(this.addr,!1,h.elements||h)}function ha(a,h,g){var y=g.allocTextureUnit();a.uniform1i(this.addr,y),g.setTexture2D(h||F_,y)}function qf(a,h,g){var y=g.allocTextureUnit();a.uniform1i(this.addr,y),g.setTextureCube(h||Pg,y)}function Up(a,h){a.uniform2iv(this.addr,h)}function wm(a,h){a.uniform3iv(this.addr,h)}function Am(a,h){a.uniform4iv(this.addr,h)}function bv(a,h){a.uniform1fv(this.addr,h)}function Cv(a,h){a.uniform1iv(this.addr,h)}function Nu(a,h){a.uniform2fv(this.addr,Mh(h,this.size,2))}function Xl(a,h){a.uniform3fv(this.addr,Mh(h,this.size,3))}function z_(a,h){a.uniform4fv(this.addr,Mh(h,this.size,4))}function sh(a,h){a.uniformMatrix2fv(this.addr,!1,Mh(h,this.size,4))}function oh(a,h){a.uniformMatrix3fv(this.addr,!1,Mh(h,this.size,9))}function Ly(a,h){a.uniformMatrix4fv(this.addr,!1,Mh(h,this.size,16))}function Dh(a,h,g){var y=h.length,x=N_(g,y);a.uniform1iv(this.addr,x);for(var M=0;M!==y;++M)g.setTexture2D(h[M]||F_,x[M])}function Ma(a,h,g){var y=h.length,x=N_(g,y);a.uniform1iv(this.addr,x);for(var M=0;M!==y;++M)g.setTextureCube(h[M]||Pg,x[M])}function V_(a,h,g){this.id=a,this.addr=g,this.setValue=function rs(a){switch(a){case 5126:return uc;case 35664:return fb;case 35665:return Sr;case 35666:return Tc;case 35674:return Dy;case 35675:return B_;case 35676:return Ta;case 35678:return ha;case 35680:return qf;case 5124:case 35670:return Zi;case 35667:case 35671:return Up;case 35668:case 35672:return wm;case 35669:case 35673:return Am}}(h.type)}function Py(a,h,g){this.id=a,this.addr=g,this.size=h.size,this.setValue=function so(a){switch(a){case 5126:return bv;case 35664:return Nu;case 35665:return Xl;case 35666:return z_;case 35674:return sh;case 35675:return oh;case 35676:return Ly;case 35678:return Dh;case 35680:return Ma;case 5124:case 35670:return Cv;case 35667:case 35671:return Up;case 35668:case 35672:return wm;case 35669:case 35673:return Am}}(h.type)}function Fd(a){this.id=a,_v.call(this)}Fd.prototype.setValue=function(a,h){for(var g=this.seq,y=0,x=g.length;y!==x;++y){var M=g[y];M.setValue(a,h[M.id])}};var _o=/([\w\d_]+)(\])?(\[|\.)?/g;function Ka(a,h){a.seq.push(h),a.map[h.id]=h}function Xf(a,h,g){var y=a.name,x=y.length;for(_o.lastIndex=0;;){var M=_o.exec(y),z=M[1],re=M[3];if("]"===M[2]&&(z|=0),void 0===re||"["===re&&_o.lastIndex+2===x){Ka(g,void 0===re?new V_(z,a,h):new Py(z,a,h));break}var Ce=g.map[z];void 0===Ce&&Ka(g,Ce=new Fd(z)),g=Ce}}function Za(a,h,g){_v.call(this),this.renderer=g;for(var y=a.getProgramParameter(h,a.ACTIVE_UNIFORMS),x=0;x!==y;++x){var M=a.getActiveUniform(h,x);Xf(M,a.getUniformLocation(h,M.name),this)}}Za.prototype.setValue=function(a,h,g){var y=this.map[h];void 0!==y&&y.setValue(a,g,this.renderer)},Za.prototype.set=function(a,h,g){var y=this.map[g];void 0!==y&&y.setValue(a,h[g],this.renderer)},Za.prototype.setOptional=function(a,h,g){var y=h[g];void 0!==y&&this.setValue(a,g,y)},Za.upload=function(a,h,g,y){for(var x=0,M=h.length;x!==M;++x){var F=h[x],z=g[F.id];!1!==z.needsUpdate&&F.setValue(a,z.value,y)}},Za.seqWithValue=function(a,h){for(var g=[],y=0,x=a.length;y!==x;++y){var M=a[y];M.id in h&&g.push(M)}return g};var sl={merge:function(a){for(var h={},g=0;g<a.length;g++){var y=this.clone(a[g]);for(var x in y)h[x]=y[x]}return h},clone:function(a){var h={};for(var g in a)for(var y in h[g]={},a[g]){var x=a[g][y];h[g][y]=x&&(x.isColor||x.isMatrix3||x.isMatrix4||x.isVector2||x.isVector3||x.isVector4||x.isTexture)?x.clone():Array.isArray(x)?x.slice():x}return h}},$s={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t\t}\n\t\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 ltcTextureCoords( const in GeometricContext geometry, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = (LUT_SIZE - 1.0)/LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5/LUT_SIZE;\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 P = geometry.position;\n\tfloat theta = acos( dot( N, V ) );\n\tvec2 uv = vec2(\n\t\tsqrt( saturate( roughness ) ),\n\t\tsaturate( theta / ( 0.5 * PI ) ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nvoid clipQuadToHorizon( inout vec3 L[5], out int n ) {\n\tint config = 0;\n\tif ( L[0].z > 0.0 ) config += 1;\n\tif ( L[1].z > 0.0 ) config += 2;\n\tif ( L[2].z > 0.0 ) config += 4;\n\tif ( L[3].z > 0.0 ) config += 8;\n\tn = 0;\n\tif ( config == 0 ) {\n\t} else if ( config == 1 ) {\n\t\tn = 3;\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t\tL[2] = -L[3].z * L[0] + L[0].z * L[3];\n\t} else if ( config == 2 ) {\n\t\tn = 3;\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t} else if ( config == 3 ) {\n\t\tn = 4;\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t\tL[3] = -L[3].z * L[0] + L[0].z * L[3];\n\t} else if ( config == 4 ) {\n\t\tn = 3;\n\t\tL[0] = -L[3].z * L[2] + L[2].z * L[3];\n\t\tL[1] = -L[1].z * L[2] + L[2].z * L[1];\n\t} else if ( config == 5 ) {\n\t\tn = 0;\n\t} else if ( config == 6 ) {\n\t\tn = 4;\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t\tL[3] = -L[3].z * L[2] + L[2].z * L[3];\n\t} else if ( config == 7 ) {\n\t\tn = 5;\n\t\tL[4] = -L[3].z * L[0] + L[0].z * L[3];\n\t\tL[3] = -L[3].z * L[2] + L[2].z * L[3];\n\t} else if ( config == 8 ) {\n\t\tn = 3;\n\t\tL[0] = -L[0].z * L[3] + L[3].z * L[0];\n\t\tL[1] = -L[2].z * L[3] + L[3].z * L[2];\n\t\tL[2] =  L[3];\n\t} else if ( config == 9 ) {\n\t\tn = 4;\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t\tL[2] = -L[2].z * L[3] + L[3].z * L[2];\n\t} else if ( config == 10 ) {\n\t\tn = 0;\n\t} else if ( config == 11 ) {\n\t\tn = 5;\n\t\tL[4] = L[3];\n\t\tL[3] = -L[2].z * L[3] + L[3].z * L[2];\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t} else if ( config == 12 ) {\n\t\tn = 4;\n\t\tL[1] = -L[1].z * L[2] + L[2].z * L[1];\n\t\tL[0] = -L[0].z * L[3] + L[3].z * L[0];\n\t} else if ( config == 13 ) {\n\t\tn = 5;\n\t\tL[4] = L[3];\n\t\tL[3] = L[2];\n\t\tL[2] = -L[1].z * L[2] + L[2].z * L[1];\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t} else if ( config == 14 ) {\n\t\tn = 5;\n\t\tL[4] = -L[0].z * L[3] + L[3].z * L[0];\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t} else if ( config == 15 ) {\n\t\tn = 4;\n\t}\n\tif ( n == 3 )\n\t\tL[3] = L[0];\n\tif ( n == 4 )\n\t\tL[4] = L[0];\n}\nfloat integrateLtcBrdfOverRectEdge( vec3 v1, vec3 v2 ) {\n\tfloat cosTheta = dot( v1, v2 );\n\tfloat theta = acos( cosTheta );\n\tfloat res = cross( v1, v2 ).z * ( ( theta > 0.001 ) ? theta / sin( theta ) : 1.0 );\n\treturn res;\n}\nvoid initRectPoints( const in vec3 pos, const in vec3 halfWidth, const in vec3 halfHeight, out vec3 rectPoints[4] ) {\n\trectPoints[0] = pos - halfWidth - halfHeight;\n\trectPoints[1] = pos + halfWidth - halfHeight;\n\trectPoints[2] = pos + halfWidth + halfHeight;\n\trectPoints[3] = pos - halfWidth + halfHeight;\n}\nvec3 integrateLtcBrdfOverRect( const in GeometricContext geometry, const in mat3 brdfMat, const in vec3 rectPoints[4] ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 P = geometry.position;\n\tvec3 T1, T2;\n\tT1 = normalize(V - N * dot( V, N ));\n\tT2 = - cross( N, T1 );\n\tmat3 brdfWrtSurface = brdfMat * transpose( mat3( T1, T2, N ) );\n\tvec3 clippedRect[5];\n\tclippedRect[0] = brdfWrtSurface * ( rectPoints[0] - P );\n\tclippedRect[1] = brdfWrtSurface * ( rectPoints[1] - P );\n\tclippedRect[2] = brdfWrtSurface * ( rectPoints[2] - P );\n\tclippedRect[3] = brdfWrtSurface * ( rectPoints[3] - P );\n\tint n;\n\tclipQuadToHorizon(clippedRect, n);\n\tif ( n == 0 )\n\t\treturn vec3( 0, 0, 0 );\n\tclippedRect[0] = normalize( clippedRect[0] );\n\tclippedRect[1] = normalize( clippedRect[1] );\n\tclippedRect[2] = normalize( clippedRect[2] );\n\tclippedRect[3] = normalize( clippedRect[3] );\n\tclippedRect[4] = normalize( clippedRect[4] );\n\tfloat sum = 0.0;\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[0], clippedRect[1] );\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[1], clippedRect[2] );\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[2], clippedRect[3] );\n\tif (n >= 4)\n\t\tsum += integrateLtcBrdfOverRectEdge( clippedRect[3], clippedRect[4] );\n\tif (n == 5)\n\t\tsum += integrateLtcBrdfOverRectEdge( clippedRect[4], clippedRect[0] );\n\tsum = max( 0.0, sum );\n\tvec3 Lo_i = vec3( sum, sum, sum );\n\treturn Lo_i;\n}\nvec3 Rect_Area_Light_Specular_Reflectance(\n\t\tconst in GeometricContext geometry,\n\t\tconst in vec3 lightPos, const in vec3 lightHalfWidth, const in vec3 lightHalfHeight,\n\t\tconst in float roughness,\n\t\tconst in sampler2D ltcMat, const in sampler2D ltcMag ) {\n\tvec3 rectPoints[4];\n\tinitRectPoints( lightPos, lightHalfWidth, lightHalfHeight, rectPoints );\n\tvec2 uv = ltcTextureCoords( geometry, roughness );\n\tvec4 brdfLtcApproxParams, t;\n\tbrdfLtcApproxParams = texture2D( ltcMat, uv );\n\tt = texture2D( ltcMat, uv );\n\tfloat brdfLtcScalar = texture2D( ltcMag, uv ).a;\n\tmat3 brdfLtcApproxMat = mat3(\n\t\tvec3(   1,   0, t.y ),\n\t\tvec3(   0, t.z,   0 ),\n\t\tvec3( t.w,   0, t.x )\n\t);\n\tvec3 specularReflectance = integrateLtcBrdfOverRect( geometry, brdfLtcApproxMat, rectPoints );\n\tspecularReflectance *= brdfLtcScalar;\n\treturn specularReflectance;\n}\nvec3 Rect_Area_Light_Diffuse_Reflectance(\n\t\tconst in GeometricContext geometry,\n\t\tconst in vec3 lightPos, const in vec3 lightHalfWidth, const in vec3 lightHalfHeight ) {\n\tvec3 rectPoints[4];\n\tinitRectPoints( lightPos, lightHalfWidth, lightHalfHeight, rectPoints );\n\tmat3 diffuseBrdfMat = mat3(1);\n\tvec3 diffuseReflectance = integrateLtcBrdfOverRect( geometry, diffuseBrdfMat, rectPoints );\n\treturn diffuseReflectance;\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos );\n\t\tvec3 vSigmaY = dFdy( surf_pos );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t\t\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\n\t\t\tvec4 plane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transpose( const in mat3 v ) {\n\tmat3 tmp;\n\ttmp[0] = vec3(v[0].x, v[1].x, v[2].x);\n\ttmp[1] = vec3(v[0].y, v[1].y, v[2].y);\n\ttmp[2] = vec3(v[0].z, v[1].z, v[2].z);\n\treturn tmp;\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"#ifdef FLIP_SIDED\n\tobjectNormal = -objectNormal;\n#endif\nvec3 transformedNormal = normalMatrix * objectNormal;\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n  return value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n  return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n  return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n  return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n  float maxComponent = max( max( value.r, value.g ), value.b );\n  float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n  return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n  return vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n  float maxRGB = max( value.x, max( value.g, value.b ) );\n  float M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n  M            = ceil( M * 255.0 ) / 255.0;\n  return vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n    return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n    float maxRGB = max( value.x, max( value.g, value.b ) );\n    float D      = max( maxRange / maxRGB, 1.0 );\n    D            = min( floor( D ) / 255.0, 1.0 );\n    return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n  vec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n  Xp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n  vec4 vResult;\n  vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n  float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n  vResult.w = fract(Le);\n  vResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n  return vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n  float Le = value.z * 255.0 + value.w;\n  vec3 Xp_Y_XYZp;\n  Xp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n  Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n  Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n  vec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n  return vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\t#else\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\t#endif\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltcMat;\tuniform sampler2D ltcMag;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = saturate( reflectVec.y * 0.5 + 0.5 );\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\n#if NUM_RECT_AREA_LIGHTS > 0\n    void RE_Direct_RectArea_BlinnPhong( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n        vec3 matDiffColor = material.diffuseColor;\n        vec3 matSpecColor = material.specularColor;\n        vec3 lightColor   = rectAreaLight.color;\n        float roughness = BlinnExponentToGGXRoughness( material.specularShininess );\n        vec3 spec = Rect_Area_Light_Specular_Reflectance(\n                geometry,\n                rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight,\n                roughness,\n                ltcMat, ltcMag );\n        vec3 diff = Rect_Area_Light_Diffuse_Reflectance(\n                geometry,\n                rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight );\n        reflectedLight.directSpecular += lightColor * matSpecColor * spec / PI2;\n        reflectedLight.directDiffuse  += lightColor * matDiffColor * diff / PI2;\n    }\n#endif\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n    void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n        vec3 matDiffColor = material.diffuseColor;\n        vec3 matSpecColor = material.specularColor;\n        vec3 lightColor   = rectAreaLight.color;\n        float roughness = material.specularRoughness;\n        vec3 spec = Rect_Area_Light_Specular_Reflectance(\n                geometry,\n                rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight,\n                roughness,\n                ltcMat, ltcMag );\n        vec3 diff = Rect_Area_Light_Diffuse_Reflectance(\n                geometry,\n                rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight );\n        reflectedLight.directSpecular += lightColor * matSpecColor * spec;\n        reflectedLight.directDiffuse  += lightColor * matDiffColor * diff;\n    }\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_template:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t \tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\t\t\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.r;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_flip:"#ifdef DOUBLE_SIDED\n\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n#else\n\tfloat flipNormal = 1.0;\n#endif\n",normal_fragment:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal ) * flipNormal;\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n  return normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n  return 1.0 - 2.0 * rgb.xyz;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n  return ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n  return linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n  return (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n  return ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"#ifdef USE_SKINNING\n\tvec4 mvPosition = modelViewMatrix * skinned;\n#else\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n#endif\ngl_Position = projectionMatrix * mvPosition;\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.r;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n    #if NUM_RECT_AREA_LIGHTS > 0\n    #endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn 1.0;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\tfloat dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n    #if NUM_RECT_AREA_LIGHTS > 0\n    #endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n    #if NUM_RECT_AREA_LIGHTS > 0\n    #endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n  return toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  color = max( vec3( 0.0 ), color - 0.004 );\n  return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\t#ifdef USE_SKINNING\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\t#else\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\t#endif\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"uniform vec3 lightPos;\nvarying vec4 vWorldPosition;\n#include <common>\n#include <packing>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );\n}\n",distanceRGBA_vert:"varying vec4 vWorldPosition;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED  ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#include <premultiplied_alpha_fragment>\n\t#include <encodings_fragment>\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED  ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED  ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n",shadow_frag:"uniform float opacity;\n#include <common>\n#include <packing>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( 0.0, 0.0, 0.0, opacity * ( 1.0  - getShadowMask() ) );\n}\n",shadow_vert:"#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n"};function Xr(a,h,g){return void 0===h&&void 0===g?this.set(a):this.setRGB(a,h,g)}Xr.prototype={constructor:Xr,isColor:!0,r:1,g:1,b:1,set:function(a){return a&&a.isColor?this.copy(a):"number"==typeof a?this.setHex(a):"string"==typeof a&&this.setStyle(a),this},setScalar:function(a){return this.r=a,this.g=a,this.b=a,this},setHex:function(a){return a=Math.floor(a),this.r=(a>>16&255)/255,this.g=(a>>8&255)/255,this.b=(255&a)/255,this},setRGB:function(a,h,g){return this.r=a,this.g=h,this.b=g,this},setHSL:function(){function a(h,g,y){return y<0&&(y+=1),y>1&&(y-=1),y<1/6?h+6*(g-h)*y:y<.5?g:y<2/3?h+6*(g-h)*(2/3-y):h}return function(g,y,x){if(g=As.euclideanModulo(g,1),y=As.clamp(y,0,1),x=As.clamp(x,0,1),0===y)this.r=this.g=this.b=x;else{var M=x<=.5?x*(1+y):x+y-x*y,F=2*x-M;this.r=a(F,M,g+1/3),this.g=a(F,M,g),this.b=a(F,M,g-1/3)}return this}}(),setStyle:function(a){function h(Ce){void 0!==Ce&&parseFloat(Ce)<1&&console.warn("THREE.Color: Alpha component of "+a+" will be ignored.")}var g;if(g=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(a)){var y,M=g[2];switch(g[1]){case"rgb":case"rgba":if(y=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(M))return this.r=Math.min(255,parseInt(y[1],10))/255,this.g=Math.min(255,parseInt(y[2],10))/255,this.b=Math.min(255,parseInt(y[3],10))/255,h(y[5]),this;if(y=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(M))return this.r=Math.min(100,parseInt(y[1],10))/100,this.g=Math.min(100,parseInt(y[2],10))/100,this.b=Math.min(100,parseInt(y[3],10))/100,h(y[5]),this;break;case"hsl":case"hsla":if(y=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(M)){var F=parseFloat(y[1])/360,z=parseInt(y[2],10)/100,le=parseInt(y[3],10)/100;return h(y[5]),this.setHSL(F,z,le)}}}else if(g=/^\#([A-Fa-f0-9]+)$/.exec(a)){var re,ve=(re=g[1]).length;if(3===ve)return this.r=parseInt(re.charAt(0)+re.charAt(0),16)/255,this.g=parseInt(re.charAt(1)+re.charAt(1),16)/255,this.b=parseInt(re.charAt(2)+re.charAt(2),16)/255,this;if(6===ve)return this.r=parseInt(re.charAt(0)+re.charAt(1),16)/255,this.g=parseInt(re.charAt(2)+re.charAt(3),16)/255,this.b=parseInt(re.charAt(4)+re.charAt(5),16)/255,this}return a&&a.length>0&&(void 0!==(re=Ug[a])?this.setHex(re):console.warn("THREE.Color: Unknown color "+a)),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(a){return this.r=a.r,this.g=a.g,this.b=a.b,this},copyGammaToLinear:function(a,h){return void 0===h&&(h=2),this.r=Math.pow(a.r,h),this.g=Math.pow(a.g,h),this.b=Math.pow(a.b,h),this},copyLinearToGamma:function(a,h){void 0===h&&(h=2);var g=h>0?1/h:1;return this.r=Math.pow(a.r,g),this.g=Math.pow(a.g,g),this.b=Math.pow(a.b,g),this},convertGammaToLinear:function(){var a=this.r,h=this.g,g=this.b;return this.r=a*a,this.g=h*h,this.b=g*g,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(a){var z,le,h=a||{h:0,s:0,l:0},g=this.r,y=this.g,x=this.b,M=Math.max(g,y,x),F=Math.min(g,y,x),re=(F+M)/2;if(F===M)z=0,le=0;else{var ve=M-F;switch(le=re<=.5?ve/(M+F):ve/(2-M-F),M){case g:z=(y-x)/ve+(y<x?6:0);break;case y:z=(x-g)/ve+2;break;case x:z=(g-y)/ve+4}z/=6}return h.h=z,h.s=le,h.l=re,h},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(a,h,g){var y=this.getHSL();return y.h+=a,y.s+=h,y.l+=g,this.setHSL(y.h,y.s,y.l),this},add:function(a){return this.r+=a.r,this.g+=a.g,this.b+=a.b,this},addColors:function(a,h){return this.r=a.r+h.r,this.g=a.g+h.g,this.b=a.b+h.b,this},addScalar:function(a){return this.r+=a,this.g+=a,this.b+=a,this},sub:function(a){return this.r=Math.max(0,this.r-a.r),this.g=Math.max(0,this.g-a.g),this.b=Math.max(0,this.b-a.b),this},multiply:function(a){return this.r*=a.r,this.g*=a.g,this.b*=a.b,this},multiplyScalar:function(a){return this.r*=a,this.g*=a,this.b*=a,this},lerp:function(a,h){return this.r+=(a.r-this.r)*h,this.g+=(a.g-this.g)*h,this.b+=(a.b-this.b)*h,this},equals:function(a){return a.r===this.r&&a.g===this.g&&a.b===this.b},fromArray:function(a,h){return void 0===h&&(h=0),this.r=a[h],this.g=a[h+1],this.b=a[h+2],this},toArray:function(a,h){return void 0===a&&(a=[]),void 0===h&&(h=0),a[h]=this.r,a[h+1]=this.g,a[h+2]=this.b,a},toJSON:function(){return this.getHex()}};var Ug={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function ns(a,h,g,y,x,M,F,z,le,re,ve,Ce){Xo.call(this,null,M,F,z,le,re,y,x,ve,Ce),this.image={data:a,width:h,height:g},this.magFilter=void 0!==le?le:Xa,this.minFilter=void 0!==re?re:Xa,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}(ns.prototype=Object.create(Xo.prototype)).constructor=ns,ns.prototype.isDataTexture=!0;var us={common:{diffuse:{value:new Xr(15658734)},opacity:{value:1},map:{value:null},offsetRepeat:{value:new Yo(0,0,1,1)},specularMap:{value:null},alphaMap:{value:null},envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new er(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Xr(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new Xr(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new Yo(0,0,1,1)}}},Lc={basic:{uniforms:sl.merge([us.common,us.aomap,us.lightmap,us.fog]),vertexShader:$s.meshbasic_vert,fragmentShader:$s.meshbasic_frag},lambert:{uniforms:sl.merge([us.common,us.aomap,us.lightmap,us.emissivemap,us.fog,us.lights,{emissive:{value:new Xr(0)}}]),vertexShader:$s.meshlambert_vert,fragmentShader:$s.meshlambert_frag},phong:{uniforms:sl.merge([us.common,us.aomap,us.lightmap,us.emissivemap,us.bumpmap,us.normalmap,us.displacementmap,us.gradientmap,us.fog,us.lights,{emissive:{value:new Xr(0)},specular:{value:new Xr(1118481)},shininess:{value:30}}]),vertexShader:$s.meshphong_vert,fragmentShader:$s.meshphong_frag},standard:{uniforms:sl.merge([us.common,us.aomap,us.lightmap,us.emissivemap,us.bumpmap,us.normalmap,us.displacementmap,us.roughnessmap,us.metalnessmap,us.fog,us.lights,{emissive:{value:new Xr(0)},roughness:{value:.5},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:$s.meshphysical_vert,fragmentShader:$s.meshphysical_frag},points:{uniforms:sl.merge([us.points,us.fog]),vertexShader:$s.points_vert,fragmentShader:$s.points_frag},dashed:{uniforms:sl.merge([us.common,us.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:$s.linedashed_vert,fragmentShader:$s.linedashed_frag},depth:{uniforms:sl.merge([us.common,us.displacementmap]),vertexShader:$s.depth_vert,fragmentShader:$s.depth_frag},normal:{uniforms:sl.merge([us.common,us.bumpmap,us.normalmap,us.displacementmap,{opacity:{value:1}}]),vertexShader:$s.normal_vert,fragmentShader:$s.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:$s.cube_vert,fragmentShader:$s.cube_frag},equirect:{uniforms:{tEquirect:{value:null},tFlip:{value:-1}},vertexShader:$s.equirect_vert,fragmentShader:$s.equirect_frag},distanceRGBA:{uniforms:{lightPos:{value:new on}},vertexShader:$s.distanceRGBA_vert,fragmentShader:$s.distanceRGBA_frag}};function od(a,h){this.min=void 0!==a?a:new er(1/0,1/0),this.max=void 0!==h?h:new er(-1/0,-1/0)}function $p(a,h){var x,M,F,z,le,re,ve,Ce,g=a.context,y=a.state;this.render=function(We,ft,dt){if(0!==h.length){var at=new on,xt=dt.w/dt.z,St=.5*dt.z,nn=.5*dt.w,qt=16/dt.w,gn=new er(qt*xt,qt),un=new on(1,1,0),an=new er(1,1),_n=new od;_n.min.set(dt.x,dt.y),_n.max.set(dt.x+(dt.z-16),dt.y+(dt.w-16)),void 0===z&&function Ve(){var We=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),ft=new Uint16Array([0,1,2,0,2,3]);x=g.createBuffer(),M=g.createBuffer(),g.bindBuffer(g.ARRAY_BUFFER,x),g.bufferData(g.ARRAY_BUFFER,We,g.STATIC_DRAW),g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,M),g.bufferData(g.ELEMENT_ARRAY_BUFFER,ft,g.STATIC_DRAW),ve=g.createTexture(),Ce=g.createTexture(),y.bindTexture(g.TEXTURE_2D,ve),g.texImage2D(g.TEXTURE_2D,0,g.RGB,16,16,0,g.RGB,g.UNSIGNED_BYTE,null),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.NEAREST),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.NEAREST),y.bindTexture(g.TEXTURE_2D,Ce),g.texImage2D(g.TEXTURE_2D,0,g.RGBA,16,16,0,g.RGBA,g.UNSIGNED_BYTE,null),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.NEAREST),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.NEAREST),F={vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if ( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if ( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if ( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")},z=function Ue(We){var ft=g.createProgram(),dt=g.createShader(g.FRAGMENT_SHADER),at=g.createShader(g.VERTEX_SHADER),xt="precision "+a.getPrecision()+" float;\n";return g.shaderSource(dt,xt+We.fragmentShader),g.shaderSource(at,xt+We.vertexShader),g.compileShader(dt),g.compileShader(at),g.attachShader(ft,dt),g.attachShader(ft,at),g.linkProgram(ft),ft}(F),le={vertex:g.getAttribLocation(z,"position"),uv:g.getAttribLocation(z,"uv")},re={renderType:g.getUniformLocation(z,"renderType"),map:g.getUniformLocation(z,"map"),occlusionMap:g.getUniformLocation(z,"occlusionMap"),opacity:g.getUniformLocation(z,"opacity"),color:g.getUniformLocation(z,"color"),scale:g.getUniformLocation(z,"scale"),rotation:g.getUniformLocation(z,"rotation"),screenPosition:g.getUniformLocation(z,"screenPosition")}}(),g.useProgram(z),y.initAttributes(),y.enableAttribute(le.vertex),y.enableAttribute(le.uv),y.disableUnusedAttributes(),g.uniform1i(re.occlusionMap,0),g.uniform1i(re.map,1),g.bindBuffer(g.ARRAY_BUFFER,x),g.vertexAttribPointer(le.vertex,2,g.FLOAT,!1,16,0),g.vertexAttribPointer(le.uv,2,g.FLOAT,!1,16,8),g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,M),y.disable(g.CULL_FACE),y.setDepthWrite(!1);for(var On=0,Ti=h.length;On<Ti;On++){gn.set((qt=16/dt.w)*xt,qt);var di=h[On];if(at.set(di.matrixWorld.elements[12],di.matrixWorld.elements[13],di.matrixWorld.elements[14]),at.applyMatrix4(ft.matrixWorldInverse),at.applyProjection(ft.projectionMatrix),un.copy(at),an.x=dt.x+un.x*St+St-8,an.y=dt.y+un.y*nn+nn-8,!0===_n.containsPoint(an)){y.activeTexture(g.TEXTURE0),y.bindTexture(g.TEXTURE_2D,null),y.activeTexture(g.TEXTURE1),y.bindTexture(g.TEXTURE_2D,ve),g.copyTexImage2D(g.TEXTURE_2D,0,g.RGB,an.x,an.y,16,16,0),g.uniform1i(re.renderType,0),g.uniform2f(re.scale,gn.x,gn.y),g.uniform3f(re.screenPosition,un.x,un.y,un.z),y.disable(g.BLEND),y.enable(g.DEPTH_TEST),g.drawElements(g.TRIANGLES,6,g.UNSIGNED_SHORT,0),y.activeTexture(g.TEXTURE0),y.bindTexture(g.TEXTURE_2D,Ce),g.copyTexImage2D(g.TEXTURE_2D,0,g.RGBA,an.x,an.y,16,16,0),g.uniform1i(re.renderType,1),y.disable(g.DEPTH_TEST),y.activeTexture(g.TEXTURE1),y.bindTexture(g.TEXTURE_2D,ve),g.drawElements(g.TRIANGLES,6,g.UNSIGNED_SHORT,0),di.positionScreen.copy(un),di.customUpdateCallback?di.customUpdateCallback(di):di.updateLensFlares(),g.uniform1i(re.renderType,2),y.enable(g.BLEND);for(var Jt=0,tn=di.lensFlares.length;Jt<tn;Jt++){var Xn=di.lensFlares[Jt];Xn.opacity>.001&&Xn.scale>.001&&(un.x=Xn.x,un.y=Xn.y,un.z=Xn.z,gn.x=(qt=Xn.size*Xn.scale/dt.w)*xt,gn.y=qt,g.uniform3f(re.screenPosition,un.x,un.y,un.z),g.uniform2f(re.scale,gn.x,gn.y),g.uniform1f(re.rotation,Xn.rotation),g.uniform1f(re.opacity,Xn.opacity),g.uniform3f(re.color,Xn.color.r,Xn.color.g,Xn.color.b),y.setBlending(Xn.blending,Xn.blendEquation,Xn.blendSrc,Xn.blendDst),a.setTexture2D(Xn.texture,1),g.drawElements(g.TRIANGLES,6,g.UNSIGNED_SHORT,0))}}}y.enable(g.CULL_FACE),y.enable(g.DEPTH_TEST),y.setDepthWrite(!0),a.resetGLState()}}}function W_(a,h){var x,M,F,z,le,re,g=a.context,y=a.state,ve=new on,Ce=new kl,Ve=new on;function ft(dt,at){return dt.renderOrder!==at.renderOrder?dt.renderOrder-at.renderOrder:dt.z!==at.z?at.z-dt.z:at.id-dt.id}this.render=function(dt,at){if(0!==h.length){void 0===F&&function Ue(){var dt=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),at=new Uint16Array([0,1,2,0,2,3]);x=g.createBuffer(),M=g.createBuffer(),g.bindBuffer(g.ARRAY_BUFFER,x),g.bufferData(g.ARRAY_BUFFER,dt,g.STATIC_DRAW),g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,M),g.bufferData(g.ELEMENT_ARRAY_BUFFER,at,g.STATIC_DRAW),F=function We(){var dt=g.createProgram(),at=g.createShader(g.VERTEX_SHADER),xt=g.createShader(g.FRAGMENT_SHADER);return g.shaderSource(at,["precision "+a.getPrecision()+" float;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n")),g.shaderSource(xt,["precision "+a.getPrecision()+" float;","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")),g.compileShader(at),g.compileShader(xt),g.attachShader(dt,at),g.attachShader(dt,xt),g.linkProgram(dt),dt}(),z={position:g.getAttribLocation(F,"position"),uv:g.getAttribLocation(F,"uv")},le={uvOffset:g.getUniformLocation(F,"uvOffset"),uvScale:g.getUniformLocation(F,"uvScale"),rotation:g.getUniformLocation(F,"rotation"),scale:g.getUniformLocation(F,"scale"),color:g.getUniformLocation(F,"color"),map:g.getUniformLocation(F,"map"),opacity:g.getUniformLocation(F,"opacity"),modelViewMatrix:g.getUniformLocation(F,"modelViewMatrix"),projectionMatrix:g.getUniformLocation(F,"projectionMatrix"),fogType:g.getUniformLocation(F,"fogType"),fogDensity:g.getUniformLocation(F,"fogDensity"),fogNear:g.getUniformLocation(F,"fogNear"),fogFar:g.getUniformLocation(F,"fogFar"),fogColor:g.getUniformLocation(F,"fogColor"),alphaTest:g.getUniformLocation(F,"alphaTest")};var xt=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");xt.width=8,xt.height=8;var St=xt.getContext("2d");St.fillStyle="white",St.fillRect(0,0,8,8),(re=new Xo(xt)).needsUpdate=!0}(),g.useProgram(F),y.initAttributes(),y.enableAttribute(z.position),y.enableAttribute(z.uv),y.disableUnusedAttributes(),y.disable(g.CULL_FACE),y.enable(g.BLEND),g.bindBuffer(g.ARRAY_BUFFER,x),g.vertexAttribPointer(z.position,2,g.FLOAT,!1,16,0),g.vertexAttribPointer(z.uv,2,g.FLOAT,!1,16,8),g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,M),g.uniformMatrix4fv(le.projectionMatrix,!1,at.projectionMatrix.elements),y.activeTexture(g.TEXTURE0),g.uniform1i(le.map,0);var xt=0,St=0,nn=dt.fog;nn?(g.uniform3f(le.fogColor,nn.color.r,nn.color.g,nn.color.b),nn.isFog?(g.uniform1f(le.fogNear,nn.near),g.uniform1f(le.fogFar,nn.far),g.uniform1i(le.fogType,1),xt=1,St=1):nn.isFogExp2&&(g.uniform1f(le.fogDensity,nn.density),g.uniform1i(le.fogType,2),xt=2,St=2)):(g.uniform1i(le.fogType,0),xt=0,St=0);for(var qt=0,gn=h.length;qt<gn;qt++)(un=h[qt]).modelViewMatrix.multiplyMatrices(at.matrixWorldInverse,un.matrixWorld),un.z=-un.modelViewMatrix.elements[14];h.sort(ft);var an=[];for(qt=0,gn=h.length;qt<gn;qt++){var un,_n=(un=h[qt]).material;if(!1!==_n.visible){g.uniform1f(le.alphaTest,_n.alphaTest),g.uniformMatrix4fv(le.modelViewMatrix,!1,un.modelViewMatrix.elements),un.matrixWorld.decompose(ve,Ce,Ve),an[0]=Ve.x,an[1]=Ve.y;var On=0;dt.fog&&_n.fog&&(On=St),xt!==On&&(g.uniform1i(le.fogType,On),xt=On),null!==_n.map?(g.uniform2f(le.uvOffset,_n.map.offset.x,_n.map.offset.y),g.uniform2f(le.uvScale,_n.map.repeat.x,_n.map.repeat.y)):(g.uniform2f(le.uvOffset,0,0),g.uniform2f(le.uvScale,1,1)),g.uniform1f(le.opacity,_n.opacity),g.uniform3f(le.color,_n.color.r,_n.color.g,_n.color.b),g.uniform1f(le.rotation,_n.rotation),g.uniform2fv(le.scale,an),y.setBlending(_n.blending,_n.blendEquation,_n.blendSrc,_n.blendDst),y.setDepthTest(_n.depthTest),y.setDepthWrite(_n.depthWrite),a.setTexture2D(_n.map?_n.map:re,0),g.drawElements(g.TRIANGLES,6,g.UNSIGNED_SHORT,0)}}y.enable(g.CULL_FACE),a.resetGLState()}}}Lc.physical={uniforms:sl.merge([Lc.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:$s.meshphysical_vert,fragmentShader:$s.meshphysical_frag},od.prototype={constructor:od,set:function(a,h){return this.min.copy(a),this.max.copy(h),this},setFromPoints:function(a){this.makeEmpty();for(var h=0,g=a.length;h<g;h++)this.expandByPoint(a[h]);return this},setFromCenterAndSize:function(){var a=new er;return function(g,y){var x=a.copy(y).multiplyScalar(.5);return this.min.copy(g).sub(x),this.max.copy(g).add(x),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.min.copy(a.min),this.max.copy(a.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(a){var h=a||new er;return this.isEmpty()?h.set(0,0):h.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(a){var h=a||new er;return this.isEmpty()?h.set(0,0):h.subVectors(this.max,this.min)},expandByPoint:function(a){return this.min.min(a),this.max.max(a),this},expandByVector:function(a){return this.min.sub(a),this.max.add(a),this},expandByScalar:function(a){return this.min.addScalar(-a),this.max.addScalar(a),this},containsPoint:function(a){return!(a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y)},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y},getParameter:function(a,h){return(h||new er).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(a){return!(a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y)},clampPoint:function(a,h){return(h||new er).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new er;return function(g){return a.copy(g).clamp(this.min,this.max).sub(g).length()}}(),intersect:function(a){return this.min.max(a.min),this.max.min(a.max),this},union:function(a){return this.min.min(a.min),this.max.max(a.max),this},translate:function(a){return this.min.add(a),this.max.add(a),this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)}};var zy=0;function Ks(){Object.defineProperty(this,"id",{value:zy++}),this.uuid=As.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=ie,this.side=J,this.shading=Ee,this.vertexColors=te,this.opacity=1,this.transparent=!1,this.blendSrc=rt,this.blendDst=Ge,this.blendEquation=Pe,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Un,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this._needsUpdate=!0}function eu(a){Ks.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,void 0!==a&&(void 0!==a.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(a))}function bi(a){Ks.call(this),this.type="MeshDepthMaterial",this.depthPacking=yv,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(a)}function Ts(a,h){this.min=void 0!==a?a:new on(1/0,1/0,1/0),this.max=void 0!==h?h:new on(-1/0,-1/0,-1/0)}function Pt(a,h){this.center=void 0!==a?a:new on,this.radius=void 0!==h?h:0}function Rt(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function bt(a,h){this.normal=void 0!==a?a:new on(1,0,0),this.constant=void 0!==h?h:0}function No(a,h,g,y,x,M){this.planes=[void 0!==a?a:new bt,void 0!==h?h:new bt,void 0!==g?g:new bt,void 0!==y?y:new bt,void 0!==x?x:new bt,void 0!==M?M:new bt]}function Mo(a,h,g,y){var x=a.context,M=a.state,F=new No,z=new vs,le=h.shadows,re=new er,ve=new er(y.maxTextureSize,y.maxTextureSize),Ce=new on,Ve=new on,Ue=[],at=new Array(4),xt=new Array(4),St={},nn=[new on(1,0,0),new on(-1,0,0),new on(0,0,1),new on(0,0,-1),new on(0,1,0),new on(0,-1,0)],qt=[new on(0,1,0),new on(0,1,0),new on(0,1,0),new on(0,1,0),new on(0,0,1),new on(0,0,-1)],gn=[new Yo,new Yo,new Yo,new Yo,new Yo,new Yo],un=new bi;un.depthPacking=Ty,un.clipping=!0;for(var an=Lc.distanceRGBA,_n=sl.clone(an.uniforms),On=0;4!==On;++On){var Ti=0!=(1&On),di=0!=(2&On),Jt=un.clone();Jt.morphTargets=Ti,Jt.skinning=di,at[On]=Jt;var tn=new eu({defines:{USE_SHADOWMAP:""},uniforms:_n,vertexShader:an.vertexShader,fragmentShader:an.fragmentShader,morphTargets:Ti,skinning:di,clipping:!0});xt[On]=tn}var Xn=this;function ni(Ai,gi,ar,Hi){var Yn=Ai.geometry,jn=null,f=at,c=Ai.customDepthMaterial;if(ar&&(f=xt,c=Ai.customDistanceMaterial),c)jn=c;else{var d=!1;gi.morphTargets&&(Yn&&Yn.isBufferGeometry?d=Yn.morphAttributes&&Yn.morphAttributes.position&&Yn.morphAttributes.position.length>0:Yn&&Yn.isGeometry&&(d=Yn.morphTargets&&Yn.morphTargets.length>0));var _=0;d&&(_|=1),Ai.isSkinnedMesh&&gi.skinning&&(_|=2),jn=f[_]}if(a.localClippingEnabled&&!0===gi.clipShadows&&0!==gi.clippingPlanes.length){var C=jn.uuid,A=gi.uuid,E=St[C];void 0===E&&(St[C]=E={});var N=E[A];void 0===N&&(N=jn.clone(),E[A]=N),jn=N}jn.visible=gi.visible,jn.wireframe=gi.wireframe;var R=gi.side;return Xn.renderSingleSided&&R==ae&&(R=J),Xn.renderReverseSided&&(R===J?R=W:R===W&&(R=J)),jn.side=R,jn.clipShadows=gi.clipShadows,jn.clippingPlanes=gi.clippingPlanes,jn.wireframeLinewidth=gi.wireframeLinewidth,jn.linewidth=gi.linewidth,ar&&void 0!==jn.uniforms.lightPos&&jn.uniforms.lightPos.value.copy(Hi),jn}function Mi(Ai,gi,ar){if(!1!==Ai.visible){0!=(Ai.layers.mask&gi.layers.mask)&&(Ai.isMesh||Ai.isLine||Ai.isPoints)&&Ai.castShadow&&(!1===Ai.frustumCulled||!0===F.intersectsObject(Ai))&&!0===Ai.material.visible&&(Ai.modelViewMatrix.multiplyMatrices(ar.matrixWorldInverse,Ai.matrixWorld),Ue.push(Ai));for(var jn=Ai.children,f=0,c=jn.length;f<c;f++)Mi(jn[f],gi,ar)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=ne,this.renderReverseSided=!0,this.renderSingleSided=!0,this.render=function(Ai,gi){if(!1!==Xn.enabled&&(!1!==Xn.autoUpdate||!1!==Xn.needsUpdate)&&0!==le.length){M.buffers.color.setClear(1,1,1,1),M.disable(x.BLEND),M.setDepthTest(!0),M.setScissorTest(!1);for(var ar,Hi,Yn=0,jn=le.length;Yn<jn;Yn++){var f=le[Yn],c=f.shadow;if(void 0!==c){var d=c.camera;if(re.copy(c.mapSize),re.min(ve),f&&f.isPointLight){ar=6,Hi=!0;var m=re.x,_=re.y;gn[0].set(2*m,_,m,_),gn[1].set(0,_,m,_),gn[2].set(3*m,_,m,_),gn[3].set(m,_,m,_),gn[4].set(3*m,0,m,_),gn[5].set(m,0,m,_),re.x*=4,re.y*=2}else ar=1,Hi=!1;null===c.map&&(c.map=new Sc(re.x,re.y,{minFilter:Xa,magFilter:Xa,format:rl}),d.updateProjectionMatrix()),c.isSpotLightShadow&&c.update(f),c&&c.isRectAreaLightShadow&&c.update(f);var A=c.map,E=c.matrix;Ve.setFromMatrixPosition(f.matrixWorld),d.position.copy(Ve),a.setRenderTarget(A),a.clear();for(var N=0;N<ar;N++){Hi?(Ce.copy(d.position),Ce.add(nn[N]),d.up.copy(qt[N]),d.lookAt(Ce),M.viewport(gn[N])):(Ce.setFromMatrixPosition(f.target.matrixWorld),d.lookAt(Ce)),d.updateMatrixWorld(),d.matrixWorldInverse.getInverse(d.matrixWorld),E.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),E.multiply(d.projectionMatrix),E.multiply(d.matrixWorldInverse),z.multiplyMatrices(d.projectionMatrix,d.matrixWorldInverse),F.setFromMatrix(z),Ue.length=0,Mi(Ai,gi,d);for(var j=0,Z=Ue.length;j<Z;j++){var he=Ue[j],me=g.update(he),ye=he.material;if(ye&&ye.isMultiMaterial)for(var De=me.groups,je=ye.materials,qe=0,ct=De.length;qe<ct;qe++){var nt=De[qe],Ct=je[nt.materialIndex];if(!0===Ct.visible){var Gt=ni(he,Ct,Hi,Ve);a.renderBufferDirect(d,null,me,Gt,he,nt)}}else Gt=ni(he,ye,Hi,Ve),a.renderBufferDirect(d,null,me,Gt,he,null)}}}else console.warn("THREE.WebGLShadowMap:",f,"has no shadow.")}var Wt=a.getClearColor(),It=a.getClearAlpha();a.setClearColor(Wt,It),Xn.needsUpdate=!1}}}function sa(a,h){this.origin=void 0!==a?a:new on,this.direction=void 0!==h?h:new on}function Rs(a,h,g,y){this._x=a||0,this._y=h||0,this._z=g||0,this._order=y||Rs.DefaultOrder}function qp(){this.mask=1}Ks.prototype={constructor:Ks,isMaterial:!0,get needsUpdate(){return this._needsUpdate},set needsUpdate(a){!0===a&&this.update(),this._needsUpdate=a},setValues:function(a){if(void 0!==a)for(var h in a){var g=a[h];if(void 0!==g){var y=this[h];void 0!==y?y&&y.isColor?y.set(g):y&&y.isVector3&&g&&g.isVector3?y.copy(g):this[h]="overdraw"===h?Number(g):g:console.warn("THREE."+this.type+": '"+h+"' is not a property of this material.")}else console.warn("THREE.Material: '"+h+"' parameter is undefined.")}},toJSON:function(a){var h=void 0===a;h&&(a={textures:{},images:{}});var g={metadata:{version:4.4,type:"Material",generator:"Material.toJSON"}};function y(F){var z=[];for(var le in F){var re=F[le];delete re.metadata,z.push(re)}return z}if(g.uuid=this.uuid,g.type=this.type,""!==this.name&&(g.name=this.name),this.color&&this.color.isColor&&(g.color=this.color.getHex()),void 0!==this.roughness&&(g.roughness=this.roughness),void 0!==this.metalness&&(g.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(g.emissive=this.emissive.getHex()),this.specular&&this.specular.isColor&&(g.specular=this.specular.getHex()),void 0!==this.shininess&&(g.shininess=this.shininess),void 0!==this.clearCoat&&(g.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(g.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(g.map=this.map.toJSON(a).uuid),this.alphaMap&&this.alphaMap.isTexture&&(g.alphaMap=this.alphaMap.toJSON(a).uuid),this.lightMap&&this.lightMap.isTexture&&(g.lightMap=this.lightMap.toJSON(a).uuid),this.bumpMap&&this.bumpMap.isTexture&&(g.bumpMap=this.bumpMap.toJSON(a).uuid,g.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(g.normalMap=this.normalMap.toJSON(a).uuid,g.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(g.displacementMap=this.displacementMap.toJSON(a).uuid,g.displacementScale=this.displacementScale,g.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(g.roughnessMap=this.roughnessMap.toJSON(a).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(g.metalnessMap=this.metalnessMap.toJSON(a).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(g.emissiveMap=this.emissiveMap.toJSON(a).uuid),this.specularMap&&this.specularMap.isTexture&&(g.specularMap=this.specularMap.toJSON(a).uuid),this.envMap&&this.envMap.isTexture&&(g.envMap=this.envMap.toJSON(a).uuid,g.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(g.gradientMap=this.gradientMap.toJSON(a).uuid),void 0!==this.size&&(g.size=this.size),void 0!==this.sizeAttenuation&&(g.sizeAttenuation=this.sizeAttenuation),this.blending!==ie&&(g.blending=this.blending),this.shading!==Ee&&(g.shading=this.shading),this.side!==J&&(g.side=this.side),this.vertexColors!==te&&(g.vertexColors=this.vertexColors),this.opacity<1&&(g.opacity=this.opacity),!0===this.transparent&&(g.transparent=this.transparent),g.depthFunc=this.depthFunc,g.depthTest=this.depthTest,g.depthWrite=this.depthWrite,this.alphaTest>0&&(g.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(g.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(g.wireframe=this.wireframe),this.wireframeLinewidth>1&&(g.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(g.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(g.wireframeLinejoin=this.wireframeLinejoin),g.skinning=this.skinning,g.morphTargets=this.morphTargets,h){var x=y(a.textures),M=y(a.images);x.length>0&&(g.textures=x),M.length>0&&(g.images=M)}return g},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.name=a.name,this.fog=a.fog,this.lights=a.lights,this.blending=a.blending,this.side=a.side,this.shading=a.shading,this.vertexColors=a.vertexColors,this.opacity=a.opacity,this.transparent=a.transparent,this.blendSrc=a.blendSrc,this.blendDst=a.blendDst,this.blendEquation=a.blendEquation,this.blendSrcAlpha=a.blendSrcAlpha,this.blendDstAlpha=a.blendDstAlpha,this.blendEquationAlpha=a.blendEquationAlpha,this.depthFunc=a.depthFunc,this.depthTest=a.depthTest,this.depthWrite=a.depthWrite,this.colorWrite=a.colorWrite,this.precision=a.precision,this.polygonOffset=a.polygonOffset,this.polygonOffsetFactor=a.polygonOffsetFactor,this.polygonOffsetUnits=a.polygonOffsetUnits,this.alphaTest=a.alphaTest,this.premultipliedAlpha=a.premultipliedAlpha,this.overdraw=a.overdraw,this.visible=a.visible,this.clipShadows=a.clipShadows,this.clipIntersection=a.clipIntersection;var h=a.clippingPlanes,g=null;if(null!==h){var y=h.length;g=new Array(y);for(var x=0;x!==y;++x)g[x]=h[x].clone()}return this.clippingPlanes=g,this},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},Object.assign(Ks.prototype,X.prototype),(eu.prototype=Object.create(Ks.prototype)).constructor=eu,eu.prototype.isShaderMaterial=!0,eu.prototype.copy=function(a){return Ks.prototype.copy.call(this,a),this.fragmentShader=a.fragmentShader,this.vertexShader=a.vertexShader,this.uniforms=sl.clone(a.uniforms),this.defines=a.defines,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.lights=a.lights,this.clipping=a.clipping,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.morphNormals=a.morphNormals,this.extensions=a.extensions,this},eu.prototype.toJSON=function(a){var h=Ks.prototype.toJSON.call(this,a);return h.uniforms=this.uniforms,h.vertexShader=this.vertexShader,h.fragmentShader=this.fragmentShader,h},(bi.prototype=Object.create(Ks.prototype)).constructor=bi,bi.prototype.isMeshDepthMaterial=!0,bi.prototype.copy=function(a){return Ks.prototype.copy.call(this,a),this.depthPacking=a.depthPacking,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.map=a.map,this.alphaMap=a.alphaMap,this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this},Ts.prototype={constructor:Ts,isBox3:!0,set:function(a,h){return this.min.copy(a),this.max.copy(h),this},setFromArray:function(a){for(var h=1/0,g=1/0,y=1/0,x=-1/0,M=-1/0,F=-1/0,z=0,le=a.length;z<le;z+=3){var re=a[z],ve=a[z+1],Ce=a[z+2];re<h&&(h=re),ve<g&&(g=ve),Ce<y&&(y=Ce),re>x&&(x=re),ve>M&&(M=ve),Ce>F&&(F=Ce)}this.min.set(h,g,y),this.max.set(x,M,F)},setFromBufferAttribute:function(a){for(var h=1/0,g=1/0,y=1/0,x=-1/0,M=-1/0,F=-1/0,z=0,le=a.count;z<le;z++){var re=a.getX(z),ve=a.getY(z),Ce=a.getZ(z);re<h&&(h=re),ve<g&&(g=ve),Ce<y&&(y=Ce),re>x&&(x=re),ve>M&&(M=ve),Ce>F&&(F=Ce)}this.min.set(h,g,y),this.max.set(x,M,F)},setFromPoints:function(a){this.makeEmpty();for(var h=0,g=a.length;h<g;h++)this.expandByPoint(a[h]);return this},setFromCenterAndSize:function(){var a=new on;return function(g,y){var x=a.copy(y).multiplyScalar(.5);return this.min.copy(g).sub(x),this.max.copy(g).add(x),this}}(),setFromObject:function(){var a=new on;return function(g){var y=this;return g.updateMatrixWorld(!0),this.makeEmpty(),g.traverse(function(x){var M,F,z=x.geometry;if(void 0!==z)if(z.isGeometry){var le=z.vertices;for(M=0,F=le.length;M<F;M++)a.copy(le[M]),a.applyMatrix4(x.matrixWorld),y.expandByPoint(a)}else if(z.isBufferGeometry){var re=z.attributes.position;if(void 0!==re)for(M=0,F=re.count;M<F;M++)a.fromAttribute(re,M).applyMatrix4(x.matrixWorld),y.expandByPoint(a)}}),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.min.copy(a.min),this.max.copy(a.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(a){var h=a||new on;return this.isEmpty()?h.set(0,0,0):h.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(a){var h=a||new on;return this.isEmpty()?h.set(0,0,0):h.subVectors(this.max,this.min)},expandByPoint:function(a){return this.min.min(a),this.max.max(a),this},expandByVector:function(a){return this.min.sub(a),this.max.add(a),this},expandByScalar:function(a){return this.min.addScalar(-a),this.max.addScalar(a),this},containsPoint:function(a){return!(a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y||a.z<this.min.z||a.z>this.max.z)},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&a.max.z<=this.max.z},getParameter:function(a,h){return(h||new on).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(a){return!(a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y||a.max.z<this.min.z||a.min.z>this.max.z)},intersectsSphere:function(){var a;return function(g){return void 0===a&&(a=new on),this.clampPoint(g.center,a),a.distanceToSquared(g.center)<=g.radius*g.radius}}(),intersectsPlane:function(a){var h,g;return a.normal.x>0?(h=a.normal.x*this.min.x,g=a.normal.x*this.max.x):(h=a.normal.x*this.max.x,g=a.normal.x*this.min.x),a.normal.y>0?(h+=a.normal.y*this.min.y,g+=a.normal.y*this.max.y):(h+=a.normal.y*this.max.y,g+=a.normal.y*this.min.y),a.normal.z>0?(h+=a.normal.z*this.min.z,g+=a.normal.z*this.max.z):(h+=a.normal.z*this.max.z,g+=a.normal.z*this.min.z),h<=a.constant&&g>=a.constant},clampPoint:function(a,h){return(h||new on).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new on;return function(g){return a.copy(g).clamp(this.min,this.max).sub(g).length()}}(),getBoundingSphere:function(){var a=new on;return function(g){var y=g||new Pt;return this.getCenter(y.center),y.radius=.5*this.getSize(a).length(),y}}(),intersect:function(a){return this.min.max(a.min),this.max.min(a.max),this.isEmpty()&&this.makeEmpty(),this},union:function(a){return this.min.min(a.min),this.max.max(a.max),this},applyMatrix4:function(){var a=[new on,new on,new on,new on,new on,new on,new on,new on];return function(g){return this.isEmpty()||(a[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(g),a[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(g),a[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(g),a[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(g),a[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(g),a[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(g),a[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(g),a[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(g),this.setFromPoints(a)),this}}(),translate:function(a){return this.min.add(a),this.max.add(a),this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)}},Pt.prototype={constructor:Pt,set:function(a,h){return this.center.copy(a),this.radius=h,this},setFromPoints:function(){var a=new Ts;return function(g,y){var x=this.center;void 0!==y?x.copy(y):a.setFromPoints(g).getCenter(x);for(var M=0,F=0,z=g.length;F<z;F++)M=Math.max(M,x.distanceToSquared(g[F]));return this.radius=Math.sqrt(M),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.center.copy(a.center),this.radius=a.radius,this},empty:function(){return this.radius<=0},containsPoint:function(a){return a.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(a){return a.distanceTo(this.center)-this.radius},intersectsSphere:function(a){var h=this.radius+a.radius;return a.center.distanceToSquared(this.center)<=h*h},intersectsBox:function(a){return a.intersectsSphere(this)},intersectsPlane:function(a){return Math.abs(this.center.dot(a.normal)-a.constant)<=this.radius},clampPoint:function(a,h){var g=this.center.distanceToSquared(a),y=h||new on;return y.copy(a),g>this.radius*this.radius&&(y.sub(this.center).normalize(),y.multiplyScalar(this.radius).add(this.center)),y},getBoundingBox:function(a){var h=a||new Ts;return h.set(this.center,this.center),h.expandByScalar(this.radius),h},applyMatrix4:function(a){return this.center.applyMatrix4(a),this.radius=this.radius*a.getMaxScaleOnAxis(),this},translate:function(a){return this.center.add(a),this},equals:function(a){return a.center.equals(this.center)&&a.radius===this.radius}},Rt.prototype={constructor:Rt,isMatrix3:!0,set:function(a,h,g,y,x,M,F,z,le){var re=this.elements;return re[0]=a,re[1]=y,re[2]=F,re[3]=h,re[4]=x,re[5]=z,re[6]=g,re[7]=M,re[8]=le,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(a){var h=a.elements;return this.set(h[0],h[3],h[6],h[1],h[4],h[7],h[2],h[5],h[8]),this},setFromMatrix4:function(a){var h=a.elements;return this.set(h[0],h[4],h[8],h[1],h[5],h[9],h[2],h[6],h[10]),this},applyToVector3Array:function(){var a;return function(g,y,x){void 0===a&&(a=new on),void 0===y&&(y=0),void 0===x&&(x=g.length);for(var M=0,F=y;M<x;M+=3,F+=3)a.fromArray(g,F),a.applyMatrix3(this),a.toArray(g,F);return g}}(),applyToBufferAttribute:function(){var a;return function(g){void 0===a&&(a=new on);for(var y=0,x=g.count;y<x;y++)a.x=g.getX(y),a.y=g.getY(y),a.z=g.getZ(y),a.applyMatrix3(this),g.setXYZ(y,a.x,a.y,a.z);return g}}(),multiplyScalar:function(a){var h=this.elements;return h[0]*=a,h[3]*=a,h[6]*=a,h[1]*=a,h[4]*=a,h[7]*=a,h[2]*=a,h[5]*=a,h[8]*=a,this},determinant:function(){var a=this.elements,h=a[0],g=a[1],y=a[2],x=a[3],M=a[4],F=a[5],z=a[6],le=a[7],re=a[8];return h*M*re-h*F*le-g*x*re+g*F*z+y*x*le-y*M*z},getInverse:function(a,h){a&&a.isMatrix4&&console.error("THREE.Matrix3.getInverse no longer takes a Matrix4 argument.");var g=a.elements,y=this.elements,x=g[0],M=g[1],F=g[2],z=g[3],le=g[4],re=g[5],ve=g[6],Ce=g[7],Ve=g[8],Ue=Ve*le-re*Ce,We=re*ve-Ve*z,ft=Ce*z-le*ve,dt=x*Ue+M*We+F*ft;if(0===dt){var at="THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0";if(!0===h)throw new Error(at);return console.warn(at),this.identity()}var xt=1/dt;return y[0]=Ue*xt,y[1]=(F*Ce-Ve*M)*xt,y[2]=(re*M-F*le)*xt,y[3]=We*xt,y[4]=(Ve*x-F*ve)*xt,y[5]=(F*z-re*x)*xt,y[6]=ft*xt,y[7]=(M*ve-Ce*x)*xt,y[8]=(le*x-M*z)*xt,this},transpose:function(){var a,h=this.elements;return a=h[1],h[1]=h[3],h[3]=a,a=h[2],h[2]=h[6],h[6]=a,a=h[5],h[5]=h[7],h[7]=a,this},getNormalMatrix:function(a){return this.setFromMatrix4(a).getInverse(this).transpose()},transposeIntoArray:function(a){var h=this.elements;return a[0]=h[0],a[1]=h[3],a[2]=h[6],a[3]=h[1],a[4]=h[4],a[5]=h[7],a[6]=h[2],a[7]=h[5],a[8]=h[8],this},fromArray:function(a,h){void 0===h&&(h=0);for(var g=0;g<9;g++)this.elements[g]=a[g+h];return this},toArray:function(a,h){void 0===a&&(a=[]),void 0===h&&(h=0);var g=this.elements;return a[h]=g[0],a[h+1]=g[1],a[h+2]=g[2],a[h+3]=g[3],a[h+4]=g[4],a[h+5]=g[5],a[h+6]=g[6],a[h+7]=g[7],a[h+8]=g[8],a}},bt.prototype={constructor:bt,set:function(a,h){return this.normal.copy(a),this.constant=h,this},setComponents:function(a,h,g,y){return this.normal.set(a,h,g),this.constant=y,this},setFromNormalAndCoplanarPoint:function(a,h){return this.normal.copy(a),this.constant=-h.dot(this.normal),this},setFromCoplanarPoints:function(){var a=new on,h=new on;return function(y,x,M){var F=a.subVectors(M,x).cross(h.subVectors(y,x)).normalize();return this.setFromNormalAndCoplanarPoint(F,y),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.normal.copy(a.normal),this.constant=a.constant,this},normalize:function(){var a=1/this.normal.length();return this.normal.multiplyScalar(a),this.constant*=a,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(a){return this.normal.dot(a)+this.constant},distanceToSphere:function(a){return this.distanceToPoint(a.center)-a.radius},projectPoint:function(a,h){return this.orthoPoint(a,h).sub(a).negate()},orthoPoint:function(a,h){var g=this.distanceToPoint(a);return(h||new on).copy(this.normal).multiplyScalar(g)},intersectLine:function(){var a=new on;return function(g,y){var x=y||new on,M=g.delta(a),F=this.normal.dot(M);if(0===F)return 0===this.distanceToPoint(g.start)?x.copy(g.start):void 0;var z=-(g.start.dot(this.normal)+this.constant)/F;return z<0||z>1?void 0:x.copy(M).multiplyScalar(z).add(g.start)}}(),intersectsLine:function(a){var h=this.distanceToPoint(a.start),g=this.distanceToPoint(a.end);return h<0&&g>0||g<0&&h>0},intersectsBox:function(a){return a.intersectsPlane(this)},intersectsSphere:function(a){return a.intersectsPlane(this)},coplanarPoint:function(a){return(a||new on).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var a=new on,h=new Rt;return function(y,x){var M=this.coplanarPoint(a).applyMatrix4(y),F=x||h.getNormalMatrix(y),z=this.normal.applyMatrix3(F).normalize();return this.constant=-M.dot(z),this}}(),translate:function(a){return this.constant=this.constant-a.dot(this.normal),this},equals:function(a){return a.normal.equals(this.normal)&&a.constant===this.constant}},No.prototype={constructor:No,set:function(a,h,g,y,x,M){var F=this.planes;return F[0].copy(a),F[1].copy(h),F[2].copy(g),F[3].copy(y),F[4].copy(x),F[5].copy(M),this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){for(var h=this.planes,g=0;g<6;g++)h[g].copy(a.planes[g]);return this},setFromMatrix:function(a){var h=this.planes,g=a.elements,y=g[0],x=g[1],M=g[2],F=g[3],z=g[4],le=g[5],re=g[6],ve=g[7],Ce=g[8],Ve=g[9],Ue=g[10],We=g[11],ft=g[12],dt=g[13],at=g[14],xt=g[15];return h[0].setComponents(F-y,ve-z,We-Ce,xt-ft).normalize(),h[1].setComponents(F+y,ve+z,We+Ce,xt+ft).normalize(),h[2].setComponents(F+x,ve+le,We+Ve,xt+dt).normalize(),h[3].setComponents(F-x,ve-le,We-Ve,xt-dt).normalize(),h[4].setComponents(F-M,ve-re,We-Ue,xt-at).normalize(),h[5].setComponents(F+M,ve+re,We+Ue,xt+at).normalize(),this},intersectsObject:function(){var a=new Pt;return function(g){var y=g.geometry;return null===y.boundingSphere&&y.computeBoundingSphere(),a.copy(y.boundingSphere).applyMatrix4(g.matrixWorld),this.intersectsSphere(a)}}(),intersectsSprite:function(){var a=new Pt;return function(g){return a.center.set(0,0,0),a.radius=.7071067811865476,a.applyMatrix4(g.matrixWorld),this.intersectsSphere(a)}}(),intersectsSphere:function(a){for(var h=this.planes,g=a.center,y=-a.radius,x=0;x<6;x++)if(h[x].distanceToPoint(g)<y)return!1;return!0},intersectsBox:function(){var a=new on,h=new on;return function(y){for(var x=this.planes,M=0;M<6;M++){var F=x[M];a.x=F.normal.x>0?y.min.x:y.max.x,h.x=F.normal.x>0?y.max.x:y.min.x,a.y=F.normal.y>0?y.min.y:y.max.y,h.y=F.normal.y>0?y.max.y:y.min.y,a.z=F.normal.z>0?y.min.z:y.max.z,h.z=F.normal.z>0?y.max.z:y.min.z;var z=F.distanceToPoint(a),le=F.distanceToPoint(h);if(z<0&&le<0)return!1}return!0}}(),containsPoint:function(a){for(var h=this.planes,g=0;g<6;g++)if(h[g].distanceToPoint(a)<0)return!1;return!0}},sa.prototype={constructor:sa,set:function(a,h){return this.origin.copy(a),this.direction.copy(h),this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.origin.copy(a.origin),this.direction.copy(a.direction),this},at:function(a,h){return(h||new on).copy(this.direction).multiplyScalar(a).add(this.origin)},lookAt:function(a){return this.direction.copy(a).sub(this.origin).normalize(),this},recast:function(){var a=new on;return function(g){return this.origin.copy(this.at(g,a)),this}}(),closestPointToPoint:function(a,h){var g=h||new on;g.subVectors(a,this.origin);var y=g.dot(this.direction);return y<0?g.copy(this.origin):g.copy(this.direction).multiplyScalar(y).add(this.origin)},distanceToPoint:function(a){return Math.sqrt(this.distanceSqToPoint(a))},distanceSqToPoint:function(){var a=new on;return function(g){var y=a.subVectors(g,this.origin).dot(this.direction);return y<0?this.origin.distanceToSquared(g):(a.copy(this.direction).multiplyScalar(y).add(this.origin),a.distanceToSquared(g))}}(),distanceSqToSegment:function(){var a=new on,h=new on,g=new on;return function(x,M,F,z){a.copy(x).add(M).multiplyScalar(.5),h.copy(M).sub(x).normalize(),g.copy(this.origin).sub(a);var We,ft,dt,at,le=.5*x.distanceTo(M),re=-this.direction.dot(h),ve=g.dot(this.direction),Ce=-g.dot(h),Ve=g.lengthSq(),Ue=Math.abs(1-re*re);if(Ue>0)if(ft=re*ve-Ce,at=le*Ue,(We=re*Ce-ve)>=0)if(ft>=-at)if(ft<=at){var xt=1/Ue;dt=(We*=xt)*(We+re*(ft*=xt)+2*ve)+ft*(re*We+ft+2*Ce)+Ve}else ft=le,dt=-(We=Math.max(0,-(re*ft+ve)))*We+ft*(ft+2*Ce)+Ve;else ft=-le,dt=-(We=Math.max(0,-(re*ft+ve)))*We+ft*(ft+2*Ce)+Ve;else ft<=-at?dt=-(We=Math.max(0,-(-re*le+ve)))*We+(ft=We>0?-le:Math.min(Math.max(-le,-Ce),le))*(ft+2*Ce)+Ve:ft<=at?(We=0,dt=(ft=Math.min(Math.max(-le,-Ce),le))*(ft+2*Ce)+Ve):dt=-(We=Math.max(0,-(re*le+ve)))*We+(ft=We>0?le:Math.min(Math.max(-le,-Ce),le))*(ft+2*Ce)+Ve;else ft=re>0?-le:le,dt=-(We=Math.max(0,-(re*ft+ve)))*We+ft*(ft+2*Ce)+Ve;return F&&F.copy(this.direction).multiplyScalar(We).add(this.origin),z&&z.copy(h).multiplyScalar(ft).add(a),dt}}(),intersectSphere:function(){var a=new on;return function(g,y){a.subVectors(g.center,this.origin);var x=a.dot(this.direction),M=a.dot(a)-x*x,F=g.radius*g.radius;if(M>F)return null;var z=Math.sqrt(F-M),le=x-z,re=x+z;return le<0&&re<0?null:this.at(le<0?re:le,y)}}(),intersectsSphere:function(a){return this.distanceToPoint(a.center)<=a.radius},distanceToPlane:function(a){var h=a.normal.dot(this.direction);if(0===h)return 0===a.distanceToPoint(this.origin)?0:null;var g=-(this.origin.dot(a.normal)+a.constant)/h;return g>=0?g:null},intersectPlane:function(a,h){var g=this.distanceToPlane(a);return null===g?null:this.at(g,h)},intersectsPlane:function(a){var h=a.distanceToPoint(this.origin);return 0===h||a.normal.dot(this.direction)*h<0},intersectBox:function(a,h){var g,y,x,M,F,z,le=1/this.direction.x,re=1/this.direction.y,ve=1/this.direction.z,Ce=this.origin;return le>=0?(g=(a.min.x-Ce.x)*le,y=(a.max.x-Ce.x)*le):(g=(a.max.x-Ce.x)*le,y=(a.min.x-Ce.x)*le),re>=0?(x=(a.min.y-Ce.y)*re,M=(a.max.y-Ce.y)*re):(x=(a.max.y-Ce.y)*re,M=(a.min.y-Ce.y)*re),g>M||x>y||((x>g||g!=g)&&(g=x),(M<y||y!=y)&&(y=M),ve>=0?(F=(a.min.z-Ce.z)*ve,z=(a.max.z-Ce.z)*ve):(F=(a.max.z-Ce.z)*ve,z=(a.min.z-Ce.z)*ve),g>z||F>y)||((F>g||g!=g)&&(g=F),(z<y||y!=y)&&(y=z),y<0)?null:this.at(g>=0?g:y,h)},intersectsBox:function(){var a=new on;return function(g){return null!==this.intersectBox(g,a)}}(),intersectTriangle:function(){var a=new on,h=new on,g=new on,y=new on;return function(M,F,z,le,re){h.subVectors(F,M),g.subVectors(z,M),y.crossVectors(h,g);var Ce,ve=this.direction.dot(y);if(ve>0){if(le)return null;Ce=1}else{if(!(ve<0))return null;Ce=-1,ve=-ve}a.subVectors(this.origin,M);var Ve=Ce*this.direction.dot(g.crossVectors(a,g));if(Ve<0)return null;var Ue=Ce*this.direction.dot(h.cross(a));if(Ue<0||Ve+Ue>ve)return null;var We=-Ce*a.dot(y);return We<0?null:this.at(We/ve,re)}}(),applyMatrix4:function(a){return this.direction.add(this.origin).applyMatrix4(a),this.origin.applyMatrix4(a),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)}},Rs.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],Rs.DefaultOrder="XYZ",Rs.prototype={constructor:Rs,isEuler:!0,get x(){return this._x},set x(a){this._x=a,this.onChangeCallback()},get y(){return this._y},set y(a){this._y=a,this.onChangeCallback()},get z(){return this._z},set z(a){this._z=a,this.onChangeCallback()},get order(){return this._order},set order(a){this._order=a,this.onChangeCallback()},set:function(a,h,g,y){return this._x=a,this._y=h,this._z=g,this._order=y||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(a){return this._x=a._x,this._y=a._y,this._z=a._z,this._order=a._order,this.onChangeCallback(),this},setFromRotationMatrix:function(a,h,g){var y=As.clamp,x=a.elements,M=x[0],F=x[4],z=x[8],le=x[1],re=x[5],ve=x[9],Ce=x[2],Ve=x[6],Ue=x[10];return"XYZ"===(h=h||this._order)?(this._y=Math.asin(y(z,-1,1)),Math.abs(z)<.99999?(this._x=Math.atan2(-ve,Ue),this._z=Math.atan2(-F,M)):(this._x=Math.atan2(Ve,re),this._z=0)):"YXZ"===h?(this._x=Math.asin(-y(ve,-1,1)),Math.abs(ve)<.99999?(this._y=Math.atan2(z,Ue),this._z=Math.atan2(le,re)):(this._y=Math.atan2(-Ce,M),this._z=0)):"ZXY"===h?(this._x=Math.asin(y(Ve,-1,1)),Math.abs(Ve)<.99999?(this._y=Math.atan2(-Ce,Ue),this._z=Math.atan2(-F,re)):(this._y=0,this._z=Math.atan2(le,M))):"ZYX"===h?(this._y=Math.asin(-y(Ce,-1,1)),Math.abs(Ce)<.99999?(this._x=Math.atan2(Ve,Ue),this._z=Math.atan2(le,M)):(this._x=0,this._z=Math.atan2(-F,re))):"YZX"===h?(this._z=Math.asin(y(le,-1,1)),Math.abs(le)<.99999?(this._x=Math.atan2(-ve,re),this._y=Math.atan2(-Ce,M)):(this._x=0,this._y=Math.atan2(z,Ue))):"XZY"===h?(this._z=Math.asin(-y(F,-1,1)),Math.abs(F)<.99999?(this._x=Math.atan2(Ve,re),this._y=Math.atan2(z,M)):(this._x=Math.atan2(-ve,Ue),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+h),this._order=h,!1!==g&&this.onChangeCallback(),this},setFromQuaternion:function(){var a;return function(g,y,x){return void 0===a&&(a=new vs),a.makeRotationFromQuaternion(g),this.setFromRotationMatrix(a,y,x)}}(),setFromVector3:function(a,h){return this.set(a.x,a.y,a.z,h||this._order)},reorder:function(){var a=new kl;return function(g){return a.setFromEuler(this),this.setFromQuaternion(a,g)}}(),equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._order===this._order},fromArray:function(a){return this._x=a[0],this._y=a[1],this._z=a[2],void 0!==a[3]&&(this._order=a[3]),this.onChangeCallback(),this},toArray:function(a,h){return void 0===a&&(a=[]),void 0===h&&(h=0),a[h]=this._x,a[h+1]=this._y,a[h+2]=this._z,a[h+3]=this._order,a},toVector3:function(a){return a?a.set(this._x,this._y,this._z):new on(this._x,this._y,this._z)},onChange:function(a){return this.onChangeCallback=a,this},onChangeCallback:function(){}},qp.prototype={constructor:qp,set:function(a){this.mask=1<<a},enable:function(a){this.mask|=1<<a},toggle:function(a){this.mask^=1<<a},disable:function(a){this.mask&=~(1<<a)},test:function(a){return 0!=(this.mask&a.mask)}};var op=0;function Cr(){Object.defineProperty(this,"id",{value:op++}),this.uuid=As.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Cr.DefaultUp.clone();var a=new on,h=new Rs,g=new kl,y=new on(1,1,1);h.onChange(function x(){g.setFromEuler(h,!1)}),g.onChange(function M(){h.setFromQuaternion(g,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:a},rotation:{enumerable:!0,value:h},quaternion:{enumerable:!0,value:g},scale:{enumerable:!0,value:y},modelViewMatrix:{value:new vs},normalMatrix:{value:new Rt}}),this.matrix=new vs,this.matrixWorld=new vs,this.matrixAutoUpdate=Cr.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new qp,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={},this.onBeforeRender=function(){},this.onAfterRender=function(){}}function Fl(a,h){this.start=void 0!==a?a:new on,this.end=void 0!==h?h:new on}function Ca(a,h,g){this.a=void 0!==a?a:new on,this.b=void 0!==h?h:new on,this.c=void 0!==g?g:new on}function Bo(a,h,g,y,x,M){this.a=a,this.b=h,this.c=g,this.normal=y&&y.isVector3?y:new on,this.vertexNormals=Array.isArray(y)?y:[],this.color=x&&x.isColor?x:new Xr,this.vertexColors=Array.isArray(x)?x:[],this.materialIndex=void 0!==M?M:0}function Va(a){Ks.call(this),this.type="MeshBasicMaterial",this.color=new Xr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=et,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(a)}function gr(a,h,g){if(Array.isArray(a))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.uuid=As.generateUUID(),this.array=a,this.itemSize=h,this.count=void 0!==a?a.length/h:0,this.normalized=!0===g,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function Oh(a,h){gr.call(this,new Int8Array(a),h)}function vl(a,h){gr.call(this,new Uint8Array(a),h)}function Bd(a,h){gr.call(this,new Uint8ClampedArray(a),h)}function ap(a,h){gr.call(this,new Int16Array(a),h)}function zd(a,h){gr.call(this,new Uint16Array(a),h)}function Cf(a,h){gr.call(this,new Int32Array(a),h)}function Bu(a,h){gr.call(this,new Uint32Array(a),h)}function os(a,h){gr.call(this,new Float32Array(a),h)}function Pc(a,h){gr.call(this,new Float64Array(a),h)}function Hg(){this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Ms(){Object.defineProperty(this,"id",{value:Gg()}),this.uuid=As.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}Cr.DefaultUp=new on(0,1,0),Cr.DefaultMatrixAutoUpdate=!0,Object.assign(Cr.prototype,X.prototype,{isObject3D:!0,applyMatrix:function(a){this.matrix.multiplyMatrices(a,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(a,h){this.quaternion.setFromAxisAngle(a,h)},setRotationFromEuler:function(a){this.quaternion.setFromEuler(a,!0)},setRotationFromMatrix:function(a){this.quaternion.setFromRotationMatrix(a)},setRotationFromQuaternion:function(a){this.quaternion.copy(a)},rotateOnAxis:function(){var a=new kl;return function(g,y){return a.setFromAxisAngle(g,y),this.quaternion.multiply(a),this}}(),rotateX:function(){var a=new on(1,0,0);return function(g){return this.rotateOnAxis(a,g)}}(),rotateY:function(){var a=new on(0,1,0);return function(g){return this.rotateOnAxis(a,g)}}(),rotateZ:function(){var a=new on(0,0,1);return function(g){return this.rotateOnAxis(a,g)}}(),translateOnAxis:function(){var a=new on;return function(g,y){return a.copy(g).applyQuaternion(this.quaternion),this.position.add(a.multiplyScalar(y)),this}}(),translateX:function(){var a=new on(1,0,0);return function(g){return this.translateOnAxis(a,g)}}(),translateY:function(){var a=new on(0,1,0);return function(g){return this.translateOnAxis(a,g)}}(),translateZ:function(){var a=new on(0,0,1);return function(g){return this.translateOnAxis(a,g)}}(),localToWorld:function(a){return a.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var a=new vs;return function(g){return g.applyMatrix4(a.getInverse(this.matrixWorld))}}(),lookAt:function(){var a=new vs;return function(g){a.lookAt(g,this.position,this.up),this.quaternion.setFromRotationMatrix(a)}}(),add:function(a){if(arguments.length>1){for(var h=0;h<arguments.length;h++)this.add(arguments[h]);return this}return a===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",a),this):(a&&a.isObject3D?(null!==a.parent&&a.parent.remove(a),a.parent=this,a.dispatchEvent({type:"added"}),this.children.push(a)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",a),this)},remove:function(a){if(arguments.length>1)for(var h=0;h<arguments.length;h++)this.remove(arguments[h]);var g=this.children.indexOf(a);-1!==g&&(a.parent=null,a.dispatchEvent({type:"removed"}),this.children.splice(g,1))},getObjectById:function(a){return this.getObjectByProperty("id",a)},getObjectByName:function(a){return this.getObjectByProperty("name",a)},getObjectByProperty:function(a,h){if(this[a]===h)return this;for(var g=0,y=this.children.length;g<y;g++){var M=this.children[g].getObjectByProperty(a,h);if(void 0!==M)return M}},getWorldPosition:function(a){var h=a||new on;return this.updateMatrixWorld(!0),h.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var a=new on,h=new on;return function(y){var x=y||new kl;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(a,x,h),x}}(),getWorldRotation:function(){var a=new kl;return function(g){var y=g||new Rs;return this.getWorldQuaternion(a),y.setFromQuaternion(a,this.rotation.order,!1)}}(),getWorldScale:function(){var a=new on,h=new kl;return function(y){var x=y||new on;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(a,h,x),x}}(),getWorldDirection:function(){var a=new kl;return function(g){var y=g||new on;return this.getWorldQuaternion(a),y.set(0,0,1).applyQuaternion(a)}}(),raycast:function(){},traverse:function(a){a(this);for(var h=this.children,g=0,y=h.length;g<y;g++)h[g].traverse(a)},traverseVisible:function(a){if(!1!==this.visible){a(this);for(var h=this.children,g=0,y=h.length;g<y;g++)h[g].traverseVisible(a)}},traverseAncestors:function(a){var h=this.parent;null!==h&&(a(h),h.traverseAncestors(a))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(a){!0===this.matrixAutoUpdate&&this.updateMatrix(),(!0===this.matrixWorldNeedsUpdate||!0===a)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0);for(var h=this.children,g=0,y=h.length;g<y;g++)h[g].updateMatrixWorld(a)},toJSON:function(a){var h=void 0===a||""===a,g={};h&&(a={geometries:{},materials:{},textures:{},images:{}},g.metadata={version:4.4,type:"Object",generator:"Object3D.toJSON"});var y={};if(y.uuid=this.uuid,y.type=this.type,""!==this.name&&(y.name=this.name),"{}"!==JSON.stringify(this.userData)&&(y.userData=this.userData),!0===this.castShadow&&(y.castShadow=!0),!0===this.receiveShadow&&(y.receiveShadow=!0),!1===this.visible&&(y.visible=!1),y.matrix=this.matrix.toArray(),void 0!==this.geometry&&(void 0===a.geometries[this.geometry.uuid]&&(a.geometries[this.geometry.uuid]=this.geometry.toJSON(a)),y.geometry=this.geometry.uuid),void 0!==this.material&&(void 0===a.materials[this.material.uuid]&&(a.materials[this.material.uuid]=this.material.toJSON(a)),y.material=this.material.uuid),this.children.length>0){y.children=[];for(var x=0;x<this.children.length;x++)y.children.push(this.children[x].toJSON(a).object)}if(h){var M=re(a.geometries),F=re(a.materials),z=re(a.textures),le=re(a.images);M.length>0&&(g.geometries=M),F.length>0&&(g.materials=F),z.length>0&&(g.textures=z),le.length>0&&(g.images=le)}return g.object=y,g;function re(ve){var Ce=[];for(var Ve in ve){var Ue=ve[Ve];delete Ue.metadata,Ce.push(Ue)}return Ce}},clone:function(a){return(new this.constructor).copy(this,a)},copy:function(a,h){if(void 0===h&&(h=!0),this.name=a.name,this.up.copy(a.up),this.position.copy(a.position),this.quaternion.copy(a.quaternion),this.scale.copy(a.scale),this.matrix.copy(a.matrix),this.matrixWorld.copy(a.matrixWorld),this.matrixAutoUpdate=a.matrixAutoUpdate,this.matrixWorldNeedsUpdate=a.matrixWorldNeedsUpdate,this.layers.mask=a.layers.mask,this.visible=a.visible,this.castShadow=a.castShadow,this.receiveShadow=a.receiveShadow,this.frustumCulled=a.frustumCulled,this.renderOrder=a.renderOrder,this.userData=JSON.parse(JSON.stringify(a.userData)),!0===h)for(var g=0;g<a.children.length;g++)this.add(a.children[g].clone());return this}}),Fl.prototype={constructor:Fl,set:function(a,h){return this.start.copy(a),this.end.copy(h),this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.start.copy(a.start),this.end.copy(a.end),this},getCenter:function(a){return(a||new on).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(a){return(a||new on).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(a,h){var g=h||new on;return this.delta(g).multiplyScalar(a).add(this.start)},closestPointToPointParameter:function(){var a=new on,h=new on;return function(y,x){a.subVectors(y,this.start),h.subVectors(this.end,this.start);var M=h.dot(h),z=h.dot(a)/M;return x&&(z=As.clamp(z,0,1)),z}}(),closestPointToPoint:function(a,h,g){var y=this.closestPointToPointParameter(a,h),x=g||new on;return this.delta(x).multiplyScalar(y).add(this.start)},applyMatrix4:function(a){return this.start.applyMatrix4(a),this.end.applyMatrix4(a),this},equals:function(a){return a.start.equals(this.start)&&a.end.equals(this.end)}},Ca.normal=function(){var a=new on;return function(g,y,x,M){var F=M||new on;F.subVectors(x,y),a.subVectors(g,y),F.cross(a);var z=F.lengthSq();return z>0?F.multiplyScalar(1/Math.sqrt(z)):F.set(0,0,0)}}(),Ca.barycoordFromPoint=function(){var a=new on,h=new on,g=new on;return function(x,M,F,z,le){a.subVectors(z,M),h.subVectors(F,M),g.subVectors(x,M);var re=a.dot(a),ve=a.dot(h),Ce=a.dot(g),Ve=h.dot(h),Ue=h.dot(g),We=re*Ve-ve*ve,ft=le||new on;if(0===We)return ft.set(-2,-1,-1);var dt=1/We,at=(Ve*Ce-ve*Ue)*dt,xt=(re*Ue-ve*Ce)*dt;return ft.set(1-at-xt,xt,at)}}(),Ca.containsPoint=function(){var a=new on;return function(g,y,x,M){var F=Ca.barycoordFromPoint(g,y,x,M,a);return F.x>=0&&F.y>=0&&F.x+F.y<=1}}(),Ca.prototype={constructor:Ca,set:function(a,h,g){return this.a.copy(a),this.b.copy(h),this.c.copy(g),this},setFromPointsAndIndices:function(a,h,g,y){return this.a.copy(a[h]),this.b.copy(a[g]),this.c.copy(a[y]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.a.copy(a.a),this.b.copy(a.b),this.c.copy(a.c),this},area:function(){var a=new on,h=new on;return function(){return a.subVectors(this.c,this.b),h.subVectors(this.a,this.b),.5*a.cross(h).length()}}(),midpoint:function(a){return(a||new on).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(a){return Ca.normal(this.a,this.b,this.c,a)},plane:function(a){return(a||new bt).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(a,h){return Ca.barycoordFromPoint(a,this.a,this.b,this.c,h)},containsPoint:function(a){return Ca.containsPoint(a,this.a,this.b,this.c)},closestPointToPoint:function(){var a,h,g,y;return function(M,F){void 0===a&&(a=new bt,h=[new Fl,new Fl,new Fl],g=new on,y=new on);var z=F||new on,le=1/0;if(a.setFromCoplanarPoints(this.a,this.b,this.c),a.projectPoint(M,g),!0===this.containsPoint(g))z.copy(g);else{h[0].set(this.a,this.b),h[1].set(this.b,this.c),h[2].set(this.c,this.a);for(var re=0;re<h.length;re++){h[re].closestPointToPoint(g,!0,y);var ve=g.distanceToSquared(y);ve<le&&(le=ve,z.copy(y))}}return z}}(),equals:function(a){return a.a.equals(this.a)&&a.b.equals(this.b)&&a.c.equals(this.c)}},Bo.prototype={constructor:Bo,clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.a=a.a,this.b=a.b,this.c=a.c,this.normal.copy(a.normal),this.color.copy(a.color),this.materialIndex=a.materialIndex;for(var h=0,g=a.vertexNormals.length;h<g;h++)this.vertexNormals[h]=a.vertexNormals[h].clone();for(h=0,g=a.vertexColors.length;h<g;h++)this.vertexColors[h]=a.vertexColors[h].clone();return this}},(Va.prototype=Object.create(Ks.prototype)).constructor=Va,Va.prototype.isMeshBasicMaterial=!0,Va.prototype.copy=function(a){return Ks.prototype.copy.call(this,a),this.color.copy(a.color),this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.specularMap=a.specularMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.combine=a.combine,this.reflectivity=a.reflectivity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this},gr.prototype={constructor:gr,isBufferAttribute:!0,set needsUpdate(a){!0===a&&this.version++},setArray:function(a){if(Array.isArray(a))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==a?a.length/this.itemSize:0,this.array=a},setDynamic:function(a){return this.dynamic=a,this},copy:function(a){return this.array=new a.array.constructor(a.array),this.itemSize=a.itemSize,this.count=a.count,this.normalized=a.normalized,this.dynamic=a.dynamic,this},copyAt:function(a,h,g){a*=this.itemSize,g*=h.itemSize;for(var y=0,x=this.itemSize;y<x;y++)this.array[a+y]=h.array[g+y];return this},copyArray:function(a){return this.array.set(a),this},copyColorsArray:function(a){for(var h=this.array,g=0,y=0,x=a.length;y<x;y++){var M=a[y];void 0===M&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",y),M=new Xr),h[g++]=M.r,h[g++]=M.g,h[g++]=M.b}return this},copyIndicesArray:function(a){for(var h=this.array,g=0,y=0,x=a.length;y<x;y++){var M=a[y];h[g++]=M.a,h[g++]=M.b,h[g++]=M.c}return this},copyVector2sArray:function(a){for(var h=this.array,g=0,y=0,x=a.length;y<x;y++){var M=a[y];void 0===M&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",y),M=new er),h[g++]=M.x,h[g++]=M.y}return this},copyVector3sArray:function(a){for(var h=this.array,g=0,y=0,x=a.length;y<x;y++){var M=a[y];void 0===M&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",y),M=new on),h[g++]=M.x,h[g++]=M.y,h[g++]=M.z}return this},copyVector4sArray:function(a){for(var h=this.array,g=0,y=0,x=a.length;y<x;y++){var M=a[y];void 0===M&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",y),M=new Yo),h[g++]=M.x,h[g++]=M.y,h[g++]=M.z,h[g++]=M.w}return this},set:function(a,h){return void 0===h&&(h=0),this.array.set(a,h),this},getX:function(a){return this.array[a*this.itemSize]},setX:function(a,h){return this.array[a*this.itemSize]=h,this},getY:function(a){return this.array[a*this.itemSize+1]},setY:function(a,h){return this.array[a*this.itemSize+1]=h,this},getZ:function(a){return this.array[a*this.itemSize+2]},setZ:function(a,h){return this.array[a*this.itemSize+2]=h,this},getW:function(a){return this.array[a*this.itemSize+3]},setW:function(a,h){return this.array[a*this.itemSize+3]=h,this},setXY:function(a,h,g){return this.array[0+(a*=this.itemSize)]=h,this.array[a+1]=g,this},setXYZ:function(a,h,g,y){return this.array[0+(a*=this.itemSize)]=h,this.array[a+1]=g,this.array[a+2]=y,this},setXYZW:function(a,h,g,y,x){return this.array[0+(a*=this.itemSize)]=h,this.array[a+1]=g,this.array[a+2]=y,this.array[a+3]=x,this},onUpload:function(a){return this.onUploadCallback=a,this},clone:function(){return(new this.constructor).copy(this)}},(Oh.prototype=Object.create(gr.prototype)).constructor=Oh,(vl.prototype=Object.create(gr.prototype)).constructor=vl,(Bd.prototype=Object.create(gr.prototype)).constructor=Bd,(ap.prototype=Object.create(gr.prototype)).constructor=ap,(zd.prototype=Object.create(gr.prototype)).constructor=zd,(Cf.prototype=Object.create(gr.prototype)).constructor=Cf,(Bu.prototype=Object.create(gr.prototype)).constructor=Bu,(os.prototype=Object.create(gr.prototype)).constructor=os,(Pc.prototype=Object.create(gr.prototype)).constructor=Pc,Object.assign(Hg.prototype,{computeGroups:function(a){for(var h,g=[],y=void 0,x=a.faces,M=0;M<x.length;M++){var F=x[M];F.materialIndex!==y&&(y=F.materialIndex,void 0!==h&&(h.count=3*M-h.start,g.push(h)),h={start:3*M,materialIndex:y})}void 0!==h&&(h.count=3*M-h.start,g.push(h)),this.groups=g},fromGeometry:function(a){var le,h=a.faces,g=a.vertices,y=a.faceVertexUvs,x=y[0]&&y[0].length>0,M=y[1]&&y[1].length>0,F=a.morphTargets,z=F.length;if(z>0){le=[];for(var re=0;re<z;re++)le[re]=[];this.morphTargets.position=le}var Ve,ve=a.morphNormals,Ce=ve.length;if(Ce>0){for(Ve=[],re=0;re<Ce;re++)Ve[re]=[];this.morphTargets.normal=Ve}var Ue=a.skinIndices,We=a.skinWeights,ft=Ue.length===g.length,dt=We.length===g.length;for(re=0;re<h.length;re++){var at=h[re];this.vertices.push(g[at.a],g[at.b],g[at.c]);var xt=at.vertexNormals;if(3===xt.length)this.normals.push(xt[0],xt[1],xt[2]);else{var St=at.normal;this.normals.push(St,St,St)}var gn,nn=at.vertexColors;if(3===nn.length)this.colors.push(nn[0],nn[1],nn[2]);else{var qt=at.color;this.colors.push(qt,qt,qt)}!0===x&&(void 0!==(gn=y[0][re])?this.uvs.push(gn[0],gn[1],gn[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",re),this.uvs.push(new er,new er,new er))),!0===M&&(void 0!==(gn=y[1][re])?this.uvs2.push(gn[0],gn[1],gn[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",re),this.uvs2.push(new er,new er,new er)));for(var un=0;un<z;un++){var an=F[un].vertices;le[un].push(an[at.a],an[at.b],an[at.c])}for(un=0;un<Ce;un++){var _n=ve[un].vertexNormals[re];Ve[un].push(_n.a,_n.b,_n.c)}ft&&this.skinIndices.push(Ue[at.a],Ue[at.b],Ue[at.c]),dt&&this.skinWeights.push(We[at.a],We[at.b],We[at.c])}return this.computeGroups(a),this.verticesNeedUpdate=a.verticesNeedUpdate,this.normalsNeedUpdate=a.normalsNeedUpdate,this.colorsNeedUpdate=a.colorsNeedUpdate,this.uvsNeedUpdate=a.uvsNeedUpdate,this.groupsNeedUpdate=a.groupsNeedUpdate,this}}),Object.assign(Ms.prototype,X.prototype,{isGeometry:!0,applyMatrix:function(a){for(var h=(new Rt).getNormalMatrix(a),g=0,y=this.vertices.length;g<y;g++)this.vertices[g].applyMatrix4(a);for(g=0,y=this.faces.length;g<y;g++){var M=this.faces[g];M.normal.applyMatrix3(h).normalize();for(var F=0,z=M.vertexNormals.length;F<z;F++)M.vertexNormals[F].applyMatrix3(h).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var a;return function(g){return void 0===a&&(a=new vs),a.makeRotationX(g),this.applyMatrix(a),this}}(),rotateY:function(){var a;return function(g){return void 0===a&&(a=new vs),a.makeRotationY(g),this.applyMatrix(a),this}}(),rotateZ:function(){var a;return function(g){return void 0===a&&(a=new vs),a.makeRotationZ(g),this.applyMatrix(a),this}}(),translate:function(){var a;return function(g,y,x){return void 0===a&&(a=new vs),a.makeTranslation(g,y,x),this.applyMatrix(a),this}}(),scale:function(){var a;return function(g,y,x){return void 0===a&&(a=new vs),a.makeScale(g,y,x),this.applyMatrix(a),this}}(),lookAt:function(){var a;return function(g){void 0===a&&(a=new Cr),a.lookAt(g),a.updateMatrix(),this.applyMatrix(a.matrix)}}(),fromBufferGeometry:function(a){var h=this,g=null!==a.index?a.index.array:void 0,y=a.attributes,x=y.position.array,M=void 0!==y.normal?y.normal.array:void 0,F=void 0!==y.color?y.color.array:void 0,z=void 0!==y.uv?y.uv.array:void 0,le=void 0!==y.uv2?y.uv2.array:void 0;void 0!==le&&(this.faceVertexUvs[1]=[]);for(var re=[],ve=[],Ce=[],Ve=0,Ue=0;Ve<x.length;Ve+=3,Ue+=2)h.vertices.push(new on(x[Ve],x[Ve+1],x[Ve+2])),void 0!==M&&re.push(new on(M[Ve],M[Ve+1],M[Ve+2])),void 0!==F&&h.colors.push(new Xr(F[Ve],F[Ve+1],F[Ve+2])),void 0!==z&&ve.push(new er(z[Ue],z[Ue+1])),void 0!==le&&Ce.push(new er(le[Ue],le[Ue+1]));function We(nn,qt,gn,un){var On=new Bo(nn,qt,gn,void 0!==M?[re[nn].clone(),re[qt].clone(),re[gn].clone()]:[],void 0!==F?[h.colors[nn].clone(),h.colors[qt].clone(),h.colors[gn].clone()]:[],un);h.faces.push(On),void 0!==z&&h.faceVertexUvs[0].push([ve[nn].clone(),ve[qt].clone(),ve[gn].clone()]),void 0!==le&&h.faceVertexUvs[1].push([Ce[nn].clone(),Ce[qt].clone(),Ce[gn].clone()])}if(void 0!==g){var ft=a.groups;if(ft.length>0)for(Ve=0;Ve<ft.length;Ve++)for(var dt=ft[Ve],at=dt.start,St=(Ue=at,at+dt.count);Ue<St;Ue+=3)We(g[Ue],g[Ue+1],g[Ue+2],dt.materialIndex);else for(Ve=0;Ve<g.length;Ve+=3)We(g[Ve],g[Ve+1],g[Ve+2])}else for(Ve=0;Ve<x.length/3;Ve+=3)We(Ve,Ve+1,Ve+2);return this.computeFaceNormals(),null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone()),null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var a=this.boundingBox.getCenter().negate();return this.translate(a.x,a.y,a.z),a},normalize:function(){this.computeBoundingSphere();var a=this.boundingSphere.center,h=this.boundingSphere.radius,g=0===h?1:1/h,y=new vs;return y.set(g,0,0,-g*a.x,0,g,0,-g*a.y,0,0,g,-g*a.z,0,0,0,1),this.applyMatrix(y),this},computeFaceNormals:function(){for(var a=new on,h=new on,g=0,y=this.faces.length;g<y;g++){var x=this.faces[g],M=this.vertices[x.a],F=this.vertices[x.b];a.subVectors(this.vertices[x.c],F),h.subVectors(M,F),a.cross(h),a.normalize(),x.normal.copy(a)}},computeVertexNormals:function(a){var h,g,y,x,M,F;for(void 0===a&&(a=!0),F=new Array(this.vertices.length),h=0,g=this.vertices.length;h<g;h++)F[h]=new on;if(a){var z,le,ve=new on,Ce=new on;for(y=0,x=this.faces.length;y<x;y++)z=this.vertices[(M=this.faces[y]).a],ve.subVectors(this.vertices[M.c],le=this.vertices[M.b]),Ce.subVectors(z,le),ve.cross(Ce),F[M.a].add(ve),F[M.b].add(ve),F[M.c].add(ve)}else for(this.computeFaceNormals(),y=0,x=this.faces.length;y<x;y++)F[(M=this.faces[y]).a].add(M.normal),F[M.b].add(M.normal),F[M.c].add(M.normal);for(h=0,g=this.vertices.length;h<g;h++)F[h].normalize();for(y=0,x=this.faces.length;y<x;y++){var Ve=(M=this.faces[y]).vertexNormals;3===Ve.length?(Ve[0].copy(F[M.a]),Ve[1].copy(F[M.b]),Ve[2].copy(F[M.c])):(Ve[0]=F[M.a].clone(),Ve[1]=F[M.b].clone(),Ve[2]=F[M.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var a,h,g;for(this.computeFaceNormals(),a=0,h=this.faces.length;a<h;a++){var y=(g=this.faces[a]).vertexNormals;3===y.length?(y[0].copy(g.normal),y[1].copy(g.normal),y[2].copy(g.normal)):(y[0]=g.normal.clone(),y[1]=g.normal.clone(),y[2]=g.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var a,h,g,y,x;for(g=0,y=this.faces.length;g<y;g++)for((x=this.faces[g]).__originalFaceNormal?x.__originalFaceNormal.copy(x.normal):x.__originalFaceNormal=x.normal.clone(),x.__originalVertexNormals||(x.__originalVertexNormals=[]),a=0,h=x.vertexNormals.length;a<h;a++)x.__originalVertexNormals[a]?x.__originalVertexNormals[a].copy(x.vertexNormals[a]):x.__originalVertexNormals[a]=x.vertexNormals[a].clone();var M=new Ms;for(M.faces=this.faces,a=0,h=this.morphTargets.length;a<h;a++){if(!this.morphNormals[a]){this.morphNormals[a]={},this.morphNormals[a].faceNormals=[],this.morphNormals[a].vertexNormals=[];var F=this.morphNormals[a].faceNormals,z=this.morphNormals[a].vertexNormals;for(g=0,y=this.faces.length;g<y;g++)re=new on,ve={a:new on,b:new on,c:new on},F.push(re),z.push(ve)}var re,ve,le=this.morphNormals[a];for(M.vertices=this.morphTargets[a].vertices,M.computeFaceNormals(),M.computeVertexNormals(),g=0,y=this.faces.length;g<y;g++)ve=le.vertexNormals[g],(re=le.faceNormals[g]).copy((x=this.faces[g]).normal),ve.a.copy(x.vertexNormals[0]),ve.b.copy(x.vertexNormals[1]),ve.c.copy(x.vertexNormals[2])}for(g=0,y=this.faces.length;g<y;g++)(x=this.faces[g]).normal=x.__originalFaceNormal,x.vertexNormals=x.__originalVertexNormals},computeLineDistances:function(){for(var a=0,h=this.vertices,g=0,y=h.length;g<y;g++)g>0&&(a+=h[g].distanceTo(h[g-1])),this.lineDistances[g]=a},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Ts),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Pt),this.boundingSphere.setFromPoints(this.vertices)},merge:function(a,h,g){if(!1!==(a&&a.isGeometry)){var y,x=this.vertices.length,M=this.vertices,F=a.vertices,z=this.faces,le=a.faces,re=this.faceVertexUvs[0],ve=a.faceVertexUvs[0],Ce=this.colors,Ve=a.colors;void 0===g&&(g=0),void 0!==h&&(y=(new Rt).getNormalMatrix(h));for(var Ue=0,We=F.length;Ue<We;Ue++){var dt=F[Ue].clone();void 0!==h&&dt.applyMatrix4(h),M.push(dt)}for(Ue=0,We=Ve.length;Ue<We;Ue++)Ce.push(Ve[Ue].clone());for(Ue=0,We=le.length;Ue<We;Ue++){var xt,St,at=le[Ue],qt=at.vertexNormals,gn=at.vertexColors;(xt=new Bo(at.a+x,at.b+x,at.c+x)).normal.copy(at.normal),void 0!==y&&xt.normal.applyMatrix3(y).normalize();for(var un=0,an=qt.length;un<an;un++)St=qt[un].clone(),void 0!==y&&St.applyMatrix3(y).normalize(),xt.vertexNormals.push(St);for(xt.color.copy(at.color),un=0,an=gn.length;un<an;un++)xt.vertexColors.push(gn[un].clone());xt.materialIndex=at.materialIndex+g,z.push(xt)}for(Ue=0,We=ve.length;Ue<We;Ue++){var _n=ve[Ue],On=[];if(void 0!==_n){for(un=0,an=_n.length;un<an;un++)On.push(_n[un].clone());re.push(On)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",a)},mergeMesh:function(a){!1!==(a&&a.isMesh)?(a.matrixAutoUpdate&&a.updateMatrix(),this.merge(a.geometry,a.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",a)},mergeVertices:function(){var y,x,z,le,re,ve,Ce,Ve,a={},h=[],g=[],F=Math.pow(10,4);for(z=0,le=this.vertices.length;z<le;z++)y=this.vertices[z],void 0===a[x=Math.round(y.x*F)+"_"+Math.round(y.y*F)+"_"+Math.round(y.z*F)]?(a[x]=z,h.push(this.vertices[z]),g[z]=h.length-1):g[z]=g[a[x]];var Ue=[];for(z=0,le=this.faces.length;z<le;z++){(re=this.faces[z]).a=g[re.a],re.b=g[re.b],re.c=g[re.c],ve=[re.a,re.b,re.c];for(var ft=0;ft<3;ft++)if(ve[ft]===ve[(ft+1)%3]){Ue.push(z);break}}for(z=Ue.length-1;z>=0;z--){var dt=Ue[z];for(this.faces.splice(dt,1),Ce=0,Ve=this.faceVertexUvs.length;Ce<Ve;Ce++)this.faceVertexUvs[Ce].splice(dt,1)}var at=this.vertices.length-h.length;return this.vertices=h,at},sortFacesByMaterialIndex:function(){for(var a=this.faces,h=a.length,g=0;g<h;g++)a[g]._id=g;a.sort(function y(re,ve){return re.materialIndex-ve.materialIndex});var F,z,x=this.faceVertexUvs[0],M=this.faceVertexUvs[1];for(x&&x.length===h&&(F=[]),M&&M.length===h&&(z=[]),g=0;g<h;g++){var le=a[g]._id;F&&F.push(x[le]),z&&z.push(M[le])}F&&(this.faceVertexUvs[0]=F),z&&(this.faceVertexUvs[1]=z)},toJSON:function(){var a={metadata:{version:4.4,type:"Geometry",generator:"Geometry.toJSON"}};if(a.uuid=this.uuid,a.type=this.type,""!==this.name&&(a.name=this.name),void 0!==this.parameters){var h=this.parameters;for(var g in h)void 0!==h[g]&&(a[g]=h[g]);return a}for(var y=[],x=0;x<this.vertices.length;x++){var M=this.vertices[x];y.push(M.x,M.y,M.z)}var F=[],z=[],le={},re=[],ve={},Ce=[],Ve={};for(x=0;x<this.faces.length;x++){var Ue=this.faces[x],dt=void 0!==this.faceVertexUvs[0][x],at=Ue.normal.length()>0,xt=Ue.vertexNormals.length>0,St=1!==Ue.color.r||1!==Ue.color.g||1!==Ue.color.b,nn=Ue.vertexColors.length>0,qt=0;if(qt=_n(qt,0,0),qt=_n(qt,1,!0),qt=_n(qt,2,!1),qt=_n(qt,3,dt),qt=_n(qt,4,at),qt=_n(qt,5,xt),qt=_n(qt,6,St),qt=_n(qt,7,nn),F.push(qt),F.push(Ue.a,Ue.b,Ue.c),F.push(Ue.materialIndex),dt){var gn=this.faceVertexUvs[0][x];F.push(di(gn[0]),di(gn[1]),di(gn[2]))}if(at&&F.push(On(Ue.normal)),xt){var un=Ue.vertexNormals;F.push(On(un[0]),On(un[1]),On(un[2]))}if(St&&F.push(Ti(Ue.color)),nn){var an=Ue.vertexColors;F.push(Ti(an[0]),Ti(an[1]),Ti(an[2]))}}function _n(Jt,tn,Xn){return Xn?Jt|1<<tn:Jt&~(1<<tn)}function On(Jt){var tn=Jt.x.toString()+Jt.y.toString()+Jt.z.toString();return void 0!==le[tn]||(le[tn]=z.length/3,z.push(Jt.x,Jt.y,Jt.z)),le[tn]}function Ti(Jt){var tn=Jt.r.toString()+Jt.g.toString()+Jt.b.toString();return void 0!==ve[tn]||(ve[tn]=re.length,re.push(Jt.getHex())),ve[tn]}function di(Jt){var tn=Jt.x.toString()+Jt.y.toString();return void 0!==Ve[tn]||(Ve[tn]=Ce.length/2,Ce.push(Jt.x,Jt.y)),Ve[tn]}return a.data={},a.data.vertices=y,a.data.normals=z,re.length>0&&(a.data.colors=re),Ce.length>0&&(a.data.uvs=[Ce]),a.data.faces=F,a},clone:function(){return(new Ms).copy(this)},copy:function(a){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]],this.colors=[];for(var h=a.vertices,g=0,y=h.length;g<y;g++)this.vertices.push(h[g].clone());var x=a.colors;for(g=0,y=x.length;g<y;g++)this.colors.push(x[g].clone());var M=a.faces;for(g=0,y=M.length;g<y;g++)this.faces.push(M[g].clone());for(g=0,y=a.faceVertexUvs.length;g<y;g++){var F=a.faceVertexUvs[g];void 0===this.faceVertexUvs[g]&&(this.faceVertexUvs[g]=[]);for(var z=0,le=F.length;z<le;z++){for(var re=F[z],ve=[],Ce=0,Ve=re.length;Ce<Ve;Ce++)ve.push(re[Ce].clone());this.faceVertexUvs[g].push(ve)}}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Dv=0;function Gg(){return Dv++}function Dr(){Object.defineProperty(this,"id",{value:Gg()}),this.uuid=As.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}function wa(a,h){Cr.call(this),this.type="Mesh",this.geometry=void 0!==a?a:new Dr,this.material=void 0!==h?h:new Va({color:16777215*Math.random()}),this.drawMode=Ya,this.updateMorphTargets()}function Nl(a,h,g,y,x,M){Dr.call(this),this.type="BoxBufferGeometry",this.parameters={width:a,height:h,depth:g,widthSegments:y,heightSegments:x,depthSegments:M};var F=this,z=function xt(qt,gn,un){var an=0;return an+=(qt+1)*(gn+1)*2,(an+=(qt+1)*(un+1)*2)+(un+1)*(gn+1)*2}(y=Math.floor(y)||1,x=Math.floor(x)||1,M=Math.floor(M)||1),le=function St(qt,gn,un){var an=0;return an+=qt*gn*2,6*((an+=qt*un*2)+un*gn*2)}(y,x,M),re=new(le>65535?Uint32Array:Uint16Array)(le),ve=new Float32Array(3*z),Ce=new Float32Array(3*z),Ve=new Float32Array(2*z),Ue=0,We=0,ft=0,dt=0,at=0;function nn(qt,gn,un,an,_n,On,Ti,di,Jt,tn,Xn){for(var ni=On/Jt,Mi=Ti/tn,Ai=On/2,gi=Ti/2,ar=di/2,Hi=Jt+1,Yn=tn+1,jn=0,f=0,c=new on,d=0;d<Yn;d++)for(var m=d*Mi-gi,_=0;_<Hi;_++)c[qt]=(_*ni-Ai)*an,c[gn]=m*_n,c[un]=ar,ve[Ue]=c.x,ve[Ue+1]=c.y,ve[Ue+2]=c.z,c[qt]=0,c[gn]=0,c[un]=di>0?1:-1,Ce[Ue]=c.x,Ce[Ue+1]=c.y,Ce[Ue+2]=c.z,Ve[We]=_/Jt,Ve[We+1]=1-d/tn,Ue+=3,We+=2,jn+=1;for(d=0;d<tn;d++)for(_=0;_<Jt;_++){var E=dt+_+Hi*(d+1),N=dt+(_+1)+Hi*(d+1),R=dt+(_+1)+Hi*d;re[ft]=dt+_+Hi*d,re[ft+1]=E,re[ft+2]=R,re[ft+3]=E,re[ft+4]=N,re[ft+5]=R,ft+=6,f+=6}F.addGroup(at,f,Xn),at+=f,dt+=jn}nn("z","y","x",-1,-1,g,h,a,M,x,0),nn("z","y","x",1,-1,g,h,-a,M,x,1),nn("x","z","y",1,1,a,g,h,y,M,2),nn("x","z","y",1,-1,a,g,-h,y,M,3),nn("x","y","z",1,-1,a,h,g,y,x,4),nn("x","y","z",-1,-1,a,h,-g,y,x,5),this.setIndex(new gr(re,1)),this.addAttribute("position",new gr(ve,3)),this.addAttribute("normal",new gr(Ce,3)),this.addAttribute("uv",new gr(Ve,2))}function oa(a,h,g,y){Dr.call(this),this.type="PlaneBufferGeometry",this.parameters={width:a,height:h,widthSegments:g,heightSegments:y};for(var x=a/2,M=h/2,F=Math.floor(g)||1,z=Math.floor(y)||1,le=F+1,re=z+1,ve=a/F,Ce=h/z,Ve=new Float32Array(le*re*3),Ue=new Float32Array(le*re*3),We=new Float32Array(le*re*2),ft=0,dt=0,at=0;at<re;at++)for(var xt=at*Ce-M,St=0;St<le;St++)Ve[ft]=St*ve-x,Ve[ft+1]=-xt,Ue[ft+2]=1,We[dt]=St/F,We[dt+1]=1-at/z,ft+=3,dt+=2;ft=0;var qt=new(Ve.length/3>65535?Uint32Array:Uint16Array)(F*z*6);for(at=0;at<z;at++)for(St=0;St<F;St++){var un=St+le*(at+1),an=St+1+le*(at+1),_n=St+1+le*at;qt[ft]=St+le*at,qt[ft+1]=un,qt[ft+2]=_n,qt[ft+3]=un,qt[ft+4]=an,qt[ft+5]=_n,ft+=6}this.setIndex(new gr(qt,1)),this.addAttribute("position",new gr(Ve,3)),this.addAttribute("normal",new gr(Ue,3)),this.addAttribute("uv",new gr(We,2))}function Ua(){Cr.call(this),this.type="Camera",this.matrixWorldInverse=new vs,this.projectionMatrix=new vs}function xl(a,h,g,y){Ua.call(this),this.type="PerspectiveCamera",this.fov=void 0!==a?a:50,this.zoom=1,this.near=void 0!==g?g:.1,this.far=void 0!==y?y:2e3,this.focus=10,this.aspect=void 0!==h?h:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Vd(a,h,g,y,x,M){Ua.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=a,this.right=h,this.top=g,this.bottom=y,this.near=void 0!==x?x:.1,this.far=void 0!==M?M:2e3,this.updateProjectionMatrix()}function hc(a,h,g){var y,M,F;return{setMode:function x(ve){y=ve},setIndex:function z(ve){ve.array instanceof Uint32Array&&h.get("OES_element_index_uint")?(M=a.UNSIGNED_INT,F=4):ve.array instanceof Uint16Array?(M=a.UNSIGNED_SHORT,F=2):(M=a.UNSIGNED_BYTE,F=1)},render:function le(ve,Ce){a.drawElements(y,Ce,M,ve*F),g.calls++,g.vertices+=Ce,y===a.TRIANGLES&&(g.faces+=Ce/3)},renderInstances:function re(ve,Ce,Ve){var Ue=h.get("ANGLE_instanced_arrays");null!==Ue?(Ue.drawElementsInstancedANGLE(y,Ve,M,Ce*F,ve.maxInstancedCount),g.calls++,g.vertices+=Ve*ve.maxInstancedCount,y===a.TRIANGLES&&(g.faces+=ve.maxInstancedCount*Ve/3)):console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}}}function wf(a,h,g){var y;return{setMode:function x(z){y=z},render:function M(z,le){a.drawArrays(y,z,le),g.calls++,g.vertices+=le,y===a.TRIANGLES&&(g.faces+=le/3)},renderInstances:function F(z){var le=h.get("ANGLE_instanced_arrays");if(null!==le){var re=z.attributes.position,ve=0;le.drawArraysInstancedANGLE(y,0,ve=re.isInterleavedBufferAttribute?re.data.count:re.count,z.maxInstancedCount),g.calls++,g.vertices+=ve*z.maxInstancedCount,y===a.TRIANGLES&&(g.faces+=z.maxInstancedCount*ve/3)}else console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}}}function Ha(){var a={};return{get:function(h){if(void 0!==a[h.id])return a[h.id];var g;switch(h.type){case"DirectionalLight":g={direction:new on,color:new Xr,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new er};break;case"SpotLight":g={position:new on,direction:new on,color:new Xr,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new er};break;case"PointLight":g={position:new on,color:new Xr,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new er};break;case"HemisphereLight":g={direction:new on,skyColor:new Xr,groundColor:new Xr};break;case"RectAreaLight":g={color:new Xr,position:new on,halfWidth:new on,halfHeight:new on}}return a[h.id]=g,g}}}function Pv(a,h,g){var y=a.createShader(h);return a.shaderSource(y,g),a.compileShader(y),!1===a.getShaderParameter(y,a.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==a.getShaderInfoLog(y)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",h===a.VERTEX_SHADER?"vertex":"fragment",a.getShaderInfoLog(y),function Lv(a){for(var h=a.split("\n"),g=0;g<h.length;g++)h[g]=g+1+": "+h[g];return h.join("\n")}(g)),y}Object.assign(Dr.prototype,X.prototype,{isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(a){this.index=a},addAttribute:function(a,h){return!1===(h&&h.isBufferAttribute)&&!1===(h&&h.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(a,new gr(arguments[1],arguments[2]))):"index"===a?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(h)):(this.attributes[a]=h,this)},getAttribute:function(a){return this.attributes[a]},removeAttribute:function(a){return delete this.attributes[a],this},addGroup:function(a,h,g){this.groups.push({start:a,count:h,materialIndex:void 0!==g?g:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(a,h){this.drawRange.start=a,this.drawRange.count=h},applyMatrix:function(a){var h=this.attributes.position;void 0!==h&&(a.applyToVector3Array(h.array),h.needsUpdate=!0);var g=this.attributes.normal;return void 0!==g&&((new Rt).getNormalMatrix(a).applyToVector3Array(g.array),g.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var a;return function(g){return void 0===a&&(a=new vs),a.makeRotationX(g),this.applyMatrix(a),this}}(),rotateY:function(){var a;return function(g){return void 0===a&&(a=new vs),a.makeRotationY(g),this.applyMatrix(a),this}}(),rotateZ:function(){var a;return function(g){return void 0===a&&(a=new vs),a.makeRotationZ(g),this.applyMatrix(a),this}}(),translate:function(){var a;return function(g,y,x){return void 0===a&&(a=new vs),a.makeTranslation(g,y,x),this.applyMatrix(a),this}}(),scale:function(){var a;return function(g,y,x){return void 0===a&&(a=new vs),a.makeScale(g,y,x),this.applyMatrix(a),this}}(),lookAt:function(){var a;return function(g){void 0===a&&(a=new Cr),a.lookAt(g),a.updateMatrix(),this.applyMatrix(a.matrix)}}(),center:function(){this.computeBoundingBox();var a=this.boundingBox.getCenter().negate();return this.translate(a.x,a.y,a.z),a},setFromObject:function(a){var h=a.geometry;if(a.isPoints||a.isLine){var g=new os(3*h.vertices.length,3),y=new os(3*h.colors.length,3);if(this.addAttribute("position",g.copyVector3sArray(h.vertices)),this.addAttribute("color",y.copyColorsArray(h.colors)),h.lineDistances&&h.lineDistances.length===h.vertices.length){var x=new os(h.lineDistances.length,1);this.addAttribute("lineDistance",x.copyArray(h.lineDistances))}null!==h.boundingSphere&&(this.boundingSphere=h.boundingSphere.clone()),null!==h.boundingBox&&(this.boundingBox=h.boundingBox.clone())}else a.isMesh&&h&&h.isGeometry&&this.fromGeometry(h);return this},updateFromObject:function(a){var y,h=a.geometry;if(a.isMesh){var g=h.__directGeometry;if(!0===h.elementsNeedUpdate&&(g=void 0,h.elementsNeedUpdate=!1),void 0===g)return this.fromGeometry(h);g.verticesNeedUpdate=h.verticesNeedUpdate,g.normalsNeedUpdate=h.normalsNeedUpdate,g.colorsNeedUpdate=h.colorsNeedUpdate,g.uvsNeedUpdate=h.uvsNeedUpdate,g.groupsNeedUpdate=h.groupsNeedUpdate,h.verticesNeedUpdate=!1,h.normalsNeedUpdate=!1,h.colorsNeedUpdate=!1,h.uvsNeedUpdate=!1,h.groupsNeedUpdate=!1,h=g}return!0===h.verticesNeedUpdate&&(void 0!==(y=this.attributes.position)&&(y.copyVector3sArray(h.vertices),y.needsUpdate=!0),h.verticesNeedUpdate=!1),!0===h.normalsNeedUpdate&&(void 0!==(y=this.attributes.normal)&&(y.copyVector3sArray(h.normals),y.needsUpdate=!0),h.normalsNeedUpdate=!1),!0===h.colorsNeedUpdate&&(void 0!==(y=this.attributes.color)&&(y.copyColorsArray(h.colors),y.needsUpdate=!0),h.colorsNeedUpdate=!1),h.uvsNeedUpdate&&(void 0!==(y=this.attributes.uv)&&(y.copyVector2sArray(h.uvs),y.needsUpdate=!0),h.uvsNeedUpdate=!1),h.lineDistancesNeedUpdate&&(void 0!==(y=this.attributes.lineDistance)&&(y.copyArray(h.lineDistances),y.needsUpdate=!0),h.lineDistancesNeedUpdate=!1),h.groupsNeedUpdate&&(h.computeGroups(a.geometry),this.groups=h.groups,h.groupsNeedUpdate=!1),this},fromGeometry:function(a){return a.__directGeometry=(new Hg).fromGeometry(a),this.fromDirectGeometry(a.__directGeometry)},fromDirectGeometry:function(a){var h=new Float32Array(3*a.vertices.length);if(this.addAttribute("position",new gr(h,3).copyVector3sArray(a.vertices)),a.normals.length>0){var g=new Float32Array(3*a.normals.length);this.addAttribute("normal",new gr(g,3).copyVector3sArray(a.normals))}if(a.colors.length>0){var y=new Float32Array(3*a.colors.length);this.addAttribute("color",new gr(y,3).copyColorsArray(a.colors))}if(a.uvs.length>0){var x=new Float32Array(2*a.uvs.length);this.addAttribute("uv",new gr(x,2).copyVector2sArray(a.uvs))}if(a.uvs2.length>0){var M=new Float32Array(2*a.uvs2.length);this.addAttribute("uv2",new gr(M,2).copyVector2sArray(a.uvs2))}if(a.indices.length>0){var z=new(a.vertices.length>65535?Uint32Array:Uint16Array)(3*a.indices.length);this.setIndex(new gr(z,1).copyIndicesArray(a.indices))}for(var le in this.groups=a.groups,a.morphTargets){for(var re=[],ve=a.morphTargets[le],Ce=0,Ve=ve.length;Ce<Ve;Ce++){var Ue=ve[Ce],We=new os(3*Ue.length,3);re.push(We.copyVector3sArray(Ue))}this.morphAttributes[le]=re}if(a.skinIndices.length>0){var ft=new os(4*a.skinIndices.length,4);this.addAttribute("skinIndex",ft.copyVector4sArray(a.skinIndices))}if(a.skinWeights.length>0){var dt=new os(4*a.skinWeights.length,4);this.addAttribute("skinWeight",dt.copyVector4sArray(a.skinWeights))}return null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone()),null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Ts);var a=this.attributes.position;void 0!==a?this.boundingBox.setFromBufferAttribute(a):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var a=new Ts,h=new on;return function(){null===this.boundingSphere&&(this.boundingSphere=new Pt);var y=this.attributes.position;if(y){var x=this.boundingSphere.center;a.setFromBufferAttribute(y),a.getCenter(x);for(var M=0,F=0,z=y.count;F<z;F++)h.x=y.getX(F),h.y=y.getY(F),h.z=y.getZ(F),M=Math.max(M,x.distanceToSquared(h));this.boundingSphere.radius=Math.sqrt(M),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var a=this.index,h=this.attributes,g=this.groups;if(h.position){var y=h.position.array;if(void 0===h.normal)this.addAttribute("normal",new gr(new Float32Array(y.length),3));else for(var x=h.normal.array,M=0,F=x.length;M<F;M++)x[M]=0;var le,re,ve,z=h.normal.array,Ce=new on,Ve=new on,Ue=new on,We=new on,ft=new on;if(a){var dt=a.array;0===g.length&&this.addGroup(0,dt.length);for(var at=0,xt=g.length;at<xt;++at){var St=g[at],nn=St.start;for(M=nn,F=nn+St.count;M<F;M+=3)re=3*dt[M+1],ve=3*dt[M+2],Ce.fromArray(y,le=3*dt[M+0]),Ve.fromArray(y,re),Ue.fromArray(y,ve),We.subVectors(Ue,Ve),ft.subVectors(Ce,Ve),We.cross(ft),z[le]+=We.x,z[le+1]+=We.y,z[le+2]+=We.z,z[re]+=We.x,z[re+1]+=We.y,z[re+2]+=We.z,z[ve]+=We.x,z[ve+1]+=We.y,z[ve+2]+=We.z}}else for(M=0,F=y.length;M<F;M+=9)Ce.fromArray(y,M),Ve.fromArray(y,M+3),Ue.fromArray(y,M+6),We.subVectors(Ue,Ve),ft.subVectors(Ce,Ve),We.cross(ft),z[M]=We.x,z[M+1]=We.y,z[M+2]=We.z,z[M+3]=We.x,z[M+4]=We.y,z[M+5]=We.z,z[M+6]=We.x,z[M+7]=We.y,z[M+8]=We.z;this.normalizeNormals(),h.normal.needsUpdate=!0}},merge:function(a,h){if(!1!==(a&&a.isBufferGeometry)){void 0===h&&(h=0);var g=this.attributes;for(var y in g)if(void 0!==a.attributes[y])for(var M=g[y].array,F=a.attributes[y],z=F.array,re=0,ve=F.itemSize*h;re<z.length;re++,ve++)M[ve]=z[re];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",a)},normalizeNormals:function(){for(var h,g,y,x,a=this.attributes.normal.array,M=0,F=a.length;M<F;M+=3)h=a[M],g=a[M+1],y=a[M+2],x=1/Math.sqrt(h*h+g*g+y*y),a[M]*=x,a[M+1]*=x,a[M+2]*=x},toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var a=new Dr,h=this.index.array,g=this.attributes;for(var y in g){for(var x=g[y],M=x.array,F=x.itemSize,z=new M.constructor(h.length*F),le=0,re=0,ve=0,Ce=h.length;ve<Ce;ve++){le=h[ve]*F;for(var Ve=0;Ve<F;Ve++)z[re++]=M[le++]}a.addAttribute(y,new gr(z,F))}return a},toJSON:function(){var a={metadata:{version:4.4,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(a.uuid=this.uuid,a.type=this.type,""!==this.name&&(a.name=this.name),void 0!==this.parameters){var h=this.parameters;for(var g in h)void 0!==h[g]&&(a[g]=h[g]);return a}a.data={attributes:{}};var y=this.index;if(null!==y){var x=Array.prototype.slice.call(y.array);a.data.index={type:y.array.constructor.name,array:x}}var M=this.attributes;for(var g in M){var F=M[g];x=Array.prototype.slice.call(F.array),a.data.attributes[g]={itemSize:F.itemSize,type:F.array.constructor.name,array:x,normalized:F.normalized}}var z=this.groups;z.length>0&&(a.data.groups=JSON.parse(JSON.stringify(z)));var le=this.boundingSphere;return null!==le&&(a.data.boundingSphere={center:le.center.toArray(),radius:le.radius}),a},clone:function(){return(new Dr).copy(this)},copy:function(a){var h=a.index;null!==h&&this.setIndex(h.clone());var g=a.attributes;for(var y in g)this.addAttribute(y,g[y].clone());for(var M=a.groups,F=0,z=M.length;F<z;F++){var le=M[F];this.addGroup(le.start,le.count,le.materialIndex)}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Dr.MaxIndex=65535,wa.prototype=Object.assign(Object.create(Cr.prototype),{constructor:wa,isMesh:!0,setDrawMode:function(a){this.drawMode=a},copy:function(a){return Cr.prototype.copy.call(this,a),this.drawMode=a.drawMode,this},updateMorphTargets:function(){var a=this.geometry.morphTargets;if(void 0!==a&&a.length>0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var h=0,g=a.length;h<g;h++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[a[h].name]=h}},raycast:function(){var a=new vs,h=new sa,g=new Pt,y=new on,x=new on,M=new on,F=new on,z=new on,le=new on,re=new er,ve=new er,Ce=new er,Ve=new on,Ue=new on,We=new on;function ft(xt,St,nn,qt,gn,un,an){return Ca.barycoordFromPoint(xt,St,nn,qt,Ve),gn.multiplyScalar(Ve.x),un.multiplyScalar(Ve.y),an.multiplyScalar(Ve.z),gn.add(un).add(an),gn.clone()}function dt(xt,St,nn,qt,gn,un,an){var On=xt.material;if(null===(On.side===W?nn.intersectTriangle(un,gn,qt,!0,an):nn.intersectTriangle(qt,gn,un,On.side!==ae,an)))return null;We.copy(an),We.applyMatrix4(xt.matrixWorld);var Ti=St.ray.origin.distanceTo(We);return Ti<St.near||Ti>St.far?null:{distance:Ti,point:We.clone(),object:xt}}function at(xt,St,nn,qt,gn,un,an,_n){y.fromArray(qt,3*un),x.fromArray(qt,3*an),M.fromArray(qt,3*_n);var On=dt(xt,St,nn,y,x,M,Ue);return On&&(gn&&(re.fromArray(gn,2*un),ve.fromArray(gn,2*an),Ce.fromArray(gn,2*_n),On.uv=ft(Ue,y,x,M,re,ve,Ce)),On.face=new Bo(un,an,_n,Ca.normal(y,x,M)),On.faceIndex=un),On}return function(St,nn){var an,_n,qt=this.geometry,gn=this.material,un=this.matrixWorld;if(void 0!==gn&&(null===qt.boundingSphere&&qt.computeBoundingSphere(),g.copy(qt.boundingSphere),g.applyMatrix4(un),!1!==St.ray.intersectsSphere(g)&&(a.getInverse(un),h.copy(St.ray).applyMatrix4(a),null===qt.boundingBox||!1!==h.intersectsBox(qt.boundingBox))))if(qt.isBufferGeometry){var On,Jt=qt.index,tn=qt.attributes,Xn=tn.position.array;if(void 0!==tn.uv&&(an=tn.uv.array),null!==Jt)for(var ni=Jt.array,Mi=0,Ai=ni.length;Mi<Ai;Mi+=3)(_n=at(this,St,h,Xn,an,On=ni[Mi],ni[Mi+1],ni[Mi+2]))&&(_n.faceIndex=Math.floor(Mi/3),nn.push(_n));else for(Mi=0,Ai=Xn.length;Mi<Ai;Mi+=9)(_n=at(this,St,h,Xn,an,On=Mi/3,On+1,On+2))&&(_n.index=On,nn.push(_n))}else if(qt.isGeometry){var gi,ar,Hi,Yn=gn&&gn.isMultiMaterial,jn=!0===Yn?gn.materials:null,f=qt.vertices,c=qt.faces,d=qt.faceVertexUvs[0];d.length>0&&(an=d);for(var m=0,_=c.length;m<_;m++){var C=c[m],A=!0===Yn?jn[C.materialIndex]:gn;if(void 0!==A){if(gi=f[C.a],ar=f[C.b],Hi=f[C.c],!0===A.morphTargets){var E=qt.morphTargets,N=this.morphTargetInfluences;y.set(0,0,0),x.set(0,0,0),M.set(0,0,0);for(var R=0,j=E.length;R<j;R++){var Z=N[R];if(0!==Z){var he=E[R].vertices;y.addScaledVector(F.subVectors(he[C.a],gi),Z),x.addScaledVector(z.subVectors(he[C.b],ar),Z),M.addScaledVector(le.subVectors(he[C.c],Hi),Z)}}y.add(gi),x.add(ar),M.add(Hi),gi=y,ar=x,Hi=M}if(_n=dt(this,St,h,gi,ar,Hi,Ue)){if(an){var me=an[m];re.copy(me[0]),ve.copy(me[1]),Ce.copy(me[2]),_n.uv=ft(Ue,gi,ar,Hi,re,ve,Ce)}_n.face=C,_n.faceIndex=m,nn.push(_n)}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),(Nl.prototype=Object.create(Dr.prototype)).constructor=Nl,(oa.prototype=Object.create(Dr.prototype)).constructor=oa,(Ua.prototype=Object.create(Cr.prototype)).constructor=Ua,Ua.prototype.isCamera=!0,Ua.prototype.getWorldDirection=function(){var a=new kl;return function(g){var y=g||new on;return this.getWorldQuaternion(a),y.set(0,0,-1).applyQuaternion(a)}}(),Ua.prototype.lookAt=function(){var a=new vs;return function(g){a.lookAt(this.position,g,this.up),this.quaternion.setFromRotationMatrix(a)}}(),Ua.prototype.clone=function(){return(new this.constructor).copy(this)},Ua.prototype.copy=function(a){return Cr.prototype.copy.call(this,a),this.matrixWorldInverse.copy(a.matrixWorldInverse),this.projectionMatrix.copy(a.projectionMatrix),this},xl.prototype=Object.assign(Object.create(Ua.prototype),{constructor:xl,isPerspectiveCamera:!0,copy:function(a){return Ua.prototype.copy.call(this,a),this.fov=a.fov,this.zoom=a.zoom,this.near=a.near,this.far=a.far,this.focus=a.focus,this.aspect=a.aspect,this.view=null===a.view?null:Object.assign({},a.view),this.filmGauge=a.filmGauge,this.filmOffset=a.filmOffset,this},setFocalLength:function(a){var h=.5*this.getFilmHeight()/a;this.fov=2*As.RAD2DEG*Math.atan(h),this.updateProjectionMatrix()},getFocalLength:function(){var a=Math.tan(.5*As.DEG2RAD*this.fov);return.5*this.getFilmHeight()/a},getEffectiveFOV:function(){return 2*As.RAD2DEG*Math.atan(Math.tan(.5*As.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(a,h,g,y,x,M){this.aspect=a/h,this.view={fullWidth:a,fullHeight:h,offsetX:g,offsetY:y,width:x,height:M},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var a=this.near,h=a*Math.tan(.5*As.DEG2RAD*this.fov)/this.zoom,g=2*h,y=this.aspect*g,x=-.5*y,M=this.view;if(null!==M){var F=M.fullWidth,z=M.fullHeight;x+=M.offsetX*y/F,h-=M.offsetY*g/z,y*=M.width/F,g*=M.height/z}var le=this.filmOffset;0!==le&&(x+=a*le/this.getFilmWidth()),this.projectionMatrix.makeFrustum(x,x+y,h-g,h,a,this.far)},toJSON:function(a){var h=Cr.prototype.toJSON.call(this,a);return h.object.fov=this.fov,h.object.zoom=this.zoom,h.object.near=this.near,h.object.far=this.far,h.object.focus=this.focus,h.object.aspect=this.aspect,null!==this.view&&(h.object.view=Object.assign({},this.view)),h.object.filmGauge=this.filmGauge,h.object.filmOffset=this.filmOffset,h}}),Vd.prototype=Object.assign(Object.create(Ua.prototype),{constructor:Vd,isOrthographicCamera:!0,copy:function(a){return Ua.prototype.copy.call(this,a),this.left=a.left,this.right=a.right,this.top=a.top,this.bottom=a.bottom,this.near=a.near,this.far=a.far,this.zoom=a.zoom,this.view=null===a.view?null:Object.assign({},a.view),this},setViewOffset:function(a,h,g,y,x,M){this.view={fullWidth:a,fullHeight:h,offsetX:g,offsetY:y,width:x,height:M},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var a=(this.right-this.left)/(2*this.zoom),h=(this.top-this.bottom)/(2*this.zoom),g=(this.right+this.left)/2,y=(this.top+this.bottom)/2,x=g-a,M=g+a,F=y+h,z=y-h;if(null!==this.view){var le=this.zoom/(this.view.width/this.view.fullWidth),re=this.zoom/(this.view.height/this.view.fullHeight),ve=(this.right-this.left)/this.view.width,Ce=(this.top-this.bottom)/this.view.height;M=(x+=ve*(this.view.offsetX/le))+ve*(this.view.width/le),z=(F-=Ce*(this.view.offsetY/re))-Ce*(this.view.height/re)}this.projectionMatrix.makeOrthographic(x,M,F,z,this.near,this.far)},toJSON:function(a){var h=Cr.prototype.toJSON.call(this,a);return h.object.zoom=this.zoom,h.object.left=this.left,h.object.right=this.right,h.object.top=this.top,h.object.bottom=this.bottom,h.object.near=this.near,h.object.far=this.far,null!==this.view&&(h.object.view=Object.assign({},this.view)),h}});var Wg=0;function jg(a){switch(a){case is:return["Linear","( value )"];case Dg:return["sRGB","( value )"];case yi:return["RGBE","( value )"];case Ps:return["RGBM","( value, 7.0 )"];case To:return["RGBM","( value, 16.0 )"];case vv:return["RGBD","( value, 256.0 )"];case Vp:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+a)}}function Af(a,h){var g=jg(h);return"vec4 "+a+"( vec4 value ) { return "+g[0]+"ToLinear"+g[1]+"; }"}function Pm(a,h){var g=jg(h);return"vec4 "+a+"( vec4 value ) { return LinearTo"+g[0]+g[1]+"; }"}function xf(a,h){var g;switch(h){case yn:g="Linear";break;case ii:g="Reinhard";break;case Li:g="Uncharted2";break;case Cs:g="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+h)}return"vec3 "+a+"( vec3 color ) { return "+g+"ToneMapping( color ); }"}function If(a){return""!==a}function Sf(a,h){return a.replace(/NUM_DIR_LIGHTS/g,h.numDirLights).replace(/NUM_SPOT_LIGHTS/g,h.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,h.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,h.numPointLights).replace(/NUM_HEMI_LIGHTS/g,h.numHemiLights)}function yl(a){return a.replace(/#include +<([\w\d.]+)>/g,function g(y,x){var M=$s[x];if(void 0===M)throw new Error("Can not resolve #include <"+x+">");return yl(M)})}function Xp(a){return a.replace(/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function g(y,x,M,F){for(var z="",le=parseInt(x);le<parseInt(M);le++)z+=F.replace(/\[ i \]/g,"[ "+le+" ]");return z})}function Vy(a,h,g,y){var x=a.context,M=g.extensions,F=g.defines,z=g.__webglShader.vertexShader,le=g.__webglShader.fragmentShader,re="SHADOWMAP_TYPE_BASIC";y.shadowMapType===ne?re="SHADOWMAP_TYPE_PCF":y.shadowMapType===se&&(re="SHADOWMAP_TYPE_PCF_SOFT");var ve="ENVMAP_TYPE_CUBE",Ce="ENVMAP_MODE_REFLECTION",Ve="ENVMAP_BLENDING_MULTIPLY";if(y.envMap){switch(g.envMap.mapping){case ws:case ua:ve="ENVMAP_TYPE_CUBE";break;case ql:case Wf:ve="ENVMAP_TYPE_CUBE_UV";break;case sr:case il:ve="ENVMAP_TYPE_EQUIREC";break;case $l:ve="ENVMAP_TYPE_SPHERE"}switch(g.envMap.mapping){case ua:case il:Ce="ENVMAP_MODE_REFRACTION"}switch(g.combine){case et:Ve="ENVMAP_BLENDING_MULTIPLY";break;case Le:Ve="ENVMAP_BLENDING_MIX";break;case ze:Ve="ENVMAP_BLENDING_ADD"}}var at,xt,Ue=a.gammaFactor>0?a.gammaFactor:1,We=function Ud(a,h,g){return[(a=a||{}).derivatives||h.envMapCubeUV||h.bumpMap||h.normalMap||h.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(a.fragDepth||h.logarithmicDepthBuffer)&&g.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",a.drawBuffers&&g.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(a.shaderTextureLOD||h.envMap)&&g.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(If).join("\n")}(M,y,a.extensions),ft=function $g(a){var h=[];for(var g in a){var y=a[g];!1!==y&&h.push("#define "+g+" "+y)}return h.join("\n")}(F),dt=x.createProgram();g.isRawShaderMaterial?(at=[ft,"\n"].filter(If).join("\n"),xt=[We,ft,"\n"].filter(If).join("\n")):(at=["precision "+y.precision+" float;","precision "+y.precision+" int;","#define SHADER_NAME "+g.__webglShader.name,ft,y.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+Ue,"#define MAX_BONES "+y.maxBones,y.map?"#define USE_MAP":"",y.envMap?"#define USE_ENVMAP":"",y.envMap?"#define "+Ce:"",y.lightMap?"#define USE_LIGHTMAP":"",y.aoMap?"#define USE_AOMAP":"",y.emissiveMap?"#define USE_EMISSIVEMAP":"",y.bumpMap?"#define USE_BUMPMAP":"",y.normalMap?"#define USE_NORMALMAP":"",y.displacementMap&&y.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",y.specularMap?"#define USE_SPECULARMAP":"",y.roughnessMap?"#define USE_ROUGHNESSMAP":"",y.metalnessMap?"#define USE_METALNESSMAP":"",y.alphaMap?"#define USE_ALPHAMAP":"",y.vertexColors?"#define USE_COLOR":"",y.flatShading?"#define FLAT_SHADED":"",y.skinning?"#define USE_SKINNING":"",y.useVertexTexture?"#define BONE_TEXTURE":"",y.morphTargets?"#define USE_MORPHTARGETS":"",y.morphNormals&&!1===y.flatShading?"#define USE_MORPHNORMALS":"",y.doubleSided?"#define DOUBLE_SIDED":"",y.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+y.numClippingPlanes,y.shadowMapEnabled?"#define USE_SHADOWMAP":"",y.shadowMapEnabled?"#define "+re:"",y.sizeAttenuation?"#define USE_SIZEATTENUATION":"",y.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",y.logarithmicDepthBuffer&&a.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(If).join("\n"),xt=[We,"precision "+y.precision+" float;","precision "+y.precision+" int;","#define SHADER_NAME "+g.__webglShader.name,ft,y.alphaTest?"#define ALPHATEST "+y.alphaTest:"","#define GAMMA_FACTOR "+Ue,y.useFog&&y.fog?"#define USE_FOG":"",y.useFog&&y.fogExp?"#define FOG_EXP2":"",y.map?"#define USE_MAP":"",y.envMap?"#define USE_ENVMAP":"",y.envMap?"#define "+ve:"",y.envMap?"#define "+Ce:"",y.envMap?"#define "+Ve:"",y.lightMap?"#define USE_LIGHTMAP":"",y.aoMap?"#define USE_AOMAP":"",y.emissiveMap?"#define USE_EMISSIVEMAP":"",y.bumpMap?"#define USE_BUMPMAP":"",y.normalMap?"#define USE_NORMALMAP":"",y.specularMap?"#define USE_SPECULARMAP":"",y.roughnessMap?"#define USE_ROUGHNESSMAP":"",y.metalnessMap?"#define USE_METALNESSMAP":"",y.alphaMap?"#define USE_ALPHAMAP":"",y.vertexColors?"#define USE_COLOR":"",y.gradientMap?"#define USE_GRADIENTMAP":"",y.flatShading?"#define FLAT_SHADED":"",y.doubleSided?"#define DOUBLE_SIDED":"",y.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+y.numClippingPlanes,"#define UNION_CLIPPING_PLANES "+(y.numClippingPlanes-y.numClipIntersection),y.shadowMapEnabled?"#define USE_SHADOWMAP":"",y.shadowMapEnabled?"#define "+re:"",y.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",y.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",y.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",y.logarithmicDepthBuffer&&a.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",y.envMap&&a.extensions.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",y.toneMapping!==Ht?"#define TONE_MAPPING":"",y.toneMapping!==Ht?$s.tonemapping_pars_fragment:"",y.toneMapping!==Ht?xf("toneMapping",y.toneMapping):"",y.outputEncoding||y.mapEncoding||y.envMapEncoding||y.emissiveMapEncoding?$s.encodings_pars_fragment:"",y.mapEncoding?Af("mapTexelToLinear",y.mapEncoding):"",y.envMapEncoding?Af("envMapTexelToLinear",y.envMapEncoding):"",y.emissiveMapEncoding?Af("emissiveMapTexelToLinear",y.emissiveMapEncoding):"",y.outputEncoding?Pm("linearToOutputTexel",y.outputEncoding):"",y.depthPacking?"#define DEPTH_PACKING "+g.depthPacking:"","\n"].filter(If).join("\n")),z=Sf(z=yl(z),y),le=Sf(le=yl(le),y),g.isShaderMaterial||(z=Xp(z),le=Xp(le));var nn=xt+le,qt=Pv(x,x.VERTEX_SHADER,at+z),gn=Pv(x,x.FRAGMENT_SHADER,nn);x.attachShader(dt,qt),x.attachShader(dt,gn),void 0!==g.index0AttributeName?x.bindAttribLocation(dt,0,g.index0AttributeName):!0===y.morphTargets&&x.bindAttribLocation(dt,0,"position"),x.linkProgram(dt);var di,Jt,un=x.getProgramInfoLog(dt),an=x.getShaderInfoLog(qt),_n=x.getShaderInfoLog(gn),On=!0,Ti=!0;return!1===x.getProgramParameter(dt,x.LINK_STATUS)?(On=!1,console.error("THREE.WebGLProgram: shader error: ",x.getError(),"gl.VALIDATE_STATUS",x.getProgramParameter(dt,x.VALIDATE_STATUS),"gl.getProgramInfoLog",un,an,_n)):""!==un?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",un):(""===an||""===_n)&&(Ti=!1),Ti&&(this.diagnostics={runnable:On,material:g,programLog:un,vertexShader:{log:an,prefix:at},fragmentShader:{log:_n,prefix:xt}}),x.deleteShader(qt),x.deleteShader(gn),this.getUniforms=function(){return void 0===di&&(di=new Za(x,dt,a)),di},this.getAttributes=function(){return void 0===Jt&&(Jt=function Fh(a,h,g){for(var y={},x=a.getProgramParameter(h,a.ACTIVE_ATTRIBUTES),M=0;M<x;M++){var z=a.getActiveAttrib(h,M).name;y[z]=a.getAttribLocation(h,z)}return y}(x,dt)),Jt},this.destroy=function(){x.deleteProgram(dt),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=Wg++,this.code=h,this.usedTimes=1,this.program=dt,this.vertexShader=qt,this.fragmentShader=gn,this}function Uy(a,h){var g=[],y={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},x=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking"];function F(z,le){var re;return z?z.isTexture?re=z.encoding:z.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),re=z.texture.encoding):re=is,re===is&&le&&(re=Vp),re}this.getParameters=function(z,le,re,ve,Ce,Ve){var Ue=y[z.type],We=function M(z){if(h.floatVertexTextures&&z&&z.skeleton&&z.skeleton.useVertexTexture)return 1024;var ve=Math.floor((h.maxVertexUniforms-20)/4);return void 0!==z&&z&&z.isSkinnedMesh&&(ve=Math.min(z.skeleton.bones.length,ve))<z.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+z.skeleton.bones.length+", this GPU supports just "+ve+" (try OpenGL instead of ANGLE)"),ve}(Ve),ft=a.getPrecision();null!==z.precision&&(ft=h.getMaxPrecision(z.precision))!==z.precision&&console.warn("THREE.WebGLProgram.getParameters:",z.precision,"not supported, using",ft,"instead.");var dt=a.getCurrentRenderTarget();return{shaderID:Ue,precision:ft,supportsVertexTextures:h.vertexTextures,outputEncoding:F(dt?dt.texture:null,a.gammaOutput),map:!!z.map,mapEncoding:F(z.map,a.gammaInput),envMap:!!z.envMap,envMapMode:z.envMap&&z.envMap.mapping,envMapEncoding:F(z.envMap,a.gammaInput),envMapCubeUV:!!z.envMap&&(z.envMap.mapping===ql||z.envMap.mapping===Wf),lightMap:!!z.lightMap,aoMap:!!z.aoMap,emissiveMap:!!z.emissiveMap,emissiveMapEncoding:F(z.emissiveMap,a.gammaInput),bumpMap:!!z.bumpMap,normalMap:!!z.normalMap,displacementMap:!!z.displacementMap,roughnessMap:!!z.roughnessMap,metalnessMap:!!z.metalnessMap,specularMap:!!z.specularMap,alphaMap:!!z.alphaMap,gradientMap:!!z.gradientMap,combine:z.combine,vertexColors:z.vertexColors,fog:!!re,useFog:z.fog,fogExp:re&&re.isFogExp2,flatShading:z.shading===_e,sizeAttenuation:z.sizeAttenuation,logarithmicDepthBuffer:h.logarithmicDepthBuffer,skinning:z.skinning,maxBones:We,useVertexTexture:h.floatVertexTextures&&Ve&&Ve.skeleton&&Ve.skeleton.useVertexTexture,morphTargets:z.morphTargets,morphNormals:z.morphNormals,maxMorphTargets:a.maxMorphTargets,maxMorphNormals:a.maxMorphNormals,numDirLights:le.directional.length,numPointLights:le.point.length,numSpotLights:le.spot.length,numRectAreaLights:le.rectArea.length,numHemiLights:le.hemi.length,numClippingPlanes:ve,numClipIntersection:Ce,shadowMapEnabled:a.shadowMap.enabled&&Ve.receiveShadow&&le.shadows.length>0,shadowMapType:a.shadowMap.type,toneMapping:a.toneMapping,physicallyCorrectLights:a.physicallyCorrectLights,premultipliedAlpha:z.premultipliedAlpha,alphaTest:z.alphaTest,doubleSided:z.side===ae,flipSided:z.side===W,depthPacking:void 0!==z.depthPacking&&z.depthPacking}},this.getProgramCode=function(z,le){var re=[];if(le.shaderID?re.push(le.shaderID):(re.push(z.fragmentShader),re.push(z.vertexShader)),void 0!==z.defines)for(var ve in z.defines)re.push(ve),re.push(z.defines[ve]);for(var Ce=0;Ce<x.length;Ce++)re.push(le[x[Ce]]);return re.join()},this.acquireProgram=function(z,le,re){for(var ve,Ce=0,Ve=g.length;Ce<Ve;Ce++){var Ue=g[Ce];if(Ue.code===re){++(ve=Ue).usedTimes;break}}return void 0===ve&&(ve=new Vy(a,re,z,le),g.push(ve)),ve},this.releaseProgram=function(z){if(0==--z.usedTimes){var le=g.indexOf(z);g[le]=g[g.length-1],g.pop(),z.destroy()}},this.programs=g}function Hd(a,h,g){var y={};function x(re){var ve=re.target,Ce=y[ve.id];null!==Ce.index&&F(Ce.index),function z(re){for(var ve in re)F(re[ve])}(Ce.attributes),ve.removeEventListener("dispose",x),delete y[ve.id];var Ve=h.get(ve);Ve.wireframe&&F(Ve.wireframe),h.delete(ve);var Ue=h.get(Ce);Ue.wireframe&&F(Ue.wireframe),h.delete(Ce),g.memory.geometries--}function F(re){var ve=function M(re){return re.isInterleavedBufferAttribute?h.get(re.data).__webglBuffer:h.get(re).__webglBuffer}(re);void 0!==ve&&(a.deleteBuffer(ve),function le(re){h.delete(re.isInterleavedBufferAttribute?re.data:re)}(re))}return{get:function(re){var Ce,ve=re.geometry;return void 0!==y[ve.id]?y[ve.id]:(ve.addEventListener("dispose",x),ve.isBufferGeometry?Ce=ve:ve.isGeometry&&(void 0===ve._bufferGeometry&&(ve._bufferGeometry=(new Dr).setFromObject(re)),Ce=ve._bufferGeometry),y[ve.id]=Ce,g.memory.geometries++,Ce)}}}function ad(a,h,g){var y=new Hd(a,h,g);function M(Ce,Ve){var Ue=Ce.isInterleavedBufferAttribute?Ce.data:Ce,We=h.get(Ue);void 0===We.__webglBuffer?function F(Ce,Ve,Ue){Ce.__webglBuffer=a.createBuffer(),a.bindBuffer(Ue,Ce.__webglBuffer),a.bufferData(Ue,Ve.array,Ve.dynamic?a.DYNAMIC_DRAW:a.STATIC_DRAW);var ft=a.FLOAT,dt=Ve.array;dt instanceof Float32Array?ft=a.FLOAT:dt instanceof Float64Array?console.warn("Unsupported data buffer format: Float64Array"):dt instanceof Uint16Array?ft=a.UNSIGNED_SHORT:dt instanceof Int16Array?ft=a.SHORT:dt instanceof Uint32Array?ft=a.UNSIGNED_INT:dt instanceof Int32Array?ft=a.INT:dt instanceof Int8Array?ft=a.BYTE:dt instanceof Uint8Array&&(ft=a.UNSIGNED_BYTE),Ce.bytesPerElement=dt.BYTES_PER_ELEMENT,Ce.type=ft,Ce.version=Ve.version,Ve.onUploadCallback()}(We,Ue,Ve):We.version!==Ue.version&&function z(Ce,Ve,Ue){a.bindBuffer(Ue,Ce.__webglBuffer),!1===Ve.dynamic?a.bufferData(Ue,Ve.array,a.STATIC_DRAW):-1===Ve.updateRange.count?a.bufferSubData(Ue,0,Ve.array):0===Ve.updateRange.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(a.bufferSubData(Ue,Ve.updateRange.offset*Ve.array.BYTES_PER_ELEMENT,Ve.array.subarray(Ve.updateRange.offset,Ve.updateRange.offset+Ve.updateRange.count)),Ve.updateRange.count=0),Ce.version=Ve.version}(We,Ue,Ve)}return{getAttributeBuffer:function le(Ce){return Ce.isInterleavedBufferAttribute?h.get(Ce.data).__webglBuffer:h.get(Ce).__webglBuffer},getAttributeProperties:function re(Ce){return h.get(Ce.isInterleavedBufferAttribute?Ce.data:Ce)},getWireframeAttribute:function ve(Ce){var Ve=h.get(Ce);if(void 0!==Ve.wireframe)return Ve.wireframe;var xt,Ue=[],We=Ce.index,ft=Ce.attributes,dt=ft.position;if(null!==We)for(var St=0,nn=(xt=We.array).length;St<nn;St+=3)Ue.push(qt=xt[St+0],gn=xt[St+1],gn,un=xt[St+2],un,qt);else for(St=0,nn=(xt=ft.position.array).length/3-1;St<nn;St+=3){var qt,gn,un;Ue.push(qt=St+0,gn=St+1,gn,un=St+2,un,qt)}var _n=new gr(new(dt.count>65535?Uint32Array:Uint16Array)(Ue),1);return M(_n,a.ELEMENT_ARRAY_BUFFER),Ve.wireframe=_n,_n},update:function x(Ce){var Ve=y.get(Ce);Ce.geometry.isGeometry&&Ve.updateFromObject(Ce);var Ue=Ve.index,We=Ve.attributes;for(var ft in null!==Ue&&M(Ue,a.ELEMENT_ARRAY_BUFFER),We)M(We[ft],a.ARRAY_BUFFER);var dt=Ve.morphAttributes;for(var ft in dt)for(var at=dt[ft],xt=0,St=at.length;xt<St;xt++)M(at[xt],a.ARRAY_BUFFER);return Ve}}}function Rv(a,h,g,y,x,M,F){var z=F.memory,le=typeof WebGL2RenderingContext<"u"&&a instanceof WebGL2RenderingContext;function re(Jt,tn){if(Jt.width>tn||Jt.height>tn){var Xn=tn/Math.max(Jt.width,Jt.height),ni=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return ni.width=Math.floor(Jt.width*Xn),ni.height=Math.floor(Jt.height*Xn),ni.getContext("2d").drawImage(Jt,0,0,Jt.width,Jt.height,0,0,ni.width,ni.height),console.warn("THREE.WebGLRenderer: image is too big ("+Jt.width+"x"+Jt.height+"). Resized to "+ni.width+"x"+ni.height,Jt),ni}return Jt}function ve(Jt){return As.isPowerOfTwo(Jt.width)&&As.isPowerOfTwo(Jt.height)}function Ue(Jt){return Jt===Xa||Jt===Rd||Jt===uu?a.NEAREST:a.LINEAR}function We(Jt){var tn=Jt.target;tn.removeEventListener("dispose",We),function dt(Jt){var tn=y.get(Jt);if(Jt.image&&tn.__image__webglTextureCube)a.deleteTexture(tn.__image__webglTextureCube);else{if(void 0===tn.__webglInit)return;a.deleteTexture(tn.__webglTexture)}y.delete(Jt)}(tn),z.textures--}function ft(Jt){var tn=Jt.target;tn.removeEventListener("dispose",ft),function at(Jt){var tn=y.get(Jt),Xn=y.get(Jt.texture);if(Jt){if(void 0!==Xn.__webglTexture&&a.deleteTexture(Xn.__webglTexture),Jt.depthTexture&&Jt.depthTexture.dispose(),Jt.isWebGLRenderTargetCube)for(var ni=0;ni<6;ni++)a.deleteFramebuffer(tn.__webglFramebuffer[ni]),tn.__webglDepthbuffer&&a.deleteRenderbuffer(tn.__webglDepthbuffer[ni]);else a.deleteFramebuffer(tn.__webglFramebuffer),tn.__webglDepthbuffer&&a.deleteRenderbuffer(tn.__webglDepthbuffer);y.delete(Jt.texture),y.delete(Jt)}}(tn),z.textures--}function xt(Jt,tn){var Xn=y.get(Jt);if(Jt.version>0&&Xn.__version!==Jt.version){var ni=Jt.image;if(void 0===ni)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",Jt);else{if(!1!==ni.complete)return void function gn(Jt,tn,Xn){void 0===Jt.__webglInit&&(Jt.__webglInit=!0,tn.addEventListener("dispose",We),Jt.__webglTexture=a.createTexture(),z.textures++),g.activeTexture(a.TEXTURE0+Xn),g.bindTexture(a.TEXTURE_2D,Jt.__webglTexture),a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,tn.flipY),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,tn.premultiplyAlpha),a.pixelStorei(a.UNPACK_ALIGNMENT,tn.unpackAlignment);var ni=re(tn.image,x.maxTextureSize);(function Ve(Jt){return Jt.wrapS!==cc||Jt.wrapT!==cc||Jt.minFilter!==Xa&&Jt.minFilter!==Sa})(tn)&&!1===ve(ni)&&(ni=function Ce(Jt){if(Jt instanceof HTMLImageElement||Jt instanceof HTMLCanvasElement){var tn=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return tn.width=As.nearestPowerOfTwo(Jt.width),tn.height=As.nearestPowerOfTwo(Jt.height),tn.getContext("2d").drawImage(Jt,0,0,tn.width,tn.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+Jt.width+"x"+Jt.height+"). Resized to "+tn.width+"x"+tn.height,Jt),tn}return Jt}(ni));var Mi=ve(ni),Ai=M(tn.format),gi=M(tn.type);qt(a.TEXTURE_2D,tn,Mi);var ar,Hi=tn.mipmaps;if(tn.isDepthTexture){var Yn=a.DEPTH_COMPONENT;if(tn.type===kd){if(!le)throw new Error("Float Depth Texture only supported in WebGL2.0");Yn=a.DEPTH_COMPONENT32F}else le&&(Yn=a.DEPTH_COMPONENT16);tn.format===pt&&Yn===a.DEPTH_COMPONENT&&tn.type!==pf&&tn.type!==gf&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),tn.type=pf,gi=M(tn.type)),tn.format===st&&(Yn=a.DEPTH_STENCIL,tn.type!==mf&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),tn.type=mf,gi=M(tn.type))),g.texImage2D(a.TEXTURE_2D,0,Yn,ni.width,ni.height,0,Ai,gi,null)}else if(tn.isDataTexture)if(Hi.length>0&&Mi){for(var jn=0,f=Hi.length;jn<f;jn++)g.texImage2D(a.TEXTURE_2D,jn,Ai,(ar=Hi[jn]).width,ar.height,0,Ai,gi,ar.data);tn.generateMipmaps=!1}else g.texImage2D(a.TEXTURE_2D,0,Ai,ni.width,ni.height,0,Ai,gi,ni.data);else if(tn.isCompressedTexture)for(jn=0,f=Hi.length;jn<f;jn++)ar=Hi[jn],tn.format!==rl&&tn.format!==Ic?g.getCompressedTextureFormats().indexOf(Ai)>-1?g.compressedTexImage2D(a.TEXTURE_2D,jn,Ai,ar.width,ar.height,0,ar.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):g.texImage2D(a.TEXTURE_2D,jn,Ai,ar.width,ar.height,0,Ai,gi,ar.data);else if(Hi.length>0&&Mi){for(jn=0,f=Hi.length;jn<f;jn++)g.texImage2D(a.TEXTURE_2D,jn,Ai,Ai,gi,ar=Hi[jn]);tn.generateMipmaps=!1}else g.texImage2D(a.TEXTURE_2D,0,Ai,Ai,gi,ni);tn.generateMipmaps&&Mi&&a.generateMipmap(a.TEXTURE_2D),Jt.__version=tn.version,tn.onUpdate&&tn.onUpdate(tn)}(Xn,Jt,tn);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",Jt)}}g.activeTexture(a.TEXTURE0+tn),g.bindTexture(a.TEXTURE_2D,Xn.__webglTexture)}function qt(Jt,tn,Xn){var ni;if(Xn?(a.texParameteri(Jt,a.TEXTURE_WRAP_S,M(tn.wrapS)),a.texParameteri(Jt,a.TEXTURE_WRAP_T,M(tn.wrapT)),a.texParameteri(Jt,a.TEXTURE_MAG_FILTER,M(tn.magFilter)),a.texParameteri(Jt,a.TEXTURE_MIN_FILTER,M(tn.minFilter))):(a.texParameteri(Jt,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(Jt,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),(tn.wrapS!==cc||tn.wrapT!==cc)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",tn),a.texParameteri(Jt,a.TEXTURE_MAG_FILTER,Ue(tn.magFilter)),a.texParameteri(Jt,a.TEXTURE_MIN_FILTER,Ue(tn.minFilter)),tn.minFilter!==Xa&&tn.minFilter!==Sa&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",tn)),ni=h.get("EXT_texture_filter_anisotropic")){if(tn.type===kd&&null===h.get("OES_texture_float_linear")||tn.type===xc&&null===h.get("OES_texture_half_float_linear"))return;(tn.anisotropy>1||y.get(tn).__currentAnisotropy)&&(a.texParameterf(Jt,ni.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(tn.anisotropy,x.getMaxAnisotropy())),y.get(tn).__currentAnisotropy=tn.anisotropy)}}function un(Jt,tn,Xn,ni){var Mi=M(tn.texture.format),Ai=M(tn.texture.type);g.texImage2D(ni,0,Mi,tn.width,tn.height,0,Mi,Ai,null),a.bindFramebuffer(a.FRAMEBUFFER,Jt),a.framebufferTexture2D(a.FRAMEBUFFER,Xn,ni,y.get(tn.texture).__webglTexture,0),a.bindFramebuffer(a.FRAMEBUFFER,null)}function an(Jt,tn){a.bindRenderbuffer(a.RENDERBUFFER,Jt),tn.depthBuffer&&!tn.stencilBuffer?(a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,tn.width,tn.height),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,Jt)):tn.depthBuffer&&tn.stencilBuffer?(a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,tn.width,tn.height),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,Jt)):a.renderbufferStorage(a.RENDERBUFFER,a.RGBA4,tn.width,tn.height),a.bindRenderbuffer(a.RENDERBUFFER,null)}this.setTexture2D=xt,this.setTextureCube=function St(Jt,tn){var Xn=y.get(Jt);if(6===Jt.image.length)if(Jt.version>0&&Xn.__version!==Jt.version){Xn.__image__webglTextureCube||(Jt.addEventListener("dispose",We),Xn.__image__webglTextureCube=a.createTexture(),z.textures++),g.activeTexture(a.TEXTURE0+tn),g.bindTexture(a.TEXTURE_CUBE_MAP,Xn.__image__webglTextureCube),a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,Jt.flipY);for(var ni=Jt&&Jt.isCompressedTexture,Mi=Jt.image[0]&&Jt.image[0].isDataTexture,Ai=[],gi=0;gi<6;gi++)Ai[gi]=ni||Mi?Mi?Jt.image[gi].image:Jt.image[gi]:re(Jt.image[gi],x.maxCubemapSize);var Hi=ve(Ai[0]),Yn=M(Jt.format),jn=M(Jt.type);for(qt(a.TEXTURE_CUBE_MAP,Jt,Hi),gi=0;gi<6;gi++)if(ni)for(var f,c=Ai[gi].mipmaps,d=0,m=c.length;d<m;d++)f=c[d],Jt.format!==rl&&Jt.format!==Ic?g.getCompressedTextureFormats().indexOf(Yn)>-1?g.compressedTexImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+gi,d,Yn,f.width,f.height,0,f.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):g.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+gi,d,Yn,f.width,f.height,0,Yn,jn,f.data);else Mi?g.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+gi,0,Yn,Ai[gi].width,Ai[gi].height,0,Yn,jn,Ai[gi].data):g.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+gi,0,Yn,Yn,jn,Ai[gi]);Jt.generateMipmaps&&Hi&&a.generateMipmap(a.TEXTURE_CUBE_MAP),Xn.__version=Jt.version,Jt.onUpdate&&Jt.onUpdate(Jt)}else g.activeTexture(a.TEXTURE0+tn),g.bindTexture(a.TEXTURE_CUBE_MAP,Xn.__image__webglTextureCube)},this.setTextureCubeDynamic=function nn(Jt,tn){g.activeTexture(a.TEXTURE0+tn),g.bindTexture(a.TEXTURE_CUBE_MAP,y.get(Jt).__webglTexture)},this.setupRenderTarget=function Ti(Jt){var tn=y.get(Jt),Xn=y.get(Jt.texture);Jt.addEventListener("dispose",ft),Xn.__webglTexture=a.createTexture(),z.textures++;var ni=!0===Jt.isWebGLRenderTargetCube,Mi=ve(Jt);if(ni){tn.__webglFramebuffer=[];for(var Ai=0;Ai<6;Ai++)tn.__webglFramebuffer[Ai]=a.createFramebuffer()}else tn.__webglFramebuffer=a.createFramebuffer();if(ni){for(g.bindTexture(a.TEXTURE_CUBE_MAP,Xn.__webglTexture),qt(a.TEXTURE_CUBE_MAP,Jt.texture,Mi),Ai=0;Ai<6;Ai++)un(tn.__webglFramebuffer[Ai],Jt,a.COLOR_ATTACHMENT0,a.TEXTURE_CUBE_MAP_POSITIVE_X+Ai);Jt.texture.generateMipmaps&&Mi&&a.generateMipmap(a.TEXTURE_CUBE_MAP),g.bindTexture(a.TEXTURE_CUBE_MAP,null)}else g.bindTexture(a.TEXTURE_2D,Xn.__webglTexture),qt(a.TEXTURE_2D,Jt.texture,Mi),un(tn.__webglFramebuffer,Jt,a.COLOR_ATTACHMENT0,a.TEXTURE_2D),Jt.texture.generateMipmaps&&Mi&&a.generateMipmap(a.TEXTURE_2D),g.bindTexture(a.TEXTURE_2D,null);Jt.depthBuffer&&function On(Jt){var tn=y.get(Jt),Xn=!0===Jt.isWebGLRenderTargetCube;if(Jt.depthTexture){if(Xn)throw new Error("target.depthTexture not supported in Cube render targets");!function _n(Jt,tn){if(tn&&tn.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported!");if(a.bindFramebuffer(a.FRAMEBUFFER,Jt),!tn.depthTexture||!tn.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!y.get(tn.depthTexture).__webglTexture||tn.depthTexture.image.width!==tn.width||tn.depthTexture.image.height!==tn.height)&&(tn.depthTexture.image.width=tn.width,tn.depthTexture.image.height=tn.height,tn.depthTexture.needsUpdate=!0),xt(tn.depthTexture,0);var ni=y.get(tn.depthTexture).__webglTexture;if(tn.depthTexture.format===pt)a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.TEXTURE_2D,ni,0);else{if(tn.depthTexture.format!==st)throw new Error("Unknown depthTexture format");a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.TEXTURE_2D,ni,0)}}(tn.__webglFramebuffer,Jt)}else if(Xn){tn.__webglDepthbuffer=[];for(var ni=0;ni<6;ni++)a.bindFramebuffer(a.FRAMEBUFFER,tn.__webglFramebuffer[ni]),tn.__webglDepthbuffer[ni]=a.createRenderbuffer(),an(tn.__webglDepthbuffer[ni],Jt)}else a.bindFramebuffer(a.FRAMEBUFFER,tn.__webglFramebuffer),tn.__webglDepthbuffer=a.createRenderbuffer(),an(tn.__webglDepthbuffer,Jt);a.bindFramebuffer(a.FRAMEBUFFER,null)}(Jt)},this.updateRenderTargetMipmap=function di(Jt){var tn=Jt.texture;if(tn.generateMipmaps&&ve(Jt)&&tn.minFilter!==Xa&&tn.minFilter!==Sa){var Xn=Jt&&Jt.isWebGLRenderTargetCube?a.TEXTURE_CUBE_MAP:a.TEXTURE_2D,ni=y.get(tn).__webglTexture;g.bindTexture(Xn,ni),a.generateMipmap(Xn),g.bindTexture(Xn,null)}}}function j_(){var a={};return{get:function(h){var g=h.uuid,y=a[g];return void 0===y&&(a[g]=y={}),y},delete:function(h){delete a[h.uuid]},clear:function(){a={}}}}function kv(a,h,g){var F=new function y(){var ut=!1,Qt=new Yo,Vt=null,An=new Yo;return{setMask:function(sn){Vt!==sn&&!ut&&(a.colorMask(sn,sn,sn,sn),Vt=sn)},setLocked:function(sn){ut=sn},setClear:function(sn,pn,Mn,kn,ti){!0===ti&&(sn*=kn,pn*=kn,Mn*=kn),Qt.set(sn,pn,Mn,kn),!1===An.equals(Qt)&&(a.clearColor(sn,pn,Mn,kn),An.copy(Qt))},reset:function(){ut=!1,Vt=null,An.set(0,0,0,1)}}},z=new function x(){var ut=!1,Qt=null,Vt=null,An=null;return{setTest:function(sn){sn?m(a.DEPTH_TEST):_(a.DEPTH_TEST)},setMask:function(sn){Qt!==sn&&!ut&&(a.depthMask(sn),Qt=sn)},setFunc:function(sn){if(Vt!==sn){if(sn)switch(sn){case fe:a.depthFunc(a.NEVER);break;case wt:a.depthFunc(a.ALWAYS);break;case kt:a.depthFunc(a.LESS);break;case Un:a.depthFunc(a.LEQUAL);break;case ri:a.depthFunc(a.EQUAL);break;case Et:a.depthFunc(a.GEQUAL);break;case Ot:a.depthFunc(a.GREATER);break;case fn:a.depthFunc(a.NOTEQUAL);break;default:a.depthFunc(a.LEQUAL)}else a.depthFunc(a.LEQUAL);Vt=sn}},setLocked:function(sn){ut=sn},setClear:function(sn){An!==sn&&(a.clearDepth(sn),An=sn)},reset:function(){ut=!1,Qt=null,Vt=null,An=null}}},le=new function M(){var ut=!1,Qt=null,Vt=null,An=null,sn=null,pn=null,Mn=null,kn=null,ti=null;return{setTest:function(Dn){Dn?m(a.STENCIL_TEST):_(a.STENCIL_TEST)},setMask:function(Dn){Qt!==Dn&&!ut&&(a.stencilMask(Dn),Qt=Dn)},setFunc:function(Dn,Zn,hi){(Vt!==Dn||An!==Zn||sn!==hi)&&(a.stencilFunc(Dn,Zn,hi),Vt=Dn,An=Zn,sn=hi)},setOp:function(Dn,Zn,hi){(pn!==Dn||Mn!==Zn||kn!==hi)&&(a.stencilOp(Dn,Zn,hi),pn=Dn,Mn=Zn,kn=hi)},setLocked:function(Dn){ut=Dn},setClear:function(Dn){ti!==Dn&&(a.clearStencil(Dn),ti=Dn)},reset:function(){ut=!1,Qt=null,Vt=null,An=null,sn=null,pn=null,Mn=null,kn=null,ti=null}}},re=a.getParameter(a.MAX_VERTEX_ATTRIBS),ve=new Uint8Array(re),Ce=new Uint8Array(re),Ve=new Uint8Array(re),Ue={},We=null,ft=null,dt=null,at=null,xt=null,St=null,nn=null,qt=null,gn=!1,un=null,an=null,_n=null,On=null,Ti=null,di=null,Jt=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),tn=parseFloat(/^WebGL\ ([0-9])/.exec(a.getParameter(a.VERSION))[1]),Xn=parseFloat(tn)>=1,ni=null,Mi={},Ai=new Yo,gi=new Yo;function ar(ut,Qt,Vt){var An=new Uint8Array(4),sn=a.createTexture();a.bindTexture(ut,sn),a.texParameteri(ut,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(ut,a.TEXTURE_MAG_FILTER,a.NEAREST);for(var pn=0;pn<Vt;pn++)a.texImage2D(Qt+pn,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,An);return sn}var Hi={};function m(ut){!0!==Ue[ut]&&(a.enable(ut),Ue[ut]=!0)}function _(ut){!1!==Ue[ut]&&(a.disable(ut),Ue[ut]=!1)}function A(ut,Qt,Vt,An,sn,pn,Mn,kn){ut!==$?m(a.BLEND):_(a.BLEND),(ut!==ft||kn!==gn)&&(ut===pe?kn?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ONE,a.ONE,a.ONE,a.ONE)):(a.blendEquation(a.FUNC_ADD),a.blendFunc(a.SRC_ALPHA,a.ONE)):ut===Be?kn?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ZERO,a.ZERO,a.ONE_MINUS_SRC_COLOR,a.ONE_MINUS_SRC_ALPHA)):(a.blendEquation(a.FUNC_ADD),a.blendFunc(a.ZERO,a.ONE_MINUS_SRC_COLOR)):ut===Me?kn?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ZERO,a.SRC_COLOR,a.ZERO,a.SRC_ALPHA)):(a.blendEquation(a.FUNC_ADD),a.blendFunc(a.ZERO,a.SRC_COLOR)):kn?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ONE,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA)):(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA)),ft=ut,gn=kn),ut===xe?(sn=sn||Qt,pn=pn||Vt,Mn=Mn||An,(Qt!==dt||sn!==St)&&(a.blendEquationSeparate(g(Qt),g(sn)),dt=Qt,St=sn),(Vt!==at||An!==xt||pn!==nn||Mn!==qt)&&(a.blendFuncSeparate(g(Vt),g(An),g(pn),g(Mn)),at=Vt,xt=An,nn=pn,qt=Mn)):(dt=null,at=null,xt=null,St=null,nn=null,qt=null)}function j(ut){z.setFunc(ut)}function De(ut){un!==ut&&(a.frontFace(ut?a.CW:a.CCW),un=ut)}function je(ut){ut!==O?(m(a.CULL_FACE),ut!==an&&a.cullFace(ut===H?a.BACK:ut===L?a.FRONT:a.FRONT_AND_BACK)):_(a.CULL_FACE),an=ut}function Gt(ut){void 0===ut&&(ut=a.TEXTURE0+Jt-1),ni!==ut&&(a.activeTexture(ut),ni=ut)}return Hi[a.TEXTURE_2D]=ar(a.TEXTURE_2D,a.TEXTURE_2D,1),Hi[a.TEXTURE_CUBE_MAP]=ar(a.TEXTURE_CUBE_MAP,a.TEXTURE_CUBE_MAP_POSITIVE_X,6),{buffers:{color:F,depth:z,stencil:le},init:function Yn(){F.setClear(0,0,0,1),z.setClear(1),le.setClear(0),m(a.DEPTH_TEST),j(Un),De(!1),je(H),m(a.CULL_FACE),m(a.BLEND),A(ie)},initAttributes:function jn(){for(var ut=0,Qt=ve.length;ut<Qt;ut++)ve[ut]=0},enableAttribute:function f(ut){ve[ut]=1,0===Ce[ut]&&(a.enableVertexAttribArray(ut),Ce[ut]=1),0!==Ve[ut]&&(h.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(ut,0),Ve[ut]=0)},enableAttributeAndDivisor:function c(ut,Qt,Vt){ve[ut]=1,0===Ce[ut]&&(a.enableVertexAttribArray(ut),Ce[ut]=1),Ve[ut]!==Qt&&(Vt.vertexAttribDivisorANGLE(ut,Qt),Ve[ut]=Qt)},disableUnusedAttributes:function d(){for(var ut=0,Qt=Ce.length;ut!==Qt;++ut)Ce[ut]!==ve[ut]&&(a.disableVertexAttribArray(ut),Ce[ut]=0)},enable:m,disable:_,getCompressedTextureFormats:function C(){if(null===We&&(We=[],h.get("WEBGL_compressed_texture_pvrtc")||h.get("WEBGL_compressed_texture_s3tc")||h.get("WEBGL_compressed_texture_etc1")))for(var ut=a.getParameter(a.COMPRESSED_TEXTURE_FORMATS),Qt=0;Qt<ut.length;Qt++)We.push(ut[Qt]);return We},setBlending:A,setColorWrite:function E(ut){F.setMask(ut)},setDepthTest:function N(ut){z.setTest(ut)},setDepthWrite:function R(ut){z.setMask(ut)},setDepthFunc:j,setStencilTest:function Z(ut){le.setTest(ut)},setStencilWrite:function he(ut){le.setMask(ut)},setStencilFunc:function me(ut,Qt,Vt){le.setFunc(ut,Qt,Vt)},setStencilOp:function ye(ut,Qt,Vt){le.setOp(ut,Qt,Vt)},setFlipSided:De,setCullFace:je,setLineWidth:function qe(ut){ut!==_n&&(Xn&&a.lineWidth(ut),_n=ut)},setPolygonOffset:function ct(ut,Qt,Vt){ut?(m(a.POLYGON_OFFSET_FILL),(On!==Qt||Ti!==Vt)&&(a.polygonOffset(Qt,Vt),On=Qt,Ti=Vt)):_(a.POLYGON_OFFSET_FILL)},getScissorTest:function nt(){return di},setScissorTest:function Ct(ut){di=ut,ut?m(a.SCISSOR_TEST):_(a.SCISSOR_TEST)},activeTexture:Gt,bindTexture:function Wt(ut,Qt){null===ni&&Gt();var Vt=Mi[ni];void 0===Vt&&(Mi[ni]=Vt={type:void 0,texture:void 0}),(Vt.type!==ut||Vt.texture!==Qt)&&(a.bindTexture(ut,Qt||Hi[ut]),Vt.type=ut,Vt.texture=Qt)},compressedTexImage2D:function It(){try{a.compressedTexImage2D.apply(a,arguments)}catch(ut){console.error(ut)}},texImage2D:function jt(){try{a.texImage2D.apply(a,arguments)}catch(ut){console.error(ut)}},scissor:function Dt(ut){!1===Ai.equals(ut)&&(a.scissor(ut.x,ut.y,ut.z,ut.w),Ai.copy(ut))},viewport:function Zt(ut){!1===gi.equals(ut)&&(a.viewport(ut.x,ut.y,ut.z,ut.w),gi.copy(ut))},reset:function Kt(){for(var ut=0;ut<Ce.length;ut++)1===Ce[ut]&&(a.disableVertexAttribArray(ut),Ce[ut]=0);Ue={},We=null,ni=null,Mi={},ft=null,un=null,an=null,F.reset(),z.reset(),le.reset()}}}function gb(a,h,g){var y;function M(nn){if("highp"===nn){if(a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.HIGH_FLOAT).precision>0&&a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT).precision>0)return"highp";nn="mediump"}return"mediump"===nn&&a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.MEDIUM_FLOAT).precision>0&&a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var F=void 0!==g.precision?g.precision:"highp",z=M(F);z!==F&&(console.warn("THREE.WebGLRenderer:",F,"not supported, using",z,"instead."),F=z);var le=!0===g.logarithmicDepthBuffer&&!!h.get("EXT_frag_depth"),re=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),ve=a.getParameter(a.MAX_VERTEX_TEXTURE_IMAGE_UNITS),Ce=a.getParameter(a.MAX_TEXTURE_SIZE),Ve=a.getParameter(a.MAX_CUBE_MAP_TEXTURE_SIZE),Ue=a.getParameter(a.MAX_VERTEX_ATTRIBS),We=a.getParameter(a.MAX_VERTEX_UNIFORM_VECTORS),ft=a.getParameter(a.MAX_VARYING_VECTORS),dt=a.getParameter(a.MAX_FRAGMENT_UNIFORM_VECTORS),at=ve>0,xt=!!h.get("OES_texture_float");return{getMaxAnisotropy:function x(){if(void 0!==y)return y;var nn=h.get("EXT_texture_filter_anisotropic");return y=null!==nn?a.getParameter(nn.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:M,precision:F,logarithmicDepthBuffer:le,maxTextures:re,maxVertexTextures:ve,maxTextureSize:Ce,maxCubemapSize:Ve,maxAttributes:Ue,maxVertexUniforms:We,maxVaryings:ft,maxFragmentUniforms:dt,vertexTextures:at,floatFragmentTextures:xt,floatVertexTextures:at&&xt}}function Yp(a){var h={};return{get:function(g){if(void 0!==h[g])return h[g];var y;switch(g){case"WEBGL_depth_texture":y=a.getExtension("WEBGL_depth_texture")||a.getExtension("MOZ_WEBGL_depth_texture")||a.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":y=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":y=a.getExtension("WEBGL_compressed_texture_s3tc")||a.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":y=a.getExtension("WEBGL_compressed_texture_pvrtc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":y=a.getExtension("WEBGL_compressed_texture_etc1");break;default:y=a.getExtension(g)}return null===y&&console.warn("THREE.WebGLRenderer: "+g+" extension not supported."),h[g]=y,y}}}function ll(){var a=this,h=null,g=0,y=!1,x=!1,M=new bt,F=new Rt,z={value:null,needsUpdate:!1};function le(){z.value!==h&&(z.value=h,z.needsUpdate=g>0),a.numPlanes=g,a.numIntersection=0}function re(ve,Ce,Ve,Ue){var We=null!==ve?ve.length:0,ft=null;if(0!==We){if(ft=z.value,!0!==Ue||null===ft){var dt=Ve+4*We,at=Ce.matrixWorldInverse;F.getNormalMatrix(at),(null===ft||ft.length<dt)&&(ft=new Float32Array(dt));for(var xt=0,St=Ve;xt!==We;++xt,St+=4)M.copy(ve[xt]).applyMatrix4(at,F),M.normal.toArray(ft,St),ft[St+3]=M.constant}z.value=ft,z.needsUpdate=!0}return a.numPlanes=We,ft}this.uniform=z,this.numPlanes=0,this.numIntersection=0,this.init=function(ve,Ce,Ve){var Ue=0!==ve.length||Ce||0!==g||y;return y=Ce,h=re(ve,Ve,0),g=ve.length,Ue},this.beginShadows=function(){x=!0,re(null)},this.endShadows=function(){x=!1,le()},this.setState=function(ve,Ce,Ve,Ue,We,ft){if(!y||null===ve||0===ve.length||x&&!Ve)x?re(null):le();else{var dt=x?0:g,at=4*dt,xt=We.clippingState||null;z.value=xt,xt=re(ve,Ue,at,ft);for(var St=0;St!==at;++St)xt[St]=h[St];We.clippingState=xt,this.numIntersection=Ce?this.numPlanes:0,this.numPlanes+=dt}}}function Gd(a){console.log("THREE.WebGLRenderer",D);var h=void 0!==(a=a||{}).canvas?a.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),g=void 0!==a.context?a.context:null,y=void 0!==a.alpha&&a.alpha,x=void 0===a.depth||a.depth,M=void 0===a.stencil||a.stencil,F=void 0!==a.antialias&&a.antialias,z=void 0===a.premultipliedAlpha||a.premultipliedAlpha,le=void 0!==a.preserveDrawingBuffer&&a.preserveDrawingBuffer,re=[],ve=[],Ce=-1,Ve=[],Ue=-1,We=new Float32Array(8),ft=[],dt=[];this.domElement=h,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=yn,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var E,at=this,xt=null,St=null,nn=null,qt=-1,gn="",un=null,an=new Yo,_n=null,On=new Yo,Ti=0,di=new Xr(0),Jt=0,tn=h.width,Xn=h.height,ni=1,Mi=new Yo(0,0,tn,Xn),Ai=!1,gi=new Yo(0,0,tn,Xn),ar=new No,Hi=new ll,Yn=!1,jn=!1,f=new Pt,c=new vs,d=new on,m=new vs,_=new vs,C={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],shadows:[]},A={calls:0,vertices:0,faces:0,points:0};this.info={render:A,memory:{geometries:0,textures:0},programs:null};try{var N={alpha:y,depth:x,stencil:M,antialias:F,premultipliedAlpha:z,preserveDrawingBuffer:le};if(null===(E=g||h.getContext("webgl",N)||h.getContext("experimental-webgl",N)))throw null!==h.getContext("webgl")?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context.";void 0===E.getShaderPrecisionFormat&&(E.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}),h.addEventListener("webglcontextlost",Vt,!1)}catch(Xe){console.error("THREE.WebGLRenderer: "+Xe)}var R=new Yp(E);R.get("WEBGL_depth_texture"),R.get("OES_texture_float"),R.get("OES_texture_float_linear"),R.get("OES_texture_half_float"),R.get("OES_texture_half_float_linear"),R.get("OES_standard_derivatives"),R.get("ANGLE_instanced_arrays"),R.get("OES_element_index_uint")&&(Dr.MaxIndex=4294967296);var j=new gb(E,R,a),Z=new kv(E,R,Pi),he=new j_,me=new Rv(E,R,Z,he,j,Pi,this.info),ye=new ad(E,he,this.info),De=new Uy(this,j),je=new Ha;this.info.programs=De.programs;var qe=new wf(E,R,A),ct=new hc(E,R,A),nt=new Vd(-1,1,1,-1,0,1),Ct=new xl,Gt=new wa(new oa(2,2),new Va({depthTest:!1,depthWrite:!1,fog:!1})),Wt=Lc.cube,It=new wa(new Nl(5,5,5),new eu({uniforms:Wt.uniforms,vertexShader:Wt.vertexShader,fragmentShader:Wt.fragmentShader,side:W,depthTest:!1,depthWrite:!1,fog:!1}));function jt(){return null===St?ni:1}function Dt(){Z.init(),Z.scissor(an.copy(Mi).multiplyScalar(ni)),Z.viewport(On.copy(gi).multiplyScalar(ni)),Z.buffers.color.setClear(di.r,di.g,di.b,Jt,z)}function Zt(){xt=null,un=null,gn="",qt=-1,Z.reset()}Dt(),this.context=E,this.capabilities=j,this.extensions=R,this.properties=he,this.state=Z;var Kt=new Mo(this,C,ye,j);this.shadowMap=Kt;var Xe,ut=new W_(this,ft),Qt=new $p(this,dt);function Vt(Xe){Xe.preventDefault(),Zt(),Dt(),he.clear()}function An(Xe){var yt=Xe.target;yt.removeEventListener("dispose",An),function sn(Xe){pn(Xe),he.delete(Xe)}(yt)}function pn(Xe){var yt=he.get(Xe).program;Xe.program=void 0,void 0!==yt&&De.releaseProgram(yt)}function kn(Xe,yt){return Math.abs(yt[0])-Math.abs(Xe[0])}function ti(Xe,yt){return Xe.object.renderOrder!==yt.object.renderOrder?Xe.object.renderOrder-yt.object.renderOrder:Xe.material.program&&yt.material.program&&Xe.material.program!==yt.material.program?Xe.material.program.id-yt.material.program.id:Xe.material.id!==yt.material.id?Xe.material.id-yt.material.id:Xe.z!==yt.z?Xe.z-yt.z:Xe.id-yt.id}function Dn(Xe,yt){return Xe.object.renderOrder!==yt.object.renderOrder?Xe.object.renderOrder-yt.object.renderOrder:Xe.z!==yt.z?yt.z-Xe.z:Xe.id-yt.id}function Zn(Xe,yt,dn,bn,wn){var nr,cr;dn.transparent?(nr=Ve,cr=++Ue):(nr=ve,cr=++Ce);var oi=nr[cr];void 0!==oi?(oi.id=Xe.id,oi.object=Xe,oi.geometry=yt,oi.material=dn,oi.z=d.z,oi.group=wn):nr.push(oi={id:Xe.id,object:Xe,geometry:yt,material:dn,z:d.z,group:wn})}function mi(Xe){if(!ar.intersectsSphere(Xe))return!1;var yt=Hi.numPlanes;if(0===yt)return!0;var dn=at.clippingPlanes,bn=Xe.center,wn=-Xe.radius,nr=0;do{if(dn[nr].distanceToPoint(bn)<wn)return!1}while(++nr!==yt);return!0}function fi(Xe,yt){if(!1!==Xe.visible){if(0!=(Xe.layers.mask&yt.layers.mask))if(Xe.isLight)re.push(Xe);else if(Xe.isSprite)(!1===Xe.frustumCulled||!0===function xi(Xe){return f.center.set(0,0,0),f.radius=.7071067811865476,f.applyMatrix4(Xe.matrixWorld),mi(f)}(Xe))&&ft.push(Xe);else if(Xe.isLensFlare)dt.push(Xe);else if(Xe.isImmediateRenderObject)!0===at.sortObjects&&(d.setFromMatrixPosition(Xe.matrixWorld),d.applyProjection(c)),Zn(Xe,null,Xe.material,0,null);else if((Xe.isMesh||Xe.isLine||Xe.isPoints)&&(Xe.isSkinnedMesh&&Xe.skeleton.update(),!1===Xe.frustumCulled||!0===function hi(Xe){var yt=Xe.geometry;return null===yt.boundingSphere&&yt.computeBoundingSphere(),f.copy(yt.boundingSphere).applyMatrix4(Xe.matrixWorld),mi(f)}(Xe))){var bn=Xe.material;if(!0===bn.visible){!0===at.sortObjects&&(d.setFromMatrixPosition(Xe.matrixWorld),d.applyProjection(c));var wn=ye.update(Xe);if(bn.isMultiMaterial)for(var nr=wn.groups,cr=bn.materials,oi=0,Br=nr.length;oi<Br;oi++){var Vi=nr[oi],Ui=cr[Vi.materialIndex];!0===Ui.visible&&Zn(Xe,wn,Ui,0,Vi)}else Zn(Xe,wn,bn,0,null)}}var tr=Xe.children;for(oi=0,Br=tr.length;oi<Br;oi++)fi(tr[oi],yt)}}function Pn(Xe,yt,dn,bn){for(var wn=0,nr=Xe.length;wn<nr;wn++){var cr=Xe[wn],oi=cr.object,Br=cr.geometry,Vi=void 0===bn?cr.material:bn,Ui=cr.group;if(oi.modelViewMatrix.multiplyMatrices(dn.matrixWorldInverse,oi.matrixWorld),oi.normalMatrix.getNormalMatrix(oi.modelViewMatrix),oi.onBeforeRender(at,yt,dn,Br,Vi,Ui),oi.isImmediateRenderObject){Si(Vi);var tr=Qi(dn,yt.fog,Vi,oi);gn="",oi.render(function(eo){at.renderBufferImmediate(eo,tr,Vi)})}else at.renderBufferDirect(dn,yt.fog,Br,Vi,oi,Ui);oi.onAfterRender(at,yt,dn,Br,Vi,Ui)}}function Si(Xe){Xe.side===ae?Z.disable(E.CULL_FACE):Z.enable(E.CULL_FACE),Z.setFlipSided(Xe.side===W),!0===Xe.transparent?Z.setBlending(Xe.blending,Xe.blendEquation,Xe.blendSrc,Xe.blendDst,Xe.blendEquationAlpha,Xe.blendSrcAlpha,Xe.blendDstAlpha,Xe.premultipliedAlpha):Z.setBlending($),Z.setDepthFunc(Xe.depthFunc),Z.setDepthTest(Xe.depthTest),Z.setDepthWrite(Xe.depthWrite),Z.setColorWrite(Xe.colorWrite),Z.setPolygonOffset(Xe.polygonOffset,Xe.polygonOffsetFactor,Xe.polygonOffsetUnits)}function Qi(Xe,yt,dn,bn){Ti=0;var wn=he.get(dn);Yn&&(jn||Xe!==un)&&Hi.setState(dn.clippingPlanes,dn.clipIntersection,dn.clipShadows,Xe,wn,Xe===un&&dn.id===qt),!1===dn.needsUpdate&&(void 0===wn.program||dn.fog&&wn.fog!==yt||dn.lights&&wn.lightsHash!==C.hash||void 0!==wn.numClippingPlanes&&(wn.numClippingPlanes!==Hi.numPlanes||wn.numIntersection!==Hi.numIntersection))&&(dn.needsUpdate=!0),dn.needsUpdate&&(function ai(Xe,yt,dn){var bn=he.get(Xe),wn=De.getParameters(Xe,C,yt,Hi.numPlanes,Hi.numIntersection,dn),nr=De.getProgramCode(Xe,wn),cr=bn.program,oi=!0;if(void 0===cr)Xe.addEventListener("dispose",An);else if(cr.code!==nr)pn(Xe);else{if(void 0!==wn.shaderID)return;oi=!1}if(oi){if(wn.shaderID){var Br=Lc[wn.shaderID];bn.__webglShader={name:Xe.type,uniforms:sl.clone(Br.uniforms),vertexShader:Br.vertexShader,fragmentShader:Br.fragmentShader}}else bn.__webglShader={name:Xe.type,uniforms:Xe.uniforms,vertexShader:Xe.vertexShader,fragmentShader:Xe.fragmentShader};Xe.__webglShader=bn.__webglShader,cr=De.acquireProgram(Xe,wn,nr),bn.program=cr,Xe.program=cr}var Vi=cr.getAttributes();if(Xe.morphTargets){Xe.numSupportedMorphTargets=0;for(var Ui=0;Ui<at.maxMorphTargets;Ui++)Vi["morphTarget"+Ui]>=0&&Xe.numSupportedMorphTargets++}if(Xe.morphNormals)for(Xe.numSupportedMorphNormals=0,Ui=0;Ui<at.maxMorphNormals;Ui++)Vi["morphNormal"+Ui]>=0&&Xe.numSupportedMorphNormals++;var tr=bn.__webglShader.uniforms;(!Xe.isShaderMaterial&&!Xe.isRawShaderMaterial||!0===Xe.clipping)&&(bn.numClippingPlanes=Hi.numPlanes,bn.numIntersection=Hi.numIntersection,tr.clippingPlanes=Hi.uniform),bn.fog=yt,bn.lightsHash=C.hash,Xe.lights&&(tr.ambientLightColor.value=C.ambient,tr.directionalLights.value=C.directional,tr.spotLights.value=C.spot,tr.rectAreaLights.value=C.rectArea,tr.pointLights.value=C.point,tr.hemisphereLights.value=C.hemi,tr.directionalShadowMap.value=C.directionalShadowMap,tr.directionalShadowMatrix.value=C.directionalShadowMatrix,tr.spotShadowMap.value=C.spotShadowMap,tr.spotShadowMatrix.value=C.spotShadowMatrix,tr.pointShadowMap.value=C.pointShadowMap,tr.pointShadowMatrix.value=C.pointShadowMatrix);var eo=bn.program.getUniforms(),fo=Za.seqWithValue(eo.seq,tr);bn.uniformsList=fo}(dn,yt,bn),dn.needsUpdate=!1);var cr=!1,oi=!1,Br=!1,Vi=wn.program,Ui=Vi.getUniforms(),tr=wn.__webglShader.uniforms;if(Vi.id!==xt&&(E.useProgram(Vi.program),xt=Vi.id,cr=!0,oi=!0,Br=!0),dn.id!==qt&&(qt=dn.id,oi=!0),cr||Xe!==un){if(Ui.set(E,Xe,"projectionMatrix"),j.logarithmicDepthBuffer&&Ui.setValue(E,"logDepthBufFC",2/(Math.log(Xe.far+1)/Math.LN2)),Xe!==un&&(un=Xe,oi=!0,Br=!0),dn.isShaderMaterial||dn.isMeshPhongMaterial||dn.isMeshStandardMaterial||dn.envMap){var eo=Ui.map.cameraPosition;void 0!==eo&&eo.setValue(E,d.setFromMatrixPosition(Xe.matrixWorld))}(dn.isMeshPhongMaterial||dn.isMeshLambertMaterial||dn.isMeshBasicMaterial||dn.isMeshStandardMaterial||dn.isShaderMaterial||dn.skinning)&&Ui.setValue(E,"viewMatrix",Xe.matrixWorldInverse),Ui.set(E,at,"toneMappingExposure"),Ui.set(E,at,"toneMappingWhitePoint")}if(dn.skinning){Ui.setOptional(E,bn,"bindMatrix"),Ui.setOptional(E,bn,"bindMatrixInverse");var fo=bn.skeleton;fo&&(j.floatVertexTextures&&fo.useVertexTexture?(Ui.set(E,fo,"boneTexture"),Ui.set(E,fo,"boneTextureWidth"),Ui.set(E,fo,"boneTextureHeight")):Ui.setOptional(E,fo,"boneMatrices"))}return oi&&(dn.lights&&function Jr(Xe,yt){Xe.ambientLightColor.needsUpdate=yt,Xe.directionalLights.needsUpdate=yt,Xe.pointLights.needsUpdate=yt,Xe.spotLights.needsUpdate=yt,Xe.rectAreaLights.needsUpdate=yt,Xe.hemisphereLights.needsUpdate=yt}(tr,Br),yt&&dn.fog&&function or(Xe,yt){Xe.fogColor.value=yt.color,yt.isFog?(Xe.fogNear.value=yt.near,Xe.fogFar.value=yt.far):yt.isFogExp2&&(Xe.fogDensity.value=yt.density)}(tr,yt),(dn.isMeshBasicMaterial||dn.isMeshLambertMaterial||dn.isMeshPhongMaterial||dn.isMeshStandardMaterial||dn.isMeshNormalMaterial||dn.isMeshDepthMaterial)&&function lr(Xe,yt){var dn;if(Xe.opacity.value=yt.opacity,Xe.diffuse.value=yt.color,yt.emissive&&Xe.emissive.value.copy(yt.emissive).multiplyScalar(yt.emissiveIntensity),Xe.map.value=yt.map,Xe.specularMap.value=yt.specularMap,Xe.alphaMap.value=yt.alphaMap,yt.lightMap&&(Xe.lightMap.value=yt.lightMap,Xe.lightMapIntensity.value=yt.lightMapIntensity),yt.aoMap&&(Xe.aoMap.value=yt.aoMap,Xe.aoMapIntensity.value=yt.aoMapIntensity),yt.map?dn=yt.map:yt.specularMap?dn=yt.specularMap:yt.displacementMap?dn=yt.displacementMap:yt.normalMap?dn=yt.normalMap:yt.bumpMap?dn=yt.bumpMap:yt.roughnessMap?dn=yt.roughnessMap:yt.metalnessMap?dn=yt.metalnessMap:yt.alphaMap?dn=yt.alphaMap:yt.emissiveMap&&(dn=yt.emissiveMap),void 0!==dn){dn.isWebGLRenderTarget&&(dn=dn.texture);var bn=dn.offset,wn=dn.repeat;Xe.offsetRepeat.value.set(bn.x,bn.y,wn.x,wn.y)}Xe.envMap.value=yt.envMap,Xe.flipEnvMap.value=yt.envMap&&yt.envMap.isCubeTexture?-1:1,Xe.reflectivity.value=yt.reflectivity,Xe.refractionRatio.value=yt.refractionRatio}(tr,dn),dn.isLineBasicMaterial?Hr(tr,dn):dn.isLineDashedMaterial?(Hr(tr,dn),function Zr(Xe,yt){Xe.dashSize.value=yt.dashSize,Xe.totalSize.value=yt.dashSize+yt.gapSize,Xe.scale.value=yt.scale}(tr,dn)):dn.isPointsMaterial?function mr(Xe,yt){if(Xe.diffuse.value=yt.color,Xe.opacity.value=yt.opacity,Xe.size.value=yt.size*ni,Xe.scale.value=.5*Xn,Xe.map.value=yt.map,null!==yt.map){var dn=yt.map.offset,bn=yt.map.repeat;Xe.offsetRepeat.value.set(dn.x,dn.y,bn.x,bn.y)}}(tr,dn):dn.isMeshLambertMaterial?function Yr(Xe,yt){yt.emissiveMap&&(Xe.emissiveMap.value=yt.emissiveMap)}(tr,dn):dn.isMeshToonMaterial?function br(Xe,yt){ki(Xe,yt),yt.gradientMap&&(Xe.gradientMap.value=yt.gradientMap)}(tr,dn):dn.isMeshPhongMaterial?ki(tr,dn):dn.isMeshPhysicalMaterial?function Qr(Xe,yt){Xe.clearCoat.value=yt.clearCoat,Xe.clearCoatRoughness.value=yt.clearCoatRoughness,wr(Xe,yt)}(tr,dn):dn.isMeshStandardMaterial?wr(tr,dn):dn.isMeshDepthMaterial?dn.displacementMap&&(tr.displacementMap.value=dn.displacementMap,tr.displacementScale.value=dn.displacementScale,tr.displacementBias.value=dn.displacementBias):dn.isMeshNormalMaterial&&function Bs(Xe,yt){yt.bumpMap&&(Xe.bumpMap.value=yt.bumpMap,Xe.bumpScale.value=yt.bumpScale),yt.normalMap&&(Xe.normalMap.value=yt.normalMap,Xe.normalScale.value.copy(yt.normalScale)),yt.displacementMap&&(Xe.displacementMap.value=yt.displacementMap,Xe.displacementScale.value=yt.displacementScale,Xe.displacementBias.value=yt.displacementBias)}(tr,dn),void 0!==tr.ltcMat&&(tr.ltcMat.value=THREE.UniformsLib.LTC_MAT_TEXTURE),void 0!==tr.ltcMag&&(tr.ltcMag.value=THREE.UniformsLib.LTC_MAG_TEXTURE),Za.upload(E,wn.uniformsList,tr,at)),Ui.set(E,bn,"modelViewMatrix"),Ui.set(E,bn,"normalMatrix"),Ui.setValue(E,"modelMatrix",bn.matrixWorld),Vi}function Hr(Xe,yt){Xe.diffuse.value=yt.color,Xe.opacity.value=yt.opacity}function ki(Xe,yt){Xe.specular.value=yt.specular,Xe.shininess.value=Math.max(yt.shininess,1e-4),yt.emissiveMap&&(Xe.emissiveMap.value=yt.emissiveMap),yt.bumpMap&&(Xe.bumpMap.value=yt.bumpMap,Xe.bumpScale.value=yt.bumpScale),yt.normalMap&&(Xe.normalMap.value=yt.normalMap,Xe.normalScale.value.copy(yt.normalScale)),yt.displacementMap&&(Xe.displacementMap.value=yt.displacementMap,Xe.displacementScale.value=yt.displacementScale,Xe.displacementBias.value=yt.displacementBias)}function wr(Xe,yt){Xe.roughness.value=yt.roughness,Xe.metalness.value=yt.metalness,yt.roughnessMap&&(Xe.roughnessMap.value=yt.roughnessMap),yt.metalnessMap&&(Xe.metalnessMap.value=yt.metalnessMap),yt.emissiveMap&&(Xe.emissiveMap.value=yt.emissiveMap),yt.bumpMap&&(Xe.bumpMap.value=yt.bumpMap,Xe.bumpScale.value=yt.bumpScale),yt.normalMap&&(Xe.normalMap.value=yt.normalMap,Xe.normalScale.value.copy(yt.normalScale)),yt.displacementMap&&(Xe.displacementMap.value=yt.displacementMap,Xe.displacementScale.value=yt.displacementScale,Xe.displacementBias.value=yt.displacementBias),yt.envMap&&(Xe.envMapIntensity.value=yt.envMapIntensity)}function Pi(Xe){var yt;if(Xe===ih)return E.REPEAT;if(Xe===cc)return E.CLAMP_TO_EDGE;if(Xe===Sh)return E.MIRRORED_REPEAT;if(Xe===Xa)return E.NEAREST;if(Xe===Rd)return E.NEAREST_MIPMAP_NEAREST;if(Xe===uu)return E.NEAREST_MIPMAP_LINEAR;if(Xe===Sa)return E.LINEAR;if(Xe===Eh)return E.LINEAR_MIPMAP_NEAREST;if(Xe===Ou)return E.LINEAR_MIPMAP_LINEAR;if(Xe===ff)return E.UNSIGNED_BYTE;if(Xe===Mg)return E.UNSIGNED_SHORT_4_4_4_4;if(Xe===Th)return E.UNSIGNED_SHORT_5_5_5_1;if(Xe===io)return E.UNSIGNED_SHORT_5_6_5;if(Xe===nd)return E.BYTE;if(Xe===pl)return E.SHORT;if(Xe===pf)return E.UNSIGNED_SHORT;if(Xe===rh)return E.INT;if(Xe===gf)return E.UNSIGNED_INT;if(Xe===kd)return E.FLOAT;if(Xe===xc&&null!==(yt=R.get("OES_texture_half_float")))return yt.HALF_FLOAT_OES;if(Xe===gl)return E.ALPHA;if(Xe===Ic)return E.RGB;if(Xe===rl)return E.RGBA;if(Xe===$f)return E.LUMINANCE;if(Xe===id)return E.LUMINANCE_ALPHA;if(Xe===pt)return E.DEPTH_COMPONENT;if(Xe===st)return E.DEPTH_STENCIL;if(Xe===Pe)return E.FUNC_ADD;if(Xe===ot)return E.FUNC_SUBTRACT;if(Xe===Fe)return E.FUNC_REVERSE_SUBTRACT;if(Xe===vt)return E.ZERO;if(Xe===vn)return E.ONE;if(Xe===Ne)return E.SRC_COLOR;if(Xe===ht)return E.ONE_MINUS_SRC_COLOR;if(Xe===rt)return E.SRC_ALPHA;if(Xe===Ge)return E.ONE_MINUS_SRC_ALPHA;if(Xe===_t)return E.DST_ALPHA;if(Xe===At)return E.ONE_MINUS_DST_ALPHA;if(Xe===Lt)return E.DST_COLOR;if(Xe===Ut)return E.ONE_MINUS_DST_COLOR;if(Xe===Oe)return E.SRC_ALPHA_SATURATE;if((Xe===ge||Xe===Re||Xe===tt||Xe===Mt)&&null!==(yt=R.get("WEBGL_compressed_texture_s3tc"))){if(Xe===ge)return yt.COMPRESSED_RGB_S3TC_DXT1_EXT;if(Xe===Re)return yt.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(Xe===tt)return yt.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(Xe===Mt)return yt.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((Xe===Yt||Xe===Tn||Xe===wi||Xe===si)&&null!==(yt=R.get("WEBGL_compressed_texture_pvrtc"))){if(Xe===Yt)return yt.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(Xe===Tn)return yt.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(Xe===wi)return yt.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(Xe===si)return yt.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(Xe===pi&&null!==(yt=R.get("WEBGL_compressed_texture_etc1")))return yt.COMPRESSED_RGB_ETC1_WEBGL;if((Xe===Ye||Xe===lt)&&null!==(yt=R.get("EXT_blend_minmax"))){if(Xe===Ye)return yt.MIN_EXT;if(Xe===lt)return yt.MAX_EXT}return Xe===mf&&null!==(yt=R.get("WEBGL_depth_texture"))?yt.UNSIGNED_INT_24_8_WEBGL:0}this.getContext=function(){return E},this.getContextAttributes=function(){return E.getContextAttributes()},this.forceContextLoss=function(){R.get("WEBGL_lose_context").loseContext()},this.getMaxAnisotropy=function(){return j.getMaxAnisotropy()},this.getPrecision=function(){return j.precision},this.getPixelRatio=function(){return ni},this.setPixelRatio=function(Xe){void 0!==Xe&&(ni=Xe,this.setSize(gi.z,gi.w,!1))},this.getSize=function(){return{width:tn,height:Xn}},this.setSize=function(Xe,yt,dn){tn=Xe,Xn=yt,h.width=Xe*ni,h.height=yt*ni,!1!==dn&&(h.style.width=Xe+"px",h.style.height=yt+"px"),this.setViewport(0,0,Xe,yt)},this.setViewport=function(Xe,yt,dn,bn){Z.viewport(gi.set(Xe,yt,dn,bn))},this.setScissor=function(Xe,yt,dn,bn){Z.scissor(Mi.set(Xe,yt,dn,bn))},this.setScissorTest=function(Xe){Z.setScissorTest(Ai=Xe)},this.getClearColor=function(){return di},this.setClearColor=function(Xe,yt){di.set(Xe),Z.buffers.color.setClear(di.r,di.g,di.b,Jt=void 0!==yt?yt:1,z)},this.getClearAlpha=function(){return Jt},this.setClearAlpha=function(Xe){Z.buffers.color.setClear(di.r,di.g,di.b,Jt=Xe,z)},this.clear=function(Xe,yt,dn){var bn=0;(void 0===Xe||Xe)&&(bn|=E.COLOR_BUFFER_BIT),(void 0===yt||yt)&&(bn|=E.DEPTH_BUFFER_BIT),(void 0===dn||dn)&&(bn|=E.STENCIL_BUFFER_BIT),E.clear(bn)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(Xe,yt,dn,bn){this.setRenderTarget(Xe),this.clear(yt,dn,bn)},this.resetGLState=Zt,this.dispose=function(){Ve=[],Ue=-1,ve=[],Ce=-1,h.removeEventListener("webglcontextlost",Vt,!1)},this.renderBufferImmediate=function(Xe,yt,dn){Z.initAttributes();var bn=he.get(Xe);Xe.hasPositions&&!bn.position&&(bn.position=E.createBuffer()),Xe.hasNormals&&!bn.normal&&(bn.normal=E.createBuffer()),Xe.hasUvs&&!bn.uv&&(bn.uv=E.createBuffer()),Xe.hasColors&&!bn.color&&(bn.color=E.createBuffer());var wn=yt.getAttributes();if(Xe.hasPositions&&(E.bindBuffer(E.ARRAY_BUFFER,bn.position),E.bufferData(E.ARRAY_BUFFER,Xe.positionArray,E.DYNAMIC_DRAW),Z.enableAttribute(wn.position),E.vertexAttribPointer(wn.position,3,E.FLOAT,!1,0,0)),Xe.hasNormals){if(E.bindBuffer(E.ARRAY_BUFFER,bn.normal),!dn.isMeshPhongMaterial&&!dn.isMeshStandardMaterial&&!dn.isMeshNormalMaterial&&dn.shading===_e)for(var nr=0,cr=3*Xe.count;nr<cr;nr+=9){var oi=Xe.normalArray,Br=(oi[nr+0]+oi[nr+3]+oi[nr+6])/3,Vi=(oi[nr+1]+oi[nr+4]+oi[nr+7])/3,Ui=(oi[nr+2]+oi[nr+5]+oi[nr+8])/3;oi[nr+0]=Br,oi[nr+1]=Vi,oi[nr+2]=Ui,oi[nr+3]=Br,oi[nr+4]=Vi,oi[nr+5]=Ui,oi[nr+6]=Br,oi[nr+7]=Vi,oi[nr+8]=Ui}E.bufferData(E.ARRAY_BUFFER,Xe.normalArray,E.DYNAMIC_DRAW),Z.enableAttribute(wn.normal),E.vertexAttribPointer(wn.normal,3,E.FLOAT,!1,0,0)}Xe.hasUvs&&dn.map&&(E.bindBuffer(E.ARRAY_BUFFER,bn.uv),E.bufferData(E.ARRAY_BUFFER,Xe.uvArray,E.DYNAMIC_DRAW),Z.enableAttribute(wn.uv),E.vertexAttribPointer(wn.uv,2,E.FLOAT,!1,0,0)),Xe.hasColors&&dn.vertexColors!==te&&(E.bindBuffer(E.ARRAY_BUFFER,bn.color),E.bufferData(E.ARRAY_BUFFER,Xe.colorArray,E.DYNAMIC_DRAW),Z.enableAttribute(wn.color),E.vertexAttribPointer(wn.color,3,E.FLOAT,!1,0,0)),Z.disableUnusedAttributes(),E.drawArrays(E.TRIANGLES,0,Xe.count),Xe.count=0},this.renderBufferDirect=function(Xe,yt,dn,bn,wn,nr){Si(bn);var cr=Qi(Xe,yt,bn,wn),oi=!1,Br=dn.id+"_"+cr.id+"_"+bn.wireframe;Br!==gn&&(gn=Br,oi=!0);var Vi=wn.morphTargetInfluences;if(void 0!==Vi){for(var Ui=[],tr=0,eo=Vi.length;tr<eo;tr++)Ui.push([fo=Vi[tr],tr]);Ui.sort(kn),Ui.length>8&&(Ui.length=8);var Na=dn.morphAttributes;for(tr=0,eo=Ui.length;tr<eo;tr++){var fo;if(We[tr]=(fo=Ui[tr])[0],0!==fo[0]){var Lo=fo[1];!0===bn.morphTargets&&Na.position&&dn.addAttribute("morphTarget"+tr,Na.position[Lo]),!0===bn.morphNormals&&Na.normal&&dn.addAttribute("morphNormal"+tr,Na.normal[Lo])}else!0===bn.morphTargets&&dn.removeAttribute("morphTarget"+tr),!0===bn.morphNormals&&dn.removeAttribute("morphNormal"+tr)}tr=Ui.length;for(var $o=We.length;tr<$o;tr++)We[tr]=0;cr.getUniforms().setValue(E,"morphTargetInfluences",We),oi=!0}Lo=dn.index;var Wa,Qo=dn.attributes.position,Er=1;!0===bn.wireframe&&(Lo=ye.getWireframeAttribute(dn),Er=2),null!==Lo?(Wa=ct).setIndex(Lo):Wa=qe,oi&&(function Mn(Xe,yt,dn,bn){var wn;if(dn&&dn.isInstancedBufferGeometry&&null===(wn=R.get("ANGLE_instanced_arrays")))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{void 0===bn&&(bn=0),Z.initAttributes();var nr=dn.attributes,cr=yt.getAttributes(),oi=Xe.defaultAttributeValues;for(var Br in cr){var Vi=cr[Br];if(Vi>=0){var Ui=nr[Br];if(void 0!==Ui){var tr=Ui.normalized,eo=Ui.itemSize,fo=ye.getAttributeProperties(Ui),Na=fo.__webglBuffer,$o=fo.type,Lo=fo.bytesPerElement;if(Ui.isInterleavedBufferAttribute){var Qo=Ui.data,Er=Qo.stride,Wa=Ui.offset;Qo&&Qo.isInstancedInterleavedBuffer?(Z.enableAttributeAndDivisor(Vi,Qo.meshPerAttribute,wn),void 0===dn.maxInstancedCount&&(dn.maxInstancedCount=Qo.meshPerAttribute*Qo.count)):Z.enableAttribute(Vi),E.bindBuffer(E.ARRAY_BUFFER,Na),E.vertexAttribPointer(Vi,eo,$o,tr,Er*Lo,(bn*Er+Wa)*Lo)}else Ui.isInstancedBufferAttribute?(Z.enableAttributeAndDivisor(Vi,Ui.meshPerAttribute,wn),void 0===dn.maxInstancedCount&&(dn.maxInstancedCount=Ui.meshPerAttribute*Ui.count)):Z.enableAttribute(Vi),E.bindBuffer(E.ARRAY_BUFFER,Na),E.vertexAttribPointer(Vi,eo,$o,tr,0,bn*eo*Lo)}else if(void 0!==oi){var Hl=oi[Br];if(void 0!==Hl)switch(Hl.length){case 2:E.vertexAttrib2fv(Vi,Hl);break;case 3:E.vertexAttrib3fv(Vi,Hl);break;case 4:E.vertexAttrib4fv(Vi,Hl);break;default:E.vertexAttrib1fv(Vi,Hl)}}}}Z.disableUnusedAttributes()}}(bn,cr,dn),null!==Lo&&E.bindBuffer(E.ELEMENT_ARRAY_BUFFER,ye.getAttributeBuffer(Lo)));var Hl=0;null!==Lo?Hl=Lo.count:void 0!==Qo&&(Hl=Qo.count);var Gl=dn.drawRange.start*Er,Bc=dn.drawRange.count*Er,Cp=null!==nr?nr.start*Er:0,Nf=null!==nr?nr.count*Er:1/0,zc=Math.max(Gl,Cp),ic=Math.min(Hl,Gl+Bc,Cp+Nf)-1,Vc=Math.max(0,ic-zc+1);if(0!==Vc){if(wn.isMesh)if(!0===bn.wireframe)Z.setLineWidth(bn.wireframeLinewidth*jt()),Wa.setMode(E.LINES);else switch(wn.drawMode){case Ya:Wa.setMode(E.TRIANGLES);break;case Fu:Wa.setMode(E.TRIANGLE_STRIP);break;case cs:Wa.setMode(E.TRIANGLE_FAN)}else if(wn.isLine){var wp=bn.linewidth;void 0===wp&&(wp=1),Z.setLineWidth(wp*jt()),Wa.setMode(wn.isLineSegments?E.LINES:E.LINE_STRIP)}else wn.isPoints&&Wa.setMode(E.POINTS);dn&&dn.isInstancedBufferGeometry?dn.maxInstancedCount>0&&Wa.renderInstances(dn,zc,Vc):Wa.render(zc,Vc)}},this.render=function(Xe,yt,dn,bn){if(void 0===yt||!0===yt.isCamera){gn="",qt=-1,un=null,!0===Xe.autoUpdate&&Xe.updateMatrixWorld(),null===yt.parent&&yt.updateMatrixWorld(),yt.matrixWorldInverse.getInverse(yt.matrixWorld),c.multiplyMatrices(yt.projectionMatrix,yt.matrixWorldInverse),ar.setFromMatrix(c),re.length=0,Ce=-1,Ue=-1,ft.length=0,dt.length=0,Yn=Hi.init(this.clippingPlanes,jn=this.localClippingEnabled,yt),fi(Xe,yt),ve.length=Ce+1,Ve.length=Ue+1,!0===at.sortObjects&&(ve.sort(ti),Ve.sort(Dn)),Yn&&Hi.beginShadows(),function $i(Xe){for(var yt=0,dn=0,bn=Xe.length;dn<bn;dn++){var wn=Xe[dn];wn.castShadow&&(C.shadows[yt++]=wn)}C.shadows.length=yt}(re),Kt.render(Xe,yt),function Nt(Xe,yt){var dn,bn,wn,Br,Vi,Ui,tr,nr=0,cr=0,oi=0,eo=yt.matrixWorldInverse,fo=0,Na=0,$o=0,Lo=0,Qo=0;for(dn=0,bn=Xe.length;dn<bn;dn++)if(Br=(wn=Xe[dn]).color,Vi=wn.intensity,Ui=wn.distance,tr=wn.shadow&&wn.shadow.map?wn.shadow.map.texture:null,wn.isAmbientLight)nr+=Br.r*Vi,cr+=Br.g*Vi,oi+=Br.b*Vi;else if(wn.isDirectionalLight)(Er=je.get(wn)).color.copy(wn.color).multiplyScalar(wn.intensity),Er.direction.setFromMatrixPosition(wn.matrixWorld),d.setFromMatrixPosition(wn.target.matrixWorld),Er.direction.sub(d),Er.direction.transformDirection(eo),Er.shadow=wn.castShadow,wn.castShadow&&(Er.shadowBias=wn.shadow.bias,Er.shadowRadius=wn.shadow.radius,Er.shadowMapSize=wn.shadow.mapSize),C.directionalShadowMap[fo]=tr,C.directionalShadowMatrix[fo]=wn.shadow.matrix,C.directional[fo++]=Er;else if(wn.isSpotLight)(Er=je.get(wn)).position.setFromMatrixPosition(wn.matrixWorld),Er.position.applyMatrix4(eo),Er.color.copy(Br).multiplyScalar(Vi),Er.distance=Ui,Er.direction.setFromMatrixPosition(wn.matrixWorld),d.setFromMatrixPosition(wn.target.matrixWorld),Er.direction.sub(d),Er.direction.transformDirection(eo),Er.coneCos=Math.cos(wn.angle),Er.penumbraCos=Math.cos(wn.angle*(1-wn.penumbra)),Er.decay=0===wn.distance?0:wn.decay,Er.shadow=wn.castShadow,wn.castShadow&&(Er.shadowBias=wn.shadow.bias,Er.shadowRadius=wn.shadow.radius,Er.shadowMapSize=wn.shadow.mapSize),C.spotShadowMap[$o]=tr,C.spotShadowMatrix[$o]=wn.shadow.matrix,C.spot[$o++]=Er;else if(wn.isRectAreaLight)(Er=je.get(wn)).color.copy(Br).multiplyScalar(Vi/(wn.width*wn.height)),Er.position.setFromMatrixPosition(wn.matrixWorld),Er.position.applyMatrix4(eo),_.identity(),m.copy(wn.matrixWorld),m.premultiply(eo),_.extractRotation(m),Er.halfWidth.set(.5*wn.width,0,0),Er.halfHeight.set(0,.5*wn.height,0),Er.halfWidth.applyMatrix4(_),Er.halfHeight.applyMatrix4(_),C.rectArea[Lo++]=Er;else if(wn.isPointLight)(Er=je.get(wn)).position.setFromMatrixPosition(wn.matrixWorld),Er.position.applyMatrix4(eo),Er.color.copy(wn.color).multiplyScalar(wn.intensity),Er.distance=wn.distance,Er.decay=0===wn.distance?0:wn.decay,Er.shadow=wn.castShadow,wn.castShadow&&(Er.shadowBias=wn.shadow.bias,Er.shadowRadius=wn.shadow.radius,Er.shadowMapSize=wn.shadow.mapSize),C.pointShadowMap[Na]=tr,void 0===C.pointShadowMatrix[Na]&&(C.pointShadowMatrix[Na]=new vs),d.setFromMatrixPosition(wn.matrixWorld).negate(),C.pointShadowMatrix[Na].identity().setPosition(d),C.point[Na++]=Er;else if(wn.isHemisphereLight){var Er;(Er=je.get(wn)).direction.setFromMatrixPosition(wn.matrixWorld),Er.direction.transformDirection(eo),Er.direction.normalize(),Er.skyColor.copy(wn.color).multiplyScalar(Vi),Er.groundColor.copy(wn.groundColor).multiplyScalar(Vi),C.hemi[Qo++]=Er}C.ambient[0]=nr,C.ambient[1]=cr,C.ambient[2]=oi,C.directional.length=fo,C.spot.length=$o,C.rectArea.length=Lo,C.point.length=Na,C.hemi.length=Qo,C.hash=fo+","+Na+","+$o+","+Lo+","+Qo+","+C.shadows.length}(re,yt),Yn&&Hi.endShadows(),A.calls=0,A.vertices=0,A.faces=0,A.points=0,void 0===dn&&(dn=null),this.setRenderTarget(dn);var wn=Xe.background;if(null===wn?Z.buffers.color.setClear(di.r,di.g,di.b,Jt,z):wn&&wn.isColor&&(Z.buffers.color.setClear(wn.r,wn.g,wn.b,1,z),bn=!0),(this.autoClear||bn)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),wn&&wn.isCubeTexture?(Ct.projectionMatrix.copy(yt.projectionMatrix),Ct.matrixWorld.extractRotation(yt.matrixWorld),Ct.matrixWorldInverse.getInverse(Ct.matrixWorld),It.material.uniforms.tCube.value=wn,It.modelViewMatrix.multiplyMatrices(Ct.matrixWorldInverse,It.matrixWorld),ye.update(It),at.renderBufferDirect(Ct,null,It.geometry,It.material,It,null)):wn&&wn.isTexture&&(Gt.material.map=wn,ye.update(Gt),at.renderBufferDirect(nt,null,Gt.geometry,Gt.material,Gt,null)),Xe.overrideMaterial){var nr=Xe.overrideMaterial;Pn(ve,Xe,yt,nr),Pn(Ve,Xe,yt,nr)}else Z.setBlending($),Pn(ve,Xe,yt),Pn(Ve,Xe,yt);ut.render(Xe,yt),Qt.render(Xe,yt,On),dn&&me.updateRenderTargetMipmap(dn),Z.setDepthTest(!0),Z.setDepthWrite(!0),Z.setColorWrite(!0)}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFaceCulling=function(Xe,yt){Z.setCullFace(Xe),Z.setFlipSided(yt===q)},this.allocTextureUnit=function Kn(){var Xe=Ti;return Xe>=j.maxTextures&&console.warn("WebGLRenderer: trying to use "+Xe+" texture units while this GPU supports only "+j.maxTextures),Ti+=1,Xe},this.setTexture2D=(Xe=!1,function(dn,bn){dn&&dn.isWebGLRenderTarget&&(Xe||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),Xe=!0),dn=dn.texture),me.setTexture2D(dn,bn)}),this.setTexture=function(){var Xe=!1;return function(dn,bn){Xe||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),Xe=!0),me.setTexture2D(dn,bn)}}(),this.setTextureCube=function(){var Xe=!1;return function(dn,bn){dn&&dn.isWebGLRenderTargetCube&&(Xe||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),Xe=!0),dn=dn.texture),dn&&dn.isCubeTexture||Array.isArray(dn.image)&&6===dn.image.length?me.setTextureCube(dn,bn):me.setTextureCubeDynamic(dn,bn)}}(),this.getCurrentRenderTarget=function(){return St},this.setRenderTarget=function(Xe){St=Xe,Xe&&void 0===he.get(Xe).__webglFramebuffer&&me.setupRenderTarget(Xe);var dn,yt=Xe&&Xe.isWebGLRenderTargetCube;if(Xe){var bn=he.get(Xe);dn=yt?bn.__webglFramebuffer[Xe.activeCubeFace]:bn.__webglFramebuffer,an.copy(Xe.scissor),_n=Xe.scissorTest,On.copy(Xe.viewport)}else dn=null,an.copy(Mi).multiplyScalar(ni),_n=Ai,On.copy(gi).multiplyScalar(ni);if(nn!==dn&&(E.bindFramebuffer(E.FRAMEBUFFER,dn),nn=dn),Z.scissor(an),Z.setScissorTest(_n),Z.viewport(On),yt){var wn=he.get(Xe.texture);E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_CUBE_MAP_POSITIVE_X+Xe.activeCubeFace,wn.__webglTexture,Xe.activeMipMapLevel)}},this.readRenderTargetPixels=function(Xe,yt,dn,bn,wn,nr){if(!1!==(Xe&&Xe.isWebGLRenderTarget)){var cr=he.get(Xe).__webglFramebuffer;if(cr){var oi=!1;cr!==nn&&(E.bindFramebuffer(E.FRAMEBUFFER,cr),oi=!0);try{var Br=Xe.texture,Vi=Br.format,Ui=Br.type;if(Vi!==rl&&Pi(Vi)!==E.getParameter(E.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(Ui===ff||Pi(Ui)===E.getParameter(E.IMPLEMENTATION_COLOR_READ_TYPE)||Ui===kd&&(R.get("OES_texture_float")||R.get("WEBGL_color_buffer_float"))||Ui===xc&&R.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");E.checkFramebufferStatus(E.FRAMEBUFFER)===E.FRAMEBUFFER_COMPLETE?yt>=0&&yt<=Xe.width-bn&&dn>=0&&dn<=Xe.height-wn&&E.readPixels(yt,dn,bn,wn,Pi(Vi),Pi(Ui),nr):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{oi&&E.bindFramebuffer(E.FRAMEBUFFER,nn)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")}}function Nh(a,h){this.name="",this.color=new Xr(a),this.density=void 0!==h?h:25e-5}function Rc(a,h,g){this.name="",this.color=new Xr(a),this.near=void 0!==h?h:1,this.far=void 0!==g?g:1e3}function Bh(){Cr.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function dh(a,h,g,y,x){Cr.call(this),this.lensFlares=[],this.positionScreen=new on,this.customUpdateCallback=void 0,void 0!==a&&this.add(a,h,g,y,x)}function zu(a){Ks.call(this),this.type="SpriteMaterial",this.color=new Xr(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(a)}function mu(a){Cr.call(this),this.type="Sprite",this.material=void 0!==a?a:new zu}function aa(){Cr.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function ld(a,h,g){if(this.useVertexTexture=void 0===g||g,this.identityMatrix=new vs,this.bones=(a=a||[]).slice(0),this.useVertexTexture){var y=Math.sqrt(4*this.bones.length);y=As.nextPowerOfTwo(Math.ceil(y)),y=Math.max(y,4),this.boneTextureWidth=y,this.boneTextureHeight=y,this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new ns(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,rl,kd)}else this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===h)this.calculateInverses();else if(this.bones.length===h.length)this.boneInverses=h.slice(0);else{console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[];for(var x=0,M=this.bones.length;x<M;x++)this.boneInverses.push(new vs)}}function Rm(){Cr.call(this),this.type="Bone"}function qg(a,h,g){wa.call(this,a,h),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new vs,this.bindMatrixInverse=new vs;var y=[];if(this.geometry&&void 0!==this.geometry.bones){for(var x,M,F=0,z=this.geometry.bones.length;F<z;++F)M=this.geometry.bones[F],x=new Rm,y.push(x),x.name=M.name,x.position.fromArray(M.pos),x.quaternion.fromArray(M.rotq),void 0!==M.scl&&x.scale.fromArray(M.scl);for(F=0,z=this.geometry.bones.length;F<z;++F)-1!==(M=this.geometry.bones[F]).parent&&null!==M.parent&&void 0!==y[M.parent]?y[M.parent].add(y[F]):this.add(y[F])}this.normalizeSkinWeights(),this.updateMatrixWorld(!0),this.bind(new ld(y,void 0,g),this.matrixWorld)}function cl(a){Ks.call(this),this.type="LineBasicMaterial",this.color=new Xr(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(a)}function vu(a,h,g){if(1===g)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new Co(a,h);Cr.call(this),this.type="Line",this.geometry=void 0!==a?a:new Dr,this.material=void 0!==h?h:new cl({color:16777215*Math.random()})}function Co(a,h){vu.call(this,a,h),this.type="LineSegments"}function kc(a){Ks.call(this),this.type="PointsMaterial",this.color=new Xr(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(a)}function js(a,h){Cr.call(this),this.type="Points",this.geometry=void 0!==a?a:new Dr,this.material=void 0!==h?h:new kc({color:16777215*Math.random()})}function lp(){Cr.call(this),this.type="Group"}function cp(a,h,g,y,x,M,F,z,le){Xo.call(this,a,h,g,y,x,M,F,z,le),this.generateMipmaps=!1;var re=this;!function ve(){requestAnimationFrame(ve),a.readyState>=a.HAVE_CURRENT_DATA&&(re.needsUpdate=!0)}()}function Oc(a,h,g,y,x,M,F,z,le,re,ve,Ce){Xo.call(this,null,M,F,z,le,re,y,x,ve,Ce),this.image={width:h,height:g},this.mipmaps=a,this.flipY=!1,this.generateMipmaps=!1}function up(a,h,g,y,x,M,F,z,le){Xo.call(this,a,h,g,y,x,M,F,z,le),this.needsUpdate=!0}function Xg(a,h,g,y,x,M,F,z,le,re){if((re=void 0!==re?re:pt)!==pt&&re!==st)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===g&&re===pt&&(g=pf),void 0===g&&re===st&&(g=mf),Xo.call(this,null,y,x,M,F,z,re,g,le),this.image={width:a,height:h},this.magFilter=void 0!==F?F:Xa,this.minFilter=void 0!==z?z:Xa,this.flipY=!1,this.generateMipmaps=!1}function fh(a){Dr.call(this);var h=[0,0],g={};function y(di,Jt){return di-Jt}var x=["a","b","c"];if(a&&a.isGeometry){for(var M=a.vertices,F=a.faces,z=0,le=new Uint32Array(6*F.length),re=0,ve=F.length;re<ve;re++)for(var Ce=F[re],Ve=0;Ve<3;Ve++)h[0]=Ce[x[Ve]],h[1]=Ce[x[(Ve+1)%3]],h.sort(y),void 0===g[Ue=h.toString()]&&(le[2*z]=h[0],le[2*z+1]=h[1],g[Ue]=!0,z++);var We=new Float32Array(2*z*3);for(re=0,ve=z;re<ve;re++)for(Ve=0;Ve<2;Ve++){var ft=M[le[2*re+Ve]];We[0+(dt=6*re+3*Ve)]=ft.x,We[dt+1]=ft.y,We[dt+2]=ft.z}this.addAttribute("position",new gr(We,3))}else if(a&&a.isBufferGeometry)if(null!==a.index){var at=a.index.array,xt=(M=a.attributes.position,a.groups);z=0,0===xt.length&&a.addGroup(0,at.length),le=new Uint32Array(2*at.length);for(var St=0,nn=xt.length;St<nn;++St)for(var qt=xt[St],gn=qt.start,an=(re=gn,gn+qt.count);re<an;re+=3)for(Ve=0;Ve<3;Ve++){var Ue;h[0]=at[re+Ve],h[1]=at[re+(Ve+1)%3],h.sort(y),void 0===g[Ue=h.toString()]&&(le[2*z]=h[0],le[2*z+1]=h[1],g[Ue]=!0,z++)}for(We=new Float32Array(2*z*3),re=0,ve=z;re<ve;re++)for(Ve=0;Ve<2;Ve++)We[0+(dt=6*re+3*Ve)]=M.getX(_n=le[2*re+Ve]),We[dt+1]=M.getY(_n),We[dt+2]=M.getZ(_n);this.addAttribute("position",new gr(We,3))}else{var On=(z=(M=a.attributes.position.array).length/3)/3;for(We=new Float32Array(2*z*3),re=0,ve=On;re<ve;re++)for(Ve=0;Ve<3;Ve++){var dt,_n,Ti=9*re+3*Ve;We[0+(dt=18*re+6*Ve)]=M[Ti],We[dt+1]=M[Ti+1],We[dt+2]=M[Ti+2],We[dt+3]=M[_n=9*re+(Ve+1)%3*3],We[dt+4]=M[_n+1],We[dt+5]=M[_n+2]}this.addAttribute("position",new gr(We,3))}}function Wd(a,h,g){Dr.call(this),this.type="ParametricBufferGeometry",this.parameters={func:a,slices:h,stacks:g};var M,F,z,le,re,y=[],x=[],ve=h+1;for(M=0;M<=g;M++)for(re=M/g,F=0;F<=h;F++)z=a(le=F/h,re),y.push(z.x,z.y,z.z),x.push(le,re);var Ue,We,ft,Ce=[];for(M=0;M<g;M++)for(F=0;F<h;F++)We=(M+1)*ve+F+1,Ce.push(M*ve+F,Ue=M*ve+F+1,ft=(M+1)*ve+F),Ce.push(Ue,We,ft);this.setIndex(new(Ce.length>65535?Bu:zd)(Ce,1)),this.addAttribute("position",new os(y,3)),this.addAttribute("uv",new os(x,2)),this.computeVertexNormals()}function jd(a,h,g){Ms.call(this),this.type="ParametricGeometry",this.parameters={func:a,slices:h,stacks:g},this.fromBufferGeometry(new Wd(a,h,g)),this.mergeVertices()}function Ql(a,h,g,y){Dr.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:a,indices:h,radius:g,detail:y},g=g||1;var x=[],M=[];function z(at,xt,St,nn){var un,an,qt=Math.pow(2,nn),gn=[];for(un=0;un<=qt;un++){gn[un]=[];var _n=at.clone().lerp(St,un/qt),On=xt.clone().lerp(St,un/qt),Ti=qt-un;for(an=0;an<=Ti;an++)gn[un][an]=0===an&&un===qt?_n:_n.clone().lerp(On,an/Ti)}for(un=0;un<qt;un++)for(an=0;an<2*(qt-un)-1;an++){var di=Math.floor(an/2);an%2==0?(Ce(gn[un][di+1]),Ce(gn[un+1][di]),Ce(gn[un][di])):(Ce(gn[un][di+1]),Ce(gn[un+1][di+1]),Ce(gn[un+1][di]))}}function Ce(at){x.push(at.x,at.y,at.z)}function Ve(at,xt){var St=3*at;xt.x=a[St+0],xt.y=a[St+1],xt.z=a[St+2]}function We(at,xt,St,nn){nn<0&&1===at.x&&(M[xt]=at.x-1),0===St.x&&0===St.z&&(M[xt]=nn/2/Math.PI+.5)}function ft(at){return Math.atan2(at.z,-at.x)}function dt(at){return Math.atan2(-at.y,Math.sqrt(at.x*at.x+at.z*at.z))}(function F(at){for(var xt=new on,St=new on,nn=new on,qt=0;qt<h.length;qt+=3)Ve(h[qt+0],xt),Ve(h[qt+1],St),Ve(h[qt+2],nn),z(xt,St,nn,at)})(y=y||0),function le(at){for(var xt=new on,St=0;St<x.length;St+=3)xt.x=x[St+0],xt.y=x[St+1],xt.z=x[St+2],xt.normalize().multiplyScalar(at),x[St+0]=xt.x,x[St+1]=xt.y,x[St+2]=xt.z}(g),function re(){for(var at=new on,xt=0;xt<x.length;xt+=3){at.x=x[xt+0],at.y=x[xt+1],at.z=x[xt+2];var St=ft(at)/2/Math.PI+.5,nn=dt(at)/Math.PI+.5;M.push(St,1-nn)}(function Ue(){for(var at=new on,xt=new on,St=new on,nn=new on,qt=new er,gn=new er,un=new er,an=0,_n=0;an<x.length;an+=9,_n+=6){at.set(x[an+0],x[an+1],x[an+2]),xt.set(x[an+3],x[an+4],x[an+5]),St.set(x[an+6],x[an+7],x[an+8]),qt.set(M[_n+0],M[_n+1]),gn.set(M[_n+2],M[_n+3]),un.set(M[_n+4],M[_n+5]),nn.copy(at).add(xt).add(St).divideScalar(3);var On=ft(nn);We(qt,_n+0,at,On),We(gn,_n+2,xt,On),We(un,_n+4,St,On)}})(),function ve(){for(var at=0;at<M.length;at+=6){var xt=M[at+0],St=M[at+2],nn=M[at+4],qt=Math.max(xt,St,nn),gn=Math.min(xt,St,nn);qt>.9&&gn<.1&&(xt<.2&&(M[at+0]+=1),St<.2&&(M[at+2]+=1),nn<.2&&(M[at+4]+=1))}}()}(),this.addAttribute("position",new os(x,3)),this.addAttribute("normal",new os(x.slice(),3)),this.addAttribute("uv",new os(M,2)),this.normalizeNormals(),this.boundingSphere=new Pt(new on,g)}function ul(a,h){Ql.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],a,h),this.type="TetrahedronBufferGeometry",this.parameters={radius:a,detail:h}}function zh(a,h){Ms.call(this),this.type="TetrahedronGeometry",this.parameters={radius:a,detail:h},this.fromBufferGeometry(new ul(a,h)),this.mergeVertices()}function tu(a,h){Ql.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],a,h),this.type="OctahedronBufferGeometry",this.parameters={radius:a,detail:h}}function cd(a,h){Ms.call(this),this.type="OctahedronGeometry",this.parameters={radius:a,detail:h},this.fromBufferGeometry(new tu(a,h)),this.mergeVertices()}function $d(a,h){var g=(1+Math.sqrt(5))/2;Ql.call(this,[-1,g,0,1,g,0,-1,-g,0,1,-g,0,0,-1,g,0,1,g,0,-1,-g,0,1,-g,g,0,-1,g,0,1,-g,0,-1,-g,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],a,h),this.type="IcosahedronBufferGeometry",this.parameters={radius:a,detail:h}}function hp(a,h){Ms.call(this),this.type="IcosahedronGeometry",this.parameters={radius:a,detail:h},this.fromBufferGeometry(new $d(a,h)),this.mergeVertices()}function ph(a,h){var g=(1+Math.sqrt(5))/2,y=1/g;Ql.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-y,-g,0,-y,g,0,y,-g,0,y,g,-y,-g,0,-y,g,0,y,-g,0,y,g,0,-g,0,-y,g,0,-y,-g,0,y,g,0,y],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],a,h),this.type="DodecahedronBufferGeometry",this.parameters={radius:a,detail:h}}function Kp(a,h){Ms.call(this),this.type="DodecahedronGeometry",this.parameters={radius:a,detail:h},this.fromBufferGeometry(new ph(a,h)),this.mergeVertices()}function Wo(a,h,g,y){Ms.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:a,indices:h,radius:g,detail:y},this.fromBufferGeometry(new Ql(a,h,g,y)),this.mergeVertices()}function qd(a,h,g,y,x){Dr.call(this),this.type="TubeBufferGeometry",this.parameters={path:a,tubularSegments:h,radius:g,radialSegments:y,closed:x},g=g||1,y=y||8;var M=a.computeFrenetFrames(h=h||64,x=x||!1);this.tangents=M.tangents,this.normals=M.normals,this.binormals=M.binormals;var re,ve,F=new on,z=new on,le=new er,Ce=[],Ve=[],Ue=[],We=[];function dt(St){var nn=a.getPointAt(St/h),qt=M.normals[St],gn=M.binormals[St];for(ve=0;ve<=y;ve++){var un=ve/y*Math.PI*2,an=Math.sin(un),_n=-Math.cos(un);z.x=_n*qt.x+an*gn.x,z.y=_n*qt.y+an*gn.y,z.z=_n*qt.z+an*gn.z,z.normalize(),Ve.push(z.x,z.y,z.z),F.x=nn.x+g*z.x,F.y=nn.y+g*z.y,F.z=nn.z+g*z.z,Ce.push(F.x,F.y,F.z)}}(function ft(){for(re=0;re<h;re++)dt(re);dt(!1===x?h:0),function xt(){for(re=0;re<=h;re++)for(ve=0;ve<=y;ve++)le.x=re/h,le.y=ve/y,Ue.push(le.x,le.y)}(),function at(){for(ve=1;ve<=h;ve++)for(re=1;re<=y;re++){var nn=(y+1)*ve+(re-1),qt=(y+1)*ve+re,gn=(y+1)*(ve-1)+re;We.push((y+1)*(ve-1)+(re-1),nn,gn),We.push(nn,qt,gn)}}()})(),this.setIndex(new(We.length>65535?Bu:zd)(We,1)),this.addAttribute("position",new os(Ce,3)),this.addAttribute("normal",new os(Ve,3)),this.addAttribute("uv",new os(Ue,2))}function Vh(a,h,g,y,x,M){Ms.call(this),this.type="TubeGeometry",this.parameters={path:a,tubularSegments:h,radius:g,radialSegments:y,closed:x},void 0!==M&&console.warn("THREE.TubeGeometry: taper has been removed.");var F=new qd(a,h,g,y,x);this.tangents=F.tangents,this.normals=F.normals,this.binormals=F.binormals,this.fromBufferGeometry(F),this.mergeVertices()}function Qa(a,h,g,y,x,M){Dr.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:a,tube:h,tubularSegments:g,radialSegments:y,p:x,q:M},a=a||100,h=h||40,g=Math.floor(g)||64,x=x||2,M=M||3;var Ve,Ue,F=((y=Math.floor(y)||8)+1)*(g+1),z=y*g*2*3,le=new gr(new(z>65535?Uint32Array:Uint16Array)(z),1),re=new gr(new Float32Array(3*F),3),ve=new gr(new Float32Array(3*F),3),Ce=new gr(new Float32Array(2*F),2),We=0,ft=0,dt=new on,at=new on,xt=new er,St=new on,nn=new on,qt=new on,gn=new on,un=new on;for(Ve=0;Ve<=g;++Ve){var an=Ve/g*x*Math.PI*2;for(ni(an,x,M,a,St),ni(an+.01,x,M,a,nn),gn.subVectors(nn,St),un.addVectors(nn,St),qt.crossVectors(gn,un),un.crossVectors(qt,gn),qt.normalize(),un.normalize(),Ue=0;Ue<=y;++Ue){var _n=Ue/y*Math.PI*2,On=-h*Math.cos(_n),Ti=h*Math.sin(_n);dt.x=St.x+(On*un.x+Ti*qt.x),dt.y=St.y+(On*un.y+Ti*qt.y),dt.z=St.z+(On*un.z+Ti*qt.z),re.setXYZ(We,dt.x,dt.y,dt.z),at.subVectors(dt,St).normalize(),ve.setXYZ(We,at.x,at.y,at.z),xt.x=Ve/g,xt.y=Ue/y,Ce.setXY(We,xt.x,xt.y),We++}}for(Ue=1;Ue<=g;Ue++)for(Ve=1;Ve<=y;Ve++){var Jt=(y+1)*Ue+(Ve-1),tn=(y+1)*Ue+Ve,Xn=(y+1)*(Ue-1)+Ve;le.setX(ft,(y+1)*(Ue-1)+(Ve-1)),ft++,le.setX(ft,Jt),ft++,le.setX(ft,Xn),ft++,le.setX(ft,Jt),ft++,le.setX(ft,tn),ft++,le.setX(ft,Xn),ft++}function ni(Mi,Ai,gi,ar,Hi){var Yn=Math.cos(Mi),jn=Math.sin(Mi),f=gi/Ai*Mi,c=Math.cos(f);Hi.x=ar*(2+c)*.5*Yn,Hi.y=ar*(2+c)*jn*.5,Hi.z=ar*Math.sin(f)*.5}this.setIndex(le),this.addAttribute("position",re),this.addAttribute("normal",ve),this.addAttribute("uv",Ce)}function ud(a,h,g,y,x,M,F){Ms.call(this),this.type="TorusKnotGeometry",this.parameters={radius:a,tube:h,tubularSegments:g,radialSegments:y,p:x,q:M},void 0!==F&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Qa(a,h,g,y,x,M)),this.mergeVertices()}function Vu(a,h,g,y,x){Dr.call(this),this.type="TorusBufferGeometry",this.parameters={radius:a,tube:h,radialSegments:g,tubularSegments:y,arc:x},a=a||100,h=h||40,g=Math.floor(g)||8,y=Math.floor(y)||6,x=x||2*Math.PI;var at,xt,M=(g+1)*(y+1),F=g*y*2*3,z=new(F>65535?Uint32Array:Uint16Array)(F),le=new Float32Array(3*M),re=new Float32Array(3*M),ve=new Float32Array(2*M),Ce=0,Ve=0,Ue=0,We=new on,ft=new on,dt=new on;for(at=0;at<=g;at++)for(xt=0;xt<=y;xt++){var St=xt/y*x,nn=at/g*Math.PI*2;ft.x=(a+h*Math.cos(nn))*Math.cos(St),ft.y=(a+h*Math.cos(nn))*Math.sin(St),ft.z=h*Math.sin(nn),le[Ce]=ft.x,le[Ce+1]=ft.y,le[Ce+2]=ft.z,We.x=a*Math.cos(St),We.y=a*Math.sin(St),dt.subVectors(ft,We).normalize(),re[Ce]=dt.x,re[Ce+1]=dt.y,re[Ce+2]=dt.z,ve[Ve]=xt/y,ve[Ve+1]=at/g,Ce+=3,Ve+=2}for(at=1;at<=g;at++)for(xt=1;xt<=y;xt++){var gn=(y+1)*(at-1)+xt-1,un=(y+1)*(at-1)+xt,an=(y+1)*at+xt;z[Ue]=(y+1)*at+xt-1,z[Ue+1]=gn,z[Ue+2]=an,z[Ue+3]=gn,z[Ue+4]=un,z[Ue+5]=an,Ue+=6}this.setIndex(new gr(z,1)),this.addAttribute("position",new gr(le,3)),this.addAttribute("normal",new gr(re,3)),this.addAttribute("uv",new gr(ve,2))}function Uh(a,h,g,y,x){Ms.call(this),this.type="TorusGeometry",this.parameters={radius:a,tube:h,radialSegments:g,tubularSegments:y,arc:x},this.fromBufferGeometry(new Vu(a,h,g,y,x))}Nh.prototype.isFogExp2=!0,Nh.prototype.clone=function(){return new Nh(this.color.getHex(),this.density)},Nh.prototype.toJSON=function(a){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},Rc.prototype.isFog=!0,Rc.prototype.clone=function(){return new Rc(this.color.getHex(),this.near,this.far)},Rc.prototype.toJSON=function(a){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},(Bh.prototype=Object.create(Cr.prototype)).constructor=Bh,Bh.prototype.copy=function(a,h){return Cr.prototype.copy.call(this,a,h),null!==a.background&&(this.background=a.background.clone()),null!==a.fog&&(this.fog=a.fog.clone()),null!==a.overrideMaterial&&(this.overrideMaterial=a.overrideMaterial.clone()),this.autoUpdate=a.autoUpdate,this.matrixAutoUpdate=a.matrixAutoUpdate,this},Bh.prototype.toJSON=function(a){var h=Cr.prototype.toJSON.call(this,a);return null!==this.background&&(h.object.background=this.background.toJSON(a)),null!==this.fog&&(h.object.fog=this.fog.toJSON()),h},dh.prototype=Object.assign(Object.create(Cr.prototype),{constructor:dh,isLensFlare:!0,copy:function(a){Cr.prototype.copy.call(this,a),this.positionScreen.copy(a.positionScreen),this.customUpdateCallback=a.customUpdateCallback;for(var h=0,g=a.lensFlares.length;h<g;h++)this.lensFlares.push(a.lensFlares[h]);return this},add:function(a,h,g,y,x,M){void 0===h&&(h=-1),void 0===g&&(g=0),void 0===M&&(M=1),void 0===x&&(x=new Xr(16777215)),void 0===y&&(y=ie),g=Math.min(g,Math.max(0,g)),this.lensFlares.push({texture:a,size:h,distance:g,x:0,y:0,z:0,scale:1,rotation:0,opacity:M,color:x,blending:y})},updateLensFlares:function(){var a,g,h=this.lensFlares.length,y=2*-this.positionScreen.x,x=2*-this.positionScreen.y;for(a=0;a<h;a++)(g=this.lensFlares[a]).x=this.positionScreen.x+y*g.distance,g.y=this.positionScreen.y+x*g.distance,g.wantedRotation=g.x*Math.PI*.25,g.rotation+=.25*(g.wantedRotation-g.rotation)}}),(zu.prototype=Object.create(Ks.prototype)).constructor=zu,zu.prototype.copy=function(a){return Ks.prototype.copy.call(this,a),this.color.copy(a.color),this.map=a.map,this.rotation=a.rotation,this},mu.prototype=Object.assign(Object.create(Cr.prototype),{constructor:mu,isSprite:!0,raycast:function(){var a=new on;return function(g,y){a.setFromMatrixPosition(this.matrixWorld);var x=g.ray.distanceSqToPoint(a);x>this.scale.x*this.scale.y/4||y.push({distance:Math.sqrt(x),point:this.position,face:null,object:this})}}(),clone:function(){return new this.constructor(this.material).copy(this)}}),aa.prototype=Object.assign(Object.create(Cr.prototype),{constructor:aa,copy:function(a){Cr.prototype.copy.call(this,a,!1);for(var h=a.levels,g=0,y=h.length;g<y;g++){var x=h[g];this.addLevel(x.object.clone(),x.distance)}return this},addLevel:function(a,h){void 0===h&&(h=0),h=Math.abs(h);for(var g=this.levels,y=0;y<g.length&&!(h<g[y].distance);y++);g.splice(y,0,{distance:h,object:a}),this.add(a)},getObjectForDistance:function(a){for(var h=this.levels,g=1,y=h.length;g<y&&!(a<h[g].distance);g++);return h[g-1].object},raycast:function(){var a=new on;return function(g,y){a.setFromMatrixPosition(this.matrixWorld);var x=g.ray.origin.distanceTo(a);this.getObjectForDistance(x).raycast(g,y)}}(),update:function(){var a=new on,h=new on;return function(y){var x=this.levels;if(x.length>1){a.setFromMatrixPosition(y.matrixWorld),h.setFromMatrixPosition(this.matrixWorld);var M=a.distanceTo(h);x[0].object.visible=!0;for(var F=1,z=x.length;F<z&&M>=x[F].distance;F++)x[F-1].object.visible=!1,x[F].object.visible=!0;for(;F<z;F++)x[F].object.visible=!1}}}(),toJSON:function(a){var h=Cr.prototype.toJSON.call(this,a);h.object.levels=[];for(var g=this.levels,y=0,x=g.length;y<x;y++){var M=g[y];h.object.levels.push({object:M.object.uuid,distance:M.distance})}return h}}),Object.assign(ld.prototype,{calculateInverses:function(){this.boneInverses=[];for(var a=0,h=this.bones.length;a<h;a++){var g=new vs;this.bones[a]&&g.getInverse(this.bones[a].matrixWorld),this.boneInverses.push(g)}},pose:function(){for(var a,h=0,g=this.bones.length;h<g;h++)(a=this.bones[h])&&a.matrixWorld.getInverse(this.boneInverses[h]);for(h=0,g=this.bones.length;h<g;h++)(a=this.bones[h])&&(a.parent&&a.parent.isBone?(a.matrix.getInverse(a.parent.matrixWorld),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale))},update:function(){var a=new vs;return function(){for(var g=0,y=this.bones.length;g<y;g++)a.multiplyMatrices(this.bones[g]?this.bones[g].matrixWorld:this.identityMatrix,this.boneInverses[g]),a.toArray(this.boneMatrices,16*g);this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}(),clone:function(){return new ld(this.bones,this.boneInverses,this.useVertexTexture)}}),Rm.prototype=Object.assign(Object.create(Cr.prototype),{constructor:Rm,isBone:!0}),qg.prototype=Object.assign(Object.create(wa.prototype),{constructor:qg,isSkinnedMesh:!0,bind:function(a,h){this.skeleton=a,void 0===h&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),h=this.matrixWorld),this.bindMatrix.copy(h),this.bindMatrixInverse.getInverse(h)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){if(this.geometry&&this.geometry.isGeometry)for(var a=0;a<this.geometry.skinWeights.length;a++){var h=this.geometry.skinWeights[a];(g=1/h.lengthManhattan())!=1/0?h.multiplyScalar(g):h.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var y=new Yo,x=this.geometry.attributes.skinWeight;for(a=0;a<x.count;a++){var g;y.x=x.getX(a),y.y=x.getY(a),y.z=x.getZ(a),y.w=x.getW(a),(g=1/y.lengthManhattan())!=1/0?y.multiplyScalar(g):y.set(1,0,0,0),x.setXYZW(a,y.x,y.y,y.z,y.w)}}},updateMatrixWorld:function(a){wa.prototype.updateMatrixWorld.call(this,!0),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material,this.skeleton.useVertexTexture).copy(this)}}),(cl.prototype=Object.create(Ks.prototype)).constructor=cl,cl.prototype.isLineBasicMaterial=!0,cl.prototype.copy=function(a){return Ks.prototype.copy.call(this,a),this.color.copy(a.color),this.linewidth=a.linewidth,this.linecap=a.linecap,this.linejoin=a.linejoin,this},vu.prototype=Object.assign(Object.create(Cr.prototype),{constructor:vu,isLine:!0,raycast:function(){var a=new vs,h=new sa,g=new Pt;return function(x,M){var F=x.linePrecision,z=F*F,le=this.geometry,re=this.matrixWorld;if(null===le.boundingSphere&&le.computeBoundingSphere(),g.copy(le.boundingSphere),g.applyMatrix4(re),!1!==x.ray.intersectsSphere(g)){a.getInverse(re),h.copy(x.ray).applyMatrix4(a);var ve=new on,Ce=new on,Ve=new on,Ue=new on,We=this&&this.isLineSegments?2:1;if(le.isBufferGeometry){var ft=le.index,at=le.attributes.position.array;if(null!==ft)for(var xt=ft.array,St=0,nn=xt.length-1;St<nn;St+=We){var gn=xt[St+1];ve.fromArray(at,3*xt[St]),Ce.fromArray(at,3*gn),h.distanceSqToSegment(ve,Ce,Ue,Ve)>z||(Ue.applyMatrix4(this.matrixWorld),(an=x.ray.origin.distanceTo(Ue))<x.near||an>x.far||M.push({distance:an,point:Ve.clone().applyMatrix4(this.matrixWorld),index:St,face:null,faceIndex:null,object:this}))}else for(St=0,nn=at.length/3-1;St<nn;St+=We)ve.fromArray(at,3*St),Ce.fromArray(at,3*St+3),h.distanceSqToSegment(ve,Ce,Ue,Ve)>z||(Ue.applyMatrix4(this.matrixWorld),(an=x.ray.origin.distanceTo(Ue))<x.near||an>x.far||M.push({distance:an,point:Ve.clone().applyMatrix4(this.matrixWorld),index:St,face:null,faceIndex:null,object:this}))}else if(le.isGeometry){var _n=le.vertices,On=_n.length;for(St=0;St<On-1;St+=We){var an;h.distanceSqToSegment(_n[St],_n[St+1],Ue,Ve)>z||(Ue.applyMatrix4(this.matrixWorld),(an=x.ray.origin.distanceTo(Ue))<x.near||an>x.far||M.push({distance:an,point:Ve.clone().applyMatrix4(this.matrixWorld),index:St,face:null,faceIndex:null,object:this}))}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Co.prototype=Object.assign(Object.create(vu.prototype),{constructor:Co,isLineSegments:!0}),(kc.prototype=Object.create(Ks.prototype)).constructor=kc,kc.prototype.isPointsMaterial=!0,kc.prototype.copy=function(a){return Ks.prototype.copy.call(this,a),this.color.copy(a.color),this.map=a.map,this.size=a.size,this.sizeAttenuation=a.sizeAttenuation,this},js.prototype=Object.assign(Object.create(Cr.prototype),{constructor:js,isPoints:!0,raycast:function(){var a=new vs,h=new sa,g=new Pt;return function(x,M){var F=this,z=this.geometry,le=this.matrixWorld,re=x.params.Points.threshold;if(null===z.boundingSphere&&z.computeBoundingSphere(),g.copy(z.boundingSphere),g.applyMatrix4(le),!1!==x.ray.intersectsSphere(g)){a.getInverse(le),h.copy(x.ray).applyMatrix4(a);var ve=re/((this.scale.x+this.scale.y+this.scale.z)/3),Ce=ve*ve,Ve=new on;if(z.isBufferGeometry){var We=z.index,dt=z.attributes.position.array;if(null!==We)for(var at=We.array,xt=0,St=at.length;xt<St;xt++){var nn=at[xt];Ve.fromArray(dt,3*nn),Ue(Ve,nn)}else{xt=0;for(var qt=dt.length/3;xt<qt;xt++)Ve.fromArray(dt,3*xt),Ue(Ve,xt)}}else{var gn=z.vertices;for(xt=0,qt=gn.length;xt<qt;xt++)Ue(gn[xt],xt)}}function Ue(un,an){var _n=h.distanceSqToPoint(un);if(_n<Ce){var On=h.closestPointToPoint(un);On.applyMatrix4(le);var Ti=x.ray.origin.distanceTo(On);if(Ti<x.near||Ti>x.far)return;M.push({distance:Ti,distanceToRay:Math.sqrt(_n),point:On.clone(),index:an,face:null,object:F})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),lp.prototype=Object.assign(Object.create(Cr.prototype),{constructor:lp}),(cp.prototype=Object.create(Xo.prototype)).constructor=cp,(Oc.prototype=Object.create(Xo.prototype)).constructor=Oc,Oc.prototype.isCompressedTexture=!0,(up.prototype=Object.create(Xo.prototype)).constructor=up,(Xg.prototype=Object.create(Xo.prototype)).constructor=Xg,Xg.prototype.isDepthTexture=!0,(fh.prototype=Object.create(Dr.prototype)).constructor=fh,(Wd.prototype=Object.create(Dr.prototype)).constructor=Wd,(jd.prototype=Object.create(Ms.prototype)).constructor=jd,(Ql.prototype=Object.create(Dr.prototype)).constructor=Ql,(ul.prototype=Object.create(Ql.prototype)).constructor=ul,(zh.prototype=Object.create(Ms.prototype)).constructor=zh,(tu.prototype=Object.create(Ql.prototype)).constructor=tu,(cd.prototype=Object.create(Ms.prototype)).constructor=cd,($d.prototype=Object.create(Ql.prototype)).constructor=$d,(hp.prototype=Object.create(Ms.prototype)).constructor=hp,(ph.prototype=Object.create(Ql.prototype)).constructor=ph,(Kp.prototype=Object.create(Ms.prototype)).constructor=Kp,(Wo.prototype=Object.create(Ms.prototype)).constructor=Wo,(qd.prototype=Object.create(Dr.prototype)).constructor=qd,(Vh.prototype=Object.create(Ms.prototype)).constructor=Vh,(Qa.prototype=Object.create(Dr.prototype)).constructor=Qa,(ud.prototype=Object.create(Ms.prototype)).constructor=ud,(Vu.prototype=Object.create(Dr.prototype)).constructor=Vu,(Uh.prototype=Object.create(Ms.prototype)).constructor=Uh;var Pa={area:function(a){for(var h=a.length,g=0,y=h-1,x=0;x<h;y=x++)g+=a[y].x*a[x].y-a[x].x*a[y].y;return.5*g},triangulate:function(){function a(h,g,y,x,M,F){var z,le,re,ve,Ce,Ve,Ue,We,ft,dt,at,xt,St,nn,qt;if(((ve=h[F[y]].x)-(le=h[F[g]].x))*((Ue=h[F[x]].y)-(re=h[F[g]].y))-((Ce=h[F[y]].y)-re)*((Ve=h[F[x]].x)-le)<=0)return!1;for(dt=Ve-ve,at=Ue-Ce,xt=le-Ve,St=re-Ue,nn=ve-le,qt=Ce-re,z=0;z<M;z++)if(ft=h[F[z]].y,!((We=h[F[z]].x)===le&&ft===re||We===ve&&ft===Ce||We===Ve&&ft===Ue)&&dt*(ft-Ce)-at*(We-ve)>=-Number.EPSILON&&xt*(ft-Ue)-St*(We-Ve)>=-Number.EPSILON&&nn*(ft-re)-qt*(We-le)>=-Number.EPSILON)return!1;return!0}return function(g,y){var x=g.length;if(x<3)return null;var le,re,ve,M=[],F=[],z=[];if(Pa.area(g)>0)for(re=0;re<x;re++)F[re]=re;else for(re=0;re<x;re++)F[re]=x-1-re;var Ce=x,Ve=2*Ce;for(re=Ce-1;Ce>2;){if(Ve--<=0)return console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()"),y?z:M;if(Ce<=(le=re)&&(le=0),Ce<=(re=le+1)&&(re=0),Ce<=(ve=re+1)&&(ve=0),a(g,le,re,ve,Ce,F)){var dt,at;for(M.push([g[F[le]],g[F[re]],g[F[ve]]]),z.push([F[le],F[re],F[ve]]),dt=re,at=re+1;at<Ce;dt++,at++)F[dt]=F[at];Ve=2*--Ce}}return y?z:M}}(),triangulateShape:function(a,h){function g(St){var nn=St.length;nn>2&&St[nn-1].equals(St[0])&&St.pop()}function y(St,nn,qt){return St.x!==nn.x?St.x<nn.x?St.x<=qt.x&&qt.x<=nn.x:nn.x<=qt.x&&qt.x<=St.x:St.y<nn.y?St.y<=qt.y&&qt.y<=nn.y:nn.y<=qt.y&&qt.y<=St.y}function x(St,nn,qt,gn,un){var an=nn.x-St.x,_n=nn.y-St.y,On=gn.x-qt.x,Ti=gn.y-qt.y,di=St.x-qt.x,Jt=St.y-qt.y,tn=_n*On-an*Ti,Xn=_n*di-an*Jt;if(Math.abs(tn)>Number.EPSILON){var ni;if(tn>0){if(Xn<0||Xn>tn)return[];if((ni=Ti*di-On*Jt)<0||ni>tn)return[]}else{if(Xn>0||Xn<tn)return[];if((ni=Ti*di-On*Jt)>0||ni<tn)return[]}if(0===ni)return!un||0!==Xn&&Xn!==tn?[St]:[];if(ni===tn)return!un||0!==Xn&&Xn!==tn?[nn]:[];if(0===Xn)return[qt];if(Xn===tn)return[gn];var Mi=ni/tn;return[{x:St.x+Mi*an,y:St.y+Mi*_n}]}if(0!==Xn||Ti*di!=On*Jt)return[];var ar,Hi,Yn,jn,f,c,d,m,Ai=0===an&&0===_n,gi=0===On&&0===Ti;return Ai&&gi?St.x!==qt.x||St.y!==qt.y?[]:[St]:Ai?y(qt,gn,St)?[St]:[]:gi?y(St,nn,qt)?[qt]:[]:(0!==an?(St.x<nn.x?(ar=St,Yn=St.x,Hi=nn,jn=nn.x):(ar=nn,Yn=nn.x,Hi=St,jn=St.x),qt.x<gn.x?(f=qt,d=qt.x,c=gn,m=gn.x):(f=gn,d=gn.x,c=qt,m=qt.x)):(St.y<nn.y?(ar=St,Yn=St.y,Hi=nn,jn=nn.y):(ar=nn,Yn=nn.y,Hi=St,jn=St.y),qt.y<gn.y?(f=qt,d=qt.y,c=gn,m=gn.y):(f=gn,d=gn.y,c=qt,m=qt.y)),Yn<=d?jn<d?[]:jn===d?un?[]:[f]:jn<=m?[f,Hi]:[f,c]:Yn>m?[]:Yn===m?un?[]:[ar]:jn<=m?[ar,Hi]:[ar,c])}function M(St,nn,qt,gn){var un=nn.x-St.x,an=nn.y-St.y,_n=qt.x-St.x,On=qt.y-St.y,Ti=gn.x-St.x,di=gn.y-St.y,Jt=un*On-an*_n,tn=un*di-an*Ti;if(Math.abs(Jt)>Number.EPSILON){var Xn=Ti*On-di*_n;return Jt>0?tn>=0&&Xn>=0:tn>=0||Xn>=0}return tn>0}g(a),h.forEach(g);for(var z,le,re,ve,Ce,Ve,Ue={},We=a.concat(),ft=0,dt=h.length;ft<dt;ft++)Array.prototype.push.apply(We,h[ft]);for(z=0,le=We.length;z<le;z++)void 0!==Ue[Ce=We[z].x+":"+We[z].y]&&console.warn("THREE.ShapeUtils: Duplicate point",Ce,z),Ue[Ce]=z;var at=function F(St,nn){var gn,qt=St.concat();function un(m,_){var C=qt.length-1,A=m-1;A<0&&(A=C);var E=m+1;E>C&&(E=0);var N=M(qt[m],qt[A],qt[E],gn[_]);if(!N)return!1;var R=gn.length-1,j=_-1;j<0&&(j=R);var Z=_+1;return Z>R&&(Z=0),!!(N=M(gn[_],gn[j],gn[Z],qt[m]))}function an(m,_){var C,A;for(C=0;C<qt.length;C++)if(A=C+1,x(m,_,qt[C],qt[A%=qt.length],!0).length>0)return!0;return!1}var _n=[];function On(m,_){var C,A,E,N;for(C=0;C<_n.length;C++)for(A=nn[_n[C]],E=0;E<A.length;E++)if(N=E+1,x(m,_,A[E],A[N%=A.length],!0).length>0)return!0;return!1}for(var Ti,di,Jt,tn,Xn,ni,Ai,gi,ar,Hi,Mi=[],Yn=0,jn=nn.length;Yn<jn;Yn++)_n.push(Yn);for(var f=0,c=2*_n.length;_n.length>0;){if(--c<0){console.log("Infinite Loop! Holes left:"+_n.length+", Probably Hole outside Shape!");break}for(di=f;di<qt.length;di++){for(Jt=qt[di],Ti=-1,Yn=0;Yn<_n.length;Yn++)if(void 0===Mi[ni=Jt.x+":"+Jt.y+":"+(Xn=_n[Yn])]){gn=nn[Xn];for(var d=0;d<gn.length;d++)if(tn=gn[d],un(di,d)&&!an(Jt,tn)&&!On(Jt,tn)){Ti=d,_n.splice(Yn,1),Ai=qt.slice(0,di+1),gi=qt.slice(di),ar=gn.slice(Ti),Hi=gn.slice(0,Ti+1),qt=Ai.concat(ar).concat(Hi).concat(gi),f=di;break}if(Ti>=0)break;Mi[ni]=!0}if(Ti>=0)break}}return qt}(a,h),xt=Pa.triangulate(at,!1);for(z=0,le=xt.length;z<le;z++)for(ve=xt[z],re=0;re<3;re++)void 0!==(Ve=Ue[Ce=ve[re].x+":"+ve[re].y])&&(ve[re]=Ve);return xt.concat()},isClockWise:function(a){return Pa.area(a)<0},b2:function(x,M,F,z){return function a(y,x){var M=1-y;return M*M*x}(x,M)+function h(y,x){return 2*(1-y)*y*x}(x,F)+function g(y,x){return y*y*x}(x,z)},b3:function(M,F,z,le,re){return function a(x,M){var F=1-x;return F*F*F*M}(M,F)+function h(x,M){var F=1-x;return 3*F*F*x*M}(M,z)+function g(x,M){return 3*(1-x)*x*x*M}(M,le)+function y(x,M){return x*x*x*M}(M,re)}};function nu(a,h){typeof a>"u"?a=[]:(Ms.call(this),this.type="ExtrudeGeometry",a=Array.isArray(a)?a:[a],this.addShapeList(a,h),this.computeFaceNormals())}function hd(a,h){var g=(h=h||{}).font;if(!1===(g&&g.isFont))return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Ms;var y=g.generateShapes(a,h.size,h.curveSegments);h.amount=void 0!==h.height?h.height:50,void 0===h.bevelThickness&&(h.bevelThickness=10),void 0===h.bevelSize&&(h.bevelSize=8),void 0===h.bevelEnabled&&(h.bevelEnabled=!1),nu.call(this,y,h),this.type="TextGeometry"}function la(a,h,g,y,x,M,F){Dr.call(this),this.type="SphereBufferGeometry",this.parameters={radius:a,widthSegments:h,heightSegments:g,phiStart:y,phiLength:x,thetaStart:M,thetaLength:F},a=a||50,h=Math.max(3,Math.floor(h)||8),g=Math.max(2,Math.floor(g)||6),y=void 0!==y?y:0,x=void 0!==x?x:2*Math.PI;for(var z=(M=void 0!==M?M:0)+(F=void 0!==F?F:Math.PI),le=(h+1)*(g+1),re=new gr(new Float32Array(3*le),3),ve=new gr(new Float32Array(3*le),3),Ce=new gr(new Float32Array(2*le),2),Ve=0,Ue=[],We=new on,ft=0;ft<=g;ft++){for(var dt=[],at=ft/g,xt=0;xt<=h;xt++){var St=xt/h,nn=-a*Math.cos(y+St*x)*Math.sin(M+at*F),qt=a*Math.cos(M+at*F),gn=a*Math.sin(y+St*x)*Math.sin(M+at*F);We.set(nn,qt,gn).normalize(),re.setXYZ(Ve,nn,qt,gn),ve.setXYZ(Ve,We.x,We.y,We.z),Ce.setXY(Ve,St,1-at),dt.push(Ve),Ve++}Ue.push(dt)}var un=[];for(ft=0;ft<g;ft++)for(xt=0;xt<h;xt++){var _n=Ue[ft][xt],On=Ue[ft+1][xt],Ti=Ue[ft+1][xt+1];(0!==ft||M>0)&&un.push(Ue[ft][xt+1],_n,Ti),(ft!==g-1||z<Math.PI)&&un.push(_n,On,Ti)}this.setIndex(new(re.count>65535?Bu:zd)(un,1)),this.addAttribute("position",re),this.addAttribute("normal",ve),this.addAttribute("uv",Ce),this.boundingSphere=new Pt(new on,a)}function jo(a,h,g,y,x,M,F){Ms.call(this),this.type="SphereGeometry",this.parameters={radius:a,widthSegments:h,heightSegments:g,phiStart:y,phiLength:x,thetaStart:M,thetaLength:F},this.fromBufferGeometry(new la(a,h,g,y,x,M,F))}function Ns(a,h,g,y,x,M){Dr.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:a,outerRadius:h,thetaSegments:g,phiSegments:y,thetaStart:x,thetaLength:M},a=a||20,h=h||50,x=void 0!==x?x:0,M=void 0!==M?M:2*Math.PI;var We,St,nn,F=((g=void 0!==g?Math.max(3,g):8)+1)*((y=void 0!==y?Math.max(1,y):1)+1),z=g*y*2*3,le=new gr(new(z>65535?Uint32Array:Uint16Array)(z),1),re=new gr(new Float32Array(3*F),3),ve=new gr(new Float32Array(3*F),3),Ce=new gr(new Float32Array(2*F),2),Ve=0,Ue=0,ft=a,dt=(h-a)/y,at=new on,xt=new er;for(St=0;St<=y;St++){for(nn=0;nn<=g;nn++)We=x+nn/g*M,at.x=ft*Math.cos(We),at.y=ft*Math.sin(We),re.setXYZ(Ve,at.x,at.y,at.z),ve.setXYZ(Ve,0,0,1),xt.x=(at.x/h+1)/2,xt.y=(at.y/h+1)/2,Ce.setXY(Ve,xt.x,xt.y),Ve++;ft+=dt}for(St=0;St<y;St++){var qt=St*(g+1);for(nn=0;nn<g;nn++){var gn=We=nn+qt,un=We+g+1,an=We+g+2,_n=We+1;le.setX(Ue,gn),Ue++,le.setX(Ue,un),Ue++,le.setX(Ue,an),Ue++,le.setX(Ue,gn),Ue++,le.setX(Ue,an),Ue++,le.setX(Ue,_n),Ue++}}this.setIndex(le),this.addAttribute("position",re),this.addAttribute("normal",ve),this.addAttribute("uv",Ce)}function ir(a,h,g,y,x,M){Ms.call(this),this.type="RingGeometry",this.parameters={innerRadius:a,outerRadius:h,thetaSegments:g,phiSegments:y,thetaStart:x,thetaLength:M},this.fromBufferGeometry(new Ns(a,h,g,y,x,M))}function km(a,h,g,y){Ms.call(this),this.type="PlaneGeometry",this.parameters={width:a,height:h,widthSegments:g,heightSegments:y},this.fromBufferGeometry(new oa(a,h,g,y))}function wo(a,h,g,y){Dr.call(this),this.type="LatheBufferGeometry",this.parameters={points:a,segments:h,phiStart:g,phiLength:y},h=Math.floor(h)||12,g=g||0,y=y||2*Math.PI,y=As.clamp(y,0,2*Math.PI);var Ce,ft,dt,x=(h+1)*a.length,M=h*a.length*2*3,F=new gr(new(M>65535?Uint32Array:Uint16Array)(M),1),z=new gr(new Float32Array(3*x),3),le=new gr(new Float32Array(2*x),2),re=0,ve=0,Ve=1/h,Ue=new on,We=new er;for(ft=0;ft<=h;ft++){var at=g+ft*Ve*y,xt=Math.sin(at),St=Math.cos(at);for(dt=0;dt<=a.length-1;dt++)Ue.x=a[dt].x*xt,Ue.y=a[dt].y,Ue.z=a[dt].x*St,z.setXYZ(re,Ue.x,Ue.y,Ue.z),We.x=ft/h,We.y=dt/(a.length-1),le.setXY(re,We.x,We.y),re++}for(ft=0;ft<h;ft++)for(dt=0;dt<a.length-1;dt++){var qt=(Ce=dt+ft*a.length)+a.length,gn=Ce+a.length+1,un=Ce+1;F.setX(ve,Ce),ve++,F.setX(ve,qt),ve++,F.setX(ve,un),ve++,F.setX(ve,qt),ve++,F.setX(ve,gn),ve++,F.setX(ve,un),ve++}if(this.setIndex(F),this.addAttribute("position",z),this.addAttribute("uv",le),this.computeVertexNormals(),y===2*Math.PI){var an=this.attributes.normal.array,_n=new on,On=new on,Ti=new on;for(Ce=h*a.length*3,ft=0,dt=0;ft<a.length;ft++,dt+=3)_n.x=an[dt+0],_n.y=an[dt+1],_n.z=an[dt+2],On.x=an[Ce+dt+0],On.y=an[Ce+dt+1],On.z=an[Ce+dt+2],Ti.addVectors(_n,On).normalize(),an[dt+0]=an[Ce+dt+0]=Ti.x,an[dt+1]=an[Ce+dt+1]=Ti.y,an[dt+2]=an[Ce+dt+2]=Ti.z}}function Ef(a,h,g,y){Ms.call(this),this.type="LatheGeometry",this.parameters={points:a,segments:h,phiStart:g,phiLength:y},this.fromBufferGeometry(new wo(a,h,g,y)),this.mergeVertices()}function Zp(a,h){Dr.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:a,curveSegments:h},h=h||12;var g=[],y=[],x=[],M=[],F=0,z=0;if(!1===Array.isArray(a))re(a);else for(var le=0;le<a.length;le++)re(a[le]),this.addGroup(F,z,le),F+=z,z=0;function re(ve){var Ce,Ve,Ue,We=g.length/3,ft=ve.extractPoints(h),dt=ft.shape,at=ft.holes;if(!1===Pa.isClockWise(dt))for(dt=dt.reverse(),Ce=0,Ve=at.length;Ce<Ve;Ce++)!0===Pa.isClockWise(Ue=at[Ce])&&(at[Ce]=Ue.reverse());var xt=Pa.triangulateShape(dt,at);for(Ce=0,Ve=at.length;Ce<Ve;Ce++)dt=dt.concat(Ue=at[Ce]);for(Ce=0,Ve=dt.length;Ce<Ve;Ce++){var St=dt[Ce];g.push(St.x,St.y,0),y.push(0,0,1),x.push(St.x,St.y)}for(Ce=0,Ve=xt.length;Ce<Ve;Ce++){var nn=xt[Ce];M.push(nn[0]+We,nn[1]+We,nn[2]+We),z+=3}}this.setIndex(new(M.length>65535?Bu:zd)(M,1)),this.addAttribute("position",new os(g,3)),this.addAttribute("normal",new os(y,3)),this.addAttribute("uv",new os(x,2))}function Qp(a,h){Ms.call(this),this.type="ShapeGeometry","object"==typeof h&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),h=h.curveSegments),this.parameters={shapes:a,curveSegments:h},this.fromBufferGeometry(new Zp(a,h)),this.mergeVertices()}function _l(a,h){Dr.call(this),h=void 0!==h?h:1;var g=Math.cos(As.DEG2RAD*h),y=[0,0],x={};function M(xt,St){return xt-St}var z,F=["a","b","c"];a.isBufferGeometry?(z=new Ms).fromBufferGeometry(a):z=a.clone(),z.mergeVertices(),z.computeFaceNormals();for(var le=z.vertices,re=z.faces,ve=0,Ce=re.length;ve<Ce;ve++)for(var Ve=re[ve],Ue=0;Ue<3;Ue++)y[0]=Ve[F[Ue]],y[1]=Ve[F[(Ue+1)%3]],y.sort(M),void 0===x[We=y.toString()]?x[We]={vert1:y[0],vert2:y[1],face1:ve,face2:void 0}:x[We].face2=ve;var ft=[];for(var We in x){var dt=x[We];if(void 0===dt.face2||re[dt.face1].normal.dot(re[dt.face2].normal)<=g){var at=le[dt.vert1];ft.push(at.x),ft.push(at.y),ft.push(at.z),ft.push((at=le[dt.vert2]).x),ft.push(at.y),ft.push(at.z)}}this.addAttribute("position",new os(ft,3))}function Tf(a,h,g,y,x,M,F,z){Dr.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:a,radiusBottom:h,height:g,radialSegments:y,heightSegments:x,openEnded:M,thetaStart:F,thetaLength:z};var le=this;a=void 0!==a?a:20,h=void 0!==h?h:20,g=void 0!==g?g:100,y=Math.floor(y)||8,x=Math.floor(x)||1,M=void 0!==M&&M,F=void 0!==F?F:0,z=void 0!==z?z:2*Math.PI;var re=0;!1===M&&(a>0&&re++,h>0&&re++);var ve=function qt(){var _n=(y+1)*(x+1);return!1===M&&(_n+=(y+1)*re+y*re),_n}(),Ce=function gn(){var _n=y*x*2*3;return!1===M&&(_n+=y*re*3),_n}(),Ve=new gr(new(Ce>65535?Uint32Array:Uint16Array)(Ce),1),Ue=new gr(new Float32Array(3*ve),3),We=new gr(new Float32Array(3*ve),3),ft=new gr(new Float32Array(2*ve),2),dt=0,at=0,xt=[],St=g/2,nn=0;function an(_n){var On,Ti,di,Jt=new er,tn=new on,Xn=0,ni=!0===_n?a:h,Mi=!0===_n?1:-1;for(Ti=dt,On=1;On<=y;On++)Ue.setXYZ(dt,0,St*Mi,0),We.setXYZ(dt,0,Mi,0),Jt.x=.5,Jt.y=.5,ft.setXY(dt,Jt.x,Jt.y),dt++;for(di=dt,On=0;On<=y;On++){var gi=On/y*z+F,ar=Math.cos(gi),Hi=Math.sin(gi);tn.x=ni*Hi,tn.y=St*Mi,tn.z=ni*ar,Ue.setXYZ(dt,tn.x,tn.y,tn.z),We.setXYZ(dt,0,Mi,0),Jt.x=.5*ar+.5,Jt.y=.5*Hi*Mi+.5,ft.setXY(dt,Jt.x,Jt.y),dt++}for(On=0;On<y;On++){var Yn=Ti+On,jn=di+On;!0===_n?(Ve.setX(at,jn),at++,Ve.setX(at,jn+1),at++,Ve.setX(at,Yn),at++):(Ve.setX(at,jn+1),at++,Ve.setX(at,jn),at++,Ve.setX(at,Yn),at++),Xn+=3}le.addGroup(nn,Xn,!0===_n?1:2),nn+=Xn}(function un(){var _n,On,Ti=new on,di=new on,Jt=0,tn=(h-a)/g;for(On=0;On<=x;On++){var Xn=[],ni=On/x,Mi=ni*(h-a)+a;for(_n=0;_n<=y;_n++){var Ai=_n/y,gi=Ai*z+F,ar=Math.sin(gi),Hi=Math.cos(gi);di.x=Mi*ar,di.y=-ni*g+St,di.z=Mi*Hi,Ue.setXYZ(dt,di.x,di.y,di.z),Ti.set(ar,tn,Hi).normalize(),We.setXYZ(dt,Ti.x,Ti.y,Ti.z),ft.setXY(dt,Ai,1-ni),Xn.push(dt),dt++}xt.push(Xn)}for(_n=0;_n<y;_n++)for(On=0;On<x;On++){var jn=xt[On+1][_n],f=xt[On+1][_n+1],c=xt[On][_n+1];Ve.setX(at,xt[On][_n]),at++,Ve.setX(at,jn),at++,Ve.setX(at,c),at++,Ve.setX(at,jn),at++,Ve.setX(at,f),at++,Ve.setX(at,c),at++,Jt+=6}le.addGroup(nn,Jt,0),nn+=Jt})(),!1===M&&(a>0&&an(!0),h>0&&an(!1)),this.setIndex(Ve),this.addAttribute("position",Ue),this.addAttribute("normal",We),this.addAttribute("uv",ft)}function Jl(a,h,g,y,x,M,F,z){Ms.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:a,radiusBottom:h,height:g,radialSegments:y,heightSegments:x,openEnded:M,thetaStart:F,thetaLength:z},this.fromBufferGeometry(new Tf(a,h,g,y,x,M,F,z)),this.mergeVertices()}function Jp(a,h,g,y,x,M,F){Jl.call(this,0,a,h,g,y,x,M,F),this.type="ConeGeometry",this.parameters={radius:a,height:h,radialSegments:g,heightSegments:y,openEnded:x,thetaStart:M,thetaLength:F}}function eg(a,h,g,y,x,M,F){Tf.call(this,0,a,h,g,y,x,M,F),this.type="ConeBufferGeometry",this.parameters={radius:a,height:h,radialSegments:g,heightSegments:y,openEnded:x,thetaStart:M,thetaLength:F}}function Ra(a,h,g,y){Dr.call(this),this.type="CircleBufferGeometry",this.parameters={radius:a,segments:h,thetaStart:g,thetaLength:y},a=a||50,h=void 0!==h?Math.max(3,h):8,g=void 0!==g?g:0,y=void 0!==y?y:2*Math.PI;var x=h+2,M=new Float32Array(3*x),F=new Float32Array(3*x),z=new Float32Array(2*x);F[2]=1,z[0]=.5,z[1]=.5;for(var le=0,re=3,ve=2;le<=h;le++,re+=3,ve+=2){var Ce=g+le/h*y;M[re]=a*Math.cos(Ce),M[re+1]=a*Math.sin(Ce),F[re+2]=1,z[ve]=(M[re]/a+1)/2,z[ve+1]=(M[re+1]/a+1)/2}var Ve=[];for(re=1;re<=h;re++)Ve.push(re,re+1,0);this.setIndex(new gr(new Uint16Array(Ve),1)),this.addAttribute("position",new gr(M,3)),this.addAttribute("normal",new gr(F,3)),this.addAttribute("uv",new gr(z,2)),this.boundingSphere=new Pt(new on,a)}function Bl(a,h,g,y){Ms.call(this),this.type="CircleGeometry",this.parameters={radius:a,segments:h,thetaStart:g,thetaLength:y},this.fromBufferGeometry(new Ra(a,h,g,y))}function Il(a,h,g,y,x,M){Ms.call(this),this.type="BoxGeometry",this.parameters={width:a,height:h,depth:g,widthSegments:y,heightSegments:x,depthSegments:M},this.fromBufferGeometry(new Nl(a,h,g,y,x,M)),this.mergeVertices()}(nu.prototype=Object.create(Ms.prototype)).constructor=nu,nu.prototype.addShapeList=function(a,h){for(var g=a.length,y=0;y<g;y++)this.addShape(a[y],h)},nu.prototype.addShape=function(a,h){var ve,Ue,We,ft,dt,g=void 0!==h.amount?h.amount:100,y=void 0!==h.bevelThickness?h.bevelThickness:6,x=void 0!==h.bevelSize?h.bevelSize:y-2,M=void 0!==h.bevelSegments?h.bevelSegments:3,F=void 0===h.bevelEnabled||h.bevelEnabled,z=void 0!==h.curveSegments?h.curveSegments:12,le=void 0!==h.steps?h.steps:1,re=h.extrudePath,Ce=!1,Ve=void 0!==h.UVGenerator?h.UVGenerator:nu.WorldUVGenerator;re&&(ve=re.getSpacedPoints(le),Ce=!0,F=!1,Ue=void 0!==h.frames?h.frames:re.computeFrenetFrames(le,!1),We=new on,ft=new on,dt=new on),F||(M=0,y=0,x=0);var at,xt,St,nn=this,qt=this.vertices.length,gn=a.extractPoints(z),un=gn.shape,an=gn.holes,_n=!Pa.isClockWise(un);if(_n){for(un=un.reverse(),xt=0,St=an.length;xt<St;xt++)Pa.isClockWise(at=an[xt])&&(an[xt]=at.reverse());_n=!1}var On=Pa.triangulateShape(un,an),Ti=un;for(xt=0,St=an.length;xt<St;xt++)un=un.concat(at=an[xt]);function di(me,ye,De){return ye||console.error("THREE.ExtrudeGeometry: vec does not exist"),ye.clone().multiplyScalar(De).add(me)}var Jt,tn,Xn,ni,Mi,gi,Ai=un.length,ar=On.length;function Hi(me,ye,De){var je,qe,ct=1,nt=me.x-ye.x,Ct=me.y-ye.y,Gt=De.x-me.x,Wt=De.y-me.y,It=nt*nt+Ct*Ct;if(Math.abs(nt*Wt-Ct*Gt)>Number.EPSILON){var Dt=Math.sqrt(It),Zt=Math.sqrt(Gt*Gt+Wt*Wt),Kt=ye.x-Ct/Dt,ut=ye.y+nt/Dt,An=((De.x-Wt/Zt-Kt)*Wt-(De.y+Gt/Zt-ut)*Gt)/(nt*Wt-Ct*Gt),sn=(je=Kt+nt*An-me.x)*je+(qe=ut+Ct*An-me.y)*qe;if(sn<=2)return new er(je,qe);ct=Math.sqrt(sn/2)}else{var pn=!1;nt>Number.EPSILON?Gt>Number.EPSILON&&(pn=!0):nt<-Number.EPSILON?Gt<-Number.EPSILON&&(pn=!0):Math.sign(Ct)===Math.sign(Wt)&&(pn=!0),pn?(je=-Ct,qe=nt,ct=Math.sqrt(It)):(je=nt,qe=Ct,ct=Math.sqrt(It/2))}return new er(je/ct,qe/ct)}for(var Yn=[],jn=0,f=Ti.length,c=f-1,d=jn+1;jn<f;jn++,c++,d++)c===f&&(c=0),d===f&&(d=0),Yn[jn]=Hi(Ti[jn],Ti[c],Ti[d]);var _,A,m=[],C=Yn.concat();for(xt=0,St=an.length;xt<St;xt++){for(_=[],c=(f=(at=an[xt]).length)-1,d=1+(jn=0);jn<f;jn++,c++,d++)c===f&&(c=0),d===f&&(d=0),_[jn]=Hi(at[jn],at[c],at[d]);m.push(_),C=C.concat(_)}for(Jt=0;Jt<M;Jt++){for(Xn=Jt/M,ni=y*Math.cos(Xn*Math.PI/2),tn=x*Math.sin(Xn*Math.PI/2),jn=0,f=Ti.length;jn<f;jn++)j((Mi=di(Ti[jn],Yn[jn],tn)).x,Mi.y,-ni);for(xt=0,St=an.length;xt<St;xt++)for(_=m[xt],jn=0,f=(at=an[xt]).length;jn<f;jn++)j((Mi=di(at[jn],_[jn],tn)).x,Mi.y,-ni)}for(tn=x,jn=0;jn<Ai;jn++)Mi=F?di(un[jn],C[jn],tn):un[jn],Ce?(ft.copy(Ue.normals[0]).multiplyScalar(Mi.x),We.copy(Ue.binormals[0]).multiplyScalar(Mi.y),dt.copy(ve[0]).add(ft).add(We),j(dt.x,dt.y,dt.z)):j(Mi.x,Mi.y,0);for(A=1;A<=le;A++)for(jn=0;jn<Ai;jn++)Mi=F?di(un[jn],C[jn],tn):un[jn],Ce?(ft.copy(Ue.normals[A]).multiplyScalar(Mi.x),We.copy(Ue.binormals[A]).multiplyScalar(Mi.y),dt.copy(ve[A]).add(ft).add(We),j(dt.x,dt.y,dt.z)):j(Mi.x,Mi.y,g/le*A);for(Jt=M-1;Jt>=0;Jt--){for(Xn=Jt/M,ni=y*Math.cos(Xn*Math.PI/2),tn=x*Math.sin(Xn*Math.PI/2),jn=0,f=Ti.length;jn<f;jn++)j((Mi=di(Ti[jn],Yn[jn],tn)).x,Mi.y,g+ni);for(xt=0,St=an.length;xt<St;xt++)for(_=m[xt],jn=0,f=(at=an[xt]).length;jn<f;jn++)Mi=di(at[jn],_[jn],tn),Ce?j(Mi.x,Mi.y+ve[le-1].y,ve[le-1].x+ni):j(Mi.x,Mi.y,g+ni)}function R(me,ye){var De,je;for(jn=me.length;--jn>=0;){De=jn,(je=jn-1)<0&&(je=me.length-1);var qe=0,ct=le+2*M;for(qe=0;qe<ct;qe++){var nt=Ai*qe,Ct=Ai*(qe+1);he(ye+De+nt,ye+je+nt,ye+je+Ct,ye+De+Ct)}}}function j(me,ye,De){nn.vertices.push(new on(me,ye,De))}function Z(me,ye,De){nn.faces.push(new Bo(me+=qt,ye+=qt,De+=qt,null,null,0));var je=Ve.generateTopUV(nn,me,ye,De);nn.faceVertexUvs[0].push(je)}function he(me,ye,De,je,qe,ct,nt,Ct,Gt){De+=qt,nn.faces.push(new Bo(me+=qt,ye+=qt,je+=qt,null,null,1)),nn.faces.push(new Bo(ye,De,je,null,null,1));var Wt=Ve.generateSideWallUV(nn,me,ye,De,je);nn.faceVertexUvs[0].push([Wt[0],Wt[1],Wt[3]]),nn.faceVertexUvs[0].push([Wt[1],Wt[2],Wt[3]])}(function E(){if(F){var me=0,ye=Ai*me;for(jn=0;jn<ar;jn++)Z((gi=On[jn])[2]+ye,gi[1]+ye,gi[0]+ye);for(ye=Ai*(me=le+2*M),jn=0;jn<ar;jn++)Z((gi=On[jn])[0]+ye,gi[1]+ye,gi[2]+ye)}else{for(jn=0;jn<ar;jn++)Z((gi=On[jn])[2],gi[1],gi[0]);for(jn=0;jn<ar;jn++)Z((gi=On[jn])[0]+Ai*le,gi[1]+Ai*le,gi[2]+Ai*le)}})(),function N(){var me=0;for(R(Ti,me),me+=Ti.length,xt=0,St=an.length;xt<St;xt++)R(at=an[xt],me),me+=at.length}()},nu.WorldUVGenerator={generateTopUV:function(a,h,g,y){var x=a.vertices,M=x[h],F=x[g],z=x[y];return[new er(M.x,M.y),new er(F.x,F.y),new er(z.x,z.y)]},generateSideWallUV:function(a,h,g,y,x){var M=a.vertices,F=M[h],z=M[g],le=M[y],re=M[x];return Math.abs(F.y-z.y)<.01?[new er(F.x,1-F.z),new er(z.x,1-z.z),new er(le.x,1-le.z),new er(re.x,1-re.z)]:[new er(F.y,1-F.z),new er(z.y,1-z.z),new er(le.y,1-le.z),new er(re.y,1-re.z)]}},(hd.prototype=Object.create(nu.prototype)).constructor=hd,(la.prototype=Object.create(Dr.prototype)).constructor=la,(jo.prototype=Object.create(Ms.prototype)).constructor=jo,(Ns.prototype=Object.create(Dr.prototype)).constructor=Ns,(ir.prototype=Object.create(Ms.prototype)).constructor=ir,(km.prototype=Object.create(Ms.prototype)).constructor=km,(wo.prototype=Object.create(Dr.prototype)).constructor=wo,(Ef.prototype=Object.create(Ms.prototype)).constructor=Ef,(Zp.prototype=Object.create(Dr.prototype)).constructor=Zp,(Qp.prototype=Object.create(Ms.prototype)).constructor=Qp,(_l.prototype=Object.create(Dr.prototype)).constructor=_l,(Tf.prototype=Object.create(Dr.prototype)).constructor=Tf,(Jl.prototype=Object.create(Ms.prototype)).constructor=Jl,(Jp.prototype=Object.create(Jl.prototype)).constructor=Jp,(eg.prototype=Object.create(Tf.prototype)).constructor=eg,(Ra.prototype=Object.create(Dr.prototype)).constructor=Ra,(Bl.prototype=Object.create(Ms.prototype)).constructor=Bl,(Il.prototype=Object.create(Ms.prototype)).constructor=Il;var Uu=Object.freeze({WireframeGeometry:fh,ParametricGeometry:jd,ParametricBufferGeometry:Wd,TetrahedronGeometry:zh,TetrahedronBufferGeometry:ul,OctahedronGeometry:cd,OctahedronBufferGeometry:tu,IcosahedronGeometry:hp,IcosahedronBufferGeometry:$d,DodecahedronGeometry:Kp,DodecahedronBufferGeometry:ph,PolyhedronGeometry:Wo,PolyhedronBufferGeometry:Ql,TubeGeometry:Vh,TubeBufferGeometry:qd,TorusKnotGeometry:ud,TorusKnotBufferGeometry:Qa,TorusGeometry:Uh,TorusBufferGeometry:Vu,TextGeometry:hd,SphereBufferGeometry:la,SphereGeometry:jo,RingGeometry:ir,RingBufferGeometry:Ns,PlaneBufferGeometry:oa,PlaneGeometry:km,LatheGeometry:Ef,LatheBufferGeometry:wo,ShapeGeometry:Qp,ShapeBufferGeometry:Zp,ExtrudeGeometry:nu,EdgesGeometry:_l,ConeGeometry:Jp,ConeBufferGeometry:eg,CylinderGeometry:Jl,CylinderBufferGeometry:Tf,CircleBufferGeometry:Ra,CircleGeometry:Bl,BoxBufferGeometry:Nl,BoxGeometry:Il});function Xd(){eu.call(this,{uniforms:sl.merge([us.lights,{opacity:{value:1}}]),vertexShader:$s.shadow_vert,fragmentShader:$s.shadow_frag}),this.lights=!0,this.transparent=!0,Object.defineProperties(this,{opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(a){this.uniforms.opacity.value=a}}})}function Ga(a){eu.call(this,a),this.type="RawShaderMaterial"}function yu(a){this.uuid=As.generateUUID(),this.type="MultiMaterial",this.materials=Array.isArray(a)?a:[],this.visible=!0}function Hu(a){Ks.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Xr(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Xr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new er(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(a)}function Gu(a){Hu.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(a)}function Sl(a){Ks.call(this),this.type="MeshPhongMaterial",this.color=new Xr(16777215),this.specular=new Xr(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Xr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new er(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=et,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(a)}function ka(a){Sl.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(a)}function ec(a){Ks.call(this,a),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new er(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(a)}function dp(a){Ks.call(this),this.type="MeshLambertMaterial",this.color=new Xr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Xr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=et,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(a)}function dc(a){Ks.call(this),this.type="LineDashedMaterial",this.color=new Xr(16777215),this.linewidth=1,this.scale=1,this.dashSize=3,this.gapSize=1,this.lights=!1,this.setValues(a)}(Xd.prototype=Object.create(eu.prototype)).constructor=Xd,Xd.prototype.isShadowMaterial=!0,(Ga.prototype=Object.create(eu.prototype)).constructor=Ga,Ga.prototype.isRawShaderMaterial=!0,yu.prototype={constructor:yu,isMultiMaterial:!0,toJSON:function(a){for(var h={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},g=this.materials,y=0,x=g.length;y<x;y++){var M=g[y].toJSON(a);delete M.metadata,h.materials.push(M)}return h.visible=this.visible,h},clone:function(){for(var a=new this.constructor,h=0;h<this.materials.length;h++)a.materials.push(this.materials[h].clone());return a.visible=this.visible,a}},(Hu.prototype=Object.create(Ks.prototype)).constructor=Hu,Hu.prototype.isMeshStandardMaterial=!0,Hu.prototype.copy=function(a){return Ks.prototype.copy.call(this,a),this.defines={STANDARD:""},this.color.copy(a.color),this.roughness=a.roughness,this.metalness=a.metalness,this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.roughnessMap=a.roughnessMap,this.metalnessMap=a.metalnessMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.envMapIntensity=a.envMapIntensity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.morphNormals=a.morphNormals,this},(Gu.prototype=Object.create(Hu.prototype)).constructor=Gu,Gu.prototype.isMeshPhysicalMaterial=!0,Gu.prototype.copy=function(a){return Hu.prototype.copy.call(this,a),this.defines={PHYSICAL:""},this.reflectivity=a.reflectivity,this.clearCoat=a.clearCoat,this.clearCoatRoughness=a.clearCoatRoughness,this},(Sl.prototype=Object.create(Ks.prototype)).constructor=Sl,Sl.prototype.isMeshPhongMaterial=!0,Sl.prototype.copy=function(a){return Ks.prototype.copy.call(this,a),this.color.copy(a.color),this.specular.copy(a.specular),this.shininess=a.shininess,this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.specularMap=a.specularMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.combine=a.combine,this.reflectivity=a.reflectivity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.morphNormals=a.morphNormals,this},(ka.prototype=Object.create(Sl.prototype)).constructor=ka,ka.prototype.isMeshToonMaterial=!0,ka.prototype.copy=function(a){return Sl.prototype.copy.call(this,a),this.gradientMap=a.gradientMap,this},(ec.prototype=Object.create(Ks.prototype)).constructor=ec,ec.prototype.isMeshNormalMaterial=!0,ec.prototype.copy=function(a){return Ks.prototype.copy.call(this,a),this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.morphNormals=a.morphNormals,this},(dp.prototype=Object.create(Ks.prototype)).constructor=dp,dp.prototype.isMeshLambertMaterial=!0,dp.prototype.copy=function(a){return Ks.prototype.copy.call(this,a),this.color.copy(a.color),this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.specularMap=a.specularMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.combine=a.combine,this.reflectivity=a.reflectivity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.morphNormals=a.morphNormals,this},(dc.prototype=Object.create(Ks.prototype)).constructor=dc,dc.prototype.isLineDashedMaterial=!0,dc.prototype.copy=function(a){return Ks.prototype.copy.call(this,a),this.color.copy(a.color),this.linewidth=a.linewidth,this.scale=a.scale,this.dashSize=a.dashSize,this.gapSize=a.gapSize,this};var Ov=Object.freeze({ShadowMaterial:Xd,SpriteMaterial:zu,RawShaderMaterial:Ga,ShaderMaterial:eu,PointsMaterial:kc,MultiMaterial:yu,MeshPhysicalMaterial:Gu,MeshStandardMaterial:Hu,MeshPhongMaterial:Sl,MeshToonMaterial:ka,MeshNormalMaterial:ec,MeshLambertMaterial:dp,MeshDepthMaterial:bi,MeshBasicMaterial:Va,LineDashedMaterial:dc,LineBasicMaterial:cl,Material:Ks}),_u={enabled:!1,files:{},add:function(a,h){!1!==this.enabled&&(this.files[a]=h)},get:function(a){if(!1!==this.enabled)return this.files[a]},remove:function(a){delete this.files[a]},clear:function(){this.files={}}};function El(a,h,g){var y=this,x=!1,M=0,F=0;this.onStart=void 0,this.onLoad=a,this.onProgress=h,this.onError=g,this.itemStart=function(z){F++,!1===x&&void 0!==y.onStart&&y.onStart(z,M,F),x=!0},this.itemEnd=function(z){M++,void 0!==y.onProgress&&y.onProgress(z,M,F),M===F&&(x=!1,void 0!==y.onLoad&&y.onLoad())},this.itemError=function(z){void 0!==y.onError&&y.onError(z)}}var fc=new El;function Do(a){this.manager=void 0!==a?a:fc}function Om(a){this.manager=void 0!==a?a:fc,this._parser=null}Object.assign(Do.prototype,{load:function(a,h,g,y){void 0===a&&(a=""),void 0!==this.path&&(a=this.path+a);var x=this,M=_u.get(a);if(void 0!==M)return x.manager.itemStart(a),setTimeout(function(){h&&h(M),x.manager.itemEnd(a)},0),M;var z=a.match(/^data:(.*?)(;base64)?,(.*)$/);if(z){var le=z[1],re=!!z[2],ve=z[3];ve=window.decodeURIComponent(ve),re&&(ve=window.atob(ve));try{var Ce,Ve=(this.responseType||"").toLowerCase();switch(Ve){case"arraybuffer":case"blob":Ce=new ArrayBuffer(ve.length);for(var Ue=new Uint8Array(Ce),We=0;We<ve.length;We++)Ue[We]=ve.charCodeAt(We);"blob"===Ve&&(Ce=new Blob([Ce],{type:le}));break;case"document":var ft=new DOMParser;Ce=ft.parseFromString(ve,le);break;case"json":Ce=JSON.parse(ve);break;default:Ce=ve}window.setTimeout(function(){h&&h(Ce),x.manager.itemEnd(a)},0)}catch(at){window.setTimeout(function(){y&&y(at),x.manager.itemError(a)},0)}}else{var dt=new XMLHttpRequest;dt.open("GET",a,!0),dt.addEventListener("load",function(at){var xt=at.target.response;_u.add(a,xt),200===this.status?(h&&h(xt),x.manager.itemEnd(a)):0===this.status?(console.warn("THREE.FileLoader: HTTP Status 0 received."),h&&h(xt),x.manager.itemEnd(a)):(y&&y(at),x.manager.itemError(a))},!1),void 0!==g&&dt.addEventListener("progress",function(at){g(at)},!1),dt.addEventListener("error",function(at){y&&y(at),x.manager.itemError(a)},!1),void 0!==this.responseType&&(dt.responseType=this.responseType),void 0!==this.withCredentials&&(dt.withCredentials=this.withCredentials),dt.overrideMimeType&&dt.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),dt.send(null)}return x.manager.itemStart(a),dt},setPath:function(a){return this.path=a,this},setResponseType:function(a){return this.responseType=a,this},setWithCredentials:function(a){return this.withCredentials=a,this},setMimeType:function(a){return this.mimeType=a,this}}),Object.assign(Om.prototype,{load:function(a,h,g,y){var x=this,M=[],F=new Oc;F.image=M;var z=new Do(this.manager);function le(Ve){z.load(a[Ve],function(Ue){var We=x._parser(Ue,!0);M[Ve]={width:We.width,height:We.height,format:We.format,mipmaps:We.mipmaps},6===(re+=1)&&(1===We.mipmapCount&&(F.minFilter=Sa),F.format=We.format,F.needsUpdate=!0,h&&h(F))},g,y)}if(z.setPath(this.path),z.setResponseType("arraybuffer"),Array.isArray(a))for(var re=0,ve=0,Ce=a.length;ve<Ce;++ve)le(ve);else z.load(a,function(Ve){var Ue=x._parser(Ve,!0);if(Ue.isCubemap)for(var We=Ue.mipmaps.length/Ue.mipmapCount,ft=0;ft<We;ft++){M[ft]={mipmaps:[]};for(var dt=0;dt<Ue.mipmapCount;dt++)M[ft].mipmaps.push(Ue.mipmaps[ft*Ue.mipmapCount+dt]),M[ft].format=Ue.format,M[ft].width=Ue.width,M[ft].height=Ue.height}else F.image.width=Ue.width,F.image.height=Ue.height,F.mipmaps=Ue.mipmaps;1===Ue.mipmapCount&&(F.minFilter=Sa),F.format=Ue.format,F.needsUpdate=!0,h&&h(F)},g,y);return F},setPath:function(a){return this.path=a,this}});var tc=zl;function zl(a){this.manager=void 0!==a?a:fc,this._parser=null}function Yg(a){this.manager=void 0!==a?a:fc}function Fm(a){this.manager=void 0!==a?a:fc}function Hh(a){this.manager=void 0!==a?a:fc}function Js(a,h){Cr.call(this),this.type="Light",this.color=new Xr(a),this.intensity=void 0!==h?h:1,this.receiveShadow=void 0}function pc(a,h,g){Js.call(this,a,g),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(Cr.DefaultUp),this.updateMatrix(),this.groundColor=new Xr(h)}function gh(a){this.camera=a,this.bias=0,this.radius=1,this.mapSize=new er(512,512),this.map=null,this.matrix=new vs}function fp(){gh.call(this,new xl(50,1,.5,500))}function Gh(a,h,g,y,x,M){Js.call(this,a,h),this.type="SpotLight",this.position.copy(Cr.DefaultUp),this.updateMatrix(),this.target=new Cr,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(F){this.intensity=F/Math.PI}}),this.distance=void 0!==g?g:0,this.angle=void 0!==y?y:Math.PI/3,this.penumbra=void 0!==x?x:0,this.decay=void 0!==M?M:1,this.shadow=new fp}function bu(a,h,g,y){Js.call(this,a,h),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(x){this.intensity=x/(4*Math.PI)}}),this.distance=void 0!==g?g:0,this.decay=void 0!==y?y:1,this.shadow=new gh(new xl(90,1,.5,500))}function Mf(a){gh.call(this,new Vd(-5,5,5,-5,.5,500))}function Df(a,h){Js.call(this,a,h),this.type="DirectionalLight",this.position.copy(Cr.DefaultUp),this.updateMatrix(),this.target=new Cr,this.shadow=new Mf}function Kg(a,h){Js.call(this,a,h),this.type="AmbientLight",this.castShadow=void 0}Object.assign(zl.prototype,{load:function(a,h,g,y){var x=this,M=new ns,F=new Do(this.manager);return F.setResponseType("arraybuffer"),F.load(a,function(z){var le=x._parser(z);!le||(void 0!==le.image?M.image=le.image:void 0!==le.data&&(M.image.width=le.width,M.image.height=le.height,M.image.data=le.data),M.wrapS=void 0!==le.wrapS?le.wrapS:cc,M.wrapT=void 0!==le.wrapT?le.wrapT:cc,M.magFilter=void 0!==le.magFilter?le.magFilter:Sa,M.minFilter=void 0!==le.minFilter?le.minFilter:Ou,M.anisotropy=void 0!==le.anisotropy?le.anisotropy:1,void 0!==le.format&&(M.format=le.format),void 0!==le.type&&(M.type=le.type),void 0!==le.mipmaps&&(M.mipmaps=le.mipmaps),1===le.mipmapCount&&(M.minFilter=Sa),M.needsUpdate=!0,h&&h(M,le))},g,y),M}}),Object.assign(Yg.prototype,{load:function(a,h,g,y){var x=this,M=document.createElementNS("http://www.w3.org/1999/xhtml","img");if(M.onload=function(){M.onload=null,URL.revokeObjectURL(M.src),h&&h(M),x.manager.itemEnd(a)},M.onerror=y,0===a.indexOf("data:"))M.src=a;else if(void 0!==this.crossOrigin)M.crossOrigin=this.crossOrigin,M.src=a;else{var F=new Do;F.setPath(this.path),F.setResponseType("blob"),F.setWithCredentials(this.withCredentials),F.load(a,function(z){M.src=URL.createObjectURL(z)},g,y)}return x.manager.itemStart(a),M},setCrossOrigin:function(a){return this.crossOrigin=a,this},setWithCredentials:function(a){return this.withCredentials=a,this},setPath:function(a){return this.path=a,this}}),Object.assign(Fm.prototype,{load:function(a,h,g,y){var x=new Od,M=new Yg(this.manager);M.setCrossOrigin(this.crossOrigin),M.setPath(this.path);var F=0;function z(re){M.load(a[re],function(ve){x.images[re]=ve,6==++F&&(x.needsUpdate=!0,h&&h(x))},void 0,y)}for(var le=0;le<a.length;++le)z(le);return x},setCrossOrigin:function(a){return this.crossOrigin=a,this},setPath:function(a){return this.path=a,this}}),Object.assign(Hh.prototype,{load:function(a,h,g,y){var x=new Xo,M=new Yg(this.manager);return M.setCrossOrigin(this.crossOrigin),M.setWithCredentials(this.withCredentials),M.setPath(this.path),M.load(a,function(F){var z=a.search(/\.(jpg|jpeg)$/)>0||0===a.search(/^data\:image\/jpeg/);x.format=z?Ic:rl,x.image=F,x.needsUpdate=!0,void 0!==h&&h(x)},g,y),x},setCrossOrigin:function(a){return this.crossOrigin=a,this},setWithCredentials:function(a){return this.withCredentials=a,this},setPath:function(a){return this.path=a,this}}),Js.prototype=Object.assign(Object.create(Cr.prototype),{constructor:Js,isLight:!0,copy:function(a){return Cr.prototype.copy.call(this,a),this.color.copy(a.color),this.intensity=a.intensity,this},toJSON:function(a){var h=Cr.prototype.toJSON.call(this,a);return h.object.color=this.color.getHex(),h.object.intensity=this.intensity,void 0!==this.groundColor&&(h.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(h.object.distance=this.distance),void 0!==this.angle&&(h.object.angle=this.angle),void 0!==this.decay&&(h.object.decay=this.decay),void 0!==this.penumbra&&(h.object.penumbra=this.penumbra),void 0!==this.shadow&&(h.object.shadow=this.shadow.toJSON()),h}}),pc.prototype=Object.assign(Object.create(Js.prototype),{constructor:pc,isHemisphereLight:!0,copy:function(a){return Js.prototype.copy.call(this,a),this.groundColor.copy(a.groundColor),this}}),Object.assign(gh.prototype,{copy:function(a){return this.camera=a.camera.clone(),this.bias=a.bias,this.radius=a.radius,this.mapSize.copy(a.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var a={};return 0!==this.bias&&(a.bias=this.bias),1!==this.radius&&(a.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(a.mapSize=this.mapSize.toArray()),a.camera=this.camera.toJSON(!1).object,delete a.camera.matrix,a}}),fp.prototype=Object.assign(Object.create(gh.prototype),{constructor:fp,isSpotLightShadow:!0,update:function(a){var h=2*As.RAD2DEG*a.angle,g=this.mapSize.width/this.mapSize.height,y=a.distance||500,x=this.camera;(h!==x.fov||g!==x.aspect||y!==x.far)&&(x.fov=h,x.aspect=g,x.far=y,x.updateProjectionMatrix())}}),Gh.prototype=Object.assign(Object.create(Js.prototype),{constructor:Gh,isSpotLight:!0,copy:function(a){return Js.prototype.copy.call(this,a),this.distance=a.distance,this.angle=a.angle,this.penumbra=a.penumbra,this.decay=a.decay,this.target=a.target.clone(),this.shadow=a.shadow.clone(),this}}),bu.prototype=Object.assign(Object.create(Js.prototype),{constructor:bu,isPointLight:!0,copy:function(a){return Js.prototype.copy.call(this,a),this.distance=a.distance,this.decay=a.decay,this.shadow=a.shadow.clone(),this}}),Mf.prototype=Object.assign(Object.create(gh.prototype),{constructor:Mf}),Df.prototype=Object.assign(Object.create(Js.prototype),{constructor:Df,isDirectionalLight:!0,copy:function(a){return Js.prototype.copy.call(this,a),this.target=a.target.clone(),this.shadow=a.shadow.clone(),this}}),Kg.prototype=Object.assign(Object.create(Js.prototype),{constructor:Kg,isAmbientLight:!0});var dd,gc={arraySlice:function(a,h,g){return gc.isTypedArray(a)?new a.constructor(a.subarray(h,g)):a.slice(h,g)},convertArray:function(a,h,g){return!a||!g&&a.constructor===h?a:"number"==typeof h.BYTES_PER_ELEMENT?new h(a):Array.prototype.slice.call(a)},isTypedArray:function(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)},getKeyframeOrder:function(a){for(var g=a.length,y=new Array(g),x=0;x!==g;++x)y[x]=x;return y.sort(function h(M,F){return a[M]-a[F]}),y},sortedArray:function(a,h,g){for(var y=a.length,x=new a.constructor(y),M=0,F=0;F!==y;++M)for(var z=g[M]*h,le=0;le!==h;++le)x[F++]=a[z+le];return x},flattenJSON:function(a,h,g,y){for(var x=1,M=a[0];void 0!==M&&void 0===M[y];)M=a[x++];if(void 0!==M){var F=M[y];if(void 0!==F)if(Array.isArray(F))do{void 0!==(F=M[y])&&(h.push(M.time),g.push.apply(g,F)),M=a[x++]}while(void 0!==M);else if(void 0!==F.toArray)do{void 0!==(F=M[y])&&(h.push(M.time),F.toArray(g,g.length)),M=a[x++]}while(void 0!==M);else do{void 0!==(F=M[y])&&(h.push(M.time),g.push(F)),M=a[x++]}while(void 0!==M)}}};function Tl(a,h,g,y){this.parameterPositions=a,this._cachedIndex=0,this.resultBuffer=void 0!==y?y:new h.constructor(g),this.sampleValues=h,this.valueSize=g}function Wh(a,h,g,y){Tl.call(this,a,h,g,y),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Yd(a,h,g,y){Tl.call(this,a,h,g,y)}function Wu(a,h,g,y){Tl.call(this,a,h,g,y)}function qn(a,h,g,y){if(void 0===a)throw new Error("track name is undefined");if(void 0===h||0===h.length)throw new Error("no keyframes in track named "+a);this.name=a,this.times=gc.convertArray(h,this.TimeBufferType),this.values=gc.convertArray(g,this.ValueBufferType),this.setInterpolation(y||this.DefaultInterpolation),this.validate(),this.optimize()}function Lf(a,h,g,y){qn.call(this,a,h,g,y)}function fa(a,h,g,y){Tl.call(this,a,h,g,y)}function Kd(a,h,g,y){qn.call(this,a,h,g,y)}function Cu(a,h,g,y){qn.call(this,a,h,g,y)}function Nm(a,h,g,y){qn.call(this,a,h,g,y)}function Zg(a,h,g){qn.call(this,a,h,g)}function pp(a,h,g,y){qn.call(this,a,h,g,y)}function ju(a,h,g,y){qn.apply(this,arguments)}function Ml(a,h,g){this.name=a,this.tracks=g,this.duration=void 0!==h?h:-1,this.uuid=As.generateUUID(),this.duration<0&&this.resetDuration(),this.optimize()}function Qg(a){this.manager=void 0!==a?a:fc,this.textures={}}function mh(a){this.manager=void 0!==a?a:fc}function iu(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}}function Jg(a){"boolean"==typeof a&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),a=void 0),this.manager=void 0!==a?a:fc,this.withCredentials=!1}function gp(a){this.manager=void 0!==a?a:fc,this.texturePath=""}function Vl(){}function vh(a,h){this.v1=a,this.v2=h}function em(){this.curves=[],this.autoClose=!1}function fd(a,h,g,y,x,M,F,z){this.aX=a,this.aY=h,this.xRadius=g,this.yRadius=y,this.aStartAngle=x,this.aEndAngle=M,this.aClockwise=F,this.aRotation=z||0}Tl.prototype={constructor:Tl,evaluate:function(a){var h=this.parameterPositions,g=this._cachedIndex,y=h[g],x=h[g-1];e:{t:{var M;n:{i:if(!(a<y)){for(var F=g+2;;){if(void 0===y){if(a<x)break i;return this._cachedIndex=g=h.length,this.afterEnd_(g-1,a,x)}if(g===F)break;if(x=y,a<(y=h[++g]))break t}M=h.length;break n}if(a>=x)break e;var z=h[1];for(a<z&&(g=2,x=z),F=g-2;;){if(void 0===x)return this._cachedIndex=0,this.beforeStart_(0,a,y);if(g===F)break;if(y=x,a>=(x=h[--g-1]))break t}M=g,g=0}for(;g<M;){var le=g+M>>>1;a<h[le]?M=le:g=le+1}if(y=h[g],void 0===(x=h[g-1]))return this._cachedIndex=0,this.beforeStart_(0,a,y);if(void 0===y)return this._cachedIndex=g=h.length,this.afterEnd_(g-1,x,a)}this._cachedIndex=g,this.intervalChanged_(g,x,y)}return this.interpolate_(g,x,a,y)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(a){for(var h=this.resultBuffer,g=this.sampleValues,y=this.valueSize,x=a*y,M=0;M!==y;++M)h[M]=g[x+M];return h},interpolate_:function(a,h,g,y){throw new Error("call to abstract method")},intervalChanged_:function(a,h,g){}},Object.assign(Tl.prototype,{beforeStart_:Tl.prototype.copySampleValue_,afterEnd_:Tl.prototype.copySampleValue_}),Wh.prototype=Object.assign(Object.create(Tl.prototype),{constructor:Wh,DefaultSettings_:{endingStart:ds,endingEnd:ds},intervalChanged_:function(a,h,g){var y=this.parameterPositions,x=a-2,M=a+1,F=y[x],z=y[M];if(void 0===F)switch(this.getSettings_().endingStart){case Ea:x=a,F=2*h-g;break;case fs:F=h+y[x=y.length-2]-y[x+1];break;default:x=a,F=g}if(void 0===z)switch(this.getSettings_().endingEnd){case Ea:M=a,z=2*g-h;break;case fs:M=1,z=g+y[1]-y[0];break;default:M=a-1,z=h}var le=.5*(g-h),re=this.valueSize;this._weightPrev=le/(h-F),this._weightNext=le/(z-g),this._offsetPrev=x*re,this._offsetNext=M*re},interpolate_:function(a,h,g,y){for(var x=this.resultBuffer,M=this.sampleValues,F=this.valueSize,z=a*F,le=z-F,re=this._offsetPrev,ve=this._offsetNext,Ce=this._weightPrev,Ve=this._weightNext,Ue=(g-h)/(y-h),We=Ue*Ue,ft=We*Ue,dt=-Ce*ft+2*Ce*We-Ce*Ue,at=(1+Ce)*ft+(-1.5-2*Ce)*We+(-.5+Ce)*Ue+1,xt=(-1-Ve)*ft+(1.5+Ve)*We+.5*Ue,St=Ve*ft-Ve*We,nn=0;nn!==F;++nn)x[nn]=dt*M[re+nn]+at*M[le+nn]+xt*M[z+nn]+St*M[ve+nn];return x}}),Yd.prototype=Object.assign(Object.create(Tl.prototype),{constructor:Yd,interpolate_:function(a,h,g,y){for(var x=this.resultBuffer,M=this.sampleValues,F=this.valueSize,z=a*F,le=z-F,re=(g-h)/(y-h),ve=1-re,Ce=0;Ce!==F;++Ce)x[Ce]=M[le+Ce]*ve+M[z+Ce]*re;return x}}),Wu.prototype=Object.assign(Object.create(Tl.prototype),{constructor:Wu,interpolate_:function(a,h,g,y){return this.copySampleValue_(a-1)}}),dd={TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:So,InterpolantFactoryMethodDiscrete:function(a){return new Wu(this.times,this.values,this.getValueSize(),a)},InterpolantFactoryMethodLinear:function(a){return new Yd(this.times,this.values,this.getValueSize(),a)},InterpolantFactoryMethodSmooth:function(a){return new Wh(this.times,this.values,this.getValueSize(),a)},setInterpolation:function(a){var h;switch(a){case Gs:h=this.InterpolantFactoryMethodDiscrete;break;case So:h=this.InterpolantFactoryMethodLinear;break;case Eo:h=this.InterpolantFactoryMethodSmooth}if(void 0!==h)this.createInterpolant=h;else{var g="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(a===this.DefaultInterpolation)throw new Error(g);this.setInterpolation(this.DefaultInterpolation)}console.warn(g)}},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Gs;case this.InterpolantFactoryMethodLinear:return So;case this.InterpolantFactoryMethodSmooth:return Eo}},getValueSize:function(){return this.values.length/this.times.length},shift:function(a){if(0!==a)for(var h=this.times,g=0,y=h.length;g!==y;++g)h[g]+=a;return this},scale:function(a){if(1!==a)for(var h=this.times,g=0,y=h.length;g!==y;++g)h[g]*=a;return this},trim:function(a,h){for(var g=this.times,y=g.length,x=0,M=y-1;x!==y&&g[x]<a;)++x;for(;-1!==M&&g[M]>h;)--M;if(++M,0!==x||M!==y){x>=M&&(x=(M=Math.max(M,1))-1);var F=this.getValueSize();this.times=gc.arraySlice(g,x,M),this.values=gc.arraySlice(this.values,x*F,M*F)}return this},validate:function(){var a=!0,h=this.getValueSize();h-Math.floor(h)!=0&&(console.error("invalid value size in track",this),a=!1);var g=this.times,y=this.values,x=g.length;0===x&&(console.error("track is empty",this),a=!1);for(var M=null,F=0;F!==x;F++){var z=g[F];if("number"==typeof z&&isNaN(z)){console.error("time is not a valid number",this,F,z),a=!1;break}if(null!==M&&M>z){console.error("out of order keys",this,F,z,M),a=!1;break}M=z}if(void 0!==y&&gc.isTypedArray(y)){F=0;for(var le=y.length;F!==le;++F){var re=y[F];if(isNaN(re)){console.error("value is not a valid number",this,F,re),a=!1;break}}}return a},optimize:function(){for(var a=this.times,h=this.values,g=this.getValueSize(),y=this.getInterpolation()===Eo,x=1,M=a.length-1,F=1;F<M;++F){var z=!1,le=a[F];if(le!==a[F+1]&&(1!==F||le!==le[0]))if(y)z=!0;else for(var ve=F*g,Ce=ve-g,Ve=ve+g,Ue=0;Ue!==g;++Ue){var We=h[ve+Ue];if(We!==h[Ce+Ue]||We!==h[Ve+Ue]){z=!0;break}}if(z){if(F!==x){a[x]=a[F];var ft=F*g,dt=x*g;for(Ue=0;Ue!==g;++Ue)h[dt+Ue]=h[ft+Ue]}++x}}if(M>0){for(a[x]=a[M],ft=M*g,dt=x*g,Ue=0;Ue!==g;++Ue)h[dt+Ue]=h[ft+Ue];++x}return x!==a.length&&(this.times=gc.arraySlice(a,0,x),this.values=gc.arraySlice(h,0,x*g)),this}},Lf.prototype=Object.assign(Object.create(dd),{constructor:Lf,ValueTypeName:"vector"}),fa.prototype=Object.assign(Object.create(Tl.prototype),{constructor:fa,interpolate_:function(a,h,g,y){for(var x=this.resultBuffer,M=this.sampleValues,F=this.valueSize,z=a*F,le=(g-h)/(y-h),re=z+F;z!==re;z+=4)kl.slerpFlat(x,0,M,z-F,M,z,le);return x}}),Kd.prototype=Object.assign(Object.create(dd),{constructor:Kd,ValueTypeName:"quaternion",DefaultInterpolation:So,InterpolantFactoryMethodLinear:function(a){return new fa(this.times,this.values,this.getValueSize(),a)},InterpolantFactoryMethodSmooth:void 0}),Cu.prototype=Object.assign(Object.create(dd),{constructor:Cu,ValueTypeName:"number"}),Nm.prototype=Object.assign(Object.create(dd),{constructor:Nm,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:Gs,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Zg.prototype=Object.assign(Object.create(dd),{constructor:Zg,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:Gs,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),pp.prototype=Object.assign(Object.create(dd),{constructor:pp,ValueTypeName:"color"}),ju.prototype=dd,dd.constructor=ju,Object.assign(ju,{parse:function(a){if(void 0===a.type)throw new Error("track type undefined, can not parse");var h=ju._getTrackTypeForValueTypeName(a.type);if(void 0===a.times){var g=[],y=[];gc.flattenJSON(a.keys,g,y,"value"),a.times=g,a.values=y}return void 0!==h.parse?h.parse(a):new h(a.name,a.times,a.values,a.interpolation)},toJSON:function(a){var g,h=a.constructor;if(void 0!==h.toJSON)g=h.toJSON(a);else{g={name:a.name,times:gc.convertArray(a.times,Array),values:gc.convertArray(a.values,Array)};var y=a.getInterpolation();y!==a.DefaultInterpolation&&(g.interpolation=y)}return g.type=a.ValueTypeName,g},_getTrackTypeForValueTypeName:function(a){switch(a.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Cu;case"vector":case"vector2":case"vector3":case"vector4":return Lf;case"color":return pp;case"quaternion":return Kd;case"bool":case"boolean":return Zg;case"string":return Nm}throw new Error("Unsupported typeName: "+a)}}),Ml.prototype={constructor:Ml,resetDuration:function(){for(var h=0,g=0,y=this.tracks.length;g!==y;++g){var x=this.tracks[g];h=Math.max(h,x.times[x.times.length-1])}this.duration=h},trim:function(){for(var a=0;a<this.tracks.length;a++)this.tracks[a].trim(0,this.duration);return this},optimize:function(){for(var a=0;a<this.tracks.length;a++)this.tracks[a].optimize();return this}},Object.assign(Ml,{parse:function(a){for(var h=[],g=a.tracks,y=1/(a.fps||1),x=0,M=g.length;x!==M;++x)h.push(ju.parse(g[x]).scale(y));return new Ml(a.name,a.duration,h)},toJSON:function(a){for(var h=[],g=a.tracks,y={name:a.name,duration:a.duration,tracks:h},x=0,M=g.length;x!==M;++x)h.push(ju.toJSON(g[x]));return y},CreateFromMorphTargetSequence:function(a,h,g,y){for(var x=h.length,M=[],F=0;F<x;F++){var z=[],le=[];z.push((F+x-1)%x,F,(F+1)%x),le.push(0,1,0);var re=gc.getKeyframeOrder(z);z=gc.sortedArray(z,1,re),le=gc.sortedArray(le,1,re),!y&&0===z[0]&&(z.push(x),le.push(le[0])),M.push(new Cu(".morphTargetInfluences["+h[F].name+"]",z,le).scale(1/g))}return new Ml(a,-1,M)},findByName:function(a,h){var g=a;Array.isArray(a)||(g=a.geometry&&a.geometry.animations||a.animations);for(var x=0;x<g.length;x++)if(g[x].name===h)return g[x];return null},CreateClipsFromMorphTargetSequences:function(a,h,g){for(var y={},x=/^([\w-]*?)([\d]+)$/,M=0,F=a.length;M<F;M++){var z=a[M],le=z.name.match(x);if(le&&le.length>1){var ve=y[re=le[1]];ve||(y[re]=ve=[]),ve.push(z)}}var Ce=[];for(var re in y)Ce.push(Ml.CreateFromMorphTargetSequence(re,y[re],h,g));return Ce},parseAnimation:function(a,h){if(!a)return console.error("  no animation in JSONLoader data"),null;for(var g=function(St,nn,qt,gn,un){if(0!==qt.length){var an=[],_n=[];gc.flattenJSON(qt,an,_n,gn),0!==an.length&&un.push(new St(nn,an,_n))}},y=[],x=a.name||"default",M=a.length||-1,F=a.fps||30,z=a.hierarchy||[],le=0;le<z.length;le++){var re=z[le].keys;if(re&&0!==re.length)if(re[0].morphTargets){for(var ve={},Ce=0;Ce<re.length;Ce++)if(re[Ce].morphTargets)for(var Ve=0;Ve<re[Ce].morphTargets.length;Ve++)ve[re[Ce].morphTargets[Ve]]=-1;for(var Ue in ve){var We=[],ft=[];for(Ve=0;Ve!==re[Ce].morphTargets.length;++Ve){var dt=re[Ce];We.push(dt.time),ft.push(dt.morphTarget===Ue?1:0)}y.push(new Cu(".morphTargetInfluence["+Ue+"]",We,ft))}M=ve.length*(F||1)}else{var at=".bones["+h[le].name+"]";g(Lf,at+".position",re,"pos",y),g(Kd,at+".quaternion",re,"rot",y),g(Lf,at+".scale",re,"scl",y)}}return 0===y.length?null:new Ml(x,M,y)}}),Object.assign(Qg.prototype,{load:function(a,h,g,y){var x=this;new Do(x.manager).load(a,function(F){h(x.parse(JSON.parse(F)))},g,y)},setTextures:function(a){this.textures=a},parse:function(a){var h=this.textures;function g(z){return void 0===h[z]&&console.warn("THREE.MaterialLoader: Undefined texture",z),h[z]}var y=new Ov[a.type];if(void 0!==a.uuid&&(y.uuid=a.uuid),void 0!==a.name&&(y.name=a.name),void 0!==a.color&&y.color.setHex(a.color),void 0!==a.roughness&&(y.roughness=a.roughness),void 0!==a.metalness&&(y.metalness=a.metalness),void 0!==a.emissive&&y.emissive.setHex(a.emissive),void 0!==a.specular&&y.specular.setHex(a.specular),void 0!==a.shininess&&(y.shininess=a.shininess),void 0!==a.clearCoat&&(y.clearCoat=a.clearCoat),void 0!==a.clearCoatRoughness&&(y.clearCoatRoughness=a.clearCoatRoughness),void 0!==a.uniforms&&(y.uniforms=a.uniforms),void 0!==a.vertexShader&&(y.vertexShader=a.vertexShader),void 0!==a.fragmentShader&&(y.fragmentShader=a.fragmentShader),void 0!==a.vertexColors&&(y.vertexColors=a.vertexColors),void 0!==a.fog&&(y.fog=a.fog),void 0!==a.shading&&(y.shading=a.shading),void 0!==a.blending&&(y.blending=a.blending),void 0!==a.side&&(y.side=a.side),void 0!==a.opacity&&(y.opacity=a.opacity),void 0!==a.transparent&&(y.transparent=a.transparent),void 0!==a.alphaTest&&(y.alphaTest=a.alphaTest),void 0!==a.depthTest&&(y.depthTest=a.depthTest),void 0!==a.depthWrite&&(y.depthWrite=a.depthWrite),void 0!==a.colorWrite&&(y.colorWrite=a.colorWrite),void 0!==a.wireframe&&(y.wireframe=a.wireframe),void 0!==a.wireframeLinewidth&&(y.wireframeLinewidth=a.wireframeLinewidth),void 0!==a.wireframeLinecap&&(y.wireframeLinecap=a.wireframeLinecap),void 0!==a.wireframeLinejoin&&(y.wireframeLinejoin=a.wireframeLinejoin),void 0!==a.skinning&&(y.skinning=a.skinning),void 0!==a.morphTargets&&(y.morphTargets=a.morphTargets),void 0!==a.size&&(y.size=a.size),void 0!==a.sizeAttenuation&&(y.sizeAttenuation=a.sizeAttenuation),void 0!==a.map&&(y.map=g(a.map)),void 0!==a.alphaMap&&(y.alphaMap=g(a.alphaMap),y.transparent=!0),void 0!==a.bumpMap&&(y.bumpMap=g(a.bumpMap)),void 0!==a.bumpScale&&(y.bumpScale=a.bumpScale),void 0!==a.normalMap&&(y.normalMap=g(a.normalMap)),void 0!==a.normalScale){var x=a.normalScale;!1===Array.isArray(x)&&(x=[x,x]),y.normalScale=(new er).fromArray(x)}if(void 0!==a.displacementMap&&(y.displacementMap=g(a.displacementMap)),void 0!==a.displacementScale&&(y.displacementScale=a.displacementScale),void 0!==a.displacementBias&&(y.displacementBias=a.displacementBias),void 0!==a.roughnessMap&&(y.roughnessMap=g(a.roughnessMap)),void 0!==a.metalnessMap&&(y.metalnessMap=g(a.metalnessMap)),void 0!==a.emissiveMap&&(y.emissiveMap=g(a.emissiveMap)),void 0!==a.emissiveIntensity&&(y.emissiveIntensity=a.emissiveIntensity),void 0!==a.specularMap&&(y.specularMap=g(a.specularMap)),void 0!==a.envMap&&(y.envMap=g(a.envMap)),void 0!==a.reflectivity&&(y.reflectivity=a.reflectivity),void 0!==a.lightMap&&(y.lightMap=g(a.lightMap)),void 0!==a.lightMapIntensity&&(y.lightMapIntensity=a.lightMapIntensity),void 0!==a.aoMap&&(y.aoMap=g(a.aoMap)),void 0!==a.aoMapIntensity&&(y.aoMapIntensity=a.aoMapIntensity),void 0!==a.gradientMap&&(y.gradientMap=g(a.gradientMap)),void 0!==a.materials)for(var M=0,F=a.materials.length;M<F;M++)y.materials.push(this.parse(a.materials[M]));return y}}),Object.assign(mh.prototype,{load:function(a,h,g,y){var x=this;new Do(x.manager).load(a,function(F){h(x.parse(JSON.parse(F)))},g,y)},parse:function(a){var h=new Dr,g=a.data.index,y={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};if(void 0!==g){var x=new y[g.type](g.array);h.setIndex(new gr(x,1))}var M=a.data.attributes;for(var F in M){var z=M[F];x=new y[z.type](z.array),h.addAttribute(F,new gr(x,z.itemSize,z.normalized))}var le=a.data.groups||a.data.drawcalls||a.data.offsets;if(void 0!==le)for(var re=0,ve=le.length;re!==ve;++re){var Ce=le[re];h.addGroup(Ce.start,Ce.count,Ce.materialIndex)}var Ve=a.data.boundingSphere;if(void 0!==Ve){var Ue=new on;void 0!==Ve.center&&Ue.fromArray(Ve.center),h.boundingSphere=new Pt(Ue,Ve.radius)}return h}}),iu.prototype={constructor:iu,crossOrigin:void 0,extractUrlBase:function(a){var h=a.split("/");return 1===h.length?"./":(h.pop(),h.join("/")+"/")},initMaterials:function(a,h,g){for(var y=[],x=0;x<a.length;++x)y[x]=this.createMaterial(a[x],h,g);return y},createMaterial:function(){var a,h,g;return function(x,M,F){void 0===a&&(a=new Xr),void 0===h&&(h=new Hh),void 0===g&&(g=new Qg);var z={};function le(Ve,Ue,We,ft,dt){var St,at=M+Ve,xt=iu.Handlers.get(at);null!==xt?St=xt.load(at):(h.setCrossOrigin(F),St=h.load(at)),void 0!==Ue&&(St.repeat.fromArray(Ue),1!==Ue[0]&&(St.wrapS=ih),1!==Ue[1]&&(St.wrapT=ih)),void 0!==We&&St.offset.fromArray(We),void 0!==ft&&("repeat"===ft[0]&&(St.wrapS=ih),"mirror"===ft[0]&&(St.wrapS=Sh),"repeat"===ft[1]&&(St.wrapT=ih),"mirror"===ft[1]&&(St.wrapT=Sh)),void 0!==dt&&(St.anisotropy=dt);var nn=As.generateUUID();return z[nn]=St,nn}var re={uuid:As.generateUUID(),type:"MeshLambertMaterial"};for(var ve in x){var Ce=x[ve];switch(ve){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"DbgName":re.name=Ce;break;case"blending":re.blending=ue[Ce];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",ve,"is no longer supported.");break;case"colorDiffuse":re.color=a.fromArray(Ce).getHex();break;case"colorSpecular":re.specular=a.fromArray(Ce).getHex();break;case"colorEmissive":re.emissive=a.fromArray(Ce).getHex();break;case"specularCoef":re.shininess=Ce;break;case"shading":"basic"===Ce.toLowerCase()&&(re.type="MeshBasicMaterial"),"phong"===Ce.toLowerCase()&&(re.type="MeshPhongMaterial"),"standard"===Ce.toLowerCase()&&(re.type="MeshStandardMaterial");break;case"mapDiffuse":re.map=le(Ce,x.mapDiffuseRepeat,x.mapDiffuseOffset,x.mapDiffuseWrap,x.mapDiffuseAnisotropy);break;case"mapEmissive":re.emissiveMap=le(Ce,x.mapEmissiveRepeat,x.mapEmissiveOffset,x.mapEmissiveWrap,x.mapEmissiveAnisotropy);break;case"mapLight":re.lightMap=le(Ce,x.mapLightRepeat,x.mapLightOffset,x.mapLightWrap,x.mapLightAnisotropy);break;case"mapAO":re.aoMap=le(Ce,x.mapAORepeat,x.mapAOOffset,x.mapAOWrap,x.mapAOAnisotropy);break;case"mapBump":re.bumpMap=le(Ce,x.mapBumpRepeat,x.mapBumpOffset,x.mapBumpWrap,x.mapBumpAnisotropy);break;case"mapBumpScale":re.bumpScale=Ce;break;case"mapNormal":re.normalMap=le(Ce,x.mapNormalRepeat,x.mapNormalOffset,x.mapNormalWrap,x.mapNormalAnisotropy);break;case"mapNormalFactor":re.normalScale=[Ce,Ce];break;case"mapSpecular":re.specularMap=le(Ce,x.mapSpecularRepeat,x.mapSpecularOffset,x.mapSpecularWrap,x.mapSpecularAnisotropy);break;case"mapMetalness":re.metalnessMap=le(Ce,x.mapMetalnessRepeat,x.mapMetalnessOffset,x.mapMetalnessWrap,x.mapMetalnessAnisotropy);break;case"mapRoughness":re.roughnessMap=le(Ce,x.mapRoughnessRepeat,x.mapRoughnessOffset,x.mapRoughnessWrap,x.mapRoughnessAnisotropy);break;case"mapAlpha":re.alphaMap=le(Ce,x.mapAlphaRepeat,x.mapAlphaOffset,x.mapAlphaWrap,x.mapAlphaAnisotropy);break;case"flipSided":re.side=W;break;case"doubleSided":re.side=ae;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),re.opacity=Ce;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":re[ve]=Ce;break;case"vertexColors":!0===Ce&&(re.vertexColors=B),"face"===Ce&&(re.vertexColors=oe);break;default:console.error("THREE.Loader.createMaterial: Unsupported",ve,Ce)}}return"MeshBasicMaterial"===re.type&&delete re.emissive,"MeshPhongMaterial"!==re.type&&delete re.specular,re.opacity<1&&(re.transparent=!0),g.setTextures(z),g.parse(re)}}()},iu.Handlers={handlers:[],add:function(a,h){this.handlers.push(a,h)},get:function(a){for(var h=this.handlers,g=0,y=h.length;g<y;g+=2){var M=h[g+1];if(h[g].test(a))return M}return null}},Object.assign(Jg.prototype,{load:function(a,h,g,y){var x=this,M=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:iu.prototype.extractUrlBase(a),F=new Do(this.manager);F.setWithCredentials(this.withCredentials),F.load(a,function(z){var le=JSON.parse(z),re=le.metadata;if(void 0!==re){var ve=re.type;if(void 0!==ve){if("object"===ve.toLowerCase())return void console.error("THREE.JSONLoader: "+a+" should be loaded with THREE.ObjectLoader instead.");if("scene"===ve.toLowerCase())return void console.error("THREE.JSONLoader: "+a+" should be loaded with THREE.SceneLoader instead.")}}var Ce=x.parse(le,M);h(Ce.geometry,Ce.materials)},g,y)},setTexturePath:function(a){this.texturePath=a},parse:function(a,h){var g=new Ms,y=void 0!==a.scale?1/a.scale:1;if(function x(re){function ve(m,_){return m&1<<_}var Ce,Ve,Ue,We,ft,dt,at,xt,St,nn,qt,gn,un,an,_n,On,Ti,di,Jt,tn,Xn,ni,Mi,Ai,gi,Yn=a.faces,jn=a.vertices,f=a.normals,c=a.colors,d=0;if(void 0!==a.uvs){for(Ce=0;Ce<a.uvs.length;Ce++)a.uvs[Ce].length&&d++;for(Ce=0;Ce<d;Ce++)g.faceVertexUvs[Ce]=[]}for(We=0,ft=jn.length;We<ft;)(di=new on).x=jn[We++]*re,di.y=jn[We++]*re,di.z=jn[We++]*re,g.vertices.push(di);for(We=0,ft=Yn.length;We<ft;)if(qt=ve(nn=Yn[We++],0),gn=ve(nn,1),un=ve(nn,3),an=ve(nn,4),_n=ve(nn,5),On=ve(nn,6),Ti=ve(nn,7),qt){if((tn=new Bo).a=Yn[We],tn.b=Yn[We+1],tn.c=Yn[We+3],(Xn=new Bo).a=Yn[We+1],Xn.b=Yn[We+2],Xn.c=Yn[We+3],We+=4,gn&&(St=Yn[We++],tn.materialIndex=St,Xn.materialIndex=St),Ue=g.faces.length,un)for(Ce=0;Ce<d;Ce++)for(Ai=a.uvs[Ce],g.faceVertexUvs[Ce][Ue]=[],g.faceVertexUvs[Ce][Ue+1]=[],Ve=0;Ve<4;Ve++)gi=new er(Ai[2*(xt=Yn[We++])],Ai[2*xt+1]),2!==Ve&&g.faceVertexUvs[Ce][Ue].push(gi),0!==Ve&&g.faceVertexUvs[Ce][Ue+1].push(gi);if(an&&(at=3*Yn[We++],tn.normal.set(f[at++],f[at++],f[at]),Xn.normal.copy(tn.normal)),_n)for(Ce=0;Ce<4;Ce++)at=3*Yn[We++],Mi=new on(f[at++],f[at++],f[at]),2!==Ce&&tn.vertexNormals.push(Mi),0!==Ce&&Xn.vertexNormals.push(Mi);if(On&&(dt=Yn[We++],tn.color.setHex(ni=c[dt]),Xn.color.setHex(ni)),Ti)for(Ce=0;Ce<4;Ce++)ni=c[dt=Yn[We++]],2!==Ce&&tn.vertexColors.push(new Xr(ni)),0!==Ce&&Xn.vertexColors.push(new Xr(ni));g.faces.push(tn),g.faces.push(Xn)}else{if((Jt=new Bo).a=Yn[We++],Jt.b=Yn[We++],Jt.c=Yn[We++],gn&&(St=Yn[We++],Jt.materialIndex=St),Ue=g.faces.length,un)for(Ce=0;Ce<d;Ce++)for(Ai=a.uvs[Ce],g.faceVertexUvs[Ce][Ue]=[],Ve=0;Ve<3;Ve++)gi=new er(Ai[2*(xt=Yn[We++])],Ai[2*xt+1]),g.faceVertexUvs[Ce][Ue].push(gi);if(an&&(at=3*Yn[We++],Jt.normal.set(f[at++],f[at++],f[at])),_n)for(Ce=0;Ce<3;Ce++)at=3*Yn[We++],Mi=new on(f[at++],f[at++],f[at]),Jt.vertexNormals.push(Mi);if(On&&(dt=Yn[We++],Jt.color.setHex(c[dt])),Ti)for(Ce=0;Ce<3;Ce++)dt=Yn[We++],Jt.vertexColors.push(new Xr(c[dt]));g.faces.push(Jt)}}(y),function M(){var re=void 0!==a.influencesPerVertex?a.influencesPerVertex:2;if(a.skinWeights)for(var ve=0,Ce=a.skinWeights.length;ve<Ce;ve+=re)g.skinWeights.push(new Yo(a.skinWeights[ve],re>1?a.skinWeights[ve+1]:0,re>2?a.skinWeights[ve+2]:0,re>3?a.skinWeights[ve+3]:0));if(a.skinIndices)for(ve=0,Ce=a.skinIndices.length;ve<Ce;ve+=re)g.skinIndices.push(new Yo(a.skinIndices[ve],re>1?a.skinIndices[ve+1]:0,re>2?a.skinIndices[ve+2]:0,re>3?a.skinIndices[ve+3]:0));g.bones=a.bones,g.bones&&g.bones.length>0&&(g.skinWeights.length!==g.skinIndices.length||g.skinIndices.length!==g.vertices.length)&&console.warn("When skinning, number of vertices ("+g.vertices.length+"), skinIndices ("+g.skinIndices.length+"), and skinWeights ("+g.skinWeights.length+") should match.")}(),function F(re){if(void 0!==a.morphTargets)for(var ve=0,Ce=a.morphTargets.length;ve<Ce;ve++){g.morphTargets[ve]={},g.morphTargets[ve].name=a.morphTargets[ve].name,g.morphTargets[ve].vertices=[];for(var Ve=g.morphTargets[ve].vertices,Ue=a.morphTargets[ve].vertices,We=0,ft=Ue.length;We<ft;We+=3){var dt=new on;dt.x=Ue[We]*re,dt.y=Ue[We+1]*re,dt.z=Ue[We+2]*re,Ve.push(dt)}}if(void 0!==a.morphColors&&a.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');var at=g.faces,xt=a.morphColors[0].colors;for(ve=0,Ce=at.length;ve<Ce;ve++)at[ve].color.fromArray(xt,3*ve)}}(y),function z(){var re=[],ve=[];void 0!==a.animation&&ve.push(a.animation),void 0!==a.animations&&(a.animations.length?ve=ve.concat(a.animations):ve.push(a.animations));for(var Ce=0;Ce<ve.length;Ce++){var Ve=Ml.parseAnimation(ve[Ce],g.bones);Ve&&re.push(Ve)}if(g.morphTargets){var Ue=Ml.CreateClipsFromMorphTargetSequences(g.morphTargets,10);re=re.concat(Ue)}re.length>0&&(g.animations=re)}(),g.computeFaceNormals(),g.computeBoundingSphere(),void 0===a.materials||0===a.materials.length)return{geometry:g};var le=iu.prototype.initMaterials(a.materials,h,this.crossOrigin);return{geometry:g,materials:le}}}),Object.assign(gp.prototype,{load:function(a,h,g,y){""===this.texturePath&&(this.texturePath=a.substring(0,a.lastIndexOf("/")+1));var x=this;new Do(x.manager).load(a,function(F){var z=null;try{z=JSON.parse(F)}catch(re){return void console.error("THREE:ObjectLoader: Can't parse "+a+".",re.message)}var le=z.metadata;void 0!==le&&void 0!==le.type&&"geometry"!==le.type.toLowerCase()?x.parse(z,h):console.error("THREE.ObjectLoader: Can't load "+a+". Use THREE.JSONLoader instead.")},g,y)},setTexturePath:function(a){this.texturePath=a},setCrossOrigin:function(a){this.crossOrigin=a},parse:function(a,h){var g=this.parseGeometries(a.geometries),y=this.parseImages(a.images,function(){void 0!==h&&h(F)}),x=this.parseTextures(a.textures,y),M=this.parseMaterials(a.materials,x),F=this.parseObject(a.object,g,M);return a.animations&&(F.animations=this.parseAnimations(a.animations)),(void 0===a.images||0===a.images.length)&&void 0!==h&&h(F),F},parseGeometries:function(a){var h={};if(void 0!==a)for(var g=new Jg,y=new mh,x=0,M=a.length;x<M;x++){var F,z=a[x];switch(z.type){case"PlaneGeometry":case"PlaneBufferGeometry":F=new Uu[z.type](z.width,z.height,z.widthSegments,z.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":F=new Uu[z.type](z.width,z.height,z.depth,z.widthSegments,z.heightSegments,z.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":F=new Uu[z.type](z.radius,z.segments,z.thetaStart,z.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":F=new Uu[z.type](z.radiusTop,z.radiusBottom,z.height,z.radialSegments,z.heightSegments,z.openEnded,z.thetaStart,z.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":F=new Uu[z.type](z.radius,z.height,z.radialSegments,z.heightSegments,z.openEnded,z.thetaStart,z.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":F=new Uu[z.type](z.radius,z.widthSegments,z.heightSegments,z.phiStart,z.phiLength,z.thetaStart,z.thetaLength);break;case"DodecahedronGeometry":case"IcosahedronGeometry":case"OctahedronGeometry":case"TetrahedronGeometry":F=new Uu[z.type](z.radius,z.detail);break;case"RingGeometry":case"RingBufferGeometry":F=new Uu[z.type](z.innerRadius,z.outerRadius,z.thetaSegments,z.phiSegments,z.thetaStart,z.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":F=new Uu[z.type](z.radius,z.tube,z.radialSegments,z.tubularSegments,z.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":F=new Uu[z.type](z.radius,z.tube,z.tubularSegments,z.radialSegments,z.p,z.q);break;case"LatheGeometry":case"LatheBufferGeometry":F=new Uu[z.type](z.points,z.segments,z.phiStart,z.phiLength);break;case"BufferGeometry":F=y.parse(z);break;case"Geometry":F=g.parse(z.data,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+z.type+'"');continue}F.uuid=z.uuid,void 0!==z.name&&(F.name=z.name),h[z.uuid]=F}return h},parseMaterials:function(a,h){var g={};if(void 0!==a){var y=new Qg;y.setTextures(h);for(var x=0,M=a.length;x<M;x++){var F=y.parse(a[x]);g[F.uuid]=F}}return g},parseAnimations:function(a){for(var h=[],g=0;g<a.length;g++){var y=Ml.parse(a[g]);h.push(y)}return h},parseImages:function(a,h){var g=this,y={};function x(Ce){return g.manager.itemStart(Ce),F.load(Ce,function(){g.manager.itemEnd(Ce)},void 0,function(){g.manager.itemError(Ce)})}if(void 0!==a&&a.length>0){var F=new Yg(new El(h));F.setCrossOrigin(this.crossOrigin);for(var z=0,le=a.length;z<le;z++){var re=a[z],ve=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(re.url)?re.url:g.texturePath+re.url;y[re.uuid]=x(ve)}}return y},parseTextures:function(a,h){function g(le,re){return"number"==typeof le?le:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",le),re[le])}var y={};if(void 0!==a)for(var x=0,M=a.length;x<M;x++){var F=a[x];void 0===F.image&&console.warn('THREE.ObjectLoader: No "image" specified for',F.uuid),void 0===h[F.image]&&console.warn("THREE.ObjectLoader: Undefined image",F.image);var z=new Xo(h[F.image]);z.needsUpdate=!0,z.uuid=F.uuid,void 0!==F.name&&(z.name=F.name),void 0!==F.mapping&&(z.mapping=g(F.mapping,jf)),void 0!==F.offset&&z.offset.fromArray(F.offset),void 0!==F.repeat&&z.repeat.fromArray(F.repeat),void 0!==F.wrap&&(z.wrapS=g(F.wrap[0],ku),z.wrapT=g(F.wrap[1],ku)),void 0!==F.minFilter&&(z.minFilter=g(F.minFilter,td)),void 0!==F.magFilter&&(z.magFilter=g(F.magFilter,td)),void 0!==F.anisotropy&&(z.anisotropy=F.anisotropy),void 0!==F.flipY&&(z.flipY=F.flipY),y[F.uuid]=z}return y},parseObject:function(){var a=new vs;return function(g,y,x){var M;function F(We){return void 0===y[We]&&console.warn("THREE.ObjectLoader: Undefined geometry",We),y[We]}function z(We){if(void 0!==We)return void 0===x[We]&&console.warn("THREE.ObjectLoader: Undefined material",We),x[We]}switch(g.type){case"Scene":M=new Bh,void 0!==g.background&&Number.isInteger(g.background)&&(M.background=new Xr(g.background)),void 0!==g.fog&&("Fog"===g.fog.type?M.fog=new Rc(g.fog.color,g.fog.near,g.fog.far):"FogExp2"===g.fog.type&&(M.fog=new Nh(g.fog.color,g.fog.density)));break;case"PerspectiveCamera":M=new xl(g.fov,g.aspect,g.near,g.far),void 0!==g.focus&&(M.focus=g.focus),void 0!==g.zoom&&(M.zoom=g.zoom),void 0!==g.filmGauge&&(M.filmGauge=g.filmGauge),void 0!==g.filmOffset&&(M.filmOffset=g.filmOffset),void 0!==g.view&&(M.view=Object.assign({},g.view));break;case"OrthographicCamera":M=new Vd(g.left,g.right,g.top,g.bottom,g.near,g.far);break;case"AmbientLight":M=new Kg(g.color,g.intensity);break;case"DirectionalLight":M=new Df(g.color,g.intensity);break;case"PointLight":M=new bu(g.color,g.intensity,g.distance,g.decay);break;case"SpotLight":M=new Gh(g.color,g.intensity,g.distance,g.angle,g.penumbra,g.decay);break;case"HemisphereLight":M=new pc(g.color,g.groundColor,g.intensity);break;case"Mesh":var le=F(g.geometry),re=z(g.material);M=le.bones&&le.bones.length>0?new qg(le,re):new wa(le,re);break;case"LOD":M=new aa;break;case"Line":M=new vu(F(g.geometry),z(g.material),g.mode);break;case"LineSegments":M=new Co(F(g.geometry),z(g.material));break;case"PointCloud":case"Points":M=new js(F(g.geometry),z(g.material));break;case"Sprite":M=new mu(z(g.material));break;case"Group":M=new lp;break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh type. Instantiates Object3D instead.");default:M=new Cr}if(M.uuid=g.uuid,void 0!==g.name&&(M.name=g.name),void 0!==g.matrix?(a.fromArray(g.matrix),a.decompose(M.position,M.quaternion,M.scale)):(void 0!==g.position&&M.position.fromArray(g.position),void 0!==g.rotation&&M.rotation.fromArray(g.rotation),void 0!==g.quaternion&&M.quaternion.fromArray(g.quaternion),void 0!==g.scale&&M.scale.fromArray(g.scale)),void 0!==g.castShadow&&(M.castShadow=g.castShadow),void 0!==g.receiveShadow&&(M.receiveShadow=g.receiveShadow),g.shadow&&(void 0!==g.shadow.bias&&(M.shadow.bias=g.shadow.bias),void 0!==g.shadow.radius&&(M.shadow.radius=g.shadow.radius),void 0!==g.shadow.mapSize&&M.shadow.mapSize.fromArray(g.shadow.mapSize),void 0!==g.shadow.camera&&(M.shadow.camera=this.parseObject(g.shadow.camera))),void 0!==g.visible&&(M.visible=g.visible),void 0!==g.userData&&(M.userData=g.userData),void 0!==g.children)for(var ve in g.children)M.add(this.parseObject(g.children[ve],y,x));if("LOD"===g.type)for(var Ce=g.levels,Ve=0;Ve<Ce.length;Ve++){var Ue=Ce[Ve];void 0!==(ve=M.getObjectByProperty("uuid",Ue.object))&&M.addLevel(ve,Ue.distance)}return M}}()}),Vl.prototype={constructor:Vl,getPoint:function(a){return console.warn("THREE.Curve: Warning, getPoint() not implemented!"),null},getPointAt:function(a){var h=this.getUtoTmapping(a);return this.getPoint(h)},getPoints:function(a){a||(a=5);for(var h=[],g=0;g<=a;g++)h.push(this.getPoint(g/a));return h},getSpacedPoints:function(a){a||(a=5);for(var h=[],g=0;g<=a;g++)h.push(this.getPointAt(g/a));return h},getLength:function(){var a=this.getLengths();return a[a.length-1]},getLengths:function(a){if(a||(a=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length===a+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var g,x,h=[],y=this.getPoint(0),M=0;for(h.push(0),x=1;x<=a;x++)M+=(g=this.getPoint(x/a)).distanceTo(y),h.push(M),y=g;return this.cacheArcLengths=h,h},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(a,h){var M,g=this.getLengths(),y=0,x=g.length;M=h||a*g[x-1];for(var le,F=0,z=x-1;F<=z;)if((le=g[y=Math.floor(F+(z-F)/2)]-M)<0)F=y+1;else{if(!(le>0)){z=y;break}z=y-1}if(g[y=z]===M)return y/(x-1);var re=g[y];return(y+(M-re)/(g[y+1]-re))/(x-1)},getTangent:function(a){var h=1e-4,g=a-h,y=a+h;g<0&&(g=0),y>1&&(y=1);var x=this.getPoint(g);return this.getPoint(y).clone().sub(x).normalize()},getTangentAt:function(a){var h=this.getUtoTmapping(a);return this.getTangent(h)},computeFrenetFrames:function(a,h){var le,ve,g=new on,y=[],x=[],M=[],F=new on,z=new vs;for(le=0;le<=a;le++)y[le]=this.getTangentAt(le/a),y[le].normalize();x[0]=new on,M[0]=new on;var Ce=Number.MAX_VALUE,Ve=Math.abs(y[0].x),Ue=Math.abs(y[0].y),We=Math.abs(y[0].z);for(Ve<=Ce&&(Ce=Ve,g.set(1,0,0)),Ue<=Ce&&(Ce=Ue,g.set(0,1,0)),We<=Ce&&g.set(0,0,1),F.crossVectors(y[0],g).normalize(),x[0].crossVectors(y[0],F),M[0].crossVectors(y[0],x[0]),le=1;le<=a;le++)x[le]=x[le-1].clone(),M[le]=M[le-1].clone(),F.crossVectors(y[le-1],y[le]),F.length()>Number.EPSILON&&(F.normalize(),ve=Math.acos(As.clamp(y[le-1].dot(y[le]),-1,1)),x[le].applyMatrix4(z.makeRotationAxis(F,ve))),M[le].crossVectors(y[le],x[le]);if(!0===h)for(ve=Math.acos(As.clamp(x[0].dot(x[a]),-1,1)),ve/=a,y[0].dot(F.crossVectors(x[0],x[a]))>0&&(ve=-ve),le=1;le<=a;le++)x[le].applyMatrix4(z.makeRotationAxis(y[le],ve*le)),M[le].crossVectors(y[le],x[le]);return{tangents:y,normals:x,binormals:M}}},Vl.create=function(a,h){return a.prototype=Object.create(Vl.prototype),a.prototype.constructor=a,a.prototype.getPoint=h,a},(vh.prototype=Object.create(Vl.prototype)).constructor=vh,vh.prototype.isLineCurve=!0,vh.prototype.getPoint=function(a){if(1===a)return this.v2.clone();var h=this.v2.clone().sub(this.v1);return h.multiplyScalar(a).add(this.v1),h},vh.prototype.getPointAt=function(a){return this.getPoint(a)},vh.prototype.getTangent=function(a){return this.v2.clone().sub(this.v1).normalize()},em.prototype=Object.assign(Object.create(Vl.prototype),{constructor:em,add:function(a){this.curves.push(a)},closePath:function(){var a=this.curves[0].getPoint(0),h=this.curves[this.curves.length-1].getPoint(1);a.equals(h)||this.curves.push(new vh(h,a))},getPoint:function(a){for(var h=a*this.getLength(),g=this.getCurveLengths(),y=0;y<g.length;){if(g[y]>=h){var x=g[y]-h,M=this.curves[y],F=M.getLength();return M.getPointAt(0===F?0:1-x/F)}y++}return null},getLength:function(){var a=this.getCurveLengths();return a[a.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var a=[],h=0,g=0,y=this.curves.length;g<y;g++)h+=this.curves[g].getLength(),a.push(h);return this.cacheLengths=a,a},getSpacedPoints:function(a){a||(a=40);for(var h=[],g=0;g<=a;g++)h.push(this.getPoint(g/a));return this.autoClose&&h.push(h[0]),h},getPoints:function(a){a=a||12;for(var g,h=[],y=0,x=this.curves;y<x.length;y++)for(var M=x[y],z=M.getPoints(M&&M.isEllipseCurve?2*a:M&&M.isLineCurve?1:M&&M.isSplineCurve?a*M.points.length:a),le=0;le<z.length;le++){var re=z[le];g&&g.equals(re)||(h.push(re),g=re)}return this.autoClose&&h.length>1&&!h[h.length-1].equals(h[0])&&h.push(h[0]),h},createPointsGeometry:function(a){var h=this.getPoints(a);return this.createGeometry(h)},createSpacedPointsGeometry:function(a){var h=this.getSpacedPoints(a);return this.createGeometry(h)},createGeometry:function(a){for(var h=new Ms,g=0,y=a.length;g<y;g++){var x=a[g];h.vertices.push(new on(x.x,x.y,x.z||0))}return h}}),(fd.prototype=Object.create(Vl.prototype)).constructor=fd,fd.prototype.isEllipseCurve=!0,fd.prototype.getPoint=function(a){for(var h=2*Math.PI,g=this.aEndAngle-this.aStartAngle,y=Math.abs(g)<Number.EPSILON;g<0;)g+=h;for(;g>h;)g-=h;g<Number.EPSILON&&(g=y?0:h),!0===this.aClockwise&&!y&&(g===h?g=-h:g-=h);var x=this.aStartAngle+a*g,M=this.aX+this.xRadius*Math.cos(x),F=this.aY+this.yRadius*Math.sin(x);if(0!==this.aRotation){var z=Math.cos(this.aRotation),le=Math.sin(this.aRotation),re=M-this.aX,ve=F-this.aY;M=re*z-ve*le+this.aX,F=re*le+ve*z+this.aY}return new er(M,F)};var nc={tangentQuadraticBezier:function(a,h,g,y){return 2*(1-a)*(g-h)+2*a*(y-g)},tangentCubicBezier:function(a,h,g,y,x){return-3*h*(1-a)*(1-a)+3*g*(1-a)*(1-a)-6*a*g*(1-a)+6*a*y*(1-a)-3*a*a*y+3*a*a*x},tangentSpline:function(a,h,g,y,x){return 6*a*a-6*a+(3*a*a-4*a+1)+(-6*a*a+6*a)+(3*a*a-2*a)},interpolate:function(a,h,g,y,x){var M=.5*(g-a),F=.5*(y-h),z=x*x;return(2*h-2*g+M+F)*(x*z)+(-3*h+3*g-2*M-F)*z+M*x+h}};function wu(a){this.points=void 0===a?[]:a}function Zd(a,h,g,y){this.v0=a,this.v1=h,this.v2=g,this.v3=y}function pd(a,h,g){this.v0=a,this.v1=h,this.v2=g}(wu.prototype=Object.create(Vl.prototype)).constructor=wu,wu.prototype.isSplineCurve=!0,wu.prototype.getPoint=function(a){var h=this.points,g=(h.length-1)*a,y=Math.floor(g),x=g-y,M=h[0===y?y:y-1],F=h[y],z=h[y>h.length-2?h.length-1:y+1],le=h[y>h.length-3?h.length-1:y+2],re=nc.interpolate;return new er(re(M.x,F.x,z.x,le.x,x),re(M.y,F.y,z.y,le.y,x))},(Zd.prototype=Object.create(Vl.prototype)).constructor=Zd,Zd.prototype.getPoint=function(a){var h=Pa.b3;return new er(h(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x),h(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y))},Zd.prototype.getTangent=function(a){var h=nc.tangentCubicBezier;return new er(h(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x),h(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y)).normalize()},(pd.prototype=Object.create(Vl.prototype)).constructor=pd,pd.prototype.getPoint=function(a){var h=Pa.b2;return new er(h(a,this.v0.x,this.v1.x,this.v2.x),h(a,this.v0.y,this.v1.y,this.v2.y))},pd.prototype.getTangent=function(a){var h=nc.tangentQuadraticBezier;return new er(h(a,this.v0.x,this.v1.x,this.v2.x),h(a,this.v0.y,this.v1.y,this.v2.y)).normalize()};var mp=Object.assign(Object.create(em.prototype),{fromPoints:function(a){this.moveTo(a[0].x,a[0].y);for(var h=1,g=a.length;h<g;h++)this.lineTo(a[h].x,a[h].y)},moveTo:function(a,h){this.currentPoint.set(a,h)},lineTo:function(a,h){var g=new vh(this.currentPoint.clone(),new er(a,h));this.curves.push(g),this.currentPoint.set(a,h)},quadraticCurveTo:function(a,h,g,y){var x=new pd(this.currentPoint.clone(),new er(a,h),new er(g,y));this.curves.push(x),this.currentPoint.set(g,y)},bezierCurveTo:function(a,h,g,y,x,M){var F=new Zd(this.currentPoint.clone(),new er(a,h),new er(g,y),new er(x,M));this.curves.push(F),this.currentPoint.set(x,M)},splineThru:function(a){var g=new wu([this.currentPoint.clone()].concat(a));this.curves.push(g),this.currentPoint.copy(a[a.length-1])},arc:function(a,h,g,y,x,M){this.absarc(a+this.currentPoint.x,h+this.currentPoint.y,g,y,x,M)},absarc:function(a,h,g,y,x,M){this.absellipse(a,h,g,g,y,x,M)},ellipse:function(a,h,g,y,x,M,F,z){this.absellipse(a+this.currentPoint.x,h+this.currentPoint.y,g,y,x,M,F,z)},absellipse:function(a,h,g,y,x,M,F,z){var le=new fd(a,h,g,y,x,M,F,z);if(this.curves.length>0){var re=le.getPoint(0);re.equals(this.currentPoint)||this.lineTo(re.x,re.y)}this.curves.push(le);var ve=le.getPoint(1);this.currentPoint.copy(ve)}});function $u(){as.apply(this,arguments),this.holes=[]}function as(a){em.call(this),this.currentPoint=new er,a&&this.fromPoints(a)}function vp(){this.subPaths=[],this.currentPath=null}function tm(a){this.data=a}function Qd(a){this.manager=void 0!==a?a:fc}$u.prototype=Object.assign(Object.create(mp),{constructor:$u,getPointsHoles:function(a){for(var h=[],g=0,y=this.holes.length;g<y;g++)h[g]=this.holes[g].getPoints(a);return h},extractAllPoints:function(a){return{shape:this.getPoints(a),holes:this.getPointsHoles(a)}},extractPoints:function(a){return this.extractAllPoints(a)}}),as.prototype=mp,mp.constructor=as,vp.prototype={moveTo:function(a,h){this.currentPath=new as,this.subPaths.push(this.currentPath),this.currentPath.moveTo(a,h)},lineTo:function(a,h){this.currentPath.lineTo(a,h)},quadraticCurveTo:function(a,h,g,y){this.currentPath.quadraticCurveTo(a,h,g,y)},bezierCurveTo:function(a,h,g,y,x,M){this.currentPath.bezierCurveTo(a,h,g,y,x,M)},splineThru:function(a){this.currentPath.splineThru(a)},toShapes:function(a,h){function g(Xn){for(var ni=[],Mi=0,Ai=Xn.length;Mi<Ai;Mi++){var gi=Xn[Mi],ar=new $u;ar.curves=gi.curves,ni.push(ar)}return ni}function y(Xn,ni){for(var Mi=ni.length,Ai=!1,gi=Mi-1,ar=0;ar<Mi;gi=ar++){var Hi=ni[gi],Yn=ni[ar],jn=Yn.x-Hi.x,f=Yn.y-Hi.y;if(Math.abs(f)>Number.EPSILON){if(f<0&&(Hi=ni[ar],jn=-jn,Yn=ni[gi],f=-f),Xn.y<Hi.y||Xn.y>Yn.y)continue;if(Xn.y===Hi.y){if(Xn.x===Hi.x)return!0}else{var c=f*(Xn.x-Hi.x)-jn*(Xn.y-Hi.y);if(0===c)return!0;if(c<0)continue;Ai=!Ai}}else{if(Xn.y!==Hi.y)continue;if(Yn.x<=Xn.x&&Xn.x<=Hi.x||Hi.x<=Xn.x&&Xn.x<=Yn.x)return!0}}return Ai}var x=Pa.isClockWise,M=this.subPaths;if(0===M.length)return[];if(!0===h)return g(M);var F,z,le,re=[];if(1===M.length)return z=M[0],(le=new $u).curves=z.curves,re.push(le),re;var ve=!x(M[0].getPoints());ve=a?!ve:ve;var ft,Ce=[],Ve=[],Ue=[],We=0;Ve[We]=void 0,Ue[We]=[];for(var dt=0,at=M.length;dt<at;dt++)F=x(ft=(z=M[dt]).getPoints()),(F=a?!F:F)?(!ve&&Ve[We]&&We++,Ve[We]={s:new $u,p:ft},Ve[We].s.curves=z.curves,ve&&We++,Ue[We]=[]):Ue[We].push({h:z,p:ft[0]});if(!Ve[0])return g(M);if(Ve.length>1){for(var xt=!1,St=[],nn=0,qt=Ve.length;nn<qt;nn++)Ce[nn]=[];for(nn=0,qt=Ve.length;nn<qt;nn++)for(var gn=Ue[nn],un=0;un<gn.length;un++){for(var an=gn[un],_n=!0,On=0;On<Ve.length;On++)y(an.p,Ve[On].p)&&(nn!==On&&St.push({froms:nn,tos:On,hole:un}),_n?(_n=!1,Ce[On].push(an)):xt=!0);_n&&Ce[nn].push(an)}St.length>0&&(xt||(Ue=Ce))}dt=0;for(var Ti,di=Ve.length;dt<di;dt++){re.push(le=Ve[dt].s);for(var Jt=0,tn=(Ti=Ue[dt]).length;Jt<tn;Jt++)le.holes.push(Ti[Jt].h)}return re}},Object.assign(tm.prototype,{isFont:!0,generateShapes:function(a,h,g){function x(ve,Ce,Ve){var Ue=M.glyphs[ve]||M.glyphs["?"];if(Ue){var xt,St,nn,qt,gn,un,an,_n,On,Ti,di,We=new vp,ft=[],dt=Pa.b2,at=Pa.b3;if(Ue.o)for(var Jt=Ue._cachedOutline||(Ue._cachedOutline=Ue.o.split(" ")),tn=0,Xn=Jt.length;tn<Xn;)switch(Jt[tn++]){case"m":xt=Jt[tn++]*Ce+Ve,St=Jt[tn++]*Ce,We.moveTo(xt,St);break;case"l":xt=Jt[tn++]*Ce+Ve,St=Jt[tn++]*Ce,We.lineTo(xt,St);break;case"q":if(nn=Jt[tn++]*Ce+Ve,qt=Jt[tn++]*Ce,an=Jt[tn++]*Ce+Ve,_n=Jt[tn++]*Ce,We.quadraticCurveTo(an,_n,nn,qt),di=ft[ft.length-1]){gn=di.x,un=di.y;for(var Mi=1;Mi<=g;Mi++)dt(Ai=Mi/g,gn,an,nn),dt(Ai,un,_n,qt)}break;case"b":if(nn=Jt[tn++]*Ce+Ve,qt=Jt[tn++]*Ce,an=Jt[tn++]*Ce+Ve,_n=Jt[tn++]*Ce,On=Jt[tn++]*Ce+Ve,Ti=Jt[tn++]*Ce,We.bezierCurveTo(an,_n,On,Ti,nn,qt),di=ft[ft.length-1])for(gn=di.x,un=di.y,Mi=1;Mi<=g;Mi++){var Ai;at(Ai=Mi/g,gn,an,On,nn),at(Ai,un,_n,Ti,qt)}}return{offset:Ue.ha*Ce,path:We}}}void 0===h&&(h=100),void 0===g&&(g=4);for(var M=this.data,F=function y(ve){for(var Ce=String(ve).split(""),Ve=h/M.resolution,Ue=0,We=[],ft=0;ft<Ce.length;ft++){var dt=x(Ce[ft],Ve,Ue);Ue+=dt.offset,We.push(dt.path)}return We}(a),z=[],le=0,re=F.length;le<re;le++)Array.prototype.push.apply(z,F[le].toShapes());return z}}),Object.assign(Qd.prototype,{load:function(a,h,g,y){var x=this;new Do(this.manager).load(a,function(F){var z;try{z=JSON.parse(F)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),z=JSON.parse(F.substring(65,F.length-2))}var le=x.parse(z);h&&h(le)},g,y)},parse:function(a){return new tm(a)}});var Pf,yp={getContext:function(){return void 0===Pf&&(Pf=new(window.AudioContext||window.webkitAudioContext)),Pf},setContext:function(a){Pf=a}};function tg(a){this.manager=void 0!==a?a:fc}function Oa(a,h,g,y){Js.call(this,a,h),this.type="RectAreaLight",this.position.set(0,1,0),this.updateMatrix(),this.width=void 0!==g?g:10,this.height=void 0!==y?y:10}function Bm(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new xl,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new xl,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function Ul(a,h,g){Cr.call(this),this.type="CubeCamera";var y=90,M=new xl(y,1,a,h);M.up.set(0,-1,0),M.lookAt(new on(1,0,0)),this.add(M);var F=new xl(y,1,a,h);F.up.set(0,-1,0),F.lookAt(new on(-1,0,0)),this.add(F);var z=new xl(y,1,a,h);z.up.set(0,0,1),z.lookAt(new on(0,1,0)),this.add(z);var le=new xl(y,1,a,h);le.up.set(0,0,-1),le.lookAt(new on(0,-1,0)),this.add(le);var re=new xl(y,1,a,h);re.up.set(0,-1,0),re.lookAt(new on(0,0,1)),this.add(re);var ve=new xl(y,1,a,h);ve.up.set(0,-1,0),ve.lookAt(new on(0,0,-1)),this.add(ve),this.renderTarget=new rd(g,g,{format:Ic,magFilter:Sa,minFilter:Sa}),this.updateCubeMap=function(Ve,Ue){null===this.parent&&this.updateMatrixWorld();var We=this.renderTarget,ft=We.texture.generateMipmaps;We.texture.generateMipmaps=!1,We.activeCubeFace=0,Ve.render(Ue,M,We),We.activeCubeFace=1,Ve.render(Ue,F,We),We.activeCubeFace=2,Ve.render(Ue,z,We),We.activeCubeFace=3,Ve.render(Ue,le,We),We.activeCubeFace=4,Ve.render(Ue,re,We),We.texture.generateMipmaps=ft,We.activeCubeFace=5,Ve.render(Ue,ve,We),Ve.setRenderTarget(null)}}function zm(){Cr.call(this),this.type="AudioListener",this.context=yp.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function yh(a){Cr.call(this),this.type="Audio",this.context=a.context,this.gain=this.context.createGain(),this.gain.connect(a.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function ng(a){yh.call(this,a),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function Vm(a,h){this.analyser=a.context.createAnalyser(),this.analyser.fftSize=void 0!==h?h:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),a.getOutput().connect(this.analyser)}function Fc(a,h,g){this.binding=a,this.valueSize=g;var x,y=Float64Array;switch(h){case"quaternion":x=this._slerp;break;case"string":case"bool":y=Array,x=this._select;break;default:x=this._lerp}this.buffer=new y(4*g),this._mixBufferRegion=x,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function Fa(a,h,g){this.path=h,this.parsedPath=g||Fa.parseTrackName(h),this.node=Fa.findNode(a,this.parsedPath.nodeName)||a,this.rootNode=a}function mc(a){this.uuid=As.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var h={};this._indicesByUUID=h;for(var g=0,y=arguments.length;g!==y;++g)h[arguments[g].uuid]=g;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var x=this;this.stats={objects:{get total(){return x._objects.length},get inUse(){return this.total-x.nCachedObjects_}},get bindingsPerObject(){return x._bindings.length}}}function vc(a,h,g){this._mixer=a,this._clip=h,this._localRoot=g||null;for(var y=h.tracks,x=y.length,M=new Array(x),F={endingStart:ds,endingEnd:ds},z=0;z!==x;++z){var le=y[z].createInterpolant(null);M[z]=le,le.settings=F}this._interpolantSettings=F,this._interpolants=M,this._propertyBindings=new Array(x),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=pr,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function ig(a){this._root=a,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Um(a){"string"==typeof a&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),a=arguments[1]),this.value=a}function qu(){Dr.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Rf(a,h,g,y){this.uuid=As.generateUUID(),this.data=a,this.itemSize=h,this.offset=g,this.normalized=!0===y}function gd(a,h){this.uuid=As.generateUUID(),this.array=a,this.stride=h,this.count=void 0!==a?a.length/h:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function _h(a,h,g){gd.call(this,a,h),this.meshPerAttribute=g||1}function Jd(a,h,g){gr.call(this,a,h),this.meshPerAttribute=g||1}function ru(a,h,g,y){this.ray=new sa(a,h),this.near=g||0,this.far=y||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function md(a,h){return a.distance-h.distance}function _p(a,h,g,y){if(!1!==a.visible&&(a.raycast(h,g),!0===y))for(var x=a.children,M=0,F=x.length;M<F;M++)_p(x[M],h,g,!0)}function Hm(a){this.autoStart=void 0===a||a,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function $_(a){this.points=a;var y,x,M,F,z,le,re,ve,Ce,h=[],g={x:0,y:0,z:0};function Ve(Ue,We,ft,dt,at,xt,St){var nn=.5*(ft-Ue),qt=.5*(dt-We);return(2*(We-ft)+nn+qt)*St+(-3*(We-ft)-2*nn-qt)*xt+nn*at+We}this.initFromArray=function(Ue){this.points=[];for(var We=0;We<Ue.length;We++)this.points[We]={x:Ue[We][0],y:Ue[We][1],z:Ue[We][2]}},this.getPoint=function(Ue){return y=(this.points.length-1)*Ue,x=Math.floor(y),M=y-x,h[0]=0===x?x:x-1,h[1]=x,h[2]=x>this.points.length-2?this.points.length-1:x+1,h[3]=x>this.points.length-3?this.points.length-1:x+2,g.x=Ve((le=this.points[h[0]]).x,(re=this.points[h[1]]).x,(ve=this.points[h[2]]).x,(Ce=this.points[h[3]]).x,M,F=M*M,z=M*F),g.y=Ve(le.y,re.y,ve.y,Ce.y,M,F,z),g.z=Ve(le.z,re.z,ve.z,Ce.z,M,F,z),g},this.getControlPointsArray=function(){var Ue,We,ft=this.points.length,dt=[];for(Ue=0;Ue<ft;Ue++)dt[Ue]=[(We=this.points[Ue]).x,We.y,We.z];return dt},this.getLength=function(Ue){var We,ft,dt,at,St=0,nn=0,qt=new on,gn=new on,un=[],an=0;for(un[0]=0,Ue||(Ue=100),dt=this.points.length*Ue,qt.copy(this.points[0]),We=1;We<dt;We++)at=this.getPoint(ft=We/dt),gn.copy(at),an+=gn.distanceTo(qt),qt.copy(at),(St=Math.floor((this.points.length-1)*ft))!==nn&&(un[St]=an,nn=St);return un[un.length]=an,{chunks:un,total:an}},this.reparametrizeByArcLength=function(Ue){var We,ft,at,xt,nn,qt,gn=[],un=new on,an=this.getLength();for(gn.push(un.copy(this.points[0]).clone()),We=1;We<this.points.length;We++){for(nn=Math.ceil(Ue*(an.chunks[We]-an.chunks[We-1])/an.total),at=(We-1)/(this.points.length-1),xt=We/(this.points.length-1),ft=1;ft<nn-1;ft++)qt=this.getPoint(at+ft*(1/nn)*(xt-at)),gn.push(un.copy(qt).clone());gn.push(un.copy(this.points[We]).clone())}this.points=gn}}function nm(a,h,g){return this.radius=void 0!==a?a:1,this.phi=void 0!==h?h:0,this.theta=void 0!==g?g:0,this}function bl(a,h,g){return this.radius=void 0!==a?a:1,this.theta=void 0!==h?h:0,this.y=void 0!==g?g:0,this}function ca(a,h){wa.call(this,a,h),this.animationsMap={},this.animationsList=[];var g=this.geometry.morphTargets.length,y="__default";this.createAnimation(y,0,g-1,g/1),this.setAnimationWeight(y,1)}function kf(a){Cr.call(this),this.material=a,this.render=function(h){}}function rg(a,h,g,y){this.object=a,this.size=void 0!==h?h:1;var x=void 0!==g?g:16711680,M=void 0!==y?y:1,F=0,z=this.object.geometry;z&&z.isGeometry?F=3*z.faces.length:z&&z.isBufferGeometry&&(F=z.attributes.normal.count);var le=new Dr,re=new os(2*F*3,3);le.addAttribute("position",re),Co.call(this,le,new cl({color:x,linewidth:M})),this.matrixAutoUpdate=!1,this.update()}function jh(a){Cr.call(this),this.light=a,this.light.updateMatrixWorld(),this.matrix=a.matrixWorld,this.matrixAutoUpdate=!1;for(var h=new Dr,g=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],y=0,x=1;y<32;y++,x++){var F=y/32*Math.PI*2,z=x/32*Math.PI*2;g.push(Math.cos(F),Math.sin(F),1,Math.cos(z),Math.sin(z),1)}h.addAttribute("position",new os(g,3));var le=new cl({fog:!1});this.cone=new Co(h,le),this.add(this.cone),this.update()}function $h(a){this.bones=this.getBoneList(a);for(var h=new Dr,g=[],y=[],x=new Xr(0,0,1),M=new Xr(0,1,0),F=0;F<this.bones.length;F++){var z=this.bones[F];z.parent&&z.parent.isBone&&(g.push(0,0,0),g.push(0,0,0),y.push(x.r,x.g,x.b),y.push(M.r,M.g,M.b))}h.addAttribute("position",new os(g,3)),h.addAttribute("color",new os(y,3));var le=new cl({vertexColors:B,depthTest:!1,depthWrite:!1,transparent:!0});Co.call(this,h,le),this.root=a,this.matrix=a.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function vd(a,h){this.light=a,this.light.updateMatrixWorld();var g=new la(h,4,2),y=new Va({wireframe:!0,fog:!1});y.color.copy(this.light.color).multiplyScalar(this.light.intensity),wa.call(this,g,y),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1}function ef(a){Cr.call(this),this.light=a,this.light.updateMatrixWorld();var h=new Va({color:a.color,fog:!1}),g=new Va({color:a.color,fog:!1,wireframe:!0}),y=new Dr;y.addAttribute("position",new gr(new Float32Array(18),3)),this.add(new wa(y,h)),this.add(new wa(y,g)),this.update()}function yd(a,h){Cr.call(this),this.light=a,this.light.updateMatrixWorld(),this.matrix=a.matrixWorld,this.matrixAutoUpdate=!1;var g=new tu(h);g.rotateY(.5*Math.PI);var y=new Va({vertexColors:B,wireframe:!0}),x=g.getAttribute("position"),M=new Float32Array(3*x.count);g.addAttribute("color",new gr(M,3)),this.add(new wa(g,y)),this.update()}function sg(a,h,g,y){a=a||10,h=h||10,g=new Xr(void 0!==g?g:4473924),y=new Xr(void 0!==y?y:8947848);for(var x=h/2,M=2*a/h,F=[],z=[],le=0,re=0,ve=-a;le<=h;le++,ve+=M){F.push(-a,0,ve,a,0,ve),F.push(ve,0,-a,ve,0,a);var Ce=le===x?g:y;Ce.toArray(z,re),Ce.toArray(z,re+=3),Ce.toArray(z,re+=3),Ce.toArray(z,re+=3),re+=3}var Ve=new Dr;Ve.addAttribute("position",new os(F,3)),Ve.addAttribute("color",new os(z,3));var Ue=new cl({vertexColors:B});Co.call(this,Ve,Ue)}function Xu(a,h,g,y,x,M){a=a||10,h=h||16,g=g||8,y=y||64,x=new Xr(void 0!==x?x:4473924),M=new Xr(void 0!==M?M:8947848);var le,re,ve,Ce,Ve,Ue,We,F=[],z=[];for(Ce=0;Ce<=h;Ce++)ve=Ce/h*(2*Math.PI),le=Math.sin(ve)*a,re=Math.cos(ve)*a,F.push(0,0,0),F.push(le,0,re),z.push((We=1&Ce?x:M).r,We.g,We.b),z.push(We.r,We.g,We.b);for(Ce=0;Ce<=g;Ce++)for(We=1&Ce?x:M,Ue=a-a/g*Ce,Ve=0;Ve<y;Ve++)ve=Ve/y*(2*Math.PI),le=Math.sin(ve)*Ue,re=Math.cos(ve)*Ue,F.push(le,0,re),z.push(We.r,We.g,We.b),ve=(Ve+1)/y*(2*Math.PI),le=Math.sin(ve)*Ue,re=Math.cos(ve)*Ue,F.push(le,0,re),z.push(We.r,We.g,We.b);var ft=new Dr;ft.addAttribute("position",new os(F,3)),ft.addAttribute("color",new os(z,3));var dt=new cl({vertexColors:B});Co.call(this,ft,dt)}function qh(a,h,g,y){this.object=a,this.size=void 0!==h?h:1;var x=void 0!==g?g:16776960,M=void 0!==y?y:1,F=0,z=this.object.geometry;z&&z.isGeometry?F=z.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var le=new Dr,re=new os(2*F*3,3);le.addAttribute("position",re),Co.call(this,le,new cl({color:x,linewidth:M})),this.matrixAutoUpdate=!1,this.update()}function og(a,h){Cr.call(this),this.light=a,this.light.updateMatrixWorld(),this.matrix=a.matrixWorld,this.matrixAutoUpdate=!1,void 0===h&&(h=1);var g=new Dr;g.addAttribute("position",new os([-h,h,0,h,h,0,h,-h,0,-h,-h,0,-h,h,0],3));var y=new cl({fog:!1});this.add(new vu(g,y)),(g=new Dr).addAttribute("position",new os([0,0,0,0,0,1],3)),this.add(new vu(g,y)),this.update()}function im(a){var h=new Dr,g=new cl({color:16777215,vertexColors:oe}),y=[],x=[],M={},F=new Xr(16755200),z=new Xr(16711680),le=new Xr(43775),re=new Xr(16777215),ve=new Xr(3355443);function Ce(Ue,We,ft){Ve(Ue,ft),Ve(We,ft)}function Ve(Ue,We){y.push(0,0,0),x.push(We.r,We.g,We.b),void 0===M[Ue]&&(M[Ue]=[]),M[Ue].push(y.length/3-1)}Ce("n1","n2",F),Ce("n2","n4",F),Ce("n4","n3",F),Ce("n3","n1",F),Ce("f1","f2",F),Ce("f2","f4",F),Ce("f4","f3",F),Ce("f3","f1",F),Ce("n1","f1",F),Ce("n2","f2",F),Ce("n3","f3",F),Ce("n4","f4",F),Ce("p","n1",z),Ce("p","n2",z),Ce("p","n3",z),Ce("p","n4",z),Ce("u1","u2",le),Ce("u2","u3",le),Ce("u3","u1",le),Ce("c","t",re),Ce("p","c",ve),Ce("cn1","cn2",ve),Ce("cn3","cn4",ve),Ce("cf1","cf2",ve),Ce("cf3","cf4",ve),h.addAttribute("position",new os(y,3)),h.addAttribute("color",new os(x,3)),Co.call(this,h,g),this.camera=a,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=a.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=M,this.update()}function ag(a,h){void 0===h&&(h=16776960);var g=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),y=new Float32Array(24),x=new Dr;x.setIndex(new gr(g,1)),x.addAttribute("position",new gr(y,3)),Co.call(this,x,new cl({color:h})),void 0!==a&&this.update(a)}Object.assign(tg.prototype,{load:function(a,h,g,y){var x=new Do(this.manager);x.setResponseType("arraybuffer"),x.load(a,function(M){yp.getContext().decodeAudioData(M,function(z){h(z)})},g,y)}}),Oa.prototype=Object.assign(Object.create(Js.prototype),{constructor:Oa,isRectAreaLight:!0,copy:function(a){return Js.prototype.copy.call(this,a),this.width=a.width,this.height=a.height,this}}),Object.assign(Bm.prototype,{update:function(){var a,h,g,y,x,M,F,z=new vs,le=new vs;return function(ve){if(a!==this||h!==ve.focus||g!==ve.fov||y!==ve.aspect*this.aspect||x!==ve.near||M!==ve.far||F!==ve.zoom){a=this,h=ve.focus,g=ve.fov,y=ve.aspect*this.aspect,x=ve.near,M=ve.far,F=ve.zoom;var dt,at,Ve=ve.projectionMatrix.clone(),Ue=this.eyeSep/2,We=Ue*x/h,ft=x*Math.tan(As.DEG2RAD*g*.5)/F;le.elements[12]=-Ue,z.elements[12]=Ue,Ve.elements[0]=2*x/((at=ft*y+We)-(dt=-ft*y+We)),Ve.elements[8]=(at+dt)/(at-dt),this.cameraL.projectionMatrix.copy(Ve),Ve.elements[0]=2*x/((at=ft*y-We)-(dt=-ft*y-We)),Ve.elements[8]=(at+dt)/(at-dt),this.cameraR.projectionMatrix.copy(Ve)}this.cameraL.matrixWorld.copy(ve.matrixWorld).multiply(le),this.cameraR.matrixWorld.copy(ve.matrixWorld).multiply(z)}}()}),(Ul.prototype=Object.create(Cr.prototype)).constructor=Ul,zm.prototype=Object.assign(Object.create(Cr.prototype),{constructor:zm,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(a){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=a,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(a){this.gain.gain.value=a},updateMatrixWorld:function(){var a=new on,h=new kl,g=new on,y=new on;return function(M){Cr.prototype.updateMatrixWorld.call(this,M);var F=this.context.listener,z=this.up;this.matrixWorld.decompose(a,h,g),y.set(0,0,-1).applyQuaternion(h),F.positionX?(F.positionX.setValueAtTime(a.x,this.context.currentTime),F.positionY.setValueAtTime(a.y,this.context.currentTime),F.positionZ.setValueAtTime(a.z,this.context.currentTime),F.forwardX.setValueAtTime(y.x,this.context.currentTime),F.forwardY.setValueAtTime(y.y,this.context.currentTime),F.forwardZ.setValueAtTime(y.z,this.context.currentTime),F.upX.setValueAtTime(z.x,this.context.currentTime),F.upY.setValueAtTime(z.y,this.context.currentTime),F.upZ.setValueAtTime(z.z,this.context.currentTime)):(F.setPosition(a.x,a.y,a.z),F.setOrientation(y.x,y.y,y.z,z.x,z.y,z.z))}}()}),yh.prototype=Object.assign(Object.create(Cr.prototype),{constructor:yh,getOutput:function(){return this.gain},setNodeSource:function(a){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=a,this.connect(),this},setBuffer:function(a){return this.buffer=a,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var a=this.context.createBufferSource();return a.buffer=this.buffer,a.loop=this.loop,a.onended=this.onEnded.bind(this),a.playbackRate.setValueAtTime(this.playbackRate,this.startTime),a.start(0,this.startTime),this.isPlaying=!0,this.source=a,this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.startTime=this.context.currentTime,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.startTime=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var a=1,h=this.filters.length;a<h;a++)this.filters[a-1].connect(this.filters[a]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var a=1,h=this.filters.length;a<h;a++)this.filters[a-1].disconnect(this.filters[a]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(a){return a||(a=[]),!0===this.isPlaying?(this.disconnect(),this.filters=a,this.connect()):this.filters=a,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(a){return this.setFilters(a?[a]:[])},setPlaybackRate:function(a){if(!1!==this.hasPlaybackControl)return this.playbackRate=a,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(a){if(!1!==this.hasPlaybackControl)return this.loop=a,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(a){return this.gain.gain.value=a,this}}),ng.prototype=Object.assign(Object.create(yh.prototype),{constructor:ng,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(a){this.panner.refDistance=a},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(a){this.panner.rolloffFactor=a},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(a){this.panner.distanceModel=a},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(a){this.panner.maxDistance=a},updateMatrixWorld:function(){var a=new on;return function(g){Cr.prototype.updateMatrixWorld.call(this,g),a.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(a.x,a.y,a.z)}}()}),Object.assign(Vm.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var a=0,h=this.getFrequencyData(),g=0;g<h.length;g++)a+=h[g];return a/h.length}}),Fc.prototype={constructor:Fc,accumulate:function(a,h){var g=this.buffer,y=this.valueSize,x=a*y+y,M=this.cumulativeWeight;if(0===M){for(var F=0;F!==y;++F)g[x+F]=g[F];M=h}else this._mixBufferRegion(g,x,0,h/(M+=h),y);this.cumulativeWeight=M},apply:function(a){var h=this.valueSize,g=this.buffer,y=a*h+h,x=this.cumulativeWeight,M=this.binding;this.cumulativeWeight=0,x<1&&this._mixBufferRegion(g,y,3*h,1-x,h);for(var z=h,le=h+h;z!==le;++z)if(g[z]!==g[z+h]){M.setValue(g,y);break}},saveOriginalState:function(){var h=this.buffer,g=this.valueSize,y=3*g;this.binding.getValue(h,y);for(var x=g,M=y;x!==M;++x)h[x]=h[y+x%g];this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_select:function(a,h,g,y,x){if(y>=.5)for(var M=0;M!==x;++M)a[h+M]=a[g+M]},_slerp:function(a,h,g,y,x){kl.slerpFlat(a,h,a,h,a,g,y)},_lerp:function(a,h,g,y,x){for(var M=1-y,F=0;F!==x;++F){var z=h+F;a[z]=a[z]*M+a[g+F]*y}}},Fa.prototype={constructor:Fa,getValue:function(h,g){this.bind(),this.getValue(h,g)},setValue:function(h,g){this.bind(),this.setValue(h,g)},bind:function(){var a=this.node,h=this.parsedPath,g=h.objectName,y=h.propertyName,x=h.propertyIndex;if(a||(a=Fa.findNode(this.rootNode,h.nodeName)||this.rootNode,this.node=a),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,a){if(g){var M=h.objectIndex;switch(g){case"materials":if(!a.material)return void console.error("  can not bind to material as node does not have a material",this);if(!a.material.materials)return void console.error("  can not bind to material.materials as node.material does not have a materials array",this);a=a.material.materials;break;case"bones":if(!a.skeleton)return void console.error("  can not bind to bones as node does not have a skeleton",this);a=a.skeleton.bones;for(var F=0;F<a.length;F++)if(a[F].name===M){M=F;break}break;default:if(void 0===a[g])return void console.error("  can not bind to objectName of node, undefined",this);a=a[g]}if(void 0!==M){if(void 0===a[M])return void console.error("  trying to bind to objectIndex of objectName, but is undefined:",this,a);a=a[M]}}var z=a[y];if(void 0!==z){var re=this.Versioning.None;void 0!==a.needsUpdate?(re=this.Versioning.NeedsUpdate,this.targetObject=a):void 0!==a.matrixWorldNeedsUpdate&&(re=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=a);var ve=this.BindingType.Direct;if(void 0!==x){if("morphTargetInfluences"===y){if(!a.geometry)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry",this);if(!a.geometry.morphTargets)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets",this);for(F=0;F<this.node.geometry.morphTargets.length;F++)if(a.geometry.morphTargets[F].name===x){x=F;break}}ve=this.BindingType.ArrayElement,this.resolvedProperty=z,this.propertyIndex=x}else void 0!==z.fromArray&&void 0!==z.toArray?(ve=this.BindingType.HasFromToArray,this.resolvedProperty=z):void 0!==z.length?(ve=this.BindingType.EntireArray,this.resolvedProperty=z):this.propertyName=y;this.getValue=this.GetterByBindingType[ve],this.setValue=this.SetterByBindingTypeAndVersioning[ve][re]}else console.error("  trying to update property for track: "+h.nodeName+"."+y+" but it wasn't found.",a)}else console.error("  trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}},Object.assign(Fa.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},_getValue_unbound:Fa.prototype.getValue,_setValue_unbound:Fa.prototype.setValue,BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(h,g){h[g]=this.node[this.propertyName]},function(h,g){for(var y=this.resolvedProperty,x=0,M=y.length;x!==M;++x)h[g++]=y[x]},function(h,g){h[g]=this.resolvedProperty[this.propertyIndex]},function(h,g){this.resolvedProperty.toArray(h,g)}],SetterByBindingTypeAndVersioning:[[function(h,g){this.node[this.propertyName]=h[g]},function(h,g){this.node[this.propertyName]=h[g],this.targetObject.needsUpdate=!0},function(h,g){this.node[this.propertyName]=h[g],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(h,g){for(var y=this.resolvedProperty,x=0,M=y.length;x!==M;++x)y[x]=h[g++]},function(h,g){for(var y=this.resolvedProperty,x=0,M=y.length;x!==M;++x)y[x]=h[g++];this.targetObject.needsUpdate=!0},function(h,g){for(var y=this.resolvedProperty,x=0,M=y.length;x!==M;++x)y[x]=h[g++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(h,g){this.resolvedProperty[this.propertyIndex]=h[g]},function(h,g){this.resolvedProperty[this.propertyIndex]=h[g],this.targetObject.needsUpdate=!0},function(h,g){this.resolvedProperty[this.propertyIndex]=h[g],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(h,g){this.resolvedProperty.fromArray(h,g)},function(h,g){this.resolvedProperty.fromArray(h,g),this.targetObject.needsUpdate=!0},function(h,g){this.resolvedProperty.fromArray(h,g),this.targetObject.matrixWorldNeedsUpdate=!0}]]}),(Fa.Composite=function(a,h,g){var y=g||Fa.parseTrackName(h);this._targetGroup=a,this._bindings=a.subscribe_(h,y)}).prototype={constructor:Fa.Composite,getValue:function(a,h){this.bind();var y=this._bindings[this._targetGroup.nCachedObjects_];void 0!==y&&y.getValue(a,h)},setValue:function(a,h){for(var g=this._bindings,y=this._targetGroup.nCachedObjects_,x=g.length;y!==x;++y)g[y].setValue(a,h)},bind:function(){for(var a=this._bindings,h=this._targetGroup.nCachedObjects_,g=a.length;h!==g;++h)a[h].bind()},unbind:function(){for(var a=this._bindings,h=this._targetGroup.nCachedObjects_,g=a.length;h!==g;++h)a[h].unbind()}},Fa.create=function(a,h,g){return a&&a.isAnimationObjectGroup?new Fa.Composite(a,h,g):new Fa(a,h,g)},Fa.parseTrackName=function(a){var g=/^((?:[\w-]+[\/:])*)([\w-]+)?(?:\.([\w-]+)(?:\[(.+)\])?)?\.([\w-]+)(?:\[(.+)\])?$/.exec(a);if(!g)throw new Error("cannot parse trackName at all: "+a);var y={nodeName:g[2],objectName:g[3],objectIndex:g[4],propertyName:g[5],propertyIndex:g[6]};if(null===y.propertyName||0===y.propertyName.length)throw new Error("can not parse propertyName from trackName: "+a);return y},Fa.findNode=function(a,h){if(!h||""===h||"root"===h||"."===h||-1===h||h===a.name||h===a.uuid)return a;if(a.skeleton){var y=function(F){for(var z=0;z<F.bones.length;z++){var le=F.bones[z];if(le.name===h)return le}return null}(a.skeleton);if(y)return y}if(a.children){var x=function(F){for(var z=0;z<F.length;z++){var le=F[z];if(le.name===h||le.uuid===h)return le;var re=x(le.children);if(re)return re}return null},M=x(a.children);if(M)return M}return null},mc.prototype={constructor:mc,isAnimationObjectGroup:!0,add:function(a){for(var h=this._objects,g=h.length,y=this.nCachedObjects_,x=this._indicesByUUID,M=this._paths,F=this._parsedPaths,z=this._bindings,le=z.length,re=0,ve=arguments.length;re!==ve;++re){var Ce=arguments[re],Ve=Ce.uuid,Ue=x[Ve],We=void 0;if(void 0===Ue){Ue=g++,x[Ve]=Ue,h.push(Ce);for(var ft=0,dt=le;ft!==dt;++ft)z[ft].push(new Fa(Ce,M[ft],F[ft]))}else if(Ue<y){We=h[Ue];var at=--y,xt=h[at];for(x[xt.uuid]=Ue,h[Ue]=xt,x[Ve]=at,h[at]=Ce,ft=0,dt=le;ft!==dt;++ft){var St=z[ft],nn=St[at],qt=St[Ue];St[Ue]=nn,void 0===qt&&(qt=new Fa(Ce,M[ft],F[ft])),St[at]=qt}}else h[Ue]!==We&&console.error("Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes...")}this.nCachedObjects_=y},remove:function(a){for(var h=this._objects,g=this.nCachedObjects_,y=this._indicesByUUID,x=this._bindings,M=x.length,F=0,z=arguments.length;F!==z;++F){var le=arguments[F],re=le.uuid,ve=y[re];if(void 0!==ve&&ve>=g){var Ce=g++,Ve=h[Ce];y[Ve.uuid]=ve,h[ve]=Ve,y[re]=Ce,h[Ce]=le;for(var Ue=0,We=M;Ue!==We;++Ue){var ft=x[Ue],dt=ft[Ce],at=ft[ve];ft[ve]=dt,ft[Ce]=at}}}this.nCachedObjects_=g},uncache:function(a){for(var h=this._objects,g=h.length,y=this.nCachedObjects_,x=this._indicesByUUID,M=this._bindings,F=M.length,z=0,le=arguments.length;z!==le;++z){var re=arguments[z],ve=re.uuid,Ce=x[ve];if(void 0!==Ce)if(delete x[ve],Ce<y){var Ve=--y,Ue=h[Ve],ft=h[We=--g];x[Ue.uuid]=Ce,h[Ce]=Ue,x[ft.uuid]=Ve,h[Ve]=ft,h.pop();for(var dt=0,at=F;dt!==at;++dt){var St=(xt=M[dt])[Ve],nn=xt[We];xt[Ce]=St,xt[Ve]=nn,xt.pop()}}else{var We;for(x[(ft=h[We=--g]).uuid]=Ce,h[Ce]=ft,h.pop(),dt=0,at=F;dt!==at;++dt){var xt;(xt=M[dt])[Ce]=xt[We],xt.pop()}}}this.nCachedObjects_=y},subscribe_:function(a,h){var g=this._bindingsIndicesByPath,y=g[a],x=this._bindings;if(void 0!==y)return x[y];var M=this._paths,F=this._parsedPaths,z=this._objects,re=this.nCachedObjects_,ve=new Array(z.length);g[a]=y=x.length,M.push(a),F.push(h),x.push(ve);for(var Ce=re,Ve=z.length;Ce!==Ve;++Ce)ve[Ce]=new Fa(z[Ce],a,h);return ve},unsubscribe_:function(a){var h=this._bindingsIndicesByPath,g=h[a];if(void 0!==g){var y=this._paths,x=this._parsedPaths,M=this._bindings,F=M.length-1,z=M[F];h[a[F]]=g,M[g]=z,M.pop(),x[g]=x[F],x.pop(),y[g]=y[F],y.pop()}}},vc.prototype={constructor:vc,play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(a){return this._startTime=a,this},setLoop:function(a,h){return this.loop=a,this.repetitions=h,this},setEffectiveWeight:function(a){return this.weight=a,this._effectiveWeight=this.enabled?a:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(a){return this._scheduleFading(a,0,1)},fadeOut:function(a){return this._scheduleFading(a,1,0)},crossFadeFrom:function(a,h,g){if(a.fadeOut(h),this.fadeIn(h),g){var y=this._clip.duration,x=a._clip.duration,F=y/x;a.warp(1,x/y,h),this.warp(F,1,h)}return this},crossFadeTo:function(a,h,g){return a.crossFadeFrom(this,h,g)},stopFading:function(){var a=this._weightInterpolant;return null!==a&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(a)),this},setEffectiveTimeScale:function(a){return this.timeScale=a,this._effectiveTimeScale=this.paused?0:a,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(a){return this.timeScale=this._clip.duration/a,this.stopWarping()},syncWith:function(a){return this.time=a.time,this.timeScale=a.timeScale,this.stopWarping()},halt:function(a){return this.warp(this._effectiveTimeScale,0,a)},warp:function(a,h,g){var y=this._mixer,x=y.time,M=this._timeScaleInterpolant,F=this.timeScale;null===M&&(M=y._lendControlInterpolant(),this._timeScaleInterpolant=M);var z=M.parameterPositions,le=M.sampleValues;return z[0]=x,z[1]=x+g,le[0]=a/F,le[1]=h/F,this},stopWarping:function(){var a=this._timeScaleInterpolant;return null!==a&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(a)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(a,h,g,y){var x=this._startTime;if(null!==x){var M=(a-x)*g;if(M<0||0===g)return;this._startTime=null,h=g*M}h*=this._updateTimeScale(a);var F=this._updateTime(h),z=this._updateWeight(a);if(z>0)for(var le=this._interpolants,re=this._propertyBindings,ve=0,Ce=le.length;ve!==Ce;++ve)le[ve].evaluate(F),re[ve].accumulate(y,z)},_updateWeight:function(a){var h=0;if(this.enabled){h=this.weight;var g=this._weightInterpolant;if(null!==g){var y=g.evaluate(a)[0];h*=y,a>g.parameterPositions[1]&&(this.stopFading(),0===y&&(this.enabled=!1))}}return this._effectiveWeight=h,h},_updateTimeScale:function(a){var h=0;if(!this.paused){h=this.timeScale;var g=this._timeScaleInterpolant;null!==g&&(h*=g.evaluate(a)[0],a>g.parameterPositions[1]&&(this.stopWarping(),0===h?this.paused=!0:this.timeScale=h))}return this._effectiveTimeScale=h,h},_updateTime:function(a){var h=this.time+a;if(0===a)return h;var g=this._clip.duration,y=this.loop,x=this._loopCount;if(y===yr){-1===x&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(h>=g)h=g;else{if(!(h<0))break e;h=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:a<0?-1:1})}}else{var M=y===ur;if(-1===x&&(a>=0?(x=0,this._setEndings(!0,0===this.repetitions,M)):this._setEndings(0===this.repetitions,!0,M)),h>=g||h<0){var F=Math.floor(h/g);h-=g*F,x+=Math.abs(F);var z=this.repetitions-x;if(z<0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,h=a>0?g:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:a>0?1:-1});else{if(0===z){var le=a<0;this._setEndings(le,!le,M)}else this._setEndings(!1,!1,M);this._loopCount=x,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:F})}}if(M&&1==(1&x))return this.time=h,g-h}return this.time=h,h},_setEndings:function(a,h,g){var y=this._interpolantSettings;g?(y.endingStart=Ea,y.endingEnd=Ea):(y.endingStart=a?this.zeroSlopeAtStart?Ea:ds:fs,y.endingEnd=h?this.zeroSlopeAtEnd?Ea:ds:fs)},_scheduleFading:function(a,h,g){var y=this._mixer,x=y.time,M=this._weightInterpolant;null===M&&(M=y._lendControlInterpolant(),this._weightInterpolant=M);var F=M.parameterPositions,z=M.sampleValues;return F[0]=x,z[0]=h,F[1]=x+a,z[1]=g,this}},Object.assign(ig.prototype,X.prototype,{clipAction:function(a,h){var g=h||this._root,y=g.uuid,x="string"==typeof a?Ml.findByName(g,a):a,M=null!==x?x.uuid:a,F=this._actionsByClip[M],z=null;if(void 0!==F){var le=F.actionByRoot[y];if(void 0!==le)return le;z=F.knownActions[0],null===x&&(x=z._clip)}if(null===x)return null;var re=new vc(this,x,h);return this._bindAction(re,z),this._addInactiveAction(re,M,y),re},existingAction:function(a,h){var g=h||this._root,y=g.uuid,x="string"==typeof a?Ml.findByName(g,a):a,F=this._actionsByClip[x?x.uuid:a];return void 0!==F&&F.actionByRoot[y]||null},stopAllAction:function(){var a=this._actions,h=this._nActiveActions,g=this._bindings,y=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var x=0;x!==h;++x)a[x].reset();for(x=0;x!==y;++x)g[x].useCount=0;return this},update:function(a){for(var h=this._actions,g=this._nActiveActions,y=this.time+=a*=this.timeScale,x=Math.sign(a),M=this._accuIndex^=1,F=0;F!==g;++F){var z=h[F];z.enabled&&z._update(y,a,x,M)}var le=this._bindings,re=this._nActiveBindings;for(F=0;F!==re;++F)le[F].apply(M);return this},getRoot:function(){return this._root},uncacheClip:function(a){var h=this._actions,g=a.uuid,y=this._actionsByClip,x=y[g];if(void 0!==x){for(var M=x.knownActions,F=0,z=M.length;F!==z;++F){var le=M[F];this._deactivateAction(le);var re=le._cacheIndex,ve=h[h.length-1];le._cacheIndex=null,le._byClipCacheIndex=null,ve._cacheIndex=re,h[re]=ve,h.pop(),this._removeInactiveBindingsForAction(le)}delete y[g]}},uncacheRoot:function(a){var h=a.uuid,g=this._actionsByClip;for(var y in g){var M=g[y].actionByRoot[h];void 0!==M&&(this._deactivateAction(M),this._removeInactiveAction(M))}var z=this._bindingsByRootAndName[h];if(void 0!==z)for(var le in z){var re=z[le];re.restoreOriginalState(),this._removeInactiveBinding(re)}},uncacheAction:function(a,h){var g=this.existingAction(a,h);null!==g&&(this._deactivateAction(g),this._removeInactiveAction(g))}}),Object.assign(ig.prototype,{_bindAction:function(a,h){var g=a._localRoot||this._root,y=a._clip.tracks,x=y.length,M=a._propertyBindings,F=a._interpolants,z=g.uuid,le=this._bindingsByRootAndName,re=le[z];void 0===re&&(le[z]=re={});for(var ve=0;ve!==x;++ve){var Ce=y[ve],Ve=Ce.name,Ue=re[Ve];if(void 0!==Ue)M[ve]=Ue;else{if(void 0!==(Ue=M[ve])){null===Ue._cacheIndex&&(++Ue.referenceCount,this._addInactiveBinding(Ue,z,Ve));continue}++(Ue=new Fc(Fa.create(g,Ve,h&&h._propertyBindings[ve].binding.parsedPath),Ce.ValueTypeName,Ce.getValueSize())).referenceCount,this._addInactiveBinding(Ue,z,Ve),M[ve]=Ue}F[ve].resultBuffer=Ue.buffer}},_activateAction:function(a){if(!this._isActiveAction(a)){if(null===a._cacheIndex){var h=(a._localRoot||this._root).uuid,g=a._clip.uuid,y=this._actionsByClip[g];this._bindAction(a,y&&y.knownActions[0]),this._addInactiveAction(a,g,h)}for(var x=a._propertyBindings,M=0,F=x.length;M!==F;++M){var z=x[M];0==z.useCount++&&(this._lendBinding(z),z.saveOriginalState())}this._lendAction(a)}},_deactivateAction:function(a){if(this._isActiveAction(a)){for(var h=a._propertyBindings,g=0,y=h.length;g!==y;++g){var x=h[g];0==--x.useCount&&(x.restoreOriginalState(),this._takeBackBinding(x))}this._takeBackAction(a)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var a=this;this.stats={actions:{get total(){return a._actions.length},get inUse(){return a._nActiveActions}},bindings:{get total(){return a._bindings.length},get inUse(){return a._nActiveBindings}},controlInterpolants:{get total(){return a._controlInterpolants.length},get inUse(){return a._nActiveControlInterpolants}}}},_isActiveAction:function(a){var h=a._cacheIndex;return null!==h&&h<this._nActiveActions},_addInactiveAction:function(a,h,g){var y=this._actions,x=this._actionsByClip,M=x[h];if(void 0===M)M={knownActions:[a],actionByRoot:{}},a._byClipCacheIndex=0,x[h]=M;else{var F=M.knownActions;a._byClipCacheIndex=F.length,F.push(a)}a._cacheIndex=y.length,y.push(a),M.actionByRoot[g]=a},_removeInactiveAction:function(a){var h=this._actions,g=h[h.length-1],y=a._cacheIndex;g._cacheIndex=y,h[y]=g,h.pop(),a._cacheIndex=null;var x=a._clip.uuid,M=this._actionsByClip,F=M[x],z=F.knownActions,le=z[z.length-1],re=a._byClipCacheIndex;le._byClipCacheIndex=re,z[re]=le,z.pop(),a._byClipCacheIndex=null,delete F.actionByRoot[(h._localRoot||this._root).uuid],0===z.length&&delete M[x],this._removeInactiveBindingsForAction(a)},_removeInactiveBindingsForAction:function(a){for(var h=a._propertyBindings,g=0,y=h.length;g!==y;++g){var x=h[g];0==--x.referenceCount&&this._removeInactiveBinding(x)}},_lendAction:function(a){var h=this._actions,g=a._cacheIndex,y=this._nActiveActions++,x=h[y];a._cacheIndex=y,h[y]=a,x._cacheIndex=g,h[g]=x},_takeBackAction:function(a){var h=this._actions,g=a._cacheIndex,y=--this._nActiveActions,x=h[y];a._cacheIndex=y,h[y]=a,x._cacheIndex=g,h[g]=x},_addInactiveBinding:function(a,h,g){var y=this._bindingsByRootAndName,x=y[h],M=this._bindings;void 0===x&&(y[h]=x={}),x[g]=a,a._cacheIndex=M.length,M.push(a)},_removeInactiveBinding:function(a){var h=this._bindings,g=a.binding,y=g.rootNode.uuid,x=g.path,M=this._bindingsByRootAndName,F=M[y],z=h[h.length-1],le=a._cacheIndex;z._cacheIndex=le,h[le]=z,h.pop(),delete F[x];e:{for(var re in F)break e;delete M[y]}},_lendBinding:function(a){var h=this._bindings,g=a._cacheIndex,y=this._nActiveBindings++,x=h[y];a._cacheIndex=y,h[y]=a,x._cacheIndex=g,h[g]=x},_takeBackBinding:function(a){var h=this._bindings,g=a._cacheIndex,y=--this._nActiveBindings,x=h[y];a._cacheIndex=y,h[y]=a,x._cacheIndex=g,h[g]=x},_lendControlInterpolant:function(){var a=this._controlInterpolants,h=this._nActiveControlInterpolants++,g=a[h];return void 0===g&&((g=new Yd(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=h,a[h]=g),g},_takeBackControlInterpolant:function(a){var h=this._controlInterpolants,g=a.__cacheIndex,y=--this._nActiveControlInterpolants,x=h[y];a.__cacheIndex=y,h[y]=a,x.__cacheIndex=g,h[g]=x},_controlInterpolantsResultBuffer:new Float32Array(1)}),Um.prototype.clone=function(){return new Um(void 0===this.value.clone?this.value:this.value.clone())},(qu.prototype=Object.create(Dr.prototype)).constructor=qu,qu.prototype.isInstancedBufferGeometry=!0,qu.prototype.addGroup=function(a,h,g){this.groups.push({start:a,count:h,materialIndex:g})},qu.prototype.copy=function(a){var h=a.index;null!==h&&this.setIndex(h.clone());var g=a.attributes;for(var y in g)this.addAttribute(y,g[y].clone());for(var M=a.groups,F=0,z=M.length;F<z;F++){var le=M[F];this.addGroup(le.start,le.count,le.materialIndex)}return this},Rf.prototype={constructor:Rf,isInterleavedBufferAttribute:!0,get count(){return this.data.count},get array(){return this.data.array},setX:function(a,h){return this.data.array[a*this.data.stride+this.offset]=h,this},setY:function(a,h){return this.data.array[a*this.data.stride+this.offset+1]=h,this},setZ:function(a,h){return this.data.array[a*this.data.stride+this.offset+2]=h,this},setW:function(a,h){return this.data.array[a*this.data.stride+this.offset+3]=h,this},getX:function(a){return this.data.array[a*this.data.stride+this.offset]},getY:function(a){return this.data.array[a*this.data.stride+this.offset+1]},getZ:function(a){return this.data.array[a*this.data.stride+this.offset+2]},getW:function(a){return this.data.array[a*this.data.stride+this.offset+3]},setXY:function(a,h,g){return this.data.array[(a=a*this.data.stride+this.offset)+0]=h,this.data.array[a+1]=g,this},setXYZ:function(a,h,g,y){return this.data.array[(a=a*this.data.stride+this.offset)+0]=h,this.data.array[a+1]=g,this.data.array[a+2]=y,this},setXYZW:function(a,h,g,y,x){return this.data.array[(a=a*this.data.stride+this.offset)+0]=h,this.data.array[a+1]=g,this.data.array[a+2]=y,this.data.array[a+3]=x,this}},gd.prototype={constructor:gd,isInterleavedBuffer:!0,set needsUpdate(a){!0===a&&this.version++},setArray:function(a){if(Array.isArray(a))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==a?a.length/this.stride:0,this.array=a},setDynamic:function(a){return this.dynamic=a,this},copy:function(a){return this.array=new a.array.constructor(a.array),this.count=a.count,this.stride=a.stride,this.dynamic=a.dynamic,this},copyAt:function(a,h,g){a*=this.stride,g*=h.stride;for(var y=0,x=this.stride;y<x;y++)this.array[a+y]=h.array[g+y];return this},set:function(a,h){return void 0===h&&(h=0),this.array.set(a,h),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(a){return this.onUploadCallback=a,this}},(_h.prototype=Object.create(gd.prototype)).constructor=_h,_h.prototype.isInstancedInterleavedBuffer=!0,_h.prototype.copy=function(a){return gd.prototype.copy.call(this,a),this.meshPerAttribute=a.meshPerAttribute,this},(Jd.prototype=Object.create(gr.prototype)).constructor=Jd,Jd.prototype.isInstancedBufferAttribute=!0,Jd.prototype.copy=function(a){return gr.prototype.copy.call(this,a),this.meshPerAttribute=a.meshPerAttribute,this},ru.prototype={constructor:ru,linePrecision:1,set:function(a,h){this.ray.set(a,h)},setFromCamera:function(a,h){h&&h.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(h.matrixWorld),this.ray.direction.set(a.x,a.y,.5).unproject(h).sub(this.ray.origin).normalize()):h&&h.isOrthographicCamera?(this.ray.origin.set(a.x,a.y,(h.near+h.far)/(h.near-h.far)).unproject(h),this.ray.direction.set(0,0,-1).transformDirection(h.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(a,h){var g=[];return _p(a,this,g,h),g.sort(md),g},intersectObjects:function(a,h){var g=[];if(!1===Array.isArray(a))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),g;for(var y=0,x=a.length;y<x;y++)_p(a[y],this,g,h);return g.sort(md),g}},Hm.prototype={constructor:Hm,start:function(){this.startTime=(performance||Date).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var a=0;if(this.autoStart&&!this.running&&this.start(),this.running){var h=(performance||Date).now();a=(h-this.oldTime)/1e3,this.oldTime=h,this.elapsedTime+=a}return a}},nm.prototype={constructor:nm,set:function(a,h,g){return this.radius=a,this.phi=h,this.theta=g,this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.radius=a.radius,this.phi=a.phi,this.theta=a.theta,this},makeSafe:function(){var a=1e-6;return this.phi=Math.max(a,Math.min(Math.PI-a,this.phi)),this},setFromVector3:function(a){return this.radius=a.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(a.x,a.z),this.phi=Math.acos(As.clamp(a.y/this.radius,-1,1))),this}},bl.prototype={constructor:bl,set:function(a,h,g){return this.radius=a,this.theta=h,this.y=g,this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.radius=a.radius,this.theta=a.theta,this.y=a.y,this},setFromVector3:function(a){return this.radius=Math.sqrt(a.x*a.x+a.z*a.z),this.theta=Math.atan2(a.x,a.z),this.y=a.y,this}},(ca.prototype=Object.create(wa.prototype)).constructor=ca,ca.prototype.createAnimation=function(a,h,g,y){var x={start:h,end:g,length:g-h+1,fps:y,duration:(g-h)/y,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[a]=x,this.animationsList.push(x)},ca.prototype.autoCreateAnimations=function(a){for(var g,h=/([a-z]+)_?(\d+)/i,y={},x=this.geometry,M=0,F=x.morphTargets.length;M<F;M++){var le=x.morphTargets[M].name.match(h);le&&le.length>1&&(y[re=le[1]]||(y[re]={start:1/0,end:-1/0}),M<(ve=y[re]).start&&(ve.start=M),M>ve.end&&(ve.end=M),g||(g=re))}for(var re in y){var ve;this.createAnimation(re,(ve=y[re]).start,ve.end,a)}this.firstAnimation=g},ca.prototype.setAnimationDirectionForward=function(a){var h=this.animationsMap[a];h&&(h.direction=1,h.directionBackwards=!1)},ca.prototype.setAnimationDirectionBackward=function(a){var h=this.animationsMap[a];h&&(h.direction=-1,h.directionBackwards=!0)},ca.prototype.setAnimationFPS=function(a,h){var g=this.animationsMap[a];g&&(g.fps=h,g.duration=(g.end-g.start)/g.fps)},ca.prototype.setAnimationDuration=function(a,h){var g=this.animationsMap[a];g&&(g.duration=h,g.fps=(g.end-g.start)/g.duration)},ca.prototype.setAnimationWeight=function(a,h){var g=this.animationsMap[a];g&&(g.weight=h)},ca.prototype.setAnimationTime=function(a,h){var g=this.animationsMap[a];g&&(g.time=h)},ca.prototype.getAnimationTime=function(a){var h=0,g=this.animationsMap[a];return g&&(h=g.time),h},ca.prototype.getAnimationDuration=function(a){var h=-1,g=this.animationsMap[a];return g&&(h=g.duration),h},ca.prototype.playAnimation=function(a){var h=this.animationsMap[a];h?(h.time=0,h.active=!0):console.warn("THREE.MorphBlendMesh: animation["+a+"] undefined in .playAnimation()")},ca.prototype.stopAnimation=function(a){var h=this.animationsMap[a];h&&(h.active=!1)},ca.prototype.update=function(a){for(var h=0,g=this.animationsList.length;h<g;h++){var y=this.animationsList[h];if(y.active){var x=y.duration/y.length;y.time+=y.direction*a,y.mirroredLoop?(y.time>y.duration||y.time<0)&&(y.direction*=-1,y.time>y.duration&&(y.time=y.duration,y.directionBackwards=!0),y.time<0&&(y.time=0,y.directionBackwards=!1)):(y.time=y.time%y.duration,y.time<0&&(y.time+=y.duration));var M=y.start+As.clamp(Math.floor(y.time/x),0,y.length-1),F=y.weight;M!==y.currentFrame&&(this.morphTargetInfluences[y.lastFrame]=0,this.morphTargetInfluences[y.currentFrame]=1*F,this.morphTargetInfluences[M]=0,y.lastFrame=y.currentFrame,y.currentFrame=M);var z=y.time%x/x;y.directionBackwards&&(z=1-z),y.currentFrame!==y.lastFrame?(this.morphTargetInfluences[y.currentFrame]=z*F,this.morphTargetInfluences[y.lastFrame]=(1-z)*F):this.morphTargetInfluences[y.currentFrame]=F}}},(kf.prototype=Object.create(Cr.prototype)).constructor=kf,kf.prototype.isImmediateRenderObject=!0,(rg.prototype=Object.create(Co.prototype)).constructor=rg,rg.prototype.update=function(){var a=new on,h=new on,g=new Rt;return function(){var x=["a","b","c"];this.object.updateMatrixWorld(!0),g.getNormalMatrix(this.object.matrixWorld);var M=this.object.matrixWorld,F=this.geometry.attributes.position,z=this.object.geometry;if(z&&z.isGeometry)for(var le=z.vertices,re=z.faces,ve=0,Ce=0,Ve=re.length;Ce<Ve;Ce++)for(var Ue=re[Ce],We=0,ft=Ue.vertexNormals.length;We<ft;We++){var at=Ue.vertexNormals[We];a.copy(le[Ue[x[We]]]).applyMatrix4(M),h.copy(at).applyMatrix3(g).normalize().multiplyScalar(this.size).add(a),F.setXYZ(ve,a.x,a.y,a.z),F.setXYZ(ve+=1,h.x,h.y,h.z),ve+=1}else if(z&&z.isBufferGeometry){var xt=z.attributes.position,St=z.attributes.normal;for(ve=0,We=0,ft=xt.count;We<ft;We++)a.set(xt.getX(We),xt.getY(We),xt.getZ(We)).applyMatrix4(M),h.set(St.getX(We),St.getY(We),St.getZ(We)),h.applyMatrix3(g).normalize().multiplyScalar(this.size).add(a),F.setXYZ(ve,a.x,a.y,a.z),F.setXYZ(ve+=1,h.x,h.y,h.z),ve+=1}return F.needsUpdate=!0,this}}(),(jh.prototype=Object.create(Cr.prototype)).constructor=jh,jh.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},jh.prototype.update=function(){var a=new on,h=new on;return function(){var y=this.light.distance?this.light.distance:1e3,x=y*Math.tan(this.light.angle);this.cone.scale.set(x,x,y),a.setFromMatrixPosition(this.light.matrixWorld),h.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(h.sub(a)),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}(),($h.prototype=Object.create(Co.prototype)).constructor=$h,$h.prototype.getBoneList=function(a){var h=[];a&&a.isBone&&h.push(a);for(var g=0;g<a.children.length;g++)h.push.apply(h,this.getBoneList(a.children[g]));return h},$h.prototype.update=function(){var a=new on,h=new vs,g=new vs;return function(){var x=this.geometry,M=x.getAttribute("position");g.getInverse(this.root.matrixWorld);for(var F=0,z=0;F<this.bones.length;F++){var le=this.bones[F];le.parent&&le.parent.isBone&&(h.multiplyMatrices(g,le.matrixWorld),a.setFromMatrixPosition(h),M.setXYZ(z,a.x,a.y,a.z),h.multiplyMatrices(g,le.parent.matrixWorld),a.setFromMatrixPosition(h),M.setXYZ(z+1,a.x,a.y,a.z),z+=2)}x.getAttribute("position").needsUpdate=!0}}(),(vd.prototype=Object.create(wa.prototype)).constructor=vd,vd.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},vd.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)},(ef.prototype=Object.create(Cr.prototype)).constructor=ef,ef.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose(),this.children[1].geometry.dispose(),this.children[1].material.dispose()},ef.prototype.update=function(){var a=new on,h=new on;return function(){var y=this.children[0],x=this.children[1];if(this.light.target){a.setFromMatrixPosition(this.light.matrixWorld),h.setFromMatrixPosition(this.light.target.matrixWorld);var M=h.clone().sub(a);y.lookAt(M),x.lookAt(M)}y.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),x.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var F=.5*this.light.width,z=.5*this.light.height,le=y.geometry.getAttribute("position"),re=le.array;re[0]=F,re[1]=-z,re[2]=0,re[3]=F,re[4]=z,re[5]=0,re[6]=-F,re[7]=z,re[8]=0,re[9]=-F,re[10]=z,re[11]=0,re[12]=-F,re[13]=-z,re[14]=0,re[15]=F,re[16]=-z,re[17]=0,le.needsUpdate=!0}}(),(yd.prototype=Object.create(Cr.prototype)).constructor=yd,yd.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},yd.prototype.update=function(){var a=new on,h=new Xr,g=new Xr;return function(){var x=this.children[0],M=x.geometry.getAttribute("color");h.copy(this.light.color).multiplyScalar(this.light.intensity),g.copy(this.light.groundColor).multiplyScalar(this.light.intensity);for(var F=0,z=M.count;F<z;F++){var le=F<z/2?h:g;M.setXYZ(F,le.r,le.g,le.b)}x.lookAt(a.setFromMatrixPosition(this.light.matrixWorld).negate()),M.needsUpdate=!0}}(),(sg.prototype=Object.create(Co.prototype)).constructor=sg,(Xu.prototype=Object.create(Co.prototype)).constructor=Xu,(qh.prototype=Object.create(Co.prototype)).constructor=qh,qh.prototype.update=function(){var a=new on,h=new on,g=new Rt;return function(){this.object.updateMatrixWorld(!0),g.getNormalMatrix(this.object.matrixWorld);for(var x=this.object.matrixWorld,M=this.geometry.attributes.position,F=this.object.geometry,z=F.vertices,le=F.faces,re=0,ve=0,Ce=le.length;ve<Ce;ve++){var Ve=le[ve],Ue=Ve.normal;a.copy(z[Ve.a]).add(z[Ve.b]).add(z[Ve.c]).divideScalar(3).applyMatrix4(x),h.copy(Ue).applyMatrix3(g).normalize().multiplyScalar(this.size).add(a),M.setXYZ(re,a.x,a.y,a.z),M.setXYZ(re+=1,h.x,h.y,h.z),re+=1}return M.needsUpdate=!0,this}}(),(og.prototype=Object.create(Cr.prototype)).constructor=og,og.prototype.dispose=function(){var a=this.children[0],h=this.children[1];a.geometry.dispose(),a.material.dispose(),h.geometry.dispose(),h.material.dispose()},og.prototype.update=function(){var a=new on,h=new on,g=new on;return function(){a.setFromMatrixPosition(this.light.matrixWorld),h.setFromMatrixPosition(this.light.target.matrixWorld),g.subVectors(h,a);var x=this.children[0],M=this.children[1];x.lookAt(g),x.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),M.lookAt(g),M.scale.z=g.length()}}(),(im.prototype=Object.create(Co.prototype)).constructor=im,im.prototype.update=function(){var a,h,g=new on,y=new Ua;function x(M,F,z,le){g.set(F,z,le).unproject(y);var re=h[M];if(void 0!==re)for(var ve=a.getAttribute("position"),Ce=0,Ve=re.length;Ce<Ve;Ce++)ve.setXYZ(re[Ce],g.x,g.y,g.z)}return function(){a=this.geometry,h=this.pointMap,y.projectionMatrix.copy(this.camera.projectionMatrix),x("c",0,0,-1),x("t",0,0,1),x("n1",-1,-1,-1),x("n2",1,-1,-1),x("n3",-1,1,-1),x("n4",1,1,-1),x("f1",-1,-1,1),x("f2",1,-1,1),x("f3",-1,1,1),x("f4",1,1,1),x("u1",.7,1.1,-1),x("u2",-.7,1.1,-1),x("u3",0,2,-1),x("cf1",-1,0,1),x("cf2",1,0,1),x("cf3",0,-1,1),x("cf4",0,1,1),x("cn1",-1,0,-1),x("cn2",1,0,-1),x("cn3",0,-1,-1),x("cn4",0,1,-1),a.getAttribute("position").needsUpdate=!0}}(),(ag.prototype=Object.create(Co.prototype)).constructor=ag,ag.prototype.update=function(){var a=new Ts;return function(g){if(g&&g.isBox3?a.copy(g):a.setFromObject(g),!a.isEmpty()){var y=a.min,x=a.max,M=this.geometry.attributes.position,F=M.array;F[0]=x.x,F[1]=x.y,F[2]=x.z,F[3]=y.x,F[4]=x.y,F[5]=x.z,F[6]=y.x,F[7]=y.y,F[8]=x.z,F[9]=x.x,F[10]=y.y,F[11]=x.z,F[12]=x.x,F[13]=x.y,F[14]=y.z,F[15]=y.x,F[16]=x.y,F[17]=y.z,F[18]=y.x,F[19]=y.y,F[20]=y.z,F[21]=x.x,F[22]=y.y,F[23]=y.z,M.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}();var lg=new Dr;lg.addAttribute("position",new os([0,0,0,0,1,0],3));var Fv=new Tf(0,.5,1,5,1);function Nc(a,h,g,y,x,M){Cr.call(this),void 0===y&&(y=16776960),void 0===g&&(g=1),void 0===x&&(x=.2*g),void 0===M&&(M=.2*x),this.position.copy(h),this.line=new vu(lg,new cl({color:y})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new wa(Fv,new Va({color:y})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(a),this.setLength(g,x,M)}function Of(a){var h=[0,0,0,a=a||1,0,0,0,0,0,0,a,0,0,0,0,0,0,a],y=new Dr;y.addAttribute("position",new os(h,3)),y.addAttribute("color",new os([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var x=new cl({vertexColors:B});Co.call(this,y,x)}Fv.translate(0,-.5,0),(Nc.prototype=Object.create(Cr.prototype)).constructor=Nc,Nc.prototype.setDirection=function(){var h,a=new on;return function(y){y.y>.99999?this.quaternion.set(0,0,0,1):y.y<-.99999?this.quaternion.set(1,0,0,0):(a.set(y.z,0,-y.x).normalize(),h=Math.acos(y.y),this.quaternion.setFromAxisAngle(a,h))}}(),Nc.prototype.setLength=function(a,h,g){void 0===h&&(h=.2*a),void 0===g&&(g=.2*h),this.line.scale.set(1,Math.max(0,a-h),1),this.line.updateMatrix(),this.cone.scale.set(g,h,g),this.cone.position.y=a,this.cone.updateMatrix()},Nc.prototype.setColor=function(a){this.line.material.color.copy(a),this.cone.material.color.copy(a)},(Of.prototype=Object.create(Co.prototype)).constructor=Of;var Gm=function(){var a=new on,h=new x,g=new x,y=new x;function x(){}return x.prototype.init=function(M,F,z,le){this.c0=M,this.c1=z,this.c2=-3*M+3*F-2*z-le,this.c3=2*M-2*F+z+le},x.prototype.initNonuniformCatmullRom=function(M,F,z,le,re,ve,Ce){var Ve=(F-M)/re-(z-M)/(re+ve)+(z-F)/ve,Ue=(z-F)/ve-(le-F)/(ve+Ce)+(le-z)/Ce;this.init(F,z,Ve*=ve,Ue*=ve)},x.prototype.initCatmullRom=function(M,F,z,le,re){this.init(F,z,re*(z-M),re*(le-F))},x.prototype.calc=function(M){var F=M*M;return this.c0+this.c1*M+this.c2*F+this.c3*(F*M)},Vl.create(function(M){this.points=M||[],this.closed=!1},function(M){var z,le,re,ve,Ce,Ve,Ue,We,F=this.points;if((ve=F.length)<2&&console.log("duh, you need at least 2 points"),re=(z=(ve-(this.closed?0:1))*M)-(le=Math.floor(z)),this.closed?le+=le>0?0:(Math.floor(Math.abs(le)/F.length)+1)*F.length:0===re&&le===ve-1&&(le=ve-2,re=1),this.closed||le>0?Ce=F[(le-1)%ve]:(a.subVectors(F[0],F[1]).add(F[0]),Ce=a),Ve=F[le%ve],Ue=F[(le+1)%ve],this.closed||le+2<ve?We=F[(le+2)%ve]:(a.subVectors(F[ve-1],F[ve-2]).add(F[ve-1]),We=a),void 0===this.type||"centripetal"===this.type||"chordal"===this.type){var ft="chordal"===this.type?.5:.25,dt=Math.pow(Ce.distanceToSquared(Ve),ft),at=Math.pow(Ve.distanceToSquared(Ue),ft),xt=Math.pow(Ue.distanceToSquared(We),ft);at<1e-4&&(at=1),dt<1e-4&&(dt=at),xt<1e-4&&(xt=at),h.initNonuniformCatmullRom(Ce.x,Ve.x,Ue.x,We.x,dt,at,xt),g.initNonuniformCatmullRom(Ce.y,Ve.y,Ue.y,We.y,dt,at,xt),y.initNonuniformCatmullRom(Ce.z,Ve.z,Ue.z,We.z,dt,at,xt)}else if("catmullrom"===this.type){var St=void 0!==this.tension?this.tension:.5;h.initCatmullRom(Ce.x,Ve.x,Ue.x,We.x,St),g.initCatmullRom(Ce.y,Ve.y,Ue.y,We.y,St),y.initCatmullRom(Ce.z,Ve.z,Ue.z,We.z,St)}return new on(h.calc(re),g.calc(re),y.calc(re))})}(),Hy=Vl.create(function(a){console.warn("THREE.SplineCurve3 will be deprecated. Please use THREE.CatmullRomCurve3"),this.points=void 0===a?[]:a},function(a){var h=this.points,g=(h.length-1)*a,y=Math.floor(g),x=g-y,M=h[0==y?y:y-1],F=h[y],z=h[y>h.length-2?h.length-1:y+1],le=h[y>h.length-3?h.length-1:y+2],re=nc.interpolate;return new on(re(M.x,F.x,z.x,le.x,x),re(M.y,F.y,z.y,le.y,x),re(M.z,F.z,z.z,le.z,x))}),Gy=Vl.create(function(a,h,g,y){this.v0=a,this.v1=h,this.v2=g,this.v3=y},function(a){var h=Pa.b3;return new on(h(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x),h(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y),h(a,this.v0.z,this.v1.z,this.v2.z,this.v3.z))}),rm=Vl.create(function(a,h,g){this.v0=a,this.v1=h,this.v2=g},function(a){var h=Pa.b2;return new on(h(a,this.v0.x,this.v1.x,this.v2.x),h(a,this.v0.y,this.v1.y,this.v2.y),h(a,this.v0.z,this.v1.z,this.v2.z))}),mb=Vl.create(function(a,h){this.v1=a,this.v2=h},function(a){if(1===a)return this.v2.clone();var h=new on;return h.subVectors(this.v2,this.v1),h.multiplyScalar(a),h.add(this.v1),h});function bp(a,h,g,y,x,M){fd.call(this,a,h,g,g,y,x,M)}(bp.prototype=Object.create(fd.prototype)).constructor=bp;var hl={createMultiMaterialObject:function(a,h){for(var g=new lp,y=0,x=h.length;y<x;y++)g.add(new wa(a,h[y]));return g},detach:function(a,h,g){a.applyMatrix(h.matrixWorld),h.remove(a),g.add(a)},attach:function(a,h,g){var y=new vs;y.getInverse(g.matrixWorld),a.applyMatrix(y),h.remove(a),g.add(a)}};function Wm(a,h,g,y,x,M,F){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new Bo(a,h,g,x,M,F)}var Ff=0,Nv=1;function vb(a){return console.warn("THREE.MeshFaceMaterial has been renamed to THREE.MultiMaterial."),new yu(a)}function Wy(a,h){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new js(a,h)}function jy(a){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new mu(a)}function q_(a,h){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new js(a,h)}function X_(a){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new kc(a)}function Y_(a){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new kc(a)}function $y(a){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new kc(a)}function jm(a,h,g){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new on(a,h,g)}function Bv(a,h){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new gr(a,h).setDynamic(!0)}function Au(a,h){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Oh(a,h)}function K_(a,h){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new vl(a,h)}function pa(a,h){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Bd(a,h)}function Aa(a,h){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new ap(a,h)}function zv(a,h){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new zd(a,h)}function Xh(a,h){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Cf(a,h)}function Vv(a,h){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Bu(a,h)}function qy(a,h){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new os(a,h)}function Z_(a,h){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Pc(a,h)}function $m(a){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Gm.call(this,a),this.type="catmullrom",this.closed=!0}function Xy(a,h){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new ag(a,h)}function Q_(a,h){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Co(new _l(a.geometry),new cl({color:void 0!==h?h:16777215}))}function yb(a,h){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Co(new fh(a.geometry),new cl({color:void 0!==h?h:16777215}))}function tf(a){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Do(a)}$m.prototype=Object.create(Gm.prototype),sg.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Object.assign(od.prototype,{center:function(a){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(a)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(a){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(a)},size:function(a){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(a)}}),Object.assign(Ts.prototype,{center:function(a){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(a)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(a){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(a)},isIntersectionSphere:function(a){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(a)},size:function(a){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(a)}}),Fl.prototype.center=function(a){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(a)},As.random16=function(){return console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead."),Math.random()},Object.assign(Rt.prototype,{flattenToArrayOffset:function(a,h){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(a,h)},multiplyVector3:function(a){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),a.applyMatrix3(this)},multiplyVector3Array:function(a){return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(a)},applyToBuffer:function(a,h,g){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(a)}}),Object.assign(vs.prototype,{extractPosition:function(a){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(a)},flattenToArrayOffset:function(a,h){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(a,h)},getPosition:function(){var a;return function(){return void 0===a&&(a=new on),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),a.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(a){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(a)},multiplyVector3:function(a){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."),a.applyProjection(this)},multiplyVector4:function(a){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),a.applyMatrix4(this)},multiplyVector3Array:function(a){return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(a)},rotateAxis:function(a){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),a.transformDirection(this)},crossVector:function(a){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),a.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(a,h,g){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(a)}}),bt.prototype.isIntersectionLine=function(a){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(a)},kl.prototype.multiplyVector3=function(a){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),a.applyQuaternion(this)},Object.assign(sa.prototype,{isIntersectionBox:function(a){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(a)},isIntersectionPlane:function(a){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(a)},isIntersectionSphere:function(a){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(a)}}),Object.assign($u.prototype,{extrude:function(a){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new nu(this,a)},makeGeometry:function(a){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Qp(this,a)}}),Object.assign(on.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(a){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(a)},getScaleFromMatrix:function(a){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(a)},getColumnFromMatrix:function(a,h){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(h,a)}}),Ms.prototype.computeTangents=function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")},Object.assign(Cr.prototype,{getChildByName:function(a){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(a)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(a,h){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(h,a)}}),Object.defineProperties(Cr.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(a){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=a}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(aa.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),xl.prototype.setLens=function(a,h){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==h&&(this.filmGauge=h),this.setFocalLength(a)},Object.defineProperties(Js.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(a){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=a}},shadowCameraLeft:{set:function(a){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=a}},shadowCameraRight:{set:function(a){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=a}},shadowCameraTop:{set:function(a){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=a}},shadowCameraBottom:{set:function(a){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=a}},shadowCameraNear:{set:function(a){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=a}},shadowCameraFar:{set:function(a){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=a}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(a){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=a}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(a){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=a}},shadowMapHeight:{set:function(a){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=a}}}),Object.defineProperties(gr.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}}}),Object.assign(Dr.prototype,{addIndex:function(a){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(a)},addDrawCall:function(a,h,g){void 0!==g&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(a,h)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(Dr.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Um.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(Ks.prototype,{wrapAround:{get:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")},set:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE."+this.type+": .wrapRGB has been removed."),new Xr}}}),Object.defineProperties(Sl.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(eu.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(a){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=a}}}),X.prototype=Object.assign(Object.create({constructor:X,apply:function(a){console.warn("THREE.EventDispatcher: .apply is deprecated, just inherit or Object.assign the prototype to mix-in."),Object.assign(a,this)}}),X.prototype),Object.assign(Gd.prototype,{supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(a){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(a)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}}),Object.defineProperties(Gd.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=a}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=a}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."),this.shadowMap.cullFace=a}}}),Object.defineProperties(Mo.prototype,{cullFace:{get:function(){return this.renderReverseSided?L:H},set:function(a){var h=a!==H;console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+h+"."),this.renderReverseSided=h}}}),Object.defineProperties(Sc.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(a){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=a}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(a){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=a}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(a){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=a}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(a){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=a}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(a){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=a}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(a){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=a}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(a){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=a}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(a){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=a}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(a){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=a}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(a){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=a}}}),yh.prototype.load=function(a){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var h=this;return(new tg).load(a,function(y){h.setBuffer(y)}),this},Vm.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};var sm={merge:function(a,h,g){var y;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),h.isMesh&&(h.matrixAutoUpdate&&h.updateMatrix(),y=h.matrix,h=h.geometry),a.merge(h,y,g)},center:function(a){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),a.center()}},Uv={crossOrigin:void 0,loadTexture:function(a,h,g,y){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var x=new Hh;x.setCrossOrigin(this.crossOrigin);var M=x.load(a,g,void 0,y);return h&&(M.mapping=h),M},loadTextureCube:function(a,h,g,y){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var x=new Fm;x.setCrossOrigin(this.crossOrigin);var M=x.load(a,g,void 0,y);return h&&(M.mapping=h),M},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}};function Yy(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(a,h){console.warn("THREE.Projector: .projectVector() is now vector.project()."),a.project(h)},this.unprojectVector=function(a,h){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),a.unproject(h)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}}function Ky(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}}},2944:function(He,we,U){var X=typeof global<"u"&&global||typeof self<"u"&&self||window,D=Function.prototype.apply;function V(O,H){this._id=O,this._clearFn=H}we.setTimeout=function(){return new V(D.call(setTimeout,X,arguments),clearTimeout)},we.setInterval=function(){return new V(D.call(setInterval,X,arguments),clearInterval)},we.clearTimeout=we.clearInterval=function(O){O&&O.close()},V.prototype.unref=V.prototype.ref=function(){},V.prototype.close=function(){this._clearFn.call(X,this._id)},we.enroll=function(O,H){clearTimeout(O._idleTimeoutId),O._idleTimeout=H},we.unenroll=function(O){clearTimeout(O._idleTimeoutId),O._idleTimeout=-1},we._unrefActive=we.active=function(O){clearTimeout(O._idleTimeoutId);var H=O._idleTimeout;H>=0&&(O._idleTimeoutId=setTimeout(function(){O._onTimeout&&O._onTimeout()},H))},U(6563),we.setImmediate=typeof self<"u"&&self.setImmediate||typeof global<"u"&&global.setImmediate||this&&this.setImmediate,we.clearImmediate=typeof self<"u"&&self.clearImmediate||typeof global<"u"&&global.clearImmediate||this&&this.clearImmediate},9699:He=>{He.exports=/[\0-\x1F\x7F-\x9F]/},9127:He=>{He.exports=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/},6020:He=>{He.exports=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/},5450:He=>{He.exports=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/},9315:(He,we,U)=>{"use strict";we.Any=U(1129),we.Cc=U(9699),we.Cf=U(9127),we.P=U(6020),we.Z=U(5450)},1129:He=>{He.exports=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/},3532:He=>{function U(X){try{if(!global.localStorage)return!1}catch{return!1}var D=global.localStorage[X];return null!=D&&"true"===String(D).toLowerCase()}He.exports=function we(X,D){if(U("noDeprecation"))return X;var V=!1;return function O(){if(!V){if(U("throwDeprecation"))throw new Error(D);U("traceDeprecation")?console.trace(D):console.warn(D),V=!0}return X.apply(this,arguments)}}},4922:function(He,we){(function(){"use strict";we.stripBOM=function(U){return"\ufeff"===U[0]?U.substring(1):U}}).call(this)},4032:function(He,we,U){(function(){"use strict";var X,D,V,O,H,L={}.hasOwnProperty;X=U(7904),D=U(7067).defaults,O=function(P){return"string"==typeof P&&(P.indexOf("&")>=0||P.indexOf(">")>=0||P.indexOf("<")>=0)},H=function(P){return"<![CDATA["+V(P)+"]]>"},V=function(P){return P.replace("]]>","]]]]><![CDATA[>")},we.Builder=function(){function P(q){var ee,K;for(ee in this.options={},K=D[.2])!L.call(K,ee)||(this.options[ee]=K[ee]);for(ee in q)!L.call(q,ee)||(this.options[ee]=q[ee])}return P.prototype.buildObject=function(q){var ee,K,ne,se,J,W;return ee=this.options.attrkey,K=this.options.charkey,1===Object.keys(q).length&&this.options.rootName===D[.2].rootName?q=q[J=Object.keys(q)[0]]:J=this.options.rootName,W=this,ne=function(ae,_e){var Ee,te,oe,B,$;if("object"!=typeof _e)W.options.cdata&&O(_e)?ae.raw(H(_e)):ae.txt(_e);else if(Array.isArray(_e)){for(B in _e)if(L.call(_e,B))for($ in te=_e[B])oe=te[$],ae=ne(ae.ele($),oe).up()}else for($ in _e)if(L.call(_e,$))if(te=_e[$],$===ee){if("object"==typeof te)for(Ee in te)ae=ae.att(Ee,te[Ee])}else if($===K)ae=W.options.cdata&&O(te)?ae.raw(H(te)):ae.txt(te);else if(Array.isArray(te))for(B in te)!L.call(te,B)||(ae="string"==typeof(oe=te[B])?W.options.cdata&&O(oe)?ae.ele($).raw(H(oe)).up():ae.ele($,oe).up():ne(ae.ele($),oe).up());else"object"==typeof te?ae=ne(ae.ele($),te).up():"string"==typeof te&&W.options.cdata&&O(te)?ae=ae.ele($).raw(H(te)).up():(null==te&&(te=""),ae=ae.ele($,te.toString()).up());return ae},se=X.create(J,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),ne(se,q).end(this.options.renderOpts)},P}()}).call(this)},7067:function(He,we){(function(){we.defaults={.1:{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},.2:{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:"\n"},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(this)},2238:function(He,we,U){(function(){"use strict";var X,D,V,O,H,L,P,q,ee=function(se,J){return function(){return se.apply(J,arguments)}},ne={}.hasOwnProperty;P=U(1503),V=U(9069),X=U(4922),L=U(3749),q=U(2944).setImmediate,D=U(7067).defaults,O=function(se){return"object"==typeof se&&null!=se&&0===Object.keys(se).length},H=function(se,J,W){var ae,_e;for(ae=0,_e=se.length;ae<_e;ae++)J=(0,se[ae])(J,W);return J},we.Parser=function(se){function J(W){var ae,_e;if(this.parseStringPromise=ee(this.parseStringPromise,this),this.parseString=ee(this.parseString,this),this.reset=ee(this.reset,this),this.assignOrPush=ee(this.assignOrPush,this),this.processAsync=ee(this.processAsync,this),!(this instanceof we.Parser))return new we.Parser(W);for(ae in this.options={},_e=D[.2])!ne.call(_e,ae)||(this.options[ae]=_e[ae]);for(ae in W)!ne.call(W,ae)||(this.options[ae]=W[ae]);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(L.normalize)),this.reset()}return function(se,J){for(var W in J)ne.call(J,W)&&(se[W]=J[W]);function ae(){this.constructor=se}ae.prototype=J.prototype,se.prototype=new ae,se.__super__=J.prototype}(J,se),J.prototype.processAsync=function(){var W,ae;try{return this.remaining.length<=this.options.chunkSize?(W=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(W),this.saxParser.close()):(W=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(W),q(this.processAsync))}catch(_e){if(ae=_e,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(ae)}},J.prototype.assignOrPush=function(W,ae,_e){return ae in W?(W[ae]instanceof Array||(W[ae]=[W[ae]]),W[ae].push(_e)):W[ae]=this.options.explicitArray?[_e]:_e},J.prototype.reset=function(){var W,ae,_e,Ee,te;return this.removeAllListeners(),this.saxParser=P.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=(te=this,function(oe){if(te.saxParser.resume(),!te.saxParser.errThrown)return te.saxParser.errThrown=!0,te.emit("error",oe)}),this.saxParser.onend=function(te){return function(){if(!te.saxParser.ended)return te.saxParser.ended=!0,te.emit("end",te.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,Ee=[],W=this.options.attrkey,ae=this.options.charkey,this.saxParser.onopentag=function(te){return function(oe){var B,$,ie,pe,Be;if((ie={})[ae]="",!te.options.ignoreAttrs)for(B in Be=oe.attributes)!ne.call(Be,B)||(!(W in ie)&&!te.options.mergeAttrs&&(ie[W]={}),$=te.options.attrValueProcessors?H(te.options.attrValueProcessors,oe.attributes[B],B):oe.attributes[B],pe=te.options.attrNameProcessors?H(te.options.attrNameProcessors,B):B,te.options.mergeAttrs?te.assignOrPush(ie,pe,$):ie[W][pe]=$);return ie["#name"]=te.options.tagNameProcessors?H(te.options.tagNameProcessors,oe.name):oe.name,te.options.xmlns&&(ie[te.options.xmlnskey]={uri:oe.uri,local:oe.local}),Ee.push(ie)}}(this),this.saxParser.onclosetag=function(te){return function(){var oe,B,$,ie,pe,Be,Me,xe,ue,Pe;if(Be=Ee.pop(),pe=Be["#name"],(!te.options.explicitChildren||!te.options.preserveChildrenOrder)&&delete Be["#name"],!0===Be.cdata&&(oe=Be.cdata,delete Be.cdata),ue=Ee[Ee.length-1],Be[ae].match(/^\s*$/)&&!oe?(B=Be[ae],delete Be[ae]):(te.options.trim&&(Be[ae]=Be[ae].trim()),te.options.normalize&&(Be[ae]=Be[ae].replace(/\s{2,}/g," ").trim()),Be[ae]=te.options.valueProcessors?H(te.options.valueProcessors,Be[ae],pe):Be[ae],1===Object.keys(Be).length&&ae in Be&&!te.EXPLICIT_CHARKEY&&(Be=Be[ae])),O(Be)&&(Be=""!==te.options.emptyTag?te.options.emptyTag:B),null!=te.options.validator&&(Pe="/"+function(){var ot,Fe,Ye;for(Ye=[],ot=0,Fe=Ee.length;ot<Fe;ot++)Ye.push((ie=Ee[ot])["#name"]);return Ye}().concat(pe).join("/"),function(){try{Be=te.options.validator(Pe,ue&&ue[pe],Be)}catch(Fe){return te.emit("error",Fe)}}()),te.options.explicitChildren&&!te.options.mergeAttrs&&"object"==typeof Be)if(te.options.preserveChildrenOrder){if(ue){for($ in ue[te.options.childkey]=ue[te.options.childkey]||[],Me={},Be)!ne.call(Be,$)||(Me[$]=Be[$]);ue[te.options.childkey].push(Me),delete Be["#name"],1===Object.keys(Be).length&&ae in Be&&!te.EXPLICIT_CHARKEY&&(Be=Be[ae])}}else ie={},te.options.attrkey in Be&&(ie[te.options.attrkey]=Be[te.options.attrkey],delete Be[te.options.attrkey]),!te.options.charsAsChildren&&te.options.charkey in Be&&(ie[te.options.charkey]=Be[te.options.charkey],delete Be[te.options.charkey]),Object.getOwnPropertyNames(Be).length>0&&(ie[te.options.childkey]=Be),Be=ie;return Ee.length>0?te.assignOrPush(ue,pe,Be):(te.options.explicitRoot&&(xe=Be,(Be={})[pe]=xe),te.resultObject=Be,te.saxParser.ended=!0,te.emit("end",te.resultObject))}}(this),_e=function(te){return function(oe){var B,$;if($=Ee[Ee.length-1])return $[ae]+=oe,te.options.explicitChildren&&te.options.preserveChildrenOrder&&te.options.charsAsChildren&&(te.options.includeWhiteChars||""!==oe.replace(/\\n/g,"").trim())&&($[te.options.childkey]=$[te.options.childkey]||[],(B={"#name":"__text__"})[ae]=oe,te.options.normalize&&(B[ae]=B[ae].replace(/\s{2,}/g," ").trim()),$[te.options.childkey].push(B)),$}}(this),this.saxParser.ontext=_e,this.saxParser.oncdata=function(oe){var B;if(B=_e(oe))return B.cdata=!0}},J.prototype.parseString=function(W,ae){var _e;null!=ae&&"function"==typeof ae&&(this.on("end",function(Ee){return this.reset(),ae(null,Ee)}),this.on("error",function(Ee){return this.reset(),ae(Ee)}));try{return""===(W=W.toString()).trim()?(this.emit("end",null),!0):(W=X.stripBOM(W),this.options.async?(this.remaining=W,q(this.processAsync),this.saxParser):this.saxParser.write(W).close())}catch(Ee){if(_e=Ee,!this.saxParser.errThrown&&!this.saxParser.ended)return this.emit("error",_e),this.saxParser.errThrown=!0;if(this.saxParser.ended)throw _e}},J.prototype.parseStringPromise=function(W){return new Promise((ae=this,function(_e,Ee){return ae.parseString(W,function(te,oe){return te?Ee(te):_e(oe)})}));var ae},J}(V),we.parseString=function(se,J,W){var ae,_e;return null!=W?("function"==typeof W&&(ae=W),"object"==typeof J&&(_e=J)):("function"==typeof J&&(ae=J),_e={}),new we.Parser(_e).parseString(se,ae)},we.parseStringPromise=function(se,J){var W;return"object"==typeof J&&(W=J),new we.Parser(W).parseStringPromise(se)}}).call(this)},3749:function(He,we){(function(){"use strict";var U;U=new RegExp(/(?!xmlns)^.*:/),we.normalize=function(X){return X.toLowerCase()},we.firstCharLowerCase=function(X){return X.charAt(0).toLowerCase()+X.slice(1)},we.stripPrefix=function(X){return X.replace(U,"")},we.parseNumbers=function(X){return isNaN(X)||(X=X%1==0?parseInt(X,10):parseFloat(X)),X},we.parseBooleans=function(X){return/^(?:true|false)$/i.test(X)&&(X="true"===X.toLowerCase()),X}}).call(this)},5452:function(He,we,U){(function(){"use strict";var X,D,V,O,L={}.hasOwnProperty;D=U(7067),X=U(4032),V=U(2238),O=U(3749),we.defaults=D.defaults,we.processors=O,we.ValidationError=function(P){function q(ee){this.message=ee}return function(P,q){for(var ee in q)L.call(q,ee)&&(P[ee]=q[ee]);function K(){this.constructor=P}K.prototype=q.prototype,P.prototype=new K,P.__super__=q.prototype}(q,Error),q}(),we.Builder=X.Builder,we.Parser=V.Parser,we.parseString=V.parseString,we.parseStringPromise=V.parseStringPromise}).call(this)},599:function(He){(function(){He.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(this)},2269:function(He){(function(){He.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(this)},3452:function(He){(function(){var we,U,X,D,V,O,H,L=[].slice,P={}.hasOwnProperty;we=function(){var q,ee,K,ne,se,J;if(J=arguments[0],se=2<=arguments.length?L.call(arguments,1):[],V(Object.assign))Object.assign.apply(null,arguments);else for(q=0,K=se.length;q<K;q++)if(null!=(ne=se[q]))for(ee in ne)!P.call(ne,ee)||(J[ee]=ne[ee]);return J},V=function(q){return!!q&&"[object Function]"===Object.prototype.toString.call(q)},O=function(q){var ee;return!!q&&("function"==(ee=typeof q)||"object"===ee)},X=function(q){return V(Array.isArray)?Array.isArray(q):"[object Array]"===Object.prototype.toString.call(q)},D=function(q){var ee;if(X(q))return!q.length;for(ee in q)if(P.call(q,ee))return!1;return!0},H=function(q){var ee,K;return O(q)&&(K=Object.getPrototypeOf(q))&&(ee=K.constructor)&&"function"==typeof ee&&ee instanceof ee&&Function.prototype.toString.call(ee)===Function.prototype.toString.call(Object)},U=function(q){return V(q.valueOf)?q.valueOf():q},He.exports.assign=we,He.exports.isFunction=V,He.exports.isObject=O,He.exports.isArray=X,He.exports.isEmpty=D,He.exports.isPlainObject=H,He.exports.getValue=U}).call(this)},6316:function(He){(function(){He.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(this)},5968:function(He,we,U){(function(){var X;X=U(2269),U(8563),He.exports=function(){function O(H,L,P){if(this.parent=H,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),null==L)throw new Error("Missing attribute name. "+this.debugInfo(L));this.name=this.stringify.name(L),this.value=this.stringify.attValue(P),this.type=X.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(O.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(O.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(O.prototype,"textContent",{get:function(){return this.value},set:function(H){return this.value=H||""}}),Object.defineProperty(O.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(O.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(O.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(O.prototype,"specified",{get:function(){return!0}}),O.prototype.clone=function(){return Object.create(this)},O.prototype.toString=function(H){return this.options.writer.attribute(this,this.options.writer.filterOptions(H))},O.prototype.debugInfo=function(H){return null==(H=H||this.name)?"parent: <"+this.parent.name+">":"attribute: {"+H+"}, parent: <"+this.parent.name+">"},O.prototype.isEqualNode=function(H){return!(H.namespaceURI!==this.namespaceURI||H.prefix!==this.prefix||H.localName!==this.localName||H.value!==this.value)},O}()}).call(this)},1361:function(He,we,U){(function(){var X,V,H={}.hasOwnProperty;X=U(2269),V=U(2182),He.exports=function(L){function P(q,ee){if(P.__super__.constructor.call(this,q),null==ee)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=X.CData,this.value=this.stringify.cdata(ee)}return function(L,P){for(var q in P)H.call(P,q)&&(L[q]=P[q]);function ee(){this.constructor=L}ee.prototype=P.prototype,L.prototype=new ee,L.__super__=P.prototype}(P,L),P.prototype.clone=function(){return Object.create(this)},P.prototype.toString=function(q){return this.options.writer.cdata(this,this.options.writer.filterOptions(q))},P}(V)}).call(this)},2182:function(He,we,U){(function(){var D,O={}.hasOwnProperty;D=U(8563),He.exports=function(H){function L(P){L.__super__.constructor.call(this,P),this.value=""}return function(H,L){for(var P in L)O.call(L,P)&&(H[P]=L[P]);function q(){this.constructor=H}q.prototype=L.prototype,H.prototype=new q,H.__super__=L.prototype}(L,H),Object.defineProperty(L.prototype,"data",{get:function(){return this.value},set:function(P){return this.value=P||""}}),Object.defineProperty(L.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(L.prototype,"textContent",{get:function(){return this.value},set:function(P){return this.value=P||""}}),L.prototype.clone=function(){return Object.create(this)},L.prototype.substringData=function(P,q){throw new Error("This DOM method is not implemented."+this.debugInfo())},L.prototype.appendData=function(P){throw new Error("This DOM method is not implemented."+this.debugInfo())},L.prototype.insertData=function(P,q){throw new Error("This DOM method is not implemented."+this.debugInfo())},L.prototype.deleteData=function(P,q){throw new Error("This DOM method is not implemented."+this.debugInfo())},L.prototype.replaceData=function(P,q,ee){throw new Error("This DOM method is not implemented."+this.debugInfo())},L.prototype.isEqualNode=function(P){return!(!L.__super__.isEqualNode.apply(this,arguments).isEqualNode(P)||P.data!==this.data)},L}(D)}).call(this)},2516:function(He,we,U){(function(){var X,D,H={}.hasOwnProperty;X=U(2269),D=U(2182),He.exports=function(L){function P(q,ee){if(P.__super__.constructor.call(this,q),null==ee)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=X.Comment,this.value=this.stringify.comment(ee)}return function(L,P){for(var q in P)H.call(P,q)&&(L[q]=P[q]);function ee(){this.constructor=L}ee.prototype=P.prototype,L.prototype=new ee,L.__super__=P.prototype}(P,L),P.prototype.clone=function(){return Object.create(this)},P.prototype.toString=function(q){return this.options.writer.comment(this,this.options.writer.filterOptions(q))},P}(D)}).call(this)},5806:function(He,we,U){(function(){var D,V;D=U(9276),V=U(3735),He.exports=function(){function O(){this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new D,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=Object.create(this.defaultParams)}return Object.defineProperty(O.prototype,"parameterNames",{get:function(){return new V(Object.keys(this.defaultParams))}}),O.prototype.getParameter=function(H){return this.params.hasOwnProperty(H)?this.params[H]:null},O.prototype.canSetParameter=function(H,L){return!0},O.prototype.setParameter=function(H,L){return null!=L?this.params[H]=L:delete this.params[H]},O}()}).call(this)},9276:function(He){(function(){He.exports=function(){function U(){}return U.prototype.handleError=function(X){throw new Error(X)},U}()}).call(this)},9906:function(He){(function(){He.exports=function(){function U(){}return U.prototype.hasFeature=function(X,D){return!0},U.prototype.createDocumentType=function(X,D,V){throw new Error("This DOM method is not implemented.")},U.prototype.createDocument=function(X,D,V){throw new Error("This DOM method is not implemented.")},U.prototype.createHTMLDocument=function(X){throw new Error("This DOM method is not implemented.")},U.prototype.getFeature=function(X,D){throw new Error("This DOM method is not implemented.")},U}()}).call(this)},3735:function(He){(function(){He.exports=function(){function U(X){this.arr=X||[]}return Object.defineProperty(U.prototype,"length",{get:function(){return this.arr.length}}),U.prototype.item=function(X){return this.arr[X]||null},U.prototype.contains=function(X){return-1!==this.arr.indexOf(X)},U}()}).call(this)},7274:function(He,we,U){(function(){var X,V,H={}.hasOwnProperty;V=U(8563),X=U(2269),He.exports=function(L){function P(q,ee,K,ne,se,J){if(P.__super__.constructor.call(this,q),null==ee)throw new Error("Missing DTD element name. "+this.debugInfo());if(null==K)throw new Error("Missing DTD attribute name. "+this.debugInfo(ee));if(!ne)throw new Error("Missing DTD attribute type. "+this.debugInfo(ee));if(!se)throw new Error("Missing DTD attribute default. "+this.debugInfo(ee));if(0!==se.indexOf("#")&&(se="#"+se),!se.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(ee));if(J&&!se.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(ee));this.elementName=this.stringify.name(ee),this.type=X.AttributeDeclaration,this.attributeName=this.stringify.name(K),this.attributeType=this.stringify.dtdAttType(ne),J&&(this.defaultValue=this.stringify.dtdAttDefault(J)),this.defaultValueType=se}return function(L,P){for(var q in P)H.call(P,q)&&(L[q]=P[q]);function ee(){this.constructor=L}ee.prototype=P.prototype,L.prototype=new ee,L.__super__=P.prototype}(P,L),P.prototype.toString=function(q){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(q))},P}(V)}).call(this)},2068:function(He,we,U){(function(){var X,V,H={}.hasOwnProperty;V=U(8563),X=U(2269),He.exports=function(L){function P(q,ee,K){if(P.__super__.constructor.call(this,q),null==ee)throw new Error("Missing DTD element name. "+this.debugInfo());K||(K="(#PCDATA)"),Array.isArray(K)&&(K="("+K.join(",")+")"),this.name=this.stringify.name(ee),this.type=X.ElementDeclaration,this.value=this.stringify.dtdElementValue(K)}return function(L,P){for(var q in P)H.call(P,q)&&(L[q]=P[q]);function ee(){this.constructor=L}ee.prototype=P.prototype,L.prototype=new ee,L.__super__=P.prototype}(P,L),P.prototype.toString=function(q){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(q))},P}(V)}).call(this)},8349:function(He,we,U){(function(){var X,V,O,L={}.hasOwnProperty;O=U(3452).isObject,V=U(8563),X=U(2269),He.exports=function(P){function q(ee,K,ne,se){if(q.__super__.constructor.call(this,ee),null==ne)throw new Error("Missing DTD entity name. "+this.debugInfo(ne));if(null==se)throw new Error("Missing DTD entity value. "+this.debugInfo(ne));if(this.pe=!!K,this.name=this.stringify.name(ne),this.type=X.EntityDeclaration,O(se)){if(!se.pubID&&!se.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(ne));if(se.pubID&&!se.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(ne));if(this.internal=!1,null!=se.pubID&&(this.pubID=this.stringify.dtdPubID(se.pubID)),null!=se.sysID&&(this.sysID=this.stringify.dtdSysID(se.sysID)),null!=se.nData&&(this.nData=this.stringify.dtdNData(se.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(ne))}else this.value=this.stringify.dtdEntityValue(se),this.internal=!0}return function(P,q){for(var ee in q)L.call(q,ee)&&(P[ee]=q[ee]);function K(){this.constructor=P}K.prototype=q.prototype,P.prototype=new K,P.__super__=q.prototype}(q,P),Object.defineProperty(q.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(q.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(q.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(q.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(q.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(q.prototype,"xmlVersion",{get:function(){return null}}),q.prototype.toString=function(ee){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(ee))},q}(V)}).call(this)},3087:function(He,we,U){(function(){var X,V,H={}.hasOwnProperty;V=U(8563),X=U(2269),He.exports=function(L){function P(q,ee,K){if(P.__super__.constructor.call(this,q),null==ee)throw new Error("Missing DTD notation name. "+this.debugInfo(ee));if(!K.pubID&&!K.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(ee));this.name=this.stringify.name(ee),this.type=X.NotationDeclaration,null!=K.pubID&&(this.pubID=this.stringify.dtdPubID(K.pubID)),null!=K.sysID&&(this.sysID=this.stringify.dtdSysID(K.sysID))}return function(L,P){for(var q in P)H.call(P,q)&&(L[q]=P[q]);function ee(){this.constructor=L}ee.prototype=P.prototype,L.prototype=new ee,L.__super__=P.prototype}(P,L),Object.defineProperty(P.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(P.prototype,"systemId",{get:function(){return this.sysID}}),P.prototype.toString=function(q){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(q))},P}(V)}).call(this)},4789:function(He,we,U){(function(){var X,V,O,L={}.hasOwnProperty;O=U(3452).isObject,V=U(8563),X=U(2269),He.exports=function(P){function q(ee,K,ne,se){var J;q.__super__.constructor.call(this,ee),O(K)&&(K=(J=K).version,ne=J.encoding,se=J.standalone),K||(K="1.0"),this.type=X.Declaration,this.version=this.stringify.xmlVersion(K),null!=ne&&(this.encoding=this.stringify.xmlEncoding(ne)),null!=se&&(this.standalone=this.stringify.xmlStandalone(se))}return function(P,q){for(var ee in q)L.call(q,ee)&&(P[ee]=q[ee]);function K(){this.constructor=P}K.prototype=q.prototype,P.prototype=new K,P.__super__=q.prototype}(q,P),q.prototype.toString=function(ee){return this.options.writer.declaration(this,this.options.writer.filterOptions(ee))},q}(V)}).call(this)},9195:function(He,we,U){(function(){var X,D,V,O,H,P,q,ee,ne={}.hasOwnProperty;ee=U(3452).isObject,q=U(8563),X=U(2269),D=U(7274),O=U(8349),V=U(2068),H=U(3087),P=U(5264),He.exports=function(se){function J(W,ae,_e){var Ee,te,oe,B,$,ie;if(J.__super__.constructor.call(this,W),this.type=X.DocType,W.children)for(te=0,oe=(B=W.children).length;te<oe;te++)if((Ee=B[te]).type===X.Element){this.name=Ee.name;break}this.documentObject=W,ee(ae)&&(ae=($=ae).pubID,_e=$.sysID),null==_e&&(_e=(ie=[ae,_e])[0],ae=ie[1]),null!=ae&&(this.pubID=this.stringify.dtdPubID(ae)),null!=_e&&(this.sysID=this.stringify.dtdSysID(_e))}return function(se,J){for(var W in J)ne.call(J,W)&&(se[W]=J[W]);function ae(){this.constructor=se}ae.prototype=J.prototype,se.prototype=new ae,se.__super__=J.prototype}(J,se),Object.defineProperty(J.prototype,"entities",{get:function(){var W,ae,_e,Ee,te;for(Ee={},ae=0,_e=(te=this.children).length;ae<_e;ae++)(W=te[ae]).type===X.EntityDeclaration&&!W.pe&&(Ee[W.name]=W);return new P(Ee)}}),Object.defineProperty(J.prototype,"notations",{get:function(){var W,ae,_e,Ee,te;for(Ee={},ae=0,_e=(te=this.children).length;ae<_e;ae++)(W=te[ae]).type===X.NotationDeclaration&&(Ee[W.name]=W);return new P(Ee)}}),Object.defineProperty(J.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(J.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(J.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),J.prototype.element=function(W,ae){var _e;return _e=new V(this,W,ae),this.children.push(_e),this},J.prototype.attList=function(W,ae,_e,Ee,te){var oe;return oe=new D(this,W,ae,_e,Ee,te),this.children.push(oe),this},J.prototype.entity=function(W,ae){var _e;return _e=new O(this,!1,W,ae),this.children.push(_e),this},J.prototype.pEntity=function(W,ae){var _e;return _e=new O(this,!0,W,ae),this.children.push(_e),this},J.prototype.notation=function(W,ae){var _e;return _e=new H(this,W,ae),this.children.push(_e),this},J.prototype.toString=function(W){return this.options.writer.docType(this,this.options.writer.filterOptions(W))},J.prototype.ele=function(W,ae){return this.element(W,ae)},J.prototype.att=function(W,ae,_e,Ee,te){return this.attList(W,ae,_e,Ee,te)},J.prototype.ent=function(W,ae){return this.entity(W,ae)},J.prototype.pent=function(W,ae){return this.pEntity(W,ae)},J.prototype.not=function(W,ae){return this.notation(W,ae)},J.prototype.up=function(){return this.root()||this.documentObject},J.prototype.isEqualNode=function(W){return!(!J.__super__.isEqualNode.apply(this,arguments).isEqualNode(W)||W.name!==this.name||W.publicId!==this.publicId||W.systemId!==this.systemId)},J}(q)}).call(this)},519:function(He,we,U){(function(){var X,D,V,H,L,P,q,K={}.hasOwnProperty;q=U(3452).isPlainObject,V=U(9906),D=U(5806),H=U(8563),X=U(2269),P=U(5041),L=U(4354),He.exports=function(ne){function se(J){se.__super__.constructor.call(this,null),this.name="#document",this.type=X.Document,this.documentURI=null,this.domConfig=new D,J||(J={}),J.writer||(J.writer=new L),this.options=J,this.stringify=new P(J)}return function(ne,se){for(var J in se)K.call(se,J)&&(ne[J]=se[J]);function W(){this.constructor=ne}W.prototype=se.prototype,ne.prototype=new W,ne.__super__=se.prototype}(se,ne),Object.defineProperty(se.prototype,"implementation",{value:new V}),Object.defineProperty(se.prototype,"doctype",{get:function(){var J,W,ae,_e;for(W=0,ae=(_e=this.children).length;W<ae;W++)if((J=_e[W]).type===X.DocType)return J;return null}}),Object.defineProperty(se.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(se.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(se.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(se.prototype,"xmlEncoding",{get:function(){return 0!==this.children.length&&this.children[0].type===X.Declaration?this.children[0].encoding:null}}),Object.defineProperty(se.prototype,"xmlStandalone",{get:function(){return 0!==this.children.length&&this.children[0].type===X.Declaration&&"yes"===this.children[0].standalone}}),Object.defineProperty(se.prototype,"xmlVersion",{get:function(){return 0!==this.children.length&&this.children[0].type===X.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(se.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(se.prototype,"origin",{get:function(){return null}}),Object.defineProperty(se.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(se.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(se.prototype,"contentType",{get:function(){return null}}),se.prototype.end=function(J){var W;return W={},J?q(J)&&(W=J,J=this.options.writer):J=this.options.writer,J.document(this,J.filterOptions(W))},se.prototype.toString=function(J){return this.options.writer.document(this,this.options.writer.filterOptions(J))},se.prototype.createElement=function(J){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.createTextNode=function(J){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.createComment=function(J){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.createCDATASection=function(J){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.createProcessingInstruction=function(J,W){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.createAttribute=function(J){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.createEntityReference=function(J){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.getElementsByTagName=function(J){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.importNode=function(J,W){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.createElementNS=function(J,W){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.createAttributeNS=function(J,W){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.getElementsByTagNameNS=function(J,W){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.getElementById=function(J){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.adoptNode=function(J){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.renameNode=function(J,W,ae){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.getElementsByClassName=function(J){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.createEvent=function(J){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.createNodeIterator=function(J,W,ae){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.createTreeWalker=function(J,W,ae){throw new Error("This DOM method is not implemented."+this.debugInfo())},se}(H)}).call(this)},1105:function(He,we,U){(function(){var X,D,V,O,H,L,P,q,ee,K,ne,se,W,ae,_e,Ee,te,oe,B,$,ie,pe,Be,Me={}.hasOwnProperty;Be=U(3452),ie=Be.isObject,$=Be.isFunction,pe=Be.isPlainObject,B=Be.getValue,X=U(2269),se=U(519),W=U(3352),O=U(1361),H=U(2516),_e=U(9942),oe=U(474),ae=U(4666),K=U(4789),ne=U(9195),L=U(7274),q=U(8349),P=U(2068),ee=U(3087),V=U(5968),te=U(5041),Ee=U(4354),D=U(6316),He.exports=function(){function xe(ue,Pe,ot){var Fe;this.name="?xml",this.type=X.Document,ue||(ue={}),Fe={},ue.writer?pe(ue.writer)&&(Fe=ue.writer,ue.writer=new Ee):ue.writer=new Ee,this.options=ue,this.writer=ue.writer,this.writerOptions=this.writer.filterOptions(Fe),this.stringify=new te(ue),this.onDataCallback=Pe||function(){},this.onEndCallback=ot||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return xe.prototype.createChildNode=function(ue){var ot,Fe,Ye,lt,vt,vn,Ne;switch(ue.type){case X.CData:this.cdata(ue.value);break;case X.Comment:this.comment(ue.value);break;case X.Element:for(ot in Fe={},vn=ue.attribs)!Me.call(vn,ot)||(Fe[ot]=vn[ot].value);this.node(ue.name,Fe);break;case X.Dummy:this.dummy();break;case X.Raw:this.raw(ue.value);break;case X.Text:this.text(ue.value);break;case X.ProcessingInstruction:this.instruction(ue.target,ue.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+ue.constructor.name)}for(lt=0,vt=(Ne=ue.children).length;lt<vt;lt++)this.createChildNode(Ye=Ne[lt]),Ye.type===X.Element&&this.up();return this},xe.prototype.dummy=function(){return this},xe.prototype.node=function(ue,Pe,ot){var Fe;if(null==ue)throw new Error("Missing node name.");if(this.root&&-1===this.currentLevel)throw new Error("Document can only have one root node. "+this.debugInfo(ue));return this.openCurrent(),ue=B(ue),null==Pe&&(Pe={}),Pe=B(Pe),ie(Pe)||(ot=(Fe=[Pe,ot])[0],Pe=Fe[1]),this.currentNode=new W(this,ue,Pe),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,null!=ot&&this.text(ot),this},xe.prototype.element=function(ue,Pe,ot){var Fe,Ye,lt,vt,vn,Ne;if(this.currentNode&&this.currentNode.type===X.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(ue)||ie(ue)||$(ue))for(vt=this.options.noValidation,this.options.noValidation=!0,(Ne=new se(this.options).element("TEMP_ROOT")).element(ue),this.options.noValidation=vt,Ye=0,lt=(vn=Ne.children).length;Ye<lt;Ye++)this.createChildNode(Fe=vn[Ye]),Fe.type===X.Element&&this.up();else this.node(ue,Pe,ot);return this},xe.prototype.attribute=function(ue,Pe){var ot;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(ue));if(null!=ue&&(ue=B(ue)),ie(ue))for(ot in ue)!Me.call(ue,ot)||this.attribute(ot,ue[ot]);else $(Pe)&&(Pe=Pe.apply()),this.options.keepNullAttributes&&null==Pe?this.currentNode.attribs[ue]=new V(this,ue,""):null!=Pe&&(this.currentNode.attribs[ue]=new V(this,ue,Pe));return this},xe.prototype.text=function(ue){var Pe;return this.openCurrent(),Pe=new oe(this,ue),this.onData(this.writer.text(Pe,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},xe.prototype.cdata=function(ue){var Pe;return this.openCurrent(),Pe=new O(this,ue),this.onData(this.writer.cdata(Pe,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},xe.prototype.comment=function(ue){var Pe;return this.openCurrent(),Pe=new H(this,ue),this.onData(this.writer.comment(Pe,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},xe.prototype.raw=function(ue){var Pe;return this.openCurrent(),Pe=new _e(this,ue),this.onData(this.writer.raw(Pe,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},xe.prototype.instruction=function(ue,Pe){var ot,Fe,lt,vt;if(this.openCurrent(),null!=ue&&(ue=B(ue)),null!=Pe&&(Pe=B(Pe)),Array.isArray(ue))for(ot=0,lt=ue.length;ot<lt;ot++)this.instruction(Fe=ue[ot]);else if(ie(ue))for(Fe in ue)!Me.call(ue,Fe)||this.instruction(Fe,ue[Fe]);else $(Pe)&&(Pe=Pe.apply()),vt=new ae(this,ue,Pe),this.onData(this.writer.processingInstruction(vt,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},xe.prototype.declaration=function(ue,Pe,ot){var Fe;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return Fe=new K(this,ue,Pe,ot),this.onData(this.writer.declaration(Fe,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},xe.prototype.doctype=function(ue,Pe,ot){if(this.openCurrent(),null==ue)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new ne(this,Pe,ot),this.currentNode.rootNodeName=ue,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},xe.prototype.dtdElement=function(ue,Pe){var ot;return this.openCurrent(),ot=new P(this,ue,Pe),this.onData(this.writer.dtdElement(ot,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},xe.prototype.attList=function(ue,Pe,ot,Fe,Ye){var lt;return this.openCurrent(),lt=new L(this,ue,Pe,ot,Fe,Ye),this.onData(this.writer.dtdAttList(lt,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},xe.prototype.entity=function(ue,Pe){var ot;return this.openCurrent(),ot=new q(this,!1,ue,Pe),this.onData(this.writer.dtdEntity(ot,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},xe.prototype.pEntity=function(ue,Pe){var ot;return this.openCurrent(),ot=new q(this,!0,ue,Pe),this.onData(this.writer.dtdEntity(ot,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},xe.prototype.notation=function(ue,Pe){var ot;return this.openCurrent(),ot=new ee(this,ue,Pe),this.onData(this.writer.dtdNotation(ot,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},xe.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},xe.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},xe.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},xe.prototype.openNode=function(ue){var ot,Fe,Ye;if(!ue.isOpen){if(!this.root&&0===this.currentLevel&&ue.type===X.Element&&(this.root=ue),ot="",ue.type===X.Element){for(Fe in this.writerOptions.state=D.OpenTag,ot=this.writer.indent(ue,this.writerOptions,this.currentLevel)+"<"+ue.name,Ye=ue.attribs)!Me.call(Ye,Fe)||(ot+=this.writer.attribute(Ye[Fe],this.writerOptions,this.currentLevel));ot+=(ue.children?">":"/>")+this.writer.endline(ue,this.writerOptions,this.currentLevel),this.writerOptions.state=D.InsideTag}else this.writerOptions.state=D.OpenTag,ot=this.writer.indent(ue,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+ue.rootNodeName,ue.pubID&&ue.sysID?ot+=' PUBLIC "'+ue.pubID+'" "'+ue.sysID+'"':ue.sysID&&(ot+=' SYSTEM "'+ue.sysID+'"'),ue.children?(ot+=" [",this.writerOptions.state=D.InsideTag):(this.writerOptions.state=D.CloseTag,ot+=">"),ot+=this.writer.endline(ue,this.writerOptions,this.currentLevel);return this.onData(ot,this.currentLevel),ue.isOpen=!0}},xe.prototype.closeNode=function(ue){var Pe;if(!ue.isClosed)return"",this.writerOptions.state=D.CloseTag,Pe=ue.type===X.Element?this.writer.indent(ue,this.writerOptions,this.currentLevel)+"</"+ue.name+">"+this.writer.endline(ue,this.writerOptions,this.currentLevel):this.writer.indent(ue,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(ue,this.writerOptions,this.currentLevel),this.writerOptions.state=D.None,this.onData(Pe,this.currentLevel),ue.isClosed=!0},xe.prototype.onData=function(ue,Pe){return this.documentStarted=!0,this.onDataCallback(ue,Pe+1)},xe.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},xe.prototype.debugInfo=function(ue){return null==ue?"":"node: <"+ue+">"},xe.prototype.ele=function(){return this.element.apply(this,arguments)},xe.prototype.nod=function(ue,Pe,ot){return this.node(ue,Pe,ot)},xe.prototype.txt=function(ue){return this.text(ue)},xe.prototype.dat=function(ue){return this.cdata(ue)},xe.prototype.com=function(ue){return this.comment(ue)},xe.prototype.ins=function(ue,Pe){return this.instruction(ue,Pe)},xe.prototype.dec=function(ue,Pe,ot){return this.declaration(ue,Pe,ot)},xe.prototype.dtd=function(ue,Pe,ot){return this.doctype(ue,Pe,ot)},xe.prototype.e=function(ue,Pe,ot){return this.element(ue,Pe,ot)},xe.prototype.n=function(ue,Pe,ot){return this.node(ue,Pe,ot)},xe.prototype.t=function(ue){return this.text(ue)},xe.prototype.d=function(ue){return this.cdata(ue)},xe.prototype.c=function(ue){return this.comment(ue)},xe.prototype.r=function(ue){return this.raw(ue)},xe.prototype.i=function(ue,Pe){return this.instruction(ue,Pe)},xe.prototype.att=function(){return this.currentNode&&this.currentNode.type===X.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},xe.prototype.a=function(){return this.currentNode&&this.currentNode.type===X.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},xe.prototype.ent=function(ue,Pe){return this.entity(ue,Pe)},xe.prototype.pent=function(ue,Pe){return this.pEntity(ue,Pe)},xe.prototype.not=function(ue,Pe){return this.notation(ue,Pe)},xe}()}).call(this)},4173:function(He,we,U){(function(){var X,V,H={}.hasOwnProperty;V=U(8563),X=U(2269),He.exports=function(L){function P(q){P.__super__.constructor.call(this,q),this.type=X.Dummy}return function(L,P){for(var q in P)H.call(P,q)&&(L[q]=P[q]);function ee(){this.constructor=L}ee.prototype=P.prototype,L.prototype=new ee,L.__super__=P.prototype}(P,L),P.prototype.clone=function(){return Object.create(this)},P.prototype.toString=function(q){return""},P}(V)}).call(this)},3352:function(He,we,U){(function(){var X,D,O,H,L,P,q,ee,ne={}.hasOwnProperty;ee=U(3452),q=ee.isObject,P=ee.isFunction,L=ee.getValue,H=U(8563),X=U(2269),D=U(5968),O=U(5264),He.exports=function(se){function J(W,ae,_e){var Ee,te,oe,B;if(J.__super__.constructor.call(this,W),null==ae)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(ae),this.type=X.Element,this.attribs={},this.schemaTypeInfo=null,null!=_e&&this.attribute(_e),W.type===X.Document&&(this.isRoot=!0,this.documentObject=W,W.rootObject=this,W.children))for(te=0,oe=(B=W.children).length;te<oe;te++)if((Ee=B[te]).type===X.DocType){Ee.name=this.name;break}}return function(se,J){for(var W in J)ne.call(J,W)&&(se[W]=J[W]);function ae(){this.constructor=se}ae.prototype=J.prototype,se.prototype=new ae,se.__super__=J.prototype}(J,se),Object.defineProperty(J.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(J.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(J.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(J.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(J.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(J.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(J.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(J.prototype,"attributes",{get:function(){return(!this.attributeMap||!this.attributeMap.nodes)&&(this.attributeMap=new O(this.attribs)),this.attributeMap}}),J.prototype.clone=function(){var ae,_e,Ee;for(ae in(_e=Object.create(this)).isRoot&&(_e.documentObject=null),_e.attribs={},Ee=this.attribs)!ne.call(Ee,ae)||(_e.attribs[ae]=Ee[ae].clone());return _e.children=[],this.children.forEach(function(te){var oe;return(oe=te.clone()).parent=_e,_e.children.push(oe)}),_e},J.prototype.attribute=function(W,ae){var _e;if(null!=W&&(W=L(W)),q(W))for(_e in W)!ne.call(W,_e)||this.attribute(_e,W[_e]);else P(ae)&&(ae=ae.apply()),this.options.keepNullAttributes&&null==ae?this.attribs[W]=new D(this,W,""):null!=ae&&(this.attribs[W]=new D(this,W,ae));return this},J.prototype.removeAttribute=function(W){var _e,Ee;if(null==W)throw new Error("Missing attribute name. "+this.debugInfo());if(W=L(W),Array.isArray(W))for(_e=0,Ee=W.length;_e<Ee;_e++)delete this.attribs[W[_e]];else delete this.attribs[W];return this},J.prototype.toString=function(W){return this.options.writer.element(this,this.options.writer.filterOptions(W))},J.prototype.att=function(W,ae){return this.attribute(W,ae)},J.prototype.a=function(W,ae){return this.attribute(W,ae)},J.prototype.getAttribute=function(W){return this.attribs.hasOwnProperty(W)?this.attribs[W].value:null},J.prototype.setAttribute=function(W,ae){throw new Error("This DOM method is not implemented."+this.debugInfo())},J.prototype.getAttributeNode=function(W){return this.attribs.hasOwnProperty(W)?this.attribs[W]:null},J.prototype.setAttributeNode=function(W){throw new Error("This DOM method is not implemented."+this.debugInfo())},J.prototype.removeAttributeNode=function(W){throw new Error("This DOM method is not implemented."+this.debugInfo())},J.prototype.getElementsByTagName=function(W){throw new Error("This DOM method is not implemented."+this.debugInfo())},J.prototype.getAttributeNS=function(W,ae){throw new Error("This DOM method is not implemented."+this.debugInfo())},J.prototype.setAttributeNS=function(W,ae,_e){throw new Error("This DOM method is not implemented."+this.debugInfo())},J.prototype.removeAttributeNS=function(W,ae){throw new Error("This DOM method is not implemented."+this.debugInfo())},J.prototype.getAttributeNodeNS=function(W,ae){throw new Error("This DOM method is not implemented."+this.debugInfo())},J.prototype.setAttributeNodeNS=function(W){throw new Error("This DOM method is not implemented."+this.debugInfo())},J.prototype.getElementsByTagNameNS=function(W,ae){throw new Error("This DOM method is not implemented."+this.debugInfo())},J.prototype.hasAttribute=function(W){return this.attribs.hasOwnProperty(W)},J.prototype.hasAttributeNS=function(W,ae){throw new Error("This DOM method is not implemented."+this.debugInfo())},J.prototype.setIdAttribute=function(W,ae){return this.attribs.hasOwnProperty(W)?this.attribs[W].isId:ae},J.prototype.setIdAttributeNS=function(W,ae,_e){throw new Error("This DOM method is not implemented."+this.debugInfo())},J.prototype.setIdAttributeNode=function(W,ae){throw new Error("This DOM method is not implemented."+this.debugInfo())},J.prototype.getElementsByTagName=function(W){throw new Error("This DOM method is not implemented."+this.debugInfo())},J.prototype.getElementsByTagNameNS=function(W,ae){throw new Error("This DOM method is not implemented."+this.debugInfo())},J.prototype.getElementsByClassName=function(W){throw new Error("This DOM method is not implemented."+this.debugInfo())},J.prototype.isEqualNode=function(W){var ae,_e,Ee;if(!J.__super__.isEqualNode.apply(this,arguments).isEqualNode(W)||W.namespaceURI!==this.namespaceURI||W.prefix!==this.prefix||W.localName!==this.localName||W.attribs.length!==this.attribs.length)return!1;for(ae=_e=0,Ee=this.attribs.length-1;0<=Ee?_e<=Ee:_e>=Ee;ae=0<=Ee?++_e:--_e)if(!this.attribs[ae].isEqualNode(W.attribs[ae]))return!1;return!0},J}(H)}).call(this)},5264:function(He){(function(){He.exports=function(){function U(X){this.nodes=X}return Object.defineProperty(U.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),U.prototype.clone=function(){return this.nodes=null},U.prototype.getNamedItem=function(X){return this.nodes[X]},U.prototype.setNamedItem=function(X){var D;return D=this.nodes[X.nodeName],this.nodes[X.nodeName]=X,D||null},U.prototype.removeNamedItem=function(X){var D;return D=this.nodes[X],delete this.nodes[X],D||null},U.prototype.item=function(X){return this.nodes[Object.keys(this.nodes)[X]]||null},U.prototype.getNamedItemNS=function(X,D){throw new Error("This DOM method is not implemented.")},U.prototype.setNamedItemNS=function(X){throw new Error("This DOM method is not implemented.")},U.prototype.removeNamedItemNS=function(X,D){throw new Error("This DOM method is not implemented.")},U}()}).call(this)},8563:function(He,we,U){(function(){var X,D,V,O,H,L,P,q,ne,se,J,W,ae,_e,Ee,te,oe,B={}.hasOwnProperty;oe=U(3452),te=oe.isObject,Ee=oe.isFunction,_e=oe.isEmpty,ae=oe.getValue,q=null,V=null,O=null,H=null,L=null,J=null,W=null,se=null,P=null,D=null,ne=null,X=null,He.exports=function(){function $(ie){this.parent=ie,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,q||(q=U(3352),V=U(1361),O=U(2516),H=U(4789),L=U(9195),J=U(9942),W=U(474),se=U(4666),P=U(4173),D=U(2269),ne=U(5112),U(5264),X=U(599))}return Object.defineProperty($.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty($.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty($.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty($.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty($.prototype,"childNodes",{get:function(){return(!this.childNodeList||!this.childNodeList.nodes)&&(this.childNodeList=new ne(this.children)),this.childNodeList}}),Object.defineProperty($.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty($.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty($.prototype,"previousSibling",{get:function(){var ie;return ie=this.parent.children.indexOf(this),this.parent.children[ie-1]||null}}),Object.defineProperty($.prototype,"nextSibling",{get:function(){var ie;return ie=this.parent.children.indexOf(this),this.parent.children[ie+1]||null}}),Object.defineProperty($.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty($.prototype,"textContent",{get:function(){var ie,pe,Be,Me,xe;if(this.nodeType===D.Element||this.nodeType===D.DocumentFragment){for(xe="",pe=0,Be=(Me=this.children).length;pe<Be;pe++)(ie=Me[pe]).textContent&&(xe+=ie.textContent);return xe}return null},set:function(ie){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),$.prototype.setParent=function(ie){var Be,Me,xe,ue;for(this.parent=ie,ie&&(this.options=ie.options,this.stringify=ie.stringify),ue=[],Be=0,Me=(xe=this.children).length;Be<Me;Be++)ue.push(xe[Be].setParent(this));return ue},$.prototype.element=function(ie,pe,Be){var Me,ue,Pe,ot,Fe,Ye,lt,vt,vn,Ne;if(Fe=null,null===pe&&null==Be&&(pe=(vt=[{},null])[0],Be=vt[1]),null==pe&&(pe={}),pe=ae(pe),te(pe)||(Be=(vn=[pe,Be])[0],pe=vn[1]),null!=ie&&(ie=ae(ie)),Array.isArray(ie))for(ue=0,Ye=ie.length;ue<Ye;ue++)Fe=this.element(ie[ue]);else if(Ee(ie))Fe=this.element(ie.apply());else if(te(ie)){for(ot in ie)if(B.call(ie,ot))if(Ee(Ne=ie[ot])&&(Ne=Ne.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&0===ot.indexOf(this.stringify.convertAttKey))Fe=this.attribute(ot.substr(this.stringify.convertAttKey.length),Ne);else if(!this.options.separateArrayItems&&Array.isArray(Ne)&&_e(Ne))Fe=this.dummy();else if(te(Ne)&&_e(Ne))Fe=this.element(ot);else if(this.options.keepNullNodes||null!=Ne)if(!this.options.separateArrayItems&&Array.isArray(Ne))for(Pe=0,lt=Ne.length;Pe<lt;Pe++)(Me={})[ot]=Ne[Pe],Fe=this.element(Me);else te(Ne)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===ot.indexOf(this.stringify.convertTextKey)?Fe=this.element(Ne):(Fe=this.element(ot)).element(Ne):Fe=this.element(ot,Ne);else Fe=this.dummy()}else Fe=this.options.keepNullNodes||null!==Be?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===ie.indexOf(this.stringify.convertTextKey)?this.text(Be):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&0===ie.indexOf(this.stringify.convertCDataKey)?this.cdata(Be):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&0===ie.indexOf(this.stringify.convertCommentKey)?this.comment(Be):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&0===ie.indexOf(this.stringify.convertRawKey)?this.raw(Be):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&0===ie.indexOf(this.stringify.convertPIKey)?this.instruction(ie.substr(this.stringify.convertPIKey.length),Be):this.node(ie,pe,Be):this.dummy();if(null==Fe)throw new Error("Could not create any elements with: "+ie+". "+this.debugInfo());return Fe},$.prototype.insertBefore=function(ie,pe,Be){var Me,xe,ue,Pe,ot;if(ie?.type)return Pe=pe,(ue=ie).setParent(this),Pe?(xe=children.indexOf(Pe),ot=children.splice(xe),children.push(ue),Array.prototype.push.apply(children,ot)):children.push(ue),ue;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(ie));return xe=this.parent.children.indexOf(this),ot=this.parent.children.splice(xe),Me=this.parent.element(ie,pe,Be),Array.prototype.push.apply(this.parent.children,ot),Me},$.prototype.insertAfter=function(ie,pe,Be){var Me,xe,ue;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(ie));return xe=this.parent.children.indexOf(this),ue=this.parent.children.splice(xe+1),Me=this.parent.element(ie,pe,Be),Array.prototype.push.apply(this.parent.children,ue),Me},$.prototype.remove=function(){var ie;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return ie=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[ie,ie-ie+1].concat([])),this.parent},$.prototype.node=function(ie,pe,Be){var Me,xe;return null!=ie&&(ie=ae(ie)),pe||(pe={}),pe=ae(pe),te(pe)||(Be=(xe=[pe,Be])[0],pe=xe[1]),Me=new q(this,ie,pe),null!=Be&&Me.text(Be),this.children.push(Me),Me},$.prototype.text=function(ie){var pe;return te(ie)&&this.element(ie),pe=new W(this,ie),this.children.push(pe),this},$.prototype.cdata=function(ie){var pe;return pe=new V(this,ie),this.children.push(pe),this},$.prototype.comment=function(ie){var pe;return pe=new O(this,ie),this.children.push(pe),this},$.prototype.commentBefore=function(ie){var Be,Me;return Be=this.parent.children.indexOf(this),Me=this.parent.children.splice(Be),this.parent.comment(ie),Array.prototype.push.apply(this.parent.children,Me),this},$.prototype.commentAfter=function(ie){var Be,Me;return Be=this.parent.children.indexOf(this),Me=this.parent.children.splice(Be+1),this.parent.comment(ie),Array.prototype.push.apply(this.parent.children,Me),this},$.prototype.raw=function(ie){var pe;return pe=new J(this,ie),this.children.push(pe),this},$.prototype.dummy=function(){return new P(this)},$.prototype.instruction=function(ie,pe){var Be,xe,ue,Pe;if(null!=ie&&(ie=ae(ie)),null!=pe&&(pe=ae(pe)),Array.isArray(ie))for(ue=0,Pe=ie.length;ue<Pe;ue++)this.instruction(Be=ie[ue]);else if(te(ie))for(Be in ie)!B.call(ie,Be)||this.instruction(Be,ie[Be]);else Ee(pe)&&(pe=pe.apply()),xe=new se(this,ie,pe),this.children.push(xe);return this},$.prototype.instructionBefore=function(ie,pe){var Me,xe;return Me=this.parent.children.indexOf(this),xe=this.parent.children.splice(Me),this.parent.instruction(ie,pe),Array.prototype.push.apply(this.parent.children,xe),this},$.prototype.instructionAfter=function(ie,pe){var Me,xe;return Me=this.parent.children.indexOf(this),xe=this.parent.children.splice(Me+1),this.parent.instruction(ie,pe),Array.prototype.push.apply(this.parent.children,xe),this},$.prototype.declaration=function(ie,pe,Be){var Me,xe;return Me=this.document(),xe=new H(Me,ie,pe,Be),0===Me.children.length?Me.children.unshift(xe):Me.children[0].type===D.Declaration?Me.children[0]=xe:Me.children.unshift(xe),Me.root()||Me},$.prototype.dtd=function(ie,pe){var Me,xe,ue,Pe,ot,Fe,Ye,lt,vt;for(Me=this.document(),xe=new L(Me,ie,pe),ue=Pe=0,Fe=(lt=Me.children).length;Pe<Fe;ue=++Pe)if(lt[ue].type===D.DocType)return Me.children[ue]=xe,xe;for(ue=ot=0,Ye=(vt=Me.children).length;ot<Ye;ue=++ot)if(vt[ue].isRoot)return Me.children.splice(ue,0,xe),xe;return Me.children.push(xe),xe},$.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},$.prototype.root=function(){var ie;for(ie=this;ie;){if(ie.type===D.Document)return ie.rootObject;if(ie.isRoot)return ie;ie=ie.parent}},$.prototype.document=function(){var ie;for(ie=this;ie;){if(ie.type===D.Document)return ie;ie=ie.parent}},$.prototype.end=function(ie){return this.document().end(ie)},$.prototype.prev=function(){var ie;if((ie=this.parent.children.indexOf(this))<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[ie-1]},$.prototype.next=function(){var ie;if(-1===(ie=this.parent.children.indexOf(this))||ie===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[ie+1]},$.prototype.importDocument=function(ie){var pe;return(pe=ie.root().clone()).parent=this,pe.isRoot=!1,this.children.push(pe),this},$.prototype.debugInfo=function(ie){var pe,Be;return null!=(ie=ie||this.name)||null!=(pe=this.parent)&&pe.name?null==ie?"parent: <"+this.parent.name+">":null!=(Be=this.parent)&&Be.name?"node: <"+ie+">, parent: <"+this.parent.name+">":"node: <"+ie+">":""},$.prototype.ele=function(ie,pe,Be){return this.element(ie,pe,Be)},$.prototype.nod=function(ie,pe,Be){return this.node(ie,pe,Be)},$.prototype.txt=function(ie){return this.text(ie)},$.prototype.dat=function(ie){return this.cdata(ie)},$.prototype.com=function(ie){return this.comment(ie)},$.prototype.ins=function(ie,pe){return this.instruction(ie,pe)},$.prototype.doc=function(){return this.document()},$.prototype.dec=function(ie,pe,Be){return this.declaration(ie,pe,Be)},$.prototype.e=function(ie,pe,Be){return this.element(ie,pe,Be)},$.prototype.n=function(ie,pe,Be){return this.node(ie,pe,Be)},$.prototype.t=function(ie){return this.text(ie)},$.prototype.d=function(ie){return this.cdata(ie)},$.prototype.c=function(ie){return this.comment(ie)},$.prototype.r=function(ie){return this.raw(ie)},$.prototype.i=function(ie,pe){return this.instruction(ie,pe)},$.prototype.u=function(){return this.up()},$.prototype.importXMLBuilder=function(ie){return this.importDocument(ie)},$.prototype.replaceChild=function(ie,pe){throw new Error("This DOM method is not implemented."+this.debugInfo())},$.prototype.removeChild=function(ie){throw new Error("This DOM method is not implemented."+this.debugInfo())},$.prototype.appendChild=function(ie){throw new Error("This DOM method is not implemented."+this.debugInfo())},$.prototype.hasChildNodes=function(){return 0!==this.children.length},$.prototype.cloneNode=function(ie){throw new Error("This DOM method is not implemented."+this.debugInfo())},$.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},$.prototype.isSupported=function(ie,pe){return!0},$.prototype.hasAttributes=function(){return 0!==this.attribs.length},$.prototype.compareDocumentPosition=function(ie){var Be;return this===ie?0:this.document()!==ie.document()?(Be=X.Disconnected|X.ImplementationSpecific,Math.random()<.5?Be|=X.Preceding:Be|=X.Following,Be):this.isAncestor(ie)?X.Contains|X.Preceding:this.isDescendant(ie)?X.Contains|X.Following:this.isPreceding(ie)?X.Preceding:X.Following},$.prototype.isSameNode=function(ie){throw new Error("This DOM method is not implemented."+this.debugInfo())},$.prototype.lookupPrefix=function(ie){throw new Error("This DOM method is not implemented."+this.debugInfo())},$.prototype.isDefaultNamespace=function(ie){throw new Error("This DOM method is not implemented."+this.debugInfo())},$.prototype.lookupNamespaceURI=function(ie){throw new Error("This DOM method is not implemented."+this.debugInfo())},$.prototype.isEqualNode=function(ie){var pe,Be,Me;if(ie.nodeType!==this.nodeType||ie.children.length!==this.children.length)return!1;for(pe=Be=0,Me=this.children.length-1;0<=Me?Be<=Me:Be>=Me;pe=0<=Me?++Be:--Be)if(!this.children[pe].isEqualNode(ie.children[pe]))return!1;return!0},$.prototype.getFeature=function(ie,pe){throw new Error("This DOM method is not implemented."+this.debugInfo())},$.prototype.setUserData=function(ie,pe,Be){throw new Error("This DOM method is not implemented."+this.debugInfo())},$.prototype.getUserData=function(ie){throw new Error("This DOM method is not implemented."+this.debugInfo())},$.prototype.contains=function(ie){return!!ie&&(ie===this||this.isDescendant(ie))},$.prototype.isDescendant=function(ie){var pe,Me,xe,ue;for(Me=0,xe=(ue=this.children).length;Me<xe;Me++)if(ie===(pe=ue[Me])||pe.isDescendant(ie))return!0;return!1},$.prototype.isAncestor=function(ie){return ie.isDescendant(this)},$.prototype.isPreceding=function(ie){var pe,Be;return pe=this.treePosition(ie),Be=this.treePosition(this),-1!==pe&&-1!==Be&&pe<Be},$.prototype.isFollowing=function(ie){var pe,Be;return pe=this.treePosition(ie),Be=this.treePosition(this),-1!==pe&&-1!==Be&&pe>Be},$.prototype.treePosition=function(ie){var pe,Be;return Be=0,pe=!1,this.foreachTreeNode(this.document(),function(Me){if(Be++,!pe&&Me===ie)return pe=!0}),pe?Be:-1},$.prototype.foreachTreeNode=function(ie,pe){var Be,Me,xe,ue,Pe;for(ie||(ie=this.document()),Me=0,xe=(ue=ie.children).length;Me<xe;Me++){if(Pe=pe(Be=ue[Me]))return Pe;if(Pe=this.foreachTreeNode(Be,pe))return Pe}},$}()}).call(this)},5112:function(He){(function(){He.exports=function(){function U(X){this.nodes=X}return Object.defineProperty(U.prototype,"length",{get:function(){return this.nodes.length||0}}),U.prototype.clone=function(){return this.nodes=null},U.prototype.item=function(X){return this.nodes[X]||null},U}()}).call(this)},4666:function(He,we,U){(function(){var X,D,H={}.hasOwnProperty;X=U(2269),D=U(2182),He.exports=function(L){function P(q,ee,K){if(P.__super__.constructor.call(this,q),null==ee)throw new Error("Missing instruction target. "+this.debugInfo());this.type=X.ProcessingInstruction,this.target=this.stringify.insTarget(ee),this.name=this.target,K&&(this.value=this.stringify.insValue(K))}return function(L,P){for(var q in P)H.call(P,q)&&(L[q]=P[q]);function ee(){this.constructor=L}ee.prototype=P.prototype,L.prototype=new ee,L.__super__=P.prototype}(P,L),P.prototype.clone=function(){return Object.create(this)},P.prototype.toString=function(q){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(q))},P.prototype.isEqualNode=function(q){return!(!P.__super__.isEqualNode.apply(this,arguments).isEqualNode(q)||q.target!==this.target)},P}(D)}).call(this)},9942:function(He,we,U){(function(){var X,D,H={}.hasOwnProperty;X=U(2269),D=U(8563),He.exports=function(L){function P(q,ee){if(P.__super__.constructor.call(this,q),null==ee)throw new Error("Missing raw text. "+this.debugInfo());this.type=X.Raw,this.value=this.stringify.raw(ee)}return function(L,P){for(var q in P)H.call(P,q)&&(L[q]=P[q]);function ee(){this.constructor=L}ee.prototype=P.prototype,L.prototype=new ee,L.__super__=P.prototype}(P,L),P.prototype.clone=function(){return Object.create(this)},P.prototype.toString=function(q){return this.options.writer.raw(this,this.options.writer.filterOptions(q))},P}(D)}).call(this)},7647:function(He,we,U){(function(){var X,D,O,L={}.hasOwnProperty;X=U(2269),O=U(3576),D=U(6316),He.exports=function(P){function q(ee,K){this.stream=ee,q.__super__.constructor.call(this,K)}return function(P,q){for(var ee in q)L.call(q,ee)&&(P[ee]=q[ee]);function K(){this.constructor=P}K.prototype=q.prototype,P.prototype=new K,P.__super__=q.prototype}(q,P),q.prototype.endline=function(ee,K,ne){return ee.isLastRootNode&&K.state===D.CloseTag?"":q.__super__.endline.call(this,ee,K,ne)},q.prototype.document=function(ee,K){var se,J,W,ae,_e,Ee,te,oe;for(se=J=0,ae=(Ee=ee.children).length;J<ae;se=++J)Ee[se].isLastRootNode=se===ee.children.length-1;for(K=this.filterOptions(K),oe=[],W=0,_e=(te=ee.children).length;W<_e;W++)oe.push(this.writeChildNode(te[W],K,0));return oe},q.prototype.attribute=function(ee,K,ne){return this.stream.write(q.__super__.attribute.call(this,ee,K,ne))},q.prototype.cdata=function(ee,K,ne){return this.stream.write(q.__super__.cdata.call(this,ee,K,ne))},q.prototype.comment=function(ee,K,ne){return this.stream.write(q.__super__.comment.call(this,ee,K,ne))},q.prototype.declaration=function(ee,K,ne){return this.stream.write(q.__super__.declaration.call(this,ee,K,ne))},q.prototype.docType=function(ee,K,ne){var J,W,ae;if(ne||(ne=0),this.openNode(ee,K,ne),K.state=D.OpenTag,this.stream.write(this.indent(ee,K,ne)),this.stream.write("<!DOCTYPE "+ee.root().name),ee.pubID&&ee.sysID?this.stream.write(' PUBLIC "'+ee.pubID+'" "'+ee.sysID+'"'):ee.sysID&&this.stream.write(' SYSTEM "'+ee.sysID+'"'),ee.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(ee,K,ne)),K.state=D.InsideTag,J=0,W=(ae=ee.children).length;J<W;J++)this.writeChildNode(ae[J],K,ne+1);K.state=D.CloseTag,this.stream.write("]")}return K.state=D.CloseTag,this.stream.write(K.spaceBeforeSlash+">"),this.stream.write(this.endline(ee,K,ne)),K.state=D.None,this.closeNode(ee,K,ne)},q.prototype.element=function(ee,K,ne){var W,ae,_e,Ee,te,B,$;for(te in ne||(ne=0),this.openNode(ee,K,ne),K.state=D.OpenTag,this.stream.write(this.indent(ee,K,ne)+"<"+ee.name),B=ee.attribs)!L.call(B,te)||this.attribute(B[te],K,ne);if(ae=0===(W=ee.children.length)?null:ee.children[0],0===W||ee.children.every(function(ie){return(ie.type===X.Text||ie.type===X.Raw)&&""===ie.value}))K.allowEmpty?(this.stream.write(">"),K.state=D.CloseTag,this.stream.write("</"+ee.name+">")):(K.state=D.CloseTag,this.stream.write(K.spaceBeforeSlash+"/>"));else if(!K.pretty||1!==W||ae.type!==X.Text&&ae.type!==X.Raw||null==ae.value){for(this.stream.write(">"+this.endline(ee,K,ne)),K.state=D.InsideTag,_e=0,Ee=($=ee.children).length;_e<Ee;_e++)this.writeChildNode($[_e],K,ne+1);K.state=D.CloseTag,this.stream.write(this.indent(ee,K,ne)+"</"+ee.name+">")}else this.stream.write(">"),K.state=D.InsideTag,K.suppressPrettyCount++,this.writeChildNode(ae,K,ne+1),K.suppressPrettyCount--,K.state=D.CloseTag,this.stream.write("</"+ee.name+">");return this.stream.write(this.endline(ee,K,ne)),K.state=D.None,this.closeNode(ee,K,ne)},q.prototype.processingInstruction=function(ee,K,ne){return this.stream.write(q.__super__.processingInstruction.call(this,ee,K,ne))},q.prototype.raw=function(ee,K,ne){return this.stream.write(q.__super__.raw.call(this,ee,K,ne))},q.prototype.text=function(ee,K,ne){return this.stream.write(q.__super__.text.call(this,ee,K,ne))},q.prototype.dtdAttList=function(ee,K,ne){return this.stream.write(q.__super__.dtdAttList.call(this,ee,K,ne))},q.prototype.dtdElement=function(ee,K,ne){return this.stream.write(q.__super__.dtdElement.call(this,ee,K,ne))},q.prototype.dtdEntity=function(ee,K,ne){return this.stream.write(q.__super__.dtdEntity.call(this,ee,K,ne))},q.prototype.dtdNotation=function(ee,K,ne){return this.stream.write(q.__super__.dtdNotation.call(this,ee,K,ne))},q}(O)}).call(this)},4354:function(He,we,U){(function(){var D,O={}.hasOwnProperty;D=U(3576),He.exports=function(H){function L(P){L.__super__.constructor.call(this,P)}return function(H,L){for(var P in L)O.call(L,P)&&(H[P]=L[P]);function q(){this.constructor=H}q.prototype=L.prototype,H.prototype=new q,H.__super__=L.prototype}(L,H),L.prototype.document=function(P,q){var K,ne,se,J;for(q=this.filterOptions(q),se="",K=0,ne=(J=P.children).length;K<ne;K++)se+=this.writeChildNode(J[K],q,0);return q.pretty&&se.slice(-q.newline.length)===q.newline&&(se=se.slice(0,-q.newline.length)),se},L}(D)}).call(this)},5041:function(He){(function(){var U=function(D,V){return function(){return D.apply(V,arguments)}},X={}.hasOwnProperty;He.exports=function(){function D(V){var O,H;for(O in this.assertLegalName=U(this.assertLegalName,this),this.assertLegalChar=U(this.assertLegalChar,this),V||(V={}),this.options=V,this.options.version||(this.options.version="1.0"),H=V.stringify||{})!X.call(H,O)||(this[O]=H[O])}return D.prototype.name=function(V){return this.options.noValidation?V:this.assertLegalName(""+V||"")},D.prototype.text=function(V){return this.options.noValidation?V:this.assertLegalChar(this.textEscape(""+V||""))},D.prototype.cdata=function(V){return this.options.noValidation?V:(V=(V=""+V||"").replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(V))},D.prototype.comment=function(V){if(this.options.noValidation)return V;if((V=""+V||"").match(/--/))throw new Error("Comment text cannot contain double-hypen: "+V);return this.assertLegalChar(V)},D.prototype.raw=function(V){return this.options.noValidation?V:""+V||""},D.prototype.attValue=function(V){return this.options.noValidation?V:this.assertLegalChar(this.attEscape(V=""+V||""))},D.prototype.insTarget=function(V){return this.options.noValidation?V:this.assertLegalChar(""+V||"")},D.prototype.insValue=function(V){if(this.options.noValidation)return V;if((V=""+V||"").match(/\?>/))throw new Error("Invalid processing instruction value: "+V);return this.assertLegalChar(V)},D.prototype.xmlVersion=function(V){if(this.options.noValidation)return V;if(!(V=""+V||"").match(/1\.[0-9]+/))throw new Error("Invalid version number: "+V);return V},D.prototype.xmlEncoding=function(V){if(this.options.noValidation)return V;if(!(V=""+V||"").match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+V);return this.assertLegalChar(V)},D.prototype.xmlStandalone=function(V){return this.options.noValidation?V:V?"yes":"no"},D.prototype.dtdPubID=function(V){return this.options.noValidation?V:this.assertLegalChar(""+V||"")},D.prototype.dtdSysID=function(V){return this.options.noValidation?V:this.assertLegalChar(""+V||"")},D.prototype.dtdElementValue=function(V){return this.options.noValidation?V:this.assertLegalChar(""+V||"")},D.prototype.dtdAttType=function(V){return this.options.noValidation?V:this.assertLegalChar(""+V||"")},D.prototype.dtdAttDefault=function(V){return this.options.noValidation?V:this.assertLegalChar(""+V||"")},D.prototype.dtdEntityValue=function(V){return this.options.noValidation?V:this.assertLegalChar(""+V||"")},D.prototype.dtdNData=function(V){return this.options.noValidation?V:this.assertLegalChar(""+V||"")},D.prototype.convertAttKey="@",D.prototype.convertPIKey="?",D.prototype.convertTextKey="#text",D.prototype.convertCDataKey="#cdata",D.prototype.convertCommentKey="#comment",D.prototype.convertRawKey="#raw",D.prototype.assertLegalChar=function(V){var H;if(this.options.noValidation)return V;if("1.0"===this.options.version){if(H=V.match(/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/))throw new Error("Invalid character in string: "+V+" at index "+H.index)}else if("1.1"===this.options.version&&(H=V.match(/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/)))throw new Error("Invalid character in string: "+V+" at index "+H.index);return V},D.prototype.assertLegalName=function(V){if(this.options.noValidation)return V;if(this.assertLegalChar(V),!V.match(/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/))throw new Error("Invalid character in name");return V},D.prototype.textEscape=function(V){return this.options.noValidation?V:V.replace(this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;")},D.prototype.attEscape=function(V){return this.options.noValidation?V:V.replace(this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;")},D}()}).call(this)},474:function(He,we,U){(function(){var X,D,H={}.hasOwnProperty;X=U(2269),D=U(2182),He.exports=function(L){function P(q,ee){if(P.__super__.constructor.call(this,q),null==ee)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=X.Text,this.value=this.stringify.text(ee)}return function(L,P){for(var q in P)H.call(P,q)&&(L[q]=P[q]);function ee(){this.constructor=L}ee.prototype=P.prototype,L.prototype=new ee,L.__super__=P.prototype}(P,L),Object.defineProperty(P.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(P.prototype,"wholeText",{get:function(){var q,ee,K;for(K="",ee=this.previousSibling;ee;)K=ee.data+K,ee=ee.previousSibling;for(K+=this.data,q=this.nextSibling;q;)K+=q.data,q=q.nextSibling;return K}}),P.prototype.clone=function(){return Object.create(this)},P.prototype.toString=function(q){return this.options.writer.text(this,this.options.writer.filterOptions(q))},P.prototype.splitText=function(q){throw new Error("This DOM method is not implemented."+this.debugInfo())},P.prototype.replaceWholeText=function(q){throw new Error("This DOM method is not implemented."+this.debugInfo())},P}(D)}).call(this)},3576:function(He,we,U){(function(){var X,D,Ee,te={}.hasOwnProperty;Ee=U(3452).assign,X=U(2269),U(4789),U(9195),U(1361),U(2516),U(3352),U(9942),U(474),U(4666),U(4173),U(7274),U(2068),U(8349),U(3087),D=U(6316),He.exports=function(){function oe(B){var $,ie,pe;for($ in B||(B={}),this.options=B,ie=B.writer||{})!te.call(ie,$)||(pe=ie[$],this["_"+$]=this[$],this[$]=pe)}return oe.prototype.filterOptions=function(B){var $,ie,pe,Be,Me,xe,ue,Pe;return B||(B={}),B=Ee({},this.options,B),($={writer:this}).pretty=B.pretty||!1,$.allowEmpty=B.allowEmpty||!1,$.indent=null!=(ie=B.indent)?ie:"  ",$.newline=null!=(pe=B.newline)?pe:"\n",$.offset=null!=(Be=B.offset)?Be:0,$.dontPrettyTextNodes=null!=(Me=null!=(xe=B.dontPrettyTextNodes)?xe:B.dontprettytextnodes)?Me:0,$.spaceBeforeSlash=null!=(ue=null!=(Pe=B.spaceBeforeSlash)?Pe:B.spacebeforeslash)?ue:"",!0===$.spaceBeforeSlash&&($.spaceBeforeSlash=" "),$.suppressPrettyCount=0,$.user={},$.state=D.None,$},oe.prototype.indent=function(B,$,ie){var pe;return!$.pretty||$.suppressPrettyCount?"":$.pretty&&(pe=(ie||0)+$.offset+1)>0?new Array(pe).join($.indent):""},oe.prototype.endline=function(B,$,ie){return!$.pretty||$.suppressPrettyCount?"":$.newline},oe.prototype.attribute=function(B,$,ie){var pe;return this.openAttribute(B,$,ie),pe=" "+B.name+'="'+B.value+'"',this.closeAttribute(B,$,ie),pe},oe.prototype.cdata=function(B,$,ie){var pe;return this.openNode(B,$,ie),$.state=D.OpenTag,pe=this.indent(B,$,ie)+"<![CDATA[",$.state=D.InsideTag,pe+=B.value,$.state=D.CloseTag,pe+="]]>"+this.endline(B,$,ie),$.state=D.None,this.closeNode(B,$,ie),pe},oe.prototype.comment=function(B,$,ie){var pe;return this.openNode(B,$,ie),$.state=D.OpenTag,pe=this.indent(B,$,ie)+"\x3c!-- ",$.state=D.InsideTag,pe+=B.value,$.state=D.CloseTag,pe+=" --\x3e"+this.endline(B,$,ie),$.state=D.None,this.closeNode(B,$,ie),pe},oe.prototype.declaration=function(B,$,ie){var pe;return this.openNode(B,$,ie),$.state=D.OpenTag,pe=this.indent(B,$,ie)+"<?xml",$.state=D.InsideTag,pe+=' version="'+B.version+'"',null!=B.encoding&&(pe+=' encoding="'+B.encoding+'"'),null!=B.standalone&&(pe+=' standalone="'+B.standalone+'"'),$.state=D.CloseTag,pe+=$.spaceBeforeSlash+"?>",pe+=this.endline(B,$,ie),$.state=D.None,this.closeNode(B,$,ie),pe},oe.prototype.docType=function(B,$,ie){var Be,Me,xe,ue;if(ie||(ie=0),this.openNode(B,$,ie),$.state=D.OpenTag,xe=this.indent(B,$,ie),xe+="<!DOCTYPE "+B.root().name,B.pubID&&B.sysID?xe+=' PUBLIC "'+B.pubID+'" "'+B.sysID+'"':B.sysID&&(xe+=' SYSTEM "'+B.sysID+'"'),B.children.length>0){for(xe+=" [",xe+=this.endline(B,$,ie),$.state=D.InsideTag,Be=0,Me=(ue=B.children).length;Be<Me;Be++)xe+=this.writeChildNode(ue[Be],$,ie+1);$.state=D.CloseTag,xe+="]"}return $.state=D.CloseTag,xe+=$.spaceBeforeSlash+">",xe+=this.endline(B,$,ie),$.state=D.None,this.closeNode(B,$,ie),xe},oe.prototype.element=function(B,$,ie){var Be,Me,xe,ue,Pe,ot,Fe,Ye,lt,vt,vn,Ne,ht;for(Ye in ie||(ie=0),lt=!1,vt="",this.openNode(B,$,ie),$.state=D.OpenTag,vt+=this.indent(B,$,ie)+"<"+B.name,vn=B.attribs)!te.call(vn,Ye)||(vt+=this.attribute(vn[Ye],$,ie));if(xe=0===(Me=B.children.length)?null:B.children[0],0===Me||B.children.every(function(rt){return(rt.type===X.Text||rt.type===X.Raw)&&""===rt.value}))$.allowEmpty?(vt+=">",$.state=D.CloseTag,vt+="</"+B.name+">"+this.endline(B,$,ie)):($.state=D.CloseTag,vt+=$.spaceBeforeSlash+"/>"+this.endline(B,$,ie));else if(!$.pretty||1!==Me||xe.type!==X.Text&&xe.type!==X.Raw||null==xe.value){if($.dontPrettyTextNodes)for(ue=0,ot=(Ne=B.children).length;ue<ot;ue++)if(((Be=Ne[ue]).type===X.Text||Be.type===X.Raw)&&null!=Be.value){$.suppressPrettyCount++,lt=!0;break}for(vt+=">"+this.endline(B,$,ie),$.state=D.InsideTag,Pe=0,Fe=(ht=B.children).length;Pe<Fe;Pe++)vt+=this.writeChildNode(Be=ht[Pe],$,ie+1);$.state=D.CloseTag,vt+=this.indent(B,$,ie)+"</"+B.name+">",lt&&$.suppressPrettyCount--,vt+=this.endline(B,$,ie),$.state=D.None}else vt+=">",$.state=D.InsideTag,$.suppressPrettyCount++,lt=!0,vt+=this.writeChildNode(xe,$,ie+1),$.suppressPrettyCount--,lt=!1,$.state=D.CloseTag,vt+="</"+B.name+">"+this.endline(B,$,ie);return this.closeNode(B,$,ie),vt},oe.prototype.writeChildNode=function(B,$,ie){switch(B.type){case X.CData:return this.cdata(B,$,ie);case X.Comment:return this.comment(B,$,ie);case X.Element:return this.element(B,$,ie);case X.Raw:return this.raw(B,$,ie);case X.Text:return this.text(B,$,ie);case X.ProcessingInstruction:return this.processingInstruction(B,$,ie);case X.Dummy:return"";case X.Declaration:return this.declaration(B,$,ie);case X.DocType:return this.docType(B,$,ie);case X.AttributeDeclaration:return this.dtdAttList(B,$,ie);case X.ElementDeclaration:return this.dtdElement(B,$,ie);case X.EntityDeclaration:return this.dtdEntity(B,$,ie);case X.NotationDeclaration:return this.dtdNotation(B,$,ie);default:throw new Error("Unknown XML node type: "+B.constructor.name)}},oe.prototype.processingInstruction=function(B,$,ie){var pe;return this.openNode(B,$,ie),$.state=D.OpenTag,pe=this.indent(B,$,ie)+"<?",$.state=D.InsideTag,pe+=B.target,B.value&&(pe+=" "+B.value),$.state=D.CloseTag,pe+=$.spaceBeforeSlash+"?>",pe+=this.endline(B,$,ie),$.state=D.None,this.closeNode(B,$,ie),pe},oe.prototype.raw=function(B,$,ie){var pe;return this.openNode(B,$,ie),$.state=D.OpenTag,pe=this.indent(B,$,ie),$.state=D.InsideTag,pe+=B.value,$.state=D.CloseTag,pe+=this.endline(B,$,ie),$.state=D.None,this.closeNode(B,$,ie),pe},oe.prototype.text=function(B,$,ie){var pe;return this.openNode(B,$,ie),$.state=D.OpenTag,pe=this.indent(B,$,ie),$.state=D.InsideTag,pe+=B.value,$.state=D.CloseTag,pe+=this.endline(B,$,ie),$.state=D.None,this.closeNode(B,$,ie),pe},oe.prototype.dtdAttList=function(B,$,ie){var pe;return this.openNode(B,$,ie),$.state=D.OpenTag,pe=this.indent(B,$,ie)+"<!ATTLIST",$.state=D.InsideTag,pe+=" "+B.elementName+" "+B.attributeName+" "+B.attributeType,"#DEFAULT"!==B.defaultValueType&&(pe+=" "+B.defaultValueType),B.defaultValue&&(pe+=' "'+B.defaultValue+'"'),$.state=D.CloseTag,pe+=$.spaceBeforeSlash+">"+this.endline(B,$,ie),$.state=D.None,this.closeNode(B,$,ie),pe},oe.prototype.dtdElement=function(B,$,ie){var pe;return this.openNode(B,$,ie),$.state=D.OpenTag,pe=this.indent(B,$,ie)+"<!ELEMENT",$.state=D.InsideTag,pe+=" "+B.name+" "+B.value,$.state=D.CloseTag,pe+=$.spaceBeforeSlash+">"+this.endline(B,$,ie),$.state=D.None,this.closeNode(B,$,ie),pe},oe.prototype.dtdEntity=function(B,$,ie){var pe;return this.openNode(B,$,ie),$.state=D.OpenTag,pe=this.indent(B,$,ie)+"<!ENTITY",$.state=D.InsideTag,B.pe&&(pe+=" %"),pe+=" "+B.name,B.value?pe+=' "'+B.value+'"':(B.pubID&&B.sysID?pe+=' PUBLIC "'+B.pubID+'" "'+B.sysID+'"':B.sysID&&(pe+=' SYSTEM "'+B.sysID+'"'),B.nData&&(pe+=" NDATA "+B.nData)),$.state=D.CloseTag,pe+=$.spaceBeforeSlash+">"+this.endline(B,$,ie),$.state=D.None,this.closeNode(B,$,ie),pe},oe.prototype.dtdNotation=function(B,$,ie){var pe;return this.openNode(B,$,ie),$.state=D.OpenTag,pe=this.indent(B,$,ie)+"<!NOTATION",$.state=D.InsideTag,pe+=" "+B.name,B.pubID&&B.sysID?pe+=' PUBLIC "'+B.pubID+'" "'+B.sysID+'"':B.pubID?pe+=' PUBLIC "'+B.pubID+'"':B.sysID&&(pe+=' SYSTEM "'+B.sysID+'"'),$.state=D.CloseTag,pe+=$.spaceBeforeSlash+">"+this.endline(B,$,ie),$.state=D.None,this.closeNode(B,$,ie),pe},oe.prototype.openNode=function(B,$,ie){},oe.prototype.closeNode=function(B,$,ie){},oe.prototype.openAttribute=function(B,$,ie){},oe.prototype.closeAttribute=function(B,$,ie){},oe}()}).call(this)},7904:function(He,we,U){(function(){var X,D,V,O,H,L,P,q,ee,K;K=U(3452),q=K.assign,ee=K.isFunction,V=U(9906),O=U(519),H=U(1105),P=U(4354),L=U(7647),X=U(2269),D=U(6316),He.exports.create=function(ne,se,J,W){var ae,_e;if(null==ne)throw new Error("Root element needs a name.");return W=q({},se,J,W),_e=(ae=new O(W)).element(ne),W.headless||(ae.declaration(W),(null!=W.pubID||null!=W.sysID)&&ae.dtd(W)),_e},He.exports.begin=function(ne,se,J){var W;return ee(ne)&&(se=(W=[ne,se])[0],J=W[1],ne={}),se?new H(ne,se,J):new O(ne)},He.exports.stringWriter=function(ne){return new P(ne)},He.exports.streamWriter=function(ne,se){return new L(ne,se)},He.exports.implementation=new V,He.exports.nodeType=X,He.exports.writerState=D}).call(this)},2361:()=>{},4616:()=>{},5485:He=>{"use strict";He.exports=JSON.parse('{"Aacute":"\xc1","aacute":"\xe1","Abreve":"\u0102","abreve":"\u0103","ac":"\u223e","acd":"\u223f","acE":"\u223e\u0333","Acirc":"\xc2","acirc":"\xe2","acute":"\xb4","Acy":"\u0410","acy":"\u0430","AElig":"\xc6","aelig":"\xe6","af":"\u2061","Afr":"\u{1d504}","afr":"\u{1d51e}","Agrave":"\xc0","agrave":"\xe0","alefsym":"\u2135","aleph":"\u2135","Alpha":"\u0391","alpha":"\u03b1","Amacr":"\u0100","amacr":"\u0101","amalg":"\u2a3f","amp":"&","AMP":"&","andand":"\u2a55","And":"\u2a53","and":"\u2227","andd":"\u2a5c","andslope":"\u2a58","andv":"\u2a5a","ang":"\u2220","ange":"\u29a4","angle":"\u2220","angmsdaa":"\u29a8","angmsdab":"\u29a9","angmsdac":"\u29aa","angmsdad":"\u29ab","angmsdae":"\u29ac","angmsdaf":"\u29ad","angmsdag":"\u29ae","angmsdah":"\u29af","angmsd":"\u2221","angrt":"\u221f","angrtvb":"\u22be","angrtvbd":"\u299d","angsph":"\u2222","angst":"\xc5","angzarr":"\u237c","Aogon":"\u0104","aogon":"\u0105","Aopf":"\u{1d538}","aopf":"\u{1d552}","apacir":"\u2a6f","ap":"\u2248","apE":"\u2a70","ape":"\u224a","apid":"\u224b","apos":"\'","ApplyFunction":"\u2061","approx":"\u2248","approxeq":"\u224a","Aring":"\xc5","aring":"\xe5","Ascr":"\u{1d49c}","ascr":"\u{1d4b6}","Assign":"\u2254","ast":"*","asymp":"\u2248","asympeq":"\u224d","Atilde":"\xc3","atilde":"\xe3","Auml":"\xc4","auml":"\xe4","awconint":"\u2233","awint":"\u2a11","backcong":"\u224c","backepsilon":"\u03f6","backprime":"\u2035","backsim":"\u223d","backsimeq":"\u22cd","Backslash":"\u2216","Barv":"\u2ae7","barvee":"\u22bd","barwed":"\u2305","Barwed":"\u2306","barwedge":"\u2305","bbrk":"\u23b5","bbrktbrk":"\u23b6","bcong":"\u224c","Bcy":"\u0411","bcy":"\u0431","bdquo":"\u201e","becaus":"\u2235","because":"\u2235","Because":"\u2235","bemptyv":"\u29b0","bepsi":"\u03f6","bernou":"\u212c","Bernoullis":"\u212c","Beta":"\u0392","beta":"\u03b2","beth":"\u2136","between":"\u226c","Bfr":"\u{1d505}","bfr":"\u{1d51f}","bigcap":"\u22c2","bigcirc":"\u25ef","bigcup":"\u22c3","bigodot":"\u2a00","bigoplus":"\u2a01","bigotimes":"\u2a02","bigsqcup":"\u2a06","bigstar":"\u2605","bigtriangledown":"\u25bd","bigtriangleup":"\u25b3","biguplus":"\u2a04","bigvee":"\u22c1","bigwedge":"\u22c0","bkarow":"\u290d","blacklozenge":"\u29eb","blacksquare":"\u25aa","blacktriangle":"\u25b4","blacktriangledown":"\u25be","blacktriangleleft":"\u25c2","blacktriangleright":"\u25b8","blank":"\u2423","blk12":"\u2592","blk14":"\u2591","blk34":"\u2593","block":"\u2588","bne":"=\u20e5","bnequiv":"\u2261\u20e5","bNot":"\u2aed","bnot":"\u2310","Bopf":"\u{1d539}","bopf":"\u{1d553}","bot":"\u22a5","bottom":"\u22a5","bowtie":"\u22c8","boxbox":"\u29c9","boxdl":"\u2510","boxdL":"\u2555","boxDl":"\u2556","boxDL":"\u2557","boxdr":"\u250c","boxdR":"\u2552","boxDr":"\u2553","boxDR":"\u2554","boxh":"\u2500","boxH":"\u2550","boxhd":"\u252c","boxHd":"\u2564","boxhD":"\u2565","boxHD":"\u2566","boxhu":"\u2534","boxHu":"\u2567","boxhU":"\u2568","boxHU":"\u2569","boxminus":"\u229f","boxplus":"\u229e","boxtimes":"\u22a0","boxul":"\u2518","boxuL":"\u255b","boxUl":"\u255c","boxUL":"\u255d","boxur":"\u2514","boxuR":"\u2558","boxUr":"\u2559","boxUR":"\u255a","boxv":"\u2502","boxV":"\u2551","boxvh":"\u253c","boxvH":"\u256a","boxVh":"\u256b","boxVH":"\u256c","boxvl":"\u2524","boxvL":"\u2561","boxVl":"\u2562","boxVL":"\u2563","boxvr":"\u251c","boxvR":"\u255e","boxVr":"\u255f","boxVR":"\u2560","bprime":"\u2035","breve":"\u02d8","Breve":"\u02d8","brvbar":"\xa6","bscr":"\u{1d4b7}","Bscr":"\u212c","bsemi":"\u204f","bsim":"\u223d","bsime":"\u22cd","bsolb":"\u29c5","bsol":"\\\\","bsolhsub":"\u27c8","bull":"\u2022","bullet":"\u2022","bump":"\u224e","bumpE":"\u2aae","bumpe":"\u224f","Bumpeq":"\u224e","bumpeq":"\u224f","Cacute":"\u0106","cacute":"\u0107","capand":"\u2a44","capbrcup":"\u2a49","capcap":"\u2a4b","cap":"\u2229","Cap":"\u22d2","capcup":"\u2a47","capdot":"\u2a40","CapitalDifferentialD":"\u2145","caps":"\u2229\ufe00","caret":"\u2041","caron":"\u02c7","Cayleys":"\u212d","ccaps":"\u2a4d","Ccaron":"\u010c","ccaron":"\u010d","Ccedil":"\xc7","ccedil":"\xe7","Ccirc":"\u0108","ccirc":"\u0109","Cconint":"\u2230","ccups":"\u2a4c","ccupssm":"\u2a50","Cdot":"\u010a","cdot":"\u010b","cedil":"\xb8","Cedilla":"\xb8","cemptyv":"\u29b2","cent":"\xa2","centerdot":"\xb7","CenterDot":"\xb7","cfr":"\u{1d520}","Cfr":"\u212d","CHcy":"\u0427","chcy":"\u0447","check":"\u2713","checkmark":"\u2713","Chi":"\u03a7","chi":"\u03c7","circ":"\u02c6","circeq":"\u2257","circlearrowleft":"\u21ba","circlearrowright":"\u21bb","circledast":"\u229b","circledcirc":"\u229a","circleddash":"\u229d","CircleDot":"\u2299","circledR":"\xae","circledS":"\u24c8","CircleMinus":"\u2296","CirclePlus":"\u2295","CircleTimes":"\u2297","cir":"\u25cb","cirE":"\u29c3","cire":"\u2257","cirfnint":"\u2a10","cirmid":"\u2aef","cirscir":"\u29c2","ClockwiseContourIntegral":"\u2232","CloseCurlyDoubleQuote":"\u201d","CloseCurlyQuote":"\u2019","clubs":"\u2663","clubsuit":"\u2663","colon":":","Colon":"\u2237","Colone":"\u2a74","colone":"\u2254","coloneq":"\u2254","comma":",","commat":"@","comp":"\u2201","compfn":"\u2218","complement":"\u2201","complexes":"\u2102","cong":"\u2245","congdot":"\u2a6d","Congruent":"\u2261","conint":"\u222e","Conint":"\u222f","ContourIntegral":"\u222e","copf":"\u{1d554}","Copf":"\u2102","coprod":"\u2210","Coproduct":"\u2210","copy":"\xa9","COPY":"\xa9","copysr":"\u2117","CounterClockwiseContourIntegral":"\u2233","crarr":"\u21b5","cross":"\u2717","Cross":"\u2a2f","Cscr":"\u{1d49e}","cscr":"\u{1d4b8}","csub":"\u2acf","csube":"\u2ad1","csup":"\u2ad0","csupe":"\u2ad2","ctdot":"\u22ef","cudarrl":"\u2938","cudarrr":"\u2935","cuepr":"\u22de","cuesc":"\u22df","cularr":"\u21b6","cularrp":"\u293d","cupbrcap":"\u2a48","cupcap":"\u2a46","CupCap":"\u224d","cup":"\u222a","Cup":"\u22d3","cupcup":"\u2a4a","cupdot":"\u228d","cupor":"\u2a45","cups":"\u222a\ufe00","curarr":"\u21b7","curarrm":"\u293c","curlyeqprec":"\u22de","curlyeqsucc":"\u22df","curlyvee":"\u22ce","curlywedge":"\u22cf","curren":"\xa4","curvearrowleft":"\u21b6","curvearrowright":"\u21b7","cuvee":"\u22ce","cuwed":"\u22cf","cwconint":"\u2232","cwint":"\u2231","cylcty":"\u232d","dagger":"\u2020","Dagger":"\u2021","daleth":"\u2138","darr":"\u2193","Darr":"\u21a1","dArr":"\u21d3","dash":"\u2010","Dashv":"\u2ae4","dashv":"\u22a3","dbkarow":"\u290f","dblac":"\u02dd","Dcaron":"\u010e","dcaron":"\u010f","Dcy":"\u0414","dcy":"\u0434","ddagger":"\u2021","ddarr":"\u21ca","DD":"\u2145","dd":"\u2146","DDotrahd":"\u2911","ddotseq":"\u2a77","deg":"\xb0","Del":"\u2207","Delta":"\u0394","delta":"\u03b4","demptyv":"\u29b1","dfisht":"\u297f","Dfr":"\u{1d507}","dfr":"\u{1d521}","dHar":"\u2965","dharl":"\u21c3","dharr":"\u21c2","DiacriticalAcute":"\xb4","DiacriticalDot":"\u02d9","DiacriticalDoubleAcute":"\u02dd","DiacriticalGrave":"`","DiacriticalTilde":"\u02dc","diam":"\u22c4","diamond":"\u22c4","Diamond":"\u22c4","diamondsuit":"\u2666","diams":"\u2666","die":"\xa8","DifferentialD":"\u2146","digamma":"\u03dd","disin":"\u22f2","div":"\xf7","divide":"\xf7","divideontimes":"\u22c7","divonx":"\u22c7","DJcy":"\u0402","djcy":"\u0452","dlcorn":"\u231e","dlcrop":"\u230d","dollar":"$","Dopf":"\u{1d53b}","dopf":"\u{1d555}","Dot":"\xa8","dot":"\u02d9","DotDot":"\u20dc","doteq":"\u2250","doteqdot":"\u2251","DotEqual":"\u2250","dotminus":"\u2238","dotplus":"\u2214","dotsquare":"\u22a1","doublebarwedge":"\u2306","DoubleContourIntegral":"\u222f","DoubleDot":"\xa8","DoubleDownArrow":"\u21d3","DoubleLeftArrow":"\u21d0","DoubleLeftRightArrow":"\u21d4","DoubleLeftTee":"\u2ae4","DoubleLongLeftArrow":"\u27f8","DoubleLongLeftRightArrow":"\u27fa","DoubleLongRightArrow":"\u27f9","DoubleRightArrow":"\u21d2","DoubleRightTee":"\u22a8","DoubleUpArrow":"\u21d1","DoubleUpDownArrow":"\u21d5","DoubleVerticalBar":"\u2225","DownArrowBar":"\u2913","downarrow":"\u2193","DownArrow":"\u2193","Downarrow":"\u21d3","DownArrowUpArrow":"\u21f5","DownBreve":"\u0311","downdownarrows":"\u21ca","downharpoonleft":"\u21c3","downharpoonright":"\u21c2","DownLeftRightVector":"\u2950","DownLeftTeeVector":"\u295e","DownLeftVectorBar":"\u2956","DownLeftVector":"\u21bd","DownRightTeeVector":"\u295f","DownRightVectorBar":"\u2957","DownRightVector":"\u21c1","DownTeeArrow":"\u21a7","DownTee":"\u22a4","drbkarow":"\u2910","drcorn":"\u231f","drcrop":"\u230c","Dscr":"\u{1d49f}","dscr":"\u{1d4b9}","DScy":"\u0405","dscy":"\u0455","dsol":"\u29f6","Dstrok":"\u0110","dstrok":"\u0111","dtdot":"\u22f1","dtri":"\u25bf","dtrif":"\u25be","duarr":"\u21f5","duhar":"\u296f","dwangle":"\u29a6","DZcy":"\u040f","dzcy":"\u045f","dzigrarr":"\u27ff","Eacute":"\xc9","eacute":"\xe9","easter":"\u2a6e","Ecaron":"\u011a","ecaron":"\u011b","Ecirc":"\xca","ecirc":"\xea","ecir":"\u2256","ecolon":"\u2255","Ecy":"\u042d","ecy":"\u044d","eDDot":"\u2a77","Edot":"\u0116","edot":"\u0117","eDot":"\u2251","ee":"\u2147","efDot":"\u2252","Efr":"\u{1d508}","efr":"\u{1d522}","eg":"\u2a9a","Egrave":"\xc8","egrave":"\xe8","egs":"\u2a96","egsdot":"\u2a98","el":"\u2a99","Element":"\u2208","elinters":"\u23e7","ell":"\u2113","els":"\u2a95","elsdot":"\u2a97","Emacr":"\u0112","emacr":"\u0113","empty":"\u2205","emptyset":"\u2205","EmptySmallSquare":"\u25fb","emptyv":"\u2205","EmptyVerySmallSquare":"\u25ab","emsp13":"\u2004","emsp14":"\u2005","emsp":"\u2003","ENG":"\u014a","eng":"\u014b","ensp":"\u2002","Eogon":"\u0118","eogon":"\u0119","Eopf":"\u{1d53c}","eopf":"\u{1d556}","epar":"\u22d5","eparsl":"\u29e3","eplus":"\u2a71","epsi":"\u03b5","Epsilon":"\u0395","epsilon":"\u03b5","epsiv":"\u03f5","eqcirc":"\u2256","eqcolon":"\u2255","eqsim":"\u2242","eqslantgtr":"\u2a96","eqslantless":"\u2a95","Equal":"\u2a75","equals":"=","EqualTilde":"\u2242","equest":"\u225f","Equilibrium":"\u21cc","equiv":"\u2261","equivDD":"\u2a78","eqvparsl":"\u29e5","erarr":"\u2971","erDot":"\u2253","escr":"\u212f","Escr":"\u2130","esdot":"\u2250","Esim":"\u2a73","esim":"\u2242","Eta":"\u0397","eta":"\u03b7","ETH":"\xd0","eth":"\xf0","Euml":"\xcb","euml":"\xeb","euro":"\u20ac","excl":"!","exist":"\u2203","Exists":"\u2203","expectation":"\u2130","exponentiale":"\u2147","ExponentialE":"\u2147","fallingdotseq":"\u2252","Fcy":"\u0424","fcy":"\u0444","female":"\u2640","ffilig":"\ufb03","fflig":"\ufb00","ffllig":"\ufb04","Ffr":"\u{1d509}","ffr":"\u{1d523}","filig":"\ufb01","FilledSmallSquare":"\u25fc","FilledVerySmallSquare":"\u25aa","fjlig":"fj","flat":"\u266d","fllig":"\ufb02","fltns":"\u25b1","fnof":"\u0192","Fopf":"\u{1d53d}","fopf":"\u{1d557}","forall":"\u2200","ForAll":"\u2200","fork":"\u22d4","forkv":"\u2ad9","Fouriertrf":"\u2131","fpartint":"\u2a0d","frac12":"\xbd","frac13":"\u2153","frac14":"\xbc","frac15":"\u2155","frac16":"\u2159","frac18":"\u215b","frac23":"\u2154","frac25":"\u2156","frac34":"\xbe","frac35":"\u2157","frac38":"\u215c","frac45":"\u2158","frac56":"\u215a","frac58":"\u215d","frac78":"\u215e","frasl":"\u2044","frown":"\u2322","fscr":"\u{1d4bb}","Fscr":"\u2131","gacute":"\u01f5","Gamma":"\u0393","gamma":"\u03b3","Gammad":"\u03dc","gammad":"\u03dd","gap":"\u2a86","Gbreve":"\u011e","gbreve":"\u011f","Gcedil":"\u0122","Gcirc":"\u011c","gcirc":"\u011d","Gcy":"\u0413","gcy":"\u0433","Gdot":"\u0120","gdot":"\u0121","ge":"\u2265","gE":"\u2267","gEl":"\u2a8c","gel":"\u22db","geq":"\u2265","geqq":"\u2267","geqslant":"\u2a7e","gescc":"\u2aa9","ges":"\u2a7e","gesdot":"\u2a80","gesdoto":"\u2a82","gesdotol":"\u2a84","gesl":"\u22db\ufe00","gesles":"\u2a94","Gfr":"\u{1d50a}","gfr":"\u{1d524}","gg":"\u226b","Gg":"\u22d9","ggg":"\u22d9","gimel":"\u2137","GJcy":"\u0403","gjcy":"\u0453","gla":"\u2aa5","gl":"\u2277","glE":"\u2a92","glj":"\u2aa4","gnap":"\u2a8a","gnapprox":"\u2a8a","gne":"\u2a88","gnE":"\u2269","gneq":"\u2a88","gneqq":"\u2269","gnsim":"\u22e7","Gopf":"\u{1d53e}","gopf":"\u{1d558}","grave":"`","GreaterEqual":"\u2265","GreaterEqualLess":"\u22db","GreaterFullEqual":"\u2267","GreaterGreater":"\u2aa2","GreaterLess":"\u2277","GreaterSlantEqual":"\u2a7e","GreaterTilde":"\u2273","Gscr":"\u{1d4a2}","gscr":"\u210a","gsim":"\u2273","gsime":"\u2a8e","gsiml":"\u2a90","gtcc":"\u2aa7","gtcir":"\u2a7a","gt":">","GT":">","Gt":"\u226b","gtdot":"\u22d7","gtlPar":"\u2995","gtquest":"\u2a7c","gtrapprox":"\u2a86","gtrarr":"\u2978","gtrdot":"\u22d7","gtreqless":"\u22db","gtreqqless":"\u2a8c","gtrless":"\u2277","gtrsim":"\u2273","gvertneqq":"\u2269\ufe00","gvnE":"\u2269\ufe00","Hacek":"\u02c7","hairsp":"\u200a","half":"\xbd","hamilt":"\u210b","HARDcy":"\u042a","hardcy":"\u044a","harrcir":"\u2948","harr":"\u2194","hArr":"\u21d4","harrw":"\u21ad","Hat":"^","hbar":"\u210f","Hcirc":"\u0124","hcirc":"\u0125","hearts":"\u2665","heartsuit":"\u2665","hellip":"\u2026","hercon":"\u22b9","hfr":"\u{1d525}","Hfr":"\u210c","HilbertSpace":"\u210b","hksearow":"\u2925","hkswarow":"\u2926","hoarr":"\u21ff","homtht":"\u223b","hookleftarrow":"\u21a9","hookrightarrow":"\u21aa","hopf":"\u{1d559}","Hopf":"\u210d","horbar":"\u2015","HorizontalLine":"\u2500","hscr":"\u{1d4bd}","Hscr":"\u210b","hslash":"\u210f","Hstrok":"\u0126","hstrok":"\u0127","HumpDownHump":"\u224e","HumpEqual":"\u224f","hybull":"\u2043","hyphen":"\u2010","Iacute":"\xcd","iacute":"\xed","ic":"\u2063","Icirc":"\xce","icirc":"\xee","Icy":"\u0418","icy":"\u0438","Idot":"\u0130","IEcy":"\u0415","iecy":"\u0435","iexcl":"\xa1","iff":"\u21d4","ifr":"\u{1d526}","Ifr":"\u2111","Igrave":"\xcc","igrave":"\xec","ii":"\u2148","iiiint":"\u2a0c","iiint":"\u222d","iinfin":"\u29dc","iiota":"\u2129","IJlig":"\u0132","ijlig":"\u0133","Imacr":"\u012a","imacr":"\u012b","image":"\u2111","ImaginaryI":"\u2148","imagline":"\u2110","imagpart":"\u2111","imath":"\u0131","Im":"\u2111","imof":"\u22b7","imped":"\u01b5","Implies":"\u21d2","incare":"\u2105","in":"\u2208","infin":"\u221e","infintie":"\u29dd","inodot":"\u0131","intcal":"\u22ba","int":"\u222b","Int":"\u222c","integers":"\u2124","Integral":"\u222b","intercal":"\u22ba","Intersection":"\u22c2","intlarhk":"\u2a17","intprod":"\u2a3c","InvisibleComma":"\u2063","InvisibleTimes":"\u2062","IOcy":"\u0401","iocy":"\u0451","Iogon":"\u012e","iogon":"\u012f","Iopf":"\u{1d540}","iopf":"\u{1d55a}","Iota":"\u0399","iota":"\u03b9","iprod":"\u2a3c","iquest":"\xbf","iscr":"\u{1d4be}","Iscr":"\u2110","isin":"\u2208","isindot":"\u22f5","isinE":"\u22f9","isins":"\u22f4","isinsv":"\u22f3","isinv":"\u2208","it":"\u2062","Itilde":"\u0128","itilde":"\u0129","Iukcy":"\u0406","iukcy":"\u0456","Iuml":"\xcf","iuml":"\xef","Jcirc":"\u0134","jcirc":"\u0135","Jcy":"\u0419","jcy":"\u0439","Jfr":"\u{1d50d}","jfr":"\u{1d527}","jmath":"\u0237","Jopf":"\u{1d541}","jopf":"\u{1d55b}","Jscr":"\u{1d4a5}","jscr":"\u{1d4bf}","Jsercy":"\u0408","jsercy":"\u0458","Jukcy":"\u0404","jukcy":"\u0454","Kappa":"\u039a","kappa":"\u03ba","kappav":"\u03f0","Kcedil":"\u0136","kcedil":"\u0137","Kcy":"\u041a","kcy":"\u043a","Kfr":"\u{1d50e}","kfr":"\u{1d528}","kgreen":"\u0138","KHcy":"\u0425","khcy":"\u0445","KJcy":"\u040c","kjcy":"\u045c","Kopf":"\u{1d542}","kopf":"\u{1d55c}","Kscr":"\u{1d4a6}","kscr":"\u{1d4c0}","lAarr":"\u21da","Lacute":"\u0139","lacute":"\u013a","laemptyv":"\u29b4","lagran":"\u2112","Lambda":"\u039b","lambda":"\u03bb","lang":"\u27e8","Lang":"\u27ea","langd":"\u2991","langle":"\u27e8","lap":"\u2a85","Laplacetrf":"\u2112","laquo":"\xab","larrb":"\u21e4","larrbfs":"\u291f","larr":"\u2190","Larr":"\u219e","lArr":"\u21d0","larrfs":"\u291d","larrhk":"\u21a9","larrlp":"\u21ab","larrpl":"\u2939","larrsim":"\u2973","larrtl":"\u21a2","latail":"\u2919","lAtail":"\u291b","lat":"\u2aab","late":"\u2aad","lates":"\u2aad\ufe00","lbarr":"\u290c","lBarr":"\u290e","lbbrk":"\u2772","lbrace":"{","lbrack":"[","lbrke":"\u298b","lbrksld":"\u298f","lbrkslu":"\u298d","Lcaron":"\u013d","lcaron":"\u013e","Lcedil":"\u013b","lcedil":"\u013c","lceil":"\u2308","lcub":"{","Lcy":"\u041b","lcy":"\u043b","ldca":"\u2936","ldquo":"\u201c","ldquor":"\u201e","ldrdhar":"\u2967","ldrushar":"\u294b","ldsh":"\u21b2","le":"\u2264","lE":"\u2266","LeftAngleBracket":"\u27e8","LeftArrowBar":"\u21e4","leftarrow":"\u2190","LeftArrow":"\u2190","Leftarrow":"\u21d0","LeftArrowRightArrow":"\u21c6","leftarrowtail":"\u21a2","LeftCeiling":"\u2308","LeftDoubleBracket":"\u27e6","LeftDownTeeVector":"\u2961","LeftDownVectorBar":"\u2959","LeftDownVector":"\u21c3","LeftFloor":"\u230a","leftharpoondown":"\u21bd","leftharpoonup":"\u21bc","leftleftarrows":"\u21c7","leftrightarrow":"\u2194","LeftRightArrow":"\u2194","Leftrightarrow":"\u21d4","leftrightarrows":"\u21c6","leftrightharpoons":"\u21cb","leftrightsquigarrow":"\u21ad","LeftRightVector":"\u294e","LeftTeeArrow":"\u21a4","LeftTee":"\u22a3","LeftTeeVector":"\u295a","leftthreetimes":"\u22cb","LeftTriangleBar":"\u29cf","LeftTriangle":"\u22b2","LeftTriangleEqual":"\u22b4","LeftUpDownVector":"\u2951","LeftUpTeeVector":"\u2960","LeftUpVectorBar":"\u2958","LeftUpVector":"\u21bf","LeftVectorBar":"\u2952","LeftVector":"\u21bc","lEg":"\u2a8b","leg":"\u22da","leq":"\u2264","leqq":"\u2266","leqslant":"\u2a7d","lescc":"\u2aa8","les":"\u2a7d","lesdot":"\u2a7f","lesdoto":"\u2a81","lesdotor":"\u2a83","lesg":"\u22da\ufe00","lesges":"\u2a93","lessapprox":"\u2a85","lessdot":"\u22d6","lesseqgtr":"\u22da","lesseqqgtr":"\u2a8b","LessEqualGreater":"\u22da","LessFullEqual":"\u2266","LessGreater":"\u2276","lessgtr":"\u2276","LessLess":"\u2aa1","lesssim":"\u2272","LessSlantEqual":"\u2a7d","LessTilde":"\u2272","lfisht":"\u297c","lfloor":"\u230a","Lfr":"\u{1d50f}","lfr":"\u{1d529}","lg":"\u2276","lgE":"\u2a91","lHar":"\u2962","lhard":"\u21bd","lharu":"\u21bc","lharul":"\u296a","lhblk":"\u2584","LJcy":"\u0409","ljcy":"\u0459","llarr":"\u21c7","ll":"\u226a","Ll":"\u22d8","llcorner":"\u231e","Lleftarrow":"\u21da","llhard":"\u296b","lltri":"\u25fa","Lmidot":"\u013f","lmidot":"\u0140","lmoustache":"\u23b0","lmoust":"\u23b0","lnap":"\u2a89","lnapprox":"\u2a89","lne":"\u2a87","lnE":"\u2268","lneq":"\u2a87","lneqq":"\u2268","lnsim":"\u22e6","loang":"\u27ec","loarr":"\u21fd","lobrk":"\u27e6","longleftarrow":"\u27f5","LongLeftArrow":"\u27f5","Longleftarrow":"\u27f8","longleftrightarrow":"\u27f7","LongLeftRightArrow":"\u27f7","Longleftrightarrow":"\u27fa","longmapsto":"\u27fc","longrightarrow":"\u27f6","LongRightArrow":"\u27f6","Longrightarrow":"\u27f9","looparrowleft":"\u21ab","looparrowright":"\u21ac","lopar":"\u2985","Lopf":"\u{1d543}","lopf":"\u{1d55d}","loplus":"\u2a2d","lotimes":"\u2a34","lowast":"\u2217","lowbar":"_","LowerLeftArrow":"\u2199","LowerRightArrow":"\u2198","loz":"\u25ca","lozenge":"\u25ca","lozf":"\u29eb","lpar":"(","lparlt":"\u2993","lrarr":"\u21c6","lrcorner":"\u231f","lrhar":"\u21cb","lrhard":"\u296d","lrm":"\u200e","lrtri":"\u22bf","lsaquo":"\u2039","lscr":"\u{1d4c1}","Lscr":"\u2112","lsh":"\u21b0","Lsh":"\u21b0","lsim":"\u2272","lsime":"\u2a8d","lsimg":"\u2a8f","lsqb":"[","lsquo":"\u2018","lsquor":"\u201a","Lstrok":"\u0141","lstrok":"\u0142","ltcc":"\u2aa6","ltcir":"\u2a79","lt":"<","LT":"<","Lt":"\u226a","ltdot":"\u22d6","lthree":"\u22cb","ltimes":"\u22c9","ltlarr":"\u2976","ltquest":"\u2a7b","ltri":"\u25c3","ltrie":"\u22b4","ltrif":"\u25c2","ltrPar":"\u2996","lurdshar":"\u294a","luruhar":"\u2966","lvertneqq":"\u2268\ufe00","lvnE":"\u2268\ufe00","macr":"\xaf","male":"\u2642","malt":"\u2720","maltese":"\u2720","Map":"\u2905","map":"\u21a6","mapsto":"\u21a6","mapstodown":"\u21a7","mapstoleft":"\u21a4","mapstoup":"\u21a5","marker":"\u25ae","mcomma":"\u2a29","Mcy":"\u041c","mcy":"\u043c","mdash":"\u2014","mDDot":"\u223a","measuredangle":"\u2221","MediumSpace":"\u205f","Mellintrf":"\u2133","Mfr":"\u{1d510}","mfr":"\u{1d52a}","mho":"\u2127","micro":"\xb5","midast":"*","midcir":"\u2af0","mid":"\u2223","middot":"\xb7","minusb":"\u229f","minus":"\u2212","minusd":"\u2238","minusdu":"\u2a2a","MinusPlus":"\u2213","mlcp":"\u2adb","mldr":"\u2026","mnplus":"\u2213","models":"\u22a7","Mopf":"\u{1d544}","mopf":"\u{1d55e}","mp":"\u2213","mscr":"\u{1d4c2}","Mscr":"\u2133","mstpos":"\u223e","Mu":"\u039c","mu":"\u03bc","multimap":"\u22b8","mumap":"\u22b8","nabla":"\u2207","Nacute":"\u0143","nacute":"\u0144","nang":"\u2220\u20d2","nap":"\u2249","napE":"\u2a70\u0338","napid":"\u224b\u0338","napos":"\u0149","napprox":"\u2249","natural":"\u266e","naturals":"\u2115","natur":"\u266e","nbsp":"\xa0","nbump":"\u224e\u0338","nbumpe":"\u224f\u0338","ncap":"\u2a43","Ncaron":"\u0147","ncaron":"\u0148","Ncedil":"\u0145","ncedil":"\u0146","ncong":"\u2247","ncongdot":"\u2a6d\u0338","ncup":"\u2a42","Ncy":"\u041d","ncy":"\u043d","ndash":"\u2013","nearhk":"\u2924","nearr":"\u2197","neArr":"\u21d7","nearrow":"\u2197","ne":"\u2260","nedot":"\u2250\u0338","NegativeMediumSpace":"\u200b","NegativeThickSpace":"\u200b","NegativeThinSpace":"\u200b","NegativeVeryThinSpace":"\u200b","nequiv":"\u2262","nesear":"\u2928","nesim":"\u2242\u0338","NestedGreaterGreater":"\u226b","NestedLessLess":"\u226a","NewLine":"\\n","nexist":"\u2204","nexists":"\u2204","Nfr":"\u{1d511}","nfr":"\u{1d52b}","ngE":"\u2267\u0338","nge":"\u2271","ngeq":"\u2271","ngeqq":"\u2267\u0338","ngeqslant":"\u2a7e\u0338","nges":"\u2a7e\u0338","nGg":"\u22d9\u0338","ngsim":"\u2275","nGt":"\u226b\u20d2","ngt":"\u226f","ngtr":"\u226f","nGtv":"\u226b\u0338","nharr":"\u21ae","nhArr":"\u21ce","nhpar":"\u2af2","ni":"\u220b","nis":"\u22fc","nisd":"\u22fa","niv":"\u220b","NJcy":"\u040a","njcy":"\u045a","nlarr":"\u219a","nlArr":"\u21cd","nldr":"\u2025","nlE":"\u2266\u0338","nle":"\u2270","nleftarrow":"\u219a","nLeftarrow":"\u21cd","nleftrightarrow":"\u21ae","nLeftrightarrow":"\u21ce","nleq":"\u2270","nleqq":"\u2266\u0338","nleqslant":"\u2a7d\u0338","nles":"\u2a7d\u0338","nless":"\u226e","nLl":"\u22d8\u0338","nlsim":"\u2274","nLt":"\u226a\u20d2","nlt":"\u226e","nltri":"\u22ea","nltrie":"\u22ec","nLtv":"\u226a\u0338","nmid":"\u2224","NoBreak":"\u2060","NonBreakingSpace":"\xa0","nopf":"\u{1d55f}","Nopf":"\u2115","Not":"\u2aec","not":"\xac","NotCongruent":"\u2262","NotCupCap":"\u226d","NotDoubleVerticalBar":"\u2226","NotElement":"\u2209","NotEqual":"\u2260","NotEqualTilde":"\u2242\u0338","NotExists":"\u2204","NotGreater":"\u226f","NotGreaterEqual":"\u2271","NotGreaterFullEqual":"\u2267\u0338","NotGreaterGreater":"\u226b\u0338","NotGreaterLess":"\u2279","NotGreaterSlantEqual":"\u2a7e\u0338","NotGreaterTilde":"\u2275","NotHumpDownHump":"\u224e\u0338","NotHumpEqual":"\u224f\u0338","notin":"\u2209","notindot":"\u22f5\u0338","notinE":"\u22f9\u0338","notinva":"\u2209","notinvb":"\u22f7","notinvc":"\u22f6","NotLeftTriangleBar":"\u29cf\u0338","NotLeftTriangle":"\u22ea","NotLeftTriangleEqual":"\u22ec","NotLess":"\u226e","NotLessEqual":"\u2270","NotLessGreater":"\u2278","NotLessLess":"\u226a\u0338","NotLessSlantEqual":"\u2a7d\u0338","NotLessTilde":"\u2274","NotNestedGreaterGreater":"\u2aa2\u0338","NotNestedLessLess":"\u2aa1\u0338","notni":"\u220c","notniva":"\u220c","notnivb":"\u22fe","notnivc":"\u22fd","NotPrecedes":"\u2280","NotPrecedesEqual":"\u2aaf\u0338","NotPrecedesSlantEqual":"\u22e0","NotReverseElement":"\u220c","NotRightTriangleBar":"\u29d0\u0338","NotRightTriangle":"\u22eb","NotRightTriangleEqual":"\u22ed","NotSquareSubset":"\u228f\u0338","NotSquareSubsetEqual":"\u22e2","NotSquareSuperset":"\u2290\u0338","NotSquareSupersetEqual":"\u22e3","NotSubset":"\u2282\u20d2","NotSubsetEqual":"\u2288","NotSucceeds":"\u2281","NotSucceedsEqual":"\u2ab0\u0338","NotSucceedsSlantEqual":"\u22e1","NotSucceedsTilde":"\u227f\u0338","NotSuperset":"\u2283\u20d2","NotSupersetEqual":"\u2289","NotTilde":"\u2241","NotTildeEqual":"\u2244","NotTildeFullEqual":"\u2247","NotTildeTilde":"\u2249","NotVerticalBar":"\u2224","nparallel":"\u2226","npar":"\u2226","nparsl":"\u2afd\u20e5","npart":"\u2202\u0338","npolint":"\u2a14","npr":"\u2280","nprcue":"\u22e0","nprec":"\u2280","npreceq":"\u2aaf\u0338","npre":"\u2aaf\u0338","nrarrc":"\u2933\u0338","nrarr":"\u219b","nrArr":"\u21cf","nrarrw":"\u219d\u0338","nrightarrow":"\u219b","nRightarrow":"\u21cf","nrtri":"\u22eb","nrtrie":"\u22ed","nsc":"\u2281","nsccue":"\u22e1","nsce":"\u2ab0\u0338","Nscr":"\u{1d4a9}","nscr":"\u{1d4c3}","nshortmid":"\u2224","nshortparallel":"\u2226","nsim":"\u2241","nsime":"\u2244","nsimeq":"\u2244","nsmid":"\u2224","nspar":"\u2226","nsqsube":"\u22e2","nsqsupe":"\u22e3","nsub":"\u2284","nsubE":"\u2ac5\u0338","nsube":"\u2288","nsubset":"\u2282\u20d2","nsubseteq":"\u2288","nsubseteqq":"\u2ac5\u0338","nsucc":"\u2281","nsucceq":"\u2ab0\u0338","nsup":"\u2285","nsupE":"\u2ac6\u0338","nsupe":"\u2289","nsupset":"\u2283\u20d2","nsupseteq":"\u2289","nsupseteqq":"\u2ac6\u0338","ntgl":"\u2279","Ntilde":"\xd1","ntilde":"\xf1","ntlg":"\u2278","ntriangleleft":"\u22ea","ntrianglelefteq":"\u22ec","ntriangleright":"\u22eb","ntrianglerighteq":"\u22ed","Nu":"\u039d","nu":"\u03bd","num":"#","numero":"\u2116","numsp":"\u2007","nvap":"\u224d\u20d2","nvdash":"\u22ac","nvDash":"\u22ad","nVdash":"\u22ae","nVDash":"\u22af","nvge":"\u2265\u20d2","nvgt":">\u20d2","nvHarr":"\u2904","nvinfin":"\u29de","nvlArr":"\u2902","nvle":"\u2264\u20d2","nvlt":"<\u20d2","nvltrie":"\u22b4\u20d2","nvrArr":"\u2903","nvrtrie":"\u22b5\u20d2","nvsim":"\u223c\u20d2","nwarhk":"\u2923","nwarr":"\u2196","nwArr":"\u21d6","nwarrow":"\u2196","nwnear":"\u2927","Oacute":"\xd3","oacute":"\xf3","oast":"\u229b","Ocirc":"\xd4","ocirc":"\xf4","ocir":"\u229a","Ocy":"\u041e","ocy":"\u043e","odash":"\u229d","Odblac":"\u0150","odblac":"\u0151","odiv":"\u2a38","odot":"\u2299","odsold":"\u29bc","OElig":"\u0152","oelig":"\u0153","ofcir":"\u29bf","Ofr":"\u{1d512}","ofr":"\u{1d52c}","ogon":"\u02db","Ograve":"\xd2","ograve":"\xf2","ogt":"\u29c1","ohbar":"\u29b5","ohm":"\u03a9","oint":"\u222e","olarr":"\u21ba","olcir":"\u29be","olcross":"\u29bb","oline":"\u203e","olt":"\u29c0","Omacr":"\u014c","omacr":"\u014d","Omega":"\u03a9","omega":"\u03c9","Omicron":"\u039f","omicron":"\u03bf","omid":"\u29b6","ominus":"\u2296","Oopf":"\u{1d546}","oopf":"\u{1d560}","opar":"\u29b7","OpenCurlyDoubleQuote":"\u201c","OpenCurlyQuote":"\u2018","operp":"\u29b9","oplus":"\u2295","orarr":"\u21bb","Or":"\u2a54","or":"\u2228","ord":"\u2a5d","order":"\u2134","orderof":"\u2134","ordf":"\xaa","ordm":"\xba","origof":"\u22b6","oror":"\u2a56","orslope":"\u2a57","orv":"\u2a5b","oS":"\u24c8","Oscr":"\u{1d4aa}","oscr":"\u2134","Oslash":"\xd8","oslash":"\xf8","osol":"\u2298","Otilde":"\xd5","otilde":"\xf5","otimesas":"\u2a36","Otimes":"\u2a37","otimes":"\u2297","Ouml":"\xd6","ouml":"\xf6","ovbar":"\u233d","OverBar":"\u203e","OverBrace":"\u23de","OverBracket":"\u23b4","OverParenthesis":"\u23dc","para":"\xb6","parallel":"\u2225","par":"\u2225","parsim":"\u2af3","parsl":"\u2afd","part":"\u2202","PartialD":"\u2202","Pcy":"\u041f","pcy":"\u043f","percnt":"%","period":".","permil":"\u2030","perp":"\u22a5","pertenk":"\u2031","Pfr":"\u{1d513}","pfr":"\u{1d52d}","Phi":"\u03a6","phi":"\u03c6","phiv":"\u03d5","phmmat":"\u2133","phone":"\u260e","Pi":"\u03a0","pi":"\u03c0","pitchfork":"\u22d4","piv":"\u03d6","planck":"\u210f","planckh":"\u210e","plankv":"\u210f","plusacir":"\u2a23","plusb":"\u229e","pluscir":"\u2a22","plus":"+","plusdo":"\u2214","plusdu":"\u2a25","pluse":"\u2a72","PlusMinus":"\xb1","plusmn":"\xb1","plussim":"\u2a26","plustwo":"\u2a27","pm":"\xb1","Poincareplane":"\u210c","pointint":"\u2a15","popf":"\u{1d561}","Popf":"\u2119","pound":"\xa3","prap":"\u2ab7","Pr":"\u2abb","pr":"\u227a","prcue":"\u227c","precapprox":"\u2ab7","prec":"\u227a","preccurlyeq":"\u227c","Precedes":"\u227a","PrecedesEqual":"\u2aaf","PrecedesSlantEqual":"\u227c","PrecedesTilde":"\u227e","preceq":"\u2aaf","precnapprox":"\u2ab9","precneqq":"\u2ab5","precnsim":"\u22e8","pre":"\u2aaf","prE":"\u2ab3","precsim":"\u227e","prime":"\u2032","Prime":"\u2033","primes":"\u2119","prnap":"\u2ab9","prnE":"\u2ab5","prnsim":"\u22e8","prod":"\u220f","Product":"\u220f","profalar":"\u232e","profline":"\u2312","profsurf":"\u2313","prop":"\u221d","Proportional":"\u221d","Proportion":"\u2237","propto":"\u221d","prsim":"\u227e","prurel":"\u22b0","Pscr":"\u{1d4ab}","pscr":"\u{1d4c5}","Psi":"\u03a8","psi":"\u03c8","puncsp":"\u2008","Qfr":"\u{1d514}","qfr":"\u{1d52e}","qint":"\u2a0c","qopf":"\u{1d562}","Qopf":"\u211a","qprime":"\u2057","Qscr":"\u{1d4ac}","qscr":"\u{1d4c6}","quaternions":"\u210d","quatint":"\u2a16","quest":"?","questeq":"\u225f","quot":"\\"","QUOT":"\\"","rAarr":"\u21db","race":"\u223d\u0331","Racute":"\u0154","racute":"\u0155","radic":"\u221a","raemptyv":"\u29b3","rang":"\u27e9","Rang":"\u27eb","rangd":"\u2992","range":"\u29a5","rangle":"\u27e9","raquo":"\xbb","rarrap":"\u2975","rarrb":"\u21e5","rarrbfs":"\u2920","rarrc":"\u2933","rarr":"\u2192","Rarr":"\u21a0","rArr":"\u21d2","rarrfs":"\u291e","rarrhk":"\u21aa","rarrlp":"\u21ac","rarrpl":"\u2945","rarrsim":"\u2974","Rarrtl":"\u2916","rarrtl":"\u21a3","rarrw":"\u219d","ratail":"\u291a","rAtail":"\u291c","ratio":"\u2236","rationals":"\u211a","rbarr":"\u290d","rBarr":"\u290f","RBarr":"\u2910","rbbrk":"\u2773","rbrace":"}","rbrack":"]","rbrke":"\u298c","rbrksld":"\u298e","rbrkslu":"\u2990","Rcaron":"\u0158","rcaron":"\u0159","Rcedil":"\u0156","rcedil":"\u0157","rceil":"\u2309","rcub":"}","Rcy":"\u0420","rcy":"\u0440","rdca":"\u2937","rdldhar":"\u2969","rdquo":"\u201d","rdquor":"\u201d","rdsh":"\u21b3","real":"\u211c","realine":"\u211b","realpart":"\u211c","reals":"\u211d","Re":"\u211c","rect":"\u25ad","reg":"\xae","REG":"\xae","ReverseElement":"\u220b","ReverseEquilibrium":"\u21cb","ReverseUpEquilibrium":"\u296f","rfisht":"\u297d","rfloor":"\u230b","rfr":"\u{1d52f}","Rfr":"\u211c","rHar":"\u2964","rhard":"\u21c1","rharu":"\u21c0","rharul":"\u296c","Rho":"\u03a1","rho":"\u03c1","rhov":"\u03f1","RightAngleBracket":"\u27e9","RightArrowBar":"\u21e5","rightarrow":"\u2192","RightArrow":"\u2192","Rightarrow":"\u21d2","RightArrowLeftArrow":"\u21c4","rightarrowtail":"\u21a3","RightCeiling":"\u2309","RightDoubleBracket":"\u27e7","RightDownTeeVector":"\u295d","RightDownVectorBar":"\u2955","RightDownVector":"\u21c2","RightFloor":"\u230b","rightharpoondown":"\u21c1","rightharpoonup":"\u21c0","rightleftarrows":"\u21c4","rightleftharpoons":"\u21cc","rightrightarrows":"\u21c9","rightsquigarrow":"\u219d","RightTeeArrow":"\u21a6","RightTee":"\u22a2","RightTeeVector":"\u295b","rightthreetimes":"\u22cc","RightTriangleBar":"\u29d0","RightTriangle":"\u22b3","RightTriangleEqual":"\u22b5","RightUpDownVector":"\u294f","RightUpTeeVector":"\u295c","RightUpVectorBar":"\u2954","RightUpVector":"\u21be","RightVectorBar":"\u2953","RightVector":"\u21c0","ring":"\u02da","risingdotseq":"\u2253","rlarr":"\u21c4","rlhar":"\u21cc","rlm":"\u200f","rmoustache":"\u23b1","rmoust":"\u23b1","rnmid":"\u2aee","roang":"\u27ed","roarr":"\u21fe","robrk":"\u27e7","ropar":"\u2986","ropf":"\u{1d563}","Ropf":"\u211d","roplus":"\u2a2e","rotimes":"\u2a35","RoundImplies":"\u2970","rpar":")","rpargt":"\u2994","rppolint":"\u2a12","rrarr":"\u21c9","Rrightarrow":"\u21db","rsaquo":"\u203a","rscr":"\u{1d4c7}","Rscr":"\u211b","rsh":"\u21b1","Rsh":"\u21b1","rsqb":"]","rsquo":"\u2019","rsquor":"\u2019","rthree":"\u22cc","rtimes":"\u22ca","rtri":"\u25b9","rtrie":"\u22b5","rtrif":"\u25b8","rtriltri":"\u29ce","RuleDelayed":"\u29f4","ruluhar":"\u2968","rx":"\u211e","Sacute":"\u015a","sacute":"\u015b","sbquo":"\u201a","scap":"\u2ab8","Scaron":"\u0160","scaron":"\u0161","Sc":"\u2abc","sc":"\u227b","sccue":"\u227d","sce":"\u2ab0","scE":"\u2ab4","Scedil":"\u015e","scedil":"\u015f","Scirc":"\u015c","scirc":"\u015d","scnap":"\u2aba","scnE":"\u2ab6","scnsim":"\u22e9","scpolint":"\u2a13","scsim":"\u227f","Scy":"\u0421","scy":"\u0441","sdotb":"\u22a1","sdot":"\u22c5","sdote":"\u2a66","searhk":"\u2925","searr":"\u2198","seArr":"\u21d8","searrow":"\u2198","sect":"\xa7","semi":";","seswar":"\u2929","setminus":"\u2216","setmn":"\u2216","sext":"\u2736","Sfr":"\u{1d516}","sfr":"\u{1d530}","sfrown":"\u2322","sharp":"\u266f","SHCHcy":"\u0429","shchcy":"\u0449","SHcy":"\u0428","shcy":"\u0448","ShortDownArrow":"\u2193","ShortLeftArrow":"\u2190","shortmid":"\u2223","shortparallel":"\u2225","ShortRightArrow":"\u2192","ShortUpArrow":"\u2191","shy":"\xad","Sigma":"\u03a3","sigma":"\u03c3","sigmaf":"\u03c2","sigmav":"\u03c2","sim":"\u223c","simdot":"\u2a6a","sime":"\u2243","simeq":"\u2243","simg":"\u2a9e","simgE":"\u2aa0","siml":"\u2a9d","simlE":"\u2a9f","simne":"\u2246","simplus":"\u2a24","simrarr":"\u2972","slarr":"\u2190","SmallCircle":"\u2218","smallsetminus":"\u2216","smashp":"\u2a33","smeparsl":"\u29e4","smid":"\u2223","smile":"\u2323","smt":"\u2aaa","smte":"\u2aac","smtes":"\u2aac\ufe00","SOFTcy":"\u042c","softcy":"\u044c","solbar":"\u233f","solb":"\u29c4","sol":"/","Sopf":"\u{1d54a}","sopf":"\u{1d564}","spades":"\u2660","spadesuit":"\u2660","spar":"\u2225","sqcap":"\u2293","sqcaps":"\u2293\ufe00","sqcup":"\u2294","sqcups":"\u2294\ufe00","Sqrt":"\u221a","sqsub":"\u228f","sqsube":"\u2291","sqsubset":"\u228f","sqsubseteq":"\u2291","sqsup":"\u2290","sqsupe":"\u2292","sqsupset":"\u2290","sqsupseteq":"\u2292","square":"\u25a1","Square":"\u25a1","SquareIntersection":"\u2293","SquareSubset":"\u228f","SquareSubsetEqual":"\u2291","SquareSuperset":"\u2290","SquareSupersetEqual":"\u2292","SquareUnion":"\u2294","squarf":"\u25aa","squ":"\u25a1","squf":"\u25aa","srarr":"\u2192","Sscr":"\u{1d4ae}","sscr":"\u{1d4c8}","ssetmn":"\u2216","ssmile":"\u2323","sstarf":"\u22c6","Star":"\u22c6","star":"\u2606","starf":"\u2605","straightepsilon":"\u03f5","straightphi":"\u03d5","strns":"\xaf","sub":"\u2282","Sub":"\u22d0","subdot":"\u2abd","subE":"\u2ac5","sube":"\u2286","subedot":"\u2ac3","submult":"\u2ac1","subnE":"\u2acb","subne":"\u228a","subplus":"\u2abf","subrarr":"\u2979","subset":"\u2282","Subset":"\u22d0","subseteq":"\u2286","subseteqq":"\u2ac5","SubsetEqual":"\u2286","subsetneq":"\u228a","subsetneqq":"\u2acb","subsim":"\u2ac7","subsub":"\u2ad5","subsup":"\u2ad3","succapprox":"\u2ab8","succ":"\u227b","succcurlyeq":"\u227d","Succeeds":"\u227b","SucceedsEqual":"\u2ab0","SucceedsSlantEqual":"\u227d","SucceedsTilde":"\u227f","succeq":"\u2ab0","succnapprox":"\u2aba","succneqq":"\u2ab6","succnsim":"\u22e9","succsim":"\u227f","SuchThat":"\u220b","sum":"\u2211","Sum":"\u2211","sung":"\u266a","sup1":"\xb9","sup2":"\xb2","sup3":"\xb3","sup":"\u2283","Sup":"\u22d1","supdot":"\u2abe","supdsub":"\u2ad8","supE":"\u2ac6","supe":"\u2287","supedot":"\u2ac4","Superset":"\u2283","SupersetEqual":"\u2287","suphsol":"\u27c9","suphsub":"\u2ad7","suplarr":"\u297b","supmult":"\u2ac2","supnE":"\u2acc","supne":"\u228b","supplus":"\u2ac0","supset":"\u2283","Supset":"\u22d1","supseteq":"\u2287","supseteqq":"\u2ac6","supsetneq":"\u228b","supsetneqq":"\u2acc","supsim":"\u2ac8","supsub":"\u2ad4","supsup":"\u2ad6","swarhk":"\u2926","swarr":"\u2199","swArr":"\u21d9","swarrow":"\u2199","swnwar":"\u292a","szlig":"\xdf","Tab":"\\t","target":"\u2316","Tau":"\u03a4","tau":"\u03c4","tbrk":"\u23b4","Tcaron":"\u0164","tcaron":"\u0165","Tcedil":"\u0162","tcedil":"\u0163","Tcy":"\u0422","tcy":"\u0442","tdot":"\u20db","telrec":"\u2315","Tfr":"\u{1d517}","tfr":"\u{1d531}","there4":"\u2234","therefore":"\u2234","Therefore":"\u2234","Theta":"\u0398","theta":"\u03b8","thetasym":"\u03d1","thetav":"\u03d1","thickapprox":"\u2248","thicksim":"\u223c","ThickSpace":"\u205f\u200a","ThinSpace":"\u2009","thinsp":"\u2009","thkap":"\u2248","thksim":"\u223c","THORN":"\xde","thorn":"\xfe","tilde":"\u02dc","Tilde":"\u223c","TildeEqual":"\u2243","TildeFullEqual":"\u2245","TildeTilde":"\u2248","timesbar":"\u2a31","timesb":"\u22a0","times":"\xd7","timesd":"\u2a30","tint":"\u222d","toea":"\u2928","topbot":"\u2336","topcir":"\u2af1","top":"\u22a4","Topf":"\u{1d54b}","topf":"\u{1d565}","topfork":"\u2ada","tosa":"\u2929","tprime":"\u2034","trade":"\u2122","TRADE":"\u2122","triangle":"\u25b5","triangledown":"\u25bf","triangleleft":"\u25c3","trianglelefteq":"\u22b4","triangleq":"\u225c","triangleright":"\u25b9","trianglerighteq":"\u22b5","tridot":"\u25ec","trie":"\u225c","triminus":"\u2a3a","TripleDot":"\u20db","triplus":"\u2a39","trisb":"\u29cd","tritime":"\u2a3b","trpezium":"\u23e2","Tscr":"\u{1d4af}","tscr":"\u{1d4c9}","TScy":"\u0426","tscy":"\u0446","TSHcy":"\u040b","tshcy":"\u045b","Tstrok":"\u0166","tstrok":"\u0167","twixt":"\u226c","twoheadleftarrow":"\u219e","twoheadrightarrow":"\u21a0","Uacute":"\xda","uacute":"\xfa","uarr":"\u2191","Uarr":"\u219f","uArr":"\u21d1","Uarrocir":"\u2949","Ubrcy":"\u040e","ubrcy":"\u045e","Ubreve":"\u016c","ubreve":"\u016d","Ucirc":"\xdb","ucirc":"\xfb","Ucy":"\u0423","ucy":"\u0443","udarr":"\u21c5","Udblac":"\u0170","udblac":"\u0171","udhar":"\u296e","ufisht":"\u297e","Ufr":"\u{1d518}","ufr":"\u{1d532}","Ugrave":"\xd9","ugrave":"\xf9","uHar":"\u2963","uharl":"\u21bf","uharr":"\u21be","uhblk":"\u2580","ulcorn":"\u231c","ulcorner":"\u231c","ulcrop":"\u230f","ultri":"\u25f8","Umacr":"\u016a","umacr":"\u016b","uml":"\xa8","UnderBar":"_","UnderBrace":"\u23df","UnderBracket":"\u23b5","UnderParenthesis":"\u23dd","Union":"\u22c3","UnionPlus":"\u228e","Uogon":"\u0172","uogon":"\u0173","Uopf":"\u{1d54c}","uopf":"\u{1d566}","UpArrowBar":"\u2912","uparrow":"\u2191","UpArrow":"\u2191","Uparrow":"\u21d1","UpArrowDownArrow":"\u21c5","updownarrow":"\u2195","UpDownArrow":"\u2195","Updownarrow":"\u21d5","UpEquilibrium":"\u296e","upharpoonleft":"\u21bf","upharpoonright":"\u21be","uplus":"\u228e","UpperLeftArrow":"\u2196","UpperRightArrow":"\u2197","upsi":"\u03c5","Upsi":"\u03d2","upsih":"\u03d2","Upsilon":"\u03a5","upsilon":"\u03c5","UpTeeArrow":"\u21a5","UpTee":"\u22a5","upuparrows":"\u21c8","urcorn":"\u231d","urcorner":"\u231d","urcrop":"\u230e","Uring":"\u016e","uring":"\u016f","urtri":"\u25f9","Uscr":"\u{1d4b0}","uscr":"\u{1d4ca}","utdot":"\u22f0","Utilde":"\u0168","utilde":"\u0169","utri":"\u25b5","utrif":"\u25b4","uuarr":"\u21c8","Uuml":"\xdc","uuml":"\xfc","uwangle":"\u29a7","vangrt":"\u299c","varepsilon":"\u03f5","varkappa":"\u03f0","varnothing":"\u2205","varphi":"\u03d5","varpi":"\u03d6","varpropto":"\u221d","varr":"\u2195","vArr":"\u21d5","varrho":"\u03f1","varsigma":"\u03c2","varsubsetneq":"\u228a\ufe00","varsubsetneqq":"\u2acb\ufe00","varsupsetneq":"\u228b\ufe00","varsupsetneqq":"\u2acc\ufe00","vartheta":"\u03d1","vartriangleleft":"\u22b2","vartriangleright":"\u22b3","vBar":"\u2ae8","Vbar":"\u2aeb","vBarv":"\u2ae9","Vcy":"\u0412","vcy":"\u0432","vdash":"\u22a2","vDash":"\u22a8","Vdash":"\u22a9","VDash":"\u22ab","Vdashl":"\u2ae6","veebar":"\u22bb","vee":"\u2228","Vee":"\u22c1","veeeq":"\u225a","vellip":"\u22ee","verbar":"|","Verbar":"\u2016","vert":"|","Vert":"\u2016","VerticalBar":"\u2223","VerticalLine":"|","VerticalSeparator":"\u2758","VerticalTilde":"\u2240","VeryThinSpace":"\u200a","Vfr":"\u{1d519}","vfr":"\u{1d533}","vltri":"\u22b2","vnsub":"\u2282\u20d2","vnsup":"\u2283\u20d2","Vopf":"\u{1d54d}","vopf":"\u{1d567}","vprop":"\u221d","vrtri":"\u22b3","Vscr":"\u{1d4b1}","vscr":"\u{1d4cb}","vsubnE":"\u2acb\ufe00","vsubne":"\u228a\ufe00","vsupnE":"\u2acc\ufe00","vsupne":"\u228b\ufe00","Vvdash":"\u22aa","vzigzag":"\u299a","Wcirc":"\u0174","wcirc":"\u0175","wedbar":"\u2a5f","wedge":"\u2227","Wedge":"\u22c0","wedgeq":"\u2259","weierp":"\u2118","Wfr":"\u{1d51a}","wfr":"\u{1d534}","Wopf":"\u{1d54e}","wopf":"\u{1d568}","wp":"\u2118","wr":"\u2240","wreath":"\u2240","Wscr":"\u{1d4b2}","wscr":"\u{1d4cc}","xcap":"\u22c2","xcirc":"\u25ef","xcup":"\u22c3","xdtri":"\u25bd","Xfr":"\u{1d51b}","xfr":"\u{1d535}","xharr":"\u27f7","xhArr":"\u27fa","Xi":"\u039e","xi":"\u03be","xlarr":"\u27f5","xlArr":"\u27f8","xmap":"\u27fc","xnis":"\u22fb","xodot":"\u2a00","Xopf":"\u{1d54f}","xopf":"\u{1d569}","xoplus":"\u2a01","xotime":"\u2a02","xrarr":"\u27f6","xrArr":"\u27f9","Xscr":"\u{1d4b3}","xscr":"\u{1d4cd}","xsqcup":"\u2a06","xuplus":"\u2a04","xutri":"\u25b3","xvee":"\u22c1","xwedge":"\u22c0","Yacute":"\xdd","yacute":"\xfd","YAcy":"\u042f","yacy":"\u044f","Ycirc":"\u0176","ycirc":"\u0177","Ycy":"\u042b","ycy":"\u044b","yen":"\xa5","Yfr":"\u{1d51c}","yfr":"\u{1d536}","YIcy":"\u0407","yicy":"\u0457","Yopf":"\u{1d550}","yopf":"\u{1d56a}","Yscr":"\u{1d4b4}","yscr":"\u{1d4ce}","YUcy":"\u042e","yucy":"\u044e","yuml":"\xff","Yuml":"\u0178","Zacute":"\u0179","zacute":"\u017a","Zcaron":"\u017d","zcaron":"\u017e","Zcy":"\u0417","zcy":"\u0437","Zdot":"\u017b","zdot":"\u017c","zeetrf":"\u2128","ZeroWidthSpace":"\u200b","Zeta":"\u0396","zeta":"\u03b6","zfr":"\u{1d537}","Zfr":"\u2128","ZHcy":"\u0416","zhcy":"\u0436","zigrarr":"\u21dd","zopf":"\u{1d56b}","Zopf":"\u2124","Zscr":"\u{1d4b5}","zscr":"\u{1d4cf}","zwj":"\u200d","zwnj":"\u200c"}')}},He=>{He(He.s=30)}]);